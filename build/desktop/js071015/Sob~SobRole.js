(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1223:function(e,t,o){},1224:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),a=d(o(1)),u=d(o(0)),l=o(17);function d(e){return e&&e.__esModule?e:{default:e}}o(1223);var f=(0,l.immutableRenderDecorator)((i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),s(t,[{key:"render",value:function(){var e=this.props,t=e.type,o=e.className,n=e.onClick;return a.default.createElement("div",{className:"container-wrap container-width-"+t+" "+o,onClick:n},this.props.children)}}]),t}(),r.displayName="ContainerWrap",r.propTypes={type:u.default.string.isRequired,className:u.default.string.isRequired},n=i))||n;t.default=f},1226:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=o(1),a=(r=s)&&r.__esModule?r:{default:r},u=o(17);o(1223);var l=(0,u.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),i(t,[{key:"render",value:function(){return a.default.createElement("div",{className:"flex-title"},this.props.children)}}]),t}())||n;t.default=l},1297:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProjectSomeCardList=t.getProjectAllCardList=t.getProjectTreeList=t.getProcessModelList=t.getProjectAllCard=t.refreshSobOption=t.deleteSobRole=t.modifySobRoleModule=t.saveSobRole=t.beforeEditSobRole=t.switchSobRoleCurrentRole=t.getSobRoleListFromSobConfig=t.setSobRoleModuleListValue=t.changeSobRoleCommonString=void 0;var n=d(o(37));o(38);var r=d(o(31)),i=d(o(52)),s=l(o(1426)),a=o(18),u=o(22);l(o(30)),l(o(27)),l(o(60)),l(o(43));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}var f=t.changeSobRoleCommonString=function(e,t){return{type:s.CHANGE_SOB_ROLE_COMMON_STRING,place:e,value:t}},c=(t.setSobRoleModuleListValue=function(e,t){return function(o){o({type:s.SET_SOB_ROLE_MODULE_LIST_VALUE,place:e,value:t})}},t.getSobRoleListFromSobConfig=function(e,t,o){return function(n){n({type:s.SWITCH_LOADING_MASK}),(0,r.default)("getrolelist","GET","sobId="+e+"&sobType="+t,function(i){(0,u.showMessage)(i)&&((0,r.default)("getrolepermission","GET","sobId="+e+"&roleId="+i.data.roleList[0].roleId,function(r){n({type:s.GET_SOB_ROLE_LIST_FROM_SOB_OPTION,sobType:t,sobId:e,sobName:o,receivedData:i.data,roleData:r.data})}),"SMART"===t&&(n(O(e)),n(I(e)))),n({type:s.SWITCH_LOADING_MASK})})}}),_=(t.switchSobRoleCurrentRole=function(e){return function(t,o){var n=o().sobRoleState.get("views");(0,r.default)("getrolepermission","GET","sobId="+n.get("sobId")+"&roleId="+e.get("roleId"),function(o){t({type:s.SWITCH_SOB_ROLE_CURRENT_ROLE,role:e,receivedData:o.data})})}},t.beforeEditSobRole=function(e){return function(t){t({type:s.BEFORE_EDIT_SOB_ROLE,status:e})}},t.saveSobRole=function(e,t,o,n){return function(i,a){i({type:s.SWITCH_LOADING_MASK});var l=a().sobRoleState.get("views");"insert"===o?(0,r.default)("addrole","POST",JSON.stringify({sobId:l.get("sobId"),sobType:l.get("sobType"),roleName:e}),function(e){(0,u.showMessage)(e)&&((0,r.default)("getrolelist","GET","sobId="+l.get("sobId")+"&sobType="+l.get("sobType"),function(t){i({type:s.AFTER_EDIT_SOB_ROLE,receivedData:e.data,roleList:t.data.roleList,roleTemp:{roleId:e.data.roleId,roleInfo:"",roleName:e.data.roleName}})}),i(_(l.get("sobId")))),i({type:s.SWITCH_LOADING_MASK})}):"modify"===o&&(0,r.default)("modifyrolename","POST",JSON.stringify({sobId:l.get("sobId"),sobType:l.get("sobType"),roleName:e,roleId:t.get("roleId")}),function(t){if((0,u.showMessage)(t)){var o=t.data.roleList.find(function(t){return t.roleName===e});i({type:s.AFTER_EDIT_SOB_ROLE,editType:"modify",index:n,roleTemp:o})}i(_(l.get("sobId"))),i({type:s.SWITCH_LOADING_MASK})})}},t.modifySobRoleModule=function(e){return function(t,o){t({type:s.SWITCH_LOADING_MASK});var n=o().sobRoleState,i=n.get("views"),a=n.get("roleTemp"),l=n.get("roleModuleTemp");(0,r.default)("modifyrole","POST",JSON.stringify({sobId:i.get("sobId"),sobType:i.get("sobType"),roleId:a.get("roleId"),roleName:a.get("roleName"),defaultRole:l.get("defaultRole"),moduleList:l.get("moduleList")}),function(o){(0,u.showMessage)(o,"show")&&(t({type:s.AFTER_MODIFY_SOB_ROLE,bool:(!1).value,receivedData:o.data}),e&&e()),t({type:s.SWITCH_LOADING_MASK})})}},t.deleteSobRole=function(e,t){return function(o,i){o({type:s.SWITCH_LOADING_MASK});var a=i().sobRoleState.get("views");(0,r.default)("deleterole","POST",JSON.stringify({sobId:a.get("sobId"),roleId:e.get("roleId")}),function(e){t(e),0===e.code?(n.default.success("操作成功"),o(c(a.get("sobId"),a.get("sobType"))),o(_(a.get("sobId")))):3004!==e.code&&(0,u.showMessage)(e),o({type:s.SWITCH_LOADING_MASK})})}},t.refreshSobOption=function(e){return function(t){(0,r.default)("sobOptionInit","GET","sobId="+e,function(e){(0,u.showMessage)(e)&&t({type:s.SOB_OPTION_INIT,receivedData:e.data})})}}),O=t.getProjectAllCard=function(e,t){return function(o,n){(0,i.default)("getProjectConfigHighTypeSob","GET","sobId="+e,function(n){if((0,u.showMessage)(n)){var r=n.data.map(function(e){return e.uuid});o(f("categoryRange",(0,a.fromJS)(r))),(0,i.default)("getProjectCardList","POST",JSON.stringify({sobId:e,categoryList:r,needCommonCard:!0,needAssist:!0,needMake:!0,needIndirect:!0,needMechanical:!0}),function(e){(0,u.showMessage)(e)&&(o(f("allCardListL",(0,a.fromJS)(e.data.result))),t&&t())})}})}},I=t.getProcessModelList=function(e){return function(t,o){(0,i.default)("getApprovalModelList","GET","sobId="+e,function(e){(0,u.showMessage)(e)&&t(f("processModelList",(0,a.fromJS)(e.data)))})}};t.getProjectTreeList=function(e,t){return function(o,n){var r=n().sobRoleState.get("views").get("sobId");(0,i.default)("getProjectTreeList","POST",JSON.stringify({sobId:r,categoryList:e}),function(e){if((0,u.showMessage)(e)){o(f("modalCategoryList",(0,a.fromJS)(e.data.typeList)));var r=n().sobRoleState.get("allCardListL");o(f("modalCardList",r)),o(f("selectCardList",(0,a.fromJS)([]))),t&&t()}})}},t.getProjectAllCardList=function(e,t,o,n){return function(t,r){var l=r().sobRoleState.get("views").get("sobId");t({type:s.SWITCH_LOADING_MASK}),o||(0,i.default)("getProjectTreeList","POST",JSON.stringify({sobId:l,categoryList:e}),function(e){(0,u.showMessage)(e)&&t(f("modalCategoryList",(0,a.fromJS)(e.data.typeList)))}),(0,i.default)("getProjectCardList","POST",JSON.stringify({sobId:l,categoryList:e,needCommonCard:!0,needAssist:!0,needMake:!0,needIndirect:!0,needMechanical:!0}),function(e){t({type:s.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(f("modalCardList",(0,a.fromJS)(e.data.result))),n&&n())})}},t.getProjectSomeCardList=function(e,t){return function(o,n){var r=n().sobRoleState.get("views").get("sobId");1==t?(0,i.default)("getProjectSubordinateCardList","POST",JSON.stringify({sobId:r,categoryUuid:e,listByCategory:!0,subordinateUuid:""}),function(e){(0,u.showMessage)(e)&&o(f("modalCardList",(0,a.fromJS)(e.data.resultList)))}):(0,i.default)("getProjectSubordinateCardList","POST",JSON.stringify({sobId:r,subordinateUuid:e,listByCategory:!1,categoryUuid:e}),function(e){(0,u.showMessage)(e)&&o(f("modalCardList",(0,a.fromJS)(e.data.resultList)))})}}},1347:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sobChangeCopyModuleItem=t.setSobChangeCopyModuleItem=t.initIdentifyingCodeTemp=t.getIdentifyingCodeList=t.changeSobPermissionList=t.deleteSobItemFetch=t.sobOptionRoleDelete=t.sobOptionCensorChange=t.getSobList=t.sobOptionSave=t.sobOptionChangeFunModuel=t.sobOptionChangeTime=t.sobOptionChangeSobTemplate=t.sobOptionChangeContent=void 0;var n,r=o(31),i=(n=r)&&n.__esModule?n:{default:n},s=O(o(184)),a=o(18),u=o(22),l=O(o(30)),d=O(o(27)),f=O(o(60)),c=O(o(43)),_=O(o(1297));function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}t.sobOptionChangeContent=function(e,t){return function(o){o({type:s.SOB_OPTION_CHANGE_CONTENT,name:e,value:t})}},t.sobOptionChangeSobTemplate=function(e){return function(t){t({type:s.SOB_OPTION_CHANGE_SOB_TEMPLATE,value:e})}},t.sobOptionChangeTime=function(e){return function(t){var o=e.split("-"),n=o[0],r=o[1];t({type:s.SOB_OPTION_CHANGE_TIME,firstyear:n,firstmonth:r})}},t.sobOptionChangeFunModuel=function(e,t){return function(o){o({type:s.SOB_OPTION_CHANGE_FUN_MODUEL,moduleCode:e.get("moduleCode"),value:t})}},t.sobOptionSave=function(e){return function(t,o){var n=o().sobOptionState.get("tempSob");if(n.getIn(["moduleInfo","GL"])&&n.getIn(["moduleInfo","GL","beOpen"])&&(n=n.setIn(["moduleInfo","ENCLOSURE_GL","beOpen"],!0)),n.getIn(["moduleInfo","GL"])&&!1===n.getIn(["moduleInfo","GL","beOpen"])&&(n=n.set("operatorlist",(0,a.fromJS)([])).set("vcObserverList",(0,a.fromJS)([]))),n.getIn(["moduleInfo","RUNNING"])&&n.getIn(["moduleInfo","RUNNING","beOpen"])&&(n=n.setIn(["moduleInfo","ENCLOSURE_RUN","beOpen"],!0)),n.getIn(["moduleInfo","RUNNING"])&&!1===n.getIn(["moduleInfo","RUNNING","beOpen"])&&(n=n.set("cashierList",(0,a.fromJS)([])).set("flowObserverList",(0,a.fromJS)([]))),n=n.delete("customizeList").delete("jrModelList"),e){t({type:s.SWITCH_LOADING_MASK});var r=o().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,i.default)("checkwarehousedisable","GET","sobId="+r,function(e){t({type:s.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(e.data.canDisable?l.Confirm({message:"关闭仓库核算后，历史流水及期初值将批量取消关联仓库，仓库设置将被清空。确认关闭仓库核算吗",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&d()}}):l.Alert("无法关闭仓库核算，账套内【有历史存货流水或存货期初值关联多个仓库】"))})}else d();function d(){t({type:s.SWITCH_LOADING_MASK}),(0,i.default)("checkRoleIsRepeat","POST",JSON.stringify(n),function(e){(0,u.showMessage)(e)&&("成功"===e.message?t(I(n)):l.Confirm({message:e.message,title:"提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&t(I(n))}})),t({type:s.SWITCH_LOADING_MASK})})}}};var I=function(e){return function(t,o){t({type:s.SWITCH_LOADING_MASK}),(0,i.default)("sobOptionSave","POST",JSON.stringify(e),function(n){if((0,u.showMessage)(n,"show")){o().sobConfigState.get("sobOptionModal");if(""===e.get("sobid"))t({type:s.CLEAR_HOME_TAB_PANE}),t(f.getDbListFetch()),l.Confirm({message:"账套创建成功！",title:"提示",buttonLabels:["设置账套角色","进入新账套"],onSuccess:function(o){if(0===o.buttonIndex){var r=n.data.sobid,i="3"===e.get("template")?"SMART":"ACCOUNTING",s=e.get("sobname");t(_.getSobRoleListFromSobConfig(r,i,s)),t(f.addPageTabPane("ConfigPanes","SobRole","SobRole","角色编辑")),t(f.addHomeTabpane("Config","SobRole","角色编辑"))}else o.buttonIndex}});else(o().homeState.getIn(["data","userInfo","sobInfo"])?o().homeState.getIn(["data","userInfo","sobInfo","sobId"]):"")===e.get("sobid")?(t({type:s.CLEAR_HOME_TAB_PANE}),t(S("hideLoad")),t(f.getDbListFetch())):((0,i.default)("sobOptionInit","GET","sobId="+e.get("sobid"),function(e){(0,u.showMessage)(e)&&t({type:s.SOB_OPTION_INIT,receivedData:e.data})}),t(f.getDbListFetch()),t(S("hideLoad")))}else n.code!==d.REPEAT_REQUEST_CODE&&e.get("sobid")&&(0,i.default)("sobOptionInit","GET","sobId="+e.get("sobid"),function(e){(0,u.showMessage)(e)&&t({type:s.SOB_OPTION_INIT,receivedData:e.data})});t({type:s.SWITCH_LOADING_MASK})})}},S=t.getSobList=function(e){return function(t){"hideLoad"!==e&&t({type:s.SWITCH_LOADING_MASK}),(0,i.default)("getNewSobList","GET","",function(o){(0,u.showMessage)(o)&&t({type:s.GET_SOB_LIST,list:o.data}),"hideLoad"!==e&&t({type:s.SWITCH_LOADING_MASK})})}};t.sobOptionCensorChange=function(e,t,o){return function(n){n({type:s.SOB_OPTION_ROLE_CHECK_STATE,listName:e,index:t,lastStatus:o})}},t.sobOptionRoleDelete=function(e,t,o){return function(n){n({type:s.SOB_OPTION_ROLE_DELETE,listName:e,listIndex:t,index:o})}},t.deleteSobItemFetch=function(e){return function(t,o){t({type:s.SWITCH_LOADING_MASK}),(0,i.default)("deletesob","POST",JSON.stringify({sobidlist:e}),function(n){(t({type:s.SWITCH_LOADING_MASK}),(0,u.showMessage)(n))&&(o().homeState.getIn(["data","userInfo","sobInfo","sobId"])===e[0]?(t(c.freshReportPage()),t(c.freshYebPage()),t(c.freshMxbPage()),t(c.freshSearchPage()),t(c.freshEditPage()),t(c.freshConfigPage("账套设置")),t({type:s.CLEAR_HOME_TAB_PANE,exclude:"Config"}),t(f.getDbListFetch()),t(S())):t(S()))})}},t.changeSobPermissionList=function(e,t,o){return{type:s.CHANGE_SOB_PERMISSION_LIST,listName:e,index:t,list:o}},t.getIdentifyingCodeList=function(){return function(e){(0,i.default)("getsobcopycode","GET","",function(t){(0,u.showMessage)(t)&&e({type:s.AFTER_GET_IDENTIFYING_CODE_LIST,receivedData:t.data})})}},t.initIdentifyingCodeTemp=function(){return{type:s.INIT_IDENTIFYING_CODE_TEMP}},t.setSobChangeCopyModuleItem=function(e,t){return{type:s.SET_SOB_CHANGE_COPY_MODULE_ITEM,item:e,newJr:t}},t.sobChangeCopyModuleItem=function(e,t){return{type:s.SOB_OPTION_CHANGE_COPY_MODULE_ITEM,moduleCode:e,value:t}}},1426:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.GET_SOB_ROLE_LIST_FROM_SOB_OPTION="GET_SOB_ROLE_LIST_FROM_SOB_OPTION",t.SWITCH_SOB_ROLE_CURRENT_ROLE="SWITCH_SOB_ROLE_CURRENT_ROLE",t.SOB_OPTION_INIT="SOB_OPTION_INIT",t.SET_SOB_ROLE_MODULE_LIST_VALUE="SET_SOB_ROLE_MODULE_LIST_VALUE",t.AFTER_MODIFY_SOB_ROLE="AFTER_MODIFY_SOB_ROLE",t.BEFORE_EDIT_SOB_ROLE="BEFORE_EDIT_SOB_ROLE",t.AFTER_INSERT_SOB_ROLE="AFTER_INSERT_SOB_ROLE",t.AFTER_EDIT_SOB_ROLE="AFTER_EDIT_SOB_ROLE",t.CHANGE_SOB_ROLE_COMMON_STRING="CHANGE_SOB_ROLE_COMMON_STRING"},1769:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,o=arguments[1];return((e={},i(e,r.INIT_SOB_ROLE,function(){return s}),i(e,r.GET_SOB_ROLE_LIST_FROM_SOB_OPTION,function(){return t=t.setIn(["views","sobId"],o.sobId).setIn(["views","sobType"],o.sobType).updateIn(["views","sobName"],function(e){return o.sobName?o.sobName:e}).setIn(["views","haveChanged"],!1).set("roleTemp",(0,n.fromJS)(o.receivedData.roleList[0])).set("roleList",(0,n.fromJS)(o.receivedData.roleList)).set("roleModuleTemp",(0,n.fromJS)(o.roleData))}),i(e,r.SWITCH_SOB_ROLE_CURRENT_ROLE,function(){return t=t.set("roleTemp",o.role).set("roleModuleTemp",(0,n.fromJS)(o.receivedData)).setIn(["views","haveChanged"],!1)}),i(e,r.SET_SOB_ROLE_MODULE_LIST_VALUE,function(){return t=t.setIn(["roleModuleTemp","moduleList"].concat(function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}(o.place)),o.value).setIn(["views","haveChanged"],!0)}),i(e,r.BEFORE_EDIT_SOB_ROLE,function(){return t=t.setIn(["views","insertOrModify"],o.status)}),i(e,r.AFTER_EDIT_SOB_ROLE,function(){return t="modify"===o.editType?t.setIn(["roleList",o.index],(0,n.fromJS)(o.roleTemp)).set("roleTemp",(0,n.fromJS)(o.roleTemp)).setIn(["views","haveChanged"],!1):t.set("roleList",(0,n.fromJS)(o.roleList)).set("roleModuleTemp",(0,n.fromJS)(o.receivedData)).set("roleTemp",(0,n.fromJS)(o.roleTemp)).setIn(["views","haveChanged"],!1)}),i(e,r.AFTER_MODIFY_SOB_ROLE,function(){var e=t.get("roleList"),r=e.findIndex(function(e){return e.get("roleName")===o.receivedData.roleName});return r>-1&&(t=t.setIn(["roleList",r,"roleId"],o.receivedData.roleId)),t=t.set("roleModuleTemp",(0,n.fromJS)(o.receivedData)).setIn(["roleTemp","roleId"],o.receivedData.roleId).setIn(["roleTemp","roleName"],o.receivedData.roleName).setIn(["views","haveChanged"],!1)}),i(e,r.CHANGE_SOB_ROLE_COMMON_STRING,function(){return t=t.set(o.place,o.value)}),e)[o.type]||function(){return t})()};var n=o(18),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(o(1426));function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var s=(0,n.fromJS)({views:{sobId:"",sobType:"",sobName:"",insertOrModify:"insert",haveChanged:!1},roleTemp:{},roleList:[],roleModuleTemp:{moduleList:{}},categoryRange:[],allCardListL:[],modalCategoryList:[],modalCardList:[],selectCardList:[],processModelList:[]})}}]);