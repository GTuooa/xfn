(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1214:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=l(n(2772)),r=l(n(2784)),i=l(n(1469)),o=l(n(1301));function l(e){return e&&e.__esModule?e:{default:e}}var u={inventoryConfState:r.default,inventoryCardState:i.default,lrAccountState:o.default};t.reducer=u,t.view=a.default},1215:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=o(n(2785)),r=o(n(1472)),i=o(n(1471));function o(e){return e&&e.__esModule?e:{default:e}}var l={projectConfState:r.default,projectCardState:i.default};t.reducer=l,t.view=a.default},1237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=s(n(100)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(99);var l=s(n(1)),u=n(17),c=(n(101),n(22));function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=(0,u.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={formate:!0},d(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"render",value:function(){var e=this,t=(this.props.showZero,this.state.formate?this.props.value&&Number(this.props.value)?(0,c.formatMoney)(this.props.value,this.props.PointDisabled?0:2):"":this.props.value);return l.default.createElement(r.default,i({},this.props,{value:t||"",onFocus:function(t){"function"==typeof e.props.onFocus&&e.props.onFocus(t),e.setState({formate:!1},function(){e.nameInput&&e.nameInput.select()})},onBlur:function(t){"function"==typeof e.props.onBlur&&e.props.onBlur(t),e.setState({formate:!0})},ref:function(t){return e.nameInput=t}}))}}]),t}())||a;t.default=f},1241:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleBatch=t.deleteBatch=t.getInitBatchList=t.getBatchList=t.emptyWarehouseListQuantity=t.getSerialList=t.modifyBatch=t.insertBatch=t.insertInventoryBatch=t.deleteAssist=t.modifyAssist=t.insertAssist=t.deleteAssistCategroy=t.modifyAssistCategroy=t.insertAssistCategroy=t.chooseAssitUniform=t.getAssistList=t.getInventorySomeCardList=t.chargeItemCheckboxCheck=t.chargeItemCheckboxCheckAll=t.getInventoryAllCardList=t.getInventorySettingOneCard=t.deleteMaterial=t.addMaterial=t.initInventoryCard=t.deleteunitPrice=t.addUnitPrice=t.getSomeWarehouseTree=t.getWarehouseTree=t.initUnitState=t.deleteUnit=t.addUnit=t.getUnitCardList=t.afterEditInventoryConf=t.deleteInventoryCardList=t.saveInventoryCard=t.changeInventoryCardCategoryType=t.changeInventoryCardCategoryStatus=t.changeInventoryInnerSrting=t.changeInventoryCardNature=t.changeInventoryViewsContent=t.changeInventoryCardViews=t.changeInventoryCardContent=t.beforeInventoryEditCard=t.beforeInventoryAddCard=void 0;var a=y(n(47)),r=y(n(37));n(46),n(38);var i=m(n(1318)),o=y(n(52)),l=n(22),u=n(18),c=m(n(30)),s=m(n(27)),d=m(n(484)),f=m(n(1229)),p=m(n(1307));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}t.beforeInventoryAddCard=function(e,t){return function(n,a){n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getIUManageCardLimitAndAc","GET","",function(a){(0,l.showMessage)(a)&&(0,o.default)("getInitStockCard","GET","",function(e){if((0,l.showMessage)(e)){var r=e.data.code;n({type:i.BEFORE_ADD_INVENTORY_CONF_CARD_INVENTORY,data:a.data,originTags:t,code:r})}}),e(),n({type:i.SWITCH_LOADING_MASK})})}},t.beforeInventoryEditCard=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(c,s){c({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCard","GET","uuid="+e.get("uuid"),function(e){if(c({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)){var d=s().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1;e.data.unitPriceList&&!e.data.unitPriceList.some(function(e){return 1===e.type})&&e.data.unitPriceList.push({type:1}),e.data.unitPriceList&&!e.data.unitPriceList.some(function(e){return 2===e.type})&&e.data.unitPriceList.push({type:2}),e.data.isOpenedQuantity&&c(v()),e.data.financialInfo&&e.data.financialInfo.openBatch&&c(I(e.data.uuid)),"OPEN"!==a&&"INVALID"!==a||(0,o.default)("getInventorySettingCardList","GET","listFrom=&isOpenQuantity=true&isUsed=true",function(e){(0,l.showMessage)(e)&&c(E("stockList",(0,u.fromJS)(e.data.resultList)))}),c({type:i.BEFORE_EDIT_INVENTORY_CONF_CARD,data:e.data,originTags:n,assemblyState:a,fromOpen:r,enableWarehouse:d}),t()}})}};var g=t.changeInventoryCardContent=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CARD_CONTENT,name:e,value:t})}},E=t.changeInventoryCardViews=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_CARD_VIEWS,name:e,value:t})}},C=(t.changeInventoryViewsContent=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_VIEWS_CONTENT,name:e,value:t})}},t.changeInventoryCardNature=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_CARD_NATURE,name:e,value:t})}},t.changeInventoryInnerSrting=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_INNER_STRING,arr:e,value:t})}}),T=(t.changeInventoryCardCategoryStatus=function(e,t){return function(n){(0,o.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+e.get("uuid"),function(a){(0,l.showMessage)(a)&&n({type:i.CHANGE_INVENTORY_CONF_CARD_CATEGORY_STATUS,list:a.data.resultList,item:e,value:t})})}},t.changeInventoryCardCategoryType=function(e,t){return function(n){var a=t.split(s.TREE_JOIN_STR);n({type:i.CHANGE_INVENTORY_CONF_CARD_CATEGORY_TYPE,item:e,uuid:a[0],name:a[1]})}},t.saveInventoryCard=function(e,t,n,a,r){return function(s,d){var f=d().homeState,m=f.get("allPanes"),y=d().inventoryCardState.get("inventoryCardTemp").toJS(),g=f.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1,E=[],C=y.financialInfo||{};g&&(!function e(t){return t.forEach(function(t){if(t.isEnd){var n=void 0;n=C.openAssist||C.openBatch?t.childList.map(function(e){return e.warehouseName=t.warehouseName,e.warehouseUuid=t.warehouseUuid,e.warehouseCode=t.warehouseCode,e}):t,E=E.concat(n)}else e(t.childList)})}(y.openList),y.openList=E);var T=d().inventoryCardState.getIn(["views","insertOrModify"]),v="",_="";m.get("ConfigPanes").find(function(e){return"存货设置"===e.get("title")})&&(v=d().inventoryConfState.getIn(["views","activeTapKeyUuid"]),_=d().inventoryConfState.getIn(["views","selectTypeId"])),"INVALID"===y.assemblyState&&(y.assemblyState="OPEN"),y.assemblySheet&&y.assemblySheet.materialList&&y.assemblySheet.materialList.length&&(y.assemblySheet.materialList=y.assemblySheet.materialList.filter(function(e){return e.materialUuid}));var S=function(){if("insert"===T){(0,o.default)("addInventorySettingCard","POST",JSON.stringify({psiData:y,insertFrom:v,treeFrom:_,needAutoIncrementCode:"insert"!==t,action:{editRunning:"SAVE_JR-QUICK_MANAGER-SAVE_STOCK",payment:"SAVE_JR-QUICK_MANAGER-SAVE_STOCK",inventoryConfig:"MANAGER-STOCK_SETTING-CUD_CARD",searchApproval:"QUERY_PROCESS-QUICK_MANAGER-SAVE_STOCK",searchApprovalHideCategory:"QUERY_PROCESS-QUICK_MANAGER-SAVE_STOCK"}[e]}),function(a){if((0,l.showMessage)(a,"show")&&(s({type:i.SAVE_INVENTORY_CONF_CARD_INVENTORY,flag:t,autoIncrementCode:a.data.autoIncrementCode}),n&&n(),s(h("payment"===e,e)),"inventoryConfig"===e)){var r=d().inventoryConfState.getIn(["views","activeTapKey"]),o=d().inventoryConfState.getIn(["views","activeTapKeyUuid"]),c=(0,u.fromJS)({name:r,uuid:o});s(p.refreshInventoryList(c))}s({type:i.SWITCH_LOADING_MASK})})}else(0,o.default)("editInventorySettingCard","POST",JSON.stringify({psiData:y,modifyFrom:v,treeFrom:_}),function(t){if((0,l.showMessage)(t,"show")&&(s({type:i.SAVE_INVENTORY_CONF_CARD_INVENTORY}),n(),s(h()),"inventoryConfig"===e)){var a=d().inventoryConfState.getIn(["views","activeTapKey"]),r=d().inventoryConfState.getIn(["views","activeTapKeyUuid"]),o=(0,u.fromJS)({name:a,uuid:r});s(p.refreshInventoryList(o))}s({type:i.SWITCH_LOADING_MASK})})};s({type:i.SWITCH_LOADING_MASK}),(0,o.default)("adjustInventorySettingCardTitleSame","POST",JSON.stringify({psiData:{name:y.name,uuid:y.uuid}}),function(e){(0,l.showMessage)(e)?e.data.repeat?(a(),s({type:i.SWITCH_LOADING_MASK}),c.Confirm({message:"卡片名称与【编码："+e.data.card.code+"】卡片重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(s({type:i.SWITCH_LOADING_MASK}),S(),r()):r()},onFail:function(e){return console.log(e)}})):S():s({type:i.SWITCH_LOADING_MASK})})}},t.deleteInventoryCardList=function(){return function(e,t){var n=t().inventoryConfState.getIn(["views","cardSelectList"]);c.Confirm({message:"确定删除卡片？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(0,o.default)("deleteInventoryCheck","POST",JSON.stringify({deleteList:n}),function(t){(0,l.showMessage)(t)&&(t.data.inMaterialList&&t.data.inMaterialList.length?c.Confirm({message:t.data.inMaterialList.map(function(e){return"【"+e.code+"】【"+e.name+"】"}).join("、")+"属于其他存货的组装物料，删除后将导致组装单失效。确认删除吗？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&e(T(n))},onFail:function(e){return console.log(e)}}):e(T(n)))})},onFail:function(e){return console.log(e)}})}},function(e){return function(t,n){var a=n().inventoryConfState.getIn(["views","activeTapKeyUuid"]),u=n().inventoryConfState.getIn(["views","activeTreeKeyUuid"]);t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteInventorySettingCardList","POST",JSON.stringify({deleteList:e,deleteFrom:a,treeFrom:u}),function(e){(0,l.showMessage)(e)&&(t({type:i.DELETE_INVENTORY_CONF_CARD_LIST,list:e.data.resultList,treeList:e.data.typeList}),""===e.data.error?r.default.info("删除成功"):r.default.info(e.data.error),t(h())),t({type:i.SWITCH_LOADING_MASK})})}}),h=t.afterEditInventoryConf=function(e,t){return function(n,a){var r=a().homeState,i=r.get("allPanes");if(!0===r.getIn(["data","userInfo","sobInfo","newJr"]))i.get("SearchPanes").find(function(e){return"查询审批"===e.get("title")})?(n("searchApproval"===t?d.getApprovalStockCardList():d.getApprovalStockCardList([],"hidecategory")),i.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&setTimeout(function(){n(d.getStokcListFromConfig())},800)):i.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&e?n(d.getStokcListFromConfig()):i.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&n(d.getInventoryCardListForchangeConfig());else{var o=a().lrAccountState.get("cardTemp"),l={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[o.get("categoryType")],u=o.getIn([l,"stockRange"]),c=o.get("runningState");u&&u.size&&n(f.getFirstStockCardList(u,c))}}},v=t.getUnitCardList=function(){return function(e){(0,o.default)("getUnitList","GET","inventoryUuid=",function(t){(0,l.showMessage)(t)&&(e(E("standardList",(0,u.fromJS)(t.data.standardList))),e(E("customList",(0,u.fromJS)(t.data.customList))))})}},_=(t.addUnit=function(e,t){return function(n){var a=e.toJS();a.splice(t+1,0,{amount:"",uuid:""}),n(g(["unit","unitList"],(0,u.fromJS)(a)))}},t.deleteUnit=function(e,t){return function(n){var a=e.toJS();a.splice(t,1),n(g(["unit","unitList"],(0,u.fromJS)(a)))}},t.initUnitState=function(){return{type:i.INIT_UNIT_STATE}},t.getWarehouseTree=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("warehouseCardTree","POST",JSON.stringify({uuidList:[]}),function(n){t({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(n)&&(t(E("warehouseList",(0,u.fromJS)(n.data.cardList[0].childList))),e())})}},t.getSomeWarehouseTree=function(e,t){return function(n,a){var r="insert"===a().inventoryCardState.getIn(["views","insertOrModify"])?"":a().inventoryCardState.getIn(["inventoryCardTemp","uuid"]);if(!e.length)return n(g("openList",(0,u.fromJS)([]))),void t();n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getOpenWarehouseCardTree","POST",JSON.stringify({warehouseUuidList:e,inventoryUuid:r}),function(e){n({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(n(g("openList",(0,u.fromJS)(e.data.openList[0].childList?e.data.openList[0].childList:[]))),n(E("selectedKeys",(0,u.fromJS)([]))),t())})}},t.addUnitPrice=function(e,t,n){return function(a){var r=e.toJS();r.splice(t+1,0,{amount:"",uuid:"",type:n}),a(g("unitPriceList",(0,u.fromJS)(r)))}},t.deleteunitPrice=function(e,t){return function(n){var a=e.toJS();a.splice(t,1),n(g("unitPriceList",(0,u.fromJS)(a)))}},t.initInventoryCard=function(){return{type:i.INIT_ADD_INVENTORY_STATE}},t.addMaterial=function(e,t){return function(n){var a=e.toJS();a.splice(t+1,0,{amount:"",uuid:""}),n(C(["assemblySheet","materialList"],(0,u.fromJS)(a)))}},t.deleteMaterial=function(e,t){return function(n){var a=e.toJS();a.splice(t,1),n(C(["assemblySheet","materialList"],(0,u.fromJS)(a)))}},t.getInventorySettingOneCard=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCard","GET","uuid="+e,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)){var a=e.data.unit.unitList||[];a.unshift({uuid:e.data.unit.uuid,name:e.data.unit.name}),1===a.length&&(n(C(["assemblySheet","materialList",t,"unitUuid"],a[0].uuid)),n(C(["assemblySheet","materialList",t,"unitName"],a[0].name))),n(C(["assemblySheet","materialList",t,"unitList"],(0,u.fromJS)(a)))}})}},t.getInventoryAllCardList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments[2];return function(a,r){a({type:i.SWITCH_LOADING_MASK});var c=r().homeState.getIn(["data","userInfo","sobInfo","sobId"]);r().editRunningState;n||(0,o.default)("getStockCardList","POST",JSON.stringify({sobId:c,categoryList:[],openQuantity:!0}),function(e){(0,l.showMessage)(e)&&a(E("MemberList",(0,u.fromJS)(e.data.typeList)))}),(0,o.default)("getStockCategoryList","POST",JSON.stringify({sobId:c,categoryList:e,property:0,openQuantity:!0}),function(e){(0,l.showMessage)(e)&&(a(E("thingsList",(0,u.fromJS)(e.data.result))),a(E(t,!0))),a({type:i.SWITCH_LOADING_MASK})})}},t.chargeItemCheckboxCheckAll=function(e,t,n){return function(a){t.map(function(t){var r=n.find(function(e){return e.get("uuid")===t.uuid}).toJS(),i=r.uuid,o=r.code,l=r.name,u=r.unit.unitList||[];u.unshift({uuid:r.unit.uuid,name:r.unit.name}),a(_(e,i,o,l,u))})}},t.chargeItemCheckboxCheck=function(e,t,n,a,r){return{type:i.IVNENTORY_CHARGE_ITEM_CHECKBOX_SELECT,checked:e,uuid:t,name:a,code:n,unitList:r}}),S=(t.getInventorySomeCardList=function(e,t){return function(n,a){var r=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);1==t?(0,o.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:r,categoryUuid:e,listByCategory:!0,subordinateUuid:"",property:0,openQuantity:!0}),function(e){(0,l.showMessage)(e)&&n(E("thingsList",(0,u.fromJS)(e.data.resultList)))}):(0,o.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:r,subordinateUuid:e,listByCategory:!1,categoryUuid:"",property:0,openQuantity:!0}),function(e){(0,l.showMessage)(e)&&n(E("thingsList",(0,u.fromJS)(e.data.resultList)))})}},t.getAssistList=function(e,t){return function(e){(0,o.default)("getInventoryAssistList","GET","inventoryUuid=",function(n){e(E("allAssistClassificationList",(0,u.fromJS)(n.data.assistClassificationList))),t&&t()})}}),I=(t.chooseAssitUniform=function(e,t){return function(n){n({type:i.CHOOSE_ASSIST_UNIFORM,uuidList:e,bool:t})}},t.insertAssistCategroy=function(e,t){return function(n){(0,o.default)("insertAssistCategroy","POST",JSON.stringify({name:e}),function(e){(0,l.showMessage)(e,"show")&&(t&&t(),n(S()))})}},t.modifyAssistCategroy=function(e,t,n){return function(a){(0,o.default)("modifyAssistCategroy","POST",JSON.stringify({name:t,uuid:e}),function(e){(0,l.showMessage)(e,"show")&&(n&&n(),a(S()))})}},t.deleteAssistCategroy=function(e,t){return function(n){(0,o.default)("deleteAssistCategroy","GET","uuid="+e,function(e){(0,l.showMessage)(e,"show")&&(t&&t(),n(S()))})}},t.insertAssist=function(e,t,n){return function(a){(0,o.default)("insertAssist","POST",JSON.stringify({name:t,classificationUuid:e}),function(e){(0,l.showMessage)(e,"show")&&(n&&n(),a(S()))})}},t.modifyAssist=function(e,t,n){return function(a){(0,o.default)("modifyAssist","POST",JSON.stringify({name:n,uuid:e,classificationUuid:t}),function(e){(0,l.showMessage)(e,"show")&&a(S())})}},t.deleteAssist=function(e,t){return function(n){(0,o.default)("deleteAssist","GET","uuid="+e,function(e){(0,l.showMessage)(e,"show")&&(t&&t(),n(S()))})}},t.insertInventoryBatch=function(e,t,n,a,r,i,c,s,d){return function(f,p){(0,o.default)("insertBatch","POST",JSON.stringify({batch:e,productionDate:t,expirationDate:n,inventoryUuid:a,condition:r,orderBy:i,currentPage:c,isAsc:s}),function(e){(0,l.showMessage)(e,"show")&&(d&&d(),f(E("batchList",(0,u.fromJS)(e.data.batchList)||(0,u.fromJS)([]))))})}},t.insertBatch=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments[4],c=arguments[5];return function(s,d){var f=d().inventoryCardState,p=f.getIn(["views","insertOrModify"]),m=f.getIn(["inventoryCardTemp","financialInfo","batchList"])||(0,u.fromJS)([]);"insert"===p&&m.some(function(t){return t.get("batch")===e&&e})?r.default.info("批次号重复"):"insert"===p?(r.default.success("成功"),c&&c(e,n),i&&i(),s(g(["financialInfo","batchList"],m.push((0,u.fromJS)({batch:e,productionDate:t,expirationDate:n,inventoryUuid:a}))))):(0,o.default)("insertBatch","POST",JSON.stringify({batch:e,productionDate:t,expirationDate:n,inventoryUuid:a}),function(e){if((0,l.showMessage)(e,"show")){var t=e.data,n=t.batch,a=t.batchUuid,r=t.expirationDate;c&&c(n,a,r),i&&i(),s(g(["financialInfo","batchList"],(0,u.fromJS)(e.data.batchList)))}})}},t.modifyBatch=function(e,t,n,r,c,s){return function(d,f){(0,o.default)("batchUsedCheck","GET","inventoryUuid="+c+"&batchUuid="+t,function(f){(0,l.showMessage)(f)&&(f.data.used?a.default.confirm({title:"提示",content:"原批次在期初值或流水中已被使用，修改后所有信息将同步修改。确认更改该批次的信息吗？",onOk:function(){d({type:i.SWITCH_LOADING_MASK}),(0,o.default)("modifyBatch","POST",JSON.stringify({batch:e,productionDate:n,inventoryUuid:c,batchUuid:t,expirationDate:r}),function(e){d({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e,"show")&&(s&&s(),d(g(["financialInfo","batchList"],(0,u.fromJS)(e.data.batchList))))})}}):(d({type:i.SWITCH_LOADING_MASK}),(0,o.default)("modifyBatch","POST",JSON.stringify({batch:e,productionDate:n,inventoryUuid:c,batchUuid:t,expirationDate:r}),function(e){d({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e,"show")&&(s&&s(),d(g(["financialInfo","batchList"],(0,u.fromJS)(e.data.batchList))))})))})}},t.getSerialList=function(e,t){return function(e,n){var a=n().inventoryCardState,r=a.getIn(["inventoryCardTemp","uuid"]);a.getIn(["inventoryCardTemp","uuid"]);(0,o.default)("getSerialList","POST",JSON.stringify({inventoryUuid:r,inUuid:t}),function(t){(0,l.showMessage)(t)&&(e(E("serialList",(0,u.fromJS)(t.data)||(0,u.fromJS)([]))),e(E("serialModal",!0)))})}},t.emptyWarehouseListQuantity=function(){return{type:i.EMPTY_WAREHOUSE_LIST_QUANTITY}},t.getBatchList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2],a=arguments[3],r=arguments[4],c=arguments[5];return function(s,d){var f=e||d().inventoryCardState.getIn(["views","batchUuid"]);s({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getBatchList","POST",JSON.stringify({inventoryUuid:f,condition:n,orderBy:a,currentPage:t,isAsc:r}),function(e){s({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(s(E("batchList",(0,u.fromJS)(e.data.batchList)||(0,u.fromJS)([]))),s(E("batchUuid",f)),s(E("batchManageModal",!0)),s(E("shelfLife",e.data.shelfLife)),c&&c())})}},t.getInitBatchList=function(e){return function(t,n){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getBatchList","POST",JSON.stringify({inventoryUuid:e}),function(e){t({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&t(g(["financialInfo","batchList"],(0,u.fromJS)(e.data.batchList)))})}});t.deleteBatch=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments[3],c=arguments[4],s=arguments[5],d=arguments[6];return function(f,p){f({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteBatch","POST",JSON.stringify({inventoryUuid:e,deleteList:t,condition:a,orderBy:c,currentPage:n,isAsc:s}),function(e){f({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(e.data.usedList&&e.data.usedList.length?r.default.info(e.data.usedList.map(function(e){return"【"+e.batch+"】"}).join("、")+"批次已在期初值或流水中使用，不可删除"):r.default.success("成功"),f(E("batchList",(0,u.fromJS)(e.data.batchList)||(0,u.fromJS)([]))),d&&d())})}},t.toggleBatch=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments[4],u=arguments[5],c=arguments[6],s=arguments[7];return function(d,f){d({type:i.SWITCH_LOADING_MASK}),(0,o.default)("toggleBatch","POST",JSON.stringify({inventoryUuid:e,canUse:n,condition:r,orderBy:u,currentPage:a,isAsc:c,batchUuid:t}),function(e){d({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&s&&s()})}}},1256:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(2),i=n.n(r),o=(n(21),n(1599));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};t.default=function(e){return a.createElement(o.a,null,function(t){var n,r=t.getPrefixCls,o=e.prefixCls,s=e.type,d=void 0===s?"horizontal":s,f=e.orientation,p=void 0===f?"center":f,m=e.className,y=e.children,g=e.dashed,E=c(e,["prefixCls","type","orientation","className","children","dashed"]),C=r("divider",o),T=p.length>0?"-".concat(p):p,h=i()(m,C,"".concat(C,"-").concat(d),(u(n={},"".concat(C,"-with-text").concat(T),y),u(n,"".concat(C,"-dashed"),!!g),n));return a.createElement("div",l({className:h},E,{role:"separator"}),y&&a.createElement("span",{className:"".concat(C,"-inner-text")},y))})}},1257:function(e,t,n){"use strict";n.r(t);n(33),n(1360)},1288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=m(n(100)),r=m(n(14)),i=m(n(129)),o=m(n(89)),l=m(n(45)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(99),n(78),n(128),n(88),n(55);var c=m(n(1)),s=(m(n(0)),n(18));n(56);n(1240);var d=p(n(27)),f=(n(22),m(n(1244)),n(127),p(n(1241)));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=l.default.Option,C=l.default.OptGroup,T=(o.default.Group,i.default.Group,function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={addUnit:!1,name:"",uuid:"",isStandard:!1},g(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,i=t.selectListOne,o=t.selectListTwo,u=t.onChange,p=t.name,m=t.onSwitch,g=t.style,T=t.disabled,h=t.addUnitdisabled,v=this.state,_=v.addUnit;v.value;return!_||h?c.default.createElement(l.default,{disabled:T,style:g,value:p||"",placeholder:"请选择",dropdownRender:function(t){return c.default.createElement("div",null,t,h?"":c.default.createElement("div",{onMouseDown:function(e){return e.preventDefault()},style:{padding:"8px",cursor:"pointer"},onClick:function(){e.setState({addUnit:!0}),n(f.changeInventoryCardContent("unit",(0,s.fromJS)({})))}},c.default.createElement(r.default,{type:"plus"})," 新增单位"))},onChange:function(e,t){var n=e.split(d.TREE_JOIN_STR),a=n[0],r=n[1],i=n[2],o=n[3],l=n[4],c=n[5];u({uuid:a,name:r,isStandard:i,unitList:o,basicUnitUuid:l,unitQuantity:c},t)}},o.size?c.default.createElement(C,{label:"自定义单位"},o.map(function(e){return c.default.createElement(E,{key:e.get("uuid"),value:""+e.get("uuid")+d.TREE_JOIN_STR+e.get("name")+d.TREE_JOIN_STR+e.get("isStandard")+d.TREE_JOIN_STR+JSON.stringify(e.get("unitList").toJS()),basicStandardUnitQuantityList:[e.get("basicStandardUnitQuantity")].concat(y(e.get("unitList").toJS().map(function(e){return e.basicStandardUnitQuantity}))),basicStandardUnitUuidList:[e.get("basicStandardUnitUuid")].concat(y(e.get("unitList").toJS().map(function(e){return e.basicStandardUnitUuid}))),isCustom:!0},e.get("fullName"))})):"",c.default.createElement(C,{label:"标准单位"},i.map(function(e){return c.default.createElement(E,{key:e.get("uuid"),value:""+e.get("uuid")+d.TREE_JOIN_STR+e.get("name")+d.TREE_JOIN_STR+e.get("isStandard")+d.TREE_JOIN_STR+d.TREE_JOIN_STR+e.get("basicUnitUuid")+d.TREE_JOIN_STR+e.get("basicUnitQuantity")},e.get("name"))}))):c.default.createElement("div",{className:"inventory-xfn-input"},c.default.createElement(a.default,{disabled:T,placeholder:"输入单位",value:p||"",onChange:function(e){u({uuid:"",name:e.target.value,isStandard:!1},{props:{}})}}),T?"":c.default.createElement("span",null,c.default.createElement(r.default,{type:"close",style:{cursor:"pointer"},onClick:function(){e.setState({addUnit:!1}),m()}})))}}]),t}());t.default=T},1302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_PROJECT_CONF="INIT_PROJECT_CONF",t.PROJECT_GET_HTIGH_TYPE="PROJECT_GET_HTIGH_TYPE",t.GET_PROJECT_LIST_AND_TREE="GET_PROJECT_LIST_AND_TREE",t.CHANGE_ACTIVE_PROJECT_HIGH_TYPE="CHANGE_ACTIVE_PROJECT_HIGH_TYPE",t.CHANGE_PEOJECT_CONF_CARD_USED_STATUS="CHANGE_PEOJECT_CONF_CARD_USED_STATUS",t.CHANGE_PEOJECT_CONF_CARD_BOX_STATUS="CHANGE_PEOJECT_CONF_CARD_BOX_STATUS",t.SELECT_PEOJECT_CONF_CARD_ALL="SELECT_PEOJECT_CONF_CARD_ALL",t.DELETE_PROJECT_CONF_CARD="DELETE_PROJECT_CONF_CARD",t.SELECT_PROJECT_CARD_BY_TYPE="SELECT_PROJECT_CARD_BY_TYPE",t.GET_PROJECT_HIGH_TYPE_ONE="GET_PROJECT_HIGH_TYPE_ONE",t.CHANGE_PREJECT_HIGH_TYPE_CONTENT="CHANGE_PREJECT_HIGH_TYPE_CONTENT",t.BEFORE_ADD_PROJECT_CARD="BEFORE_ADD_PROJECT_CARD",t.BEFORE_ADD_PROJECT_CARD_FROM_RUNNING="BEFORE_ADD_PROJECT_CARD_FROM_RUNNING",t.CHANGE_PROJECT_CARD_CONTENT="CHANGE_PROJECT_CARD_CONTENT",t.CHANGE_PROJECT_VIEWS_CONTENT="CHANGE_PROJECT_VIEWS_CONTENT",t.BEFORE_EDIT_PROJECT_CARD="BEFORE_EDIT_PROJECT_CARD",t.CHANGE_PROJECT_CARD_CATEGORY_TYPE="CHANGE_PROJECT_CARD_CATEGORY_TYPE",t.SAVE_PROJECT_CARD="SAVE_PROJECT_CARD",t.NEW_SAVE_PROJECT_CARD="NEW_SAVE_PROJECT_CARD",t.CHANGE_PROJECT_PROPERTY="CHANGE_PROJECT_PROPERTY",t.BEFORE_ADD_PROJECT_CONFIG_CARD_TYPE="BEFORE_ADD_PROJECT_CONFIG_CARD_TYPE",t.BEFORE_INSERT_PROJECT_CONF_CARD_TYPE="BEFORE_INSERT_PROJECT_CONF_CARD_TYPE",t.CHANGE_PROJECT_CONF_CARD_TYPE_CONTENT="CHANGE_PROJECT_CONF_CARD_TYPE_CONTENT",t.SELECT_PROJECT_CONF_CARD_TYPE="SELECT_PROJECT_CONF_CARD_TYPE",t.GET_PROJECT_CONF_TYPE_CONTENT="GET_PROJECT_CONF_TYPE_CONTENT",t.CHANGE_PROJECT_CONF_CARD_TYPE_BOX_STATUS="CHANGE_PROJECT_CONF_CARD_TYPE_BOX_STATUS",t.PROJECT_CONF_TYPE_DELETE_BTN_SHOW="PROJECT_CONF_TYPE_DELETE_BTN_SHOW",t.CONFIRM_DELETE_PROJECT_CONF_TYPE="CONFIRM_DELETE_PROJECT_CONF_TYPE",t.CHANGE_PROJECT_CONF_TYPE_POSITION="CHANGE_PROJECT_CONF_TYPE_POSITION",t.PROJECT_CONF_DELETE_BTN_SHOW="PROJECT_CONF_DELETE_BTN_SHOW",t.CANCLE_PROJECT_CONF_TYPE_BTN="CANCLE_PROJECT_CONF_TYPE_BTN",t.SAVE_PROJECT_CONF_CARD_TYPE="SAVE_PROJECT_CONF_CARD_TYPE",t.ADJUST_PROJECT_CONF_CARD_TYPE_LIST="ADJUST_PROJECT_CONF_CARD_TYPE_LIST"},1307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkUsed=t.downloadBefore=t.regretCode=t.getRegretCategoryTree=t.beforeCloseMaterial=t.changeViews=t.adjustCategoryOrder=t.adjustInventoryCardList=t.adjustAllRelativeCardList=t.switchWarehouse=t.exportToNotification=t.afterChImport=t.getFileUploadInitialFetch=t.getFileUploadFetch=t.closeVcImportContent=t.beforeCHImport=t.cancelDeleteOrAddInventoryType=t.adjustInventoryCardTyepList=t.inventoryDownType=t.inventoryUpType=t.confirmDeleteInventoryType=t.deleteInventoryType=t.changeInventoryCardTypeBoxChecked=t.getInventoryTypeInfo=t.saveInventoryCardType=t.changeInventoryCardTypeSelect=t.changeInventoryCardTypeContent=t.beforeInsertAddInventoryCardType=t.beforeAddInventoryCardType=t.deleteInventoryHighType=t.saveInventoryHighType=t.changeInventoryHighTypeContent=t.beforeAddInventoryHighType=t.changeInventoryModalActiveHighType=t.beforeEditInventoryHighType=t.getInventoryCardListByType=t.selectCardAll=t.changeInventoryCardBoxStatus=t.modifyInventoryAssemblyStatus=t.modifyInventoryCardUsedStatus=t.refreshInventoryList=t.changeInventoryActiveHighType=t.getInventoryConfigInit=void 0;var a=m(n(37)),r=m(n(47));n(38),n(46);var i=p(n(1318)),o=(p(n(43)),m(n(52))),l=p(n(60)),u=p(n(1375)),c=n(22),s=p(n(30)),d=p(n(27)),f=n(18);p(n(1241));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}r.default.confirm;var y=t.getInventoryConfigInit=function(){return function(e,t){e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingCardList","GET","listFrom=&currentPage=1&pageSize="+d.CONFIG_PAGE_SIZE+"&condition=",function(t){(0,c.showMessage)(t)?(0,o.default)("getInventoryHighTypeList","GET","",function(n){(0,c.showMessage)(n)&&e({type:i.GET_INVENTORY_CONFIG_INIT,title:n.data,cardList:t.data.resultList,enableWarehouse:t.data.enableWarehouse,pageCount:t.data.pages}),e({type:i.SWITCH_LOADING_MASK})}):e({type:i.SWITCH_LOADING_MASK})})}},g=(t.changeInventoryActiveHighType=function(e,t){return function(n,a){n(E(e,t))}},t.refreshInventoryList=function(e,t,n){return function(a,r){a(E(e,t,n))}}),E=function(e,t,n){return function(a,r){var l=r().inventoryConfState.get("views"),u=t||l.get("currentPage"),s=void 0===n?l.get("searchContent"):n;a({type:i.SWITCH_LOADING_MASK}),e.get("name")===d.ALL_TAB_NAME_STR?(0,o.default)("getInventorySettingCardList","GET","listFrom=&currentPage="+u+"&pageSize="+d.CONFIG_PAGE_SIZE+"&condition="+s,function(t){(0,c.showMessage)(t)&&a({type:i.CHANGE_ACTIVE_INVENTORY_CONF_HIGH_TYPE,name:e.get("name"),uuid:e.get("uuid"),cardList:t.data.resultList,enableWarehouse:t.data.enableWarehouse,treeList:[],currentPage:u,pageCount:t.data.pages,condition:s}),a({type:i.SWITCH_LOADING_MASK})}):(0,o.default)("getInventorySettingCardList","GET","listFrom="+e.get("uuid")+"&currentPage="+u+"&pageSize="+d.CONFIG_PAGE_SIZE+"&condition="+s,function(t){(0,c.showMessage)(t)?(0,o.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+e.get("uuid"),function(n){(0,c.showMessage)(n)&&a({type:i.CHANGE_ACTIVE_INVENTORY_CONF_HIGH_TYPE,name:e.get("name"),uuid:e.get("uuid"),cardList:t.data.resultList,treeList:n.data.resultList,enableWarehouse:n.data.enableWarehouse,setDefault:!0,currentPage:u,pageCount:t.data.pages,condition:s}),a({type:i.SWITCH_LOADING_MASK})}):a({type:i.SWITCH_LOADING_MASK})})}},C=(t.modifyInventoryCardUsedStatus=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("modifyInventorySettingCardUsedStatus","POST",JSON.stringify({psiData:{uuid:e,used:t}}),function(a){(0,c.showMessage)(a,"show")&&n({type:i.CHANGE_INVENTORY_CONF_CARD_USED_STATUS,list:a.data.resultList,uuid:e,used:t}),n({type:i.SWITCH_LOADING_MASK})})}},t.modifyInventoryAssemblyStatus=function(e,t,n){return function(a){a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("modifyInventoryAssembly"+(t?"Open":"Close"),"GET","productUuid="+e,function(r){(0,c.showMessage)(r,"show")&&(a({type:i.CHANGE_INVENTORY_CONF_ASSEMBLY_STATUS,uuid:e,used:t}),n&&n()),a({type:i.SWITCH_LOADING_MASK})})}}),T=(t.changeInventoryCardBoxStatus=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_CARD_BOX_STATUS,status:e,uuid:t})}},t.selectCardAll=function(e){return function(t){t({type:i.SELECT_INVENTORY_CONF_CARD_ALL,value:e})}},t.getInventoryCardListByType=function(e,t,n,a,r){return function(l,u){l({type:i.SWITCH_LOADING_MASK});var s=u().inventoryConfState.get("views"),f=void 0===r?s.get("searchContent"):r,p=a||s.get("currentPage");(0,o.default)("getInventorySettingCardListByType","GET","ctgyUuid="+e+"&&subordinateUuid="+t+"&currentPage="+p+"&pageSize="+d.CONFIG_PAGE_SIZE+"&condition="+f,function(e){(0,c.showMessage)(e)&&l({type:i.SELECT_INVENTORY_CONF_CARD_BY_TYPE,list:e.data.resultList,uuid:t,name:n,currentPage:p,pageCount:e.data.pages,condition:f}),l({type:i.SWITCH_LOADING_MASK})})}},t.beforeEditInventoryHighType=function(e){return function(t,n){var a=n().inventoryConfState,r=a.getIn(["views","activeTapKey"]),l=a.getIn(["views","activeTapKeyUuid"]),u=a.get("originTags"),s="",f="";1!=u.size&&(r===d.ALL_TAB_NAME_STR?(s=u.getIn([1,"uuid"]),f=u.getIn([1,"name"])):(s=l,f=r)),t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getOneInventorySettingHighType","GET","uuid="+s,function(n){(0,c.showMessage)(n)&&(t({type:i.BEFORE_EDIT_INVENETORY_HIGH_TYPE,receivedData:n.data,activeName:f,activeUuid:s}),e()),t({type:i.SWITCH_LOADING_MASK})})}},t.changeInventoryModalActiveHighType=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getOneInventorySettingHighType","GET","uuid="+e.get("uuid"),function(n){(0,c.showMessage)(n)&&t({type:i.BEFORE_EDIT_INVENETORY_HIGH_TYPE,receivedData:n.data,activeName:e.get("name"),activeUuid:e.get("uuid")}),t({type:i.SWITCH_LOADING_MASK})})}},t.beforeAddInventoryHighType=function(){return{type:i.BEFORE_INSERT_INVENTORY_CONF_HGIH_TYPE}},t.changeInventoryHighTypeContent=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_HIGH_TYPE_CONTENT,name:e,value:t})}},t.saveInventoryHighType=function(){return function(e,t){e({type:i.SWITCH_LOADING_MASK});var n=t().inventoryConfState.get("inventoryHighTypeTemp"),a=n.get("uuid")?"modify":"insert";(0,o.default)("insertInventoryHighType","POST",JSON.stringify({psiData:n}),function(t){(0,c.showMessage)(t,"show")&&0===t.code&&e({type:i.AFTER_SAVE_INVENTORYSETTING_CONTENT,title:t.data,insertOrModify:a})}),e({type:i.SWITCH_LOADING_MASK})}},t.deleteInventoryHighType=function(e){return function(t,n){var a=n().inventoryConfState,r=a.getIn(["views","activeInventoryTypeUuid"]),l=a.getIn(["views","activeTapKeyUuid"]);t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteInventorySettingHighType","POST",JSON.stringify({ctgyUuid:r}),function(n){(0,c.showMessage)(n,"show")?r==l?(0,o.default)("getInventorySettingCardList","GET","listFrom=",function(e){(0,c.showMessage)(n)&&t({type:i.DELETE_CURRENT_INVENTORY_CONF_HGIH_TYPE,title:n.data.resultList,name:d.ALL_TAB_NAME_STR,uuid:"",cardList:e.data.resultList,treeList:[]}),t({type:i.SWITCH_LOADING_MASK})}):(t({type:i.DELETE_INVENTORY_CONF_HGIH_TYPE,title:n.data.resultList}),t({type:i.SWITCH_LOADING_MASK})):t({type:i.SWITCH_LOADING_MASK}),e()})}},t.beforeAddInventoryCardType=function(){return function(e){e({type:i.BEFORE_ADD_INVENTORY_CONF_CARD_TYPE})}},t.beforeInsertAddInventoryCardType=function(){return function(e){e({type:i.BEFORE_INSERT_INVENTORY_CONF_CARD_TYPE})}},t.changeInventoryCardTypeContent=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_CARD_TYPE_CONTENT,name:e,value:t})}},t.changeInventoryCardTypeSelect=function(e){return function(t){var n=e.split(d.TREE_JOIN_STR),a=n[1],r=n[0];t({type:i.SELECT_INVENTORY_CONF_CARD_TYPE,parentName:a,parentUuid:r})}},t.saveInventoryCardType=function(e,t,n){return function(a,r){var l=r().inventoryConfState.get("inventoryCardTypeTemp").toJS();l.ctgyUuid=r().inventoryConfState.getIn(["views","activeTapKeyUuid"]);var u=function(){(0,o.default)("addInventorySettingCardType","POST",JSON.stringify({psiData:l}),function(t){(0,c.showMessage)(t,"show")&&a({type:i.SAVE_INVENTORY_CONF_CARD_TYPE,typeTree:t.data.resultList,uuid:l.uuid,btnFlag:e,typeInfo:t.data.info}),a({type:i.SWITCH_LOADING_MASK})})};a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("adjustInventorySettingTypeTitleSame","POST",JSON.stringify({psiData:{parentUuid:l.parentUuid,name:l.name,uuid:l.uuid}}),function(e){(0,c.showMessage)(e)?e.data.repeat?(t(),a({type:i.SWITCH_LOADING_MASK}),s.Confirm({message:"卡片名称与【编码："+e.data.card.code+"】卡片重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(a({type:i.SWITCH_LOADING_MASK}),u(),n()):n()},onFail:function(e){return console.log(e)}})):u():a({type:i.SWITCH_LOADING_MASK})})}},t.getInventoryTypeInfo=function(e){return function(t,n){var a=n().inventoryConfState.getIn(["typeTree","0","uuid"])===e;a?t({type:i.GET_INVENTORY_CONF_TYPE_CONTENT,uuid:e,data:{},isAll:a}):(t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCardType","GET","uuid="+e,function(n){(0,c.showMessage)(n)&&t({type:i.GET_INVENTORY_CONF_TYPE_CONTENT,uuid:e,data:n.data,isAll:a}),t({type:i.SWITCH_LOADING_MASK})}))}},t.changeInventoryCardTypeBoxChecked=function(e){return function(t){t({type:i.CHANGE_INVENTORY_CONF_CARD_TYPE_BOX_STATUS,list:e})}},t.deleteInventoryType=function(){return function(e,t){e({type:i.INVENTORY_CONF_TYPE_DELETE_BTN_SHOW})}},t.confirmDeleteInventoryType=function(){return function(e,t){var n=t().inventoryConfState.getIn(["views","typeTreeSelectList"]);if(0!==n.size){var r=t().inventoryConfState.getIn(["views","activeTapKeyUuid"]);e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteInventorySettingOneCardType","POST",JSON.stringify({ctgyUuid:r,deleteList:n}),function(t){(0,c.showMessage)(t,"show")&&e({type:i.CONFIRM_DELETE_INVENTORY_CONF_TYPE,data:t.data.resultList}),e({type:i.SWITCH_LOADING_MASK})})}else a.default.info("请选择要删除的类别")}},t.inventoryUpType=function(){return function(e,t){e({type:i.SWITCH_LOADING_MASK});var n=t().inventoryConfState.getIn(["inventorySettingBtnStatus","treeUuid"]),a=t().inventoryConfState.getIn(["inventorySettingBtnStatus","upUuid"]),r=t().inventoryConfState.getIn(["views","activeTapKeyUuid"]);(0,o.default)("swapInventorySettingTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:n,swappedSubordinateUuid:a,categoryUuid:r}}),function(t){(0,c.showMessage)(t)&&e({type:i.CHANGE_INVENTORY_CONF_TYPE_POSITION,list:t.data.resultList}),e({type:i.SWITCH_LOADING_MASK})})}},t.inventoryDownType=function(){return function(e,t){e({type:i.SWITCH_LOADING_MASK});var n=t().inventoryConfState.getIn(["inventorySettingBtnStatus","treeUuid"]),a=t().inventoryConfState.getIn(["inventorySettingBtnStatus","downUuid"]),r=t().inventoryConfState.getIn(["views","activeTapKeyUuid"]);(0,o.default)("swapInventorySettingTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:n,swappedSubordinateUuid:a,categoryUuid:r}}),function(t){(0,c.showMessage)(t)&&e({type:i.CHANGE_INVENTORY_CONF_TYPE_POSITION,list:t.data.resultList}),e({type:i.SWITCH_LOADING_MASK})})}},t.adjustInventoryCardTyepList=function(e,t,n){return function(a,r){a({type:i.SWITCH_LOADING_MASK});var l=r().inventoryConfState.getIn(["views","cardSelectList"]).toJS();l.map(function(t,n){t.subordinateName=e});var u=t,s=r().inventoryConfState.getIn(["views","activeTapKeyUuid"]),d=r().inventoryConfState.getIn(["views","activeTreeKeyUuid"]);(0,o.default)("adjustInventorySettingCardTypeList","POST",JSON.stringify({cardList:l,subordinateUuid:u,adjustFrom:s,treeFrom:d}),function(e){(0,c.showMessage)(e)&&(a({type:i.ADJUST_INVENTORY_CONF_CARD_TYPE_LIST,list:e.data.resultList}),n()),a({type:i.SWITCH_LOADING_MASK})})}},t.cancelDeleteOrAddInventoryType=function(){return function(e,t){if(t().inventoryConfState.getIn(["inventorySettingBtnStatus","isAdd"])){var n=t().inventoryConfState.getIn(["inventorySettingBtnStatus","treeUuid"]);n===t().inventoryConfState.getIn(["typeTree",0,"uuid"])?e({type:i.CANCLE_INVENTORY_CONF_TYPE_BTN,data:{}}):(e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCardType","GET","uuid="+n,function(t){(0,c.showMessage)(t)&&e({type:i.CANCLE_INVENTORY_CONF_TYPE_BTN,data:t.data}),e({type:i.SWITCH_LOADING_MASK})}))}else e({type:i.CANCLE_INVENTORY_CONF_TYPE_BTN,data:{}})}},t.beforeCHImport=function(){return{type:i.BEFORE_CH_IMPORT}},t.closeVcImportContent=function(){return{type:i.CLOSE_CH_IMPORT_CONTENT}}),h=(t.getFileUploadFetch=function(e){return function(t){(0,o.default)("chUpload","UPLOAD",e,function(e){if((0,c.showMessage)(e)){if(e.data){t({type:i.CHANGE_CH_IMPORT_NUM,name:"totalNumber",value:e.data.pages}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"importKey",value:e.data.importKey}),t({type:i.CHANGE_CH_IMPORT_STATUS,value:!0});!function n(a){a<=e.data.pages&&setTimeout(function(){(0,o.default)("chImport","POST",JSON.stringify({importKey:e.data.importKey,current:a}),function(l){(0,c.showMessage)(l)?a<e.data.pages?n(a+1):(t({type:i.CHANGE_CH_IMPORT_STATUS,value:!1}),(0,o.default)("chImportError","GET","importKey="+e.data.importKey+"&needDownload=false",function(e){t(h(e))})):(r.default.error({title:"异常提示",content:"请求异常，请稍后重试"}),t(T()))}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"curNumber",value:a})},500)}(1)}}else t(T())})}},t.getFileUploadInitialFetch=function(e){return function(t){(0,o.default)("chUploadInitial","UPLOAD",e,function(e){if((0,c.showMessage)(e)){if(e.data){t({type:i.CHANGE_CH_IMPORT_NUM,name:"totalNumber",value:e.data.pages}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"importKey",value:e.data.importKey}),t({type:i.CHANGE_CH_IMPORT_STATUS,value:!0});!function n(a){a<=e.data.pages&&setTimeout(function(){(0,o.default)("chImportInitial","POST",JSON.stringify({importKey:e.data.importKey,current:a}),function(l){(0,c.showMessage)(l)?a<e.data.pages?n(a+1):(t({type:i.CHANGE_CH_IMPORT_STATUS,value:!1}),(0,o.default)("chImportErrorInitial","GET","importKey="+e.data.importKey+"&needDownload=false",function(e){t(h(e))})):(r.default.error({title:"异常提示",content:"请求异常，请稍后重试"}),t(T()))}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"curNumber",value:a})},500)}(1)}}else t(T())})}},t.afterChImport=function(e){return function(t){t({type:i.AFTER_CH_IMPORT,receivedData:e})}}),v=(t.exportToNotification=function(e,t){return function(e){(0,o.default)(t,"GET","",function(e){(0,c.showMessage)(e,"show")})}},t.switchWarehouse=function(e){return function(t,n){e?s.Confirm({message:"“仓库管理”启用后不允许勾除，请谨慎操作。",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(e){if(1===e.buttonIndex){var r=n().inventoryConfState.get("views"),s=r.get("activeTapKey"),d=r.get("activeTapKeyUuid"),p=(0,f.fromJS)({name:s,uuid:d});t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("enableWarehouse","GET","",function(e){t({type:i.SWITCH_LOADING_MASK}),(0,c.showMessage)(e)&&(a.default.info("启用仓库成功！"),t(g(p)),t(u.getWarehouseTree()),t(l.getDbListFetch()))})}}}):(0,o.default)("disableWarehouse","GET","needCheck=true",function(e){(0,c.showMessage)(e)&&(e.data.canDisable?s.Confirm({message:"关闭仓库管理，将同步删除仓库。确定删除并关闭吗？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(e){if(1===e.buttonIndex){var r=n().inventoryConfState.get("views"),u=r.get("activeTapKey"),s=r.get("activeTapKeyUuid"),d=(0,f.fromJS)({name:u,uuid:s});t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("disableWarehouse","GET","needCheck=false",function(e){t({type:i.SWITCH_LOADING_MASK}),(0,c.showMessage)(e)&&(a.default.info("关闭仓库成功！"),t(g(d)),t(l.getDbListFetch()))})}}}):s.Confirm({message:"关闭仓库失败！有历史存货流水或存货期初值关联仓库。",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(){}}))})}},t.adjustAllRelativeCardList=function(e){return function(t){e()}},t.adjustInventoryCardList=function(e,t){return function(n){(0,o.default)("relativeInventoryTags","POST",JSON.stringify(e),function(e){(0,c.showMessage)(e)&&(t(),n(y()))})}},t.adjustCategoryOrder=function(e){return function(t){(0,o.default)("adjustCategoryOrder","POST",JSON.stringify(e),function(e){if((0,c.showMessage)(e)){var n=[{name:"全部",uuid:""}].concat(e.data.resultList);t({type:i.ADJUST_CATEGORY_ORDER_INVENTORY,payload:n})}})}},t.changeViews=function(e,t){return{type:i.CHANGE_CH_IMPORT_NUM,name:e,value:t}});t.beforeCloseMaterial=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCard","GET","uuid="+e.get("uuid"),function(n){(0,c.showMessage)(n)&&(n.data.assemblySheet&&n.data.assemblySheet.materialList?(t(v("materialModal",!0)),t(v("activeUuid",e.get("uuid")))):t(C(e.get("uuid"),!1)),t({type:i.SWITCH_LOADING_MASK}))})}},t.getRegretCategoryTree=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2];return function(a,r){a({type:i.SWITCH_LOADING_MASK}),e.get("parentUuid")?(0,o.default)("getInventorySettingCardListByType","GET","ctgyUuid="+e.get("parentUuid")+"&&subordinateUuid="+e.get("uuid")+"&currentPage="+t+"&pageSize="+d.CONFIG_PAGE_SIZE,function(e){a({type:i.SWITCH_LOADING_MASK}),(0,c.showMessage)(e)&&(a({type:i.CHANGE_CH_IMPORT_NUM,name:"cardList",value:(0,f.fromJS)(e.data.resultList)}),a({type:i.CHANGE_CH_IMPORT_NUM,name:"regretPages",value:e.data.pages}),n&&n())}):((0,o.default)("getInventorySettingCardList","GET","listFrom="+e.get("uuid")+"&currentPage="+t+"&pageSize="+d.CONFIG_PAGE_SIZE,function(e){(0,c.showMessage)(e)&&(a({type:i.SWITCH_LOADING_MASK}),a({type:i.CHANGE_CH_IMPORT_NUM,name:"cardList",value:(0,f.fromJS)(e.data.resultList)}),a({type:i.CHANGE_CH_IMPORT_NUM,name:"regretPages",value:e.data.pages}),n&&n())}),e.get("uuid")&&(0,o.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+e.get("uuid"),function(e){(0,c.showMessage)(e)&&a({type:i.CHANGE_CH_IMPORT_NUM,name:"cardTypeList",value:(0,f.fromJS)(e.data.resultList)})}))}},t.regretCode=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("regretCode","POST",JSON.stringify({regretType:"CODE_INVENTORY",cardList:e.map(function(e){return{cardUuid:e.uuid,newCode:e.newCode}}),action:"MANAGER-STOCK_SETTING-REGRET_MODEL"}),function(n){if((0,c.showMessage)(n)){var r=n.data.key;if(r)var l=new Date,u=setInterval(function(){(0,o.default)("regretResult","GET","key="+n.data.key,function(n){if((0,c.showMessage)(n)){var o=new Date;n.data.index==e.length&&n.data.regretCardDto&&n.data.regretCardDto.cardList.length==e.length?(clearInterval(u),t({type:i.CHANGE_CH_IMPORT_NUM,name:"regretResultList",value:(0,f.fromJS)(n.data.regretCardDto.cardList)}),t({type:i.SWITCH_LOADING_MASK})):n.data.index==e.length&&!n.data.regretCardDto&&o-l>3e4&&(clearInterval(u),t({type:i.SWITCH_LOADING_MASK}),a.default.info("系统出错，请重试")),t({type:i.CHANGE_CH_IMPORT_NUM,name:"regretResultIndex",value:n.data.index}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"regretResultKey",value:r})}else clearInterval(u),t({type:i.SWITCH_LOADING_MASK})})},500)}else t({type:i.SWITCH_LOADING_MASK})})}},t.downloadBefore=function(e){return function(t){(0,o.default)("regretCardConfirm","POST",JSON.stringify({cardList:e.map(function(e){return{cardUuid:e.uuid,cardName:e.name,oldCode:e.code,newCode:e.newCode}})}),function(e){if((0,c.showMessage)(e)){t({type:i.CHANGE_CH_IMPORT_NUM,name:"regretResultKey",value:e.data.key});var n=document.getElementsByClassName("regret-download-click")[0];setTimeout(function(){return n.click()},100)}})}},t.checkUsed=function(e){return function(t){(0,o.default)("checkCardUsed","POST",JSON.stringify({cardUuidList:e.map(function(e){return e.uuid}),cardType:"CARD4PERSON"}),function(e){t({type:i.CHANGE_CH_IMPORT_NUM,name:"usedCardList",value:(0,f.fromJS)(e.data.usedCard)})})}}},1317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkUsed=t.downloadBefore=t.regretCode=t.getRegretCategoryTree=t.cancelInsertOrDeleteProjectType=t.adjustProjectCardTyepList=t.projectDownType=t.projectUpType=t.confirmDeleteProjectType=t.deleteProjectType=t.changeProjectCardTypeBoxChecked=t.switchProjectType=t.saveProjectCardType=t.changeProjectCardTypeSelect=t.changeProjectCardTypeContent=t.beforeInsertProjectConfCardType=t.beforeAddProjectCardType=t.saveProjectHighType=t.changePrejectHighTypeContent=t.getProjectHighTypeOne=t.getProjectCardListByType=t.selectProjectCardAll=t.changeProjectCardBoxStatus=t.modifyProjectCardUsedStatus=t.refreshProjectList=t.changeProjectActiveHighType=t.getProjectConfigInit=void 0;var a=p(n(37)),r=p(n(47)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(38),n(46);var o=f(n(1302)),l=(f(n(43)),p(n(52))),u=n(22),c=f(n(30)),s=f(n(27)),d=n(18);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}r.default.confirm,t.getProjectConfigInit=function(){return function(e,t){e({type:o.SWITCH_LOADING_MASK}),(0,l.default)("getProjectConfigHighType","GET","",function(t){(0,u.showMessage)(t)&&e({type:o.PROJECT_GET_HTIGH_TYPE,list:t.data})});t().projectConfState.getIn(["views","activeTapKeyUuid"]),t().projectConfState.get("treeSelectUuid");(0,l.default)("getProjectListAndTree","GET","listFrom=&currentPage=1&pageSize="+s.CONFIG_PAGE_SIZE+"&condition=",function(t){e({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(t)&&e({type:o.GET_PROJECT_LIST_AND_TREE,cardList:t.data.resultList,treeList:t.data.typeList,pageCount:t.data.pages})})}},t.changeProjectActiveHighType=function(e){return function(t,n){t({type:o.SWITCH_LOADING_MASK});var a=e.get("name"),r=e.get("uuid");(0,l.default)("getProjectListAndTree","GET","listFrom="+r+"&currentPage=1&pageSize="+s.CONFIG_PAGE_SIZE+"&condition=",function(e){(0,u.showMessage)(e)&&t({type:o.CHANGE_ACTIVE_PROJECT_HIGH_TYPE,cardList:e.data.resultList,treeList:e.data.typeList,name:a,uuid:r,pageCount:e.data.pages}),t({type:o.SWITCH_LOADING_MASK})})}},t.refreshProjectList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2];return function(e,a){e({type:o.SWITCH_LOADING_MASK});var r=a().projectConfState.get("views"),i=void 0===n?r.get("searchContent"):n,c=a().projectConfState.getIn(["views","activeTapKeyUuid"]);a().projectConfState.getIn(["views","selectTypeId"]);(0,l.default)("getProjectListAndTree","GET","listFrom="+c+"&condition="+i+"&pageSize="+s.CONFIG_PAGE_SIZE+"&currentPage="+t,function(a){e({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)&&e({type:o.GET_PROJECT_LIST_AND_TREE,cardList:a.data.resultList,treeList:a.data.typeList,isFresh:!0,currentPage:t,searchContent:n,pageCount:a.data.pages})})}},t.modifyProjectCardUsedStatus=function(e,t){return function(n){n({type:o.SWITCH_LOADING_MASK}),(0,l.default)("changeProjectCardUsedStatus","POST",JSON.stringify({psiData:{uuid:e,used:t}}),function(a){(0,u.showMessage)(a,"show")&&n({type:o.CHANGE_PEOJECT_CONF_CARD_USED_STATUS,list:a.data.resultList,uuid:e,used:t}),n({type:o.SWITCH_LOADING_MASK})})}},t.changeProjectCardBoxStatus=function(e,t){return function(n){n({type:o.CHANGE_PEOJECT_CONF_CARD_BOX_STATUS,status:e,uuid:t})}},t.selectProjectCardAll=function(e){return function(t){t({type:o.SELECT_PEOJECT_CONF_CARD_ALL,value:e})}},t.getProjectCardListByType=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments[4];return function(i,c){i({type:o.SWITCH_LOADING_MASK});var d=c().projectConfState.get("views"),f=void 0===r?d.get("searchContent"):r;(0,l.default)("getProjectCardByType","GET","ctgyUuid="+e+"&&subordinateUuid="+t+"&condition="+f+"&pageSize="+s.CONFIG_PAGE_SIZE+"&currentPage="+a,function(l){(0,u.showMessage)(l)&&i({type:o.SELECT_PROJECT_CARD_BY_TYPE,list:l.data.resultList,uuid:t,name:n,parentUuid:e,currentPage:a,searchContent:r,pageCount:l.data.pages}),i({type:o.SWITCH_LOADING_MASK})})}},t.getProjectHighTypeOne=function(e,t){return function(n){n({type:o.SWITCH_LOADING_MASK});var a=e.uuid,r=e.name;(0,l.default)("getProjectConfigHighTypeOne","GET","uuid="+a,function(e){(0,u.showMessage)(e)&&(n({type:o.GET_PROJECT_HIGH_TYPE_ONE,data:e.data,name:r,uuid:a}),t&&t()),n({type:o.SWITCH_LOADING_MASK})})}},t.changePrejectHighTypeContent=function(e,t){return function(n){n({type:o.CHANGE_PREJECT_HIGH_TYPE_CONTENT,name:e,value:t})}},t.saveProjectHighType=function(e){return function(t,n){t({type:o.SWITCH_LOADING_MASK});var a=n().projectConfState.get("projectHighTypeTemp").toJS(),r=a.commonFee,c=a.beMake,s=a.beAssist,d=a.beIndirect,f=a.beMechanical,p=a.assistOpen,m=a.makeOpen,y=a.indirectOpen,g=a.mechanicalOpen,E=(a.saveProjectHighType,{"生产项目":{beMake:c,beAssist:s,makeOpen:m,assistOpen:p},"施工项目":{beIndirect:d,beMechanical:f,indirectOpen:y,mechanicalOpen:g},"损益项目":{commonFee:r}}[a.name]);(0,l.default)("modifyProjectConfigHighType","POST",JSON.stringify({psiData:i({},E,{name:a.name,uuid:a.uuid})}),function(n){(0,u.showMessage)(n,"show")&&e(),t({type:o.SWITCH_LOADING_MASK})})}},t.beforeAddProjectCardType=function(){return function(e){e({type:o.BEFORE_ADD_PROJECT_CONFIG_CARD_TYPE})}},t.beforeInsertProjectConfCardType=function(){return function(e){e({type:o.BEFORE_INSERT_PROJECT_CONF_CARD_TYPE})}},t.changeProjectCardTypeContent=function(e,t){return function(n){n({type:o.CHANGE_PROJECT_CONF_CARD_TYPE_CONTENT,name:e,value:t})}},t.changeProjectCardTypeSelect=function(e){return function(t){var n=e.split(s.TREE_JOIN_STR),a=n[1],r=n[0];t({type:o.SELECT_PROJECT_CONF_CARD_TYPE,parentName:a,parentUuid:r})}},t.saveProjectCardType=function(e,t,n){return function(a,r){var i=r().projectConfState.get("projectTypeTemp").toJS();i.ctgyUuid=r().projectConfState.getIn(["views","activeTapKeyUuid"]);var s=function(){(0,l.default)("insertProjectTreeOne","POST",JSON.stringify({psiData:i}),function(t){(0,u.showMessage)(t,"show")&&a({type:o.SAVE_PROJECT_CONF_CARD_TYPE,typeTree:t.data.resultList,uuid:i.uuid,btnFlag:e,typeInfo:t.data.info}),a({type:o.SWITCH_LOADING_MASK})})};a({type:o.SWITCH_LOADING_MASK}),(0,l.default)("adjustProjectTypeNameSame","POST",JSON.stringify({psiData:{parentUuid:i.parentUuid,name:i.name,uuid:i.uuid}}),function(e){(0,u.showMessage)(e)?e.data.repeat?(t(),a({type:o.SWITCH_LOADING_MASK}),c.Confirm({message:"卡片类别名称与已有卡片类别名称重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(a({type:o.SWITCH_LOADING_MASK}),s(),n()):n()},onFail:function(e){return console.log(e)}})):s():a({type:o.SWITCH_LOADING_MASK})})}},t.switchProjectType=function(e){return function(t,n){var a=n().projectConfState.getIn(["typeTree","0","uuid"])===e;a?t({type:o.GET_PROJECT_CONF_TYPE_CONTENT,uuid:e,data:{},isAll:a}):(t({type:o.SWITCH_LOADING_MASK}),(0,l.default)("getProjectTreeOne","GET","uuid="+e,function(n){(0,u.showMessage)(n)&&t({type:o.GET_PROJECT_CONF_TYPE_CONTENT,uuid:e,data:n.data,isAll:a}),t({type:o.SWITCH_LOADING_MASK})}))}},t.changeProjectCardTypeBoxChecked=function(e){return function(t){t({type:o.CHANGE_PROJECT_CONF_CARD_TYPE_BOX_STATUS,list:e})}},t.deleteProjectType=function(){return function(e,t){e({type:o.PROJECT_CONF_TYPE_DELETE_BTN_SHOW})}},t.confirmDeleteProjectType=function(){return function(e,t){var n=t().projectConfState.getIn(["views","typeTreeSelectList"]);if(0!==n.size){var r=t().projectConfState.getIn(["views","activeTapKeyUuid"]);e({type:o.SWITCH_LOADING_MASK}),(0,l.default)("deleteProjectType","POST",JSON.stringify({ctgyUuid:r,deleteList:n}),function(t){(0,u.showMessage)(t,"show")&&e({type:o.CONFIRM_DELETE_PROJECT_CONF_TYPE,data:t.data.resultList}),e({type:o.SWITCH_LOADING_MASK})})}else a.default.info("请选择要删除的类别")}},t.projectUpType=function(){return function(e,t){e({type:o.SWITCH_LOADING_MASK});var n=t().projectConfState.getIn(["projectTypeBtnStatus","treeUuid"]),a=t().projectConfState.getIn(["projectTypeBtnStatus","upUuid"]),r=t().projectConfState.getIn(["views","activeTapKeyUuid"]);(0,l.default)("swapProjectTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:n,swappedSubordinateUuid:a,categoryUuid:r}}),function(t){(0,u.showMessage)(t)&&e({type:o.CHANGE_PROJECT_CONF_TYPE_POSITION,list:t.data.resultList,selectedSubordinateUuid:n}),e({type:o.SWITCH_LOADING_MASK})})}},t.projectDownType=function(){return function(e,t){e({type:o.SWITCH_LOADING_MASK});var n=t().projectConfState.getIn(["projectTypeBtnStatus","treeUuid"]),a=t().projectConfState.getIn(["projectTypeBtnStatus","downUuid"]),r=t().projectConfState.getIn(["views","activeTapKeyUuid"]);(0,l.default)("swapProjectTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:n,swappedSubordinateUuid:a,categoryUuid:r}}),function(t){(0,u.showMessage)(t)&&e({type:o.CHANGE_PROJECT_CONF_TYPE_POSITION,list:t.data.resultList,selectedSubordinateUuid:n}),e({type:o.SWITCH_LOADING_MASK})})}},t.adjustProjectCardTyepList=function(e,t,n){return function(a,r){a({type:o.SWITCH_LOADING_MASK});var i=r().projectConfState.getIn(["views","cardSelectList"]).toJS();i.map(function(t,n){t.subordinateName=e});var c=t,s=r().projectConfState.getIn(["views","activeTapKeyUuid"]),d=r().projectConfState.getIn(["views","activeTreeKeyUuid"]);(0,l.default)("adjustProjectCardType","POST",JSON.stringify({cardList:i,subordinateUuid:c,adjustFrom:s,treeFrom:d}),function(e){(0,u.showMessage)(e)&&(a({type:o.ADJUST_PROJECT_CONF_CARD_TYPE_LIST,list:e.data.resultList}),n()),a({type:o.SWITCH_LOADING_MASK})})}},t.cancelInsertOrDeleteProjectType=function(){return function(e,t){if(t().projectConfState.getIn(["projectTypeBtnStatus","isAdd"])){var n=t().projectConfState.getIn(["projectTypeBtnStatus","treeUuid"]);n===t().projectConfState.getIn(["typeTree",0,"uuid"])?e({type:o.CANCLE_PROJECT_CONF_TYPE_BTN,data:{}}):(e({type:o.SWITCH_LOADING_MASK}),(0,l.default)("getProjectTreeOne","GET","uuid="+n,function(t){(0,u.showMessage)(t)&&e({type:o.CANCLE_PROJECT_CONF_TYPE_BTN,data:t.data}),e({type:o.SWITCH_LOADING_MASK})}))}else e({type:o.CANCLE_PROJECT_CONF_TYPE_BTN,data:{}})}},t.getRegretCategoryTree=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2];return function(a,r){a({type:o.SWITCH_LOADING_MASK}),e.get("parentUuid")?(0,l.default)("getProjectCardByType","GET","ctgyUuid="+e.get("parentUuid")+"&&subordinateUuid="+e.get("uuid")+"&currentPage="+t+"&pageSize="+s.CONFIG_PAGE_SIZE,function(e){a({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(a({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"cardList",value:(0,d.fromJS)(e.data.resultList)}),a({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretPages",value:e.data.pages}),n&&n())}):(0,l.default)("getProjectListAndTree","GET","listFrom="+e.get("uuid")+"&currentPage="+t+"&pageSize="+s.CONFIG_PAGE_SIZE,function(e){(0,u.showMessage)(e)&&(a({type:o.SWITCH_LOADING_MASK}),a({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"cardList",value:(0,d.fromJS)(e.data.resultList)}),a({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretPages",value:e.data.pages}),a({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"cardTypeList",value:(0,d.fromJS)(e.data.typeList)}),n&&n())})}},t.regretCode=function(e){return function(t){t({type:o.SWITCH_LOADING_MASK}),(0,l.default)("regretCode","POST",JSON.stringify({regretType:"CODE_PROJECT",cardList:e.map(function(e){return{cardUuid:e.uuid,newCode:e.newCode}}),action:"MANAGER-PROJECT_SETTING-REGRET_MODEL"}),function(n){if((0,u.showMessage)(n)){var r=n.data.key;if(r)var i=new Date,c=setInterval(function(){(0,l.default)("regretResult","GET","key="+n.data.key,function(n){if((0,u.showMessage)(n)){var l=new Date;n.data.index==e.length&&n.data.regretCardDto&&n.data.regretCardDto.cardList.length==e.length?(clearInterval(c),t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretResultList",value:(0,d.fromJS)(n.data.regretCardDto.cardList)}),t({type:o.SWITCH_LOADING_MASK})):n.data.index==e.length&&!n.data.regretCardDto&&l-i>3e4&&(clearInterval(c),t({type:o.SWITCH_LOADING_MASK}),a.default.info("系统出错，请重试")),t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretResultIndex",value:n.data.index}),t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretResultKey",value:r})}else clearInterval(c),t({type:o.SWITCH_LOADING_MASK})})},500)}else t({type:o.SWITCH_LOADING_MASK})})}},t.downloadBefore=function(e){return function(t){(0,l.default)("regretCardConfirm","POST",JSON.stringify({cardList:e.map(function(e){return{cardUuid:e.uuid,cardName:e.name,oldCode:e.code,newCode:e.newCode}})}),function(e){if((0,u.showMessage)(e)){t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretResultKey",value:e.data.key});var n=document.getElementsByClassName("regret-download-click")[0];setTimeout(function(){return n.click()},100)}})}},t.checkUsed=function(e){return function(t){(0,l.default)("checkCardUsed","POST",JSON.stringify({cardUuidList:e.map(function(e){return e.uuid}),cardType:"CARD4PERSON"}),function(e){t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"usedCardList",value:(0,d.fromJS)(e.data.usedCard)})})}}},1318:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_INVENTORY_CONF="INIT_INVENTORY_CONF",t.CHANGE_ACTIVE_INVENTORY_CONF_HIGH_TYPE="CHANGE_ACTIVE_INVENTORY_CONF_HIGH_TYPE",t.CHANGE_INVENTORY_CONF_CARD_USED_STATUS="CHANGE_INVENTORY_CONF_CARD_USED_STATUS",t.SELECT_INVENTORY_CONF_CARD_ALL="SELECT_INVENTORY_CONF_CARD_ALL",t.CHANGE_INVENTORY_CONF_CARD_BOX_STATUS="CHANGE_INVENTORY_CONF_CARD_BOX_STATUS",t.DELETE_INVENTORY_CONF_CARD_LIST="DELETE_INVENTORY_CONF_CARD_LIST",t.SELECT_INVENTORY_CONF_CARD_BY_TYPE="SELECT_INVENTORY_CONF_CARD_BY_TYPE",t.GET_INVENTORY_CONFIG_INIT="GET_INVENTORY_CONFIG_INIT",t.BEFORE_EDIT_INVENETORY_HIGH_TYPE="BEFORE_EDIT_INVENETORY_HIGH_TYPE",t.BEFORE_INSERT_INVENTORY_CONF_HGIH_TYPE="BEFORE_INSERT_INVENTORY_CONF_HGIH_TYPE",t.CHANGE_INVENTORY_CONF_HIGH_TYPE_CONTENT="CHANGE_INVENTORY_CONF_HIGH_TYPE_CONTENT",t.AFTER_SAVE_INVENTORYSETTING_CONTENT="AFTER_SAVE_INVENTORYSETTING_CONTENT",t.DELETE_INVENTORY_CONF_HGIH_TYPE="DELETE_INVENTORY_CONF_HGIH_TYPE",t.DELETE_CURRENT_INVENTORY_CONF_HGIH_TYPE="DELETE_CURRENT_INVENTORY_CONF_HGIH_TYPE",t.GET_INVENTORY_CONF_HIGH_TYPE_LIST="GET_INVENTORY_CONF_HIGH_TYPE_LIST",t.CHANGE_INVENTORY_CONF_ASSEMBLY_STATUS="CHANGE_INVENTORY_CONF_ASSEMBLY_STATUS",t.BEFORE_ADD_INVENTORY_CONF_CARD_INVENTORY="BEFORE_ADD_INVENTORY_CONF_CARD_INVENTORY",t.INIT_ADD_INVENTORY_STATE="INIT_ADD_INVENTORY_STATE",t.BEFORE_ADD_INVENTORY_CONF_CARD_RUNNING="BEFORE_ADD_INVENTORY_CONF_CARD_RUNNING",t.EMPTY_WAREHOUSE_LIST_QUANTITY="EMPTY_WAREHOUSE_LIST_QUANTITY",t.CHANGE_INVENTORY_CONF_CARD_CONTENT="CHANGE_INVENTORY_CONF_CARD_CONTENT",t.CHANGE_INVENTORY_CARD_CONTENT="CHANGE_INVENTORY_CARD_CONTENT",t.CHANGE_INVENTORY_CONF_CARD_VIEWS="CHANGE_INVENTORY_CONF_CARD_VIEWS",t.CHANGE_INVENTORY_CONF_VIEWS_CONTENT="CHANGE_INVENTORY_CONF_VIEWS_CONTENT",t.CHANGE_INVENTORY_CONF_CARD_NATURE="CHANGE_INVENTORY_CONF_CARD_NATURE",t.CHANGE_INVENTORY_CONF_CARD_CATEGORY_STATUS="CHANGE_INVENTORY_CONF_CARD_CATEGORY_STATUS",t.CHANGE_INVENTORY_CONF_CARD_CATEGORY_TYPE="CHANGE_INVENTORY_CONF_CARD_CATEGORY_TYPE",t.CHANGE_INVENTORY_CONF_INNER_STRING="CHANGE_INVENTORY_CONF_INNER_STRING",t.IVNENTORY_CHARGE_ITEM_CHECKBOX_SELECT="IVNENTORY_CHARGE_ITEM_CHECKBOX_SELECT",t.SAVE_INVENTORY_CONF_CARD_INVENTORY="SAVE_INVENTORY_CONF_CARD_INVENTORY",t.BEFORE_EDIT_INVENTORY_CONF_CARD="BEFORE_EDIT_INVENTORY_CONF_CARD",t.BEFORE_ADD_INVENTORY_CONF_CARD_TYPE="BEFORE_ADD_INVENTORY_CONF_CARD_TYPE",t.BEFORE_INSERT_INVENTORY_CONF_CARD_TYPE="BEFORE_INSERT_INVENTORY_CONF_CARD_TYPE",t.CHANGE_INVENTORY_CONF_CARD_TYPE_CONTENT="CHANGE_INVENTORY_CONF_CARD_TYPE_CONTENT",t.SELECT_INVENTORY_CONF_CARD_TYPE="SELECT_INVENTORY_CONF_CARD_TYPE",t.GET_INVENTORY_CONF_TYPE_CONTENT="GET_INVENTORY_CONF_TYPE_CONTENT",t.CHANGE_INVENTORY_CONF_CARD_TYPE_BOX_STATUS="CHANGE_INVENTORY_CONF_CARD_TYPE_BOX_STATUS",t.INVENTORY_CONF_TYPE_DELETE_BTN_SHOW="INVENTORY_CONF_TYPE_DELETE_BTN_SHOW",t.CONFIRM_DELETE_INVENTORY_CONF_TYPE="CONFIRM_DELETE_INVENTORY_CONF_TYPE",t.CHANGE_INVENTORY_CONF_TYPE_POSITION="CHANGE_INVENTORY_CONF_TYPE_POSITION",t.CANCLE_INVENTORY_CONF_TYPE_BTN="CANCLE_INVENTORY_CONF_TYPE_BTN",t.SAVE_INVENTORY_CONF_CARD_TYPE="SAVE_INVENTORY_CONF_CARD_TYPE",t.ADJUST_INVENTORY_CONF_CARD_TYPE_LIST="ADJUST_INVENTORY_CONF_CARD_TYPE_LIST",t.INIT_UNIT_STATE="INIT_UNIT_STATE",t.BEFORE_CH_IMPORT="BEFORE_CH_IMPORT",t.CLOSE_CH_IMPORT_CONTENT="CLOSE_CH_IMPORT_CONTENT",t.CHANGE_CH_IMPORT_STATUS="CHANGE_CH_IMPORT_STATUS",t.CHANGE_CH_IMPORT_NUM="CHANGE_CH_IMPORT_NUM",t.AFTER_CH_IMPORT="AFTER_CH_IMPORT",t.ADJUST_CATEGORY_ORDER_INVENTORY="ADJUST_CATEGORY_ORDER_INVENTORY",t.CHOOSE_ASSIST_UNIFORM="CHOOSE_ASSIST_UNIFORM"},1345:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=y(n(14)),r=y(n(100)),i=y(n(32)),o=y(n(37)),l=y(n(47)),u=y(n(171)),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78),n(99),n(51),n(38),n(46),n(170);var d=y(n(1));y(n(0)),n(18),n(56);n(1240);m(n(27));var f=y(n(90)),p=(n(22),y(n(1244)),y(n(1288)),n(127));m(n(1241));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}u.default.TreeNode;var E=l.default.confirm,C=new RegExp("^[^一-龥]{0,16}$"),T=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={curSerialList:a.props.serialList.toJS()||[],preWords:"",openNumber:"",increase:"",addNumber:"",curPage:1,sortIndex:1},a.matchMath=function(e){return e.match(/\d+$/)?e.match(/\d+$/)[0]:""},g(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=(t.assistModal,t.allAssistClassificationList,t.assistClassificationList,t.onClose),u=t.visible,s=t.onOk,m=t.fromPage,y=this.state,g=y.curSerialList,T=y.curPage,h=y.preWords,v=y.addNumber,_=y.openNumber,S=y.increase,I=y.sortIndex,N=Math.ceil((g.length||1)/20),O=g.filter(function(e,t){return t<20*T&&t>=20*(T-1)});return d.default.createElement(l.default,{destroyOnClose:!0,className:"serial-modal",width:"480px",visible:u,maskClosable:!1,title:"序列号录入",footer:[d.default.createElement(i.default,{style:g.length?{borderColor:"#fd5458",color:"#fd5458"}:{},disabled:!g.length,onClick:function(){g.some(function(e){return e.serialUuid&&!e.canModify})?o.default.info("存在序列号已出库，不允许清空"):g.length&&l.default.confirm({title:"提示",content:"确认清空当前序列号吗？",onOk:function(){e.setState({curSerialList:[],curPage:1})}})}},"清空"),d.default.createElement(i.default,{onClick:n},"取消"),d.default.createElement(i.default,{type:"primary",onClick:function(){var t=[],a=g.map(function(e){return c({},e,{serialNumber:(e.serialNumber||"").trim()})});if(a.forEach(function(e,n){(e.serialNumber||"").length>16&&t.push(n+1)}),a.length>1e3)o.default.info("序列号数量不能超过1000个！");else if(a.some(function(e){return!e.serialNumber}))o.default.info("序列号不能为空！");else if(t.length){var r=t;o.default.info("序号"+r.join("、")+"的序列号不可超过16字符")}else if("inventory"===m&&g.length>1e3)o.default.info("序列号不能超过1000个");else{if("inventory"!==m&&g.length>100)o.default.info("序列号不能超过100个");else{var i=[],l=[];if(a.map(function(e,t){var n=e.serialNumber,a=g.findIndex(function(e,a){return n===e.serialNumber&&t<a});a>-1&&(i.push(t+1),l=l.concat([a+1,t+1]))}),i.length){var u=Array.from(new Set(l)).sort(function(e,t){return e-t}).join("、");return void E({title:"提示",okText:"自动去重",cancelText:"取消",content:"序号"+u+"序列号重复！",onOk:function(){var t=a.filter(function(e,t){return!i.some(function(e){return e===t+1})});e.setState({curSerialList:t})}})}}s(a),n()}}},"确定")],onCancel:n},d.default.createElement("div",null,d.default.createElement("div",{className:"serial-condition"},d.default.createElement("div",null,d.default.createElement("span",null,"前缀："),d.default.createElement(r.default,{onChange:function(t){C.test(t.target.value)?e.setState({preWords:t.target.value}):o.default.info("前缀仅支持16位数字、字母和符号")},value:h})),d.default.createElement("div",null,d.default.createElement("span",null,"起始号："),d.default.createElement(p.NumberInput,{type:"roundNumber",onChange:function(t){e.setState({openNumber:t})},value:_}))),d.default.createElement("div",{className:"serial-condition"},d.default.createElement("div",null,d.default.createElement("span",null,"递增量："),d.default.createElement(p.NumberInput,{type:"roundNumber",onChange:function(t){e.setState({increase:t})},value:S})),d.default.createElement("div",{className:"special"},d.default.createElement("span",null,"个数："),d.default.createElement(p.NumberInput,{type:"roundNumber",onChange:function(t){t<=1e3?e.setState({addNumber:t}):o.default.info("个数不可大于1000")},value:v}),d.default.createElement(i.default,{type:"primary",disabled:!_||!S||!v,onClick:function(){for(var t=h||"",n=[{serialNumber:(t+_).trim()}],a=1;a<Number(v);a++){for(var r=Number(_),i=_.length,l=String(r).length,u=i-l,c=String(r+Number(S)*a),s=u-c.length+l,d="",f=1;f<=s;f++)d+="0";n.push({serialNumber:(t+d+c).trim()})}g.concat(n).some(function(e){return e.serialNumber&&e.serialNumber.length>16})?o.default.info("序列号不可超过16个字符"):e.setState({curSerialList:g.concat(n)})}},"新增"))),d.default.createElement("div",{style:{overflow:"hidden"}},d.default.createElement(p.TableAll,{className:"serial-table"},d.default.createElement("div",{className:"table-title-wrap"},d.default.createElement("ul",{className:"serial-table-item serial-table-title table-title",line:2},d.default.createElement("li",null,"操作"),d.default.createElement("li",null,"序列"),d.default.createElement("li",null,"序列号",d.default.createElement("span",{className:"icon-sort",onClick:function(){e.setState({curSerialList:g.sort(function(e,t){return e.serialNumber>t.serialNumber?I:-I}),sortIndex:-I})}})))),d.default.createElement(p.TableBody,null,(O.length?O:[{}]).map(function(t,n){return d.default.createElement(p.TableItem,{className:"serial-table-item",line:n+1,key:n},d.default.createElement("li",null,d.default.createElement("span",null,d.default.createElement(f.default,{type:"big-plus",onClick:function(){0===g.length?e.setState({curSerialList:[{},{}]}):(g.splice(20*(T-1)+n+1,0,{}),e.setState({curSerialList:g}))}})),d.default.createElement("span",null,d.default.createElement(a.default,{type:"close",onClick:function(){!t.serialUuid||t.canModify?0===g.length?e.setState({curSerialList:[]}):(g.splice(20*(T-1)+n,1),e.setState({curSerialList:g,curPage:(0===O.length||1===O.length)&&N>1?T-1:T})):o.default.info("该序列号已出库,无法删除")}}))),d.default.createElement("li",null,20*(T-1)+n+1),d.default.createElement("li",null,d.default.createElement(r.default,{value:t.serialNumber,onChange:function(t){C.test(t.target.value)?g.length?(g[20*(T-1)+n].serialNumber=t.target.value,e.setState({curSerialList:g})):e.setState({curSerialList:[{serialNumber:t.target.value}]}):o.default.info("序列号仅支持数字、字母和符号")}})))})),d.default.createElement(p.TablePagination,{size:"small",currentPage:T,pageCount:N,paginationCallBack:function(t){return e.setState({curPage:t})}})))))}}]),t}();t.default=T},1360:function(e,t,n){},1362:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=m(n(47)),r=m(n(1230)),i=m(n(100)),o=m(n(37)),l=m(n(32)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(1231),n(99),n(38),n(51);var c=m(n(1));m(n(0)),n(18),n(56);n(1240);p(n(27));var s=m(n(6)),d=n(22),f=(n(127),m(n(487)),p(n(1241)));m(n(1237));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={batchNumber:"",batchDate:"",value:"",expirationDate:""},a.getCurShelfLife=function(e,t){var n=Date.parse(e),a=Date.parse(t);return a>n?Math.floor((a-n)/864e5):null},a.calculLife=function(e,t){var n=Date.parse(e),a=new Date(n+24*t*3600*1e3);return new d.DateLib(a).toString()},a.initState=function(){a.setState({batchDate:"",batchNumber:"",expirationDate:""})},y(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,n=t.batchDate,u=t.batchNumber,d=t.expirationDate,p=this.props,m=p.dispatch,y=p.uuid,g=(p.onChange,p.close),E=p.visible,C=p.openShelfLife,T=p.onOk,h=p.shelfLife,v=p.callBack;return c.default.createElement(a.default,{title:"新增批次",visible:E,onCancel:g,footer:[c.default.createElement(l.default,{onClick:g},"取消"),c.default.createElement(l.default,{onClick:function(){T?T(u,n,d,g,v):m(f.insertBatch(u,C?n:"",C?d:"",y,g,v))}},"保存"),c.default.createElement(l.default,{type:"primary",onClick:function(){T?T(u,n,d,e.initState):m(f.insertBatch(u,C?n:"",C?d:"",y,e.initState))}},"保存并新增")]},c.default.createElement("div",{className:"batch-select-frame"},c.default.createElement("div",null,c.default.createElement("span",null,c.default.createElement("span",{style:{color:"red"}},"*"),"批次号："),c.default.createElement(i.default,{value:u,onChange:function(t){t.preventDefault();/^[0-9a-zA-Z]{0,20}$/.test(t.target.value)?e.setState({batchNumber:t.target.value}):o.default.info("批次只支持输入20位以内的数字或字母")},placeholder:"请输入批次号"})),C?c.default.createElement("div",null,c.default.createElement("span",null,"生产日期："),c.default.createElement(r.default,{placeholder:"请选择生产日期",allowClear:!1,size:"small",value:n?(0,s.default)(n):"",onChange:function(t){var n=t.format("YYYY-MM-DD");e.setState({batchDate:n}),!d&&h&&e.setState({expirationDate:e.calculLife(n,h)})}})):"",C?c.default.createElement("div",null,c.default.createElement("span",null,c.default.createElement("span",{style:{color:"red"}},"*"),"截止日期："),c.default.createElement(r.default,{placeholder:"请选择截止日期",allowClear:!1,size:"small",value:d?(0,s.default)(d):"",onChange:function(t){var n=t.format("YYYY-MM-DD");e.setState({expirationDate:n})}})):"",C&&(h||n&&d)?c.default.createElement("div",null,c.default.createElement("span",null),c.default.createElement("div",null,"("+(h?"默认保质期："+h+"天 ":"")+(this.getCurShelfLife(n,d)?"实际保质期："+this.getCurShelfLife(n,d)+"天":"")+")")):""))}}]),t}();t.default=g},1363:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=E(n(1230)),r=E(n(100)),i=E(n(37)),o=E(n(32)),l=E(n(45)),u=E(n(47)),c=E(n(171)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1231),n(99),n(38),n(51),n(55),n(46),n(170);var d=E(n(1));E(n(0)),n(18),n(56);n(1240);var f=g(n(27)),p=(E(n(90)),n(22)),m=E(n(6)),y=(E(n(1244)),n(127));g(n(1241));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}c.default.TreeNode,u.default.confirm;var T=l.default.Option,h=(l.default.OptGroup,function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={modifyBatch:"",modifyBatchDate:"",modifyBatchUuid:"",modifyExpirationDate:""},a.emptyState=function(){a.setState({modifyBatchUuid:"",batch:"",modifyBatch:"",modifyBatchDate:"",modifyExpirationDate:""})},a.calculLife=function(e,t){var n=Date.parse(e),a=new Date(n+24*t*3600*1e3);return new p.DateLib(a).toString()},a.getCurShelfLife=function(e,t){var n=Date.parse(e),a=Date.parse(t);return a>n?Math.floor((a-n)/864e5):null},C(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"componentDidMount",value:function(){if(this.props.modifyBatchUuid){var e=this.props,t=e.modifyBatchUuid,n=e.batch,a=e.modifyBatchDate;this.setState({modifyBatchUuid:t,batch:n,modifyBatch:n,modifyBatchDate:a})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,l=t.onClose,c=t.onOk,s=t.onOkAndNew,g=t.batchList,E=t.openShelfLife,C=t.insertOrModify,h=void 0===C?"modify":C,v=t.saveAndNewForbidden,_=t.className,S=t.shelfLife,I=this.state,N=I.modifyBatch,O=I.modifyBatchUuid,b=this.state.modifyBatchDate&&"undefined"!==this.state.modifyBatchDate?this.state.modifyBatchDate:(new p.DateLib).toString(),A=this.state.modifyExpirationDate&&"undefined"!==this.state.modifyExpirationDate?this.state.modifyExpirationDate:"";return d.default.createElement(u.default,{className:_,visible:n,okText:"保存",footer:[d.default.createElement(o.default,{onClick:l},"取消"),d.default.createElement(o.default,{type:"primary",onClick:function(){c(N,O,b,A),e.emptyState()}},"保存"),v?"":d.default.createElement(o.default,{type:"primary",onClick:function(){s(N,O,b,A),e.emptyState()}},"保存并继续")],title:"修改批次信息",onCancel:l},d.default.createElement("div",{className:"batch-modal"},d.default.createElement("div",null,d.default.createElement("span",null,"原批次："),d.default.createElement("div",null,d.default.createElement(y.XfnSelect,{dropdownClassName:"inventory-are-for-dom",className:"batch-select",showSearch:!0,placeholder:"请选择批次号",value:this.state.batch,onChange:function(t){var n=t.split(f.TREE_JOIN_STR),a=n[0],r=n[1],i=n[2],o=n[3];e.setState({modifyBatchUuid:r,batch:a,modifyBatch:a,modifyBatchDate:i,modifyExpirationDate:o})}},g.map(function(e){return d.default.createElement(T,{key:"insert"===h?e.get("batch"):""+e.get("batchUuid"),value:""+e.get("batch")+f.TREE_JOIN_STR+e.get("batchUuid")+f.TREE_JOIN_STR+e.get("productionDate")+f.TREE_JOIN_STR+e.get("expirationDate")},""+e.get("batch"))})))),d.default.createElement("div",{className:"jxc-config-title",style:{marginBottom:0,paddingBottom:"10px"}},"修改后信息"),d.default.createElement("div",null,d.default.createElement("span",null,"批次号："),d.default.createElement("div",null,d.default.createElement(r.default,{value:N,placeholder:"请输入批次号",onChange:function(t){t.preventDefault();/^[0-9a-zA-Z]{0,20}$/.test(t.target.value)?e.setState({modifyBatch:t.target.value}):i.default.info("批次只支持输入20位以内的数字或字母")}}))),E?d.default.createElement("div",null,d.default.createElement("span",null,"生产日期："),d.default.createElement("div",null,d.default.createElement(a.default,{allowClear:!1,dropdownClassName:"inventory-are-for-dom",value:b?(0,m.default)(b):"",onChange:function(t){var n=t.format("YYYY-MM-DD");e.setState({modifyBatchDate:n}),!A&&S&&e.setState({modifyExpirationDate:e.calculLife(n,S)})}}))):"",E?d.default.createElement("div",null,d.default.createElement("span",null,d.default.createElement("span",{style:{color:"red"}},"*"),"截止日期"),d.default.createElement("div",null,d.default.createElement(a.default,{allowClear:!1,dropdownClassName:"inventory-are-for-dom",value:A?(0,m.default)(A):"",onChange:function(t){var n=t.format("YYYY-MM-DD");e.setState({modifyExpirationDate:n})}}))):"",E&&(S||b&&A)?d.default.createElement("div",null,d.default.createElement("span",null),d.default.createElement("div",null,"("+(S?"默认保质期："+S+"天 ":"")+(this.getCurShelfLife(b,A)?"实际保质期："+this.getCurShelfLife(b,A)+"天":"")+")")):""))}}]),t}());t.default=h},1374:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=D(n(47)),l=D(n(1267)),u=D(n(32)),c=D(n(14)),s=D(n(37)),d=D(n(129)),f=D(n(89)),p=D(n(45)),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(1265),n(51),n(78),n(38),n(128),n(88),n(55);var y=D(n(1)),g=(D(n(0)),n(18)),E=n(56);n(1418);var C=j(n(27)),T=n(22),h=D(n(1244)),v=n(127),_=D(n(1288)),S=D(n(483)),I=D(n(1463)),N=D(n(1464)),O=D(n(1465)),b=D(n(1466)),A=D(n(1467)),L=D(n(1468)),w=D(n(1345)),P=D(n(1363)),R=D(n(90)),M=j(n(1241));function j(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function D(e){return e&&e.__esModule?e:{default:e}}function U(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=p.default.Option,H=p.default.OptGroup,x=f.default.Group,G=(d.default.Group,(0,E.connect)(function(e){return e})((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={confirmModal:!1,showAddModal:!1,showMultiUnit:!1,showWarehouseModal:!1,page:"basic",showCheckModal:!1,assistModal:!1,modifyBatchUuid:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,y.default.Component),m(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.inventoryCardState,n=e.dispatch,a=t.getIn(["inventoryCardTemp","assemblyState"]),r=t.getIn(["inventoryCardTemp","assemblySheet","unitUuid"]),i=t.getIn(["inventoryCardTemp","unit","unitList"]),o=t.getIn(["views","fromOpen"]),l=t.getIn(["inventoryCardTemp","unit"]);"OPEN"===a&&o&&this.setState({page:"other"}),"OPEN"!==a||i.size||r||(n(M.changeInventoryInnerSrting(["assemblySheet","unitUuid"],l.get("uuid"))),n(M.changeInventoryInnerSrting(["assemblySheet","unitName"],l.get("name"))))}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.inventoryCardState!==e.inventoryCardState||this.props.showModal!==e.showModal||this.props.homeState!==e.homeState||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.showModal,r=t.inventoryCardState,i=t.homeState,m=t.enableWarehouse,E=t.Psi,j=t.cardList,D=void 0===j?(0,g.fromJS)([]):j,G=t.originTags,B=t.fromPage,F=t.isJz,Y=function(){e.props.closeModal(),e.setState({page:"basic"})},V=this.state,K=V.confirmModal,W=V.showAddModal,Q=(V.showMultiUnit,V.showWarehouseModal),z=V.page,X=V.showCheckModal,Z=V.assistModal,q=(V.modifyBatchUuid,i.getIn(["permissionInfo","Config"]).getIn(["edit","permission"])),$=i.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("QUANTITY")>-1,ee=i.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("ASSIST")>-1,te=i.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("BATCH")>-1,ne=i.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("SERIAL")>-1,ae=i.getIn(["data","userInfo","sobInfo","newJr"]),re=r.getIn(["views","standardList"]),ie=r.getIn(["views","customList"]),oe=r.getIn(["views","stockList"]),le=r.getIn(["views","serialModal"]),ue=r.getIn(["views","serialPlaceArr"]),ce=r.getIn(["views","serialList"]),se=r.getIn(["views","warehouseList"]),de=r.getIn(["views","selectedKeys"]),fe=r.getIn(["views","materialSelectedKeys"]),pe=r.getIn(["views","MemberList"]),me=r.getIn(["views","thingsList"]),ye=r.getIn(["views","showStockModal"]),ge=r.getIn(["views","selectList"]),Ee=r.getIn(["views","selectItem"]),Ce=r.getIn(["views","batchModal"]),Te=r.getIn(["views","allAssistClassificationList"]),he="inventoryConfig"!==B;he&&(q=i.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]));var ve=r.get("tags").filter(function(e){return"全部"!==e.get("name")}),_e=r.getIn(["views","insertOrModify"]),Se="insert"===_e?"新增存货卡片":"修改存货卡片",Ie=r.get("inventoryCardTemp"),Ne=Ie.get("code"),Oe=Ie.get("name"),be=Ie.get("uuid"),Ae=Ie.get("warehousePriceMode"),Le=Ie.get("inventoryNature"),we=Ie.get("isOpenedQuantity"),Pe=Ie.get("financialInfo")||(0,g.fromJS)({}),Re=Ie.getIn(["financialInfo","openAssist"]),Me=Ie.getIn(["financialInfo","openBatch"]),je=Ie.getIn(["financialInfo","openShelfLife"]),De=Ie.getIn(["financialInfo","shelfLife"]),Ue=Ie.getIn(["financialInfo","batchList"])||(0,g.fromJS)([]),Je=Ie.getIn(["financialInfo","openSerial"]),ke=(Ie.getIn(["financialInfo","serialList"])||(0,g.fromJS)([]),Ie.getIn(["financialInfo","assistClassificationList"])||(0,g.fromJS)([])),He=Ie.getIn(["financialInfo","isBatchUniform"]),xe=ke.every(function(e){return e.get("isUniform")}),Ge=Ie.get("unit")||(0,g.fromJS)({}),Be=Ie.get("CurUnit")||(0,g.fromJS)({}),Fe=Ge.get("unitList")||(0,g.fromJS)([]),Ye=Ie.get("openedQuantity"),Ve=Ie.get("unitPriceList"),Ke=Ie.get("opened"),We=Ie.get("remark"),Qe=Ie.get("openList"),ze=(Ie.get("isAppliedSale"),Ie.get("isAppliedPurchase"),Ie.get("isAppliedProduce"),Ie.get("categoryTypeList")),Xe=(Ie.get("contacterInfo"),Ie.get("isCheckOut")),Ze=Ie.get("assemblySheet")||(0,g.fromJS)({}),qe=Ie.get("assemblyState"),$e=Ze.get("materialList")||(0,g.fromJS)([]),et=Ie.getIn(["defaultAc","inventoryGoodsAcId"]),tt=Ie.getIn(["defaultAc","inventoryGoodsAcName"]),nt=Ie.getIn(["defaultAc","inventoryMaterialAcId"]),at=Ie.getIn(["defaultAc","inventoryMaterialAcName"]),rt=function(){return e.setState({confirmModal:!0})},it=function(){return e.setState({confirmModal:!1})},ot=function(t,a){var r=[{type:"stockName",value:Oe},{type:"code",value:Ne},{type:"remark",value:We}];T.jxcConfigCheck.beforeSaveCheck(r,function(){return function(t,a){if(""!==Le){var r=!0;if(ve.map(function(e,t){e.get("checked")&&(r=!1)}),r)s.default.info("所属分类必选一项");else{var i=!1;ze.map(function(e,t){""!==e.get("ctgyUuid")&&""!==e.get("subordinateUuid")||(i=!0)}),i?s.default.info("类别需要填写完整"):(Ve.filter(function(e){return e.get("name")===Ge.get("name")&&1==e.get("type")}).size>1||Ve.filter(function(e){return e.get("name")===Ge.get("name")&&2==e.get("type")}).size>1||Fe.some(function(e){return Ve.filter(function(t){return t.get("name")===e.get("name")&&1==t.get("type")}).size>1})||Fe.some(function(e){return Ve.filter(function(t){return t.get("name")===e.get("name")&&1==t.get("type")}).size>1}))&&we?s.default.info("同一个单位，默认采购价和默认销售价只能有一个"):we&&(Ge.get("name")&&Ge.get("name").length>6||Fe.some(function(e){return e.get("name")&&e.get("name").length>6}))?s.default.info("单位名称不可大于6个字符"):"OPEN"!==qe&&"INVALID"!==qe||we?$e.some(function(e){return e.get("materialUuid")})&&Ze.get("unitUuid")&&Ze.get("unitUuid")!==Ge.get("uuid")&&Fe.every(function(e){return e.get("uuid")!==Ze.get("unitUuid")})?s.default.info("组装单设置中，请重新选择成品的单位"):we&&Me&&"boolean"!=typeof He?s.default.info("请选择单价模式"):n(M.saveInventoryCard(B,t,a,rt,it,he)):e.setState({showCheckModal:!0})}}else s.default.info("存货性质必选")}(t,a)})},lt=void 0,ut=void 0,ct=void 0;return"modify"===_e&&D.size&&(ct=D.findIndex(function(e){return e.get("code")===Ne}),lt=ct-1,ut=ct+1),y.default.createElement(o.default,{className:"inventory-addCard-modal",width:"800px",visible:a,maskClosable:!1,title:Se,onCancel:function(){return Y()},footer:[y.default.createElement(u.default,{style:{float:"left",display:"insert"==_e?"none":""},disabled:0===D.findIndex(function(e){return e.get("code")===Ne}),onClick:function(){n(M.beforeInventoryEditCard(D.get(lt),function(){},G,D.getIn([lt,"assemblyState"])))}},y.default.createElement(c.default,{type:"caret-left"})),y.default.createElement(u.default,{style:{float:"left",display:"insert"==_e?"none":""},disabled:D.findIndex(function(e){return e.get("code")===Ne})===D.size-1||!D.size,onClick:function(){n(M.beforeInventoryEditCard(D.get(ut),function(){},G,D.getIn([ut,"assemblyState"])))}},y.default.createElement(c.default,{type:"caret-right"})),y.default.createElement(u.default,{key:"cancel",type:"ghost",onClick:function(){return Y()}},"取 消"),y.default.createElement(u.default,{key:"ok",type:he?"primary":"modify"==_e?"primary":"ghost",disabled:!q,onClick:function(){ot("insert",Y)}},"保 存"),y.default.createElement(u.default,{key:"addAndNew",type:"primary",disabled:!q,style:he?{display:"none"}:{display:"modify"==_e?"none":"inline-block"},onClick:function(){ot("insertAndNew")}},"保存并新增")]},y.default.createElement("div",{className:"jxc-config-card-modal-wrap"},y.default.createElement("div",{className:"jxc-config-inventory-title",style:{display:"OPEN"!==qe&&"INVALID"!==qe||!E?"none":""}},y.default.createElement("span",{className:"basic"===z?"active":"",onClick:function(){e.setState({page:"basic"})}},"基础设置"),y.default.createElement("span",{className:"basic"===z?"":"active",onClick:function(){e.setState({page:"other"})}},"组装单设置")),y.default.createElement("div",{style:{display:"other"!==z||["CLOSE","DISABLE"].includes(qe)?"none":"",marginTop:10}},y.default.createElement("div",{className:"inventory-content"},y.default.createElement("div",{className:"inventory-content-detail"},y.default.createElement("span",null,"投入物料"),y.default.createElement("span",null,"数量"),y.default.createElement("span",null,"单位")),$e.map(function(e,t){return y.default.createElement("div",{className:"inventory-content-detail",key:t},y.default.createElement("span",null,y.default.createElement(S.default,{combobox:!0,showSearch:!0,value:(e.get("code")||"")+" "+(e.get("name")||""),onChange:function(e,a){var r=e.split(C.TREE_JOIN_STR),i=r[0],o=r[1],l=r[2];n(M.changeInventoryInnerSrting(["assemblySheet","materialList",t],(0,g.fromJS)({materialUuid:i,code:o,name:l}))),n(M.getInventorySettingOneCard(i,t))}},oe.filter(function(e){return e.get("code")!==Ne}).map(function(e,t){return y.default.createElement(k,{key:e.get("uuid"),value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("code")+C.TREE_JOIN_STR+e.get("name")+C.TREE_JOIN_STR+e.get("isOpenedQuantity")+C.TREE_JOIN_STR+t,priceList:e.get("unitPriceList"),unit:e.get("unit")},e.get("code")+" "+e.get("name"))}))),y.default.createElement("span",null,y.default.createElement(v.XfInput,{mode:"number",tipTit:"数量",placeholder:"输入数量",value:e.get("quantity"),onChange:function(e){var a=e.target.value;n(M.changeInventoryInnerSrting(["assemblySheet","materialList",t,"quantity"],a))}})),y.default.createElement("span",null,y.default.createElement(S.default,{placeholder:"单位",combobox:!0,showSearch:!0,dropdownClassName:"auto-width",value:e.get("unitName")?""+e.get("unitName"):void 0,onChange:function(e){var a=e.split(C.TREE_JOIN_STR),r=a[0],i=a[1];n(M.changeInventoryInnerSrting(["assemblySheet","materialList",t,"unitUuid"],r)),n(M.changeInventoryInnerSrting(["assemblySheet","materialList",t,"unitName"],i))}},(e.get("unitList")||[]).map(function(e,t){return y.default.createElement(k,{key:e.get("uuid"),value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("name")},""+e.get("name"))}))),y.default.createElement("span",null,y.default.createElement(R.default,{type:"bigDel",theme:"outlined",onClick:function(){1===$e.size?n(M.changeInventoryInnerSrting(["assemblySheet","materialList",0],(0,g.fromJS)({}))):n(M.deleteMaterial($e,t))}})))}),y.default.createElement("div",{className:"inventory-button"},y.default.createElement(u.default,{onClick:function(){n(M.addMaterial($e,$e.size-1))}},y.default.createElement(R.default,{type:"big-plus"}),"添加存货明细"),y.default.createElement(u.default,{onClick:function(){n(M.getInventoryAllCardList([],"showStockModal"))}},y.default.createElement(R.default,{type:"editPlus"}),"批量添加存货"))),y.default.createElement("div",{className:"inventory-content"},y.default.createElement("div",{className:"inventory-content-detail"},y.default.createElement("span",null,"组装成品"),y.default.createElement("span",null,"数量"),y.default.createElement("span",null,"单位")),y.default.createElement("div",{className:"inventory-content-detail"},y.default.createElement("span",{style:{borderBottom:"1px solid #d9d9d9",color:"#ccc"}},(Ne||"")+" "+(Oe||"")),y.default.createElement("span",null,y.default.createElement(v.XfInput,{mode:"number",tipTit:"数量",placeholder:"输入数量",value:Ze.get("quantity"),onChange:function(e){var t=e.target.value;n(M.changeInventoryInnerSrting(["assemblySheet","quantity"],t))}})),y.default.createElement("span",null,y.default.createElement(p.default,{placeholder:"单位",combobox:!0,showSearch:!0,dropdownClassName:"auto-width",value:Ze.get("unitName")?""+Ze.get("unitName"):void 0,onChange:function(e){var t=e.split(C.TREE_JOIN_STR),a=t[0],r=t[1];n(M.changeInventoryInnerSrting(["assemblySheet","unitUuid"],a)),n(M.changeInventoryInnerSrting(["assemblySheet","unitName"],r))}},y.default.createElement(k,{key:Ge.get("uuid"),value:""+Ge.get("uuid")+C.TREE_JOIN_STR+Ge.get("name")},""+Ge.get("name")),Fe.map(function(e,t){return y.default.createElement(k,{key:e.get("uuid"),value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("name")},""+e.get("name"))})))))),y.default.createElement("div",{style:{display:"basic"===z||["CLOSE","DISABLE"].includes(qe)?"":"none"}},y.default.createElement("div",{className:"flex-row"},y.default.createElement("div",{className:"flex-row-item"},y.default.createElement("label",{className:"flex-row-label"},"编码："),y.default.createElement("div",{className:"flex-row-input"},y.default.createElement(v.XfInput,{style:{width:"100%"},placeholder:"必填，支持数字和大小写英文，最长16个字符",value:Ne,onChange:function(e){return T.jxcConfigCheck.inputCheck("stockCode",e.target.value,function(){return n(M.changeInventoryCardContent("code",e.target.value))})}}))),y.default.createElement("div",{className:"flex-row-item"},y.default.createElement("label",{className:"flex-row-label"},"名称："),y.default.createElement("div",{className:"flex-row-input"},y.default.createElement(v.XfInput,{style:{width:"100%"},placeholder:"必填",value:Oe,onChange:function(e){return n(M.changeInventoryCardContent("name",e.target.value))}})))),y.default.createElement("div",{className:"flex-row"},y.default.createElement("div",{className:"flex-row-item"},y.default.createElement("label",{className:"flex-row-label"},"存货性质："),y.default.createElement("div",{className:"flex-row-input"},y.default.createElement(x,{onChange:function(e){n(M.changeInventoryCardNature("inventoryNature",e.target.value)),6===e.target.value?(n(M.changeInventoryCardNature("inventoryAcId",nt)),n(M.changeInventoryCardNature("inventoryAcName",at))):(n(M.changeInventoryCardNature("inventoryAcId",et)),n(M.changeInventoryCardNature("inventoryAcName",tt)))},value:Le},y.default.createElement(f.default,{key:"a",value:5},"库存商品"),y.default.createElement(f.default,{key:"b",value:6},"原材料"))))),y.default.createElement("div",{className:"jxc-config-card-modal-row",style:{marginTop:"10px"}},y.default.createElement("div",{className:"jxc-config-card-modal-item"},y.default.createElement("label",{className:"jxc-config-card-modal-label"},"所属分类："),y.default.createElement("div",{className:"jxc-config-card-modal-input"},ve.map(function(e,t){return y.default.createElement("label",{key:t},y.default.createElement(d.default,{checked:e.get("checked"),onChange:function(t){return n(M.changeInventoryCardCategoryStatus(e,t.target.checked))}}),y.default.createElement("span",null,e.get("name")))})))),y.default.createElement("div",{className:"category-box"},ve.map(function(e,t){return e.get("checked")?y.default.createElement("div",{className:"jxc-config-card-modal-row select-row-with-two",key:e.get("name")},y.default.createElement("div",{className:"jxc-config-card-modal-item"},y.default.createElement("label",{className:"jxc-config-card-modal-label"},e.get("name"),"类别："),y.default.createElement("div",{className:"jxc-config-card-modal-input"},y.default.createElement(v.UpperClassSelect,{className:"jxc-config-modal-select",placeholder:"",treeData:e.get("tree")?e.get("tree"):[],treeDefaultExpandAll:!0,isLastSelect:!0,disabledParent:!0,value:e.get("selectUuid")?[e.get("selectName")]:[""],onSelect:function(t){n(M.changeInventoryCardCategoryType(e,t))}})))):null})),y.default.createElement("div",{className:"jxc-config-card-modal-row",style:he?{display:"none"}:{clear:"both"}},y.default.createElement("div",{className:"jxc-config-card-modal-item"},y.default.createElement("label",{className:"jxc-config-card-modal-label"},"备注："),y.default.createElement("div",{className:"jxc-config-card-modal-input"},y.default.createElement(v.XfInput,{placeholder:h.default.remark,value:We,onChange:function(e){return n(M.changeInventoryCardContent("remark",e.target.value))}})))),he&&$||!he?y.default.createElement("div",{className:"jxc-config-title",style:{marginBottom:0,paddingBottom:"10px"}},"财务信息"):"",y.default.createElement("div",{className:"flex-row",style:{lineHeight:"28px"}},ae&&$?y.default.createElement("div",{className:"flex-row-item"},$?y.default.createElement("div",null,y.default.createElement(d.default,{style:{marginRight:"6px"},checked:we,onChange:function(e){n(M.changeInventoryCardContent("isOpenedQuantity",!we)),we?(n(M.changeInventoryCardContent("warehousePriceMode","T")),n(M.changeInventoryCardContent(["financialInfo","openAssist"],!1)),n(M.changeInventoryCardContent(["financialInfo","openBatch"],!1)),n(M.changeInventoryCardContent(["financialInfo","openSerial"],!1))):(n(M.changeInventoryCardContent("warehousePriceMode","U")),n(M.getUnitCardList()))}}),"启用数量核算"):"",we&&ne?y.default.createElement("div",null,y.default.createElement(d.default,{style:{marginRight:"6px"},checked:Je,onChange:function(e){n(M.changeInventoryCardContent(["financialInfo","openSerial"],!Je)),Je||n(M.emptyWarehouseListQuantity())}}),"启用序列号管理"):"",y.default.createElement("div",{style:{visibility:"hidden"}},y.default.createElement(d.default,{style:{marginRight:"6px"},checked:Je,onChange:function(e){n(M.changeInventoryCardContent(["financialInfo","openSerial"],!Je))}}),"允许负库存")):"",we?y.default.createElement("div",{className:"flex-row-item"},y.default.createElement("label",{className:"flex-row-label"},"计量单位："),y.default.createElement("div",{className:"flex-row-input"},y.default.createElement(_.default,{Type:"select",dispatch:n,disabled:"modify"===_e&&Be.get("name"),selectListOne:re,selectListTwo:ie,onChange:function(e,t){var a=e.uuid,r=e.name,i=e.isStandard,o=e.unitList,l=e.unitQuantity,u=e.basicUnitUuid;o="undefined"!=o&&o?JSON.parse(o):[];var c=t.props,s=c.isCustom,d=c.basicStandardUnitQuantityList,f=c.basicStandardUnitUuidList;s&&f.length&&(u=f[0],l=d[0],f.length>=2&&f.slice(1).forEach(function(e,t){o[t].basicUnitUuid=e,o[t].unitQuantity=d[t+1],e===f[0]&&(o[t].disabled=!0)})),n(M.changeInventoryCardContent("unit",(0,g.fromJS)({uuid:a,name:r,isStandard:i,unitList:o,unitQuantity:l,basicUnitUuid:u})))},onSwitch:function(){n(M.initUnitState())},name:(Ge.get("name")||"")+(Fe.size?"("+Ge.get("name")+Fe.toJS().reduce(function(e,t){return e+":"+(t.name||"")},""):"")+(Fe.size?Fe.toJS().reduce(function(e,t){return e+":"+(t.basicUnitQuantity||"")},"=1")+")":"")}),y.default.createElement(u.default,{className:"ant-btn-primary",style:{width:"55px",marginLeft:"10px",lineHeight:"28px"},onClick:function(){e.setState({showAddModal:!0});var t=Ge.toJS();t.basicStandardUnitQuantity&&(t.unitQuantity=t.basicStandardUnitQuantity,t.basicUnitUuid=t.basicStandardUnitUuid),t.unitList&&t.unitList.length&&t.unitList.forEach(function(e,n){t.unitList[n].unitQuantity=e.basicStandardUnitQuantity,t.unitList[n].basicUnitUuid=e.basicStandardUnitUuid,e.basicStandardUnitUuid===t.basicStandardUnitUuid&&(t.unitList[n].disabled=!0)}),n(M.changeInventoryCardContent("unit",(0,g.fromJS)(t)))}},"modify"===_e&&Be.get("name")?"修改":"多单位"))):""),m&&ae?y.default.createElement("div",{className:"flex-row"},y.default.createElement("div",{className:"flex-row-item"},y.default.createElement(d.default,{style:{marginRight:"6px"},checked:!0,onClick:function(){s.default.info("账套已启用仓库核算")}}),"启用仓库核算"),m&&we?y.default.createElement("div",{className:"flex-row-item"},y.default.createElement("label",{className:"flex-row-label"},"单价模式"),y.default.createElement("div",{className:"flex-row-input-nomal"},y.default.createElement(p.default,{onChange:function(e){n(M.changeInventoryCardContent("warehousePriceMode",e))},value:Ae},y.default.createElement(k,{key:"1",value:"U"},"按全部仓库统一单价"),y.default.createElement(k,{key:"2",value:"T"},"按一级仓库不同单价"),y.default.createElement(k,{key:"3",value:"E"},"按不同仓库不同单价")))):""):"",y.default.createElement("div",{className:"flex-row"},we&&ae&&ee?y.default.createElement("div",{className:"flex-row-item"},y.default.createElement(d.default,{style:{marginRight:"6px"},checked:Re,onChange:function(e){n(M.changeInventoryCardContent(["financialInfo","openAssist"],!Re))}}),"启用辅助属性 ",Re?y.default.createElement("span",{className:"assist-update",onClick:function(){n(M.getAssistList("",function(){e.setState({assistModal:!0})}))}},"编辑属性"):""):"",Re&&we?y.default.createElement("div",{className:"flex-row-item"},y.default.createElement("label",{className:"flex-row-label"},"单价模式"),y.default.createElement("div",{className:"flex-row-input-nomal"},y.default.createElement(p.default,{onChange:function(e){!0!==e[e.length-1]?n(M.chooseAssitUniform(e.filter(function(e){return!0!==e}),!1)):n(M.chooseAssitUniform(ke.map(function(e){return e.get("uuid")}),!0))},value:xe?[!0]:ke.filter(function(e){return!e.get("isUniform")}).map(function(e){return e.get("uuid")}).toJS(),mode:"multiple"},y.default.createElement(k,{key:"1",value:!0},"按全部属性统一单价"),y.default.createElement(H,{label:"按不同属性不同单价"},ke.map(function(e){return y.default.createElement(k,{key:e.get("uuid"),value:e.get("uuid")},"不同",e.get("name"),"不同单价")}))))):""),Re&&we?y.default.createElement("div",{className:"assist-content"},ke.size?ke.map(function(e){return y.default.createElement("div",{className:"assist-item"},y.default.createElement("span",null,e.get("name"),"："),e.get("propertyList").map(function(e){return y.default.createElement(l.default,{key:e.get("uuid")},e.get("name"))}))}):y.default.createElement("div",{className:"assist-item img-kongtaitu"},y.default.createElement("div",{className:""}),y.default.createElement("div",null,"暂无属性分类，请点击“编辑属性”新增分类"))):"",y.default.createElement("div",{className:"flex-row"},we&&ae&&te?y.default.createElement("div",{className:"flex-row-item"},y.default.createElement("div",null,y.default.createElement(d.default,{style:{marginRight:"6px"},checked:Me,onChange:function(e){n(M.changeInventoryCardContent(["financialInfo","openBatch"],!Me)),Me&&n(M.changeInventoryCardContent(["financialInfo","openShelfLife"],!1))}}),"启用批次管理"),Me?y.default.createElement("div",null,y.default.createElement(d.default,{style:{marginRight:"6px"},checked:je,onChange:function(e){Ue.size?s.default.info("请删除原有批次"):n(M.changeInventoryCardContent(["financialInfo","openShelfLife"],!je))}}),"启用保质期管理"):y.default.createElement("div",null),je?y.default.createElement("div",null,y.default.createElement(v.XfInput,{tipTit:"保质期",mode:"integer",style:{width:"107px"},placeholder:"请输入保质期天数",value:De,onChange:function(e){var t=e.target.value;n(M.changeInventoryCardContent(["financialInfo","shelfLife"],t))},disabled:Xe})):y.default.createElement("div",null)):"",Me&&we?y.default.createElement("div",{className:"flex-row-item"},y.default.createElement("label",{className:"flex-row-label"},"单价模式"),y.default.createElement("div",{className:"flex-row-input-nomal"},y.default.createElement(p.default,{onChange:function(e){n(M.changeInventoryCardContent(["financialInfo","isBatchUniform"],e))},value:He},y.default.createElement(k,{key:"1",value:!0},"按全部批次统一单价"),y.default.createElement(k,{key:"2",value:!1},"按不同批次不同单价")))):""),y.default.createElement("div",{className:"flex-row",style:he&&!Fe.size||m&&!we?{display:"none"}:{}},m||Me||Re||Je?"":y.default.createElement("div",{className:"flex-row-item"},y.default.createElement("label",{className:"flex-row-label"},"期初余额："),y.default.createElement("div",{className:"flex-row-input"},m?y.default.createElement(v.XfInput,J({disabled:F,mode:"number",negativeAllowed:!0,style:{width:"250px"},placeholder:(we&&"U"===Ae?"必填":"选填")+"，请输入金额",value:Ke,onChange:function(e){var t=e.target.value;n(M.changeInventoryCardContent("opened",t))}},"disabled",Xe)):y.default.createElement(v.XfInput,J({disabled:F,negativeAllowed:!0,mode:"amount",style:{width:"250px"},placeholder:"选填，请输入金额",value:Ke,onChange:function(e){var t=e.target.value;n(M.changeInventoryCardContent("opened",t))}},"disabled",Xe)))),!we||m||Me||Re||Je?"":y.default.createElement("div",{className:"flex-row-item"},y.default.createElement("label",{className:"flex-row-label"},"期初数量："),y.default.createElement("div",{className:"flex-row-input"},y.default.createElement(v.XfInput,{mode:"number",tipTit:"数量",negativeAllowed:!0,placeholder:"选填，请输入数量",value:Ye,onChange:function(e){var t=e.target.value;n(M.changeInventoryCardContent("openedQuantity",t))},disabled:Xe}),y.default.createElement("span",{style:{marginLeft:"10px"}},Ge.get("name"))))),m||Me||Re||Je?y.default.createElement("div",{style:{display:"flex",marginTop:"10px"}},m?y.default.createElement(O.default,{dispatch:n,warehousePriceMode:Ae,isOpenedQuantity:we,enableWarehouse:m,treeList:Qe,unit:Ge,isCheckOut:Xe,assistClassificationList:ke,batchList:Ue,uuid:be,financialInfo:Pe,showWarehouseModal:function(){return e.setState({showWarehouseModal:!0})}}):y.default.createElement(b.default,{dispatch:n,warehousePriceMode:Ae,isOpenedQuantity:we,enableWarehouse:m,treeList:Qe,unit:Ge,isCheckOut:Xe,assistClassificationList:ke,batchList:Ue,uuid:be,financialInfo:Pe,insertOrModify:_e,showWarehouseModal:function(){return e.setState({showWarehouseModal:!0})}})):"",we?y.default.createElement("div",null,y.default.createElement("div",{className:"flex-row"},Ve.map(function(e,t){return 1===e.get("type")?y.default.createElement("div",{className:"flex-row-item"},y.default.createElement("label",{className:"flex-row-label"},{1:"默认采购价：",2:"默认销售价："}[e.get("type")]),y.default.createElement("div",{className:"flex-row-input",style:{display:"flex"}},y.default.createElement(v.XfInput,{mode:"number",style:{width:"140px"},placeholder:"选填，请输入金额",value:e.get("defaultPrice"),onChange:function(e){var a=e.target.value;n(M.changeInventoryCardContent(["unitPriceList",t,"defaultPrice"],a))}}),Fe.size?y.default.createElement("div",null,y.default.createElement("span",{style:{margin:"0 4px 0 2px"}},"元/"),y.default.createElement(p.default,{style:{width:"78px"},onChange:function(e){var a=e.split(C.TREE_JOIN_STR),r=a[0],i=a[1];a[2];n(M.changeInventoryCardContent(["unitPriceList",t,"unitUuid"],r)),n(M.changeInventoryCardContent(["unitPriceList",t,"name"],i))},value:e.get("name")},y.default.createElement(k,{key:Ge.get("uuid"),value:""+Ge.get("uuid")+C.TREE_JOIN_STR+Ge.get("name")+C.TREE_JOIN_STR+Ge.get("isStandard")},Ge.get("name")),Fe.map(function(e){return y.default.createElement(k,{key:e.get("uuid"),value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("name")+C.TREE_JOIN_STR+e.get("isStandard")},e.get("name"))}))):Ge.get("name")?y.default.createElement("span",{style:{marginLeft:"5px"}},"元/"+Ge.get("name")):"",Fe.size?y.default.createElement("div",{className:"pre-content"},y.default.createElement(v.XfnIcon,{type:"bigPlus",style:1===Ve.filter(function(t){return t.get("type")===e.get("type")}).size?{lineHeight:"28px",fontSize:"15px"}:{},onClick:function(){n(M.addUnitPrice(Ve,t,e.get("type")))}}),Ve.filter(function(t){return t.get("type")===e.get("type")}).size>1?y.default.createElement(v.XfnIcon,{type:"bigDel",onClick:function(){n(M.deleteunitPrice(Ve,t))}}):""):"")):""})),y.default.createElement("div",{className:"flex-row"},Ve.map(function(e,t){return 2===e.get("type")?y.default.createElement("div",{className:"flex-row-item"},y.default.createElement("label",{className:"flex-row-label"},{1:"默认采购价：",2:"默认销售价："}[e.get("type")]),y.default.createElement("div",{className:"flex-row-input",style:{display:"flex"}},y.default.createElement(v.XfInput,{mode:"number",tipTit:"数量",style:{width:"140px"},placeholder:"选填，请输入金额",value:e.get("defaultPrice"),onChange:function(e){var a=e.target.value;n(M.changeInventoryCardContent(["unitPriceList",t,"defaultPrice"],a))}}),Fe.size?y.default.createElement("div",null,y.default.createElement("span",{style:{margin:"0 4px 0 2px"}},"元/"),y.default.createElement(p.default,{style:{width:"78px"},onChange:function(e){var a=e.split(C.TREE_JOIN_STR),r=a[0],i=a[1];a[2];n(M.changeInventoryCardContent(["unitPriceList",t,"unitUuid"],r)),n(M.changeInventoryCardContent(["unitPriceList",t,"name"],i))},value:e.get("name")},y.default.createElement(k,{key:Ge.get("uuid"),value:""+Ge.get("uuid")+C.TREE_JOIN_STR+Ge.get("name")+C.TREE_JOIN_STR+Ge.get("isStandard")},Ge.get("name")),Fe.map(function(e){return y.default.createElement(k,{key:e.get("uuid"),value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("name")+C.TREE_JOIN_STR+e.get("isStandard")},e.get("name"))}))):Ge.get("name")?y.default.createElement("span",{style:{marginLeft:"5px"}},"元/"+Ge.get("name")):"",Fe.size?y.default.createElement("div",{className:"pre-content"},y.default.createElement(v.XfnIcon,{type:"bigPlus",style:1===Ve.filter(function(t){return t.get("type")===e.get("type")}).size?{lineHeight:"28px",fontSize:"15px"}:{},onClick:function(){n(M.addUnitPrice(Ve,t,e.get("type")))}}),Ve.filter(function(t){return t.get("type")===e.get("type")}).size>1?y.default.createElement(v.XfnIcon,{type:"bigDel",onClick:function(){n(M.deleteunitPrice(Ve,t))}}):""):"")):""}))):"",y.default.createElement("div",{className:"modalBomb",style:{display:K?"":"none"}}))),W?y.default.createElement(I.default,{dispatch:n,inventoryCardState:r,enableWarehouse:m,showAddModal:W,insertOrModify:"modify"===_e&&Be.get("name")?"modify":"insert",closeAddModal:function(){return e.setState({showAddModal:!1})}}):"",y.default.createElement(N.default,{treeList:se,inventoryCardState:r,showWarehouseModal:Q,onClose:function(){return e.setState({showWarehouseModal:!1})},dispatch:n,selectedKeys:de}),y.default.createElement(A.default,{MemberList:pe,thingsList:me,dispatch:n,showModal:ye,selectList:ge,selectItem:Ee,materialSelectedKeys:fe,materialList:$e,code:Ne}),Z?y.default.createElement(L.default,{onClose:function(){return e.setState({assistModal:!1})},dispatch:n,assistModal:Z,uuid:Ie.get("uuid"),allAssistClassificationList:Te,assistClassificationList:ke}):"",y.default.createElement(o.default,{visible:X,title:"关闭数量核算",onOk:function(){n(M.saveInventoryCard(B,"modify",Y,rt,it,he)),e.setState({showCheckModal:!1})},onCancel:function(){return e.setState({showCheckModal:!1})}},y.default.createElement("span",null,"关闭数量核算，不可使用组装功能，组装单设置内容将被置空")),y.default.createElement(P.default,{visible:Ce,onClose:function(){n(M.changeInventoryCardViews("batchModal",!1))},onOk:function(t,a,r,i){if("insert"===_e){var o=Ue.findIndex(function(t){return t.get("batch")===e.state.batch});n(M.changeInventoryCardContent(["financialInfo","batchList",o,"batch"],t)),n(M.changeInventoryCardContent(["financialInfo","batchList",o,"productionDate"],je?r:"")),n(M.changeInventoryCardViews("batchModal",!1))}else n(M.modifyBatch(t,a,je?r:"",i,be,function(){n(M.changeInventoryCardViews("batchModal",!1))}))},onOkAndNew:function(t,a,r,i){if("insert"===_e){var o=Ue.findIndex(function(t){return t.get("batch")===e.state.batch});n(M.changeInventoryCardContent(["financialInfo","batchList",o,"batch"],t)),n(M.changeInventoryCardContent(["financialInfo","batchList",o,"productionDate"],je?r:"")),e.setState({modifyBatch:"",modifyBatchDate:(new T.DateLib).toString(),modifyBatchUuid:"",batch:""})}else n(M.modifyBatch(t,a,je?r:"",i,be,function(){e.setState({modifyBatch:"",modifyBatchDate:(new T.DateLib).toString(),modifyBatchUuid:"",batch:""})}))},batchList:Ue,openShelfLife:je,shelfLife:De,insertOrModify:_e}),le?y.default.createElement(w.default,{fromPage:"inventory",visible:le,serialList:ce,onClose:function(){return n(M.changeInventoryCardViews("serialModal",!1))},onOk:function(e){n(M.changeInventoryCardContent([].concat(U(ue),["serialList"]),(0,g.fromJS)(e))),n(M.changeInventoryCardContent([].concat(U(ue),["isModify"]),!0)),n(M.changeInventoryCardContent([].concat(U(ue),["openedQuantity"]),e.length))}}):"")}}]),t}(),r.displayName="InventoryConfAddCardModal",a=i))||a);t.default=G},1376:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=c(n(14)),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78);var i=c(n(1));c(n(0)),n(18),n(56);n(1240);u(n(27));var o=n(22),l=n(127);c(n(487)),u(n(1241)),c(n(1237));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.showChild,r=(e.hideChildList,e.warehousePriceMode,e.isOpenedQuantity),u=(e.enableWarehouse,e.unit),c=e.hideChildFunc,s=e.showChildFunc,d=e.line,f=e.level,p=(e.isCheckOut,e.dispatch,e.index,e.openAssist),m=e.openBatch,y=0,g=0;!function e(t){return t.map(function(t){t.get("childList")&&t.get("childList").size&&!t.get("isEnd")?e(t.get("childList")):p||m?(y+=t.get("childList").reduce(function(e,t){return e+(Number(t.get("openedAmount"))||0)},0),g+=t.get("childList").reduce(function(e,t){return e+(Number(t.get("openedQuantity"))||0)},0)):(y+=Number(t.get("openedAmount"))||0,g+=Number(t.get("openedQuantity"))||0)})}(t.get("childList"));var E=5+7*(f-1)+"px";return i.default.createElement(l.TableItem,{key:t.get("warehouseUuid"),line:d},i.default.createElement("li",{className:"inventory-code",style:{paddingLeft:E}},t.get("warehouseCode")),i.default.createElement("li",{className:"inventory-name"},i.default.createElement("span",null,t.get("warehouseName")),i.default.createElement(a.default,{type:n?"up":"down",onClick:function(){n?c():s()}})),r?i.default.createElement("li",{className:"force-centet"},i.default.createElement("span",{className:"input-quantity"},(0,o.formatFour)(g)),i.default.createElement("span",null,u.get("name"))):"",i.default.createElement("li",{className:"force-centet"},i.default.createElement("span",{className:"input-amount"},(0,o.formatMoney)(y)),i.default.createElement("span",null,"元")))}}]),t}();t.default=s},1404:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEditProjectConf=t.deleteProjectCardList=t.saveProjectCard=t.changeProjectCardCategoryType=t.changeProjectViewsContent=t.changeProjectCardContent=t.beforeEditProjectCard=t.changeProjectPropertyState=t.beforeProjectAddCard=void 0;var a=m(n(37));n(38);var r=p(n(1302)),i=m(n(52)),o=n(22),l=n(18),u=p(n(30)),c=p(n(27)),s=p(n(172)),d=p(n(484)),f=p(n(1317));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}t.beforeProjectAddCard=function(e,t,n,a){return function(t,n){var l="",u=u||n().projectConfState.get("originTags"),c=u.findIndex(function(e){return"损益项目"===e.get("name")});n().projectConfState.getIn(["views","activeKey"]);t({type:r.SWITCH_LOADING_MASK}),(0,i.default)("getDefaultProjectCode","GET","",function(n){(0,o.showMessage)(n)&&(l=n.data.code,(0,i.default)("getProjectTree","GET","uuid="+u.getIn([c,"uuid"]),function(n){(0,o.showMessage)(n)&&(t({type:r.BEFORE_ADD_PROJECT_CARD,data:n.data.resultList,code:l,noFresh:a}),e&&e())}))}),t({type:r.SWITCH_LOADING_MASK})}},t.changeProjectPropertyState=function(e,t){return function(n,a){var l=l||a().projectConfState.get("originTags"),u=l.findIndex(function(e){return e.get("name")===t});n({type:r.SWITCH_LOADING_MASK}),(0,i.default)("getProjectTree","GET","uuid="+l.getIn([u,"uuid"]),function(a){n({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(a)&&n({type:r.CHANGE_PROJECT_PROPERTY,data:a.data.resultList,projectProperty:e,projectPropertyName:t})})}},t.beforeEditProjectCard=function(e,t,n){return function(a){a({type:r.SWITCH_LOADING_MASK}),(0,i.default)("getProjectCardOne","GET","uuid="+e.get("uuid"),function(e){(0,o.showMessage)(e)&&(a({type:r.BEFORE_EDIT_PROJECT_CARD,data:e.data,originTags:n}),t(),a({type:r.SWITCH_LOADING_MASK}))})}},t.changeProjectCardContent=function(e,t){return function(n){n({type:r.CHANGE_PROJECT_CARD_CONTENT,name:e,value:t})}},t.changeProjectViewsContent=function(e,t){return function(n){n({type:r.CHANGE_PROJECT_VIEWS_CONTENT,name:e,value:t})}},t.changeProjectCardCategoryType=function(e){return function(t){var n=e.split(c.TREE_JOIN_STR);t({type:r.CHANGE_PROJECT_CARD_CATEGORY_TYPE,uuid:n[0],name:n[1]})}},t.saveProjectCard=function(e,t,n,a,c){return function(d,p){var m,g=p().homeState.get("allPanes"),E=p().projectCardState.get("projectCardTemp").toJS(),C=p().projectCardState.getIn(["views","insertOrModify"]),T=p().projectConfState.getIn(["views","activeTapKey"]),h=p().projectCardState.getIn(["projectCardTemp","projectPropertyName"]),v=p().projectConfState.get("originTags"),_=v.findIndex(function(e){return e.get("name")===h}),S=(v.findIndex(function(e){return e.get("name")===T}),""),I="";g.get("ConfigPanes").find(function(e){return"项目设置"===e.get("title")})&&(S=p().projectConfState.getIn(["views","activeTapKeyUuid"]),I=p().projectConfState.getIn(["views","selectTypeId"])),m=[{ctgyUuid:v.getIn([_,"uuid"]),subordinateUuid:E.selectUuid}],E.categoryTypeList=m;var N=function(){if("insert"===C){(0,i.default)("insertProjectCard","POST",JSON.stringify({psiData:E,insertFrom:S,treeFrom:I,needAutoIncrementCode:"insert"!==t,action:{editRunning:"SAVE_JR-QUICK_MANAGER-SAVE_PROJECT",projectConfig:"MANAGER-PROJECT_SETTING-CUD_CARD",searchApproval:"QUERY_PROCESS-QUICK_MANAGER-SAVE_PROJECT"}[e]}),function(a){if((0,o.showMessage)(a,"show")&&(d(f.refreshProjectList((0,l.fromJS)({name:T,uuid:S}))),d({type:r.NEW_SAVE_PROJECT_CARD,flag:t,code:a.data.autoIncrementCode}),"insert"===t&&n(),d(y(e)),"editRunning"===e)){var i=p().editRunningState.getIn(["oriTemp","newProjectRange"])||(0,l.fromJS)([]),u=[];switch(p().editRunningState.getIn(["oriTemp","categoryType"])||(0,l.fromJS)([])){case"LB_CQZC":u=a.data.resultList.filter(function(e){return"XZ_PRODUCE"!==e.projectProperty});break;default:u=a.data.resultList}var c=u.filter(function(e){return i.some(function(t){return t.get("name")===e.projectPropertyName})}).find(function(e){return e.code===E.code});c&&d(s.changeLrAccountCommonString("ori","projectCardList",(0,l.fromJS)([{code:E.code,name:E.name,cardUuid:c.uuid,projectProperty:c.projectProperty}])))}d({type:r.SWITCH_LOADING_MASK})})}else(0,i.default)("editProjectCard","POST",JSON.stringify({psiData:E,modifyFrom:S,treeFrom:I}),function(e){(0,o.showMessage)(e,"show")&&(d(f.refreshProjectList((0,l.fromJS)({name:T,uuid:S}))),n(),d(y())),d({type:r.SWITCH_LOADING_MASK})})};d({type:r.SWITCH_LOADING_MASK}),(0,i.default)("adjustProjectCardNameSame","POST",JSON.stringify({psiData:{name:E.name,uuid:E.uuid}}),function(e){(0,o.showMessage)(e)?e.data.repeat?(a(),d({type:r.SWITCH_LOADING_MASK}),u.Confirm({message:"卡片名称与【编码："+e.data.card.code+"】卡片重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(d({type:r.SWITCH_LOADING_MASK}),N(),c()):c()},onFail:function(e){return console.log(e)}})):N():d({type:r.SWITCH_LOADING_MASK})})}},t.deleteProjectCardList=function(){return function(e,t){var n=t().projectConfState.getIn(["views","activeTapKeyUuid"]),l=t().projectConfState.getIn(["views","activeTreeKeyUuid"]),c=t().projectConfState.getIn(["views","cardSelectList"]);u.Confirm({message:"确定删除卡片？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(e({type:r.SWITCH_LOADING_MASK}),(0,i.default)("deleteProjectCard","POST",JSON.stringify({deleteList:c,deleteFrom:n,treeFrom:l}),function(t){(0,o.showMessage)(t)&&(e({type:r.DELETE_PROJECT_CONF_CARD,list:t.data.resultList,treeList:t.data.typeList}),""===t.data.error?a.default.info("删除成功"):a.default.info(t.data.error),e(y())),e({type:r.SWITCH_LOADING_MASK})}))},onFail:function(e){return console.log(e)}})}};var y=t.afterEditProjectConf=function(e){return function(t,n){var a=n().homeState,r=a.get("allPanes");a.getIn(["data","userInfo","sobInfo","newJr"]);"searchApproval"===e?(t(d.getApprovalProjectCardList()),r.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&setTimeout(function(){t(d.getProjectCardListForchangeConfig())},800)):r.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&t(d.getProjectCardListForchangeConfig())}}},1418:function(e,t,n){},1461:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=N(n(47)),l=N(n(61)),u=N(n(100)),c=N(n(32)),s=N(n(14)),d=N(n(37)),f=N(n(89)),p=N(n(129)),m=N(n(45)),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(79),n(99),n(51),n(78),n(38),n(88),n(128),n(55);var g=N(n(1)),E=(N(n(0)),n(18)),C=n(56);n(1240);var T=I(n(27)),h=n(22),v=N(n(1244)),_=n(127),S=I(n(1404));function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function N(e){return e&&e.__esModule?e:{default:e}}m.default.Option,p.default.Group;var O=f.default.Group,b=(0,C.connect)(function(e){return e})((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={confirmModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,g.default.Component),y(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.projectCardState!==e.projectCardState||this.props.showModal!==e.showModal||this.props.homeState!==e.homeState||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.showModal,r=t.closeModal,i=t.projectCardState,p=t.homeState,m=t.originTags,y=t.fromPage,C=t.cardList,I=void 0===C?(0,E.fromJS)([]):C,N=t.allState,b=(this.state.confirmModal,!!N.getIn(["period","closedyear"])),A=p.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]),L=i.get("typeTree"),w=i.getIn(["views","insertOrModify"]),P="projectConfig"!==y;P&&(A=p.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]));var R="insert"===w?"新增项目":"修改项目",M=i.get("projectCardTemp"),j=M.get("code"),D=M.get("name"),U=M.get("selectUuid"),J=M.get("selectName"),k=M.get("projectProperty"),H=M.get("projectPropertyName"),x=M.get("basicProductOpen"),G=M.get("contractCostOpen"),B=M.get("contractProfitOpen"),F=M.get("engineeringSettlementOpen"),Y=p.getIn(["data","userInfo","sobInfo","moduleInfo"]),V=Y.indexOf("SCXM")>-1,K=Y.indexOf("SGXM")>-1,W=function(t){var a=[{type:"stockName",value:D},{type:"code",value:j}];if(""!==U){h.jxcConfigCheck.beforeSaveCheck(a,function(){return function(t){n(S.saveProjectCard(y,t,r,function(){return e.setState({confirmModal:!0})},function(){return e.setState({confirmModal:!1})}))}(t)})}else d.default.info("请选择类别！")},Q=void 0,z=void 0,X=void 0;return"modify"===w&&I.size&&(X=I.findIndex(function(e){return e.get("code")===j}),Q=X-1,z=X+1),g.default.createElement(o.default,{width:"820px",visible:a,maskClosable:!1,title:R,onCancel:function(){return r()},footer:[g.default.createElement(c.default,{style:{float:"left",display:"insert"==w?"none":""},disabled:0===I.findIndex(function(e){return e.get("code")===j}),onClick:function(){n(S.beforeEditProjectCard(I.get(Q),function(){},m))}},g.default.createElement(s.default,{type:"caret-left"})),g.default.createElement(c.default,{style:{float:"left",display:"insert"==w?"none":""},disabled:I.findIndex(function(e){return e.get("code")===j})===I.size-1||!I.size,onClick:function(){n(S.beforeEditProjectCard(I.get(z),function(){},m))}},g.default.createElement(s.default,{type:"caret-right"})),g.default.createElement(c.default,{key:"cancel",type:"ghost",onClick:function(){return r()}},"取 消"),g.default.createElement(c.default,{key:"ok",type:P?"primary":"modify"==w?"primary":"ghost",disabled:!A,onClick:function(){W("insert")}},"保 存"),g.default.createElement(c.default,{key:"addAndNew",type:"primary",disabled:!A,style:{display:"insert"!=w||P?"none":"inline-block"},onClick:function(){W("insertAndNew")}},"保存并新增")]},g.default.createElement("div",{className:"jxc-config-card-modal-wrap"},g.default.createElement("div",{className:"jxc-config-card-modal-row"},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"编码："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(u.default,{placeholder:v.default.cardCode,value:j,onChange:function(e){return h.jxcConfigCheck.inputCheck("cardCode",e.target.value,function(){return n(S.changeProjectCardContent("code",e.target.value))})},onFocus:function(e){return e.target.select()}}))),g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"名称："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(u.default,{placeholder:v.default.name,value:D,onChange:function(e){return n(S.changeProjectCardContent("name",e.target.value))},onFocus:function(e){return e.target.select()}})))),g.default.createElement("div",{className:"jxc-config-card-modal-row"},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"项目性质："),g.default.createElement("div",{className:"jxc-config-card-modal-input",style:{maxWidth:"800px"}},g.default.createElement(O,{onChange:function(e){var t=e.target.value.split(T.TREE_JOIN_STR),a=t[0],r=t[1];n(S.changeProjectPropertyState(a,r))},value:""+k+T.TREE_JOIN_STR+H},g.default.createElement(f.default,{value:"XZ_LOSS"+T.TREE_JOIN_STR+"损益项目"},"损益项目"),V?g.default.createElement(f.default,{value:"XZ_PRODUCE"+T.TREE_JOIN_STR+"生产项目"},"生产项目"):"",K?g.default.createElement(f.default,{value:"XZ_CONSTRUCTION"+T.TREE_JOIN_STR+"施工项目"},"施工项目"):"")))),g.default.createElement("div",{className:"jxc-config-card-modal-row"},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"类别："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(_.UpperClassSelect,{className:"jxc-config-modal-select",placeholder:"",treeData:L||[],treeDefaultExpandAll:!0,isLastSelect:!0,disabledParent:!0,value:U?[J]:[""],onSelect:function(e){n(S.changeProjectCardCategoryType(e))}}))),g.default.createElement("div",null)),"XZ_PRODUCE"===k||"XZ_CONSTRUCTION"===k?g.default.createElement("div",{className:"jxc-config-title",style:{marginBottom:"10px"}},"期初信息"):"",g.default.createElement("div",{className:"jxc-config-card-modal-row"},"XZ_PRODUCE"===k?g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"基本生产成本："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(l.default,{title:b?"已结账，无法修改期初值":""},g.default.createElement(_.XfInput,{negativeAllowed:!0,mode:"amount",placeholder:"请输入金额",disabled:b,value:x,onChange:function(e){var t=e.target.value;n(S.changeProjectCardContent("basicProductOpen",t))}})))):"","XZ_CONSTRUCTION"===k?g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"合同成本："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(l.default,{title:b?"已结账，无法修改期初值":""},g.default.createElement(_.XfInput,{negativeAllowed:!0,mode:"amount",placeholder:"请输入金额",disabled:b,value:G,onChange:function(e){var t=e.target.value;n(S.changeProjectCardContent("contractCostOpen",t))}})))):"","XZ_CONSTRUCTION"===k?g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"合同毛利："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(l.default,{title:b?"已结账，无法修改期初值":""},g.default.createElement(_.XfInput,{negativeAllowed:!0,mode:"amount",placeholder:"请输入金额",disabled:b,value:B,onChange:function(e){var t=e.target.value;n(S.changeProjectCardContent("contractProfitOpen",t))}})))):""),"XZ_CONSTRUCTION"===k?g.default.createElement("div",{className:"jxc-config-card-modal-row"},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"工程结算："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(l.default,{title:b?"已结账，无法修改期初值":""},g.default.createElement(_.XfInput,{negativeAllowed:!0,mode:"amount",placeholder:"请输入金额",disabled:b,value:F,onChange:function(e){var t=e.target.value;n(S.changeProjectCardContent("engineeringSettlementOpen",t))}}))))):""))}}]),t}(),r.displayName="ProjectConfAddCardModal",a=i))||a;t.default=b},1463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=h(n(47)),i=h(n(61)),o=h(n(14)),l=h(n(1234)),u=h(n(37)),c=h(n(129)),s=h(n(89)),d=h(n(45)),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(79),n(78),n(1235),n(38),n(128),n(88),n(55);var p=h(n(1)),m=(h(n(0)),n(18)),y=n(56);n(1240);T(n(27)),n(22),h(n(1244));var g=h(n(1288)),E=n(127),C=T(n(1241));function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}d.default.Option,d.default.OptGroup,s.default.Group,c.default.Group;var _=(0,y.connect)(function(e){return e})(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={unitList:(a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"])&&a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"]).size?a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"]):(0,m.fromJS)([{amount:"",uuid:""}])).toJS(),uuid:a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","uuid"]),name:a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","name"]),isStandard:a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","isStandard"]),basicUnitUuid:a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","basicUnitUuid"]),unitQuantity:a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitQuantity"]),basicUnitQuantity:"",canEdit:!0,relateBoth:"",allowSave:!1,changeUnit:!1,oldUnit:(0,m.fromJS)({})},v(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),f(t,[{key:"initState",value:function(){this.setState({unitList:[{amount:"",uuid:""}],uuid:"",name:"",isStandard:!1,basicUnitUuid:"",unitQuantity:"",basicUnitQuantity:"",canEdit:!0,relateBoth:"",allowSave:!1,changeUnit:!1,oldUnit:(0,m.fromJS)({})})}},{key:"beforeSaveCheck",value:function(){var e=this.props,t=e.inventoryCardState,n=e.insertOrModify,a=this.state,r=a.unitList,i=a.name,o=a.oldUnit,l=(a.uuid,a.unitQuantity),c=a.basicUnitQuantity,s=a.isStandard,d=a.basicUnitUuid,f=t.getIn(["views","standardList"]);if(!i)return u.default.info("基本单位必填"),!1;if(r.some(function(e){return e.basicUnitQuantity<=1}))return u.default.info("多单位关系必须大于1"),!1;if(r.some(function(e){return!e.basicUnitQuantity||!e.name}))return u.default.info("多单位填写完整"),!1;if(r.some(function(e){return r.filter(function(t){return t.name===e.name}).length>1})||r.filter(function(e){return e.name===i}).length>0)return u.default.info("同一存货的单位组中，不支持两个单位名称相同"),!1;if(r.some(function(e){return r.filter(function(t){return t.basicUnitQuantity==e.basicUnitQuantity}).length>1}))return u.default.info("同一存货的单位组中，不支持与基本单位重复数量比的多单位"),!1;if("modify"===n&&JSON.parse(s||"false")&&JSON.parse(o.get("isStandard")||"false")){var p=f.find(function(e){return e.get("uuid")===o.get("uuid")}).get("basicUnitQuantity")||0;if(Number(c||0).toFixed(4)!==(Number(p)/Number(l||0)).toFixed(4)&&d===o.get("basicUnitUuid"))return u.default.info("新旧基本单位关系错误"),!1}return r.every(function(e,t){return r.every(function(n,a){var r=(Number(e.unitQuantity||0)/Number(n.unitQuantity||0)).toFixed(4),i=(Number(e.basicUnitQuantity||0)/Number(n.basicUnitQuantity||0)).toFixed(4);return!e.basicUnitUuid||e.basicUnitUuid!==n.basicUnitUuid||t===a||r===i||(u.default.info("多单位"+(t+1)+"和多单位"+(a+1)+"关系错误"),!1)})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.inventoryCardState,s=(t.homeState,t.enableWarehouse,t.showAddModal),d=t.closeAddModal,f=t.insertOrModify,y=this.state,T=y.unitList,h=y.uuid,v=y.name,_=y.isStandard,S=y.canEdit,I=y.allowSave,N=y.oldUnit,O=y.basicUnitQuantity,b=y.changeUnit,A=y.basicUnitUuid,L=y.unitQuantity,w=(a.getIn(["views","fromPage"]),a.getIn(["views","standardList"])),P=a.getIn(["views","customList"]),R=a.get("inventoryCardTemp"),M=(R.get("inventoryNature"),R.get("isOpenedQuantity"),R.get("unitPriceList")),j=R.get("unit")||(0,m.fromJS)({});R.get("CurUnit")||(0,m.fromJS)({});return p.default.createElement(r.default,{destroyOnClose:!0,className:"add-unit "+(I||"modify"!==f?"":"add-unit-disabled"),width:"500px",visible:s,maskClosable:!1,title:("insert"===f?"新增":"修改")+"单位",okText:"保存",onCancel:function(){d(),e.initState()},onOk:function(){if((I||"modify"!==f)&&e.beforeSaveCheck()){d(),e.initState();var t=M.toJS().filter(function(e){return v===e.name||T.some(function(t){return t.name===e.name})});t.some(function(e){return 1===e.type})||(t=t.concat([{type:1}])),t.some(function(e){return 2===e.type})||(t=t.concat([{type:2}])),n(C.changeInventoryCardContent("unitPriceList",(0,m.fromJS)(t))),n(C.changeInventoryCardContent("unit",(0,m.fromJS)({uuid:h,name:v,isStandard:_,basicUnitQuantity:O,unitList:T,changeUnit:b,basicUnitUuid:A,unitQuantity:L})))}}},p.default.createElement("div",null,p.default.createElement("div",{className:"modal-flex"},S?p.default.createElement("div",{className:"modal-item"},p.default.createElement("label",null,"基本单位："),p.default.createElement("div",{className:"modal-input"},p.default.createElement(g.default,{style:{width:"calc(100% - 75px)"},disabled:S&&"modify"===f,selectListOne:w,selectListTwo:P.filter(function(e){return!(e.get("unitList")&&e.get("unitList").size)}),onChange:function(t){var n=t.uuid,a=t.name,r=t.isStandard,i=t.basicUnitUuid,o=t.unitQuantity;if(e.setState({uuid:n,name:a,isStandard:r,basicUnitUuid:i,unitQuantity:o,unitList:T.map(function(e){return e.disabled=!1,e})}),"true"==String(r)){var l=T.map(function(e){return e.name="",e.basicUnitQuantity="",e});e.setState({unitList:l})}},onSwitch:function(){e.setState({uuid:"",name:"",isStandard:!1})},name:"modify"===f?j.get("name"):v}),"modify"===f?p.default.createElement(E.XfnIcon,{type:"config-edit",onClick:function(){e.setState({canEdit:!1,oldUnit:j,name:"",changeUnit:!0,unitList:(e.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"])&&e.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"]).size?e.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"]):(0,m.fromJS)([])).toJS()})}}):"")):p.default.createElement("div",{style:{flex:1}},p.default.createElement("div",{className:"modal-flex"},p.default.createElement("span",{className:"modal-item"},"原基本单位"),p.default.createElement("span",{className:"modal-item"},"新基本单位"),p.default.createElement("span",{className:"modal-item"},"数量关系"),p.default.createElement("span",{style:{maxWidth:"70px"}})),p.default.createElement("div",{className:"modal-flex"},p.default.createElement("div",{className:"modal-input-content"},p.default.createElement("span",null,N.get("name"),"  =  "),p.default.createElement(g.default,{disabled:S&&"modify"===f,selectListOne:w,selectListTwo:P.filter(function(e){return!(e.get("unitList")&&e.get("unitList").size)}),onChange:function(t){var n=t.uuid,a=t.name,r=t.isStandard,i=t.basicUnitUuid,o=t.unitQuantity;if(e.setState({uuid:n,name:a,isStandard:r,basicUnitUuid:i,unitQuantity:o,unitList:T.map(function(e){return e.disabled=!1,e})}),"false"!=r){var l=T.map(function(e){return e.name="",e.basicUnitQuantity="",e});e.setState({unitList:l})}},onSwitch:function(){e.setState({uuid:"",name:"",isStandard:!1})},name:v}),"  *  ",p.default.createElement(E.NumberInput,{type:"count4",placeholder:"请输入数量值",value:O,onChange:function(t){e.setState({basicUnitQuantity:t})}}),p.default.createElement(l.default,{className:"use-unuse-style",style:{marginLeft:".4rem"},checked:T.length,checkedChildren:"多单位",unCheckedChildren:"多单位",onChange:function(){e.setState({unitList:T.length?[]:[{}]})}}))))),T.length?p.default.createElement("div",{className:"multi-unit-content"},T.map(function(t,n){return p.default.createElement("div",{className:"multi-unit"},p.default.createElement("span",null,"多单位",n+1,"："),p.default.createElement(g.default,{selectListOne:w,selectListTwo:P.filter(function(e){return!(e.get("unitList")&&e.get("unitList").size)}),onChange:function(a){var r=a.uuid,i=a.name,o=a.isStandard,l=a.basicUnitUuid,c=a.unitQuantity,s=T;if("true"==o&&l==e.state.basicUnitUuid){var d=Number(e.state.unitQuantity||0),f=Number(c||0);d<f?(s[n]={uuid:r,name:i,isStandard:o,basicUnitQuantity:parseInt(f/d),disabled:!0,unitQuantity:c},e.setState({unitList:s})):u.default.info("数量关系必须大于1")}else s[n]={uuid:r,name:i,isStandard:o,basicUnitUuid:l,unitQuantity:c,basicUnitQuantity:t.basicUnitQuantity},e.setState({unitList:s})},onSwitch:function(){var t=T;t[n]={uuid:"",name:"",isStandard:!1},e.setState({unitList:t})},name:t.fullName||t.name}),p.default.createElement("span",null," =  ",v,"  *   "),p.default.createElement(E.NumberInput,{type:"count",placeholder:"请输入数量值",value:t.basicUnitQuantity,disabled:t.disabled,onChange:function(t){var a=T;a[n].basicUnitQuantity=t,e.setState({unitList:a})}}),T.length>1||"modify"===f?p.default.createElement(E.XfnIcon,{type:"bigDel",onClick:function(){T.splice(n,1),e.setState({unitList:T})}}):"")})):"",T.length||"modify"===f&&S?p.default.createElement("div",{style:{marginBottom:"10px"}},p.default.createElement(i.default,{title:T.length>=2?"单位组最多3级单位":""},p.default.createElement("span",{style:{cursor:"pointer",color:T.length>=2?"#ccc":"#1eb6f8"},onClick:function(){T.length>=2||(T.push({amount:"",uuid:""}),e.setState({unitList:T}))}},p.default.createElement(o.default,{type:"plus"}),"增加单位"))):"","modify"===f?p.default.createElement("div",null,p.default.createElement(c.default,{onChange:function(t){e.setState({allowSave:t.target.checked})}},"所有历史单据中，该商品的单位将统一转换为基本单位")):""))}}]),t}())||a;t.default=_},1464:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=d(n(47)),r=d(n(171)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(170);var o=d(n(1)),l=(d(n(0)),n(18));n(56);n(1240);var u=s(n(27)),c=(n(22),d(n(1244)),d(n(1288)),n(127),s(n(1241)));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=r.default.TreeNode,m=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={showMultiUnit:!1},f(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.showWarehouseModal,i=e.onClose,s=e.treeList,d=e.selectedKeys;this.state.showMultiUnit;return o.default.createElement(a.default,{destroyOnClose:!0,className:"add-unit",width:"500px",visible:n,maskClosable:!1,title:"选择仓库",onCancel:function(){i(),t(c.changeInventoryCardViews("selectedKeys",(0,l.fromJS)([])))},onOk:function(){t(c.getSomeWarehouseTree(d.toJS(),function(){i()}))}},o.default.createElement(r.default,{checkable:!0,defaultExpandAll:!0,checkedKeys:d.toJS(),selectedKeys:[],onCheck:function(e,n){t(c.changeInventoryCardViews("selectedKeys",(0,l.fromJS)(e)))},onSelect:function(){return""}},s.size?function e(t,n){return t.map(function(t){return t.get("childList")&&t.get("childList").size?o.default.createElement(p,{title:t.get("name"),key:""+t.get("uuid")},e(t.get("childList"),n+u.TREE_JOIN_STR+t.get("uuid"))):o.default.createElement(p,{title:t.get("name"),key:""+t.get("uuid")})})}(s,""):[]))}}]),t}();t.default=m},1465:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=T(n(37)),r=T(n(1256)),i=T(n(14)),o=T(n(171)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(38),n(1257),n(78),n(170);var u=n(1),c=T(u),s=(T(n(0)),n(18));n(56);n(1240);var d=C(n(27)),f=n(22),p=(T(n(1244)),n(127)),m=T(n(487)),y=T(n(1376)),g=T(n(1362)),E=C(n(1241));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o.default.TreeNode;var _=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={showMultiUnit:!1,hideChildList:[],newBatchNumber:"",newBatchDate:"",placeArr:[]},v(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,o=t.warehousePriceMode,l=t.isOpenedQuantity,C=t.enableWarehouse,T=t.treeList,v=t.showWarehouseModal,_=t.isCheckOut,S=t.assistClassificationList,I=t.batchList,N=t.uuid,O=t.financialInfo,b=this.props.unit||(0,s.fromJS)({}),A=(O.get("serialList")||(0,s.fromJS)([]),O.get("openAssist")),L=O.get("openSerial"),w=O.get("openBatch"),P=O.get("openShelfLife"),R=O.get("shelfLife"),M=this.state,j=(M.showMultiUnit,M.hideChildList),D=M.placeArr,U=M.index,J=M.batchIndex,k=1,H=0,x=0;!function e(t){return t.map(function(t){t.get("childList")&&t.get("childList").size&&!t.get("isEnd")?e(t.get("childList")):(A||w)&&l?(H+=t.get("childList").reduce(function(e,t){return e+(Number(t.get("openedAmount"))||0)},0),x+=t.get("childList").reduce(function(e,t){return e+(Number(t.get("openedQuantity"))||0)},0)):(H+=Number(t.get("openedAmount"))||0,x+=Number(t.get("openedQuantity"))||0)})}(T);var G="";return l&&C?G="quantity-warehouse-table":!l&&C&&(G="warehouse-table"),c.default.createElement(p.TableAll,{className:"inventory-table-width "+G},c.default.createElement(p.TableBody,null,c.default.createElement(p.TableItem,{line:2},c.default.createElement("li",null,"仓库编码"),c.default.createElement("li",{key:"1",onClick:function(){if(_)a.default.info("已结账，不允许修改期初值");else if(n(E.getWarehouseTree(v)),T.size){var e=[];!function t(n){return n.map(function(n){n.get("childList")&&n.get("childList").size?t(n.get("childList")):e.push(n.get("warehouseUuid"))})}(T),n(E.changeInventoryCardViews("selectedKeys",(0,s.fromJS)(e)))}}},"仓库",c.default.createElement(p.XfnIcon,{type:"config-edit"})),l?c.default.createElement("li",null,"期初数量"):"",c.default.createElement("li",null,"期初余额")),function t(a,g,T,v){return a.map(function(T,O){var R=O>0?a.getIn([O-1,"childList"]).size%2==0?R+O:R+O+1:R+O;if(!T.get("childList")||!T.get("childList").size||T.get("isEnd")){k++,T.getIn(["childList",0,"assistList"])||(0,s.fromJS)([]);var M=T.get("childList")||(0,s.fromJS)([]),D=(w||A)&&l?M.reduce(function(e,t){return e+(Number(t.get("openedQuantity"))||0)},0):T.get("openedQuantity"),U=(w||A)&&l?M.reduce(function(e,t){return e+(Number(t.get("openedAmount"))||0)},0):T.get("openedAmount"),J=5+7*(v-1)+"px";return c.default.createElement("div",{className:"item-content"},c.default.createElement(p.TableItem,{key:T.get("warehouseUuid"),line:R},c.default.createElement("li",{className:"inventory-code",style:{paddingLeft:J}},T.get("warehouseCode")),c.default.createElement("li",{className:"inventory-name"},c.default.createElement("span",null,T.get("warehouseName")),(A||w)&&l?c.default.createElement(i.default,{type:"plus",onClick:function(){var e=(T.get("childList")||(0,s.fromJS)([])).push((0,s.fromJS)({openedQuantity:"",openedAmount:""}));n(E.changeInventoryCardContent(["openList"].concat(h(g),[O,"childList"]),e))}}):""),l?A||w?M.size?c.default.createElement("li",{className:"force-centet"},c.default.createElement("span",{className:"input-quantity"},(0,f.formatFour)(D)),c.default.createElement("span",null,b.get("name"))):c.default.createElement("li",null):c.default.createElement("li",{className:"force-centet"},L?c.default.createElement("div",{className:"serial-box",onClick:function(){n(E.changeInventoryCardViews("serialPlaceArr",(0,s.fromJS)(["openList"].concat(h(g),[O])))),T.get("openUuid")&&!T.get("isModify")?n(E.getSerialList(N,T.get("openUuid"))):(n(E.changeInventoryCardViews("serialList",T.get("serialList")||(0,s.fromJS)([]))),n(E.changeInventoryCardViews("serialModal",!0)))}},T.get("openedQuantity")>0?(0,f.formatFour)(T.get("openedQuantity")):"点击输入",c.default.createElement(p.XfnIcon,{type:"edit-pen"})):c.default.createElement(m.default,{className:"input-quantity",type:"regAmount",disabled:_,placeholder:"必填，请输入数量",value:D,onChange:function(e){(0,f.numberFourTest)(e,function(e){n(E.changeInventoryCardContent(["openList"].concat(h(g),[O,"openedQuantity"]),e))},!0)}}),c.default.createElement("span",null,b.get("name"))):"",(A||w)&&l?c.default.createElement("li",{className:"force-centet"},c.default.createElement("span",{className:"input-amount"},(0,f.formatMoney)(U)),c.default.createElement("span",null,"元")):c.default.createElement("li",{className:"force-centet"},c.default.createElement(p.NumberInput,{type:"regAmount",className:"input-amount",disabled:_,placeholder:"必填，请输入金额",value:T.get("openedAmount"),onChange:function(e){n(E.changeInventoryCardContent(["openList"].concat(h(g),[O,"openedAmount"]),e))}}),c.default.createElement("span",null,"元"))),M.size&&l&&(A||w)?M.map(function(t,a){var o=I.find(function(e){return e.get("batchUuid")===t.get("batchUuid")&&t.get("batchUuid")||e.get("batch")===t.get("batch")});return c.default.createElement(p.TableItem,{className:"detail-item",line:R},c.default.createElement("li",null),c.default.createElement("li",{className:"inventory-select"},A&&S.map(function(e){return c.default.createElement(u.Fragment,null,c.default.createElement(p.XfnSelect,{showSearch:!0,className:"assist-select",placeholder:e.get("name"),value:((t.get("assistList")||(0,s.fromJS)([])).find(function(t){return t.get("classificationUuid")===e.get("uuid")})||(0,s.fromJS)({})).get("propertyName")||void 0,onChange:function(r){var i=r.split(d.TREE_JOIN_STR),o=i[0],l=i[1],u=t.get("assistList")||(0,s.fromJS)([]),c=u.size,f=u.findIndex(function(t){return t.get("classificationUuid")===e.get("uuid")});0===c?n(E.changeInventoryCardContent(["openList"].concat(h(g),[O,"childList",a,"assistList"]),(0,s.fromJS)([{classificationUuid:e.get("uuid"),classificationName:e.get("name"),propertyUuid:o,propertyName:l}]))):-1===f?n(E.changeInventoryCardContent(["openList"].concat(h(g),[O,"childList",a,"assistList",c]),(0,s.fromJS)({classificationUuid:e.get("uuid"),classificationName:e.get("name"),propertyUuid:o,propertyName:l}))):(n(E.changeInventoryCardContent(["openList"].concat(h(g),[O,"childList",a,"assistList",f,"propertyUuid"]),o)),n(E.changeInventoryCardContent(["openList"].concat(h(g),[O,"childList",a,"assistList",f,"propertyName"]),l)))}},e.get("propertyList").map(function(e){return c.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+d.TREE_JOIN_STR+e.get("name")},e.get("name"))})))}),w?c.default.createElement(u.Fragment,null,c.default.createElement("div",{className:"batch-content"},c.default.createElement(p.XfnSelect,{showSearch:!0,className:"batch-select input"+a,placeholder:"请选择/新增批次",value:o?o.get("batch")+(P&&o.get("expirationDate")?"("+o.get("expirationDate")+")":""):void 0,showArrow:!1,dropdownRender:function(e){return c.default.createElement("div",{onMouseDown:function(e){return e.preventDefault()},className:"edit-box"},e,c.default.createElement(r.default,{style:{margin:"4px 0"}}),c.default.createElement("div",{className:"edit-area",onClick:function(){n(E.changeInventoryCardViews("batchModal",!0))}},c.default.createElement(p.XfnIcon,{type:"edit-pen"}),"修改批次信息"))},onChange:function(t){var r=t.split(d.TREE_JOIN_STR),i=r[0],o=r[1],l=r[2];T.getIn(["childList",0,"assistList"]),e.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},"value"+a,!1)),n(E.changeInventoryCardContent(["openList"].concat(h(g),[O,"childList",a,"batch"]),i)),n(E.changeInventoryCardContent(["openList"].concat(h(g),[O,"childList",a,"batchUuid"]),o)),n(E.changeInventoryCardContent(["openList"].concat(h(g),[O,"childList",a,"expirationDate"]),l))}},I.map(function(e){return c.default.createElement(Option,{key:e.get("batch"),value:""+e.get("batch")+d.TREE_JOIN_STR+(e.get("batchUuid")||"")+d.TREE_JOIN_STR+e.get("expirationDate")},e.get("batch")+(P&&e.get("expirationDate")?"("+e.get("expirationDate")+")":""))})),c.default.createElement("span",{className:"add-button",onClick:function(){e.setState({batchDrop:!0,batchIndex:a,index:O,placeArr:g})}},"新增"))):"",c.default.createElement("div",{className:"close-button"},c.default.createElement(i.default,{type:"close",onClick:function(){n(E.changeInventoryCardContent(["openList"].concat(h(g),[O,"childList"]),M.splice(M.size-1,1)))}}))),l?c.default.createElement("li",{className:"force-centet"},L?c.default.createElement("div",{className:"serial-box",onClick:function(){n(E.changeInventoryCardViews("serialPlaceArr",(0,s.fromJS)(["openList"].concat(h(g),[O,"childList",a])))),t.get("openUuid")&&!t.get("isModify")?n(E.getSerialList(N,t.get("openUuid"))):(n(E.changeInventoryCardViews("serialList",t.get("serialList")||(0,s.fromJS)([]))),n(E.changeInventoryCardViews("serialModal",!0)))}},t.get("openedQuantity")>0?(0,f.formatFour)(t.get("openedQuantity")):"点击输入",c.default.createElement(p.XfnIcon,{type:"edit-pen"})):c.default.createElement(m.default,{className:"input-quantity",type:"regAmount",disabled:_,placeholder:"必填，请输入数量",value:t.get("openedQuantity"),onChange:function(e){(0,f.numberFourTest)(e,function(e){n(E.changeInventoryCardContent(["openList"].concat(h(g),[O,"childList",a,"openedQuantity"]),e))},!0)}}),c.default.createElement("span",null,b.get("name"))):"",c.default.createElement("li",{className:"force-centet"},c.default.createElement(p.NumberInput,{type:"regAmount",className:"input-amount",disabled:_,placeholder:"必填，请输入金额",value:t.get("openedAmount"),onChange:function(e){n(E.changeInventoryCardContent(["openList"].concat(h(g),[O,"childList",a,"openedAmount"]),e))}}),c.default.createElement("span",null,"元")))}):"")}k++;var H=-1==j.indexOf(T.get("warehouseUuid"));return c.default.createElement("div",{className:"item-content"},c.default.createElement(y.default,{item:T,showChild:H,hideChildList:j,warehousePriceMode:o,isOpenedQuantity:l,enableWarehouse:C,unit:b,showChildFunc:function(){return e.setState({hideChildList:j.filter(function(e){return e!=T.get("warehouseUuid")})})},hideChildFunc:function(){return e.setState({hideChildList:[].concat(h(j),[T.get("warehouseUuid")])})},line:R,level:v,isCheckOut:_,dispatch:n,index:O,openAssist:A,openBatch:w}),H?t(T.get("childList"),[].concat(h(g),[O,"childList"]),0,v+1):[])})}(T,[],0,1),c.default.createElement(p.TableItem,{key:"2",line:k,className:"no-border-bottom"},c.default.createElement("li",null),c.default.createElement("li",null,"合计"),l?c.default.createElement("li",{className:"force-centet"},c.default.createElement("span",{className:"input-quantity"},(0,f.formatFour)(x)),c.default.createElement("span",null,b.get("name"))):"",c.default.createElement("li",{className:"force-centet"},c.default.createElement("span",{className:"input-amount"},(0,f.formatMoney)(H)),c.default.createElement("span",null,"元"))),this.state.batchDrop?c.default.createElement(g.default,{shelfLife:R,visible:this.state.batchDrop,index:this.state.batchIndex||0,dispatch:n,uuid:N,openShelfLife:P,callBack:function(e,t,a){n(E.changeInventoryCardContent(["openList"].concat(h(D),[U,"childList",J,"batch"]),e)),n(E.changeInventoryCardContent(["openList"].concat(h(D),[U,"childList",J,"batchUuid"]),t)),n(E.changeInventoryCardContent(["openList"].concat(h(D),[U,"childList",J,"expirationDate"]),a))},close:function(){return e.setState({batchDrop:!1})}}):""))}}]),t}();t.default=_},1466:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=E(n(1256)),r=E(n(45)),i=E(n(14)),o=E(n(171)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1257),n(55),n(78),n(170);var u=E(n(1)),c=(E(n(0)),n(18));n(56);n(1240);var s=g(n(27)),d=n(22),f=(E(n(1244)),n(127)),p=E(n(487)),m=(E(n(1376)),E(n(1362))),y=g(n(1241));E(n(1237));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o.default.TreeNode;var T=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={showMultiUnit:!1,hideChildList:[],newBatchNumber:"",newBatchDate:"",x:"0px",y:"0px"},C(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,o=(t.warehousePriceMode,t.isOpenedQuantity),l=(t.enableWarehouse,t.treeList),g=(t.showWarehouseModal,t.isCheckOut),E=t.assistClassificationList,C=t.batchList,T=t.uuid,h=t.financialInfo,v=t.insertOrModify,_=this.props.unit||(0,c.fromJS)({}),S=(h.get("serialList")||(0,c.fromJS)([]),h.get("openAssist")),I=h.get("openBatch"),N=h.get("openSerial"),O=h.get("openShelfLife"),b=h.get("shelfLife"),A=this.state,L=(A.showMultiUnit,A.hideChildList,A.batchIndex),w=0,P=0;l.map(function(e){P+=Number(e.get("openedQuantity"))||0,w+=Number(e.get("openedAmount"))||0});var R=l.size?l:(0,c.fromJS)([{}]),M="";return M=o&&S&&I?"quantity-assist-batch-table":o&&(S||I)?"quantity-assist-or-batch-table":"quantity-table",u.default.createElement(f.TableAll,{className:"inventory-table-width "+M,style:{display:o?"":"none"}},u.default.createElement(f.TableBody,null,u.default.createElement(f.TableItem,{line:2},S||I?u.default.createElement("li",null,"操作"):"",S?u.default.createElement("li",null,"属性"):"",I?u.default.createElement("li",null,"批次"):"",u.default.createElement("li",null,"期初数量"),u.default.createElement("li",null,"期初余额")),u.default.createElement("div",{className:"item-content"},R.map(function(t,o){var m=o+1;t.getIn(["childList",0,"assistList"])||(0,c.fromJS)([]),t.get("childList")||(0,c.fromJS)([{}]);return u.default.createElement(f.TableItem,{className:"detail-item",line:m},S||I?u.default.createElement("li",{className:"choose-li"},u.default.createElement("span",null,u.default.createElement(i.default,{type:"plus",onClick:function(){l.size?n(y.changeInventoryCardContent("openList",l.push((0,c.fromJS)({})))):n(y.changeInventoryCardContent("openList",l.concat((0,c.fromJS)([{},{}]))))}})),u.default.createElement("span",null,u.default.createElement(i.default,{type:"close",onClick:function(){l.size?n(y.changeInventoryCardContent("openList",l.splice(o,1))):n(y.changeInventoryCardContent("openList",(0,c.fromJS)([{}])))}}))):"",S?u.default.createElement("li",null,E.map(function(e){return u.default.createElement("div",{className:"batch-content",style:{maxWidth:"calc("+100/E.size+"% - 6px)"}},u.default.createElement(r.default,{className:"assist-select",placeholder:e.get("name"),value:((t.get("assistList")||(0,c.fromJS)([])).find(function(t){return t.get("classificationUuid")===e.get("uuid")})||(0,c.fromJS)({})).get("propertyName")||void 0,onChange:function(a){var r=a.split(s.TREE_JOIN_STR),i=r[0],l=r[1],u=t.get("assistList")||(0,c.fromJS)([]),d=u.size,f=u.findIndex(function(t){return t.get("classificationUuid")===e.get("uuid")});0===d?n(y.changeInventoryCardContent(["openList",o,"assistList"],(0,c.fromJS)([{classificationUuid:e.get("uuid"),classificationName:e.get("name"),propertyUuid:i,propertyName:l}]))):-1===f?n(y.changeInventoryCardContent(["openList",o,"assistList",d],(0,c.fromJS)({classificationUuid:e.get("uuid"),classificationName:e.get("name"),propertyUuid:i,propertyName:l}))):(n(y.changeInventoryCardContent(["openList",o,"assistList",f,"propertyUuid"],i)),n(y.changeInventoryCardContent(["openList",o,"assistList",f,"propertyName"],l)))}},e.get("propertyList").map(function(e){return u.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+s.TREE_JOIN_STR+e.get("name")},e.get("name"))})))})):"",I?u.default.createElement("li",null,u.default.createElement("div",{className:"batch-content"},u.default.createElement(f.XfnSelect,{className:"batch-select input"+o,placeholder:"请选择/新增批次",value:t.get("batch")?t.get("batch")+(O&&t.get("expirationDate")?"("+t.get("expirationDate")+")":""):void 0,showArrow:!1,showSearch:!0,dropdownRender:function(e){return u.default.createElement("div",{onMouseDown:function(e){return e.preventDefault()},className:"edit-box"},e,u.default.createElement(a.default,{style:{margin:"4px 0"}}),u.default.createElement("div",{className:"edit-area",onClick:function(){n(y.changeInventoryCardViews("batchModal",!0))}},u.default.createElement(f.XfnIcon,{type:"edit-pen"}),"修改批次信息"))},onChange:function(a){var r=a.split(s.TREE_JOIN_STR),i=r[0],l=r[1]||"",u=r[2];t.getIn(["childList",0,"assistList"]);e.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},"value"+o,!1)),n(y.changeInventoryCardContent(["openList",o,"batch"],i)),n(y.changeInventoryCardContent(["openList",o,"batchUuid"],"insert"===v?"":l)),n(y.changeInventoryCardContent(["openList",o,"expirationDate"],u))}},C.map(function(e){return u.default.createElement(Option,{key:e.get("batch"),value:""+e.get("batch")+s.TREE_JOIN_STR+(e.get("batchUuid")||"")+s.TREE_JOIN_STR+e.get("expirationDate")},e.get("batch")+(O&&e.get("expirationDate")?"("+e.get("expirationDate")+")":""))})),u.default.createElement("span",{className:"add-button",onClick:function(){e.setState({batchDrop:!0,batchIndex:o})}},"新增"))):"",u.default.createElement("li",{className:"force-centet"},N?u.default.createElement("div",{className:"serial-box",onClick:function(){n(y.changeInventoryCardViews("serialPlaceArr",(0,c.fromJS)(["openList",o]))),t.get("openUuid")&&!t.get("isModify")?n(y.getSerialList(T,t.get("openUuid"))):(n(y.changeInventoryCardViews("serialList",t.get("serialList")||(0,c.fromJS)([]))),n(y.changeInventoryCardViews("serialModal",!0)))}},t.get("openedQuantity")>0?(0,d.formatFour)(t.get("openedQuantity")):"点击输入",u.default.createElement(f.XfnIcon,{type:"edit-pen"})):u.default.createElement(p.default,{className:"input-quantity",type:"regAmount",disabled:g,placeholder:"必填，请输入数量",value:t.get("openedQuantity"),onChange:function(e){(0,d.numberFourTest)(e,function(e){n(y.changeInventoryCardContent(["openList",o,"openedQuantity"],e))})}}),u.default.createElement("span",{className:"unit"},_.get("name"))),u.default.createElement("li",{className:"force-centet"},u.default.createElement(f.NumberInput,{className:"input-amount",type:"regAmount",disabled:g,placeholder:"必填，请输入金额",value:t.get("openedAmount"),onChange:function(e){n(y.changeInventoryCardContent(["openList",o,"openedAmount"],e))}}),u.default.createElement("span",{className:"unit"},"元")))})),S||I?u.default.createElement(f.TableItem,{key:"2",line:l.size+1,className:"no-border-bottom"},S?u.default.createElement("li",null):"",I?u.default.createElement("li",null):"",u.default.createElement("li",null,"合计"),u.default.createElement("li",{className:"force-centet"},u.default.createElement("span",{className:"input-quantity"},(0,d.formatFour)(P)),u.default.createElement("span",null,_.get("name"))),u.default.createElement("li",{className:"force-centet"},u.default.createElement("span",{className:"input-amount"},(0,d.formatMoney)(w)),u.default.createElement("span",null,"元"))):"",this.state.batchDrop?u.default.createElement(m.default,{visible:this.state.batchDrop,index:L||0,dispatch:n,uuid:T,shelfLife:b,openShelfLife:O,close:function(){return e.setState({batchDrop:!1})},callBack:function(e,t,a){n(y.changeInventoryCardContent(["openList",L,"batch"],e)),n(y.changeInventoryCardContent(["openList",L,"batchUuid"],t)),n(y.changeInventoryCardContent(["openList",L,"expirationDate"],a))}}):""))}}]),t}();t.default=T},1467:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=C(n(47)),i=C(n(1267)),o=C(n(129)),l=C(n(100)),u=C(n(14)),c=C(n(171)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(1265),n(128),n(99),n(78),n(170);var d=C(n(1)),f=n(17),p=n(127),m=E(n(27)),y=n(18),g=E(n(1241));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=c.default.TreeNode,v=(0,f.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={inputValue:""},a.closeModal=function(){a.props.dispatch(g.changeInventoryCardViews("showStockModal",!1)),a.props.dispatch(g.changeInventoryCardViews("materialSelectedKeys","")),a.props.dispatch(g.changeInventoryCardViews("selectList",(0,y.fromJS)([]))),a.props.dispatch(g.changeInventoryCardViews("selectItem",(0,y.fromJS)([])))},T(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.MemberList,s=(t.searchCardContent,t.searchList,t.hasSearchContent,t.thingsList),f=t.materialSelectedKeys,E=t.showModal,C=t.selectItem,T=t.selectList,v=(t.cancel,t.materialList),_=(t.categoryList,t.code),S=C&&C.size||0,I=a?function e(t,n,a){return t&&t.map(function(t,r){return t.childList&&t.childList.length?d.default.createElement(h,{key:""+t.uuid+m.TREE_JOIN_STR+t.name+m.TREE_JOIN_STR+a,title:t.name},e(t.childList,n,a+1)):d.default.createElement(h,{key:""+t.uuid+m.TREE_JOIN_STR+t.name+m.TREE_JOIN_STR+a,title:t.name,checkable:!0})})}(a.toJS(),["全部"],1):"",N=(s.map(function(e){return{string:""+e.get("code")+m.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")}}),s.toJS().filter(function(t){return!e.state.inputValue||(t.code.indexOf(e.state.inputValue)>-1||t.name.indexOf(e.state.inputValue)>-1)}).filter(function(e){return e.code!==_})),O=N.every(function(e){return T.some(function(t){return t===e.uuid})})&&N.length;return d.default.createElement(r.default,{className:"select-modal",title:"选择存货",visible:E,onCancel:function(){e.closeModal()},onOk:function(){var t=v.toJS(),a=C.toJS().map(function(e){return e.materialUuid=e.uuid,1===e.unitList.length&&(e.unitUuid=e.unitList[0].uuid,e.unitName=e.unitList[0].name),e});e.closeModal(),n(g.changeInventoryInnerSrting(["assemblySheet","materialList"],(0,y.fromJS)(t.concat(a))))},width:"800px"},d.default.createElement("div",{className:"lsqc-contacts-card-top"},d.default.createElement("div",{className:"table-tree-container",style:{height:N.length>5?"461px":"249px"}},d.default.createElement(c.default,{defaultExpandAll:!0,onSelect:function(e){if(e[0]){var t=e[0].split(m.TREE_JOIN_STR),a=t[0],r=t[1],i=t[2];"all"===a?(n(g.changeInventoryCardViews("materialSelectedKeys","all")),n(g.getInventoryAllCardList([],"showStockModal"))):(n(g.changeInventoryCardViews("materialSelectedKeys",""+a+m.TREE_JOIN_STR+r+m.TREE_JOIN_STR+i)),n(g.getInventorySomeCardList(a,i)))}},selectedKeys:[f||"all"]},d.default.createElement(h,{key:"all",title:"全部",checkable:!0}),I)),d.default.createElement(p.TableAll,{className:"contacts-table-right",style:{height:N.length>5?"461px":"249px"}},d.default.createElement("span",{className:"lsqc-serch"},d.default.createElement(u.default,{className:"lsqc-serch-icon",type:"search",onClick:function(){}}),d.default.createElement(l.default,{placeholder:"搜索",className:"lsqc-serch-input",style:{paddingLeft:10},onChange:function(t){e.setState({inputValue:t.target.value})}})),d.default.createElement("div",{className:"table-title-wrap"},d.default.createElement("ul",{className:"table-title table-title-charge"},d.default.createElement("li",{onClick:function(e){e.stopPropagation(),n(g.chargeItemCheckboxCheckAll(O,N,s))}},d.default.createElement(o.default,{checked:O})),d.default.createElement("li",null,d.default.createElement("span",null,"编号")),d.default.createElement("li",null,d.default.createElement("span",null,"名称")))),d.default.createElement(p.TableBody,null,N&&N.map(function(t){var a=T.indexOf(t.uuid)>-1;return(t.code+" "+t.name).indexOf(e.state.inputValue)>-1?d.default.createElement(p.TableItem,{className:"contacts-table-width-charge",key:t.uuid,onClick:function(e){e.stopPropagation()}},d.default.createElement("li",{onClick:function(e){e.stopPropagation();var r=t.unit.unitList||[];r.unshift({uuid:t.unit.uuid,name:t.unit.name}),n(g.chargeItemCheckboxCheck(a,t.uuid,t.code,t.name,r))}},d.default.createElement(o.default,{checked:a})),d.default.createElement("li",null,t.code),d.default.createElement("li",null,t.name)):""})))),d.default.createElement("div",{className:"charge-chosen-project"},"选择存货：",C&&C.map(function(e){return d.default.createElement(i.default,{closable:!0,onClose:function(){n(g.chargeItemCheckboxCheck(!0,e.get("uuid")))}},e.get("code")," ",e.get("name"))})),d.default.createElement("div",{style:{display:S>0?"":"none",margin:"0 0 10px 20px"}},S,"个存货"))}}]),t}())||a;t.default=v},1468:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=y(n(47)),r=y(n(100)),i=y(n(32)),o=y(n(129)),l=y(n(171)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(99),n(51),n(128),n(170);var c=y(n(1)),s=(y(n(0)),n(18));n(56);n(1240);m(n(27));var d=y(n(90)),f=(n(22),y(n(1244)),y(n(1288)),n(127)),p=m(n(1241));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}l.default.TreeNode;var E=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={addAssistCategroy:!1,activeUuid:"",activeType:"",newAssistClassificationList:a.props.assistClassificationList},a.emptySelect=function(){a.setState({activeType:"",activeUuid:""})},a.afterAdd=function(){a.setState({activeType:"",activeUuid:"plus"})},g(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentDidMount",value:function(){this.props.dispatch(p.getAssistList(this.props.uuid))}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,l=t.assistModal,u=t.allAssistClassificationList,m=(t.assistClassificationList,t.onClose),y=this.state,g=y.addAssistCategroy,E=y.activeUuid,C=y.activeType,T=y.title,h=y.classificationUuid,v=y.newAssistClassificationList,_=u.findIndex(function(e){return e.get("uuid")===h});return c.default.createElement(a.default,{destroyOnClose:!0,className:"add-unit",width:"800px",visible:l,maskClosable:!1,title:"辅助属性",onCancel:function(){m(),n(p.changeInventoryCardViews("selectedKeys",(0,s.fromJS)([])))},onOk:function(){n(p.changeInventoryInnerSrting(["financialInfo","assistClassificationList"],v)),m()}},c.default.createElement("div",null,c.default.createElement("div",{style:{color:"#999"}}," *请勾选属性，最多支持3个属性分类"),c.default.createElement("div",null,c.default.createElement(f.TableAll,{className:"assist-table"},c.default.createElement(f.TableBody,null,u.size?u.map(function(t,n){return c.default.createElement(f.TableItem,null,c.default.createElement("li",null,t.get("name")),c.default.createElement("li",null,t.get("propertyList").map(function(n){return c.default.createElement("span",null,c.default.createElement(o.default,{disabled:v.size>=3&&v.every(function(e){return e.get("name")!==t.get("name")}),checked:v.some(function(e){return e.get("propertyList").find(function(e){return e.get("uuid")===n.get("uuid")})}),onClick:function(a){var r=v.findIndex(function(e){return e.get("uuid")===t.get("uuid")}),i=v,o=(0,s.fromJS)([]);a.target.checked?(-1===r&&(i=v.push(t.set("propertyList",(0,s.fromJS)([])).set("isUniform",!0))),o=i.updateIn([r,"propertyList"],function(e){return e.push(n)})):o=a.target.checked||1!==i.getIn([r,"propertyList"]).size?i.updateIn([r,"propertyList"],function(e){return e.splice(e.findIndex(function(e){return e.get("uuid")===n.get("uuid")}),1)}):i.delete(r),e.setState({newAssistClassificationList:o})}},n.get("name")))}),c.default.createElement("span",{className:"assist-add",onClick:function(){e.setState({addAssistCategroy:!0,title:"属性管理："+t.get("name"),classificationUuid:t.get("uuid"),activeUuid:"plus",activeType:""})}},c.default.createElement(d.default,{type:"big-plus"}))))}):c.default.createElement(f.TableItem,null,c.default.createElement("div",{className:"assist-item img-kongtaitu",style:{borderBottom:0}},c.default.createElement("div",null),c.default.createElement("div",null,"暂无属性分类，请新增属性分类"))))),c.default.createElement("span",{onClick:function(){return e.setState({addAssistCategroy:!0,activeUuid:"plus",activeType:"",title:"属性分类"})}},c.default.createElement(i.default,{type:"primary",style:{background:"#5e81d1",marginTop:"12px",borderColor:"#5e81d1"}},c.default.createElement(d.default,{type:"big-plus"}),"新增属性分类")))),c.default.createElement(a.default,{visible:g,title:T,onCancel:function(){return e.setState({addAssistCategroy:!1})},footer:[c.default.createElement(i.default,{onClick:function(){e.setState({addAssistCategroy:!1})}},"取消"),c.default.createElement(i.default,{disabled:!E||"plus"===E,onClick:function(){n("属性分类"===T?p.deleteAssistCategroy(E,e.emptySelect):p.deleteAssist(E,e.emptySelect))}},"删除"),c.default.createElement(i.default,{type:"primary",disabled:!E,onClick:function(){n("属性分类"===T?"plus"===E?p.insertAssistCategroy(C,e.afterAdd):p.modifyAssistCategroy(E,C):"plus"===E?p.insertAssist(h,C,e.afterAdd):p.modifyAssist(E,h,C))}},"保存")]},c.default.createElement("div",null,c.default.createElement(f.Tab,{addButton:!0,tabList:"属性分类"===T?u.toJS().map(function(e){return{key:e.uuid,value:e.name}}):(u.getIn([_,"propertyList"])||(0,s.fromJS)([])).toJS().map(function(e){return{key:e.uuid,value:e.name}}),activeKey:E,addKey:"plus",addFunc:function(){e.setState({activeUuid:"plus",activeType:""})},tabFunc:function(t){e.setState({activeUuid:t.key,activeType:t.value})}}),c.default.createElement("div",{style:{display:"flex"}},c.default.createElement("span",{style:{width:"72px"}},"分类名称："),c.default.createElement(r.default,{value:C,onChange:function(t){e.setState({activeType:t.target.value})}})))))}}]),t}();t.default=E},1469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments[1];return((e={},l(e,i.INIT_ADD_INVENTORY_STATE,function(){return t.set("inventoryCardTemp",(0,r.fromJS)(c.get("inventoryCardTemp")))}),l(e,i.BEFORE_ADD_INVENTORY_CONF_CARD_INVENTORY,function(){return t=t.set("tags",n.originTags).setIn(["views","insertOrModify"],"insert").set("inventoryCardTemp",c.get("inventoryCardTemp")).setIn(["inventoryCardTemp","isCheckOut"],n.data.isCheckOut).setIn(["inventoryCardTemp","defaultAc"],(0,r.fromJS)(n.data.defaultAc)).setIn(["inventoryCardTemp","code"],(0,r.fromJS)(n.code)).setIn(["inventoryCardTemp","acId"],(0,r.fromJS)(n.code))}),l(e,i.BEFORE_ADD_INVENTORY_CONF_CARD_RUNNING,function(){return t=t.set("inventoryCardTemp",(0,r.fromJS)(c.get("inventoryCardTemp"))).set("tags",n.originTags).setIn(["views","insertOrModify"],"insert").setIn(["inventoryCardTemp","code"],n.receivedData.code).setIn(["views","fromPage"],"otherPage").setIn(["inventoryCardTemp","defaultAc"],(0,r.fromJS)(n.receivedData.defaultAc))}),l(e,i.BEFORE_EDIT_INVENTORY_CONF_CARD,function(){var e=n.data.openList,a=e&&e.length&&e[0].childList&&e[0].childList.length?e[0].childList:[];return t=t.set("inventoryCardTemp",(0,r.fromJS)(n.data)).setIn(["views","insertOrModify"],"modify").setIn(["views","fromPage"],"inventory").setIn(["views","fromOpen"],n.fromOpen).set("tags",(0,r.fromJS)(n.originTags)).setIn(["inventoryCardTemp","openList"],(0,r.fromJS)(n.enableWarehouse?a:e)).setIn(["inventoryCardTemp","assemblyState"],n.assemblyState),n.data.isOpenedQuantity&&(t=t.setIn(["inventoryCardTemp","CurUnit"],(0,r.fromJS)(n.data.unit))),"OPEN"!==n.assemblyState||n.data.assemblySheet?"OPEN"===n.assemblyState&&n.data.assemblySheet&&!n.data.assemblySheet.materialList&&(t=t.setIn(["inventoryCardTemp","assemblySheet","materialList"],(0,r.fromJS)([{}]))):t=t.setIn(["inventoryCardTemp","assemblySheet"],(0,r.fromJS)({materialList:[{}]})),n.data.categoryTypeList.map(function(e,n){t.get("tags").map(function(n,a){e.ctgyUuid!==n.get("uuid")||(t=t.setIn(["tags",a,"checked"],!0).setIn(["tags",a,"selectUuid"],e.subordinateUuid).setIn(["tags",a,"selectName"],e.subordinateName).setIn(["tags",a,"tree"],(0,r.fromJS)(e.options)))})}),t}),l(e,i.CHANGE_INVENTORY_CARD_CONTENT,function(){return t="object"===a(n.name)?t.setIn(["inventoryCardTemp"].concat(u(n.name)),n.value):t.setIn(["inventoryCardTemp",n.name],n.value)}),l(e,i.CHANGE_INVENTORY_CONF_CARD_VIEWS,function(){return t=t.setIn(["views",n.name],n.value)}),l(e,i.CHANGE_INVENTORY_CONF_CARD_NATURE,function(){return t=t.setIn(["inventoryCardTemp",n.name],n.value)}),l(e,i.CHANGE_INVENTORY_CONF_INNER_STRING,function(){return t=t.setIn(["inventoryCardTemp"].concat(u(n.arr)),n.value)}),l(e,i.CHANGE_INVENTORY_CONF_CARD_CATEGORY_STATUS,function(){var e="";if(t.get("tags").find(function(a,i){if(a.get("uuid")===n.item.get("uuid"))return t=t.setIn(["tags",i,"checked"],n.value).setIn(["tags",i,"tree"],(0,r.fromJS)(n.list)),a.get("selectUuid")&&(e=a.get("selectUuid")),void(n.value&&0===n.list[0].childList.length&&(t=t.setIn(["tags",i,"selectUuid"],n.list[0].uuid).setIn(["tags",i,"selectName"],n.list[0].name),e=n.list[0].uuid))}),n.value){var a=(0,r.fromJS)({ctgyUuid:n.item.get("uuid"),subordinateUuid:e}),i=t.getIn(["inventoryCardTemp","categoryTypeList"]).push(a);t=t.setIn(["inventoryCardTemp","categoryTypeList"],i)}else{var o=t.getIn(["inventoryCardTemp","categoryTypeList"]).findIndex(function(e,t){return e.get("ctgyUuid")===n.item.get("uuid")}),l=t.getIn(["inventoryCardTemp","categoryTypeList"]).delete(o);t=t.setIn(["inventoryCardTemp","categoryTypeList"],l)}return t}),l(e,i.CHANGE_INVENTORY_CONF_CARD_CATEGORY_TYPE,function(){return t.get("tags").map(function(e,a){e.get("uuid")!==n.item.get("uuid")||(t=t.setIn(["tags",a,"selectUuid"],n.uuid).setIn(["tags",a,"selectName"],n.name))}),t.getIn(["inventoryCardTemp","categoryTypeList"]).map(function(e,a){e.get("ctgyUuid")===n.item.get("uuid")&&(t=t.setIn(["inventoryCardTemp","categoryTypeList",a,"subordinateUuid"],n.uuid))}),t}),l(e,i.SAVE_INVENTORY_CONF_CARD_INVENTORY,function(){if("insertAndNew"===n.flag){t.getIn(["inventoryCardTemp","defaultAc"]);t=t.set("inventoryCardTemp",c.get("inventoryCardTemp")).setIn(["inventoryCardTemp","defaultAc"],t.getIn(["inventoryCardTemp","defaultAc"])).setIn(["inventoryCardTemp","categoryTypeList"],t.getIn(["inventoryCardTemp","categoryTypeList"])).setIn(["inventoryCardTemp","code"],n.autoIncrementCode)}return t}),l(e,i.SAVE_INVENTORY_CONF_CARD_RUNNING,function(){return"insertAndNew"===n.flag&&(t=t.setIn(["inventoryCardTemp","name"],"").setIn(["inventoryCardTemp","code"],n.autoIncrementCode)),t}),l(e,i.IVNENTORY_CHARGE_ITEM_CHECKBOX_SELECT,function(){var e=t.getIn(["views","selectList"]),a=t.getIn(["views","selectItem"]),i=n.uuid,o=n.name,l=n.code,u=n.unitList;if(!n.checked&&-1===e.findIndex(function(e){return e===n.uuid})){var c=e.push(n.uuid),s=a.push((0,r.fromJS)({uuid:i,name:o,code:l,unitList:u}));return t.setIn(["views","selectList"],c).setIn(["views","selectItem"],(0,r.fromJS)(s))}if(n.checked){var d=e.splice(e.findIndex(function(e){return e===n.uuid}),1),f=a.splice(e.findIndex(function(e){return e===n.uuid}),1);return t.setIn(["views","selectList"],d).setIn(["views","selectItem"],(0,r.fromJS)(f))}return t}),l(e,i.CHOOSE_ASSIST_UNIFORM,function(){var e=t.getIn(["inventoryCardTemp","financialInfo","assistClassificationList"])||(0,r.fromJS)([]),a=e.map(function(e){return e=n.uuidList.some(function(t){return t===e.get("uuid")})?e.set("isUniform",n.bool):e.set("isUniform",!n.bool)});return t.setIn(["inventoryCardTemp","financialInfo","assistClassificationList"],a)}),l(e,i.EMPTY_WAREHOUSE_LIST_QUANTITY,function(){var e=t.getIn(["inventoryCardTemp","openList"])||(0,r.fromJS)([]),n=function e(t){return t.map(function(t){return t.get("childList")&&t.get("childList").size?t.set("childList",e(t.get("childList"))):t.set("openedQuantity",0)})}(e);return t.setIn(["inventoryCardTemp","openList"],n)}),e)[n.type]||function(){return t})()};var r=n(18),i=o(n(1318));o(n(27)),n(1295);function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=(0,r.fromJS)({views:{insertOrModify:"insert",fromPage:"inventory",standardList:[],customList:[],warehouseList:[],selectedKeys:[],stockList:[],selectList:[],selectItem:[],MemberList:[],thingsList:[],allAssistClassificationList:[],materialSelectedKeys:"all",serialPlaceArr:[],serialList:[],batchList:[]},tags:[],inventoryCardTemp:{code:"",name:"",inventoryNature:5,inventoryAcId:"1405",inventoryAcName:"库存商品",opened:"",remark:"",isAppliedSale:!1,isAppliedPurchase:!1,isAppliedProduce:!1,categoryTypeList:[],contacterInfo:!1,isCheckOut:!1,warehouseList:[],openList:[],isOpenedQuantity:!1,isUniformPrice:!0,unit:{name:"",isStandard:!1,uuid:"",unitList:[]},CurUnit:{},openedQuantity:"",unitPriceList:[{type:1},{type:2}],financialInfo:{assistClassificationList:[],batchList:[]}}})},1471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments[1];return((e={},l(e,r.BEFORE_ADD_PROJECT_CARD,function(){return n.noFresh||(t=t.set("projectCardTemp",(0,a.fromJS)(u.get("projectCardTemp"))).setIn(["views","insertOrModify"],"insert")),n.noCode||(t=t.setIn(["projectCardTemp","code"],n.code)),t=t.set("typeTree",(0,a.fromJS)(n.data)).setIn(["views","fromPage"],"project"),n.data[0].childList.length<=0?t=t.setIn(["projectCardTemp","selectUuid"],n.data[0].uuid).setIn(["projectCardTemp","selectName"],n.data[0].name):n.noFresh&&(t=t.setIn(["projectCardTemp","selectUuid"],"").setIn(["projectCardTemp","selectName"],"")),t}),l(e,r.CHANGE_PROJECT_PROPERTY,function(){return(t=n.data[0].childList.length<=0?t.setIn(["projectCardTemp","selectUuid"],n.data[0].uuid).setIn(["projectCardTemp","selectName"],n.data[0].name):t.setIn(["projectCardTemp","selectUuid"],"").setIn(["projectCardTemp","selectName"],"")).set("typeTree",(0,a.fromJS)(n.data)).setIn(["projectCardTemp","projectPropertyName"],n.projectPropertyName).setIn(["projectCardTemp","projectProperty"],n.projectProperty)}),l(e,r.BEFORE_ADD_PROJECT_CARD_FROM_RUNNING,function(){return t=t.set("projectCardTemp",(0,a.fromJS)(i.projectCardTemp)).setIn(["projectCardTemp","code"],n.code).set("typeTree",(0,a.fromJS)(n.receivedData)).setIn(["views","insertOrModify"],"insert").setIn(["views","fromPage"],"otherPage").setIn(["views","fromPosition"],n.fromPosition).setIn(["projectCardTemp","categoryTypeList",0,"ctgyUuid"],n.ctgyUuid).setIn(["projectCardTemp","projectProperty"],"XZ_LOSS").setIn(["projectCardTemp","projectPropertyName"],"损益项目"),n.receivedData[0].childList.length<=0&&(t=t.setIn(["projectCardTemp","selectUuid"],n.receivedData[0].uuid).setIn(["projectCardTemp","selectName"],n.receivedData[0].name)),t}),l(e,r.BEFORE_EDIT_PROJECT_CARD,function(){return t=t.set("projectCardTemp",(0,a.fromJS)(n.data)).setIn(["views","insertOrModify"],"modify").setIn(["views","fromPage"],"project").set("projectCardTemp",(0,a.fromJS)(n.data)).set("typeTree",(0,a.fromJS)(n.data.categoryTypeList[0].options)).setIn(["projectCardTemp","selectUuid"],n.data.categoryTypeList[0].subordinateUuid).setIn(["projectCardTemp","selectName"],n.data.categoryTypeList[0].subordinateName).setIn(["projectCardTemp","projectPropertyName"],{XZ_LOSS:"损益项目",XZ_PRODUCE:"生产项目",XZ_CONSTRUCTION:"施工项目"}[n.data.projectProperty])}),l(e,r.CHANGE_PROJECT_CARD_CONTENT,function(){return t=t.setIn(["projectCardTemp",n.name],n.value)}),l(e,r.CHANGE_PROJECT_CARD_CATEGORY_TYPE,function(){return t=t.setIn(["projectCardTemp","selectUuid"],n.uuid).setIn(["projectCardTemp","selectName"],n.name)}),l(e,r.SAVE_PROJECT_CARD,function(){return"insertAndNew"===n.flag&&(t=t.setIn(["projectCardTemp","name"],"").setIn(["projectCardTemp","code"],n.code)),t}),l(e,r.NEW_SAVE_PROJECT_CARD,function(){return"insertAndNew"===n.flag&&(t=t.setIn(["projectCardTemp","name"],"").setIn(["projectCardTemp","basicProductOpen"],"").setIn(["projectCardTemp","contractCostOpen"],"").setIn(["projectCardTemp","engineeringSettlementOpen"],"").setIn(["projectCardTemp","contractProfitOpen"],"").setIn(["projectCardTemp","code"],n.code)),t}),e)[n.type]||function(){return t})()};var a=n(18),r=o(n(1302)),i=(o(n(27)),n(1295));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=(0,a.fromJS)({views:{insertOrModify:"insert",fromPage:"project"},typeTree:[],projectCardTemp:{name:"",code:"",selectUuid:"",selectName:"",categoryTypeList:[{ctgyUuid:"",subordinateUuid:""}],projectProperty:"XZ_LOSS",projectPropertyName:"损益项目"}})},1472:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments[1];return((e={},u(e,r.INIT_PROJECT_CONF,function(){return c}),u(e,r.PROJECT_GET_HTIGH_TYPE,function(){return n.list.unshift({uuid:"",name:"全部"}),t=t.set("originTags",(0,a.fromJS)(n.list)).set("views",c.get("views"))}),u(e,r.GET_PROJECT_LIST_AND_TREE,function(){if(t=t.set("cardList",(0,a.fromJS)(n.cardList)).set("typeTree",(0,a.fromJS)(n.treeList)),!0===n.isFresh){var e=t.get("typeTree");t=t.setIn(["views","selectTypeId"],e.getIn([0,"uuid"])).setIn(["views","selectTypeName"],e.getIn([0,"name"]))}return t.set("parentUuid","").setIn(["views","currentPage"],n.currentPage||1).setIn(["views","pageCount"],n.pageCount||1).setIn(["views","searchContent"],n.condition||"")}),u(e,r.CHANGE_ACTIVE_PROJECT_HIGH_TYPE,function(){return t=t.setIn(["views","activeProjectType"],n.name).setIn(["views","activeProjectTypeUuid"],n.uuid).setIn(["views","activeTapKey"],n.name).setIn(["views","activeTapKeyUuid"],n.uuid).setIn(["views","selectTypeId"],"").setIn(["views","selectTypeName"],"").setIn(["views","cardSelectList"],(0,a.fromJS)([])).set("cardList",(0,a.fromJS)(n.cardList)).set("typeTree",(0,a.fromJS)(n.treeList)),n.name!==i.ALL_TAB_NAME_STR&&(t=t.setIn(["views","selectTypeId"],n.treeList[0].uuid).setIn(["views","selectTypeName"],n.treeList[0].name)),t}),u(e,r.CHANGE_PEOJECT_CONF_CARD_USED_STATUS,function(){return t.get("cardList").map(function(e,a){e.get("uuid")===n.uuid&&(t=t.setIn(["cardList",a,"used"],n.used))}),t}),u(e,r.CHANGE_PEOJECT_CONF_CARD_BOX_STATUS,function(){var e=t.get("cardList"),r=t.getIn(["views","cardSelectList"]);return e.find(function(e,a){e.get("uuid")===n.uuid&&(t=t.setIn(["cardList",a,"checked"],n.status))}),n.status?t=t.setIn(["views","cardSelectList"],t.getIn(["views","cardSelectList"]).push((0,a.fromJS)({uuid:n.uuid}))):r.forEach(function(e,a){e.get("uuid")===n.uuid&&(t=t.setIn(["views","cardSelectList"],t.getIn(["views","cardSelectList"]).delete(a)))}),t}),u(e,r.SELECT_PEOJECT_CONF_CARD_ALL,function(){return n.value?(t=t.setIn(["views","cardSelectList"],(0,a.fromJS)([]))).get("cardList").map(function(e,n){t=t.setIn(["cardList",n,"checked"],!1)}):t.get("cardList").map(function(e,n){t=(t=t.setIn(["views","cardSelectList"],t.getIn(["views","cardSelectList"]).push((0,a.fromJS)({uuid:e.get("uuid")})))).setIn(["cardList",n,"checked"],!0)}),t}),u(e,r.DELETE_PROJECT_CONF_CARD,function(){return t=t.set("cardList",(0,a.fromJS)(n.list)).setIn(["views","cardSelectList"],(0,a.fromJS)([])).set("typeTree",(0,a.fromJS)(n.treeList))}),u(e,r.SELECT_PROJECT_CARD_BY_TYPE,function(){return t=t.setIn(["views","selectTypeId"],n.uuid).setIn(["views","parentUuid"],n.parentUuid).setIn(["views","selectTypeName"],n.name).set("cardList",(0,a.fromJS)(n.list)).setIn(["views","currentPage"],n.currentPage||1).setIn(["views","pageCount"],n.pageCount||1).setIn(["views","searchContent"],n.condition||"")}),u(e,r.GET_PROJECT_HIGH_TYPE_ONE,function(){return t=t.set("projectHighTypeTemp",(0,a.fromJS)(n.data)).setIn(["views","activeProjectType"],n.name).setIn(["views","activeProjectTypeUuid"],n.uuid)}),u(e,r.CHANGE_PREJECT_HIGH_TYPE_CONTENT,function(){return t=t.setIn(["projectHighTypeTemp",n.name],n.value)}),u(e,r.SAVE_PROJECT_CARD,function(){return t=t.set("cardList",(0,a.fromJS)(n.cardlist)).set("typeTree",(0,a.fromJS)(n.treeList))}),u(e,r.BEFORE_ADD_PROJECT_CONFIG_CARD_TYPE,function(){var e=t.get("typeTree").toJS();return function e(t){return t.map(function(t){t.checked=!1,t.childList.length&&e(t.childList)})}(e),t=t.set("typeTree",(0,a.fromJS)(e)).set("projectTypeBtnStatus",(0,a.fromJS)(o.projectTypeBtnStatus)).setIn(["views","typeTreeSelectList"],(0,a.fromJS)([])).setIn(["projectTypeBtnStatus","treeUuid"],t.getIn(["typeTree",0,"uuid"])).setIn(["projectTypeTemp","parentUuid"],t.getIn(["typeTree",0,"uuid"]))}),u(e,r.BEFORE_INSERT_PROJECT_CONF_CARD_TYPE,function(){return t=t.set("projectTypeTemp",(0,a.fromJS)(o.projectTypeTemp)).setIn(["projectTypeTemp","parentUuid"],t.getIn(["projectTypeBtnStatus","treeUuid"])).setIn(["projectTypeTemp","parentName"],t.getIn(["projectTypeBtnStatus","treeName"])).setIn(["projectTypeBtnStatus","isAdd"],!0)}),u(e,r.CHANGE_PROJECT_CONF_CARD_TYPE_CONTENT,function(){return t=t.setIn(["projectTypeTemp",n.name],n.value)}),u(e,r.SELECT_PROJECT_CONF_CARD_TYPE,function(){return t=t.setIn(["projectTypeTemp","parentName"],n.parentName).setIn(["projectTypeTemp","parentUuid"],n.parentUuid)}),u(e,r.GET_PROJECT_CONF_TYPE_CONTENT,function(){return t=t.set("projectTypeTemp",(0,a.fromJS)(n.data)).setIn(["projectTypeBtnStatus","isAdd"],!1),n.isAll?t=t.setIn(["projectTypeBtnStatus","isEdit"],!1).setIn(["projectTypeBtnStatus","treeUuid"],n.uuid).setIn(["projectTypeBtnStatus","treeName"],t.getIn(["typeTree",0,"name"])).setIn(["projectTypeBtnStatus","isUp"],!1).setIn(["projectTypeBtnStatus","isDown"],!1):(t=t.setIn(["projectTypeBtnStatus","isEdit"],!0),t=s(t,n.uuid)),t}),u(e,r.CHANGE_PROJECT_CONF_CARD_TYPE_BOX_STATUS,function(){return t=t.setIn(["views","typeTreeSelectList"],(0,a.fromJS)(n.list))}),u(e,r.PROJECT_CONF_DELETE_BTN_SHOW,function(){return t=t.setIn(["projectTypeBtnStatus","isDelete"],!0)}),u(e,r.CONFIRM_DELETE_PROJECT_CONF_TYPE,function(){var e=(t=t.set("typeTree",(0,a.fromJS)(n.data))).getIn(["projectTypeBtnStatus","treeUuid"]),r=!1;return function t(n){return n.map(function(n){n.uuid===e&&(r=!0),n.childList.length>0&&t(n.childList)})}(n.data),t=(t=r?s(t,e):t.set("projectTypeBtnStatus",(0,a.fromJS)(o.projectTypeBtnStatus)).setIn(["projectTypeBtnStatus","treeUuid"],n.data[0].uuid)).setIn(["projectTypeBtnStatus","isDelete"],!1).setIn(["views","typeTreeSelectList"],(0,a.fromJS)([]))}),u(e,r.CHANGE_PROJECT_CONF_TYPE_POSITION,function(){t=t.set("typeTree",(0,a.fromJS)(n.list));var e=void 0;!function t(a){return a.map(function(a){a.uuid!==n.selectedSubordinateUuid?t(a.childList):e=a})}(n.list);var r=t.getIn(["projectTypeBtnStatus","treeUuid"]);return(t=s(t,r)).set("projectTypeTemp",(0,a.fromJS)(e))}),u(e,r.CANCLE_PROJECT_CONF_TYPE_BTN,function(){return t=t.setIn(["projectTypeBtnStatus","isAdd"],!1).setIn(["projectTypeBtnStatus","isDelete"],!1).set("projectTypeTemp",(0,a.fromJS)(n.data)).setIn(["views","typeTreeSelectList"],(0,a.fromJS)([]))}),u(e,r.PROJECT_CONF_TYPE_DELETE_BTN_SHOW,function(){return t=t.setIn(["projectTypeBtnStatus","isDelete"],!0)}),u(e,r.SAVE_PROJECT_CONF_CARD_TYPE,function(){return t=t.set("typeTree",(0,a.fromJS)(n.typeTree)),"new"!=n.btnFlag?t=s(t,n.uuid):(t=t.set("projectTypeTemp",(0,a.fromJS)(n.typeInfo)).setIn(["projectTypeBtnStatus","treeUuid"],n.typeInfo.uuid).setIn(["projectTypeBtnStatus","isAdd"],!1).setIn(["projectTypeBtnStatus","isEdit"],!0),t=s(t,n.typeInfo.uuid)),t}),u(e,r.ADJUST_PROJECT_CONF_CARD_TYPE_LIST,function(){return t=t.set("cardList",(0,a.fromJS)(n.list)).setIn(["views","cardSelectList"],(0,a.fromJS)([]))}),u(e,r.CHANGE_PROJECT_VIEWS_CONTENT,function(){return t=t.setIn(["views",n.name],n.value)}),e)[n.type]||function(){return t})()};var a=n(18),r=l(n(1302)),i=l(n(27)),o=n(1295);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=(0,a.fromJS)({views:{activeTapKey:"全部",activeTapKeyUuid:"",activeProjectType:"",activeProjectTypeUuid:"",activeTreeKeyUuid:"",typeTreeSelectList:[],cardSelectList:[],selectTypeId:"",selectTypeName:"",searchContent:"",regretResultList:[],regretResultIndex:0,usedCardList:[],cardTypeList:[],cardList:[],categoryList:[]},originTags:[],cardList:[],typeTree:[],projectHighTypeTemp:{name:"",commonFee:!1,uuid:""},projectTypeTemp:{name:"",remark:"",parentName:"全部",parentUuid:"",uuid:""},projectTypeBtnStatus:{isAdd:!1,isDelete:!1,treeUuid:"",treeName:"全部",isUp:!1,isDown:!1,upUuid:"",downUuid:"",isEdit:!1,parentUuid:""}});var s=function(e,t){var n=e.get("typeTree").toJS();if(t!=n[0].uuid){var a="",r=[],i="",o="";!function e(n){return n.map(function(n,r){n.uuid===t&&(a=n.name,i=r,o=n.parentUuid),n.childList.length>0&&e(n.childList)})}(n),e=e.setIn(["projectTypeBtnStatus","treeUuid"],t).setIn(["projectTypeBtnStatus","treeName"],a).setIn(["projectTypeBtnStatus","parentUuid"],o||"");!function e(t){return t.map(function(t,n){t.uuid===o&&(r=t.childList),t.childList.length>0&&e(t.childList)})}(n);var l=Number(i)-1,u=Number(i)+1;e=0===i||"未分类"===a?e.setIn(["projectTypeBtnStatus","isUp"],!1).setIn(["projectTypeBtnStatus","upUuid"],""):e.setIn(["projectTypeBtnStatus","isUp"],!0).setIn(["projectTypeBtnStatus","upUuid"],r[l].uuid),e=i===r.length-1||"未分类"===r[u].name?e.setIn(["projectTypeBtnStatus","isDown"],!1).setIn(["projectTypeBtnStatus","downUuid"],""):e.setIn(["projectTypeBtnStatus","isDown"],!0).setIn(["projectTypeBtnStatus","downUuid"],r[u].uuid)}return e}},2772:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=N(n(47)),l=N(n(32)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(51);var c=N(n(1)),s=N(n(0)),d=n(56),f=n(18);n(1418);var p=N(n(1224)),m=I(n(27)),y=N(n(2773)),g=N(n(2777)),E=N(n(2780)),C=N(n(2781)),T=N(n(1374)),h=N(n(2782)),v=N(n(2783)),_=I(n(1241)),S=I(n(1307));function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function N(e){return e&&e.__esModule?e:{default:e}}var O=(0,d.connect)(function(e){return e})((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showHighTypeModal:!1,showCardTypeModal:!1,showCardModal:!1,showAdjustAllCardListModal:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentDidMount",value:function(){this.props.dispatch(S.getInventoryConfigInit())}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.inventoryConfState!==e.inventoryConfState||this.props.inventoryCardState!==e.inventoryCardState||this.props.homeState!==e.homeState||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.inventoryConfState,r=t.homeState,i=t.allState,u=t.inventoryCardState,s=this.state,d=s.showHighTypeModal,f=s.showCardTypeModal,I=s.showCardModal,N=s.showAdjustAllCardListModal,O=i.getIn(["period","closedyear"]),b=r.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]),A=(r.getIn(["data","userInfo","sobInfo","moduleInfo"]),r.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("QUANTITY")>-1),L=r.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("BATCH")>-1,w=r.getIn(["data","userInfo","sobInfo","newJr"]),P=r.getIn(["data","userInfo","moduleInfo","PSI"]),R=r.get("pageList"),M=r.getIn(["views","isSpread"]),j=r.getIn(["views","isPlay"]),D=r.getIn(["views","URL_POSTFIX"]),U=a.get("originTags"),J=a.get("cardList"),k=a.get("importresponlist"),H=a.get("message"),x=a.get("typeTree"),G=a.get("inventoryHighTypeTemp"),B=a.get("inventoryCardTypeTemp"),F=a.get("inventorySettingBtnStatus"),Y=a.get("views"),V=Y.get("activeTapKey"),K=Y.get("searchContent"),W=r.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1,Q=Y.get("activeTapKeyUuid"),z=Y.get("activeInventoryType"),X=(Y.get("activeInventoryTypeUuid"),Y.get("activeTreeKeyUuid"),Y.get("insertOrModify"),Y.get("typeTreeSelectList")),Z=Y.get("cardSelectList"),q=Y.get("selectTypeId"),$=Y.get("selectTypeName"),ee=Y.get("iframeload"),te=Y.get("showMessageMask"),ne=Y.get("curNumber"),ae=Y.get("totalNumber"),re=Y.get("importKey"),ie=Y.get("materialModal"),oe=Y.get("activeUuid"),le=Y.get("currentPage"),ue=Y.get("pageCount"),ce=u.getIn(["views","batchManageModal"]),se=u.getIn(["views","batchList"]),de=u.getIn(["views","batchUuid"]),fe=u.getIn(["views","openShelfLife"]),pe=u.getIn(["views","shelfLife"]),me=m.ALL_TAB_NAME_STR,ye=V===me;return c.default.createElement(p.default,{type:"config-one",className:"inventory-conf"},c.default.createElement(y.default,{dispatch:n,originTags:U,activeTapKey:V,activeTapKeyUuid:Q,isSpread:M,pageList:R,URL_POSTFIX:D,editPermission:b,openHighTypeModal:function(){return e.setState({showHighTypeModal:!0})},openCardModal:function(){return e.setState({showCardModal:!0})},cardSelectList:Z,adjustBtnHide:ye,iframeload:ee,importresponlist:k,showMessageMask:te,curNumber:ne,totalNumber:ae,importKey:re,treeList:x,isPlay:j,logMessage:H,enableWarehouse:W,openQuantity:A,newJr:w,currentPage:le,selectTypeId:q,selectTypeName:$,views:Y,openAdjustAllCardListModal:function(){return e.setState({showAdjustAllCardListModal:!0})}}),c.default.createElement(g.default,{dispatch:n,activeTapKey:V,anotherTabName:me,cardList:J,cardSelectList:Z,editPermission:b,selectTypeId:q,selectTypeName:$,treeList:x,originTags:U,activeTapKeyUuid:Q,showModal:function(){return e.setState({showCardTypeModal:!0})},showCardModal:function(){return e.setState({showCardModal:!0})},searchContent:K,openQuantity:A,BATCH:L,Psi:P,currentPage:le,pageCount:ue}),c.default.createElement(E.default,{editPermission:b,showModal:d,closeModal:function(){return e.setState({showHighTypeModal:!1})},dispatch:n,originTags:U,activeTapKey:V,activeTapKeyUuid:Q,anotherTabName:me,activeInventoryType:z,inventoryHighTypeTemp:G}),c.default.createElement(C.default,{editPermission:b,showModal:f,closeModal:function(){return e.setState({showCardTypeModal:!1})},dispatch:n,inventoryCardTypeTemp:B,typeTreeSelectList:X,inventorySettingBtnStatus:F,activeTapKeyUuid:Q,treeList:x,originTags:U}),I?c.default.createElement(T.default,{isJz:O,showModal:I,closeModal:function(){e.setState({showCardModal:!1}),n(_.initInventoryCard())},dispatch:n,enableWarehouse:W,Psi:P,fromPage:"inventoryConfig",cardList:J,originTags:U}):"",c.default.createElement(h.default,{showModal:N,closeModal:function(){return e.setState({showAdjustAllCardListModal:!1})},cardSelectList:Z,originTags:U,dispatch:n}),c.default.createElement(o.default,{visible:ie,title:"关闭组装",onCancel:function(){n(S.changeViews("materialModal",!1))},footer:[c.default.createElement(l.default,{onClick:function(){n(S.changeViews("materialModal",!1))}},"取消"),c.default.createElement(l.default,{onClick:function(){n(S.changeViews("materialModal",!1)),n(S.modifyInventoryAssemblyStatus(oe,!1))},type:"primary"},"确认关闭")]},c.default.createElement("span",null,"关闭组装后，组装单设置内容会被清空。")),c.default.createElement(v.default,{visible:ce,batchList:se,batchUuid:de,openShelfLife:fe,dispatch:n,shelfLife:pe}))}}]),t}(),r.displayName="InventoryConf",r.propTypes={allState:s.default.instanceOf(f.Map),dispatch:s.default.func},a=i))||a;t.default=O},2773:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=b(n(47)),l=b(n(37)),u=b(n(174)),c=b(n(32)),s=b(n(100)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(38),n(173),n(51),n(99);var f=b(n(1)),p=(b(n(0)),n(18)),m=n(17),y=b(n(1226)),g=n(127),E=b(n(1227)),C=n(52),T=O(n(27)),h=b(n(1598)),v=b(n(2776)),_=O(n(1307)),S=O(n(1241)),I=O(n(43)),N=O(n(60));function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}var A=s.default.Search,L=(0,m.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={adjustModal:!1,cardTypeName:"",cardTypeUuid:"",regretModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),d(t,[{key:"render",value:function(){var e,t,n,a=this,r=this.props,i=r.dispatch,s=r.originTags,d=r.activeTapKey,m=r.activeTapKeyUuid,O=r.isSpread,b=r.pageList,L=r.URL_POSTFIX,w=r.editPermission,P=r.openHighTypeModal,R=r.openCardModal,M=r.cardSelectList,j=r.adjustBtnHide,D=r.iframeload,U=r.importresponlist,J=r.showMessageMask,k=r.curNumber,H=r.totalNumber,x=r.importKey,G=r.treeList,B=r.logMessage,F=r.isPlay,Y=r.enableWarehouse,V=r.openAdjustAllCardListModal,K=r.openQuantity,W=(r.newJr,r.currentPage,r.selectTypeId),Q=r.selectTypeName,z=r.views,X=this.state,Z=X.adjustModal,q=X.cardTypeName,$=X.cardTypeUuid,ee=X.regretModal,te=U.get("failJsonList"),ne=U.get("successJsonList"),ae=U.get("allSize"),re=U.get("errorSize"),ie=U.get("successSize"),oe=(U.get("mediaId"),(0,p.fromJS)({name:d,uuid:m})),le=z.get("cardList"),ue=z.get("regretResultList"),ce=z.get("regretResultIndex"),se=z.get("regretResultKey"),de=z.get("usedCardList"),fe=z.get("cardTypeList"),pe=z.get("regretPages")||1;f.default.createElement("div",null,f.default.createElement("div",null,"存货设置 > Excel导入"),f.default.createElement("div",null,"1.下载模版 > 2.导入Excel > 3.导入完毕"),f.default.createElement("div",{className:"import-mask-tip"},"温馨提示"),f.default.createElement("div",null,"请下载统一的模版，并按相应的格式在Excel软件中填写您的业务数据，然后再导入到系统中(系统将自动读取Excel中的第一个sheet作为导入数据)；"),f.default.createElement("div",{className:"onload"},f.default.createElement("a",{href:"https://www.xfannix.com/utils/template/%E5%AD%98%E8%B4%A7%E8%AE%BE%E7%BD%AE%E5%88%97%E8%A1%A8%E6%A8%A1%E6%9D%BF.xls"},"1.下载模版")));return f.default.createElement(y.default,null,f.default.createElement("div",{className:"flex-title-left flex-title-left-min-width"},O?"":f.default.createElement(E.default,{pageItem:b.get("Config"),onClick:function(e,t,n){i(N.addPageTabPane("ConfigPanes",n,n,t)),i(N.addHomeTabpane(e,n,t))}}),f.default.createElement(g.Tab,{addButton:w,tabList:s.toJS().map(function(e){return{key:e.name,value:e.name,item:e}}),activeKey:d,tabFunc:function(e,t){i(_.changeInventoryActiveHighType((0,p.fromJS)(t),1))},addFunc:function(){i(_.beforeEditInventoryHighType(P))}}),f.default.createElement(A,{style:{height:"28px"},className:"config-search-tree",placeholder:"搜索存货",onSearch:function(e){i("全部"===d?_.refreshInventoryList(oe,1,e):_.getInventoryCardListByType(m,W,Q,1,e))}})),f.default.createElement("div",{className:"flex-title-right"},f.default.createElement(c.default,{className:"title-right",type:"ghost",disabled:!w,onClick:function(){i(S.beforeInventoryAddCard(R,s))}},"新增"),f.default.createElement(c.default,{className:"title-right",type:"ghost",onClick:function(){a.setState({adjustModal:!0,cardTypeName:"",cardTypeUuid:""})},disabled:!(M.size>0&&w),style:{display:j?"none":""}},"调整"),f.default.createElement(c.default,(e={className:"title-right",type:"ghost",disabled:!w,onClick:function(){i(S.deleteInventoryCardList())}},t="disabled",n=!(M.size>0&&w),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),"删除"),f.default.createElement(c.default,{className:"title-right",type:"ghost",onClick:function(){i(_.adjustAllRelativeCardList(V))},style:{display:j?"":"none"},disabled:!(M.size>0&&w)},"调整"),f.default.createElement(v.default,{message:B,dispatch:i,exportDisable:!w||F,iframeload:D,alertStr:"请选择要导入的往来单位文件",failJsonList:te,showMessageMask:J,successJsonList:ne,beforCallback:function(){return i(_.beforeCHImport())},closeCallback:function(){return i(_.closeVcImportContent())},onSubmitCallBack:function(e){return i(_.getFileUploadFetch(e))},onSubmitInitialCallBack:function(e){return i(_.getFileUploadInitialFetch(e))},ddImportCallBack:function(e){return i(_.exportReceiverlist(e))},curNumber:k,totalNumber:H,allSize:ae,errorSize:re,successSize:ie,hrefUrl:C.ROOTPKT+"/data/download/stock/error?"+L,hrefUrlexport:C.ROOTPKT+"/data/download/stock/error?"+L,InitialExporthrefUrl:C.ROOTPKT+"/data/download/stock/open/error?"+L,importKey:x,openQuantity:K,enableWarehouse:Y},f.default.createElement(u.default.Item,{key:"3",disabled:!w},f.default.createElement(g.ExportModal,{style:{color:"rgb(34, 34, 34)"},typeInitial:"stoke",hrefUrlValue:C.ROOTPKT+"/data/export/stock?"+L,hrefUrlInitial:C.ROOTPKT+"/data/export/stock/open?"+L,exportDisable:!w||F,ddCallback:function(e){i(_.exportToNotification(e,"chExport"))},ddInitialCallback:function(e){i(_.exportToNotification(e,"chExportInitial"))},openQuantity:K,enableWarehouse:Y},"导出")),f.default.createElement(u.default.Item,{onClick:function(){a.setState({regretModal:!0}),i(_.getRegretCategoryTree(s.get(0),1))}},f.default.createElement("span",{className:"setting-common-ant-dropdown-menu-item"},"反悔模式"))),f.default.createElement(c.default,{className:"title-right",type:"ghost",onClick:function(){var e=(0,p.fromJS)({name:d,uuid:m});i(_.refreshInventoryList(e)),i(I.closeConfigPage("存货设置"))}},"刷新")),f.default.createElement(o.default,{title:"调整",visible:Z,onCancel:function(){return a.setState({adjustModal:!1})},footer:[f.default.createElement(c.default,{key:"cancel",type:"ghost",onClick:function(){return a.setState({adjustModal:!1})}},"取 消"),f.default.createElement(c.default,{key:"ok",type:"primary",disabled:!w,onClick:function(){if(""===$)l.default.info("请选择调整类别");else{i(_.adjustInventoryCardTyepList(q,$,function(){a.setState({adjustModal:!1})}))}}},"确 定")]},f.default.createElement("div",{className:"jxc-config-card-modal-wrap"},f.default.createElement("div",{className:"jxc-config-card-modal-row"},f.default.createElement("div",{className:"jxc-config-card-modal-item"},f.default.createElement("label",{className:"jxc-config-card-modal-label"},"所属类别："),f.default.createElement("div",{className:"jxc-config-card-modal-input"},f.default.createElement(g.UpperClassSelect,{className:"jxc-config-modal-select",treeData:G,disabled:!1,disabledEnd:!0,treeDefaultExpandAll:!0,value:q,disabledParent:!0,onSelect:function(e){var t=e.split(T.TREE_JOIN_STR),n=t[1],r=t[0];a.setState({cardTypeName:n,cardTypeUuid:r})}})))))),ee?f.default.createElement(h.default,{maskClosable:!1,visible:ee,fromPage:"inventory",categoryList:s,cardList:le,regretPages:pe,onCancel:function(){return a.setState({regretModal:!1})},open:function(){return a.setState({regretModal:!0})},regretResultList:ue,regretResultIndex:ce,regretResultKey:se,usedCardList:de,cardTypeList:fe,downloadResult:function(e){i(_.downloadResult(e))},downloadBefore:function(e){i(_.downloadBefore(e))},changeCategoryFunc:function(e,t,n){i(_.getRegretCategoryTree(e,t,n))},regretFunc:function(e){i(_.regretCode(e))},checkUsed:function(e){i(_.checkUsed(e))}}):"")}}]),t}(),r.displayName="InventoryConfTitle",a=i))||a;t.default=L},2776:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=E(n(47)),i=E(n(132)),o=E(n(182)),l=E(n(32)),u=E(n(176)),c=E(n(14)),s=E(n(174)),d=E(n(37)),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(131),n(181),n(51),n(175),n(78),n(173),n(38);var p=E(n(1)),m=n(17),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(30));n(1240);n(31);var g=n(18);function E(e){return e&&e.__esModule?e:{default:e}}var C=(0,m.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showall:!1,inputContent:"",download:!1,currentPage:1,pageSize:50,exportvalue:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),f(t,[{key:"onSubmit",value:function(){var e=this.refs.fileInput.files;if(0!=e.length){if(0==e[0].size)return d.default.warn("此文件已不存在，请重新选择");var t=new FormData,n=e[0];t.append("file",n),this.props.beforCallback(),this.props.onSubmitCallBack(t)}}},{key:"onSubmitInitial",value:function(){var e=this.refs.fileInput.files;if(0!=e.length){if(0==e[0].size)return d.default.warn("此文件已不存在，请重新选择");var t=new FormData,n=e[0];t.append("file",n),this.props.beforCallback(),this.props.onSubmitInitialCallBack(t)}}},{key:"render",value:function(){var e=this,t=this.props,n=(t.tip,t.alertStr),a=(t.message,t.dispatch,t.iframeload),d=(t.iframeName,t.exportDisable),f=t.failJsonList,m=(t.beforCallback,t.closeCallback),E=t.showMessageMask,C=t.successJsonList,T=t.onClickCallback,h=t.importLogAction,v=t.inputLogAction,_=(t.onSubmitCallBack,t.onSubmitInitialCallBack,t.ddImportCallBack,t.totalNumber),S=t.curNumber,I=t.allSize,N=t.errorSize,O=t.successSize,b=(t.hrefUrl,t.InitialExporthrefUrl),A=t.importKey,L=t.openQuantity,w=t.enableWarehouse,P=(t.hrefUrlexport,this.state),R=P.showall,M=P.inputContent,j=P.download,D=P.currentPage,U=P.pageSize,J=P.exportvalue,k=(_&&(100*S/_).toFixed(2),d?"#ccc":"#222"),H=p.default.createElement(s.default,null,p.default.createElement(s.default.Item,{key:"1",disabled:d},p.default.createElement("span",{className:"export-button-text setting-common-ant-dropdown-menu-item",style:{color:""+k},onClick:function(){d||(T&&T(),h&&h(),e.setState({showall:!R,exportvalue:!0}))}},L||w?"导入存货":"导入")),L||w?p.default.createElement(s.default.Item,{key:"2",disabled:d},p.default.createElement("span",{className:"export-button-text setting-common-ant-dropdown-menu-item",style:{color:""+k},onClick:function(){d||(T&&T(),h&&h(),e.setState({showall:!R,exportvalue:!1}))}},"导入期初值")):"",this.props.children),x=f.concat(C),G=x.slice((D-1)*U,D*U),B=p.default.createElement("div",null,p.default.createElement("div",null,G.map(function(e){return p.default.createElement("div",null,p.default.createElement("span",{className:"import-mask-main-message-item"},e))})));return p.default.createElement("div",{className:"title-right"},p.default.createElement("span",{className:"title-right title-dropdown",style:{margin:0}},p.default.createElement(u.default,{overlay:H},p.default.createElement("span",null,"更多 ",p.default.createElement(c.default,{className:"title-dropdown-icon",type:"down"})))),p.default.createElement("div",{className:"import-mask",style:{display:R?"block":"none"}},p.default.createElement("div",{className:"import-mask-title"},p.default.createElement("span",null,"导入存货"),p.default.createElement(l.default,{className:"import-mask-btn",onClick:function(){T&&T(),e.setState({showall:!R,inputContent:""})}},"返回")),p.default.createElement("div",{className:"import-mask-main"},p.default.createElement("div",{className:"import-mask-content"},p.default.createElement("div",{style:{display:E?"block":"none"},className:"import-mask-main-message"},p.default.createElement(r.default,{visible:E,className:"import-mask-modal",title:"导入结果",footer:[p.default.createElement(l.default,{type:"primary",onClick:function(){a&&(m(),T&&T(),e.setState({showall:!R,inputContent:""}))}},"完成")],onCancel:function(){a&&m()}},p.default.createElement("div",{className:"mask-modal"},p.default.createElement("div",{className:"message-detail-progress"},p.default.createElement(o.default,{percent:a?100:0,size:"small"})),p.default.createElement("div",{className:"import-mask-main-message-btn"},p.default.createElement("textarea",{style:{position:"fixed",left:"-1000px"},ref:"copy",value:(x||(0,g.fromJS)([])).toJS().reduce(function(e,t){return e+(t+"\n")},"")}),p.default.createElement("div",null,"提示信息共",p.default.createElement("p",null,I),"条，成功导入记录",p.default.createElement("p",null,O),"条，错误记录",p.default.createElement("p",null,N),"条"),N?p.default.createElement("span",{className:"import-mask-main-message-onload-send"},p.default.createElement("span",null,"导入失败汇总.xls"),p.default.createElement("a",{className:"export-download",key:"cancel",disabled:j,href:b+"&importKey="+A+"&needDownload=true",download:"导入失败汇总",onClick:function(){e.setState({download:!0}),setTimeout(function(){return e.setState({download:!1})},15e3)}},"立即下载")):""),p.default.createElement("div",{className:"import-mask-main-message-detail"},p.default.createElement("div",null,"提示信息："),a?B:""),p.default.createElement("div",{className:"impot-footer"},p.default.createElement(i.default,{current:D,total:I,pageSize:U,size:"small",onChange:function(t){e.setState({currentPage:t})}}),p.default.createElement(l.default,{type:"primary",className:"import-mask-main-message-copy",onClick:function(){a&&(e.refs.copy&&e.refs.copy.select(),document.execCommand("Copy"),y.Alert("已复制好，可贴粘"))}},"复制提示信息"))))),p.default.createElement("div",null,p.default.createElement("div",null,"操作步骤：1.下载模版 > 2.导入Excel > 3.导入完毕"),L||w?!0===J?p.default.createElement("div",{className:"onload"},p.default.createElement("a",{href:"https://xfn-ddy-website.oss-cn-hangzhou.aliyuncs.com/utils/template/%E5%AD%98%E8%B4%A7%E8%AE%BE%E7%BD%AE%E6%A8%A1%E7%89%88-%E5%90%AF%E7%94%A8%E6%95%B0%E9%87%8F%E4%BB%93%E5%BA%93-%E8%BE%85%E5%8A%A9..xls",className:"download"},p.default.createElement(c.default,{type:"download"}),"下载模版")):p.default.createElement("div",{className:"onload"},p.default.createElement("a",{href:"https://xfn-ddy-website.oss-cn-hangzhou.aliyuncs.com/utils/template/%E5%AD%98%E8%B4%A7%E6%9C%9F%E5%88%9D%E5%80%BC%E6%A8%A1%E7%89%88-%E8%BE%85%E5%8A%A9.xls",className:"download"},p.default.createElement(c.default,{type:"download"}),"下载模版")):p.default.createElement("div",{className:"onload"},p.default.createElement("a",{href:"https://www.xfannix.com/utils/template/%E5%AD%98%E8%B4%A7%E8%AE%BE%E7%BD%AE%E5%88%97%E8%A1%A8%E6%A8%A1%E6%9D%BF.xls",className:"download"},p.default.createElement(c.default,{type:"download"}),"下载模版"))),p.default.createElement("div",null,"请选择要导入的Excel文件："),p.default.createElement("div",{style:{margin:"10px 0"}},p.default.createElement("div",{className:"fileexport"},p.default.createElement("span",{className:"filetext"},M),p.default.createElement("span",{className:"filecontent",onClick:function(){return v&&v()}},p.default.createElement("span",{className:"upload-btn-1"},p.default.createElement(c.default,{type:"upload"}),"选择文件"),p.default.createElement("input",{type:"file",className:"fileinput",name:"pic",ref:"fileInput",accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",value:M,onChange:function(t){e.setState({inputContent:t.target.value})}})),!1===J?M?p.default.createElement("span",{className:"upload-btn-2",onClick:this.onSubmitInitial.bind(this)},"上传Excel"):p.default.createElement("span",{className:"upload-btn-2",onClick:function(){return y.Alert(n)}},"上传Excel"):M?p.default.createElement("span",{className:"upload-btn-2",onClick:this.onSubmit.bind(this)},"上传Excel"):p.default.createElement("span",{className:"upload-btn-2",onClick:function(){return y.Alert(n)}},"上传Excel")),p.default.createElement("div",null,"温馨提示:"),p.default.createElement("div",{className:"upload-tips"},"1.导入模版后，原添加的存货将被覆盖；"),p.default.createElement("div",{className:"upload-tips"},"2.导入数据上限为180行；超过180行，仅导入前180行内容；"),p.default.createElement("div",{className:"upload-tips"},"3.请下载统一的模版，并按相应的格式在Excel软件中填写业务数据，然后再导入到系统中。"))))))}}]),t}())||a;t.default=C},2777:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=m(n(1)),u=(m(n(0)),n(18)),c=n(17),s=n(127),d=m(n(2778)),f=m(n(2779)),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1307));function m(e){return e&&e.__esModule?e:{default:e}}var y=(0,c.immutableRenderDecorator)((i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.editPermission,a=e.activeTapKey,r=e.anotherTabName,i=e.cardList,o=e.cardSelectList,c=e.selectTypeId,m=e.selectTypeName,y=e.treeList,g=e.originTags,E=e.activeTapKeyUuid,C=e.showModal,T=e.showCardModal,h=e.searchContent,v=e.openQuantity,_=e.BATCH,S=e.Psi,I=e.currentPage,N=e.pageCount,O=a===r?_?"inventory-batch":"inventory":_?"inventory-small-batch":"inventory-small",b=a===r?"存货类别":a+"类别",A=v&&S?_?["编码","名称",""+b,"批次","启用组装","启/停用"]:["编码","名称",""+b,"启用组装","启/停用"]:["编码","名称",""+b,"启/停用"],L=v&&S?_?["编码","名称",""+b,"批次","启用组装"]:["编码","名称",""+b,"启用组装"]:["编码","名称",""+b],w=(0,u.fromJS)({name:a,uuid:E}),P=[];o.map(function(e,t){P.push(e.get("uuid"))});var R=i.size>0&&i.every(function(e){return P.indexOf(e.get("uuid"))>-1});return l.default.createElement(s.TableWrap,{notPosition:!0},l.default.createElement(s.TableAll,{type:a===r?"":"running-config-two",newTable:"true"},l.default.createElement(s.TableTitle,{className:O+"-tabel-width",hasCheckbox:!0,titleList:a===r?A:L,onClick:function(){return t(p.selectCardAll(R))},selectAcAll:R}),l.default.createElement(s.TableBody,null,i.filter(function(e){return""===h||(e.get("name").indexOf(h)>-1||e.get("code").indexOf(h)>-1)}).map(function(e,i){return l.default.createElement(d.default,{key:i,line:i+1,item:e,dispatch:t,className:O+"-tabel-width",checked:e.get("checked"),showLastLine:a===r,showCardModal:T,editPermission:n,originTags:g,openQuantity:v,BATCH:_,Psi:S})})),l.default.createElement(s.TablePagination,{currentPage:I,pageCount:N,paginationCallBack:function(e){t("全部"===a?p.refreshInventoryList(w,e):p.getInventoryCardListByType(E,c,m,e))}})),a===r?null:l.default.createElement(f.default,{editPermission:n,dispatch:t,treeList:y,activeTapKeyUuid:E,selectTypeId:c,selectTypeName:m,openCardTypeModal:function(){C(),t(p.beforeAddInventoryCardType(C))}}))}}]),t}(),r.displayName="InventoryConfTable",a=i))||a;t.default=y},2778:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=E(n(1234)),l=E(n(37)),u=E(n(61)),c=E(n(129)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1235),n(38),n(79),n(128);var d=E(n(1)),f=(E(n(0)),n(18),n(17)),p=(g(n(27)),n(127)),m=g(n(1307)),y=g(n(1241));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}var C=(0,f.immutableRenderDecorator)((i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.line,a=e.className,r=e.checked,i=e.dispatch,s=e.showLastLine,f=e.showCardModal,g=e.editPermission,E=e.originTags,C=e.openQuantity,T=e.BATCH,h=e.Psi;t.get("isAppliedPurchase"),t.get("isAppliedSale"),t.get("isAppliedPurchase")&&t.get("isAppliedSale");return d.default.createElement(p.TableItem,{line:n,className:a},d.default.createElement("li",{onClick:function(e){e.stopPropagation(),i(m.changeInventoryCardBoxStatus(e.target.checked,t.get("uuid")))}},d.default.createElement(c.default,{checked:r})),d.default.createElement(p.TableOver,{textAlign:"left",isLink:!0,onClick:function(){i(y.beforeInventoryEditCard(t,f,E,t.get("assemblyState")))}},t.get("code")),d.default.createElement(p.TableOver,{textAlign:"left",isLink:!0,onClick:function(){i(y.beforeInventoryEditCard(t,f,E,t.get("assemblyState")))}},t.get("name")),d.default.createElement("li",null,d.default.createElement("span",null,t.get("belongedCtgy"))),T?t.getIn(["financialInfo","openBatch"])?d.default.createElement("li",null,"已启用",d.default.createElement("span",{class:"batch-li",onClick:function(){i(y.getBatchList(t.get("uuid"))),i(y.changeInventoryCardViews("openShelfLife",t.getIn(["financialInfo","openShelfLife"])))}},"管理",d.default.createElement(p.XfnIcon,{type:"edit-pen"}))):d.default.createElement("li",null):"",C&&h?d.default.createElement("li",{className:"jxc-row-switch",style:{position:"relative"}},d.default.createElement(u.default,{title:"DISABLE"===t.get("assemblyState")?"存货未开启数量核算，不可启用组装":""},d.default.createElement("span",{className:"DISABLE"===t.get("assemblyState")?"hover-disable-area":""})),d.default.createElement("span",{className:"title-category-switch-inventory-no-left"},d.default.createElement(o.default,{className:"use-unuse-style",checked:"OPEN"===t.get("assemblyState")||"INVALID"===t.get("assemblyState"),onChange:function(e){g?i(e?m.modifyInventoryAssemblyStatus(t.get("uuid"),e,function(){i(y.beforeInventoryEditCard(t,f,E,"OPEN",!0))}):m.beforeCloseMaterial(t)):l.default.info("当前角色无该请求权限")},checkedChildren:"INVALID"===t.get("assemblyState")?"失效":"",unCheckedChildren:"INVALID"===t.get("assemblyState")?"失效":"",disabled:"INVALID"===t.get("assemblyState")||"DISABLE"===t.get("assemblyState")}))):null,s?d.default.createElement("li",{className:"jxc-row-switch"},d.default.createElement("span",{className:"title-category-switch-inventory-no-left"},d.default.createElement(o.default,{className:"use-unuse-style",checked:t.get("used"),onChange:function(e){g?i(m.modifyInventoryCardUsedStatus(t.get("uuid"),e)):l.default.info("当前角色无该请求权限")}}))):null)}}]),t}(),r.displayName="InventoryConfItemRow",a=i))||a;t.default=C},2779:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=y(n(14)),l=y(n(45)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78),n(55);var c=y(n(1)),s=(y(n(0)),n(18),n(17)),d=n(127),f=m(n(27)),p=m(n(1307));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var g=(0,s.immutableRenderDecorator)((i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.openCardTypeModal,a=e.editPermission,r=e.treeList,i=[],u=e.activeTapKeyUuid,s=e.selectTypeId,m=e.selectTypeName;return function e(t){return t.forEach(function(t){t.childList.length?(i.push({value:""+t.uuid+f.TREE_JOIN_STR+t.name,name:t.name}),e(t.childList)):i.push({value:""+t.uuid+f.TREE_JOIN_STR+t.name,name:t.name})})}(r.toJS()),c.default.createElement(d.TableTree,null,c.default.createElement("span",null,c.default.createElement(l.default,{showSearch:!0,className:"table-right-table-input input-with-setting",optionFilterProp:"children",placeholder:"搜索类别",notFoundContent:"无法找到相应科目",value:m,onSelect:function(e){var n=e.split(f.TREE_JOIN_STR),a=n[0],r=n[1];t(p.getInventoryCardListByType(u,a,r))},showArrow:!1},i.map(function(e,t){return c.default.createElement(l.default.Option,{key:t,value:e.value},e.name)})),c.default.createElement(o.default,{type:"search",className:"table-right-table-input-search"}),c.default.createElement(o.default,{type:"setting",className:"icon-right-add-type",style:{color:a?"":"#eee"},onClick:function(){return a&&n()}})),c.default.createElement("div",{className:"table-right-tree"},c.default.createElement(d.JxcTree,{dataList:r,currentSelectedKeys:[""+s+f.TREE_JOIN_STR+m],onSelect:function(e){var n="",a="";if(0===e.length)n=s,a=m;else{var r=e[0].split(f.TREE_JOIN_STR);n=r[0],a=r[1]}t(p.getInventoryCardListByType(u,n,a,1))}})))}}]),t}(),r.displayName="InventoryConfTreeContain",a=i))||a;t.default=g},2780:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=v(n(100)),l=v(n(37)),u=v(n(32)),c=v(n(129)),s=v(n(47)),d=v(n(45)),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(99),n(38),n(51),n(128),n(46),n(55);var p=v(n(1)),m=(v(n(0)),n(18)),y=n(17),g=n(22),E=n(127),C=h(n(27)),T=h(n(1307));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}d.default.Option,s.default.confirm,c.default.Group;var _=(0,y.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={deleteModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),f(t,[{key:"render",value:function(){var e,t,n,a=this,r=this.props,i=r.dispatch,c=r.showModal,d=r.closeModal,f=r.editPermission,y=r.originTags,h=(r.activeTapKey,r.activeTapKeyUuid,r.anotherTabName,r.activeInventoryType),v=r.inventoryHighTypeTemp,_=this.state.deleteModal,S=y.delete(0),I=v.get("name"),N=(v.get("isAppliedSale"),v.get("isAppliedPurchase"),v.get("isAppliedProduce"),v.get("isAppliedWater"),v.get("isAppliedInvoicing"),_?{backgroundColor:"rgba(0, 0, 0, 0.2)"}:""),O=S.findIndex(function(e,t){return e.get("name")===I}),b=S.size;return p.default.createElement(s.default,(e={maskStyle:N,visible:c,maskClosable:!1,title:"存货管理",footer:null,onCancel:function(){return d()}},t="footer",n=[p.default.createElement(u.default,{type:"ghost",disabled:""==h||0===O,onClick:function(){var e={preMoveCategoryUuid:S.toJS()[O]?S.toJS()[O].uuid:"",nextMoveCategoryUuid:S.toJS()[O-1]?S.toJS()[O-1].uuid:"",type:"CARD4STUFF"};i(T.adjustCategoryOrder(e))}},"前移"),p.default.createElement(u.default,{type:"ghost",disabled:""==h||O===b-1,onClick:function(){var e={preMoveCategoryUuid:S.toJS()[O+1]?S.toJS()[O+1].uuid:"",nextMoveCategoryUuid:S.toJS()[O]?S.toJS()[O].uuid:"",type:"CARD4STUFF"};i(T.adjustCategoryOrder(e))}},"后移"),p.default.createElement(u.default,{type:"ghost",disabled:!f||""==h,onClick:function(){a.setState({deleteModal:!0})}},"删除"),p.default.createElement(u.default,{type:"ghost",disabled:!f,onClick:function(){if(I!==C.ALL_TAB_NAME_STR){var e=[{type:"topestName",value:I}];g.jxcConfigCheck.beforeSaveCheck(e,function(){return i(T.saveInventoryHighType())})}else l.default.info("类别名称不能为"+C.ALL_TAB_NAME_STR)}},"保存")],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),p.default.createElement("div",{className:"jxc-config-modal-wrap inven-config-modal",style:{overflow:"hidden"}},p.default.createElement("div",{className:"iuManage-top-title-btn"},p.default.createElement("div",{className:"iuManage-high-type-title"},p.default.createElement(E.Tab,{addButton:f,tabList:S.toJS().map(function(e){return{key:e.name,value:e.name,item:e}}),activeKey:h,tabFunc:function(e,t){i(T.changeInventoryModalActiveHighType((0,m.fromJS)(t)))},addFunc:function(){i(T.beforeAddInventoryHighType())},addKey:"plus"}))),p.default.createElement("div",{className:"jxc-manage-content"},p.default.createElement("div",null,p.default.createElement("label",null,"类别名称："),p.default.createElement("span",null,p.default.createElement(o.default,{type:"text",value:I,onFocus:function(e){return e.target.select()},onChange:function(e){return i(T.changeInventoryHighTypeContent("name",e.target.value))}})))),p.default.createElement("div",{className:"modalBomb",style:{display:_?"":"none"}}),p.default.createElement(s.default,{maskStyle:{backgroundColor:"transparent"},title:"删除类别",visible:_,onCancel:function(){return a.setState({deleteModal:!1})},footer:[p.default.createElement(u.default,{key:"cancel",type:"ghost",onClick:function(){return a.setState({deleteModal:!1})}},"取 消"),p.default.createElement(u.default,{key:"ok",type:"primary",disabled:!f,onClick:function(){i(T.deleteInventoryHighType(function(){a.setState({deleteModal:!1})}))}},"确 定")]},"确认删除",h,"类别吗？")))}}]),t}(),r.displayName="InventoryConfAddHypeTypeModal",a=i))||a;t.default=_},2781:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=T(n(47)),l=T(n(32)),u=T(n(100)),c=T(n(129)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(51),n(99),n(128);var d=T(n(1)),f=(T(n(0)),n(18)),p=n(17),m=n(22),y=T(n(1244)),g=n(127),E=(C(n(27)),C(n(1307)));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}c.default.Group;var h=(0,p.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={confirmModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.showModal,r=t.closeModal,i=t.editPermission,c=t.inventoryCardTypeTemp,s=t.typeTreeSelectList,p=t.inventorySettingBtnStatus,C=t.activeTapKeyUuid,T=t.treeList,h=t.originTags,v=this.state.confirmModal,_=function(){return e.setState({confirmModal:!0})},S=function(){return e.setState({confirmModal:!1})},I=c.get("name"),N=(c.get("remark"),c.get("parentName")),O=p.get("treeUuid"),b=(p.get("treeName"),p.get("isDelete")),A=p.get("isAdd"),L=p.get("isEdit"),w=p.get("isUp"),P=p.get("isDown"),R=O===T.getIn(["0","uuid"]),M=(0,f.fromJS)({});return h.map(function(e,t){e.get("uuid")===C&&(M=e)}),d.default.createElement(o.default,{width:"480px",visible:a,maskClosable:!1,title:"编辑类别",onCancel:function(){return r()},footer:null},d.default.createElement("div",{className:"add-card-type-modal-wrap"},d.default.createElement("div",{className:"tree-list-left"},d.default.createElement("div",{className:["tree-box",b?"check-box-not-show":""].join(" ")},d.default.createElement(g.IUTree,{dataList:T,onCheck:function(e){n(E.changeInventoryCardTypeBoxChecked(e))},iuTreeSelectList:s,currentSelectedKeys:[""+O],selectTreeNode:function(e){var t=0===e.length?O:e[0];n(E.getInventoryTypeInfo(t))},isDelete:b})),d.default.createElement("div",{className:"title-box"},d.default.createElement("div",{onClick:function(){i&&n(E.beforeInsertAddInventoryCardType())},style:{display:A||b?"none":""}},"新增"),d.default.createElement("div",{className:w?"":"click-disabled",onClick:function(){i&&w&&n(E.inventoryUpType())},style:{display:A||b?"none":""}},"上移"),d.default.createElement("div",{className:P?"":"click-disabled",onClick:function(){i&&P&&n(E.inventoryDownType())},style:{display:A||b?"none":""}},"下移"),d.default.createElement("div",{onClick:function(){i&&n(E.deleteInventoryType())},style:{display:A||b?"none":""}},"删除"),d.default.createElement("div",{onClick:function(){n(E.cancelDeleteOrAddInventoryType())},style:{display:A||b?"":"none"}},"取消"),d.default.createElement("div",{onClick:function(){i&&n(E.confirmDeleteInventoryType())},style:{display:b?"":"none"}},"确认删除"))),!R||A||L?d.default.createElement("div",{className:"jxc-config-modal-wrap add-card-type-content"},d.default.createElement("div",{className:"jxc-config-modal-item"},d.default.createElement("label",{className:"jxc-config-modal-label min-label"},"名称："),d.default.createElement("div",{className:"jxc-config-modal-input"},d.default.createElement(u.default,{placeholder:y.default.name,type:"text",value:I,onChange:function(e){return n(E.changeInventoryCardTypeContent("name",e.target.value))},onFocus:function(e){return e.target.select()}}))),d.default.createElement("div",{className:"jxc-config-modal-item"},d.default.createElement("label",{className:"jxc-config-modal-label min-label"},"上级类别："),d.default.createElement("div",{className:"jxc-config-modal-input",style:{maxWidth:"159px"}},d.default.createElement(g.UpperClassSelect,{className:"jxc-config-modal-select",treeData:T,disabled:!1,disabledEnd:!0,treeDefaultExpandAll:!0,value:[N],onSelect:function(e){return n(E.changeInventoryCardTypeSelect(e))}}))),d.default.createElement(l.default,{type:"primary",disabled:!i,onClick:function(){var e=[{type:"name",value:I}];m.jxcConfigCheck.beforeSaveCheck(e,function(){return n(E.saveInventoryCardType("edit",_,S))})},style:{display:A?"none":""}},"保存"),d.default.createElement(l.default,{type:"primary",disabled:!i,onClick:function(){var e=[{type:"name",value:I}];m.jxcConfigCheck.beforeSaveCheck(e,function(){return n(E.saveInventoryCardType("new",_,S))})},style:{display:A?"":"none"}},"新增")):d.default.createElement("div",{className:"jxc-config-modal-wrap add-card-type-content"},d.default.createElement("div",{className:"jxc-config-modal-item"},d.default.createElement("label",{className:"jxc-config-modal-label min-label"},"类别名称："),d.default.createElement("div",{className:"jxc-config-modal-input"},M.get("name")))),d.default.createElement("div",{className:"modalBomb",style:{display:v?"":"none"}})))}}]),t}(),r.displayName="InventoryConfAddCardTypeModal",a=i))||a;t.default=h},2782:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=f(n(47)),i=f(n(89)),o=f(n(37)),l=f(n(45)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(88),n(38),n(55);var c=f(n(1)),s=(f(n(0)),n(18),n(17)),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1307));function f(e){return e&&e.__esModule?e:{default:e}}var p=l.default.Option,m=(0,s.immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={value:"add",addTypeList:[],removeTypeList:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.showModal,a=t.closeModal,u=t.cardSelectList,s=t.originTags,f=t.dispatch,m=this.state,y=m.value,g=m.addTypeList,E=m.removeTypeList,C=s.findIndex(function(e,t){return"全部"===e.get("name")}),T=[];C>-1&&(T=s.delete(C));var h={display:"block",height:"40px",lineHeight:"40px"};return c.default.createElement(r.default,{visible:n,onCancel:function(){return a()},title:"调整",onOk:function(){var t=[],n=u.toJS();for(var r in n)t.push(n[r].uuid);var i="add"===y,l="add"===y?g:E;if(0===l.length)o.default.info("请选择所属分类");else{var c={cardUuidList:t,categoryUuidList:l,beInsert:i};f(d.adjustInventoryCardList(c,a)),e.setState({addTypeList:[],removeTypeList:[]})}}},c.default.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},c.default.createElement(i.default.Group,{style:{width:"120px"},onChange:function(t){e.setState({value:t.target.value})},value:y},c.default.createElement(i.default,{style:h,value:"add"},"加入所属分类："),c.default.createElement(i.default,{style:h,value:"remove"},"移出所属分类：")),c.default.createElement("div",null,c.default.createElement("div",{style:{width:"350px",height:"40px",display:"flex",alignItems:"center"}},c.default.createElement(l.default,{mode:"multiple",style:{display:"add"===y?"block":"none",width:"100%"},placeholder:"批量修改卡片的所属分类",value:g,onChange:function(t){e.setState({addTypeList:t,removeTypeList:[]})}},T.map(function(e,t){return c.default.createElement(p,{key:t,value:e.get("uuid")},e.get("name"))}))),c.default.createElement("div",{style:{width:"350px",height:"40px",display:"flex",alignItems:"center"}},c.default.createElement(l.default,{mode:"multiple",style:{display:"remove"===y?"block":"none",width:"100%"},placeholder:"批量修改卡片的所属分类",value:E,onChange:function(t){e.setState({removeTypeList:t,addTypeList:[]})}},T.map(function(e,t){return c.default.createElement(p,{key:t,value:e.get("uuid")},e.get("name"))}))))))}}]),t}())||a;t.default=m},2783:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=T(n(1230)),r=T(n(37)),i=T(n(14)),o=T(n(1234)),l=T(n(129)),u=T(n(32)),c=T(n(100)),s=T(n(47)),d=T(n(171)),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1231),n(38),n(78),n(1235),n(128),n(51),n(99),n(46),n(170);var p=T(n(1));T(n(0)),n(18),n(56);n(1240);C(n(27)),T(n(90));var m=T(n(6)),y=(n(22),T(n(1244)),T(n(1288)),T(n(1363)),T(n(1362))),g=n(127),E=C(n(1241));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}d.default.TreeNode,s.default.confirm;var v=c.default.Search,_=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={orderBy:"BATCH",isAsc:!1,condition:"",curPage:1,modifyBatch:!1,modifyBatchUuid:"",batch:"",modifyBatchDate:"",checkList:[],batchDrop:!1,modifyExpirationDate:""},a.getCurShelfLife=function(e,t){var n=Date.parse(e),a=Date.parse(t);return a>n?Math.floor((a-n)/864e5):null},a.chooseBatchItem=function(e){a.setState({modifyBatch:!0,modifyBatchUuid:e.get("batchUuid"),batch:e.get("batch"),modifyBatchDate:e.get("productionDate"),modifyExpirationDate:e.get("expirationDate"),shelfLife:e.get("shelfLife")})},h(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),f(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.batchList,d=t.batchUuid,f=(t.onClose,t.visible),C=(t.onOk,t.dispatch),T=t.openShelfLife,h=t.shelfLife,_=this.state,S=_.curPage,I=_.condition,N=_.orderBy,O=_.isAsc,b=_.modifyBatch,A=_.modifyBatchUuid,L=_.batch,w=_.modifyBatchDate,P=_.checkList,R=_.batchDrop,M=_.modifyExpirationDate,j=Math.ceil((n.size||1)/100),D=n.every(function(e){return P.some(function(t){return t===e.get("batchUuid")})});return p.default.createElement(s.default,{destroyOnClose:!0,className:"serial-modal",width:"480px",visible:f,maskClosable:!1,title:"批次管理",footer:[p.default.createElement(u.default,{style:P.length?{borderColor:"#fd5458",color:"#fd5458"}:{},disabled:!P.length,onClick:function(){s.default.confirm({title:"提示",content:"确认删除选中的批次号吗？",onOk:function(){C(E.deleteBatch(d,P,S,I,N,O,function(){return e.setState({checkList:[]})}))}})}},"删除")],onCancel:function(){C(E.changeInventoryCardViews("batchManageModal",!1))}},p.default.createElement("div",{className:"bach-manage-modal"},p.default.createElement("div",{style:{marginBottom:"12px"}},p.default.createElement(v,{onSearch:function(t){C(E.getBatchList(d,S,t,N,function(){return e.setState({condition:t})}))},placeholder:"搜索批次",style:{width:"100%"}})),p.default.createElement("div",{className:T?"bach-manage-shelf-list":"bach-manage-list"},p.default.createElement("div",{className:"bach-manage-title"},p.default.createElement("span",null,p.default.createElement(l.default,{checked:D,onChange:function(t){t.target.checked?(n.forEach(function(e){P.every(function(t){return t!==e.get("batchUuid")})&&P.push(e.get("batchUuid"))}),e.setState({checkList:P})):e.setState({checkList:[]})}})),p.default.createElement("span",null,"批次号",p.default.createElement("span",{className:"icon-sort",onClick:function(){C(E.getBatchList(d,S,I,"BATCH","BATCH"===N?!O:O,function(){return e.setState({orderBy:"BATCH",isAsc:"BATCH"===N?!O:O})}))}})),p.default.createElement("span",{style:{display:T?"":"none"}},"生产日期",p.default.createElement("span",{className:"icon-sort",onClick:function(){C(E.getBatchList(d,S,I,"PRODUCTION_DATE","PRODUCTION_DATE"===N?!O:O,function(){return e.setState({orderBy:"PRODUCTION_DATE",isAsc:"PRODUCTION_DATE"===N?!O:O})}))}})),p.default.createElement("span",{style:{display:T?"":"none"}},"截止日期",p.default.createElement("span",{className:"icon-sort",onClick:function(){C(E.getBatchList(d,S,I,"EXPIRATION_DATE","EXPIRATION_DATE"===N?!O:O,function(){return e.setState({orderBy:"EXPIRATION_DATE",isAsc:"EXPIRATION_DATE"===N?!O:O})}))}})),p.default.createElement("span",null,"启/停用",p.default.createElement("span",{className:"icon-sort",onClick:function(){C(E.getBatchList(d,S,I,"CAN_USE","CAN_USE"===N?!O:O,function(){return e.setState({orderBy:"CAN_USE",isAsc:"CAN_USE"===N?!O:O})}))}}))),n.map(function(t,a){return p.default.createElement("div",{key:t.get("batchUuid"),className:"bach-manage-item"},p.default.createElement("span",null,p.default.createElement(l.default,{checked:P.some(function(e){return e===t.get("batchUuid")}),onChange:function(n){n.target.checked?P.push(t.get("batchUuid")):P.splice(P.findIndex(function(e){return e===t.get("batchUuid")}),1),e.setState({checkList:P})}})),p.default.createElement("span",{onClick:function(){e.chooseBatchItem(t)}},t.get("batch")),p.default.createElement("span",{style:{display:T?"":"none"},onClick:function(){e.chooseBatchItem(t)}},t.get("productionDate")),p.default.createElement("span",{style:{display:T?"":"none"},onClick:function(){e.chooseBatchItem(t)}},t.get("expirationDate")),p.default.createElement("span",null,p.default.createElement(o.default,{checked:t.get("canUse"),onChange:function(e){C(E.toggleBatch(d,t.get("batchUuid"),e,S,I,N,O,function(){C(E.changeInventoryCardViews("batchList",n.setIn([a,"canUse"],e)))}))}})))})),p.default.createElement("div",{className:"bach-manage-bottom"},p.default.createElement(u.default,{onClick:function(){e.setState({batchDrop:!0})},type:"primary"},p.default.createElement(i.default,{type:"plus"}),"新增批次"),p.default.createElement(g.TablePagination,{size:"small",currentPage:S,pageCount:j,paginationCallBack:function(t){C(E.getBatchList(d,t,I,N,function(){return e.setState({curPage:t})}))}})),b?p.default.createElement(s.default,{title:"修改批次号",visible:b,onCancel:function(){e.setState({modifyBatch:!1})},onOk:function(){C(E.modifyBatch(L,A,T?w:"",M,d,function(){C(E.getBatchList(d,S,I,N)),e.setState({modifyBatch:!1})}))}},p.default.createElement("div",{className:"batch-modal"},p.default.createElement("div",null,p.default.createElement("span",null,p.default.createElement("span",{style:{color:"red"}},"*"),"批次号："),p.default.createElement("div",null,p.default.createElement(c.default,{value:L,placeholder:"请输入批次号",onChange:function(t){t.preventDefault();/^[0-9a-zA-Z]{0,20}$/.test(t.target.value)?e.setState({batch:t.target.value}):r.default.info("批次只支持输入20位以内的数字或字母")}}))),T?p.default.createElement("div",null,p.default.createElement("span",null,"生产日期："),p.default.createElement("div",null,p.default.createElement(a.default,{allowClear:!1,dropdownClassName:"inventory-are-for-dom",value:(0,m.default)(w),onChange:function(t){var n=t.format("YYYY-MM-DD");e.setState({modifyBatchDate:n})}}))):"",T?p.default.createElement("div",null,p.default.createElement("span",null,p.default.createElement("span",{style:{color:"red"}},"*"),"截止日期"),p.default.createElement("div",null,p.default.createElement(a.default,{allowClear:!1,dropdownClassName:"inventory-are-for-dom",value:M?(0,m.default)(M):"",onChange:function(t){var n=t.format("YYYY-MM-DD");e.setState({modifyExpirationDate:n})}}))):"",T&&(h||w&&M)?p.default.createElement("div",null,p.default.createElement("span",null),p.default.createElement("div",null,"("+(h?"默认保质期："+h+"天 ":"")+(this.getCurShelfLife(w,M)?"实际保质期："+this.getCurShelfLife(w,M)+"天":"")+")")):"")):"",R?p.default.createElement(y.default,{shelfLife:h,visible:R,dispatch:C,uuid:d,openShelfLife:T,close:function(){e.setState({batchDrop:!1})},onOk:function(e,t,n,a){C(E.insertInventoryBatch(e,T?t:"",T?n:"",d,I,N,S,O,a))}}):""))}}]),t}();t.default=_},2784:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments[1];return((e={},u(e,r.INIT_INVENTORY_CONF,function(){return c}),u(e,r.GET_INVENTORY_CONFIG_INIT,function(){return n.title.unshift({name:i.ALL_TAB_NAME_STR,uuid:""}),t=t.set("originTags",(0,a.fromJS)(n.title)).set("cardList",(0,a.fromJS)(n.cardList)).set("views",c.get("views")).setIn(["views","enableWarehouse"],n.enableWarehouse).setIn(["views","pageCount"],n.pageCount)}),u(e,r.CHANGE_ACTIVE_INVENTORY_CONF_HIGH_TYPE,function(){return t=t.setIn(["views","activeInventoryType"],n.name).setIn(["views","activeInventoryTypeUuid"],n.uuid).setIn(["views","activeTapKey"],n.name).setIn(["views","activeTapKeyUuid"],n.uuid).setIn(["views","selectTypeId"],"").setIn(["views","selectTypeName"],"").setIn(["views","cardSelectList"],(0,a.fromJS)([])).setIn(["views","currentPage"],n.currentPage||1).setIn(["views","pageCount"],n.pageCount||1).setIn(["views","searchContent"],n.condition).setIn(["views","enableWarehouse"],n.enableWarehouse||t.getIn(["views","enableWarehouse"])).set("cardList",(0,a.fromJS)(n.cardList)).set("typeTree",(0,a.fromJS)(n.treeList)),n.setDefault&&(t=t.setIn(["views","selectTypeId"],n.treeList[0].uuid).setIn(["views","selectTypeName"],n.treeList[0].name)),t}),u(e,r.CHANGE_INVENTORY_CONF_CARD_USED_STATUS,function(){return t.get("cardList").map(function(e,a){e.get("uuid")===n.uuid&&(t=t.setIn(["cardList",a,"used"],n.used))}),t}),u(e,r.CHANGE_INVENTORY_CONF_ASSEMBLY_STATUS,function(){return t.get("cardList").map(function(e,a){e.get("uuid")===n.uuid&&(t=t.setIn(["cardList",a,"assemblyState"],n.used?"OPEN":"CLOSE"))}),t}),u(e,r.CHANGE_INVENTORY_CONF_CARD_BOX_STATUS,function(){var e=t.get("cardList"),r=t.getIn(["views","cardSelectList"]);return e.find(function(e,a){e.get("uuid")===n.uuid&&(t=t.setIn(["cardList",a,"checked"],n.status))}),n.status?t=t.setIn(["views","cardSelectList"],t.getIn(["views","cardSelectList"]).push((0,a.fromJS)({uuid:n.uuid}))):r.forEach(function(e,a){e.get("uuid")===n.uuid&&(t=t.setIn(["views","cardSelectList"],t.getIn(["views","cardSelectList"]).delete(a)))}),t}),u(e,r.SELECT_INVENTORY_CONF_CARD_ALL,function(){return n.value?(t=t.setIn(["views","cardSelectList"],(0,a.fromJS)([]))).get("cardList").map(function(e,n){t=t.setIn(["cardList",n,"checked"],!1)}):t.get("cardList").map(function(e,n){t=(t=t.setIn(["views","cardSelectList"],t.getIn(["views","cardSelectList"]).push((0,a.fromJS)({uuid:e.get("uuid")})))).setIn(["cardList",n,"checked"],!0)}),t}),u(e,r.DELETE_INVENTORY_CONF_CARD_LIST,function(){return t=t.set("cardList",(0,a.fromJS)(n.list)).setIn(["views","cardSelectList"],(0,a.fromJS)([])).set("typeTree",(0,a.fromJS)(n.treeList))}),u(e,r.SELECT_INVENTORY_CONF_CARD_BY_TYPE,function(){return t=t.setIn(["views","selectTypeId"],n.uuid).setIn(["views","selectTypeName"],n.name).set("cardList",(0,a.fromJS)(n.list)).setIn(["views","currentPage"],n.currentPage||1).setIn(["views","pageCount"],n.pageCount||1).setIn(["views","searchContent"],n.condition)}),u(e,r.GET_INVENTORY_CONF_HIGH_TYPE_LIST,function(){return n.title.unshift({name:i.ALL_TAB_NAME_STR,uuid:""}),t=t.set("originTags",(0,a.fromJS)(n.title))}),u(e,r.BEFORE_EDIT_INVENETORY_HIGH_TYPE,function(){return t=t.set("inventoryHighTypeTemp",(0,a.fromJS)(n.receivedData)).setIn(["views","activeInventoryType"],n.activeName).setIn(["views","activeInventoryTypeUuid"],n.activeUuid)}),u(e,r.BEFORE_INSERT_INVENTORY_CONF_HGIH_TYPE,function(){return t=t.setIn(["views","activeInventoryType"],"plus").setIn(["views","activeInventoryTypeUuid"],"").set("inventoryHighTypeTemp",(0,a.fromJS)(o.inventoryHighTypeTemp))}),u(e,r.CHANGE_INVENTORY_CONF_HIGH_TYPE_CONTENT,function(){return t=t.setIn(["inventoryHighTypeTemp",n.name],n.value)}),u(e,r.AFTER_SAVE_INVENTORYSETTING_CONTENT,function(){return n.title.unshift({name:i.ALL_TAB_NAME_STR,uuid:""}),t=t.set("originTags",(0,a.fromJS)(n.title)),"insert"===n.insertOrModify&&(t=t.set("inventoryHighTypeTemp",(0,a.fromJS)(o.inventoryHighTypeTemp))),t}),u(e,r.DELETE_INVENTORY_CONF_HGIH_TYPE,function(){return n.title.unshift({name:i.ALL_TAB_NAME_STR,uuid:""}),t=t.set("originTags",(0,a.fromJS)(n.title)).setIn(["views","activeInventoryType"],"").setIn(["views","activeInventoryTypeUuid"],"").set("inventoryHighTypeTemp",(0,a.fromJS)(o.inventoryHighTypeTemp))}),u(e,r.DELETE_CURRENT_INVENTORY_CONF_HGIH_TYPE,function(){return n.title.unshift({name:i.ALL_TAB_NAME_STR,uuid:""}),t=t.set("originTags",(0,a.fromJS)(n.title)).set("views",c.get("views").set("activeInventoryType","").set("activeInventoryTypeUuid","")).set("inventoryHighTypeTemp",(0,a.fromJS)(o.inventoryHighTypeTemp)).set("cardList",(0,a.fromJS)(n.cardList)).set("typeTree",(0,a.fromJS)(n.treeList))}),u(e,r.SAVE_INVENTORY_CONF_CARD_INVENTORY,function(){return t}),u(e,r.BEFORE_ADD_INVENTORY_CONF_CARD_TYPE,function(){var e=t.get("typeTree").toJS();return function e(t){return t.map(function(t){t.checked=!1,t.childList.length&&e(t.childList)})}(e),t=t.set("typeTree",(0,a.fromJS)(e)).setIn(["views","typeTreeSelectList"],(0,a.fromJS)([])).set("inventorySettingBtnStatus",(0,a.fromJS)(o.inventorySettingBtnStatus)).setIn(["inventorySettingBtnStatus","treeUuid"],t.getIn(["typeTree",0,"uuid"])).setIn(["inventorySettingBtnStatus","parentUuid"],t.getIn(["typeTree",0,"uuid"]))}),u(e,r.BEFORE_INSERT_INVENTORY_CONF_CARD_TYPE,function(){return t=t.set("inventoryCardTypeTemp",(0,a.fromJS)(o.inventoryCardTypeTemp)).setIn(["inventoryCardTypeTemp","parentUuid"],t.getIn(["inventorySettingBtnStatus","treeUuid"])).setIn(["inventoryCardTypeTemp","parentName"],t.getIn(["inventorySettingBtnStatus","treeName"])).setIn(["inventorySettingBtnStatus","isAdd"],!0)}),u(e,r.CHANGE_INVENTORY_CONF_CARD_TYPE_CONTENT,function(){return t=t.setIn(["inventoryCardTypeTemp",n.name],n.value)}),u(e,r.SELECT_INVENTORY_CONF_CARD_TYPE,function(){return t=t.setIn(["inventoryCardTypeTemp","parentName"],n.parentName).setIn(["inventoryCardTypeTemp","parentUuid"],n.parentUuid)}),u(e,r.GET_INVENTORY_CONF_TYPE_CONTENT,function(){return t=t.set("inventoryCardTypeTemp",(0,a.fromJS)(n.data)).setIn(["inventorySettingBtnStatus","isAdd"],!1),n.isAll?t=t.setIn(["inventorySettingBtnStatus","isEdit"],!1).setIn(["inventorySettingBtnStatus","treeUuid"],n.uuid).setIn(["inventorySettingBtnStatus","treeName"],t.getIn(["typeTree",0,"name"])).setIn(["inventorySettingBtnStatus","isUp"],!1).setIn(["inventorySettingBtnStatus","isDown"],!1):(t=t.setIn(["inventorySettingBtnStatus","isEdit"],!0),t=s(t,n.uuid)),t}),u(e,r.CHANGE_INVENTORY_CONF_CARD_TYPE_BOX_STATUS,function(){return t=t.setIn(["views","typeTreeSelectList"],(0,a.fromJS)(n.list))}),u(e,r.INVENTORY_CONF_TYPE_DELETE_BTN_SHOW,function(){return t=t.setIn(["inventorySettingBtnStatus","isDelete"],!0)}),u(e,r.CONFIRM_DELETE_INVENTORY_CONF_TYPE,function(){var e=(t=t.set("typeTree",(0,a.fromJS)(n.data))).getIn(["inventorySettingBtnStatus","treeUuid"]),r=!1;return function t(n){return n.map(function(n){n.uuid===e&&(r=!0),n.childList.length>0&&t(n.childList)})}(n.data),t=(t=r?s(t,e):t.set("inventorySettingBtnStatus",(0,a.fromJS)(o.inventorySettingBtnStatus)).setIn(["inventorySettingBtnStatus","treeUuid"],n.data[0].uuid)).setIn(["inventorySettingBtnStatus","isDelete"],!1).setIn(["views","typeTreeSelectList"],(0,a.fromJS)([]))}),u(e,r.CHANGE_INVENTORY_CONF_TYPE_POSITION,function(){var e=(t=t.set("typeTree",(0,a.fromJS)(n.list))).getIn(["inventorySettingBtnStatus","treeUuid"]);return t=s(t,e)}),u(e,r.CANCLE_INVENTORY_CONF_TYPE_BTN,function(){return t=t.setIn(["inventorySettingBtnStatus","isAdd"],!1).setIn(["inventorySettingBtnStatus","isDelete"],!1).set("inventoryCardTypeTemp",(0,a.fromJS)(n.data)).setIn(["views","typeTreeSelectList"],(0,a.fromJS)([]))}),u(e,r.INVENTORY_CONF_TYPE_DELETE_BTN_SHOW,function(){return t=t.setIn(["inventorySettingBtnStatus","isDelete"],!0)}),u(e,r.SAVE_INVENTORY_CONF_CARD_TYPE,function(){return t=t.set("typeTree",(0,a.fromJS)(n.typeTree)),"new"!=n.btnFlag?t=s(t,n.uuid):(t=t.set("inventoryCardTypeTemp",(0,a.fromJS)(n.typeInfo)).setIn(["inventorySettingBtnStatus","treeUuid"],n.typeInfo.uuid).setIn(["inventorySettingBtnStatus","isAdd"],!1).setIn(["inventorySettingBtnStatus","isEdit"],!0),t=s(t,n.typeInfo.uuid)),t}),u(e,r.ADJUST_INVENTORY_CONF_CARD_TYPE_LIST,function(){return t=t.set("cardList",(0,a.fromJS)(n.list)).setIn(["views","cardSelectList"],(0,a.fromJS)([]))}),u(e,r.BEFORE_CH_IMPORT,function(){return t.setIn(["views","showMessageMask"],!0)}),u(e,r.CLOSE_CH_IMPORT_CONTENT,function(){return t=t.setIn(["views","showMessageMask"],!1).setIn(["views","iframeload"],!1).setIn(["importresponlist","failJsonList"],(0,a.fromJS)([])).setIn(["importresponlist","successJsonList"],(0,a.fromJS)([])).setIn(["importresponlist","successSize"],0).setIn(["importresponlist","errorSize"],0).setIn(["importresponlist","allSize"],0).set("message","")}),u(e,r.AFTER_CH_IMPORT,function(){return t=n.receivedData.code?t.setIn(["views","iframeload"],!0).set("message",(0,a.fromJS)(n.receivedData.message)):t.set("importresponlist",(0,a.fromJS)(n.receivedData.data)).setIn(["views","iframeload"],!0).set("message",(0,a.fromJS)(n.receivedData.message))}),u(e,r.CHANGE_CH_IMPORT_NUM,function(){return t.setIn(["views",n.name],n.value)}),u(e,r.CHANGE_CH_IMPORT_STATUS,function(){return t.setIn(["views","chImportantStatus"],n.value)}),u(e,r.CHANGE_INVENTORY_CONF_CARD_CONTENT,function(){return t=t.setIn(["views",n.name],n.value)}),u(e,r.ADJUST_CATEGORY_ORDER_INVENTORY,function(){return t=t.set("originTags",(0,a.fromJS)(n.payload))}),e)[n.type]||function(){return t})()};var a=n(18),r=l(n(1318)),i=l(n(27)),o=n(1295);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=(0,a.fromJS)({views:{iframeload:!1,showMessageMask:!1,totalNumber:0,curNumber:0,importKey:"",activeTapKey:"全部",activeTapKeyUuid:"",activeInventoryType:"",activeInventoryTypeUuid:"",activeTreeKeyUuid:"",typeTreeSelectList:[],cardSelectList:[],selectTypeId:"",selectTypeName:"",chImportantStatus:"",searchContent:"",currentPage:1,pageCount:1,regretResultList:[],regretResultIndex:0,usedCardList:[],cardTypeList:[],cardList:[],categoryList:[]},originTags:[],cardList:[],typeTree:[],inventoryHighTypeTemp:{name:"",isAppliedSale:!1,isAppliedPurchase:!1,isAppliedProduce:!1,isAppliedWater:!1,isAppliedInvoicing:!1},inventoryCardTypeTemp:{parentUuid:"",name:"",remark:"",ctgyUuid:"",parentName:"",uuid:""},inventorySettingBtnStatus:{isAdd:!1,isDelete:!1,treeUuid:"",treeName:"全部",isUp:!1,isDown:!1,upUuid:"",downUuid:"",isEdit:!1,parentUuid:""},importresponlist:{failJsonList:[],successJsonList:[],mediaId:""},message:""});var s=function(e,t){var n=e.get("typeTree").toJS();if(t!=n[0].uuid){var a="",r=[],i="",o="";!function e(n){return n.map(function(n,r){n.uuid===t&&(a=n.name,i=r,o=n.parentUuid),n.childList.length>0&&e(n.childList)})}(n),e=e.setIn(["inventorySettingBtnStatus","treeUuid"],t).setIn(["inventorySettingBtnStatus","treeName"],a).setIn(["inventorySettingBtnStatus","parentUuid"],o||"");!function e(t){return t.map(function(t,n){t.uuid===o&&(r=t.childList),t.childList.length>0&&e(t.childList)})}(n);var l=Number(i)-1,u=Number(i)+1;e=0===i||"未分类"===a?e.setIn(["inventorySettingBtnStatus","isUp"],!1).setIn(["inventorySettingBtnStatus","upUuid"],""):e.setIn(["inventorySettingBtnStatus","isUp"],!0).setIn(["inventorySettingBtnStatus","upUuid"],r[l].uuid),e=i===r.length-1||"未分类"===r[u].name?e.setIn(["inventorySettingBtnStatus","isDown"],!1).setIn(["inventorySettingBtnStatus","downUuid"],""):e.setIn(["inventorySettingBtnStatus","isDown"],!0).setIn(["inventorySettingBtnStatus","downUuid"],r[u].uuid)}return e}},2785:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=h(n(1)),u=h(n(0)),c=n(56),s=n(18);n(2786),n(1240);var d=h(n(1224)),f=T(n(27)),p=h(n(2788)),m=h(n(2789)),y=h(n(2792)),g=h(n(2793)),E=h(n(1461)),C=T(n(1317));function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var v=(0,c.connect)(function(e){return e})((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showHighTypeModal:!1,showCardTypeModal:!1,showCardModal:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"componentDidMount",value:function(){this.props.dispatch(C.getProjectConfigInit())}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.projectConfState!==e.projectConfState||this.props.homeState!==e.homeState||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.projectConfState,r=t.homeState,i=t.allState,o=this.state,u=o.showHighTypeModal,c=o.showCardTypeModal,s=o.showCardModal;console.log("ProjectConfindex");var C=r.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]),T=r.getIn(["data","userInfo","sobInfo","moduleInfo"]),h=(T.indexOf("SCXM"),T.indexOf("SGXM"),!!i.getIn(["period","closedyear"])),v=r.get("pageList"),_=r.getIn(["views","isSpread"]),S=r.getIn(["views","isPlay"]),I=(r.getIn(["views","URL_POSTFIX"]),a.get("originTags")),N=a.get("cardList"),O=a.get("typeTree"),b=a.get("projectHighTypeTemp"),A=a.get("projectTypeTemp"),L=a.get("projectTypeBtnStatus"),w=a.get("views"),P=w.get("activeTapKey"),R=w.get("searchContent"),M=w.get("activeTapKeyUuid"),j=w.get("activeProjectType"),D=w.get("activeProjectTypeUuid"),U=(w.get("activeTreeKeyUuid"),w.get("insertOrModify"),w.get("typeTreeSelectList")),J=w.get("cardSelectList"),k=w.get("selectTypeId"),H=w.get("selectTypeName"),x=w.get("parentUuid"),G=w.get("pageCount"),B=w.get("currentPage"),F=f.ALL_TAB_NAME_STR,Y=P===F;return l.default.createElement(d.default,{type:"config-one",className:"project-conf"},l.default.createElement(p.default,{dispatch:n,originTags:I,activeTapKey:P,activeTapKeyUuid:M,isSpread:_,pageList:v,editPermission:C,openHighTypeModal:function(){return e.setState({showHighTypeModal:!0})},openCardModal:function(){return e.setState({showCardModal:!0})},cardSelectList:J,adjustBtnHide:Y,treeList:O,isPlay:S,views:w}),l.default.createElement(m.default,{dispatch:n,activeTapKey:P,anotherTabName:F,cardList:N,cardSelectList:J,editPermission:C,selectTypeId:k,selectTypeName:H,treeList:O,originTags:I,activeTapKeyUuid:M,showModal:function(){return e.setState({showCardTypeModal:!0})},showCardModal:function(){return e.setState({showCardModal:!0})},searchContent:R,parentUuid:x,pageCount:G,currentPage:B}),l.default.createElement(y.default,{editPermission:C,showModal:u,closeModal:function(){return e.setState({showHighTypeModal:!1})},dispatch:n,originTags:I,activeTapKey:P,activeTapKeyUuid:M,anotherTabName:F,activeProjectType:j,activeProjectTypeUuid:D,projectHighTypeTemp:b,isCheckOut:h}),l.default.createElement(g.default,{editPermission:C,showModal:c,closeModal:function(){return e.setState({showCardTypeModal:!1})},dispatch:n,projectTypeTemp:A,typeTreeSelectList:U,projectTypeBtnStatus:L,activeTapKeyUuid:M,treeList:O,originTags:I}),l.default.createElement(E.default,{showModal:s,closeModal:function(){return e.setState({showCardModal:!1})},dispatch:n,originTags:I,moduleInfo:T,fromPage:"projectConfig",cardList:N.filter(function(e){return""===R||(e.get("name").indexOf(R)>-1||e.get("code").indexOf(R)>-1)})}))}}]),t}(),r.displayName="ProjectConf",r.propTypes={allState:u.default.instanceOf(s.Map),dispatch:u.default.func},a=i))||a;t.default=v},2786:function(e,t,n){},2788:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=b(n(47)),l=b(n(37)),u=b(n(176)),c=b(n(14)),s=b(n(174)),d=b(n(32)),f=b(n(100)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(38),n(175),n(78),n(173),n(51),n(99);var m=b(n(1)),y=(b(n(0)),n(18)),g=n(17),E=b(n(1226)),C=n(127),T=b(n(1227)),h=b(n(1598)),v=O(n(27)),_=O(n(1317)),S=O(n(1404)),I=O(n(43)),N=O(n(60));function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}var A=f.default.Search,L=(0,g.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={adjustModal:!1,cardTypeName:"",cardTypeUuid:"",regretModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),p(t,[{key:"render",value:function(){var e,t,n,a=this,r=this.props,i=r.dispatch,f=r.originTags,p=r.activeTapKey,g=r.activeTapKeyUuid,O=r.isSpread,b=r.pageList,L=r.editPermission,w=r.openHighTypeModal,P=r.openCardModal,R=r.cardSelectList,M=r.adjustBtnHide,j=r.treeList,D=(r.isPlay,r.views),U=this.state,J=U.adjustModal,k=U.cardTypeName,H=U.cardTypeUuid,x=U.regretModal,G=D.get("cardList"),B=D.get("regretResultList"),F=D.get("regretResultIndex"),Y=D.get("regretResultKey"),V=D.get("usedCardList"),K=D.get("cardTypeList"),W=D.get("parentUuid"),Q=D.get("searchContent"),z=D.get("selectTypeId"),X=D.get("selectTypeName"),Z=D.get("regretPages")||1,q=D.get("currentPage")||1;return m.default.createElement(E.default,null,m.default.createElement("div",{className:"flex-title-left"},O?"":m.default.createElement(T.default,{pageItem:b.get("Config"),onClick:function(e,t,n){i(N.addPageTabPane("ConfigPanes",n,n,t)),i(N.addHomeTabpane(e,n,t))}}),m.default.createElement(C.Tab,{addButton:L,tabList:f.toJS().map(function(e){return{key:e.name,value:e.name,item:e}}),activeKey:p,tabFunc:function(e,t){i(_.changeProjectActiveHighType((0,y.fromJS)(t)))},addFunc:function(){var e={name:"全部"===p?f.getIn([1,"name"]):p,uuid:g||f.getIn([1,"uuid"])};i(_.getProjectHighTypeOne(e,w))}}),m.default.createElement(A,{className:"config-search-tree",placeholder:"搜索项目",style:{height:"28px"},onSearch:function(e){var t=(0,y.fromJS)({name:p,uuid:g});i(W?_.getProjectCardListByType(W,z,X,q,e):_.refreshProjectList(t,q,e))}})),m.default.createElement("div",{className:"flex-title-right"},m.default.createElement(d.default,{className:"title-right",type:"ghost",disabled:!L,onClick:function(){i(S.beforeProjectAddCard(P,f))}},"新增"),m.default.createElement(d.default,{className:"title-right",type:"ghost",onClick:function(){a.setState({adjustModal:!0,cardTypeName:"",cardTypeUuid:""})},disabled:!(R.size>0&&L),style:{display:M?"none":""}},"调整"),m.default.createElement(d.default,(e={className:"title-right",type:"ghost",disabled:!L,onClick:function(){i(S.deleteProjectCardList())}},t="disabled",n=!(R.size>0&&L),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),"删除"),m.default.createElement("div",{className:"title-right"},m.default.createElement("span",{className:"title-right title-dropdown",style:{margin:0}},m.default.createElement(u.default,{overlay:m.default.createElement(s.default,null,m.default.createElement(s.default.Item,{onClick:function(){a.setState({regretModal:!0}),i(_.getRegretCategoryTree(f.get(0),1))}},m.default.createElement("span",{className:"setting-common-ant-dropdown-menu-item"},"反悔模式")))},m.default.createElement("span",null,"更多 ",m.default.createElement(c.default,{className:"title-dropdown-icon",type:"down"}))))),m.default.createElement(d.default,{className:"title-right",type:"ghost",onClick:function(){var e=(0,y.fromJS)({name:p,uuid:g});i(W?_.getProjectCardListByType(W,z,X,q,Q):_.refreshProjectList(e,q,Q)),i(I.closeConfigPage("项目设置"))}},"刷新")),m.default.createElement(o.default,{title:"调整",visible:J,onCancel:function(){return a.setState({adjustModal:!1})},footer:[m.default.createElement(d.default,{key:"cancel",type:"ghost",onClick:function(){return a.setState({adjustModal:!1})}},"取 消"),m.default.createElement(d.default,{key:"ok",type:"primary",disabled:!L,onClick:function(){if(""===H)l.default.info("请选择调整类别");else{i(_.adjustProjectCardTyepList(k,H,function(){a.setState({adjustModal:!1})}))}}},"确 定")]},m.default.createElement("div",{className:"jxc-config-card-modal-wrap"},m.default.createElement("div",{className:"jxc-config-card-modal-row"},m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},"所属类别："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},m.default.createElement(C.UpperClassSelect,{className:"jxc-config-modal-select",treeData:j,disabled:!1,disabledEnd:!0,treeDefaultExpandAll:!0,value:k,disabledParent:!0,onSelect:function(e){var t=e.split(v.TREE_JOIN_STR),n=t[1],r=t[0];a.setState({cardTypeName:n,cardTypeUuid:r})}})))))),x?m.default.createElement(h.default,{maskClosable:!1,visible:x,fromPage:"inventory",categoryList:f,cardList:G,regretPages:Z,onCancel:function(){return a.setState({regretModal:!1})},open:function(){return a.setState({regretModal:!0})},regretResultList:B,regretResultIndex:F,regretResultKey:Y,usedCardList:V,cardTypeList:K,downloadResult:function(e){i(_.downloadResult(e))},downloadBefore:function(e){i(_.downloadBefore(e))},changeCategoryFunc:function(e,t,n){i(_.getRegretCategoryTree(e,t,n))},regretFunc:function(e){i(_.regretCode(e))},checkUsed:function(e){i(_.checkUsed(e))}}):"")}}]),t}(),r.displayName="ProjectConfTitle",a=i))||a;t.default=L},2789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=m(n(1)),u=(m(n(0)),n(18)),c=n(17),s=n(127),d=m(n(2790)),f=m(n(2791)),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1317));function m(e){return e&&e.__esModule?e:{default:e}}var y=(0,c.immutableRenderDecorator)((i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.editPermission,a=e.activeTapKey,r=e.anotherTabName,i=e.cardList,o=e.cardSelectList,c=e.selectTypeId,m=e.selectTypeName,y=e.treeList,g=e.originTags,E=e.activeTapKeyUuid,C=e.showModal,T=e.showCardModal,h=e.searchContent,v=e.currentPage,_=e.pageCount,S=e.parentUuid,I=a===r?"project":"project-small",N=a===r?"项目性质":a+"类别",O=["编码","名称",""+N,"启/停用"],b=["编码","名称",""+N],A=[];o.map(function(e,t){A.push(e.get("uuid"))});var L=i.size>0&&i.every(function(e){return A.indexOf(e.get("uuid"))>-1});return l.default.createElement(s.TableWrap,{notPosition:!0},l.default.createElement(s.TableAll,{type:a===r?"":"running-config-two",newTable:"true"},l.default.createElement(s.TableTitle,{className:I+"-tabel-width",hasCheckbox:!0,titleList:a===r?O:b,onClick:function(){return t(p.selectProjectCardAll(L))},selectAcAll:L}),l.default.createElement(s.TableBody,null,i.map(function(e,i){return l.default.createElement(d.default,{key:i,line:i+1,item:e,dispatch:t,className:I+"-tabel-width",checked:e.get("checked"),showLastLine:a===r,showCardModal:T,editPermission:n,originTags:g})})),l.default.createElement(s.TablePagination,{currentPage:v,pageCount:_,paginationCallBack:function(e){var n=(0,u.fromJS)({name:a,uuid:E});t(S?p.getProjectCardListByType(S,c,m,e,h):p.refreshProjectList(n,e,h))}})),a===r?null:l.default.createElement(f.default,{editPermission:n,dispatch:t,treeList:y,activeTapKeyUuid:E,selectTypeId:c,selectTypeName:m,openCardTypeModal:function(){C(),t(p.beforeAddProjectCardType(C))}}))}}]),t}(),r.displayName="ProjectConfTable",a=i))||a;t.default=y},2790:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=g(n(1234)),l=g(n(37)),u=g(n(129)),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1235),n(38),n(128);var s=g(n(1)),d=(g(n(0)),n(18),n(17)),f=(y(n(27)),n(127)),p=y(n(1317)),m=y(n(1404));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var E=(0,d.immutableRenderDecorator)((i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),c(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.line,a=e.className,r=e.checked,i=e.dispatch,c=e.showLastLine,d=e.showCardModal,y=e.editPermission,g=e.originTags;t.get("isAppliedPurchase"),t.get("isAppliedSale"),t.get("isAppliedPurchase")&&t.get("isAppliedSale");return s.default.createElement(f.TableItem,{line:n,className:a},s.default.createElement("li",{onClick:function(e){e.stopPropagation(),i(p.changeProjectCardBoxStatus(e.target.checked,t.get("uuid")))}},s.default.createElement(u.default,{checked:r})),s.default.createElement(f.TableOver,{textAlign:"left",isLink:!0,onClick:function(){i(m.beforeEditProjectCard(t,d,g))}},t.get("code")),s.default.createElement(f.TableOver,{textAlign:"left",isLink:!0,onClick:function(){i(m.beforeEditProjectCard(t,d,g))}},t.get("name")),s.default.createElement("li",null,c?s.default.createElement("span",null,t.get("projectPropertyName")):s.default.createElement("span",null,t.get("belongedSubCtgy"))),c?s.default.createElement("li",{className:"jxc-row-switch"},s.default.createElement("span",{className:"title-category-switch-inventory-no-left"},s.default.createElement(o.default,{className:"use-unuse-style",checked:t.get("used"),onChange:function(e){y?i(p.modifyProjectCardUsedStatus(t.get("uuid"),e)):l.default.info("当前角色无该请求权限")}}))):null)}}]),t}(),r.displayName="ProjectConfItemRow",a=i))||a;t.default=E},2791:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=y(n(14)),l=y(n(45)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78),n(55);var c=y(n(1)),s=(y(n(0)),n(18),n(17)),d=n(127),f=m(n(27)),p=m(n(1317));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var g=(0,s.immutableRenderDecorator)((i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.openCardTypeModal,a=e.editPermission,r=e.treeList,i=[],u=e.activeTapKeyUuid,s=e.selectTypeId,m=e.selectTypeName;return function e(t){return t.forEach(function(t){t.childList.length?(i.push({value:""+t.uuid+f.TREE_JOIN_STR+t.name,name:t.name}),e(t.childList)):i.push({value:""+t.uuid+f.TREE_JOIN_STR+t.name,name:t.name})})}(r.toJS()),c.default.createElement(d.TableTree,null,c.default.createElement("span",null,c.default.createElement(l.default,{showSearch:!0,className:"table-right-table-input input-with-setting",optionFilterProp:"children",placeholder:"搜索类别",notFoundContent:"无法找到相应科目",value:m,onSelect:function(e){var n=e.split(f.TREE_JOIN_STR),a=n[0],r=n[1];t(p.getProjectCardListByType(u,a,r))},showArrow:!1},i.map(function(e,t){return c.default.createElement(l.default.Option,{key:t,value:e.value},e.name)})),c.default.createElement(o.default,{type:"search",className:"table-right-table-input-search"}),c.default.createElement(o.default,{type:"setting",className:"icon-right-add-type",style:{color:a?"":"#eee"},onClick:function(){return a&&n()}})),c.default.createElement("div",{className:"table-right-tree"},c.default.createElement(d.JxcTree,{dataList:r,currentSelectedKeys:[""+s+f.TREE_JOIN_STR+m],onSelect:function(e){var n="",a="";if(0===e.length)n=s,a=m;else{var r=e[0].split(f.TREE_JOIN_STR);n=r[0],a=r[1]}t(p.getProjectCardListByType(u,n,a))}})))}}]),t}(),r.displayName="ProjectConfTreeContain",a=i))||a;t.default=g},2792:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=E(n(32)),l=E(n(61)),u=E(n(129)),c=E(n(47)),s=E(n(45)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(51),n(79),n(128),n(46),n(55);var f=E(n(1)),p=(E(n(0)),n(18),n(17)),m=(n(22),n(127)),y=(g(n(27)),g(n(1317)));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}s.default.Option,c.default.confirm,u.default.Group;var C=(0,p.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={deleteModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),d(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.showModal,a=e.closeModal,r=e.editPermission,i=e.originTags,s=(e.activeTapKey,e.activeTapKeyUuid,e.anotherTabName,e.activeProjectType,e.projectHighTypeTemp),d=e.isCheckOut,p=(this.state.deleteModal,s.get("name")),g=i.delete(0),E=s.get("beAssist"),C=s.get("beMake"),T=s.get("beIndirect"),h=s.get("beMechanical"),v=s.get("assistOpen"),_=s.get("makeOpen"),S=s.get("indirectOpen"),I=s.get("mechanicalOpen");return f.default.createElement(c.default,{visible:n,maskClosable:!1,title:"项目管理",footer:null,onCancel:function(){return a()},width:"480px"},f.default.createElement("div",{className:"jxc-config-modal-wrap inven-config-modal",style:{overflow:"hidden"}},f.default.createElement("div",{className:"iuManage-top-title-btn"},f.default.createElement("div",{className:"iuManage-high-type-title"},f.default.createElement(m.Tab,{tabList:g.toJS().map(function(e){return{key:e.name,value:e.name,item:e}}),activeKey:p,tabFunc:function(e,n){var a={name:n.name,uuid:n.uuid};t(y.getProjectHighTypeOne(a))}}))),f.default.createElement("div",{className:"jxc-manage-content"},f.default.createElement("div",null,f.default.createElement("label",null,"类别名称："),f.default.createElement("span",null,p)),f.default.createElement("div",null,f.default.createElement("label",null,"功能："),"损益项目"===p?f.default.createElement("span",null,f.default.createElement("label",null,f.default.createElement(u.default,{checked:s.get("commonFee"),onChange:function(e){t(y.changePrejectHighTypeContent("commonFee",e.target.checked))}}),"  损益公共项目")):"","生产项目"===p?f.default.createElement("span",null,f.default.createElement("label",null,f.default.createElement(u.default,{checked:E,onChange:function(e){t(y.changePrejectHighTypeContent("beAssist",e.target.checked))}}),"  辅助生产成本")):"","生产项目"===p?f.default.createElement("span",null,f.default.createElement("label",null,f.default.createElement(u.default,{checked:C,onChange:function(e){t(y.changePrejectHighTypeContent("beMake",e.target.checked))}}),"  制造费用")):"","施工项目"===p?f.default.createElement("span",null,f.default.createElement("label",null,f.default.createElement(u.default,{checked:T,onChange:function(e){t(y.changePrejectHighTypeContent("beIndirect",e.target.checked))}}),"  间接费用")):"","施工项目"===p?f.default.createElement("span",null,f.default.createElement("label",null,f.default.createElement(u.default,{checked:h,onChange:function(e){t(y.changePrejectHighTypeContent("beMechanical",e.target.checked))}}),"  机械作业")):""),f.default.createElement("div",{className:"qc-content"},E?f.default.createElement("div",null,f.default.createElement("label",null,"辅助生产成本-期初值："),f.default.createElement(l.default,{title:d?"已结账，无法修改期初值":""},f.default.createElement(m.XfInput,{mode:"amount",negativeAllowed:!0,placeholder:"请输入金额",disabled:d,value:v,onChange:function(e){var n=e.target.value;t(y.changePrejectHighTypeContent("assistOpen",n))}}))):"",C?f.default.createElement("div",null,f.default.createElement("label",null,"制造费用-期初值："),f.default.createElement(l.default,{title:d?"已结账，无法修改期初值":""},f.default.createElement(m.XfInput,{mode:"amount",negativeAllowed:!0,placeholder:"请输入金额",disabled:d,value:_,onChange:function(e){var n=e.target.value;t(y.changePrejectHighTypeContent("makeOpen",n))}}))):"",T?f.default.createElement("div",null,f.default.createElement("label",null,"间接费用-期初值："),f.default.createElement(l.default,{title:d?"已结账，无法修改期初值":""},f.default.createElement(m.XfInput,{mode:"amount",negativeAllowed:!0,placeholder:"请输入金额",disabled:d,value:S,onChange:function(e){var n=e.target.value;t(y.changePrejectHighTypeContent("indirectOpen",n))}}))):"",h?f.default.createElement("div",null,f.default.createElement("label",null,"机械作业-期初值："),f.default.createElement(l.default,{title:d?"已结账，无法修改期初值":""},f.default.createElement(m.XfInput,{mode:"amount",negativeAllowed:!0,placeholder:"请输入金额",disabled:d,value:I,onChange:function(e){var n=e.target.value;t(y.changePrejectHighTypeContent("mechanicalOpen",n))}}))):""),f.default.createElement("div",{className:"iuManage-high-type-btn",style:{marginTop:"30px",float:"right"}},f.default.createElement(o.default,{type:"primary",disabled:!r,onClick:function(){t(y.saveProjectHighType(a))}},"保存")))))}}]),t}(),r.displayName="ProjectConfAddHypeTypeModal",a=i))||a;t.default=C},2793:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=T(n(47)),l=T(n(32)),u=T(n(100)),c=T(n(129)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(51),n(99),n(128);var d=T(n(1)),f=(T(n(0)),n(18)),p=n(17),m=n(22),y=T(n(1244)),g=n(127),E=(C(n(27)),C(n(1317)));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}c.default.Group;var h=(0,p.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={confirmModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.showModal,r=t.closeModal,i=t.editPermission,c=t.projectTypeTemp,s=t.typeTreeSelectList,p=t.projectTypeBtnStatus,C=t.activeTapKeyUuid,T=t.treeList,h=t.originTags,v=this.state.confirmModal,_=function(){return e.setState({confirmModal:!0})},S=function(){return e.setState({confirmModal:!1})},I=c.get("name"),N=(c.get("remark"),c.get("parentName")),O=p.get("treeUuid"),b=(p.get("treeName"),p.get("isDelete")),A=p.get("isAdd"),L=p.get("isEdit"),w=p.get("isUp"),P=p.get("isDown"),R=O===T.getIn(["0","uuid"]),M=(0,f.fromJS)({});return h.map(function(e,t){e.get("uuid")===C&&(M=e)}),d.default.createElement(o.default,{width:"480px",visible:a,maskClosable:!1,title:"编辑类别",onCancel:function(){return r()},footer:null},d.default.createElement("div",{className:"add-card-type-modal-wrap"},d.default.createElement("div",{className:"tree-list-left"},d.default.createElement("div",{className:["tree-box",b?"check-box-not-show":""].join(" ")},d.default.createElement(g.IUTree,{dataList:T,onCheck:function(e){n(E.changeProjectCardTypeBoxChecked(e))},iuTreeSelectList:s,currentSelectedKeys:[""+O],selectTreeNode:function(e){var t=0===e.length?O:e[0];n(E.switchProjectType(t))},isDelete:b})),d.default.createElement("div",{className:"title-box"},d.default.createElement("div",{onClick:function(){i&&n(E.beforeInsertProjectConfCardType())},style:{display:A||b?"none":""}},"新增"),d.default.createElement("div",{className:w?"":"click-disabled",onClick:function(){i&&w&&n(E.projectUpType())},style:{display:A||b?"none":""}},"上移"),d.default.createElement("div",{className:P?"":"click-disabled",onClick:function(){i&&P&&n(E.projectDownType())},style:{display:A||b?"none":""}},"下移"),d.default.createElement("div",{onClick:function(){i&&n(E.deleteProjectType())},style:{display:A||b?"none":""}},"删除"),d.default.createElement("div",{onClick:function(){n(E.cancelInsertOrDeleteProjectType())},style:{display:A||b?"":"none"}},"取消"),d.default.createElement("div",{onClick:function(){i&&n(E.confirmDeleteProjectType())},style:{display:b?"":"none"}},"确认删除"))),!R||A||L?d.default.createElement("div",{className:"jxc-config-modal-wrap add-card-type-content"},d.default.createElement("div",{className:"jxc-config-modal-item"},d.default.createElement("label",{className:"jxc-config-modal-label min-label"},"名称："),d.default.createElement("div",{className:"jxc-config-modal-input"},d.default.createElement(u.default,{placeholder:y.default.name,type:"text",value:I,onChange:function(e){return n(E.changeProjectCardTypeContent("name",e.target.value))},onFocus:function(e){return e.target.select()}}))),d.default.createElement("div",{className:"jxc-config-modal-item"},d.default.createElement("label",{className:"jxc-config-modal-label min-label"},"上级类别："),d.default.createElement("div",{className:"jxc-config-modal-input",style:{maxWidth:"159px"}},d.default.createElement(g.UpperClassSelect,{className:"jxc-config-modal-select",treeData:T,disabled:!1,disabledEnd:!0,treeDefaultExpandAll:!0,value:[N],onSelect:function(e){return n(E.changeProjectCardTypeSelect(e))}}))),d.default.createElement(l.default,{type:"primary",disabled:!i,onClick:function(){var e=[{type:"name",value:I}];m.jxcConfigCheck.beforeSaveCheck(e,function(){return n(E.saveProjectCardType("edit",_,S))})},style:{display:A?"none":""}},"保存"),d.default.createElement(l.default,{type:"primary",disabled:!i,onClick:function(){var e=[{type:"name",value:I}];m.jxcConfigCheck.beforeSaveCheck(e,function(){return n(E.saveProjectCardType("new",_,S))})},style:{display:A?"":"none"}},"新增")):d.default.createElement("div",{className:"jxc-config-modal-wrap add-card-type-content"},d.default.createElement("div",{className:"jxc-config-modal-item"},d.default.createElement("label",{className:"jxc-config-modal-label min-label"},"类别名称："),d.default.createElement("div",{className:"jxc-config-modal-input"},M.get("name")))),d.default.createElement("div",{className:"modalBomb",style:{display:v?"":"none"}})))}}]),t}(),r.displayName="ProjectConfAddCardTypeModal",a=i))||a;t.default=h}}]);