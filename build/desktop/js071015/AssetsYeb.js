(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{1158:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=l(n(2186)),r=l(n(2192)),s=l(n(1561));function l(e){return e&&e.__esModule?e:{default:e}}var i={assetsYebState:r.default,assetsMxbState:s.default};t.reducer=i,t.view=a.default},1698:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_ASSETSYEB="INIT_ASSETSYEB",t.GET_DETAIL_ASSETS_FETCH="GET_DETAIL_ASSETS_FETCH",t.CHANGE_ASSETSYEB_CHOOSE_MORE_PERIODS="CHANGE_ASSETSYEB_CHOOSE_MORE_PERIODS",t.CHANGE_DETAILCHILDSHOW="CHANGE_DETAILCHILDSHOW"},2186:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=y(n(32)),s=y(n(37)),l=y(n(129)),i=y(n(45)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(51),n(38),n(128),n(55);var u=y(n(1)),c=n(56),d=S(n(2187)),f=S(n(43)),p=S(n(60)),b=y(n(1227)),m=n(127),h=n(22),E=y(n(2188)),g=n(31),_=y(n(1224)),A=y(n(1226));function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}n(2190);var v=(0,c.connect)(function(e){return e})(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),o(t,[{key:"componentDidMount",value:function(){this.props.dispatch(d.getPeriodAndDetailAssetsFetch()),this.props.assetsYebState.getIn(["flags","chooseperiods"])&&this.props.dispatch(d.changeAssetsYebChooseMorePeriods())}},{key:"shouldComponentUpdate",value:function(e){return this.props.allState!=e.allState||this.props.assetsYebState!=e.assetsYebState||this.props.homeState!=e.homeState}},{key:"render",value:function(){var e=this.props,t=e.assetsYebState,n=e.dispatch,a=e.allState,o=e.homeState,c=o.getIn(["data","userInfo","pageController","BALANCE_DETAIL","preDetailList","ASSETS_BALANCE_STATEMENT","detailList"]),S=o.getIn(["permissionInfo","Report"]),y=a.get("issues"),v=t.get("issuedate"),O=t.get("AssetsMainData"),C=O.get("detailList"),w=t.get("endissuedate"),T=t.getIn(["flags","chooseperiods"]),D=y.findIndex(function(e){return e===v}),P=y.slice(0,D),I=t.getIn(["flags","detailChildShow"]),M=o.get("pageList"),N=o.getIn(["views","isSpread"]),x=o.getIn(["views","URL_POSTFIX"]),L=o.getIn(["views","isPlay"]);return u.default.createElement(_.default,{type:"yeb-one",className:"assests-yeb"},u.default.createElement(A.default,null,u.default.createElement("div",{className:"flex-title-left"},N||M.getIn(["Yeb","pageList"]).size<=1?"":u.default.createElement(b.default,{pageItem:M.get("Yeb"),onClick:function(e,t,a){n(p.addPageTabPane("YebPanes",a,a,t)),n(p.addHomeTabpane(e,a,t))}}),u.default.createElement(i.default,{className:"title-date",value:v,onChange:function(e){return n(d.getDetailAssetsFetch(e,e))}},y.map(function(e,t){return u.default.createElement(Option,{key:t,value:e},e)})),u.default.createElement("span",{className:"title-checkboxtext",onClick:function(){T&&w!==v&&n(d.getDetailAssetsFetch(v,v)),n(d.changeAssetsYebChooseMorePeriods())}},u.default.createElement(l.default,{className:"title-checkbox",checked:T}),u.default.createElement("span",null,"至")),u.default.createElement(i.default,{disabled:!T,className:"title-date",value:w===v?"":w,onChange:function(e){return n(d.getDetailAssetsFetch(v,e))}},P.map(function(e,t){return u.default.createElement(Option,{key:t,value:e},e)}))),u.default.createElement("div",{className:"flex-title-right"},u.default.createElement("span",{className:"title-right title-dropdown"},u.default.createElement(m.Export,{isAdmin:S.getIn(["exportExcel","permission"]),exportDisable:!v||L,excelDownloadUrl:g.ROOT+"/excel/export/AssetsBalance?"+x+"&begin="+(v?""+v.substr(0,4)+v.substr(6,2):"")+"&end="+(w?""+w.substr(0,4)+w.substr(6,2):""),ddExcelCallback:function(e){(0,h.judgePermission)(c.get("EXPORT_BALANCE_EXCEL")).disabled?s.default.info("当前角色无该请求权限"):n(f.allExportReceiverlist(e,"excelAssetsBalance",{begin:""+v.substr(0,4)+v.substr(6,2),end:""+w.substr(0,4)+w.substr(6,2)}))},PDFDownloadUrl:g.ROOT+"/pdf/export/assertsBa?"+x+"&begin="+(v?""+v.substr(0,4)+v.substr(6,2):"")+"&end="+(w?""+w.substr(0,4)+w.substr(6,2):""),ddPDFCallback:function(e){(0,h.judgePermission)(c.get("EXPORT_BALANCE_PDF")).disabled?s.default.info("当前角色无该请求权限"):n(f.allExportReceiverlist(e,"pdfAssetsBa",{begin:""+v.substr(0,4)+v.substr(6,2),end:""+w.substr(0,4)+w.substr(6,2)}))},onErrorSendMsg:function(e,t,a){n(f.sendMessageToDeveloper({title:"导出发送钉钉文件异常",message:"type:"+e+",valueFirst:"+t+",valueSecond:"+a,remark:"资产余额表"}))}})),u.default.createElement(r.default,{className:"title-right refresh-btn",type:"ghost",onClick:function(){n(d.getPeriodAndDetailAssetsFetch(v,w)),n(f.freshYebPage("资产余额表"))}},"刷新"))),u.default.createElement(E.default,{detailList:C,AssetsMainData:O,dispatch:n,detailChildShow:I,AssetsConfigRowClick:function(e){n(d.changeDetailChildShow(e))},issuedate:v,endissuedate:w,chooseperiods:T}))}}]),t}())||a;t.default=v},2187:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeDetailChildShow=t.changeAssetsYebChooseMorePeriods=t.getDetailAssetsFetch=t.getPeriodAndDetailAssetsFetch=void 0;var a,r=u(n(1698)),s=u(n(43)),l=n(22),i=n(31),o=(a=i)&&a.__esModule?a:{default:a};function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.getPeriodAndDetailAssetsFetch=function(e,t){return function(n){n(c(e,t,"true"))}},t.getDetailAssetsFetch=function(e,t){return function(n){n(c(e,t))}};var c=function(e,t,n){return function(a){a({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getDetailAssets","POST",JSON.stringify({begin:e?""+e.substr(0,4)+e.substr(6,2):"",end:t?""+t.substr(0,4)+t.substr(6,2):"",getPeriod:n}),function(i){if((0,l.showMessage)(i)){if("true"==n){var o=a(s.everyTableGetPeriod(i)),u=e||o,c=t||o;a(d(i.data.mainData,u,c))}else a(d(i.data.mainData,e,t));a({type:r.SWITCH_LOADING_MASK})}})}},d=function(e,t,n){return function(a){a({type:r.GET_DETAIL_ASSETS_FETCH,receivedData:e,issuedate:t,endissuedate:n})}};t.changeAssetsYebChooseMorePeriods=function(){return{type:r.CHANGE_ASSETSYEB_CHOOSE_MORE_PERIODS}},t.changeDetailChildShow=function(e){return{type:r.CHANGE_DETAILCHILDSHOW,serialNumber:e}}},2188:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=u(n(1)),l=(n(18),n(17)),i=u(n(2189)),o=n(127);function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,l.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=(e.incomestatement,e.detailList),n=e.AssetsMainData,a=e.dispatch,r=e.AssetsConfigRowClick,l=e.detailChildShow,u=e.issuedate,c=e.endissuedate,d=e.chooseperiods,f=t?t.map(function(e){return e.get("upperAssetsNumber")}):"",p=0;return s.default.createElement(o.TableWrap,{notPosition:!0},s.default.createElement(o.TableAll,null,s.default.createElement(o.TableTitle,{titleList:["编码","类别","原值","期初累计(折/摊)","期初净值","本期(折/摊)","本年累计(折/摊)","期末累计(折/摊)","期末净值"],className:"assests-kmye-table-width assests-kmye-title-width"}),s.default.createElement(o.TableBody,null,(t||[]).map(function(e,t){var n=1===e.get("serialNumber").length||l.indexOf(e.get("serialNumber").substr(0,1))>-1,o=n?++p:"hide";return s.default.createElement(i.default,{className:"assests-kmye-table-width",lrItem:e,key:t,line:o,isShow:n,upperidList:f,AssetsConfigRowClick:r,dispatch:a,issuedate:u,endissuedate:c,chooseperiods:d})}),s.default.createElement(o.TableItem,{className:"assests-kmye-table-width",line:p+1},s.default.createElement("li",null),s.default.createElement("li",null,"本期合计"),s.default.createElement("li",null,s.default.createElement(o.Amount,null,n.get("cardValue"))),s.default.createElement("li",null,s.default.createElement(o.Amount,null,n.get("sumStarDepreciation"))),s.default.createElement("li",null,s.default.createElement(o.Amount,null,n.get("starNetWorth"))),s.default.createElement("li",null,s.default.createElement(o.Amount,null,n.get("currentDepreciation"))),s.default.createElement("li",null,s.default.createElement(o.Amount,null,n.get("yearDepreciation"))),s.default.createElement("li",null,s.default.createElement(o.Amount,null,n.get("sumEndDepreciation"))),s.default.createElement("li",null,s.default.createElement(o.Amount,null,n.get("endNetWorth")))))))}}]),t}())||a;t.default=c},2189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(1),i=(r=l)&&r.__esModule?r:{default:r},o=(n(18),n(17)),u=f(n(60)),c=f(n(1414)),d=n(127);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var p=(0,o.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={arrowDown:!0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.lrItem,a=t.line,r=(t.isShow,t.upperidList),s=t.AssetsConfigRowClick,l=t.dispatch,o=t.issuedate,f=t.endissuedate,p=t.className,b=t.chooseperiods,m=n.get("serialNumber"),h=this.state.arrowDown;return i.default.createElement(d.TableItem,{className:p,line:a,onClick:function(){}},i.default.createElement(d.TableOver,{textAlign:"left",isLink:!0,onClick:function(){sessionStorage.setItem("previousPage","assetsMx"),l(u.addPageTabPane("MxbPanes","AssetsMxb","AssetsMxb","资产明细表")),l(u.addHomeTabpane("Mxb","AssetsMxb","资产明细表")),l(c.getMxListFetch(o,f,m)),l(c.changeAssetsMxbChooseMorePeriods(b))}},m),i.default.createElement(d.ItemTriangle,{onClick:function(t){t.stopPropagation(),s(m),e.setState({arrowDown:!h})},isLink:!0,paddingLeft:1==m.length?"":"14px",showchilditem:!h,showTriangle:r.indexOf(m)>-1,IdOnClick:function(){sessionStorage.setItem("previousPage","assetsMx"),l(u.addPageTabPane("MxbPanes","AssetsMxb","AssetsMxb","资产明细表")),l(u.addHomeTabpane("Mxb","AssetsMxb","资产明细表")),l(c.getMxListFetch(o,f,m)),l(c.changeAssetsMxbChooseMorePeriods(b))},className:r.indexOf(m)>-1?"haveChild":"notHave"},n.get("serialName")),i.default.createElement("li",null,i.default.createElement(d.Amount,null,n.get("cardValue"))),i.default.createElement("li",null,i.default.createElement(d.Amount,null,n.get("sumStarDepreciation"))),i.default.createElement("li",null,i.default.createElement(d.Amount,null,n.get("starNetWorth"))),i.default.createElement("li",null,i.default.createElement(d.Amount,null,n.get("currentDepreciation"))),i.default.createElement("li",null,i.default.createElement(d.Amount,null,n.get("yearDepreciation"))),i.default.createElement("li",null,i.default.createElement(d.Amount,null,n.get("sumEndDepreciation"))),i.default.createElement("li",null,i.default.createElement(d.Amount,null,n.get("endNetWorth"))))}}]),t}())||a;t.default=p},2190:function(e,t,n){},2192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=arguments[1];return((e={},s(e,r.INIT_ASSETSYEB,function(){return l}),s(e,r.GET_DETAIL_ASSETS_FETCH,function(){return t.set("AssetsMainData",(0,a.fromJS)(n.receivedData)).set("issuedate",n.issuedate).set("endissuedate",n.endissuedate)}),s(e,r.CHANGE_ASSETSYEB_CHOOSE_MORE_PERIODS,function(){return t.updateIn(["flags","chooseperiods"],function(e){return!e})}),s(e,r.CHANGE_DETAILCHILDSHOW,function(){var e=t.getIn(["flags","detailChildShow"]);if(-1===e.indexOf(n.serialNumber)){var a=e.push(n.serialNumber);return t.setIn(["flags","detailChildShow"],a)}var r=e.splice(e.findIndex(function(e){return e===n.serialNumber}),1);return t.setIn(["flags","detailChildShow"],r)}),e)[n.type]||function(){return t})()};var a=n(18),r=(n(22),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1698)));function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(0,a.fromJS)({flags:{detailChildShow:[],chooseperiods:!1},assetslist:[],detailList:[],AssetsMainData:{},issuedate:"",endissuedate:""})}}]);