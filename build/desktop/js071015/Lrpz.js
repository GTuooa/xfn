(window.webpackJsonp=window.webpackJsonp||[]).push([[54,2,3,7,24],{1193:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=s(n(2506)),r=s(n(1355)),i=s(n(1588)),o=s(n(1324));function s(e){return e&&e.__esModule?e:{default:e}}var u={lrpzState:r.default,draftState:i.default,filePrintState:o.default};t.reducer=u,t.view=a.default},1239:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitLraccountJzsy=t.deleteSingleFlow=t.jumpCommonCharge=t.changeBeforeAmount=t.getManagerCategoryList=t.insertManagerModal=t.setDefineMadalInitState=t.setInvioceMadalInitState=t.setCarryoverMadalInitState=t.setManageMadalInitState=t.changeCxAccountCommonOutString=t.changeCxAccountCommonString=t.changeCurrentPage=t.jumpCalculateCxToLr=t.getBusinessBeforeSwitch=t.insertlrAccountInvioceDefineModal=t.insertlrAccountInvioceModal=t.insertlrAccountJzsyModal=t.insertlrAccountCarryoverModal=t.insertlrAccountManagerModal=t.getBusinessDefineModal=t.getBusinessInvioceModal=t.calculateGainForJzsy=t.getBusinessJzsyModal=t.getBusinessCarryoverModal=t.getBusinessManagerModal=t.getBusinessPayment=t.beforeRunningPayOrReceive=t.currentPz=t.deleteVcItemFetch=t.getAccountDimensionFetch=t.afterModifyAccountAllList=t.changePzCommonString=t.runningInsertVc=t.deleteAccountItemCardAndRunning=t.accountItemCheckboxCheck=t.accountItemCheckboxCheckAll=t.getBusinessList=t.getPeriodAndBusinessList=t.cxlsDownloadEnclosure=void 0;var a=C(n(37)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(38);var i=E(n(1274)),o=C(n(52)),s=n(18),u=n(22),c=E(n(30)),l=E(n(27)),d=E(n(43)),f=E(n(60)),g=E(n(1243)),_=E(n(1245)),p=E(n(1242)),m=E(n(1229)),A=E(n(1249));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}t.cxlsDownloadEnclosure=function(e,t){return function(n){n(m.lsDownloadEnclosure(e,t))}},t.getPeriodAndBusinessList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"allWater",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(r,s){r({type:i.SWITCH_LOADING_MASK});var c="allWater"==t?"getRunningBusinessList":"getRunning"+t+"List",f=(s().cxlsState,""===a?1:a);(0,o.default)(c,"POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",getPeriod:"true",accountUuid:n,currentPage:f,pageSize:l.CXLS_LIMIE_LENGTH}),function(a){if(r({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)){var o=a.data.periodDtoJson.openedyear+"年第"+a.data.periodDtoJson.openedmonth+"期",s=e||o,c=a.data.periodDtoJson?r(d.everyTableGetIssuedate(a.data.periodDtoJson)):"";r({type:i.GET_BUSINESS_LIST,receivedData:a.data.result.childList,receivedExtra:a.data.result,period:a.data.periodDtoJson,issuedate:s,getPeriod:"true",issues:c,waterType:t,accountUuid:n,currentPage:f,pageCount:a.data.pageCount})}}),r(p.getRunningAccount())}};var T=t.getBusinessList=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",f=arguments.length>6&&void 0!==arguments[6]&&arguments[6],g=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return function(_,p){_({type:i.SWITCH_LOADING_MASK});var m="allWater"==t?"getRunningBusinessList":"getRunning"+t+"List",A=g&&n?n.split(l.TREE_JOIN_STR)[0]:"",E=p().cxlsState,C=""===r?E.get("currentPage"):r,T=c?E.getIn(["flags","searchType"]):"";(0,o.default)(m,"POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",accountUuid:A,getPeriod:"true",orderBy:s,searchType:T,searchContent:c,isAsc:f,currentPage:C,pageSize:l.CXLS_LIMIE_LENGTH,isAccount:g}),function(r){if(_({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(r)){var o=r.data.periodDtoJson?_(d.everyTableGetIssuedate(r.data.periodDtoJson)):"";_({type:i.GET_BUSINESS_LIST,receivedData:r.data.result.childList,receivedExtra:r.data.result,period:r.data.periodDtoJson,issuedate:e,issues:o,waterType:t,accountUuid:n,currentPage:C,isAsc:f,orderBy:s,isAccount:g,pageCount:r.data.pageCount,getPeriod:"true"}),r.data.result.msg&&a.default.info(r.data.result.msg)}})}},v=(t.accountItemCheckboxCheckAll=function(e,t){return{type:i.CXLS_ITEM_CHECKBOX_CHECK_ALL,selectAll:e,list:t}},t.accountItemCheckboxCheck=function(e,t){return{type:i.CXLS_ITEM_CHECKBOX_CHECK,checked:e,item:t}},t.deleteAccountItemCardAndRunning=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2];return function(r,s){var l=n||s().cxlsState.getIn(["flags","selectList"]),d="reality"==e?"payment":"business",f=s().cxlsState,g=f.getIn(["flags","issuedate"]),_=f.getIn(["flags","mainWater"]),p=f.getIn(["flags","isAsc"]),m=f.getIn(["flags","isAccount"]),A=f.getIn(["flags","curAccountUuid"]);c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&(r({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunning"+d,"POST",JSON.stringify({deleteList:l}),function(e){if((0,u.showMessage)(e)){if(e.message)if(e.data.errorList.length){var n=e.data.errorList.join(",");a.default.error(n)}else a.default.success(e.message);r(T(g,_,A,"","",t,p,m))}r({type:i.SWITCH_LOADING_MASK})}))}})}},t.runningInsertVc=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments[4],c=arguments[5],l=arguments[6],d=arguments[7];return function(f,_){var p=_().cxlsState,m=p.get("currentPage"),A=p.getIn(["flags","mainWater"]),E=p.getIn(["flags","curAccountUuid"]),C=p.getIn(["flags","isAsc"]),y=p.getIn(["flags","isAccount"]),I=0;f(v(["flags","pzDealNum"],I)),f(v(["flags","pzDealType"],"insert"));var h=e.sort(function(e,t){return parseInt(e.get("flowNumber"))-parseInt(t.get("flowNumber"))});if(e&&e.size>1)f(v(["flags","pzDealStatus"],!0)),function e(i){var s=0,c=setInterval(function(){s<.9?f(v(["flags","pzDealNum"],I+(s+=.01))):(clearInterval(c),f(v(["flags","pzDealNum"],I)))},100);(0,o.default)("insertRunning"+t+"Vc","POST",JSON.stringify({uuidList:[i]}),function(t){if((0,u.showMessage)(t))if(t.message)if(t.data.result.length){var i=t.data.result.join(",");a.default.error(i),clearInterval(c),f(v(["flags","pzDealStatus"],!1)),f(T(n,A,E,m,"",r,C,y))}else f(v(["flags","pzDealNum"],I+=1)),I<h.size?(clearInterval(c),e(h.getIn([I,"uuid"]))):(clearInterval(c),f(v(["flags","pzDealStatus"],!1)),f(T(n,A,E,m,"",r,C,y)));else clearInterval(c),f(v(["flags","pzDealStatus"],!1));else clearInterval(c),f(v(["flags","pzDealStatus"],!1)),f(T(n,A,E,m,"",r,C,y))})}(h.getIn([0,"uuid"]));else{var N=e.getIn([0,"uuid"]);f({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertRunning"+t+"Vc","POST",JSON.stringify({uuidList:[N]}),function(e){if(f({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&e.message){if(e.data.result.length){var t=e.data.result.join(",");a.default.error(t)}else a.default.success(e.message);c&&c()||f(S()),s&&f(g.getYllsBusinessData(l,d))}})}}},t.changePzCommonString=function(e,t){return function(n){n({type:i.CHANGE_PZ_COMMON_STRING,name:e,value:t})}}),S=t.afterModifyAccountAllList=function(e){return function(t,n){var a=n().cxlsState,r=a.getIn(["flags","issuedate"]),s=a.getIn(["flags","mainWater"]),c=a.getIn(["flags","curAccountUuid"]),f=a.getIn(["flags","isAccount"]),g=a.getIn(["flags","isAsc"]),_=a.get("currentPage"),p="allWater"==s?"getRunningBusinessList":"getRunning"+s+"List",m=f&&c?c.split(l.TREE_JOIN_STR)[0]:"";t({type:i.SWITCH_LOADING_MASK}),(0,o.default)(p,"POST",JSON.stringify({year:r?r.substr(0,4):"",month:r?r.substr(6,2):"",accountUuid:m,getPeriod:"true",orderBy:"",isAsc:g,currentPage:_,pageSize:l.CXLS_LIMIE_LENGTH,isAccount:f}),function(n){if(t({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)){var a=n.data.periodDtoJson?t(d.everyTableGetIssuedate(n.data.periodDtoJson)):"";t({type:i.GET_BUSINESS_LIST,receivedData:n.data.result.childList,receivedExtra:n.data.result,period:n.data.periodDtoJson,issuedate:r,issues:a,isReflash:e,waterType:s,isAccount:f,accountUuid:c,currentPage:_,isAsc:g,pageCount:n.data.pageCount,getPeriod:"true"})}})}},y=(t.getAccountDimensionFetch=function(e,t,n,a,r,i,o){return function(s){s(y(e,t,n,a,r,i,o))}},function(e,t,n,a,r,s,c,l){return function(e){(0,o.default)("getRunningSettingInfo","GET","",function(t){(0,u.showMessage)(t)&&e({type:i.GET_CXLSCONF_ALL_SETTINGS,receivedData:t.data})})}}),I=(t.deleteVcItemFetch=function(e,t,n,a,r,s,c,l,d){return function(f,_){var p=_().cxlsState,m=p.get("currentPage"),A=p.getIn(["flags","mainWater"]),E=p.getIn(["flags","isAccount"]),C=p.getIn(["flags","isAsc"]),y=p.getIn(["flags","curAccountUuid"]),I=0;f(v(["flags","pzDealNum"],I)),f(v(["flags","pzDealType"],"delete"));n&&n.length>1?(f(v(["flags","pzDealStatus"],!0)),function i(s){var c=0,l=setInterval(function(){c<.99?f(v(["flags","pzDealNum"],I+(c+=.01))):(clearInterval(l),f(v(["flags","pzDealNum"],I+.99)))},100);(0,o.default)("deletevc","POST",JSON.stringify({year:e,month:t,vcindexlist:[s]}),function(e){(0,u.showMessage)(e,"show")?(I+=1,f(v(["flags","pzDealNum"],Math.floor(I))),I<n.length?(clearInterval(l),i(n[I])):(clearInterval(l),f(v(["flags","pzDealStatus"],!1)),f(T(a,A,y,m,"",r,C,E)))):(clearInterval(l),f(v(["flags","pzDealStatus"],!1)),f(T(a,A,y,m,"",r,C,E)))})}(n[0])):(f({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deletevc","POST",JSON.stringify({year:e,month:t,vcindexlist:n}),function(e){if(f({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e,"show")){var t=_().cxlsState;t.get("currentPage"),t.getIn(["flags","mainWater"]),t.getIn(["flags","curAccountUuid"]),t.getIn(["flags","isAsc"]),t.getIn(["flags","isAccount"]);c&&c()||f(S()),s&&f(g.getYllsBusinessData(l,d))}}))}},t.currentPz=function(e,t,n){return{type:i.SET_CURRENT_PZ,year:e,month:t,vcIndexList:n}},t.beforeRunningPayOrReceive=function(e,t,n,a,r){return function(o){n<0&&(n=-n,e="收"===e?"付":"收"),o({type:i.BEFORE_RUNNING_PAY_OR_RECEIVE,payDirection:e,assList:t,notHandleAmount:n,uuidList:a,runningList:r})}},t.getBusinessPayment=function(e,t,n){return function(a){a({type:i.SWITCH_LOADING_MASK});var r=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+r,function(r){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(r)){var o=r.data.result,s=void 0,c=o.assList;if(c&&c.length)s=c[0].assId+" "+c[0].assName;else{var l=o.acList;s=l.length?l[0].acFullName:""}a({type:i.INIT_PAYMENT_STATE,item:e,result:o,assName:s,stateType:t,uuidList:n,fromCxls:!0}),a(m.getRunningSettingInfo()),a(m.accountTotalAmount()),a(f.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),a(f.addHomeTabpane("Edit","LrAccount","录入流水"))}})}}),h=(t.getBusinessManagerModal=function(e,t,n){return function(a,r){a({type:i.SWITCH_LOADING_MASK});var c=e.get("uuid"),l=e.get("beOpened"),d=e.get("assType"),f=r().lrCalculateState,g=f.getIn(["calculateTemp","usedCard"]),_=f.getIn(["calculateTemp","cardUuid"]);(0,o.default)("getRunningBusiness","GET","uuid="+c,function(e){a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(a(N("runningFlowTemp",(0,s.fromJS)(e.data.result))),a(N(["runningFlowTemp","magenerType"],n)),a(N(["modalTemp","uuidList"],(0,s.fromJS)([{uuid:c,assType:d}]))),a(N(["modalTemp","handlingAmount"],e.data.result.notHandleAmount)),a(N(["modalTemp","runningAbstract"],e.data.result.runningAbstract)),a(N(["modalTemp","beOpened"],l)),a(N(["modalTemp","assType"],d)),l&&(a(N(["modalTemp","usedCard"],g)),a(N(["modalTemp","cardUuid"],_)),a(L(0,d))),t())})}},t.getBusinessCarryoverModal=function(e,t,n){return function(n){n({type:i.SWITCH_LOADING_MASK});var a=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var a=e.data.result;n(N("runningFlowTemp",(0,s.fromJS)(e.data.result))),n(N(["modalTemp","uuidList"],(0,s.fromJS)([a.uuid]))),n(N(["modalTemp","runningState"],a.runningState)),n(N(["modalTemp","categoryUuid"],a.categoryUuid)),n(N(["modalTemp","runningAbstract"],a.runningAbstract)),n(N(["modalTemp","stockCardList"],a.acBusinessIncome.stockCardList)),t()}})}},t.getBusinessJzsyModal=function(e,t,n){return function(n,a){n({type:i.SWITCH_LOADING_MASK});var c=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+c,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var c=e.data.result;if(n(N("runningFlowTemp",(0,s.fromJS)(e.data.result))),n(N(["modalTemp","uuidList"],(0,s.fromJS)([c.uuid]))),n(N(["modalTemp","runningState"],c.runningState)),n(N(["modalTemp","categoryUuid"],c.categoryUuid)),n(N(["modalTemp","runningAbstract"],c.runningAbstract)),n(N(["modalTemp","amount"],c.amount-c.tax)),n(N(["modalTemp","businessList"],(0,s.fromJS)(r({},e.data.result,{beSelect:!0})))),e.data.result.beProject){var l=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]),d=e.data.result.projectRange;(0,o.default)("getProjectCardList","POST",JSON.stringify({sobId:l,categoryList:d,needCommonCard:!1}),function(e){(0,u.showMessage)(e)&&n(N(["flags","projectList"],(0,s.fromJS)(e.data.result)))})}t()}})}},t.calculateGainForJzsy=function(){return function(e,t){var n=t().cxlsState,a=n.get("modalTemp"),r=n.get("runningFlowTemp"),o=r.get("amount")-r.get("tax"),s=a.getIn(["acAssets","depreciationAmount"])?a.getIn(["acAssets","depreciationAmount"]):0,u=a.getIn(["acAssets","originalAssetsAmount"])?a.getIn(["acAssets","originalAssetsAmount"]):0;console.log(s,u);var c=(Number(u)-Number(s)).toFixed(2),l=Math.abs(c-o).toFixed(2),d=void 0,f=void 0;Number(c)<=o?(d=["modalTemp","netProfitAmount"],f=["modalTemp","lossAmount"]):(d=["modalTemp","lossAmount"],f=["modalTemp","netProfitAmount"]),(u||s)&&e({type:i.CXLS_CALCULATE_GAIN_OR_LOSS,deletePlace:f,place:d,diff:l})}},t.getBusinessInvioceModal=function(e,t,n){return function(n){n({type:i.SWITCH_LOADING_MASK});var a=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var a=e.data.result,r={STATE_YYSR_TS:"BILL_MAKE_OUT_TYPE_TS",STATE_YYSR_XS:"BILL_MAKE_OUT_TYPE_XS"}[a.runningState];n(N(["modalTemp","uuidList"],(0,s.fromJS)([a.uuid]))),n(N(["modalTemp","categoryUuid"],a.categoryUuid)),n(N(["modalTemp","runningAbstract"],a.runningAbstract)),n(N(["modalTemp","billMakeOutType"],r)),t()}})}},t.getBusinessDefineModal=function(e,t,n){return function(n){n({type:i.SWITCH_LOADING_MASK});var a=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var a=e.data.result,r={STATE_YYZC_GJ:"BILL_AUTH_TYPE_CG",STATE_YYZC_TG:"BILL_AUTH_TYPE_TG"}[a.runningState]||"BILL_AUTH_TYPE_CG";n(N(["modalTemp","uuidList"],(0,s.fromJS)([a.uuid]))),n(N(["modalTemp","runningAbstract"],a.runningAbstract)),n(N(["modalTemp","categoryUuid"],a.categoryUuid)),n(N(["modalTemp","billAuthType"],r)),t()}})}},t.insertlrAccountManagerModal=function(e,t,n){return function(a,r){var c=r().cxlsState,l=c.get("runningFlowTemp"),d=c.get("modalTemp"),f=d.get("runningDate"),g=d.get("runningAbstract"),_=d.get("accountUuid"),p=d.get("handlingAmount"),m=d.get("beOpened"),A=d.get("uuidList").toJS(),E=m?d.get("cardUuid"):l.getIn([t,"contactsCardRange","uuid"]);a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertRunningpayment","POST",JSON.stringify({runningDate:f,runningAbstract:g,accountUuid:_,amount:p,uuidList:A,cardUuid:E,uuid:""}),function(t){a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(t)&&(e(),a(N("modalTemp",(0,s.fromJS)({runningDate:(0,u.formatDate)()}))),a("fromcalCultion"===n?b():S()))})}},t.insertlrAccountCarryoverModal=function(e,t){return function(n,a){var r=a().cxlsState.get("modalTemp"),c=r.get("uuidList"),l=r.get("runningState"),d=r.get("runningDate"),f=r.get("runningAbstract"),g=r.get("stockCardList"),_=r.get("carryoverAmount"),p=[];g&&g.map(function(e){p.push({uuid:e.uuid,amount:_})}),n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertCarryoverItem","POST",JSON.stringify({uuidList:c,runningState:l,runningDate:d,cardList:p,runningAbstract:f}),function(a){(0,u.showMessage)(a,"show")&&(e(),n(N("modalTemp",(0,s.fromJS)({runningDate:(0,u.formatDate)()}))),n("fromcalCultion"===t?b():S())),n({type:i.SWITCH_LOADING_MASK})})}},t.insertlrAccountJzsyModal=function(e,t){return function(n,a){var c=a().cxlsState.get("modalTemp").toJS();n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertAssetsCleaning","POST",JSON.stringify(r({},c)),function(a){(0,u.showMessage)(a,"show")&&(e(),n(N("modalTemp",(0,s.fromJS)({runningDate:(0,u.formatDate)()}))),n("fromcalCultion"===t?b():S())),n({type:i.SWITCH_LOADING_MASK})})}},t.insertlrAccountInvioceModal=function(e,t){return function(n,a){var r=a().cxlsState.get("modalTemp");n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertBusinessMakeoutItem","POST",JSON.stringify(r),function(a){(0,u.showMessage)(a,"show")&&(e(),n(N("modalTemp",(0,s.fromJS)({runningDate:(0,u.formatDate)()}))),n("fromcalCultion"===t?b():S())),n({type:i.SWITCH_LOADING_MASK})})}},t.insertlrAccountInvioceDefineModal=function(e,t){return function(n,a){var r=a().cxlsState.get("modalTemp");n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertBusinessAuthItem","POST",JSON.stringify(r),function(a){(0,u.showMessage)(a,"show")&&(e(),n(N("modalTemp",(0,s.fromJS)({runningDate:(0,u.formatDate)()}))),n("fromcalCultion"===t?b():S())),n({type:i.SWITCH_LOADING_MASK})})}},t.getBusinessBeforeSwitch=function(e,t){return function(n){var a=e.get("parentUuid")?e.get("parentUuid"):e.get("uuid"),r=e.get("beBusiness"),i=e.get("runningState");n(r||"STATE_ZZ"===i?"STATE_YYSR_JZCB"===i?h(e,"modify","LB_JZCB"):"STATE_FPRZ_CG"===i||"STATE_FPRZ_TG"===i?h(e,"modify","LB_FPRZ"):"STATE_KJFP_XS"===i||"STATE_KJFP_TS"===i?h(e,"modify","LB_KJFP"):"STATE_ZCWJZZS"===i?h(e,"modify","LB_ZCWJZZS"):"STATE_ZZ"===i?h(e,"modify","LB_ZZ"):"STATE_CQZC_ZJTX"===i?h(e,"modify","LB_ZJTX"):"STATE_GGFYFT"===i?O(e,t):"STATE_CQZC_JZSY"===i?m.getInitLraccountJzsy(e,t):_.getRunningBusinessDuty("",a):I(e))}},t.jumpCalculateCxToLr=function(e,t,n,a){return function(r,s){r({type:i.SWITCH_LOADING_MASK});var c=e.get("parentUuid")?e.get("parentUuid"):e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+c,function(s){(0,u.showMessage)(s)?(0,o.default)("getRunningSettingInfo","GET","",function(o){if((0,u.showMessage)(s)){var c={LB_JZCB:function(){return"COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS"},LB_FPRZ:function(){return"INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS"},LB_KJFP:function(){return"INVOICING_FROM_CXLS_JUMP_TO_LRLS"},LB_ZCWJZZS:function(){return"TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS"},LB_ZZ:function(){return"TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ"},LB_ZJTX:function(){return"TRANSFER_OUT_FROM_CXLS_JUMP_TO_ZJTX"}}[n]();r({type:i.GET_ACCOUNTCONF_ALL_SETTINGS,receivedData:o.data}),r({type:i.CALCULATE_FROM_CXLS_JUMP_TO_LRLS,pageType:n,rate:o.data.rate,hideCategoryList:o.data.hideCategoryList}),r({type:i.CALCULATE_CHANGE_QUERY}),r({type:i[c],item:e,receivedData:s.data,insertOrModify:t,fromRefresh:!0,rate:o.data.rate,hideCategoryList:o.data.hideCategoryList,uuidList:a}),r({type:i.SWITCH_LOADING_MASK}),r(f.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),r(f.addHomeTabpane("Edit","LrAccount","录入流水"))}else r({type:i.SWITCH_LOADING_MASK})}):r({type:i.SWITCH_LOADING_MASK})})}}),N=(t.changeCurrentPage=function(e,t){return function(n){n({type:i.CHANGE_CURRENT_PAGE_FZHE,assList:e,value:t})}},t.changeCxAccountCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t));"flags"===t[0]&&(r=t),a({type:i.CHANGE_CX_ACCOUNT_COMMON_STRING,tab:e,placeArr:r,value:n})}},t.changeCxAccountCommonOutString=function(e,t){return function(n){n("string"==typeof e?{type:i.CHANGE_CX_ACCOUNT_COMMON_STRING,place:e,value:t}:{type:i.CHANGE_CX_ACCOUNT_COMMON_STRING,placeArr:e,value:t})}}),L=(t.setManageMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["payManageList","childList"]),r=(n.getIn(["flags","selectDate"]),n.getIn(["flags","selectList"])),i=n.getIn(["calculateTemp","cardUuid"]),o=n.getIn(["calculateTemp","usedCard"]),u=[],c=0;r.forEach(function(e){var t=a.find(function(t){return t.get("uuid")===e}),n=t.get("direction"),r=t.get("flowType"),i=t.get("assType");u.push({uuid:e,assType:i});var o=t.get("notHandleAmount"),s=t.get("runningState");"STATE_YYSR_TS"!==s&&"STATE_YYZC_TG"!==s||(o=-Math.abs(o)),"debit"===n?"FLOW_INADVANCE"===r?c-=Number(o):c+=Number(o):"FLOW_INADVANCE"===r?c+=Number(o):c-=Number(o)}),e(N(["modalTemp","uuidList"],(0,s.fromJS)(u))),e(N(["modalTemp","handlingAmount"],c)),e(N(["modalTemp","cardUuid"],i)),e(N(["modalTemp","usedCard"],o))}},t.setCarryoverMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["calculateTemp","stockUuid"]),i=n.getIn(["flags","costTransferType"]);e(N(["modalTemp","uuidList"],a)),e(N(["modalTemp","runningState"],i)),e(N(["modalTemp","cardList"],(0,s.fromJS)([{uuid:r,amount:""}])))}},t.setInvioceMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["flags","invoicingType"]);e(N(["modalTemp","uuidList"],a)),e(N(["modalTemp","billMakeOutType"],r))}},t.setDefineMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["flags","certifiedType"]);e(N(["modalTemp","uuidList"],a)),e(N(["modalTemp","billAuthType"],r))}},t.insertManagerModal=function(e){return function(t,n){var a=n().cxlsState.get("modalTemp"),r=a.get("runningDate"),c=a.get("runningAbstract"),l=a.get("accountUuid"),d=a.get("cardUuid"),f=a.get("handlingAmount")?Math.abs(a.get("handlingAmount")):0,g=a.get("uuidList").toJS();t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertRunningpayment","POST",JSON.stringify({runningDate:r,runningAbstract:c,accountUuid:l,amount:f,uuidList:g,cardUuid:d,uuid:""}),function(n){t({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)&&(e(),t(N("modalTemp",(0,s.fromJS)({runningDate:(0,u.formatDate)(),uuidList:[]}))),t(b()))})}},t.getManagerCategoryList=function(e,t){return function(n){(0,o.default)("getManagerCategoryList","POST",JSON.stringify({assType:t}),function(t){n(N(["flags","managerCategoryList",e],(0,s.fromJS)(t.data)))})}}),O=(t.changeBeforeAmount=function(e,t,n){return function(a,r){t.split(l.TREE_JOIN_STR)[0];var i=t.split(l.TREE_JOIN_STR)[1],o=t.split(l.TREE_JOIN_STR)[2],u=e.get("uuid");a(N(["modalTemp","uuidList",n],(0,s.fromJS)({beOpened:!0,categoryUuid:o,uuid:u,categoryName:i})))}},t.jumpCommonCharge=function(e,t){return function(n){var a=e.get("uuid");n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&n({type:i.INIT_COMMON_CHARGE_FROM_CXLS,data:e.data.result,uuidList:t,uuid:a}),n(m.getRunningSettingInfo()),n(f.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),n(f.addHomeTabpane("Edit","LrAccount","录入流水"))})}}),b=function(){return function(e,t){var n=t().calculationState,a=n.get("flags"),r=n.getIn(["calculateTemp","cardUuid"]),i=n.getIn(["calculateTemp","stockUuid"]),o=a.get("issuedate"),s=a.get("curCategory"),u=a.get("isCheck"),c=a.get("accountingType"),l=n.get("certificationList"),d=n.get("invoicingList"),f=l.get("billAuthType"),g=d.get("billMakeOutType"),_=n.getIn(["costTransferList","runningState"]);switch(c){case"manages":e(A.getCalculateList(o,c,"",s,r,u,""));break;case"invoicing":e(A.getCalculateInvoicingList(o,s,g,""));break;case"certification":e(A.getCalculateCertificationList(o,s,f,""));break;case"costTransfer":e(A.getCalculateCarryoverList(o,_,"","",i))}}};t.deleteSingleFlow=function(e,t){return function(n){var r=[e];c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&(n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunningbusiness","POST",JSON.stringify({deleteList:r}),function(e){if((0,u.showMessage)(e)){if(e.message)if(e.data.errorList.length){var r=e.data.errorList.join(",");a.default.error(r)}else a.default.success(e.message);!e.data.errorList.length&&t()}n({type:i.SWITCH_LOADING_MASK})}))}})}},t.getInitLraccountJzsy=function(e,t){return function(n){var a=e.get("uuid");n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(n({type:i.INIT_JZSY_FROM_CXLS,data:e.data.result,uuidList:t,uuid:a}),e.data.result.beProject&&n(m.getJzsyProjectCardList(e.data.result.projectRange))),n(m.getRunningSettingInfo()),n(f.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),n(f.addHomeTabpane("Edit","LrAccount","录入流水")),n(m.calculateGainForJzsy())})}}},1242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveRegretMessage=t.changeRegretCancle=t.changeRegretAccountCommonString=t.changeRegretAccountAccountName=t.getRegretCategory=t.changeItemDisableStatus=t.disabledCategory=t.enabledCategory=t.swapRunningItem=t.emptyAccountCheck=t.changeDefaultAccount=t.changeCardCheckboxArrOut=t.changeCardCheckboxArr=t.changeAccountConfcCheckboxArr=t.deleteAccountConfAccount=t.deleteAccountConfRunning=t.saveAccountConfTaxRate=t.saveAccountConfAccount=t.saveAccountConfRunningCategory=t.changeAccountConfAccountNumber=t.selectAccountConfMultipleAc=t.selectAccountConfAllAc=t.changeAccountConfRunningCategory=t.changeAccountConfCommonFlagsString=t.changeAccountConfCommonString=t.selectAccountConfUpperCategory=t.accountConfTaxRateSettingScale=t.selectOrUnselectAccountAll=t.accountconfAccountCheckboxCheck=t.accountconfRunningCheckboxCheck=t.accountConfRunningTriangleSwitch=t.closeAccountconfModal=t.beforeModifyaccountConfRunning=t.beforeModifyaccountConfRunningOld=t.beforeInsertAccountConf=t.changeAccountConfCurrentPage=t.getRunningTaxRate=t.getRunningAccount=t.getRunningCategory=void 0;var a=d(n(37)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(38);var i=l(n(1273)),o=d(n(52)),s=n(22),u=l(n(30)),c=n(18);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.getRunningCategory=function(){return function(e){e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getRunningCategory","GET","",function(t){e({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(t)&&e({type:i.GET_RUNNING_CATEGORY,receivedData:t.data})})}},t.getRunningAccount=function(){return function(e){(0,o.default)("getRunningAccount","GET","",function(t){(0,s.showMessage)(t)&&e({type:i.GET_RUNNING_ACCOUNT,receivedData:t.data})})}};var g=t.getRunningTaxRate=function(){return function(e){(0,o.default)("getRunningTaxRate","GET","",function(t){(0,s.showMessage)(t)&&e({type:i.GET_RUNNING_TAX_RATE,receivedData:t.data})})}},_=(t.changeAccountConfCurrentPage=function(e){return{type:i.CHANGE_ACCOUNTCONF_CURRENTPAGE,currentPage:e}},t.beforeInsertAccountConf=function(e,t,n){return function(a){if(t){var r=t.get("uuid");"running"===e?(a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getRunningDetail","GET","uuid="+r,function(r){if(a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(r)){var o=r.data.result;a({type:i.BEFORE_INSERT_ACCOUNTCONF,currentPage:e,item:t,data:o,insertFrom:n})}})):a({type:i.BEFORE_INSERT_ACCOUNTCONF,currentPage:e,item:t,insertFrom:n})}else a({type:i.BEFORE_INSERT_ACCOUNTCONF,currentPage:e,item:t,insertFrom:n})}}),p=(t.beforeModifyaccountConfRunningOld=function(e,t,n){return{type:i.BEFORE_MODIFY_ACCOUNTCONF_RUNNING_OLD,currentPage:e,item:t,old:n}},t.beforeModifyaccountConfRunning=function(e,t){return function(n){var a=t.get("uuid");(0,o.default)("getRunningDetail","GET","uuid="+a,function(a){if((0,s.showMessage)(a)){var r=a.data.result;n({type:i.BEFORE_MODIFY_ACCOUNTCONF_RUNNING_OLD,currentPage:e,name:r,item:t})}})}},t.closeAccountconfModal=function(){return{type:i.CLOSE_ACCOUNTCONF_MODAL}},t.accountConfRunningTriangleSwitch=function(e,t){return{type:i.ACCOUNTCONF_RUNNING_TRIANGLE_SWITCH,showChild:e,uuid:t}},t.accountconfRunningCheckboxCheck=function(e,t){return{type:i.ACCOUNTCONF_RUNNING_CHECKBOX_CHECK,item:e,upperArr:t}},t.accountconfAccountCheckboxCheck=function(e,t){return{type:i.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK,checked:e,uuid:t}},t.selectOrUnselectAccountAll=function(e){return{type:i.SELECT_OR_UNSELECT_ACCOUNT_ALL,selectAll:e}},t.accountConfTaxRateSettingScale=function(e){return{type:i.ACCOUNTCONF_TAX_RATE_SETTING_SCALE,value:e}},t.selectAccountConfUpperCategory=function(e){return{type:i.SELECT_ACCOUNTCONF_UPPER_CATEGORY,value:e}},t.changeAccountConfCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(f(t));a({type:i.CHANGE_ACCOUNTCONF_COMMON_STRING,placeArr:r,value:n})}},t.changeAccountConfCommonFlagsString=function(e,t){return function(n){var a="string"==typeof e?["flags",e]:["flags"].concat(f(e));n({type:i.CHANGE_ACCOUNTCONF_COMMON_STRING,placeArr:a,value:t})}}),m=t.changeAccountConfRunningCategory=function(e){return function(t){t({type:i.CHANGE_ACCOUNTCONF_COMMON_STRING,placeArr:["runningCategory",0],value:e})}},A=(t.selectAccountConfAllAc=function(e,t,n,a,r){return{type:i.SELECT_ACCOUNTCONF_ALL_AC,acId:e,acFullName:t,asscategorylist:n,tab:a,place:r}},t.selectAccountConfMultipleAc=function(e,t,n,a){return function(r){var o="string"==typeof t?["runningTemp",t]:["runningTemp"].concat(f(t));r({type:i.SELECT_ACCOUNTCONF_MULTIPLE_AC,acList:e,placeArr:o,assList:n,assPlace:a})}}),E=(t.changeAccountConfAccountNumber=function(e,t){return{type:i.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER,accountType:e,value:t}},t.saveAccountConfRunningCategory=function(e){return function(t,n){t({type:i.SWITCH_LOADING_MASK});var a=n().accountConfState,u=a.getIn(["flags","insertOrModify"]),l=a.get("runningTemp"),d=l.get("parentUuid"),f=l.get("categoryType"),g=l.get("level"),p=l.toJS(),m=C(f);for(var A in m)delete p[m[A]];(0,o.default)(u+"RunningCategory","POST",JSON.stringify(r({},p)),function(n){(0,s.showMessage)(n)&&t(e?_("running",(0,c.fromJS)({uuid:d,level:g})):{type:i.AFTER_UPDATE_ACCOUNTCONF_RUNNING_CATEGORY,receivedData:n.data}),t({type:i.SWITCH_LOADING_MASK})})}},t.saveAccountConfAccount=function(e,t){return function(n,a){n({type:i.SWITCH_LOADING_MASK});var u=a().accountConfState,c=u.getIn(["flags","insertOrModify"]),l=u.get("accountTemp").toJS();(0,o.default)(c+"RunningAccount","POST",JSON.stringify(r({},l)),function(a){(0,s.showMessage)(a)&&(n({type:i.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT,saveAndNew:e,receivedData:a.data}),"fromLrAccount"===t&&n({type:i.CHANGE_LR_ACCOUNT_COMMON_STRING,tab:"",placeArr:["flags","showAccountModal"],value:!1})),n({type:i.SWITCH_LOADING_MASK})})}},t.saveAccountConfTaxRate=function(e){return function(e,t){e({type:i.SWITCH_LOADING_MASK});var n=t().accountConfState,c=(n.getIn(["flags","insertOrModify"]),n.get("taxRateTemp")),l=c.get("scale"),d={};if("small"===l){var f=c.get("payableAcId"),_=c.get("notBillingAcId"),m=c.get("payableRate");d={payableAcId:f,notBillingAcId:_,payableRate:m,scale:l}}else{var A=c.get("inputAcId"),E=c.get("certifiedAcId"),C=c.get("outputAcId"),T=c.get("waitOutputAcId"),v=c.get("turnOutUnpaidAcId"),S=c.get("unpaidAcId"),y=c.get("preAcId"),I=c.get("outputRate");d={inputAcId:A,certifiedAcId:E,outputAcId:C,waitOutputAcId:T,turnOutUnpaidAcId:v,unpaidAcId:S,outputRate:I,scale:l,preAcId:y}}(0,o.default)("canModifyRunningTaxRate","POST",JSON.stringify(r({},d)),function(t){t.data.result.hasBusiness?t.data.result.canModify?(e({type:i.SWITCH_LOADING_MASK}),u.Confirm({message:t.data.result.msg,title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex?(0,o.default)("modifyRunningTaxRate","POST",JSON.stringify(r({},d)),function(t){(0,s.showMessage)(t,"show")&&e(p("isTaxQuery",!0))}):e(g())}})):(a.default.error(t.data.result.msg),e(g()),e({type:i.SWITCH_LOADING_MASK})):(0,o.default)("modifyRunningTaxRate","POST",JSON.stringify(r({},d)),function(t){(0,s.showMessage)(t,"show")&&e(p("isTaxQuery",!0)),e({type:i.SWITCH_LOADING_MASK})})})}},t.deleteAccountConfRunning=function(){return function(e,t){var n=t().accountConfState.getIn(["flags","runningSelect"]);0!==n.size&&u.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunningCategory","POST",JSON.stringify({deleteList:n}),function(t){(0,s.showMessage)(t)&&(a.default.success(t.message),e({type:i.AFTER_UPDATE_ACCOUNTCONF_RUNNING_CATEGORY,receivedData:t.data})),e({type:i.SWITCH_LOADING_MASK})}))}})}},t.deleteAccountConfAccount=function(){return function(e,t){var n=t().accountConfState.getIn(["flags","accountSelect"]);0!==n.size&&u.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunningAccount","POST",JSON.stringify({deleteList:n}),function(t){(0,s.showMessage)(t)&&e({type:i.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT,receivedData:t.data}),e({type:i.SWITCH_LOADING_MASK})}))}})}},t.changeAccountConfcCheckboxArr=function(e,t){return function(n){var a=[];t.forEach(function(e){switch(e){case"销售费用":a.push("XZ_SALE");break;case"管理费用":a.push("XZ_MANAGE");break;case"财务费用":a.push("XZ_FINANCE")}}),n({type:i.CHANGE_ACCOUNTCONF_PROPERTY,placeArr:e,valArr:a})}},t.changeCardCheckboxArr=function(e,t,n,a){return function(r,o){var s=o().accountConfState.getIn(["runningTemp",e,t]),u=void 0;u=a?s.update(function(e){return e.concat(n)}):s.update(function(e){return e.filter(function(e){return e!==n})});var c=["runningTemp",e,t];r({type:i.CHANGE_ACCOUNTCONF_PROPERTY,placeArr:c,valArr:u})}},t.changeCardCheckboxArrOut=function(e,t,n){return function(a,r){var o=r().accountConfState.getIn(["runningTemp",e]),s=void 0;s=n?o.update(function(e){return e.concat(t)}):o.update(function(e){return e.filter(function(e){return e!==t})});var u=["runningTemp",e];a({type:i.CHANGE_ACCOUNTCONF_PROPERTY,placeArr:u,valArr:s})}},t.changeDefaultAccount=function(e,t,n){return function(a){var r={SX_SHBX:"AC_JT_YFSB",SX_ZFGJJ:"AC_JT_YFGJJ",SX_QTXC:"AC_JT_YFXC",SX_QYSDS:["AC_YFQYSDS","AC_QYSDS"],SX_QTSF:["AC_YFSF","AC_SF"],SX_GRSF:"AC_SDS",SX_FLF:"AC_FLF",SX_GQ:["AC_TZ","AC_TZ_SY"],SX_ZQ:["AC_TZ","AC_TZ_SY"],SX_GDZC:["AC_ZC_ASSETS","AC_ZC_CLEANING","AC_ZC_ZJ"],SX_WXZC:["AC_ZC_ASSETS","AC_ZC_CLEANING","AC_ZC_ZJ"],SX_TZXFDC:["AC_ZC_ASSETS","AC_ZC_CLEANING","AC_ZC_ZJ"]}[t],i=function(e,t,n){var a=e.find(function(e){return e.get("type")===t&&e.get("property")===n});return{acId:a?a.get("acId"):"",acFullName:a?a.get("acFullName"):""}};"SX_GRSF"===t?a(A([i(e,r,t)],[n,"payAc"])):"string"==typeof r?a(A([i(e,r,t)],[n,"accruedAc"])):"SX_QYSDS"===t||"SX_QTSF"===t?(a(A([i(e,r[0],t)],[n,"accruedAc"])),a(A([i(e,r[1],t)],[n,"payAc"]))):"SX_GQ"===t||"SX_ZQ"===t?(a(A([i(e,r[0],t)],[n,"investAc"])),a(A([i(e,r[1],t)],[n,"profitAc"]))):"SX_GDZC"!==t&&"SX_WXZC"!==t&&"SX_TZXFDC"!==t||(a(A([i(e,r[0],t)],[n,"assetsAc"])),a(A([i(e,r[1],t)],[n,"cleaningAc"])),a(A([i(e,r[2],t)],[n,"depreciationAc"])))}},t.emptyAccountCheck=function(e){return function(t){e.forEach(function(e){var n=e.tab,a=e.place,r=e.value,o="string"==typeof a?[n+"Temp",a]:[n+"Temp"].concat(f(a));t({type:i.CHANGE_ACCOUNTCONF_COMMON_STRING,placeArr:o,value:r})})}},t.swapRunningItem=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("runningSwapItem","POST",JSON.stringify({fromCategoryUuid:e,toCategoryUuid:t}),function(e){(0,s.showMessage)(e)&&n(m((0,c.fromJS)(e.data.categoryList[0]))),n({type:i.SWITCH_LOADING_MASK})})}},t.enabledCategory=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("enabledCategory","POST",JSON.stringify({enabledList:e}),function(n){(0,s.showMessage)(n)&&t(E(e[0],!1)),t({type:i.SWITCH_LOADING_MASK})})}},t.disabledCategory=function(e,t){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("disabledCategory","POST",JSON.stringify({disabledList:e}),function(n){if((0,s.showMessage)(n)){var a=n.data.parentList;t(E(e[0],!0,a))}t({type:i.SWITCH_LOADING_MASK})})}},t.changeItemDisableStatus=function(e,t,n){return function(a,r){var o=r().accountConfState,s=o.getIn(["runningCategory",0,"childList"]),u=o.getIn(["runningCategory",0,"disableList"]),c=[e];t&&n.length&&(c=c.concat(n));var l=function e(n,r,o,s){r&&r.size&&r.find(function(r,u){if(n.find(function(e){return e===r.get("uuid")}))return a({type:i.CHANGE_ITEM_DISABLE_STATUS,placeArr:[].concat(f(o),[u]),disabled:t}),!0;e(n,r.get("childList"),[].concat(f(o),[u,"childList"]),s),e(n,r.get("disableList"),[].concat(f(o),[u,"disableList"]),s)})};l(c,s,["childList"],!0),l(c,u,["disableList"],!0)}}),C=function(e){var t={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[e],n=["acAssets","acBusinessExpense","acBusinessIncome","acBusinessOutExpense","acBusinessOutIncome","acCapital","acCost","acInvest","acLoan","acPayment","acTax","acTemporaryReceipt","acTemporaryPay"];return n.splice(n.indexOf(t),1),n},T=(t.getRegretCategory=function(){return function(e){e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getRegretCategory","GET","",function(t){(0,s.showMessage)(t)&&e({type:i.GET_REGRET_CATEGORY,receivedData:t.data}),e({type:i.SWITCH_LOADING_MASK})})}},t.changeRegretAccountAccountName=function(e,t,n,a,r,o){return{type:i.CHANGE_REGRET_ACCOUNT_ACCOUNT_NAME,tab:e,placeUUid:t,placeName:n,isBalance:a,isBusiness:r,value:o}},t.changeRegretAccountCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(f(t));"flags"===t[0]&&(r=t),a({type:i.CHANGE_REGRET_ACCOUNT_COMMON_STRING,tab:e,placeArr:r,value:n})}});t.changeRegretCancle=function(){return{type:i.CHANGE_REGRET_CANCLE}},t.saveRegretMessage=function(){return function(e,t){var n=t().accountConfState,a=n.getIn(["regretTemp","subordinateName"]),r=n.getIn(["regretTemp","categoryUuid"]);e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("saveRegretMessage","POST",JSON.stringify({name:a,uuid:r}),function(t){(0,s.showMessage)(t)?(e({type:i.GET_RUNNING_CATEGORY,receivedData:t.data}),e(T("regret","showConfirmModal",!1))):(e(T("regret","showConfirmModal",!1)),e(T("regret","showModal",!0))),e({type:i.SWITCH_LOADING_MASK})})}}},1243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelYllsVisible=t.getYllsBusinessData=void 0;var a,r=n(52),i=(a=r)&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1270)),s=n(22);t.getYllsBusinessData=function(e,t){return function(n){var a=e.get("parentUuid")?e.get("parentUuid"):e.get("uuid");a&&n({type:o.SWITCH_LOADING_MASK}),a&&(0,i.default)("getRunningBusiness","GET","uuid="+a,function(a){(0,s.showMessage)(a)?(n({type:o.SWITCH_LOADING_MASK}),n({type:o.GET_YLLS_BUSINESS_DATA,item:a.data.result,curItem:e}),t&&t()):n({type:o.SWITCH_LOADING_MASK})})}},t.cancelYllsVisible=function(){return function(e){e({type:o.CANCEL_YLLS_VISIBLE})}}},1245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeItemChildShow=t.deleteRunningVc=t.showRelatePaymentFetch=t.showRelateBusinessFetch=t.modifyRunningPayment=t.getRunningPayment=t.getRunningBusinessDuty=void 0;var a,r=f(n(1278)),i=n(52),o=(a=i)&&a.__esModule?a:{default:a},s=n(18),u=n(22),c=f(n(30)),l=(f(n(27)),f(n(1229))),d=f(n(60));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.getRunningBusinessDuty=function(e,t,n,a,i){return function(i,c){console.log(n);var f=c().accountConfState.get("runningCategory");i({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusiness","GET","uuid="+t,function(o){if(i({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(o)){var c=o.data.result.categoryUuid,g=(0,s.fromJS)([]);!function e(t){return t.map(function(t){t.get("uuid")===c&&(g=g.push(t)),t.get("childList")&&t.get("childList").size&&e(t.get("childList"))})}(f);var _={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[o.data.result.categoryType],p=o.data.result.runningState,m=o.data.result[_].beManagemented,A=o.data.result[_].contactsRange,E=o.data.result[_].stockRange,C=o.data.result.beProject,T=o.data.result.projectRange,v=o.data.result.propertyCarryover;"STATE_JK_ZFLX"!==p&&"STATE_TZ_SRGL"!==p&&"STATE_TZ_SRLX"!==p&&"STATE_ZB_ZFLR"!==p&&"STATE_XC_JN"!==p&&"STATE_XC_FF"!==p&&"STATE_SF_JN"!==p&&"STATE_ZS_TH"!==p&&"STATE_ZF_SH"!==p&&"STATE_SF_SFJM"!==p||i(l.changeLrAccountCommonString("",["flags","specialStateforAccrued"],!0)),i(l.getRunningSettingInfo()),i(d.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),i(d.addHomeTabpane("Edit","LrAccount","录入流水")),i({type:r.INIT_LR_ACCOUNT,strJudgeType:"fromCxAccount",receivedData:o.data,category:g,canMakeVc:a,flowNumber:e,uuidList:n,uuid:t}),"STATE_CQZC_JZSY"===p&&i(l.calculateGain()),C&&i(l.getProjectCardList(T,o.data.result)),m&&i(l.getFirstContactsCardList(A,p)),"SX_HW"===v&&i(l.getFirstStockCardList(E,p))}})}},t.getRunningPayment=function(e,t){return function(n){n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningPayment","GET","uuid="+e,function(e){n({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),n({type:r.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.modifyRunningPayment=function(){return{type:r.MODIFY_RUNNING_PAYMENT}},t.showRelateBusinessFetch=function(e,t){return function(n){n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusinessDuty","GET","uuid="+e,function(e){n({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),n({type:r.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.showRelatePaymentFetch=function(e,t){return function(n){n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningPayment","GET","uuid="+e,function(e){n({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),n({type:r.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.deleteRunningVc=function(e,t){return function(n,a){c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(i){1===i.buttonIndex&&(n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("deletevc","POST",JSON.stringify({year:t.substr(0,4),month:t.substr(5,2),vcindexlist:[e]}),function(e){if(n({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var t=a().accountState,i=t.getIn(["flags","issuedate"]),o=t.getIn(["flags","main"]),s=t.getIn(["flags","curCategory"]),c=t.getIn(["flags","curAccountUuid"]),l=t.getIn(["flags","assId"]),d=t.getIn(["flags","assCategory"]),f=t.getIn(["flags","acId"]);n(getAccountDimensionFetch(i,o,s,c,f,d,l))}}))}})}},t.changeItemChildShow=function(e){return{type:r.CHANGE_ITEM_CHILD_SHOW,idx:e}}},1246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_PZ_BOMB="INIT_PZ_BOMB",t.PZBOMB_REVIEWEDBY_VC="PZBOMB_REVIEWEDBY_VC",t.CANCEL_PZBOMB_REVIEWEDBY_VC="CANCEL_PZBOMB_REVIEWEDBY_VC"},1249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeItemChildShow=t.deleteRunningVc=t.showRelatePaymentFetch=t.showRelateBusinessFetch=t.modifyRunningPayment=t.getRunningPayment=t.getRunningBusinessDuty=t.deleteAccountItemCardAndRunning=t.accountItemCheckboxCheckAll=t.accountItemCheckboxCheck=t.saveAccountPayOrReceive=t.oneClickPayment=t.beforeRunningPayOrReceive=t.changeAccountAccountName=t.changeAccountCommonString=t.afterModifyAccountAllList=t.changeSearchType=t.changeCalculateCommonString=t.getFirstStockCardList=t.getAccountObjectList=t.getCostCategoryListInfo=t.getAuthCategoryListInfo=t.getMakeoutCategoryListInfo=t.getManageCategoryListInfo=t.getCalculateCarryoverList=t.getCalculateCertificationList=t.getCalculateInvoicingList=t.getCalculateList=t.getPeriodCalculateList=void 0;var a,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=_(n(1277)),o=n(52),s=(a=o)&&a.__esModule?a:{default:a},u=n(22),c=_(n(30)),l=n(18),d=_(n(60)),f=_(n(43)),g=_(n(1229));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.getPeriodCalculateList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"manages",n=arguments[2];arguments[3],arguments[4];return function(a){a({type:i.SWITCH_LOADING_MASK}),a(I(e));(0,s.default)("getManageList","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",categoryUuid:"",cardUuid:"",isCheck:!1,getPeriod:n}),function(e){if((0,u.showMessage)(e)){var n;a(f.AccountTableGetPeriod(e));a((p(n={type:i.GET_CALCULATE_LIST,receivedData:e.data.result,period:e.data.periodDtoJson,issuedate:"",getPeriod:"true",isCheck:!1,categoryUuid:""},"isCheck",!1),p(n,"searchType","SEARCH_TYPE_DATE"),p(n,"accountingType",t),n))}a({type:i.SWITCH_LOADING_MASK})})}};var m=t.getCalculateList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"manages",n=(arguments[2],arguments[3]),a=arguments[4],r=arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",c=arguments[7];return function(l,d){l({type:i.SWITCH_LOADING_MASK});var f=d().calculationState,g=o?f.getIn(["flags","searchType"]):"";t=t||f.getIn(["flags","accountingType"]),r=(!0===r||!1===r)&&r,(0,s.default)("getManageList","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",categoryUuid:n?"全部"===n?"":n:f.getIn(["flags","categoryUuid"]),cardUuid:a,isCheck:r,getPeriod:"",searchType:g,searchContent:o}),function(a){l({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)&&(g=""==g?"SEARCH_TYPE_DATE":g,l({type:i.GET_CALCULATE_LIST,receivedData:a.data.result,period:a.data.periodDtoJson,issuedate:e,getPeriod:"",isCheck:r,searchType:g,curCategory:n,accountingType:t}))}),c||l(T("",a,r))}},A=t.getCalculateInvoicingList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments[4];return function(o,c){o({type:i.SWITCH_LOADING_MASK});var l=c().calculationState,d=a?l.getIn(["flags","searchType"]):"";(0,s.default)("getBusinessMakeoutList","POST",JSON.stringify({runningDate:"",categoryUuid:t?"全部"===t?"":t:l.getIn(["flags","categoryUuid"]),billMakeOutType:n,searchType:d,searchContent:a}),function(a){o({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)&&(d=""==d?"SEARCH_TYPE_DATE":d,o({type:i.GET_CALCULATE_INVOICING_LIST,receivedData:a.data.result,curCategory:t,billMakeOutType:n,searchType:d,runningDate:e}))}),r||o(v("",n))}},E=t.getCalculateCertificationList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments[4];return function(o,c){o({type:i.SWITCH_LOADING_MASK});var l=c().calculationState,d=a?l.getIn(["flags","searchType"]):"";(0,s.default)("getBusinessAuthList","POST",JSON.stringify({runningDate:"",categoryUuid:t?"全部"===t?"":t:l.getIn(["flags","categoryUuid"]),billAuthType:n,searchType:d,searchContent:a}),function(a){o({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)&&(d=""==d?"SEARCH_TYPE_DATE":d,o({type:i.GET_CALCULATE_CERTIFICATE_LIST,receivedData:a.data.result,curCategory:t,billAuthType:n,searchType:d,runningDate:e}))}),r||o(S("",n))}},C=t.getCalculateCarryoverList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return function(o,c){o({type:i.SWITCH_LOADING_MASK}),o(h(e,t));var l=c().calculationState,d=""===r?[]:[r],f=n?l.getIn(["flags","searchType"]):"";(0,s.default)("getCarryoverList","POST",JSON.stringify({runningDate:"",runningState:t,searchType:f,searchContent:n,cardUuidList:d}),function(n){o({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)&&(f=""==f?"SEARCH_TYPE_DATE":f,o({type:i.GET_CALCULATE_COST_LIST,receivedData:n.data.result,runningState:t,searchType:f,runningDate:e}))}),a||o(y("",t))}},T=t.getManageCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a,r){(0,s.default)("getRunningManageCategory","POST",JSON.stringify({runningDate:e,cardUuid:t,isCheck:n}),function(e){(0,u.showMessage)(e)&&a({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data,isCheck:n})})}},v=t.getMakeoutCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n,a){(0,s.default)("getRunningMakeoutCategory","POST",JSON.stringify({runningDate:e,billMakeOutType:t}),function(e){(0,u.showMessage)(e)&&n({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data})})}},S=t.getAuthCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n,a){(0,s.default)("getRunningAuthCategory","POST",JSON.stringify({runningDate:e,billAuthType:t}),function(e){(0,u.showMessage)(e)&&n({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data})})}},y=t.getCostCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n,a){(0,s.default)("getRunningCarryoverCategory","POST",JSON.stringify({runningDate:e,runningState:t}),function(e){(0,u.showMessage)(e)&&n({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data})})}},I=t.getAccountObjectList=function(e){return function(e){(0,s.default)("getBusinessManagerCardList","POST",JSON.stringify({}),function(t){(0,u.showMessage)(t)&&(e(N("calculate","cardList",(0,l.fromJS)(t.data.cardList))),t.data.categoryList&&e(N("calculate","typeList",(0,l.fromJS)(t.data.categoryList))))})}},h=t.getFirstStockCardList=function(e,t){return function(n,a){a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,s.default)("getCostStock","POST",JSON.stringify({runningDate:e,runningState:t}),function(e){(0,u.showMessage)(e)&&n(N("calculate","stockThingsList",(0,l.fromJS)(e.data.result)))})}},N=t.changeCalculateCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t));"flags"===t[0]&&(r=t),a({type:i.CHANGE_CALCULATE_COMMON_STRING,tab:e,placeArr:r,value:n})}},L=(t.changeSearchType=function e(t,n){return function(a){switch(n){case"manages":a(m()),a(e(["calculateTemp","usedCard"],(0,l.fromJS)({name:"",code:"全部"})));break;case"invoicing":a(A());break;case"certification":a(E());break;case"costTransfer":a(C()),a(e(["calculateTemp","stockCard"],(0,l.fromJS)({name:"",code:"全部"})))}a({type:i.CHANGE_TYPE_OF_SEARCH,placeArr:t,value:n})}},t.afterModifyAccountAllList=function(e){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","issuedate"]),r=n.getIn(["flags","accountingType"]),i=n.getIn(["flags","curCategory"]),o=(n.getIn(["calculateTemp","ass","assid"]),n.getIn(["calculateTemp","ass","asscategory"]),n.getIn(["calculateTemp","ass","acId"]),n.getIn(["calculateTemp","cardUuid"])),s=n.getIn(["flags","isCheck"]),u=n.getIn(["invoicingList","billMakeOutType"]),c=n.getIn(["certificationList","billAuthType"]),l=n.getIn(["costTransferList","runningState"]);switch(r){case"manages":e(m(a,r,"true",i,o,s));break;case"invoicing":e(A("",i,u));break;case"certification":e(E("",i,c));break;case"costTransfer":e(C("",l))}}}),O=(t.changeAccountCommonString=function(e,t,n){return{type:i.CHANGE_ACCOUNT_COMMON_STRING,tab:e,place:t,value:n}},t.changeAccountAccountName=function(e,t,n,a){return{type:i.CHANGE_ACCOUNT_ACCOUNT_NAME,tab:e,placeUUid:t,placeName:n,value:a}},t.beforeRunningPayOrReceive=function(e,t,n,a,r){return function(o){n<0&&(n=-n,e="收"===e?"付":"收"),o({type:i.BEFORE_RUNNING_PAY_OR_RECEIVE,payDirection:e,assList:t,notHandleAmount:n,uuidList:a,runningList:r})}});t.oneClickPayment=function(e){return function(t,n){var a=n().calculationState,r=a.getIn(["flags","selectList"]),i=a.getIn(["payManageList","childList"]),o=a.getIn(["flags","assId"]),s=a.getIn(["flags","assCategory"]),u=a.getIn(["flags","acId"]),c=a.get("mediumAcAssList"),d="";u?c.get("acList").forEach(function(e){e.get("acId")===u&&(d=e.get("acName"))}):c.get("category").forEach(function(e){e.get("category")===s&&e.get("assList").forEach(function(e){e.get("assId")===o&&(d=e.get("assName"))})});var f=(0,l.fromJS)([]),g=(0,l.fromJS)([]),_=(0,l.fromJS)([]),p=(0,l.fromJS)([]);if(i.forEach(function(e){r.indexOf(e.get("uuid"))>-1&&(_=_.push(e),p=p.push(e.get("uuid")),"income"===e.get("property")||"otherIncome"===e.get("property")?g=g.push(e):f=f.push(e))}),g.size&&f.size){var m=0,A=0;g.forEach(function(e){return m+=e.get("notHandleAmount")}),f.forEach(function(e){return A+=e.get("notHandleAmount")});var E=m-A;if(E>0){t(O("收",d,E,p,_))}else{t(O("付",d,-E,p,_))}e()}else if(g.size&&!f.size){var C="收",T=0;g.forEach(function(e){T+=e.get("notHandleAmount"),p.push(e.get("uuid"))}),T<0&&(C="付",T=-T),t(O(C,d,T,p,_)),e()}else if(!g.size&&f.size){var v="付",S=0;f.forEach(function(e){S+=e.get("notHandleAmount"),p.push(e.get("uuid"))}),S<0&&(v="收",S=-S),t(O(v,d,S,p,_)),e()}else console.log("异常情况：未匹配")}},t.saveAccountPayOrReceive=function(e){return function(t,n){var a=n().calculationState,i=a.getIn(["flags","runningInsertOrModify"]),o=a.get("runningTemp").toJS();(0,s.default)(i+"Runningpayment","POST",JSON.stringify(r({},o)),function(n){(0,u.showMessage)(n)&&(t(L()),e())})}},t.accountItemCheckboxCheck=function(e,t,n){return{type:i.ACCOUNT_ITEM_CHECKBOX_SELECT,checked:e,uuid:t,runningDate:n}},t.accountItemCheckboxCheckAll=function(e,t){return{type:i.PAY_RECEIVE_ITEM_CHECKBOX_CHECK_ALL,selectAll:e,listName:t}},t.deleteAccountItemCardAndRunning=function(e){return function(e,t){var n=t().calculationState.getIn(["flags","selectList"]);c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(e({type:i.SWITCH_LOADING_MASK}),(0,s.default)("deleteRunningbusiness","POST",JSON.stringify({deleteList:n}),function(t){if((0,u.showMessage)(t)){if(t.data.errorList.length){var n=t.data.errorList.reduce(function(e,t){return e+","+t});c.Alert(n)}e(L())}e({type:i.SWITCH_LOADING_MASK})}))}})}},t.getRunningBusinessDuty=function(e,t,n,a){return function(a,r){var o=r().accountConfState.get("runningCategory");a({type:i.SWITCH_LOADING_MASK}),(0,s.default)("getNewRunningBusiness","GET","oriUuid="+t,function(t){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(t)){var r=t.data.result.categoryUuid,s=(0,l.fromJS)([]);!function e(t){return t.map(function(t){t.get("uuid")===r&&(s=s.push(t)),t.get("childList")&&t.get("childList").size&&e(t.get("childList"))})}(o);var c=t.data.result.runningState;"STATE_JK_ZFLX"!==c&&"STATE_TZ_SRGL"!==c&&"STATE_TZ_SRLX"!==c&&"STATE_ZB_ZFLR"!==c&&"STATE_ZS_TH"!==c&&"STATE_ZF_SH"!==c||a(g.changeLrAccountCommonString("",["flags","specialStateforAccrued"],!0)),a(g.getRunningSettingInfo()),a(d.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),a(d.addHomeTabpane("Edit","LrAccount","录入流水")),a({type:i.INIT_LR_ACCOUNT,strJudgeType:"fromCxAccount",receivedData:t.data,category:s,canMakeVc:n,flowNumber:e}),"STATE_CQZC_JZSY"===c&&a(g.calculateGain())}})}},t.getRunningPayment=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,s.default)("getRunningPayment","GET","uuid="+e,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),n({type:i.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.modifyRunningPayment=function(){return{type:i.MODIFY_RUNNING_PAYMENT}},t.showRelateBusinessFetch=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,s.default)("getRunningBusinessDuty","GET","uuid="+e,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),n({type:i.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.showRelatePaymentFetch=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,s.default)("getRunningPayment","GET","uuid="+e,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),n({type:i.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.deleteRunningVc=function(e,t){return function(n,a){c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(r){1===r.buttonIndex&&(n({type:i.SWITCH_LOADING_MASK}),(0,s.default)("deletevc","POST",JSON.stringify({year:t.substr(0,4),month:t.substr(5,2),vcindexlist:[e]}),function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var t=a().calculationState,r=t.getIn(["flags","issuedate"]),o=t.getIn(["flags","main"]),s=t.getIn(["flags","curCategory"]),c=(t.getIn(["flags","curAccountUuid"]),t.getIn(["flags","assId"]),t.getIn(["flags","assCategory"]),t.getIn(["flags","acId"]),t.getIn(["flags","isCheck"])),l=t.getIn(["calculateTemp","cardUuid"]);n(m(r,o,"",s,l,c))}}))}})}},t.changeItemChildShow=function(e){return{type:i.CHANGE_ITEM_CHILD_SHOW,idx:e}}},1250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=A(n(14)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78);var u=A(n(1)),c=A(n(0)),l=n(18),d=n(17);n(1258);var f=m(n(30)),g=A(n(1260)),_=A(n(1264)),p=m(n(60));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}var E=(0,d.immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={rotate:0,magnificationRate:1,imgWpercent:0,idx:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),s(t,[{key:"componentDidMount",value:function(){this.props.dispatch(p.setDdConfig())}},{key:"componentWillReceiveProps",value:function(e,t){0==this.props.preview&&1==e.preview&&this.setState({rotate:0,magnificationRate:1,imgWpercent:0,idx:e.page,maxLimit:40,minLimit:40})}},{key:"render",value:function(){var e=this,t=this.props,n=t.preview,a=t.downloadPermission,r=t.previewImgArr,i=t.closePreviewModal,s=t.downloadEnclosure,c=t.dispatch,l=(t.page,t.type,t.uploadKeyJson,this.state),d=l.idx,p=l.rotate,m=l.magnificationRate,A=l.imgWpercent,E=l.maxLimit,C=l.minLimit,T=r.get(d);return u.default.createElement("div",{className:"preview",style:{display:n?"":"none"},onClick:function(e){}},u.default.createElement("div",{className:"nav"},u.default.createElement("button",{onClick:function(){return e.setState({idx:d-1,imgWpercent:0,rotate:0})},disabled:0==d},u.default.createElement(o.default,{type:"left-circle"}),u.default.createElement("div",null,"上一张")),u.default.createElement("button",{disabled:T&&"TRUE"!==T.get("imageOrFile"),onClick:function(){return e.setState({rotate:p+90})}},u.default.createElement(o.default,{type:"reload"}),u.default.createElement("div",null,"旋转")),T&&"application/pdf"===T.get("mimeType")?u.default.createElement("button",{disabled:.5===m,onClick:function(){e.setState({magnificationRate:m-.5})}},u.default.createElement(o.default,{type:"zoom-out"}),u.default.createElement("div",null,"缩小")):u.default.createElement("button",{disabled:-C>=A,onClick:function(){e.setState({imgWpercent:A-10})}},u.default.createElement(o.default,{type:"minus-circle"}),u.default.createElement("div",null,"缩小")),T&&"application/pdf"==T.get("mimeType")?u.default.createElement("button",{disabled:m>=4||"application/pdf"!==T.get("mimeType"),onClick:function(){e.setState({magnificationRate:m+.5})}},u.default.createElement(o.default,{type:"zoom-in"}),u.default.createElement("div",null,"放大")):u.default.createElement("button",{disabled:A>=E,onClick:function(){e.setState({imgWpercent:A+10})}},u.default.createElement(o.default,{type:"plus-circle"}),u.default.createElement("div",null,"放大")),u.default.createElement("button",{disabled:!a},a?u.default.createElement("span",{onClick:function(){return s(r.getIn([d,"signedUrl"]),r.getIn([d,"fileName"]))}},u.default.createElement(o.default,{type:"download"}),u.default.createElement("div",null,"下载")):u.default.createElement("a",null,u.default.createElement(o.default,{type:"download"}),u.default.createElement("div",null,"下载"))),u.default.createElement("button",{disabled:!(T&&"application/pdf"==T.get("mimeType")),onClick:function(){T&&"application/pdf"==T.get("mimeType")&&f.openLink({url:r.getIn([d,"signedUrl"])})}},u.default.createElement(o.default,{type:"printer"}),u.default.createElement("div",null,"打印")),u.default.createElement("button",{onClick:function(){return e.setState({idx:d+1,imgWpercent:0,rotate:0})},disabled:d===r.size-1},u.default.createElement(o.default,{type:"right-circle"}),u.default.createElement("div",null,"下一张"))),T&&"TRUE"===T.get("imageOrFile")&&n?u.default.createElement(_.default,{imgUrl:""+T.get("signedUrl"),imgWpercent:A,rotate:p,preview:n,maxLimit:E,minLimit:C}):"",T&&"application/pdf"===T.get("mimeType")&&n?u.default.createElement(g.default,{pdfUrl:""+T.get("signedUrl"),dispatch:c,magnificationRate:m,preview:n}):"",u.default.createElement("div",{className:"img-box",style:{display:T&&"application/pdf"!==T.get("mimeType")&&"TRUE"!==T.get("imageOrFile")?"":"none"}},u.default.createElement("div",{className:"img-box-contain"},u.default.createElement("div",{className:"img-box-contain-overflow"},u.default.createElement("div",{className:"noSupport"},u.default.createElement(o.default,{type:"file"}),u.default.createElement("p",null,"仅图片及PDF格式支持预览"))))),u.default.createElement("div",{className:"btnBar"},u.default.createElement("div",{className:"title"},"预览"),u.default.createElement("div",{onClick:i,className:"closeBtn"},u.default.createElement(o.default,{type:"close"}))))}}]),t}(),r.displayName="EnclosurePreview",r.propTypes={preview:c.default.bool,downloadPermission:c.default.bool,previewImgArr:c.default.instanceOf(l.List),closePreviewModal:c.default.func,dispatch:c.default.func,page:c.default.number,type:c.default.string},a=i))||a;t.default=E},1258:function(e,t,n){},1260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=_(n(14)),s=_(n(37)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78),n(38);var c=_(n(1)),l=_(n(0)),d=n(17);n(1261);n(127),g(n(30));var f=g(n(1263));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}var p=(0,d.immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderPdf=function(e){var t=document.getElementById("canvas_wrapper");t.innerHTML="";var a=atob(e),r=window.PDFJS;if(!r)return n.setState({networkFaild:!0}),s.default.info("网路问题导致PDF预览相关文件加载失败",2);if(r.cMapUrl="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.0.288/cmaps/",r.cMapPacked=!0,!r.getDocument)return n.setState({networkFaild:!0}),s.default.info("网路问题导致PDF预览相关文件加载失败",2);var i=r.getDocument({data:a}),o=n;i.promise.then(function(e){var n="";e.numPages;for(var a=0;a<e.numPages;a++)(n=document.createElement("canvas")).id="pdf_canvas_"+a,t.appendChild(n);for(var r=function(t){e.getPage(t+1).then(function(e){var n=e.getViewport(o.props.magnificationRate),a=document.getElementById("pdf_canvas_"+t);a.width=n.width,a.height=n.height;var r=a.getContext("2d");return e.render({canvasContext:r,viewport:n}).promise})},i=0;i<e.numPages;i++)r(i)}).catch(function(e){document.getElementById("canvas_wrapper").innerHTML="",o.setState({broken:!0})})},n.state={base64:"",broken:!1,networkFaild:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch(f.getCxpzUploadEnclosure(this.props.pdfUrl,function(t){t&&(e.setState({base64:t,broken:!1}),e.renderPdf(t))}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.magnificationRate!==e.magnificationRate&&this.renderPdf(this.state.base64),this.props.pdfUrl!==e.pdfUrl&&this.props.dispatch(f.getCxpzUploadEnclosure(e.pdfUrl,function(e){e&&(t.setState({base64:e,broken:!1,networkFaild:!1}),t.renderPdf(e))}))}},{key:"render",value:function(){var e=this.props,t=(e.pdfUrl,e.dispatch,e.magnificationRate,this.state),n=t.broken,a=t.networkFaild;return c.default.createElement("div",{className:"img-box"},c.default.createElement("div",{className:"img-box-contain"},c.default.createElement("div",{className:"pdf-box-contain-overflow"},c.default.createElement("div",{className:"pdf_canvas_main"},c.default.createElement("div",{className:"pdf_canvas_pdf"},c.default.createElement("div",{id:"canvas_wrapper"}))),n?c.default.createElement("div",{className:"noSupport"},c.default.createElement(o.default,{type:"file"}),c.default.createElement("p",null,"PDF文件损坏，无法预览")):"",a?c.default.createElement("div",{className:"noSupport"},c.default.createElement(o.default,{type:"file"}),c.default.createElement("p",null,"网络异常，无法预览")):"")))}}]),t}(),r.displayName="PdfPreview",r.propTypes={pdfUrl:l.default.string,dispatch:l.default.func,magnificationRate:l.default.number},a=i))||a;t.default=p},1261:function(e,t,n){},1263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCxpzUploadEnclosure=void 0;var a,r=n(31),i=(a=r)&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1246)),s=(n(18),n(22));t.getCxpzUploadEnclosure=function(e,t){return function(n){n({type:o.SWITCH_LOADING_MASK}),e.indexOf("xfn-ddy-annex-bucket.oss-accelerate")>0&&(e=e.replace("xfn-ddy-annex-bucket.oss-accelerate","xfn-ddy-annex-bucket.oss-cn-hangzhou-internal")),(0,i.default)("uploadGetEnclosure","POST",JSON.stringify({enclosureUrl:e}),function(e){(0,s.showMessage)(e)?t(e.data.enclosureFile):t(""),n({type:o.SWITCH_LOADING_MASK})})}}},1264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=c(n(1)),u=c(n(0));function c(e){return e&&e.__esModule?e:{default:e}}var l=(0,n(17).immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawImgScal=function(e,t,a,r){var i,o,s,u,c,l=t/100,d=a/100,f=r/100;i=n.refs.bargraphCanvas,o=i.getContext("2d"),(s=new Image).onload=function(){!0,g()},s.src=e;var g=function(){-f<=l&&l<=d&&(0===l?(u=s.width>960?960:s.width*Number(1+l),c=s.width>960?960*s.height/s.width:s.height*Number(1+l)):(u=s.width>960?960*Number(1+l):s.width*Number(1+l),c=s.width>960?960*s.height/s.width*Number(1+l):s.height*Number(1+l)),n.setState({imgHeight:c,imgWidth:u}),i.width=u,i.height=c,o.clearRect(0,0,u,c),o.drawImage(s,0,0,s.width,s.height,0,0,u,c))}},n.state={imgHeight:0,imgWidth:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),o(t,[{key:"componentDidMount",value:function(){this.drawImgScal(this.props.imgUrl,this.props.imgWpercent,this.props.maxLimit,this.props.minLimit)}},{key:"componentWillReceiveProps",value:function(e){this.props.imgUrl!==e.imgUrl&&this.drawImgScal(e.imgUrl,e.imgWpercent,this.props.maxLimit,this.props.minLimit),this.props.imgUrl===e.imgUrl&&this.props.imgWpercent!==e.imgWpercent&&this.drawImgScal(this.props.imgUrl,e.imgWpercent,this.props.maxLimit,this.props.minLimit)}},{key:"isVertail",value:function(e){return!(e<90)&&(90===e||e%180!=0)}},{key:"render",value:function(){var e=this.props,t=(e.imgUrl,e.imgWpercent,e.rotate),n=this.state,a=n.imgHeight,r=n.imgWidth,i=0,o=0;return this.isVertail(t)?(a>960&&(i=a-960),r>960&&(o=r-960)):(r>960&&(i=r-960),a>960&&(o=a/2+10)),s.default.createElement("div",{className:"img-box"},s.default.createElement("div",{className:"img-box-contain"},s.default.createElement("div",{className:"img-box-contain-overflow"},s.default.createElement("canvas",{ref:"bargraphCanvas",style:{transform:"rotate("+t+"deg)",marginLeft:i+"px",marginTop:o+"px",display:"block"}}))))}}]),t}(),r.displayName="ImgPreview",r.propTypes={imgUrl:u.default.string,imgWpercent:u.default.number,rotate:u.default.number,maxLimit:u.default.number,minLimit:u.default.number},a=i))||a;t.default=l},1270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_YLLS="INIT_YLLS",t.GET_YLLS_BUSINESS_DATA="GET_YLLS_BUSINESS_DATA",t.CANCEL_YLLS_VISIBLE="CANCEL_YLLS_VISIBLE"},1273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_ACCOUNTCONF="INIT_ACCOUNTCONF",t.GET_ACCOUNTCONF_ALL_SETTINGS="GET_ACCOUNTCONF_ALL_SETTINGS",t.GET_RUNNING_CATEGORY="GET_RUNNING_CATEGORY",t.GET_RUNNING_ACCOUNT="GET_RUNNING_ACCOUNT",t.GET_RUNNING_TAX_RATE="GET_RUNNING_TAX_RATE",t.CHANGE_ACCOUNTCONF_CURRENTPAGE="CHANGE_ACCOUNTCONF_CURRENTPAGE",t.BEFORE_INSERT_ACCOUNTCONF="BEFORE_INSERT_ACCOUNTCONF",t.BEFORE_MODIFY_ACCOUNTCONF_RUNNING_OLD="BEFORE_MODIFY_ACCOUNTCONF_RUNNING_OLD",t.CLOSE_ACCOUNTCONF_MODAL="CLOSE_ACCOUNTCONF_MODAL",t.ACCOUNTCONF_RUNNING_TRIANGLE_SWITCH="ACCOUNTCONF_RUNNING_TRIANGLE_SWITCH",t.ACCOUNTCONF_RUNNING_CHECKBOX_CHECK="ACCOUNTCONF_RUNNING_CHECKBOX_CHECK",t.SELECT_OR_UNSELECT_RUNNING_ALL="SELECT_OR_UNSELECT_RUNNING_ALL",t.SELECT_OR_UNSELECT_ACCOUNT_ALL="SELECT_OR_UNSELECT_ACCOUNT_ALL",t.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK="ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK",t.ACCOUNTCONF_TAX_RATE_SETTING_SCALE="ACCOUNTCONF_TAX_RATE_SETTING_SCALE",t.SELECT_ACCOUNTCONF_UPPER_CATEGORY="SELECT_ACCOUNTCONF_UPPER_CATEGORY",t.CHANGE_ACCOUNTCONF_COMMON_STRING="CHANGE_ACCOUNTCONF_COMMON_STRING",t.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER="CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER",t.SELECT_ACCOUNTCONF_ALL_AC="SELECT_ACCOUNTCONF_ALL_AC",t.SELECT_ACCOUNTCONF_MULTIPLE_AC="SELECT_ACCOUNTCONF_MULTIPLE_AC",t.AFTER_UPDATE_ACCOUNTCONF_RUNNING_CATEGORY="AFTER_UPDATE_ACCOUNTCONF_RUNNING_CATEGORY",t.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT="AFTER_UPDATE_ACCOUNTCONF_ACCOUNT",t.CHANGE_ACCOUNTCONF_PROPERTY="CHANGE_ACCOUNTCONF_PROPERTY",t.CHANGE_ITEM_DISABLE_STATUS="CHANGE_ITEM_DISABLE_STATUS",t.GET_REGRET_CATEGORY="GET_REGRET_CATEGORY",t.CHANGE_REGRET_ACCOUNT_ACCOUNT_NAME="CHANGE_REGRET_ACCOUNT_ACCOUNT_NAME",t.CHANGE_REGRET_ACCOUNT_COMMON_STRING="CHANGE_REGRET_ACCOUNT_COMMON_STRING",t.CHANGE_REGRET_CANCLE="CHANGE_REGRET_CANCLE",t.SAVE_REGRET_MESSAGE="SAVE_REGRET_MESSAGE",t.CHANGE_LR_ACCOUNT_COMMON_STRING="CHANGE_LR_ACCOUNT_COMMON_STRING"},1274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.GET_BUSINESS_LIST="GET_BUSINESS_LIST",t.CHANGE_CX_ACCOUNT_COMMON_STRING="CHANGE_CX_ACCOUNT_COMMON_STRING",t.CXLS_ITEM_CHECKBOX_CHECK_ALL="CXLS_ITEM_CHECKBOX_CHECK_ALL",t.CXLS_ITEM_CHECKBOX_CHECK="CXLS_ITEM_CHECKBOX_CHECK",t.GET_CXLSCONF_ALL_SETTINGS="GET_CXLSCONF_ALL_SETTINGS",t.SET_CURRENT_PZ="SET_CURRENT_PZ",t.GET_ACCOUNTCONF_ALL_SETTINGS="GET_ACCOUNTCONF_ALL_SETTINGS",t.CALCULATE_FROM_CXLS_JUMP_TO_LRLS="CALCULATE_FROM_CXLS_JUMP_TO_LRLS",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS="TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS",t.COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS="COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS",t.INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS="INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS",t.INVOICING_FROM_CXLS_JUMP_TO_LRLS="INVOICING_FROM_CXLS_JUMP_TO_LRLS",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ="TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_ZJTX="TRANSFER_OUT_FROM_CXLS_JUMP_TO_ZJTX",t.AFTER_SAVE_ACCOUNT_PAYMENT="AFTER_SAVE_ACCOUNT_PAYMENT",t.INIT_PAYMENT_STATE="INIT_PAYMENT_STATE",t.INIT_LR_ACCOUNT_SETTINGS="INIT_LR_ACCOUNT_SETTINGS",t.CALCULATE_CHANGE_QUERY="CALCULATE_CHANGE_QUERY",t.CHANGE_PZ_COMMON_STRING="CHANGE_PZ_COMMON_STRING",t.INIT_CXLS="INIT_CXLS",t.INIT_COMMON_CHARGE_FROM_CXLS="INIT_COMMON_CHARGE_FROM_CXLS",t.INIT_JZSY_FROM_CXLS="INIT_JZSY_FROM_CXLS",t.CXLS_CALCULATE_GAIN_OR_LOSS="CXLS_CALCULATE_GAIN_OR_LOSS"},1276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeMessageMask=t.deletePzBombVcFetch=t.getPzVcFetch=t.changeJvDirectionByKey=t.changeFocusInput=t.shortcut=t.afterCopyClick=t.judgeTitleFixed=t.afterLrVcImport=t.closeLrImportContent=t.beforeLrVcImport=t.errorExlDown=t.getFileUploadFetch=t.autoCalculateAll=t.changeJvExchange=t.changeJvStandardAmount=t.changeJvItemNumber=t.getFCListDataFetch=t.getAcCloseBalance=t.autoCalculate=t.changeJvPrice=t.changeJvCount=t.getAmountDataFetch=t.changeLrAssName=t.getAssNextCode=t.changeLrAssId=t.changeLrFzhsModalClear=t.changeLrAssCategory=t.changeLrFzhsModalDisplay=t.changePzAcUnitText=t.changeLrAcAmountStateText=t.changeLrAcDirectionText=t.changeLrCategoryText=t.changeLrAcNameText=t.changeLrAcidText=t.changelrAcModalClear=t.changelrAcModalDisplay=t.checkEnclosureList=t.getLabelFetch=t.initLabel=t.getUploadCallbackFetch=t.getUploadGetTokenFetch=t.changeEnclosureList=t.changeVcEnclosureCountUser=t.deleteUploadImgUrl=t.changeTagName=t.getDraftItemFetch=t.draftSaveFetch=t.deleteVcFetch=t.clearLrpz=t.cancelReviewedJvlist=t.reviewedJvlist=t.saveJvItemFetch=t.cancleAssInput=t.changeTreeSelectContent=t.changeAcModalDisplay=t.showAssDisableModal=t.changeJvAss=t.refreshAcItemAsslist=t.changeJvAc=t.changeJvAmount=t.changeJvDirection=t.copyJvAbstract=t.changeJvAbstract=t.deleteJvItem=t.insertJvItem=t.changeVoucherDate=t.changeVcId=t.getVcFetch=t.initAndGetLastVcIdFetch=t.switchLoadingMask=t.initLrpz=void 0;var a=_(n(37));n(38);var r=g(n(1341)),i=_(n(31)),o=n(22),s=n(18),u=g(n(30)),c=g(n(27)),l=g(n(1239)),d=g(n(43)),f=g(n(60));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function p(e){return{year:e.substr(0,4),month:e.substr(5,2)}}var m=t.initLrpz=function(e,t){return{type:r.INIT_LRPZ,strJudgeEnter:e,data:t}},A=(t.switchLoadingMask=function(){return{type:r.SWITCH_LOADING_MASK}},t.initAndGetLastVcIdFetch=function(e,t){return function(n){var a=new o.DateLib(t);(0,i.default)("getLastVcIndex","POST",JSON.stringify({year:a.getYear(),month:a.getMonth()}),function(t){if((0,o.showMessage)(t)){var r={receivedData:t.data,vcDate:a};n(m(e,r))}})}},t.getVcFetch=function(e,t,n,a){return function(r,u){var c=p(e),l=n,d=a?(0,s.fromJS)(a):a;d&&d.size>1&&(d.get(0)>d.get(1)&&(d=d.reverse(),l=d.size-l-1));var f=u().lrpzState.getIn(["flags","voucherIndexList"]).size-1,g=n==f;if("home"===sessionStorage.getItem("enterLrpz")&&g&&"TRUE"===sessionStorage.getItem("lastVcIsSave"))return sessionStorage.setItem("lrpzHandleMode","insert"),r(m("getVc",{changedIdx:l,vcIndexList:d}));(0,i.default)("getvc","POST",JSON.stringify({year:c.year,month:c.month,vcindex:t}),function(e){if((0,o.showMessage)(e)){sessionStorage.setItem("lrpzHandleMode","modify");var t={receivedData:e.data,changedIdx:l,vcIndexList:d};r(m("getVcFetch",t)),(0,s.fromJS)(e.data.jvlist).some(function(e){return e.get("fcNumber")})&&r(C("modify"))}})}}),E=(t.changeVcId=function(e){return{type:r.CHANGE_VC_ID,vcIndex:e}},t.changeVoucherDate=function(e,t){return function(n){var a=new o.DateLib(e);a.toString().substr(0,7)==t.substr(0,7)?n({type:r.CHANGE_VOUCHER_DATE,vcDate:a.toString()}):(0,i.default)("getLastVcIndex","POST",JSON.stringify({year:a.getYear(),month:a.getMonth()}),function(e){if((0,o.showMessage)(e)){var t={receivedData:e.data,vcDate:a};n(m("getLastVcIdFetch",t))}})}},t.insertJvItem=function(e){return{type:r.INSERT_JV_ITEM,idx:e}},t.deleteJvItem=function(e){return{type:r.DELETE_JV_ITEM,idx:e}},t.changeJvAbstract=function(e,t,n){return{type:r.CHANGE_JV_ABSTRACT,jvAbstract:e,idx:t,bIfTrueLostFocus:n}},t.copyJvAbstract=function(e){return{type:r.COPY_JV_ABSTRACT,idx:e}},t.changeJvDirection=function(e,t){return{type:r.CHANGE_JV_DIRECTION,idx:e,jvDirection:t}},t.changeJvAmount=function(e,t,n){return{type:r.CHANGE_JV_AMOUNT,amount:e,idx:t,jvDirection:n}},t.changeJvAc=function(e,t,n,a,i,o){return{type:r.CHANGE_JV_AC,idx:e,acId:t,acName:n,acFullName:a,assCategorys:i,acunitOpen:o}},t.refreshAcItemAsslist=function(e,t,n){return{type:r.REFRESH_ACITEM_ASSLIST,idx:e,newAsslist:t,assDropListFull:n}},t.changeJvAss=function(e,t,n){return{type:r.CHANGE_JV_ASS,idx:e,assCategory:t,value:n}},t.showAssDisableModal=function(e){return{type:r.SHOW_LRPZ_ASS_DISABLE_MODAL,asscategory:e||""}},t.changeAcModalDisplay=function(e){return{type:r.CHANGE_AC_MODAL_DISPLAY,idx:e}},t.changeTreeSelectContent=function(e){return{type:r.CHANGE_TREE_SELECT_CONTENT,info:e}},t.cancleAssInput=function(e,t){return{type:r.CANCLE_ASS_INPUT,idx:e,value:t}},t.saveJvItemFetch=function e(t,n,l,d){return function(f,g){sessionStorage.setItem("reDirect",t);var _=g().lrpzState,p=_.get("jvList").filter(function(e){return e.get("acid")||e.get("jvabstract")||e.get("jvamount")}),A="/annex/"+g().homeState.getIn(["data","userInfo","sobInfo","sobId"])+"/"+g().homeState.getIn(["data","userInfo","useruuid"])+"/"+(new Date).getTime(),E=[];if(0==p.size)return u.Alert("凭证分录不能为空");if(p.map(function(e,t){var n=e.get("jvabstract").trim();if(n){if("结转本期损益"===n){var a=t+1;E.push("第"+a+'行摘要"结转本期损益"为系统保留摘要字段，请通过"结账"功能结转本期损益')}else if("结转本年利润"===n){var r=t+1;E.push("第"+r+'行摘要"结转本年利润"为系统保留摘要字段，请通过"结账"功能结转本年利润')}else if("期末汇兑损益"===n){var i=t+1;E.push("第"+i+'行摘要"期末汇兑损益"为系统保留摘要字段，请通过"结账"功能调整汇兑损益')}else if("计提折旧摊销费用"===n){var o=t+1;E.push("第"+o+'行摘要"计提折旧摊销费用"为系统保留摘要字段，请通过系统相关功能生成折旧摊销凭证')}}else{var s=t+1;E.push("第"+s+"行存在未填写完整的摘要")}if(e.get("jvabstract").length>c.LRPZ_ABSTRACT_LENGTH){var u=t+1;E.push("第"+u+"行摘要长度不能超过"+c.LRPZ_ABSTRACT_LENGTH+"个字符")}if(!e.get("acid")){var l=t+1;E.push("第"+l+"行存在未填写完整的科目")}if(!e.get("jvamount")&&0!==e.get("jvamount")){var d=t+1;E.push("第"+d+"行存在未填写完整的金额")}if(e.get("jvamount")&&e.get("price")&&"1"==e.get("acunitOpen")&&!e.get("jvcount")){var f=t+1;E.push("第"+f+"行存在未填写完整的数量")}var g=_.getIn(["flags","currencyList"]).find(function(e){return"1"==e.get("standard")}),m=g?g.get("fcNumber"):void 0;if(e.get("fcNumber")==m&&e.get("standardAmount")&&e.get("jvamount")&&Number(e.get("standardAmount"))!=Number(e.get("jvamount"))){var A=t+1;E.push("第"+A+"行为本位币："+g.get("name")+"，请调整汇率为1")}if(e.get("jvamount")&&"1"==e.get("fcStatus")&&!e.get("standardAmount")&&e.get("fcNumber")==m){var C=g?g.get("fcNumber"):"",T=g?g.get("exchange"):"";p=p.setIn([t,"fcNumber"],C).setIn([t,"exchange"],T).setIn([t,"standardAmount"],e.get("jvamount"))}}),E.length)return u.Alert(E.reduce(function(e,t){return e+","+t}));if(Number(_.getIn(["flags","debitTotal"]))!==Number(_.getIn(["flags","creditTotal"])))return u.Alert("借贷不平衡");if(!_.get("vcIndex"))return u.Alert("凭证号未输入");if(!_.get("vcDate"))return u.Alert("日期未输入");f({type:r.SWITCH_LOADING_MASK});var C=p.update(function(e){return e.map(function(e,t){return e.set("jvindex",++t)})});({modify:function(){var e=(0,s.fromJS)({oldvcindex:_.get("oldVcIndex"),oldyear:_.get("oldYear"),oldmonth:_.get("oldMonth"),createdtime:_.get("createdTime"),createdby:_.get("createdBy"),closedby:_.get("closedby")?_.get("closedby"):"",reviewedby:_.get("reviewedBy"),vcindex:_.get("vcIndex"),year:_.get("year"),month:_.get("month"),vcdate:_.get("vcDate"),jvlist:C,enclosureList:_.get("enclosureList"),dirUrl:A,autoEncode:n,enclosureCountUser:_.get("enclosureCountUser")?_.get("enclosureCountUser"):""});(0,i.default)("modifyVc","POST",JSON.stringify(e),function(c){if(15e3===c.code)u.Alert("这有可能是因为分录的摘要中包含特殊字符（表情及异形字等），请修改后重试。若还出现该错误，请联系客服人员支持。");else if(15002===c.code)d.getIn(["arrange","permission"])?l():u.Alert("凭证号已存在");else if((0,o.showMessage)(c)){if(""!=n){var g=(0,s.fromJS)({vcindex:c.data.vcindex,year:_.get("year"),month:_.get("month")});(0,i.default)("uploadgetfile","POST",JSON.stringify(g),function(e){(0,o.showMessage)(e)&&f({type:r.GET_UPLOAD,receivedData:e.data})})}if("true"===t)(0,i.default)("getLastVcIndex","POST",JSON.stringify(e),function(t){if((0,o.showMessage)(t)){a.default.success("保存成功");var n={receivedData:t.data,vcDate:new o.DateLib(e.get("vcdate")),voucherValueStart:[e.get("vcdate"),e.get("vcindex")].join("_"),voucherValueEnd:[e.get("vcdate"),t.data].join("_")};sessionStorage.setItem("lastVcIsSave","TRUE"),sessionStorage.setItem("lrpzHandleMode","insert"),f(m("initAndGetLastVcIdFetchAndVcList",n))}});else{a.default.success("保存成功");var p={receivedData:{oldvcindex:e.get("vcindex"),oldyear:e.get("oldyear"),oldmonth:e.get("oldmonth"),createdtime:e.get("createdtime"),createdby:e.get("createdby"),closedby:e.get("closedby"),reviewedby:e.get("reviewedby"),vcindex:c.data.vcindex,year:e.get("year"),month:e.get("month"),vcdate:e.get("vcdate"),jvlist:C,enclosureList:_.get("enclosureList").toJS(),enclosureCountUser:_.get("enclosureCountUser")},changedIdx:"",vcIndexList:[]};sessionStorage.setItem("lrpzHandleMode","modify"),f(m("getVcFetch",p))}}f({type:r.SWITCH_LOADING_MASK})})},insert:function(){var c=(0,s.fromJS)({vcindex:_.get("vcIndex"),year:_.get("year"),month:_.get("month"),vcdate:_.get("vcDate"),jvlist:C,vcModelKey:_.get("vcKey"),enclosureList:_.get("enclosureList"),dirUrl:A,autoEncode:n,enclosureCountUser:_.get("enclosureCountUser")});(0,i.default)("insertVc","POST",JSON.stringify(c),function(n){0===n.code?p(n,c):15e3===n.code?u.Alert("这有可能是因为分录的摘要中包含特殊字符（表情及异形字等），请修改后重试。若还出现该错误，请联系客服人员支持。"):15002===n.code?d.getIn(["arrange","permission"])?l():(a.default.info("凭证号重复，系统自动编号"),f(e(t,!0,l,d))):(0,o.showMessage)(n),f({type:r.SWITCH_LOADING_MASK})});var p=function(e,n){var u=(0,s.fromJS)({vcindex:e.data.vcindex,year:_.get("year"),month:_.get("month")});if("true"===t)(0,i.default)("getLastVcIndex","POST",JSON.stringify(n),function(e){if((0,o.showMessage)(e)){var t={receivedData:e.data,vcDate:new o.DateLib(n.get("vcdate")),voucherValueStart:[n.get("vcdate"),n.get("vcindex")].join("_"),voucherValueEnd:[n.get("vcdate"),e.data].join("_")};sessionStorage.setItem("lastVcIsSave","TRUE"),sessionStorage.setItem("lrpzHandleMode","insert"),f(m("initAndGetLastVcIdFetchAndVcList",t)),(0,i.default)("getperiod","GET","",function(e){(0,o.showMessage)(e)&&(a.default.success("保存成功"),f({type:r.GET_PERIOD_FETCH,receivedData:e}))})}});else{(0,i.default)("uploadgetfile","POST",JSON.stringify(u),function(e){(0,o.showMessage)(e)&&f({type:r.GET_UPLOAD,receivedData:e.data})});var c=(0,o.formatDate)(),l=g().homeState.getIn(["data","userInfo","username"]),d={receivedData:{oldvcindex:n.get("vcindex"),oldyear:n.get("oldyear"),oldmonth:n.get("oldmonth"),createdtime:c,createdby:l,closedby:n.get("closedby"),reviewedby:n.get("reviewedby"),vcindex:e.data.vcindex,year:n.get("year"),month:n.get("month"),vcdate:n.get("vcdate"),jvlist:C,enclosureList:_.get("enclosureList").toJS(),enclosureCountUser:_.get("enclosureCountUser")},changedIdx:"",vcIndexList:[]};sessionStorage.setItem("lastVcIsSave","FALSE"),sessionStorage.setItem("lrpzHandleMode","modify"),f(m("getVcFetch",d)),(0,i.default)("getperiod","GET","",function(e){(0,o.showMessage)(e)&&(a.default.success("保存成功"),f({type:r.GET_PERIOD_FETCH,receivedData:e}))})}}}})[sessionStorage.getItem("lrpzHandleMode")]()}},t.reviewedJvlist=function(e,t,n,a,s){return function(c,l){c({type:r.SWITCH_LOADING_MASK});var d=l().homeState.getIn(["data","userInfo","username"]);(0,i.default)("reviewVc","POST",JSON.stringify({year:e,month:t,vcindexlist:[n],action:"QUERY_VC-AUDIT"}),function(e){c({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)&&(0===e.data.fail?a?(c({type:r.PZBOMB_REVIEWEDBY_VC,reviewedBy:d}),s&&s()):c({type:r.REVIEWEDBY_VC,reviewedBy:d}):u.Alert(e.data.failList[0]))})}},t.cancelReviewedJvlist=function(e,t,n,a,s){return function(c){c({type:r.SWITCH_LOADING_MASK}),(0,i.default)("cancelReviewVc","POST",JSON.stringify({year:e,month:t,vcindexlist:[n],action:"QUERY_VC-CANCEL_AUDIT"}),function(e){c({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)&&(0===e.data.fail?a?(c({type:r.CANCEL_PZBOMB_REVIEWEDBY_VC}),s&&s()):c({type:r.CANCEL_REVIEWEDBY_VC}):u.Alert(e.data.failList[0]))})}},t.clearLrpz=function(){return{type:r.CLEAR_LRPZ}}),C=(t.deleteVcFetch=function(){return function(e,t){e({type:r.SWITCH_LOADING_MASK});var n=t().lrpzState,a=n.getIn(["flags","voucherIdx"]),s=n.getIn(["flags","voucherIndexList"]),u="",c="";s.size&&(a+1<s.size?(u=a+1,c=a):a-1!=-1&&(u=a-1,c=a-1)),(0,i.default)("deletevc","POST",JSON.stringify({year:n.get("oldYear"),month:n.get("oldMonth"),vcindexlist:[n.get("oldVcIndex")],action:"SAVE_VC-RUD_VC"}),function(t){if(e({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(t))if(-1!=u&&""!=u){var n=s.delete(a);e(A(s.get(u).split("_")[0],s.get(u).split("_")[1],c,n))}else"Home"===sessionStorage.getItem("enterLrpz")?(sessionStorage.setItem("lrpzHandleMode","insert"),e(E())):e(f.removeHomeTabpane("Edit"))})}},t.draftSaveFetch=function(e){return function(e,t){var n=t().lrpzState,l=[];if(n.get("jvList").filter(function(e){return e.get("acid")||e.get("jvabstract")||e.get("jvamount")}).map(function(e,t){if(e.get("jvabstract").length>c.LRPZ_ABSTRACT_LENGTH){var n=t+1;l.push("第"+n+"行摘要长度不能超过"+c.LRPZ_ABSTRACT_LENGTH+"个字符")}}),l.length)return u.Alert(l.reduce(function(e,t){return e+","+t}));if(!n.get("vcIndex"))return u.Alert("凭证号未输入");if(!n.get("vcDate"))return u.Alert("日期未输入");var d=n.get("jvList").update(function(e){return e.filter(function(e){return e.get("acid")||e.get("jvabstract")||e.get("jvamount")}).map(function(e,t){return e.set("jvindex",++t)})});if(n.get("vcKey")){var f=(0,s.fromJS)({createdtime:n.get("createdTime"),createdby:n.get("createdBy"),closedby:n.get("closedby"),reviewedby:n.get("reviewedBy"),vcindex:n.get("vcIndex"),year:n.get("year"),month:n.get("month"),vcdate:n.get("vcDate"),vckey:n.get("vcKey"),jvlist:d,enclosureCountUser:n.get("enclosureCountUser")});(0,i.default)("modifydraft","POST",JSON.stringify(f),function(t){(0,o.showMessage)(t)&&("1"==n.getIn(["flags","locked"])?a.default.success("新增草稿成功"):"1"==t.data.isModify?a.default.success("修改草稿成功"):a.default.success("新增草稿成功"),e({type:r.TEMPORARY_SAVE_FETCH,receivedData:t.data.vckey}))})}else{var g=(0,s.fromJS)({vcindex:n.get("vcIndex"),year:n.get("year"),month:n.get("month"),vcdate:n.get("vcDate"),jvlist:d,enclosureCountUser:n.get("enclosureCountUser")});(0,i.default)("insertdraft","POST",JSON.stringify(g),function(t){(0,o.showMessage)(t)&&(a.default.success("新增草稿成功"),e({type:r.TEMPORARY_SAVE_FETCH,receivedData:t.data}))})}}},t.getDraftItemFetch=function(e,t,n){return function(a,r){var s=r().allState;(0,i.default)("getdraft","POST",JSON.stringify({vckey:e}),function(r){if((0,o.showMessage)(r)){var u=r.data;if("1"==r.data.locked){var c="",l=s.getIn(["period","openedyear"]),d=s.getIn(["period","openedmonth"]);if(l){var f=new Date(l,d,0),g=new Date,_=(new Date).getYear(),p=(new Date).getMonth()+1;c=f<g?f:l==_&&d==p?g:new Date(l,d,1)}else c=new Date;(0,i.default)("getLastVcIndex","POST",JSON.stringify({year:new o.DateLib(c).getYear(),month:new o.DateLib(c).getMonth()}),function(r){if((0,o.showMessage)(r)){var i={receivedData:u,draftList:n,changeDraftIdx:t,vcKey:e,vcIndex:r.data,vcDate:new o.DateLib(c)};a(m("getVcIdAndGetDraftItemFetch",i))}})}else{a(m("getDraftItemFetch",{receivedData:u,draftList:n,changeDraftIdx:t,vcKey:e}))}}})}},t.changeTagName=function(e,t){return{type:r.CHANGE_TAG_NAME,index:e,value:t}},t.deleteUploadImgUrl=function(e){return{type:r.DELETE_UPLOAD_IMG_URL,index:e}},t.changeVcEnclosureCountUser=function(e){return{type:r.CHANGE_VC_ENCLOSURE_COUNT_USER,value:e}},t.changeEnclosureList=function(e){return{type:r.CHANGE_ENCLOSURE_LIST,imgArr:e}},t.getUploadGetTokenFetch=function(){return function(e,t){var n=t().allState.get("expire"),a=Date.parse(new Date)/1e3;console.log(n,a,n<a+300),n<a+300&&(0,i.default)("aliyunOssPolicy","GET","",function(t){e({type:r.AFTER_GET_UPLOAD_SIGNATURE,receivedData:t.data,code:t.code})})}},t.getUploadCallbackFetch=function(e,t,n,a){return function(a){(0,i.default)("uploadgetfile","POST",JSON.stringify({vcindex:e,year:t,month:n}),function(e){(0,o.showMessage)(e)})}},t.initLabel=function(){return function(e){(0,i.default)("initLabel","POST","",function(e){(0,o.showMessage)(e)})}},t.getLabelFetch=function(){return function(e){(0,i.default)("getFjLabelData","POST","",function(t){(0,o.showMessage)(t)&&e({type:r.GET_LABEL_FETCH,receivedData:t})})}},t.checkEnclosureList=function(e,t,n,a,s,u,c){return function(e){var t=[];t.push({fileName:a,enclosurePath:u.data.enclosurePath,size:(u.data.size/1024).toFixed(2),imageOrFile:u.data.mimeType.toString().toUpperCase().indexOf("IMAGE")>-1?"TRUE":"FALSE",label:"无标签",beDelete:!1,mimeType:u.data.mimeType}),(0,i.default)("insertEnclosure","POST",JSON.stringify({enclosureList:t}),function(t){(0,o.showMessage)(t)&&e({type:r.CHANGE_ENCLOSURE_LIST,imgArr:t.data.enclosureList}),c&&e({type:r.SWITCH_LOADING_MASK})})}},t.changelrAcModalDisplay=function(){return{type:r.CHANGE_LR_AC_MODAL_DISPLAY}},t.changelrAcModalClear=function(){return{type:r.CHANGE_LR_AC_MODAL_CLEAR}},t.changeLrAcidText=function(e,t){return{type:r.CHANGE_LR_ACID_TEXT,acId:e,acList:t}},t.changeLrAcNameText=function(e){return{type:r.CHANGE_LR_ACNAME_TEXT,acName:e}},t.changeLrCategoryText=function(e){return{type:r.CHANGE_LR_CATEGORY_TEXT,category:e}},t.changeLrAcDirectionText=function(e){return{type:r.CHANGE_LR_AC_DIRECTON_TEXT,category:e}},t.changeLrAcAmountStateText=function(){return{type:r.CHANGE_LR_AMOUNT_TEXT}},t.changePzAcUnitText=function(e){return{type:r.CHANGE_LR_AC_UNIT_TEXT,unit:e}},t.changeLrFzhsModalDisplay=function(){return{type:r.CHANGE_LR_FZHS_MODAL_DISPLAY}},t.changeLrAssCategory=function(e){return{type:r.CHANGE_LR_ASS_CATEGORY,asscategory:e}},t.changeLrFzhsModalClear=function(){return{type:r.CHANGE_LR_FZHS_MODAL_CLEAR}},t.changeLrAssId=function(e){return{type:r.CHANGE_LR_ASS_ID,assId:e}},t.getAssNextCode=function(e){return function(t,n){(0,i.default)("getassinput","GET","assCategory="+e,function(e){(0,o.showMessage)(e)&&t({type:r.CHANGE_LR_ASS_ID,assId:e.data.newAssId})})}},t.changeLrAssName=function(e){return{type:r.CHANGE_LR_ASS_NAME,assName:e}},t.getAmountDataFetch=function(e,t,n,a,s,u,c){return function(l){var d=new o.DateLib(t);(0,i.default)("getAmountData","POST",JSON.stringify({acid:e,date:t,year:d.getYear(),month:d.getMonth(),asscategory:a,assid:s,asscategoryTwo:u,assidTwo:c}),function(e){(0,o.showMessage)(e)&&l({type:r.GET_AMOUNT_DATA,receivedData:e.data,idx:n})})}},t.changeJvCount=function(e,t,n){return{type:r.CHANGE_JV_COUNT,jvCount:e,idx:t,unitDecimalCount:n}},t.changeJvPrice=function(e,t){return{type:r.CHANGE_JV_PRICE,jvPrice:e,idx:t}},t.autoCalculate=function(e,t,n){return{type:r.AUTO_CALCULATE,idx:e,value:t,unitDecimalCount:n}},t.getAcCloseBalance=function(e,t,n,a,s,u,c){return function(l){var d=new o.DateLib(t);(0,i.default)("getAcCloseBalance","POST",JSON.stringify({acid:e,year:d.getYear(),month:d.getMonth(),asscategory:a,assid:s,asscategoryTwo:u,assidTwo:c}),function(e){(0,o.showMessage)(e)&&l({type:r.GET_AC_CLOSE_BALANCE,receivedData:e.data,idx:n})})}},t.getFCListDataFetch=function(e){return function(t){(0,i.default)("getFCList","GET","",function(n){(0,o.showMessage)(n)&&t({type:r.GET_FC_LIST_DATA_FETCH,receivedData:n.data,idx:e})})}}),T=(t.changeJvItemNumber=function(e,t){return{type:r.CHANGE_JV_ITEM_NUMBER,idx:e,value:t}},t.changeJvStandardAmount=function(e,t){return{type:r.CHANGE_JV_STANDAR_AMOUNT,idx:e,value:t}},t.changeJvExchange=function(e,t){return{type:r.CHANGE_JV_EXCHANGE,idx:e,value:t}},t.autoCalculateAll=function(e,t,n){return{type:r.AUTO_CALCULATE_ALL,idx:e,value:t,unitDecimalCount:n}},t.getFileUploadFetch=function(e,t){return function(n,a){n({type:r.SWITCH_LOADING_MASK}),(0,i.default)("vcImport","UPLOAD",e,function(e){if(n({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)){n(T(e)),t();var s=500;e.data.total>400&&(s=2e3);!function e(t){var u=setTimeout(function(){var s=a().lrpzState.getIn(["flags","showLrModalMask"]);(0,i.default)("acImportProgress","GET","accessToken="+t,function(a){(0,o.showMessage)(a)&&(n({type:r.GET_LRPZ_IMPORT_PROGRESS,receivedData:a,accessToken:t}),a.data.progress>=100&&a.data.successList.length>0&&(0,i.default)("getperiod","GET","",function(e){n({type:r.GET_PERIOD_FETCH,receivedData:e})}),s&&a.data.progress<100&&e(t))}),clearTimeout(u)},s)}(e.data.accessToken)}})}},t.errorExlDown=function(){return function(e,t){var n=t().lrpzState.getIn(["importProgressInfo","accessToken"]);e({type:r.SWITCH_LOADING_MASK}),(0,i.default)("downVcError","POST",JSON.stringify({accessToken:n}),function(t){e({type:r.SWITCH_LOADING_MASK})})}},t.beforeLrVcImport=function(){return{type:r.BEFORE_LR_VC_IMPORT}},t.closeLrImportContent=function(){return{type:r.CLOSE_LR_IMPORT_CONTENT}},t.afterLrVcImport=function(e){return function(t){t({type:r.AFTER_LR_VC_IMPORT,receivedData:e})}}),v=(t.judgeTitleFixed=function(){return{type:r.JUDGE_TITLE_FIXED}},t.afterCopyClick=function(e){return{type:r.AFTER_COPY_CLICL,jvList:e}},t.shortcut=function(){return{type:r.SHORT_CUT}},t.changeFocusInput=function(e){return{type:r.CHANGE_FOCUS_INPUT,ref:e}},t.changeJvDirectionByKey=function(e,t){return{type:r.CHANGE_JV_DIRECTION_BY_KEY,idx:e,direction:t}},t.getPzVcFetch=function(e,t,n,a){return function(u){var c=p(e),l=n,d=a?(0,s.fromJS)(a):a;(0,i.default)("getvc","POST",JSON.stringify({year:c.year,month:c.month,vcindex:t}),function(e){(0,o.showMessage)(e)&&u({type:r.INIT_PZ_BOMB,receivedData:e.data,voucherIdx:l,voucherIndexList:d})})}});t.deletePzBombVcFetch=function(){return function(e,t){e({type:r.SWITCH_LOADING_MASK});var n=t().pzBombState,a=n.getIn(["flags","voucherIdx"]),s=n.getIn(["flags","voucherIndexList"]),u="",c="";s.size&&(a+1<s.size?(u=a+1,c=a):a-1!=-1&&(u=a-1,c=a-1)),(0,i.default)("deletevc","POST",JSON.stringify({year:n.get("year"),month:n.get("month"),vcindexlist:[n.get("vcIndex")],action:"COMMON-DELETE"}),function(n){if(e({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(n)){if(t().homeState.get("panes").some(function(e){return"查询流水"===e.get("title")})){var i=t().cxlsState,f=i.get("currentPage"),g=i.getIn(["flags","mainWater"]),_=i.getIn(["flags","curAccountUuid"]),p=i.getIn(["flags","issuedate"]);e(l.getBusinessList(p,g,_,f))}if(-1!=u&&""!=u){var m=s.delete(a);e(v(s.get(u).split("_")[0],s.get(u).split("_")[1],c,m))}else e(d.showPzBomb(!1))}})}},t.changeMessageMask=function(){return{type:r.CHANGE_LRPZ_MESSAGEMASK}}},1277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.ACCOUNT_CHANGE_VIEW_DIMENSION="ACCOUNT_CHANGE_VIEW_DIMENSION",t.GET_MANAGE_CATEGORY_DETAIL="GET_MANAGE_CATEGORY_DETAIL",t.GET_CALCULATE_LIST="GET_CALCULATE_LIST",t.GET_CALCULATE_INVOICING_LIST="GET_CALCULATE_INVOICING_LIST",t.GET_CALCULATE_CERTIFICATE_LIST="GET_CALCULATE_CERTIFICATE_LIST",t.GET_CALCULATE_COST_LIST="GET_CALCULATE_COST_LIST",t.CHANGE_CALCULATE_COMMON_STRING="CHANGE_CALCULATE_COMMON_STRING",t.CHANGE_ACCOUNT_AMOUNT_SUM="CHANGE_ACCOUNT_AMOUNT_SUM",t.CHANGE_ACCOUNT_COMMON_STRING="CHANGE_ACCOUNT_COMMON_STRING",t.CHANGE_ACCOUNT_ACCOUNT_NAME="CHANGE_ACCOUNT_ACCOUNT_NAME",t.BEFORE_RUNNING_PAY_OR_RECEIVE="BEFORE_RUNNING_PAY_OR_RECEIVE",t.ACCOUNT_ITEM_CHECKBOX_SELECT="ACCOUNT_ITEM_CHECKBOX_SELECT",t.PAY_RECEIVE_ITEM_CHECKBOX_CHECK_ALL="PAY_RECEIVE_ITEM_CHECKBOX_CHECK_ALL",t.INIT_RUNNING_BUSINESS_OR_PAY_CARD="INIT_RUNNING_BUSINESS_OR_PAY_CARD",t.MODIFY_RUNNING_PAYMENT="MODIFY_RUNNING_PAYMENT",t.SHOW_RELATE_PAYMENT_FETCH="SHOW_RELATE_PAYMENT_FETCH",t.CHANGE_ITEM_CHILD_SHOW="CHANGE_ITEM_CHILD_SHOW",t.CHANGE_TYPE_OF_SEARCH="CHANGE_TYPE_OF_SEARCH",t.INIT_SEARCH_CALCULATION="INIT_SEARCH_CALCULATION"},1278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.GET_BUSINESS_LIST="GET_BUSINESS_LIST",t.CHANGE_CX_ACCOUNT_COMMON_STRING="CHANGE_CX_ACCOUNT_COMMON_STRING",t.CXLS_ITEM_CHECKBOX_CHECK_ALL="CXLS_ITEM_CHECKBOX_CHECK_ALL",t.CXLS_ITEM_CHECKBOX_CHECK="CXLS_ITEM_CHECKBOX_CHECK",t.GET_CXLSCONF_ALL_SETTINGS="GET_CXLSCONF_ALL_SETTINGS",t.SET_CURRENT_PZ="SET_CURRENT_PZ",t.SHOW_RELATE_PAYMENT_FETCH="SHOW_RELATE_PAYMENT_FETCH",t.CHANGE_ITEM_CHILD_SHOW="CHANGE_ITEM_CHILD_SHOW",t.INIT_LR_ACCOUNT="INIT_LR_ACCOUNT",t.MODIFY_RUNNING_PAYMENT="MODIFY_RUNNING_PAYMENT"},1289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.SET_PRINT_VC_INDEX_AND_DATE="SET_PRINT_VC_INDEX_AND_DATE",t.SET_PRINT_STRING="SET_PRINT_STRING"},1300:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortDraftListByDate=t.reverseDraftList=t.searchDraft=t.changeInputValue=t.unLockDraft=t.lockDraft=t.deleteDraft=t.selectDraftItem=t.selectDraftAll=t.getDraftListFetch=void 0;var a,r=n(31),i=(a=r)&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1306)),s=(n(18),n(22));var u=t.getDraftListFetch=function(e){return function(t){t({type:o.SWITCH_LOADING_MASK}),"全部"===e?(0,i.default)("getdraftlist","POST",JSON.stringify({status:"-1"}),function(e){(0,s.showMessage)(e)&&t({type:o.GET_DRAFT_LIST_FETCH,receivedData:e.data,selectDraftType:"全部"}),t({type:o.SWITCH_LOADING_MASK})}):"未锁定"===e?(0,i.default)("getdraftlist","POST",JSON.stringify({status:"0"}),function(e){(0,s.showMessage)(e)&&t({type:o.GET_DRAFT_LIST_FETCH,receivedData:e.data,selectDraftType:"未锁定"}),t({type:o.SWITCH_LOADING_MASK})}):(0,i.default)("getdraftlist","POST",JSON.stringify({status:"1"}),function(e){(0,s.showMessage)(e)&&t({type:o.GET_DRAFT_LIST_FETCH,receivedData:e.data,selectDraftType:"已锁定"}),t({type:o.SWITCH_LOADING_MASK})})}};t.selectDraftAll=function(){return{type:o.SELECT_DRAFT_ALL}},t.selectDraftItem=function(e){return{type:o.SELECT_DRAFT_ITEM,idx:e}},t.deleteDraft=function(e,t){return function(n){(0,i.default)("deletedraft","POST",JSON.stringify({vcKeyList:e}),function(e){(0,s.showMessage)(e)&&n(u(t))})}},t.lockDraft=function(e,t){return function(n){(0,i.default)("lockdraft","POST",JSON.stringify({vcKeyList:e}),function(e){(0,s.showMessage)(e)&&n(u(t))})}},t.unLockDraft=function(e,t){return function(n){(0,i.default)("unlockdraft","POST",JSON.stringify({vcKeyList:e}),function(e){(0,s.showMessage)(e)&&n(u(t))})}},t.changeInputValue=function(e){return{type:o.CHANGE_DRAFT_INPUT_VALUE,value:e}},t.searchDraft=function(e){return{type:o.SEARCH_DRAFT,value:e}},t.reverseDraftList=function(){return{type:o.REVERSE_DRAFT_LIST}},t.sortDraftListByDate=function(){return{type:o.SORT_DRAFT_LIST_BY_DATE}}},1306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_DRAFT="INIT_DRAFT",t.GET_DRAFT_LIST_FETCH="GET_DRAFT_LIST_FETCH",t.SELECT_DRAFT_ALL="SELECT_DRAFT_ALL",t.SELECT_DRAFT_ITEM="SELECT_DRAFT_ITEM",t.CHANGE_DRAFT_INPUT_VALUE="CHANGE_DRAFT_INPUT_VALUE",t.SEARCH_DRAFT="SEARCH_DRAFT",t.NOT_SELECT_MODEL_ALL="NOT_SELECT_MODEL_ALL",t.SORT_DRAFT_LIST_BY_DATE="SORT_DRAFT_LIST_BY_DATE",t.REVERSE_DRAFT_LIST="REVERSE_DRAFT_LIST"},1314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPrintString=t.jrPdfPrint=t.printPdf=t.setPrintVcIndexAndDate=void 0;var a,r=n(31),i=(a=r)&&a.__esModule?a:{default:a},o=l(n(1289)),s=(n(18),n(22)),u=l(n(43)),c=l(n(30));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.setPrintVcIndexAndDate=function(e,t,n){return function(a){a({type:o.SET_PRINT_VC_INDEX_AND_DATE,year:e,month:t,vcIndex:n})}},t.printPdf=function(e,t,n,a,r,l,d,f){return function(g){g({type:o.SWITCH_LOADING_MASK});var _=sessionStorage.getItem("fromPos");(0,i.default)("pdfPrint","POST",JSON.stringify({year:e,month:t,needCreatedBy:a,needA4:r,needAss:l,vcIndex:n,needReviewedBy:d?"1":"0",reviewedBy:d?f:"",action:{modal:"QUERY_VC-PRINT",cxpz:"QUERY_VC-PRINT-BATCH_PRINT_AND_EXPORT_PDF",lrpz:""}[_]}),function(e){(0,s.showMessage)(e)?(g({type:o.SWITCH_LOADING_MASK}),c.openLink({url:e.data.signedUrl}),g(u.handlePrintModalVisible(!1))):g({type:o.SWITCH_LOADING_MASK})})}},t.jrPdfPrint=function(e,t,n){return function(a){a({type:o.SWITCH_LOADING_MASK});var r=sessionStorage.getItem("fromPos");(0,i.default)("JrPdfPrint","POST",JSON.stringify({needPrintName:e,needPrintEnclosure:t,oriUuid:n,action:{searchRunningPreview:"QUERY_JR-PRINT",searchRunning:"QUERY_JR-PRINT-BATCH_PRINT"}[r]}),function(e){(0,s.showMessage)(e)?(a({type:o.SWITCH_LOADING_MASK}),c.openLink({url:e.data.signedUrl}),a(u.handlePrintModalVisible(!1))):a({type:o.SWITCH_LOADING_MASK})})}},t.setPrintString=function(e,t){return function(n){n({type:o.SET_PRINT_STRING,name:e,value:t})}}},1316:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeAssCategoryModalVisible=t.changeAssCategoryName=t.changeReverseNewName=t.changeReverseOldName=t.changeMessageMask=t.changeCurrentPage=t.reversAssFetch=t.changeReversAssConfirmShow=t.changeReversAssId=t.selectReversAssCheck=t.clearReversAss=t.changeReversCategory=t.changeReversAssModal=t.changeAssDisableState=t.changeAMBRelateAssCategroyList=t.getAssrelateAMB=t.getAssGetAMB=t.closeAssImportContent=t.afterAssImport=t.beforeAssImport=t.getFileUploadFetch=t.changeAssCategory=t.changeAssName=t.changeAssId=t.selectAssItem=t.selectAssAll=t.changeAcInAssTabKey=t.deleteAcInAssItem=t.modifyAclistInAssItem=t.changeAclistModalDisplay=t.changeFzModalDisplay=t.changeActiveAssCategory=void 0;var a,r=l(n(1416)),i=n(31),o=(a=i)&&a.__esModule?a:{default:a},s=n(22),u=l(n(30)),c=l(n(43));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var d=t.changeActiveAssCategory=function(e,t){return{type:r.CHANGE_ACTIVE_ASS_CATEGORY,category:e,asslist:t}},f=(t.changeFzModalDisplay=function(e){return{type:r.CHANGE_FZ_MODAL_DISPLAY,ass:e}},t.changeAclistModalDisplay=function(e){return{type:r.CHANGE_ACLIST_MODAL_DISPLAY,aclist:e}},t.modifyAclistInAssItem=function(e,t){return{type:r.MODIFY_ACLIST_IN_ASS_ITEM,idx:e,aclist:t}},t.deleteAcInAssItem=function(e){return{type:r.DELETE_AC_IN_ASS_ITEM,acid:e}},t.changeAcInAssTabKey=function(e){return{type:r.CHANGE_AC_IN_ASS_TAB_KEY,key:e}},t.selectAssAll=function(){return{type:r.SELECT_ASS_ALL}},t.selectAssItem=function(e){return{type:r.SELECT_ASS_ITEM,assid:e}},t.changeAssId=function(e){return{type:r.CHANGE_ASS_ID,assid:e}},t.changeAssName=function(e){return{type:r.CHANGE_ASS_NAME,assname:e}},t.changeAssCategory=function(e){return{type:r.CHANGE_ASS_CATEGORY,asscategory:e}},t.getFileUploadFetch=function(e,t){return function(n,a){n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("assImport","UPLOAD",e,function(e){if((0,s.showMessage)(e)){n(f(e)),t(),n({type:r.SWITCH_LOADING_MASK});!function e(t){var i=setTimeout(function(){var u=a().fzhsState.get("assshowMessageMask");(0,o.default)("acImportProgress","GET","accessToken="+t,function(a){(0,s.showMessage)(a)&&(n({type:r.GET_ASS_IMPORT_PROGRESS,receivedData:a}),a.data.progress>=100&&a.data.successList.length>0&&n(c.getAssListFetch()),u&&a.data.progress<100&&e(t))}),clearTimeout(i)},500)}(e.data.accessToken)}else n({type:r.SWITCH_LOADING_MASK})})}},t.beforeAssImport=function(){return{type:r.BEFORE_ASS_IMPORT}},t.afterAssImport=function(e){return function(t){t({type:r.AFTER_ASS_IMPORT,receivedData:e})}});t.closeAssImportContent=function(){return{type:r.CLOSE_ASS_IMPORT_CONTENT}},t.getAssGetAMB=function(){return function(e){(0,o.default)("assgetAMB","GET","",function(t){(0,s.showMessage)(t)&&e({type:r.AFTER_ASSGETAMB_GET,receivedData:t.data})})}},t.getAssrelateAMB=function(e,t){return function(n){u.Confirm({message:"确定开通辅助核算类别["+e.get(0)+"]为默认阿米巴？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(n){1===n.buttonIndex&&(0,o.default)("assrelateAMB","POST",JSON.stringify({assCategoryList:e}),function(e){(0,s.showMessage)(e,"show")&&t()})},onFail:function(e){return alert(e)}})}},t.changeAMBRelateAssCategroyList=function(e){return{type:r.CHANGE_AMB_RELATE_ASSCATEGROY_LIST,assCategory:e}},t.changeAssDisableState=function(e){return{type:r.CHANGE_ASS_DISABLE_STATE,value:e}},t.changeReversAssModal=function(e){return{type:r.CHANGE_REVERS_ASS_MODAL,bool:e}},t.changeReversCategory=function(e){return{type:r.CHANGE_REVERS_CATEGORY,category:e}},t.clearReversAss=function(){return{type:r.CLEAR_REVERS_ASS}},t.selectReversAssCheck=function(e,t,n){return function(a){(0,o.default)("assCheck","POST",JSON.stringify({assCategory:e,assId:t,assName:n}),function(e){if((0,s.showMessage)(e)){if(!e.data.message.length)return u.Alert(t+"不需要使用反悔模式");a({type:r.SELECT_REVERS_ASS_CHECK,assId:t,assName:n,assMessage:e.data.message})}})}},t.changeReversAssId=function(e){return{type:r.CHANGE_REVERS_ASS_ID,newAssId:e}},t.changeReversAssConfirmShow=function(e){return{type:r.CHANGE_REVERSASS_CONFIRM_SHOW,bool:e}},t.reversAssFetch=function(e){return function(t){(0,o.default)("assRegret","POST",JSON.stringify({assCategory:e.get("assCategory"),oldAssId:e.get("oldAssId"),assId:e.get("assId"),assName:e.get("assName")}),function(e){(0,s.showMessage)(e)&&t({type:r.REVERS_ASS_FETCH})})}},t.changeCurrentPage=function(e,t){return function(n){n({type:r.CHANGE_CURRENT_PAGE_FZHE,assList:e,value:t})}},t.changeMessageMask=function(){return{type:r.CHANGE_ASS_MESSAGEMASK}},t.changeReverseOldName=function(e){return function(t){t({type:r.CHANGE_REVERSE_OLD_NAME,value:e})}},t.changeReverseNewName=function(e){return function(t){t({type:r.CHANGE_REVERSE_NEW_NAME,value:e})}},t.changeAssCategoryName=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"false";return function(i,u){(0,o.default)("changeAssCategoryName","POST",JSON.stringify({oldName:e,newName:t,confirmModifyAnyWay:a}),function(e){(0,s.showMessage)(e)&&(e.data.countMoreThenRestrict?i({type:r.CHANGE_ASS_CATEGORY_MODAL_VISIBLE,visible:!0}):(i({type:r.CHANGE_ASS_CATEGORY_MODAL_VISIBLE,visible:!1}),i({type:r.REVERS_ASS_FETCH}),i(c.getAcListFetch()),i(c.getAssListFetch()),i({type:r.CHANGE_REVERSE_NEW_NAME,value:""}),i({type:r.CHANGE_REVERSE_OLD_NAME,value:""}),i(d(t,n))))})}},t.changeAssCategoryModalVisible=function(e){return function(t){t({type:r.CHANGE_ASS_CATEGORY_MODAL_VISIBLE,visible:e})}}},1324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,n=arguments[1];return((e={},o(e,r.SET_PRINT_VC_INDEX_AND_DATE,function(){return t.set("vcIndex",n.vcIndex).set("year",n.year).set("month",n.month)}),o(e,r.SET_PRINT_STRING,function(){return t.set(n.name,n.value)}),e)[n.type]||function(){return t})()};var a=n(18),r=i(n(1289));i(n(27));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=(0,a.fromJS)({vcIndex:[],year:"",month:"",fromPage:"static"})},1326:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=E(n(47)),i=E(n(14)),o=E(n(37)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(78),n(38);var u=n(1),c=E(u),l=n(18),d=n(17),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(30)),g=(n(22),n(31)),_=E(n(1415)),p=E(n(1327)),m=n(43),A=n(104);function E(e){return e&&e.__esModule?e:{default:e}}var C=(0,d.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.setUploadParam=function(t,n,a){var r=e.props.uploadKeyJson.get("dir");""!=n&&(e.get_suffix(n),r=e.calculateObjectName(n,r));var i={key:r,policy:e.props.uploadKeyJson.get("policy"),OSSAccessKeyId:e.props.uploadKeyJson.get("accessKeyId"),success_action_status:"200",callback:e.props.uploadKeyJson.get("callback"),signature:e.props.uploadKeyJson.get("signature")};t.setOption({url:e.props.uploadKeyJson.get("host"),multipart_params:i}),t.start()},e.callback=function(e,t,n){e.removeFile(t),e.addFile(n)},e.reUploadFile=function(e,t,n){e.removeFile(t.id),e.addFile(n.getNative())},e.get_suffix=function(e){var t=e.lastIndexOf("."),n="";return-1!=t&&(n=e.substring(t)),n},e.calculateObjectName=function(e,t){return t+(new Date).getTime()+"/"+e},e.checkEnclosureExist=function(t){for(var n=e.props.enclosureList?e.props.enclosureList:(0,l.fromJS)([]),a=!1,r=0;r<n.size;r++)if(n.getIn([r,"fileName"])==t.name){a=!0;break}return a},e.dataURLtoBlob=function(e){for(var t=e.split(","),n=(t[0].match(/:(.*?);/)[1],atob(t[1])),a=n.length,r=new Uint8Array(a);a--;)r[a]=n.charCodeAt(a);return new Blob([r],{type:"image/jpeg"})},e.state={uploadingModal:!1,errMessage:"",secondUpload:!1,isClipBoardUpload:!1,compressFileLength:0,clipUploadFile:function(){}},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),s(t,[{key:"componentDidMount",value:function(){var e=this,t=new _.default.Uploader({browse_button:void 0===e.props.id?"browse":e.props.id,drop_element:"drag-area",multi_selection:!0,url:g.ROOTPKT+"/aliyun/oss/callback",filters:{max_file_size:"10mb",prevent_duplicates:!1}});t.init();var n=0,a=0;t.bind("FilesAdded",function(t,a){if(void 0!==e.props.uploadKeyJson.get("checkMoreFj")&&!1===e.props.uploadKeyJson.get("checkMoreFj"))return a.forEach(function(e,n){t.removeFile(e.id)}),void e.setState({uploadingModal:!0,errMessage:"贵公司的附件容量已用完"});if(a.length>0){if(e.state.secondUpload)return e.setUploadParam(t,a[0].name,""),void(1==e.state.compressFileLength?e.setState({secondUpload:!1,compressFileLength:0}):e.setState({compressFileLength:e.state.compressFileLength-1}));if(e.props.dispatch((0,m.switchLoadingMask)()),a.length>9||a.length+e.props.enclosureList.size>9)return o.default.error("最多上传9个附件",3),a.forEach(function(e,n){t.removeFile(e.id)}),void e.props.dispatch((0,m.switchLoadingMask)());for(var r=!1,i=!0,s=!1,u=0;u<a.length;u++){var c=a[u],l=c.name;if(l.indexOf("@")>-1){e.setState({uploadingModal:!0,errMessage:"文件名中不允许包含@符号"}),i=!1,a.forEach(function(e,n){t.removeFile(e.id)}),e.props.dispatch((0,m.switchLoadingMask)());break}if(l.length>40){e.setState({uploadingModal:!0,errMessage:"文件名称不能超过40字符"}),i=!1,a.forEach(function(e,n){t.removeFile(e.id)}),e.props.dispatch((0,m.switchLoadingMask)());break}if(e.checkEnclosureExist(a[u])){e.setState({uploadingModal:!0,errMessage:"文件名已存在"}),i=!1,a.forEach(function(e,n){t.removeFile(e.id)}),e.props.dispatch((0,m.switchLoadingMask)());break}"image"==c.type.substr(0,5)&&c.size>204800&&(s=!0)}if(i){if(n=a.length,e.state.isClipBoardUpload)return void e.setUploadParam(t,"",!1);if(s)e.props.dispatch((0,m.switchLoadingMask)()),f.Confirm({message:"请选择是否原图上传",title:"提示",buttonLabels:["压缩上传","原图上传"],onSuccess:function(n){e.props.dispatch((0,m.switchLoadingMask)()),r=1!==n.buttonIndex;for(var i=function(n){var i=new FileReader,s=new Image,u=document.createElement("canvas"),c=u.getContext("2d");if("image"==a[n].type.substr(0,5)){var l=a[n].getNative();i.readAsDataURL(l),i.onload=function(e){s.src=e.target.result},s.onload=function(){var i=a[n];if(i.size>204800)if(r)try{var l=s.width,d=s.height,f=1*l,g=1*d;u.width=f,u.height=g,c.clearRect(0,0,f,g),c.drawImage(s,0,0,f,g);var _=u.toDataURL("image/jpeg",.3),p=e.dataURLtoBlob(_);p.name=i.name,i.size<p.size?i.size<=2097152?n+1===a.length&&e.setUploadParam(t,"",!1):((0,o.default)("压缩上传失败，仅可上传原图"),a.length):p.size<=2097152?(e.callback(t,i.id,p),e.setState({compressFileLength:e.state.compressFileLength+1,secondUpload:!0}),n+1===a.length&&e.setUploadParam(t,"",!1)):((0,o.default)("压缩上传失败，仅可上传原图"),a.length)}catch(t){a.length,e.setState({uploadingModal:!0,errMessage:"图片压缩异常，不支持该图片压缩"})}else n+1===a.length&&e.setUploadParam(t,"",!1);else n+1===a.length&&e.setUploadParam(t,"",!1)}}else n+1===a.length&&e.setUploadParam(t,"",!1)},s=0;s<a.length;s++)i(s)}});else for(var d=0;d<a.length;d++)d+1===a.length&&e.setUploadParam(t,"",!1)}}}),t.bind("FileUploaded",function(t,r,i){t.removeFile(r.id),a+=1,200==i.status?e.props.uploadEnclosureList([r.name,r,JSON.parse(i.response),a===n]):203==i.status?o.default.info("上传到OSS成功，但是oss访问用户设置的上传回调服务器失败，失败原因是:"+i.response):o.default.info(i.response),a===n&&(a=0,n=0,t.files.forEach(function(e){t.removeFile(e.id)}))}),t.bind("BeforeUpload",function(t,n){e.setUploadParam(t,n.name,!0)}),t.bind("Error",function(t,r){-600==r.code?o.default.info("文件最大不能超过10M"):-601==r.code?o.default.info("不能上传所选择的文件类型"):-602==r.code?o.default.info("这个文件已经上传过一遍了"):(0===r.status?f.Alert("服务器正忙，请稍后再试","确定"):f.Alert("上传出错:"+r.response,"确定"),(0,A.xfnFetchErrorToDeveloper)({title:"上传出错",message:r.status+"-"+r.code+"-"+r.message+"-"+r.requestId+"-"+JSON.stringify(r.file),remark:"附件"},{msgTextSend:g.ROOT+"/msg/text/send"}),(a+=1)===n&&(a=0,n=0,t.files.forEach(function(e){t.removeFile(e.id)}),e.props.dispatch((0,m.switchLoadingMask)())))}),this.clipUploadFile=function(e){t.addFile(e)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.formPage,a=(t.dispatch,t.enclosureList,t.uploadEnclosureList,t.style),o=(t.uploadKeyJson,t.getUploadTokenFetch),s=this.state,l=s.uploadingModal,d=s.errMessage;s.secondUpload,s.isClipBoardUpload;return c.default.createElement(u.Fragment,null,c.default.createElement("div",{className:"enclosure-item enclosure-add-file",style:a,id:"drag-area"},c.default.createElement("a",{className:"enclosure-item-input",id:void 0===this.props.id?"browse":this.props.id,onClick:function(){o(),e.setState({secondUpload:!1,isClipBoardUpload:!1})}}),c.default.createElement(i.default,{type:"plus"}),c.default.createElement(r.default,{title:"上传失败",visible:l,onOk:function(){return e.setState({uploadingModal:!1})},onCancel:function(){return e.setState({uploadingModal:!1})}},c.default.createElement("p",null,d))),c.default.createElement(p.default,{getUploadTokenFetch:o,clipUploadFile:function(t){e.setState({secondUpload:!1,isClipBoardUpload:!0}),e.clipUploadFile(t)},formPage:n}))}}]),t}())||a;t.default=C},1327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=l(n(37)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(38);var o=l(n(1)),s=(n(18),n(17)),u=n(22),c=l(n(1328));function l(e){return e&&e.__esModule?e:{default:e}}var d=(0,s.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.get_suffix=function(e){var t=e.lastIndexOf("."),n="";return-1!=t&&(n=e.substring(t)),n},e.state={clipBoardModalShow:!1,clipBoardFile:"",clipBoardBlob:"",isCustomName:!1,fileName:"",widthHeigthRate:1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"componentDidMount",value:function(){var e=this;document.getElementById(this.props.formPage?this.props.formPage:"clipBoard").addEventListener("paste",function(t){var n=event.clipboardData&&event.clipboardData.items,a=null;if(n&&n.length)for(var i=0;i<n.length;i++)if(-1!==n[i].type.indexOf("image")){a=n[i].getAsFile();break}if(a){console.log("file",a),e.props.getUploadTokenFetch();var o=new FileReader,s=new Image;o.readAsDataURL(a);var u=e;o.onload=function(e){s.src=e.target.result,s.onload=function(){var t=s.width,n=s.height;u.setState({clipBoardFile:a,clipBoardModalShow:!0,clipBoardBlob:e.target.result,widthHeigthRate:t/n})}}}else r.default.info("没有可粘贴的图片")})}},{key:"render",value:function(){var e=this,t=this.props,n=t.formPage,a=(t.dispatch,t.enclosureList,t.uploadEnclosureList,t.style),i=(t.uploadKeyJson,t.getUploadTokenFetch,t.clipUploadFile),s=this.state,l=s.clipBoardModalShow,d=s.clipBoardFile,f=s.clipBoardBlob,g=s.isCustomName,_=s.customName,p=s.widthHeigthRate;return o.default.createElement("div",{className:"enclosure-clipboard-add-file",style:a,id:"drag-area"},o.default.createElement("input",{id:n||"clipBoard",value:"",className:"enclosure-clipboard-add-btn"}),o.default.createElement("div",{className:"enclosure-clipboard-add-fake-btn"},o.default.createElement("p",null,"在此区域内点击右键"),o.default.createElement("p",{className:"enclosure-clipboard-add-fake-btn-text"},"“粘贴”剪贴板中的图片")),o.default.createElement(c.default,{clipBoardModalShow:l,clipBoardFile:d,clipBoardBlob:f,widthHeigthRate:p,onCancel:function(){return e.setState({clipBoardModalShow:!1,isCustomName:!1,customName:""})},onOK:function(){var t="";if(g){if(!_)return r.default.info("请输入自定义名称");if(_.indexOf("@")>-1)return r.default.info("文件名中不允许包含@符号");if(_.length>40)return r.default.info("文件名称不能超过40字符");t=_+".jpg"}else t="粘贴图片"+(new u.DateLib).getFullDate()+".jpg";var n=new File([d],t,{type:d.type});i(n),e.setState({clipBoardModalShow:!1,isCustomName:!1,customName:""})},isCustomName:g,customName:_,changeIsCustomName:function(){e.setState({isCustomName:!g})},changeCustomName:function(t){e.setState({customName:t.target.value})}}))}}]),t}())||a;t.default=d},1328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=l(n(47)),i=l(n(129)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(128);var s=l(n(1)),u=(n(18),n(17)),c=n(127);function l(e){return e&&e.__esModule?e:{default:e}}var d=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.clipBoardModalShow,n=(e.clipBoardFile,e.clipBoardBlob),a=e.onOK,o=e.onCancel,u=e.isCustomName,l=e.customName,d=e.changeIsCustomName,f=e.changeCustomName,g=e.widthHeigthRate;return console.log("widthHeigthRate",g),s.default.createElement(r.default,{title:"上传附件",maskClosable:!1,visible:t,onOk:a,onCancel:o},s.default.createElement("div",{className:"clip-board-preview-img",style:g>=1?{maxHeight:"500px"}:{height:"500px"}},s.default.createElement("img",{id:"clipBoardImg",src:n,style:g>=1?{width:"100%"}:{height:"100%"}})),s.default.createElement("div",{className:"clip-board-preview-name"},s.default.createElement(i.default,{checked:u,onChange:d})," ",s.default.createElement("span",null,"自定义名称"),s.default.createElement(c.XfInput,{className:"clip-board-preview-name-input",style:{display:u?"":"none"},value:l,onChange:f})))}}]),t}())||a;t.default=d},1341:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_LRPZ="INIT_LRPZ",t.CHANGE_VC_ID="CHANGE_VC_ID",t.CHANGE_VOUCHER_DATE="CHANGE_VOUCHER_DATE",t.INSERT_JV_ITEM="INSERT_JV_ITEM",t.DELETE_JV_ITEM="DELETE_JV_ITEM",t.CHANGE_JV_ABSTRACT="CHANGE_JV_ABSTRACT",t.COPY_JV_ABSTRACT="COPY_JV_ABSTRACT",t.CHANGE_JV_DIRECTION="CHANGE_JV_DIRECTION",t.CHANGE_JV_AMOUNT="CHANGE_JV_AMOUNT",t.REFRESH_ACITEM_ASSLIST="REFRESH_ACITEM_ASSLIST",t.CHANGE_JV_AC="CHANGE_JV_AC",t.CHANGE_JV_ASS="CHANGE_JV_ASS",t.CANCLE_ASS_INPUT="CANCLE_ASS_INPUT",t.CHANGE_LRPZ_ASS_INFO="CHANGE_LRPZ_ASS_INFO",t.SHOW_LRPZ_ASS_DISABLE_MODAL="SHOW_LRPZ_ASS_DISABLE_MODAL",t.CHANGE_AC_MODAL_DISPLAY="CHANGE_AC_MODAL_DISPLAY",t.CHANGE_TREE_SELECT_CONTENT="CHANGE_TREE_SELECT_CONTENT",t.REVIEWEDBY_VC="REVIEWEDBY_VC",t.CANCEL_REVIEWEDBY_VC="CANCEL_REVIEWEDBY_VC",t.CLEAR_LRPZ="CLEAR_LRPZ",t.TEMPORARY_SAVE_FETCH="TEMPORARY_SAVE_FETCH",t.GET_LABEL_FETCH="GET_LABEL_FETCH",t.CHANGE_TAG_NAME="CHANGE_TAG_NAME",t.DELETE_UPLOAD_IMG_URL="DELETE_UPLOAD_IMG_URL",t.CHANGE_ENCLOSURE_LIST="CHANGE_ENCLOSURE_LIST",t.GET_UPLOAD="GET_UPLOAD",t.CHANGE_LR_AC_MODAL_DISPLAY="CHANGE_LR_AC_MODAL_DISPLAY",t.CHANGE_LR_AC_MODAL_CLEAR="CHANGE_LR_AC_MODAL_CLEAR",t.CHANGE_LR_ACID_TEXT="CHANGE_LR_ACID_TEXT",t.CHANGE_LR_ACNAME_TEXT="CHANGE_LR_ACNAME_TEXT",t.CHANGE_LR_CATEGORY_TEXT="CHANGE_LR_CATEGORY_TEXT",t.CHANGE_LR_AC_DIRECTON_TEXT="CHANGE_LR_AC_DIRECTON_TEXT",t.CHANGE_LR_AMOUNT_TEXT="CHANGE_LR_AMOUNT_TEXT",t.CHANGE_LR_AC_UNIT_TEXT="CHANGE_LR_AC_UNIT_TEXT",t.CHANGE_LR_FZHS_MODAL_DISPLAY="CHANGE_LR_FZHS_MODAL_DISPLAY",t.CHANGE_LR_ASS_CATEGORY="CHANGE_LR_ASS_CATEGORY",t.CHANGE_LR_FZHS_MODAL_CLEAR="CHANGE_LR_FZHS_MODAL_CLEAR",t.CHANGE_LR_ASS_ID="CHANGE_LR_ASS_ID",t.CHANGE_LR_ASS_NAME="CHANGE_LR_ASS_NAME",t.GET_AMOUNT_DATA="GET_AMOUNT_DATA",t.GET_AMOUNT_TYPE_MXB_DATA="GET_AMOUNT_TYPE_MXB_DATA",t.CHANGE_JV_COUNT="CHANGE_JV_COUNT",t.CHANGE_JV_PRICE="CHANGE_JV_PRICE",t.AUTO_CALCULATE="AUTO_CALCULATE",t.GET_AC_CLOSE_BALANCE="GET_AC_CLOSE_BALANCE",t.GET_FC_LIST_DATA_FETCH="GET_FC_LIST_DATA_FETCH",t.GET_FC_LIST_DATA_MXB_FETCH="GET_FC_LIST_DATA_MXB_FETCH",t.CHANGE_JV_ITEM_NUMBER="CHANGE_JV_ITEM_NUMBER",t.CHANGE_JV_STANDAR_AMOUNT="CHANGE_JV_STANDAR_AMOUNT",t.CHANGE_JV_EXCHANGE="CHANGE_JV_EXCHANGE",t.AUTO_CALCULATE_ALL="AUTO_CALCULATE_ALL",t.BEFORE_LR_VC_IMPORT="BEFORE_LR_VC_IMPORT",t.CLOSE_LR_IMPORT_CONTENT="CLOSE_LR_IMPORT_CONTENT",t.AFTER_LR_VC_IMPORT="AFTER_LR_VC_IMPORT",t.AFTER_COPY_CLICL="AFTER_COPY_CLICL",t.JUDGE_TITLE_FIXED="JUDGE_TITLE_FIXED",t.SHORT_CUT="SHORT_CUT",t.CHANGE_JV_DIRECTION_BY_KEY="CHANGE_JV_DIRECTION_BY_KEY",t.CHANGE_FOCUS_INPUT="CHANGE_FOCUS_INPUT",t.AFTER_GET_ASS_FETCH="AFTER_GET_ASS_FETCH",t.AFTER_GET_AC_LIST_FETCH="AFTER_GET_AC_LIST_FETCH",t.GET_PERIOD_FETCH="GET_PERIOD_FETCH",t.INIT_PZ_BOMB="INIT_PZ_BOMB",t.PZBOMB_REVIEWEDBY_VC="PZBOMB_REVIEWEDBY_VC",t.CANCEL_PZBOMB_REVIEWEDBY_VC="CANCEL_PZBOMB_REVIEWEDBY_VC",t.CHANGE_VC_ENCLOSURE_COUNT_USER="CHANGE_VC_ENCLOSURE_COUNT_USER",t.GET_LRPZ_IMPORT_PROGRESS="GET_LRPZ_IMPORT_PROGRESS",t.CHANGE_LRPZ_MESSAGEMASK="CHANGE_LRPZ_MESSAGEMASK",t.AFTER_GET_UPLOAD_SIGNATURE="AFTER_GET_UPLOAD_SIGNATURE"},1355:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(37),i=(a=r)&&a.__esModule?a:{default:a};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments[1];return((e={},d(e,u.INIT_LRPZ,function(){var e=t.getIn(["flags","titleFixed"]);if("initAndGetLastVcIdFetch"==n.strJudgeEnter||"getLastVcIdFetch"==n.strJudgeEnter||"initAndGetLastVcIdFetchAndVcList"==n.strJudgeEnter){if("initAndGetLastVcIdFetch"==n.strJudgeEnter&&(t=f.setIn(["flags","titleFixed"],e)),"initAndGetLastVcIdFetchAndVcList"==n.strJudgeEnter){var a=t.getIn(["flags","voucherIndexList"]),r=t.getIn(["flags","voucherIndexList"]).size;a=a.indexOf(n.data.voucherValueStart)>-1?a.set(r,n.data.voucherValueEnd):(a=a.set(r,n.data.voucherValueStart)).set(r+1,n.data.voucherValueEnd),a=(0,s.arrUniq)(a.toJS()),t=(t=f.setIn(["flags","titleFixed"],e).setIn(["flags","voucherIndexList"],(0,o.fromJS)(a))).setIn(["flags","voucherIdx"],t.getIn(["flags","voucherIndexList"]).size-1)}return"getLastVcIdFetch"!=n.strJudgeEnter&&(t=t.set("enclosureList",(0,o.fromJS)([]))),t.set("month",n.data.vcDate.getMonth()).set("year",n.data.vcDate.getYear()).set("vcDate",n.data.vcDate.toString()).set("vcIndex",n.data.receivedData)}if("getVcFetch"==n.strJudgeEnter||"getVc"==n.strJudgeEnter){var i=t.getIn(["flags","currencyList"]),u=t.getIn(["flags","currencyListArr"]),c=n.data.vcIndexList&&0!=(0,o.fromJS)(n.data.vcIndexList).size?(0,o.fromJS)(n.data.vcIndexList):t.getIn(["flags","voucherIndexList"]),l=""!==n.data.changedIdx?n.data.changedIdx:t.getIn(["flags","voucherIdx"]);if("getVc"==n.strJudgeEnter){var d=c.get(l);return g((t=f.setIn(["flags","titleFixed"],e).set("vcDate",d.split("_")[0]).set("vcIndex",d.split("_")[1]).set("year",d.split("_")[0].substr(0,4)).set("month",d.split("_")[0].substr(5,2)).setIn(["flags","voucherIndexList"],c)).setIn(["flags","voucherIdx"],l).setIn(["flags","currencyList"],i).setIn(["flags","currencyListArr"],u))}if(n.data){var _=(0,o.fromJS)(n.data.receivedData.jvlist);if(_.size<4)for(var p=_.size,m=0;m<4-p;m++)console.log(m),_=_.push((0,o.fromJS)({jvdirection:"",jvabstract:"",acid:"",acfullname:"",jvamount:"",asslist:[],acunitOpen:"0",jvcount:"",price:"",jvunit:"",fcStatus:"0",fcNumber:"",exchange:"",standardAmount:""}));return g((t=n.data.receivedData?f.set("oldVcIndex",n.data.receivedData.vcindex).set("oldYear",n.data.receivedData.year).set("oldMonth",n.data.receivedData.month).set("createdBy",n.data.receivedData.createdby).set("closedBy",n.data.receivedData.closedby).set("reviewedBy",n.data.receivedData.reviewedby).set("vcDate",n.data.receivedData.vcdate).set("vcIndex",n.data.receivedData.vcindex).set("year",n.data.receivedData.year).set("month",n.data.receivedData.month).set("createdTime",n.data.receivedData.createdtime).set("modifiedTime",n.data.receivedData.modifiedtime).setIn(["flags","voucherIndexList"],c).set("jvList",_).set("enclosureList",(0,o.fromJS)(n.data.receivedData.enclosureList)).set("enclosureCountUser",n.data.receivedData.enclosureCountUser):f.setIn(["flags","titleFixed"],e)).setIn(["flags","voucherIdx"],l).setIn(["flags","currencyList"],i).setIn(["flags","currencyListArr"],u))}}if("oneKeyCollection"==n.strJudgeEnter)return g(f.set("jvList",n.data.jvList).set("month",n.data.vcDate.getMonth()).set("year",n.data.vcDate.getYear()).set("vcDate",n.data.vcDate.toString()).set("vcIndex",n.data.receivedData));if("getDraftItemFetch"==n.strJudgeEnter||"getVcIdAndGetDraftItemFetch"==n.strJudgeEnter){var A=n.data.receivedData.jvlist;if(A.length<4){for(var E=A.length,C=[],T=0;T<4-E;T++)console.log(T),C.push({jvdirection:"",jvabstract:"",acid:"",acfullname:"",jvamount:"",asslist:[],acunitOpen:"0",jvcount:"",price:"",jvunit:"",fcStatus:"0",fcNumber:"",exchange:"",standardAmount:""});A=A.concat(C)}return t=g(f.set("jvList",(0,o.fromJS)(A)).set("vcDate",n.data.receivedData.vcdate).set("vcIndex",n.data.receivedData.vcindex).set("year",n.data.receivedData.year).set("month",n.data.receivedData.month).setIn(["flags","draftList"],(0,o.fromJS)(n.data.draftList)||t.getIn(["flags","draftList"])).setIn(["flags","isEnterDraft"],!0).setIn(["flags","locked"],n.data.receivedData.locked).setIn(["flags","changeDraftIdx"],n.data.changeDraftIdx).set("vcKey",n.data.vcKey).set("enclosureCountUser",n.data.receivedData.enclosureCountUser)),"getVcIdAndGetDraftItemFetch"==n.strJudgeEnter&&(t=t.set("month",n.data.vcDate.getMonth()).set("year",n.data.vcDate.getYear()).set("vcDate",n.data.vcDate.toString()).set("vcIndex",n.data.vcIndex).set("enclosureCountUser",n.data.receivedData.enclosureCountUser)),t}return f}),d(e,u.CHANGE_VC_ID,function(){if(/^-?[1-9]\d*$/g.test(n.vcIndex)){if(n.vcIndex.toString().length>c.LRPZ_VCID_LENGTH)return i.default.warn("凭证号位数不能超过"+c.LRPZ_VCID_LENGTH+"位"),t;t=t.set("vcIndex",n.vcIndex)}else t=t.set("vcIndex",""),i.default.warn("凭证号只能是整数");return t}),d(e,u.CHANGE_VOUCHER_DATE,function(){return t.set("vcDate",n.vcDate)}),d(e,u.INSERT_JV_ITEM,function(){return t.update("jvList",function(e){return e.insert(n.idx+1,f.getIn(["jvList",0]))}).setIn(["jvList",n.idx+1,"isInsert"],"true")}),d(e,u.DELETE_JV_ITEM,function(){return g(t.get("jvList").size>2?t.deleteIn(["jvList",n.idx]):t)}),d(e,u.CHANGE_JV_ABSTRACT,function(){var e=n.jvAbstract;return n.bIfTrueLostFocus&&e.length>c.LRPZ_ABSTRACT_LENGTH&&i.default.warn("摘要长度不能超过"+c.LRPZ_ABSTRACT_LENGTH+"个字符"),t.setIn(["jvList",n.idx,"jvabstract"],e)}),d(e,u.COPY_JV_ABSTRACT,function(){return""==t.getIn(["jvList",n.idx,"jvabstract"])?t.updateIn(["jvList",n.idx],function(e){return e.set("jvabstract",t.getIn(["jvList",n.idx-1,"jvabstract"])).set("copy",!t.getIn(["jvList",n.idx,"copy"]))}):t}),d(e,u.CHANGE_JV_DIRECTION,function(){return g(t.updateIn(["jvList",n.idx],function(e){return e.get("jvdirection")==n.jvDirection?e:e.set("jvdirection",n.jvDirection).set("jvamount","")}))}),d(e,u.CHANGE_JV_AMOUNT,function(){if(t=t.setIn(["jvlist",n.idx,"jvdirection"],n.jvDirection),n.amount=(0,s.ToCDB)(n.amount),"="==n.amount||"＝"==n.amount){var e=(t=g(t.setIn(["jvList",n.idx,"jvamount"],0))).getIn(["flags","totalBalance"]);return e?g(t.setIn(["jvList",n.idx,"jvamount"],"credit"==t.getIn(["jvList",n.idx,"jvdirection"])?e+"":-e+"")):t}return/^[-\d]\d*\.?\d{0,2}$/g.test(n.amount)&&parseInt(n.amount).toString().replace(/-/,"").length<c.LRPZ_MONEY_LENGTH||""===n.amount?g(t.setIn(["jvList",n.idx,"jvamount"],n.amount)):t}),d(e,u.REFRESH_ACITEM_ASSLIST,function(){var e=n.idx.split("-")[1],a=n.newAsslist,r=t.getIn(["jvList",e,"asslist"]),i=[];return n.assDropListFull?a.forEach(function(e){var t=r.filter(function(t){return t.get("asscategory")==e.get("asscategory")});t.size&&t.getIn([0,"assid"])?i.push({asscategory:e.get("asscategory"),assid:t.getIn([0,"assid"]),assname:t.getIn([0,"assname"])}):i.push({asscategory:e.get("asscategory")})}):a.size<r.size&&a.forEach(function(e){var t=r.filter(function(t){return t.get("asscategory")==e.get("asscategory")});t.size&&t.getIn([0,"assid"])?i.push({asscategory:e.get("asscategory"),assid:t.getIn([0,"assid"]),assname:t.getIn([0,"assname"])}):i.push({asscategory:e.get("asscategory")})}),t=i.length?t.updateIn(["jvList",e,"asslist"],function(e){return(0,o.fromJS)(i)}):t.updateIn(["jvList",e],function(e){return e.set("acid","").set("acfullname","").set("asslist",(0,o.fromJS)([]))})}),d(e,u.CHANGE_JV_AC,function(){if(void 0===t.getIn(["jvList",n.idx]))return i.default.info("录入异常，请刷新"),t;var e=[];return n.assCategorys&&n.assCategorys.forEach(function(t){return e.push({asscategory:t})}),"1"==t.getIn(["jvList",n.idx,"acunitOpen"])&&(t=t.updateIn(["jvList",n.idx],function(e){return e.set("acunitOpen","0").set("jvcount","").set("price","").set("jvunit","")})),"1"==t.getIn(["jvList",n.idx,"fcStatus"])&&(t=t.updateIn(["jvList",n.idx],function(e){return e.set("fcStatus","0").set("fcNumber","").set("standardAmount","").set("exchange","")})),(t=t.setIn(["jvList",n.idx,"closingbalance"],void 0)).update("flags",function(t){return t.set("focusRef","select-"+n.idx).set("assDropListFull",!!e.length)}).updateIn(["jvList",n.idx],function(t){return t.set("acid",n.acId).set("acname",n.acName).set("acfullname",n.acFullName).set("asslist",(0,o.fromJS)(e))}).setIn(["jvList",n.idx,"acunitOpen"],n.acunitOpen)}),d(e,u.CHANGE_JV_ASS,function(){var e=n.value.split(c.ASS_ID_AND_NAME_CONNECT);return(t=t.updateIn(["jvList",n.idx,"asslist"],function(t){return t.map(function(t){return t.get("asscategory")==n.assCategory?t.set("assid",e[0]).set("assname",e[1]):t})})).setIn(["flags","assDropListFull"],t.getIn(["jvList",n.idx,"asslist"]).some(function(e){return!e.get("assid")}))}),d(e,u.CANCLE_ASS_INPUT,function(){return"1"==(t=t.getIn(["jvList",n.idx])?t.updateIn(["jvList",n.idx],function(e){return e.set("acid","").set("acfullname","").update("asslist",function(e){return e.clear()})}):t).getIn(["jvList",n.idx,"acunitOpen"])&&(t=t.updateIn(["jvList",n.idx],function(e){return e.set("acunitOpen","0").set("jvcount","").set("price","").set("jvunit","")})),t.update("flags",function(e){return e.set("assDropListFull",!1)})}),d(e,u.SHOW_LRPZ_ASS_DISABLE_MODAL,function(){return t.setIn(["flags","showAssDisableModal"],!t.getIn(["flags","showAssDisableModal"])).setIn(["flags","showAssDisableInfo"],(0,o.fromJS)([n.asscategory+"中所有的核算项目为禁用状态，您可以：","1、账套管理员在“辅助核算设置”页面中，启用已有的核算项目；","2、在当前页面，“新增”新的核算项目"]))}),d(e,u.CHANGE_AC_MODAL_DISPLAY,function(){return t.updateIn(["flags","acModalDisplay"],function(e){return!1===e&&n.idx})}),d(e,u.CHANGE_TREE_SELECT_CONTENT,function(){return t.updateIn(["flags","acModalSelectedContent"],function(e){return n.info||e})}),d(e,u.REVIEWEDBY_VC,function(){return t.set("reviewedBy",n.reviewedBy)}),d(e,u.CANCEL_REVIEWEDBY_VC,function(){return t.set("reviewedBy","")}),d(e,u.CLEAR_LRPZ,function(){return t.set("jvList",f.get("jvList")).setIn(["flags","debitTotal"],"0").setIn(["flags","creditTotal"],"0").set("enclosureList",(0,o.fromJS)([]))}),d(e,u.TEMPORARY_SAVE_FETCH,function(){return t.set("vcKey",n.receivedData)}),d(e,u.GET_LABEL_FETCH,function(){return t=t.set("label",n.receivedData.data).set("tagModal",!0)}),d(e,u.CHANGE_TAG_NAME,function(){return t.get("enclosureList").map(function(e,a){a==n.index&&(t=t.setIn(["enclosureList",a,"label"],n.value))}),t=t.set("tagModal",!1)}),d(e,u.DELETE_UPLOAD_IMG_URL,function(){var e=[];return t.get("needDeleteUrl").map(function(t){e.push(t)}),t.get("enclosureList").map(function(a,r){r==n.index&&(e.push(t.getIn(["enclosureList",r]).set("beDelete",!0)),t=t.deleteIn(["enclosureList",r]))}),t=t.set("enclosureCountUser",t.get("enclosureList").size).set("needDeleteUrl",(0,o.fromJS)(e))}),d(e,u.CHANGE_ENCLOSURE_LIST,function(){var e=[];return t.get("enclosureList").map(function(t){e.push(t)}),n.imgArr.forEach(function(t){e.push(t)}),t=t.set("enclosureList",(0,o.fromJS)(e)).set("enclosureCountUser",e.length)}),d(e,u.GET_UPLOAD,function(){return t=t.set("enclosureList",(0,o.fromJS)(n.receivedData))}),d(e,u.CHANGE_VC_ENCLOSURE_COUNT_USER,function(){return t=t.set("enclosureCountUser",n.value)}),d(e,u.CHANGE_LR_AC_MODAL_DISPLAY,function(){return t.updateIn(["flags","lrAcModalDisplay"],function(e){return!e})}),d(e,u.CHANGE_LR_AC_MODAL_CLEAR,function(){return t.set("increaseAcItem",f.get("increaseAcItem")).updateIn(["flags","lrAcModalDisplay"],function(e){return!e})}),d(e,u.CHANGE_LR_ACID_TEXT,function(){var e=n.acId.length;if(!/^\d*$/.test(n.acId)||11==e)return t;if(e>c.MIN_AC_ID_LENGTH&&e%2==0){var a=n.acId.substr(0,e-2),r=n.acList.find(function(e){return e.get("acid")==a});t=t.update("increaseAcItem",function(e){return e.set("upperid",r?r.get("acid"):"").set("upperinfo",r?r.get("acid")+" "+r.get("acname"):"无").set("category",r?r.get("category"):"").update("direction",function(e){return r?r.get("direction"):e})})}else e<=c.MIN_AC_ID_LENGTH&&(t=t.update("increaseAcItem",function(e){return e.set("upperid","").set("upperinfo","无").set("category","")}));return t.setIn(["increaseAcItem","acid"],n.acId)}),d(e,u.CHANGE_LR_ACNAME_TEXT,function(){return t.setIn(["increaseAcItem","acname"],n.acName)}),d(e,u.CHANGE_LR_CATEGORY_TEXT,function(){var e={"流动资产":"资产","非流动资产":"资产","流动负债":"负债","非流动负债":"负债","所有者权益":"权益","成本":"成本"}[n.category]||"损益";return t.setIn(["increaseAcItem","category"],n.category).setIn(["flags","accategory"],e)}),d(e,u.CHANGE_LR_AC_DIRECTON_TEXT,function(){return t.updateIn(["increaseAcItem","direction"],function(e){return"credit"===e?"debit":"credit"})}),d(e,u.CHANGE_LR_AMOUNT_TEXT,function(){return t="0"==t.getIn(["increaseAcItem","acunitOpen"])?t.setIn(["increaseAcItem","acunitOpen"],"1"):t.setIn(["increaseAcItem","acunitOpen"],"0").setIn(["increaseAcItem","acunit"],"")}),d(e,u.CHANGE_LR_AC_UNIT_TEXT,function(){return t.updateIn(["increaseAcItem","acunit"],function(e){return n.unit})}),d(e,u.CHANGE_LR_FZHS_MODAL_DISPLAY,function(){return t.updateIn(["flags","lrfzhsModalDisplay"],function(e){return!e})}),d(e,u.CHANGE_LR_ASS_CATEGORY,function(){return t.setIn(["ass","asscategory"],n.asscategory)}),d(e,u.CHANGE_LR_FZHS_MODAL_CLEAR,function(){return t.set("ass",f.get("ass")).updateIn(["flags","lrfzhsModalDisplay"],function(e){return!e})}),d(e,u.CHANGE_LR_ASS_ID,function(){return/^[A-Za-z0-9]*$/g.test(n.assId)?t.setIn(["ass","assid"],n.assId):t}),d(e,u.CHANGE_LR_ASS_NAME,function(){return t.setIn(["ass","assname"],n.assName)}),d(e,u.GET_AMOUNT_DATA,function(){return"1"==n.receivedData.acunitOpen?((t=t.setIn(["jvList",n.idx,"jvunit"],n.receivedData.acunit).setIn(["jvList",n.idx,"price"],n.receivedData.price).setIn(["jvList",n.idx,"acunitOpen"],n.receivedData.acunitOpen)).getIn(["jvList",n.idx,"jvdirection"])||(t=t.setIn(["jvList",n.idx,"jvdirection"],n.receivedData.direction)),t):((t=t.setIn(["jvList",n.idx,"jvunit"],"").setIn(["jvList",n.idx,"price"],"").setIn(["jvList",n.idx,"acunitOpen"],"0")).getIn(["jvList",n.idx,"jvdirection"])||(t=t.setIn(["jvList",n.idx,"jvdirection"],n.receivedData.direction)),t)}),d(e,u.GET_AMOUNT_TYPE_MXB_DATA,function(){return"1"==n.receivedData.acunitOpen?t=t.setIn(["jvList",n.idx,"jvunit"],n.receivedData.acunit).setIn(["jvList",n.idx,"price"],"").setIn(["jvList",n.idx,"acunitOpen"],n.receivedData.acunitOpen).setIn(["jvList",n.idx,"jvcount"],""):t}),d(e,u.CHANGE_JV_COUNT,function(){var e=new RegExp("^[-\\d]\\d*\\.?\\d{0,"+Number(n.unitDecimalCount)+"}$","g");return(e.test(n.jvCount)||""==n.jvCount)&&(t=t.setIn(["jvList",n.idx,"jvcount"],n.jvCount)),t}),d(e,u.CHANGE_JV_PRICE,function(){var e=new RegExp("^[-\\d]\\d*\\.?\\d{0,2}$","g");return(e.test(n.jvPrice)||""==n.jvPrice)&&(t=t.setIn(["jvList",n.idx,"price"],n.jvPrice)),t}),d(e,u.AUTO_CALCULATE,function(){var e=t.getIn(["jvList",n.idx,"price"]),a=t.getIn(["jvList",n.idx,"jvcount"]),r=t.getIn(["jvList",n.idx,"jvamount"]);if("count"==n.value||"price"==n.value)if(Number(a)&&Number(e))Number(r)<0&&a?a=-Math.abs(a):Number(r)>0&&a&&(a=Math.abs(a)),a=Number(a)%1==0?Math.floor(a):parseFloat(Number(a).toFixed(n.unitDecimalCount)),e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),t=t.setIn(["jvList",n.idx,"price"],e).setIn(["jvList",n.idx,"jvcount"],a).setIn(["jvList",n.idx,"jvamount"],(a*e).toFixed(2));else if(""==e&&a&&r)e=r/a,e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),t=t.setIn(["jvList",n.idx,"price"],e);else{if(0==a||!r)return t;e=r/a,e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),t=t.setIn(["jvList",n.idx,"price"],e)}else if("amount"==n.value){if(!a||!r)return t;Number(r)<0&&a?a=-Math.abs(a):Number(r)>0&&a&&(a=Math.abs(a)),e=r/a,e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),t=t.setIn(["jvList",n.idx,"price"],e).setIn(["jvList",n.idx,"jvcount"],a)}return g(t)}),d(e,u.GET_AC_CLOSE_BALANCE,function(){var e=n.receivedData.closingBalance;return t.setIn(["jvList",n.idx,"closingbalance"],e)}),d(e,u.GET_FC_LIST_DATA_FETCH,function(){var e=(0,o.fromJS)(n.receivedData),a=[];e.map(function(e,t){return a.push(e.get("fcNumber"))});var r=e.filter(function(e){return"1"==e.get("standard")}),i=r.getIn([0,"fcNumber"]),s=r.getIn([0,"exchange"]);return"modify"!=n.idx&&(t=t.setIn(["jvList",n.idx,"fcStatus"],"1").setIn(["jvList",n.idx,"fcNumber"],i).setIn(["jvList",n.idx,"exchange"],s).setIn(["jvList",n.idx,"jvdirection"],"debit")),t=t.setIn(["flags","currencyList"],e).setIn(["flags","currencyListArr"],a)}),d(e,u.GET_FC_LIST_DATA_FETCH,function(){var e=(0,o.fromJS)(n.receivedData),a=[];e.map(function(e,t){return a.push(e.get("fcNumber"))});var r=e.filter(function(e){return"1"==e.get("standard")}),i=r.getIn([0,"fcNumber"]),s=r.getIn([0,"exchange"]);return"modify"!=n.idx&&(t=t.setIn(["jvList",n.idx,"fcStatus"],"1").setIn(["jvList",n.idx,"fcNumber"],i).setIn(["jvList",n.idx,"exchange"],s).setIn(["jvList",n.idx,"jvdirection"],"debit")),t=t.setIn(["flags","currencyList"],e).setIn(["flags","currencyListArr"],a)}),d(e,u.GET_FC_LIST_DATA_MXB_FETCH,function(){var e=(0,o.fromJS)(n.receivedData),a=[];return e.map(function(e,t){return a.push(e.get("fcNumber"))}),t=t.setIn(["flags","currencyList"],e).setIn(["flags","currencyListArr"],a)}),d(e,u.CHANGE_JV_ITEM_NUMBER,function(){var e=t.getIn(["jvList",n.idx,"fcNumber"]),a=t.getIn(["flags","currencyListArr"]),r=a.indexOf(e);if((r="pre"==n.value?r-1:r+1)>=0&&r<=a.length-1){var i=a[r],o=t.getIn(["flags","currencyList"]).filter(function(e){return e.get("fcNumber")==i}).getIn(["0","exchange"]);t=t.setIn(["jvList",n.idx,"fcNumber"],i).setIn(["jvList",n.idx,"exchange"],o)}return t}),d(e,u.CHANGE_JV_STANDAR_AMOUNT,function(){return t.setIn(["jvList",n.idx,"standardAmount"],n.value)}),d(e,u.CHANGE_JV_EXCHANGE,function(){return t.setIn(["jvList",n.idx,"exchange"],n.value)}),d(e,u.AUTO_CALCULATE_ALL,function(){var e=t.getIn(["jvList",n.idx,"price"]),a=t.getIn(["jvList",n.idx,"jvcount"]),r=t.getIn(["jvList",n.idx,"standardAmount"]),i=t.getIn(["jvList",n.idx,"exchange"]),o=t.getIn(["jvList",n.idx,"jvamount"]);return e&&a&&r&&i?"count"==n.value?(a=_(a,o),r=_(r,o),o=(a*e).toFixed(2),i=o/r):"price"==n.value?(o=(a*e).toFixed(2),i=o/r):"standardAmount"==n.value?(a=_(a,o),r=_(r,o),o=(r*i).toFixed(2),e=o/a):"exchange"==n.value?(o=(r*i).toFixed(2),e=o/a):"amount"==n.value&&(a=_(a,o),r=_(r,o),o&&(e=Number(o)/a,i=Number(o)/r)):"count"==n.value||"price"==n.value?(Number(a)&&e?(a=_(a,o),o=(Number(a)*e).toFixed(2)):""==e&&a&&o?e=o/a:0!=a&&o?e=o/a:t=t,Number(r)&&(i=o/r)):"standardAmount"==n.value||"exchange"==n.value?(Number(r)&&i?(r=_(r,o),o=(Number(r)*i).toFixed(2)):""==i&&r&&o?(i=(i=o/r)%1==0?Math.floor(i):parseFloat(i.toFixed(4)),t=t.setIn(["jvList",n.idx,"exchange"],i)):r&&o?i=o/r:t=t,Number(a)&&(e=o/a)):"amount"==n.value&&(a=_(a,o),r=_(r,o),o&&(!r&&a?e=Number(o)/a:r&&!a?i=Number(o)/r:r&&a&&(e=Number(o)/a,i=Number(o)/r))),a=Number(a)%1==0?Math.floor(a):parseFloat(Number(a).toFixed(n.unitDecimalCount)),r=Number(r)%1==0?Math.floor(r):parseFloat(Number(r).toFixed(2)),e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),i=Number(i)%1==0?Math.floor(i):parseFloat(Number(i).toFixed(4)),g(t=t.setIn(["jvList",n.idx,"standardAmount"],0===r?"":r).setIn(["jvList",n.idx,"exchange"],i).setIn(["jvList",n.idx,"price"],e).setIn(["jvList",n.idx,"jvcount"],a).setIn(["jvList",n.idx,"jvamount"],o))}),d(e,u.BEFORE_LR_VC_IMPORT,function(){return t.setIn(["flags","showLrModalMask"],!0)}),d(e,u.CLOSE_LR_IMPORT_CONTENT,function(){return t=t.setIn(["importProgressInfo","message"],"").setIn(["importProgressInfo","progress"],0).setIn(["importProgressInfo","successList"],(0,o.fromJS)([])).setIn(["importProgressInfo","failList"],(0,o.fromJS)([])).setIn(["importProgressInfo","timestamp"],"").setIn(["importProgressInfo","accessToken"],"").setIn(["flags","showLrModalMask"],!1).setIn(["flags","lrIframeload"],!1).set("importResponList",f.get("importResponList")).set("message","")}),d(e,u.AFTER_LR_VC_IMPORT,function(){return t=n.receivedData.code?t.setIn(["flags","lrIframeload"],!0).set("message",(0,o.fromJS)(n.receivedData.message)):t.set("importResponList",(0,o.fromJS)(n.receivedData.data)).setIn(["flags","lrIframeload"],!0).set("message",(0,o.fromJS)(n.receivedData.message))}),d(e,u.AFTER_COPY_CLICL,function(){return i.default.success("复制成功"),g(f.set("jvList",n.jvList))}),d(e,u.JUDGE_TITLE_FIXED,function(){return t.updateIn(["flags","titleFixed"],function(e){return!e})}),d(e,u.SHORT_CUT,function(){return t.updateIn(["flags","shortCut"],function(e){return!e})}),d(e,u.CHANGE_JV_DIRECTION_BY_KEY,function(){return"debit"==n.direction?t=t.setIn(["jvList",n.idx,"jvdirection"],"credit"):"credit"==n.direction&&(t=t.setIn(["jvList",n.idx,"jvdirection"],"debit")),t.getIn(["flags","focusRef"])=="cr-"+n.idx?t=t.setIn(["flags","focusRef"],"de-"+n.idx):t.getIn(["flags","focusRef"])=="de-"+n.idx&&(t=t.setIn(["flags","focusRef"],"cr-"+n.idx)),g(t)}),d(e,u.CHANGE_FOCUS_INPUT,function(){var e=t.getIn(["flags","focusRef"]),a=e.split("-"),r=Number(a[1]);return n.ref===c.SHIFT_KEY_CODE?t.updateIn(["flags","focusBack"],function(e){return!e}):n.ref===c.ENTER_KEY_CODE&&(t.getIn(["jvList",r,"asslist"])||[]).some(function(e){return!e.get("assid")})?t:"string"==typeof n.ref?t.setIn(["flags","focusRef"],n.ref):("abstract"==(e=t.getIn(["flags","focusBack"])?{abstract:function(){return r?["cr",r-1].join("-"):e},select:function(){return["abstract",r].join("-")},amount:function(){return["select",r].join("-")},price:function(){return["amount",r].join("-")},standardAmount:function(){return"1"==t.getIn(["jvList",r,"acunitOpen"])?["price",r].join("-"):["select",r].join("-")},exchange:function(){return["standardAmount",r].join("-")},de:function(){return"1"==t.getIn(["jvList",r,"fcStatus"])?["exchange",r].join("-"):"1"==t.getIn(["jvList",r,"acunitOpen"])?["price",r].join("-"):["select",r].join("-")},cr:function(){return["de",r].join("-")}}[a[0]]():{abstract:function(){return["select",r].join("-")},select:function(){return"1"==t.getIn(["jvList",r,"acunitOpen"])?["amount",r].join("-"):"1"==t.getIn(["jvList",r,"fcStatus"])?["standardAmount",r].join("-"):["de",r].join("-")},amount:function(){return["price",r].join("-")},price:function(){return"1"==t.getIn(["jvList",r,"fcStatus"])?["standardAmount",r].join("-"):["de",r].join("-")},standardAmount:function(){return["exchange",r].join("-")},exchange:function(){return["de",r].join("-")},de:function(){return["cr",r].join("-")},cr:function(){return["abstract",r+1].join("-")}}[a[0]]()).split("-")[0]&&""==t.getIn(["jvList",Number(e.split("-")[1]),"jvabstract"])&&(t=t.setIn(["jvList",Number(e.split("-")[1]),"jvabstract"],t.getIn(["jvList",Number(e.split("-")[1]-1),"jvabstract"])).setIn(["jvList",Number(e.split("-")[1]),"copy"],!t.getIn(["jvList",Number(e.split("-")[1]),"copy"]))),t.setIn(["flags","focusRef"],e))}),d(e,u.GET_LRPZ_IMPORT_PROGRESS,function(){return t=t.setIn(["importProgressInfo","message"],n.receivedData.message).setIn(["importProgressInfo","progress"],n.receivedData.data.progress).setIn(["importProgressInfo","successList"],(0,o.fromJS)(n.receivedData.data.successList)).setIn(["importProgressInfo","failList"],(0,o.fromJS)(n.receivedData.data.failList)).setIn(["importProgressInfo","timestamp"],(0,o.fromJS)(n.receivedData.data.timestamp)).setIn(["importProgressInfo","accessToken"],(0,o.fromJS)(n.accessToken))}),d(e,u.CHANGE_LRPZ_MESSAGEMASK,function(){return t=t.setIn(["importProgressInfo","message"],"").setIn(["importProgressInfo","progress"],0).setIn(["importProgressInfo","successList"],(0,o.fromJS)([])).setIn(["importProgressInfo","failList"],(0,o.fromJS)([])).setIn(["importProgressInfo","timestamp"],"").setIn(["importProgressInfo","accessToken"],"").setIn(["flags","showLrModalMask"],!1)}),e)[n.type]||function(){return t})()},n(38);var o=n(18),s=n(22),u=l(n(1341)),c=l(n(27));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.fromJS=o.fromJS;var f=(0,o.fromJS)({flags:{focusBack:!1,assDropListFull:!1,acModalDisplay:!1,lrfzhsModalDisplay:!1,lrAcModalDisplay:!1,showLrModalMask:!1,lrIframeload:!1,shortCut:!1,titleFixed:!0,isEnterDraft:!1,changeDraftIdx:0,draftList:[],locked:"",focusRef:"abstract-0",voucherIndexList:[],voucherIdx:0,totalBalance:0,debitTotal:"0.00",creditTotal:"0.00",acModalSelectedContent:"",accategory:"",currencyList:[],currencyListArr:[],showAssDisableInfo:[],showAssDisableModal:!1},oldVcIndex:"",oldYear:"",oldMonth:"",vcIndex:"",year:"",month:"",vcDate:"",createdTime:"",modifiedTime:"",createdBy:"",closedBy:"",reviewedBy:"",enclosureCountUser:"",jvList:[{jvdirection:"",jvabstract:"",acid:"",acfullname:"",jvamount:"",asslist:[],acunitOpen:"0",jvcount:"",price:"",jvunit:"",fcStatus:"0",fcNumber:"",exchange:"",standardAmount:""},{jvdirection:"",jvabstract:"",acid:"",acfullname:"",jvamount:"",asslist:[],acunitOpen:"0",jvcount:"",price:"",jvunit:"",fcStatus:"0",fcNumber:"",exchange:"",standardAmount:""},{jvdirection:"",jvabstract:"",acid:"",acfullname:"",jvamount:"",asslist:[],acunitOpen:"0",jvcount:"",price:"",jvunit:"",fcStatus:"0",fcNumber:"",exchange:"",standardAmount:""},{jvdirection:"",jvabstract:"",acid:"",acfullname:"",jvamount:"",asslist:[],acunitOpen:"0",jvcount:"",price:"",jvunit:"",fcStatus:"0",fcNumber:"",exchange:"",standardAmount:""}],ass:{assid:"",assname:"",asscategory:"",handleAss:"insertass"},increaseAcItem:{limitLength:0,acid:"",acname:"",acfullname:"",category:"",upperinfo:"无",upperid:"",direction:"debit",asscategorylist:[],upperAcunit:"0",acunitOpen:"0",acunit:""},importResponList:{failJsonList:[],successJsonList:[]},message:"",enclosureList:[],previewImageList:[],needDeleteUrl:[],tagModal:!1,label:[],vcKey:0,importProgressInfo:{accessToken:"",total:0,progress:0,message:"",successList:[],failList:[],timestamp:""}});function g(e){var t=0,n=0;return e.get("jvList").forEach(function(e){"credit"==e.get("jvdirection")?t+=Number(e.get("jvamount")):"debit"==e.get("jvdirection")&&(n+=Number(e.get("jvamount")))}),(e=(e=e.setIn(["flags","creditTotal"],t?t.toFixed(2).toString():"0.00")).setIn(["flags","debitTotal"],n?n.toFixed(2).toString():"0.00")).setIn(["flags","totalBalance"],Number((n-t).toFixed(2)))}function _(e,t){return Number(t)<0&&e?-Math.abs(e):Number(t)>0&&e?Math.abs(e):e}}).call(this,n(34))},1416:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_FZHS="INIT_FZHS",t.CHANGE_ACTIVE_ASS_CATEGORY="CHANGE_ACTIVE_ASS_CATEGORY",t.SAVE_ENTER_ASSITE_MFETCH="SAVE_ENTER_ASSITE_MFETCH",t.CHANGE_FZ_MODAL_DISPLAY="CHANGE_FZ_MODAL_DISPLAY",t.CHANGE_ACLIST_MODAL_DISPLAY="CHANGE_ACLIST_MODAL_DISPLAY",t.MODIFY_ACLIST_IN_ASS_ITEM="MODIFY_ACLIST_IN_ASS_ITEM",t.DELETE_AC_IN_ASS_ITEM="DELETE_AC_IN_ASS_ITEM",t.CHANGE_AC_IN_ASS_TAB_KEY="CHANGE_AC_IN_ASS_TAB_KEY",t.RELATED_ACLIST_MODEL_DISAPEAR="RELATED_ACLIST_MODEL_DISAPEAR",t.CHANGE_ASS_ID="CHANGE_ASS_ID",t.CHANGE_ASS_NAME="CHANGE_ASS_NAME",t.CHANGE_ASS_CATEGORY="CHANGE_ASS_CATEGORY",t.SELECT_ASS_ALL="SELECT_ASS_ALL",t.SELECT_ASS_ITEM="SELECT_ASS_ITEM",t.MODIFY_ASS_ITEM_FETCH="MODIFY_ASS_ITEM_FETCH",t.INSERT_ASS_ITEM_FETCH="INSERT_ASS_ITEM_FETCH",t.BEFORE_ASS_IMPORT="BEFORE_ASS_IMPORT",t.CLOSE_ASS_IMPORT_CONTENT="CLOSE_ASS_IMPORT_CONTENT",t.AFTER_ASS_IMPORT="AFTER_ASS_IMPORT",t.AFTER_ASSGETAMB_GET="AFTER_ASSGETAMB_GET",t.CHANGE_AMB_RELATE_ASSCATEGROY_LIST="CHANGE_AMB_RELATE_ASSCATEGROY_LIST",t.CHANGE_ASS_DISABLE_STATE="CHANGE_ASS_DISABLE_STATE",t.CHANGE_REVERS_ASS_MODAL="CHANGE_REVERS_ASS_MODAL",t.CHANGE_REVERS_CATEGORY="CHANGE_REVERS_CATEGORY",t.SELECT_REVERS_ASS_CHECK="SELECT_REVERS_ASS_CHECK",t.CHANGE_REVERS_ASS_ID="CHANGE_REVERS_ASS_ID",t.CHANGE_REVERSASS_CONFIRM_SHOW="CHANGE_REVERSASS_CONFIRM_SHOW",t.CLEAR_REVERS_ASS="CLEAR_REVERS_ASS",t.REVERS_ASS_FETCH="REVERS_ASS_FETCH",t.CHANGE_CURRENT_PAGE_FZHE="CHANGE_CURRENT_PAGE_FZHE",t.CHANGE_SELECT_AC_LIST_MODAL_DISPLAY="CHANGE_SELECT_AC_LIST_MODAL_DISPLAY",t.GET_ASS_IMPORT_PROGRESS="GET_ASS_IMPORT_PROGRESS",t.CHANGE_ASS_MESSAGEMASK="CHANGE_ASS_MESSAGEMASK",t.CHANGE_REVERSE_OLD_NAME="CHANGE_REVERSE_OLD_NAME",t.CHANGE_REVERSE_NEW_NAME="CHANGE_REVERSE_NEW_NAME",t.CHANGE_ASS_CATEGORY_MODAL_VISIBLE="CHANGE_ASS_CATEGORY_MODAL_VISIBLE"},1417:function(e,t,n){},1457:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=A(n(47)),i=A(n(37)),o=A(n(100)),s=A(n(32)),u=A(n(89)),c=A(n(45)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(38),n(99),n(51),n(88),n(55);var d=A(n(1)),f=n(17),g=(n(18),m(n(1316))),_=(m(n(43)),m(n(27))),p=n(22);function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}n(1417);var E=c.default.Option,C=u.default.Group,T=(0,f.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.assItem,a=e.tags,l=e.asscategory,f=e.FzModelDisplay,m=e.lrpzFzhsPermission,A=(e.fzhsState,e.judgeAssEnter),T=e.onCancel,v=e.onOk,S=e.onChangeId,y=e.onChangeName,I=e.CUD_ASS;sessionStorage.getItem("handleAss");return d.default.createElement(r.default,{title:"insertLrpz"==A||"insert"==sessionStorage.getItem("handleAss")?"新增辅助核算":"编辑",cancelText:"关闭",maskClosable:!1,visible:f,onCancel:T,footer:[d.default.createElement(s.default,{key:"cancel",type:"ghost",onClick:T},"取 消"),d.default.createElement(s.default,{key:"ok",disabled:"insertLrpz"==A?(0,p.judgePermission)(m).disabled:(0,p.judgePermission)(I).disabled,type:"insert"==sessionStorage.getItem("handleAss")?"ghost":"primary",onClick:function(){return v("save")}},"保 存"),d.default.createElement(s.default,{key:"addNextAc",type:"primary",disabled:(0,p.judgePermission)(I).disabled,style:{display:"insert"==sessionStorage.getItem("handleAss")?"insertLrpz"==A?"none":"inline-block":"none"},onClick:function(){v()}},"保存并新增")],width:"480px"},d.default.createElement("div",{className:"fzmodel-wrap"},d.default.createElement("div",{className:"fzmodel-item",style:{display:"insert"===sessionStorage.getItem("handleAssCustom")?"block":"none"}},d.default.createElement("label",null,"类别："),d.default.createElement(o.default,{value:n.get("asscategory"),onChange:function(e){t(g.changeAssCategory(e.target.value))}})),d.default.createElement("div",{className:"fzmodel-item"},d.default.createElement("label",null,"编码："),d.default.createElement(o.default,{value:n.get("assid"),placeholder:"编码支持数字和大小写英文字母",onChange:function(e){if(e.target.value.length>_.CODE_LENGTH)return i.default.warn("辅助核算编码位数不能超过"+_.CODE_LENGTH+"位");S(e.target.value)}})),d.default.createElement("div",{className:"fzmodel-item"},d.default.createElement("label",null,"名称："),d.default.createElement(o.default,{value:n.get("assname"),onChange:function(e){y(e.target.value)}})),d.default.createElement("div",{className:"fzmodel-item",style:{display:"insertLrpz"==A?"block":"none"}},d.default.createElement("label",null,"类别："),d.default.createElement("span",{className:"fzmodel-item-category"},n.get("asscategory"))),d.default.createElement("div",{className:"fzmodel-item",style:{display:"insertLrpz"==A||"insert"===sessionStorage.getItem("handleAssCustom")?"none":"block"}},d.default.createElement("label",null,"类别："),d.default.createElement(c.default,{style:{width:150},showSearch:!0,mode:"tags",allowClear:!0,optionFilterProp:"children",notFoundContent:"无法找到相应科目",value:l?[l]:[],onChange:function(e){0==e.length?t(g.changeAssCategory("")):e.length>=1&&t(g.changeAssCategory(e[0]))},disabled:"modifyass"==n.get("handleAss")},(a||[]).map(function(e,t){return d.default.createElement(E,{key:t,value:e},e)}))),d.default.createElement("div",{className:"fzmodel-item",style:{display:"insertLrpz"==A||"insert"==sessionStorage.getItem("handleAss")||"insert"===sessionStorage.getItem("handleAssCustom")?"none":"block"}},d.default.createElement("label",null,"状态："),d.default.createElement(C,{value:"TRUE"===n.get("disable")?"TRUE":"FALSE",onChange:function(e){return t(g.changeAssDisableState(e.target.value))}},d.default.createElement(u.default,{key:"FALSE",value:"FALSE"},"启用"),d.default.createElement(u.default,{key:"TRUE",value:"TRUE"},"禁用"))),d.default.createElement("ul",{className:"uses-tip",style:{display:"insertLrpz"==A?"none":"block"}},d.default.createElement("li",null,"系统预置“客户”、“供应商”、“职员”、“项目”、“部门”五种辅助核算类别，这五种类别不能被修改或删除；"),d.default.createElement("li",null,"用户可自定义辅助核算类别，请在“类别”栏输入需要自定义的类型名称即可；"),d.default.createElement("li",null,"用户自定义的辅助核算类别下应至少有一个“编码”，否则该类别将被自动清除。"))))}}]),t}())||a;t.default=T},1473:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=_(n(47)),i=_(n(14)),o=_(n(37)),s=_(n(89)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(78),n(38),n(88);var c=_(n(1)),l=(n(18),n(17));n(1474);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(30));var d=n(22),f=_(n(1326)),g=_(n(1250));function _(e){return e&&e.__esModule?e:{default:e}}var p=s.default.Group,m=(0,l.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={tagModal:!1,tagValue:"无标签",currentIdx:"",preview:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.formPage,a=t.className,u=t.dispatch,l=t.permission,_=t.closed,m=t.reviewed,A=t.enclosureList,E=t.label,C=t.enCanUse,T=t.checkMoreFj,v=t.getLabelFetch,S=t.deleteUploadImgUrl,y=t.changeTagName,I=t.uploadEnclosureList,h=t.downloadEnclosure,N=t.type,L=t.uploadKeyJson,O=t.getUploadTokenFetch,b=this.state,M=b.tagValue,R=b.currentIdx,D=b.preview,G=b.tagModal,P=b.page,w=A&&A.filter(function(e){return"TRUE"===e.get("imageOrFile")||"application/pdf"===e.get("mimeType")}),H=!1;!l||_||m||(H=!0);var F=!0;!_&&!m||A.size||(F=!1);return c.default.createElement("div",{className:["enclosure-upload-part",a].join(" "),style:{display:F&&C?"":"none"}},c.default.createElement("span",{className:"enclosure-wrap-title",style:{display:H&&A.size<9&&(T?"":"none")}},"附件(最多上传九个)"),c.default.createElement("div",{className:"enclosure-list-wrap"},(A||[]).map(function(t,n){return c.default.createElement("div",{className:"enclosure-item",key:n},c.default.createElement("div",{className:"enclosure-item-icon",onClick:function(){if("TRUE"===t.get("imageOrFile")||"application/pdf"==t.get("mimeType")){var n=0;w.forEach(function(e,a){t.get("enclosurePath")!==e.get("enclosurePath")||(n=a)}),e.setState({preview:!0,page:n})}else o.default.warn("仅图片及PDF格式支持预览")}},c.default.createElement("img",{src:(0,d.showImg)(t.get("imageOrFile"),t.get("fileName"))})),c.default.createElement("div",{className:"enclosure-item-detail"},c.default.createElement("p",{className:"enclosure-item-filename"},t.get("fileName")),c.default.createElement("span",{className:"enclosure-item-tip"},t.get("size")>=1024?(t.get("size")/1024).toFixed(2)+"M":t.get("size")+"kb"),c.default.createElement("a",{className:"enclosure-item-tip",onClick:function(){return h(t.get("signedUrl"),t.get("fileName"))},href:"javascript:void(0);",style:{display:l?"":"none"}},c.default.createElement(i.default,{type:"download"})),c.default.createElement("span",{className:"enclosure-tag",style:{display:H?"":"none"},onClick:function(){e.setState({currentIdx:n,tagValue:t.get("label"),tagModal:!0}),v()}},"无标签"===t.get("label")?"添加标签":t.get("label"))),c.default.createElement("div",{className:"icon-close",style:{display:H?"":"none"},onClick:function(){S(n)}},c.default.createElement(i.default,{type:"close"})))}),c.default.createElement(f.default,{style:{display:H&&A.size<9&&T?"":"none"},dispatch:u,enclosureList:A,uploadEnclosureList:I,uploadKeyJson:L,getUploadTokenFetch:O,formPage:n})),c.default.createElement(r.default,{title:"添加标签",visible:G,onOk:function(){y(R,M),e.setState({tagModal:!1})},onCancel:function(){return e.setState({tagModal:!1})}},c.default.createElement(p,{onChange:function(t){return e.setState({tagValue:t.target.value})},value:M},E.map(function(e,t){return c.default.createElement(s.default,{className:"enclosure-radio",key:t,value:e},"无标签"===e?"取消标签":e)}))),c.default.createElement(g.default,{page:P,dispatch:u,preview:D,downloadPermission:l,previewImgArr:w,downloadEnclosure:h,closePreviewModal:function(){return e.setState({preview:!1})},type:N,uploadKeyJson:L}))}}]),t}())||a;t.default=m},1474:function(e,t,n){},1518:function(e,t,n){},1585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=v(n(47)),i=v(n(129)),o=v(n(1234)),s=v(n(100)),u=v(n(37)),c=v(n(32)),l=v(n(45)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(128),n(1235),n(99),n(38),n(51),n(55);var f=v(n(1)),g=(n(18),n(17)),_=T(n(490)),p=T(n(43)),m=v(n(1586)),A=T(n(27)),E=n(497),C=n(22);function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}n(1518);var S=l.default.Option,y=(0,g.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={reviseModal:!1,acunitModify:!1,acName:"",acId:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),d(t,[{key:"componentWillReceiveProps",value:function(e){"modify"===e.acConfigMode&&sessionStorage.getItem("changeAcInfo")?(this.setState({acName:e.tempAcItem.get("acname"),acId:e.tempAcItem.get("acid")}),sessionStorage.setItem("changeAcInfo",!1)):"modify"!==e.acConfigMode&&this.setState({acName:e.tempAcItem.get("acname")?e.tempAcItem.get("acname"):"",acId:e.tempAcItem.get("acid")?e.tempAcItem.get("acid"):""})}},{key:"render",value:function(){var e=this,t=this.props,n=t.moduleInfo,a=(t.acSelectedIndex,t.tempAcItem),d=t.dispatch,g=t.aclist,T=t.acTags,v=t.acConfigMode,y=t.modalDisplay,I=t.lrpzKmPermission,h=t.configState,N=t.tabSelectedIndex,L=t.acid,O=t.onCancel,b=t.onClickSave,M=t.onChangeAcId,R=t.onChangeAcText,D=t.onSelect,G=t.disabled,P=t.onChangeSwitch,w=t.changeAmountCheckbox,H=t.changeAmountInput,F=t.CUD_AC_SETTING,U=this.state,x=U.reviseModal,j=U.acunitModify,k=U.acName,B=U.acId,J=(a.get("acid"),!1);"1"==a.get("acunitOpen")?"modify"==v&&(a.get("acunit")||(J=!0)):J=!0;var V=!!a.get("asscategorylist").size||a.get("nextac")||!!a.get("upperid"),K=a.get("oldAcunit");return f.default.createElement(r.default,{okText:"保存",visible:y,maskClosable:!1,title:"insert"==v||"insertLrpz"==v?"新增科目":"编辑科目",onCancel:O,footer:[f.default.createElement(c.default,{key:"cancel",type:"ghost",style:{display:"insertLrpz"==v?"none":"inline-block"},onClick:function(){d(_.changeModalDisplay()),d(_.cancelEnterAcItemFetch()),e.setState({acunitModify:!1})}},"取 消"),f.default.createElement(c.default,{key:"ok",disabled:"insertLrpz"==v?(0,C.judgePermission)(I).disabled:(0,C.judgePermission)(F).disabled,type:"insert"==v?"ghost":"primary",onClick:function(){return(0,E.debounce)(function(){e.setState({acunitModify:!1}),b(a,h)})()}},"保 存"),f.default.createElement(c.default,{key:"addNextAc",type:"primary",disabled:(0,C.judgePermission)(F).disabled||("insertLrpz"==v?"":"99"==L.substr(L.length-2)),style:{display:"insert"==v?"inline-block":"none"},onClick:function(){if("1"==a.get("acunitOpen")&&!a.get("acunit"))return u.default.warn("请输入计量单位");var t=A.AC_CHINESE_NAME_LENGTH;if(/[\u4e00-\u9fa5]/g.test(a.get("acname"))||/[\u3002\uff1b\uff0c\uff1a\u201c\u201d\uff08\uff09\u3001\uff1f\u300a\u300b]/g.test(a.get("acname"))||(t=A.AC_NAME_LENGTH),a.get("acname").length>t)return u.default.warn("科目名称包含中文及中文标点字符，长度不能超过"+A.AC_CHINESE_NAME_LENGTH+"位；否则，长度不能超过"+A.AC_NAME_LENGTH+"位");var n=Number(a.get("acid"))+1;g.forEach(function(e){return e.get("acid")==n?n++:n}),d(p.enterAcItemFetch("acConfig",h.get("tempAcItem"),h.get("acConfigMode"),N,n+"")),e.setState({acunitModify:!1})}},"保存并新增")]},f.default.createElement("div",{className:"pconfig-kmset"},f.default.createElement("div",{className:"pconfig-kmset-item"},f.default.createElement("label",null,"科目编码："),f.default.createElement(s.default,{placeholder:"科目编码长度分别为4/6/8/10位数字",disabled:"insertLrpz"!=v&&G,value:B,onChange:function(t){var n=t.target.value,r=n.length,i=a.get("limitLength"),o=i||10,s=4==i?1:i-2;if(/^\d*$/.test(n)&&(r||!i)&&11!=r)return i?!(r>o||r<s)&&e.setState({acId:t.target.value}):void e.setState({acId:t.target.value})},onBlur:function(e){return M(e)}})),f.default.createElement("ul",{className:"uses-tip"},f.default.createElement("li",null,"科目编码支持最长四级，一级科目必须以1（资产）/2（负债）/3（权益）/4（成本）/5（损益）开头,科目编码长度分别为4/6/8/10位数字；")),f.default.createElement("div",{className:"pconfig-kmset-item"},f.default.createElement("label",null,"科目名称："),f.default.createElement(s.default,{placeholder:"包含中文最长"+A.AC_CHINESE_NAME_LENGTH+"个字符，否则最长"+A.AC_NAME_LENGTH+"个",type:"text",value:k,onChange:function(t){return e.setState({acName:t.target.value})},onBlur:R})),f.default.createElement("div",{className:"pconfig-kmset-item"},f.default.createElement("label",null,"上级科目："),f.default.createElement(s.default,{type:"text",value:a.get("upperinfo"),disabled:!0})),f.default.createElement("div",{className:"pconfig-kmset-item"},f.default.createElement("label",null,"科目类别："),f.default.createElement(l.default,{className:"pconfig-kmset-item-select",value:a.get("category"),onSelect:function(e){return D(e)},disabled:V,style:{width:150}},T.filter(function(e,t){return t===a.get("acid").substr(0,1)-1}).map(function(e){return e.get("sub").map(function(e){return f.default.createElement(S,{key:e,value:e},e)})}))),f.default.createElement("ul",{className:"uses-tip"},f.default.createElement("li",null,"科目类别已根据国家小企业会计准则预置，不支持自定义类别；"),f.default.createElement("li",null,"新增子科目时，子科目将自动继承上级科目的余额方向、类别；")),f.default.createElement("div",{className:"pconfig-kmset-item"},f.default.createElement("label",null,"余额方向："),f.default.createElement(o.default,{className:"use-unuse-style lend-bg",checked:"credit"==a.get("direction"),checkedChildren:"贷",unCheckedChildren:"借",style:{width:43},onChange:P})),n&&n.indexOf("NUMBER")>-1?f.default.createElement("div",{className:"pconfig-kmset-amount"},f.default.createElement("label",null,f.default.createElement(i.default,{style:{marginRight:"10px"},disabled:"1"==a.get("upperAcunit"),checked:"1"==a.get("acunitOpen"),onChange:w}),"数量核算"),f.default.createElement("label",null,"计算单位"),"insert"===v||"insertLrpz"===v?f.default.createElement(s.default,{className:"pconfig-kmset-item-select",disabled:"1"!=a.get("acunitOpen"),type:"text",value:"1"==a.get("acunitOpen")?a.get("acunit"):"",onChange:function(t){if("insertLrpz"==v)return H(t);e.setState({acunitModify:!0}),d(_.changeAcconfigAcunit(t.target.value))}}):f.default.createElement(s.default,{className:"pconfig-kmset-item-select",disabled:"1"!=a.get("acunitOpen")||!!a.get("acunit")&&!j,type:"text",value:"1"==a.get("acunitOpen")?a.get("acunit"):"",onChange:function(t){e.setState({acunitModify:!0}),d(_.changeAcconfigAcunit(t.target.value))}}),f.default.createElement(c.default,{type:"ghost",disabled:"1"!=a.get("acunitOpen"),style:{marginLeft:10,display:"insert"==v||"insertLrpz"===v||j||J?"none":""},onClick:function(){return e.setState({reviseModal:!0})}},"修改单位")):"",n&&n.indexOf("NUMBER")>-1?f.default.createElement(m.default,{reviseModal:x,dispatch:d,tempAcItem:a,closeAcModal:function(){return e.setState({reviseModal:!1})},oldAcunit:K}):""))}}]),t}())||a;t.default=y},1586:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=_(n(47)),i=_(n(100)),o=_(n(37)),s=_(n(32)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(99),n(38),n(51);var c=_(n(1)),l=n(17),d=g(n(27)),f=g(n(490));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}var p=(0,l.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={inputValue:"",conversion:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.reviseModal,a=t.dispatch,u=(t.tempAcItem,t.closeAcModal),l=t.oldAcunit,g=this.state,_=g.inputValue,p=g.conversion;return c.default.createElement(r.default,{okText:"确定",visible:n,maskClosable:!1,title:"修改单位",onCancel:function(){u(),e.setState({inputValue:"",conversion:""})},footer:[c.default.createElement(s.default,{key:"cancel",type:"ghost",onClick:function(){u(),e.setState({inputValue:"",conversion:""})}},"取 消"),c.default.createElement(s.default,{key:"ok",type:"primary",onClick:function(){return"0"==p?o.default.warn("数量关系不能为0"):_.length>d.AC_UNIT_LENGTH?o.default.warn("计算单位位数不能超过"+d.AC_UNIT_LENGTH+"位"):(a(f.changeAcUnitText(_,p)),u(),void e.setState({inputValue:"",conversion:""}))}},"确定")]},c.default.createElement("div",{className:"reviseModal-item"},c.default.createElement("div",{className:"reviseModal-item-title"},c.default.createElement("span",null,"新单位"),c.default.createElement("span",null,"原单位"),c.default.createElement("span",null,"数量关系")),c.default.createElement("div",null,c.default.createElement(i.default,{className:"reviseModal-item-input",value:_,onChange:function(t){e.setState({inputValue:t.target.value})},placeholder:"请输入新单位"}),c.default.createElement("span",null,"="),c.default.createElement("span",null,l),c.default.createElement("span",null,"×"),c.default.createElement(i.default,{className:"reviseModal-item-input",value:p,onChange:function(t){(/^[-\d]\d*\.?\d{0,3}$/g.test(t.target.value)||""===t.target.value)&&t.target.value<1e4&&e.setState({conversion:t.target.value})},placeholder:"请输入数量关系"})),c.default.createElement("ul",{className:"reviseModal-item-ul"},c.default.createElement("li",null,"关于修改单位"),c.default.createElement("li",null,c.default.createElement("span",null,"大单位换小单位"),c.default.createElement("span",null,"例: 千克 ="),c.default.createElement(i.default,{className:"reviseModal-item-input",disabled:!0,value:"克"}),"×",c.default.createElement(i.default,{className:"reviseModal-item-input",disabled:!0,value:1e3})),c.default.createElement("li",null,c.default.createElement("span",null,"小单位换大单位"),c.default.createElement("span",null,"例: 千克 ="),c.default.createElement(i.default,{className:"reviseModal-item-input",disabled:!0,value:"吨"}),"×",c.default.createElement(i.default,{className:"reviseModal-item-input",disabled:!0,value:.001})),c.default.createElement("li",null,c.default.createElement("span",null,"相等单位间互算"),c.default.createElement("span",null,"例: 千克 ="),c.default.createElement(i.default,{className:"reviseModal-item-input",disabled:!0,value:"公斤"}),"×",c.default.createElement(i.default,{className:"reviseModal-item-input",disabled:!0,value:1})))))}}]),t}())||a;t.default=p},1588:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,n=arguments[1];return((e={},o(e,i.INIT_DRAFT,function(){return s}),o(e,i.GET_DRAFT_LIST_FETCH,function(){return(t=s.setIn(["flags","selectDraftType"],n.selectDraftType).set("allDraftList",(0,a.fromJS)(n.receivedData)).set("draftList",(0,a.fromJS)(n.receivedData))).get("draftList").map(function(e,n){t=(t=t.setIn(["draftList",n,"checkboxDisplay"],!1)).setIn(["allDraftList",n,"checkboxDisplay"],!1)}),t}),o(e,i.SELECT_DRAFT_ALL,function(){return t.setIn(["flags","selectDraftAll"],!t.getIn(["flags","selectDraftAll"])).update("draftList",function(e){return e.map(function(e){return e.set("checkboxDisplay",!t.getIn(["flags","selectDraftAll"]))})})}),o(e,i.SELECT_DRAFT_ITEM,function(){return(t=t.updateIn(["draftList",n.idx,"checkboxDisplay"],function(e){return!e})).setIn(["flags","selectDraftAll"],t.get("draftList").every(function(e){return e.get("checkboxDisplay")}))}),o(e,i.CHANGE_DRAFT_INPUT_VALUE,function(){return t.setIn(["flags","searchValue"],n.value)}),o(e,i.SEARCH_DRAFT,function(){var e=n.value;return""!==e?t.setIn(["flags","searchValue"],n.value).set("draftList",t.get("allDraftList")).update("draftList",function(e){return e.map(function(e){return e.set("matchStr",e.get("vcdate")+" 记"+e.get("vcindex")+"号 "+e.get("jvlist").map(function(e){return e.get("jvabstract")+" "+e.get("acid")+"_"+e.get("acname")+" "+e.get("jvamount")+" "+(0,r.formatMoney)(e.get("jvamount"),2,"")+" "+(e.get("asslist").size?e.get("asslist").map(function(e){return e.get("assid")+"_"+e.get("assname")}).join("_"):"")})+" "+e.get("createdby")+" "+e.get("closedby"))})}).update("draftList",function(t){return t.filter(function(t){return t.get("matchStr").indexOf(e)>-1})}):t.setIn(["flags","searchValue"],n.value).set("draftList",t.get("allDraftList"))}),o(e,i.NOT_SELECT_MODEL_ALL,function(){return t.get("draftList").map(function(e,n){t=t.setIn(["draftList",n,"checkboxDisplay"],!1)}),t.get("allDraftList").map(function(e,n){t=t.setIn(["allDraftList",n,"checkboxDisplay"],!1)}),t.setIn(["flags","selectDraftAll"],!1)}),o(e,i.SORT_DRAFT_LIST_BY_DATE,function(){var e=-t.getIn(["flags","dateSort"]);return t.updateIn(["flags","dateSort"],function(e){return-e}).update("draftList",function(t){return t.sort(function(t,n){return t.get("vcdate")==n.get("vcdate")?t.get("vcindex")>n.get("vcindex")?1:-1:t.get("vcdate")>n.get("vcdate")?e:-e})})}),o(e,i.REVERSE_DRAFT_LIST,function(){var e=-t.getIn(["flags","indexSort"]);return t.updateIn(["flags","indexSort"],function(e){return-e}).update("draftList",function(t){return t.sort(function(t,n){return t.get("vcindex")==n.get("vcindex")?t.get("vcdate")<n.get("vcdate")?1:-1:t.get("vcindex")>n.get("vcindex")?e:-e})})}),e)[n.type]||function(){return t})()};var a=n(18),r=n(22),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1306));function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=(0,a.fromJS)({flags:{selectDraftType:"全部",searchValue:"",selectDraftAll:!1,indexSort:1,dateSort:1},allDraftList:[],draftList:[],selectList:[]})},2506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=M(n(61)),i=M(n(14)),o=M(n(89)),s=M(n(32)),u=M(n(47)),c=M(n(37)),l=M(n(70)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(79),n(78),n(88),n(51),n(46),n(38),n(69);var f=M(n(1)),g=(n(18),n(56)),_=b(n(1276)),p=b(n(60)),m=(b(n(1316)),b(n(1300))),A=b(n(43)),E=M(n(2507)),C=M(n(2508)),T=M(n(2509)),v=M(n(1473)),S=M(n(1585)),y=M(n(1457)),I=b(n(30)),h=b(n(27)),N=n(22),L=n(127),O=M(n(6));function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function M(e){return e&&e.__esModule?e:{default:e}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(2523);var D=l.default.TabPane,G=(0,g.connect)(function(e){return e})(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={saveWay:!1,autoEncode:!0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),d(t,[{key:"componentDidMount",value:function(){if("home"===sessionStorage.getItem("previousPage")){sessionStorage.setItem("lrpzHandleMode","insert"),sessionStorage.setItem("previousPage","");var e=this.props.allState.get("period"),t=e.get("openedyear"),n=e.get("openedmonth"),a="";if(t){var r=new Date(t,n,0),i=new Date,o=(new Date).getFullYear(),s=(new Date).getMonth()+1;a=r<i?r:Number(t)==Number(o)&&Number(n)==Number(s)?i:new Date(t,Number(n)-1,1)}else a=new Date;this.props.dispatch(_.initAndGetLastVcIdFetch("initAndGetLastVcIdFetch",a))}var u=this.props.homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]),c=!u||u.indexOf("ENCLOSURE_GL")>-1,l="TRUE"===this.props.homeState.getIn(["data","userInfo","checkMoreFj"]);c&&l&&this.props.dispatch(_.initLabel())}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.lrpzState!==e.lrpzState||this.props.allState!==e.allState||this.state!==t||this.props.filePrintState!==e.filePrintState}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.dispatch,d=n.lrpzState,g=n.allState,b=n.homeState,M=this.state,G=M.saveWay,P=M.autoEncode,w=b.getIn(["data","userInfo","pageController","SAVE_VC","preDetailList"]),H=b.getIn(["data","userInfo","pageController","QUERY_VC"]),F=w.getIn(["QUICK_MANAGER","detailList","SAVE_ASS"]),U=w.getIn(["QUICK_MANAGER","detailList","SAVE_AC"]),x=b.getIn(["permissionInfo","Pz"]),j=g.get("allasscategorylist"),k=g.get("lrAclist"),B=g.get("cascadeAclist"),J=g.get("acTags"),V=g.getIn(["period","openedyear"]),K=g.getIn(["period","openedmonth"]),Y=g.getIn(["systemInfo","unitDecimalCount"])?Number(g.getIn(["systemInfo","unitDecimalCount"])):2,W=d.get("jvList"),z=d.get("vcDate"),X=d.get("vcIndex"),Z=d.get("oldVcIndex"),Q=d.get("year"),$=d.get("month"),q=d.get("closedBy"),ee=d.get("reviewedBy"),te=d.get("createdBy"),ne=d.get("modifiedTime"),ae=d.get("createdTime"),re=d.get("enclosureCountUser"),ie=d.get("importResponList"),oe=d.get("message"),se=(d.get("ass"),d.get("increaseAcItem")),ue=d.get("enclosureList"),ce=d.get("label"),le=(d.get("tagModal"),d.getIn(["flags","voucherIdx"])),de=d.getIn(["flags","focusRef"]),fe=d.getIn(["flags","debitTotal"]),ge=d.getIn(["flags","creditTotal"]),_e=d.getIn(["flags","voucherIndexList"]),pe=d.getIn(["flags","acModalDisplay"]),me=d.getIn(["flags","acModalSelectedContent"]),Ae=d.getIn(["flags","lrfzhsModalDisplay"]),Ee=d.getIn(["flags","lrAcModalDisplay"]),Ce=d.getIn(["flags","showLrModalMask"]),Te=d.getIn(["flags","assDropListFull"]),ve=d.getIn(["flags","lrIframeload"]),Se=d.getIn(["flags","shortCut"]),ye=d.getIn(["flags","titleFixed"]),Ie=d.getIn(["flags","focusBack"]),he=d.getIn(["flags","currencyList"]),Ne=d.getIn(["flags","showAssDisableInfo"]),Le=d.getIn(["flags","showAssDisableModal"]),Oe=d.get("vcKey"),be=d.getIn(["flags","isEnterDraft"]),Me=d.getIn(["flags","draftList"]),Re=d.getIn(["flags","changeDraftIdx"]),De=W.some(function(e){return"1"==e.get("acunitOpen")}),Ge=W.some(function(e){return e.get("fcNumber")}),Pe=4!==se.get("acid").length,we=sessionStorage.getItem("lrpzHandleMode"),He=(sessionStorage.getItem("lrpzDraft"),q||ee?new Proxy({},{get:function(){return function(){return{type:"NO_CHANGE"}}}}):_),Fe=b.getIn(["data","userInfo","sobInfo","moduleInfo"]),Ue=!Fe||Fe.indexOf("ENCLOSURE_GL")>-1,xe="TRUE"===b.getIn(["data","userInfo","checkMoreFj"]),je=g.get("token"),ke=(b.getIn(["data","userInfo","sobInfo","sobId"]),b.getIn(["data","userInfo","useruuid"]),(new Date).getTime(),function(){var e=me.split(" ")[0],t=k.find(function(t){return t.get("acid")==e});a(He.changeAcModalDisplay()),a(He.changeJvAc(pe,e,t&&t.get("acname"),t&&t.get("acfullname"),t&&t.get("asscategorylist"),t&&t.get("acunitOpen"))),t&&e&&(t.get("asscategorylist").size||("1"==t.get("acunitOpen")&&a(He.getAmountDataFetch(e,z,pe)),a(He.getAcCloseBalance(e,z,pe))),"1"==t.get("fcStatus")&&a(He.getFCListDataFetch(pe)))}),Be=function(){return t.setState({saveWay:!0})};document.onkeydown=function(){var e=window.event;if(e.altKey&&e.keyCode==h.S_KEY_CODE){if(ee)return I.Alert("凭证已审核，不能保存");if(q)return I.Alert("本月已结账，不能保存");if((0,N.judgePermission)(w.getIn("RUD_VC")).disabled)return I.Alert("当前角色无该权限");a(He.saveJvItemFetch("false","",Be,x))}if(e.altKey&&e.keyCode==h.N_KEY_CODE){if(ee)return I.Alert("凭证已审核，不能保存");if(q)return I.Alert("本月已结账，不能保存");if((0,N.judgePermission)(w.getIn("RUD_VC")).disabled)return I.Alert("当前角色无该权限");a(He.saveJvItemFetch("true","",Be,x))}if(e.altKey&&e.keyCode==h.P_KEY_CODE){if(ee)return I.Alert("凭证已审核，不能暂存");if(q)return I.Alert("本月已结账，不能暂存");if((0,N.judgePermission)(w.getIn("DRAFT_BOX")).disabled)return I.Alert("当前角色无该权限");a(He.draftSaveFetch(Oe))}if(e.altKey&&e.keyCode==h.D_KEY_CODE){if((0,N.judgePermission)(w.getIn("DRAFT_BOX")).disabled)return I.Alert("当前角色无该权限");a(p.addPageTabPane("EditPanes","Draft","Draft","草稿箱")),a(p.addHomeTabpane("Edit","Draft","草稿箱")),a(m.getDraftListFetch("全部"))}(e.keyCode==h.TAB_KEY_CODE||e.altKey&&e.keyCode==h.S_KEY_CODE||e.altKey&&e.keyCode==h.N_KEY_CODE||e.altKey&&e.keyCode==h.R_KEY_CODE||e.altKey&&e.keyCode==h.P_KEY_CODE||e.altKey&&e.keyCode==h.D_KEY_CODE)&&(e.preventDefault?e.preventDefault():e.returnValue=!1)};var Je="",Ve="";1==Number(g.getIn(["period","firstmonth"]))?(Ve=12,Je=Number(g.getIn(["period","firstyear"]))-1):(Ve=Number(g.getIn(["period","firstmonth"]))-1,Je=Number(g.getIn(["period","firstyear"])));var Ke=new Date(Je,Ve,0).getTime(),Ye=[];B.forEach(function(e,t){return Ye.push(t)});var We=b.getIn(["views","URL_POSTFIX"]),ze=b.getIn(["views","isPlay"]),Xe=g.get("uploadKeyJson");return f.default.createElement("div",{className:"wrap-lrpz",onKeyDown:function(e){Ee||e.keyCode==h.SHIFT_KEY_CODE&&a(He.changeFocusInput(e.keyCode))},onKeyUp:function(e){if(!Ee){if(e.keyCode==h.ENTER_KEY_CODE){var t="cr-"+(W.size-1);de===t&&a(He.insertJvItem(W.size-1)),a(He.changeFocusInput(e.keyCode))}if(e.keyCode==h.TAB_KEY_CODE||e.keyCode==h.SHIFT_KEY_CODE){if(e.keyCode==h.TAB_KEY_CODE){var n="cr-"+(W.size-1);de!==n||Ie||a(He.insertJvItem(W.size-1))}a(He.changeFocusInput(e.keyCode))}}}},f.default.createElement(C.default,{QUERY_VC:H,preDetailList:w,PzPermissionInfo:x,jvList:W,month:$,year:Q,vcKey:Oe,message:oe,vcIndex:X,oldVcIndex:Z,closedBy:q,dispatch:a,draftList:Me,isEnterDraft:be,changeDraftIdx:Re,showLrModalMask:Ce,lrIframeload:ve,importResponList:ie,reviewedBy:ee,voucherIdx:le,voucherIndexList:_e,lrpzHandleMode:we,shortcutClick:function(){return!1},enclosureList:ue,titleFixed:ye,openedYear:V,openedMonth:K,URL_POSTFIX:We,importProgressInfo:d.get("importProgressInfo"),isPlay:ze,autoEncode:P,saveWayModal:Be}),f.default.createElement("div",{className:"lrpz-body-wrap"},f.default.createElement(T.default,{vcIndex:X,year:Q,month:$,jvList:W,vcDate:z,amountDisplay:De,allAssList:j,PzPermissionInfo:x,focusRef:de,closedBy:q,reviewedBy:ee,dispatch:a,createdBy:te,modifiedTime:ne,createdTime:ae,debitTotal:fe,creditTotal:ge,selectAcList:k,assDropListFull:Te,currencyList:he,currencyDisplay:Ge,showAssDisableInfo:Ne,disabledDate:function(e){return e&&(0,O.default)(Ke).endOf("day")>e},enclosureCountUser:re,unitDecimalCount:Y}),f.default.createElement(v.default,{fromPage:"Lrpz",className:"lrpz-enclosure-wrap",dispatch:a,permission:x.getIn(["edit","permission"]),token:je,enclosureList:ue,label:ce,closed:q,reviewed:ee,enCanUse:Ue,checkMoreFj:xe,getUploadTokenFetch:function(){return a(_.getUploadGetTokenFetch())},getLabelFetch:function(){return a(He.getLabelFetch())},deleteUploadImgUrl:function(e){return a(He.deleteUploadImgUrl(e))},changeTagName:function(e,t){return a(He.changeTagName(e,t))},downloadEnclosure:function(e,t){a(A.allDownloadEnclosure(e,t))},uploadEnclosureList:function(e){X?a(He.checkEnclosureList.apply(He,[Q,$,X].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)))):c.default.error("日期或凭证号加载异常，请重试")},uploadKeyJson:Xe})),f.default.createElement(S.default,{tempAcItem:se,dispatch:a,aclist:k,acTags:J,disabled:Pe,acConfigMode:"insertLrpz",moduleInfo:Fe,modalDisplay:Ee,lrpzKmPermission:U,configState:d,onCancel:function(){sessionStorage.removeItem("enterLrModal"),a(He.changelrAcModalClear())},onClickSave:function(e,t){if("1"==e.get("acunitOpen")&&!e.get("acunit"))return c.default.warn("请输入计量单位");if(e.get("acunit").length>h.AC_UNIT_LENGTH)return c.default.warn("计算单位位数不能超过"+h.AC_UNIT_LENGTH+"位");var n=h.ALL_NAME_LENGTH;if(/[\u4e00-\u9fa5]/g.test(e.get("acname"))||/[\u3002\uff1b\uff0c\uff1a\u201c\u201d\uff08\uff09\u3001\uff1f\u300a\u300b]/g.test(e.get("acname"))||(n=h.ASS_NAME_LENGTH),e.get("acname").length>n)return c.default.warn("科目名称包含中文及中文标点字符，长度不能超过"+h.ALL_NAME_LENGTH+"位；否则，长度不能超过"+h.ASS_NAME_LENGTH+"位");a(A.enterAcItemFetch("Lrpz",t.get("increaseAcItem"),"insert",t.getIn(["flags","accategory"])))},onChangeAcId:function(e){return a(He.changeLrAcidText(e.target.value,g.get("aclist")))},onChangeAcText:function(e){return a(He.changeLrAcNameText(e.target.value))},onSelect:function(e){return a(He.changeLrCategoryText(e))},onChangeSwitch:function(){return Pe||a(He.changeLrAcDirectionText())},changeAmountCheckbox:function(){return a(He.changeLrAcAmountStateText())},changeAmountInput:function(e){return a(He.changePzAcUnitText(e.target.value))}}),f.default.createElement(y.default,(R(e={judgeAssEnter:"insertLrpz",FzModelDisplay:Ae,lrpzFzhsPermission:F,fzhsState:d,dispatch:a,assItem:d.get("ass")},"judgeAssEnter","insertLrpz"),R(e,"onOk",function(){return(0,N.nameCheck)(d.getIn(["ass","assname"]))?c.default.warn("辅助核算名称包含中文及中文标点字符，长度不能超过"+h.AC_CHINESE_NAME_LENGTH+"位；不包含中文及中文标点字符，长度不能超过"+h.AC_NAME_LENGTH+"位"):(0,N.nameCheck)(d.getIn(["ass","asscategory"]))?c.default.warn("辅助核算类别名称包含中文及中文标点字符，长度不能超过"+h.AC_CHINESE_NAME_LENGTH+"位；不包含中文及中文标点字符，长度不能超过"+h.AC_NAME_LENGTH+"位"):void a(A.enterAssItemFetch("Lrpz",d.get("ass")))}),R(e,"onCancel",function(){a(He.changeLrFzhsModalClear()),sessionStorage.removeItem("enterLrModal")}),R(e,"onChangeId",function(e){return a(He.changeLrAssId(e))}),R(e,"onChangeName",function(e){return a(He.changeLrAssName(e))}),e)),f.default.createElement(u.default,{title:"科目选择",visible:!1!==pe,onOk:function(){return ke()},onCancel:function(){return a(He.changeAcModalDisplay())}},f.default.createElement("div",{onDoubleClick:function(){return ke()}},f.default.createElement(l.default,{defaultActiveKey:"资产",style:{marginTop:"-16px"}},Ye.map(function(e,t){return f.default.createElement(D,{tab:e,key:e},f.default.createElement("div",{className:"lrpz-tree-wrap"},f.default.createElement(E.default,{Data:B.get(e),selectedKeys:[me],onSelect:function(e){return a(He.changeTreeSelectContent(e[0]))}})))})))),f.default.createElement(u.default,{visible:Se,title:"快捷键说明",onCancel:function(){return a(He.shortcut())},footer:[f.default.createElement(s.default,{key:"cancel",type:"ghost",onClick:function(){return a(He.shortcut())}},"关 闭")]},f.default.createElement("ul",{className:"uses-tip"},f.default.createElement("li",{className:"uses-tip-dark"},"1、Enter ：光标跳至下一栏；"),f.default.createElement("li",{className:"uses-tip-dark"},"2、Shift＋Tab ：光标返回上一栏；"),f.default.createElement("li",{className:"uses-tip-dark"},"3、= ：实现分录借贷自动平衡；"),f.default.createElement("li",{className:"uses-tip-dark"},"4、Alt+S ：保存凭证；"),f.default.createElement("li",{className:"uses-tip-dark"},"5、Alt+N ：保存并新增凭证；"),f.default.createElement("li",{className:"uses-tip-dark"},"6、Alt+P ：暂存；"),f.default.createElement("li",{className:"uses-tip-dark"},"7、Alt+D ：草稿箱；"),f.default.createElement("li",{className:"uses-tip-dark"},"8、空格 ：切换借贷方金额；"))),f.default.createElement(L.AlertModal,{visible:Le,message:Ne,onOk:function(){return a(He.showAssDisableModal())}}),f.default.createElement(u.default,{ref:"modal",visible:G,title:"选择保存方式",onCancel:function(){return t.setState({saveWay:!1,autoEncode:!0})},footer:[f.default.createElement(s.default,{key:"submit",type:"primary",size:"large",onClick:function(){t.setState({saveWay:!1,autoEncode:!0});var e=sessionStorage.getItem("reDirect");a(He.saveJvItemFetch(e,P,function(){return t.setState({saveWay:!1})},x))}},"确定")]},f.default.createElement("p",null,"凭证号：",X,"已存在，您可以"),f.default.createElement("div",{className:"save-way-choose"},f.default.createElement(o.default,{checked:P,onChange:function(){return t.setState({autoEncode:!0})}},"系统自动编号"),f.default.createElement(r.default,{placement:"top",title:"自动新增为末尾最新凭证编号，存在断号则补齐断号"},f.default.createElement("span",{className:"question-box"},f.default.createElement(i.default,{type:"question-circle"})))),f.default.createElement("div",{className:"save-way-choose"},f.default.createElement(o.default,{checked:!P,onChange:function(){return t.setState({autoEncode:!1})}},"插入凭证号"),f.default.createElement(r.default,{placement:"top",title:"当前凭证号不变，原凭证编号将顺次后移"},f.default.createElement("span",{className:"question-box"},f.default.createElement(i.default,{type:"question-circle"}))))))}}]),t}())||a;t.default=G},2507:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=u(n(171)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(170);var o=u(n(1)),s=(n(18),n(17));function u(e){return e&&e.__esModule?e:{default:e}}var c=r.default.TreeNode,l=(0,s.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.Data,n=e.onSelect,a=e.selectedKeys;return o.default.createElement(r.default,{defaultExpandAll:!0,onSelect:n,selectedKeys:a},function e(t){return t.map(function(t){return t.children?o.default.createElement(c,{key:t.title,title:t.title,disabled:!0},e(t.children)):o.default.createElement(c,{key:t.title,title:t.title})})}(t))}}]),t}())||a;t.default=l},2508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=I(n(47)),i=I(n(129)),o=I(n(14)),s=I(n(37)),u=I(n(61)),c=I(n(32)),l=I(n(174)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(128),n(78),n(38),n(79),n(51),n(173);var f=I(n(1)),g=(n(18),n(17)),_=y(n(1276)),p=y(n(60)),m=y(n(43)),A=y(n(1300)),E=y(n(1314)),C=n(22),T=n(31),v=n(127),S=y(n(30));y(n(27));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}var h=(0,g.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={deleteVcModal:!1,isSeleck:!1,deleteHasFj:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),d(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.PzPermissionInfo,a=t.jvList,d=t.month,g=t.year,y=t.vcKey,I=t.message,h=t.vcIndex,N=t.oldVcIndex,L=t.closedBy,O=t.dispatch,b=t.draftList,M=t.isEnterDraft,R=t.changeDraftIdx,D=t.showLrModalMask,G=t.lrIframeload,P=t.importResponList,w=t.reviewedBy,H=t.voucherIdx,F=t.voucherIndexList,U=t.lrpzHandleMode,x=(t.shortcutClick,t.enclosureList),j=(t.titleFixed,t.openedYear),k=t.openedMonth,B=(t.URL_POSTFIX,t.importProgressInfo),J=t.isPlay,V=t.saveWayModal,K=t.preDetailList,Y=t.QUERY_VC,W=this.state,z=W.deleteVcModal,X=W.isSeleck,Z=W.deleteHasFj,Q=Y.get(["preDetailList","AUDIT"]),$=Y.get(["preDetailList","CANCEL_AUDIT"]),q=(0,C.judgePermission)(K.get("RUD_VC")).disabled,ee=R+1,te=R-1,ne=H+1,ae=H-1,re=P.get("failJsonList"),ie=P.get("successJsonList"),oe=P.get("mediaId"),se="insert"==sessionStorage.getItem("lrpzHandleMode"),ue=f.default.createElement("div",null,f.default.createElement("div",null,"录入凭证 > Excel导入"),f.default.createElement("div",null,"1.下载模版 > 2.导入Excel > 3.导入完毕"),f.default.createElement("div",{className:"import-mask-tip"},"温馨提示"),f.default.createElement("div",null,"请下载统一的模版，并按相应的格式在Excel软件中填写您的业务数据，然后再导入到系统中(系统将自动读取Excel中的第一个sheet作为导入数据)；"),f.default.createElement("div",null,"单次导入最大分录数限定为3500条，不足时按最后一张完整凭证划分。"),f.default.createElement("div",{className:"onload"},f.default.createElement("a",{href:"https://www.xfannix.com/utils/template/%E5%87%AD%E8%AF%81%E6%A8%A1%E6%9D%BF.xls"},"1.下载模版")));return f.default.createElement("div",{className:"title"},f.default.createElement(v.ImportModal,{tip:ue,message:I,dispatch:O,exportDisable:q||J,iframeload:G,alertStr:"请选择要导入的凭证文件",showMessageMask:D,failJsonList:re,successJsonList:ie,beforCallback:function(){O(_.beforeLrVcImport())},closeCallback:function(){return O(_.closeLrImportContent())},afterCallback:function(e){return O(_.afterLrVcImport(e))},onClickCallback:function(){return O(_.judgeTitleFixed())},importLogAction:function(){},inputLogAction:function(){},mediaId:oe,onSubmitCallBack:function(e,t){return O(_.getFileUploadFetch(e,t))},ddImportCallBack:function(e){return O(m.allExportReceiverlist(e,"pzsendFailExcel",{mediaId:oe}))},importHaveProgress:!0,importProgressInfo:B,clearProgress:function(){O(_.changeMessageMask())},errorSize:B.get("failList").size>0,errorUrl:T.ROOT+"/excel/import/vc/error?accessToken="+B.get("accessToken")},f.default.createElement(l.default.Item,{key:"2",disabled:q||"insert"==U},f.default.createElement("span",{className:(q?"export-text-disable":"export-button-text")+" setting-common-ant-dropdown-menu-item",onClick:function(){if(!q&&"insert"!=U){var e="";if(j){var t=new Date(j,k,0),n=new Date,r=(new Date).getFullYear(),i=(new Date).getMonth()+1;e=t<n?t:Number(j)==Number(r)&&Number(k)==Number(i)?n:new Date(j,Number(k)-1,1)}else e=new Date;sessionStorage.setItem("lrpzHandleMode","insert"),O(_.initAndGetLastVcIdFetch("getLastVcIdFetch",e)),O(_.afterCopyClick(a)),a.some(function(e){return e.get("fcNumber")})&&O(_.getFCListDataFetch("modify"))}}},"复制")),f.default.createElement(l.default.Item,{key:"3",disabled:q||"insert"==U},f.default.createElement("span",{className:"export-button-text setting-common-ant-dropdown-menu-item",onClick:function(){"insert"==U||J||(sessionStorage.setItem("fromPos","lrpz"),O(m.handlePrintModalVisible(!0)),O(E.setPrintVcIndexAndDate(g,d,[N])))}},"打印"))),f.default.createElement(u.default,{placement:"top",title:(0,C.judgePermission)(Q).disabled?"当前角色无该权限":"insert"==U?"当前凭证需保存后方能审核":""},f.default.createElement(c.default,{className:"title-right",type:"ghost",style:{display:w?"none":""},disabled:(0,C.judgePermission)(Q).disabled||!!L||!!w||"insert"==U,onClick:function(){return(0,C.debounce)(function(){O(_.reviewedJvlist(g,d,h))})()}},"审核")),f.default.createElement(u.default,{placement:"top",title:(0,C.judgePermission)($).disabled?"当前角色无该权限":""},f.default.createElement(c.default,{className:"title-right three-word-btn",type:"ghost",style:{display:w?"":"none"},disabled:(0,C.judgePermission)($).disabled||!!L||"insert"==U,onClick:function(){return(0,C.debounce)(function(){O(_.cancelReviewedJvlist(g,d,h))})()}},"反审核")),f.default.createElement(c.default,{className:"title-right draft-button three-word-btn",type:"ghost",disabled:(0,C.judgePermission)(K.get("DRAFT_BOX")).disabled,style:{display:"insert"==sessionStorage.getItem("lrpzHandleMode")?"block":"none"},onClick:function(){O(p.addPageTabPane("EditPanes","Draft","Draft","草稿箱")),O(p.addHomeTabpane("Edit","Draft","草稿箱")),O(A.getDraftListFetch("全部"))}},"草稿箱"),f.default.createElement(c.default,{className:"title-right",type:"ghost",disabled:(0,C.judgePermission)(K.get("DRAFT_BOX")).disabled,style:{display:"insert"==sessionStorage.getItem("lrpzHandleMode")?"block":"none"},onClick:function(){return(0,C.debounce)(function(){O(_.draftSaveFetch(y))})()}},"暂存"),f.default.createElement(c.default,{className:"title-right four-word-btn",type:"ghost",onClick:function(){var e=a.toJS(),t=!1;for(var r in e)if(e[r].asslist.some(function(e){return!e.assid})){t=!0;break}t?s.default.warn("辅助核算不能为空"):O(_.saveJvItemFetch("true","",V,n))},disabled:q||!!L||!!w,style:{display:L||w?"none":"block"}},"保存并新增"),f.default.createElement(c.default,{className:"title-right",type:"ghost",onClick:function(){var e=a.toJS(),t=!1;for(var r in e)if(e[r].asslist.some(function(e){return!e.assid})){t=!0;break}t?s.default.warn("辅助核算不能为空"):O(_.saveJvItemFetch("false","",V,n))},disabled:!!L||!!w,style:{display:L||w?"none":"block"}},"保存"),f.default.createElement(c.default,{style:{display:se?"":"none"},className:"title-right",type:"ghost",disabled:q||!!L||!!w,onClick:function(){S.Confirm({message:"本操作将清空此凭证数据",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&O(_.clearLrpz())}})}},"清空"),f.default.createElement(c.default,{style:{display:se?"none":""},className:"title-right",type:"ghost",disabled:q||!!L||!!w,onClick:function(){return e.setState({deleteVcModal:!0,deleteHasFj:!!x.size})}},"删除"),f.default.createElement(c.default,{type:"ghost",className:"title-right",disabled:M?!b.size||ee==b.size:!F.size||ne==F.size,onClick:function(){return(0,C.debounce)(function(){O(M?_.getDraftItemFetch(b.get(ee),ee):_.getVcFetch(F.get(ne).split("_")[0],F.get(ne).split("_")[1],ne))})()}},f.default.createElement(o.default,{type:"caret-right"})),f.default.createElement(c.default,{type:"ghost",className:"title-right",disabled:M?!b.size||-1==te:!F.size||-1==ae,onClick:function(){return(0,C.debounce)(function(){O(M?_.getDraftItemFetch(b.get(te),te):_.getVcFetch(F.get(ae).split("_")[0],F.get(ae).split("_")[1],ae))})()}},f.default.createElement(o.default,{type:"caret-left"})),f.default.createElement("span",{className:"title-lrb-rule",onClick:function(){O(_.shortcut())}},"快捷键说明"),f.default.createElement(r.default,{ref:"modal",visible:z,title:"确定删除吗？",onCancel:function(){return e.setState({deleteVcModal:!1,isSeleck:!1})},footer:[f.default.createElement(c.default,{key:"back",type:"ghost",size:"large",onClick:function(){return e.setState({deleteVcModal:!1,isSeleck:!1})}},"取消"),f.default.createElement(c.default,{key:"submit",type:"primary",size:"large",disabled:!!Z&&!X,onClick:function(){e.setState({deleteVcModal:!1,isSeleck:!1}),O(_.deleteVcFetch())}},"确定")]},f.default.createElement(i.default,{checked:X,style:{display:Z?"":"none"},onChange:function(){return e.setState({isSeleck:!X})}}),f.default.createElement("span",{style:{marginRight:"10px",display:Z?"":"none"}},"凭证中含有附件附件也将被删除"),f.default.createElement("p",{style:{display:Z?"none":""}},"确定删除凭证吗？")))}}]),t}())||a;t.default=h},2509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=l(n(1)),o=n(17),s=l(n(2510)),u=l(n(2514)),c=l(n(2522));function l(e){return e&&e.__esModule?e:{default:e}}var d=(0,o.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.vcIndex,n=e.year,a=e.month,r=e.jvList,o=e.vcDate,l=e.amountDisplay,d=e.allAssList,f=e.focusRef,g=e.closedBy,_=e.reviewedBy,p=e.dispatch,m=e.createdBy,A=e.modifiedTime,E=e.createdTime,C=e.debitTotal,T=e.creditTotal,v=e.selectAcList,S=e.assDropListFull,y=e.currencyList,I=e.currencyDisplay,h=e.showAssDisableInfo,N=e.disabledDate,L=e.enclosureCountUser,O=e.unitDecimalCount;return i.default.createElement("div",{className:"voucher-wrap"},i.default.createElement("div",{className:"voucher "+(l&&I?"voucher-amount-currency":l||I?"voucher-amount":"")},i.default.createElement(s.default,{vcDate:o,year:n,month:a,vcIndex:t,closedBy:g,reviewedBy:_,dispatch:p,disabledDate:N,enclosureCountUser:L}),i.default.createElement(u.default,{vcDate:o,jvList:r,amountDisplay:l,allAssList:d,closedBy:g,reviewedBy:_,dispatch:p,focusRef:f,selectAcList:v,debitTotal:C,creditTotal:T,assDropListFull:S,currencyList:y,currencyDisplay:I,showAssDisableInfo:h,unitDecimalCount:O}),i.default.createElement(c.default,{createdBy:m,modifiedTime:A,createdTime:E})))}}]),t}())||a;t.default=d},2510:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=g(n(1230)),i=g(n(2813)),o=g(n(45)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1231),n(2511),n(55);var u=g(n(1)),c=n(17),l=g(n(6)),d=f(n(1276));f(n(27));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var _=(0,c.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),s(t,[{key:"render",value:function(){var e=this.props,t=e.year,n=e.month,a=e.vcDate,s=e.vcIndex,c=e.dispatch,f=e.closedBy,g=e.reviewedBy,_=e.disabledDate,p=e.enclosureCountUser,m=f||g?new Proxy({},{get:function(){return function(){return{type:"NO_CHANGE"}}}}):d;return u.default.createElement("div",{className:"voucher-header"},u.default.createElement("div",{className:"voucher-mark"},u.default.createElement("span",null,"凭证字"),u.default.createElement("span",null,u.default.createElement(o.default,{defaultValue:"记",style:{width:60}},u.default.createElement(Option,{value:"记"},"记"))),u.default.createElement("span",null,u.default.createElement(i.default,{min:1,style:{width:60},value:s,onChange:function(e){c(m.changeVcId(e))}})),u.default.createElement("span",null,"号")),u.default.createElement("div",{className:"voucher-date"},u.default.createElement("span",null,"日期 "),u.default.createElement(r.default,{format:"YYYY-MM-DD",value:a?(0,l.default)(a,"YYYY-MM-DD"):"",disabledDate:_,onChange:function(e,t){return c(m.changeVoucherDate(t,a))}})),u.default.createElement("div",{className:"voucher-header-tit"},"记账凭证"),u.default.createElement("span",null,t+" 年 第"+n+" 期"),u.default.createElement("div",{className:"voucher-header-enclosure"},u.default.createElement("span",null,"附件："),u.default.createElement("span",null,u.default.createElement(i.default,{min:0,max:99,size:"small",style:{width:60},value:p,onChange:function(e){void 0===e&&(e=""),c(m.changeVcEnclosureCountUser(e))}})),u.default.createElement("span",null,"个")),u.default.createElement("div",{className:"voucher-account",style:{display:f?"block":g?"block":"none"}},f?"已结账":"已审核"))}}]),t}())||a;t.default=_},2514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=l(n(1)),o=(n(18),n(17)),s=n(22),u=l(n(2515)),c=l(n(2516));function l(e){return e&&e.__esModule?e:{default:e}}var d=" ".repeat(12).split(""),f=(0,o.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"convertToStandardAmount",value:function(e){if(""===e)return d;for(var t=parseFloat(e).toFixed(2).replace(".","").replace("-","").split("");t.length<12;)t.unshift("");return t}},{key:"render",value:function(){var e=this,t=this.props,n=t.jvList,a=t.vcDate,r=t.allAssList,o=t.closedBy,l=t.reviewedBy,f=t.amountDisplay,g=t.dispatch,_=t.focusRef,p=t.selectAcList,m=t.debitTotal,A=t.creditTotal,E=t.assDropListFull,C=t.currencyList,T=t.currencyDisplay,v=t.showAssDisableInfo,S=t.unitDecimalCount,y=this.convertToStandardAmount(m),I=this.convertToStandardAmount(A),h={color:0==m.indexOf("-")?"red":"black"},N={color:0==A.indexOf("-")?"red":"black"},L=n.size;return i.default.createElement("div",{className:"voucher-body"},i.default.createElement(u.default,{amountDisplay:f,currencyDisplay:T}),n.map(function(t,n){return i.default.createElement(c.default,{key:n,idx:n,jvItem:t,vcDate:a,dispatch:g,jvListLength:L,selectAcList:p,creditAmount:"credit"===t.get("jvdirection")?e.convertToStandardAmount(t.get("jvamount")):d,debitAmount:"debit"===t.get("jvdirection")?e.convertToStandardAmount(t.get("jvamount")):d,focusRef:_,allAssList:r,closedBy:o,reviewedBy:l,assDropListFull:E,amountDisplay:f,currencyList:C,currencyDisplay:T,showAssDisableInfo:v,unitDecimalCount:S})}),i.default.createElement("div",{className:"voucher-summary"},i.default.createElement("div",null,"合计：",m===A?(0,s.chineseAmount)(m):""),i.default.createElement("div",{className:"voucher-de"},i.default.createElement("ul",{className:"voucher-amount text-show-wrap text-show-wrap-left"},y.map(function(e,t){return i.default.createElement("li",{key:t,style:h},e)}))),i.default.createElement("div",{className:"voucher-cr"},i.default.createElement("ul",{className:"voucher-amount text-show-wrap"},I.map(function(e,t){return i.default.createElement("li",{key:t,style:N},e)})))))}}]),t}())||a;t.default=f},2515:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),s=(r=o)&&r.__esModule?r:{default:r};var u=(0,n(17).immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.amountDisplay,n=e.currencyDisplay;return s.default.createElement("div",{className:"voucher-title"},s.default.createElement("div",{className:"voucher-abstract"},s.default.createElement("span",null,"摘要")),s.default.createElement("div",{className:"voucher-acount"},s.default.createElement("span",null,"会计科目")),s.default.createElement("div",{className:"voucher-number-wrap",style:{display:t?"block":"none"}},s.default.createElement("span",null,"数量")),s.default.createElement("div",{className:"voucher-number-wrap",style:{display:n?"block":"none"}},s.default.createElement("span",null,"外币")),s.default.createElement("div",{className:"voucher-cr"},s.default.createElement("div",null,"借方金额"),s.default.createElement("ul",{className:"voucher-amount-title text-show-wrap text-show-wrap-left"},["","亿","千","百","十","万","千","百","十","元","角","分"].map(function(e,t){return s.default.createElement("li",{key:t},e)}))),s.default.createElement("div",{className:"voucher-de"},s.default.createElement("div",null,"贷方金额"),s.default.createElement("ul",{className:"voucher-amount-title text-show-wrap"},["","亿","千","百","十","万","千","百","十","元","角","分"].map(function(e,t){return s.default.createElement("li",{key:t},e)}))))}}]),t}())||a;t.default=u},2516:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=E(n(37)),i=E(n(14)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(38),n(78);var s=E(n(1)),u=(n(18),n(17)),c=A(n(27)),l=A(n(30)),d=E(n(2517)),f=E(n(2518)),g=E(n(2519)),_=E(n(2520)),p=E(n(2521)),m=A(n(1276));A(n(43));function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}var C=(0,u.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={countBlur:!1,priceBlur:!1,standardAmountBlur:!1,exchangeBlur:!1,acunitOpen:"0"},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.idx,a=t.jvItem,o=t.vcDate,u=t.dispatch,A=t.jvListLength,E=t.selectAcList,C=t.creditAmount,T=t.debitAmount,v=t.focusRef,S=t.allAssList,y=t.closedBy,I=t.reviewedBy,h=t.assDropListFull,N=t.amountDisplay,L=t.currencyList,O=t.currencyDisplay,b=t.showAssDisableInfo,M=t.unitDecimalCount,R=this.state,D=R.countBlur,G=R.priceBlur,P=R.standardAmountBlur,w=R.exchangeBlur,H=R.acunitOpen,F=a.get("acid"),U=a.get("acfullname"),x=E.find(function(e){return e.get("acid")==F&&e.get("acfullname")==U}),j=S.filter(function(e){return(x?x.get("asscategorylist"):[]).includes(e.get("asscategory"))}),k=y||I?new Proxy({},{get:function(){return function(){return{type:"NO_CHANGE"}}}}):m,B=function(e){return u(k.changeFocusInput(e))},J="",V="",K="";a.get("asslist").map(function(e,t){J=J?J+"_"+e.get("asscategory")+"_"+e.get("assid")+"_"+e.get("assname"):e.get("asscategory")+"_"+e.get("assid")+"_"+e.get("assname"),0==t?V=e.get("asscategory")+"_"+e.get("assid")+"_"+e.get("assname"):1==t&&(K=e.get("asscategory")+"_"+e.get("assid")+"_"+e.get("assname"))});var Y=a.get("jvcount");0==Y&&(D||(Y=""));var W=a.get("price");0==W&&(G||(W=""));var z=a.get("standardAmount");0==z&&(P||(z=""));var X=a.get("exchange");return 0==X&&(w||(X="")),s.default.createElement("div",{className:"voucher-jvwrap"},s.default.createElement("div",{className:"jv-mask"},s.default.createElement("span",null,s.default.createElement(i.default,{type:"plus-circle-o",onClick:function(){30===A&&l.Alert("建议分录不要超过30条"),60===A&&l.Alert("强烈建议分录不要超过60条"),A<90?u(k.insertJvItem(n)):l.Alert("禁止分录超过90条")}}),s.default.createElement(i.default,{onClick:function(){return u(k.deleteJvItem(n))},type:"close-circle"})),s.default.createElement("span",null,"必填"),s.default.createElement("span",{style:{pointerEvents:"none"}},s.default.createElement("span",{style:{pointerEvents:"auto"},onClick:function(){u(k.changeAcModalDisplay(n))}},"选择科目"),s.default.createElement("span",{style:{pointerEvents:"auto"},onClick:function(){sessionStorage.setItem("enterLrModal","lrpz"),u(k.changelrAcModalDisplay())}},"新增科目"),s.default.createElement("span",{style:{display:void 0===a.get("closingbalance")?"none":""}},"余额: ",a.get("closingbalance")))),s.default.createElement("div",{className:"voucher-jv"},s.default.createElement(d.default,{copy:a.get("copy"),className:"voucher-abstract",id:"abstract-"+n,value:a.get("jvabstract"),assDropListFull:h,onChange:function(e){return u(k.changeJvAbstract(e.target.value,n,!1))},onBlur:function(e){return u(k.changeJvAbstract(e.target.value,n,!0))},onClick:function(){return n&&"insert"==sessionStorage.getItem("lrpzHandleMode")?u(k.copyJvAbstract(n)):null},focus:"abstract-"+n==v,focusClick:B,isInsert:a.get("isInsert")}),s.default.createElement(g.default,{className:"voucher-acount",id:"select-"+n,focus:"select-"+n==v,selectAcList:E,dispatch:u,finnalAssList:j,allAssValue:J,allAssValueOne:V,allAssValueTwo:K,acValue:F?F+" "+U:"",jvAssList:a.get("asslist"),acunitOpen:H,assDropListFull:a.get("asslist").some(function(e){return!e.get("assid")}),showAssDisableInfo:b,onChange:function(t){var a=t.split(" ")[0],i=E.find(function(e){return e.get("acid")==a});if(void 0===i)return r.default.info("科目异常，请刷新");u(k.changeJvAc(n,a,i&&i.get("acname"),i&&i.get("acfullname"),i&&i.get("asscategorylist"),i&&i.get("acunitOpen"))),i&&e.setState({acunitOpen:i.get("acunitOpen")}),a&&(i.get("asscategorylist").size||("1"==i.get("acunitOpen")&&u(k.getAmountDataFetch(a,o,n)),u(k.getAcCloseBalance(a,o,n))),"1"==i.get("fcStatus")&&u(k.getFCListDataFetch(n)))},cancleAssInput:function(e){console.log("cancleAssInput",e),u(k.cancleAssInput(n,e))},onAssChange:function(e,t,r){if(1===a.get("asslist").size)"1"==a.get("acunitOpen")&&u(k.getAmountDataFetch(F,o,n,e,t.split(c.ASS_ID_AND_NAME_CONNECT)[0])),u(k.getAcCloseBalance(F,o,n,e,t.split(c.ASS_ID_AND_NAME_CONNECT)[0]));else if(2===a.get("asslist").size){var i=a.get("asslist").find(function(t){return t.get("asscategory")!==e}),s=i.get("asscategory"),l=i.get("assid");l&&("1"==a.get("acunitOpen")&&u(k.getAmountDataFetch(F,o,n,e,t.split(c.ASS_ID_AND_NAME_CONNECT)[0],s,l)),u(k.getAcCloseBalance(F,o,n,e,t.split(c.ASS_ID_AND_NAME_CONNECT)[0],s,l)))}u(k.changeJvAss(n,e,t))},onClick:function(){"select-"+n!=v&&u(k.changeFocusInput("select-"+n))}}),s.default.createElement(_.default,{amountDisplay:N,id:n,jvItem:a,dispatch:u,jvCount:Y,price:W,idAmount:"amount-"+n,idPrice:"price-"+n,focusAmount:"amount-"+n==v,focusPrice:"price-"+n==v,focusClickAmount:B,focusClickPrice:B,onChangeAmount:function(e){var t=e.target.value;if("."==t?t="0.":"-."==t&&(t="-0."),t>1e6||t<-1e6)return r.default.warn("数量不能超过"+c.LRPZ_COUNT_LENGTH+"位");u(k.changeJvCount(t,n,M))},onFocusAmount:function(t){e.setState({countBlur:!0}),t.target.value=Y||""},onBlurAmount:function(){e.setState({countBlur:!1}),"1"==a.get("fcStatus")||a.get("fcNumber")?u(k.autoCalculateAll(n,"count",M)):u(k.autoCalculate(n,"count",M))},onChangePrice:function(e){var t=e.target.value;if(e.target.value<0&&(r.default.warn("单价不允许为负数"),t=-t),"."==t&&(t="0."),t>1e9||t<-1e9)return r.default.warn("单价不能超过"+c.LRPZ_PRICE_LENGTH+"位");u(k.changeJvPrice(t,n))},onFocusPrice:function(t){e.setState({priceBlur:!0}),t.target.value=W||""},onBlurPrice:function(){e.setState({priceBlur:!1}),"1"==a.get("fcStatus")||a.get("fcNumber")?u(k.autoCalculateAll(n,"price",M)):u(k.autoCalculate(n,"price",M))}}),s.default.createElement(p.default,{id:n,jvItem:a,dispatch:u,exchange:X,standardAmount:z,currencyList:L,currencyDisplay:O,idStandardAmount:"standardAmount-"+n,idExchange:"exchange-"+n,focusStandardAmount:"standardAmount-"+n==v,focusExchange:"exchange-"+n==v,focusClickStandardAmount:B,focusClickExchange:B,onSelect:function(e){u(k.changeJvItemNumber(n,e))},changeStandardAmount:function(e){return u(k.changeJvStandardAmount(n,e.target.value))},changeExchange:function(e){var t=e.target.value;"."==t?t="0.":"-."==t&&(t="-0."),u(k.changeJvExchange(n,t))},onFocusStandardAmount:function(t){e.setState({standardAmountBlur:!0}),t.target.value=z||""},onBlurStandardAmount:function(){e.setState({standardAmountBlur:!1}),u(k.autoCalculateAll(n,"standardAmount",M))},onFocusExchange:function(t){e.setState({exchangeBlur:!0}),t.target.value=z||""},onBlurExchange:function(){e.setState({exchangeBlur:!1}),u(k.autoCalculateAll(n,"exchange",M))}}),s.default.createElement(f.default,{style:{fontSize:20,textAlign:"right"},className:"voucher-de",value:"credit"===a.get("jvdirection")?"":a.get("jvamount"),showAmount:!0,id:"de-"+n,focus:"de-"+n==v,focusClick:B,amountValue:T,assDropListFull:h,onChange:function(e){var t=e.target.value;"."==t?t="0.":"-."==t&&(t="-0."),u(k.changeJvDirection(n,"debit")),u(k.changeJvAmount(t,n,"debit"))},onBlur:function(){"1"==a.get("fcStatus")||a.get("fcNumber")?u(k.autoCalculateAll(n,"amount",M)):u(k.autoCalculate(n,"amount",M))},onKeyDown:function(){32==window.event.keyCode&&u(k.changeJvDirectionByKey(n,"debit"))}}),s.default.createElement(f.default,{style:{fontSize:20,textAlign:"right"},className:"voucher-cr",value:"credit"===a.get("jvdirection")?a.get("jvamount"):"",showAmount:!0,id:"cr-"+n,focus:"cr-"+n==v,focusClick:B,amountValue:C,assDropListFull:h,onChange:function(e){var t=e.target.value;"."==t?t="0.":"-."==t&&(t="-0."),u(k.changeJvDirection(n,"credit")),u(k.changeJvAmount(t,n,"credit"))},onBlur:function(){"1"==a.get("fcStatus")||a.get("fcNumber")?u(k.autoCalculateAll(n,"amount",M)):u(k.autoCalculate(n,"amount",M))},onKeyDown:function(){32==window.event.keyCode&&u(k.changeJvDirectionByKey(n,"credit"))}})))}}]),t}())||a;t.default=C},2517:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),s=(r=o)&&r.__esModule?r:{default:r},u=(n(18),n(17)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(27));var l=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),i(t,[{key:"componentDidMount",value:function(){var e=this;this.props.showAmount&&this.refs[this.props.id].addEventListener("keydown",function(){return e.props.onKeyDown()},!1),"abstract-0"===this.props.id&&this.refs[this.props.id].focus(),"true"===this.props.isInsert&&(this.refs[this.props.id].focus(),this.refs[this.props.id].select())}},{key:"componentDidUpdate",value:function(e){this.props.focus&&this.refs[this.props.id].focus(),this.props.copy&&this.props.copy!=e.copy&&this.refs[this.props.id].select()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.id,r=t.style,i=t.value,o=t.focus,u=t.showAmount,l=t.amountValue,d=t.onChange,f=t.onBlur,g=t.onClick,_=(t.assDropListFull,t.focusClick),p=(t.onKeyDown,t.copy,t.isInsert,{color:u&&i<0?"red":"black"}),m=u?s.default.createElement("ul",{className:"voucher-amount"},l.map(function(e,t){return s.default.createElement("li",{key:t,style:p},e)})):i;return s.default.createElement("div",{className:"combinput"+(n?" "+n:""),onClick:function(){g&&g(),o||e.refs[a].select(),o||_(a)}},s.default.createElement("div",{className:"text-show-wrap"},s.default.createElement("div",{className:"text-show"},s.default.createElement("span",null,m))),s.default.createElement("textarea",{type:"text",className:"combinput-input combinput-input-abs",autoComplete:"off",ref:a,value:i,onChange:function(e){return d(e)},onKeyDown:function(e){var t=e||window.event;(t.charCode||t.keyCode)==c.ENTER_KEY_CODE&&e.preventDefault()},onBlur:function(e){return f(e)},style:r}))}}]),t}())||a;t.default=l},2518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),s=(r=o)&&r.__esModule?r:{default:r};n(18);var u=(0,n(17).immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),i(t,[{key:"componentDidMount",value:function(){var e=this;this.props.showAmount&&this.refs[this.props.id].addEventListener("keydown",function(){return e.props.onKeyDown()},!1),"abstract-0"===this.props.id&&this.refs[this.props.id].focus(),"true"===this.props.isInsert&&(this.refs[this.props.id].focus(),this.refs[this.props.id].select())}},{key:"componentDidUpdate",value:function(e){this.props.focus&&this.refs[this.props.id].focus(),this.props.copy&&this.props.copy!=e.copy&&this.refs[this.props.id].select()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.id,r=t.style,i=t.value,o=t.focus,u=t.showAmount,c=t.amountValue,l=t.onChange,d=t.onBlur,f=t.onClick,g=(t.assDropListFull,t.focusClick),_=(t.onKeyDown,t.copy,t.isInsert,{color:u&&i<0?"red":"black"}),p=u?s.default.createElement("ul",{className:"voucher-amount"},c.map(function(e,t){return s.default.createElement("li",{key:t,style:_},e)})):i;return s.default.createElement("div",{className:"combinput"+(n?" "+n:""),onClick:function(){f&&f(),o||e.refs[a].select(),o||g(a)}},s.default.createElement("div",{className:"text-show-wrap"},s.default.createElement("div",{className:"text-show"},s.default.createElement("span",null,p))),s.default.createElement("input",{type:"text",className:"combinput-input",autoComplete:"off",ref:a,value:i,onChange:function(e){return l(e)},onBlur:function(e){return d(e)},style:r}))}}]),t}())||a;t.default=u},2519:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=f(n(61)),i=f(n(45)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(79),n(55);var s=f(n(1)),u=(n(18),n(17)),c=d(n(1276)),l=(d(n(43)),d(n(27)));d(n(30));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}var g=i.default.Option,_=(i.default.OptGroup,(0,u.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={assFocus:!1,oneClick:!0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),o(t,[{key:"componentDidUpdate",value:function(){if(this.props.focus){var e=this.state.assFocus,t=this.props.finnalAssList.size;this.props.finnalAssList.size?e||0===e?this.refs["ass"+e%t].getElementsByTagName("input")[0].focus():this.refs[this.props.id+"-1"].focus():this.refs[this.props.id].getElementsByTagName("input")[0].focus()}}},{key:"componentWillReceiveProps",value:function(e){if(this.props.acValue===e.acValue&&e.finnalAssList.size!==e.jvAssList.size){this.setState({assFocus:!1});var t=this.props.focus;this.props.dispatch(c.refreshAcItemAsslist(this.props.id,e.finnalAssList,t))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.onChange,o=t.id,u=t.focus,d=t.onClick,f=t.acValue,_=t.allAssValue,p=t.allAssValueOne,m=t.allAssValueTwo,A=t.dispatch,E=t.selectAcList,C=t.finnalAssList,T=t.assDropListFull,v=t.jvAssList,S=t.onAssChange,y=t.cancleAssInput,I=(t.showAssDisableInfo,this.state.oneClick),h=0===this.state.assFocus?this.state.assFocus:-1,N=E.map(function(e,t){var n=e.get("acid"),a=E.getIn([t+1,"acid"]);return e.set("hasSub",!!a&&0===a.indexOf(n))}).filter(function(e){return!e.get("hasSub")}),L=_?s.default.createElement("div",{className:"text-show"},s.default.createElement("span",null,f),s.default.createElement("span",{className:"text-show-fzhs"},"辅助核算:"+p),m?s.default.createElement("span",{className:"text-show-fzhs"},"辅助核算:"+m):""):s.default.createElement("div",{className:"text-show"},s.default.createElement("span",null,f));return s.default.createElement("div",{className:"combselect"+(n?" "+n:"")+" combselect-select-focus",ref:o,onClick:function(){!_&&f&&I&&(e.setState({oneClick:!1}),a(f)),d()},onKeyUp:function(t){return 13==t.keyCode&&e.setState({assFocus:T&&h+1})}},s.default.createElement("div",{className:"text-show-wrap"},L),s.default.createElement(i.default,{showSearch:!0,className:u?"combselect-select combselect-select-focus":"combselect-select",optionFilterProp:"children",notFoundContent:"无法找到相应科目",value:f,onChange:function(e){return e||a(e)},onSelect:a,style:{opacity:u?1:0,display:!C.size&&u?"block":"none"}},N.map(function(e,t){return s.default.createElement(g,{key:t,value:e.get("acid")+" "+e.get("acfullname")},""+e.get("acid")+l.AC_ID_AND_NAME_CONNECT+e.get("acfullname"))})),s.default.createElement("div",{className:"asslist-input",style:{opacity:u?1:0,display:C.size&&u?"block":"none"}},s.default.createElement("input",{ref:o+"-1",value:f,className:"asslist-input-focus",onChange:function(e){return y(e.target.value)}}),s.default.createElement("div",{className:"asslist-select-wrap"},C&&C.size===v.size&&C.map(function(t,n){return s.default.createElement("div",{key:t.get("asscategory"),ref:"ass"+n},s.default.createElement(r.default,{placement:"bottom",title:t.get("asscategory").length>4?t.get("asscategory"):""},s.default.createElement("span",{className:"asslist-label"},s.default.createElement("span",{className:"asslist-label-ass"},t.get("asscategory").length>4?t.get("asscategory").slice(0,4)+"...":t.get("asscategory")),s.default.createElement("span",null,":"))),s.default.createElement(i.default,{showSearch:!0,dropdownMatchSelectWidth:!1,className:h===n||u?"asslist-select asslist-select-focus":"asslist-select",optionFilterProp:"children",value:v.size?v.find(function(e){return e.get("asscategory")==t.get("asscategory")}).get("assname"):"",onChange:function(a){if(""!==a)return a;S(t.get("asscategory"),a,n),e.setState({assFocus:n})},onSelect:function(a){e.setState({assFocus:n}),S(t.get("asscategory"),a,n)},onFocus:function(){t.get("asslist").filter(function(e){return!e.get("disableTime")}).size||A(c.showAssDisableModal(t.get("asscategory")))}},t.get("asslist").filter(function(e){return!e.get("disableTime")}).map(function(e){return s.default.createElement(g,{key:e.get("assid"),value:e.get("assid")+l.ASS_ID_AND_NAME_CONNECT+e.get("assname")},e.get("assid")+" "+e.get("assname"))})),s.default.createElement("span",{className:"asslist-new",onClick:function(){var e=t.get("asscategory");sessionStorage.setItem("enterLrModal","lrpz"),sessionStorage.removeItem("handleAssCustom"),A(c.changeLrFzhsModalDisplay()),A(c.changeLrAssCategory(e)),A(c.getAssNextCode(e))}},"新增"))}))))}}]),t}())||a);t.default=_},2520:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),s=(r=o)&&r.__esModule?r:{default:r},u=(n(18),n(17));!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(27));var c=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),i(t,[{key:"componentDidUpdate",value:function(e){this.props.focusAmount&&this.refs[this.props.idAmount].focus(),this.props.focusPrice&&this.refs[this.props.idPrice].focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.jvItem,a=(t.dispatch,t.jvCount),r=t.price,i=t.onChangeAmount,o=t.onFocusAmount,u=t.onBlurAmount,c=t.onChangePrice,l=t.onFocusPrice,d=t.onBlurPrice,f=t.idAmount,g=t.idPrice,_=t.focusAmount,p=t.focusPrice,m=t.focusClickAmount,A=t.focusClickPrice,E=t.amountDisplay;return s.default.createElement("div",{className:"voucher-number-wrap",style:{background:"1"==n.get("acunitOpen")?"#fff":"#f9f9f9",display:E?"block":"none"}},s.default.createElement("ul",{className:"voucher-number",style:{display:"1"==n.get("acunitOpen")?"":"none"}},s.default.createElement("li",{onClick:function(){_||e.refs[f].select(),_||m(f)}},s.default.createElement("span",null,"数量:"),s.default.createElement("input",{ref:f,value:"1"==n.get("acunitOpen")?a:"",onChange:function(e){return i(e)},onFocus:function(e){return o(e)},onBlur:function(e){return u()}}),s.default.createElement("span",null,n.get("jvunit"))),s.default.createElement("li",{onClick:function(){p||e.refs[g].select(),p||A(g)}},s.default.createElement("span",null,"单价:"),s.default.createElement("input",{ref:g,value:"1"==n.get("acunitOpen")?r:"",onChange:function(e){return c(e)},onFocus:function(e){return l(e)},onBlur:function(e){return d()}}))))}}]),t}())||a;t.default=c},2521:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),s=(r=o)&&r.__esModule?r:{default:r},u=(n(18),n(17));!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(27));var c=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),i(t,[{key:"componentDidUpdate",value:function(e){this.props.focusStandardAmount&&this.refs[this.props.idStandardAmount].focus(),this.props.focusExchange&&this.refs[this.props.idExchange].focus()}},{key:"render",value:function(){var e=this,t=this.props,n=(t.id,t.jvItem),a=(t.dispatch,t.exchange),r=t.standardAmount,i=(t.currencyList,t.onSelect),o=t.currencyDisplay,u=t.changeStandardAmount,c=t.changeExchange,l=t.idExchange,d=t.idStandardAmount,f=t.focusStandardAmount,g=t.focusExchange,_=t.focusClickStandardAmount,p=t.focusClickExchange,m=t.onFocusStandardAmount,A=t.onBlurStandardAmount,E=t.onFocusExchange,C=t.onBlurExchange;return s.default.createElement("div",{className:"voucher-number-wrap",style:{background:n.get("fcNumber")?"#fff":"#f9f9f9",display:o?"block":"none"}},s.default.createElement("ul",{className:"voucher-currency",style:{display:n.get("fcNumber")?"":"none"}},s.default.createElement("li",{onClick:function(){f||e.refs[d].select(),f||_(d)}},s.default.createElement("span",null,"原币:"),s.default.createElement("input",{ref:d,type:"number",value:n.get("fcNumber")?r:"",onChange:u,onFocus:function(e){return m(e)},onBlur:function(e){return A()}})),s.default.createElement("li",{onClick:function(){g||e.refs[l].select(),g||p(l)}},s.default.createElement("span",{className:"voucher-currency-select clearfix"},s.default.createElement("span",{className:"voucher-currency-select-left"},n.get("fcNumber")),s.default.createElement("span",{className:"voucher-currency-select-right"},s.default.createElement("span",{onClick:function(){return i("pre")}}),s.default.createElement("span",{onClick:function(){return i("next")}}))),s.default.createElement("input",{ref:l,value:n.get("fcNumber")?a:"",onChange:c,onFocus:function(e){return E(e)},onBlur:function(e){return C()}}))))}}]),t}())||a;t.default=c},2522:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),s=(r=o)&&r.__esModule?r:{default:r};var u=(0,n(17).immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.createdBy,n=e.modifiedTime,a=e.createdTime;return s.default.createElement("div",{className:"voucher-footer"},s.default.createElement("span",null,"制单人:",t),s.default.createElement("span",null,"修改时间:",n),s.default.createElement("span",null,"录入时间:",a))}}]),t}())||a;t.default=u},2523:function(e,t,n){}}]);