(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{1191:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var r=a(n(2477));function a(e){return e&&e.__esModule?e:{default:e}}var i={exportRecordingState:a(n(1456)).default};t.reducer=i,t.view=r.default},1223:function(e,t,n){},1224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=l(n(1)),s=l(n(0)),c=n(17);function l(e){return e&&e.__esModule?e:{default:e}}n(1223);var f=(0,c.immutableRenderDecorator)((i=a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.className,r=e.onClick;return u.default.createElement("div",{className:"container-wrap container-width-"+t+" "+n,onClick:r},this.props.children)}}]),t}(),a.displayName="ContainerWrap",a.propTypes={type:s.default.string.isRequired,className:s.default.string.isRequired},r=i))||r;t.default=f},1226:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),u=(a=o)&&a.__esModule?a:{default:a},s=n(17);n(1223);var c=(0,s.immutableRenderDecorator)(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),i(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"flex-title"},this.props.children)}}]),t}())||r;t.default=c},1300:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortDraftListByDate=t.reverseDraftList=t.searchDraft=t.changeInputValue=t.unLockDraft=t.lockDraft=t.deleteDraft=t.selectDraftItem=t.selectDraftAll=t.getDraftListFetch=void 0;var r,a=n(31),i=(r=a)&&r.__esModule?r:{default:r},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1306)),u=(n(18),n(22));var s=t.getDraftListFetch=function(e){return function(t){t({type:o.SWITCH_LOADING_MASK}),"全部"===e?(0,i.default)("getdraftlist","POST",JSON.stringify({status:"-1"}),function(e){(0,u.showMessage)(e)&&t({type:o.GET_DRAFT_LIST_FETCH,receivedData:e.data,selectDraftType:"全部"}),t({type:o.SWITCH_LOADING_MASK})}):"未锁定"===e?(0,i.default)("getdraftlist","POST",JSON.stringify({status:"0"}),function(e){(0,u.showMessage)(e)&&t({type:o.GET_DRAFT_LIST_FETCH,receivedData:e.data,selectDraftType:"未锁定"}),t({type:o.SWITCH_LOADING_MASK})}):(0,i.default)("getdraftlist","POST",JSON.stringify({status:"1"}),function(e){(0,u.showMessage)(e)&&t({type:o.GET_DRAFT_LIST_FETCH,receivedData:e.data,selectDraftType:"已锁定"}),t({type:o.SWITCH_LOADING_MASK})})}};t.selectDraftAll=function(){return{type:o.SELECT_DRAFT_ALL}},t.selectDraftItem=function(e){return{type:o.SELECT_DRAFT_ITEM,idx:e}},t.deleteDraft=function(e,t){return function(n){(0,i.default)("deletedraft","POST",JSON.stringify({vcKeyList:e}),function(e){(0,u.showMessage)(e)&&n(s(t))})}},t.lockDraft=function(e,t){return function(n){(0,i.default)("lockdraft","POST",JSON.stringify({vcKeyList:e}),function(e){(0,u.showMessage)(e)&&n(s(t))})}},t.unLockDraft=function(e,t){return function(n){(0,i.default)("unlockdraft","POST",JSON.stringify({vcKeyList:e}),function(e){(0,u.showMessage)(e)&&n(s(t))})}},t.changeInputValue=function(e){return{type:o.CHANGE_DRAFT_INPUT_VALUE,value:e}},t.searchDraft=function(e){return{type:o.SEARCH_DRAFT,value:e}},t.reverseDraftList=function(){return{type:o.REVERSE_DRAFT_LIST}},t.sortDraftListByDate=function(){return{type:o.SORT_DRAFT_LIST_BY_DATE}}},1306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_DRAFT="INIT_DRAFT",t.GET_DRAFT_LIST_FETCH="GET_DRAFT_LIST_FETCH",t.SELECT_DRAFT_ALL="SELECT_DRAFT_ALL",t.SELECT_DRAFT_ITEM="SELECT_DRAFT_ITEM",t.CHANGE_DRAFT_INPUT_VALUE="CHANGE_DRAFT_INPUT_VALUE",t.SEARCH_DRAFT="SEARCH_DRAFT",t.NOT_SELECT_MODEL_ALL="NOT_SELECT_MODEL_ALL",t.SORT_DRAFT_LIST_BY_DATE="SORT_DRAFT_LIST_BY_DATE",t.REVERSE_DRAFT_LIST="REVERSE_DRAFT_LIST"},1329:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transferDraftPz=t.changeMessageMask=t.setFjglData=t.cancelBatchVcReviewed=t.batchVcReviewed=t.sortVcListByReviewed=t.reverseVcList=t.sortVcListByDate=t.notSelectVcAll=t.selectVcAll=t.selectVcItem=t.deleteVcItemFetch=t.closeVcImportContent=t.afterVcImport=t.getFileUploadFetch=t.beforeVcImport=t.getSortVcFetch=t.getVcListFetch=t.getPeriodAndVcListFetch=void 0;var r=d(n(37));n(38);var a=n(22),i=f(n(1343)),o=f(n(43)),u=d(n(31)),s=f(n(30)),c=f(n(1300)),l=f(n(60));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}var _=t.getPeriodAndVcListFetch=function(e,t,n,r,a,i){return function(o){o(E(e,t,n,r,a,i,null,"true"))}},p=t.getVcListFetch=function(e,t,n,r,a,i,o){return function(u){u(E(e,t,n,r,a,i,o))}},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",n=arguments[2],s=arguments[3],c=arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},f=arguments[6],d=arguments[7];return function(_){_({type:i.SWITCH_LOADING_MASK}),(0,u.default)("getvcpaging","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",pageSize:"200",currentPage:t,sortTime:n||"",sortIndex:s||"",sortReviewedby:c||"",condition:l.condition?l.condition:"",searchContentType:l.conditionType?l.conditionType:"",getPeriod:d}),function(t){if((0,a.showMessage)(t))if("true"==d){0!==t.code||t.data.vcList.length||r.default.info("当前月份无任何凭证");var n=_(o.everyTableGetPeriod(t)),u=e||n;_(T(t.data.vcList,u,t.data.currentPage,t.data.pageCount))}else 0!==t.code||t.data.vcList.length||r.default.info("当前月份无任何凭证"),_(T(t.data.vcList,e,t.data.currentPage,t.data.pageCount));else _({type:i.INIT_CXPZ});f&&f(),_({type:i.SWITCH_LOADING_MASK})})}},T=function(e,t,n,r){return function(a){a({type:i.GET_VC_LIST_FETCH,receivedData:e,issuedate:t,currentPage:n,pageCount:r})}},S=(t.getSortVcFetch=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK});var n=sessionStorage.getItem("sort");(0,u.default)("sortvc","POST",JSON.stringify({year:e.substr(0,4),month:e.substr(6,2),sort:n}),function(n){t({type:i.SWITCH_LOADING_MASK}),(0,a.showMessage)(n,"show")&&t(p(e))})}},t.beforeVcImport=function(){return{type:i.BEFORE_VC_IMPORT}},t.getFileUploadFetch=function(e,t){return function(n,r){n({type:i.SWITCH_LOADING_MASK}),(0,u.default)("vcImport","UPLOAD",e,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,a.showMessage)(e)){n(S(e)),t();var o=500;e.data.total>400&&(o=2e3);!function e(t){var s=setTimeout(function(){var o=r().cxpzState.getIn(["flags","showMessageMask"]);(0,u.default)("acImportProgress","GET","accessToken="+t,function(r){(0,a.showMessage)(r)&&(n({type:i.GET_CXPZ_IMPORT_PROGRESS,receivedData:r,accessToken:t}),r.data.progress>=100&&r.data.successList.length>0&&n(_()),o&&r.data.progress<100&&e(t))}),clearTimeout(s)},o)}(e.data.accessToken)}})}},t.afterVcImport=function(e){return function(t){t({type:i.AFTER_VC_IMPORT,receivedData:e})}});t.closeVcImportContent=function(){return{type:i.CLOSE_VC_IMPORT_CONTENT}},t.deleteVcItemFetch=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK});var o=e.get("vclist"),s=o.filter(function(e){return e.get("checkboxDisplay")}).map(function(e){return e.get("vcindex")});(0,u.default)("deletevc","POST",JSON.stringify({year:e.getIn(["vclist",0,"year"]),month:e.getIn(["vclist",0,"month"]),vcindexlist:s,action:"QUERY_VC-DELETE_VC-BATCH_DELETE"}),function(e){(0,a.showMessage)(e)&&(o.size===s.size&&(0,u.default)("getperiod","GET","",function(e){(0,a.showMessage)(e)?e.data.lastyear?n({type:i.GET_PERIOD_FETCH,receivedData:e}):n({type:i.GET_PERIOD_FETCH,receivedData:{code:e.data.lastyear?0:17e3,message:e.data.lastyear?"成功":"当前无凭证",data:e.data}}):n({type:i.INIT_CXPZ})}),t&&t(),e.data.failJsonList&&e.data.failJsonList.length&&r.default.warn(e.data.failJsonList.join(";"))),n({type:i.SWITCH_LOADING_MASK})})}},t.selectVcItem=function(e){return{type:i.SELECT_VC_ITEM,idx:e}},t.selectVcAll=function(){return{type:i.SELECT_VC_ALL}},t.notSelectVcAll=function(){return{type:i.NOT_SELECT_VC_ALL}},t.sortVcListByDate=function(){return{type:i.SORT_VC_LIST_BY_DATE}},t.reverseVcList=function(){return{type:i.REVERSE_VC_LIST}},t.sortVcListByReviewed=function(){return{type:i.SORT_VC_LIST_BY_REVIEWED}},t.batchVcReviewed=function(e,t,n,r,o,c){return function(e,l){e({type:i.SWITCH_LOADING_MASK});var f=l().cxpzState.get("issuedate"),d=l().cxpzState.get("vclist").filter(function(e){return e.get("checkboxDisplay")}).map(function(e){return e.get("vcindex")});(0,u.default)("reviewVc","POST",JSON.stringify({year:f.substr(0,4),month:f.substr(6,2),vcindexlist:d,action:"QUERY_VC-AUDIT-BATCH_AUDIT"}),function(u){e({type:i.SWITCH_LOADING_MASK}),(0,a.showMessage)(u)&&(u.data.success>0&&e(p(f,t,n,r,o,c)),u.data.failList.length>0&&s.Alert(u.data.failList.reduce(function(e,t){return e+";"+t})))})}},t.cancelBatchVcReviewed=function(e,t,n,r,o,c){return function(e,l){e({type:i.SWITCH_LOADING_MASK});var f=l().cxpzState.get("issuedate"),d=l().cxpzState.get("vclist").filter(function(e){return e.get("checkboxDisplay")}).map(function(e){return e.get("vcindex")});(0,u.default)("cancelReviewVc","POST",JSON.stringify({year:f.substr(0,4),month:f.substr(6,2),vcindexlist:d,action:"QUERY_VC-CANCEL_AUDIT-BATCH_CANCEL_AUDIT"}),function(u){e({type:i.SWITCH_LOADING_MASK}),(0,a.showMessage)(u)&&(u.data.success>0&&e(p(f,t,n,r,o,c)),u.data.failList.length>0&&s.Alert(u.data.failList.reduce(function(e,t){return e+";"+t})))})}},t.setFjglData=function(){return function(e,t){var n=t().cxpzState.get("issuedate");e({type:i.CHANGE_FJGL_ISSUEDATE,issuedate:n})}},t.changeMessageMask=function(){return{type:i.CHANGE_CXPZ_MESSAGEMASK}},t.transferDraftPz=function(e,t){return function(n,r){var i=e.map(function(e){return e.get("vcindex")}),o=r().cxpzState.get("issuedate"),s=t.getIn(["preDetailList","DRAFT_BOX","open"]);(0,u.default)("transferDraftPz","POST",JSON.stringify({year:o.substr(0,4),month:o.substr(6,2),vcindexlist:i}),function(e){(0,a.showMessage)(e)&&s&&(n(l.addPageTabPane("EditPanes","Draft","Draft","草稿箱")),n(l.addHomeTabpane("Edit","Draft","草稿箱")),n(c.getDraftListFetch("全部")))})}}},1343:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_CXPZ="INIT_CXPZ",t.BEFORE_GET_VC_LIST_FETCH="BEFORE_GET_VC_LIST_FETCH",t.BEFORE_DELETE_VC_ITEM_FETCH="BEFORE_DELETE_VC_ITEM_FETCH",t.GET_VC_LIST_FETCH="GET_VC_LIST_FETCH",t.SELECT_VC_ALL="SELECT_VC_ALL",t.NOT_SELECT_VC_ALL="NOT_SELECT_VC_ALL",t.SELECT_VC_ITEM="SELECT_VC_ITEM",t.SORT_VC_LIST_BY_DATE="SORT_VC_LIST_BY_DATE",t.REVERSE_VC_LIST="REVERSE_VC_LIST",t.CLEAR_CXPZ_STATE="CLEAR_CXPZ_STATE",t.BEFORE_VC_IMPORT="BEFORE_VC_IMPORT",t.CLOSE_VC_IMPORT_CONTENT="CLOSE_VC_IMPORT_CONTENT",t.AFTER_VC_IMPORT="AFTER_VC_IMPORT",t.SORT_VC_LIST_BY_REVIEWED="SORT_VC_LIST_BY_REVIEWED",t.CHANGE_FJGL_ISSUEDATE="CHANGE_FJGL_ISSUEDATE",t.GET_PERIOD_FETCH="GET_PERIOD_FETCH",t.CHANGE_CXPZ_MESSAGEMASK="CHANGE_CXPZ_MESSAGEMASK",t.GET_CXPZ_IMPORT_PROGRESS="GET_CXPZ_IMPORT_PROGRESS"},1359:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteExportList=t.selectAllUuidList=t.handleUuidList=t.getEnclosureExportRecordingList=void 0;var r,a=n(31),i=(r=a)&&r.__esModule?r:{default:r},o=s(n(1373)),u=n(22);s(n(43)),s(n(30));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var c=t.getEnclosureExportRecordingList=function(e){return function(t){t({type:o.SWITCH_LOADING_MASK}),(0,i.default)("exportEnclosureList","POST",JSON.stringify({year:e.substr(0,4),month:"-"===e.substr(4,1)?e.substr(5,2):e.substr(6,2)}),function(n){t({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)&&t({type:o.GET_EXPORT_ENCLOSURE_LIST,data:n.data,issuedate:e})})}};t.handleUuidList=function(e){return function(t,n){t({type:o.HANDLE_EXPORT_RECORDING_LIST,uuid:e})}},t.selectAllUuidList=function(e){return function(t){t({type:o.SELECT_ALL_EXPORT_RECORDING_LIST,selectedAll:e})}},t.deleteExportList=function(){return function(e,t){e({type:o.SWITCH_LOADING_MASK});var n=t().exportRecordingState.get("uuidList"),r=t().exportRecordingState.get("issuedate");(0,i.default)("deleteEnclosureExportList","POST",JSON.stringify({uuidList:n}),function(t){e({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(t)&&e(c(r))})}}},1373:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET_EXPORT_ENCLOSURE_LIST="GET_EXPORT_ENCLOSURE_LIST",t.SET_EXPORT_RECORDING_ISSUEDATE="SET_EXPORT_RECORDING_ISSUEDATE",t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.HANDLE_EXPORT_RECORDING_LIST="HANDLE_EXPORT_RECORDING_LIST",t.SELECT_ALL_EXPORT_RECORDING_LIST="SELECT_ALL_EXPORT_RECORDING_LIST"},1456:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,n=arguments[1];return((e={},i(e,a.GET_EXPORT_ENCLOSURE_LIST,function(){return t.set("dataList",n.data).set("issuedate",n.issuedate).set("selectedAll",!1)}),i(e,a.HANDLE_EXPORT_RECORDING_LIST,function(){var e=t.get("uuidList").toJS(),a=n.uuid;if(e.includes(a)){var i=e.findIndex(function(e,t){return e===a});e.splice(i,1)}else e.push(a);return t.set("uuidList",(0,r.fromJS)(e))}),i(e,a.SELECT_ALL_EXPORT_RECORDING_LIST,function(){var e=[],a=n.selectedAll,i=t.get("dataList");if(a)for(var o in i)e.push(i[o].zipUuid);return t.set("uuidList",(0,r.fromJS)(e)).set("selectedAll",a)}),e)[n.type]||function(){return t})()};var r=n(18),a=(n(22),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1373)));function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=(0,r.fromJS)({dataList:[],uuidList:[],issuedate:"",selectedAll:!1})},1739:function(e,t,n){},2477:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=d(n(1)),o=n(56);n(1739);f(n(43));var u=f(n(1359)),s=d(n(2479)),c=d(n(2480)),l=d(n(1224));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}var _=(0,o.connect)(function(e){return e})(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showModal:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),a(t,[{key:"componentDidMount",value:function(){}},{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=(e.allState,e.homeState,e.searchRunningState,e.runningEnclosureState,e.exportRecordingState),r=n.get("dataList"),a=n.get("uuidList"),o=n.get("selectedAll"),f=n.get("issuedate"),d=this.props.homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]),_=!!d&&d.indexOf("RUNNING")>-1;return i.default.createElement(l.default,{type:"running-enclosure",className:"runningEnclosure"},i.default.createElement(s.default,{dispatch:t,issuedate:f,uuidList:a,intelligentStatus:_,refresh:function(){t(u.getEnclosureExportRecordingList(f))}}),i.default.createElement(c.default,{dataList:r,dispatch:t,issuedate:f,uuidList:a,selectedAll:o,intelligentStatus:_}))}}]),t}())||r;t.default=_},2479:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=E(n(32)),i=E(n(45)),o=E(n(100)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(51),n(55),n(99);var s=E(n(1)),c=n(17);n(18);n(1739);var l=E(n(1226)),f=p(n(1359)),d=p(n(60)),_=(p(n(43)),p(n(1329)));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}o.default.Group,i.default.Option;var T=(0,c.immutableRenderDecorator)(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.refresh,r=e.uuidList,i=e.intelligentStatus;return s.default.createElement(l.default,null,s.default.createElement("div",{className:"flex-title-left"}),s.default.createElement("div",{className:"flex-title-right"},s.default.createElement(a.default,{type:"ghost",disabled:!r.size,className:"title-right-btn",onClick:function(){t(f.deleteExportList())}},"删除"),s.default.createElement(a.default,{type:"ghost",className:"title-right-btn",onClick:function(){i?(t(d.addPageTabPane("SearchPanes","RunningEnclosure","RunningEnclosure","附件管理")),t(d.addHomeTabpane("Search","RunningEnclosure","附件管理"))):(t(d.addPageTabPane("SearchPanes","Fjgl","Fjgl","附件管理")),t(d.addHomeTabpane("Search","Fjgl","附件管理")),t(_.setFjglData()))}},"附件管理"),s.default.createElement(a.default,{type:"ghost",className:"title-right-btn",onClick:function(){n()}},"刷新")))}}]),t}())||r;t.default=T},2480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=f(n(129)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(128);var o=f(n(1)),u=(n(18),n(17)),s=n(127),c=f(n(2481)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1359));function f(e){return e&&e.__esModule?e:{default:e}}var d=(0,u.immutableRenderDecorator)(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={waitingList:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.dataList,n=[];for(var r in t)"等待中"!=t[r].message&&"下载中"!=t[r].message||n.push(t[r].zipUuid);this.setState({waitingList:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dataList,r=t.dispatch,i=t.uuidList,u=t.selectedAll,f=t.issuedate,d=t.intelligentStatus,_=this.state.waitingList;return o.default.createElement(s.TableWrap,{notPosition:!0},o.default.createElement(s.TableAll,null,o.default.createElement("div",{className:"table-title-wrap"},o.default.createElement("ul",{className:"export-recording-table-width table-title"},o.default.createElement("li",null,o.default.createElement(a.default,{disabled:_.length,checked:u,onClick:function(){e.setState({waitingList:[]}),r(l.selectAllUuidList(!u))}})),o.default.createElement("li",null,"文件名"),o.default.createElement("li",null,"大小"),o.default.createElement("li",null,"导出时间"),o.default.createElement("li",null,"操作人"),o.default.createElement("li",null,"操作"))),o.default.createElement(s.TableBody,null,n.map(function(t,n){return o.default.createElement(c.default,{uuidList:i,index:n,issuedate:f,key:n,data:t,className:"export-recording-table-width",dispatch:r,waitingList:_,onloading:t.zipUuid===_[0],handleWaitingList:function(){_.splice(0,1),e.setState({waitingList:_})},clearWaitingList:function(){e.setState({waitingList:[]})},intelligentStatus:d})}))))}}]),t}())||r;t.default=d},2481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=S(n(129)),i=S(n(182)),o=S(n(32)),u=S(n(136)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(128),n(181),n(51),n(137);var c=S(n(1)),l=n(17),f=n(127),d=S(n(31)),_=n(22),p=T(n(1359)),E=T(n(60));T(n(30));function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}var y=(0,l.immutableRenderDecorator)(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={percent:0,stop:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.className,e.data),n=(e.line,e.dispatch,e.onloading),r=e.handleWaitingList;e.intelligentStatus;n&&this.getProgress(t,r)}},{key:"componentWillReceiveProps",value:function(e){e.onloading&&e.uuidList===this.props.uuidList&&this.getProgress(e.data,e.handleWaitingList)}},{key:"openNotification",value:function(){var e=this,t="open"+Date.now(),n=c.default.createElement(o.default,{type:"primary",size:"small",onClick:function(){u.default.close(t),e.props.dispatch(E.addPageTabPane("SearchPanes","ExportRecording","ExportRecording","导出记录")),e.props.dispatch(E.addHomeTabpane("Search","ExportRecording","导出记录"))}},"前往下载");u.default.open({message:"提示",description:"文件导出已完成，链接将在48小时后失效，赶快前往“导出记录”下载吧",btn:n,key:t,onClose:close})}},{key:"getProgress",value:function(e,t){var n=this;new Promise(function(t,n){var r=setInterval(function(){(0,d.default)("exportEnclosureProgress","GET","zipUuid="+e.zipUuid,function(e){(0,_.showMessage)(e)&&(100!==e.data.percent&&-1!=e.data.percent&&"下载中"!==e.data.status||clearInterval(r),t(e.data))})},500)}).then(function(r){"等待中"===r.status?n.getProgress(e,t):"下载中"===r.status?n.setState({percent:r.percent},function(){n.getProgress(e,t)}):"下载"===r.status&&n.setState({percent:100},function(){n.openNotification(),n.props.dispatch(p.getEnclosureExportRecordingList(n.props.issuedate)),t()})})}},{key:"handleExportRecording",value:function(e,t,n){if(100===this.state.percent)return c.default.createElement("a",{href:t.signedUrl,className:"export-download",download:t.fileName}," 下载 ");if(n)return 0===this.state.percent?t.message:c.default.createElement(i.default,{ref:"progress",percent:this.state.percent,size:"small"});switch(t.message){case"下载":return c.default.createElement("a",{href:t.signedUrl,className:"export-download",download:t.fileName}," 下载 ");default:return t.message}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.data,r=e.line,i=e.dispatch,o=e.uuidList,u=e.onloading,s=e.waitingList;return c.default.createElement("div",null,c.default.createElement(f.CxpzTableItem,{className:t,line:r},c.default.createElement(f.TableOver,{className:"table-item-line"},c.default.createElement(a.default,{disabled:!!s.length&&s.includes(n.zipUuid),checked:o.includes(n.zipUuid),onClick:function(){i(p.handleUuidList(n.zipUuid))}})),c.default.createElement(f.TableOver,{className:"table-item-line"}," ",n.fileName," "),c.default.createElement(f.TableOver,{className:"table-item-line"}," ",n.size>1024?(n.size/1024).toFixed(2)+"mb":n.size+"kb"," "),c.default.createElement(f.TableOver,{className:"table-item-line"}," ",n.createTime," "),c.default.createElement(f.TableOver,{className:"table-item-line"}," ",n.userName," "),c.default.createElement(f.TableOver,{className:"table-item-line"},this.handleExportRecording(i,n,u))))}}]),t}())||r;t.default=y}}]);