(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1242:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.saveRegretMessage=n.changeRegretCancle=n.changeRegretAccountCommonString=n.changeRegretAccountAccountName=n.getRegretCategory=n.changeItemDisableStatus=n.disabledCategory=n.enabledCategory=n.swapRunningItem=n.emptyAccountCheck=n.changeDefaultAccount=n.changeCardCheckboxArrOut=n.changeCardCheckboxArr=n.changeAccountConfcCheckboxArr=n.deleteAccountConfAccount=n.deleteAccountConfRunning=n.saveAccountConfTaxRate=n.saveAccountConfAccount=n.saveAccountConfRunningCategory=n.changeAccountConfAccountNumber=n.selectAccountConfMultipleAc=n.selectAccountConfAllAc=n.changeAccountConfRunningCategory=n.changeAccountConfCommonFlagsString=n.changeAccountConfCommonString=n.selectAccountConfUpperCategory=n.accountConfTaxRateSettingScale=n.selectOrUnselectAccountAll=n.accountconfAccountCheckboxCheck=n.accountconfRunningCheckboxCheck=n.accountConfRunningTriangleSwitch=n.closeAccountconfModal=n.beforeModifyaccountConfRunning=n.beforeModifyaccountConfRunningOld=n.beforeInsertAccountConf=n.changeAccountConfCurrentPage=n.getRunningTaxRate=n.getRunningAccount=n.getRunningCategory=void 0;var C=N(t(37)),c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var C in t)Object.prototype.hasOwnProperty.call(t,C)&&(e[C]=t[C])}return e};t(38);var a=r(t(1273)),u=N(t(52)),o=t(22),A=r(t(30)),_=t(18);function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}function N(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}n.getRunningCategory=function(){return function(e){e({type:a.SWITCH_LOADING_MASK}),(0,u.default)("getRunningCategory","GET","",function(n){e({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(n)&&e({type:a.GET_RUNNING_CATEGORY,receivedData:n.data})})}},n.getRunningAccount=function(){return function(e){(0,u.default)("getRunningAccount","GET","",function(n){(0,o.showMessage)(n)&&e({type:a.GET_RUNNING_ACCOUNT,receivedData:n.data})})}};var T=n.getRunningTaxRate=function(){return function(e){(0,u.default)("getRunningTaxRate","GET","",function(n){(0,o.showMessage)(n)&&e({type:a.GET_RUNNING_TAX_RATE,receivedData:n.data})})}},O=(n.changeAccountConfCurrentPage=function(e){return{type:a.CHANGE_ACCOUNTCONF_CURRENTPAGE,currentPage:e}},n.beforeInsertAccountConf=function(e,n,t){return function(C){if(n){var c=n.get("uuid");"running"===e?(C({type:a.SWITCH_LOADING_MASK}),(0,u.default)("getRunningDetail","GET","uuid="+c,function(c){if(C({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(c)){var u=c.data.result;C({type:a.BEFORE_INSERT_ACCOUNTCONF,currentPage:e,item:n,data:u,insertFrom:t})}})):C({type:a.BEFORE_INSERT_ACCOUNTCONF,currentPage:e,item:n,insertFrom:t})}else C({type:a.BEFORE_INSERT_ACCOUNTCONF,currentPage:e,item:n,insertFrom:t})}}),s=(n.beforeModifyaccountConfRunningOld=function(e,n,t){return{type:a.BEFORE_MODIFY_ACCOUNTCONF_RUNNING_OLD,currentPage:e,item:n,old:t}},n.beforeModifyaccountConfRunning=function(e,n){return function(t){var C=n.get("uuid");(0,u.default)("getRunningDetail","GET","uuid="+C,function(C){if((0,o.showMessage)(C)){var c=C.data.result;t({type:a.BEFORE_MODIFY_ACCOUNTCONF_RUNNING_OLD,currentPage:e,name:c,item:n})}})}},n.closeAccountconfModal=function(){return{type:a.CLOSE_ACCOUNTCONF_MODAL}},n.accountConfRunningTriangleSwitch=function(e,n){return{type:a.ACCOUNTCONF_RUNNING_TRIANGLE_SWITCH,showChild:e,uuid:n}},n.accountconfRunningCheckboxCheck=function(e,n){return{type:a.ACCOUNTCONF_RUNNING_CHECKBOX_CHECK,item:e,upperArr:n}},n.accountconfAccountCheckboxCheck=function(e,n){return{type:a.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK,checked:e,uuid:n}},n.selectOrUnselectAccountAll=function(e){return{type:a.SELECT_OR_UNSELECT_ACCOUNT_ALL,selectAll:e}},n.accountConfTaxRateSettingScale=function(e){return{type:a.ACCOUNTCONF_TAX_RATE_SETTING_SCALE,value:e}},n.selectAccountConfUpperCategory=function(e){return{type:a.SELECT_ACCOUNTCONF_UPPER_CATEGORY,value:e}},n.changeAccountConfCommonString=function(e,n,t){return function(C){var c="string"==typeof n?[e+"Temp",n]:[e+"Temp"].concat(i(n));C({type:a.CHANGE_ACCOUNTCONF_COMMON_STRING,placeArr:c,value:t})}},n.changeAccountConfCommonFlagsString=function(e,n){return function(t){var C="string"==typeof e?["flags",e]:["flags"].concat(i(e));t({type:a.CHANGE_ACCOUNTCONF_COMMON_STRING,placeArr:C,value:n})}}),f=n.changeAccountConfRunningCategory=function(e){return function(n){n({type:a.CHANGE_ACCOUNTCONF_COMMON_STRING,placeArr:["runningCategory",0],value:e})}},E=(n.selectAccountConfAllAc=function(e,n,t,C,c){return{type:a.SELECT_ACCOUNTCONF_ALL_AC,acId:e,acFullName:n,asscategorylist:t,tab:C,place:c}},n.selectAccountConfMultipleAc=function(e,n,t,C){return function(c){var u="string"==typeof n?["runningTemp",n]:["runningTemp"].concat(i(n));c({type:a.SELECT_ACCOUNTCONF_MULTIPLE_AC,acList:e,placeArr:u,assList:t,assPlace:C})}}),g=(n.changeAccountConfAccountNumber=function(e,n){return{type:a.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER,accountType:e,value:n}},n.saveAccountConfRunningCategory=function(e){return function(n,t){n({type:a.SWITCH_LOADING_MASK});var C=t().accountConfState,A=C.getIn(["flags","insertOrModify"]),r=C.get("runningTemp"),N=r.get("parentUuid"),i=r.get("categoryType"),T=r.get("level"),s=r.toJS(),f=S(i);for(var E in f)delete s[f[E]];(0,u.default)(A+"RunningCategory","POST",JSON.stringify(c({},s)),function(t){(0,o.showMessage)(t)&&n(e?O("running",(0,_.fromJS)({uuid:N,level:T})):{type:a.AFTER_UPDATE_ACCOUNTCONF_RUNNING_CATEGORY,receivedData:t.data}),n({type:a.SWITCH_LOADING_MASK})})}},n.saveAccountConfAccount=function(e,n){return function(t,C){t({type:a.SWITCH_LOADING_MASK});var A=C().accountConfState,_=A.getIn(["flags","insertOrModify"]),r=A.get("accountTemp").toJS();(0,u.default)(_+"RunningAccount","POST",JSON.stringify(c({},r)),function(C){(0,o.showMessage)(C)&&(t({type:a.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT,saveAndNew:e,receivedData:C.data}),"fromLrAccount"===n&&t({type:a.CHANGE_LR_ACCOUNT_COMMON_STRING,tab:"",placeArr:["flags","showAccountModal"],value:!1})),t({type:a.SWITCH_LOADING_MASK})})}},n.saveAccountConfTaxRate=function(e){return function(e,n){e({type:a.SWITCH_LOADING_MASK});var t=n().accountConfState,_=(t.getIn(["flags","insertOrModify"]),t.get("taxRateTemp")),r=_.get("scale"),N={};if("small"===r){var i=_.get("payableAcId"),O=_.get("notBillingAcId"),f=_.get("payableRate");N={payableAcId:i,notBillingAcId:O,payableRate:f,scale:r}}else{var E=_.get("inputAcId"),g=_.get("certifiedAcId"),S=_.get("outputAcId"),R=_.get("waitOutputAcId"),l=_.get("turnOutUnpaidAcId"),I=_.get("unpaidAcId"),p=_.get("preAcId"),d=_.get("outputRate");N={inputAcId:E,certifiedAcId:g,outputAcId:S,waitOutputAcId:R,turnOutUnpaidAcId:l,unpaidAcId:I,outputRate:d,scale:r,preAcId:p}}(0,u.default)("canModifyRunningTaxRate","POST",JSON.stringify(c({},N)),function(n){n.data.result.hasBusiness?n.data.result.canModify?(e({type:a.SWITCH_LOADING_MASK}),A.Confirm({message:n.data.result.msg,title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(n){1===n.buttonIndex?(0,u.default)("modifyRunningTaxRate","POST",JSON.stringify(c({},N)),function(n){(0,o.showMessage)(n,"show")&&e(s("isTaxQuery",!0))}):e(T())}})):(C.default.error(n.data.result.msg),e(T()),e({type:a.SWITCH_LOADING_MASK})):(0,u.default)("modifyRunningTaxRate","POST",JSON.stringify(c({},N)),function(n){(0,o.showMessage)(n,"show")&&e(s("isTaxQuery",!0)),e({type:a.SWITCH_LOADING_MASK})})})}},n.deleteAccountConfRunning=function(){return function(e,n){var t=n().accountConfState.getIn(["flags","runningSelect"]);0!==t.size&&A.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(n){1===n.buttonIndex&&(e({type:a.SWITCH_LOADING_MASK}),(0,u.default)("deleteRunningCategory","POST",JSON.stringify({deleteList:t}),function(n){(0,o.showMessage)(n)&&(C.default.success(n.message),e({type:a.AFTER_UPDATE_ACCOUNTCONF_RUNNING_CATEGORY,receivedData:n.data})),e({type:a.SWITCH_LOADING_MASK})}))}})}},n.deleteAccountConfAccount=function(){return function(e,n){var t=n().accountConfState.getIn(["flags","accountSelect"]);0!==t.size&&A.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(n){1===n.buttonIndex&&(e({type:a.SWITCH_LOADING_MASK}),(0,u.default)("deleteRunningAccount","POST",JSON.stringify({deleteList:t}),function(n){(0,o.showMessage)(n)&&e({type:a.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT,receivedData:n.data}),e({type:a.SWITCH_LOADING_MASK})}))}})}},n.changeAccountConfcCheckboxArr=function(e,n){return function(t){var C=[];n.forEach(function(e){switch(e){case"销售费用":C.push("XZ_SALE");break;case"管理费用":C.push("XZ_MANAGE");break;case"财务费用":C.push("XZ_FINANCE")}}),t({type:a.CHANGE_ACCOUNTCONF_PROPERTY,placeArr:e,valArr:C})}},n.changeCardCheckboxArr=function(e,n,t,C){return function(c,u){var o=u().accountConfState.getIn(["runningTemp",e,n]),A=void 0;A=C?o.update(function(e){return e.concat(t)}):o.update(function(e){return e.filter(function(e){return e!==t})});var _=["runningTemp",e,n];c({type:a.CHANGE_ACCOUNTCONF_PROPERTY,placeArr:_,valArr:A})}},n.changeCardCheckboxArrOut=function(e,n,t){return function(C,c){var u=c().accountConfState.getIn(["runningTemp",e]),o=void 0;o=t?u.update(function(e){return e.concat(n)}):u.update(function(e){return e.filter(function(e){return e!==n})});var A=["runningTemp",e];C({type:a.CHANGE_ACCOUNTCONF_PROPERTY,placeArr:A,valArr:o})}},n.changeDefaultAccount=function(e,n,t){return function(C){var c={SX_SHBX:"AC_JT_YFSB",SX_ZFGJJ:"AC_JT_YFGJJ",SX_QTXC:"AC_JT_YFXC",SX_QYSDS:["AC_YFQYSDS","AC_QYSDS"],SX_QTSF:["AC_YFSF","AC_SF"],SX_GRSF:"AC_SDS",SX_FLF:"AC_FLF",SX_GQ:["AC_TZ","AC_TZ_SY"],SX_ZQ:["AC_TZ","AC_TZ_SY"],SX_GDZC:["AC_ZC_ASSETS","AC_ZC_CLEANING","AC_ZC_ZJ"],SX_WXZC:["AC_ZC_ASSETS","AC_ZC_CLEANING","AC_ZC_ZJ"],SX_TZXFDC:["AC_ZC_ASSETS","AC_ZC_CLEANING","AC_ZC_ZJ"]}[n],a=function(e,n,t){var C=e.find(function(e){return e.get("type")===n&&e.get("property")===t});return{acId:C?C.get("acId"):"",acFullName:C?C.get("acFullName"):""}};"SX_GRSF"===n?C(E([a(e,c,n)],[t,"payAc"])):"string"==typeof c?C(E([a(e,c,n)],[t,"accruedAc"])):"SX_QYSDS"===n||"SX_QTSF"===n?(C(E([a(e,c[0],n)],[t,"accruedAc"])),C(E([a(e,c[1],n)],[t,"payAc"]))):"SX_GQ"===n||"SX_ZQ"===n?(C(E([a(e,c[0],n)],[t,"investAc"])),C(E([a(e,c[1],n)],[t,"profitAc"]))):"SX_GDZC"!==n&&"SX_WXZC"!==n&&"SX_TZXFDC"!==n||(C(E([a(e,c[0],n)],[t,"assetsAc"])),C(E([a(e,c[1],n)],[t,"cleaningAc"])),C(E([a(e,c[2],n)],[t,"depreciationAc"])))}},n.emptyAccountCheck=function(e){return function(n){e.forEach(function(e){var t=e.tab,C=e.place,c=e.value,u="string"==typeof C?[t+"Temp",C]:[t+"Temp"].concat(i(C));n({type:a.CHANGE_ACCOUNTCONF_COMMON_STRING,placeArr:u,value:c})})}},n.swapRunningItem=function(e,n){return function(t){t({type:a.SWITCH_LOADING_MASK}),(0,u.default)("runningSwapItem","POST",JSON.stringify({fromCategoryUuid:e,toCategoryUuid:n}),function(e){(0,o.showMessage)(e)&&t(f((0,_.fromJS)(e.data.categoryList[0]))),t({type:a.SWITCH_LOADING_MASK})})}},n.enabledCategory=function(e){return function(n){n({type:a.SWITCH_LOADING_MASK}),(0,u.default)("enabledCategory","POST",JSON.stringify({enabledList:e}),function(t){(0,o.showMessage)(t)&&n(g(e[0],!1)),n({type:a.SWITCH_LOADING_MASK})})}},n.disabledCategory=function(e,n){return function(n){n({type:a.SWITCH_LOADING_MASK}),(0,u.default)("disabledCategory","POST",JSON.stringify({disabledList:e}),function(t){if((0,o.showMessage)(t)){var C=t.data.parentList;n(g(e[0],!0,C))}n({type:a.SWITCH_LOADING_MASK})})}},n.changeItemDisableStatus=function(e,n,t){return function(C,c){var u=c().accountConfState,o=u.getIn(["runningCategory",0,"childList"]),A=u.getIn(["runningCategory",0,"disableList"]),_=[e];n&&t.length&&(_=_.concat(t));var r=function e(t,c,u,o){c&&c.size&&c.find(function(c,A){if(t.find(function(e){return e===c.get("uuid")}))return C({type:a.CHANGE_ITEM_DISABLE_STATUS,placeArr:[].concat(i(u),[A]),disabled:n}),!0;e(t,c.get("childList"),[].concat(i(u),[A,"childList"]),o),e(t,c.get("disableList"),[].concat(i(u),[A,"disableList"]),o)})};r(_,o,["childList"],!0),r(_,A,["disableList"],!0)}}),S=function(e){var n={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[e],t=["acAssets","acBusinessExpense","acBusinessIncome","acBusinessOutExpense","acBusinessOutIncome","acCapital","acCost","acInvest","acLoan","acPayment","acTax","acTemporaryReceipt","acTemporaryPay"];return t.splice(t.indexOf(n),1),t},R=(n.getRegretCategory=function(){return function(e){e({type:a.SWITCH_LOADING_MASK}),(0,u.default)("getRegretCategory","GET","",function(n){(0,o.showMessage)(n)&&e({type:a.GET_REGRET_CATEGORY,receivedData:n.data}),e({type:a.SWITCH_LOADING_MASK})})}},n.changeRegretAccountAccountName=function(e,n,t,C,c,u){return{type:a.CHANGE_REGRET_ACCOUNT_ACCOUNT_NAME,tab:e,placeUUid:n,placeName:t,isBalance:C,isBusiness:c,value:u}},n.changeRegretAccountCommonString=function(e,n,t){return function(C){var c="string"==typeof n?[e+"Temp",n]:[e+"Temp"].concat(i(n));"flags"===n[0]&&(c=n),C({type:a.CHANGE_REGRET_ACCOUNT_COMMON_STRING,tab:e,placeArr:c,value:t})}});n.changeRegretCancle=function(){return{type:a.CHANGE_REGRET_CANCLE}},n.saveRegretMessage=function(){return function(e,n){var t=n().accountConfState,C=t.getIn(["regretTemp","subordinateName"]),c=t.getIn(["regretTemp","categoryUuid"]);e({type:a.SWITCH_LOADING_MASK}),(0,u.default)("saveRegretMessage","POST",JSON.stringify({name:C,uuid:c}),function(n){(0,o.showMessage)(n)?(e({type:a.GET_RUNNING_CATEGORY,receivedData:n.data}),e(R("regret","showConfirmModal",!1))):(e(R("regret","showConfirmModal",!1)),e(R("regret","showModal",!0))),e({type:a.SWITCH_LOADING_MASK})})}}},1273:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",n.INIT_ACCOUNTCONF="INIT_ACCOUNTCONF",n.GET_ACCOUNTCONF_ALL_SETTINGS="GET_ACCOUNTCONF_ALL_SETTINGS",n.GET_RUNNING_CATEGORY="GET_RUNNING_CATEGORY",n.GET_RUNNING_ACCOUNT="GET_RUNNING_ACCOUNT",n.GET_RUNNING_TAX_RATE="GET_RUNNING_TAX_RATE",n.CHANGE_ACCOUNTCONF_CURRENTPAGE="CHANGE_ACCOUNTCONF_CURRENTPAGE",n.BEFORE_INSERT_ACCOUNTCONF="BEFORE_INSERT_ACCOUNTCONF",n.BEFORE_MODIFY_ACCOUNTCONF_RUNNING_OLD="BEFORE_MODIFY_ACCOUNTCONF_RUNNING_OLD",n.CLOSE_ACCOUNTCONF_MODAL="CLOSE_ACCOUNTCONF_MODAL",n.ACCOUNTCONF_RUNNING_TRIANGLE_SWITCH="ACCOUNTCONF_RUNNING_TRIANGLE_SWITCH",n.ACCOUNTCONF_RUNNING_CHECKBOX_CHECK="ACCOUNTCONF_RUNNING_CHECKBOX_CHECK",n.SELECT_OR_UNSELECT_RUNNING_ALL="SELECT_OR_UNSELECT_RUNNING_ALL",n.SELECT_OR_UNSELECT_ACCOUNT_ALL="SELECT_OR_UNSELECT_ACCOUNT_ALL",n.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK="ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK",n.ACCOUNTCONF_TAX_RATE_SETTING_SCALE="ACCOUNTCONF_TAX_RATE_SETTING_SCALE",n.SELECT_ACCOUNTCONF_UPPER_CATEGORY="SELECT_ACCOUNTCONF_UPPER_CATEGORY",n.CHANGE_ACCOUNTCONF_COMMON_STRING="CHANGE_ACCOUNTCONF_COMMON_STRING",n.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER="CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER",n.SELECT_ACCOUNTCONF_ALL_AC="SELECT_ACCOUNTCONF_ALL_AC",n.SELECT_ACCOUNTCONF_MULTIPLE_AC="SELECT_ACCOUNTCONF_MULTIPLE_AC",n.AFTER_UPDATE_ACCOUNTCONF_RUNNING_CATEGORY="AFTER_UPDATE_ACCOUNTCONF_RUNNING_CATEGORY",n.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT="AFTER_UPDATE_ACCOUNTCONF_ACCOUNT",n.CHANGE_ACCOUNTCONF_PROPERTY="CHANGE_ACCOUNTCONF_PROPERTY",n.CHANGE_ITEM_DISABLE_STATUS="CHANGE_ITEM_DISABLE_STATUS",n.GET_REGRET_CATEGORY="GET_REGRET_CATEGORY",n.CHANGE_REGRET_ACCOUNT_ACCOUNT_NAME="CHANGE_REGRET_ACCOUNT_ACCOUNT_NAME",n.CHANGE_REGRET_ACCOUNT_COMMON_STRING="CHANGE_REGRET_ACCOUNT_COMMON_STRING",n.CHANGE_REGRET_CANCLE="CHANGE_REGRET_CANCLE",n.SAVE_REGRET_MESSAGE="SAVE_REGRET_MESSAGE",n.CHANGE_LR_ACCOUNT_COMMON_STRING="CHANGE_LR_ACCOUNT_COMMON_STRING"}}]);