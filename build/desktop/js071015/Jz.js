(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1202:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var i=u(r(2675)),n=u(r(2679)),a=u(r(1398)),o=u(r(1399)),s=u(r(491));function u(e){return e&&e.__esModule?e:{default:e}}var c={jzState:n.default,editRunningState:a.default,editCalculateState:o.default,editRunningAllState:s.default};t.reducer=c,t.view=i.default},1223:function(e,t,r){},1224:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,n,a,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=d(r(1)),u=d(r(0)),c=r(17);function d(e){return e&&e.__esModule?e:{default:e}}r(1223);var m=(0,c.immutableRenderDecorator)((a=n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.type,r=e.className,i=e.onClick;return s.default.createElement("div",{className:"container-wrap container-width-"+t+" "+r,onClick:i},this.props.children)}}]),t}(),n.displayName="ContainerWrap",n.propTypes={type:u.default.string.isRequired,className:u.default.string.isRequired},i=a))||i;t.default=m},1226:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=r(1),s=(n=o)&&n.__esModule?n:{default:n},u=r(17);r(1223);var c=(0,u.immutableRenderDecorator)(i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),a(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"flex-title"},this.props.children)}}]),t}())||i;t.default=c},1398:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=r(47),a=(i=n)&&i.__esModule?i:{default:i},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=arguments[1];return((e={},l(e,u.INIT_EDIT_RUNNING,function(){return p}),l(e,u.BEFORE_INSERT_RUNNING,function(){return p.setIn(["oriTemp","oriDate"],r.date)}),l(e,u.SWITCH_EDIT_RUNNING_SWITCH_PAGETAB,function(){var e=t.getIn(["oriTemp","oriDate"]);return"business"===r.value&&(t=t.set("flags",p.get("flags")).set("oriTemp",p.get("oriTemp")).setIn(["oriTemp","oriDate"],e)),t}),l(e,u.SELECT_EDIT_RUNNING_CATEGORY,function(){var e=p.get("oriTemp").toJS(),i=t.getIn(["oriTemp","oriAbstract"]),n=t.getIn(["oriTemp","oriDate"]),a=r.name.uuid;return t=t.setIn(["flags","showModal"],!0).setIn(["flags","switchUuidList"],(0,s.fromJS)([])).set("oriTemp",(0,s.fromJS)(o({},e,r.name))).set("categoryTemp",(0,s.fromJS)(r.name)),r.name.beProject&&(t=t.setIn(["oriTemp","usedProject"],!0).setIn(["oriTemp","projectCardList"],(0,s.fromJS)([{uuid:""}]))),r.isFresh&&(t=t.setIn(["oriTemp","oriAbstract"],i)),t.setIn(["oriTemp","categoryUuid"],a).setIn(["oriTemp","oriDate"],n)}),l(e,u.SELECT_MODIFY_RUNNING_CATEGORY,function(){var e=p.get("oriTemp").toJS(),i=t.getIn(["oriTemp","oriAbstract"]),n=t.getIn(["oriTemp","jrIndex"]),a=t.getIn(["oriTemp","oriDate"]),u=t.getIn(["oriTemp","amount"]),d=t.getIn(["oriTemp","accounts"]),m=t.get("enclosureList"),l=t.getIn(["oriTemp","oriUuid"]),f=t.getIn(["oriTemp","propertyCost"]),T=t.getIn(["oriTemp","billList"]),I=t.getIn(["oriTemp","canBeModifyCategory"]),g=t.getIn(["oriTemp","currentCardList"]),C=r.name.categoryType,S=(r.name.propertyCarryover,t.getIn(["oriTemp","projectCardList"])),L=(t.getIn(["oriTemp","categoryType"]),(0,c.getCategorynameByType)(C)),v=L.categoryTypeObj;r.name.beProject&&!S.size?S=(0,s.fromJS)([{}]):r.name.beProject||(S=(0,s.fromJS)([])),u<0&&"LB_FYZC"!==C&&(u=Math.abs(u));var y=r.name.uuid;return t=t.setIn(["flags","showModal"],!0).setIn(["flags","switchUuidList"],(0,s.fromJS)([])).set("oriTemp",(0,s.fromJS)(o({},e,r.name,{oriAbstract:i,jrIndex:n,oriDate:a,amount:u,accounts:d,enclosureList:m,oriUuid:l,propertyCost:f,billList:T,projectCardList:S,canBeModifyCategory:I,categoryUuid:y}))).set("categoryTemp",(0,s.fromJS)(r.name)),r.isFresh&&(t=t.setIn(["oriTemp","oriAbstract"],i)),t=r.name[v].contactsManagement?t.setIn(["oriTemp","currentCardList"],g):t.setIn(["oriTemp","currentCardList"],(0,s.fromJS)([])).setIn(["oriTemp","usedCurrent"],!1)}),l(e,u.CHANGE_MODIFY_RUNNING_CATEGORY,function(){var e=t.get("categoryTemp").toJS(),i=p.get("oriTemp").toJS(),n=t.getIn(["oriTemp","oriAbstract"]),a=t.getIn(["oriTemp","jrIndex"]),u=t.getIn(["oriTemp","oriDate"]),c=t.getIn(["oriTemp","amount"]),d=t.getIn(["oriTemp","accounts"]),m=t.get("enclosureList"),l=t.getIn(["oriTemp","oriUuid"]),f=t.getIn(["oriTemp","propertyCost"]),T=t.getIn(["oriTemp","categoryUuid"]),I=t.getIn(["oriTemp","usedProject"]),g=r.oriState;return t.setIn(["flags","showModal"],!0).setIn(["flags","switchUuidList"],(0,s.fromJS)([])).set("oriTemp",(0,s.fromJS)(o({},i,e,{oriAbstract:n,jrIndex:a,oriDate:u,amount:c,accounts:d,enclosureList:m,oriUuid:l,categoryUuid:T,oriState:g,propertyCost:f,usedProject:I})))}),l(e,u.CHANGE_EDIT_RUNNING_COMMON_STRING,function(){return r.placeArr&&(t=t.setIn(r.placeArr,r.value)),r.place&&(t=t.set(r.place,r.value)),t}),l(e,u.CHANGE_EDIT_RUNNING_ACCOUNT_NAME,function(){return t.setIn(["oriTemp","accounts",0,"accountUuid"],r.accountUuid).setIn(["oriTemp","accounts",0,"poundage"],r.poundage).setIn(["oriTemp","accounts",0,"accountName"],r.accountName)}),l(e,u.GET_JR_ORI,function(){var e=p.get("oriTemp").toJS(),i=r.receivedData.amount,n=r.receivedData.currentAmount,a=r.uuidList||t.getIn(["flags","switchUuidList"]),u=r.receivedData.payment||{};return(t=Math.abs(i)===n?t.setIn(["flags","allGetFlow"],!0):t.setIn(["flags","allGetFlow"],!1)).set("oriTemp",(0,s.fromJS)(o({},e,r.receivedData,r.category))).set("categoryTemp",(0,s.fromJS)(o({},e,r.category))).setIn(["flags","switchUuidList"],a).setIn(["oriTemp","currentBillList"],(0,s.fromJS)(r.receivedData.billList)).setIn(["oriTemp","currentProjectCardList"],(0,s.fromJS)(r.receivedData.projectCardList)).setIn(["oriTemp","curcurrentCardList"],(0,s.fromJS)(r.receivedData.currentCardList)).setIn(["oriTemp","currentOriDate"],(0,s.fromJS)(r.receivedData.oriDate)).setIn(["oriTemp","currentpersonSocialSecurityAmount"],u.personSocialSecurityAmount||0).setIn(["oriTemp","currentpersonAccumulationAmount"],u.personAccumulationAmount||0).setIn(["oriTemp","currentpincomeTaxAmount"],u.incomeTaxAmount||0)}),l(e,u.CHANGE_STATE_INIT_ORITEMP,function(){var e=p.get("oriTemp").toJS(),i=t.get("categoryTemp").toJS(),n=t.getIn(["oriTemp","oriDate"]),a=t.getIn(["oriTemp","oriAbstract"]),u=t.getIn(["oriTemp","handleType"]),c=t.getIn(["oriTemp","categoryUuid"]),d=t.getIn(["oriTemp","propertyCost"]);return t.set("oriTemp",(0,s.fromJS)(o({},e,i))).setIn(["oriTemp","oriAbstract"],a).setIn(["oriTemp","oriDate"],n).setIn(["oriTemp","handleType"],u).setIn(["oriTemp","categoryUuid"],c).setIn(["oriTemp","propertyCost"],d).setIn(["oriTemp","oriState"],r.state).setIn(["flags","dropManageFetchAllowed"],!0)}),l(e,u.INIT_EDIT_RUNNING_SETTINGS,function(){return t=t.setIn(["taxRateTemp","payableRate"],r.rate.payableRate).setIn(["taxRateTemp","outputRate"],r.rate.outputRate).setIn(["taxRateTemp","scale"],r.rate.scale).set("hideCategoryList",(0,s.fromJS)(r.hideCategoryList))}),l(e,u.CHANGE_EDIT_BILL_STATES,function(){return t.setIn(["oriTemp","billList",0,"billState"],r.billState).setIn(["oriTemp","billList",0,"tax"],r.tax).setIn(["oriTemp","billList",0,"taxRate"],r.taxRate)}),l(e,u.EDIT_CALCULATE_GAIN_OR_LOSS,function(){var e=r.place,i=r.diff,n=r.deletePlace;return t.setIn(e,i).deleteIn(n,i)}),l(e,u.CHANGE_RUNNING_TAX_RATE,function(){var e=r.amount||t.getIn(["oriTemp","amount"])||0;return"-1"==r.value?t.setIn(["oriTemp","billList",0,"tax"],"").setIn(["oriTemp","billList",0,"taxRate"],r.value):t.setIn(["oriTemp","billList",0,"tax"],(Number(e)/(1+Number(r.value)/100)*Number(r.value)/100).toFixed(2)).setIn(["oriTemp","billList",0,"taxRate"],r.value)}),l(e,u.EDIT_RUNNING_CALCULATE_AMOUNT,function(){var e=t.getIn(["oriTemp","payment","companyAccumulationAmount"])||0,i=t.getIn(["oriTemp","payment","personAccumulationAmount"])||0,n=t.getIn(["oriTemp","payment","companySocialSecurityAmount"])||0,a=t.getIn(["oriTemp","payment","personSocialSecurityAmount"])||0,o=t.getIn(["oriTemp","payment","incomeTaxAmount"])||0,s=t.getIn(["oriTemp","amount"])||0,u=t.getIn(["oriTemp","payment","actualAmount"])||0,c=(t.getIn(["oriTemp","categoryType"]),t.getIn(["oriTemp","propertyPay"])),d=(t.getIn(["oriTemp","oriState"]),t.getIn(["oriTemp","acPayment","beAccrued"])),m=t.getIn(["oriTemp","acPayment","beWithholdTax"]),l=t.getIn(["oriTemp","acPayment","beWithholding"]),p=t.getIn(["oriTemp","acPayment","beWithholdSocial"]),f=void 0;switch(c){case"SX_GZXJ":f=r.totalNotHandleAmount<0?(Number(u)-Number(i)-Number(a)-Number(o)).toFixed(2):(Number(u)+Number(i)+Number(a)+Number(o)).toFixed(2);break;case"SX_ZFGJJ":f=r.totalNotHandleAmount<0?(Number(i)-Number(e)).toFixed(2):(Number(i)+Number(e)).toFixed(2);break;case"SX_SHBX":f=r.totalNotHandleAmount<0?(-Number(n)+Number(a)).toFixed(2):(Number(n)+Number(a)).toFixed(2);break;case"SX_QTXC":f=s;break;default:f=0}return t="SX_GZXJ"!==c||!d||m||l||p?"SX_ZFGJJ"!==c&&"SX_SHBX"!==c||"insert"!==r.insertOrModify?t.setIn(["oriTemp","amount"],f):t.setIn(["oriTemp","payment","actualAmount"],f):t.setIn(["oriTemp","payment","actualAmount"],Math.abs(r.totalNotHandleAmount).toFixed(2))}),l(e,u.CALCULATE_FROM_SEARCH_JUMP_TO_EDIT,function(){t.getIn(["flags","uuidList"]);return t}),l(e,u.GET_PREAMOUNT_INFO,function(){return t=t.setIn(["oriTemp","preAmount"],r.preAmount).setIn(["oriTemp","payableAmount"],r.payableAmount)}),l(e,u.CHANGE_ORITEMP_ORIDATE,function(){return t=t.setIn(["oriTemp","oriDate"],r.date)}),l(e,u.INIT_COST_STOCK_ARRAY,function(){return t=t.setIn(["flags","costStockList"],(0,s.fromJS)([]))}),l(e,u.COMMON_CHARGE_ITEM_CHECKBOX_SELECT,function(){var e=t.getIn(["flags","selectList"]),i=t.getIn(["flags","selectItem"]),n=r.item,a=n.uuid,o=n.name,u=n.code,c=n.isOpenedQuantity,d=n.unit,m=void 0===d?{unitList:[]}:d,l=n.unitPriceList,p=void 0===l?[]:l,f=n.financialInfo;if(!r.checked&&-1===e.findIndex(function(e){return e===a})){var T=e.push(a),I=i.push((0,s.fromJS)({uuid:a,name:o,code:u,isOpenedQuantity:c,unit:m,unitPriceList:p,financialInfo:f}));return t.setIn(["flags","selectList"],T).setIn(["flags","selectItem"],(0,s.fromJS)(I))}if(r.checked){var g=e.splice(e.findIndex(function(e){return e===a}),1),C=i.splice(e.findIndex(function(e){return e===a}),1);return t.setIn(["flags","selectList"],g).setIn(["flags","selectItem"],(0,s.fromJS)(C))}return t}),l(e,u.AFTER_INVENTORY_IMPORT,function(){var e=r.receivedData.data.importList.map(function(e){return e.exchange&&e.exchange.indexOf("仓库非末级")>-1&&(e.warehouseCardCode="",e.warehouseCardName=""),e});if(t=r.receivedData.data?t.setIn(["flags","iframeload"],!0).setIn(["flags","acmessage"],(0,s.fromJS)(r.receivedData.message)).setIn(["flags","errorList"],(0,s.fromJS)(r.receivedData.data.errorList)).setIn(["flags","importKey"],r.receivedData.data.importKey).setIn(["flags","importList"],(0,s.fromJS)(e)):t.setIn(["flags","iframeload"],!0).setIn(["flags","showMessageMask"],!1).setIn(["flags","acmessage"],(0,s.fromJS)(r.receivedData.message)),e&&e.length){var i=e.reduce(function(e,t){return e+=t.amount},0)||0;t=t.setIn(["oriTemp","stockCardList"],(0,s.fromJS)(e)).setIn(["oriTemp","carryoverCardList"],(0,s.fromJS)(e.map(function(e){return e.amount="",e}))).setIn(["oriTemp","amount"],i.toFixed(2))}return t}),l(e,u.CHANGE_PRICE_LIST,function(){return r.data.map(function(e,i){if(r.stockPriceList[i].storeUuid&&r.stockPriceList[i].cardUuid&&(t=(t=t.setIn(["oriTemp","stockCardList",i,"currentQuantity"],e.quantity)).setIn(["oriTemp","stockCardList",i,"showQuantity"],!0)),r.stockPriceList[i].isUniformPrice&&(e.price<0||(0,d.numberCalculate)(e.amount,e.quantity,2,"divide")<0))return a.default.error({title:"【"+e.code+" "+e.cardName+"】的单价异常，请调整单价后再录入",content:"",onOk:function(){}});t=t.setIn(["oriTemp","carryoverCardList",i,"referencePrice"],e.price)}),t}),e)[r.type]||function(){return t})()},r(46);var s=r(18),u=m(r(133)),c=r(101),d=(m(r(27)),r(22));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=(0,s.fromJS)({views:{},flags:{selectList:[],indexList:[],managerCategoryList:[],stockThingsList:[],contactsThingsList:[],costStockList:[],selectItem:[],dropManageFetchAllowed:!0,selectedKeys:"",switchUuidList:[],poundage:{needPoundage:!1},accountContactsRange:[],accountProjectRange:[],accountProjectList:[],accountContactsRangeList:[],carryoverCategoryList:[],carryoverProjectList:[],importList:[],errorList:[],batchList:[],serialList:[]},oriTemp:{accounts:[{},{}],oriDate:(new d.DateLib).toString(),pendingStrongList:[],projectCardList:[{}],currentCardList:[],carryoverCardList:[{}],carryoverStrongList:[],stockCardList:[{}],stockStrongList:[],usedProject:!0,usedCurrent:!0,usedStock:!0,billList:[{billType:"bill_other",billState:""}],billStrongList:[],strongList:[],payment:{},cardAllList:[],poundageCurrentCardList:[],poundageProjectCardList:[],assistList:[],serialList:[]},categoryTemp:{},projectList:[],contactsList:[],warehouseList:[],stockList:[],hideCategoryList:[],MemberList:[],selectThingsList:[],thingsList:[]})},1399:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,r=arguments[1];return((e={},c(e,o.INIT_EIDT_CALCULATE,function(){return d}),c(e,o.INIT_ENCODE_TYPE,function(){return t=t.setIn(["views","chooseNumber"],"-1").setIn(["views","jrIndex"],"").setIn(["views","saveWay"],!1).setIn(["views","encodeType"],"")}),c(e,o.CHANGE_CAN_MODIFY_JRINDEX,function(){var e="0"===r.encodeType?"1":r.encodeType;return t=t.setIn(["views","chooseNumber"],r.encodeType).setIn(["views","jrIndex"],r.jrIndex).setIn(["views","saveWay"],r.saveAndNew).setIn(["views","encodeType"],e)}),c(e,o.CHANGE_EIDT_CALCULATE_COMMON_STATE,function(){return t.setIn([r.parent,r.position],r.value)}),c(e,o.SELECT_EDIT_CALCULATE_ITEM,function(){var e=t.getIn([r.Tem,"uuidList"]),i=t.getIn([r.Tem,"stockCardUuidList"]);if(-1===e.indexOf(r.uuid))e=e.push(r.uuid),i=i?i.push({uuid:r.stockCardUuid,amount:r.amount,onlyId:r.uuid}):[];else{var a=e.findIndex(function(e){return e===r.uuid}),o=i.findIndex(function(e){return e.get("onlyId")===r.uuid});e=e.splice(a,1),i=i?i.splice(o,1):i}var s=i.size?i.toJS():[];return t=t.setIn([r.Tem,"uuidList"],e).setIn([r.Tem,"stockCardUuidList"],(0,n.fromJS)(s))}),c(e,o.SELECT_EDIT_CALCULATE_ITEM_ALL,function(){if(r.selectAll)return t.setIn([r.Tem,"uuidList"],(0,n.fromJS)([])).setIn([r.Tem,"stockCardUuidList"],(0,n.fromJS)([]));var e=t.getIn([r.Tem,r.ListName]),i=[],a=[];return e.forEach(function(e){i.push(e.get("jrJvUuid")),a.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid")})}),t.setIn([r.Tem,"uuidList"],(0,n.fromJS)(i)).setIn([r.Tem,"stockCardUuidList"],(0,n.fromJS)(a))}),c(e,o.AFTER_GET_EDIT_CALCULATE_COMMON_LIST,function(){t.getIn(["CostTransferTemp","uuidList"]);var e=t.getIn(["views","selectList"]),i=t.getIn(["views","selectItem"]),a=t.getIn(["CostTransferTemp","stockCardUuidList"]).toJS(),o=[];a&&a.size&&a.map(function(e){return o.push(e.get("onlyId"))});var s="CostTransferTemp"===r.temp?r.receivedData.carryoverList:r.receivedData.result;t=t.setIn([r.temp,r.ListName],(0,n.fromJS)(s));var u=e,c=i,d=a;if("CostTransferTemp"===r.temp){var m=[];r.receivedData.carryoverList.map(function(t){e.indexOf(t.jrJvUuid)>-1&&m.push(t.jrJvUuid),e.indexOf(t.jrJvUuid)>-1&&(u.push(t.jrJvUuid),c.push(t),-1===o.indexOf(t.jrJvUuid)&&d.push({uuid:t.stockCardUuid,amount:t.amount,onlyId:t.jrJvUuid,quantity:t.quantity,unitCardName:t.unitCardName,number:t.number,quantityAmount:t.quantityAmount}))}),t=t.setIn([r.temp,"uuidList"],(0,n.fromJS)(m)).setIn([r.temp,"stockCardUuidList"],(0,n.fromJS)(d)).setIn([r.temp,"cardPages"],r.receivedData.pages).setIn([r.temp,"currentCardPage"],r.receivedData.currentPage).setIn(["views","selectList"],(0,n.fromJS)(u)).setIn(["views","selectItem"],(0,n.fromJS)(c))}else t=t.setIn([r.temp,"uuidList"],(0,n.fromJS)([])).setIn([r.temp,"stockCardUuidList"],(0,n.fromJS)([])).setIn(["views","selectList"],(0,n.fromJS)([])).setIn(["views","selectItem"],(0,n.fromJS)([]));return t}),c(e,o.GET_CARRYOVER_CATEGORY,function(){return t=t.setIn(["CostTransferTemp","carryoverCategory"],(0,n.fromJS)(r.receivedData.categoryList)),r.needSaveData||(t=t.setIn(["CostTransferTemp","dealTypeName"],"").setIn(["CostTransferTemp","dealTypeUuid"],"")),t}),c(e,o.GET_CARRYOVER_WAREHOUSE,function(){return t=t.setIn(["CostTransferTemp","warehouseOptionList"],(0,n.fromJS)(r.receivedData.warehouseList))}),c(e,o.GET_EDIT_CALCULATE_TRANSFER_OUT_LIST,function(){return t=t.setIn(["TransferOutTemp","transferOutObj"],(0,n.fromJS)(r.receivedData))}),c(e,o.INIT_CATEGORY_FROM_CHANGE_ORISTATE,function(){return t=t.setIn(["CostTransferTemp","stockCardList"],(0,n.fromJS)([{}])).setIn(["CostTransferTemp","costTransferList"],(0,n.fromJS)([])).setIn(["CostTransferTemp","selectStockItem"],(0,n.fromJS)([])).setIn(["CostTransferTemp","propertyCostList"],(0,n.fromJS)([])).setIn(["CostTransferTemp","costStockList"],(0,n.fromJS)([])).setIn(["CostTransferTemp","propertyCost"],"").setIn(["views","selectList"],(0,n.fromJS)([])).setIn(["views","selectItem"],(0,n.fromJS)([])).set("commonCardObj",(0,n.fromJS)({memberList:[],thingsList:[],selectItem:[],selectList:[],selectedKeys:["all"+s.TREE_JOIN_STR+"1"],selectThingsList:[],showSingleModal:!1,modalName:""}))}),c(e,o.INIT_CATEGORY_FROM_GET_CATEGORY,function(){var e=t.getIn(["views","selectItem"]);t.getIn(["views","selectList"]);if(r.notClearItem){var i=r.stockUuidList;if("delete"===r.dealType){var a=e.filter(function(e){return i.indexOf(e.get("stockCardUuid"))>-1}),o=[];a&&a.map(function(e){return o.push(e.get("jrJvUuid"))}),t=t.setIn(["views","selectList"],(0,n.fromJS)(o)).setIn(["views","selectItem"],a).setIn(["CostTransferTemp","stockCardUuidList"],a)}}else t=t.setIn(["views","selectList"],(0,n.fromJS)([])).setIn(["views","selectItem"],(0,n.fromJS)([])).setIn(["CostTransferTemp","stockCardUuidList"],(0,n.fromJS)([]));return t=t.setIn(["CostTransferTemp","carryoverCategory"],(0,n.fromJS)([])).setIn(["CostTransferTemp","warehouseOptionList"],(0,n.fromJS)([])).setIn(["CostTransferTemp","categoryNameAll"],(0,n.fromJS)([])).setIn(["CostTransferTemp","wareHouseNameAll"],(0,n.fromJS)([])).setIn(["CostTransferTemp","categoryUuidList"],(0,n.fromJS)([])).setIn(["CostTransferTemp","storeUuidList"],(0,n.fromJS)([])).setIn(["CostTransferTemp","condition"],"").setIn(["CostTransferTemp","cardPages"],1).setIn(["CostTransferTemp","currentPage"],1)}),c(e,o.AFTER_SUCCESS_INSERT_CALCULATE_LB_ZZ,function(){return t=r.saveAndNew?t.setIn(["views","insertOrModify"],"insert").set("InternalTransferTemp",d.get("InternalTransferTemp")):t.setIn(["views","insertOrModify"],"modify")}),c(e,o.CHANGE_EDIT_ACCOUNT_ACCOUNT_NAME,function(){var e=r.value.split(s.TREE_JOIN_STR);return t=t.setIn([r.tab+"Temp",r.placeUUid],e[0]).setIn([r.tab+"Temp",r.placeName],e[1])}),c(e,o.INIT_EDIT_CALCULATE_TEMP,function(){t.get("hideCategoryList");var e=t.getIn(["SfglTemp","pageSize"]);if("saveAndNew"===r.strJudgeType){r.needCategoryUuid&&(t=t.setIn([r.temp,"categoryUuid"],r.receivedData.get("categoryUuid")));var i=d.get(r.temp);t=t.setIn(["views","insertOrModify"],"insert").setIn(["views","runningInsertOrModify"],"insert").setIn(["views","dealType"],"").setIn(["views","categoryMessage"],(0,n.fromJS)({beProject:!1,usedProject:!1,propertyCostList:[]})).setIn(["views","paymentTypeStr"],t.getIn(["views","paymentTypeStr"])).setIn(["views","indexList"],(0,n.fromJS)([])).setIn(["views","selectList"],(0,n.fromJS)([])).setIn(["views","selectItem"],(0,n.fromJS)([])).setIn(["views","totalAmount"],0).set("enclosureList",(0,n.fromJS)([])).set("label",(0,n.fromJS)([])).set("needDeleteUrl",(0,n.fromJS)([])).set(r.temp,i),"StockBuildUpTemp"===r.temp&&(t=t.setIn(["StockBuildUpTemp","categoryUuid"],r.receivedData.get("categoryUuid")))}if("afterSave"===r.strJudgeType){var a=(0,n.fromJS)(r.receivedData),o=r.callBackObj.jrUuid?r.callBackObj.jrUuid:t.getIn([r.temp,"jrUuid"]);t=t.set(r.temp,a).setIn(["views","insertOrModify"],"modify").setIn(["views","runningInsertOrModify"],"modify").setIn([r.temp,"jrNumber"],r.callBackObj.jrNumber).setIn([r.temp,"jrIndex"],r.callBackObj.jrIndex).setIn([r.temp,"jrUuid"],o).setIn([r.temp,"oriUuid"],r.callBackObj.oriUuid)}return"SfglTemp"===r.temp&&(t=t.setIn(["SfglTemp","pageSize"],e)),t}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_NBZZ,function(){var e=r.item,i=(0,n.fromJS)(r.receivedData.jrOri),a=(0,n.fromJS)(r.receivedData.jrOri.accounts),o=void 0,s=void 0,u=void 0,c=void 0;a&&a.map(function(e,t){"ACCOUNT_STATUS_FROM"==e.get("accountStatus")&&(o=e.get("accountName"),u=e.get("accountUuid")),"ACCOUNT_STATUS_TO"==e.get("accountStatus")&&(s=e.get("accountName"),c=e.get("accountUuid"))});i.get("enclosureList")?i.get("enclosureList"):(0,n.fromJS)([]);return t=d.setIn(["views","insertOrModify"],r.insertOrModify).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName).setIn(["InternalTransferTemp","oriUuid"],e.get("oriUuid")).setIn(["InternalTransferTemp","jrUuid"],i.get("jrUuid")).setIn(["InternalTransferTemp","oriAbstract"],i.get("oriAbstract")).setIn(["InternalTransferTemp","oriState"],i.get("oriState")).setIn(["InternalTransferTemp","amount"],i.get("amount")).setIn(["InternalTransferTemp","fromAccountName"],o).setIn(["InternalTransferTemp","toAccountName"],s).setIn(["InternalTransferTemp","fromAccountUuid"],u).setIn(["InternalTransferTemp","toAccountUuid"],c).setIn(["InternalTransferTemp","jrIndex"],i.get("jrIndex")).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["InternalTransferTemp","beCertificate"],r.receivedData.jrOri.beCertificate)}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_ZJTX,function(){var e=r.item,a=d.get("DepreciationTemp").toJS(),o=(0,n.fromJS)(i({},a,r.receivedData.category,r.receivedData.jrOri));return t=d.setIn(["views","insertOrModify"],r.insertOrModify).setIn(["views","dealType"],o.get("relationCategoryName")).setIn(["views","projectRange"],r.receivedData.category.projectRange).setIn(["views","beProject"],r.receivedData.category.beProject).setIn(["views","propertyCostList"],o.get("propertyCostList")).set("DepreciationTemp",(0,n.fromJS)(o)).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName).setIn(["DepreciationTemp","projectCard"],(0,n.fromJS)(o.getIn(["projectCardList",0]))).setIn(["DepreciationTemp","beCertificate"],r.receivedData.jrOri.beCertificate)}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_SYJZ,function(){var e=r.item,a=d.get("JzjzsyTemp").toJS(),o=(0,n.fromJS)(i({},a,r.receivedData.category,r.receivedData.jrOri));return t=d.setIn(["views","insertOrModify"],r.insertOrModify).set("JzjzsyTemp",(0,n.fromJS)(o)).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName).setIn(["JzjzsyTemp","pendingProfitAndLossCarryoverList"],(0,n.fromJS)(o.get("pendingProfitAndLossCarryoverList"))).setIn(["JzjzsyTemp","categoryName"],o.get("relationCategoryName")).setIn(["JzjzsyTemp","beCertificate"],r.receivedData.jrOri.beCertificate).setIn(["JzjzsyTemp","amount"],r.receivedData.jrOri.amount).setIn(["JzjzsyTemp","projectCardList"],(0,n.fromJS)(r.receivedData.projectList)).setIn(["JzjzsyTemp","jrCategoryList"],(0,n.fromJS)(r.receivedData.categoryList)).setIn(["views","oriUuid"],e.get("oriUuid"))}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_JZSY,function(){var e=r.item,a=d.get("CqzcTemp").toJS(),o=(0,n.fromJS)(i({},a,r.receivedData.category,r.receivedData.jrOri)),s=r.receivedData.jrOri.assets,u=s.depreciationAmount,c=s.originalAssetsAmount,m=(Number(c)-Number(u)).toFixed(2),l=(m-s.cleaningAmount).toFixed(2);return t=d.setIn(["views","insertOrModify"],r.insertOrModify).set("CqzcTemp",(0,n.fromJS)(o)).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName).setIn(["CqzcTemp","projectRange"],r.receivedData.category.projectRange).setIn(["CqzcTemp","beProject"],r.receivedData.category.beProject).setIn(["CqzcTemp","projectCard"],(0,n.fromJS)(o.get("projectCardList"))).setIn(["CqzcTemp","categoryName"],o.get("relationCategoryName")).setIn(["CqzcTemp","businessList"],(0,n.fromJS)(r.receivedData.jrOri.pendingStrongList)).setIn(["CqzcTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("oriUuid")})).setIn(["CqzcTemp","beCertificate"],r.receivedData.jrOri.beCertificate).setIn(["CqzcTemp","diffAmount"],l).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))}),c(e,o.COST_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=r.item,o=d.get("CostTransferTemp").toJS(),s=(0,n.fromJS)(i({},o,r.receivedData.category,r.receivedData.jrOri)),u=r.receivedData.jrOri.stockCardList,c=o.pageSize;if(t=d.setIn(["views","insertOrModify"],r.insertOrModify).setIn(["CostTransferTemp","canUseWarehouse"],e.get("canUseWarehouse")).setIn(["views","projectRange"],s.get("projectRange")).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName).setIn(["CostTransferTemp","oriAbstract"],s.get("oriAbstract")).setIn(["CostTransferTemp","dealTypeUuid"],s.get("relationCategoryUuid")).setIn(["CostTransferTemp","categoryName"],s.get("categoryName")).setIn(["CostTransferTemp","dealTypeName"],s.get("relationCategoryName")).setIn(["CostTransferTemp","dealCategoryType"],r.receivedData.jrOri.relationCategoryType).setIn(["CostTransferTemp","costStockList"],s.get("stockCardList")).setIn(["CostTransferTemp","beCertificate"],r.receivedData.jrOri.beCertificate).setIn(["CostTransferTemp","propertyCostList"],s.get("propertyCostList")).setIn(["CostTransferTemp","propertyCost"],s.get("propertyCost")).setIn(["CostTransferTemp","stockCardList"],(0,n.fromJS)(u)).setIn(["CostTransferTemp","selectStockItem"],(0,n.fromJS)(u)).setIn(["CostTransferTemp","totalNumber"],u.length),u&&u.map(function(e,r){t=t.setIn(["CostTransferTemp","stockCardList",r,"allUnit"],(0,n.fromJS)(e.unit)).setIn(["CostTransferTemp","stockCardList",r,"unitCardName"],e.unit?e.unit.name:"").setIn(["CostTransferTemp","selectStockItem",r,"unitCardName"],e.unit?e.unit.name:"")}),"modify"===r.insertOrModify||r.disabledChange){var m=s.get("enclosureList")?s.get("enclosureList"):(0,n.fromJS)([]);t=t.setIn(["CostTransferTemp","oriUuid"],s.get("oriUuid")).setIn(["CostTransferTemp","jrIndex"],s.get("jrIndex")).setIn(["CostTransferTemp","oriState"],s.get("oriState")).setIn(["CostTransferTemp","carryoverAmount"],s.get("notHandleAmount")).setIn(["CostTransferTemp","uuidList"],s.get("stockWeakList").map(function(e,t){return e.get("jrJvUuid")}).slice(0,c)).setIn(["CostTransferTemp","projectCard"],s.get("projectCardList")).setIn(["CostTransferTemp","usedProject"],s.get("usedProject")).setIn(["CostTransferTemp","beProject"],s.get("beProject")).setIn(["CostTransferTemp","enclosureList"],m).setIn(["CostTransferTemp","cardPages"],Math.ceil(s.get("stockWeakList").size/c)).setIn(["CostTransferTemp","currentCardPage"],1).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"));var l=[];"STATE_YYSR_ZJ"!==s.get("oriState")?(s.getIn(["stockWeakList"]).map(function(e){l.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid"),quantity:e.get("quantity"),quantityAmount:e.get("quantityAmount"),number:e.get("number"),storeNumber:e.get("storeNumber")}),u.forEach(function(r,i){r.cardUuid===e.get("stockCardUuid")&&(t=(t=t.setIn(["CostTransferTemp","stockCardList",i,"unitCardName"],e.get("unitCardName"))).setIn(["CostTransferTemp","selectStockItem",i,"unitCardName"],e.get("unitCardName")))})}),u&&u.map(function(e,r){var i=0,n=0,o=0,s=0,u=0;l&&l.map(function(t,r){t.uuid===e.cardUuid&&(t.uuid,t.unitCardName,i=(0,a.numberCalculate)(i,t.amount),u=(0,a.numberCalculate)(u,t.quantity,4,"add",4),n=(0,a.numberCalculate)(n,t.number,4,"add",4),s=(0,a.numberCalculate)(s,t.quantityAmount),o=(0,a.numberCalculate)(o,t.storeNumber,4,"add",4))});0===n||(0,a.numberCalculate)(s,n,4,"divide",4)<0||(0,a.numberCalculate)(s,n,4,"divide",4);t=t.setIn(["CostTransferTemp","stockCardList",r,"referencePrice"],(0,a.numberCalculate)(s,n,4,"divide",4)).setIn(["CostTransferTemp","stockCardList",r,"referenceQuantity"],o).setIn(["CostTransferTemp","selectStockItem",r,"referencePrice"],(0,a.numberCalculate)(s,n,4,"divide",4)).setIn(["CostTransferTemp","selectStockItem",r,"referenceQuantity"],o)})):u.forEach(function(e,r){t=t.setIn(["CostTransferTemp","stockCardList",r,"unitCardName"],e.unitName).setIn(["CostTransferTemp","stockCardList",r,"unitUuid"],e.unitUuid).setIn(["CostTransferTemp","stockCardList",r,"warehouseCardName"],e.warehouseCardName).setIn(["CostTransferTemp","selectStockItem",r,"unitCardName"],e.unitName).setIn(["CostTransferTemp","selectStockItem",r,"unitUuid"],e.unitUuid).setIn(["CostTransferTemp","selectStockItem",r,"warehouseCardName"],e.warehouseCardName)}),t=t.setIn(["CostTransferTemp","costTransferList"],s.get("stockWeakList")).setIn(["CostTransferTemp","canModifyList"],s.get("stockWeakList")).setIn(["views","selectItem"],s.get("stockWeakList")).setIn(["views","selectList"],s.get("stockWeakList").map(function(e){return e.get("jrJvUuid")})).setIn(["CostTransferTemp","stockCardUuidList"],(0,n.fromJS)(l))}else t=(t=t.setIn(["CostTransferTemp","oriUuid"],"").setIn(["CostTransferTemp","oriState"],s.get("oriState")).setIn(["CostTransferTemp","carryoverAmount"],"").setIn(["CostTransferTemp","uuidList"],(0,n.fromJS)([e.get("oriUuid")]))).setIn(["CostTransferTemp","costTransferList"],(0,n.fromJS)([e]));return t}),c(e,o.INVOICE_AUTH_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=r.item,a=d.get("InvoiceAuthTemp").toJS(),o=(0,n.fromJS)(i({},a,r.receivedData.category,r.receivedData.jrOri)),s=[];return o.get("pendingStrongList").map(function(e){s.push({onlyId:e.get("oriUuid")})}),t=d.setIn(["views","insertOrModify"],r.insertOrModify).setIn(["InvoiceAuthTemp","oriAbstract"],o.get("oriAbstract")).setIn(["InvoiceAuthTemp","categoryUuid"],o.get("categoryUuid")).setIn(["InvoiceAuthTemp","oriState"],o.get("oriState")).setIn(["InvoiceAuthTemp","beCertificate"],r.receivedData.jrOri.beCertificate),t="modify"===r.insertOrModify||r.disabledChange?(t=t.setIn(["InvoiceAuthTemp","oriUuid"],e.get("oriUuid")).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName).setIn(["InvoiceAuthTemp","jrIndex"],o.get("jrIndex")).setIn(["InvoiceAuthTemp","amount"],o.get("amount")).setIn(["InvoiceAuthTemp","billAuthType"],"STATE_FPRZ_CG"===o.get("oriState")?"BILL_AUTH_TYPE_CG":"BILL_AUTH_TYPE_TG").setIn(["InvoiceAuthTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("jrJvUuid")})).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["InvoiceAuthTemp","stockCardUuidList"],(0,n.fromJS)(s))).setIn(["InvoiceAuthTemp","invoiceAuthList"],o.getIn(["pendingStrongList"])):(t=t.setIn(["InvoiceAuthTemp","oriUuid"],"").setIn(["InvoiceAuthTemp","billAuthType"],"STATE_FPRZ_CG"===o.get("oriState")?"BILL_AUTH_TYPE_CG":"BILL_AUTH_TYPE_TG").setIn(["InvoiceAuthTemp","uuidList"],(0,n.fromJS)([e.get("jrJvUuid")]))).setIn(["InvoiceAuthTemp","invoiceAuthList"],(0,n.fromJS)([e]))}),c(e,o.INVOICING_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=r.item,a=d.get("InvoicingTemp").toJS(),o=(0,n.fromJS)(i({},a,r.receivedData.category,r.receivedData.jrOri)),s=[];if(o.get("pendingStrongList").map(function(e){s.push({onlyId:e.get("oriUuid")})}),t=d.setIn(["views","insertOrModify"],r.insertOrModify).setIn(["InvoicingTemp","oriAbstract"],o.get("oriAbstract")).setIn(["InvoicingTemp","categoryUuid"],o.get("categoryUuid")).setIn(["InvoicingTemp","oriState"],o.get("oriState")).setIn(["InvoicingTemp","beCertificate"],r.receivedData.jrOri.beCertificate),"modify"===r.insertOrModify||r.disabledChange){var u="STATE_KJFP_XS"===o.get("oriState")?"BILL_MAKE_OUT_TYPE_XS":"BILL_MAKE_OUT_TYPE_TS",c=o.get("enclosureList")?o.get("enclosureList"):(0,n.fromJS)([]);t=(t=t.setIn(["InvoicingTemp","oriUuid"],e.get("oriUuid")).setIn(["InvoicingTemp","jrIndex"],o.get("jrIndex")).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName).setIn(["InvoicingTemp","amount"],o.get("amount")).setIn(["InvoicingTemp","enclosureList"],c).setIn(["InvoicingTemp","billMakeOutType"],u).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["InvoicingTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("jrJvUuid")})).setIn(["InvoicingTemp","stockCardUuidList"],(0,n.fromJS)(s))).setIn(["InvoicingTemp","invoicingList"],o.getIn(["pendingStrongList"]))}else t=(t=t.setIn(["InvoicingTemp","oriUuid"],"").setIn(["InvoicingTemp","billMakeOutType"],"STATE_KJFP_XS"===o.get("oriState")?"BILL_MAKE_OUT_TYPE_XS":"BILL_MAKE_OUT_TYPE_TS").setIn(["InvoicingTemp","uuidList"],(0,n.fromJS)([o.get("jrJvUuid")]))).setIn(["InvoicingTemp","invoicingList"],(0,n.fromJS)([o]));return t}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=r.item,a=d.get("DepreciationTemp").toJS(),o=(0,n.fromJS)(i({},a,r.receivedData.category,r.receivedData.jrOri));t=d.setIn(["views","insertOrModify"],r.insertOrModify).set("TransferOutTemp",(0,n.fromJS)(o)).setIn(["TransferOutTemp","beCertificate"],r.receivedData.jrOri.beCertificate).setIn(["TransferOutTemp","oriUuid"],e.get("oriUuid")).setIn(["TransferOutTemp","jrIndex"],o.get("jrIndex")).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName).setIn(["TransferOutTemp","oriAbstract"],o.get("oriAbstract")).setIn(["TransferOutTemp","categoryUuid"],o.get("categoryUuid")).setIn(["TransferOutTemp","handleMonth"],o.getIn(["pendingStrongList",0,"oriDate"]).substr(0,7)).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["TransferOutTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("oriUuid")}));var s=0,u=0,c=0,m=0;return o.get("pendingStrongList").forEach(function(e){"销项税额"===e.get("jrJvTypeName")?(m+=1,c+=e.get("handleAmount")):(u+=1,s+=e.get("handleAmount"))}),t=t.setIn(["TransferOutTemp","transferOutObj","jrJvVatDtoList"],o.get("pendingStrongList")).setIn(["TransferOutTemp","transferOutObj","inputAmount"],s).setIn(["TransferOutTemp","transferOutObj","inputCount"],u).setIn(["TransferOutTemp","transferOutObj","outputAmount"],c).setIn(["TransferOutTemp","transferOutObj","outputCount"],m)}),c(e,o.PAYMANAGE_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=r.item,a=d.get("SfglTemp").toJS(),o=e.get("pageSize")?e.get("pageSize"):20,s=(0,n.fromJS)(i({},a,r.receivedData.category,r.receivedData.jrOri)),u="STATE_SFGL_ML"===s.get("oriState"),c=r.receivedData.jrOri.pendingManageDto.pendingManageList,m=r.receivedData.jrOri.pendingManageDto.debitTotal,l=r.receivedData.jrOri.pendingManageDto.creditTotal,p=0,f=[];if(c&&c.length&&c.map(function(e,t){var r=e.direction,n=void 0,a=Number(e.amount);n=a.toFixed(2),"debit"===r?p+=Number(n):p-=Number(n),f.push(i({},e,{moedAmount:e.handleAmount}))}),t=d.setIn(["views","insertOrModify"],r.insertOrModify).setIn(["SfglTemp","oriAbstract"],s.get("oriAbstract")).setIn(["SfglTemp","categoryUuid"],s.getIn(["pendingManageDto","categoryUuid"])).setIn(["SfglTemp","categoryName"],s.getIn(["pendingManageDto","categoryName"])).setIn(["SfglTemp","oriState"],s.get("oriState")).setIn(["SfglTemp","oriUuid"],s.get("oriUuid")).setIn(["SfglTemp","jrUuid"],s.get("jrUuid")).setIn(["SfglTemp","isModeRunning"],u).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName).setIn(["SfglTemp","beCertificate"],r.receivedData.jrOri.beCertificate),"modify"===r.insertOrModify||r.disabledChange){1===r.receivedData.jrOri.accounts.length?t=t.setIn(["SfglTemp","accountUuid"],s.getIn(["accounts",0,"accountUuid"])).setIn(["SfglTemp","accountName"],s.getIn(["accounts",0,"accountName"])).setIn(["SfglTemp","accounts"],(0,n.fromJS)([r.receivedData.jrOri.accounts[0],{amount:""}])).setIn(["SfglTemp","usedAccounts"],!1):r.receivedData.jrOri.accounts.length>1&&(t=t.setIn(["SfglTemp","accounts"],(0,n.fromJS)(r.receivedData.jrOri.accounts)).setIn(["SfglTemp","usedAccounts"],!0));var T="STATE_SFGL_ML"===s.get("oriState")?"moedAmount":"handlingAmount",I=s.get("enclosureList")?s.get("enclosureList"):(0,n.fromJS)([]);t=(t=t.setIn(["SfglTemp","jrIndex"],s.get("jrIndex")).setIn(["SfglTemp",T],s.get("amount")).setIn(["SfglTemp","cardUuid"],s.getIn(["currentCardList",0,"cardUuid"])).setIn(["SfglTemp","usedCard","code"],s.getIn(["currentCardList",0,"code"])).setIn(["SfglTemp","usedCard","name"],s.getIn(["currentCardList",0,"name"])).setIn(["SfglTemp","cardPages"],Math.ceil(s.getIn(["pendingManageDto","pendingManageList"]).size/o)).setIn(["SfglTemp","currentCardPage"],1).setIn(["SfglTemp","pageSize"],o).setIn(["SfglTemp","totalNumber"],s.getIn(["pendingManageDto","pendingManageList"]).size).setIn(["SfglTemp","debitTotal"],m).setIn(["SfglTemp","creditTotal"],l).setIn(["SfglTemp","unAutomatic"],s.getIn(["pendingManageDto","isManualWriteOff"])).setIn(["SfglTemp","enclosureList"],I).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["views","selectList"],s.getIn(["pendingManageDto","pendingManageList"]).map(function(e){return e.get("uuid")})).setIn(["views","indexList"],s.getIn(["pendingManageDto","pendingManageList"]).map(function(e,t){return t})).setIn(["views","selectItem"],(0,n.fromJS)(f)).setIn(["views","totalAmount"],p)).setIn(["SfglTemp","detail"],(0,n.fromJS)(f))}else t=(t=t.setIn(["SfglTemp","oriUuid"],"").setIn(["views","selectList"],(0,n.fromJS)([])).setIn(["views","indexList"],(0,n.fromJS)([])).setIn(["views","selectItem"],(0,n.fromJS)([])).setIn(["SfglTemp","uuidList"],(0,n.fromJS)([e.get("oriUuid")])).setIn(["SfglTemp","debitTotal"],0).setIn(["SfglTemp","creditTotal"],0)).setIn(["SfglTemp","detail"],(0,n.fromJS)([s]));return t}),c(e,o.COMMONCHARGE_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=r.item,a=d.get("CommonChargeTemp").toJS(),o=(0,n.fromJS)(i({},a,r.receivedData.category,r.receivedData.jrOri));if(t=d.set("CommonChargeTemp",o).setIn(["views","insertOrModify"],r.insertOrModify).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName).setIn(["CommonChargeTemp","oriAbstract"],o.get("oriAbstract")).setIn(["CommonChargeTemp","oriState"],o.get("oriState")).setIn(["CommonChargeTemp","oriUuid"],o.get("oriUuid")).setIn(["CommonChargeTemp","jrUuid"],o.get("jrUuid")).setIn(["CommonChargeTemp","beCertificate"],r.receivedData.jrOri.beCertificate),"modify"===r.insertOrModify||r.disabledChange){var s=0;o.get("pendingProjectShareList").map(function(e){s+=e.get("amount")}),t=(t=t.setIn(["CommonChargeTemp","jrIndex"],o.get("jrIndex")).setIn(["CommonChargeTemp","amount"],s).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))).setIn(["CommonChargeTemp","paymentList"],o.get("pendingProjectShareList"))}else t=(t=t.setIn(["CommonChargeTemp","oriUuid"],"").setIn(["views","selectList"],(0,n.fromJS)([])).setIn(["views","indexList"],(0,n.fromJS)([])).setIn(["CommonChargeTemp","uuidList"],(0,n.fromJS)([e.get("oriUuid")]))).setIn(["CommonChargeTemp","detail"],(0,n.fromJS)([o]));return t}),c(e,o.INVENTORY_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=r.item,a=d.get("StockTemp").toJS(),o=(0,n.fromJS)(i({},a,r.receivedData.category,r.receivedData.jrOri));if(t=d.setIn(["views","insertOrModify"],r.insertOrModify).setIn(["StockTemp","oriAbstract"],o.get("oriAbstract")),"modify"===r.insertOrModify||r.disabledChange){var s=[];r.receivedData.jrOri.stockCardList.map(function(e){s.push(i({},e,{unit:{uuid:e.unitUuid,name:e.unitName}}))});var u=o.get("enclosureList")?o.get("enclosureList"):(0,n.fromJS)([]),c=[];r.receivedData.jrOri.warehouseCardList.map(function(e){c.push({cardUuid:e.cardUuid,name:e.code+" "+e.name,warehouseStatus:e.warehouseStatus})}),t=t.setIn(["StockTemp","oriUuid"],o.get("oriUuid")).setIn(["StockTemp","jrUuid"],o.get("jrUuid")).setIn(["StockTemp","jrIndex"],o.get("jrIndex")).setIn(["StockTemp","oriState"],o.get("oriState")).setIn(["StockTemp","chooseWareHouseCardList"],(0,n.fromJS)(c)).setIn(["StockTemp","enclosureList"],u).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName).setIn(["StockTemp","oriState"],"STATE_CHDB").setIn(["StockTemp","stockCardList"],(0,n.fromJS)(s)).setIn(["StockTemp","beCertificate"],r.receivedData.jrOri.beCertificate);var m=[];o.getIn(["stockWeakList"]).map(function(e){m.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid"),quantity:e.get("quantity"),quantityAmount:e.get("quantityAmount")})}),t=t.setIn(["StockTemp","costTransferList"],o.getIn(["stockWeakList"])).setIn(["StockTemp","canModifyList"],o.getIn(["stockWeakList"])).setIn(["StockTemp","stockCardUuidList"],(0,n.fromJS)(m)).setIn(["StockTemp","categoryUuid"],r.receivedData.category.uuid)}else t=(t=t.setIn(["StockTemp","oriUuid"],"").setIn(["StockTemp","oriState"],o.get("oriState")).setIn(["StockTemp","carryoverAmount"],"").setIn(["StockTemp","uuidList"],(0,n.fromJS)([e.get("oriUuid")])).setIn(["StockTemp","stockCardList"],(0,n.fromJS)([]))).setIn(["StockTemp","costTransferList"],(0,n.fromJS)([e]));return t}),c(e,o.INVENTORY_BALANCE_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=r.item,o=d.get("BalanceTemp").toJS(),s=(0,n.fromJS)(i({},o,r.receivedData.category,r.receivedData.jrOri));s.get("jrState");if(t=d.setIn(["views","insertOrModify"],r.insertOrModify).setIn(["BalanceTemp","canUseWarehouse"],e.get("canUseWarehouse")).setIn(["BalanceTemp","oriAbstract"],s.get("oriAbstract")).setIn(["BalanceTemp","categoryUuid"],s.get("categoryUuid")).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName),"modify"===r.insertOrModify||r.disabledChange){var u=[],c=[];r.receivedData.jrOri.stockCardList&&r.receivedData.jrOri.stockCardList.map(function(e,t){c.push(e.cardUuid),u.push(i({},e,{allUnit:{uuid:e.unitUuid,name:e.unitName},price:(0,a.numberCalculate)(e.amount,e.quantity,4,"divide",4),afterAmount:(0,a.numberCalculate)(e.beforeAmount,e.amount),afterQuantity:(0,a.numberCalculate)(e.beforeQuantity,e.quantity,4,"add",4),beforePrice:(0,a.numberCalculate)(e.beforeAmount,e.beforeQuantity,4,"divide",4),afterPrice:(0,a.numberCalculate)((0,a.numberCalculate)(e.beforeAmount,e.amount),(0,a.numberCalculate)(e.beforeQuantity,e.quantity,4,"add",4),4,"divide",4),warehouseCardName:e.warehouseCardName}))});var m=s.get("enclosureList")?s.get("enclosureList"):(0,n.fromJS)([]);t=t.setIn(["BalanceTemp","oriUuid"],s.get("oriUuid")).setIn(["BalanceTemp","jrUuid"],s.get("jrUuid")).setIn(["BalanceTemp","jrIndex"],s.get("jrIndex")).setIn(["BalanceTemp","oriState"],s.get("jrState")).setIn(["BalanceTemp","chooseStockCard"],(0,n.fromJS)({})).setIn(["BalanceTemp","enclosureList"],m).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["BalanceTemp","stockCardList"],(0,n.fromJS)(u)).setIn(["BalanceTemp","oriStockList"],(0,n.fromJS)(u)).setIn(["BalanceTemp","oriStockCardList"],(0,n.fromJS)(c)).setIn(["BalanceTemp","oriWarehouseCardList"],(0,n.fromJS)([])).setIn(["BalanceTemp","categoryUuid"],r.receivedData.category.uuid).setIn(["BalanceTemp","beCertificate"],r.receivedData.jrOri.beCertificate)}else t=t.setIn(["BalanceTemp","oriUuid"],"").setIn(["BalanceTemp","oriState"],s.get("oriState")).setIn(["BalanceTemp","carryoverAmount"],"").setIn(["BalanceTemp","uuidList"],(0,n.fromJS)([e.get("oriUuid")])).setIn(["BalanceTemp","stockCardList"],(0,n.fromJS)([]));return t}),c(e,o.TAX_TRANSTER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=r.item,a=d.get("TaxTransferTemp").toJS(),o=(0,n.fromJS)(i({},a,r.receivedData.category,r.receivedData.jrOri)),s=r.receivedData.jrOri.stockCardList;if(t=d.setIn(["views","insertOrModify"],r.insertOrModify).setIn(["TaxTransferTemp","canUseWarehouse"],e.get("canUseWarehouse")).setIn(["views","categoryMessage"],(0,n.fromJS)(r.receivedData.category)).setIn(["views","categoryMessage","categoryType"],r.receivedData.category.relationCategoryType).setIn(["views","projectRange"],o.get("projectRange")).setIn(["TaxTransferTemp","oriAbstract"],o.get("oriAbstract")).setIn(["TaxTransferTemp","dealTypeUuid"],o.get("relationCategoryUuid")).setIn(["TaxTransferTemp","categoryName"],o.get("categoryName")).setIn(["TaxTransferTemp","dealTypeName"],o.get("relationCategoryName")).setIn(["TaxTransferTemp","beCertificate"],r.receivedData.jrOri.beCertificate).setIn(["TaxTransferTemp","stockCardList"],(0,n.fromJS)(s)).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName),s&&s.map(function(e,r){t=(t=t.setIn(["TaxTransferTemp","stockCardList",r,"allUnit"],(0,n.fromJS)(e.unit))).setIn(["TaxTransferTemp","stockCardList",r,"unitCardName"],e.unit?e.unit.name:"")}),"modify"===r.insertOrModify||r.disabledChange){var u=o.get("enclosureList")?o.get("enclosureList"):(0,n.fromJS)([]);t=t.setIn(["TaxTransferTemp","oriUuid"],o.get("oriUuid")).setIn(["TaxTransferTemp","jrIndex"],o.get("jrIndex")).setIn(["TaxTransferTemp","oriState"],o.get("oriState")).setIn(["TaxTransferTemp","projectCard"],o.getIn(["projectCardList",0])?o.getIn(["projectCardList",0]):(0,n.fromJS)({})).setIn(["TaxTransferTemp","usedProject"],o.get("usedProject")).setIn(["TaxTransferTemp","amount"],o.get("amount")).setIn(["TaxTransferTemp","propertyCarryover"],o.get("propertyCarryover")).setIn(["TaxTransferTemp","propertyCost"],o.get("propertyCost")).setIn(["TaxTransferTemp","enclosureList"],u).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))}else t=(t=t.setIn(["TaxTransferTemp","oriUuid"],"").setIn(["TaxTransferTemp","oriState"],o.get("oriState")).setIn(["TaxTransferTemp","uuidList"],(0,n.fromJS)([e.get("oriUuid")]))).setIn(["TaxTransferTemp","taxTransferList"],(0,n.fromJS)([e]));return t}),c(e,o.STOCK_BUILDUP_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=r.item,o=d.get("StockBuildUpTemp").toJS(),s=(0,n.fromJS)(i({},o,r.receivedData.category,r.receivedData.jrOri)),u=s.get("oriState"),c=s.get("enclosureList")?s.get("enclosureList"):(0,n.fromJS)([]);if(t=d.setIn(["views","insertOrModify"],r.insertOrModify).setIn(["StockBuildUpTemp","oriAbstract"],s.get("oriAbstract")).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName),"modify"===r.insertOrModify||r.disabledChange){var m=[],l=[],p=[],f=[];"STATE_CHZZ_ZZCX"===u?(r.receivedData.jrOri.stockCardList&&r.receivedData.jrOri.stockCardList.map(function(e,t){var r=1;e.unit&&(e.unit.unitUuid===e.unitUuid?r=e.unit.basicUnitQuantity?e.unit.basicUnitQuantity:1:e.unit.unitList&&e.unit.unitList.map(function(t){t.uuid===e.unitUuid&&(r=t.basicUnitQuantity?t.basicUnitQuantity:1)})),p.push(e.cardUuid+"+"+e.warehouseCardUuid),m.push(i({},e,{price:(0,a.numberCalculate)(e.amount,e.quantity,4,"divide",4),basicUnitQuantity:r}))}),r.receivedData.jrOri.stockCardOtherList&&r.receivedData.jrOri.stockCardOtherList.map(function(e,t){f.push(e.cardUuid+"+"+e.warehouseCardUuid);var r=1;e.unit&&(e.unit.unitUuid===e.unitUuid?r=e.unit.basicUnitQuantity?e.unit.basicUnitQuantity:1:e.unit.unitList&&e.unit.unitList.map(function(t){t.uuid===e.unitUuid&&(r=t.basicUnitQuantity?t.basicUnitQuantity:1)})),l.push(i({},e,{basicUnitQuantity:r,price:(0,a.numberCalculate)(e.amount,e.quantity,4,"divide",4)}))}),t=t.setIn(["StockBuildUpTemp","stockCardList"],(0,n.fromJS)(m)).setIn(["StockBuildUpTemp","stockCardOtherList"],(0,n.fromJS)(l)).setIn(["StockBuildUpTemp","oriStockCardList"],(0,n.fromJS)(p)).setIn(["StockBuildUpTemp","oriStockCardOtherList"],(0,n.fromJS)(f))):(m=r.receivedData.jrOri.stockCardList&&r.receivedData.jrOri.stockCardList.map(function(e,t){return i({},e,{materialList:e.childCardList&&e.childCardList.map(function(r){p.push(t+"+"+e.cardUuid+"+"+e.warehouseCardUuid);var n=1;return r.unit&&(r.unit.unitUuid===r.unitUuid?n=r.unit.basicUnitQuantity?r.unit.basicUnitQuantity:1:r.unit.unitList&&r.unit.unitList.map(function(e){e.uuid===r.unitUuid&&(n=e.basicUnitQuantity?e.basicUnitQuantity:1)})),i({},r,{materialUuid:r.cardUuid,isOpenQuantity:r.isOpenedQuantity,basicUnitQuantity:n})})||[],uuid:e.cardUuid,productUuid:e.cardUuid,curQuantity:e.quantity})})||[],t=t.setIn(["StockBuildUpTemp","assemblySheet"],(0,n.fromJS)(m)).setIn(["StockBuildUpTemp","oriStockCardList"],(0,n.fromJS)(p))),t=t.setIn(["StockBuildUpTemp","oriUuid"],s.get("oriUuid")).setIn(["StockBuildUpTemp","jrUuid"],s.get("jrUuid")).setIn(["StockBuildUpTemp","jrIndex"],s.get("jrIndex")).setIn(["StockBuildUpTemp","oriState"],s.get("oriState")).setIn(["StockBuildUpTemp","beCertificate"],s.get("beCertificate")).setIn(["StockBuildUpTemp","enclosureList"],c).setIn(["StockBuildUpTemp","categoryUuid"],r.receivedData.category.uuid).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))}else t=t.setIn(["StockBuildUpTemp","oriUuid"],"").setIn(["StockBuildUpTemp","oriState"],s.get("oriState")).setIn(["StockBuildUpTemp","uuidList"],(0,n.fromJS)([e.get("oriUuid")])).setIn(["stockCardOtherList","stockCardList"],(0,n.fromJS)([])).setIn(["StockBuildUpTemp","oriStockCardList"],(0,n.fromJS)([])).setIn(["StockBuildUpTemp","oriStockCardOtherList"],(0,n.fromJS)([]));return t}),c(e,o.STOCK_INTO_PROJECT_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=r.item,o=d.get("StockIntoProjectTemp").toJS(),s=(0,n.fromJS)(i({},o,r.receivedData.category,r.receivedData.jrOri));if(t=d.setIn(["views","insertOrModify"],r.insertOrModify).setIn(["StockIntoProjectTemp","oriAbstract"],s.get("oriAbstract")).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName),"modify"===r.insertOrModify||r.disabledChange){var u=[],c=[];r.receivedData.jrOri.stockCardList&&r.receivedData.jrOri.stockCardList.map(function(e,t){c.push(e.cardUuid+"+"+e.warehouseCardUuid),u.push(i({},e,{price:(0,a.numberCalculate)(e.amount,e.quantity,4,"divide",4)}))});var m=s.get("enclosureList")?s.get("enclosureList"):(0,n.fromJS)([]);t=t.setIn(["StockIntoProjectTemp","oriUuid"],s.get("oriUuid")).setIn(["StockIntoProjectTemp","jrUuid"],s.get("jrUuid")).setIn(["StockIntoProjectTemp","jrIndex"],s.get("jrIndex")).setIn(["StockIntoProjectTemp","oriState"],s.get("oriState")).setIn(["StockIntoProjectTemp","beCertificate"],s.get("beCertificate")).setIn(["StockIntoProjectTemp","enclosureList"],m).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["StockIntoProjectTemp","stockCardList"],(0,n.fromJS)(u)).setIn(["StockIntoProjectTemp","oriStockCardList"],(0,n.fromJS)(c)).setIn(["StockIntoProjectTemp","projectCard"],(0,n.fromJS)(r.receivedData.jrOri.projectCardList[0]))}else t=t.setIn(["StockIntoProjectTemp","oriUuid"],"").setIn(["StockIntoProjectTemp","oriState"],s.get("oriState")).setIn(["StockIntoProjectTemp","uuidList"],(0,n.fromJS)([e.get("oriUuid")])).setIn(["stockCardOtherList","stockCardList"],(0,n.fromJS)([])).setIn(["StockIntoProjectTemp","oriStockCardList"],(0,n.fromJS)([])).setIn(["StockIntoProjectTemp","oriStockCardOtherList"],(0,n.fromJS)([]));return t}),c(e,o.PROJECT_CARROVER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=r.item,o=d.get("ProjectCarryoverTemp").toJS(),u=(0,n.fromJS)(i({},o,r.receivedData.category,r.receivedData.jrOri));if(t=d.setIn(["views","insertOrModify"],r.insertOrModify).setIn(["ProjectCarryoverTemp","oriAbstract"],u.get("oriAbstract")).setIn(["views","paymentTypeStr"],r.receivedData.jrOri.categoryFullName),"modify"===r.insertOrModify||r.disabledChange){var c=[],m=[];r.receivedData.jrOri.stockCardList&&r.receivedData.jrOri.stockCardList.map(function(e,t){m.push(e.cardUuid+"+"+e.warehouseCardUuid),c.push(i({},e,{price:(0,a.numberCalculate)(e.amount,e.quantity,4,"divide",4)}))});var l=u.get("enclosureList")?u.get("enclosureList"):(0,n.fromJS)([]);"STATE_XMJZ_XMJQ"===u.get("oriState")&&(t=t.setIn(["ProjectCarryoverTemp","carryoverList"],u.get("pendingStrongList"))),t=t.setIn(["ProjectCarryoverTemp","oriUuid"],u.get("oriUuid")).setIn(["ProjectCarryoverTemp","jrUuid"],u.get("jrUuid")).setIn(["ProjectCarryoverTemp","jrIndex"],u.get("jrIndex")).setIn(["ProjectCarryoverTemp","oriState"],u.get("oriState")).setIn(["ProjectCarryoverTemp","beCertificate"],u.get("beCertificate")).setIn(["ProjectCarryoverTemp","allHappenAmount"],u.get("allHappenAmount")).setIn(["ProjectCarryoverTemp","allStoreAmount"],u.get("allStoreAmount")).setIn(["ProjectCarryoverTemp","enclosureList"],l).setIn(["views","switchUuidList"],r.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["ProjectCarryoverTemp","stockCardList"],(0,n.fromJS)(c)).setIn(["ProjectCarryoverTemp","oriStockCardList"],(0,n.fromJS)(m)).setIn(["ProjectCarryoverTemp","projectCard"],(0,n.fromJS)(r.receivedData.jrOri.projectCardList[0])).setIn(["ProjectCarryoverTemp","receiveAmount"],(0,n.fromJS)(r.receivedData.jrOri.amount)).setIn(["ProjectCarryoverTemp","currentAmount"],(0,n.fromJS)(r.receivedData.jrOri.currentAmount)).setIn(["ProjectCarryoverTemp","cardPages"],Math.ceil(u.get("pendingStrongList").size/s.EDIT_RUNNING_CHOOSE_TABLE)).setIn(["ProjectCarryoverTemp","currentCardPage"],1).setIn(["ProjectCarryoverTemp","pageSize"],s.EDIT_RUNNING_CHOOSE_TABLE).setIn(["ProjectCarryoverTemp","totalNumber"],u.get("pendingStrongList").size)}else t=t.setIn(["ProjectCarryoverTemp","oriUuid"],"").setIn(["ProjectCarryoverTemp","oriState"],u.get("oriState")).setIn(["ProjectCarryoverTemp","uuidList"],(0,n.fromJS)([e.get("oriUuid")])).setIn(["stockCardOtherList","stockCardList"],(0,n.fromJS)([])).setIn(["ProjectCarryoverTemp","oriStockCardList"],(0,n.fromJS)([])).setIn(["ProjectCarryoverTemp","oriStockCardOtherList"],(0,n.fromJS)([]));return t}),c(e,o.XMJZ_GET_CARRYOVER_LIST,function(){return t=t.setIn(["ProjectCarryoverTemp","carryoverList"],(0,n.fromJS)(r.receivedData.carryoverList)).setIn(["ProjectCarryoverTemp","allHappenAmount"],(0,n.fromJS)(r.receivedData.allHappenAmount)).setIn(["ProjectCarryoverTemp","allStoreAmount"],(0,n.fromJS)(r.receivedData.allStoreAmount)),"XZ_CONSTRUCTION"===r.projectProperty&&(t=t.setIn(["ProjectCarryoverTemp","cardPages"],Math.ceil(r.receivedData.carryoverList.length/s.EDIT_RUNNING_CHOOSE_TABLE)).setIn(["ProjectCarryoverTemp","currentCardPage"],1).setIn(["ProjectCarryoverTemp","pageSize"],s.EDIT_RUNNING_CHOOSE_TABLE).setIn(["ProjectCarryoverTemp","totalNumber"],r.receivedData.carryoverList.length).setIn(["ProjectCarryoverTemp","receiveAmount"],r.receivedData.allHappenAmount).setIn(["ProjectCarryoverTemp","currentAmount"],r.receivedData.allStoreAmount)),t}),c(e,o.CHANGE_CALCULATE_COMMON_STRING,function(){return r.placeArr&&(t=t.setIn(r.placeArr,r.value)),r.place&&(t=t.set(r.place,r.value)),t}),c(e,o.CHANGE_CALCULATE_ENCLOSURE_LIST,function(){var e=[];return t.getIn([r.place,"enclosureList"]).map(function(t){e.push(t)}),r.imgArr.forEach(function(t){e.push(t)}),t=t.setIn([r.place,"enclosureList"],(0,n.fromJS)(e)).setIn([r.place,"enclosureCountUser"],e.length)}),c(e,o.DELETE_CALCULATE_UPLOAD_FJ_URL,function(){var e=[];return t.getIn([r.place,"needDeleteUrl"]).map(function(t){e.push(t)}),t.getIn([r.place,"enclosureList"]).map(function(i,n){n==r.index&&(e.push(t.getIn([r.place,"enclosureList",n]).set("beDelete",!0)),t=t.deleteIn([r.place,"enclosureList",n]))}),t=t.setIn([r.place,"needDeleteUrl"],(0,n.fromJS)(e)).setIn([r.place,"enclosureCountUser"],t.getIn([r.place,"enclosureList"]).size)}),c(e,o.GET_CAL_LABEL_FETCH,function(){return t=t.setIn([r.setPlace,"label"],(0,n.fromJS)(r.receivedData.data)).set("tagModal",!0)}),c(e,o.CHANGE_CAL_TAG_NAME,function(){return t.getIn([r.setPlace,"enclosureList"]).map(function(e,i){i==r.index&&(t=t.setIn([r.setPlace,"enclosureList",i,"label"],r.value))}),t=t.set("tagModal",!1)}),c(e,o.GET_CALCULATE_DEAL_TYPE_CATEGORY,function(){return t=t.setIn([r.temp,"dealTypeList",0,"childList"],(0,n.fromJS)(r.receivedData[0].childList))}),c(e,o.EDIT_CALCULATE_GAIN_OR_LOSS,function(){var e=r.place,i=r.diff,n=r.deletePlace;return t.setIn(e,i).deleteIn(n,i)}),c(e,o.EDIT_CALCULATE_CQZC_GAIN_OR_LOSS,function(){return t.setIn(r.place,r.diff)}),c(e,o.CLEAR_FILTER_CONDITION,function(){return t.setIn(["SfglTemp","categoryNameAll"],(0,n.fromJS)([])).setIn(["SfglTemp","categoryUuidList"],(0,n.fromJS)([])).setIn(["SfglTemp","categoryNameList"],(0,n.fromJS)([])).setIn(["SfglTemp","chooseWriteOffType"],!0)}),c(e,o.GET_PAYMANAGE_LIST,function(){var e=r.receivedData.pendingManageList,i=r.receivedData.writeOffTypeList,o=r.receivedData.writeOffType?r.receivedData.writeOffType:i.length?i[0]:t.getIn(["SfglTemp","writeOffType"]);if(t=t.setIn(["SfglTemp","detail"],(0,n.fromJS)(e)).setIn(["SfglTemp","cardPages"],r.receivedData.pages).setIn(["SfglTemp","currentCardPage"],r.receivedData.currentPage).setIn(["SfglTemp","debitTotal"],r.receivedData.debitTotal).setIn(["SfglTemp","creditTotal"],r.receivedData.creditTotal).setIn(["SfglTemp","totalNumber"],r.receivedData.totalNumber).setIn(["SfglTemp","condition"],r.condition).setIn(["SfglTemp","writeOffType"],o).setIn(["SfglTemp","beginDate"],r.begin).setIn(["SfglTemp","endDate"],r.end),r.needWriteOffTypeList&&(t=t.setIn(["SfglTemp","writeOffTypeList"],(0,n.fromJS)(i))),r.fromPage){var s=[],u=t.getIn(["views","selectItem"]).toJS();e.map(function(e,t){u.map(function(r){e.uuid===r.uuid&&s.push({index:t,item:r})})}),s.map(function(e){t=t.setIn(["SfglTemp","detail",e.index],(0,n.fromJS)(e.item))})}else t=t.setIn(["views","selectList"],(0,n.fromJS)([])).setIn(["views","indexList"],(0,n.fromJS)([])).setIn(["views","selectItem"],(0,n.fromJS)([])),t=""!==r.receivedData.writeOffType?(t=t.setIn(["SfglTemp","handlingAmount"],0)).setIn(["views","totalAmount"],(0,a.numberCalculate)(r.receivedData.debitTotal,r.receivedData.creditTotal,2,"subtract")):t.setIn(["SfglTemp","handlingAmount"],"").setIn(["views","totalAmount"],0);return t}),c(e,o.ITIT_PAYMANAGE_LIST,function(){return(t=t.setIn(["SfglTemp","detail"],(0,n.fromJS)([])).setIn(["SfglTemp","debitTotal"],0).setIn(["SfglTemp","creditTotal"],0)).setIn(["views","selectList"],(0,n.fromJS)([])).setIn(["views","indexList"],(0,n.fromJS)([])).setIn(["views","totalAmount"],0).setIn(["views","selectItem"],(0,n.fromJS)([]))}),c(e,o.INIT_WRITE_OFF_TYPE,function(){var e=t.getIn(["SfglTemp","writeOffTypeList"]);e.size&&e.get(0);return t=t.setIn(["SfglTemp","showDKModal"],!1).setIn(["SfglTemp","chooseWriteOffType"],!1)}),c(e,o.EDITRUNNING_ITEM_CHECKBOX_CHECK,function(){var e=t.getIn(["views","selectList"]),a=t.getIn(["views","selectItem"]);if(r.checked){var o=e.splice(e.findIndex(function(e){return e===r.item.get("uuid")}),1),s=a.filter(function(e){return e.get("uuid")!==r.item.get("uuid")});return t.setIn(["views","selectList"],o).setIn(["views","selectItem"],s)}var u=e.push(r.item.get("uuid")),c=a.push((0,n.fromJS)(i({},r.item.toJS(),{handleAmount:r.item.get("amount")})));return t.setIn(["views","selectList"],u).setIn(["views","selectItem"],(0,n.fromJS)(c))}),c(e,o.EDITRUNNING_ITEM_CHECKBOX_CHECK_ALL,function(){if(r.selectAll){var e=[];r.list.map(function(t){return e.push(t.get("uuid"))});var a=t.getIn(["views","selectList"]).toJS(),o=t.getIn(["views","selectItem"]);return t.setIn(["views","selectList"],(0,n.fromJS)(function(e,t){var r=new Set(e),i=new Set(t),n=[],a=!0,o=!1,s=void 0;try{for(var u,c=r[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;i.has(d)||n.push(d)}}catch(e){o=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}return n}(a,e))).setIn(["views","selectItem"],o.filter(function(t){return-1===e.indexOf(t.get("uuid"))}))}var s=r.list,u=t.getIn(["views","selectList"]).toJS(),c=t.getIn(["views","selectItem"]).toJS();return s&&s.size&&s.forEach(function(e,t){-1===u.indexOf(e.get("uuid"))&&(u.push(e.get("uuid")),c.push(i({},e.toJS(),{handleAmount:e.get("amount")})))}),t.setIn(["views","selectList"],(0,n.fromJS)(u)).setIn(["views","selectItem"],(0,n.fromJS)(c))}),c(e,o.COMMON_CHARGE_ITEM_CHECKBOX_SELECT,function(){var e=t.getIn(["flags","selectList"]),i=t.getIn(["flags","selectItem"]);if(r.checked){var a=e.splice(e.findIndex(function(e){return e===r.uuid}),1),o=i.splice(e.findIndex(function(e){return e.uuid===r.uuid}),1);return t.setIn(["flags","selectList"],a).setIn(["flags","selectItem"],(0,n.fromJS)(o))}var s=e.push(r.uuid),u=i.push((0,n.fromJS)({uuid:r.uuid,name:r.name,code:r.code}));return t.setIn(["flags","selectList"],s).setIn(["flags","selectItem"],(0,n.fromJS)(u))}),c(e,o.SAVE_AND_NEW_COMMON_CHARGE,function(){if(r.saveAndNew){var e=d.get("CommonChargeTemp");return t.set("CommonChargeTemp",e).set("enclosureList",(0,n.fromJS)([])).set("label",(0,n.fromJS)([])).set("needDeleteUrl",(0,n.fromJS)([]))}return"insert"===r.insertOrModify&&(t=t.setIn(["commonChargeTemp","oriUuid"],r.oriUuid).setIn(["commonChargeTemp","jrNumber"],r.jrNumber)),t}),c(e,o.GET_CANUSE_WAREHOUSE_CARD_LIST,function(){return t=t.setIn([r.temp,"wareHouseCardList"],(0,n.fromJS)(r.receivedData)).setIn([r.temp,"canUseWarehouse"],(0,n.fromJS)(r.canUseWarehouse))}),c(e,o.CHANGE_CANUSE_STOCK_CARD_LIST,function(){return r.cardPageObj&&(t=t.setIn(["commonCardObj","cardPageObj"],(0,n.fromJS)(r.cardPageObj))),t=t.setIn([r.temp,"allStockCardList"],(0,n.fromJS)(r.receivedData)).setIn([r.temp,"canUseWarehouse"],r.canUseWarehouse).setIn(["commonCardObj","thingsList"],(0,n.fromJS)(r.receivedData))}),c(e,o.CHANGE_CANUSE_WAREHOUSE_CARD_LIST,function(){var e=t.getIn(["StockTemp","chooseWareHouseCardList"]),i=-1;return e.map(function(e,t){e.get("warehouseStatus")===r.warehouseStatus&&(i=t)}),t=t.setIn(["StockTemp","chooseWareHouseCardList",i,"cardUuid"],r.uuid).setIn(["StockTemp","chooseWareHouseCardList",i,"name"],r.name)}),c(e,o.CHANGE_ITEM_CHECKBOX_CHECKED,function(){var e=t.getIn(["commonCardObj","selectList"]),a=t.getIn(["commonCardObj","selectItem"]),o=r.item,s=r.isAssembly?o.productUuid:o.cardUuid?o.cardUuid:o.uuid;if(!r.checked&&-1===e.findIndex(function(e){return e===s})){var u=o.materialList?o.materialList:[],c=u.map(function(e){var t=1;return e.unitList&&e.unitList.map(function(r){r.uuid===e.unitUuid&&(t=r.basicUnitQuantity?r.basicUnitQuantity:1)}),i({},e,{basicUnitQuantity:t})}),d=e.push(s),m=a.push((0,n.fromJS)(i({},o,{index:r.index,uuid:s,allUnit:o.unit?o.unit:"",unitUuid:o.unitUuid?o.unitUuid:o.unit?o.unit.unitList.length?"":o.unit.uuid?o.unit.uuid:"":"",unitName:o.unitName?o.unitName:o.unit?o.unit.unitList.length?"":o.unit.name?o.unit.name:"":"",materialList:c,oriMaterialList:c||[],quantity:o.quantity?o.quantity:"",afterQuantity:o.afterQuantity?o.afterQuantity:""})));return t.setIn(["commonCardObj","selectList"],d).setIn(["commonCardObj","selectItem"],(0,n.fromJS)(m))}if(r.checked){var l=e.splice(e.findIndex(function(e){return e===s}),1),p=a.splice(e.findIndex(function(e){return e===s}),1);return t.setIn(["commonCardObj","selectList"],l).setIn(["commonCardObj","selectItem"],(0,n.fromJS)(p))}return t}),c(e,o.SELECT_EDIT_CBJZ_ITEM_ALL,function(){return t.setIn(["CostTransferTemp","uuidList"],(0,n.fromJS)(r.uuidList)).setIn(["CostTransferTemp","selectStockItem"],(0,n.fromJS)(r.selectStockItem)).setIn(["views","selectList"],(0,n.fromJS)(r.selectList)).setIn(["views","selectItem"],r.newSelectItem)}),c(e,o.GET_COST_CARRYOVER_CANUSE_WAREHOUSE_CARD,function(){return t.setIn(["CostTransferTemp","stockCardList",r.index,"warehouseCardName"],r.changeWareHouseCard.wareHouseName).setIn(["CostTransferTemp","stockCardList",r.index,"warehouseCardUuid"],r.changeWareHouseCard.uuid).setIn(["CostTransferTemp","stockCardList",r.index,"uniformUuid"],r.changeWareHouseCard.uniformUuid)}),c(e,o.CLEAR_BALANCETEMP,function(){if("STATE_CHYE_CH"===r.oriState){t=t.setIn(["BalanceTemp","wareHouseList"],(0,n.fromJS)([{canUse:!0,code:"",isUniform:!0,name:"",uniformUuid:"",cardUuid:""}]))}else t=t.setIn(["BalanceTemp","wareHouseList"],(0,n.fromJS)([]));return t.setIn(["BalanceTemp","stockCardList"],(0,n.fromJS)([{}])).setIn(["BalanceTemp","chooseWareHouseCard"],(0,n.fromJS)({cardUuid:"",name:""})).setIn(["BalanceTemp","chooseStockCard"],(0,n.fromJS)({cardUuid:"",name:"",isOpenedQuantity:!1,isUniformPrice:!1}))}),c(e,o.GET_MESSAGE_OF_CATEGORY,function(){return t.setIn(["views","categoryMessage"],(0,n.fromJS)(r.message))}),c(e,o.AFTER_GET_JXSE_STOCK_LIST,function(){var e=t.getIn(["TaxTransferTemp","uuidList"]);if(t=t.setIn([r.temp,r.ListName],(0,n.fromJS)(r.receivedData.result)),"TaxTransferTemp"===r.temp){var i=[],a=[];r.receivedData.result.map(function(t){e.indexOf(t.jrJvUuid)>-1&&(i.push(t.jrJvUuid),a.push({uuid:t.stockCardUuid,amount:t.amount,onlyId:t.jrJvUuid,quantity:t.quantity,unitCardName:t.unitCardName,number:t.number,quantityAmount:t.quantityAmount}))}),t=t.setIn([r.temp,"uuidList"],(0,n.fromJS)(i)).setIn([r.temp,"stockCardUuidList"],(0,n.fromJS)(a))}else t=t.setIn([r.temp,"uuidList"],(0,n.fromJS)([])).setIn([r.temp,"stockCardUuidList"],(0,n.fromJS)([]));return t}),c(e,o.AFTER_CALCULATE_INVENTORY_IMPORT,function(){if(t=r.receivedData.data?t.setIn(["views","iframeload"],!0).setIn(["views","acmessage"],(0,n.fromJS)(r.receivedData.message)).setIn(["views","errorList"],(0,n.fromJS)(r.receivedData.data.errorList)).setIn(["views","importKey"],r.receivedData.data.importKey).setIn(["views","importList"],(0,n.fromJS)(r.receivedData.data.importList)):t.setIn(["views","iframeload"],!0).setIn(["views","showMessageMask"],!1).setIn(["views","acmessage"],(0,n.fromJS)(r.receivedData.message)),"countStockCardList"===r.stockTemp){if(r.receivedData.data.stockList&&r.receivedData.data.stockList.length){var e=[];r.receivedData.data.stockList.forEach(function(t){t.financialInfo&&t.financialInfo.openSerial&&!t.serialList&&(t.quantity=0);var n="BalanceTemp"===r.temp?(0,a.numberCalculate)(t.quantity,t.referenceQuantity,4,"subtract",4):(0,a.numberCalculate)(t.referenceQuantity,t.quantity,4,"subtract",4);e.push(i({},t,{afterQuantity:t.quantity,quantity:n,price:t.referencePrice,amount:(0,a.numberCalculate)(t.referencePrice,n,4,"multiply"),cardUuid:t.inventoryUuid,warehouseCardUuid:t.warehouseUuid,warehouseCardName:t.warehouseName,warehouseCardCode:t.warehouseCode,expirationDate:t.expirationDateString,productionDate:t.productionDateString}))}),t=t.setIn([r.temp,r.stockTemp],(0,n.fromJS)(e))}}else if("assemblySheet"===r.stockTemp){var o=t.getIn(["StockBuildUpTemp","allStockCardList"]),s=[];r.receivedData.data.importList.forEach(function(e){var t=0;s.push(i({},e,{productUuid:e.inventoryUuid,curQuantity:e.quantity,warehouseCardUuid:e.warehouseUuid,warehouseCardName:e.warehouseName,warehouseCardCode:e.warehouseCode,expirationDate:e.expirationDateString,productionDate:e.productionDateString,materialList:e.cardDetailList.map(function(e){e.financialInfo&&e.financialInfo.openSerial&&!e.serialList&&(e.quantity=0);var r=o.find(function(t){return t.get("uuid")===e.inventoryUuid})||(0,n.fromJS)([]),s=0,u=r.get("unit"),c=u.get("unitList")||(0,n.fromJS)([]);if(u)if(e.unitUuid===u.get("uuid"))s=e.referencePrice;else{var d=c&&c.find(function(t){return t.get("uuid")===e.unitUuid}),m=d.get("basicUnitQuantity")||1;s=(0,a.numberCalculate)(e.referencePrice,m,4,"multiply",4)}var l=s>0?s:"";return t=(0,a.numberCalculate)(t,(0,a.numberCalculate)(l,e.quantity,4,"multiply")),i({},e,{quantity:e.quantity,price:l,amount:s>0?(0,a.numberCalculate)(s,e.quantity,4,"multiply"):"",isOpenQuantity:e.isOpenedQuantity,materialUuid:e.cardUuid,cardUuid:e.inventoryUuid,warehouseCardUuid:e.warehouseUuid,warehouseCardName:e.warehouseName,warehouseCardCode:e.warehouseCode,expirationDate:e.expirationDateString,productionDate:e.productionDateString})}),amount:t,price:(0,a.numberCalculate)(t,e.quantity,4,"divide",4)}))}),t=t.setIn([r.temp,r.stockTemp],(0,n.fromJS)(s))}else r.receivedData.data.importList&&r.receivedData.data.importList.length&&(t=t.setIn([r.temp,r.stockTemp],(0,n.fromJS)(r.receivedData.data.importList.map(function(e){return e.financialInfo&&e.financialInfo.openSerial&&!e.serialList&&(e.quantity=0),e.warehouseCardUuid=e.warehouseCardUuid?e.warehouseCardUuid:e.warehouseUuid?e.warehouseUuid:"",e.warehouseCardName=e.warehouseCardName?e.warehouseCardName:e.warehouseName?e.warehouseName:"",e.warehouseCardCode=e.warehouseCardCode?e.warehouseCardCode:e.warehouseCode?e.warehouseCode:"",e.cardUuid=e.inventoryUuid,e.uuid=e.inventoryUuid,e.expirationDate=e.expirationDateString,e.productionDate=e.productionDateString,e}))).setIn([r.temp,"carryoverCardList"],(0,n.fromJS)(r.receivedData.data.importList.map(function(e){return e.financialInfo&&e.financialInfo.openSerial&&!e.serialList&&(e.quantity=0),e.amount="",e.warehouseCardUuid=e.warehouseCardUuid?e.warehouseCardUuid:e.warehouseUuid?e.warehouseUuid:"",e.warehouseCardName=e.warehouseCardName?e.warehouseCardName:e.warehouseName?e.warehouseName:"",e.warehouseCardCode=e.warehouseCardCode?e.warehouseCardCode:e.warehouseCode?e.warehouseCode:"",e.cardUuid=e.inventoryUuid,e.uuid=e.inventoryUuid,e.expirationDate=e.expirationDateString,e.productionDate=e.productionDateString,e}))));return t}),c(e,o.SAVE_CALCULATE_COUNT,function(){return r.needStockCardList&&(t=t.setIn([r.temp,"stockCardList"],(0,n.fromJS)(r.stockCardList))),t=t.setIn([r.temp,"countStockCardList"],(0,n.fromJS)([])).setIn([r.temp,"chooseWareHouseCard"],(0,n.fromJS)(r.chooseWareHouseCard)).setIn(["commonCardObj","selectList"],(0,n.fromJS)([])).setIn(["commonCardObj","selectItem"],(0,n.fromJS)([])).setIn(["views","countInsert"],!0).setIn(["views","pdfInsertFirst"],!0)}),c(e,o.GET_BALANCE_UNIFORM_PRICE,function(){var e=r.receivedData;t=t.setIn([r.temp,r.stockCardTemp,r.selectIndex,"price"],e.price);var o=[];return e.priceList&&e.priceList.length&&e.priceList.map(function(t){var r=t.quantity,n=t.amount,s=(0,a.numberCalculate)((0,a.numberCalculate)(e.price,r,4,"multiply",4),n,4,"subtract");o.push(i({},t,{amount:s,oldAmount:t.amount}))}),t=t.setIn([r.temp,r.stockCardTemp,r.selectIndex,"childList"],o.length?(0,n.fromJS)(o):(0,n.fromJS)([]))}),c(e,o.GET_CANUSE_WAREHOUSE_CARD_CHILD_LIST,function(){var e=t.getIn([r.temp,r.stockCardTemp,r.selectIndex,"price"]),o=[];return r.receivedData.map(function(t){var r=t.quantity,n=t.amount,s=(0,a.numberCalculate)((0,a.numberCalculate)(e,r,4,"multiply",4),n,4,"subtract");o.push(i({},t,{amount:s,oldAmount:t.amount}))}),t=t.setIn([r.temp,r.stockCardTemp,r.selectIndex,"childList"],(0,n.fromJS)(o))}),c(e,o.GET_CANUSE_WAREHOUSE_CARD_CHILD_LIST_FROM_UNIT,function(){var e=r.receivedData,i=t.getIn([r.temp,r.stockCardTemp]),a=[];return e&&e.length&&e.map(function(e){return a.push(e.inventoryUuid)}),i&&i.size&&i.map(function(i,o){if(a.indexOf(i.get("cardUuid"))>-1){var s=a.findIndex(function(e){return e===i.get("cardUuid")});t=t.setIn([r.temp,r.stockCardTemp,o,"childList"],(0,n.fromJS)(e[s].childList)).setIn([r.temp,r.stockCardTemp,o,"price"],(0,n.fromJS)(e[s].price))}}),t}),c(e,o.SELECT_EDIT_CBJZ_ITEM,function(){return t=(t=t.setIn(["views","selectList"],r.newShowLowerList).setIn(["views","selectItem"],r.newSelectItem).setIn(["CostTransferTemp","selectStockItem"],(0,n.fromJS)(r.selectStockItem)).setIn(["CostTransferTemp","selectStockUuidList"],(0,n.fromJS)(r.selectStockUuidList))).setIn(["CostTransferTemp","uuidList"],r.uuidList)}),c(e,o.SELECT_EDIT_CBJZ_ITEM_ALL,function(){t.getIn(["CostTransferTemp","stockCardList"]);var e=t.getIn(["CostTransferTemp","costTransferList"]),i=t.getIn(["CostTransferTemp","uuidList"]).toJS(),o=t.getIn(["CostTransferTemp","stockCardUuidList"]),s=[];if(o.map(function(e){return s.push(e.get("onlyId"))}),r.selectAll){var u=t.getIn(["views","selectList"]).toJS(),c=t.getIn(["views","selectItem"]);o=o?o.filter(function(e){if(-1===i.indexOf(e.get("onlyId")))return e}):(0,n.fromJS)([]);var d=[];e.map(function(e){return d.push(e.get("jrJvUuid"))});var m=c.filter(function(e){return-1===i.indexOf(e.get("jrJvUuid"))}),l=[],p=[];return m&&m.size&&m.map(function(e){if(l.indexOf(e.get("stockCardUuid"))>-1){var t=p.findIndex(function(t){return t.cardUuid===e.get("stockCardUuid")});p[t].quantity=(0,a.numberCalculate)(p[t].quantity,e.get("quantity"))}else l.push(e.get("stockCardUuid")),p.push({cardUuid:e.get("stockCardUuid"),quantity:e.get("quantity"),name:e.get("stockCardName"),code:e.get("stockCardCode"),amount:e.get("amount")})}),t.setIn(["CostTransferTemp","uuidList"],(0,n.fromJS)([])).setIn(["CostTransferTemp","selectStockItem"],(0,n.fromJS)(p)).setIn(["views","selectList"],(0,n.fromJS)(function(e,t){var r=new Set(e),i=new Set(t),n=[],a=!0,o=!1,s=void 0;try{for(var u,c=r[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;i.has(d)||n.push(d)}}catch(e){o=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}return n}(u,i))).setIn(["views","selectItem"],m)}var f=[],T=o.size?o.toJS():[];e.forEach(function(e){f.push(e.get("jrJvUuid")),-1===s.indexOf(e.get("onlyId"))&&T.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid"),quantity:e.get("quantity"),unitCardName:e.get("unitCardName"),number:e.get("number"),quantityAmount:e.get("quantityAmount"),storeNumber:e.get("storeNumber")})});var I=t.getIn(["views","selectList"]).toJS(),g=t.getIn(["views","selectItem"]).toJS();e&&e.size&&e.forEach(function(e,t){-1===I.indexOf(e.get("jrJvUuid"))&&(I.push(e.get("jrJvUuid")),g.push(e.toJS()))});var C=[],S=[];return g&&g.length&&g.map(function(e){if(C.indexOf(e.stockCardUuid)>-1){var t=S.findIndex(function(t){return t.cardUuid===e.stockCardUuid});S[t].quantity=(0,a.numberCalculate)(S[t].quantity,e.quantity)}else C.push(e.stockCardUuid),S.push({cardUuid:e.stockCardUuid,quantity:e.quantity,name:e.stockCardName,code:e.stockCardCode,amount:e.amount})}),t.setIn(["CostTransferTemp","uuidList"],(0,n.fromJS)(f)).setIn(["CostTransferTemp","stockCardUuidList"],(0,n.fromJS)(T)).setIn(["views","selectList"],(0,n.fromJS)(I)).setIn(["views","selectItem"],(0,n.fromJS)(g)).setIn(["CostTransferTemp","selectStockItem"],(0,n.fromJS)(S))}),c(e,o.CALCULATE_FROM_SEARCH_JUMP_TO_JZCB,function(){return t.setIn(["views","paymentTypeStr"],"存货核算_存货成本结转")}),c(e,o.CHANGE_STOCKCARD_REFERENCE_PRICE_QUNATITY,function(){r.stockCardList;var e=r.receivedData,a=t.getIn([r.temp+"Temp",r.stockTemp]).toJS(),o=[];return e.map(function(t,r){o.push(i({},a[r],{referencePrice:e[r].price,referenceQuantity:e[r].quantity}))}),t=t.setIn([r.temp+"Temp",r.stockTemp,r.index],(0,n.fromJS)(o))}),c(e,o.JZJZSY_CHANGE_FILTER_MODAL_CHECKED,function(){var e=t.getIn(["JzjzsyTemp","curSelectProjectUuid"]),i=e;return r.isAll?(r.allList.map(function(e,t){i=r.checked?i.splice(i.findIndex(function(t){return t===e.get("cardUuid")}),1):-1===i.indexOf(e.get("cardUuid"))?i.push(e.get("cardUuid")):i}),t=t.setIn(["JzjzsyTemp","curSelectProjectUuid"],i)):(i=r.checked?i.splice(e.findIndex(function(e){return e===r.uuid}),1):-1===i.indexOf(r.uuid)?e.push(r.uuid):e,t.setIn(["JzjzsyTemp","curSelectProjectUuid"],i))}),e)[r.type]||function(){return t})()};var n=r(18),a=r(22),o=u(r(183)),s=u(r(27));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=(0,n.fromJS)({views:{selectI:0,dealType:"",projectList:[],projectRange:[],propertyCostList:[],dealCategory:[],beProject:!1,costStockList:[],selectList:[],indexList:[],totalAmount:0,SwitchUuidList:[],oriUuid:"",modalName:"",selectItem:[],chooseNumber:"-1",encodeType:"",saveWay:!1,jrIndex:"",categoryMessage:{beProject:!1,usedProject:!1,propertyCostList:[]},paymentTypeStr:"内部转账",importList:[],errorList:[],stockTitleName:"存货",warehouseTreeList:[],countInsert:!0,pdfInsertFirst:!0,isCount:!1,singleUrl:"",hasNumber:!0,isProduct:!1,isAssembly:!1},CostTransferTemp:{uuidList:[],dealTypeName:"",stockCardUuidList:[],categoryUuid:"",dealTypeUuid:"",costStockList:[],carryoverCategory:[],oriState:"STATE_YYSR_XS",oriAbstract:"销售存货结转成本",carryoverAmount:"",categoryName:"",costTransferList:[],canModifyList:[],stockList:[],stockCardList:[{}],categoryNameAll:[],cardUuid:"",runningCategory:[{childList:[]}],beProject:!1,usedProject:!0,projectCard:[{cardUuid:"",name:"",code:""}],canUseWarehouse:!1,propertyCost:"",wareHouseCardList:[],cardPages:1,currentCardPage:1,modifycurrentPage:1,pageSize:20,totalNumber:1,categoryUuidList:[],storeUuidList:[],condition:"",warehouseOptionList:[],wareHouseNameAll:[],wareHouseNameList:[],stockNameAll:[],stockNameList:[],stockUuidList:[],countStockCardList:[],chooseWareHouseCard:{cardUuid:"",name:"全部",isUniform:!1},oldChooseWareHouseCard:[],countWarehouseList:[],selectStockItem:[],selectStockUuidList:[]},InvoiceAuthTemp:{oriUuid:"",uuidList:[],amount:"",billAuthType:"BILL_AUTH_TYPE_CG",oriAbstract:"增值税专用发票认证",oriState:"STATE_FPRZ_CG",categoryUuid:"",invoiceAuthList:[]},InvoicingTemp:{oriUuid:"",uuidList:[],amount:"",billMakeOutType:"BILL_MAKE_OUT_TYPE_XS",oriAbstract:"收入开具发票",oriState:"STATE_KJFP_XS",categoryUuid:"",invoicingList:[],isInvoicingAmount:!0},TransferOutTemp:{uuidList:[],turnOutBusinessUuid:"",oriUuid:"",oriState:"STATE_ZCWJZZS",oriAbstract:"转出未交增值税",handleMonth:"",transferOutObj:{jrJvVatDtoList:[],inputAmount:"",inputCount:"",outputAmount:"",outputCount:""}},InternalTransferTemp:{oriUuid:"",oriState:"STATE_ZZ",oriAbstract:"内部转账",amount:"",categoryType:"",categoryUuid:"",fromAccountUuid:"",toAccountUuid:"",accountChildList:[],poundage:{needPoundage:!1},poundageCurrentCardList:[],poundageProjectCardList:[],accountProjectRange:[],accountContactsRange:[],accountContactsRangeList:[],accountProjectList:[],chooseFirstWay:!0,poundageRate:""},DepreciationTemp:{oriUuid:"",oriState:"STATE_CQZC_ZJTX",oriAbstract:"资产折旧摊销",amount:"",categoryType:"",categoryUuid:"",assetType:"XZ_ZJTX",dealTypeList:[{childList:[]}],usedProject:!0,projectCard:{name:"",code:"",cardUuid:"",amount:""},propertyCost:""},CommonChargeTemp:{projectCardList:[],paymentList:[],oriAbstract:"项目分摊",oriState:"STATE_GGFYFT",projectList:[],propertyCostName:""},CqzcTemp:{uuidList:[],projectRange:[],projectList:[],dealTypeList:[{childList:[]}],assets:{depreciationAmount:"",originalAssetsAmount:""},projectCard:[{cardUuid:"",name:"",code:""}],oriAbstract:"长期资产处置损益",oriState:"STATE_CQZC_JZSY",businessList:[],usedProject:!0,categoryName:"",diffAmount:""},JzjzsyTemp:{oriState:"STATE_XMJZ_XMJQ",amount:"",oriAbstract:"结转本期损益",pendingProfitAndLossCarryoverList:[],cardPages:1,currentPage:1,pageSize:20,chooseProjectCard:[],curSelectProjectUuid:[],projectCardList:[],chooseJrCategoryCard:[],curSelectJrCategoryUuid:[],jrCategoryList:[],modalName:""},SfglTemp:{isModeRunning:!1,paymentList:[],detail:[],debitTotal:0,creditTotal:0,runningIndex:0,categoryList:[{uuid:"",name:"",childList:[]}],handlingAmount:"",condition:"",managerCategoryList:[],oriUuid:"",oriAbstract:"核销账款",contactsCardRange:{name:"",code:""},stockCardList:{name:"",code:""},categoryUuid:"",categoryName:"",categoryUuidList:[],categoryNameList:[""],categoryNameAll:[],cardUuidList:[],cardNameList:[""],cardNameAll:[],handleTypeCard:!1,cardUuid:"",usedCard:{code:"",name:""},beMoed:!1,moedAmount:"",cardPages:1,currentCardPage:1,modifycurrentPage:1,pageSize:20,totalNumber:1,needUsedPoundage:!1,poundageCurrentCardList:[],poundageProjectCardList:[],accountProjectRange:[],accountContactsRange:[],accountContactsRangeList:[],accountProjectList:[],poundage:{needPoundage:!1},writeOffType:"",writeOffTypeList:[],showDKModal:!1,chooseWriteOffType:!1,unAutomatic:!1,oriState:"",oldSelectItem:[],beginDate:"",endDate:"",usedAccounts:!1,accounts:[{},{}]},StockTemp:{oriState:"STATE_CHDB",projectCardList:[],paymentList:[],oriAbstract:"存货调拨",stockCardList:[{}],stockCardUuidList:[],wareHouseCardList:[],chooseWareHouseCardList:[{cardUuid:"",name:"",warehouseStatus:"WAREHOUSE_STATUS_FROM"},{cardUuid:"",name:"",warehouseStatus:"WAREHOUSE_STATUS_TO"}],allStockCardList:[]},BalanceTemp:{oriState:"STATE_CHYE_CK",projectCardList:[],paymentList:[],oriAbstract:"存货价值调整",canUseWarehouse:!1,stockCardList:[{}],wareHouseList:[],oriStockList:[],oriWareHouseList:[],stockCardUuidList:[],wareHouseCardUuidList:[],wareHouseCardList:[],chooseWareHouseCard:{cardUuid:"",name:"全部",isUniform:!1},chooseStockCard:{cardUuid:"",name:"",isOpenedQuantity:!1,isUniformPrice:!1},allStockCardList:[],oriStockCardList:[],oriWarehouseCardList:[],countStockCardList:[],warehouseSelectedKeys:[],countWarehouseList:[]},TaxTransferTemp:{uuidList:[],dealTypeName:"",propertyCarryover:"",stockCardUuidList:[],categoryUuid:"",oriState:"STATE_JXSEZC_FS",oriDate:(0,a.formatDate)(),oriAbstract:"进项税额转出",carryoverAmount:"",categoryName:"",taxTransferList:[],canModifyList:[],stockList:[],stockCardList:[{code:"",name:"",amount:"",cardUuid:"",warehouseCardUuid:""}],cardUuid:"",runningCategory:[{childList:[]}],wareHouseCardList:[],projectCard:{},usedProject:!0},StockBuildUpTemp:{oriDate:(0,a.formatDate)().slice(0,10),oriState:"STATE_CHZZ_ZZCX",projectCardList:[],paymentList:[],oriAbstract:"存货组装",stockCardList:[{}],stockCardOtherList:[{}],wareHouseCardList:[{}],stockCardUuidList:[],allStockCardList:[],allWareHouseCardList:[],oriStockCardList:[],oriStockCardOtherList:[],curItemIsAvailable:!0,assemblySheet:[],assemblyNumber:""},StockIntoProjectTemp:{oriState:"STATE_CHTRXM",projectCardList:[],paymentList:[],oriAbstract:"存货投入使用",stockCardList:[{}],stockCardUuidList:[],wareHouseCardList:[],allStockCardList:[],allWareHouseCardList:[],projectCard:{cardUuid:"",name:"",code:"",projectProperty:""},stockRange:[],categoryTypeObj:{}},ProjectCarryoverTemp:{oriState:"STATE_XMJZ_XMJQ",projectCardList:[],paymentList:[],oriAbstract:"项目结清",stockCardList:[{}],stockCardUuidList:[],wareHouseCardList:[],allStockCardList:[],allWareHouseCardList:[],projectCard:{cardUuid:"",name:"",code:""},carryoverList:[],stockRange:[],categoryTypeObj:{},allHappenAmount:"",allStoreAmount:"",cardPages:1,currentCardPage:1,modifycurrentPage:1,pageSize:20,totalNumber:1},commonCardObj:{memberList:[],thingsList:[],selectItem:[],selectList:[],selectedKeys:["all"+s.TREE_JOIN_STR+"1"],selectThingsList:[],showSingleModal:!1,selectI:"",modalName:"",cardPageObj:{pages:1,currentPage:1,total:1}},vcKey:0})},1765:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeExchangeJz=t.getCurrencyListFetch=t.changeIcon=t.openSobFetch=t.closeSobFetch=t.getBalanceStatus=void 0;var i=m(r(37));r(38);var n=r(22),a=d(r(1766)),o=m(r(31)),s=d(r(30)),u=d(r(172)),c=d(r(60));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}t.getBalanceStatus=function(){return function(e){(0,o.default)("getperiod","GET","",function(t){(0,n.showMessage)(t)&&(t.data.lastyear?e({type:a.GET_PERIOD_FETCH,receivedData:t}):e({type:a.GET_PERIOD_FETCH,receivedData:{code:t.data.lastyear?0:17e3,message:t.data.lastyear?"成功":"当前无凭证",data:t.data}}))})}},t.closeSobFetch=function(e,t,r,d){return function(m){var p=[];r.map(function(e,t){if(""==e.get("newExchange")&&(r=r.setIn([t,"newExchange"],r.getIn([t,"exchange"]))),""!=e.get("newExchange")&&Number(e.get("newExchange"))<=0){p.push(e.get("fcNumber")+"编码所修改的汇率不能小于等于0")}});var f=function(e,t){var r=e,i=t++;t>12&&(i-=12,r++);var n=new Date(r,i,1);return new Date(n.getTime()-864e5).getDate()}(e,t),T=e+"-"+t+"-"+f;if(p.length)return s.Alert(p.reduce(function(e,t){return e+","+t}));s.Confirm({message:"本操作将结账"+e+"年第"+t+"期",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(p){1===p.buttonIndex&&(m({type:a.SWITCH_LOADING_MASK}),(0,o.default)("closesob","POST",JSON.stringify({year:e,month:t,fcList:d?[]:r}),function(p){m({type:a.SWITCH_LOADING_MASK}),p.message.indexOf("存在流水未结转货物成本")>-1?s.Confirm({message:"结账异常，该账期存在流水未结转货物成本",title:"提示",buttonLabels:["取消","前往结转"],onSuccess:function(e){1===e.buttonIndex&&(m(u.changeLrAccountCommonString("ori","oriDate",T)),m({type:a.CALCULATE_FROM_SEARCH_JUMP_TO_JZCB}),m({type:a.CALCULATE_FROM_SEARCH_JUMP_TO_EDIT,pageType:"LB_JZCB",PageTab:"payment",insertOrModify:"insert",needSendRequest:!0}),m(c.addPageTabPane("EditPanes","EditRunning","EditRunning","录入流水")),m(c.addHomeTabpane("Edit","EditRunning","录入流水")))}}):(0,n.showMessage)(p)&&(p.data.message?s.Confirm({message:p.data.message,title:"提示",buttonLabels:["取消","确定"],onSuccess:function(i){1===i.buttonIndex&&(m({type:a.SWITCH_LOADING_MASK}),(0,o.default)("closesob","POST",JSON.stringify({year:e,month:t,needCheckVcIndex:!1,fcList:d?[]:r}),function(e){m({type:a.SWITCH_LOADING_MASK}),e.message.indexOf("存在流水未结转货物成本")>-1?s.Confirm({message:"结账异常，该账期存在流水未结转货物成本",title:"提示",buttonLabels:["取消","前往结转"],onSuccess:function(e){1===e.buttonIndex&&(m(u.changeLrAccountCommonString("ori","oriDate",T)),m({type:a.CALCULATE_FROM_SEARCH_JUMP_TO_JZCB}),m({type:a.CALCULATE_FROM_SEARCH_JUMP_TO_EDIT,pageType:"LB_JZCB",PageTab:"payment",insertOrModify:"insert",needSendRequest:!0}),m(c.addPageTabPane("EditPanes","EditRunning","EditRunning","录入流水")),m(c.addHomeTabpane("Edit","EditRunning","录入流水")))}}):(0,n.showMessage)(e,"show")&&(m({type:a.CLOSE_OR_OPEN_PERIED_FETCH,receivedData:e}),m(l()))}))}}):(i.default.success("操作成功！",1),m({type:a.CLOSE_OR_OPEN_PERIED_FETCH,receivedData:p}),m(l())))}))}})}},t.openSobFetch=function(e,t){return function(r){s.Confirm({message:"本操作将反结账"+e+"年第"+t+"期",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(i){1===i.buttonIndex&&(r({type:a.SWITCH_LOADING_MASK}),(0,o.default)("opensob","POST",JSON.stringify({year:e,month:t}),function(e){(0,n.showMessage)(e,"show")&&r({type:a.CLOSE_OR_OPEN_PERIED_FETCH,receivedData:e}),r({type:a.SWITCH_LOADING_MASK})}))}})}},t.changeIcon=function(){return{type:a.CHANGE_ICON}};var l=t.getCurrencyListFetch=function(){return function(e){(0,o.default)("getFCList","GET","",function(t){(0,n.showMessage)(t)&&e({type:a.GET_CURRENCY_LIST_FETCH_JZ,receivedData:t.data})})}};t.changeExchangeJz=function(e,t){return{type:a.CHANGE_EXCHANNGE_JZ,idx:e,value:t}}},1766:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_JZ="INIT_JZ",t.CHANGE_ICON="CHANGE_ICON",t.GET_CURRENCY_LIST_FETCH_JZ="GET_CURRENCY_LIST_FETCH_JZ",t.CHANGE_EXCHANNGE_JZ="CHANGE_EXCHANNGE_JZ",t.CLOSE_OR_OPEN_PERIED_FETCH="CLOSE_OR_OPEN_PERIED_FETCH",t.CALCULATE_FROM_SEARCH_JUMP_TO_EDIT="CALCULATE_FROM_SEARCH_JUMP_TO_EDIT",t.CALCULATE_FROM_SEARCH_JUMP_TO_JZCB="CALCULATE_FROM_SEARCH_JUMP_TO_JZCB",t.GET_PERIOD_FETCH="GET_PERIOD_FETCH"},2675:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,n=C(r(14)),a=C(r(61)),o=C(r(32)),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();r(78),r(79),r(51);var u=C(r(1)),c=(r(18),r(56)),d=g(r(1765)),m=g(r(43)),l=r(127),p=C(r(1224)),f=C(r(1226)),T=C(r(2676)),I=r(22);function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}r(2677);var S=(0,c.connect)(function(e){return e})(i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),s(t,[{key:"componentDidMount",value:function(){this.props.jzState.getIn(["flags","circleStatus"])||this.props.dispatch(d.getCurrencyListFetch())}},{key:"shouldComponentUpdate",value:function(e){return this.props.allState!=e.allState||this.props.jzState!=e.jzState||this.props.homeState!=e.homeState}},{key:"render",value:function(){var e=this.props,t=e.dispatch,r=e.allState,i=e.jzState,s=e.homeState,c=s.getIn(["data","userInfo","pageController","MANAGER","preDetailList","CLOSE_SOB","detailList"]),g=s.getIn(["data","userInfo","sobInfo","moduleInfo"]),C=r.get("period"),S=C.get("openedyear"),L=C.get("openedmonth"),v=C.get("closedyear"),y=C.get("closedmonth"),_=S||v,U=L||y,h=r.get("aclist"),O=i.getIn(["flags","circleStatus"]),A=i.get("fcList"),E=h.filter(function(e){return 560303==e.get("acid")});return u.default.createElement(p.default,{type:"config-one"},u.default.createElement(f.default,null,u.default.createElement("div",{className:"flex-title-left"},u.default.createElement("span",{className:"jz-title-date"},u.default.createElement("span",null,_,"年",U,"月"))),u.default.createElement("div",{className:"flex-title-right"},u.default.createElement(a.default,{placement:"bottom",title:(0,I.judgePermission)(c.get("OPENING")).disabled?"当前角色无该权限":v?"":"没有可反结账的账期"},u.default.createElement(o.default,{disabled:(0,I.judgePermission)(c.get("OPENING")).disabled||!v,className:"title-right three-word-btn",type:"ghost",onClick:function(){return t(d.openSobFetch(v,y))}},"反结账")),u.default.createElement(a.default,{placement:"bottom",title:(0,I.judgePermission)(c.get("CLOSING")).disabled?"当前角色无该权限":S?"":"没有可结账的账期"},u.default.createElement(o.default,{disabled:(0,I.judgePermission)(c.get("CLOSING")).disabled||!S,className:"title-right",type:"ghost",onClick:function(){return t(d.closeSobFetch(S,L,A,O))}},"结账")),u.default.createElement(o.default,{className:"title-right",type:"ghost",onClick:function(){t(d.getBalanceStatus()),O||t(d.getCurrencyListFetch()),t(m.closeConfigPage("结账"))}},"刷新"))),u.default.createElement("div",{className:"jzlayer"},u.default.createElement("div",{className:"jz-list"},u.default.createElement("div",{className:"jz-list-left"},"利润结转至:"),u.default.createElement("div",{className:"jz-list-right"},"3103_本年利润")),u.default.createElement("div",{className:"jz-list"},u.default.createElement("div",{className:"jz-list-left"},"全年利润结转至:"),u.default.createElement("div",{className:"jz-list-right"},"310405_未分配利润"))),u.default.createElement("ul",{className:"uses-tip jz-uses-tip"},u.default.createElement("li",null,"结账将自动生成收益凭证及损失凭证；"),u.default.createElement("li",null,"年末结账，将自动将 3103_本年利润 结转至 310405_未分配利润。"),u.default.createElement("li",{className:"uses-tip-blod"},"请确保3103，310405科目存在，否则将不能正常结账")),g&&g.indexOf("CURRENCY")>-1?u.default.createElement("div",{className:"jz-rate"},u.default.createElement("span",{onClick:function(){E&&(O&&t(d.getCurrencyListFetch()),t(d.changeIcon()))}},O?u.default.createElement("b",{className:"jz-rate-circle"}):u.default.createElement(n.default,{type:"check-circle",style:{fontSize:"17px",color:"#ff6767",margin:"0 5px"}}),u.default.createElement("span",null,"期末调汇")),u.default.createElement("span",null,"（结账操作后，外币的期末余额将按调整汇率进行折算生成汇兑损益凭证，请确保560303科目存在）")):"",u.default.createElement("div",{className:"jzlayer",style:{display:O?"none":""}},u.default.createElement("div",{className:"jz-list"},u.default.createElement("div",{className:"jz-list-left"},"汇兑损益科目："),u.default.createElement("div",{className:"jz-list-right"},"560303_汇兑损益"))),O?null:u.default.createElement(l.TableWrap,{className:"table-jz-wrap",notPosition:!0},u.default.createElement(l.TableAll,null,u.default.createElement(l.TableTitle,{className:"rate-tabel-width",hasCheckbox:!1,titleList:["编码","名称","默认汇率","调整汇率"],onClick:function(){return!0}}),u.default.createElement(l.TableBody,null,A.map(function(e,r){return u.default.createElement(T.default,{key:r,idx:r,line:r,item:e,dispatch:t})})))))}}]),t}())||i;t.default=S},2676:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,n=d(r(100)),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();r(99);var o=d(r(1)),s=r(17),u=r(127),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1765));function d(e){return e&&e.__esModule?e:{default:e}}var m=(0,s.immutableRenderDecorator)(i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.idx,r=e.line,i=e.item,a=e.dispatch;return o.default.createElement(u.TableItem,{line:r,className:["rate-tabel-width","1"==i.get("standard")?"rate-tabel-item-none":""].join(" ")},o.default.createElement("li",null,i.get("fcNumber")),o.default.createElement("li",null,i.get("name")),o.default.createElement("li",null,o.default.createElement(u.Price,null,i.get("exchange"))),o.default.createElement("li",null,o.default.createElement(n.default,{type:"text",className:"rate-tabel-width-input",value:i.get("newExchange"),onChange:function(e){return a(c.changeExchangeJz(t,e.target.value))}})))}}]),t}())||i;t.default=m},2677:function(e,t,r){},2679:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=r(37),a=(i=n)&&i.__esModule?i:{default:i};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,r=arguments[1];return((e={},d(e,s.INIT_JZ,function(){return m}),d(e,s.CHANGE_ICON,function(){return t.setIn(["flags","circleStatus"],!t.getIn(["flags","circleStatus"]))}),d(e,s.GET_CURRENCY_LIST_FETCH_JZ,function(){var e=(0,o.fromJS)(r.receivedData),i=(0,o.fromJS)(r.receivedData);return e.map(function(e,t){var r=e.get("newExchange").toFixed(4);i=i.setIn([t,"newExchange"],r)}),t.set("fcList",i)}),d(e,s.CHANGE_EXCHANNGE_JZ,function(){if(""==r.value)return a.default.info("为空时按默认汇率调汇"),t.setIn(["fcList",r.idx,"newExchange"],r.value);var e=r.value.split(".");return e[1]&&e[1].length>u.FC_EXCHANGE_DECIMAL_LENGTH&&(t=t),t.setIn(["fcList",r.idx,"newExchange"],r.value)}),e)[r.type]||function(){return t})()},r(38);var o=r(18),s=c(r(1766)),u=c(r(27));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=(0,o.fromJS)({flags:{circleStatus:!0},fcList:[]})}}]);