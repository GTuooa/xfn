(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{1207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var o=r(n(2707));function r(e){return e&&e.__esModule?e:{default:e}}var a={sobConfigState:r(n(495)).default};t.reducer=a,t.view=o.default},1223:function(e,t,n){},1224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,a,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=s(n(1)),l=s(n(0)),u=n(17);function s(e){return e&&e.__esModule?e:{default:e}}n(1223);var f=(0,u.immutableRenderDecorator)((a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),c(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.className,o=e.onClick;return i.default.createElement("div",{className:"container-wrap container-width-"+t+" "+n,onClick:o},this.props.children)}}]),t}(),r.displayName="ContainerWrap",r.propTypes={type:l.default.string.isRequired,className:l.default.string.isRequired},o=a))||o;t.default=f},1226:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(1),i=(r=c)&&r.__esModule?r:{default:r},l=n(17);n(1223);var u=(0,l.immutableRenderDecorator)(o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),a(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"flex-title"},this.props.children)}}]),t}())||o;t.default=u},1526:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t={},n=""+e.getFullYear(),o=""+(e.getMonth()>8?e.getMonth()+1:"0"+(e.getMonth()+1)),r=""+(e.getDate()>=10?e.getDate():"0"+e.getDate()),a=""+(e.getHours()>=10?e.getHours():"0"+e.getHours()),c=""+(e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes()),i=""+(e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds());return t.year=n,t.month=o,t.day=r,t.hours=a,t.minutes=c,t.seconds=i,t.format=""+n+o+r+a+c+i,t.formatDayBegin=""+n+o+r+"000000",t.value=n+"-"+o+"-"+r+" "+a+":"+c+":"+i,t}},1527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.SOB_OPTION_INIT="SOB_OPTION_INIT",t.SOB_OPTION_CHANGE_CONTENT="SOB_OPTION_CHANGE_CONTENT",t.SOB_OPTION_CHANGE_SOB_TEMPLATE="SOB_OPTION_CHANGE_SOB_TEMPLATE",t.SOB_OPTION_CHANGE_TIME="SOB_OPTION_CHANGE_TIME",t.SOB_OPTION_CHANGE_FUN_MODUEL="SOB_OPTION_CHANGE_FUN_MODUEL",t.SOB_OPTION_SAVE="SOB_OPTION_SAVE",t.SOB_OPTION_EDIT="SOB_OPTION_EDIT",t.SOB_OPTION_ROLE_CHECK_STATE="SOB_OPTION_ROLE_CHECK_STATE",t.SOB_OPTION_ROLE_DELETE="SOB_OPTION_ROLE_DELETE",t.GET_LOG_LIST_FETCH="GET_LOG_LIST_FETCH",t.CHANGE_LOG_CONFIG_COMMON_STRING="CHANGE_LOG_CONFIG_COMMON_STRING",t.GET_LOG_LIST_SELECT_LIST_FETCH="GET_LOG_LIST_SELECT_LIST_FETCH",t.CHANGE_SOB_PERMISSION_LIST="CHANGE_SOB_PERMISSION_LIST",t.INIT_SOB_LOG="INIT_SOB_LOG",t.CLEAR_HOME_TAB_PANE="CLEAR_HOME_TAB_PANE"},1591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeLogConfigCommonString=t.getLogListSelectListFetch=t.getChangeLogListPaginationFetch=t.getLogListFetch=void 0;var o=u(n(37));n(38);var r=u(n(31)),a=l(n(1527)),c=(n(18),n(22)),i=(l(n(30)),l(n(27)));l(n(60)),l(n(43));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}t.getLogListFetch=function(e,t){return function(n){n({type:a.SWITCH_LOADING_MASK});var o=e.begin?e.begin:"",l=e.end?e.end:"",u=e.searchType?e.searchType:"SEARCH_TYPE_ALL",f=e.searchContent?e.searchContent:"",g=e.backSobId?e.backSobId:"",_=e.currentPage?e.currentPage:1;(0,r.default)("operationTrafficList","GET","sobId="+g+"&from="+o+"&to="+l+"&keyword="+f+"&offset="+_+"&line="+i.LOG_PAGE_SIZE+"&searchType="+u,function(e){(0,c.showMessage)(e,"show")&&(n({type:a.GET_LOG_LIST_FETCH,receivedData:e.data,currentPage:_,begin:o,end:l,backSobId:g,pageCount:e.data.length>=i.LOG_PAGE_SIZE?_+1:_}),"init"===t&&(n(s("searchType","SEARCH_TYPE_ALL")),n(s("searchContent","")))),n({type:a.SWITCH_LOADING_MASK})})}},t.getChangeLogListPaginationFetch=function(e,t){return function(n){var l=e.begin?e.begin:"",u=e.end?e.end:"",s=e.searchType?e.searchType:"SEARCH_TYPE_ALL",f=e.searchContent?e.searchContent:"",g=e.backSobId?e.backSobId:"",_=e.currentPage?e.currentPage:1;n({type:a.SWITCH_LOADING_MASK}),(0,r.default)("operationTrafficList","GET","sobId="+g+"&from="+l+"&to="+u+"&keyword="+f+"&offset="+_+"&line="+i.LOG_PAGE_SIZE+"&searchType="+s,function(e){(0,c.showMessage)(e,"show")&&(0===e.data.length&&o.default.info("没有更多操作记录了"),n({type:a.GET_LOG_LIST_FETCH,receivedData:e.data,currentPage:_,begin:l,end:u,backSobId:g,pageCount:_<t?t:e.data.length>=i.LOG_PAGE_SIZE?_+1:t})),n({type:a.SWITCH_LOADING_MASK})})}},t.getLogListSelectListFetch=function(e){return function(t){(0,r.default)("operationUsersList","GET","sobId="+e,function(e){(0,c.showMessage)(e)&&t({type:a.GET_LOG_LIST_SELECT_LIST_FETCH,receivedData:e.data})})}};var s=t.changeLogConfigCommonString=function(e,t){return{type:a.CHANGE_LOG_CONFIG_COMMON_STRING,place:e,value:t}}},2707:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=T(n(32)),a=T(n(14)),c=T(n(100)),i=T(n(45)),l=T(n(1230)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(51),n(78),n(99),n(55),n(1231);var s=T(n(1)),f=n(56),g=E(n(1591)),_=(E(n(43)),E(n(60))),d=T(n(1526)),p=T(n(2708)),h=(n(31),n(127),E(n(27)),T(n(6))),O=T(n(1224)),b=T(n(1226));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}n(2709);var C=l.default.RangePicker,S=(0,f.connect)(function(e){return e})(o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isSerch:!0,serchFor:"",searchBegin:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),u(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.sobLogState!==e.sobLogState||this.props.allState!==e.allState||this.props.homeState!==e.homeState||this.state!==t}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.sobLogState,o=(e.allState,e.homeState),l=this.state,u=(l.isSerch,l.serchFor,l.searchBegin,n.getIn(["log","pageCount"])),f=n.getIn(["log","currentPage"]),E=n.getIn(["log","backSobId"]),T=n.getIn(["log","logList"]),S=n.get("beginData"),y=n.get("endData"),m=n.get("searchType"),L=n.get("searchContent"),P=n.get("operationList");o.getIn(["views","URL_POSTFIX"]);return s.default.createElement(O.default,{type:"config-one",className:"log-config"},s.default.createElement(b.default,null,s.default.createElement("div",{className:"flex-title-left"},s.default.createElement("span",null,s.default.createElement(C,{style:{width:"280px"},className:"log-config-data-range",showTime:{format:"HH:mm"},allowClear:!1,format:"YYYY-MM-DD HH:mm:ss",disabledDate:function(e){return e>(0,h.default)().endOf("day")},value:[S?(0,h.default)(S,"YYYY-MM-DD HH:mm:ss"):"",y?(0,h.default)(y,"YYYY-MM-DD HH:mm:ss"):""],placeholder:["开始时间","结束时间"],onChange:function(e,n){var o=""+n[0].substr(0,4)+n[0].substr(5,2)+n[0].substr(8,2)+n[0].substr(11,2)+n[0].substr(14,2)+n[0].substr(17,2),r=""+n[1].substr(0,4)+n[1].substr(5,2)+n[1].substr(8,2)+n[1].substr(11,2)+n[1].substr(14,2)+n[1].substr(17,2);t(g.getLogListFetch({begin:o,end:r,searchType:m,searchContent:L,backSobId:E,currentPage:1}))}})),s.default.createElement("span",{className:"log-config-serch"},s.default.createElement(i.default,{style:{width:80},className:"log-config-serch-choose",defaultValue:"流水类别",value:{SEARCH_TYPE_ALL:"综合搜索",SEARCH_TYPE_OPERATION:"操作类型",SEARCH_TYPE_OPERATOR:"操作人"}[m],onSelect:function(e){return t(g.changeLogConfigCommonString("searchType",e))}},[{value:"SEARCH_TYPE_ALL",key:"综合搜索"},{value:"SEARCH_TYPE_OPERATION",key:"操作类型"},{value:"SEARCH_TYPE_OPERATOR",key:"操作人"}].map(function(e,t){return s.default.createElement(i.default.Option,{key:e.key,value:e.value},e.key)})),"SEARCH_TYPE_OPERATOR"===m?null:s.default.createElement(c.default,{placeholder:"搜索流水",className:"log-config-serch-input",value:L,onChange:function(e){return t(g.changeLogConfigCommonString("searchContent",e.target.value))},onPressEnter:function(e){t(g.changeLogConfigCommonString("searchContent",e.target.value)),t(g.getLogListFetch({begin:S,end:y,searchType:m,searchContent:e.target.value,backSobId:E,currentPage:1}))}}),"SEARCH_TYPE_OPERATOR"===m?s.default.createElement(i.default,{showSearch:!0,style:{width:200},allowClear:!1,mode:"tags",optionFilterProp:"children",notFoundContent:"无法找到相应操作人",className:"log-config-serch-choose-switch",value:L?[L]:[],onChange:function(e){0==e.length?(t(g.changeLogConfigCommonString("searchContent","")),t(g.getLogListFetch({begin:S,end:y,searchType:m,searchContent:"",backSobId:E,currentPage:1}))):1===e.length?(t(g.changeLogConfigCommonString("searchContent",e[0])),t(g.getLogListFetch({begin:S,end:y,searchType:m,searchContent:e[0],backSobId:E,currentPage:1}))):e.length>1&&(t(g.changeLogConfigCommonString("searchContent",e[1])),t(g.getLogListFetch({begin:S,end:y,searchType:m,searchContent:e[1],backSobId:E,currentPage:1})))}},P.map(function(e,t){return s.default.createElement(i.default.Option,{key:t,value:e},e)})):null,"SEARCH_TYPE_OPERATOR"===m?null:L?s.default.createElement(a.default,{className:"log-config-serch-icon-close",type:"close-circle",theme:"filled",onClick:function(){t(g.changeLogConfigCommonString("searchContent","")),t(g.getLogListFetch({begin:S,end:y,searchType:m,searchContent:"",backSobId:E,currentPage:1}))}}):null,s.default.createElement("span",{className:"log-config-serch-icon-separation"}),s.default.createElement(a.default,{className:"log-config-serch-icon-search",type:"search",onClick:function(){t(g.changeLogConfigCommonString("searchContent",L)),t(g.getLogListFetch({begin:S,end:y,searchType:m,searchContent:L,backSobId:E,currentPage:1}))}}))),s.default.createElement("div",{className:"flex-title-right"},s.default.createElement(r.default,{className:"title-right",type:"ghost",onClick:function(){t(_.addPageTabPane("ConfigPanes","Sob","Sob","账套设置")),t(_.addHomeTabpane("Config","Sob","账套设置"))}},"返回"),s.default.createElement(r.default,{className:"title-right",type:"ghost",onClick:function(){var e=(0,d.default)();t(g.getLogListFetch({begin:e.formatDayBegin,end:e.format,searchType:"SEARCH_TYPE_ALL",searchContent:"",backSobId:E,currentPage:1},"init"))}},"刷新"))),s.default.createElement(p.default,{dispatch:t,currentPage:f,pageCount:u,logList:T,paginationCallBack:function(e){t(g.getChangeLogListPaginationFetch({begin:S,end:y,searchType:m,searchContent:L,backSobId:E,currentPage:e},u))}}))}}]),t}())||o;t.default=S},2708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(1),i=(r=c)&&r.__esModule?r:{default:r},l=n(17),u=(n(18),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(27))),s=n(127);var f=(0,l.immutableRenderDecorator)(o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),a(t,[{key:"render",value:function(){var e=this.props,t=(e.dispatch,e.currentPage),n=e.pageCount,o=e.paginationCallBack,r=e.logList,a=(t-1)*u.LOG_PAGE_SIZE+1;return i.default.createElement(s.TableWrap,{notPosition:!0},i.default.createElement(s.TableAll,null,i.default.createElement(s.TableTitle,{className:"log-table-width",titleList:["序号","日期","操作人","操作日志"]}),i.default.createElement(s.TableBody,null,r.map(function(e,t){return i.default.createElement(s.TableItem,{className:"log-table-width",line:t+1},i.default.createElement(s.TableOver,null,""+(a+t)),i.default.createElement(s.TableOver,null,e.get("startTime")),i.default.createElement(s.TableOver,null,e.get("userName")),i.default.createElement(s.TableOver,{textAlign:"left"},e.get("logDetail")?e.get("logDetail"):"数据错误"))})),i.default.createElement(s.TablePagination,{currentPage:t,pageCount:n,paginationCallBack:function(e){return o(e)}})))}}]),t}())||o;t.default=f},2709:function(e,t,n){}}]);