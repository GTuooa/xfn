(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1210:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var n=i(a(2727)),r=i(a(1427)),o=i(a(2740)),l=i(a(2741));function i(e){return e&&e.__esModule?e:{default:e}}var c={approvalState:r.default,approvalTemplateState:o.default,approvalCardState:l.default};t.reducer=c,t.view=n.default},1223:function(e,t,a){},1224:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,o,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=p(a(1)),c=p(a(0)),u=a(17);function p(e){return e&&e.__esModule?e:{default:e}}a(1223);var d=(0,u.immutableRenderDecorator)((o=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.className,n=e.onClick;return i.default.createElement("div",{className:"container-wrap container-width-"+t+" "+a,onClick:n},this.props.children)}}]),t}(),r.displayName="ContainerWrap",r.propTypes={type:c.default.string.isRequired,className:c.default.string.isRequired},n=o))||n;t.default=d},1226:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(1),i=(r=l)&&r.__esModule?r:{default:r},c=a(17);a(1223);var u=(0,c.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"flex-title"},this.props.children)}}]),t}())||n;t.default=u},1227:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=p(a(176)),o=p(a(174)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(175),a(173);var i=p(a(1)),c=a(17),u=a(127);function p(e){return e&&e.__esModule?e:{default:e}}a(1232);var d=(0,c.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.pageItem,a=e.onClick,n=i.default.createElement(o.default,null,t.get("pageList").map(function(e,n){return i.default.createElement(o.default.Item,{key:e.get("key")},i.default.createElement("span",{className:"page-switch-item setting-common-ant-dropdown-menu-item",onClick:function(){a(t.get("key"),e.get("name"),e.get("key"))}},e.get("name")))}));return i.default.createElement("div",null,i.default.createElement(r.default,{overlay:n,trigger:["click"]},i.default.createElement("div",{className:"page-switch-button"},i.default.createElement(u.XfnIcon,{type:"Menu"}))))}}]),t}())||n;t.default=d},1232:function(e,t,a){},1407:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeApprovalTempCommonString=t.getStockSomeCardList=t.getStockAllCardList=t.getRelativeSomeCardList=t.getRelativeAllCardList=t.getProjectSomeCardList=t.getProjectAllCardList=t.getApprovalModelSync=t.changeApprovalModelState=t.getApprovalHideCategoryStockCardList=t.getApprovalStockCardList=t.getApprovalRelativeCardList=t.getApprovalProjectCardList=t.beforInsertOrModifyApprovalhideCategoryTemp=t.beforInsertOrModifyApprovalTemplate=t.cancelModifyApprovalTemplate=t.clearApprovalModel=t.deleteApprovalTemplate=t.saveApprovalTemplate=t.checkComponentList=t.approvalChangeMxExtraInfo=t.changeApprovalFormOptionStringFromType=t.adjustPositionApprovalFormComponent=t.deleteApprovalFormComponentFromType=t.deleteApprovalFormComponent=t.addApprovalFormComponent=t.switchApprovalBaseSettingCategoryProperty=t.changeApprovalBaseSettingHideCategory=t.changeApprovalBaseSettingJrCategory=t.changeApprovalFormOptionString=t.changeApprovalBaseSettingCommonString=void 0;var n=m(a(37));a(38);var r=f(a(1480)),o=m(a(52)),l=a(18),i=a(22),c=f(a(30)),u=f(a(27)),p=a(101),d=a(489),s=a(1427);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}var g=t.changeApprovalBaseSettingCommonString=function(e,t){return{type:r.CHANGE_APPROVAL_BASE_SETTING_COMMON_STRING,place:e,value:t}},v=t.changeApprovalFormOptionString=function(e,t){return{type:r.CHANGE_APPROVAL_FORM_OPTION_STRING,arr:e,value:t}},E=(t.changeApprovalBaseSettingJrCategory=function(e,t,a,n,l){return function(e,c){e({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getApprovalCategoryList","GET","uuid="+t,function(o){if((0,i.showMessage)(o)){var s=c().approvalTemplateState.getIn(["approvalTemp","baseSetting"]).toJS(),f=c().approvalTemplateState.getIn(["approvalTemp","suiteMap"]).toJS(),m=c().approvalTemplateState.getIn(["approvalTemp","modelComponentList"]),g=c().approvalTemplateState.getIn(["approvalTemp","formSetting","componentList"]),v=o.data,_=(0,p.getCategorynameByType)(a).categoryTypeObj;if(s.jrCategoryType=a,s.jrCategoryId=t,s.jrCategoryName=n,e(S(!0)),e(y(u.CK_IN_COMPONENT_TYPE)),e(y(u.CK_OUT_COMPONENT_TYPE)),v.beProject){var O=v.projectRange;e(T(O)),s.projectScope=[],s.outProjectScope=[],"SX_HW"===v.propertyCarryover&&"IN_DETAIL"==s.project&&(s.project="NO")}else s.project="NO",s.projectScope=[],s.outProjectScope=[],e(y(u.XM_COMPONENT_TYPE));if(v[_].contactsManagement){var h=v[_].contactsRange;e(A(h)),s.contactScope=[],s.outContactScope=[],"SX_HW"===v.propertyCarryover&&"IN_DETAIL"==s.contact&&(s.contact="NO")}else s.contact="NO",s.contactScope=[],s.outContactScope=[],e(y(u.WLDW_COMPONENT_TYPE));var L=v.propertyCostList;if(L.length>0?1===L.length?("XZ_MANAGE"===L[0]?(s.nature="GLFY",s.natureScope=[]):"XZ_SALE"===L[0]?(s.nature="XSFY",s.natureScope=[]):"XZ_FINANCE"===L[0]&&(s.nature="CWFY",s.natureScope=[]),e(y(u.FYXZ_COMPONENT_TYPE))):2===L.length&&("CWFY"!==s.nature&&""!==s.nature||(s.nature="XSFY")):(e(y(u.FYXZ_COMPONENT_TYPE)),s.nature="",s.natureScope=[]),d.receiptList.indexOf(a)>-1||(e(y(u.ZH_COMPONENT_TYPE)),s.jrAccount="NO",s.jrAccountRequired=!1,s.jrAccountScope=[]),l.length>0)if("SX_HW"===v.propertyCarryover){if("IN_MODEL"!==s.jrCategory){s.jrCategory="IN_MODEL",s.jrCategoryScope=l;var P=m.find(function(e){return e.get("jrComponentType")===u.LSLB_COMPONENT_TYPE});P&&(P=P.toJS(),e(E(P)))}}else"NO"===s.jrCategory?(s.jrCategory="IN_DETAIL",s.jrCategoryScope=l):"IN_DETAIL"===s.jrCategory?s.jrCategoryScope=l:"IN_MODEL"===s.jrCategory&&(s.jrCategoryScope=l);else 0===l.length&&(s.jrCategory="NO",s.jrCategoryScope=[],e(y(u.LSLB_COMPONENT_TYPE)));if("SX_HW"===v.propertyCarryover){var b=v[_].stockRange;if(e(N(b)),s.detailScope="LB_YYSR"===a?f.XS_HW:f.CG_HW,"SX_HW"!==s.jrCategoryProperty&&"SX_HW"!==s.incomeExpensesProperty){if(!C(u.DATE_COMPONENT_TYPE,g)){var M=m.find(function(e){return e.get("jrComponentType")===u.DATE_COMPONENT_TYPE});M&&(M=M.toJS(),e(E(M)))}s.jrCategoryProperty="SX_HW",s.incomeExpensesProperty="SX_HW",e(S(!1)),"IN_DETAIL"===s.digest&&(s.digest="NO",s.digestRequired=!1),s.stock="IN_DETAIL",c().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1&&(s.depot="IN_DETAIL")}else s.depotScope=[],s.stockScope=[]}else"SX_HW_FW"===v.propertyCarryover||""===v.propertyCarryover&&("LB_YYSR"===a||"LB_YYZC"===a)?s.incomeExpensesProperty="SX_FW":s.incomeExpensesProperty="LB_YYSR"===a||"LB_YYZC"===a?"SX_FW":"",s.jrCategoryProperty=v.propertyCarryover,s.detailScope=[],s.stockScope=[],s.outStockScope=[],e(y(u.DATE_COMPONENT_TYPE)),s.depot="NO",s.stock="NO",e(y(u.CK_COMPONENT_TYPE));e({type:r.CHANGE_APPROVAL_BASE_SETTING_JR_CATEGORY,receivedData:v,baseSetting:s}),e({type:r.SWITCH_LOADING_MASK})}else e({type:r.SWITCH_LOADING_MASK})})}},t.changeApprovalBaseSettingHideCategory=function(e,t,a,n,l){return function(e,l){e({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getApprovalCategoryList","GET","uuid="+t,function(o){if((0,i.showMessage)(o)){var c=l().approvalTemplateState.getIn(["approvalTemp","baseSetting"]).toJS(),p=l().approvalTemplateState.getIn(["approvalTemp","suiteMap"]).toJS(),d=l().approvalTemplateState.getIn(["approvalTemp","modelComponentList"]),s=l().approvalTemplateState.getIn(["approvalTemp","formSetting","componentList"]),f=o.data;if(c.jrCategoryType=a,c.jrCategoryId=t,c.jrCategoryName=n,c.jrCategoryProperty="",c.incomeExpensesProperty="",e(S(!0)),"LB_ZZ"!==a&&"LB_CHDB"!==a||(c.project="NO",c.projectScope=[],c.outProjectScope=[],e(y(u.XM_COMPONENT_TYPE)),c.contact="NO",c.contactScope=[],c.outContactScope=[],e(y(u.WLDW_COMPONENT_TYPE)),c.nature="",c.natureScope=[],e(y(u.FYXZ_COMPONENT_TYPE)),e(y(u.ZH_COMPONENT_TYPE)),c.jrAccount="NO",c.jrAccountRequired=!1,c.jrAccountScope=[],c.jrCategory="NO",c.jrCategoryScope=[],e(y(u.LSLB_COMPONENT_TYPE))),"LB_ZZ"===a&&(c.detailScope=p.NB_ZZ,c.stock="NO",c.stockScope=[],c.outStockScope=[],e(y(u.DATE_COMPONENT_TYPE)),c.depot="NO",e(y(u.CK_COMPONENT_TYPE))),"LB_CHDB"===a){if(c.detailScope=p.CH_DB,e(L({temp:"StockTemp"})),e(S(!1)),"IN_DETAIL"===c.digest&&(c.digest="NO",c.digestRequired=!1),c.stock="",c.stockScope=[],c.outStockScope=[],c.depot="",e(y(u.CK_COMPONENT_TYPE)),!C(u.DATE_COMPONENT_TYPE,s)){var m=d.find(function(e){return e.get("jrComponentType")===u.DATE_COMPONENT_TYPE});m&&(m=m.toJS(),e(E(m)))}if(!C(u.CK_OUT_COMPONENT_TYPE,s)){var g=d.find(function(e){return e.get("jrComponentType")===u.CK_OUT_COMPONENT_TYPE});g&&(g=g.toJS(),e(E(g)))}if(!C(u.CK_IN_COMPONENT_TYPE,s)){var v=d.find(function(e){return e.get("jrComponentType")===u.CK_IN_COMPONENT_TYPE});v&&(v=v.toJS(),e(E(v)))}}else e(y(u.CK_IN_COMPONENT_TYPE)),e(y(u.CK_OUT_COMPONENT_TYPE)),e(y(u.DATE_COMPONENT_TYPE));e({type:r.CHANGE_APPROVAL_BASE_SETTING_JR_CATEGORY,receivedData:f,baseSetting:c}),e({type:r.SWITCH_LOADING_MASK})}else e({type:r.SWITCH_LOADING_MASK})})}},t.switchApprovalBaseSettingCategoryProperty=function(e){return function(t,a){var n=a().approvalTemplateState.getIn(["approvalTemp","baseSetting"]).toJS(),o=a().approvalTemplateState.getIn(["approvalTemp","suiteMap"]).toJS(),l=a().approvalTemplateState.getIn(["approvalTemp","modelComponentList"]),i=a().approvalTemplateState.get("categoryData").toJS(),c=n.jrCategoryType,d=(0,p.getCategorynameByType)(c).categoryTypeObj;if(i.beProject&&"SX_HW"===e&&(n.project="NO",n.projectScope=[],n.outProjectScope=[],t(y(u.XM_COMPONENT_TYPE))),i[d].contactsManagement&&"SX_HW"===e&&"IN_DETAIL"==n.contact){n.contact="IN_MODEL";var s=l.find(function(e){return e.get("jrComponentType")===u.WLDW_COMPONENT_TYPE});s&&(s=s.toJS(),t(E(s)))}if("IN_DETAIL"==n.jrAccount&&"SX_HW"===e){n.jrAccount="IN_MODEL";var f=l.find(function(e){return e.get("jrComponentType")===u.ZH_COMPONENT_TYPE});f&&(f=f.toJS(),t(E(f)))}if("IN_DETAIL"==n.jrCategory&&"SX_HW"===e){n.jrCategory="IN_MODEL";var m=l.find(function(e){return e.get("jrComponentType")===u.LSLB_COMPONENT_TYPE});m&&(m=m.toJS(),t(E(m)))}if("SX_HW"===e){var g=i[d].stockRange;t(N(g));var v=l.find(function(e){return e.get("jrComponentType")===u.DATE_COMPONENT_TYPE});if(v&&(v=v.toJS(),t(E(v))),n.incomeExpensesProperty="SX_HW",n.detailScope="LB_YYSR"===c?o.XS_HW:o.CG_HW,t(S(!1)),"IN_DETAIL"===n.digest){n.digest="IN_MODEL";var _=l.find(function(e){return e.get("jrComponentType")===u.ZY_COMPONENT_TYPE});_&&(_=_.toJS(),t(E(_)))}n.stock="IN_DETAIL",a().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1&&(n.depot="IN_DETAIL")}else n.incomeExpensesProperty="SX_FW",n.detailScope=[],n.stockScope=[],n.outStockScope=[],t(y(u.DATE_COMPONENT_TYPE)),n.depot="NO",n.stock="NO",t(y(u.CK_COMPONENT_TYPE));t({type:r.CHANGE_APPROVAL_BASE_SETTING_JR_CATEGORY,receivedData:i,baseSetting:n})}},t.addApprovalFormComponent=function(e){return{type:r.ADD_APPROVAL_FORM_COMPONENT,component:e}}),_=t.deleteApprovalFormComponent=function(e){return{type:r.DELETE_APPROVAL_FORM_COMPONENT,index:e}},y=t.deleteApprovalFormComponentFromType=function(e){return function(t,a){var n=a().approvalTemplateState.getIn(["approvalTemp","formSetting","componentList"]).findIndex(function(t){return t.get("jrComponentType")===e});if(!(n>-1))return!1;t(_(n))}},C=function(e,t){return t.findIndex(function(t){return t.get("jrComponentType")===e})>-1},S=(t.adjustPositionApprovalFormComponent=function(e,t){return{type:r.ADJUST_POSITION_APPROVAL_FORM_COMPONENT,fromPost:e,toPost:t}},t.changeApprovalFormOptionStringFromType=function(e,t,a){return function(n,r){var o=r().approvalTemplateState.getIn(["approvalTemp","formSetting","componentList"]).findIndex(function(t){return t.get("jrComponentType")===e});if(!(o>-1))return!1;n(v(["approvalTemp","formSetting","componentList",o,t],a))}},t.approvalChangeMxExtraInfo=function(e){return function(t,a){var n=a().approvalTemplateState.getIn(["approvalTemp","formSetting","componentList"]).findIndex(function(e){return"TableField"===e.get("componentType")});n>-1&&t(v(["approvalTemp","formSetting","componentList",n,"extraInfo"],e))}}),O=t.checkComponentList=function(e,t,a){return e.map(function(e,n){e.get("label")?e.get("label").length>20&&t.push("表单设置的第"+(n+1)+"个组件标题最长20个字符"):t.push("表单设置的第"+(n+1)+"个组件标题必填"),e.get("placeHolder")&&e.get("placeHolder").length>50&&t.push("表单设置的第"+(n+1)+"个组件提示文字最长50个字符"),e.get("selectValueList")&&(e.get("selectValueList").every(function(e){return!e})&&!e.get("jrComponentType")?t.push("表单设置的第"+(n+1)+"个组件选项至少有一个可选项"):a=a.updateIn(["formSetting","componentList",n,"selectValueList"],function(e){return e.filter(function(e){return e})})),"NumberField"===e.get("componentType")&&e.get("unit")&&e.get("unit").length>20&&t.push("表单设置的第"+(n+1)+"个组件单位不能超过20字"),"DDDateRangeField"===e.get("componentType")&&(e.get("dateRangeLabelFirst")?e.get("dateRangeLabelFirst").length>20&&t.push("表单设置的第"+(n+1)+"个组件标题1不能超过20字"):t.push("表单设置的第"+(n+1)+"个组件标题1不能为空"),e.get("dateRangeLabelLast")?e.get("dateRangeLabelLast").length>20&&t.push("表单设置的第"+(n+1)+"个组件标题1不能超过20字"):t.push("表单设置的第"+(n+1)+"个组件标题1不能为空"))}),{checkoutList:t,approvalTemp:a}},h=(t.saveApprovalTemplate=function(e,t,a){return function(l,u){var p=[],d=(e=e.delete("detailList")).get("baseSetting"),f=e.get("formSetting").get("componentList");if(d.get("modelName")){var m=50;"insert"===t&&(e=e.setIn(["baseSetting","modelName"],"小番-"+d.get("modelName")),m=47),d.get("modelName").length>m&&"DDDateRangeField"!==d.get("componentType")&&p.push("审批名称最长50个字符")}else p.push("审批名称必填");if(d.get("jrCategoryName")||p.push("关联流水类别必填"),d.get("remark").length>100&&p.push("备注最长100个字符"),d.get("detailScope").size||p.push("明细范围必填"),"NO"!==d.get("jrAccount")){var g=d.get("jrAccountScope");g.size?g.size>200&&p.push("收款账户最多200个"):p.push("收款账户范围必填")}if("LB_ZZ"===d.get("jrCategoryType")){var v=d.get("jrAccountScope");v.size?v.size>200&&p.push("账户最多200个"):p.push("账户范围必填")}var E=d.get("jrCategoryProperty"),_=u().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1,y=d.get("contact"),C=d.get("project");if("SX_HW"===E){var S=d.get("stockScope");if(S.size?S.size>200&&p.push("存货卡片最多200个"):p.push("存货范围必填"),_){var T=d.get("depotScope");T.size?T.size>200&&p.push("仓库卡片最多200个"):p.push("仓库范围必填")}}if("NO"!==y){var A=d.get("contactScope");A.size?A.size>200&&p.push("往来卡片最多200个"):p.push("往来范围必填")}if("NO"!==C){var N=d.get("projectScope");N.size?N.size>200&&p.push("项目卡片最多200个"):p.push("项目范围必填")}var L=O(f,p,e);if(p=L.checkoutList,e=L.approvalTemp,p.length)return c.Alert(p.reduce(function(e,t){return e+","+t}));l({type:r.SWITCH_LOADING_MASK}),"insert"===t?(0,o.default)("createApprovalModel","POST",JSON.stringify(e),function(e){l({type:r.SWITCH_LOADING_MASK}),(0,i.showMessage)(e)&&(n.default.info(e.message),l(s.approvalActions.getProcessSelectModel()),a())}):"modify"===t&&(0,o.default)("modifyApprovalModel","POST",JSON.stringify(e),function(e){l({type:r.SWITCH_LOADING_MASK}),830001===e.code?l(h([d.get("modelCode")],a)):(0,i.showMessage)(e)&&(n.default.info(e.message),l(s.approvalActions.getProcessSelectModel()),a())})}},t.deleteApprovalTemplate=function(e,t){return function(a,l){a({type:r.SWITCH_LOADING_MASK}),(0,o.default)("deleteApprovalModel","POST",JSON.stringify(e),function(e){a({type:r.SWITCH_LOADING_MASK}),(0,i.showMessage)(e)&&(n.default.info(e.message?e.message:"成功"),a(s.approvalActions.getProcessSelectModel()),t())})}},t.clearApprovalModel=function(e,t){return function(a){c.Confirm({message:"钉钉管理员已在OA后台删除该模版、导致该模版无法更新，请删除后重新创建。",title:"提示",buttonLabels:["取消","删除"],onSuccess:function(l){1===l.buttonIndex&&(a({type:r.SWITCH_LOADING_MASK}),(0,o.default)("clearApprovalModel","POST",JSON.stringify(e),function(e){a({type:r.SWITCH_LOADING_MASK}),(0,i.showMessage)(e)&&(n.default.info(e.message?e.message:"成功"),a(s.approvalActions.getProcessSelectModel()),t&&t())}))},onFail:function(e){return console.log(e)}})}}),T=(t.cancelModifyApprovalTemplate=function(){return{type:r.CANCEL_MODIFY_APPROVAL_TEMPLATE}},t.beforInsertOrModifyApprovalTemplate=function(e,t,a){return function(l){"insert"===e?(l({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getApprovalModel","GET","modelCode=&jrType=LB_FYZC",function(e){(0,i.showMessage)(e)&&l({type:r.BEFOR_INSERT_OR_MODIFY_APPROVAL_TEMPLATE,templateData:e.data,insertOrModify:"insert"}),l({type:r.SWITCH_LOADING_MASK})}),a()):"modify"===e&&(l({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getApprovalCategoryList","GET","uuid="+t.jrCategoryUuid,function(e){if(0===e.code){var u=(0,p.getCategorynameByType)(e.data.categoryType).categoryTypeObj;(0,o.default)("getApprovalModel","GET","modelCode="+t.modelCode+"&jrType="+t.jrCategoryType,function(t){var o=e.data;if(l({type:r.BEFOR_INSERT_OR_MODIFY_APPROVAL_TEMPLATE,receivedData:o,templateData:t.data,insertOrModify:"modify"}),l({type:r.SWITCH_LOADING_MASK}),a(),o.beProject){var i=o.projectRange;l(T(i))}if(o[u].contactsManagement){var c=o[u].contactsRange;l(A(c))}if("SX_HW"===o.propertyCarryover||"SX_HW"===t.data.baseSetting.incomeExpensesProperty){var p=o[u].stockRange;l(N(p,"synchronize",t.data.baseSetting.depotScope))}!1===o.canUse&&n.default.info("关联的流水类别已被停用")})}else 70001===e.code?(0,o.default)("getApprovalModel","GET","modelCode="+t.modelCode+"&jrType="+t.jrCategoryType,function(e){if((0,i.showMessage)(e)){e.data.baseSetting.jrCategoryType="",e.data.baseSetting.jrCategoryId="",e.data.baseSetting.jrCategoryName="";l({type:r.BEFOR_INSERT_OR_MODIFY_APPROVAL_TEMPLATE,receivedData:{propertyCostList:[],beProject:!1,allProjectRange:[]},templateData:e.data,insertOrModify:"modify"}),a(),c.Alert("原关联流水类别已被删除，请重新选择类别")}l({type:r.SWITCH_LOADING_MASK})}):((0,i.showMessage)(e),l({type:r.SWITCH_LOADING_MASK}))}))}},t.beforInsertOrModifyApprovalhideCategoryTemp=function(e,t,a){return function(e){e({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getApprovalCategoryList","GET","uuid="+t.jrCategoryUuid,function(n){0===n.code?(0,o.default)("getApprovalModel","GET","modelCode="+t.modelCode+"&jrType="+t.jrCategoryType,function(t){var o=n.data;e({type:r.BEFOR_INSERT_OR_MODIFY_APPROVAL_TEMPLATE,receivedData:o,templateData:t.data,insertOrModify:"modify"}),e({type:r.SWITCH_LOADING_MASK}),a()}):((0,i.showMessage)(n),e({type:r.SWITCH_LOADING_MASK}))})}},t.getApprovalProjectCardList=function(e){return function(t,a){var n=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,o.default)("getProjectCardList","POST",JSON.stringify({sobId:n,categoryList:e,needCommonCard:!0,needAssist:!0,needMake:!0,needIndirect:!0,needMechanical:!0}),function(e){(0,i.showMessage)(e)&&t({type:r.AFTER_GET_APPROVAL_PROJECT_CARD_LIST,receivedData:e.data.result})})}}),A=t.getApprovalRelativeCardList=function(e){return function(t,a){var n=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,o.default)("getContactsCategoryList","POST",JSON.stringify({sobId:n,categoryList:e,property:"NEEDPAY"}),function(e){(0,i.showMessage)(e)&&t({type:r.AFTER_GET_APPROVAL_CONTACT_CARD_LIST,receivedData:e.data.result})})}},N=t.getApprovalStockCardList=function(e,t,a){return function(n,c){var u=c().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,o.default)("getStockCategoryList","POST",JSON.stringify({sobId:u,categoryList:e,property:"5"}),function(e){(0,i.showMessage)(e)&&n({type:r.AFTER_GET_APPROVAL_STOCK_CARD_LIST,receivedData:e.data.result})}),c().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1&&(0,o.default)("warehouseCardTree","POST",JSON.stringify({uuidList:[]}),function(e){if((0,i.showMessage)(e)&&(n({type:r.AFTER_GET_APPROVAL_WAREHOUSE_CARD_TREE,receivedData:e.data.cardList}),"synchronize"===t&&a.length)){var o={},c=e.data.cardList;if(c.length&&c[0].childList.length>0){!function e(t,a){return t.map(function(t){o[t.uuid]={uuid:t.uuid,code:t.code,name:""+(a?a+"_"+t.name:t.name),top:!1,type:"CTGY"};var n=t.childList;n&&n.length&&e(n,a?a+"_"+t.name:t.name)})}(c[0].childList)}var u=[];a.forEach(function(e){o[e.uuid]&&u.push(o[e.uuid])}),n(g("depotScope",(0,l.fromJS)(u)))}})}},L=t.getApprovalHideCategoryStockCardList=function(e){return function(e,t){var a=t().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,o.default)("getStockCategoryList","POST",JSON.stringify({sobId:a,isUniform:null,openQuantity:!1,property:"0",categoryList:[]}),function(t){(0,i.showMessage)(t)&&e({type:r.AFTER_GET_APPROVAL_STOCK_CARD_LIST,receivedData:t.data.result})}),(0,o.default)("warehouseCardTree","POST",JSON.stringify({uuidList:[]}),function(t){(0,i.showMessage)(t)&&e({type:r.AFTER_GET_APPROVAL_WAREHOUSE_CARD_TREE,receivedData:t.data.cardList})})}},P=(t.changeApprovalModelState=function(e,t,a){return function(n,l){n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("changeApprovalModelState","POST",JSON.stringify({modelCode:e,state:t}),function(t){n({type:r.SWITCH_LOADING_MASK}),830001===t.code?n(h([e])):(0,i.showMessage)(t)&&n({type:r.CHANGE_APPROVAL_MODEL_STATE,index:a})})}},t.getApprovalModelSync=function(e){return function(t,a){t({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getapprovalmodelsync","POST",JSON.stringify({modelCode:e}),function(a){t({type:r.SWITCH_LOADING_MASK}),830001===a.code?t(h([e])):(0,i.showMessage)(a,"show")})}},t.getProjectAllCardList=function(e,t,a,n){return function(t,c){var u=c().homeState.getIn(["data","userInfo","sobInfo","sobId"]);t({type:r.SWITCH_LOADING_MASK}),a||(0,o.default)("getProjectTreeList","POST",JSON.stringify({sobId:u,categoryList:e}),function(e){(0,i.showMessage)(e)&&t(P("modalCategoryList",(0,l.fromJS)(e.data.typeList)))}),(0,o.default)("getProjectCardList","POST",JSON.stringify({sobId:u,categoryList:e,needCommonCard:!0,needAssist:!0,needMake:!0,needIndirect:!0,needMechanical:!0}),function(e){t({type:r.SWITCH_LOADING_MASK}),(0,i.showMessage)(e)&&(t(P("modalCardList",(0,l.fromJS)(e.data.result))),n&&n())})}},t.getProjectSomeCardList=function(e,t){return function(a,n){var r=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);1==t?(0,o.default)("getProjectSubordinateCardList","POST",JSON.stringify({sobId:r,categoryUuid:e,listByCategory:!0,subordinateUuid:""}),function(e){(0,i.showMessage)(e)&&a(P("modalCardList",(0,l.fromJS)(e.data.resultList)))}):(0,o.default)("getProjectSubordinateCardList","POST",JSON.stringify({sobId:r,subordinateUuid:e,listByCategory:!1,categoryUuid:e}),function(e){(0,i.showMessage)(e)&&a(P("modalCardList",(0,l.fromJS)(e.data.resultList)))})}},t.getRelativeAllCardList=function(e,t,a,n){return function(t,c){var u=c().homeState.getIn(["data","userInfo","sobInfo","sobId"]);a||(0,o.default)("getContactsCardList","POST",JSON.stringify({sobId:u,categoryList:e}),function(e){(0,i.showMessage)(e)&&t(P("modalCategoryList",(0,l.fromJS)(e.data.typeList)))});t({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getContactsCategoryList","POST",JSON.stringify({sobId:u,categoryList:e,property:"NEEDPAY"}),function(e){t({type:r.SWITCH_LOADING_MASK}),(0,i.showMessage)(e)&&(t(P("modalCardList",(0,l.fromJS)(e.data.result))),n&&n())})}},t.getRelativeSomeCardList=function(e,t){return function(a,n){var r=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);1==t?(0,o.default)("getRunningContactsMemberList","POST",JSON.stringify({sobId:r,categoryUuid:e,listByCategory:!0,property:"NEEDPAY",subordinateUuid:""}),function(e){(0,i.showMessage)(e)&&a(P("modalCardList",(0,l.fromJS)(e.data.resultList)))}):(0,o.default)("getRunningContactsMemberList","POST",JSON.stringify({sobId:r,subordinateUuid:e,property:"NEEDPAY",listByCategory:!1,categoryUuid:""}),function(e){(0,i.showMessage)(e)&&a(P("modalCardList",(0,l.fromJS)(e.data.resultList)))})}},t.getStockAllCardList=function(e,t,a,n){return function(c,u){var p=u().homeState.getIn(["data","userInfo","sobInfo","sobId"]);a||(0,o.default)("getStockCardList","POST",JSON.stringify({sobId:p,categoryList:e}),function(e){(0,i.showMessage)(e)&&c(P("modalCategoryList",(0,l.fromJS)(e.data.typeList)))}),c({type:r.SWITCH_LOADING_MASK});var d="hidecategory"==t?{sobId:p,isUniform:null,openQuantity:!1,property:"0",categoryList:[]}:{sobId:p,categoryList:e,property:"5"};(0,o.default)("getStockCategoryList","POST",JSON.stringify(d),function(e){(0,i.showMessage)(e)&&(c(P("modalCardList",(0,l.fromJS)(e.data.result))),n&&n()),c({type:r.SWITCH_LOADING_MASK})})}},t.getStockSomeCardList=function(e,t){return function(a,n){var r=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);1==t?(0,o.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:r,categoryUuid:e,listByCategory:!0,subordinateUuid:"",property:"5"}),function(e){(0,i.showMessage)(e)&&a(P("modalCardList",(0,l.fromJS)(e.data.resultList)))}):(0,o.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:r,subordinateUuid:e,listByCategory:!1,categoryUuid:"",property:"5"}),function(e){(0,i.showMessage)(e)&&a(P("modalCardList",(0,l.fromJS)(e.data.resultList)))})}},t.changeApprovalTempCommonString=function(e,t){return{type:r.CHANGE_APPROVAL_TEMP_COMMON_STRING,place:e,value:t}})},1427:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.approvalActions=void 0,t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments[1];return((e={},u(e,o.INIT_APPROVAL_CONFIG,function(){return p}),u(e,o.SWITCH_APPROVAL_ACTIVE_PAGE,function(){return t=t.setIn(["views","currentPage"],a.page)}),u(e,o.GET_APPROVAL_MODEL_LIST,function(){return t=t.set("modelList",(0,r.fromJS)(a.modelList))}),u(e,o.GET_APPROVAL_DETAIL_LIST,function(){return t=t.set("detailList",(0,r.fromJS)(a.detailList))}),u(e,o.CHANGE_APPROVAL_MODEL_STATE,function(){return t=t.updateIn(["modelList",a.index,"modelStatus"],function(e){return"ENABLE"===e?"DISABLE":"ENABLE"})}),u(e,o.GET_APPROVAL_BASIC_COMPONENT_LIST,function(){return t=t.set("basicComponentList",a.basicComponentList)}),e)[a.type]||function(){return t})()};var n,r=a(18),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1480)),l=a(52),i=(n=l)&&n.__esModule?n:{default:n},c=a(22);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var p=(0,r.fromJS)({views:{currentPage:"ApprovalTemplate"},detailList:[],modelList:[],basicComponentList:[]});var d={switchApprovalActivePage:function(e){return{type:o.SWITCH_APPROVAL_ACTIVE_PAGE,page:e}},getProcessSelectModel:function(){return function(e){(0,i.default)("getApprovalModelList","GET","",function(t){(0,c.showMessage)(t)&&e({type:o.GET_APPROVAL_MODEL_LIST,modelList:t.data})}),(0,i.default)("getApprovalDetailList","GET","",function(t){(0,c.showMessage)(t)&&e({type:o.GET_APPROVAL_DETAIL_LIST,detailList:t.data})})}},getApprovalBasicComponentList:function(){return function(e){(0,i.default)("getApprovalBasicComponentList","GET","",function(t){if((0,c.showMessage)(t)){var a=["CalculateField","TableField"],n=(0,r.fromJS)(t.data).filter(function(e){return-1===a.indexOf(e.get("componentType"))});e({type:o.GET_APPROVAL_BASIC_COMPONENT_LIST,basicComponentList:n})}})}},createProcessModel:function(){return function(e){(0,i.default)("createProcessModel","GET","",function(t){(0,c.showMessage)(t,"show")&&(0,i.default)("getProcessSelectModel","GET","",function(t){(0,c.showMessage)(t)&&e({type:o.GET_PROCESS_SELECT_MODEL,detailList:t.data.detailList,modelList:t.data.modelList})})})}},disableProcessModel:function(e){return function(e){(0,i.default)("disableProcessModel","GET","",function(t){(0,c.showMessage)(t,"show")&&(0,i.default)("getProcessSelectModel","GET","",function(t){(0,c.showMessage)(t)&&e({type:o.GET_PROCESS_SELECT_MODEL,detailList:t.data.detailList,modelList:t.data.modelList})})})}}};t.approvalActions=d},1480:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.SWITCH_APPROVAL_ACTIVE_PAGE="SWITCH_APPROVAL_ACTIVE_PAGE",t.INIT_APPROVAL_CONFIG="INIT_APPROVAL_CONFIG",t.GET_APPROVAL_MODEL_LIST="GET_APPROVAL_MODEL_LIST",t.GET_APPROVAL_DETAIL_LIST="GET_APPROVAL_DETAIL_LIST",t.INIT_APPROVALTEMPLATE="INIT_APPROVALTEMPLATE",t.INIT_APPROVAL_CARD="INIT_APPROVAL_CARD",t.GET_APPROVAL_BASIC_COMPONENT_LIST="GET_APPROVAL_BASIC_COMPONENT_LIST",t.CANCEL_MODIFY_APPROVAL_TEMPLATE="CANCEL_MODIFY_APPROVAL_TEMPLATE",t.CHANGE_APPROVAL_BASE_SETTING_COMMON_STRING="CHANGE_APPROVAL_BASE_SETTING_COMMON_STRING",t.CHANGE_APPROVAL_BASE_SETTING_JR_CATEGORY="CHANGE_APPROVAL_BASE_SETTING_JR_CATEGORY",t.ADD_APPROVAL_FORM_COMPONENT="ADD_APPROVAL_FORM_COMPONENT",t.DELETE_APPROVAL_FORM_COMPONENT="DELETE_APPROVAL_FORM_COMPONENT",t.CHANGE_APPROVAL_FORM_OPTION_STRING="CHANGE_APPROVAL_FORM_OPTION_STRING",t.ADJUST_POSITION_APPROVAL_FORM_COMPONENT="ADJUST_POSITION_APPROVAL_FORM_COMPONENT",t.BEFOR_INSERT_OR_MODIFY_APPROVAL_TEMPLATE="BEFOR_INSERT_OR_MODIFY_APPROVAL_TEMPLATE",t.CHANGE_APPROVAL_MODEL_STATE="CHANGE_APPROVAL_MODEL_STATE",t.CANCEL_MODIFY_APPROVAL_CARD="CANCEL_MODIFY_APPROVAL_CARD",t.BEFORE_INSERT_OR_MODIFY_DETAIL="BEFORE_INSERT_OR_MODIFY_DETAIL",t.CHANGE_APPROVAL_CARD_COMMON_STRING="CHANGE_APPROVAL_CARD_COMMON_STRING",t.ADD_APPROVAL_CARD_FORM_COMPONENT="ADD_APPROVAL_CARD_FORM_COMPONENT",t.DELETE_APPROVAL_CARD_FORM_COMPONENT="DELETE_APPROVAL_CARD_FORM_COMPONENT",t.CHANGE_APPROVAL_CARD_FORM_OPTION_STRING="CHANGE_APPROVAL_CARD_FORM_OPTION_STRING",t.ADJUST_POSITION_APPROVAL_CARD_COMPONENT="ADJUST_POSITION_APPROVAL_CARD_COMPONENT",t.AFTER_GET_APPROVAL_PROJECT_CARD_LIST="AFTER_GET_APPROVAL_PROJECT_CARD_LIST",t.AFTER_GET_APPROVAL_CONTACT_CARD_LIST="AFTER_GET_APPROVAL_CONTACT_CARD_LIST",t.AFTER_GET_APPROVAL_STOCK_CARD_LIST="AFTER_GET_APPROVAL_STOCK_CARD_LIST",t.AFTER_GET_APPROVAL_WAREHOUSE_CARD_TREE="AFTER_GET_APPROVAL_WAREHOUSE_CARD_TREE",t.CHANGE_APPROVAL_TEMP_COMMON_STRING="CHANGE_APPROVAL_TEMP_COMMON_STRING"},1775:function(e,t,a){},1776:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=v(a(47)),o=v(a(1267)),l=v(a(129)),i=v(a(100)),c=v(a(14)),u=v(a(32)),p=v(a(171)),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(1265),a(128),a(99),a(78),a(51),a(170);var s=v(a(1)),f=a(17),m=(a(18),a(127)),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(27));function v(e){return e&&e.__esModule?e:{default:e}}var E=p.default.TreeNode,_=(0,f.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=a.props.selectList;return a.state={searchContent:"",selectedKeys:"",selectCardList:n},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),d(t,[{key:"render",value:function(){var e=this,t=this.props,a=(t.dispatch,t.showSingleModal,t.title),n=t.modalCategoryList,d=t.modalCardList,f=t.onOk,v=t.selectListFunc,_=t.closeModal,y=(t.selectList,t.showCheckBox,this.state),C=y.searchContent,S=y.selectedKeys,O=y.selectCardList,h=n?function e(t,a){return t&&t.map(function(t,n){return t.childList&&t.childList.length?s.default.createElement(E,{key:""+t.uuid+g.TREE_JOIN_STR+t.name+g.TREE_JOIN_STR+!!t.top,title:t.name},e(t.childList,a)):s.default.createElement(E,{key:""+t.uuid+g.TREE_JOIN_STR+t.name+g.TREE_JOIN_STR+!!t.top,title:t.name,checkable:!0})})}(n.toJS(),["全部"]):"",T=d.toJS().filter(function(e){return!C||(e.code.indexOf(C)>-1||e.name.indexOf(C)>-1)}),A=T.every(function(e){return O.findIndex(function(t){return t.code===e.code&&t.name===e.name})>-1});return s.default.createElement(r.default,{className:"select-modal",title:a,visible:!0,onCancel:function(){_(),e.setState({selectedKeys:""})},width:"800px",height:"319px",footer:[s.default.createElement(u.default,{key:"cancel",type:"ghost",onClick:function(){_(),e.setState({selectedKeys:""})}},"取 消"),s.default.createElement(u.default,{key:"save",type:"primary",onClick:function(){f(O),_(),e.setState({selectedKeys:""})}},"保 存")]},s.default.createElement("div",{className:"lsqc-contacts-card-top"},s.default.createElement("div",{className:"table-tree-container",style:{height:T.length>5?"634px":"249px"}},s.default.createElement(p.default,{checkable:!0,checkStrictly:!0,checkedKeys:O.map(function(e){return""+e.uuid+g.TREE_JOIN_STR+e.name+g.TREE_JOIN_STR+e.top}),onCheck:function(t,a){var n=a.checked,r=a.node.props.eventKey,o=O,l=r.split(g.TREE_JOIN_STR),i=l[0],c=l[1],u=l[2];n?(o.push({code:"",name:c,type:"CTGY",top:"true"===u,uuid:i}),e.setState({selectCardList:o})):(o=o.filter(function(e){return!(i===e.uuid)}),e.setState({selectCardList:o}))},defaultExpandAll:!0,onSelect:function(t){if(t[0]){var a=t[0].split(g.TREE_JOIN_STR),n=a[0],r=(a[1],a[2]);v(n,"true"===r?1:""),e.setState({searchContent:"",selectedKeys:t[0]})}},selectedKeys:[S||"all"+g.TREE_JOIN_STR+"全部"+g.TREE_JOIN_STR+"true"]},s.default.createElement(E,{key:"all"+g.TREE_JOIN_STR+"全部"+g.TREE_JOIN_STR+"true",title:"全部",checkable:!0}),h)),s.default.createElement(m.TableAll,{className:"contacts-table-right",style:{height:T.length>5?"634px":"249px"}},s.default.createElement("span",{className:"lsqc-serch"},s.default.createElement("span",{className:"lsqc-icon"},"搜索"),s.default.createElement(c.default,{className:"lsqc-serch-icon",type:"search"}),s.default.createElement(i.default,{placeholder:"",className:"lsqc-serch-input",value:C,onChange:function(t){e.setState({searchContent:t.target.value})}})),s.default.createElement("div",{className:"table-title-wrap"},s.default.createElement("ul",{className:"table-title table-title-charge"},s.default.createElement("li",{onClick:function(){if(A){var t=O;T.forEach(function(e){t=t.filter(function(t){return!(e.code===t.code&&e.name===t.name)})}),e.setState({selectCardList:t})}else{var a=O.concat(T.map(function(e){return e.type="CARD",e.top=!1,e}));a=a.filter(function(e,t){return a.findIndex(function(t){return t.code===e.code&&t.name===e.name})===t}),e.setState({selectCardList:a})}}},s.default.createElement(l.default,{checked:A})),s.default.createElement("li",null,s.default.createElement("span",null,"编号")),s.default.createElement("li",null,s.default.createElement("span",null,"名称")))),s.default.createElement(m.TableBody,{style:{height:T&&T.length>5?"374px":"249px"}},T&&T.map(function(t){var a=t.uuid?t.uuid:t.cardUuid,n=O.some(function(e){return t.name===e.name&&t.code===e.code});return s.default.createElement(m.TableItem,{className:"contacts-table-width-charge",key:t.uuid,onClick:function(r){r.stopPropagation();var o=O;n?(o=o.filter(function(e){return!(t.code===e.code&&t.name===e.name)}),e.setState({selectCardList:o})):(o.push({code:t.code,name:t.name,type:"CARD",top:!1,uuid:a}),e.setState({selectCardList:o}))}},s.default.createElement("li",null,s.default.createElement(l.default,{checked:n})),s.default.createElement("li",null,t.code),s.default.createElement("li",null,t.name))})))),s.default.createElement("div",{className:"charge-chosen-project"},s.default.createElement("span",null,"已选类别或卡片："),O&&O.map(function(t,a){return s.default.createElement(o.default,{closable:!0,onClose:function(t){t.preventDefault(),O.splice(a,1),e.setState({selectCardList:O})}},""+(t.code?t.code+g.APPROVAL_JOIN_STR:"")+t.name)})),s.default.createElement("div",{style:{display:O.length>0?"":"none",margin:"0 0 10px 20px"}},O.length,"个类别或卡片"))}}]),t}())||n;t.default=_},1777:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,o,l=g(a(176)),i=g(a(14)),c=g(a(174)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(175),a(78),a(173);var p=g(a(1)),d=a(18),s=a(17);a(2735);var f=a(489),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(2737));function g(e){return e&&e.__esModule?e:{default:e}}var v=(0,s.immutableRenderDecorator)((o=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={currentSelectIndex:-1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.page,n=t.componentList,r=t.addComponent,o=t.deleteComponent,u=t.adjustPosition,s=t.changeOptionString,g=t.basicComponentList,v=this.state.currentSelectIndex,E=g?g.toJS():[],_=p.default.createElement(c.default,null,E.map(function(t,a){return p.default.createElement(c.default.Item,{key:a},p.default.createElement("span",{className:"approval-from-click-area setting-common-ant-dropdown-menu-item",onClick:function(){r(t),e.setState({currentSelectIndex:n.size})}},f.componentName[t.componentType]))})),y=n.get(v)?n.get(v):(0,d.fromJS)({}),C=m[y.get("componentType")];return p.default.createElement("div",{className:"approval-form-diy-wrap"},p.default.createElement("div",{className:"approval-form-diy-left"},p.default.createElement("ul",{className:"approval-form-diy-list"},n.map(function(t,a){return p.default.createElement("li",{className:"approval-form-diy-item "+(v==a||-1==v&&n.size-1==a?" approval-form-diy-item-cur":""),key:a,onClick:function(){e.setState({currentSelectIndex:t.get("orderValue")})}},p.default.createElement("span",{className:"approval-form-diy-item-sort"},0===a?p.default.createElement("i",{className:"go-up"}):p.default.createElement(i.default,{type:"arrow-up",className:"go-up",onClick:function(e){u(a,a-1)}}),n.size-1===a?null:p.default.createElement(i.default,{type:"arrow-down",className:"go-down",onClick:function(e){u(a,a+1)}})),p.default.createElement("span",{className:"approval-form-diy-item-name"},"NumberField"===t.get("componentType")?t.get("label")+(t.get("unit")?"("+t.get("unit")+")":""):t.get("label")),p.default.createElement("span",{className:"approval-form-diy-item-type"},f.componentName[t.get("componentType")]),p.default.createElement("span",{className:"approval-form-diy-item-delete"},t.get("canDelete")?p.default.createElement("div",{className:"approval-form-diy-item-delete-Icon",onClick:function(t){t.stopPropagation(),o(a),v.toString()===a.toString()&&e.setState({currentSelectIndex:-1})}},p.default.createElement(i.default,{type:"close"})):null))}),p.default.createElement("li",{className:"approval-form-diy-item—add"},p.default.createElement(l.default,{overlay:_,placement:"topCenter",trigger:["click"],disabled:"MX"===a},p.default.createElement("span",{className:"MX"===a?"approval-form-diy-item—add-btn approval-form-diy-item—add-btn-disabled":"approval-form-diy-item—add-btn"},p.default.createElement(i.default,{type:"plus"})," 添加字段"))))),p.default.createElement("div",{className:"approval-form-diy-right"},C?p.default.createElement(C,{changeOptionString:s,currentSetting:y,page:a}):null))}}]),t}(),r.displayName="FormDiy",n=o))||n;t.default=v},1778:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelModifyApprovalCard=t.deleteApprovalCard=t.saveApprovalCard=t.changeApprovalCardFormOptionString=t.adjustPositionApprovalCardComponent=t.deleteApprovalCardFormComponent=t.addApprovalCardFormComponent=t.changeApprovalCardCommonString=t.beforeInsertOrModifyDetail=void 0;var n=d(a(37));a(38);var r=p(a(1480)),o=d(a(52)),l=a(22),i=p(a(30)),c=a(1427),u=a(1407);function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}t.beforeInsertOrModifyDetail=function(e,t){return function(a){a({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getApprovalDetail","GET","detailCode="+("insert"===e?"":e),function(n){a({type:r.SWITCH_LOADING_MASK}),(0,l.showMessage)(n)&&(a({type:r.BEFORE_INSERT_OR_MODIFY_DETAIL,receivedData:n.data,insertOrMidify:"insert"===e?"insert":"modify"}),t())})}},t.changeApprovalCardCommonString=function(e,t){return{type:r.CHANGE_APPROVAL_CARD_COMMON_STRING,place:e,value:t}},t.addApprovalCardFormComponent=function(e){return{type:r.ADD_APPROVAL_CARD_FORM_COMPONENT,component:e}},t.deleteApprovalCardFormComponent=function(e){return{type:r.DELETE_APPROVAL_CARD_FORM_COMPONENT,index:e}},t.adjustPositionApprovalCardComponent=function(e,t){return{type:r.ADJUST_POSITION_APPROVAL_CARD_COMPONENT,fromPost:e,toPost:t}},t.changeApprovalCardFormOptionString=function(e,t){return{type:r.CHANGE_APPROVAL_CARD_FORM_OPTION_STRING,arr:e,value:t}},t.saveApprovalCard=function(e,t,a){return function(p,d){var s=[],f=(e=e.delete("modelList")).get("formSetting").get("componentList");e.get("detailLabel")?e.get("detailLabel").length>50&&s.push("明细名称最长50个字符"):s.push("明细名称必填"),e.get("placeHolder").length>50&&s.push("提示文字最长50个字符"),f.size||s.push("必须有自定义组件");var m=(0,u.checkComponentList)(f,s,e);if(s=m.checkoutList,e=m.approvalTemp,s.length)return i.Alert(s.reduce(function(e,t){return e+","+t}));p({type:r.SWITCH_LOADING_MASK}),"insert"===t?(0,o.default)("createApprovalDetail","POST",JSON.stringify(e),function(e){p({type:r.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(n.default.info(e.message),p(c.approvalActions.getProcessSelectModel()),a())}):"modify"===t&&(0,o.default)("modifyApprovalDetail","POST",JSON.stringify(e),function(e){p({type:r.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(n.default.info(e.message),p(c.approvalActions.getProcessSelectModel()),a())})}},t.deleteApprovalCard=function(e,t){return function(a,i){a({type:r.SWITCH_LOADING_MASK}),(0,o.default)("deleteApprovalDetail","POST",JSON.stringify(e),function(e){a({type:r.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(n.default.info(e.message?e.message:"成功"),a(c.approvalActions.getProcessSelectModel()),t())})}},t.cancelModifyApprovalCard=function(){return{type:r.CANCEL_MODIFY_APPROVAL_CARD}}},2727:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=d(a(1)),l=a(56),i=d(a(2728)),c=d(a(2738)),u=a(1427),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(102));function d(e){return e&&e.__esModule?e:{default:e}}var s=(0,l.connect)(function(e){return e})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){this.props.dispatch(u.approvalActions.getProcessSelectModel()),this.props.dispatch(u.approvalActions.getApprovalBasicComponentList()),this.props.dispatch(p.getRunningCategory())}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.approvalState!==e.approvalState||this.state!==t}},{key:"render",value:function(){var e=this.props,t=e.approvalState;e.dispatch;return({ApprovalTemplate:function(){return o.default.createElement(i.default,{history:history})},ApprovalCard:function(){return o.default.createElement(c.default,{history:history})}}[t.getIn(["views","currentPage"])]||function(){return o.default.createElement("div",null)})()}}]),t}())||n;t.default=s},2728:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,o,l=A(a(1234)),i=A(a(14)),c=A(a(129)),u=A(a(47)),p=A(a(32)),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1235),a(78),a(128),a(46),a(51);var s=A(a(1)),f=a(56);a(1775);var m=A(a(1224)),g=A(a(1226)),v=A(a(1227)),E=(T(a(30)),a(127)),_=a(489),y=A(a(2730)),C=T(a(60)),S=a(1427),O=T(a(1407)),h=T(a(102));function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}var N=(0,f.connect)(function(e){return e})((o=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={checkList:[],showApprovalTempModal:!1,showDeleteModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),d(t,[{key:"componentDidMount",value:function(){}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.approvalState!==e.approvalState||this.props.homeState!==e.homeState||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,a=t.approvalState,n=t.homeState,r=t.dispatch,o=this.state,d=o.checkList,f=o.showApprovalTempModal,T=o.showDeleteModal,A=n.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]),N=a.get("modelList"),L=a.get("basicComponentList"),P=n.get("pageList"),b=n.getIn(["views","isSpread"]);return s.default.createElement(m.default,{type:"config-five",className:"approval-template"},s.default.createElement(g.default,null,s.default.createElement("div",{className:"flex-title-left"},b?"":s.default.createElement(v.default,{pageItem:P.get("Config"),onClick:function(e,t,a){r(C.addPageTabPane("ConfigPanes",a,a,t)),r(C.addHomeTabpane(e,a,t))}}),s.default.createElement(E.Tab,{tabList:["审批模板","审批明细"].map(function(e){return{key:e,value:e,item:e}}),activeKey:"审批模板",tabFunc:function(e,t){"审批明细"===e.key&&r(S.approvalActions.switchApprovalActivePage("ApprovalCard"))}})),s.default.createElement("div",{className:"flex-title-right"},s.default.createElement(p.default,{disabled:!A,className:"title-right",type:"ghost",onClick:function(){r(O.beforInsertOrModifyApprovalTemplate("insert",{},function(){return e.setState({showApprovalTempModal:!0})}))}},"新增"),s.default.createElement(p.default,{className:"title-right",type:"ghost",disabled:!d.length||!A,onClick:function(){e.setState({showDeleteModal:!0})}},"删除"),s.default.createElement(u.default,{visible:T,title:"温馨提示",onCancel:function(){return e.setState({showDeleteModal:!1})},footer:[s.default.createElement(p.default,{key:"back",type:"ghost",onClick:function(){return e.setState({showDeleteModal:!1})}},"取消"),s.default.createElement(p.default,{key:"submit",type:"primary",onClick:function(){r(O.deleteApprovalTemplate(d,function(){return e.setState({checkList:[],showDeleteModal:!1})}))}},"确定")]},s.default.createElement("div",null,"「工作台-审批」中该模版相关设置将被清除、审批数据将无法对接小番财务。确定删除吗？")),s.default.createElement(p.default,{className:"title-right",type:"ghost",onClick:function(){r(S.approvalActions.getProcessSelectModel()),r(h.getRunningCategory())}},"刷新"))),s.default.createElement(E.TableWrap,{notPosition:!0},s.default.createElement(E.TableAll,null,s.default.createElement(E.TableTitle,{className:"approval-template-table-width",titleList:["审批名称","明细范围","关联流水","更新模版","状态"],hasCheckbox:!0,selectAcAll:d.length===N.size&&0!==N.size,onClick:function(){if(d.length===N.size&&0!==N.size)e.setState({checkList:[]});else{var t=N.map(function(e){return e.get("modelCode")});e.setState({checkList:t.toJS()})}}}),s.default.createElement(E.TableBody,null,N.map(function(t,a){return s.default.createElement(E.TableItem,{className:"approval-template-table-width approval-template-table-style",key:a,line:a+1},s.default.createElement("li",{onClick:function(){var a=d,n=a.findIndex(function(e){return e===t.get("modelCode")});-1===n?(a.push(t.get("modelCode")),e.setState({checkList:a})):(a.splice(n,1),e.setState({checkList:a}))}},s.default.createElement(c.default,{checked:d.indexOf(t.get("modelCode"))>-1})),s.default.createElement("li",null,s.default.createElement("span",null,s.default.createElement("span",{className:"approval-card-table-click",onClick:function(){var a={jrCategoryType:t.get("jrCategoryType"),modelCode:t.get("modelCode"),jrCategoryUuid:t.get("jrCategoryId")};_.hideCategoryCanSelect.indexOf(t.get("jrCategoryType"))>-1?r(O.beforInsertOrModifyApprovalhideCategoryTemp("modify",a,function(){return e.setState({showApprovalTempModal:!0})})):r(O.beforInsertOrModifyApprovalTemplate("modify",a,function(){return e.setState({showApprovalTempModal:!0})}))}},t.get("modelName")))),s.default.createElement(E.TableOver,{textAlign:"left"},t.get("detailScope")),s.default.createElement(E.TableOver,{textAlign:"left"},t.get("jrCategoryName")),s.default.createElement("li",null,s.default.createElement(i.default,{type:"reload",style:{fontSize:"14px"},onClick:function(){r(O.getApprovalModelSync(t.get("modelCode")))}})),s.default.createElement("li",null,s.default.createElement(l.default,{className:"use-unuse-style",disabled:!A,checked:"ENABLE"===t.get("modelStatus"),onChange:function(e){"ENABLE"===t.get("modelStatus")?r(O.changeApprovalModelState(t.get("modelCode"),"DISABLE",a)):r(O.changeApprovalModelState(t.get("modelCode"),"ENABLE",a))}})))})))),f?s.default.createElement(y.default,{basicComponentList:L,onCancel:function(){e.setState({showApprovalTempModal:!1})}}):null)}}]),t}(),r.displayName="ApprovalTemplate",n=o))||n;t.default=N},2730:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,o,l=m(a(47)),i=m(a(32)),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(51);var u=m(a(1)),p=a(56),d=m(a(2731)),s=m(a(2734)),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1407));function m(e){return e&&e.__esModule?e:{default:e}}var g=(0,p.connect)(function(e){return e})((o=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={currentPage:0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),c(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.approvalTemplateState!==e.approvalTemplateState||this.props.allState!==e.allState||this.props.basicComponentList!==e.basicComponentList||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,a=t.approvalTemplateState,n=t.onCancel,r=t.allState,o=t.homeState,c=t.dispatch,p=t.basicComponentList,m=this.state.currentPage,g=o.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]),v=a.get("categoryData"),E=a.get("projectCardList"),_=a.get("contactCardList"),y=a.get("stockCardList"),C=a.get("warehouseCardList"),S=a.getIn(["views","insertOrModify"]),O=a.get("approvalTemp"),h=O.get("baseSetting"),T=O.get("formSetting"),A=O.get("detailList"),N=O.get("modelComponentList"),L=a.get("modalCategoryList"),P=a.get("modalCardList"),b=r.get("runningCategory"),M=r.get("hideCategoryList"),I=r.get("accountList"),R=o.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1,D={0:u.default.createElement(d.default,{dispatch:c,baseSetting:h,hideCategoryList:M,runningCategory:b,categoryData:v,detailList:A,projectCardList:E,contactCardList:_,stockCardList:y,modelComponentList:N,modalCategoryList:L,modalCardList:P,accountList:I,enableWarehouse:R,warehouseCardList:C,insertOrModify:S}),1:u.default.createElement(s.default,{dispatch:c,formSetting:T,basicComponentList:p})};return u.default.createElement(l.default,{visible:!0,maskClosable:!1,width:"800px",title:"insert"===S?"新增审批模板":"修改审批模板",onCancel:function(){n(),c(f.cancelModifyApprovalTemplate())},footer:[u.default.createElement(i.default,{key:"cancel",type:"ghost",onClick:function(){n(),c(f.cancelModifyApprovalTemplate())}},"取 消"),u.default.createElement(i.default,{key:"save",type:"primary",disabled:!g,onClick:function(){c(f.saveApprovalTemplate(O,S,function(){return n()}))}},"保 存")]},u.default.createElement("div",{className:"approval-modal-wrap"},u.default.createElement("div",{className:"approval-modal-title"},["基础设置","表单设置"].map(function(t,a){return u.default.createElement("span",{key:a,className:a===m?"approval-modal-title-item approval-modal-title-item-cur":"approval-modal-title-item",onClick:function(){a!==m&&e.setState({currentPage:a})}},t)})),D[m]))}}]),t}(),r.displayName="ApprovalTemplateModal",n=o))||n;t.default=g},2731:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=y(a(45)),o=y(a(89)),l=y(a(179)),i=y(a(100)),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(55),a(88),a(178),a(99);var u=y(a(1)),p=a(18),d=a(17),s=_(a(27)),f=a(489),m=a(101),g=y(a(2732)),v=y(a(2733)),E=_(a(1407));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var S=(0,d.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),c(t,[{key:"render",value:function(){var e,t=this.props,a=t.dispatch,n=t.baseSetting,c=t.hideCategoryList,d=t.runningCategory,_=t.categoryData,y=t.detailList,S=t.projectCardList,O=t.contactCardList,h=t.stockCardList,T=t.warehouseCardList,A=t.modelComponentList,N=t.modalCategoryList,L=t.modalCardList,P=t.accountList,b=t.enableWarehouse,M=t.insertOrModify,I=n.get("modelCode"),R=n.get("modelName"),D=n.get("jrCategoryType"),j=n.get("jrCategoryId"),w=n.get("jrCategoryName"),k=n.get("remark"),F=n.get("detailScope"),V=n.get("use"),J=n.get("selectPerson"),G=n.get("nature"),H=n.get("natureScope"),x=n.get("jrAccount"),B=n.get("jrAccountScope"),Y=n.get("jrAccountRequired"),W=n.get("contact"),q=n.get("contactScope"),X=n.get("contactRequired"),K=n.get("depot"),z=n.get("depotScope"),U=n.get("stock"),Z=n.get("stockScope"),Q=n.get("project"),$=n.get("projectScope"),ee=n.get("projectRequired"),te=n.get("jrCategory"),ae=n.get("jrCategoryScope"),ne=(0,f.getSelectJrCategoryList)(d,c),re=n.get("digest"),oe=n.get("digestRequired"),le=n.get("outContactScope"),ie=n.get("outProjectScope"),ce=n.get("outStockScope"),ue=n.get("jrCategoryProperty"),pe=n.get("incomeExpensesProperty"),de=(0,m.getCategorynameByType)(D).categoryTypeObj,se=_.getIn([de,"contactsRange"]),fe=_.getIn([de,"stockRange"]),me=_.get("projectRange"),ge=_.get("newProjectRange"),ve=_.get("propertyCarryover"),Ee="";Ee=f.receiptList.indexOf(D)>-1?"RECEIPT":"PAYMENT";var _e=!1;return"SX_HW_FW"!==ve&&(""!==ve||"LB_YYSR"!==D&&"LB_YYZC"!==D)||(_e=!0),u.default.createElement("div",{className:"approval-base-config-wrap"},u.default.createElement("div",{className:"approval-card-input-wrap"},u.default.createElement("span",{className:"approval-card-input-tip"},"审批名称："),u.default.createElement("span",{className:"insert"===M?"approval-card-input approval-card-input-prefix":"approval-card-input"},u.default.createElement(i.default,{disabled:!1,value:R,placeholder:"必填，最长50个字符",onChange:function(e){a(E.changeApprovalBaseSettingCommonString("modelName",e.target.value))}})),u.default.createElement("span",{className:"approval-card-input-tip approval-card-input-tip-right"},"关联流水类别："),u.default.createElement("span",{className:"approval-card-input"},u.default.createElement(l.default,{style:{width:285},value:_.get("canUse")?w?j+s.TREE_JOIN_STR+D+s.TREE_JOIN_STR+w:"":w||"",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:ne,placeholder:"必填，请选择流水类别",treeDefaultExpandAll:!0,onChange:function(e){var t=e.split(s.TREE_JOIN_STR);if(f.hideCategoryCanSelect.indexOf(t[1])>-1){var n=(0,f.getSelectJrCategoryChildList)(t[0],d,t[2]);a(E.changeApprovalBaseSettingHideCategory(I,t[0],t[1],t[2],n))}else{var r=(0,f.getSelectJrCategoryChildList)(t[0],d,t[2]);a(E.changeApprovalBaseSettingJrCategory(I,t[0],t[1],t[2],r))}}}))),u.default.createElement("div",{className:"approval-card-input-wrap"},u.default.createElement("span",{className:"approval-card-input-tip",style:{display:_e?"":"none"}},"LB_YYSR"===D?"收入":"支出","属性："),u.default.createElement("span",{className:"approval-card-input",style:{display:_e?"":"none"}},u.default.createElement(o.default.Group,{onChange:function(e){a(E.switchApprovalBaseSettingCategoryProperty(e.target.value))},value:pe},u.default.createElement(o.default,{value:"SX_FW",key:"1"},"服务"),u.default.createElement(o.default,{value:"SX_HW",key:"2"},"货物"))),u.default.createElement("span",{className:_e?"approval-card-input-tip approval-card-input-tip-right":"approval-card-input-tip"},"备注："),u.default.createElement("span",{className:"approval-card-input"},u.default.createElement(i.default,{disabled:!1,value:k,placeholder:"\b选填，最长100个字符",onChange:function(e){return a(E.changeApprovalBaseSettingCommonString("remark",e.target.value))}}))),u.default.createElement("div",{className:"approval-card-input-wrap"},u.default.createElement("span",{className:"approval-card-input-tip"},"明细范围："),u.default.createElement("span",{className:"approval-card-input"},"SX_HW"===ue||"SX_HW"===pe||"LB_ZZ"===D||"LB_CHDB"===D?u.default.createElement(r.default,C({mode:"multiple",disabled:!1,value:F.size?F.map(function(e){return e.get("value")}).toJS():[],style:{width:"100%"},placeholder:"必填"},"disabled",!0)):u.default.createElement(r.default,(C(e={mode:"multiple",disabled:!1,value:F.size?F.map(function(e){return e.get("code")+s.TREE_JOIN_STR+e.get("value")}).toJS():[],style:{width:"100%"},placeholder:"必填"},"disabled",!D),C(e,"onChange",function(e){var t=e.map(function(e){var t=e.split(s.TREE_JOIN_STR);return{code:t[0],value:t[1]}});a(E.changeApprovalBaseSettingCommonString("detailScope",(0,p.fromJS)(t)))}),e),y&&y.filter(function(e){return e.get("detailNature")===Ee}).toJS().map(function(e){return u.default.createElement(r.default.Option,{value:""+e.code+s.TREE_JOIN_STR+e.value,disabled:"采购存货套件"===e.value},e.value)})))),w?f.hideCategoryCanSelect.indexOf(D)>-1?u.default.createElement(v.default,{jrCategoryType:D,jrCategoryProperty:ue,dispatch:a,use:V,selectPerson:J,nature:G,natureScope:H,jrAccount:x,jrAccountScope:B,jrAccountRequired:Y,contact:W,contactScope:q,contactRequired:X,depot:K,depotScope:z,project:Q,projectScope:$,categoryData:_,projectRequired:ee,stockCardList:h,projectCardList:S,contactCardList:O,modelComponentList:A,jrCategoryName:w,contactsRange:se,projectRange:me,newProjectRange:ge,stockRange:fe,modalCategoryList:N,modalCardList:L,jrCategory:te,jrCategoryScope:ae,digest:re,digestRequired:oe,payOrReceive:Ee,accountList:P,enableWarehouse:b,warehouseCardList:T,stock:U,stockScope:Z,outContactScope:le,outProjectScope:ie,outStockScope:ce,propertyCarryover:ve,incomeExpensesProperty:pe}):u.default.createElement(g.default,{jrCategoryType:D,jrCategoryProperty:ue,dispatch:a,use:V,selectPerson:J,nature:G,natureScope:H,jrAccount:x,jrAccountScope:B,jrAccountRequired:Y,contact:W,contactScope:q,contactRequired:X,depot:K,depotScope:z,project:Q,projectScope:$,categoryData:_,projectRequired:ee,stockCardList:h,projectCardList:S,contactCardList:O,modelComponentList:A,jrCategoryName:w,contactsRange:se,projectRange:me,newProjectRange:ge,stockRange:fe,modalCategoryList:N,modalCardList:L,jrCategory:te,jrCategoryScope:ae,digest:re,digestRequired:oe,payOrReceive:Ee,accountList:P,enableWarehouse:b,warehouseCardList:T,stock:U,stockScope:Z,outContactScope:le,outProjectScope:ie,outStockScope:ce,propertyCarryover:ve,incomeExpensesProperty:pe}):null)}}]),t}())||n;t.default=S},2732:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=C(a(179)),o=C(a(37)),l=C(a(14)),i=C(a(129)),c=C(a(45)),u=C(a(89)),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(178),a(38),a(78),a(128),a(55),a(88);var d=C(a(1)),s=a(18),f=a(17),m=y(a(27)),g=a(101),v=a(489),E=C(a(1776)),_=y(a(1407));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}var S=(0,f.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showChoosenModal:!1,showContactChoosenModal:!1,showStockChoosenModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),p(t,[{key:"componentDidMount",value:function(){if(this.props.jrAccountScope.size){var e=[],t=this.props.accountList.size?this.props.accountList.getIn([0,"childList"]):(0,s.fromJS)([]);this.props.jrAccountScope.forEach(function(a){var n=a.indexOf("-"),r=a.substring(0,n),o=t.find(function(e){return e.get("uuid")===r});o&&e.push(""+o.get("uuid")+m.APPROVAL_JOIN_STR+o.get("name"))}),this.props.dispatch(_.changeApprovalBaseSettingCommonString("jrAccountScope",(0,s.fromJS)(e))),"IN_MODEL"===this.props.jrAccount&&this.props.dispatch(_.changeApprovalFormOptionStringFromType(m.ZH_COMPONENT_TYPE,"selectValueList",(0,s.fromJS)(e)))}}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.jrCategoryType,p=t.jrCategoryProperty,f=(t.use,t.selectPerson,t.nature),y=(t.natureScope,t.jrAccount),C=t.jrAccountScope,S=t.jrAccountRequired,O=t.contact,h=t.contactScope,T=t.contactRequired,A=t.project,N=t.projectScope,L=t.projectRequired,P=t.depot,b=t.depotScope,M=t.categoryData,I=t.stockCardList,R=t.projectCardList,D=t.contactCardList,j=t.modelComponentList,w=t.jrCategoryName,k=t.contactsRange,F=t.projectRange,V=(t.newProjectRange,t.stockRange),J=t.modalCategoryList,G=t.modalCardList,H=t.jrCategory,x=t.jrCategoryScope,B=t.digest,Y=t.digestRequired,W=t.payOrReceive,q=t.accountList,X=t.enableWarehouse,K=t.warehouseCardList,z=t.stock,U=t.stockScope,Z=t.outContactScope,Q=t.outProjectScope,$=t.outStockScope,ee=t.propertyCarryover,te=t.incomeExpensesProperty,ae=this.state,ne=ae.showChoosenModal,re=ae.showContactChoosenModal,oe=ae.showStockChoosenModal,le=q.size?q.getIn([0,"childList"]):(0,s.fromJS)([]);if(w){var ie=(0,g.getCategorynameByType)(n).categoryTypeObj,ce=M.get("propertyCostList"),ue=M.get("beProject"),pe=M.getIn([ie,"contactsManagement"]),de={display:"SX_HW"===p||"SX_HW"===te?"none":""},se=(0,s.fromJS)({categoryType:n,handleType:"",oriState:"LB_FYZC"===n?"STATE_FY":"",propertyCarryover:""===ee&&"LB_YYZC"===n?te:ee});return d.default.createElement("div",null,d.default.createElement("div",null,"RECEIPT"===W?d.default.createElement("div",null,d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"},"收款账户："),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement(u.default.Group,{onChange:function(e){if("NO"===e.target.value)a(_.changeApprovalBaseSettingCommonString("jrAccount",e.target.value)),a(_.changeApprovalBaseSettingCommonString("jrAccountScope",(0,s.fromJS)([]))),a(_.changeApprovalBaseSettingCommonString("jrAccountRequired",!1));else if(a(_.changeApprovalBaseSettingCommonString("jrAccount",e.target.value)),"IN_MODEL"===e.target.value){var t=j.find(function(e){return e.get("jrComponentType")===m.ZH_COMPONENT_TYPE});if(t){var n=C.size?C.toJS():["","",""];(t=t.toJS()).selectValueList=n,t.required=S,a(_.addApprovalFormComponent(t))}}"IN_MODEL"===y&&"IN_MODEL"!==e.target.value&&a(_.deleteApprovalFormComponentFromType(m.ZH_COMPONENT_TYPE))},value:y},d.default.createElement(u.default,{value:"NO",key:"1"},"不启用"),d.default.createElement(u.default,{value:"IN_MODEL",key:"2"},"在模版中选择"),d.default.createElement(u.default,{value:"IN_DETAIL",key:"3",style:de},"在明细中选择")))),d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"}),d.default.createElement("span",null,"范围："),d.default.createElement("span",{className:"approval-card-input approval-card-input-choosen"},d.default.createElement(c.default,{mode:"multiple",showSearch:!0,disabled:"NO"===y,value:C.size?C.toJS():[],style:{width:"100%"},placeholder:"启用必填",onChange:function(e){var t=e;a(_.changeApprovalBaseSettingCommonString("jrAccountScope",(0,s.fromJS)(t))),"IN_MODEL"===y&&a(_.changeApprovalFormOptionStringFromType(m.ZH_COMPONENT_TYPE,"selectValueList",(0,s.fromJS)(t)))}},le&&le.toJS().map(function(e,t){return d.default.createElement(c.default.Option,{value:""+e.uuid+m.APPROVAL_JOIN_STR+e.name,key:e.name},""+e.name)})))),d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"}),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement("span",{onClick:function(){"NO"!==y&&(a(_.changeApprovalBaseSettingCommonString("jrAccountRequired",!S)),a(_.changeApprovalFormOptionStringFromType(m.ZH_COMPONENT_TYPE,"required",!S)))}},d.default.createElement(i.default,{disabled:"NO"===y,checked:S})," 必填")))):null,d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"},"摘要："),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement(u.default.Group,{onChange:function(e){if(a(_.changeApprovalBaseSettingCommonString("digest",e.target.value)),"NO"===e.target.value)a(_.changeApprovalBaseSettingCommonString("digest",e.target.value)),a(_.changeApprovalBaseSettingCommonString("digestRequired",!1));else if(a(_.changeApprovalBaseSettingCommonString("digest",e.target.value)),"IN_MODEL"===e.target.value){var t=j.find(function(e){return e.get("jrComponentType")===m.ZY_COMPONENT_TYPE});t&&((t=t.toJS()).required=Y,a(_.addApprovalFormComponent(t)))}"IN_MODEL"===B&&"IN_MODEL"!==e.target.value&&a(_.deleteApprovalFormComponentFromType(m.ZY_COMPONENT_TYPE))},value:B},d.default.createElement(u.default,{value:"NO",key:"1"},"不启用"),d.default.createElement(u.default,{value:"IN_MODEL",key:"2"},"在模版中输入"),d.default.createElement(u.default,{value:"IN_DETAIL",key:"3",style:de},"在明细中输入")))),d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"}),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement("span",{onClick:function(){"NO"!==B&&(a(_.changeApprovalBaseSettingCommonString("digestRequired",!Y)),a(_.changeApprovalFormOptionStringFromType(m.ZY_COMPONENT_TYPE,"required",!Y)))}},d.default.createElement(i.default,{disabled:"NO"===B,checked:Y})," 必填")))),d.default.createElement("div",{className:"approval-card-break"}),x.size?d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"},"流水类别："),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement(u.default.Group,{onChange:function(e){if(a(_.changeApprovalBaseSettingCommonString("jrCategory",e.target.value)),"IN_MODEL"===e.target.value){var t=j.find(function(e){return e.get("jrComponentType")===m.LSLB_COMPONENT_TYPE});t&&(t=t.toJS(),a(_.addApprovalFormComponent(t)))}"IN_DETAIL"===e.target.value&&a(_.deleteApprovalFormComponentFromType(m.LSLB_COMPONENT_TYPE))},value:H},d.default.createElement(u.default,{value:"IN_MODEL",key:"1"},"在模版中选择"),d.default.createElement(u.default,{value:"IN_DETAIL",key:"2",style:de},"在明细中选择")))):null,ce.size>1?d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"},"费用性质："),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement(u.default.Group,{onChange:function(e){a(_.changeApprovalBaseSettingCommonString("nature",e.target.value));var t=["销售费用","管理费用"];if("IN_MODEL"===e.target.value){var n=j.find(function(e){return e.get("jrComponentType")===m.FYXZ_COMPONENT_TYPE});n&&((n=n.toJS()).selectValueList=t,a(_.addApprovalFormComponent(n)),a(_.changeApprovalBaseSettingCommonString("natureScope",(0,s.fromJS)(t))))}"IN_DETAIL"===e.target.value&&a(_.changeApprovalBaseSettingCommonString("natureScope",(0,s.fromJS)(t))),"XSFY"!==e.target.value&&"GLFY"!==e.target.value||a(_.changeApprovalBaseSettingCommonString("natureScope",(0,s.fromJS)([]))),"IN_MODEL"===f&&"IN_MODEL"!==e.target.value&&a(_.deleteApprovalFormComponentFromType(m.FYXZ_COMPONENT_TYPE))},value:f},d.default.createElement(u.default,{value:"XSFY",key:"1"},"销售费用"),d.default.createElement(u.default,{value:"GLFY",key:"2"},"管理费用"),d.default.createElement(u.default,{value:"IN_MODEL",key:"3"},"在模版中选择"),d.default.createElement(u.default,{value:"IN_DETAIL",key:"4"},"在明细中选择")))):null,"SX_HW"===p||"SX_HW"===te?d.default.createElement("div",null,d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"},"存货："),d.default.createElement("span",null,"选择范围："),d.default.createElement("span",{className:"approval-card-input approval-card-input-choosen"},d.default.createElement("div",{className:["approval-card-input-item-wrap","NO"===z?"approval-card-input-item-wrap-disabled":""].join(" ")},d.default.createElement("div",null,d.default.createElement("ul",{className:"approval-card-input-item-container"},U.map(function(e,t){return d.default.createElement("li",null,d.default.createElement("span",null,(e.get("code")?e.get("code")+"-":"")+e.get("name")),d.default.createElement(l.default,{type:"close",onClick:function(){if("NO"!==z){var e=U.delete(t);a(_.changeApprovalBaseSettingCommonString("stockScope",e))}}}))})))),d.default.createElement("div",{style:{display:"NO"===z?"none":""},className:"approval-card-chosen-word",onClick:function(){V.size?a(_.getStockAllCardList(V,"stock","",function(){return e.setState({showStockChoosenModal:!0})})):o.default.info("请在流水设置中选择存货范围")}},"选择"))),oe?d.default.createElement(E.default,{modalCategoryList:J,modalCardList:G,dispatch:a,selectList:U.size?U.toJS():[],title:"选择存货",closeModal:function(){return e.setState({showStockChoosenModal:!1})},onOk:function(e){var t=e;a(_.changeApprovalBaseSettingCommonString("stockScope",(0,s.fromJS)(t)))},selectListFunc:function(e,t){a("all"===e?_.getStockAllCardList(V,"stock",!0):_.getStockSomeCardList(e,t))}}):null):null,"SX_HW"===p||"SX_HW"===te?d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"}),d.default.createElement("span",null,"排除范围："),d.default.createElement("span",{className:"approval-card-input approval-card-input-choosen"},d.default.createElement(r.default,{multiple:!0,style:{width:"100%"},disabled:"NO"===z,value:$.size?$.map(function(e){return""+e.get("uuid")+m.TREE_JOIN_STR+e.get("code")+m.TREE_JOIN_STR+e.get("name")}).toJS():[],dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(0,v.formatCommonCardList)(I),placeholder:"选填",treeDefaultExpandAll:!0,onChange:function(e){var t=[];e.forEach(function(e){var a=e.split(m.TREE_JOIN_STR);t.push({uuid:a[0],code:a[1],name:a[2],top:!1,type:"CARD"})}),a(_.changeApprovalBaseSettingCommonString("outStockScope",(0,s.fromJS)(t)))}}))):null,!X||"SX_HW"!==p&&"SX_HW"!==te?null:d.default.createElement("div",null,d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"},"仓库："),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement(u.default.Group,{onChange:function(e){if("NO"===e.target.value)a(_.changeApprovalBaseSettingCommonString("depot",e.target.value)),a(_.changeApprovalBaseSettingCommonString("depotScope",(0,s.fromJS)([]))),a(_.changeApprovalBaseSettingCommonString("depotRequired",!1));else if(a(_.changeApprovalBaseSettingCommonString("depot",e.target.value)),"IN_MODEL"===e.target.value){var t=j.find(function(e){return e.get("jrComponentType")===m.CK_COMPONENT_TYPE});t&&(t=t.toJS(),a(_.addApprovalFormComponent(t)))}"IN_MODEL"===P&&"IN_MODEL"!==e.target.value&&a(_.deleteApprovalFormComponentFromType(m.CK_COMPONENT_TYPE))},value:P},d.default.createElement(u.default,{value:"IN_MODEL",key:"2"},"在模版中选择"),d.default.createElement(u.default,{value:"IN_DETAIL",key:"3"},"在套件明细中选择")))),d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"}),d.default.createElement("span",null,"范围："),d.default.createElement("span",{className:"approval-card-input approval-card-input-choosen"},d.default.createElement(r.default,{multiple:!0,style:{width:"100%"},value:b.size?b.map(function(e){return""+e.get("uuid")+m.TREE_JOIN_STR+e.get("code")+m.TREE_JOIN_STR+e.get("name")}).toJS():[],dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(0,v.formatWarehouseCardList)(K),placeholder:"必填，请选择仓库",treeDefaultExpandAll:!0,onChange:function(e){var t=[];e.forEach(function(e){var a=e.split(m.TREE_JOIN_STR);t.push({uuid:a[0],code:a[1],name:a[2],top:!1,type:"CTGY"})}),a(_.changeApprovalBaseSettingCommonString("depotScope",(0,s.fromJS)(t)))}})))),pe?d.default.createElement("div",null,d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"},"往来单位："),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement(u.default.Group,{onChange:function(e){if("NO"===e.target.value)a(_.changeApprovalBaseSettingCommonString("contact",e.target.value)),a(_.changeApprovalBaseSettingCommonString("contactScope",(0,s.fromJS)([]))),a(_.changeApprovalBaseSettingCommonString("outContactScope",(0,s.fromJS)([]))),a(_.changeApprovalBaseSettingCommonString("contactRequired",!1));else if(a(_.changeApprovalBaseSettingCommonString("contact",e.target.value)),"IN_MODEL"===e.target.value){var t=j.find(function(e){return e.get("jrComponentType")===m.WLDW_COMPONENT_TYPE});t&&((t=t.toJS()).required=T,a(_.addApprovalFormComponent(t)))}"IN_MODEL"===O&&"IN_MODEL"!==e.target.value&&a(_.deleteApprovalFormComponentFromType(m.WLDW_COMPONENT_TYPE))},value:O},d.default.createElement(u.default,{value:"NO",key:"1"},"不启用"),d.default.createElement(u.default,{value:"IN_MODEL",key:"2"},"在模版中选择"),d.default.createElement(u.default,{value:"IN_DETAIL",key:"3",style:de},"在明细中选择")))),d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"}),d.default.createElement("span",null,"选择范围："),d.default.createElement("span",{className:"approval-card-input approval-card-input-choosen"},d.default.createElement("div",{className:["approval-card-input-item-wrap","NO"===O?"approval-card-input-item-wrap-disabled":""].join(" ")},d.default.createElement("div",null,d.default.createElement("ul",{className:"approval-card-input-item-container"},h.map(function(e,t){return d.default.createElement("li",null,d.default.createElement("span",null,(e.get("code")?e.get("code")+"-":"")+e.get("name")),d.default.createElement(l.default,{type:"close",onClick:function(){if("NO"!==O){var e=h.delete(t);a(_.changeApprovalBaseSettingCommonString("contactScope",e))}}}))})))),d.default.createElement("div",{style:{display:"NO"===O?"none":""},className:"approval-card-chosen-word",onClick:function(){k.size?a(_.getRelativeAllCardList(k,"contact","",function(){return e.setState({showContactChoosenModal:!0})})):o.default.info("请在流水设置中选择往来范围")}},"选择"))),d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"}),d.default.createElement("span",null,"排除范围："),d.default.createElement("span",{className:"approval-card-input approval-card-input-choosen"},d.default.createElement(r.default,{multiple:!0,style:{width:"100%"},disabled:"NO"===O,value:Z.size?Z.map(function(e){return""+e.get("uuid")+m.TREE_JOIN_STR+e.get("code")+m.TREE_JOIN_STR+e.get("name")}).toJS():[],dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(0,v.formatCommonCardList)(D),placeholder:"选填",treeDefaultExpandAll:!0,onChange:function(e){var t=[];e.forEach(function(e){var a=e.split(m.TREE_JOIN_STR);t.push({uuid:a[0],code:a[1],name:a[2],top:!1,type:"CARD"})}),a(_.changeApprovalBaseSettingCommonString("outContactScope",(0,s.fromJS)(t)))}}))),re?d.default.createElement(E.default,{modalCategoryList:J,modalCardList:G,dispatch:a,selectList:h.size?h.toJS():[],title:"选择往来",closeModal:function(){return e.setState({showContactChoosenModal:!1})},onOk:function(e){var t=e;a(_.changeApprovalBaseSettingCommonString("contactScope",(0,s.fromJS)(t)))},selectListFunc:function(e,t){a("all"===e?_.getRelativeAllCardList(k,"contact",!0):_.getRelativeSomeCardList(e,t))}}):null,d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"}),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement("span",{onClick:function(){"NO"!==O&&(a(_.changeApprovalBaseSettingCommonString("contactRequired",!T)),a(_.changeApprovalFormOptionStringFromType(m.WLDW_COMPONENT_TYPE,"required",!T)))}},d.default.createElement(i.default,{disabled:"NO"===O,checked:T})," 必填")))):null,ue?d.default.createElement("div",null,d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"},"项目："),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement(u.default.Group,{onChange:function(e){if("NO"===e.target.value)a(_.changeApprovalBaseSettingCommonString("project",e.target.value)),a(_.changeApprovalBaseSettingCommonString("projectScope",(0,s.fromJS)([]))),a(_.changeApprovalBaseSettingCommonString("outProjectScope",(0,s.fromJS)([]))),a(_.changeApprovalBaseSettingCommonString("projectRequired",!1));else if(a(_.changeApprovalBaseSettingCommonString("project",e.target.value)),"IN_MODEL"===e.target.value){var t=j.find(function(e){return e.get("jrComponentType")===m.XM_COMPONENT_TYPE});t&&((t=t.toJS()).required=L,a(_.addApprovalFormComponent(t)))}"IN_MODEL"===A&&"IN_MODEL"!==e.target.value&&a(_.deleteApprovalFormComponentFromType(m.XM_COMPONENT_TYPE))},value:A},d.default.createElement(u.default,{value:"NO",key:"1"},"不启用"),d.default.createElement(u.default,{value:"IN_MODEL",key:"2"},"在模版中选择"),d.default.createElement(u.default,{value:"IN_DETAIL",key:"3",style:de},"在明细中选择")))),d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"}),d.default.createElement("span",null,"选择范围："),d.default.createElement("span",{className:"approval-card-input approval-card-input-choosen"},d.default.createElement("div",{className:["approval-card-input-item-wrap","NO"===A?"approval-card-input-item-wrap-disabled":""].join(" ")},d.default.createElement("div",null,d.default.createElement("ul",{className:"approval-card-input-item-container"},N.map(function(e,t){return d.default.createElement("li",null,d.default.createElement("span",null,(e.get("code")?e.get("code")+"-":"")+e.get("name")),d.default.createElement(l.default,{type:"close",onClick:function(){if("NO"!==A){var e=N.delete(t);a(_.changeApprovalBaseSettingCommonString("projectScope",e))}}}))})))),d.default.createElement("div",{style:{display:"NO"===A?"none":""},className:"approval-card-chosen-word",onClick:function(){if(F.size){var t=F;a(_.getProjectAllCardList(t,"project","",function(){return e.setState({showChoosenModal:!0})}))}else o.default.info("请在流水设置中选择项目范围")}},"选择"))),d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"}),d.default.createElement("span",null,"排除范围："),d.default.createElement("span",{className:"approval-card-input approval-card-input-choosen"},d.default.createElement(r.default,{multiple:!0,style:{width:"100%"},disabled:"NO"===A,value:Q.size?Q.map(function(e){return""+e.get("uuid")+m.TREE_JOIN_STR+e.get("code")+m.TREE_JOIN_STR+e.get("name")}).toJS():[],dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(0,v.formatCommonCardList)((0,g.CommonProjectTest)(se,R)),placeholder:"选填",treeDefaultExpandAll:!0,onChange:function(e){var t=[];e.forEach(function(e){var a=e.split(m.TREE_JOIN_STR);t.push({uuid:a[0],code:a[1],name:a[2],top:!1,type:"CARD"})}),a(_.changeApprovalBaseSettingCommonString("outProjectScope",(0,s.fromJS)(t)))}}))),ne?d.default.createElement(E.default,{modalCategoryList:J,modalCardList:(0,g.CommonProjectTest)(se,G),dispatch:a,selectList:N.size?N.toJS():[],title:"选择项目",closeModal:function(){return e.setState({showChoosenModal:!1})},onOk:function(e){var t=e;a(_.changeApprovalBaseSettingCommonString("projectScope",(0,s.fromJS)(t))),"IN_MODEL"===A&&a(_.changeApprovalFormOptionStringFromType(m.XM_COMPONENT_TYPE,"selectValueList",(0,s.fromJS)(t)))},selectListFunc:function(e,t){a("all"===e?_.getProjectAllCardList(F,"project",!0):_.getProjectSomeCardList(e,t))}}):null,d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"}),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement("span",{onClick:function(){"NO"!==A&&(a(_.changeApprovalBaseSettingCommonString("projectRequired",!L)),a(_.changeApprovalFormOptionStringFromType(m.XM_COMPONENT_TYPE,"required",!L)))}},d.default.createElement(i.default,{disabled:"NO"===A,checked:L})," 必填")))):null)}}}]),t}())||n;t.default=S},2733:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=_(a(179)),o=_(a(14)),l=_(a(45)),i=_(a(129)),c=_(a(89)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(178),a(78),a(55),a(128),a(88);var p=_(a(1)),d=a(18),s=a(17),f=E(a(27)),m=(a(101),a(489)),g=_(a(1776)),v=E(a(1407));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}var y=(0,s.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showChoosenModal:!1,showContactChoosenModal:!1,showStockChoosenModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.jrCategoryType,u=(t.jrCategoryProperty,t.use,t.selectPerson,t.nature,t.natureScope,t.jrAccount,t.jrAccountScope),s=(t.jrAccountRequired,t.contact,t.contactScope,t.contactRequired,t.project,t.projectScope,t.projectRequired,t.depot,t.depotScope),E=(t.categoryData,t.stockCardList),_=(t.projectCardList,t.contactCardList,t.modelComponentList),y=t.jrCategoryName,C=(t.contactsRange,t.projectRange,t.newProjectRange,t.stockRange,t.modalCategoryList),S=t.modalCardList,O=(t.jrCategory,t.jrCategoryScope,t.digest),h=t.digestRequired,T=(t.payOrReceive,t.accountList),A=t.enableWarehouse,N=t.warehouseCardList,L=t.stock,P=t.stockScope,b=(t.outContactScope,t.outProjectScope,t.outStockScope),M=(t.propertyCarryover,t.incomeExpensesProperty,this.state),I=(M.showChoosenModal,M.showContactChoosenModal,M.showStockChoosenModal),R=T.size?T.getIn([0,"childList"]):(0,d.fromJS)([]);if(y){var D={display:["LB_CHDB"].indexOf(n)>-1?"none":""};return p.default.createElement("div",null,p.default.createElement("div",{className:"approval-card-input-wrap"},p.default.createElement("span",{className:"approval-card-input-tip"},"摘要："),p.default.createElement("span",{className:"approval-card-input"},p.default.createElement(c.default.Group,{onChange:function(e){if(a(v.changeApprovalBaseSettingCommonString("digest",e.target.value)),"NO"===e.target.value)a(v.changeApprovalBaseSettingCommonString("digest",e.target.value)),a(v.changeApprovalBaseSettingCommonString("digestRequired",!1));else if(a(v.changeApprovalBaseSettingCommonString("digest",e.target.value)),"IN_MODEL"===e.target.value){var t=_.find(function(e){return e.get("jrComponentType")===f.ZY_COMPONENT_TYPE});t&&((t=t.toJS()).required=h,a(v.addApprovalFormComponent(t)))}"IN_MODEL"===O&&"IN_MODEL"!==e.target.value&&a(v.deleteApprovalFormComponentFromType(f.ZY_COMPONENT_TYPE))},value:O},p.default.createElement(c.default,{value:"NO",key:"1"},"不启用"),p.default.createElement(c.default,{value:"IN_MODEL",key:"2"},"在模版中输入"),p.default.createElement(c.default,{value:"IN_DETAIL",key:"3",style:D},"在明细中输入")))),p.default.createElement("div",{className:"approval-card-input-wrap"},p.default.createElement("span",{className:"approval-card-input-tip"}),p.default.createElement("span",{className:"approval-card-input"},p.default.createElement("span",{onClick:function(){"NO"!==O&&(a(v.changeApprovalBaseSettingCommonString("digestRequired",!h)),a(v.changeApprovalFormOptionStringFromType(f.ZY_COMPONENT_TYPE,"required",!h)))}},p.default.createElement(i.default,{disabled:"NO"===O,checked:h})," 必填"))),p.default.createElement("div",{className:"approval-card-break"}),"LB_ZZ"===n?p.default.createElement("div",{className:"approval-card-input-wrap"},p.default.createElement("span",{className:"approval-card-input-tip"},"账户范围："),p.default.createElement("span",{className:"approval-card-input approval-card-input-choosen"},p.default.createElement(l.default,{mode:"multiple",showSearch:!0,value:u.size?u.toJS():[],style:{width:"100%"},placeholder:"必填",onChange:function(e){var t=e;a(v.changeApprovalBaseSettingCommonString("jrAccountScope",(0,d.fromJS)(t)))}},R&&R.toJS().map(function(e,t){return p.default.createElement(l.default.Option,{value:""+e.uuid+f.APPROVAL_JOIN_STR+e.name,key:e.name},""+e.name)})))):null,"LB_CHDB"===n?p.default.createElement("div",null,p.default.createElement("div",{className:"approval-card-input-wrap"},p.default.createElement("span",{className:"approval-card-input-tip"},"存货："),p.default.createElement("span",null,"选择范围："),p.default.createElement("span",{className:"approval-card-input approval-card-input-choosen"},p.default.createElement("div",{className:["approval-card-input-item-wrap","NO"===L?"approval-card-input-item-wrap-disabled":""].join(" ")},p.default.createElement("div",null,p.default.createElement("ul",{className:"approval-card-input-item-container"},P.map(function(e,t){return p.default.createElement("li",null,p.default.createElement("span",null,(e.get("code")?e.get("code")+"-":"")+e.get("name")),p.default.createElement(o.default,{type:"close",onClick:function(){if("NO"!==L){var e=P.delete(t);a(v.changeApprovalBaseSettingCommonString("stockScope",e))}}}))})))),p.default.createElement("div",{style:{display:"NO"===L?"none":""},className:"approval-card-chosen-word",onClick:function(){a(v.getStockAllCardList([],"hidecategory","",function(){return e.setState({showStockChoosenModal:!0})}))}},"选择"))),I?p.default.createElement(g.default,{modalCategoryList:C,modalCardList:S,dispatch:a,selectList:P.size?P.toJS():[],title:"选择存货",closeModal:function(){return e.setState({showStockChoosenModal:!1})},onOk:function(e){var t=e;a(v.changeApprovalBaseSettingCommonString("stockScope",(0,d.fromJS)(t)))},selectListFunc:function(e,t){a("all"===e?v.getStockAllCardList([],"hidecategory",!0):v.getStockSomeCardList(e,t))}}):null):null,"LB_CHDB"===n?p.default.createElement("div",{className:"approval-card-input-wrap"},p.default.createElement("span",{className:"approval-card-input-tip"}),p.default.createElement("span",null,"排除范围："),p.default.createElement("span",{className:"approval-card-input approval-card-input-choosen"},p.default.createElement(r.default,{multiple:!0,style:{width:"100%"},disabled:"NO"===L,value:b.size?b.map(function(e){return""+e.get("uuid")+f.TREE_JOIN_STR+e.get("code")+f.TREE_JOIN_STR+e.get("name")}).toJS():[],dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(0,m.formatCommonCardList)(E),placeholder:"选填",treeDefaultExpandAll:!0,onChange:function(e){var t=[];e.forEach(function(e){var a=e.split(f.TREE_JOIN_STR);t.push({uuid:a[0],code:a[1],name:a[2],top:!1,type:"CARD"})}),a(v.changeApprovalBaseSettingCommonString("outStockScope",(0,d.fromJS)(t)))}}))):null,A&&"LB_CHDB"===n?p.default.createElement("div",null,p.default.createElement("div",{className:"approval-card-input-wrap"},p.default.createElement("span",{className:"approval-card-input-tip"},"仓库："),p.default.createElement("span",{className:"approval-card-input"},p.default.createElement(r.default,{multiple:!0,style:{width:"100%"},value:s.size?s.map(function(e){return""+e.get("uuid")+f.TREE_JOIN_STR+e.get("code")+f.TREE_JOIN_STR+e.get("name")}).toJS():[],dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(0,m.formatWarehouseCardList)(N),placeholder:"必填，请选择仓库",treeDefaultExpandAll:!0,onChange:function(e){var t=[];e.forEach(function(e){var a=e.split(f.TREE_JOIN_STR);t.push({uuid:a[0],code:a[1],name:a[2],top:!1,type:"CTGY"})}),a(v.changeApprovalBaseSettingCommonString("depotScope",(0,d.fromJS)(t)))}})))):null)}}}]),t}())||n;t.default=y},2734:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=p(a(1)),l=a(17),i=(u(a(27)),p(a(1777))),c=u(a(1407));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var d=(0,l.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.formSetting,n=e.basicComponentList,r=a.get("componentList");return o.default.createElement(i.default,{componentList:r,basicComponentList:n,addComponent:function(e){return t(c.addApprovalFormComponent(e))},deleteComponent:function(e){return t(c.deleteApprovalFormComponent(e))},adjustPosition:function(e,a){return t(c.adjustPositionApprovalFormComponent(e,a))},changeOptionString:function(e,a,n){return t(c.changeApprovalFormOptionString(["approvalTemp","formSetting","componentList",e,a],n))}})}}]),t}())||n;t.default=d},2735:function(e,t,a){},2737:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Nothing=t.RelateField=t.DDAttachment=t.DDPhotoField=t.InnerContactField=t.DDMultiSelectField=t.DDSelectField=t.DDDateRangeField=t.DDDateField=t.NumberField=t.MoneyField=t.TableField=t.TextareaField=t.TextField=void 0;var n,r=m(a(89)),o=m(a(129)),l=m(a(37)),i=m(a(14)),c=m(a(100)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(88),a(128),a(38),a(78),a(99);var p=m(a(1)),d=(a(18),a(17)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(27)),f=a(489);function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){var t=e.jrComponentType,a=e.selectValueList,n=e.onChange,r=e.addOption,o=e.deleteOption,l=e.canModify;return t?p.default.createElement("div",null,p.default.createElement("div",{className:"approval-form-input-wrap"},p.default.createElement("span",{className:"approval-form-input-tip"},"选项："),p.default.createElement("span",{className:"approval-form-input"},"系统设置"))):p.default.createElement("div",null,a&&a.map(function(e,u){var d=t===s.LSLB_COMPONENT_TYPE||t===s.ZH_COMPONENT_TYPE?e.split(s.APPROVAL_JOIN_STR)[1]:e;return p.default.createElement("div",{className:"approval-form-input-wrap",key:u},p.default.createElement("span",{className:"approval-form-input-tip"},0===u?"选项：":""),p.default.createElement("span",{className:"approval-form-input"},p.default.createElement(c.default,{disabled:!l,value:d,onChange:function(e){return n(u,e.target.value)},placeholder:"最多50字"})),p.default.createElement(i.default,{type:"minus-circle",className:"approval-form-input-add-icon",onClick:function(){a.size>1&&l&&o(u)}}),p.default.createElement(i.default,{type:"plus-circle",className:"approval-form-input-delete-icon",onClick:function(){a.size<200&&l&&r(u+1)}}))}))},y=function(e){var t=e.type,a=e.jrComponentType;if("common"===t)return p.default.createElement("div",{className:"approval-form-modify-tip"},p.default.createElement("p",null,p.default.createElement("span",{style:{color:"#cc0000"}},"*"),p.default.createElement("span",null,"流水必填字段，不可删除")));var n={FYXZ:"费用性质",XM:"项目",WLDW:"往来单位",LSLB:"关联流水类别",ZY:"摘要"};return p.default.createElement("div",{className:"approval-form-modify-tip"},p.default.createElement("p",null,p.default.createElement("span",{style:{color:"#cc0000"}},"*"),p.default.createElement("span",null,"系统字段，不可删除")),p.default.createElement("p",null,"可在“基础设置”",n[a]?"-“"+n[a]+"”":"","中关闭"))},C=function(e){var t=e.type;return p.default.createElement("div",{className:"approval-form-input-wrap"},p.default.createElement("span",{className:"approval-form-input-tip"},"组件类型："),p.default.createElement("span",{className:"approval-form-input"},f.componentName[t]))},S=function(e){var t=e.name,a=e.onChange,n=e.tip;return p.default.createElement("div",{className:"approval-form-input-wrap"},p.default.createElement("span",{className:"approval-form-input-tip"},n||"标题："),p.default.createElement("span",{className:"approval-form-input"},p.default.createElement(c.default,{disabled:!1,value:t,onChange:a,placeholder:"最多20字"})))},O=function(e){var t=e.tip,a=e.label,n=e.onChange,r=e.placeholder;return p.default.createElement("div",{className:"approval-form-input-wrap"},p.default.createElement("span",{className:"approval-form-input-tip"},t),p.default.createElement("span",{className:"approval-form-input"},p.default.createElement(c.default,{disabled:!1,value:a,onChange:n,placeholder:r||"最多50字"})))},h=function(e){var t=e.tip,a=e.checked,n=e.onClick,r=e.text,i=e.subText,c=e.canModify;return p.default.createElement("div",{className:"approval-form-input-wrap"},p.default.createElement("span",{className:"approval-form-input-tip"},t),p.default.createElement("span",{className:"approval-form-input"},p.default.createElement("span",{onClick:function(){!1===c?l.default.info("不可修改"):n()}},p.default.createElement(o.default,{disabled:!1===c,checked:a})," ",r,p.default.createElement("span",null,i?"("+i+")":""))))};t.TextField=(0,d.immutableRenderDecorator)(n=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.changeOptionString,a=e.currentSetting,n=e.page,r=a.get("canModify");a.get("canDelete");return p.default.createElement("div",{className:"approval-form-config-wrap"},a.get("jrComponentType")?p.default.createElement(y,{jrComponentType:a.get("jrComponentType")}):null,p.default.createElement(C,{type:"TextField"}),p.default.createElement(S,{name:a.get("label"),onChange:function(e){t(a.get("orderValue"),"label",e.target.value)}}),p.default.createElement(O,{tip:"提示文字：",label:a.get("placeHolder"),onChange:function(e){t(a.get("orderValue"),"placeHolder",e.target.value)}}),p.default.createElement(h,{tip:"",canModify:r,checked:a.get("required"),onClick:function(){t(a.get("orderValue"),"required",!a.get("required"))},text:"必填"}),p.default.createElement("div",{className:"approval-form-break"}),"MX"===n?null:p.default.createElement(h,{tip:"打印：",checked:a.get("print"),onClick:function(){t(a.get("orderValue"),"print",!a.get("print"))},text:"参与打印",subText:"如不勾选，打印时不显示该项"}))}}]),t}())||n,t.TextareaField=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.changeOptionString,a=e.currentSetting,n=e.page,r=a.get("canModify");return p.default.createElement("div",{className:"approval-form-config-wrap"},p.default.createElement(C,{type:"TextareaField"}),p.default.createElement(S,{name:a.get("label"),onChange:function(e){t(a.get("orderValue"),"label",e.target.value)}}),p.default.createElement(O,{tip:"提示文字：",label:a.get("placeHolder"),onChange:function(e){t(a.get("orderValue"),"placeHolder",e.target.value)}}),p.default.createElement(h,{tip:"",canModify:r,checked:a.get("required"),onClick:function(){t(a.get("orderValue"),"required",!a.get("required"))},text:"必填"}),p.default.createElement("div",{className:"approval-form-break"}),"MX"===n?null:p.default.createElement(h,{tip:"打印：",checked:a.get("print"),onClick:function(){t(a.get("orderValue"),"print",!a.get("print"))},text:"参与打印",subText:"如不勾选，打印时不显示该项"}))}}]),t}(),t.TableField=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.changeOptionString,a=e.currentSetting,n=(e.page,a.get("canModify")),r=a.get("canDelete");return p.default.createElement("div",{className:"approval-form-config-wrap"},r?null:p.default.createElement(y,{type:"common"}),p.default.createElement(C,{type:"TableField"}),p.default.createElement(S,{name:a.get("label"),onChange:function(e){t(a.get("orderValue"),"label",e.target.value)}}),p.default.createElement(O,{tip:"动作名称：",label:a.get("placeHolder"),onChange:function(e){t(a.get("orderValue"),"placeHolder",e.target.value)}}),p.default.createElement(h,{tip:"",canModify:n,checked:a.get("required"),onClick:function(){t(a.get("orderValue"),"required",!a.get("required"))},text:"必填"}),p.default.createElement("div",{className:"approval-form-break"}),p.default.createElement(h,{tip:"额外信息：",checked:a.get("extraInfo"),onClick:function(){t(a.get("orderValue"),"extraInfo",!a.get("extraInfo"))},text:"显示额外信息"}))}}]),t}(),t.MoneyField=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.changeOptionString,a=e.currentSetting,n=e.page,r=a.get("canModify"),o=a.get("canDelete");return p.default.createElement("div",{className:"approval-form-config-wrap"},o?null:p.default.createElement(y,{type:"common"}),p.default.createElement(C,{type:"MoneyField"}),p.default.createElement(S,{name:a.get("label"),onChange:function(e){t(a.get("orderValue"),"label",e.target.value)}}),p.default.createElement(O,{tip:"提示文字：",label:a.get("placeHolder"),onChange:function(e){t(a.get("orderValue"),"placeHolder",e.target.value)}}),p.default.createElement(h,{tip:"",canModify:r,checked:a.get("required"),onClick:function(){t(a.get("orderValue"),"required",!a.get("required"))},text:"必填"}),p.default.createElement("div",{className:"approval-form-break"}),p.default.createElement(h,{tip:"大写：",checked:a.get("upper"),onClick:function(){t(a.get("orderValue"),"upper",!a.get("upper"))},text:"显示大写"}),"MX"===n?null:p.default.createElement(h,{tip:"打印：",checked:a.get("print"),onClick:function(){t(a.get("orderValue"),"print",!a.get("print"))},text:"参与打印",subText:"如不勾选，打印时不显示该项"}))}}]),t}(),t.NumberField=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.changeOptionString,a=e.currentSetting,n=e.page,r=a.get("canModify");return p.default.createElement("div",{className:"approval-form-config-wrap"},p.default.createElement(C,{type:"NumberField"}),p.default.createElement(S,{name:a.get("label"),onChange:function(e){t(a.get("orderValue"),"label",e.target.value)}}),p.default.createElement(O,{tip:"提示文字：",label:a.get("placeHolder"),onChange:function(e){t(a.get("orderValue"),"placeHolder",e.target.value)}}),p.default.createElement(O,{tip:"单位：",label:a.get("unit"),onChange:function(e){t(a.get("orderValue"),"unit",e.target.value)},placeholder:"最多20字"}),p.default.createElement(h,{tip:"",canModify:r,checked:a.get("required"),onClick:function(){t(a.get("orderValue"),"required",!a.get("required"))},text:"必填"}),p.default.createElement("div",{className:"approval-form-break"}),"MX"===n?null:p.default.createElement(h,{tip:"打印：",checked:a.get("print"),onClick:function(){t(a.get("orderValue"),"print",!a.get("print"))},text:"参与打印",subText:"如不勾选，打印时不显示该项"}))}}]),t}(),t.DDDateField=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.changeOptionString,a=e.currentSetting,n=e.page,o=a.get("canModify"),l=a.get("canDelete");return p.default.createElement("div",{className:"approval-form-config-wrap"},l?null:p.default.createElement(y,{type:"common"}),p.default.createElement(C,{type:"DDDateField"}),p.default.createElement(S,{name:a.get("label"),onChange:function(e){t(a.get("orderValue"),"label",e.target.value)}}),p.default.createElement(h,{tip:"",canModify:o,checked:a.get("required"),onClick:function(){t(a.get("orderValue"),"required",!a.get("required"))},text:"必填"}),p.default.createElement("div",{className:"approval-form-break"}),p.default.createElement("div",{className:"approval-form-input-wrap"},p.default.createElement("span",{className:"approval-form-input-tip"},"日期类型："),p.default.createElement("span",{className:"approval-form-input"},p.default.createElement(r.default.Group,{onChange:function(e){t(a.get("orderValue"),"dateFormat",e.target.value),t(a.get("orderValue"),"unit","yyyy-MM-dd"===e.target.value?"天":"小时")},value:a.get("dateFormat")},p.default.createElement(r.default,{value:"yyyy-MM-dd",key:"2"},"年-月-日"),p.default.createElement(r.default,{value:"yyyy-MM-dd hh:mm",key:"1"},"年-月-日时：分")))),"MX"===n?null:p.default.createElement(h,{tip:"打印：",page:n,checked:a.get("print"),onClick:function(){t(a.get("orderValue"),"print",!a.get("print"))},text:"参与打印",subText:"如不勾选，打印时不显示该项"}))}}]),t}(),t.DDDateRangeField=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.changeOptionString,a=e.currentSetting,n=e.page,o=a.get("canModify");return p.default.createElement("div",{className:"approval-form-config-wrap"},p.default.createElement(C,{type:"DDDateRangeField"}),p.default.createElement(S,{tip:"标题1：",name:a.get("dateRangeLabelFirst"),onChange:function(e){t(a.get("orderValue"),"dateRangeLabelFirst",e.target.value),t(a.get("orderValue"),"label",e.target.value+"/"+a.get("dateRangeLabelLast"))}}),p.default.createElement(S,{tip:"标题2：",name:a.get("dateRangeLabelLast"),onChange:function(e){t(a.get("orderValue"),"dateRangeLabelLast",e.target.value),t(a.get("orderValue"),"label",a.get("dateRangeLabelFirst")+"/"+e.target.value)}}),p.default.createElement(O,{tip:"提示文字：",label:a.get("placeHolder"),onChange:function(e){t(a.get("orderValue"),"placeHolder",e.target.value)}}),p.default.createElement("div",{className:"approval-form-input-wrap"},p.default.createElement("span",{className:"approval-form-input-tip"},"日期类型："),p.default.createElement("span",{className:"approval-form-input"},p.default.createElement(r.default.Group,{onChange:function(e){t(a.get("orderValue"),"dateFormat",e.target.value),t(a.get("orderValue"),"unit","yyyy-MM-dd"===e.target.value?"天":"小时")},value:a.get("dateFormat")},p.default.createElement(r.default,{value:"yyyy-MM-dd",key:"2"},"年-月-日"),p.default.createElement(r.default,{value:"yyyy-MM-dd hh:mm",key:"1"},"年-月-日时：分")))),p.default.createElement(h,{tip:"",canModify:o,checked:a.get("required"),onClick:function(){t(a.get("orderValue"),"required",!a.get("required"))},text:"必填"}),p.default.createElement("div",{className:"approval-form-break"}),"MX"===n?null:p.default.createElement(h,{tip:"打印：",checked:a.get("print"),onClick:function(){t(a.get("orderValue"),"print",!a.get("print"))},text:"参与打印",subText:"如不勾选，打印时不显示该项"}))}}]),t}(),t.DDSelectField=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.changeOptionString,a=e.currentSetting,n=e.page,r=a.get("selectValueList"),o=a.get("canModify"),l=a.get("jrComponentType");return p.default.createElement("div",{className:"approval-form-config-wrap"},a.get("jrComponentType")?p.default.createElement(y,{jrComponentType:a.get("jrComponentType")}):null,p.default.createElement(C,{type:"DDSelectField"}),p.default.createElement(S,{name:a.get("label"),onChange:function(e){t(a.get("orderValue"),"label",e.target.value)}}),p.default.createElement(O,{tip:"提示文字：",label:a.get("placeHolder"),onChange:function(e){t(a.get("orderValue"),"placeHolder",e.target.value)}}),p.default.createElement(_,{jrComponentType:l,selectValueList:r,canModify:o,onChange:function(e,n){var o=r.set(e,n);t(a.get("orderValue"),"selectValueList",o)},addOption:function(e){var n=r.insert(e,"");t(a.get("orderValue"),"selectValueList",n)},deleteOption:function(e){var n=r.delete(e);t(a.get("orderValue"),"selectValueList",n)}}),p.default.createElement(h,{tip:"",checked:a.get("required"),canModify:o,onClick:function(){t(a.get("orderValue"),"required",!a.get("required"))},text:"必填"}),p.default.createElement("div",{className:"approval-form-break"}),"MX"===n?null:p.default.createElement(h,{tip:"打印：",checked:a.get("print"),onClick:function(){t(a.get("orderValue"),"print",!a.get("print"))},text:"参与打印",subText:"如不勾选，打印时不显示该项"}))}}]),t}(),t.DDMultiSelectField=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.changeOptionString,a=e.currentSetting,n=e.page,r=a.get("selectValueList"),o=a.get("canModify");return p.default.createElement("div",{className:"approval-form-config-wrap"},p.default.createElement(C,{type:"DDMultiSelectField"}),p.default.createElement(S,{name:a.get("label"),onChange:function(e){t(a.get("orderValue"),"label",e.target.value)}}),p.default.createElement(O,{tip:"提示文字：",label:a.get("placeHolder"),onChange:function(e){t(a.get("orderValue"),"placeHolder",e.target.value)}}),p.default.createElement(_,{selectValueList:r,canModify:o,onChange:function(e,n){var o=r.set(e,n);t(a.get("orderValue"),"selectValueList",o)},addOption:function(e){var n=r.insert(e,"");t(a.get("orderValue"),"selectValueList",n)},deleteOption:function(e){var n=r.delete(e);t(a.get("orderValue"),"selectValueList",n)}}),p.default.createElement(h,{tip:"",checked:a.get("required"),canModify:o,onClick:function(){t(a.get("orderValue"),"required",!a.get("required"))},text:"必填"}),p.default.createElement("div",{className:"approval-form-break"}),"MX"===n?null:p.default.createElement(h,{tip:"打印：",checked:a.get("print"),onClick:function(){t(a.get("orderValue"),"print",!a.get("print"))},text:"参与打印",subText:"如不勾选，打印时不显示该项"}))}}]),t}(),t.InnerContactField=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.changeOptionString,a=e.currentSetting,n=e.page,o=a.get("canModify");return p.default.createElement("div",{className:"approval-form-config-wrap"},p.default.createElement(C,{type:"InnerContactField"}),p.default.createElement(S,{name:a.get("label"),onChange:function(e){t(a.get("orderValue"),"label",e.target.value)}}),p.default.createElement(O,{tip:"提示文字：",label:a.get("placeHolder"),onChange:function(e){t(a.get("orderValue"),"placeHolder",e.target.value)}}),p.default.createElement(h,{tip:"",canModify:o,checked:a.get("required"),onClick:function(){t(a.get("orderValue"),"required",!a.get("required"))},text:"必填"}),p.default.createElement("div",{className:"approval-form-break"}),p.default.createElement("div",{className:"approval-form-input-wrap"},p.default.createElement("span",{className:"approval-form-input-tip"},"选项："),p.default.createElement("span",{className:"approval-form-input-tip"},p.default.createElement(r.default.Group,{onChange:function(e){t(a.get("orderValue"),"choice","MUTI\v"===e.target.value)},value:a.get("choice")?"MUTI\v":"ONE"},p.default.createElement(r.default,{value:"ONE",key:"1"},"只能选一人"),p.default.createElement(r.default,{value:"MUTI\v",key:"2"},"可同时选多人")))),"MX"===n?null:p.default.createElement(h,{tip:"打印：",checked:a.get("print"),onClick:function(){t(a.get("orderValue"),"print",!a.get("print"))},text:"参与打印",subText:"如不勾选，打印时不显示该项"}))}}]),t}(),t.DDPhotoField=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.changeOptionString,a=e.currentSetting,n=e.page,r=a.get("canModify");return p.default.createElement("div",{className:"approval-form-config-wrap"},p.default.createElement(C,{type:"DDPhotoField"}),p.default.createElement(S,{name:a.get("label"),onChange:function(e){t(a.get("orderValue"),"label",e.target.value)}}),p.default.createElement("span",{className:"approval-form-sub-tip"},"图片最多可添加9张"),p.default.createElement(h,{tip:"",canModify:r,checked:a.get("required"),onClick:function(){t(a.get("orderValue"),"required",!a.get("required"))},text:"必填"}),p.default.createElement("div",{className:"approval-form-break"}),"MX"===n?null:p.default.createElement(h,{tip:"打印：",checked:a.get("print"),onClick:function(){t(a.get("orderValue"),"print",!a.get("print"))},text:"参与打印",subText:"如不勾选，打印时不显示该项"}))}}]),t}(),t.DDAttachment=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.changeOptionString,a=e.currentSetting,n=e.page,r=a.get("canModify");return p.default.createElement("div",{className:"approval-form-config-wrap"},p.default.createElement(C,{type:"DDAttachment"}),p.default.createElement(S,{name:a.get("label"),onChange:function(e){t(a.get("orderValue"),"label",e.target.value)}}),p.default.createElement(h,{tip:"",canModify:r,checked:a.get("required"),onClick:function(){t(a.get("orderValue"),"required",!a.get("required"))},text:"必填"}),p.default.createElement("div",{className:"approval-form-break"}),"MX"===n?null:p.default.createElement(h,{tip:"打印：",checked:a.get("print"),onClick:function(){t(a.get("orderValue"),"print",!a.get("print"))},text:"参与打印",subText:"如不勾选，打印时不显示该项"}))}}]),t}(),t.RelateField=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.changeOptionString,a=e.currentSetting,n=(e.page,a.get("canModify"));return p.default.createElement("div",{className:"approval-form-config-wrap"},p.default.createElement(C,{type:"RelateField"}),p.default.createElement(S,{name:a.get("label"),onChange:function(e){t(a.get("orderValue"),"label",e.target.value)}}),p.default.createElement(O,{tip:"提示文字：",label:a.get("placeHolder"),onChange:function(e){t(a.get("orderValue"),"placeHolder",e.target.value)}}),p.default.createElement(h,{tip:"",canModify:n,checked:a.get("required"),onClick:function(){t(a.get("orderValue"),"required",!a.get("required"))},text:"必填"}),p.default.createElement("div",{className:"approval-form-break"}))}}]),t}(),t.Nothing=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,p.default.Component),u(t,[{key:"render",value:function(){return p.default.createElement("div",null,"请选择设置的组件")}}]),t}()},2738:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=C(a(37)),o=C(a(129)),l=C(a(47)),i=C(a(32)),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(38),a(128),a(46),a(51);var u=C(a(1)),p=a(56),d=C(a(1224)),s=C(a(1226)),f=C(a(1227)),m=a(127),g=C(a(2739)),v=y(a(60)),E=a(1427),_=y(a(1778));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}a(1775);var S=(0,p.connect)(function(e){return e})(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={checkList:[],showCardmodal:!1,showDeleteModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),c(t,[{key:"componentDidMount",value:function(){}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.approvalState!==e.approvalState||this.props.homeState!==e.homeState||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,a=t.approvalState,n=t.homeState,c=(t.approvalCardState,t.dispatch),p=this.state,y=p.checkList,C=p.showCardmodal,S=p.showDeleteModal,O=n.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]),h=a.get("detailList"),T=a.get("basicComponentList"),A=n.get("pageList"),N=n.getIn(["views","isSpread"]);return u.default.createElement(d.default,{type:"config-five",className:"approval-card"},u.default.createElement(s.default,null,u.default.createElement("div",{className:"flex-title-left"},N?"":u.default.createElement(f.default,{pageItem:A.get("Config"),onClick:function(e,t,a){c(v.addPageTabPane("ConfigPanes",a,a,t)),c(v.addHomeTabpane(e,a,t))}}),u.default.createElement(m.Tab,{tabList:["审批模板","审批明细"].map(function(e){return{key:e,value:e,item:e}}),activeKey:"审批明细",tabFunc:function(e,t){"审批模板"===e.key&&c(E.approvalActions.switchApprovalActivePage("ApprovalTemplate"))}})),u.default.createElement("div",{className:"flex-title-right"},u.default.createElement(i.default,{disabled:!O,className:"title-right",type:"ghost",onClick:function(){c(_.beforeInsertOrModifyDetail("insert",function(){return e.setState({showCardmodal:!0})}))}},"新增"),u.default.createElement(i.default,{className:"title-right",type:"ghost",disabled:!y.length||!O,onClick:function(){e.setState({showDeleteModal:!0})}},"删除"),u.default.createElement(l.default,{visible:S,title:"温馨提示",onCancel:function(){return e.setState({showDeleteModal:!1})},footer:[u.default.createElement(i.default,{key:"back",type:"ghost",onClick:function(){return e.setState({showDeleteModal:!1})}},"取消"),u.default.createElement(i.default,{key:"submit",type:"primary",onClick:function(){c(_.deleteApprovalCard(y,function(){return e.setState({checkList:[],showDeleteModal:!1})}))}},"确定")]},u.default.createElement("div",null,"确定删除？")),u.default.createElement(i.default,{className:"title-right",type:"ghost",onClick:function(){c(E.approvalActions.getProcessSelectModel())}},"刷新"))),u.default.createElement(m.TableWrap,{notPosition:!0},u.default.createElement(m.TableAll,null,u.default.createElement(m.TableTitle,{className:"approval-card-table-width",titleList:["明细名称","模板范围"],hasCheckbox:!0,selectAcAll:y.length===h.size&&0!==h.size,onClick:function(){if(y.length===h.size&&0!==h.size)e.setState({checkList:[]});else{var t=h.map(function(e){return e.get("detailCode")});e.setState({checkList:t.toJS()})}}}),u.default.createElement(m.TableBody,null,h.map(function(t,a){return u.default.createElement(m.TableItem,{className:"approval-card-table-width approval-card-table-style",key:a,line:a+1},u.default.createElement("li",{onClick:function(){var a=y,n=a.findIndex(function(e){return e===t.get("detailCode")});-1===n?(a.push(t.get("detailCode")),e.setState({checkList:a})):(a.splice(n,1),e.setState({checkList:a}))}},u.default.createElement(o.default,{checked:y.indexOf(t.get("detailCode"))>-1})),u.default.createElement(m.TableOver,{isLink:t.get("canModify"),className:t.get("canModify")?"":"approval-card-table-click-disabled",textAlign:"left",liOnClice:function(){t.get("canModify")?c(_.beforeInsertOrModifyDetail(t.get("detailCode"),function(){return e.setState({showCardmodal:!0})})):r.default.info("系统明细，暂不支持修改")}},t.get("label")),u.default.createElement(m.TableOver,{textAlign:"left"},t.get("modelScope")))})))),C?u.default.createElement(g.default,{basicComponentList:T,onCancel:function(){e.setState({showCardmodal:!1})}}):null)}}]),t}())||n;t.default=S},2739:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,o,l=g(a(47)),i=g(a(89)),c=g(a(100)),u=g(a(32)),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(88),a(99),a(51);var d=g(a(1)),s=a(56),f=(a(18),m(a(27)),g(a(1777)),m(a(1778)));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var v=(0,s.connect)(function(e){return e})((o=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),p(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.approvalcardState!==e.approvalCardState||this.props.basicComponentList!==e.basicComponentList||this.state!==t}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.approvalCardState,n=e.homeState,r=e.onCancel,o=(e.basicComponentList,n.getIn(["permissionInfo","Config"]).getIn(["edit","permission"])),p=a.get("cardData"),s=p.get("detailLabel"),m=p.get("placeHolder"),g=p.get("detailNature"),v=(p.get("formSetting").get("componentList"),a.getIn(["views","insertOrModify"]));return d.default.createElement(l.default,{visible:!0,maskClosable:!1,width:"800px",title:"insert"===v?"新增审批明细":"修改审批明细",onCancel:function(){r(),t(f.cancelModifyApprovalCard())},footer:[d.default.createElement(u.default,{key:"cancel",type:"ghost",onClick:function(){r(),t(f.cancelModifyApprovalCard())}},"取 消"),d.default.createElement(u.default,{key:"save",type:"primary",disabled:!o,onClick:function(){t(f.saveApprovalCard(p,v,function(){return r()}))}},"保 存")]},d.default.createElement("div",{className:"approval-modal-wrap"},d.default.createElement("div",{className:"approval-base-config-wrap"},d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"},"明细名称："),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement(c.default,{disabled:!1,value:s,placeholder:"必填，最长50个字符",onChange:function(e){return t(f.changeApprovalCardCommonString("detailLabel",e.target.value))}}))),d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"},"提示文字："),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement(c.default,{disabled:!1,value:m,placeholder:"选填，最长50个字符",onChange:function(e){return t(f.changeApprovalCardCommonString("placeHolder",e.target.value))}}))),d.default.createElement("div",{className:"approval-card-input-wrap"},d.default.createElement("span",{className:"approval-card-input-tip"},"明细性质："),d.default.createElement("span",{className:"approval-card-input"},d.default.createElement(i.default.Group,{onChange:function(e){return t(f.changeApprovalCardCommonString("detailNature",e.target.value))},value:g},d.default.createElement(i.default,{value:"PAYMENT",key:"1"},"付款"),d.default.createElement(i.default,{value:"RECEIPT",key:"2"},"收款")))))))}}]),t}(),r.displayName="ApprovalCardModal",n=o))||n;t.default=v},2740:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,a=arguments[1];return((e={},o(e,r.INIT_APPROVALTEMPLATE,function(){return l}),o(e,r.CANCEL_MODIFY_APPROVAL_TEMPLATE,function(){return t=t.set("approvalTemp",l.get("approvalTemp"))}),o(e,r.CHANGE_APPROVAL_BASE_SETTING_COMMON_STRING,function(){return t=t.setIn(["approvalTemp","baseSetting",a.place],a.value)}),o(e,r.CHANGE_APPROVAL_BASE_SETTING_JR_CATEGORY,function(){return t=t.setIn(["approvalTemp","baseSetting"],(0,n.fromJS)(a.baseSetting)).set("categoryData",(0,n.fromJS)(a.receivedData))}),o(e,r.BEFOR_INSERT_OR_MODIFY_APPROVAL_TEMPLATE,function(){return t=t.set("approvalTemp",a.templateData?(0,n.fromJS)(a.templateData):l.get("approvalTemp")).set("categoryData",a.receivedData?(0,n.fromJS)(a.receivedData):l.get("categoryData")).setIn(["views","insertOrModify"],(0,n.fromJS)(a.insertOrModify))}),o(e,r.ADD_APPROVAL_FORM_COMPONENT,function(){return t=t.updateIn(["approvalTemp","formSetting","componentList"],function(e){return e.set(e.size,(0,n.fromJS)(a.component).set("orderValue",e.size))})}),o(e,r.DELETE_APPROVAL_FORM_COMPONENT,function(){return t=t.updateIn(["approvalTemp","formSetting","componentList"],function(e){return e.delete(a.index).map(function(e,t){return e.set("orderValue",t)})})}),o(e,r.CHANGE_APPROVAL_FORM_OPTION_STRING,function(){return t=t.setIn(a.arr,a.value)}),o(e,r.ADJUST_POSITION_APPROVAL_FORM_COMPONENT,function(){var e=t.getIn(["approvalTemp","formSetting","componentList",a.fromPost]);return t=t.updateIn(["approvalTemp","formSetting","componentList"],function(t){return t.delete(a.fromPost).insert(a.toPost,e).map(function(e,t){return e.set("orderValue",t)})})}),o(e,r.AFTER_GET_APPROVAL_PROJECT_CARD_LIST,function(){return t=t.set("projectCardList",(0,n.fromJS)(a.receivedData))}),o(e,r.AFTER_GET_APPROVAL_CONTACT_CARD_LIST,function(){return t=t.set("contactCardList",(0,n.fromJS)(a.receivedData))}),o(e,r.AFTER_GET_APPROVAL_STOCK_CARD_LIST,function(){return t=t.set("stockCardList",(0,n.fromJS)(a.receivedData))}),o(e,r.AFTER_GET_APPROVAL_WAREHOUSE_CARD_TREE,function(){return t=t.set("warehouseCardList",(0,n.fromJS)(a.receivedData))}),o(e,r.CHANGE_APPROVAL_TEMP_COMMON_STRING,function(){return t=t.set(a.place,a.value)}),e)[a.type]||function(){return t})()};var n=a(18),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1480));function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=(0,n.fromJS)({views:{insertOrModify:"insert"},approvalTemp:{baseSetting:{modelCode:"",modelName:"",jrCategoryType:"",jrCategoryId:"",jrCategoryName:"",remark:"",detailScope:[],use:"BX",selectPerson:!1,nature:"XSFY",natureScope:[],contact:"NO",contactScope:[],project:"NO",projectScope:[]},financeSetting:null,gmtCreate:"",gmtModify:"",formSetting:{componentList:[]},detailList:[],modelComponentList:[]},categoryData:{},projectCardList:[],contactCardList:[],stockCardList:[],warehouseCardList:[],modalCategoryList:[],modalCardList:[],selectCardList:[]})},2741:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,a=arguments[1];return((e={},o(e,r.INIT_APPROVAL_CARD,function(){return l}),o(e,r.CANCEL_MODIFY_APPROVAL_CARD,function(){return t=t.set("cardData",l.get("cardData"))}),o(e,r.BEFORE_INSERT_OR_MODIFY_DETAIL,function(){return t.set("cardData",(0,n.fromJS)(a.receivedData)).setIn(["views","insertOrModify"],a.insertOrMidify)}),o(e,r.CHANGE_APPROVAL_CARD_COMMON_STRING,function(){return t=t.setIn(["cardData",a.place],a.value)}),o(e,r.ADD_APPROVAL_CARD_FORM_COMPONENT,function(){return t=t.updateIn(["cardData","formSetting","componentList"],function(e){return e.set(e.size,(0,n.fromJS)(a.component).set("orderValue",e.size))})}),o(e,r.DELETE_APPROVAL_CARD_FORM_COMPONENT,function(){return t=t.updateIn(["cardData","formSetting","componentList"],function(e){return e.delete(a.index).map(function(e,t){return e.set("orderValue",t)})})}),o(e,r.CHANGE_APPROVAL_CARD_FORM_OPTION_STRING,function(){return t=t.setIn(a.arr,a.value)}),o(e,r.ADJUST_POSITION_APPROVAL_CARD_COMPONENT,function(){var e=t.getIn(["cardData","formSetting","componentList",a.fromPost]);return t=t.updateIn(["cardData","formSetting","componentList"],function(t){return t.delete(a.fromPost).insert(a.toPost,e).map(function(e,t){return e.set("orderValue",t)})})}),e)[a.type]||function(){return t})()};var n=a(18),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1480));function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=(0,n.fromJS)({views:{insertOrModify:"insert"},cardData:{detailCode:"",detailLabel:"",placeHolder:"",formSetting:{componentList:[]},gmtCreate:"",gmtModify:"",modelList:[],modelScope:[]}})}}]);