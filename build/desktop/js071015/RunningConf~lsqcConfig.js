(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1223:function(e,t,i){},1224:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,r,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=l(i(1)),c=l(i(0)),u=i(17);function l(e){return e&&e.__esModule?e:{default:e}}i(1223);var d=(0,u.immutableRenderDecorator)((r=a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),s(t,[{key:"render",value:function(){var e=this.props,t=e.type,i=e.className,n=e.onClick;return o.default.createElement("div",{className:"container-wrap container-width-"+t+" "+i,onClick:n},this.props.children)}}]),t}(),a.displayName="ContainerWrap",a.propTypes={type:c.default.string.isRequired,className:c.default.string.isRequired},n=r))||n;t.default=d},1226:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(1),o=(a=s)&&a.__esModule?a:{default:a},c=i(17);i(1223);var u=(0,c.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){return o.default.createElement("div",{className:"flex-title"},this.props.children)}}]),t}())||n;t.default=u},1308:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeAllQcListInMoudle=t.initAllShow=t.firstChildToggle=t.addRunningBeginItem=t.searchCardList=t.restoreModification=t.contactsItemCheckboxCheckAll=t.contactsItemCheckboxCheck=t.changeModifyBtn=t.showContactsModal=t.changeQcList=t.QCTriangleSwitch=t.deleteBeginningMembers=t.saveBeginningBalance=t.getContactsMember=t.getDetailsListInfo=t.modifyPeriod=t.getBeginningList=t.showQcye=void 0;var n=d(i(37));i(38);var a=l(i(1519)),r=i(18),s=d(i(52)),o=i(22),c=l(i(30)),u=(l(i(43)),l(i(27)));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}t.showQcye=function(e){return function(t){t({type:a.SHOW_LSQC,value:e})}};var f=t.getBeginningList=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(i,n){var r=n().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]),u=!!r&&!(r.indexOf("GL")>-1);i({type:a.SWITCH_LOADING_MASK}),(0,s.default)("getBeginAllList","POST",JSON.stringify({isSimplify:u}),function(n){i({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(n)&&(i({type:a.GET_BEGINNING_LIST,receivedData:n.data,isPerid:e}),t&&n.data.result.balancePeriod.isCheckOut&&c.Alert("该账期已结账，反结账后即可修改期初值"))})}},g=(t.modifyPeriod=function(e){return function(t){t({type:a.SWITCH_LOADING_MASK}),(0,s.default)("modifyBeginPeriod","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):""}),function(i){t({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(i)&&t({type:a.MODIFY_PERIOD_ACCOUNT,issuedate:e})})}},t.getDetailsListInfo=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return function(t,r){var c="1"==i.get("property")||"2"==i.get("property")||"3"==i.get("property")?"":i.get("property");t({type:a.SWITCH_LOADING_MASK}),(0,s.default)("getBegin"+e+"List","POST",JSON.stringify({sobId:sessionStorage.getItem("sobId"),property:c,inventoryNature:i.get("inventoryNature"),projectProperty:"CARD_PROPERTY_BASIC"===i.get("property")?"XZ_PRODUCE":"XZ_CONSTRUCTION",used:!0,currentPage:n,pageSize:u.MXB_CARD_PAGE_SIZE}),function(n){t({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(n)&&(t({type:a.GET_BEGINNING_CATEGORY,receivedData:n.data,cardType:e,item:i}),t(p(!0,i.get("isDefinite"),i)))})}},t.getContactsMember=function(e,t,i,n,r,c,l){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;return function(f){var g=void 0,p=void 0,m=void 0;"0"==r?(p=t,g="",m=!0):""==r?(m=!0,p="",g=""):(p="",g=t,m=!1);var I="Contacts"===e?n:"";(0,s.default)("getBegin"+e+"MemberList","POST",JSON.stringify({categoryUuid:p,subordinateUuid:g,sobId:i,property:I,inventoryNature:c,listByCategory:m,projectProperty:"CARD_PROPERTY_BASIC"===n?"XZ_PRODUCE":"XZ_CONSTRUCTION",used:!0,currentPage:d,pageSize:u.MXB_CARD_PAGE_SIZE}),function(i){if((0,o.showMessage)(i)){var n={currentPage:i.data.currentPage?i.data.currentPage:1,pages:i.data.pages?i.data.pages:1,total:i.data.total?i.data.total:1};f({type:a.GET_CONTACTS_MEMBERS_LIST,receivedData:i.data,cardType:e,Uuid:t,level:r,searchCardContent:l,cardPageObj:n})}})}},t.saveBeginningBalance=function(e,t){return function(i,c){var u=c().lsqcState,l=t?(0,r.fromJS)(t):u.get("changeQcList");if(l.some(function(e){return"-"===e.get("amount")}))return n.default.info("请输入有效的数值");i({type:a.SWITCH_LOADING_MASK}),(0,s.default)("ModifyBegin"+e,"POST",JSON.stringify({operateList:l,isClear:!!t}),function(t){if(i({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(t))if(0!==t.code)n.default.info(t.code+" "+t.message);else{if(t.message)if(t.data.errorList.length){var r=t.data.errorList.join(",");n.default.error(r)}else n.default.success(t.message);i(m(e))}i(f())})}}),p=(t.deleteBeginningMembers=function(e,t){return function(i,n){i({type:a.DELETE_BEGINNING_LIST_ITEM,item:e,listName:t})}},t.QCTriangleSwitch=function(e,t){return{type:a.BEGINNING_TRIANGLE_SWITCH,showChild:e,uuid:t}},t.changeQcList=function(e,t,i,n,r,s){return{type:a.CHANGE_BEGINNING_LIST,listItem:e,item:t,number:i,leve:n,listName:r,amountName:s}},t.showContactsModal=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(n){n({type:a.CHANGE_QCMODAL_SHOW_HIDE,value:e,isDefinite:t,item:i}),n(I())}}),m=(t.changeModifyBtn=function(e,t){return{type:a.CHANGE_QCBUTTON_MODIFY_SAVE,name:e,value:t}},t.contactsItemCheckboxCheck=function(e,t,i,n){return{type:a.CONTACTS_ITEM_CHECKBOX_SELECT,checked:e,uuid:t,name:i,code:n}},t.contactsItemCheckboxCheckAll=function(e,t,i,n){return{type:a.CONTACTS_ITEM_CHECKBOX_CHECK_ALL,selectAll:e,listName:t,addItemProperty:i,showMemberList:n}},t.restoreModification=function(e){return{type:a.LSQC_RESTORE_MODIFICATION,curModifyBtn:e}}),I=t.searchCardList=function(e,t){return{type:a.LSQC_SEARCH_CARD_LIST,searchValue:t,cardType:e}};t.addRunningBeginItem=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(n){n({type:a.LSQC_ADD_RUNNING_BEGIN,addItemType:e,addShowChilidUuid:i}),n(p(!1,t))}},t.firstChildToggle=function(e){return function(t){t({type:a.FIRST_CHILD_TOGGLE,listName:e})}},t.initAllShow=function(e){return{type:a.INIT_MODULE_ALL_SHOW,isShow:e}},t.changeAllQcListInMoudle=function(e){return function(t,i){var n=[],a=["PROJECT_PRODUCT_BASIC_CATEGORY_UUID","PROJECT_CONSTRUCTION_COST_CATEGORY_UUID","PROJECT_CONSTRUCTION_PROFIT_CATEGORY_UUID","PROJECT_SETTLEMENT_CATEGORY_UUID"],r=i().lsqcState.getIn(["QcList",e,"List","childList"]);!function t(i,r){return i.map(function(i,s){i.childList&&i.childList.length>0?t(i.childList,r+1):(("Contacts"===e||"Stock"===e)&&r>1||"Contacts"!==e&&"Stock"!==e&&-1===a.indexOf(i.relationUuid))&&n.push({uuid:i.uuid,name:i.name,amount:0,operateType:"Contacts"===e||"Stock"===e||"Project"===e?"2":"3",balanceGroup:i.balanceGroup?i.balanceGroup:"",property:i.property,inventoryNature:i.inventoryNature})})}(r?r.toJS():[],1),t(g(e,n))}}},1519:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_LSQC="INIT_LSQC",t.SHOW_LSQC="SHOW_LSQC",t.LSQC_COMMON_CHANGE="LSQC_COMMON_CHANGE",t.GET_BEGINNING_LIST="GET_BEGINNING_LIST",t.GET_BEGINNING_CATEGORY="GET_BEGINNING_CATEGORY",t.GET_CONTACTS_MEMBERS_LIST="GET_CONTACTS_MEMBERS_LIST",t.BEGINNING_TRIANGLE_SWITCH="BEGINNING_TRIANGLE_SWITCH",t.CHANGE_BEGINNING_LIST="CHANGE_BEGINNING_LIST",t.CHANGE_QCMODAL_SHOW_HIDE="CHANGE_QCMODAL_SHOW_HIDE",t.DELETE_BEGINNING_LIST_ITEM="DELETE_BEGINNING_LIST_ITEM",t.CHANGE_QCBUTTON_MODIFY_SAVE="CHANGE_QCBUTTON_MODIFY_SAVE",t.LSQC_RESTORE_MODIFICATION="LSQC_RESTORE_MODIFICATION",t.FIRST_CHILD_TOGGLE="FIRST_CHILD_TOGGLE",t.CONTACTS_ITEM_CHECKBOX_SELECT="CONTACTS_ITEM_CHECKBOX_SELECT",t.CONTACTS_ITEM_CHECKBOX_CHECK_ALL="CONTACTS_ITEM_CHECKBOX_CHECK_ALL",t.LSQC_SEARCH_CARD_LIST="LSQC_SEARCH_CARD_LIST",t.LSQC_ADD_RUNNING_BEGIN="LSQC_ADD_RUNNING_BEGIN",t.INIT_MODULE_ALL_SHOW="INIT_MODULE_ALL_SHOW",t.MODIFY_PERIOD_ACCOUNT="MODIFY_PERIOD_ACCOUNT"},1767:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(37),r=(n=a)&&n.__esModule?n:{default:n};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,i=arguments[1];return((e={},u(e,o.INIT_LSQC,function(){return l}),u(e,o.SHOW_LSQC,function(){return t=t.set("showQcye",i.value)}),u(e,o.LSQC_COMMON_CHANGE,function(){return t=t.set(i.changeType,i.value)}),u(e,o.MODIFY_PERIOD_ACCOUNT,function(){return t=t.setIn(["flags","issuedate"],i.issuedate)}),u(e,o.INIT_MODULE_ALL_SHOW,function(){var e=i.isShow?"block":"none";return t=t.setIn(["firstChildToggle","AccountDisplay"],e).setIn(["firstChildToggle","TaxDisplay"],e).setIn(["firstChildToggle","SalaryDisplay"],e).setIn(["firstChildToggle","ContactsDisplay"],e).setIn(["firstChildToggle","OthersDisplay"],e).setIn(["firstChildToggle","StockDisplay"],e).setIn(["firstChildToggle","LongTermDisplay"],e).setIn(["firstChildToggle","CIBDisplay"],e).setIn(["firstChildToggle","ProjectDisplay"],e).setIn(["firstChildToggle","isShow"],i.isShow)}),u(e,o.GET_BEGINNING_LIST,function(){var e=i.receivedData.result,n=[],a=void 0;i.receivedData.result.isSimplify?(a=[e.accountBalance,e.rateBalance,e.paymentBalance,e.amountBalance,e.otherBalance,e.stockBalance,e.assetsBalance,e.mixingBalance,e.projectBalance],t=t.setIn(["QcList","Account","List"],(0,s.fromJS)(e.accountBalance)).setIn(["QcList","Account","status"],!0).setIn(["QcList","LongTerm","List"],(0,s.fromJS)(e.assetsBalance)).setIn(["QcList","LongTerm","status"],!0).setIn(["QcList","Stock","List"],(0,s.fromJS)(e.stockBalance)).setIn(["QcList","Stock","status"],!0)):a=[e.rateBalance,e.paymentBalance,e.amountBalance,e.otherBalance,e.mixingBalance],a.map(function(e){e.childList.length&&function e(t){return t.map(function(t){t.childList.length>0&&(n.push(t.relationUuid),e(t.childList))})}(e.childList)}),i.isPerid&&(t=t.setIn(["flags","balanceShowChild"],(0,s.fromJS)(n)));for(var r=e.balancePeriod,o=Number(r.firstYear),c=Number(r.lastYear),u=Number(r.firstMonth),l=Number(r.lastMonth),d=[],f=c;f>=o&&0!==o;--f)for(var g=f===c?l:12;g>=(f===o?u:1);--g)d.push(f+"年第"+(g<10?"0"+g:g)+"期");var p=[],m=[],I=(t=t.setIn(["flags","issues"],(0,s.fromJS)(d)).setIn(["flags","issuedate"],r.year+"年第"+r.month+"月").setIn(["flags","QcUuid"],(0,s.fromJS)(r.uuid)).setIn(["QcList","Tax","List"],(0,s.fromJS)(e.rateBalance)).setIn(["QcList","Tax","status"],!0).setIn(["QcList","Salary","List"],(0,s.fromJS)(e.paymentBalance)).setIn(["QcList","Salary","status"],!0).setIn(["QcList","Contacts","List"],(0,s.fromJS)(e.amountBalance)).setIn(["QcList","Contacts","status"],!0).setIn(["QcList","Others","List"],(0,s.fromJS)(e.otherBalance)).setIn(["QcList","Others","status"],!0).setIn(["QcList","CIB","List"],(0,s.fromJS)(e.mixingBalance)).setIn(["QcList","CIB","status"],!0).setIn(["QcList","Project","List"],(0,s.fromJS)(e.projectBalance)).setIn(["QcList","Project","status"],!0).setIn(["flags","curModifyBtn"],"").setIn(["flags","isCheckOut"],r.isCheckOut).setIn(["flags","selectItem"],(0,s.fromJS)([])).setIn(["flags","selectList"],(0,s.fromJS)([])).set("changeQcList",(0,s.fromJS)([])).set("addItem",(0,s.fromJS)({}))).getIn(["QcList","Contacts","List","childList"]),L=t.getIn(["QcList","Stock","List","childList"]);return I.map(function(e,t){e.get("childList")&&e.get("childList").map(function(e){if(!e.get("isDefinite")){var i="debit"==e.get("direction")?"debitBeginAmount":"creditBeginAmount";p.push({index:t,amount:e.get(i)})}})}),L.map(function(e,t){e.get("childList")&&e.get("childList").map(function(e){if(!e.get("isDefinite")){var i="debit"==e.get("direction")?"debitBeginAmount":"creditBeginAmount";m.push({index:t,amount:e.get(i)})}})}),t=t.setIn(["notdefined","ContactsArr"],(0,s.fromJS)(p)).setIn(["notdefined","StockArr"],(0,s.fromJS)(m))}),u(e,o.GET_BEGINNING_CATEGORY,function(){var e="Contacts"===i.cardType?"MemberList":"thingsList",n=[],a="";a=i.item.get("inventoryNature")?"stock":i.item.get("property");var r=t.getIn(["flags","isCheckOut"]),o={currentPage:i.receivedData.currentPage?i.receivedData.currentPage:1,pages:i.receivedData.pages?i.receivedData.pages:1,total:i.receivedData.total?i.receivedData.total:1};return i.receivedData.resultList.map(function(e){var t=void 0;switch(a){case"NEEDIN":t=e.receivableOpened;break;case"PREIN":t=e.advanceOpened;break;case"NEEDPAY":t=e.payableOpened;break;case"PREPAY":t=e.prepaidOpened;break;case"stock":t=e.opened;break;case"CARD_PROPERTY_BASIC":t=e.basicProductOpen;break;case"CARD_PROPERTY_CONTRACT_COST":t=e.contractCostOpen;break;case"CARD_PROPERTY_CONTRACT_PROFIT":t=e.contractProfitOpen;break;case"CARD_PROPERTY_ENGINEER":t=e.engineeringSettlementOpen}0==t||r||n.push(e.uuid)}),t=t.set("contactsCategory",(0,s.fromJS)(i.receivedData.typeList)).set(e,(0,s.fromJS)(i.receivedData.resultList)).setIn(["flags","inventoryNature"],i.item.get("inventoryNature")).setIn(["flags","property"],a).setIn(["flags","cardPageObj"],(0,s.fromJS)(o)).set("cantChooseList",(0,s.fromJS)(n)).set("addItem",i.item)}),u(e,o.GET_CONTACTS_MEMBERS_LIST,function(){var e="Contacts"===i.cardType?"MemberList":"thingsList";t=t.set(e,(0,s.fromJS)(i.receivedData.resultList));var n=[];i.receivedData.resultList.map(function(e){(e.code.indexOf(i.searchCardContent)>-1||e.name.indexOf(i.searchCardContent)>-1)&&n.push(e)});var a=(t=""===i.searchCardContent?t.set("searchList",(0,s.fromJS)([])):t.set("searchList",(0,s.fromJS)(n))).getIn(["flags","property"]),r=t.getIn(["flags","isCheckOut"]),o=[];return i.receivedData.resultList.map(function(e){var t=void 0;switch(a){case"NEEDIN":t=e.receivableOpened;break;case"PREIN":t=e.advanceOpened;break;case"NEEDPAY":t=e.payableOpened;break;case"PREPAY":t=e.prepaidOpened;break;case"stock":t=e.opened;break;case"CARD_PROPERTY_BASIC":t=e.basicProductOpen;break;case"CARD_PROPERTY_CONTRACT_COST":t=e.contractCostOpen;break;case"CARD_PROPERTY_CONTRACT_PROFIT":t=e.contractProfitOpen;break;case"CARD_PROPERTY_ENGINEER":t=e.engineeringSettlementOpen}0==t||r||o.push(e.uuid)}),i.cardPageObj&&(t=t.setIn(["flags","cardPageObj"],(0,s.fromJS)(i.cardPageObj))),t=t.set("cantChooseList",(0,s.fromJS)(o)).setIn(["flags","curCategoryUuid"],(0,s.fromJS)(i.Uuid)).setIn(["flags","level"],(0,s.fromJS)(i.level))}),u(e,o.BEGINNING_TRIANGLE_SWITCH,function(){var e=t.getIn(["flags","balanceShowChild"]);if(i.showChild){var n=e.splice(e.findIndex(function(e){return e===i.uuid}),1);return t.setIn(["flags","balanceShowChild"],n)}var a=e.push(i.uuid);return t.setIn(["flags","balanceShowChild"],a)}),u(e,o.CHANGE_BEGINNING_LIST,function(){var e=""===i.number?0:i.number,n=(i.item.set(i.amountName,e),t.get("changeQcList"));n=n.filter(function(e,t){return e.get("uuid")!==i.item.get("uuid")||e.get("uuid")===i.item.get("uuid")&&e.get("property")!==i.item.get("property")});var a=i.item.get("add")?"1":"3",o=n.push((0,s.fromJS)({uuid:i.item.get("uuid"),name:i.item.get("name"),amount:e,operateType:a,balanceGroup:i.item.get("balanceGroup")?i.item.get("balanceGroup"):"",property:i.item.get("property"),inventoryNature:i.item.get("inventoryNature")})),c=(t=t.set("changeQcList",(0,s.fromJS)(o))).getIn(["QcList",i.listName,"List","childList"]),u=t.getIn(["flags","isCheckOut"]);if(u){var l=i.listItem.get("childList").toJS();!function t(n){return n.map(function(n,a){var r=(0,s.fromJS)(n);(0,s.is)(r,i.item)?n[i.amountName]=e:n.childList&&n.childList.length&&t(n.childList)})}(l);var d=(t=t.setIn(["QcList",i.listName,"List","childList"],(0,s.fromJS)(l))).get("changeQcList").filter(function(e){return"1"==e.get("operateType")}),f=void 0,g=void 0,p=void 0;c.map(function(e,t){e.get("childList")&&e.get("childList").size&&e.get("childList").map(function(e,n){(e.get("uuid")===i.item.get("uuid")&&e.get("property")===i.item.get("property")&&"Contacts"===i.listName||e.get("uuid")===i.item.get("uuid")&&e.get("inventoryNature")===i.item.get("inventoryNature")&&"Stock"===i.listName)&&(f=t)})});var m=c.getIn([f,"childList"]).map(function(e,t){if(!e.get("isDefinite"))return g=t,e});p=m.get(g);var I=0;d.map(function(e){if(i.item.get("property")===e.get("property")&&"Contacts"===i.listName||i.item.get("inventoryNature")===e.get("inventoryNature")&&"Stock"===i.listName){var t=e.get("amount")?e.get("amount"):0;I+=parseFloat(t)}});var L="Contacts"===i.listName?t.getIn(["notdefined","ContactsArr"]):t.getIn(["notdefined","StockArr"]),h=0;L.map(function(e){e.get("index")===f&&(h=e.get("amount"))});var C=I;if(h<C){var _=t.get("changeQcList"),S=(_=_.filter(function(e,t){return e.get("uuid")!==i.item.get("uuid")})).push((0,s.fromJS)({uuid:i.item.get("uuid"),name:i.item.get("name"),amount:0,operateType:"1",balanceGroup:i.item.get("balanceGroup")?i.item.get("balanceGroup"):"",property:i.item.get("property"),inventoryNature:i.item.get("inventoryNature")}));t=t.set("changeQcList",(0,s.fromJS)(S));var y=i.listItem.get("childList").toJS(),T=0;!function e(t){return t.map(function(t,n){(0,s.is)((0,s.fromJS)(t),i.item)?t[i.amountName]=0:t.childList&&t.childList.length&&e(t.childList),t.add&&!(0,s.is)((0,s.fromJS)(t),i.item)&&(T+=parseFloat(t[i.amountName]))})}(y);var N=t.get("changeQcList").filter(function(e){return"1"==e.get("operateType")});return N.map(function(e){var t=e.get("amount")?e.get("amount"):0;parseFloat(t)}),t=(t=t.setIn(["QcList",i.listName,"List","childList"],(0,s.fromJS)(y))).setIn(["QcList",i.listName,"List","childList",f,"childList",g,i.amountName],h-T),r.default.warn("新增期初值不能大于未明确对象期初值")&&t}var O=(t=t.setIn(["QcList",i.listName,"List","childList",f,"childList",g,i.amountName],h-C)).get("changeQcList"),v=(O=O.filter(function(e,t){return e.get("uuid")!==p.get("uuid")})).push((0,s.fromJS)({uuid:p.get("uuid"),name:p.get("name"),amount:C,operateType:"3",balanceGroup:p.get("balanceGroup"),property:p.get("property"),inventoryNature:p.get("inventoryNature")}));t=t.set("changeQcList",(0,s.fromJS)(v))}else{var E=""===i.number?0:i.number,b=t.getIn(["QcList",i.listName,"List"]).toJS(),A=[b];!function e(t){return t.map(function(t,n){t.uuid===i.item.get("uuid")&&t.property===i.item.get("property")&&(t[i.amountName]=E),t.childList&&t.childList.length>0&&e(t.childList)})}(A);var G=A[0];t=t.setIn(["QcList",i.listName,"List"],(0,s.fromJS)(G))}return t}),u(e,o.CHANGE_QCMODAL_SHOW_HIDE,function(){return i.value||(t=t.setIn(["flags","selectList"],(0,s.fromJS)([])).setIn(["flags","selectItem"],(0,s.fromJS)([])).set("cantChooseList",(0,s.fromJS)([]))),t=t.set("showContactsModal",i.value).setIn(["flags","isDefinite"],i.isDefinite).setIn(["flags","notClearItem"],i.item).setIn(["flags","level"],"").setIn(["flags","curCategoryUuid"],"")}),u(e,o.DELETE_BEGINNING_LIST_ITEM,function(){var e=t.get("changeQcList"),n=void 0;if(e.size){var a=!1;!function r(s){return s.map(function(s,o){s.get("uuid")===i.item.get("uuid")&&s.get("property")===i.item.get("property")&&(n=e.filter(function(e){return!(e.get("uuid")===i.item.get("uuid")&&e.get("property")===i.item.get("property"))}),t=t.set("cantChooseList",t.get("cantChooseList").filter(function(e){s.get("uuid")})),a=!0),s.get("childList")&&s.get("childList").size&&r(s.get("childList"))})}(e),a||(n=e.push((0,s.fromJS)({uuid:i.item.get("uuid"),relationUuid:i.item.get("relationUuid"),name:i.item.get("name"),amount:"",operateType:"2",balanceGroup:i.item.get("balanceGroup")?i.item.get("balanceGroup"):"",property:i.item.get("property"),inventoryNature:i.item.get("inventoryNature")})),t=t.set("cantChooseList",t.get("cantChooseList").filter(function(e){i.item.get("uuid")})))}else n=e.push((0,s.fromJS)({uuid:i.item.get("uuid"),relationUuid:i.item.get("relationUuid"),name:i.item.get("name"),amount:"",operateType:"2",balanceGroup:i.item.get("balanceGroup")?i.item.get("balanceGroup"):"",property:i.item.get("property"),inventoryNature:i.item.get("inventoryNature")})),t=t.set("cantChooseList",t.get("cantChooseList").filter(function(e){i.item.get("uuid")}));var r=t.getIn(["QcList",i.listName,"List","childList"]),o=(t.get("addItem"),["QcList",i.listName,"List","childList"]);return function e(n,a){return n.map(function(n,r){n=n.get("childList")?n.set("childList",n.get("childList").filter(function(e){return e.get("uuid")!==i.item.get("uuid")||e.get("uuid")===i.item.get("uuid")&&e.get("property")!==i.item.get("property")})):n,t=t.setIn(a.concat(r),n),n.get("childList")&&n.get("childList").size&&e(n.get("childList"),a.concat([r,"childList"]))})}(r,o),t=t.set("changeQcList",n)}),u(e,o.CHANGE_QCBUTTON_MODIFY_SAVE,function(){var e=t.getIn(["flags","balanceShowChild"]).toJS(),n=t.getIn(["QcList",i.name,"List"]).toJS();return n.childList.length&&function t(i){return i.map(function(i){i.childList.length>0&&(e.indexOf(i.relationUuid)>-1||e.push(i.relationUuid),t(i.childList))})}(n.childList),t=t.setIn(["QcList",i.name,"status"],i.value).setIn(["flags","curModifyBtn"],i.name).setIn(["flags","balanceShowChild"],(0,s.fromJS)(e)).setIn(["firstChildToggle",i.name+"Display"],"block")}),u(e,o.LSQC_RESTORE_MODIFICATION,function(){return t=t.setIn(["QcList",i.curModifyBtn,"status"],!0).setIn(["flags","curModifyBtn"],"").set("changeQcList",(0,s.fromJS)([]))}),u(e,o.FIRST_CHILD_TOGGLE,function(){var e="none"==t.getIn(["firstChildToggle",i.listName+"Display"])?"block":"none";return t=t.setIn(["firstChildToggle",i.listName+"Display"],e)}),u(e,o.CONTACTS_ITEM_CHECKBOX_SELECT,function(){var e=t.getIn(["flags","selectList"]).toJS(),n=t.getIn(["flags","selectItem"]).toJS();if(i.checked){var a=e.filter(function(e){return e!=i.uuid}),r=n.filter(function(e){return e.uuid!=i.uuid});return t.setIn(["flags","selectList"],(0,s.fromJS)(a)).setIn(["flags","selectItem"],(0,s.fromJS)(r))}return e.push(i.uuid),n.push({uuid:i.uuid,name:i.code+" "+i.name,oriName:i.name,oriCode:i.code}),t.setIn(["flags","selectList"],(0,s.fromJS)(e)).setIn(["flags","selectItem"],(0,s.fromJS)(n))}),u(e,o.CONTACTS_ITEM_CHECKBOX_CHECK_ALL,function(){var e=i.showMemberList;if(i.selectAll){var n=t.getIn(["flags","selectList"]).toJS(),a=t.getIn(["flags","selectItem"]).toJS(),r=n,o=a;return e&&e.size&&e.map(function(e){r=r.filter(function(t){return t!=e.get("uuid")}),o=o.filter(function(t){return t.uuid!=e.get("uuid")})}),t.setIn(["flags","selectList"],(0,s.fromJS)(r)).setIn(["flags","selectItem"],(0,s.fromJS)(o))}var c=e,u=t.getIn(["flags","selectList"]).toJS(),l=t.getIn(["flags","selectItem"]).toJS(),d=[],f=[],g=t.get("cantChooseList"),p=t.get("changeQcList");return p.map(function(e){"1"!==e.get("operateType")||e.get("property")!=i.addItemProperty&&"stock"!=e.get("property")||d.push(e.get("uuid")),"2"===e.get("operateType")&&g.indexOf(e.get("relationUuid"))>-1&&f.push(e.get("relationUuid"))}),c.forEach(function(e){g.indexOf(e.get("uuid"))>-1&&!(f.indexOf(e.get("uuid"))>-1)||d.indexOf(e.get("uuid"))>-1||(console.log(-1===u.indexOf(e.get("uuid"))),-1===u.indexOf(e.get("uuid"))&&(u.push(e.get("uuid")),l.push({uuid:e.get("uuid"),name:e.get("code")+" "+e.get("name"),oriName:e.get("name"),oriCode:e.get("code")})))}),t.setIn(["flags","selectList"],(0,s.fromJS)(u)).setIn(["flags","selectItem"],(0,s.fromJS)(l))}),u(e,o.LSQC_SEARCH_CARD_LIST,function(){t=i.searchValue?t.set("hasSearchContent",!0):t.set("hasSearchContent",!1);var e="Contacts"===i.cardType?t.get("MemberList"):t.get("thingsList"),n=[];return e.map(function(e){(e.get("code").indexOf(i.searchValue)>-1||e.get("name").indexOf(i.searchValue)>-1)&&n.push(e)}),t=""===i.searchValue?t.set("searchList",(0,s.fromJS)([])):t.set("searchList",(0,s.fromJS)(n))}),u(e,o.LSQC_ADD_RUNNING_BEGIN,function(){var e=t.getIn(["flags","selectItem"]).toJS(),n=t.getIn(["flags","isDefinite"]),a=t.getIn(["flags","balanceShowChild"]).toJS();a.push(i.addShowChilidUuid);var r=t.getIn(["QcList",i.addItemType,"List","childList"]),o=void 0,c=void 0,u=void 0,l=void 0,d=void 0;if(n){var f=[];e.forEach(function(e,n){var a=t.get("changeQcList"),r=t.get("addItem");"Stock"==i.addItemType?(c="debit",u="BALANCE_GROUP_STOCK",l="stock",d=r.get("inventoryNature")):(c=r.get("direction"),u=r.get("balanceGroup"),l=r.get("property"),d=""),f=r.get("childList").push((0,s.fromJS)({uuid:e.uuid,name:e.name,balanceGroup:u,property:l,inventoryNature:d,direction:c,add:!0,creditBeginAmount:0,debitBeginAmount:0})),o=a.push((0,s.fromJS)({uuid:e.uuid,name:e.name,amount:0,operateType:"1",balanceGroup:u,property:l,inventoryNature:d})),t=t.setIn(["addItem","childList"],f).set("changeQcList",o)});var g=t.get("addItem"),p={childList:r.toJS()};!function e(t,i,n){if(t.parentPlace=n,t.childList&&t.childList.length)for(var a=0;a<t.childList.length;a++){var r=""===i?t.parentPlace.concat([a]):t.parentPlace.concat(["childList",a]);e(t.childList[a],a,r)}}(p,"",["QcList",i.addItemType,"List","childList"]);!function e(i){return i.map(function(i,n){i.get("childList")&&i.get("childList").size&&e(i.get("childList")),i.get("uuid")===g.get("uuid")&&(t=t.setIn(i.get("parentPlace"),g))})}((0,s.fromJS)(p.childList))}else{var m=void 0,I=void 0,L=void 0,h=void 0,C=void 0,_=t.get("addItem");r.map(function(e,t){e.get("childList")&&e.get("childList").map(function(e,i){e.get("uuid")===_.get("uuid")&&(m=t)})}),e.map(function(e){var n=t.getIn(["QcList",i.addItemType,"List","childList"]),a=t.get("addItem"),r=t.get("changeQcList");"Stock"==i.addItemType?(L="debit",u="BALANCE_GROUP_STOCK",h="stock",C=a.get("inventoryNature"),I=n.getIn([m,"childList"]).push((0,s.fromJS)({uuid:e.uuid,name:e.name,balanceGroup:u,property:h,inventoryNature:C,direction:L,add:!0,isDefinite:!0,creditBeginAmount:0,debitBeginAmount:0}))):(L=a.get("direction"),u=a.get("balanceGroup"),h=a.get("property"),I=n.getIn([m,"childList"]).push((0,s.fromJS)({uuid:e.uuid,name:e.name,balanceGroup:u,property:h,inventoryNature:"",direction:L,add:!0,isDefinite:!0,creditBeginAmount:0,debitBeginAmount:0}))),o=r.push((0,s.fromJS)({uuid:e.uuid,name:e.name,amount:0,operateType:"1",balanceGroup:u,property:h,inventoryNature:C})),t=(t=t.setIn(["QcList",i.addItemType,"List","childList",m,"childList"],I)).set("changeQcList",(0,s.fromJS)(o))})}return t=t.setIn(["flags","selectItem"],(0,s.fromJS)([])).setIn(["flags","balanceShowChild"],(0,s.fromJS)(a))}),e)[i.type]||function(){return t})()},i(38);var s=i(18),o=c(i(1519));c(i(27));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var l=(0,s.fromJS)({flags:{currentacid:"",currentasscategorylist:[],entertext:[],qcshowMessageMask:!1,qciframeload:!1,isModified:!1,property:"",inventoryNature:"",balanceShowChild:[],selectList:[],selectItem:[],curModifyBtn:"",isDefinite:"",isCheckOut:!1,curCategoryUuid:"",level:"",notClearItem:{},issuedate:"",issues:[],QcUuid:"",cardPageObj:{pages:1,currentPage:1,total:1}},firstChildToggle:{AccountDisplay:"none",TaxDisplay:"none",SalaryDisplay:"none",ContactsDisplay:"none",OthersDisplay:"none",StockDisplay:"none",LongTermDisplay:"none",CIBDisplay:"none",ProjectDisplay:"none"},acbalist:[{idx:"",amount:"",beginCount:"",acfullname:"",acname:"",direction:""}],Qcdate:"2018年07月",QcList:{Account:{status:!0,List:{name:"账户",childList:[]}},Salary:{status:!0,List:{name:"薪酬",childList:[]}},Tax:{status:!0,List:{name:"税费",childList:[]}},Contacts:{status:!0,List:{name:"往来款",childList:[]}},Stock:{status:!0,List:{name:"存货",childList:[]}},Project:{status:!0,List:{name:"项目",childList:[]}},Others:{status:!0,List:{name:"其他应收、应付",childList:[]}},LongTerm:{status:!0,List:{name:"长期资产",childList:[]}},CIB:{status:!0,List:{name:"资本、投资与借款",childList:[]}}},QcTotalNumber:{Account:"",Tax:"",Salary:"",Contacts:"",Others:"",Stock:"",LongTerm:"",CIB:""},changeQcList:[],addItem:{},qcimportresponlist:{failJsonList:[],successJsonList:[]},cantChooseList:[],qcmessage:"",showQcye:!1,showContactsModal:!1,hasSearchContent:!1,MemberList:[{advanceOpened:100,code:"1",name:"客户 供应商1",payableOpened:100,prepaidOpened:100,receivableOpened:100,uuid:"468359664556310528"}],thingsList:[],searchList:[],contactsCategory:[{childList:[]}]})}}]);