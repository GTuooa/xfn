(window.webpackJsonp=window.webpackJsonp||[]).push([[58,3,24],{1189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=m(n(2464)),r=m(n(1305)),i=m(n(1398)),o=m(n(1399)),s=m(n(1290)),u=m(n(1291)),c=m(n(491)),l=m(n(488)),d=m(n(1581)),f=m(n(1324));function m(e){return e&&e.__esModule?e:{default:e}}var g={searchRunningState:r.default,editRunningState:i.default,editCalculateState:o.default,pzBombState:s.default,runningPreviewState:u.default,editRunningAllState:c.default,searchRunningAllState:l.default,runningEnclosureState:d.default,filePrintState:f.default};t.reducer=g,t.view=a.default},1223:function(e,t,n){},1224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=l(n(1)),u=l(n(0)),c=n(17);function l(e){return e&&e.__esModule?e:{default:e}}n(1223);var d=(0,c.immutableRenderDecorator)((i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.className,a=e.onClick;return s.default.createElement("div",{className:"container-wrap container-width-"+t+" "+n,onClick:a},this.props.children)}}]),t}(),r.displayName="ContainerWrap",r.propTypes={type:u.default.string.isRequired,className:u.default.string.isRequired},a=i))||a;t.default=d},1226:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),s=(r=o)&&r.__esModule?r:{default:r},u=n(17);n(1223);var c=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),i(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"flex-title"},this.props.children)}}]),t}())||a;t.default=c},1227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=l(n(176)),i=l(n(174)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(175),n(173);var s=l(n(1)),u=n(17),c=n(127);function l(e){return e&&e.__esModule?e:{default:e}}n(1232);var d=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.pageItem,n=e.onClick,a=s.default.createElement(i.default,null,t.get("pageList").map(function(e,a){return s.default.createElement(i.default.Item,{key:e.get("key")},s.default.createElement("span",{className:"page-switch-item setting-common-ant-dropdown-menu-item",onClick:function(){n(t.get("key"),e.get("name"),e.get("key"))}},e.get("name")))}));return s.default.createElement("div",null,s.default.createElement(r.default,{overlay:a,trigger:["click"]},s.default.createElement("div",{className:"page-switch-button"},s.default.createElement(c.XfnIcon,{type:"Menu"}))))}}]),t}())||a;t.default=d},1232:function(e,t,n){},1234:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});var a=n(1),r=n(5),i=n(1251),o=n.n(i),s=n(2),u=n.n(s),c=n(24),l=n(180),d=n(14),f=(n(21),n(1599)),m=n(20);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function C(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=C(this,S(t).call(this,e))).saveSwitch=function(e){n.rcSwitch=e},n.renderSwitch=function(e){var t,r=e.getPrefixCls,i=n.props,s=i.prefixCls,f=i.size,m=i.loading,g=i.className,_=void 0===g?"":g,C=i.disabled,S=r("switch",s),I=u()(_,(T(t={},"".concat(S,"-small"),"small"===f),T(t,"".concat(S,"-loading"),m),t)),y=m?a.createElement(d.default,{type:"loading",className:"".concat(S,"-loading-icon")}):null;return a.createElement(l.a,{insertExtraNode:!0},a.createElement(o.a,p({},Object(c.a)(n.props,["loading"]),{prefixCls:S,className:I,disabled:C||m,ref:n.saveSwitch,loadingIcon:y})))},Object(m.a)("checked"in e||!("value"in e),"Switch","`value` is not validate prop, do you mean `checked`?"),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,a["Component"]),n=t,(r=[{key:"focus",value:function(){this.rcSwitch.focus()}},{key:"blur",value:function(){this.rcSwitch.blur()}},{key:"render",value:function(){return a.createElement(f.a,null,this.renderSwitch)}}])&&_(n.prototype,r),i&&_(n,i),t}();y.__ANT_SWITCH=!0,y.propTypes={prefixCls:r.string,size:r.oneOf(["small","default","large"]),className:r.string}},1235:function(e,t,n){"use strict";n.r(t);n(33),n(1253)},1237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=l(n(100)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(99);var s=l(n(1)),u=n(17),c=(n(101),n(22));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=(0,u.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={formate:!0},d(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),o(t,[{key:"render",value:function(){var e=this,t=(this.props.showZero,this.state.formate?this.props.value&&Number(this.props.value)?(0,c.formatMoney)(this.props.value,this.props.PointDisabled?0:2):"":this.props.value);return s.default.createElement(r.default,i({},this.props,{value:t||"",onFocus:function(t){"function"==typeof e.props.onFocus&&e.props.onFocus(t),e.setState({formate:!1},function(){e.nameInput&&e.nameInput.select()})},onBlur:function(t){"function"==typeof e.props.onBlur&&e.props.onBlur(t),e.setState({formate:!0})},ref:function(t){return e.nameInput=t}}))}}]),t}())||a;t.default=f},1239:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitLraccountJzsy=t.deleteSingleFlow=t.jumpCommonCharge=t.changeBeforeAmount=t.getManagerCategoryList=t.insertManagerModal=t.setDefineMadalInitState=t.setInvioceMadalInitState=t.setCarryoverMadalInitState=t.setManageMadalInitState=t.changeCxAccountCommonOutString=t.changeCxAccountCommonString=t.changeCurrentPage=t.jumpCalculateCxToLr=t.getBusinessBeforeSwitch=t.insertlrAccountInvioceDefineModal=t.insertlrAccountInvioceModal=t.insertlrAccountJzsyModal=t.insertlrAccountCarryoverModal=t.insertlrAccountManagerModal=t.getBusinessDefineModal=t.getBusinessInvioceModal=t.calculateGainForJzsy=t.getBusinessJzsyModal=t.getBusinessCarryoverModal=t.getBusinessManagerModal=t.getBusinessPayment=t.beforeRunningPayOrReceive=t.currentPz=t.deleteVcItemFetch=t.getAccountDimensionFetch=t.afterModifyAccountAllList=t.changePzCommonString=t.runningInsertVc=t.deleteAccountItemCardAndRunning=t.accountItemCheckboxCheck=t.accountItemCheckboxCheckAll=t.getBusinessList=t.getPeriodAndBusinessList=t.cxlsDownloadEnclosure=void 0;var a=S(n(37)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(38);var i=C(n(1274)),o=S(n(52)),s=n(18),u=n(22),c=C(n(30)),l=C(n(27)),d=C(n(43)),f=C(n(60)),m=C(n(1243)),g=C(n(1245)),p=C(n(1242)),T=C(n(1229)),_=C(n(1249));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}t.cxlsDownloadEnclosure=function(e,t){return function(n){n(T.lsDownloadEnclosure(e,t))}},t.getPeriodAndBusinessList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"allWater",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(r,s){r({type:i.SWITCH_LOADING_MASK});var c="allWater"==t?"getRunningBusinessList":"getRunning"+t+"List",f=(s().cxlsState,""===a?1:a);(0,o.default)(c,"POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",getPeriod:"true",accountUuid:n,currentPage:f,pageSize:l.CXLS_LIMIE_LENGTH}),function(a){if(r({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)){var o=a.data.periodDtoJson.openedyear+"年第"+a.data.periodDtoJson.openedmonth+"期",s=e||o,c=a.data.periodDtoJson?r(d.everyTableGetIssuedate(a.data.periodDtoJson)):"";r({type:i.GET_BUSINESS_LIST,receivedData:a.data.result.childList,receivedExtra:a.data.result,period:a.data.periodDtoJson,issuedate:s,getPeriod:"true",issues:c,waterType:t,accountUuid:n,currentPage:f,pageCount:a.data.pageCount})}}),r(p.getRunningAccount())}};var I=t.getBusinessList=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",f=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return function(g,p){g({type:i.SWITCH_LOADING_MASK});var T="allWater"==t?"getRunningBusinessList":"getRunning"+t+"List",_=m&&n?n.split(l.TREE_JOIN_STR)[0]:"",C=p().cxlsState,S=""===r?C.get("currentPage"):r,I=c?C.getIn(["flags","searchType"]):"";(0,o.default)(T,"POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",accountUuid:_,getPeriod:"true",orderBy:s,searchType:I,searchContent:c,isAsc:f,currentPage:S,pageSize:l.CXLS_LIMIE_LENGTH,isAccount:m}),function(r){if(g({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(r)){var o=r.data.periodDtoJson?g(d.everyTableGetIssuedate(r.data.periodDtoJson)):"";g({type:i.GET_BUSINESS_LIST,receivedData:r.data.result.childList,receivedExtra:r.data.result,period:r.data.periodDtoJson,issuedate:e,issues:o,waterType:t,accountUuid:n,currentPage:S,isAsc:f,orderBy:s,isAccount:m,pageCount:r.data.pageCount,getPeriod:"true"}),r.data.result.msg&&a.default.info(r.data.result.msg)}})}},y=(t.accountItemCheckboxCheckAll=function(e,t){return{type:i.CXLS_ITEM_CHECKBOX_CHECK_ALL,selectAll:e,list:t}},t.accountItemCheckboxCheck=function(e,t){return{type:i.CXLS_ITEM_CHECKBOX_CHECK,checked:e,item:t}},t.deleteAccountItemCardAndRunning=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2];return function(r,s){var l=n||s().cxlsState.getIn(["flags","selectList"]),d="reality"==e?"payment":"business",f=s().cxlsState,m=f.getIn(["flags","issuedate"]),g=f.getIn(["flags","mainWater"]),p=f.getIn(["flags","isAsc"]),T=f.getIn(["flags","isAccount"]),_=f.getIn(["flags","curAccountUuid"]);c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&(r({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunning"+d,"POST",JSON.stringify({deleteList:l}),function(e){if((0,u.showMessage)(e)){if(e.message)if(e.data.errorList.length){var n=e.data.errorList.join(",");a.default.error(n)}else a.default.success(e.message);r(I(m,g,_,"","",t,p,T))}r({type:i.SWITCH_LOADING_MASK})}))}})}},t.runningInsertVc=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments[4],c=arguments[5],l=arguments[6],d=arguments[7];return function(f,g){var p=g().cxlsState,T=p.get("currentPage"),_=p.getIn(["flags","mainWater"]),C=p.getIn(["flags","curAccountUuid"]),S=p.getIn(["flags","isAsc"]),A=p.getIn(["flags","isAccount"]),L=0;f(y(["flags","pzDealNum"],L)),f(y(["flags","pzDealType"],"insert"));var v=e.sort(function(e,t){return parseInt(e.get("flowNumber"))-parseInt(t.get("flowNumber"))});if(e&&e.size>1)f(y(["flags","pzDealStatus"],!0)),function e(i){var s=0,c=setInterval(function(){s<.9?f(y(["flags","pzDealNum"],L+(s+=.01))):(clearInterval(c),f(y(["flags","pzDealNum"],L)))},100);(0,o.default)("insertRunning"+t+"Vc","POST",JSON.stringify({uuidList:[i]}),function(t){if((0,u.showMessage)(t))if(t.message)if(t.data.result.length){var i=t.data.result.join(",");a.default.error(i),clearInterval(c),f(y(["flags","pzDealStatus"],!1)),f(I(n,_,C,T,"",r,S,A))}else f(y(["flags","pzDealNum"],L+=1)),L<v.size?(clearInterval(c),e(v.getIn([L,"uuid"]))):(clearInterval(c),f(y(["flags","pzDealStatus"],!1)),f(I(n,_,C,T,"",r,S,A)));else clearInterval(c),f(y(["flags","pzDealStatus"],!1));else clearInterval(c),f(y(["flags","pzDealStatus"],!1)),f(I(n,_,C,T,"",r,S,A))})}(v.getIn([0,"uuid"]));else{var h=e.getIn([0,"uuid"]);f({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertRunning"+t+"Vc","POST",JSON.stringify({uuidList:[h]}),function(e){if(f({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&e.message){if(e.data.result.length){var t=e.data.result.join(",");a.default.error(t)}else a.default.success(e.message);c&&c()||f(E()),s&&f(m.getYllsBusinessData(l,d))}})}}},t.changePzCommonString=function(e,t){return function(n){n({type:i.CHANGE_PZ_COMMON_STRING,name:e,value:t})}}),E=t.afterModifyAccountAllList=function(e){return function(t,n){var a=n().cxlsState,r=a.getIn(["flags","issuedate"]),s=a.getIn(["flags","mainWater"]),c=a.getIn(["flags","curAccountUuid"]),f=a.getIn(["flags","isAccount"]),m=a.getIn(["flags","isAsc"]),g=a.get("currentPage"),p="allWater"==s?"getRunningBusinessList":"getRunning"+s+"List",T=f&&c?c.split(l.TREE_JOIN_STR)[0]:"";t({type:i.SWITCH_LOADING_MASK}),(0,o.default)(p,"POST",JSON.stringify({year:r?r.substr(0,4):"",month:r?r.substr(6,2):"",accountUuid:T,getPeriod:"true",orderBy:"",isAsc:m,currentPage:g,pageSize:l.CXLS_LIMIE_LENGTH,isAccount:f}),function(n){if(t({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)){var a=n.data.periodDtoJson?t(d.everyTableGetIssuedate(n.data.periodDtoJson)):"";t({type:i.GET_BUSINESS_LIST,receivedData:n.data.result.childList,receivedExtra:n.data.result,period:n.data.periodDtoJson,issuedate:r,issues:a,isReflash:e,waterType:s,isAccount:f,accountUuid:c,currentPage:g,isAsc:m,pageCount:n.data.pageCount,getPeriod:"true"})}})}},A=(t.getAccountDimensionFetch=function(e,t,n,a,r,i,o){return function(s){s(A(e,t,n,a,r,i,o))}},function(e,t,n,a,r,s,c,l){return function(e){(0,o.default)("getRunningSettingInfo","GET","",function(t){(0,u.showMessage)(t)&&e({type:i.GET_CXLSCONF_ALL_SETTINGS,receivedData:t.data})})}}),L=(t.deleteVcItemFetch=function(e,t,n,a,r,s,c,l,d){return function(f,g){var p=g().cxlsState,T=p.get("currentPage"),_=p.getIn(["flags","mainWater"]),C=p.getIn(["flags","isAccount"]),S=p.getIn(["flags","isAsc"]),A=p.getIn(["flags","curAccountUuid"]),L=0;f(y(["flags","pzDealNum"],L)),f(y(["flags","pzDealType"],"delete"));n&&n.length>1?(f(y(["flags","pzDealStatus"],!0)),function i(s){var c=0,l=setInterval(function(){c<.99?f(y(["flags","pzDealNum"],L+(c+=.01))):(clearInterval(l),f(y(["flags","pzDealNum"],L+.99)))},100);(0,o.default)("deletevc","POST",JSON.stringify({year:e,month:t,vcindexlist:[s]}),function(e){(0,u.showMessage)(e,"show")?(L+=1,f(y(["flags","pzDealNum"],Math.floor(L))),L<n.length?(clearInterval(l),i(n[L])):(clearInterval(l),f(y(["flags","pzDealStatus"],!1)),f(I(a,_,A,T,"",r,S,C)))):(clearInterval(l),f(y(["flags","pzDealStatus"],!1)),f(I(a,_,A,T,"",r,S,C)))})}(n[0])):(f({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deletevc","POST",JSON.stringify({year:e,month:t,vcindexlist:n}),function(e){if(f({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e,"show")){var t=g().cxlsState;t.get("currentPage"),t.getIn(["flags","mainWater"]),t.getIn(["flags","curAccountUuid"]),t.getIn(["flags","isAsc"]),t.getIn(["flags","isAccount"]);c&&c()||f(E()),s&&f(m.getYllsBusinessData(l,d))}}))}},t.currentPz=function(e,t,n){return{type:i.SET_CURRENT_PZ,year:e,month:t,vcIndexList:n}},t.beforeRunningPayOrReceive=function(e,t,n,a,r){return function(o){n<0&&(n=-n,e="收"===e?"付":"收"),o({type:i.BEFORE_RUNNING_PAY_OR_RECEIVE,payDirection:e,assList:t,notHandleAmount:n,uuidList:a,runningList:r})}},t.getBusinessPayment=function(e,t,n){return function(a){a({type:i.SWITCH_LOADING_MASK});var r=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+r,function(r){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(r)){var o=r.data.result,s=void 0,c=o.assList;if(c&&c.length)s=c[0].assId+" "+c[0].assName;else{var l=o.acList;s=l.length?l[0].acFullName:""}a({type:i.INIT_PAYMENT_STATE,item:e,result:o,assName:s,stateType:t,uuidList:n,fromCxls:!0}),a(T.getRunningSettingInfo()),a(T.accountTotalAmount()),a(f.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),a(f.addHomeTabpane("Edit","LrAccount","录入流水"))}})}}),v=(t.getBusinessManagerModal=function(e,t,n){return function(a,r){a({type:i.SWITCH_LOADING_MASK});var c=e.get("uuid"),l=e.get("beOpened"),d=e.get("assType"),f=r().lrCalculateState,m=f.getIn(["calculateTemp","usedCard"]),g=f.getIn(["calculateTemp","cardUuid"]);(0,o.default)("getRunningBusiness","GET","uuid="+c,function(e){a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(a(h("runningFlowTemp",(0,s.fromJS)(e.data.result))),a(h(["runningFlowTemp","magenerType"],n)),a(h(["modalTemp","uuidList"],(0,s.fromJS)([{uuid:c,assType:d}]))),a(h(["modalTemp","handlingAmount"],e.data.result.notHandleAmount)),a(h(["modalTemp","runningAbstract"],e.data.result.runningAbstract)),a(h(["modalTemp","beOpened"],l)),a(h(["modalTemp","assType"],d)),l&&(a(h(["modalTemp","usedCard"],m)),a(h(["modalTemp","cardUuid"],g)),a(O(0,d))),t())})}},t.getBusinessCarryoverModal=function(e,t,n){return function(n){n({type:i.SWITCH_LOADING_MASK});var a=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var a=e.data.result;n(h("runningFlowTemp",(0,s.fromJS)(e.data.result))),n(h(["modalTemp","uuidList"],(0,s.fromJS)([a.uuid]))),n(h(["modalTemp","runningState"],a.runningState)),n(h(["modalTemp","categoryUuid"],a.categoryUuid)),n(h(["modalTemp","runningAbstract"],a.runningAbstract)),n(h(["modalTemp","stockCardList"],a.acBusinessIncome.stockCardList)),t()}})}},t.getBusinessJzsyModal=function(e,t,n){return function(n,a){n({type:i.SWITCH_LOADING_MASK});var c=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+c,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var c=e.data.result;if(n(h("runningFlowTemp",(0,s.fromJS)(e.data.result))),n(h(["modalTemp","uuidList"],(0,s.fromJS)([c.uuid]))),n(h(["modalTemp","runningState"],c.runningState)),n(h(["modalTemp","categoryUuid"],c.categoryUuid)),n(h(["modalTemp","runningAbstract"],c.runningAbstract)),n(h(["modalTemp","amount"],c.amount-c.tax)),n(h(["modalTemp","businessList"],(0,s.fromJS)(r({},e.data.result,{beSelect:!0})))),e.data.result.beProject){var l=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]),d=e.data.result.projectRange;(0,o.default)("getProjectCardList","POST",JSON.stringify({sobId:l,categoryList:d,needCommonCard:!1}),function(e){(0,u.showMessage)(e)&&n(h(["flags","projectList"],(0,s.fromJS)(e.data.result)))})}t()}})}},t.calculateGainForJzsy=function(){return function(e,t){var n=t().cxlsState,a=n.get("modalTemp"),r=n.get("runningFlowTemp"),o=r.get("amount")-r.get("tax"),s=a.getIn(["acAssets","depreciationAmount"])?a.getIn(["acAssets","depreciationAmount"]):0,u=a.getIn(["acAssets","originalAssetsAmount"])?a.getIn(["acAssets","originalAssetsAmount"]):0;console.log(s,u);var c=(Number(u)-Number(s)).toFixed(2),l=Math.abs(c-o).toFixed(2),d=void 0,f=void 0;Number(c)<=o?(d=["modalTemp","netProfitAmount"],f=["modalTemp","lossAmount"]):(d=["modalTemp","lossAmount"],f=["modalTemp","netProfitAmount"]),(u||s)&&e({type:i.CXLS_CALCULATE_GAIN_OR_LOSS,deletePlace:f,place:d,diff:l})}},t.getBusinessInvioceModal=function(e,t,n){return function(n){n({type:i.SWITCH_LOADING_MASK});var a=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var a=e.data.result,r={STATE_YYSR_TS:"BILL_MAKE_OUT_TYPE_TS",STATE_YYSR_XS:"BILL_MAKE_OUT_TYPE_XS"}[a.runningState];n(h(["modalTemp","uuidList"],(0,s.fromJS)([a.uuid]))),n(h(["modalTemp","categoryUuid"],a.categoryUuid)),n(h(["modalTemp","runningAbstract"],a.runningAbstract)),n(h(["modalTemp","billMakeOutType"],r)),t()}})}},t.getBusinessDefineModal=function(e,t,n){return function(n){n({type:i.SWITCH_LOADING_MASK});var a=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var a=e.data.result,r={STATE_YYZC_GJ:"BILL_AUTH_TYPE_CG",STATE_YYZC_TG:"BILL_AUTH_TYPE_TG"}[a.runningState]||"BILL_AUTH_TYPE_CG";n(h(["modalTemp","uuidList"],(0,s.fromJS)([a.uuid]))),n(h(["modalTemp","runningAbstract"],a.runningAbstract)),n(h(["modalTemp","categoryUuid"],a.categoryUuid)),n(h(["modalTemp","billAuthType"],r)),t()}})}},t.insertlrAccountManagerModal=function(e,t,n){return function(a,r){var c=r().cxlsState,l=c.get("runningFlowTemp"),d=c.get("modalTemp"),f=d.get("runningDate"),m=d.get("runningAbstract"),g=d.get("accountUuid"),p=d.get("handlingAmount"),T=d.get("beOpened"),_=d.get("uuidList").toJS(),C=T?d.get("cardUuid"):l.getIn([t,"contactsCardRange","uuid"]);a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertRunningpayment","POST",JSON.stringify({runningDate:f,runningAbstract:m,accountUuid:g,amount:p,uuidList:_,cardUuid:C,uuid:""}),function(t){a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(t)&&(e(),a(h("modalTemp",(0,s.fromJS)({runningDate:(0,u.formatDate)()}))),a("fromcalCultion"===n?b():E()))})}},t.insertlrAccountCarryoverModal=function(e,t){return function(n,a){var r=a().cxlsState.get("modalTemp"),c=r.get("uuidList"),l=r.get("runningState"),d=r.get("runningDate"),f=r.get("runningAbstract"),m=r.get("stockCardList"),g=r.get("carryoverAmount"),p=[];m&&m.map(function(e){p.push({uuid:e.uuid,amount:g})}),n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertCarryoverItem","POST",JSON.stringify({uuidList:c,runningState:l,runningDate:d,cardList:p,runningAbstract:f}),function(a){(0,u.showMessage)(a,"show")&&(e(),n(h("modalTemp",(0,s.fromJS)({runningDate:(0,u.formatDate)()}))),n("fromcalCultion"===t?b():E())),n({type:i.SWITCH_LOADING_MASK})})}},t.insertlrAccountJzsyModal=function(e,t){return function(n,a){var c=a().cxlsState.get("modalTemp").toJS();n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertAssetsCleaning","POST",JSON.stringify(r({},c)),function(a){(0,u.showMessage)(a,"show")&&(e(),n(h("modalTemp",(0,s.fromJS)({runningDate:(0,u.formatDate)()}))),n("fromcalCultion"===t?b():E())),n({type:i.SWITCH_LOADING_MASK})})}},t.insertlrAccountInvioceModal=function(e,t){return function(n,a){var r=a().cxlsState.get("modalTemp");n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertBusinessMakeoutItem","POST",JSON.stringify(r),function(a){(0,u.showMessage)(a,"show")&&(e(),n(h("modalTemp",(0,s.fromJS)({runningDate:(0,u.formatDate)()}))),n("fromcalCultion"===t?b():E())),n({type:i.SWITCH_LOADING_MASK})})}},t.insertlrAccountInvioceDefineModal=function(e,t){return function(n,a){var r=a().cxlsState.get("modalTemp");n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertBusinessAuthItem","POST",JSON.stringify(r),function(a){(0,u.showMessage)(a,"show")&&(e(),n(h("modalTemp",(0,s.fromJS)({runningDate:(0,u.formatDate)()}))),n("fromcalCultion"===t?b():E())),n({type:i.SWITCH_LOADING_MASK})})}},t.getBusinessBeforeSwitch=function(e,t){return function(n){var a=e.get("parentUuid")?e.get("parentUuid"):e.get("uuid"),r=e.get("beBusiness"),i=e.get("runningState");n(r||"STATE_ZZ"===i?"STATE_YYSR_JZCB"===i?v(e,"modify","LB_JZCB"):"STATE_FPRZ_CG"===i||"STATE_FPRZ_TG"===i?v(e,"modify","LB_FPRZ"):"STATE_KJFP_XS"===i||"STATE_KJFP_TS"===i?v(e,"modify","LB_KJFP"):"STATE_ZCWJZZS"===i?v(e,"modify","LB_ZCWJZZS"):"STATE_ZZ"===i?v(e,"modify","LB_ZZ"):"STATE_CQZC_ZJTX"===i?v(e,"modify","LB_ZJTX"):"STATE_GGFYFT"===i?N(e,t):"STATE_CQZC_JZSY"===i?T.getInitLraccountJzsy(e,t):g.getRunningBusinessDuty("",a):L(e))}},t.jumpCalculateCxToLr=function(e,t,n,a){return function(r,s){r({type:i.SWITCH_LOADING_MASK});var c=e.get("parentUuid")?e.get("parentUuid"):e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+c,function(s){(0,u.showMessage)(s)?(0,o.default)("getRunningSettingInfo","GET","",function(o){if((0,u.showMessage)(s)){var c={LB_JZCB:function(){return"COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS"},LB_FPRZ:function(){return"INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS"},LB_KJFP:function(){return"INVOICING_FROM_CXLS_JUMP_TO_LRLS"},LB_ZCWJZZS:function(){return"TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS"},LB_ZZ:function(){return"TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ"},LB_ZJTX:function(){return"TRANSFER_OUT_FROM_CXLS_JUMP_TO_ZJTX"}}[n]();r({type:i.GET_ACCOUNTCONF_ALL_SETTINGS,receivedData:o.data}),r({type:i.CALCULATE_FROM_CXLS_JUMP_TO_LRLS,pageType:n,rate:o.data.rate,hideCategoryList:o.data.hideCategoryList}),r({type:i.CALCULATE_CHANGE_QUERY}),r({type:i[c],item:e,receivedData:s.data,insertOrModify:t,fromRefresh:!0,rate:o.data.rate,hideCategoryList:o.data.hideCategoryList,uuidList:a}),r({type:i.SWITCH_LOADING_MASK}),r(f.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),r(f.addHomeTabpane("Edit","LrAccount","录入流水"))}else r({type:i.SWITCH_LOADING_MASK})}):r({type:i.SWITCH_LOADING_MASK})})}}),h=(t.changeCurrentPage=function(e,t){return function(n){n({type:i.CHANGE_CURRENT_PAGE_FZHE,assList:e,value:t})}},t.changeCxAccountCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t));"flags"===t[0]&&(r=t),a({type:i.CHANGE_CX_ACCOUNT_COMMON_STRING,tab:e,placeArr:r,value:n})}},t.changeCxAccountCommonOutString=function(e,t){return function(n){n("string"==typeof e?{type:i.CHANGE_CX_ACCOUNT_COMMON_STRING,place:e,value:t}:{type:i.CHANGE_CX_ACCOUNT_COMMON_STRING,placeArr:e,value:t})}}),O=(t.setManageMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["payManageList","childList"]),r=(n.getIn(["flags","selectDate"]),n.getIn(["flags","selectList"])),i=n.getIn(["calculateTemp","cardUuid"]),o=n.getIn(["calculateTemp","usedCard"]),u=[],c=0;r.forEach(function(e){var t=a.find(function(t){return t.get("uuid")===e}),n=t.get("direction"),r=t.get("flowType"),i=t.get("assType");u.push({uuid:e,assType:i});var o=t.get("notHandleAmount"),s=t.get("runningState");"STATE_YYSR_TS"!==s&&"STATE_YYZC_TG"!==s||(o=-Math.abs(o)),"debit"===n?"FLOW_INADVANCE"===r?c-=Number(o):c+=Number(o):"FLOW_INADVANCE"===r?c+=Number(o):c-=Number(o)}),e(h(["modalTemp","uuidList"],(0,s.fromJS)(u))),e(h(["modalTemp","handlingAmount"],c)),e(h(["modalTemp","cardUuid"],i)),e(h(["modalTemp","usedCard"],o))}},t.setCarryoverMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["calculateTemp","stockUuid"]),i=n.getIn(["flags","costTransferType"]);e(h(["modalTemp","uuidList"],a)),e(h(["modalTemp","runningState"],i)),e(h(["modalTemp","cardList"],(0,s.fromJS)([{uuid:r,amount:""}])))}},t.setInvioceMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["flags","invoicingType"]);e(h(["modalTemp","uuidList"],a)),e(h(["modalTemp","billMakeOutType"],r))}},t.setDefineMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["flags","certifiedType"]);e(h(["modalTemp","uuidList"],a)),e(h(["modalTemp","billAuthType"],r))}},t.insertManagerModal=function(e){return function(t,n){var a=n().cxlsState.get("modalTemp"),r=a.get("runningDate"),c=a.get("runningAbstract"),l=a.get("accountUuid"),d=a.get("cardUuid"),f=a.get("handlingAmount")?Math.abs(a.get("handlingAmount")):0,m=a.get("uuidList").toJS();t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertRunningpayment","POST",JSON.stringify({runningDate:r,runningAbstract:c,accountUuid:l,amount:f,uuidList:m,cardUuid:d,uuid:""}),function(n){t({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)&&(e(),t(h("modalTemp",(0,s.fromJS)({runningDate:(0,u.formatDate)(),uuidList:[]}))),t(b()))})}},t.getManagerCategoryList=function(e,t){return function(n){(0,o.default)("getManagerCategoryList","POST",JSON.stringify({assType:t}),function(t){n(h(["flags","managerCategoryList",e],(0,s.fromJS)(t.data)))})}}),N=(t.changeBeforeAmount=function(e,t,n){return function(a,r){t.split(l.TREE_JOIN_STR)[0];var i=t.split(l.TREE_JOIN_STR)[1],o=t.split(l.TREE_JOIN_STR)[2],u=e.get("uuid");a(h(["modalTemp","uuidList",n],(0,s.fromJS)({beOpened:!0,categoryUuid:o,uuid:u,categoryName:i})))}},t.jumpCommonCharge=function(e,t){return function(n){var a=e.get("uuid");n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&n({type:i.INIT_COMMON_CHARGE_FROM_CXLS,data:e.data.result,uuidList:t,uuid:a}),n(T.getRunningSettingInfo()),n(f.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),n(f.addHomeTabpane("Edit","LrAccount","录入流水"))})}}),b=function(){return function(e,t){var n=t().calculationState,a=n.get("flags"),r=n.getIn(["calculateTemp","cardUuid"]),i=n.getIn(["calculateTemp","stockUuid"]),o=a.get("issuedate"),s=a.get("curCategory"),u=a.get("isCheck"),c=a.get("accountingType"),l=n.get("certificationList"),d=n.get("invoicingList"),f=l.get("billAuthType"),m=d.get("billMakeOutType"),g=n.getIn(["costTransferList","runningState"]);switch(c){case"manages":e(_.getCalculateList(o,c,"",s,r,u,""));break;case"invoicing":e(_.getCalculateInvoicingList(o,s,m,""));break;case"certification":e(_.getCalculateCertificationList(o,s,f,""));break;case"costTransfer":e(_.getCalculateCarryoverList(o,g,"","",i))}}};t.deleteSingleFlow=function(e,t){return function(n){var r=[e];c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&(n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunningbusiness","POST",JSON.stringify({deleteList:r}),function(e){if((0,u.showMessage)(e)){if(e.message)if(e.data.errorList.length){var r=e.data.errorList.join(",");a.default.error(r)}else a.default.success(e.message);!e.data.errorList.length&&t()}n({type:i.SWITCH_LOADING_MASK})}))}})}},t.getInitLraccountJzsy=function(e,t){return function(n){var a=e.get("uuid");n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(n({type:i.INIT_JZSY_FROM_CXLS,data:e.data.result,uuidList:t,uuid:a}),e.data.result.beProject&&n(T.getJzsyProjectCardList(e.data.result.projectRange))),n(T.getRunningSettingInfo()),n(f.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),n(f.addHomeTabpane("Edit","LrAccount","录入流水")),n(T.calculateGainForJzsy())})}}},1243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelYllsVisible=t.getYllsBusinessData=void 0;var a,r=n(52),i=(a=r)&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1270)),s=n(22);t.getYllsBusinessData=function(e,t){return function(n){var a=e.get("parentUuid")?e.get("parentUuid"):e.get("uuid");a&&n({type:o.SWITCH_LOADING_MASK}),a&&(0,i.default)("getRunningBusiness","GET","uuid="+a,function(a){(0,s.showMessage)(a)?(n({type:o.SWITCH_LOADING_MASK}),n({type:o.GET_YLLS_BUSINESS_DATA,item:a.data.result,curItem:e}),t&&t()):n({type:o.SWITCH_LOADING_MASK})})}},t.cancelYllsVisible=function(){return function(e){e({type:o.CANCEL_YLLS_VISIBLE})}}},1245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeItemChildShow=t.deleteRunningVc=t.showRelatePaymentFetch=t.showRelateBusinessFetch=t.modifyRunningPayment=t.getRunningPayment=t.getRunningBusinessDuty=void 0;var a,r=f(n(1278)),i=n(52),o=(a=i)&&a.__esModule?a:{default:a},s=n(18),u=n(22),c=f(n(30)),l=(f(n(27)),f(n(1229))),d=f(n(60));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.getRunningBusinessDuty=function(e,t,n,a,i){return function(i,c){console.log(n);var f=c().accountConfState.get("runningCategory");i({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusiness","GET","uuid="+t,function(o){if(i({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(o)){var c=o.data.result.categoryUuid,m=(0,s.fromJS)([]);!function e(t){return t.map(function(t){t.get("uuid")===c&&(m=m.push(t)),t.get("childList")&&t.get("childList").size&&e(t.get("childList"))})}(f);var g={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[o.data.result.categoryType],p=o.data.result.runningState,T=o.data.result[g].beManagemented,_=o.data.result[g].contactsRange,C=o.data.result[g].stockRange,S=o.data.result.beProject,I=o.data.result.projectRange,y=o.data.result.propertyCarryover;"STATE_JK_ZFLX"!==p&&"STATE_TZ_SRGL"!==p&&"STATE_TZ_SRLX"!==p&&"STATE_ZB_ZFLR"!==p&&"STATE_XC_JN"!==p&&"STATE_XC_FF"!==p&&"STATE_SF_JN"!==p&&"STATE_ZS_TH"!==p&&"STATE_ZF_SH"!==p&&"STATE_SF_SFJM"!==p||i(l.changeLrAccountCommonString("",["flags","specialStateforAccrued"],!0)),i(l.getRunningSettingInfo()),i(d.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),i(d.addHomeTabpane("Edit","LrAccount","录入流水")),i({type:r.INIT_LR_ACCOUNT,strJudgeType:"fromCxAccount",receivedData:o.data,category:m,canMakeVc:a,flowNumber:e,uuidList:n,uuid:t}),"STATE_CQZC_JZSY"===p&&i(l.calculateGain()),S&&i(l.getProjectCardList(I,o.data.result)),T&&i(l.getFirstContactsCardList(_,p)),"SX_HW"===y&&i(l.getFirstStockCardList(C,p))}})}},t.getRunningPayment=function(e,t){return function(n){n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningPayment","GET","uuid="+e,function(e){n({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),n({type:r.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.modifyRunningPayment=function(){return{type:r.MODIFY_RUNNING_PAYMENT}},t.showRelateBusinessFetch=function(e,t){return function(n){n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusinessDuty","GET","uuid="+e,function(e){n({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),n({type:r.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.showRelatePaymentFetch=function(e,t){return function(n){n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningPayment","GET","uuid="+e,function(e){n({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),n({type:r.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.deleteRunningVc=function(e,t){return function(n,a){c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(i){1===i.buttonIndex&&(n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("deletevc","POST",JSON.stringify({year:t.substr(0,4),month:t.substr(5,2),vcindexlist:[e]}),function(e){if(n({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var t=a().accountState,i=t.getIn(["flags","issuedate"]),o=t.getIn(["flags","main"]),s=t.getIn(["flags","curCategory"]),c=t.getIn(["flags","curAccountUuid"]),l=t.getIn(["flags","assId"]),d=t.getIn(["flags","assCategory"]),f=t.getIn(["flags","acId"]);n(getAccountDimensionFetch(i,o,s,c,f,d,l))}}))}})}},t.changeItemChildShow=function(e){return{type:r.CHANGE_ITEM_CHILD_SHOW,idx:e}}},1246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_PZ_BOMB="INIT_PZ_BOMB",t.PZBOMB_REVIEWEDBY_VC="PZBOMB_REVIEWEDBY_VC",t.CANCEL_PZBOMB_REVIEWEDBY_VC="CANCEL_PZBOMB_REVIEWEDBY_VC"},1249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeItemChildShow=t.deleteRunningVc=t.showRelatePaymentFetch=t.showRelateBusinessFetch=t.modifyRunningPayment=t.getRunningPayment=t.getRunningBusinessDuty=t.deleteAccountItemCardAndRunning=t.accountItemCheckboxCheckAll=t.accountItemCheckboxCheck=t.saveAccountPayOrReceive=t.oneClickPayment=t.beforeRunningPayOrReceive=t.changeAccountAccountName=t.changeAccountCommonString=t.afterModifyAccountAllList=t.changeSearchType=t.changeCalculateCommonString=t.getFirstStockCardList=t.getAccountObjectList=t.getCostCategoryListInfo=t.getAuthCategoryListInfo=t.getMakeoutCategoryListInfo=t.getManageCategoryListInfo=t.getCalculateCarryoverList=t.getCalculateCertificationList=t.getCalculateInvoicingList=t.getCalculateList=t.getPeriodCalculateList=void 0;var a,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=g(n(1277)),o=n(52),s=(a=o)&&a.__esModule?a:{default:a},u=n(22),c=g(n(30)),l=n(18),d=g(n(60)),f=g(n(43)),m=g(n(1229));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.getPeriodCalculateList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"manages",n=arguments[2];arguments[3],arguments[4];return function(a){a({type:i.SWITCH_LOADING_MASK}),a(L(e));(0,s.default)("getManageList","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",categoryUuid:"",cardUuid:"",isCheck:!1,getPeriod:n}),function(e){if((0,u.showMessage)(e)){var n;a(f.AccountTableGetPeriod(e));a((p(n={type:i.GET_CALCULATE_LIST,receivedData:e.data.result,period:e.data.periodDtoJson,issuedate:"",getPeriod:"true",isCheck:!1,categoryUuid:""},"isCheck",!1),p(n,"searchType","SEARCH_TYPE_DATE"),p(n,"accountingType",t),n))}a({type:i.SWITCH_LOADING_MASK})})}};var T=t.getCalculateList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"manages",n=(arguments[2],arguments[3]),a=arguments[4],r=arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",c=arguments[7];return function(l,d){l({type:i.SWITCH_LOADING_MASK});var f=d().calculationState,m=o?f.getIn(["flags","searchType"]):"";t=t||f.getIn(["flags","accountingType"]),r=(!0===r||!1===r)&&r,(0,s.default)("getManageList","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",categoryUuid:n?"全部"===n?"":n:f.getIn(["flags","categoryUuid"]),cardUuid:a,isCheck:r,getPeriod:"",searchType:m,searchContent:o}),function(a){l({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)&&(m=""==m?"SEARCH_TYPE_DATE":m,l({type:i.GET_CALCULATE_LIST,receivedData:a.data.result,period:a.data.periodDtoJson,issuedate:e,getPeriod:"",isCheck:r,searchType:m,curCategory:n,accountingType:t}))}),c||l(I("",a,r))}},_=t.getCalculateInvoicingList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments[4];return function(o,c){o({type:i.SWITCH_LOADING_MASK});var l=c().calculationState,d=a?l.getIn(["flags","searchType"]):"";(0,s.default)("getBusinessMakeoutList","POST",JSON.stringify({runningDate:"",categoryUuid:t?"全部"===t?"":t:l.getIn(["flags","categoryUuid"]),billMakeOutType:n,searchType:d,searchContent:a}),function(a){o({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)&&(d=""==d?"SEARCH_TYPE_DATE":d,o({type:i.GET_CALCULATE_INVOICING_LIST,receivedData:a.data.result,curCategory:t,billMakeOutType:n,searchType:d,runningDate:e}))}),r||o(y("",n))}},C=t.getCalculateCertificationList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments[4];return function(o,c){o({type:i.SWITCH_LOADING_MASK});var l=c().calculationState,d=a?l.getIn(["flags","searchType"]):"";(0,s.default)("getBusinessAuthList","POST",JSON.stringify({runningDate:"",categoryUuid:t?"全部"===t?"":t:l.getIn(["flags","categoryUuid"]),billAuthType:n,searchType:d,searchContent:a}),function(a){o({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)&&(d=""==d?"SEARCH_TYPE_DATE":d,o({type:i.GET_CALCULATE_CERTIFICATE_LIST,receivedData:a.data.result,curCategory:t,billAuthType:n,searchType:d,runningDate:e}))}),r||o(E("",n))}},S=t.getCalculateCarryoverList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return function(o,c){o({type:i.SWITCH_LOADING_MASK}),o(v(e,t));var l=c().calculationState,d=""===r?[]:[r],f=n?l.getIn(["flags","searchType"]):"";(0,s.default)("getCarryoverList","POST",JSON.stringify({runningDate:"",runningState:t,searchType:f,searchContent:n,cardUuidList:d}),function(n){o({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)&&(f=""==f?"SEARCH_TYPE_DATE":f,o({type:i.GET_CALCULATE_COST_LIST,receivedData:n.data.result,runningState:t,searchType:f,runningDate:e}))}),a||o(A("",t))}},I=t.getManageCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a,r){(0,s.default)("getRunningManageCategory","POST",JSON.stringify({runningDate:e,cardUuid:t,isCheck:n}),function(e){(0,u.showMessage)(e)&&a({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data,isCheck:n})})}},y=t.getMakeoutCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n,a){(0,s.default)("getRunningMakeoutCategory","POST",JSON.stringify({runningDate:e,billMakeOutType:t}),function(e){(0,u.showMessage)(e)&&n({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data})})}},E=t.getAuthCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n,a){(0,s.default)("getRunningAuthCategory","POST",JSON.stringify({runningDate:e,billAuthType:t}),function(e){(0,u.showMessage)(e)&&n({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data})})}},A=t.getCostCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n,a){(0,s.default)("getRunningCarryoverCategory","POST",JSON.stringify({runningDate:e,runningState:t}),function(e){(0,u.showMessage)(e)&&n({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data})})}},L=t.getAccountObjectList=function(e){return function(e){(0,s.default)("getBusinessManagerCardList","POST",JSON.stringify({}),function(t){(0,u.showMessage)(t)&&(e(h("calculate","cardList",(0,l.fromJS)(t.data.cardList))),t.data.categoryList&&e(h("calculate","typeList",(0,l.fromJS)(t.data.categoryList))))})}},v=t.getFirstStockCardList=function(e,t){return function(n,a){a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,s.default)("getCostStock","POST",JSON.stringify({runningDate:e,runningState:t}),function(e){(0,u.showMessage)(e)&&n(h("calculate","stockThingsList",(0,l.fromJS)(e.data.result)))})}},h=t.changeCalculateCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t));"flags"===t[0]&&(r=t),a({type:i.CHANGE_CALCULATE_COMMON_STRING,tab:e,placeArr:r,value:n})}},O=(t.changeSearchType=function e(t,n){return function(a){switch(n){case"manages":a(T()),a(e(["calculateTemp","usedCard"],(0,l.fromJS)({name:"",code:"全部"})));break;case"invoicing":a(_());break;case"certification":a(C());break;case"costTransfer":a(S()),a(e(["calculateTemp","stockCard"],(0,l.fromJS)({name:"",code:"全部"})))}a({type:i.CHANGE_TYPE_OF_SEARCH,placeArr:t,value:n})}},t.afterModifyAccountAllList=function(e){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","issuedate"]),r=n.getIn(["flags","accountingType"]),i=n.getIn(["flags","curCategory"]),o=(n.getIn(["calculateTemp","ass","assid"]),n.getIn(["calculateTemp","ass","asscategory"]),n.getIn(["calculateTemp","ass","acId"]),n.getIn(["calculateTemp","cardUuid"])),s=n.getIn(["flags","isCheck"]),u=n.getIn(["invoicingList","billMakeOutType"]),c=n.getIn(["certificationList","billAuthType"]),l=n.getIn(["costTransferList","runningState"]);switch(r){case"manages":e(T(a,r,"true",i,o,s));break;case"invoicing":e(_("",i,u));break;case"certification":e(C("",i,c));break;case"costTransfer":e(S("",l))}}}),N=(t.changeAccountCommonString=function(e,t,n){return{type:i.CHANGE_ACCOUNT_COMMON_STRING,tab:e,place:t,value:n}},t.changeAccountAccountName=function(e,t,n,a){return{type:i.CHANGE_ACCOUNT_ACCOUNT_NAME,tab:e,placeUUid:t,placeName:n,value:a}},t.beforeRunningPayOrReceive=function(e,t,n,a,r){return function(o){n<0&&(n=-n,e="收"===e?"付":"收"),o({type:i.BEFORE_RUNNING_PAY_OR_RECEIVE,payDirection:e,assList:t,notHandleAmount:n,uuidList:a,runningList:r})}});t.oneClickPayment=function(e){return function(t,n){var a=n().calculationState,r=a.getIn(["flags","selectList"]),i=a.getIn(["payManageList","childList"]),o=a.getIn(["flags","assId"]),s=a.getIn(["flags","assCategory"]),u=a.getIn(["flags","acId"]),c=a.get("mediumAcAssList"),d="";u?c.get("acList").forEach(function(e){e.get("acId")===u&&(d=e.get("acName"))}):c.get("category").forEach(function(e){e.get("category")===s&&e.get("assList").forEach(function(e){e.get("assId")===o&&(d=e.get("assName"))})});var f=(0,l.fromJS)([]),m=(0,l.fromJS)([]),g=(0,l.fromJS)([]),p=(0,l.fromJS)([]);if(i.forEach(function(e){r.indexOf(e.get("uuid"))>-1&&(g=g.push(e),p=p.push(e.get("uuid")),"income"===e.get("property")||"otherIncome"===e.get("property")?m=m.push(e):f=f.push(e))}),m.size&&f.size){var T=0,_=0;m.forEach(function(e){return T+=e.get("notHandleAmount")}),f.forEach(function(e){return _+=e.get("notHandleAmount")});var C=T-_;if(C>0){t(N("收",d,C,p,g))}else{t(N("付",d,-C,p,g))}e()}else if(m.size&&!f.size){var S="收",I=0;m.forEach(function(e){I+=e.get("notHandleAmount"),p.push(e.get("uuid"))}),I<0&&(S="付",I=-I),t(N(S,d,I,p,g)),e()}else if(!m.size&&f.size){var y="付",E=0;f.forEach(function(e){E+=e.get("notHandleAmount"),p.push(e.get("uuid"))}),E<0&&(y="收",E=-E),t(N(y,d,E,p,g)),e()}else console.log("异常情况：未匹配")}},t.saveAccountPayOrReceive=function(e){return function(t,n){var a=n().calculationState,i=a.getIn(["flags","runningInsertOrModify"]),o=a.get("runningTemp").toJS();(0,s.default)(i+"Runningpayment","POST",JSON.stringify(r({},o)),function(n){(0,u.showMessage)(n)&&(t(O()),e())})}},t.accountItemCheckboxCheck=function(e,t,n){return{type:i.ACCOUNT_ITEM_CHECKBOX_SELECT,checked:e,uuid:t,runningDate:n}},t.accountItemCheckboxCheckAll=function(e,t){return{type:i.PAY_RECEIVE_ITEM_CHECKBOX_CHECK_ALL,selectAll:e,listName:t}},t.deleteAccountItemCardAndRunning=function(e){return function(e,t){var n=t().calculationState.getIn(["flags","selectList"]);c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(e({type:i.SWITCH_LOADING_MASK}),(0,s.default)("deleteRunningbusiness","POST",JSON.stringify({deleteList:n}),function(t){if((0,u.showMessage)(t)){if(t.data.errorList.length){var n=t.data.errorList.reduce(function(e,t){return e+","+t});c.Alert(n)}e(O())}e({type:i.SWITCH_LOADING_MASK})}))}})}},t.getRunningBusinessDuty=function(e,t,n,a){return function(a,r){var o=r().accountConfState.get("runningCategory");a({type:i.SWITCH_LOADING_MASK}),(0,s.default)("getNewRunningBusiness","GET","oriUuid="+t,function(t){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(t)){var r=t.data.result.categoryUuid,s=(0,l.fromJS)([]);!function e(t){return t.map(function(t){t.get("uuid")===r&&(s=s.push(t)),t.get("childList")&&t.get("childList").size&&e(t.get("childList"))})}(o);var c=t.data.result.runningState;"STATE_JK_ZFLX"!==c&&"STATE_TZ_SRGL"!==c&&"STATE_TZ_SRLX"!==c&&"STATE_ZB_ZFLR"!==c&&"STATE_ZS_TH"!==c&&"STATE_ZF_SH"!==c||a(m.changeLrAccountCommonString("",["flags","specialStateforAccrued"],!0)),a(m.getRunningSettingInfo()),a(d.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),a(d.addHomeTabpane("Edit","LrAccount","录入流水")),a({type:i.INIT_LR_ACCOUNT,strJudgeType:"fromCxAccount",receivedData:t.data,category:s,canMakeVc:n,flowNumber:e}),"STATE_CQZC_JZSY"===c&&a(m.calculateGain())}})}},t.getRunningPayment=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,s.default)("getRunningPayment","GET","uuid="+e,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),n({type:i.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.modifyRunningPayment=function(){return{type:i.MODIFY_RUNNING_PAYMENT}},t.showRelateBusinessFetch=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,s.default)("getRunningBusinessDuty","GET","uuid="+e,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),n({type:i.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.showRelatePaymentFetch=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,s.default)("getRunningPayment","GET","uuid="+e,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),n({type:i.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.deleteRunningVc=function(e,t){return function(n,a){c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(r){1===r.buttonIndex&&(n({type:i.SWITCH_LOADING_MASK}),(0,s.default)("deletevc","POST",JSON.stringify({year:t.substr(0,4),month:t.substr(5,2),vcindexlist:[e]}),function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var t=a().calculationState,r=t.getIn(["flags","issuedate"]),o=t.getIn(["flags","main"]),s=t.getIn(["flags","curCategory"]),c=(t.getIn(["flags","curAccountUuid"]),t.getIn(["flags","assId"]),t.getIn(["flags","assCategory"]),t.getIn(["flags","acId"]),t.getIn(["flags","isCheck"])),l=t.getIn(["calculateTemp","cardUuid"]);n(T(r,o,"",s,l,c))}}))}})}},t.changeItemChildShow=function(e){return{type:i.CHANGE_ITEM_CHILD_SHOW,idx:e}}},1250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=_(n(14)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78);var u=_(n(1)),c=_(n(0)),l=n(18),d=n(17);n(1258);var f=T(n(30)),m=_(n(1260)),g=_(n(1264)),p=T(n(60));function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}var C=(0,d.immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={rotate:0,magnificationRate:1,imgWpercent:0,idx:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),s(t,[{key:"componentDidMount",value:function(){this.props.dispatch(p.setDdConfig())}},{key:"componentWillReceiveProps",value:function(e,t){0==this.props.preview&&1==e.preview&&this.setState({rotate:0,magnificationRate:1,imgWpercent:0,idx:e.page,maxLimit:40,minLimit:40})}},{key:"render",value:function(){var e=this,t=this.props,n=t.preview,a=t.downloadPermission,r=t.previewImgArr,i=t.closePreviewModal,s=t.downloadEnclosure,c=t.dispatch,l=(t.page,t.type,t.uploadKeyJson,this.state),d=l.idx,p=l.rotate,T=l.magnificationRate,_=l.imgWpercent,C=l.maxLimit,S=l.minLimit,I=r.get(d);return u.default.createElement("div",{className:"preview",style:{display:n?"":"none"},onClick:function(e){}},u.default.createElement("div",{className:"nav"},u.default.createElement("button",{onClick:function(){return e.setState({idx:d-1,imgWpercent:0,rotate:0})},disabled:0==d},u.default.createElement(o.default,{type:"left-circle"}),u.default.createElement("div",null,"上一张")),u.default.createElement("button",{disabled:I&&"TRUE"!==I.get("imageOrFile"),onClick:function(){return e.setState({rotate:p+90})}},u.default.createElement(o.default,{type:"reload"}),u.default.createElement("div",null,"旋转")),I&&"application/pdf"===I.get("mimeType")?u.default.createElement("button",{disabled:.5===T,onClick:function(){e.setState({magnificationRate:T-.5})}},u.default.createElement(o.default,{type:"zoom-out"}),u.default.createElement("div",null,"缩小")):u.default.createElement("button",{disabled:-S>=_,onClick:function(){e.setState({imgWpercent:_-10})}},u.default.createElement(o.default,{type:"minus-circle"}),u.default.createElement("div",null,"缩小")),I&&"application/pdf"==I.get("mimeType")?u.default.createElement("button",{disabled:T>=4||"application/pdf"!==I.get("mimeType"),onClick:function(){e.setState({magnificationRate:T+.5})}},u.default.createElement(o.default,{type:"zoom-in"}),u.default.createElement("div",null,"放大")):u.default.createElement("button",{disabled:_>=C,onClick:function(){e.setState({imgWpercent:_+10})}},u.default.createElement(o.default,{type:"plus-circle"}),u.default.createElement("div",null,"放大")),u.default.createElement("button",{disabled:!a},a?u.default.createElement("span",{onClick:function(){return s(r.getIn([d,"signedUrl"]),r.getIn([d,"fileName"]))}},u.default.createElement(o.default,{type:"download"}),u.default.createElement("div",null,"下载")):u.default.createElement("a",null,u.default.createElement(o.default,{type:"download"}),u.default.createElement("div",null,"下载"))),u.default.createElement("button",{disabled:!(I&&"application/pdf"==I.get("mimeType")),onClick:function(){I&&"application/pdf"==I.get("mimeType")&&f.openLink({url:r.getIn([d,"signedUrl"])})}},u.default.createElement(o.default,{type:"printer"}),u.default.createElement("div",null,"打印")),u.default.createElement("button",{onClick:function(){return e.setState({idx:d+1,imgWpercent:0,rotate:0})},disabled:d===r.size-1},u.default.createElement(o.default,{type:"right-circle"}),u.default.createElement("div",null,"下一张"))),I&&"TRUE"===I.get("imageOrFile")&&n?u.default.createElement(g.default,{imgUrl:""+I.get("signedUrl"),imgWpercent:_,rotate:p,preview:n,maxLimit:C,minLimit:S}):"",I&&"application/pdf"===I.get("mimeType")&&n?u.default.createElement(m.default,{pdfUrl:""+I.get("signedUrl"),dispatch:c,magnificationRate:T,preview:n}):"",u.default.createElement("div",{className:"img-box",style:{display:I&&"application/pdf"!==I.get("mimeType")&&"TRUE"!==I.get("imageOrFile")?"":"none"}},u.default.createElement("div",{className:"img-box-contain"},u.default.createElement("div",{className:"img-box-contain-overflow"},u.default.createElement("div",{className:"noSupport"},u.default.createElement(o.default,{type:"file"}),u.default.createElement("p",null,"仅图片及PDF格式支持预览"))))),u.default.createElement("div",{className:"btnBar"},u.default.createElement("div",{className:"title"},"预览"),u.default.createElement("div",{onClick:i,className:"closeBtn"},u.default.createElement(o.default,{type:"close"}))))}}]),t}(),r.displayName="EnclosurePreview",r.propTypes={preview:c.default.bool,downloadPermission:c.default.bool,previewImgArr:c.default.instanceOf(l.List),closePreviewModal:c.default.func,dispatch:c.default.func,page:c.default.number,type:c.default.string},a=i))||a;t.default=C},1251:function(e,t,n){e.exports=n(1252)},1252:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(0),o=n.n(i),s=n(15);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(2),T=function(e){function t(e){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=d(t).call(this,e),g(m(m(n=!r||"object"!=typeof r&&"function"!=typeof r?m(a):r)),"handleClick",function(e){var t=n.state.checked,a=n.props.onClick,r=!t;n.setChecked(r,e),a&&a(r,e)}),g(m(m(n)),"handleKeyDown",function(e){37===e.keyCode?n.setChecked(!1,e):39===e.keyCode&&n.setChecked(!0,e)}),g(m(m(n)),"handleMouseUp",function(e){var t=n.props.onMouseUp;n.node&&n.node.blur(),t&&t(e)}),g(m(m(n)),"saveNode",function(e){n.node=e});var i=!1;return i="checked"in e?!!e.checked:!!e.defaultChecked,n.state={checked:i},n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a["Component"]),n=t,o=[{key:"getDerivedStateFromProps",value:function(e){var t={},n=e.checked;return"checked"in e&&(t.checked=!!n),t}}],(i=[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoFocus,n=e.disabled;t&&!n&&this.focus()}},{key:"setChecked",value:function(e,t){var n=this.props,a=n.disabled,r=n.onChange;a||("checked"in this.props||this.setState({checked:e}),r&&r(e,t))}},{key:"focus",value:function(){this.node.focus()}},{key:"blur",value:function(){this.node.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.className,a=t.prefixCls,i=t.disabled,o=t.loadingIcon,s=t.checkedChildren,l=t.unCheckedChildren,d=c(t,["className","prefixCls","disabled","loadingIcon","checkedChildren","unCheckedChildren"]),f=this.state.checked,m=p((g(e={},n,!!n),g(e,a,!0),g(e,"".concat(a,"-checked"),f),g(e,"".concat(a,"-disabled"),i),e));return r.a.createElement("button",u({},d,{type:"button",role:"switch","aria-checked":f,disabled:i,className:m,ref:this.saveNode,onKeyDown:this.handleKeyDown,onClick:this.handleClick,onMouseUp:this.handleMouseUp}),o,r.a.createElement("span",{className:"".concat(a,"-inner")},f?s:l))}}])&&l(n.prototype,i),o&&l(n,o),t}();T.propTypes={className:o.a.string,prefixCls:o.a.string,disabled:o.a.bool,checkedChildren:o.a.any,unCheckedChildren:o.a.any,onChange:o.a.func,onMouseUp:o.a.func,onClick:o.a.func,tabIndex:o.a.number,checked:o.a.bool,defaultChecked:o.a.bool,autoFocus:o.a.bool,loadingIcon:o.a.node},T.defaultProps={prefixCls:"rc-switch",checkedChildren:null,unCheckedChildren:null,className:"",defaultChecked:!1},Object(s.polyfill)(T),t.default=T},1253:function(e,t,n){},1258:function(e,t,n){},1260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=g(n(14)),s=g(n(37)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78),n(38);var c=g(n(1)),l=g(n(0)),d=n(17);n(1261);n(127),m(n(30));var f=m(n(1263));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var p=(0,d.immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderPdf=function(e){var t=document.getElementById("canvas_wrapper");t.innerHTML="";var a=atob(e),r=window.PDFJS;if(!r)return n.setState({networkFaild:!0}),s.default.info("网路问题导致PDF预览相关文件加载失败",2);if(r.cMapUrl="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.0.288/cmaps/",r.cMapPacked=!0,!r.getDocument)return n.setState({networkFaild:!0}),s.default.info("网路问题导致PDF预览相关文件加载失败",2);var i=r.getDocument({data:a}),o=n;i.promise.then(function(e){var n="";e.numPages;for(var a=0;a<e.numPages;a++)(n=document.createElement("canvas")).id="pdf_canvas_"+a,t.appendChild(n);for(var r=function(t){e.getPage(t+1).then(function(e){var n=e.getViewport(o.props.magnificationRate),a=document.getElementById("pdf_canvas_"+t);a.width=n.width,a.height=n.height;var r=a.getContext("2d");return e.render({canvasContext:r,viewport:n}).promise})},i=0;i<e.numPages;i++)r(i)}).catch(function(e){document.getElementById("canvas_wrapper").innerHTML="",o.setState({broken:!0})})},n.state={base64:"",broken:!1,networkFaild:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch(f.getCxpzUploadEnclosure(this.props.pdfUrl,function(t){t&&(e.setState({base64:t,broken:!1}),e.renderPdf(t))}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.magnificationRate!==e.magnificationRate&&this.renderPdf(this.state.base64),this.props.pdfUrl!==e.pdfUrl&&this.props.dispatch(f.getCxpzUploadEnclosure(e.pdfUrl,function(e){e&&(t.setState({base64:e,broken:!1,networkFaild:!1}),t.renderPdf(e))}))}},{key:"render",value:function(){var e=this.props,t=(e.pdfUrl,e.dispatch,e.magnificationRate,this.state),n=t.broken,a=t.networkFaild;return c.default.createElement("div",{className:"img-box"},c.default.createElement("div",{className:"img-box-contain"},c.default.createElement("div",{className:"pdf-box-contain-overflow"},c.default.createElement("div",{className:"pdf_canvas_main"},c.default.createElement("div",{className:"pdf_canvas_pdf"},c.default.createElement("div",{id:"canvas_wrapper"}))),n?c.default.createElement("div",{className:"noSupport"},c.default.createElement(o.default,{type:"file"}),c.default.createElement("p",null,"PDF文件损坏，无法预览")):"",a?c.default.createElement("div",{className:"noSupport"},c.default.createElement(o.default,{type:"file"}),c.default.createElement("p",null,"网络异常，无法预览")):"")))}}]),t}(),r.displayName="PdfPreview",r.propTypes={pdfUrl:l.default.string,dispatch:l.default.func,magnificationRate:l.default.number},a=i))||a;t.default=p},1261:function(e,t,n){},1263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCxpzUploadEnclosure=void 0;var a,r=n(31),i=(a=r)&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1246)),s=(n(18),n(22));t.getCxpzUploadEnclosure=function(e,t){return function(n){n({type:o.SWITCH_LOADING_MASK}),e.indexOf("xfn-ddy-annex-bucket.oss-accelerate")>0&&(e=e.replace("xfn-ddy-annex-bucket.oss-accelerate","xfn-ddy-annex-bucket.oss-cn-hangzhou-internal")),(0,i.default)("uploadGetEnclosure","POST",JSON.stringify({enclosureUrl:e}),function(e){(0,s.showMessage)(e)?t(e.data.enclosureFile):t(""),n({type:o.SWITCH_LOADING_MASK})})}}},1264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=c(n(1)),u=c(n(0));function c(e){return e&&e.__esModule?e:{default:e}}var l=(0,n(17).immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawImgScal=function(e,t,a,r){var i,o,s,u,c,l=t/100,d=a/100,f=r/100;i=n.refs.bargraphCanvas,o=i.getContext("2d"),(s=new Image).onload=function(){!0,m()},s.src=e;var m=function(){-f<=l&&l<=d&&(0===l?(u=s.width>960?960:s.width*Number(1+l),c=s.width>960?960*s.height/s.width:s.height*Number(1+l)):(u=s.width>960?960*Number(1+l):s.width*Number(1+l),c=s.width>960?960*s.height/s.width*Number(1+l):s.height*Number(1+l)),n.setState({imgHeight:c,imgWidth:u}),i.width=u,i.height=c,o.clearRect(0,0,u,c),o.drawImage(s,0,0,s.width,s.height,0,0,u,c))}},n.state={imgHeight:0,imgWidth:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),o(t,[{key:"componentDidMount",value:function(){this.drawImgScal(this.props.imgUrl,this.props.imgWpercent,this.props.maxLimit,this.props.minLimit)}},{key:"componentWillReceiveProps",value:function(e){this.props.imgUrl!==e.imgUrl&&this.drawImgScal(e.imgUrl,e.imgWpercent,this.props.maxLimit,this.props.minLimit),this.props.imgUrl===e.imgUrl&&this.props.imgWpercent!==e.imgWpercent&&this.drawImgScal(this.props.imgUrl,e.imgWpercent,this.props.maxLimit,this.props.minLimit)}},{key:"isVertail",value:function(e){return!(e<90)&&(90===e||e%180!=0)}},{key:"render",value:function(){var e=this.props,t=(e.imgUrl,e.imgWpercent,e.rotate),n=this.state,a=n.imgHeight,r=n.imgWidth,i=0,o=0;return this.isVertail(t)?(a>960&&(i=a-960),r>960&&(o=r-960)):(r>960&&(i=r-960),a>960&&(o=a/2+10)),s.default.createElement("div",{className:"img-box"},s.default.createElement("div",{className:"img-box-contain"},s.default.createElement("div",{className:"img-box-contain-overflow"},s.default.createElement("canvas",{ref:"bargraphCanvas",style:{transform:"rotate("+t+"deg)",marginLeft:i+"px",marginTop:o+"px",display:"block"}}))))}}]),t}(),r.displayName="ImgPreview",r.propTypes={imgUrl:u.default.string,imgWpercent:u.default.number,rotate:u.default.number,maxLimit:u.default.number,minLimit:u.default.number},a=i))||a;t.default=l},1269:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=p(n(14)),i=p(n(37)),o=p(n(100)),s=p(n(45)),u=p(n(1230)),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78),n(38),n(99),n(55),n(1231);var l=p(n(1)),d=p(n(6)),f=n(17),m=n(127),g=n(22);function p(e){return e&&e.__esModule?e:{default:e}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1284);var _=u.default.RangePicker,C=(s.default.Option,o.default.Group,(0,f.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),c(t,[{key:"render",value:function(){var e,t=this.props,n=t.issuedate,a=t.endissuedate,o=(t.beginMonth,t.endMonth,t.issues),c=t.changePeriodCallback,f=t.chooseValue,p=t.changeChooseperiodsStatu,C=o?o.findIndex(function(e){return e===n||e.substr(0,4)+"-"+e.substr(6,2)===n}):0,S=o?o.slice(0,C):[],I=function(e,t,n){var a="",r="";return n?1==t?(r=12,a=Number(e)-1):(r=Number(t)-1,a=Number(e)):(r=Number(t),a=Number(e)),{openedyear:a,openedmonth:r}},y=a||n,E=o.get(0),A=o.get(o.size-1),L="",v="";if(o.size){var h=I(A.substr(0,4),A.substr(6,2),!0).openedyear,O=I(A.substr(0,4),A.substr(6,2),!0).openedmonth,N=I(E.substr(0,4),E.substr(6,2)).openedyear,b=I(E.substr(0,4),E.substr(6,2)).openedmonth;L=new Date(h,O,1),v=new Date(N,b,1)}var R=function(e){return e&&((0,d.default)(L)>e||!((0,d.default)(v)>e))},M=[];switch(f){case"MONTH":M.push(l.default.createElement("span",{className:"muti-period-more-select"},l.default.createElement(s.default,{className:"title-more-choose-date",value:n?"-"===n.substr(4,1)?n.substr(0,4)+"年第"+n.substr(5,2)+"期":n:"",showArrow:!0,dropdownMatchSelectWidth:!1,onChange:function(e){return(0,g.debounce)(function(){-1===e.indexOf("Invalid")?c(e,e):i.default.info("日期格式错误，请刷新重试")})()}},o?o.map(function(e,t){return l.default.createElement(s.default.Option,{key:t,value:e.substr(0,4)+"-"+e.substr(6,2)},e)}):""),l.default.createElement(r.default,{type:"calendar",className:"title-more-calendar"})));break;case"MONTH_MONTH":M.push(l.default.createElement("div",{className:"title-more-choose-month-month"},l.default.createElement(s.default,{showArrow:!1,value:n,onChange:function(e){return c(e,e)},dropdownMatchSelectWidth:!1},o?o.map(function(e,t){return l.default.createElement(s.default.Option,{key:t,value:e.substr(0,4)+"-"+e.substr(6,2)},e.substr(0,4)+"-"+e.substr(6,2))}):""),l.default.createElement("span",{className:"choose-month-month-separator"},"~"),l.default.createElement(s.default,{showArrow:!1,value:a===n?"":a,onChange:function(e){return c(n,e)},dropdownMatchSelectWidth:!1},S.map(function(e,t){return l.default.createElement(s.default.Option,{key:t,value:e.substr(0,4)+"-"+e.substr(6,2)},e.substr(0,4)+"-"+e.substr(6,2))}))));break;case"DATE":M.push(l.default.createElement(u.default,{value:n?(0,d.default)(n,"YYYY-MM-DD"):"",allowClear:!1,disabledDate:R,className:"title-more-choose-date",onChange:function(e){return(0,g.debounce)(function(){var t=e.format("YYYY-MM-DD");-1===t.indexOf("Invalid")?c(t,t):i.default.info("日期格式错误，请刷新重试")})()},suffixIcon:l.default.createElement(r.default,{type:"down"})}));break;case"DATE_DATE":M.push(l.default.createElement(_,(T(e={disabledDate:R,className:"title-more-choose-month",allowClear:!1,value:n?[(0,d.default)(n,"YYYY-MM-DD"),(0,d.default)(y,"YYYY-MM-DD")]:[],format:"YYYY-MM-DD"},"allowClear",!1),T(e,"onChange",function(e,t){return(0,g.debounce)(function(){if(t.length>1){var e=t[0],n=t[1];-1===e.indexOf("Invalid")?(n.indexOf("Invalid")>-1&&(n=""),c(e,n)):i.default.info("日期格式错误，请刷新重试")}})()}),T(e,"suffixIcon",l.default.createElement(r.default,{type:"down"})),e)))}return l.default.createElement("div",{className:"common-data-change-box"},M,l.default.createElement(s.default,{className:"title-more-choose",dropdownMatchSelectWidth:!1,value:"",showArrow:!1,onChange:function(e){p(e);var t="-"===n.substr(4,1)?n:n.substr(0,4)+"-"+n.substr(6,2),a="-"===y.substr(4,1)?y:y.substr(0,4)+"-"+y.substr(6,2),r="MONTH"===e||"MONTH_MONTH"===e?(0,d.default)(t,"YYYY-MM").format("YYYY-MM"):(0,d.default)(t,"YYYY-MM-DD").format("YYYY-MM-DD"),o="MONTH"===e||"MONTH_MONTH"===e?(0,d.default)(a,"YYYY-MM").format("YYYY-MM"):(0,d.default)(a,"YYYY-MM-DD").format("YYYY-MM-DD");-1===r.indexOf("Invalid")?(o.indexOf("Invalid")>-1&&(o=""),c(r,"MONTH"===e||"DATE"===e?r:o)):i.default.info("日期格式错误，请刷新重试")}},l.default.createElement(s.default.Option,{value:"MONTH",key:"MONTH"},"按账期查询"),l.default.createElement(s.default.Option,{value:"DATE",key:"DATE"},"按日期查询"),l.default.createElement(s.default.Option,{value:"MONTH_MONTH",key:"MONTH_MONTH"},"按账期区间查询"),l.default.createElement(s.default.Option,{value:"DATE_DATE",key:"DATE_DATE"},"按日期区间查询")),l.default.createElement(m.XfnIcon,{type:"calendar-change",className:"title-more-choose-calendar"}))}}]),t}())||a);t.default=C},1270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_YLLS="INIT_YLLS",t.GET_YLLS_BUSINESS_DATA="GET_YLLS_BUSINESS_DATA",t.CANCEL_YLLS_VISIBLE="CANCEL_YLLS_VISIBLE"},1274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.GET_BUSINESS_LIST="GET_BUSINESS_LIST",t.CHANGE_CX_ACCOUNT_COMMON_STRING="CHANGE_CX_ACCOUNT_COMMON_STRING",t.CXLS_ITEM_CHECKBOX_CHECK_ALL="CXLS_ITEM_CHECKBOX_CHECK_ALL",t.CXLS_ITEM_CHECKBOX_CHECK="CXLS_ITEM_CHECKBOX_CHECK",t.GET_CXLSCONF_ALL_SETTINGS="GET_CXLSCONF_ALL_SETTINGS",t.SET_CURRENT_PZ="SET_CURRENT_PZ",t.GET_ACCOUNTCONF_ALL_SETTINGS="GET_ACCOUNTCONF_ALL_SETTINGS",t.CALCULATE_FROM_CXLS_JUMP_TO_LRLS="CALCULATE_FROM_CXLS_JUMP_TO_LRLS",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS="TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS",t.COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS="COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS",t.INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS="INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS",t.INVOICING_FROM_CXLS_JUMP_TO_LRLS="INVOICING_FROM_CXLS_JUMP_TO_LRLS",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ="TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_ZJTX="TRANSFER_OUT_FROM_CXLS_JUMP_TO_ZJTX",t.AFTER_SAVE_ACCOUNT_PAYMENT="AFTER_SAVE_ACCOUNT_PAYMENT",t.INIT_PAYMENT_STATE="INIT_PAYMENT_STATE",t.INIT_LR_ACCOUNT_SETTINGS="INIT_LR_ACCOUNT_SETTINGS",t.CALCULATE_CHANGE_QUERY="CALCULATE_CHANGE_QUERY",t.CHANGE_PZ_COMMON_STRING="CHANGE_PZ_COMMON_STRING",t.INIT_CXLS="INIT_CXLS",t.INIT_COMMON_CHARGE_FROM_CXLS="INIT_COMMON_CHARGE_FROM_CXLS",t.INIT_JZSY_FROM_CXLS="INIT_JZSY_FROM_CXLS",t.CXLS_CALCULATE_GAIN_OR_LOSS="CXLS_CALCULATE_GAIN_OR_LOSS"},1276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeMessageMask=t.deletePzBombVcFetch=t.getPzVcFetch=t.changeJvDirectionByKey=t.changeFocusInput=t.shortcut=t.afterCopyClick=t.judgeTitleFixed=t.afterLrVcImport=t.closeLrImportContent=t.beforeLrVcImport=t.errorExlDown=t.getFileUploadFetch=t.autoCalculateAll=t.changeJvExchange=t.changeJvStandardAmount=t.changeJvItemNumber=t.getFCListDataFetch=t.getAcCloseBalance=t.autoCalculate=t.changeJvPrice=t.changeJvCount=t.getAmountDataFetch=t.changeLrAssName=t.getAssNextCode=t.changeLrAssId=t.changeLrFzhsModalClear=t.changeLrAssCategory=t.changeLrFzhsModalDisplay=t.changePzAcUnitText=t.changeLrAcAmountStateText=t.changeLrAcDirectionText=t.changeLrCategoryText=t.changeLrAcNameText=t.changeLrAcidText=t.changelrAcModalClear=t.changelrAcModalDisplay=t.checkEnclosureList=t.getLabelFetch=t.initLabel=t.getUploadCallbackFetch=t.getUploadGetTokenFetch=t.changeEnclosureList=t.changeVcEnclosureCountUser=t.deleteUploadImgUrl=t.changeTagName=t.getDraftItemFetch=t.draftSaveFetch=t.deleteVcFetch=t.clearLrpz=t.cancelReviewedJvlist=t.reviewedJvlist=t.saveJvItemFetch=t.cancleAssInput=t.changeTreeSelectContent=t.changeAcModalDisplay=t.showAssDisableModal=t.changeJvAss=t.refreshAcItemAsslist=t.changeJvAc=t.changeJvAmount=t.changeJvDirection=t.copyJvAbstract=t.changeJvAbstract=t.deleteJvItem=t.insertJvItem=t.changeVoucherDate=t.changeVcId=t.getVcFetch=t.initAndGetLastVcIdFetch=t.switchLoadingMask=t.initLrpz=void 0;var a=g(n(37));n(38);var r=m(n(1341)),i=g(n(31)),o=n(22),s=n(18),u=m(n(30)),c=m(n(27)),l=m(n(1239)),d=m(n(43)),f=m(n(60));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function p(e){return{year:e.substr(0,4),month:e.substr(5,2)}}var T=t.initLrpz=function(e,t){return{type:r.INIT_LRPZ,strJudgeEnter:e,data:t}},_=(t.switchLoadingMask=function(){return{type:r.SWITCH_LOADING_MASK}},t.initAndGetLastVcIdFetch=function(e,t){return function(n){var a=new o.DateLib(t);(0,i.default)("getLastVcIndex","POST",JSON.stringify({year:a.getYear(),month:a.getMonth()}),function(t){if((0,o.showMessage)(t)){var r={receivedData:t.data,vcDate:a};n(T(e,r))}})}},t.getVcFetch=function(e,t,n,a){return function(r,u){var c=p(e),l=n,d=a?(0,s.fromJS)(a):a;d&&d.size>1&&(d.get(0)>d.get(1)&&(d=d.reverse(),l=d.size-l-1));var f=u().lrpzState.getIn(["flags","voucherIndexList"]).size-1,m=n==f;if("home"===sessionStorage.getItem("enterLrpz")&&m&&"TRUE"===sessionStorage.getItem("lastVcIsSave"))return sessionStorage.setItem("lrpzHandleMode","insert"),r(T("getVc",{changedIdx:l,vcIndexList:d}));(0,i.default)("getvc","POST",JSON.stringify({year:c.year,month:c.month,vcindex:t}),function(e){if((0,o.showMessage)(e)){sessionStorage.setItem("lrpzHandleMode","modify");var t={receivedData:e.data,changedIdx:l,vcIndexList:d};r(T("getVcFetch",t)),(0,s.fromJS)(e.data.jvlist).some(function(e){return e.get("fcNumber")})&&r(S("modify"))}})}}),C=(t.changeVcId=function(e){return{type:r.CHANGE_VC_ID,vcIndex:e}},t.changeVoucherDate=function(e,t){return function(n){var a=new o.DateLib(e);a.toString().substr(0,7)==t.substr(0,7)?n({type:r.CHANGE_VOUCHER_DATE,vcDate:a.toString()}):(0,i.default)("getLastVcIndex","POST",JSON.stringify({year:a.getYear(),month:a.getMonth()}),function(e){if((0,o.showMessage)(e)){var t={receivedData:e.data,vcDate:a};n(T("getLastVcIdFetch",t))}})}},t.insertJvItem=function(e){return{type:r.INSERT_JV_ITEM,idx:e}},t.deleteJvItem=function(e){return{type:r.DELETE_JV_ITEM,idx:e}},t.changeJvAbstract=function(e,t,n){return{type:r.CHANGE_JV_ABSTRACT,jvAbstract:e,idx:t,bIfTrueLostFocus:n}},t.copyJvAbstract=function(e){return{type:r.COPY_JV_ABSTRACT,idx:e}},t.changeJvDirection=function(e,t){return{type:r.CHANGE_JV_DIRECTION,idx:e,jvDirection:t}},t.changeJvAmount=function(e,t,n){return{type:r.CHANGE_JV_AMOUNT,amount:e,idx:t,jvDirection:n}},t.changeJvAc=function(e,t,n,a,i,o){return{type:r.CHANGE_JV_AC,idx:e,acId:t,acName:n,acFullName:a,assCategorys:i,acunitOpen:o}},t.refreshAcItemAsslist=function(e,t,n){return{type:r.REFRESH_ACITEM_ASSLIST,idx:e,newAsslist:t,assDropListFull:n}},t.changeJvAss=function(e,t,n){return{type:r.CHANGE_JV_ASS,idx:e,assCategory:t,value:n}},t.showAssDisableModal=function(e){return{type:r.SHOW_LRPZ_ASS_DISABLE_MODAL,asscategory:e||""}},t.changeAcModalDisplay=function(e){return{type:r.CHANGE_AC_MODAL_DISPLAY,idx:e}},t.changeTreeSelectContent=function(e){return{type:r.CHANGE_TREE_SELECT_CONTENT,info:e}},t.cancleAssInput=function(e,t){return{type:r.CANCLE_ASS_INPUT,idx:e,value:t}},t.saveJvItemFetch=function e(t,n,l,d){return function(f,m){sessionStorage.setItem("reDirect",t);var g=m().lrpzState,p=g.get("jvList").filter(function(e){return e.get("acid")||e.get("jvabstract")||e.get("jvamount")}),_="/annex/"+m().homeState.getIn(["data","userInfo","sobInfo","sobId"])+"/"+m().homeState.getIn(["data","userInfo","useruuid"])+"/"+(new Date).getTime(),C=[];if(0==p.size)return u.Alert("凭证分录不能为空");if(p.map(function(e,t){var n=e.get("jvabstract").trim();if(n){if("结转本期损益"===n){var a=t+1;C.push("第"+a+'行摘要"结转本期损益"为系统保留摘要字段，请通过"结账"功能结转本期损益')}else if("结转本年利润"===n){var r=t+1;C.push("第"+r+'行摘要"结转本年利润"为系统保留摘要字段，请通过"结账"功能结转本年利润')}else if("期末汇兑损益"===n){var i=t+1;C.push("第"+i+'行摘要"期末汇兑损益"为系统保留摘要字段，请通过"结账"功能调整汇兑损益')}else if("计提折旧摊销费用"===n){var o=t+1;C.push("第"+o+'行摘要"计提折旧摊销费用"为系统保留摘要字段，请通过系统相关功能生成折旧摊销凭证')}}else{var s=t+1;C.push("第"+s+"行存在未填写完整的摘要")}if(e.get("jvabstract").length>c.LRPZ_ABSTRACT_LENGTH){var u=t+1;C.push("第"+u+"行摘要长度不能超过"+c.LRPZ_ABSTRACT_LENGTH+"个字符")}if(!e.get("acid")){var l=t+1;C.push("第"+l+"行存在未填写完整的科目")}if(!e.get("jvamount")&&0!==e.get("jvamount")){var d=t+1;C.push("第"+d+"行存在未填写完整的金额")}if(e.get("jvamount")&&e.get("price")&&"1"==e.get("acunitOpen")&&!e.get("jvcount")){var f=t+1;C.push("第"+f+"行存在未填写完整的数量")}var m=g.getIn(["flags","currencyList"]).find(function(e){return"1"==e.get("standard")}),T=m?m.get("fcNumber"):void 0;if(e.get("fcNumber")==T&&e.get("standardAmount")&&e.get("jvamount")&&Number(e.get("standardAmount"))!=Number(e.get("jvamount"))){var _=t+1;C.push("第"+_+"行为本位币："+m.get("name")+"，请调整汇率为1")}if(e.get("jvamount")&&"1"==e.get("fcStatus")&&!e.get("standardAmount")&&e.get("fcNumber")==T){var S=m?m.get("fcNumber"):"",I=m?m.get("exchange"):"";p=p.setIn([t,"fcNumber"],S).setIn([t,"exchange"],I).setIn([t,"standardAmount"],e.get("jvamount"))}}),C.length)return u.Alert(C.reduce(function(e,t){return e+","+t}));if(Number(g.getIn(["flags","debitTotal"]))!==Number(g.getIn(["flags","creditTotal"])))return u.Alert("借贷不平衡");if(!g.get("vcIndex"))return u.Alert("凭证号未输入");if(!g.get("vcDate"))return u.Alert("日期未输入");f({type:r.SWITCH_LOADING_MASK});var S=p.update(function(e){return e.map(function(e,t){return e.set("jvindex",++t)})});({modify:function(){var e=(0,s.fromJS)({oldvcindex:g.get("oldVcIndex"),oldyear:g.get("oldYear"),oldmonth:g.get("oldMonth"),createdtime:g.get("createdTime"),createdby:g.get("createdBy"),closedby:g.get("closedby")?g.get("closedby"):"",reviewedby:g.get("reviewedBy"),vcindex:g.get("vcIndex"),year:g.get("year"),month:g.get("month"),vcdate:g.get("vcDate"),jvlist:S,enclosureList:g.get("enclosureList"),dirUrl:_,autoEncode:n,enclosureCountUser:g.get("enclosureCountUser")?g.get("enclosureCountUser"):""});(0,i.default)("modifyVc","POST",JSON.stringify(e),function(c){if(15e3===c.code)u.Alert("这有可能是因为分录的摘要中包含特殊字符（表情及异形字等），请修改后重试。若还出现该错误，请联系客服人员支持。");else if(15002===c.code)d.getIn(["arrange","permission"])?l():u.Alert("凭证号已存在");else if((0,o.showMessage)(c)){if(""!=n){var m=(0,s.fromJS)({vcindex:c.data.vcindex,year:g.get("year"),month:g.get("month")});(0,i.default)("uploadgetfile","POST",JSON.stringify(m),function(e){(0,o.showMessage)(e)&&f({type:r.GET_UPLOAD,receivedData:e.data})})}if("true"===t)(0,i.default)("getLastVcIndex","POST",JSON.stringify(e),function(t){if((0,o.showMessage)(t)){a.default.success("保存成功");var n={receivedData:t.data,vcDate:new o.DateLib(e.get("vcdate")),voucherValueStart:[e.get("vcdate"),e.get("vcindex")].join("_"),voucherValueEnd:[e.get("vcdate"),t.data].join("_")};sessionStorage.setItem("lastVcIsSave","TRUE"),sessionStorage.setItem("lrpzHandleMode","insert"),f(T("initAndGetLastVcIdFetchAndVcList",n))}});else{a.default.success("保存成功");var p={receivedData:{oldvcindex:e.get("vcindex"),oldyear:e.get("oldyear"),oldmonth:e.get("oldmonth"),createdtime:e.get("createdtime"),createdby:e.get("createdby"),closedby:e.get("closedby"),reviewedby:e.get("reviewedby"),vcindex:c.data.vcindex,year:e.get("year"),month:e.get("month"),vcdate:e.get("vcdate"),jvlist:S,enclosureList:g.get("enclosureList").toJS(),enclosureCountUser:g.get("enclosureCountUser")},changedIdx:"",vcIndexList:[]};sessionStorage.setItem("lrpzHandleMode","modify"),f(T("getVcFetch",p))}}f({type:r.SWITCH_LOADING_MASK})})},insert:function(){var c=(0,s.fromJS)({vcindex:g.get("vcIndex"),year:g.get("year"),month:g.get("month"),vcdate:g.get("vcDate"),jvlist:S,vcModelKey:g.get("vcKey"),enclosureList:g.get("enclosureList"),dirUrl:_,autoEncode:n,enclosureCountUser:g.get("enclosureCountUser")});(0,i.default)("insertVc","POST",JSON.stringify(c),function(n){0===n.code?p(n,c):15e3===n.code?u.Alert("这有可能是因为分录的摘要中包含特殊字符（表情及异形字等），请修改后重试。若还出现该错误，请联系客服人员支持。"):15002===n.code?d.getIn(["arrange","permission"])?l():(a.default.info("凭证号重复，系统自动编号"),f(e(t,!0,l,d))):(0,o.showMessage)(n),f({type:r.SWITCH_LOADING_MASK})});var p=function(e,n){var u=(0,s.fromJS)({vcindex:e.data.vcindex,year:g.get("year"),month:g.get("month")});if("true"===t)(0,i.default)("getLastVcIndex","POST",JSON.stringify(n),function(e){if((0,o.showMessage)(e)){var t={receivedData:e.data,vcDate:new o.DateLib(n.get("vcdate")),voucherValueStart:[n.get("vcdate"),n.get("vcindex")].join("_"),voucherValueEnd:[n.get("vcdate"),e.data].join("_")};sessionStorage.setItem("lastVcIsSave","TRUE"),sessionStorage.setItem("lrpzHandleMode","insert"),f(T("initAndGetLastVcIdFetchAndVcList",t)),(0,i.default)("getperiod","GET","",function(e){(0,o.showMessage)(e)&&(a.default.success("保存成功"),f({type:r.GET_PERIOD_FETCH,receivedData:e}))})}});else{(0,i.default)("uploadgetfile","POST",JSON.stringify(u),function(e){(0,o.showMessage)(e)&&f({type:r.GET_UPLOAD,receivedData:e.data})});var c=(0,o.formatDate)(),l=m().homeState.getIn(["data","userInfo","username"]),d={receivedData:{oldvcindex:n.get("vcindex"),oldyear:n.get("oldyear"),oldmonth:n.get("oldmonth"),createdtime:c,createdby:l,closedby:n.get("closedby"),reviewedby:n.get("reviewedby"),vcindex:e.data.vcindex,year:n.get("year"),month:n.get("month"),vcdate:n.get("vcdate"),jvlist:S,enclosureList:g.get("enclosureList").toJS(),enclosureCountUser:g.get("enclosureCountUser")},changedIdx:"",vcIndexList:[]};sessionStorage.setItem("lastVcIsSave","FALSE"),sessionStorage.setItem("lrpzHandleMode","modify"),f(T("getVcFetch",d)),(0,i.default)("getperiod","GET","",function(e){(0,o.showMessage)(e)&&(a.default.success("保存成功"),f({type:r.GET_PERIOD_FETCH,receivedData:e}))})}}}})[sessionStorage.getItem("lrpzHandleMode")]()}},t.reviewedJvlist=function(e,t,n,a,s){return function(c,l){c({type:r.SWITCH_LOADING_MASK});var d=l().homeState.getIn(["data","userInfo","username"]);(0,i.default)("reviewVc","POST",JSON.stringify({year:e,month:t,vcindexlist:[n],action:"QUERY_VC-AUDIT"}),function(e){c({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)&&(0===e.data.fail?a?(c({type:r.PZBOMB_REVIEWEDBY_VC,reviewedBy:d}),s&&s()):c({type:r.REVIEWEDBY_VC,reviewedBy:d}):u.Alert(e.data.failList[0]))})}},t.cancelReviewedJvlist=function(e,t,n,a,s){return function(c){c({type:r.SWITCH_LOADING_MASK}),(0,i.default)("cancelReviewVc","POST",JSON.stringify({year:e,month:t,vcindexlist:[n],action:"QUERY_VC-CANCEL_AUDIT"}),function(e){c({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)&&(0===e.data.fail?a?(c({type:r.CANCEL_PZBOMB_REVIEWEDBY_VC}),s&&s()):c({type:r.CANCEL_REVIEWEDBY_VC}):u.Alert(e.data.failList[0]))})}},t.clearLrpz=function(){return{type:r.CLEAR_LRPZ}}),S=(t.deleteVcFetch=function(){return function(e,t){e({type:r.SWITCH_LOADING_MASK});var n=t().lrpzState,a=n.getIn(["flags","voucherIdx"]),s=n.getIn(["flags","voucherIndexList"]),u="",c="";s.size&&(a+1<s.size?(u=a+1,c=a):a-1!=-1&&(u=a-1,c=a-1)),(0,i.default)("deletevc","POST",JSON.stringify({year:n.get("oldYear"),month:n.get("oldMonth"),vcindexlist:[n.get("oldVcIndex")],action:"SAVE_VC-RUD_VC"}),function(t){if(e({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(t))if(-1!=u&&""!=u){var n=s.delete(a);e(_(s.get(u).split("_")[0],s.get(u).split("_")[1],c,n))}else"Home"===sessionStorage.getItem("enterLrpz")?(sessionStorage.setItem("lrpzHandleMode","insert"),e(C())):e(f.removeHomeTabpane("Edit"))})}},t.draftSaveFetch=function(e){return function(e,t){var n=t().lrpzState,l=[];if(n.get("jvList").filter(function(e){return e.get("acid")||e.get("jvabstract")||e.get("jvamount")}).map(function(e,t){if(e.get("jvabstract").length>c.LRPZ_ABSTRACT_LENGTH){var n=t+1;l.push("第"+n+"行摘要长度不能超过"+c.LRPZ_ABSTRACT_LENGTH+"个字符")}}),l.length)return u.Alert(l.reduce(function(e,t){return e+","+t}));if(!n.get("vcIndex"))return u.Alert("凭证号未输入");if(!n.get("vcDate"))return u.Alert("日期未输入");var d=n.get("jvList").update(function(e){return e.filter(function(e){return e.get("acid")||e.get("jvabstract")||e.get("jvamount")}).map(function(e,t){return e.set("jvindex",++t)})});if(n.get("vcKey")){var f=(0,s.fromJS)({createdtime:n.get("createdTime"),createdby:n.get("createdBy"),closedby:n.get("closedby"),reviewedby:n.get("reviewedBy"),vcindex:n.get("vcIndex"),year:n.get("year"),month:n.get("month"),vcdate:n.get("vcDate"),vckey:n.get("vcKey"),jvlist:d,enclosureCountUser:n.get("enclosureCountUser")});(0,i.default)("modifydraft","POST",JSON.stringify(f),function(t){(0,o.showMessage)(t)&&("1"==n.getIn(["flags","locked"])?a.default.success("新增草稿成功"):"1"==t.data.isModify?a.default.success("修改草稿成功"):a.default.success("新增草稿成功"),e({type:r.TEMPORARY_SAVE_FETCH,receivedData:t.data.vckey}))})}else{var m=(0,s.fromJS)({vcindex:n.get("vcIndex"),year:n.get("year"),month:n.get("month"),vcdate:n.get("vcDate"),jvlist:d,enclosureCountUser:n.get("enclosureCountUser")});(0,i.default)("insertdraft","POST",JSON.stringify(m),function(t){(0,o.showMessage)(t)&&(a.default.success("新增草稿成功"),e({type:r.TEMPORARY_SAVE_FETCH,receivedData:t.data}))})}}},t.getDraftItemFetch=function(e,t,n){return function(a,r){var s=r().allState;(0,i.default)("getdraft","POST",JSON.stringify({vckey:e}),function(r){if((0,o.showMessage)(r)){var u=r.data;if("1"==r.data.locked){var c="",l=s.getIn(["period","openedyear"]),d=s.getIn(["period","openedmonth"]);if(l){var f=new Date(l,d,0),m=new Date,g=(new Date).getYear(),p=(new Date).getMonth()+1;c=f<m?f:l==g&&d==p?m:new Date(l,d,1)}else c=new Date;(0,i.default)("getLastVcIndex","POST",JSON.stringify({year:new o.DateLib(c).getYear(),month:new o.DateLib(c).getMonth()}),function(r){if((0,o.showMessage)(r)){var i={receivedData:u,draftList:n,changeDraftIdx:t,vcKey:e,vcIndex:r.data,vcDate:new o.DateLib(c)};a(T("getVcIdAndGetDraftItemFetch",i))}})}else{a(T("getDraftItemFetch",{receivedData:u,draftList:n,changeDraftIdx:t,vcKey:e}))}}})}},t.changeTagName=function(e,t){return{type:r.CHANGE_TAG_NAME,index:e,value:t}},t.deleteUploadImgUrl=function(e){return{type:r.DELETE_UPLOAD_IMG_URL,index:e}},t.changeVcEnclosureCountUser=function(e){return{type:r.CHANGE_VC_ENCLOSURE_COUNT_USER,value:e}},t.changeEnclosureList=function(e){return{type:r.CHANGE_ENCLOSURE_LIST,imgArr:e}},t.getUploadGetTokenFetch=function(){return function(e,t){var n=t().allState.get("expire"),a=Date.parse(new Date)/1e3;console.log(n,a,n<a+300),n<a+300&&(0,i.default)("aliyunOssPolicy","GET","",function(t){e({type:r.AFTER_GET_UPLOAD_SIGNATURE,receivedData:t.data,code:t.code})})}},t.getUploadCallbackFetch=function(e,t,n,a){return function(a){(0,i.default)("uploadgetfile","POST",JSON.stringify({vcindex:e,year:t,month:n}),function(e){(0,o.showMessage)(e)})}},t.initLabel=function(){return function(e){(0,i.default)("initLabel","POST","",function(e){(0,o.showMessage)(e)})}},t.getLabelFetch=function(){return function(e){(0,i.default)("getFjLabelData","POST","",function(t){(0,o.showMessage)(t)&&e({type:r.GET_LABEL_FETCH,receivedData:t})})}},t.checkEnclosureList=function(e,t,n,a,s,u,c){return function(e){var t=[];t.push({fileName:a,enclosurePath:u.data.enclosurePath,size:(u.data.size/1024).toFixed(2),imageOrFile:u.data.mimeType.toString().toUpperCase().indexOf("IMAGE")>-1?"TRUE":"FALSE",label:"无标签",beDelete:!1,mimeType:u.data.mimeType}),(0,i.default)("insertEnclosure","POST",JSON.stringify({enclosureList:t}),function(t){(0,o.showMessage)(t)&&e({type:r.CHANGE_ENCLOSURE_LIST,imgArr:t.data.enclosureList}),c&&e({type:r.SWITCH_LOADING_MASK})})}},t.changelrAcModalDisplay=function(){return{type:r.CHANGE_LR_AC_MODAL_DISPLAY}},t.changelrAcModalClear=function(){return{type:r.CHANGE_LR_AC_MODAL_CLEAR}},t.changeLrAcidText=function(e,t){return{type:r.CHANGE_LR_ACID_TEXT,acId:e,acList:t}},t.changeLrAcNameText=function(e){return{type:r.CHANGE_LR_ACNAME_TEXT,acName:e}},t.changeLrCategoryText=function(e){return{type:r.CHANGE_LR_CATEGORY_TEXT,category:e}},t.changeLrAcDirectionText=function(e){return{type:r.CHANGE_LR_AC_DIRECTON_TEXT,category:e}},t.changeLrAcAmountStateText=function(){return{type:r.CHANGE_LR_AMOUNT_TEXT}},t.changePzAcUnitText=function(e){return{type:r.CHANGE_LR_AC_UNIT_TEXT,unit:e}},t.changeLrFzhsModalDisplay=function(){return{type:r.CHANGE_LR_FZHS_MODAL_DISPLAY}},t.changeLrAssCategory=function(e){return{type:r.CHANGE_LR_ASS_CATEGORY,asscategory:e}},t.changeLrFzhsModalClear=function(){return{type:r.CHANGE_LR_FZHS_MODAL_CLEAR}},t.changeLrAssId=function(e){return{type:r.CHANGE_LR_ASS_ID,assId:e}},t.getAssNextCode=function(e){return function(t,n){(0,i.default)("getassinput","GET","assCategory="+e,function(e){(0,o.showMessage)(e)&&t({type:r.CHANGE_LR_ASS_ID,assId:e.data.newAssId})})}},t.changeLrAssName=function(e){return{type:r.CHANGE_LR_ASS_NAME,assName:e}},t.getAmountDataFetch=function(e,t,n,a,s,u,c){return function(l){var d=new o.DateLib(t);(0,i.default)("getAmountData","POST",JSON.stringify({acid:e,date:t,year:d.getYear(),month:d.getMonth(),asscategory:a,assid:s,asscategoryTwo:u,assidTwo:c}),function(e){(0,o.showMessage)(e)&&l({type:r.GET_AMOUNT_DATA,receivedData:e.data,idx:n})})}},t.changeJvCount=function(e,t,n){return{type:r.CHANGE_JV_COUNT,jvCount:e,idx:t,unitDecimalCount:n}},t.changeJvPrice=function(e,t){return{type:r.CHANGE_JV_PRICE,jvPrice:e,idx:t}},t.autoCalculate=function(e,t,n){return{type:r.AUTO_CALCULATE,idx:e,value:t,unitDecimalCount:n}},t.getAcCloseBalance=function(e,t,n,a,s,u,c){return function(l){var d=new o.DateLib(t);(0,i.default)("getAcCloseBalance","POST",JSON.stringify({acid:e,year:d.getYear(),month:d.getMonth(),asscategory:a,assid:s,asscategoryTwo:u,assidTwo:c}),function(e){(0,o.showMessage)(e)&&l({type:r.GET_AC_CLOSE_BALANCE,receivedData:e.data,idx:n})})}},t.getFCListDataFetch=function(e){return function(t){(0,i.default)("getFCList","GET","",function(n){(0,o.showMessage)(n)&&t({type:r.GET_FC_LIST_DATA_FETCH,receivedData:n.data,idx:e})})}}),I=(t.changeJvItemNumber=function(e,t){return{type:r.CHANGE_JV_ITEM_NUMBER,idx:e,value:t}},t.changeJvStandardAmount=function(e,t){return{type:r.CHANGE_JV_STANDAR_AMOUNT,idx:e,value:t}},t.changeJvExchange=function(e,t){return{type:r.CHANGE_JV_EXCHANGE,idx:e,value:t}},t.autoCalculateAll=function(e,t,n){return{type:r.AUTO_CALCULATE_ALL,idx:e,value:t,unitDecimalCount:n}},t.getFileUploadFetch=function(e,t){return function(n,a){n({type:r.SWITCH_LOADING_MASK}),(0,i.default)("vcImport","UPLOAD",e,function(e){if(n({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)){n(I(e)),t();var s=500;e.data.total>400&&(s=2e3);!function e(t){var u=setTimeout(function(){var s=a().lrpzState.getIn(["flags","showLrModalMask"]);(0,i.default)("acImportProgress","GET","accessToken="+t,function(a){(0,o.showMessage)(a)&&(n({type:r.GET_LRPZ_IMPORT_PROGRESS,receivedData:a,accessToken:t}),a.data.progress>=100&&a.data.successList.length>0&&(0,i.default)("getperiod","GET","",function(e){n({type:r.GET_PERIOD_FETCH,receivedData:e})}),s&&a.data.progress<100&&e(t))}),clearTimeout(u)},s)}(e.data.accessToken)}})}},t.errorExlDown=function(){return function(e,t){var n=t().lrpzState.getIn(["importProgressInfo","accessToken"]);e({type:r.SWITCH_LOADING_MASK}),(0,i.default)("downVcError","POST",JSON.stringify({accessToken:n}),function(t){e({type:r.SWITCH_LOADING_MASK})})}},t.beforeLrVcImport=function(){return{type:r.BEFORE_LR_VC_IMPORT}},t.closeLrImportContent=function(){return{type:r.CLOSE_LR_IMPORT_CONTENT}},t.afterLrVcImport=function(e){return function(t){t({type:r.AFTER_LR_VC_IMPORT,receivedData:e})}}),y=(t.judgeTitleFixed=function(){return{type:r.JUDGE_TITLE_FIXED}},t.afterCopyClick=function(e){return{type:r.AFTER_COPY_CLICL,jvList:e}},t.shortcut=function(){return{type:r.SHORT_CUT}},t.changeFocusInput=function(e){return{type:r.CHANGE_FOCUS_INPUT,ref:e}},t.changeJvDirectionByKey=function(e,t){return{type:r.CHANGE_JV_DIRECTION_BY_KEY,idx:e,direction:t}},t.getPzVcFetch=function(e,t,n,a){return function(u){var c=p(e),l=n,d=a?(0,s.fromJS)(a):a;(0,i.default)("getvc","POST",JSON.stringify({year:c.year,month:c.month,vcindex:t}),function(e){(0,o.showMessage)(e)&&u({type:r.INIT_PZ_BOMB,receivedData:e.data,voucherIdx:l,voucherIndexList:d})})}});t.deletePzBombVcFetch=function(){return function(e,t){e({type:r.SWITCH_LOADING_MASK});var n=t().pzBombState,a=n.getIn(["flags","voucherIdx"]),s=n.getIn(["flags","voucherIndexList"]),u="",c="";s.size&&(a+1<s.size?(u=a+1,c=a):a-1!=-1&&(u=a-1,c=a-1)),(0,i.default)("deletevc","POST",JSON.stringify({year:n.get("year"),month:n.get("month"),vcindexlist:[n.get("vcIndex")],action:"COMMON-DELETE"}),function(n){if(e({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(n)){if(t().homeState.get("panes").some(function(e){return"查询流水"===e.get("title")})){var i=t().cxlsState,f=i.get("currentPage"),m=i.getIn(["flags","mainWater"]),g=i.getIn(["flags","curAccountUuid"]),p=i.getIn(["flags","issuedate"]);e(l.getBusinessList(p,m,g,f))}if(-1!=u&&""!=u){var T=s.delete(a);e(y(s.get(u).split("_")[0],s.get(u).split("_")[1],c,T))}else e(d.showPzBomb(!1))}})}},t.changeMessageMask=function(){return{type:r.CHANGE_LRPZ_MESSAGEMASK}}},1277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.ACCOUNT_CHANGE_VIEW_DIMENSION="ACCOUNT_CHANGE_VIEW_DIMENSION",t.GET_MANAGE_CATEGORY_DETAIL="GET_MANAGE_CATEGORY_DETAIL",t.GET_CALCULATE_LIST="GET_CALCULATE_LIST",t.GET_CALCULATE_INVOICING_LIST="GET_CALCULATE_INVOICING_LIST",t.GET_CALCULATE_CERTIFICATE_LIST="GET_CALCULATE_CERTIFICATE_LIST",t.GET_CALCULATE_COST_LIST="GET_CALCULATE_COST_LIST",t.CHANGE_CALCULATE_COMMON_STRING="CHANGE_CALCULATE_COMMON_STRING",t.CHANGE_ACCOUNT_AMOUNT_SUM="CHANGE_ACCOUNT_AMOUNT_SUM",t.CHANGE_ACCOUNT_COMMON_STRING="CHANGE_ACCOUNT_COMMON_STRING",t.CHANGE_ACCOUNT_ACCOUNT_NAME="CHANGE_ACCOUNT_ACCOUNT_NAME",t.BEFORE_RUNNING_PAY_OR_RECEIVE="BEFORE_RUNNING_PAY_OR_RECEIVE",t.ACCOUNT_ITEM_CHECKBOX_SELECT="ACCOUNT_ITEM_CHECKBOX_SELECT",t.PAY_RECEIVE_ITEM_CHECKBOX_CHECK_ALL="PAY_RECEIVE_ITEM_CHECKBOX_CHECK_ALL",t.INIT_RUNNING_BUSINESS_OR_PAY_CARD="INIT_RUNNING_BUSINESS_OR_PAY_CARD",t.MODIFY_RUNNING_PAYMENT="MODIFY_RUNNING_PAYMENT",t.SHOW_RELATE_PAYMENT_FETCH="SHOW_RELATE_PAYMENT_FETCH",t.CHANGE_ITEM_CHILD_SHOW="CHANGE_ITEM_CHILD_SHOW",t.CHANGE_TYPE_OF_SEARCH="CHANGE_TYPE_OF_SEARCH",t.INIT_SEARCH_CALCULATION="INIT_SEARCH_CALCULATION"},1278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.GET_BUSINESS_LIST="GET_BUSINESS_LIST",t.CHANGE_CX_ACCOUNT_COMMON_STRING="CHANGE_CX_ACCOUNT_COMMON_STRING",t.CXLS_ITEM_CHECKBOX_CHECK_ALL="CXLS_ITEM_CHECKBOX_CHECK_ALL",t.CXLS_ITEM_CHECKBOX_CHECK="CXLS_ITEM_CHECKBOX_CHECK",t.GET_CXLSCONF_ALL_SETTINGS="GET_CXLSCONF_ALL_SETTINGS",t.SET_CURRENT_PZ="SET_CURRENT_PZ",t.SHOW_RELATE_PAYMENT_FETCH="SHOW_RELATE_PAYMENT_FETCH",t.CHANGE_ITEM_CHILD_SHOW="CHANGE_ITEM_CHILD_SHOW",t.INIT_LR_ACCOUNT="INIT_LR_ACCOUNT",t.MODIFY_RUNNING_PAYMENT="MODIFY_RUNNING_PAYMENT"},1279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRunningAccount=t.saveAccountRegret=t.getAccountRegretList=t.getPaoundgeConfig=t.initPoundageTemp=t.savePoundageConfig=t.selectAccountRunningCategory=t.swapRunningAccount=t.runningAccountUsed=t.changeAccountConfAccountNumber=t.closeAccountconfModal=t.changeAccountConfingCommonString=t.beforeModifyaccountConfRunningOld=t.accountconfAccountCheckboxCheck=t.selectOrUnselectAccountAll=t.beforeInsertAccountConf=void 0;var a=l(n(1315)),r=c(n(52)),i=c(n(31)),o=n(22),s=n(18),u=(l(n(30)),l(n(102)));l(n(27));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.beforeInsertAccountConf=function(){return function(e){e({type:a.BEFORE_INSERT_ACCOUNTCONF})}},t.selectOrUnselectAccountAll=function(e){return function(t,n){var r=n().allState,i=r.get("accountList").size?r.getIn(["accountList",0,"childList"]):(0,s.fromJS)([]),o=r.get("accountList",0,"disableList").size?r.getIn(["accountList",0,"disableList"]):(0,s.fromJS)([]);t({type:a.SELECT_OR_UNSELECT_ACCOUNT_ALL,selectAll:e,accountList:i,disableList:o})}},t.accountconfAccountCheckboxCheck=function(e,t){return{type:a.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK,checked:e,uuid:t}},t.beforeModifyaccountConfRunningOld=function(e){return{type:a.BEFORE_MODIFY_ACCOUNTCONF_RUNNING,item:e}};var d=t.changeAccountConfingCommonString=function(e,t,n){return function(r){var i="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t));r({type:a.CHANGE_ACCOUNTCONFIG_COMMON_STRING,placeArr:i,value:n})}},f=(t.closeAccountconfModal=function(){return{type:a.CLOSE_ACCOUNTCONF_MODAL}},t.changeAccountConfAccountNumber=function(e,t){return{type:a.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER,accountType:e,value:t}},t.runningAccountUsed=function(e,t){return function(n){n({type:a.SWITCH_LOADING_MASK}),(0,r.default)("runningAccountUsed","POST",JSON.stringify({accountUuid:e,used:t}),function(r){n({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(r,"show")&&n({type:a.CHANGE_ACCOUNT_CARD_USED_STATUS,accountUuid:e,used:t})})}},t.swapRunningAccount=function(e,t){return function(n){n({type:a.SWITCH_LOADING_MASK}),(0,r.default)("swapRunningAccount","POST",JSON.stringify({fromUuid:e,toUuid:t}),function(e){n({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(e,"show")&&n({type:a.GET_RUNNING_ACCOUNT,receivedData:e.data})})}},t.selectAccountRunningCategory=function(e){return function(t,n){t({type:a.SWITCH_LOADING_MASK}),(0,r.default)("getRunningDetail","GET","uuid="+e,function(e){t({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)&&(t(d("poundage","item",(0,s.fromJS)(e.data.result))),t(d("poundage","name",e.data.result.name)))})}}),m=(t.savePoundageConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"insert",t=arguments[1];return function(n,r){var s=r().accountConfigState.get("poundageTemp"),u=s.get("categoryUuid"),c=s.get("poundageNeedProject"),l=s.get("poundageNeedCurrent");n({type:a.SWITCH_LOADING_MASK}),(0,i.default)(e+"Poundage","POST",JSON.stringify({categoryUuid:u,poundageNeedProject:c,poundageNeedCurrent:l}),function(e){n({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(e,"show")&&(t(),n(m()))})}},t.initPoundageTemp=function(){return{type:a.INIT_POUNDAGE_TEMP}});t.getPaoundgeConfig=function(){return function(e){e({type:a.SWITCH_LOADING_MASK}),(0,i.default)("getPoundage","GET","",function(t){e({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(t)&&(e({type:a.GET_POUNDGE_ACCOUNT,data:t.data}),t.data.categoryUuid&&e(f(t.data.categoryUuid)))})}},t.getAccountRegretList=function(e){return function(t){t({type:a.SWITCH_LOADING_MASK}),(0,r.default)("getAccountRegretList","GET","",function(n){t({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(n)&&(t(d("regret","accountRegretList",(0,s.fromJS)(n.data.accountRegretList))),e&&e())})}},t.saveAccountRegret=function(e,t,n){return function(i){i({type:a.SWITCH_LOADING_MASK}),(0,r.default)("saveAccountRegret","POST",JSON.stringify({uuid:e,newType:t}),function(e){i({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(e,"show")&&(i({type:a.INIT_REGRETTEMP}),i(u.getRunningAccount()),n&&n())})}},t.getRunningAccount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){(0,r.default)("getRunningAccount","GET","currentPage="+e+"&pageSize=1",function(n){(0,o.showMessage)(n)&&t({type:a.GET_ACCOUNT_CONFIG_LIST,list:n.data.resultList,currentPage:e,pageCount:n.data.pages})})}}},1284:function(e,t,n){},1289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.SET_PRINT_VC_INDEX_AND_DATE="SET_PRINT_VC_INDEX_AND_DATE",t.SET_PRINT_STRING="SET_PRINT_STRING"},1290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,n=arguments[1];return((e={},o(e,r.INIT_PZ_BOMB,function(){var e=n.receivedData.jvlist;if(e.length<5){for(var r=e.length,i=[],o=0;o<5-r;o++)console.log(o),i.push({jvdirection:"",jvabstract:"",acid:"",acfullname:"",jvamount:"",asslist:[],acunitOpen:"0",jvcount:"",price:"",jvunit:"",fcStatus:"0",fcNumber:"",exchange:"",standardAmount:""});e=e.concat(i)}return t=function(e){var t=0,n=0;return e.get("jvList").forEach(function(e){"credit"==e.get("jvdirection")?t+=Number(e.get("jvamount")):"debit"==e.get("jvdirection")&&(n+=Number(e.get("jvamount")))}),(e=(e=e.setIn(["flags","creditTotal"],t?t.toFixed(2).toString():"0.00")).setIn(["flags","debitTotal"],n?n.toFixed(2).toString():"0.00")).setIn(["flags","totalBalance"],Number((n-t).toFixed(2)))}(t=t.set("jvList",(0,a.fromJS)(e))).set("createdBy",n.receivedData.createdby).set("closedBy",n.receivedData.closedby).set("reviewedBy",n.receivedData.reviewedby).set("vcDate",n.receivedData.vcdate).set("vcIndex",n.receivedData.vcindex).set("year",n.receivedData.year).set("month",n.receivedData.month).set("createdTime",n.receivedData.createdtime).set("modifiedTime",n.receivedData.modifiedtime).set("enclosureList",(0,a.fromJS)(n.receivedData.enclosureList)).set("enclosureCountUser",n.receivedData.enclosureCountUser).setIn(["flags","voucherIndexList"],n.voucherIndexList).setIn(["flags","voucherIdx"],n.voucherIdx).set("receivedData",(0,a.fromJS)(n.receivedData))}),o(e,r.PZBOMB_REVIEWEDBY_VC,function(){return t.set("reviewedBy",n.reviewedBy).setIn(["receivedData","reviewedby"],n.reviewedBy)}),o(e,r.CANCEL_PZBOMB_REVIEWEDBY_VC,function(){return t.set("reviewedBy","").setIn(["receivedData","reviewedby"],"")}),e)[n.type]||function(){return t})()};var a=n(18),r=i(n(1246));i(n(27));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=(0,a.fromJS)({flags:{debitTotal:"0.00",creditTotal:"0.00",voucherIndexList:[],voucherIdx:0},vcIndex:"",year:"",month:"",vcDate:"",createdTime:"",modifiedTime:"",createdBy:"",closedBy:"",reviewedBy:"",enclosureCountUser:"",jvList:[],enclosureList:[]})},1291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,n=arguments[1];return((e={},o(e,i.INIT_YLLS,function(){return s}),o(e,i.GET_PREVIEW_RUNNING_BUSINESS_FETCH,function(){return t=(t=t.setIn(["views","refreshList"],n.refreshList)).set("jrOri",(0,r.fromJS)(n.receivedData.jrOri)).set("category",(0,r.fromJS)(n.receivedData.category)).set("processInfo",n.receivedData.processInfo?(0,r.fromJS)(n.receivedData.processInfo):null).set("lsItemData",(0,r.fromJS)(a({},n.receivedData.category,n.receivedData.jrOri))).set("currentItem",n.currentItem).setIn(["views","fromPage"],n.fromPage).setIn(["views","uuidList"],n.uuidList)}),o(e,i.GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH,function(){return t=t.set("jrOri",(0,r.fromJS)(n.receivedData.jrOri)).set("category",(0,r.fromJS)(n.receivedData.category)).set("processInfo",n.receivedData.processInfo?(0,r.fromJS)(n.receivedData.processInfo):null).set("lsItemData",(0,r.fromJS)(a({},n.receivedData.category,n.receivedData.jrOri))).set("currentItem",n.item)}),o(e,i.GET_PREVIEW_RELATED_RUNNING_BUSINESS_FETCH,function(){return t=t.set("relatedJrOri",(0,r.fromJS)(n.receivedData.jrOri)).set("relatedCategory",(0,r.fromJS)(n.receivedData.category)).set("relatedProcessInfo",n.receivedData.processInfo?(0,r.fromJS)(n.receivedData.processInfo):null).setIn(["relatedJrOri","uuidList"],n.uuidList)}),e)[n.type]||function(){return t})()};var r=n(18),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(493));function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=(0,r.fromJS)({views:{fromPage:"",uuidList:[],showMask:!1,refreshList:{}},lsItemData:{},currentItem:{},jrOri:{},category:{},processInfo:null,relatedJrOri:{},relatedCategory:{},relatedProcessInfo:null})},1304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccountProjectCardList=t.getAccountContactsCardList=t.getAccountRunningCate=t.changeSearchRunningChooseValue=t.changeSearchRunningAllChildItemShow=t.changeSearchRunningChildItemShow=t.getgetSearchRunningSortFun=t.getRunningBusinessDuty=t.deleteSingleFlow=t.changeBeforeAmount=t.getManagerCategoryList=t.setDefineMadalInitState=t.setInvioceMadalInitState=t.setCarryoverMadalInitState=t.setManageMadalInitState=t.changeCxAccountCommonOutString=t.changeCxAccountCommonString=t.changeCurrentPage=t.getSearchRunningItem=t.getBusinessBeforeSwitch=t.insertRunningInvioceDefineModal=t.insertRunningInvioceModal=t.insertlrAccountJzsyModal=t.insertlrAccountCarryoverModal=t.insertCommonModal=t.insertRunningManagerModal=t.getBusinessDefineModal=t.getBusinessInvioceModal=t.calculateGainForJzsy=t.getBusinessBackModal=t.getBusinessTakeBackModal=t.getBusinessDefrayModal=t.getBusinessGrantModal=t.getBusinessJzsyModal=t.getBusinessManagerModal=t.beforeRunningPayOrReceive=t.getAccountDimensionFetch=t.afterModifyAccountAllList=t.changePzCommonString=t.deleteVcItemFetch=t.runningInsertOrModifyVc=t.deleteAccountItemCardAndRunning=t.accountItemCheckboxCheck=t.accountItemCheckboxCheckAll=t.getBusinessList=t.getPeriodAndBusinessList=void 0;var a=A(n(37)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(38);var i=E(n(492)),o=A(n(52)),s=n(18),u=n(22),c=E(n(30)),l=E(n(27)),d=E(n(43)),f=E(n(60)),m=E(n(177)),g=(E(n(1245)),E(n(1242))),p=E(n(172)),T=E(n(1249)),_=E(n(130)),C=E(n(102)),S=E(n(485)),I=E(n(484)),y=n(488);function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}t.getPeriodAndBusinessList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(a,r){a({type:i.SWITCH_LOADING_MASK});r().searchRunningState;var s=""===n?1:n;(0,o.default)("getSearchRunningList","POST",JSON.stringify({start:e||"",end:e||"",getPeriod:"true",accountUuid:t,currentPage:s,pageSize:l.CXLS_LIMIE_LENGTH}),function(n){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)){var r=a(C.reportGetIssuedateAndFreshPeriod(n)),o=e||r,c=n.data.periodDtoJson?a(d.everyTableGetIssuedate(n.data.periodDtoJson)):"";a({type:i.GET_SEARCH_BUSINESS_LIST,receivedData:n.data.result.jrList,receivedExtra:n.data.result,period:n.data.periodDtoJson,issuedate:o,endissuedate:o,getPeriod:"true",issues:c,accountUuid:t,currentPage:s,pageCount:n.data.result.pageCount,reExpand:!0})}}),a(g.getRunningAccount())}};var L=t.getBusinessList=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",f=arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],g=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return function(p,T){p({type:i.SWITCH_LOADING_MASK});var _=m&&n?n.split(l.TREE_JOIN_STR)[0]:"",C=T().searchRunningState,S=""===r?C.get("currentPage"):r,I=c?C.getIn(["flags","searchType"]):"",y=s||C.getIn(["flags","orderType"]),E=(C.getIn(["flags","chooseValue"]),"-"===e.substr(4,1)?e:e.substr(0,4)+"-"+e.substr(6,2)),A="-"===t.substr(4,1)?t:t.substr(0,4)+"-"+t.substr(6,2),L=void 0;switch(y){case"SEARCH_ORDER_DATE":L=C.getIn(["orderByList","dateSortType"]);break;case"SEARCH_ORDER_JR_INDEX":L=C.getIn(["orderByList","indexSortType"]);break;case"SEARCH_ORDER_CATEGORY_TYPE":L=C.getIn(["orderByList","categorySortType"]);break;case"SEARCH_ORDER_CERTIFICATE":L=C.getIn(["orderByList","certificateSortType"]);break;case"SEARCH_ORDER_CREATE_NAME":L=C.getIn(["orderByList","nameSortType"])}L=""===f?L:f,(0,o.default)("getSearchRunningList","POST",JSON.stringify({start:E||"",end:A||E,accountUuid:_,getPeriod:"true",orderBy:y,searchType:I,searchContent:c,isAsc:L,currentPage:S,pageSize:l.CXLS_LIMIE_LENGTH,isAccount:m}),function(r){if(p({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(r)){var o=r.data.periodDtoJson?p(d.everyTableGetIssuedate(r.data.periodDtoJson)):"";p({type:i.GET_SEARCH_BUSINESS_LIST,receivedData:r.data.result.jrList,receivedExtra:r.data.result,period:r.data.periodDtoJson,issuedate:e,endissuedate:t,issues:o,accountUuid:n,currentPage:S,isAsc:L,orderBy:y,isAccount:m,pageCount:r.data.result.pageCount,getPeriod:"true",reExpand:g}),r.data.result.msg&&a.default.info(r.data.result.msg)}})}},v=(t.accountItemCheckboxCheckAll=function(e,t){return{type:i.SEARCH_ITEM_CHECKBOX_CHECK_ALL,selectAll:e,list:t}},t.accountItemCheckboxCheck=function(e,t){return{type:i.SEARCH_ITEM_CHECKBOX_CHECK,checked:e,item:t}},t.deleteAccountItemCardAndRunning=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2],r=arguments[3];return function(e,s){var l=n||s().searchRunningState.getIn(["flags","selectList"]),d=s().searchRunningState,f=d.getIn(["flags","issuedate"]),m=d.getIn(["flags","endissuedate"]),g=d.getIn(["flags","isAccount"]),p=d.getIn(["flags","curAccountUuid"]),T=d.getIn(["flags","orderType"]);c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(n){1===n.buttonIndex&&(e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunningItems","POST",JSON.stringify({deleteList:l,action:r}),function(n){if((0,u.showMessage)(n)){if(n.message)if(n.data.errorList.length){var r=n.data.errorList.join(",");a.default.error(r)}else a.default.success(n.message);e(L(f,m,p,"",T,t,"",g))}e({type:i.SWITCH_LOADING_MASK})}))}})}},t.runningInsertOrModifyVc=function(e,t,n,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments[5],l=arguments[6],d=arguments[7];return function(f,g){var p=g().searchRunningState,T=p.get("currentPage"),_=p.getIn(["flags","curAccountUuid"]),C=p.getIn(["flags","isAccount"]),S=p.getIn(["flags","orderType"]),I=p.getIn(["flags","endissuedate"]),y=0;f(v(["flags","pzDealNum"],y)),f(v(["flags","pzDealType"],"insert"));var E=t.sort(function(e,t){return parseInt(e.get("oriDate"))-parseInt(t.get("oriDate"))}).sort(function(e,t){return parseInt(e.get("jrNumber"))-parseInt(t.get("jrNumber"))}),A={runningPreview:"QUERY_JR-AUDIT",searchRunning:"QUERY_JR-AUDIT",searchRunningBatch:"QUERY_JR-AUDIT-BATCH_AUDIT"};if(t&&t.size>1)f(v(["flags","pzDealStatus"],!0)),function t(i,c){var l=0,d=setInterval(function(){l<.9?f(v(["flags","pzDealNum"],y+(l+=.01))):(clearInterval(d),f(v(["flags","pzDealNum"],y)))},100);(0,o.default)(n+"VcList","POST",JSON.stringify({uuidList:[i.getIn([c,"oriUuid"])],year:i.getIn([c,"currentYear"]),month:i.getIn([c,"currentMonth"]),vcindexlist:[i.getIn([c,"jrNumber"])],action:A[e]}),function(e){if((0,u.showMessage)(e))if(e.message)if(e.data.result.length){var n=e.data.result.join(",");a.default.error(n),clearInterval(d),f(v(["flags","pzDealStatus"],!1)),f(L(r,I,_,T,S,s,"",C))}else f(v(["flags","pzDealNum"],y+=1)),y<E.size?(clearInterval(d),t(E,y)):(clearInterval(d),f(v(["flags","pzDealStatus"],!1)),f(L(r,I,_,T,S,s,"",C)));else clearInterval(d),f(v(["flags","pzDealStatus"],!1));else clearInterval(d),f(v(["flags","pzDealStatus"],!1)),f(L(r,I,_,T,S,s,"",C))})}(E,0);else{var O=t.getIn([0,"oriUuid"]);f({type:i.SWITCH_LOADING_MASK}),(0,o.default)(n+"VcList","POST",JSON.stringify({uuidList:[O],year:t.getIn([0,"currentYear"]),month:t.getIn([0,"currentMonth"]),vcindexlist:[t.getIn([0,"jrNumber"])],action:A[e]}),function(e){if(f({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&e.message){if(e.data.result.length){var t=e.data.result.join(",");a.default.error(t)}else a.default.success(e.message);c?f(m.getPreviewNextRunningBusinessFetch(l,function(){d?d():f(h())})):d?d():f(h())}})}}},t.deleteVcItemFetch=function(e,t,n,a,r,s,c,l,d,f){return function(f,g){var p=g().searchRunningState,T=p.get("currentPage"),_=p.getIn(["flags","isAccount"]),C=p.getIn(["flags","curAccountUuid"]),S=p.getIn(["flags","orderType"]),I=p.getIn(["flags","endissuedate"]),y=0;f(v(["flags","pzDealNum"],y)),f(v(["flags","pzDealType"],"delete"));var E={runningPreview:"QUERY_JR-CANCEL_AUDIT",searchRunning:"QUERY_JR-CANCEL_AUDIT",searchRunningBatch:"QUERY_JR-CANCEL_AUDIT-BATCH_AUDIT"};console.log("ddd",E[e]);a&&a.length>1?(f(v(["flags","pzDealStatus"],!0)),function i(c){var l=0,d=setInterval(function(){l<.99?f(v(["flags","pzDealNum"],y+(l+=.01))):(clearInterval(d),f(v(["flags","pzDealNum"],y+.99)))},100);(0,o.default)("deleteVcList","POST",JSON.stringify({year:t||c.year,month:n||c.month,vcindexlist:[c.vcIndex],action:E[e]}),function(e){(0,u.showMessage)(e)?(y+=1,f(v(["flags","pzDealNum"],Math.floor(y))),y<a.length?(clearInterval(d),i(a[y])):(clearInterval(d),f(v(["flags","pzDealStatus"],!1)),f(L(r,I,C,T,S,s,"",_)))):(clearInterval(d),f(v(["flags","pzDealStatus"],!1)),f(L(r,I,C,T,S,s,"",_)))})}(a[0])):(f({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteVcList","POST",JSON.stringify({year:t||a[0].year,month:n||a[0].month,vcindexlist:[a[0].vcIndex],action:E[e]}),function(e){if(f({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e,"show")){var t=g().searchRunningState;t.get("currentPage"),t.getIn(["views","curAccountUuid"]),t.getIn(["flags","isAccount"]);c?f(m.getPreviewNextRunningBusinessFetch(l,function(){d?d():f(h())})):d?d():f(h())}}))}},t.changePzCommonString=function(e,t){return function(n){n({type:i.SEARCH_CHANGE_PZ_COMMON_STRING,name:e,value:t})}}),h=t.afterModifyAccountAllList=function(e){return function(t,n){var a=n().searchRunningState,r=a.getIn(["flags","issuedate"]),s=a.getIn(["flags","endissuedate"]),c=a.getIn(["flags","curAccountUuid"]),f=a.getIn(["flags","isAccount"]),m=a.get("currentPage"),g=f&&c?c.split(l.TREE_JOIN_STR)[0]:"",p=a.getIn(["flags","inputValue"]),T=p?a.getIn(["flags","searchType"]):"",_=a.getIn(["flags","orderType"]),C=r?"-"===r.substr(4,1)?r:r.substr(0,4)+"-"+r.substr(6,2):"",S=s?"-"===s.substr(4,1)?s:s.substr(0,4)+"-"+s.substr(6,2):"",I=void 0;switch(_){case"SEARCH_ORDER_DATE":I=a.getIn(["orderByList","dateSortType"]);break;case"SEARCH_ORDER_JR_INDEX":I=a.getIn(["orderByList","indexSortType"]);break;case"SEARCH_ORDER_CATEGORY_TYPE":I=a.getIn(["orderByList","categorySortType"]);break;case"SEARCH_ORDER_CERTIFICATE":I=a.getIn(["orderByList","certificateSortType"]);break;case"SEARCH_ORDER_CREATE_NAME":I=a.getIn(["orderByList","nameSortType"])}t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getSearchRunningList","POST",JSON.stringify({start:C||"",end:S||"",accountUuid:g,getPeriod:"true",orderBy:_,searchType:T,searchContent:p,isAsc:I,currentPage:m,pageSize:l.CXLS_LIMIE_LENGTH,isAccount:f}),function(n){if(t({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)){var a=n.data.periodDtoJson?t(d.everyTableGetIssuedate(n.data.periodDtoJson)):"";t({type:i.GET_SEARCH_BUSINESS_LIST,receivedData:n.data.result.jrList,receivedExtra:n.data.result,period:n.data.periodDtoJson,issuedate:r,endissuedate:s,issues:a,isReflash:e,isAccount:f,accountUuid:c,currentPage:m,isAsc:I,orderBy:_,pageCount:n.data.result.pageCount,getPeriod:"true"})}})}},O=(t.getAccountDimensionFetch=function(e,t,n,a,r,i,o){return function(s){s(O(e,t,n,a,r,i,o))}},function(e,t,n,a,r,s,c,l){return function(e){(0,o.default)("getRunningSettingInfo","GET","",function(t){(0,u.showMessage)(t)&&e({type:i.GET_SEARCH_CONF_ALL_SETTINGS,receivedData:t.data})})}}),N=(t.beforeRunningPayOrReceive=function(e,t,n,a,r){return function(o){n<0&&(n=-n,e="收"===e?"付":"收"),o({type:i.BEFORE_RUNNING_PAY_OR_RECEIVE,payDirection:e,assList:t,notHandleAmount:n,uuidList:a,runningList:r})}},t.getBusinessManagerModal=function(e,t,n,a,c){return function(l,f){l({type:i.SWITCH_LOADING_MASK});var m=f().allState.get("hideCategoryList").find(function(e){return"LB_SFGL"===e.get("categoryType")}).get("uuid"),g=t.get("jrJvUuid"),p=e.get("oriUuid"),T=e.get("categoryUuid"),_=(e.get("oriDate"),!!e.get("beOpened"));p||l(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getBusinessManagerModal",remark:"单笔流水核销"})),(0,o.default)("getJrOri","GET","oriUuid="+p,function(e){if(l({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var t=e.data.jrOri,o=t.notHandleAmount,d=t.oriState,f=t.handleType,p=t.oriDate;a=o<0?"JR_HANDLE_CZ"===f?"credit":"debit"===a?"credit":"debit":"credit"===a&&"STATE_YYZC_TG"!==d&&"STATE_YYZC_DJ"!==d&&"STATE_FY_DJ"!==d&&"STATE_SF_YJZZS"!==d?"credit":"debit",p>(0,u.formatDate)().substr(0,10)&&l(R(["modalTemp","oriDate"],p)),l(R("runningFlowTemp",(0,s.fromJS)(r({},e.data.jrOri,e.data.category)))),l(R(["runningFlowTemp","magenerType"],a)),l(R(["runningFlowTemp","actionFrom"],c)),l(R(["modalTemp","pendingManageDto"],(0,s.fromJS)({categoryUuid:T,pendingManageList:[{uuid:g,beOpened:_,oriDate:p}]}))),l(R(["modalTemp","amount"],Math.abs(e.data.jrOri.notHandleAmount))),l(R(["modalTemp","oriAbstract"],"核销账款")),l(R(["modalTemp","beOpened"],_)),l(R(["modalTemp","categoryUuid"],m)),n()}})}},t.getBusinessJzsyModal=function(e,t,n,a){return function(a,c){a({type:i.SWITCH_LOADING_MASK});var l=e.get("oriUuid");l||a(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getBusinessJzsyModal",remark:"单笔流水核销"})),(0,o.default)("getJrOri","GET","oriUuid="+l,function(l){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(l)){var d=r({},l.data.jrOri,l.data.category),f=d.billList.length?d.billList[0].tax:0,m=(d.amount-f).toFixed(2);a(R("runningFlowTemp",(0,s.fromJS)(d))),a(R(["modalTemp","pendingStrongList"],(0,s.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:d.jrIndex,oriDate:e.get("oriDate"),jrNumber:t.get("jrNumber"),beSelect:!0,amount:m}])));var g=(0,u.formatDate)().substr(0,10);if(d.oriDate>g&&a(R(["modalTemp","oriDate"],d.oriDate)),a(R(["modalTemp","oriState"],"STATE_CQZC_JZSY")),a(R(["modalTemp","categoryUuid"],d.categoryUuid)),a(R(["modalTemp","oriAbstract"],"长期资产处置损益")),a(R(["modalTemp","assets","cleaningAmount"],m)),d.beProject){a(R(["modalTemp","usedProject"],!0));var p=c().homeState.getIn(["data","userInfo","sobInfo","sobId"]),T=d.projectRange;(0,o.default)("getProjectCardList","POST",JSON.stringify({sobId:p,categoryList:T,needCommonCard:!1}),function(e){(0,u.showMessage)(e)&&a(R(["flags","projectList"],(0,s.fromJS)(e.data.result)))})}a(N()),n()}})}},t.getBusinessGrantModal=function(e,t,n,a){return function(a,c){a({type:i.SWITCH_LOADING_MASK});var l=e.get("oriUuid");(0,o.default)("getJrOri","GET","oriUuid="+l,function(o){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(o)){var c=r({},o.data.jrOri,o.data.category),l=(e.get("amount")-(e.get("tax")||0)).toFixed(2),d=c.notHandleAmount<0?"debit":"credit";a(R("runningFlowTemp",(0,s.fromJS)(c))),a(R(["runningFlowTemp","magenerType"],d)),a(R(["modalTemp","pendingStrongList"],(0,s.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:c.jrIndex,oriDate:e.get("oriDate"),beSelect:!0,amount:l}])));var f=(0,u.formatDate)().substr(0,10);c.oriDate>f&&a(R(["modalTemp","oriDate"],c.oriDate)),a(R(["modalTemp","oriState"],"STATE_XC_FF")),a(R(["modalTemp","categoryUuid"],c.categoryUuid)),a(R(["modalTemp","oriAbstract"],{SX_GZXJ:"发放工资薪金",SX_FLF:"支付"+c.categoryName,SX_QTXC:"发放"+c.categoryName}[c.propertyPay])),a(R(["modalTemp","amount"],Math.abs(c.notHandleAmount))),a(R(["modalTemp","payment","actualAmount"],Math.abs(c.notHandleAmount))),n()}})}},t.getBusinessDefrayModal=function(e,t,n,a){return function(a,c){a({type:i.SWITCH_LOADING_MASK});var l=e.get("oriUuid");(0,o.default)("getJrOri","GET","oriUuid="+l,function(o){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(o)){var c=r({},o.data.jrOri,o.data.category),d=c.categoryType,f=(e.get("amount")-(e.get("tax")||0)).toFixed(2),m=c.notHandleAmount<0?"debit":"credit";a(R("runningFlowTemp",(0,s.fromJS)(c))),a(R(["runningFlowTemp","magenerType"],m)),a(R(["modalTemp","pendingStrongList"],(0,s.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:c.jrIndex,oriDate:e.get("oriDate"),beSelect:!0,amount:f,notHandleAmount:c.notHandleAmount,oriUuid:l}])));var g=(0,u.formatDate)().substr(0,10);c.oriDate>g&&a(R(["modalTemp","oriDate"],c.oriDate)),a(R(["modalTemp","oriState"],"LB_SFZC"===d?"STATE_SF_JN":"STATE_XC_JN")),a(R(["modalTemp","categoryUuid"],c.categoryUuid)),a(R(["modalTemp","oriAbstract"],""+("LB_SFZC"===d?{SX_QYSDS:"缴纳企业所得税",SX_QTSF:"缴纳"+c.categoryName,SX_ZZS:"缴纳增值税"}[c.propertyTax]:"缴纳"+{SX_SHBX:"社会保险",SX_ZFGJJ:"住房公积金"}[c.propertyPay]))),"LB_XCZC"===d?(a(R(["modalTemp","payment","actualAmount"],Math.abs(c.notHandleAmount))),"SX_ZFGJJ"===c.propertyPay?a(R(["modalTemp","payment","companyAccumulationAmount"],Math.abs(c.notHandleAmount))):a(R(["modalTemp","payment","companySocialSecurityAmount"],Math.abs(c.notHandleAmount)))):a(R(["modalTemp","amount"],Math.abs(c.notHandleAmount))),n()}})}},t.getBusinessTakeBackModal=function(e,t,n,a){return function(a,c){a({type:i.SWITCH_LOADING_MASK});var l=e.get("oriUuid");(0,o.default)("getJrOri","GET","oriUuid="+l,function(o){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(o)){var c=r({},o.data.jrOri,o.data.category),l=(e.get("amount")-(e.get("tax")||0)).toFixed(2);a(R("runningFlowTemp",(0,s.fromJS)(c))),a(R(["modalTemp","pendingStrongList"],(0,s.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:c.jrIndex,oriDate:e.get("oriDate"),beSelect:!0,amount:l}])));var d=(0,u.formatDate)().substr(0,10);c.oriDate>d&&a(R(["modalTemp","oriDate"],c.oriDate)),a(R(["modalTemp","oriState"],"STATE_ZF_SH")),a(R(["modalTemp","categoryUuid"],c.categoryUuid)),a(R(["modalTemp","oriAbstract"],"暂付款收回")),a(R(["modalTemp","amount"],c.notHandleAmount)),n()}})}},t.getBusinessBackModal=function(e,t,n,a){return function(a,c){a({type:i.SWITCH_LOADING_MASK});var l=e.get("oriUuid");(0,o.default)("getJrOri","GET","oriUuid="+l,function(o){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(o)){var c=r({},o.data.jrOri,o.data.category),l=(e.get("amount")-(e.get("tax")||0)).toFixed(2);a(R("runningFlowTemp",(0,s.fromJS)(c))),a(R(["modalTemp","pendingStrongList"],(0,s.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:c.jrIndex,oriDate:e.get("oriDate"),beSelect:!0,amount:l}])));var d=(0,u.formatDate)().substr(0,10);c.oriDate>d&&a(R(["modalTemp","oriDate"],c.oriDate)),a(R(["modalTemp","oriState"],"STATE_ZS_TH")),a(R(["modalTemp","categoryUuid"],c.categoryUuid)),a(R(["modalTemp","oriAbstract"],"暂收款退还")),a(R(["modalTemp","amount"],c.notHandleAmount)),n()}})}},t.calculateGainForJzsy=function(){return function(e,t){var n=t().searchRunningState,a=n.get("modalTemp"),r=n.get("runningFlowTemp"),o=r.getIn(["billList",0,"tax"])||0,s=r.get("amount")-o,u=a.getIn(["assets","depreciationAmount"])?a.getIn(["assets","depreciationAmount"]):0,c=a.getIn(["assets","originalAssetsAmount"])?a.getIn(["assets","originalAssetsAmount"]):0,l=(Number(c)-Number(u)).toFixed(2),d=Math.abs(l-s).toFixed(2),f=void 0,m=void 0;Number(l)<=s?(f=["modalTemp","netProfitAmount"],m=["modalTemp","lossAmount"]):(f=["modalTemp","lossAmount"],m=["modalTemp","netProfitAmount"]),e(R(["modalTemp","amount"],d)),e({type:i.SEARCH_CALCULATE_GAIN_OR_LOSS,deletePlace:m,place:f,diff:d})}}),b=(t.getBusinessInvioceModal=function(e,t,n,a){return function(a,r){a({type:i.SWITCH_LOADING_MASK});var c=e.get("oriUuid"),l=r().allState.get("hideCategoryList").find(function(e){e.get("categoryType")}),f=l&&l.get("uuid");c||a(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getBusinessInvioceModal",remark:"单笔流水核销"})),(0,o.default)("getJrOri","GET","oriUuid="+c,function(e){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var r=e.data.jrOri,o=r.billList[0].oriState,c={STATE_KJFP_TS:"BILL_MAKE_OUT_TYPE_TS",STATE_KJFP_XS:"BILL_MAKE_OUT_TYPE_XS"}[o],l={STATE_KJFP_TS:"退销开具红字发票",STATE_KJFP_XS:"收入开具发票"}[o],d=r.billList[0],m=d.oriUuid,g=d.tax,p=d.taxRate,T=d.notHandleAmount,_=[{oriUuid:m,taxAmount:g,taxRate:p,categoryUuid:r.categoryUuid,oriState:r.billList[0].oriState,oriAmount:r.amount,jrJvUuid:t.get("jrJvUuid"),oriDate:r.oriDate}],C=(0,u.formatDate)().substr(0,10);r.oriDate>C&&a(R(["modalTemp","oriDate"],r.oriDate)),a(R(["modalTemp","categoryUuid"],f)),a(R(["modalTemp","oriAbstract"],l)),a(R(["modalTemp","billType"],c)),a(R(["modalTemp","oriState"],o)),a(R(["modalTemp","amount"],T)),a(R(["modalTemp","pendingStrongList"],(0,s.fromJS)(_))),n()}})}},t.getBusinessDefineModal=function(e,t,n,a){return function(a,r){a({type:i.SWITCH_LOADING_MASK});var c=e.get("oriUuid"),l=r().allState.get("hideCategoryList").find(function(e){e.get("categoryType")}),f=l&&l.get("uuid");c||a(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getBusinessDefineModal",remark:"单笔流水核销"})),(0,o.default)("getJrOri","GET","oriUuid="+c,function(e){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var r=e.data.jrOri,o=(r.billList[0].tax,r.billList[0].tax,r.billList[0].oriState),c={STATE_FPRZ_CG:"BILL_AUTH_TYPE_CG",STATE_FPRZ_TG:"BILL_AUTH_TYPE_TG"}[o]||"BILL_AUTH_TYPE_CG",l={STATE_FPRZ_CG:"增值税专用发票认证",STATE_FPRZ_TG:"退购红字发票认证"}[o],d=r.billList[0],m=d.oriUuid,g=d.tax,p=d.notHandleAmount,T=[{oriUuid:m,taxAmount:g,taxRate:null,categoryUuid:r.categoryUuid,oriAmount:null,jrJvUuid:t.get("jrJvUuid"),oriDate:r.oriDate}],_=(0,u.formatDate)().substr(0,10);r.oriDate>_&&a(R(["modalTemp","oriDate"],r.oriDate)),a(R(["modalTemp","oriAbstract"],l)),a(R(["modalTemp","categoryUuid"],f)),a(R(["modalTemp","billType"],c)),a(R(["modalTemp","oriState"],o)),a(R(["modalTemp","amount"],p)),a(R(["modalTemp","pendingStrongList"],(0,s.fromJS)(T))),n()}})}},t.insertRunningManagerModal=function(e,t,n){return function(t,r){var c=r().searchRunningState,l=c.get("runningFlowTemp"),d=c.get("modalTemp"),f=d.get("oriDate"),m=d.get("oriAbstract"),g=d.get("accounts"),p=d.get("amount"),T=d.get("categoryUuid"),_=(d.get("poundageCurrentCardList")||(0,s.fromJS)([])).toJS(),C=(d.get("poundageProjectCardList")||(0,s.fromJS)([])).toJS(),S=d.get("needUsedPoundage"),I=d.get("pendingManageDto").toJS(),E=l.get("currentCardList").toJS(),A=r().searchRunningAllState.get("enclosureList");if(m.length>45)a.default.info("摘要不得大于45个字");else{t({type:i.SWITCH_LOADING_MASK});var L=l.get("magenerType"),v=l.get("actionFrom"),O="";"debit"===L?O="shouldReturn"===v?"QUERY_JR-QUICK_OPERATION-PAYMENT_REFUND":"QUERY_JR-QUICK_OPERATION-COLLECTION":"credit"===L&&(O="shouldReturn"===v?"QUERY_JR-QUICK_OPERATION-INCOME_REFUND":"QUERY_JR-QUICK_OPERATION-PAYMENT"),(0,o.default)("insertPaymentManage","POST",JSON.stringify({oriDate:f,oriAbstract:m,accounts:g,amount:p,pendingManageDto:I,categoryUuid:T,currentCardList:E,moedAmount:"",poundageCurrentCardList:_,poundageProjectCardList:C,needUsedPoundage:S,enclosureList:A,action:O}),function(a){t({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(a,"show")&&(e(),t(R("modalTemp",(0,s.fromJS)({oriDate:(0,u.formatDate)().substr(0,10)}))),t(y.searchRunningAllActions.clearEnclosureList()),t("fromcalCultion"===n?M():h()))})}}},t.insertCommonModal=function(e,t,n,c){return function(t,l){var d=l().searchRunningState,f=(d.get("runningFlowTemp"),d.get("modalTemp").toJS()),m=l().searchRunningAllState.get("enclosureList");f.oriAbstract.length>45?a.default.info("摘要不得大于45个字"):(t({type:i.SWITCH_LOADING_MASK}),(0,o.default)(c,"POST",JSON.stringify(r({},f,{enclosureList:m})),function(a){t({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(a,"show")&&(e(),t(R("modalTemp",(0,s.fromJS)({oriDate:(0,u.formatDate)().substr(0,10)}))),t(y.searchRunningAllActions.clearEnclosureList()),t("fromcalCultion"===n?M():h()))}))}},t.insertlrAccountCarryoverModal=function(e,t){return function(n,r){var c=r().searchRunningState.get("modalTemp"),l=c.get("uuidList"),d=c.get("runningState"),f=c.get("oriDate"),m=c.get("oriAbstract"),g=c.get("stockCardList"),p=c.get("carryoverAmount"),T=r().searchRunningAllState.get("enclosureList");if(m.length>45)a.default.info("摘要不得大于45个字");else{var _=[];g&&g.map(function(e){_.push({uuid:e.uuid,amount:p})}),n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertCarryoverItem","POST",JSON.stringify({uuidList:l,runningState:d,oriDate:f,cardList:_,oriAbstract:m,enclosureList:T}),function(a){(0,u.showMessage)(a,"show")&&(e(),n(R("modalTemp",(0,s.fromJS)({oriDate:(0,u.formatDate)()}))),n("fromcalCultion"===t?M():h())),n({type:i.SWITCH_LOADING_MASK})})}}},t.insertlrAccountJzsyModal=function(e,t){return function(n,c){var l=c().searchRunningState.get("modalTemp").toJS(),d=c().searchRunningAllState.get("enclosureList");l.oriAbstract.length>45?a.default.info("摘要不得大于45个字"):(n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertCarryover","POST",JSON.stringify(r({},l,{enclosureList:d,action:"QUERY_JR-QUICK_OPERATION-DISPOSAL_PROFIT_LOSS"})),function(a){(0,u.showMessage)(a,"show")&&(e(),n(R("modalTemp",(0,s.fromJS)({oriDate:(0,u.formatDate)()}))),n(y.searchRunningAllActions.clearEnclosureList()),n("fromcalCultion"===t?M():h())),n({type:i.SWITCH_LOADING_MASK})}))}},t.insertRunningInvioceModal=function(e,t){return function(n,c){var l=c().searchRunningState.get("modalTemp").toJS(),d=c().searchRunningAllState.get("enclosureList");l.oriAbstract.length>45?a.default.info("摘要不得大于45个字"):(n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertInvoice","POST",JSON.stringify(r({},l,{enclosureList:d,action:"QUERY_JR-QUICK_OPERATION-INVOICE"})),function(a){(0,u.showMessage)(a,"show")&&(e(),n(R("modalTemp",(0,s.fromJS)({oriDate:(0,u.formatDate)()}))),n(y.searchRunningAllActions.clearEnclosureList()),n("fromcalCultion"===t?M():h())),n({type:i.SWITCH_LOADING_MASK})}))}},t.insertRunningInvioceDefineModal=function(e,t){return function(n,c){var l=c().searchRunningState.get("modalTemp").toJS(),d=c().searchRunningAllState.get("enclosureList");l.oriAbstract.length>45?a.default.info("摘要不得大于45个字"):(n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertInvoice","POST",JSON.stringify(r({},l,{enclosureList:d,action:"QUERY_JR-QUICK_OPERATION-INVOICE"})),function(a){(0,u.showMessage)(a,"show")&&(e(),n(R("modalTemp",(0,s.fromJS)({oriDate:(0,u.formatDate)()}))),n(y.searchRunningAllActions.clearEnclosureList()),n("fromcalCultion"===t?M():h())),n({type:i.SWITCH_LOADING_MASK})}))}},t.getBusinessBeforeSwitch=function(e,t,n){return function(e){e(b(n.get(t),"modify",n,"edit",t))}},t.getSearchRunningItem=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"search",s=arguments[4],c=arguments[5];return function(l,m){l({type:i.SWITCH_LOADING_MASK});var g=e.get("oriUuid");g||l(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getSearchRunningItem,状态："+t+"，item："+e+",page:"+a+",uuidList:"+n+",index:"+s,remark:"核算管理 查询流水 跳转到 录入流水"})),(0,o.default)("getJrOri","GET","oriUuid="+g,function(a){if((0,u.showMessage)(a)){var o=a.data.jrOri,s=o.oriState,d=(o.jrState,o.oriDate),m=o.relationCategoryUuid,g="STATE_CQZC_ZJTX"===s?"LB_ZJTX":"STATE_CQZC_JZSY"===s?"LB_JZSY":a.data.category.categoryType,T="LB_KJFP"===g||"LB_ZCWJZZS"===g||"LB_ZZ"===g||"LB_FPRZ"===g||"LB_JZCB"===g||"LB_SFGL"===g||"LB_GGFYFT"===g||"LB_ZJTX"===g||"LB_JZSY"===g||"LB_CHDB"===g||"LB_CHYE"===g||"LB_JXSEZC"===g||"LB_CHZZ"===g||"LB_CHTRXM"===g||"LB_SYJZ"===g||"LB_XMJZ"===g;if(c){l(I.changeViewString("disabledChange",!0)),l(T?_.justNewCalculatebusiness(g,s,!0):p.copyRunning(r({},a.data.jrOri,a.data.category,{uuid:a.data.jrOri.categoryUuid}),!0)),a.data.jrOri.oriDate=(0,u.formatDate)(),a.data.jrOri.beCertificate=!1,a.data.jrOri.currentAmount="";var C=a.data.category.propertyPay;if("STATE_XC_DJ"!==s||"SX_SHBX"!==C&&"SX_ZFGJJ"!==C){if("STATE_XC_JN"===s&&("SX_SHBX"===C||"SX_ZFGJJ"===C)){var y=a.data.jrOri.amount;a.data.jrOri.payment.personSocialSecurityAmount="",a.data.jrOri.payment.personAccumulationAmount="",a.data.jrOri.payment.companyAccumulationAmount=y,a.data.jrOri.payment.companySocialSecurityAmount=y,a.data.jrOri.payment.actualAmount=y}}else{var E=a.data.jrOri.amount;a.data.jrOri.oriState="STATE_XC_JN",a.data.jrOri.payment.companySocialSecurityAmount="",a.data.jrOri.payment.companyAccumulationAmount="",a.data.jrOri.payment.actualAmount=E}"SX_GZXJ"===C&&"STATE_XC_FF"===s&&a.data.category.acPayment.beAccrued&&(a.data.jrOri.payment.actualAmount=a.data.jrOri.amount)}if(T){var A={LB_KJFP:function(){return"INVOICING_FROM_SEARCH_JUMP_TO_LRLS"},LB_ZCWJZZS:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_LRLS"},LB_ZZ:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_NBZZ"},LB_ZJTX:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_ZJTX"},LB_JZSY:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_JZSY"},LB_FPRZ:function(){return"INVOICE_AUTH_FROM_SEARCH_JUMP_TO_LRLS"},LB_JZCB:function(){return"COST_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS"},LB_SFGL:function(){return"PAYMANAGE_FROM_SEARCH_JUMP_TO_LRLS"},LB_GGFYFT:function(){return"COMMONCHARGE_FROM_SEARCH_JUMP_TO_LRLS"},LB_CHDB:function(){return"INVENTORY_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS"},LB_CHYE:function(){return"INVENTORY_BALANCE_FROM_SEARCH_JUMP_TO_LRLS"},LB_JXSEZC:function(){return"TAX_TRANSTER_FROM_SEARCH_JUMP_TO_LRLS"},LB_CHZZ:function(){return"STOCK_BUILDUP_FROM_SEARCH_JUMP_TO_LRLS"},LB_CHTRXM:function(){return"STOCK_INTO_PROJECT_FROM_SEARCH_JUMP_TO_LRLS"},LB_XMJZ:function(){return"PROJECT_CARROVER_FROM_SEARCH_JUMP_TO_LRLS"},LB_SYJZ:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_SYJZ"}}[g]();l({type:i.CALCULATE_FROM_SEARCH_JUMP_TO_EDIT,pageType:g,PageTab:"LB_SFGL"===g?"business":"payment",insertOrModify:t,disabledChange:c,enclosureList:a.data.jrOri.enclosureList}),l({type:i[A],item:e,receivedData:a.data,insertOrModify:t,disabledChange:c,uuidList:n}),l({type:i.CHANGE_ORITEMP_ORIDATE,date:a.data.jrOri.oriDate});var L=[],v=[],h="";if("LB_CHDB"===s&&a.data.jrOri.warehouseCardList.map(function(e){"WAREHOUSE_STATUS_FROM"===e.warehouseStatus&&(h=e.cardUuid)}),a.data.jrOri.stockCardList&&a.data.jrOri.stockCardList.length&&a.data.jrOri.stockCardList.map(function(e,t){"STATE_CHZZ_ZZD"===s||e.childCardList?(e.amount=0,e.childCardList.map(function(e,n){e.storeUuid=e.warehouseCardUuid,e.parentIndex=t,L.push(e)})):L.push({cardUuid:e.cardUuid,storeUuid:"LB_CHDB"!==s?e.warehouseCardUuid:h,assistList:e.assistList,batchUuid:e.batchUuid})}),a.data.jrOri.stockCardOtherList&&a.data.jrOri.stockCardOtherList.length&&a.data.jrOri.stockCardOtherList.map(function(e,t){v.push({cardUuid:e.cardUuid,storeUuid:e.warehouseCardUuid,assistList:e.assistList,batchUuid:e.batchUuid})}),"LB_JZSY"===g&&l(_.getJzsyProjectCardList(a.data.category.projectRange)),"LB_JZCB"===g){var O="LB_YYSR"!==a.data.jrOri.relationCategoryType,N="LB_FYZC"===a.data.jrOri.relationCategoryType,b="LB_FYZC"===a.data.jrOri.relationCategoryType,R="LB_FYZC"===a.data.jrOri.relationCategoryType,M="LB_FYZC"===a.data.jrOri.relationCategoryType;l(_.getJzsyProjectCardList(a.data.jrOri.projectRange,"CostTransferTemp",O,"",N,b,R,M)),L.length&&l(S.getModifyStockPrice(d,L,"CostTransfer","stockCardList","")),a.data.jrOri.oriState}if("LB_ZJTX"===g&&l(_.getProjectCardList(a.data.category.projectRange)),"LB_CHDB"===g&&(l(_.getCanUseWarehouseCardList({temp:"StockTemp"})),l(_.getStockCardList()),l(_.getJrProjectShareType()),l(S.getModifyStockPrice(a.data.jrOri.oriDate,L,"Stock","stockCardList",""))),"LB_CHYE"===g&&(l(_.getStockCardList("BalanceTemp")),l(_.getCanUseWarehouseCardList({temp:"BalanceTemp"})),l(S.getModifyStockPrice(a.data.jrOri.oriDate,L,"Balance","stockCardList",""))),"LB_CHZZ"===g&&(l(_.getStockCardList("StockBuildUpTemp")),l(_.getCanUseWarehouseCardList({temp:"StockBuildUpTemp"})),"STATE_CHZZ_ZZCX"===s?l(S.getModifyStockPrice(d,L.concat(v),"StockBuildUp","stockCardList","stock")):L.length&&l(S.getModifyStockPrice(d,L,"StockBuildUp","stockCardList","Assembly",a.data.jrOri.stockCardList))),"LB_JXSEZC"===g){var D=a.data.category.relationCategoryType,P=a.data.category.propertyCarryover,w=a.data.category.projectRange,J=a.data.category.acBusinessExpense;("LB_YYZC"===D&&"SX_FW"===P||"LB_FYZC"===D)&&l(_.getJzsyProjectCardList(w,"TaxTransferTemp",!0)),"LB_YYZC"===D&&"SX_HW"===P&&(l(_.getStockCategoryList(J.stockRange)),l(_.getCanUseWarehouseCardList({temp:"TaxTransferTemp"})))}"LB_JZCB"===g&&"STATE_YYSR_ZJ"===s&&(l(_.getCanUseWarehouseCardList({temp:"CostTransferTemp"})),l(_.getCostCarryoverStockList(d,"STATE_YYSR_ZJ",m))),"LB_GGFYFT"===g&&(l(_.getJrProjectShareType()),l(_.getChargeProjectCard(s))),"LB_CHTRXM"===g&&(l(_.getChargeProjectCard("STATE_CHTRXM","StockIntoProjectTemp")),l(_.getCostCarryoverStockList(d,"STATE_YYSR_ZJ","","StockIntoProjectTemp")),l(_.getCanUseWarehouseCardList({temp:"StockIntoProjectTemp"})),L.length&&l(S.getModifyStockPrice(d,L,"StockIntoProject","stockCardList",""))),"LB_XMJZ"===g&&(l(_.getProjectCarryoverCard({oriDate:a.data.jrOri.oriDate,categoryUuid:"",level:"",justCard:!0,needLeft:!1})),l(_.getCostCarryoverStockList(d,"STATE_YYSR_ZJ","","ProjectCarryoverTemp")),l(_.getCanUseWarehouseCardList({temp:"ProjectCarryoverTemp"})),"STATE_XMJZ_JZRK"!==a.data.jrOri.oriState&&"STATE_XMJZ_QRSRCB"!==a.data.jrOri.oriState||(l(_.getProjectCarryoverList(d,a.data.jrOri.projectCardList[0].cardUuid,a.data.jrOri.oriUuid)),L.length&&l(S.getModifyStockPrice(d,L,"ProjectCarryover","stockCardList","")))),l({type:i.SWITCH_LOADING_MASK})}else l(p.refreshRunningbusiness(e.get("oriUuid"),function(e){l(U(e))},n,a.data,"insert"===t));l(f.addPageTabPane("EditPanes","EditRunning","EditRunning","录入流水")),l(f.addHomeTabpane("Edit","EditRunning","录入流水"))}else l({type:i.SWITCH_LOADING_MASK})})}}),R=(t.changeCurrentPage=function(e,t){return function(n){n({type:i.CHANGE_CURRENT_PAGE_FZHE,assList:e,value:t})}},t.changeCxAccountCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t));"flags"===t[0]&&(r=t),a({type:i.CHANGE_SEARCH_ACCOUNT_COMMON_STRING,tab:e,placeArr:r,value:n})}},t.changeCxAccountCommonOutString=function(e,t){return function(n){n("string"==typeof e?{type:i.CHANGE_SEARCH_ACCOUNT_COMMON_STRING,place:e,value:t}:{type:i.CHANGE_SEARCH_ACCOUNT_COMMON_STRING,placeArr:e,value:t})}}),M=(t.setManageMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["payManageList","childList"]),r=(n.getIn(["flags","selectDate"]),n.getIn(["flags","selectList"])),i=n.getIn(["calculateTemp","cardUuid"]),o=n.getIn(["calculateTemp","usedCard"]),u=[],c=0;r.forEach(function(e){var t=a.find(function(t){return t.get("uuid")===e}),n=t.get("direction"),r=t.get("flowType"),i=t.get("assType");u.push({uuid:e,assType:i});var o=t.get("notHandleAmount"),s=t.get("runningState");"STATE_YYSR_TS"!==s&&"STATE_YYZC_TG"!==s||(o=-Math.abs(o)),"debit"===n?"FLOW_INADVANCE"===r?c-=Number(o):c+=Number(o):"FLOW_INADVANCE"===r?c+=Number(o):c-=Number(o)}),e(R(["modalTemp","uuidList"],(0,s.fromJS)(u))),e(R(["modalTemp","handlingAmount"],c)),e(R(["modalTemp","cardUuid"],i)),e(R(["modalTemp","usedCard"],o))}},t.setCarryoverMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["calculateTemp","stockUuid"]),i=n.getIn(["flags","costTransferType"]);e(R(["modalTemp","uuidList"],a)),e(R(["modalTemp","runningState"],i)),e(R(["modalTemp","cardList"],(0,s.fromJS)([{uuid:r,amount:""}])))}},t.setInvioceMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["flags","invoicingType"]);e(R(["modalTemp","uuidList"],a)),e(R(["modalTemp","billMakeOutType"],r))}},t.setDefineMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["flags","certifiedType"]);e(R(["modalTemp","uuidList"],a)),e(R(["modalTemp","billAuthType"],r))}},t.getManagerCategoryList=function(e,t){return function(n){(0,o.default)("getManagerCategoryList","POST",JSON.stringify({assType:t}),function(t){n(R(["flags","managerCategoryList",e],(0,s.fromJS)(t.data)))})}},t.changeBeforeAmount=function(e,t,n){return function(a,r){t.split(l.TREE_JOIN_STR)[0];var i=t.split(l.TREE_JOIN_STR)[1],o=t.split(l.TREE_JOIN_STR)[2],u=e.get("uuid");a(R(["modalTemp","uuidList",n],(0,s.fromJS)({beOpened:!0,categoryUuid:o,uuid:u,categoryName:i})))}},function(){return function(e,t){var n=t().calculationState,a=n.get("flags"),r=n.getIn(["calculateTemp","cardUuid"]),i=n.getIn(["calculateTemp","stockUuid"]),o=a.get("issuedate"),s=a.get("curCategory"),u=a.get("isCheck"),c=a.get("accountingType"),l=n.get("certificationList"),d=n.get("invoicingList"),f=l.get("billAuthType"),m=d.get("billMakeOutType"),g=n.getIn(["costTransferList","runningState"]);t().searchRunningAllState.get("enclosureList");switch(c){case"manages":e(T.getCalculateList(o,c,"",s,r,u,""));break;case"invoicing":e(T.getCalculateInvoicingList(o,s,m,""));break;case"certification":e(T.getCalculateCertificationList(o,s,f,""));break;case"costTransfer":e(T.getCalculateCarryoverList(o,g,"","",i))}}}),U=(t.deleteSingleFlow=function(e,t){return function(n){var r=[e];c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&(n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunningItems","POST",JSON.stringify({deleteList:r,action:"COMMON-DELETE"}),function(e){if((0,u.showMessage)(e)){if(e.message)if(e.data.errorList.length){var r=e.data.errorList.join(",");a.default.error(r)}else a.default.success(e.message);!e.data.errorList.length&&t()}n({type:i.SWITCH_LOADING_MASK})}))}})}},t.getRunningBusinessDuty=function(e){return function(t,n){t({type:i.SWITCH_LOADING_MASK}),t({type:i.CALCULATE_FROM_SEARCH_JUMP_TO_EDIT,PageTab:"business",pageType:e})}});t.getgetSearchRunningSortFun=function(e,t,n,a){return function(r,s){var c=e.substr(0,4),l="-"===e.substr(4,1)?e.substr(5,2):e.substr(6,2),d=s().searchRunningState,f=d.getIn(["flags","isAccount"]),m=d.getIn(["flags","curAccountUuid"]),g=d.getIn(["flags","endissuedate"]);r({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getSearchRunningSort","POST",JSON.stringify({year:c,month:l,sortModel:t}),function(t){(0,u.showMessage)(t,"show")&&r(L(e,g,m,"",a,n,"",f)),r({type:i.SWITCH_LOADING_MASK})})}},t.changeSearchRunningChildItemShow=function(e,t){return{type:i.SEARCH_RUNNING_TRIANGLE_SWITCH,showChild:e,uuid:t}},t.changeSearchRunningAllChildItemShow=function(e){return{type:i.SEARCH_RUNNING_ALL_TRIANGLE_SWITCH,allItemShow:e}},t.changeSearchRunningChooseValue=function(e){return{type:i.CHANGE_SEARCH_RUNNING_CHOOSE_VALUE,chooseValue:e}},t.getAccountRunningCate=function(e){return function(t,n){(0,o.default)("getRunningDetail","GET","uuid="+e,function(e){if((0,u.showMessage)(e)){var n=e.data.result.projectRange,a=e.data.result.acCost.contactsRange;t(v(["flags","accountProjectRange"],(0,s.fromJS)(n))),t(v(["flags","accountContactsRange"],(0,s.fromJS)(a)))}})}},t.getAccountContactsCardList=function(e){return function(t,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getContactsCategoryList","POST",JSON.stringify({sobId:a,categoryList:e.toJS(),property:"NEEDPAY"}),function(e){t({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&t(v(["flags","accountContactsRangeList"],(0,s.fromJS)(e.data.result)))})}},t.getAccountProjectCardList=function(e){return function(t,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,o.default)("getProjectCardList","POST",JSON.stringify({sobId:a,categoryList:e,needCommonCard:!0,needAssist:!0,needMake:!0,needIndirect:!0,needMechanical:!0}),function(e){(0,u.showMessage)(e)&&t(v(["flags","accountProjectList"],(0,s.fromJS)(e.data.result)))})}}},1305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments[1];return((e={},u(e,r.INIT_SEARCH_RUNNING,function(){return c}),u(e,r.GET_SEARCH_BUSINESS_LIST,function(){if(n.isReflash&&(t=t.set("businessTemp",c)),"true"===n.getPeriod&&(t=t.set("period",(0,a.fromJS)(n.period)).set("issues",(0,a.fromJS)(n.issues))),n.accountUuid&&n.isAccount){var e=n.accountUuid.split(i.TREE_JOIN_STR);t=t.setIn(["flags","curAccountUuid"],(0,a.fromJS)(n.accountUuid)).setIn(["flags","accountName"],(0,a.fromJS)(e[1]))}else t=t.setIn(["flags","curAccountUuid"],"").setIn(["flags","accountName"],"");var r=t.getIn(["flags","allItemShow"]),o=[];r&&(n.receivedData&&n.receivedData.map(function(e){o.push(e.oriUuid)}),t=t.setIn(["flags","showChildList"],(0,a.fromJS)(o)));var s="boolean"==typeof n.isAsc?n.isAsc:n.receivedExtra.isClose,u="boolean"!=typeof n.isAsc||n.isAsc;switch(n.orderBy){case"SEARCH_ORDER_DATE":t=t.setIn(["orderByList","dateSortType"],s).setIn(["orderByList","indexSortType"],s);break;case"SEARCH_ORDER_JR_INDEX":t=t.setIn(["orderByList","indexSortType"],s);break;case"SEARCH_ORDER_CATEGORY_TYPE":t=t.setIn(["orderByList","categorySortType"],u).setIn(["orderByList","indexSortType"],u);break;case"SEARCH_ORDER_CERTIFICATE":t=t.setIn(["orderByList","certificateSortType"],u).setIn(["orderByList","indexSortType"],u);break;case"SEARCH_ORDER_CREATE_NAME":t=t.setIn(["orderByList","nameSortType"],u).setIn(["orderByList","indexSortType"],u)}t=t.setIn(["flags","orderType"],n.orderBy);var l=n.receivedExtra,d=(l.childList,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(l,["childList"]));for(var f in d)t=t.setIn(["flags",f],d[f]);return t.set("businessTemp",(0,a.fromJS)(n.receivedData)).set("pageCount",n.pageCount).set("currentPage",n.currentPage).setIn(["flags","issuedate"],(0,a.fromJS)(n.issuedate)).setIn(["flags","endissuedate"],(0,a.fromJS)(n.endissuedate)).setIn(["flags","isAccount"],(0,a.fromJS)(n.isAccount)).setIn(["flags","isAsc"],(0,a.fromJS)(s)).setIn(["flags","selectList"],(0,a.fromJS)([])).setIn(["flags","pzSelectAllList"],(0,a.fromJS)([])).setIn(["flags","currentVcIndex"],(0,a.fromJS)([]))}),u(e,r.CHANGE_SEARCH_ACCOUNT_COMMON_STRING,function(){return n.placeArr&&(t=t.setIn(n.placeArr,n.value)),n.place&&(t=t.set(n.place,n.value)),t}),u(e,r.SEARCH_ITEM_CHECKBOX_CHECK_ALL,function(){if(n.selectAll)return t.setIn(["flags","selectList"],(0,a.fromJS)([])).setIn(["flags","pzSelectAllList"],(0,a.fromJS)([])).setIn(["flags","currentVcIndex"],(0,a.fromJS)([])).setIn(["flags","selectItem"],(0,a.fromJS)([]));var e=n.list,r=[],i=[],o=[];return e.forEach(function(e){r.push(e.get("oriUuid"));var n=e.get("oriDate");e.get("vcList")&&e.get("vcList").size?e.get("vcList").map(function(e){o.push({year:n.substr(0,4),month:n.substr(5,2),vcIndex:e.get("vcIndex")}),t=t.setIn(["flags","currentYear"],e.get("year")).setIn(["flags","currentMonth"],e.get("month"))}):i.push((0,a.fromJS)({oriUuid:e.get("oriUuid"),jrNumber:e.get("jrIndex"),oriDate:Date.parse(e.get("oriDate")),currentYear:e.get("oriDate")?e.get("oriDate").substr(0,4):"",currentMonth:e.get("oriDate")?e.get("oriDate").substr(5,2):""}))}),t.setIn(["flags","selectList"],(0,a.fromJS)(r)).setIn(["flags","pzSelectAllList"],(0,a.fromJS)(i)).setIn(["flags","currentVcIndex"],(0,a.fromJS)(o)).setIn(["flags","selectItem"],n.list)}),u(e,r.SEARCH_ITEM_CHECKBOX_CHECK,function(){var e=t.getIn(["flags","selectList"]),r=t.getIn(["flags","pzSelectAllList"]),i=t.getIn(["flags","selectItem"]).toJS(),o=t.getIn(["flags","currentVcIndex"]),s=n.item.toJS();if(n.checked){var u=e.splice(e.findIndex(function(e){return e===n.item.get("oriUuid")}),1),c=r,l=o.toJS();n.item.get("vcList")&&n.item.get("vcList").size?n.item.get("vcList").map(function(e){l=l.filter(function(t){return!(e.get("year")===t.year&&e.get("month")===t.month&&e.get("vcIndex")===t.vcIndex)})}):c=r.splice(r.findIndex(function(e){return e.get("oriUuid")===n.item.get("oriUuid")}),1);var d=i.filter(function(e){return e.oriUuid!==n.item.get("oriUuid")});return t.setIn(["flags","selectList"],(0,a.fromJS)(u)).setIn(["flags","pzSelectAllList"],(0,a.fromJS)(c)).setIn(["flags","currentVcIndex"],(0,a.fromJS)(l)).setIn(["flags","selectItem"],d?(0,a.fromJS)(d):(0,a.fromJS)([]))}var f=e.push(n.item.get("oriUuid")),m=r,g=o.toJS();return n.item.get("vcList")&&n.item.get("vcList").size?n.item.get("vcList").map(function(e){g.push({year:s.oriDate.substr(0,4),month:s.oriDate.substr(5,2),vcIndex:e.get("vcIndex")}),t=t.setIn(["flags","currentYear"],e.get("year")).setIn(["flags","currentMonth"],e.get("month"))}):m=r.push((0,a.fromJS)({oriUuid:n.item.get("oriUuid"),jrNumber:n.item.get("jrIndex"),oriDate:Date.parse(n.item.get("oriDate")),currentYear:n.item.get("oriDate")?n.item.get("oriDate").substr(0,4):"",currentMonth:n.item.get("oriDate")?n.item.get("oriDate").substr(5,2):""})),t.setIn(["flags","selectList"],(0,a.fromJS)(f)).setIn(["flags","pzSelectAllList"],(0,a.fromJS)(m)).setIn(["flags","currentVcIndex"],(0,a.fromJS)(g)).setIn(["flags","selectItem"],(0,a.fromJS)(i.concat([s])))}),u(e,r.GET_SEARCH_CONF_ALL_SETTINGS,function(){return t=t.set("runningCategory",(0,a.fromJS)(n.receivedData.categoryList)).set("accountList",(0,a.fromJS)(n.receivedData.accountList)).set("taxRateTemp",(0,a.fromJS)(n.receivedData.rate))}),u(e,r.SEARCH_CHANGE_PZ_COMMON_STRING,function(){return t=t.setIn(n.name,n.value)}),u(e,r.SEARCH_CALCULATE_GAIN_OR_LOSS,function(){var e=n.place,a=n.diff,r=n.deletePlace;return t.setIn(e,a).deleteIn(r,a)}),u(e,r.SEARCH_RUNNING_TRIANGLE_SWITCH,function(){var e=t.getIn(["flags","showChildList"]);if(n.showChild){var a=e.splice(e.findIndex(function(e){return e===n.uuid}),1);return t.setIn(["flags","showChildList"],a)}var r=e.push(n.uuid);return t.setIn(["flags","showChildList"],r)}),u(e,r.SEARCH_RUNNING_ALL_TRIANGLE_SWITCH,function(){var e=[],r=t.get("businessTemp");return r&&r.size&&r.map(function(t){e.push(t.get("oriUuid"))}),t=t.setIn(["flags","allItemShow"],n.allItemShow),n.allItemShow?t.setIn(["flags","showChildList"],(0,a.fromJS)(e)):t.setIn(["flags","showChildList"],(0,a.fromJS)([]))}),u(e,r.CHANGE_SEARCH_RUNNING_CHOOSE_VALUE,function(){return t.setIn(["flags","chooseValue"],n.chooseValue)}),e)[n.type]||function(){return t})()};var a=n(18),r=s(n(492)),i=s(n(27)),o=n(22);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=(0,a.fromJS)({flags:{issuedate:"",insertOrModify:"insert",runningInsertOrModify:"insert",payOrReceive:"收",accountAssModalShow:!1,curCategory:"全部",curAccountUuid:"",accountName:"全部",assId:"",assCategory:"",acId:"",selectList:[],pzSelectAllList:[],pzDealNum:0,pzDealStatus:!1,showRunningInfo:{},currentYear:"",currentMonth:"",currentVcIndex:[],searchType:"SEARCH_TYPE_ABSTRACT",managerCategoryList:[],pzDealType:"",projectList:[],inputValue:"",orderType:"",showChildList:[],allItemShow:!1,chooseValue:"MONTH",accountProjectRange:[],accountContactsRange:[],accountContactsRangeList:[],accountProjectList:[],selectItem:[]},orderByList:{dateSortType:!1,indexSortType:!1,categorySortType:!1,nameSortType:!1,certificateSortType:!1,orderByArr:[]},businessTemp:{},runningFlowTemp:{oriDate:(0,o.formatDate)().substr(0,10)},modalTemp:{oriDate:(0,o.formatDate)().substr(0,10)},period:{closedmonth:"",closedyear:"",firstmonth:"",firstyear:"",lastmonth:"",lastyear:""},issues:[],currentPage:1,pageCount:1})},1314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPrintString=t.jrPdfPrint=t.printPdf=t.setPrintVcIndexAndDate=void 0;var a,r=n(31),i=(a=r)&&a.__esModule?a:{default:a},o=l(n(1289)),s=(n(18),n(22)),u=l(n(43)),c=l(n(30));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.setPrintVcIndexAndDate=function(e,t,n){return function(a){a({type:o.SET_PRINT_VC_INDEX_AND_DATE,year:e,month:t,vcIndex:n})}},t.printPdf=function(e,t,n,a,r,l,d,f){return function(m){m({type:o.SWITCH_LOADING_MASK});var g=sessionStorage.getItem("fromPos");(0,i.default)("pdfPrint","POST",JSON.stringify({year:e,month:t,needCreatedBy:a,needA4:r,needAss:l,vcIndex:n,needReviewedBy:d?"1":"0",reviewedBy:d?f:"",action:{modal:"QUERY_VC-PRINT",cxpz:"QUERY_VC-PRINT-BATCH_PRINT_AND_EXPORT_PDF",lrpz:""}[g]}),function(e){(0,s.showMessage)(e)?(m({type:o.SWITCH_LOADING_MASK}),c.openLink({url:e.data.signedUrl}),m(u.handlePrintModalVisible(!1))):m({type:o.SWITCH_LOADING_MASK})})}},t.jrPdfPrint=function(e,t,n){return function(a){a({type:o.SWITCH_LOADING_MASK});var r=sessionStorage.getItem("fromPos");(0,i.default)("JrPdfPrint","POST",JSON.stringify({needPrintName:e,needPrintEnclosure:t,oriUuid:n,action:{searchRunningPreview:"QUERY_JR-PRINT",searchRunning:"QUERY_JR-PRINT-BATCH_PRINT"}[r]}),function(e){(0,s.showMessage)(e)?(a({type:o.SWITCH_LOADING_MASK}),c.openLink({url:e.data.signedUrl}),a(u.handlePrintModalVisible(!1))):a({type:o.SWITCH_LOADING_MASK})})}},t.setPrintString=function(e,t){return function(n){n({type:o.SET_PRINT_STRING,name:e,value:t})}}},1315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_ACCOUNT_CONFIG="INIT_ACCOUNT_CONFIG",t.BEFORE_INSERT_ACCOUNTCONF="BEFORE_INSERT_ACCOUNTCONF",t.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT="AFTER_UPDATE_ACCOUNTCONF_ACCOUNT",t.SELECT_OR_UNSELECT_ACCOUNT_ALL="SELECT_OR_UNSELECT_ACCOUNT_ALL",t.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK="ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK",t.BEFORE_MODIFY_ACCOUNTCONF_RUNNING="BEFORE_MODIFY_ACCOUNTCONF_RUNNING",t.CHANGE_ACCOUNTCONFIG_COMMON_STRING="CHANGE_ACCOUNTCONFIG_COMMON_STRING",t.CLOSE_ACCOUNTCONF_MODAL_LR="CLOSE_ACCOUNTCONF_MODAL_LR",t.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER="CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER",t.CLOSE_ACCOUNTCONF_MODAL="CLOSE_ACCOUNTCONF_MODAL",t.CHANGE_ACCOUNT_CARD_USED_STATUS="CHANGE_ACCOUNT_CARD_USED_STATUS",t.GET_RUNNING_ACCOUNT="GET_RUNNING_ACCOUNT",t.INIT_POUNDAGE_TEMP="INIT_POUNDAGE_TEMP",t.GET_POUNDGE_ACCOUNT="GET_POUNDGE_ACCOUNT",t.INIT_REGRETTEMP="INIT_REGRETTEMP",t.GET_ACCOUNT_CONFIG_LIST="GET_ACCOUNT_CONFIG_LIST"},1324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,n=arguments[1];return((e={},o(e,r.SET_PRINT_VC_INDEX_AND_DATE,function(){return t.set("vcIndex",n.vcIndex).set("year",n.year).set("month",n.month)}),o(e,r.SET_PRINT_STRING,function(){return t.set(n.name,n.value)}),e)[n.type]||function(){return t})()};var a=n(18),r=i(n(1289));i(n(27));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=(0,a.fromJS)({vcIndex:[],year:"",month:"",fromPage:"static"})},1325:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=L(n(47)),s=L(n(129)),u=L(n(61)),c=L(n(100)),l=L(n(37)),d=L(n(32)),f=L(n(14)),m=L(n(45)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(128),n(79),n(99),n(38),n(51),n(78),n(55);var p=L(n(1)),T=(L(n(0)),n(18)),_=n(56);n(1357);n(127);var C=n(1372),S=A(n(27)),I=n(22),y=A(n(1279)),E=A(n(102));function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function L(e){return e&&e.__esModule?e:{default:e}}var v=m.default.Option,h=(0,_.connect)(function(e){return e})((i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),g(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.accountConfigState!=e.accountConfigState||this.props.homeState!=e.homeState||this.props.allState!=e.allState||this.props.showModal!=e.showModal}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.showModal,a=e.homeState,r=e.allState,i=e.accountConfigState,g=e.onClose,_=e.fromPage,A=e.cardList,L=void 0===A?(0,T.fromJS)([]):A,h=(a.getIn(["data","userInfo","sobInfo","moduleInfo"]),a.getIn(["permissionInfo","Config"]).getIn(["edit","permission"])),O="accountConfig"!==_;O&&(h=a.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]));var N=i.getIn(["views","insertOrModify"]),b=i.get("accountTemp"),R=b.get("name"),M=b.get("uuid"),U=b.get("type"),D=b.get("openingName"),P=b.get("openingBank"),w=b.get("accountNumber"),J=b.get("beginAmount"),k=b.get("openInfo"),G=b.get("needPoundage"),j=b.get("poundage"),H=b.get("poundageRate"),x=!!r.getIn(["period","closedyear"]);function B(){var e=[];return""===R?e.push("账户名称必填"):(0,I.nameCheck)(R)&&e.push("名称包含中文及中文标点字符，长度不能超过"+S.AC_CHINESE_NAME_LENGTH+"位；不包含中文及中文标点字符，长度不能超过"+S.AC_NAME_LENGTH+"位"),""===U&&e.push("账户类型必填"),w.length>40&&e.push("卡号最长40个字符"),P.length>40&&e.push("银行户名最长40个字符"),D.length>40&&e.push("开户行／机构最长40个字符"),"-"===J&&e.push("请输入有效的数值"),!G||0!==j&&"0"!==j||e.push("费用上限不能为0"),e}var F=/^\d{0,14}(\.\d{0,2})?$/,Y=void 0,W=void 0,K=void 0;return"modify"===N&&L.size&&(K=L.findIndex(function(e){return e.get("uuid")===M}),Y=K-1,W=K+1),p.default.createElement(o.default,{okText:"保存",visible:n,maskClosable:!1,title:"insert"==N?"新增账户":"编辑账户",onCancel:function(){return g()},width:"480px",footer:[p.default.createElement(d.default,{style:{float:"left",display:"insert"==N?"none":""},disabled:0===L.findIndex(function(e){return e.get("uuid")===M}),onClick:function(){t(y.beforeModifyaccountConfRunningOld(L.get(Y)))}},p.default.createElement(f.default,{type:"caret-left"})),p.default.createElement(d.default,{style:{float:"left",display:"insert"==N?"none":""},disabled:L.findIndex(function(e){return e.get("uuid")===M})===L.size-1||!L.size,onClick:function(){t(y.beforeModifyaccountConfRunningOld(L.get(W)))}},p.default.createElement(f.default,{type:"caret-right"})),p.default.createElement(d.default,{key:"cancel",type:"ghost",style:{display:"insert"==N?"none":"inline-block"},onClick:function(){g()}},"取 消"),p.default.createElement(d.default,{key:"ok",disabled:!h,type:O?"primary":"modify"==N?"primary":"ghost",onClick:function(){var e=B();e.length?l.default.info(e.join(",")):t(E.saveAccountConfAccount(_,!1,function(){return g()}))}},"保 存"),p.default.createElement(d.default,{key:"addNextAc",type:"primary",disabled:!h,style:{display:"insert"!=N||O?"none":"inline-block"},onClick:function(){var e=B();e.length?l.default.info(e.join(",")):t(E.saveAccountConfAccount(_,!0))}},"保存并新增")]},p.default.createElement("div",{className:"accountConf-modal-list"},p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"账户名称："),p.default.createElement("div",null,p.default.createElement(c.default,{placeholder:"请输入便于识别的账户名",value:R,onChange:function(e){t(y.changeAccountConfingCommonString("account","name",e.target.value))}}))),p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"账户类型："),p.default.createElement(u.default,{title:"modify"===N&&x&&0!=J?"账套已结账且存在期初值，请通过反悔模式进行修改":""},p.default.createElement("div",null,p.default.createElement(m.default,{disabled:"modify"===N&&x&&0!=J,placeholder:"（必填）",value:(0,C.typeStr)(U),onChange:function(e){t(y.changeAccountConfingCommonString("account","type",e))}},C.typeList.map(function(e,t){return p.default.createElement(v,{key:e.key,value:e.key},e.value)}))))),p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"期初余额："),p.default.createElement("div",null,p.default.createElement(c.default,{disabled:x,value:J,placeholder:"（选填）",onChange:function(e){(0,I.numberTest)(e,function(e){t(y.changeAccountConfingCommonString("account","beginAmount",e))},!0)}}))),p.default.createElement("div",{style:{display:"spare"===U?"none":""}},p.default.createElement(s.default,{onChange:function(e){t(y.changeAccountConfingCommonString("account","needPoundage",e.target.checked))},checked:G},"启用账户手续费")),G&&"spare"!==U?p.default.createElement("div",null,p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"费用比率："),p.default.createElement("div",{style:{display:"flex",lineHeight:"28px"}},p.default.createElement(c.default,{placeholder:"请输入手续费费用比率",value:H,onChange:function(e){var n=e.target.value.indexOf("。")>-1?e.target.value.replace("。","."):e.target.value;0===(n=n.replace(/,/g,"")).indexOf("0")&&"0"!=n&&n>=1&&(n=n.substr(1)),"."===n||"-."===n?l.default.info("请输入正确的数值"):n>1e3?l.default.info("费用比率必须小于1000‰"):0===n.indexOf("-")?l.default.info("费用比率不能为负"):F.test(n)?t(y.changeAccountConfingCommonString("account","poundageRate",n)):l.default.info("金额只能输入小于14位数两位小数的数字")}}),"‰")),p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"费用上限："),p.default.createElement("div",null,p.default.createElement(c.default,{placeholder:"请输入手续费金额上限",value:-1===j?"":j,onChange:function(e){var n=e.target.value.indexOf("。")>-1?e.target.value.replace("。","."):e.target.value;0===(n=n.replace(/,/g,"")).indexOf("0")&&"0"!=n&&n>=1&&(n=n.substr(1)),"."===n||"-."===n?l.default.info("请输入正确的数值"):0===n.indexOf("-")?l.default.info("费用上限不能为负"):""===n||F.test(n)?t(y.changeAccountConfingCommonString("account","poundage",n)):l.default.info("费用上限需大于0")}})))):"","cash"===U||"spare"===U?"":p.default.createElement(s.default,{onChange:function(e){t(y.changeAccountConfingCommonString("account","openInfo",e.target.checked))},checked:k},"账户信息"),k&&"cash"!==U&&"spare"!==U?p.default.createElement("div",null,p.default.createElement("div",{style:{display:"cash"===U?"none":""},className:"accountConf-modal-list-item"},p.default.createElement("label",null,"账号："),p.default.createElement("div",null,p.default.createElement(c.default,{placeholder:"请输入账户号码",value:w,onChange:function(e){t(y.changeAccountConfingCommonString("account","accountNumber",e.target.value))},onBlur:function(e){return t(y.changeAccountConfAccountNumber((0,C.typeStr)(U),w))}}))),p.default.createElement("div",{style:{display:"cash"===U?"none":""},className:"accountConf-modal-list-item"},p.default.createElement("label",null,"开户名："),p.default.createElement("div",null,p.default.createElement(c.default,{placeholder:"请输入账户的开户名称",value:D,onChange:function(e){t(y.changeAccountConfingCommonString("account","openingName",e.target.value))}}))),p.default.createElement("div",{style:{display:"cash"===U?"none":""},className:"accountConf-modal-list-item"},p.default.createElement("label",null,"开户行/机构："),p.default.createElement("div",null,p.default.createElement(c.default,{placeholder:"请填入开户行或支付机构名称",value:P,onChange:function(e){t(y.changeAccountConfingCommonString("account","openingBank",e.target.value))}})))):""))}}]),t}(),r.displayName="AccountCongigModifyModal",a=i))||a;t.default=h},1326:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=C(n(47)),i=C(n(14)),o=C(n(37)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(78),n(38);var u=n(1),c=C(u),l=n(18),d=n(17),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(30)),m=(n(22),n(31)),g=C(n(1415)),p=C(n(1327)),T=n(43),_=n(104);function C(e){return e&&e.__esModule?e:{default:e}}var S=(0,d.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.setUploadParam=function(t,n,a){var r=e.props.uploadKeyJson.get("dir");""!=n&&(e.get_suffix(n),r=e.calculateObjectName(n,r));var i={key:r,policy:e.props.uploadKeyJson.get("policy"),OSSAccessKeyId:e.props.uploadKeyJson.get("accessKeyId"),success_action_status:"200",callback:e.props.uploadKeyJson.get("callback"),signature:e.props.uploadKeyJson.get("signature")};t.setOption({url:e.props.uploadKeyJson.get("host"),multipart_params:i}),t.start()},e.callback=function(e,t,n){e.removeFile(t),e.addFile(n)},e.reUploadFile=function(e,t,n){e.removeFile(t.id),e.addFile(n.getNative())},e.get_suffix=function(e){var t=e.lastIndexOf("."),n="";return-1!=t&&(n=e.substring(t)),n},e.calculateObjectName=function(e,t){return t+(new Date).getTime()+"/"+e},e.checkEnclosureExist=function(t){for(var n=e.props.enclosureList?e.props.enclosureList:(0,l.fromJS)([]),a=!1,r=0;r<n.size;r++)if(n.getIn([r,"fileName"])==t.name){a=!0;break}return a},e.dataURLtoBlob=function(e){for(var t=e.split(","),n=(t[0].match(/:(.*?);/)[1],atob(t[1])),a=n.length,r=new Uint8Array(a);a--;)r[a]=n.charCodeAt(a);return new Blob([r],{type:"image/jpeg"})},e.state={uploadingModal:!1,errMessage:"",secondUpload:!1,isClipBoardUpload:!1,compressFileLength:0,clipUploadFile:function(){}},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),s(t,[{key:"componentDidMount",value:function(){var e=this,t=new g.default.Uploader({browse_button:void 0===e.props.id?"browse":e.props.id,drop_element:"drag-area",multi_selection:!0,url:m.ROOTPKT+"/aliyun/oss/callback",filters:{max_file_size:"10mb",prevent_duplicates:!1}});t.init();var n=0,a=0;t.bind("FilesAdded",function(t,a){if(void 0!==e.props.uploadKeyJson.get("checkMoreFj")&&!1===e.props.uploadKeyJson.get("checkMoreFj"))return a.forEach(function(e,n){t.removeFile(e.id)}),void e.setState({uploadingModal:!0,errMessage:"贵公司的附件容量已用完"});if(a.length>0){if(e.state.secondUpload)return e.setUploadParam(t,a[0].name,""),void(1==e.state.compressFileLength?e.setState({secondUpload:!1,compressFileLength:0}):e.setState({compressFileLength:e.state.compressFileLength-1}));if(e.props.dispatch((0,T.switchLoadingMask)()),a.length>9||a.length+e.props.enclosureList.size>9)return o.default.error("最多上传9个附件",3),a.forEach(function(e,n){t.removeFile(e.id)}),void e.props.dispatch((0,T.switchLoadingMask)());for(var r=!1,i=!0,s=!1,u=0;u<a.length;u++){var c=a[u],l=c.name;if(l.indexOf("@")>-1){e.setState({uploadingModal:!0,errMessage:"文件名中不允许包含@符号"}),i=!1,a.forEach(function(e,n){t.removeFile(e.id)}),e.props.dispatch((0,T.switchLoadingMask)());break}if(l.length>40){e.setState({uploadingModal:!0,errMessage:"文件名称不能超过40字符"}),i=!1,a.forEach(function(e,n){t.removeFile(e.id)}),e.props.dispatch((0,T.switchLoadingMask)());break}if(e.checkEnclosureExist(a[u])){e.setState({uploadingModal:!0,errMessage:"文件名已存在"}),i=!1,a.forEach(function(e,n){t.removeFile(e.id)}),e.props.dispatch((0,T.switchLoadingMask)());break}"image"==c.type.substr(0,5)&&c.size>204800&&(s=!0)}if(i){if(n=a.length,e.state.isClipBoardUpload)return void e.setUploadParam(t,"",!1);if(s)e.props.dispatch((0,T.switchLoadingMask)()),f.Confirm({message:"请选择是否原图上传",title:"提示",buttonLabels:["压缩上传","原图上传"],onSuccess:function(n){e.props.dispatch((0,T.switchLoadingMask)()),r=1!==n.buttonIndex;for(var i=function(n){var i=new FileReader,s=new Image,u=document.createElement("canvas"),c=u.getContext("2d");if("image"==a[n].type.substr(0,5)){var l=a[n].getNative();i.readAsDataURL(l),i.onload=function(e){s.src=e.target.result},s.onload=function(){var i=a[n];if(i.size>204800)if(r)try{var l=s.width,d=s.height,f=1*l,m=1*d;u.width=f,u.height=m,c.clearRect(0,0,f,m),c.drawImage(s,0,0,f,m);var g=u.toDataURL("image/jpeg",.3),p=e.dataURLtoBlob(g);p.name=i.name,i.size<p.size?i.size<=2097152?n+1===a.length&&e.setUploadParam(t,"",!1):((0,o.default)("压缩上传失败，仅可上传原图"),a.length):p.size<=2097152?(e.callback(t,i.id,p),e.setState({compressFileLength:e.state.compressFileLength+1,secondUpload:!0}),n+1===a.length&&e.setUploadParam(t,"",!1)):((0,o.default)("压缩上传失败，仅可上传原图"),a.length)}catch(t){a.length,e.setState({uploadingModal:!0,errMessage:"图片压缩异常，不支持该图片压缩"})}else n+1===a.length&&e.setUploadParam(t,"",!1);else n+1===a.length&&e.setUploadParam(t,"",!1)}}else n+1===a.length&&e.setUploadParam(t,"",!1)},s=0;s<a.length;s++)i(s)}});else for(var d=0;d<a.length;d++)d+1===a.length&&e.setUploadParam(t,"",!1)}}}),t.bind("FileUploaded",function(t,r,i){t.removeFile(r.id),a+=1,200==i.status?e.props.uploadEnclosureList([r.name,r,JSON.parse(i.response),a===n]):203==i.status?o.default.info("上传到OSS成功，但是oss访问用户设置的上传回调服务器失败，失败原因是:"+i.response):o.default.info(i.response),a===n&&(a=0,n=0,t.files.forEach(function(e){t.removeFile(e.id)}))}),t.bind("BeforeUpload",function(t,n){e.setUploadParam(t,n.name,!0)}),t.bind("Error",function(t,r){-600==r.code?o.default.info("文件最大不能超过10M"):-601==r.code?o.default.info("不能上传所选择的文件类型"):-602==r.code?o.default.info("这个文件已经上传过一遍了"):(0===r.status?f.Alert("服务器正忙，请稍后再试","确定"):f.Alert("上传出错:"+r.response,"确定"),(0,_.xfnFetchErrorToDeveloper)({title:"上传出错",message:r.status+"-"+r.code+"-"+r.message+"-"+r.requestId+"-"+JSON.stringify(r.file),remark:"附件"},{msgTextSend:m.ROOT+"/msg/text/send"}),(a+=1)===n&&(a=0,n=0,t.files.forEach(function(e){t.removeFile(e.id)}),e.props.dispatch((0,T.switchLoadingMask)())))}),this.clipUploadFile=function(e){t.addFile(e)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.formPage,a=(t.dispatch,t.enclosureList,t.uploadEnclosureList,t.style),o=(t.uploadKeyJson,t.getUploadTokenFetch),s=this.state,l=s.uploadingModal,d=s.errMessage;s.secondUpload,s.isClipBoardUpload;return c.default.createElement(u.Fragment,null,c.default.createElement("div",{className:"enclosure-item enclosure-add-file",style:a,id:"drag-area"},c.default.createElement("a",{className:"enclosure-item-input",id:void 0===this.props.id?"browse":this.props.id,onClick:function(){o(),e.setState({secondUpload:!1,isClipBoardUpload:!1})}}),c.default.createElement(i.default,{type:"plus"}),c.default.createElement(r.default,{title:"上传失败",visible:l,onOk:function(){return e.setState({uploadingModal:!1})},onCancel:function(){return e.setState({uploadingModal:!1})}},c.default.createElement("p",null,d))),c.default.createElement(p.default,{getUploadTokenFetch:o,clipUploadFile:function(t){e.setState({secondUpload:!1,isClipBoardUpload:!0}),e.clipUploadFile(t)},formPage:n}))}}]),t}())||a;t.default=S},1327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=l(n(37)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(38);var o=l(n(1)),s=(n(18),n(17)),u=n(22),c=l(n(1328));function l(e){return e&&e.__esModule?e:{default:e}}var d=(0,s.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.get_suffix=function(e){var t=e.lastIndexOf("."),n="";return-1!=t&&(n=e.substring(t)),n},e.state={clipBoardModalShow:!1,clipBoardFile:"",clipBoardBlob:"",isCustomName:!1,fileName:"",widthHeigthRate:1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"componentDidMount",value:function(){var e=this;document.getElementById(this.props.formPage?this.props.formPage:"clipBoard").addEventListener("paste",function(t){var n=event.clipboardData&&event.clipboardData.items,a=null;if(n&&n.length)for(var i=0;i<n.length;i++)if(-1!==n[i].type.indexOf("image")){a=n[i].getAsFile();break}if(a){console.log("file",a),e.props.getUploadTokenFetch();var o=new FileReader,s=new Image;o.readAsDataURL(a);var u=e;o.onload=function(e){s.src=e.target.result,s.onload=function(){var t=s.width,n=s.height;u.setState({clipBoardFile:a,clipBoardModalShow:!0,clipBoardBlob:e.target.result,widthHeigthRate:t/n})}}}else r.default.info("没有可粘贴的图片")})}},{key:"render",value:function(){var e=this,t=this.props,n=t.formPage,a=(t.dispatch,t.enclosureList,t.uploadEnclosureList,t.style),i=(t.uploadKeyJson,t.getUploadTokenFetch,t.clipUploadFile),s=this.state,l=s.clipBoardModalShow,d=s.clipBoardFile,f=s.clipBoardBlob,m=s.isCustomName,g=s.customName,p=s.widthHeigthRate;return o.default.createElement("div",{className:"enclosure-clipboard-add-file",style:a,id:"drag-area"},o.default.createElement("input",{id:n||"clipBoard",value:"",className:"enclosure-clipboard-add-btn"}),o.default.createElement("div",{className:"enclosure-clipboard-add-fake-btn"},o.default.createElement("p",null,"在此区域内点击右键"),o.default.createElement("p",{className:"enclosure-clipboard-add-fake-btn-text"},"“粘贴”剪贴板中的图片")),o.default.createElement(c.default,{clipBoardModalShow:l,clipBoardFile:d,clipBoardBlob:f,widthHeigthRate:p,onCancel:function(){return e.setState({clipBoardModalShow:!1,isCustomName:!1,customName:""})},onOK:function(){var t="";if(m){if(!g)return r.default.info("请输入自定义名称");if(g.indexOf("@")>-1)return r.default.info("文件名中不允许包含@符号");if(g.length>40)return r.default.info("文件名称不能超过40字符");t=g+".jpg"}else t="粘贴图片"+(new u.DateLib).getFullDate()+".jpg";var n=new File([d],t,{type:d.type});i(n),e.setState({clipBoardModalShow:!1,isCustomName:!1,customName:""})},isCustomName:m,customName:g,changeIsCustomName:function(){e.setState({isCustomName:!m})},changeCustomName:function(t){e.setState({customName:t.target.value})}}))}}]),t}())||a;t.default=d},1328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=l(n(47)),i=l(n(129)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(128);var s=l(n(1)),u=(n(18),n(17)),c=n(127);function l(e){return e&&e.__esModule?e:{default:e}}var d=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.clipBoardModalShow,n=(e.clipBoardFile,e.clipBoardBlob),a=e.onOK,o=e.onCancel,u=e.isCustomName,l=e.customName,d=e.changeIsCustomName,f=e.changeCustomName,m=e.widthHeigthRate;return console.log("widthHeigthRate",m),s.default.createElement(r.default,{title:"上传附件",maskClosable:!1,visible:t,onOk:a,onCancel:o},s.default.createElement("div",{className:"clip-board-preview-img",style:m>=1?{maxHeight:"500px"}:{height:"500px"}},s.default.createElement("img",{id:"clipBoardImg",src:n,style:m>=1?{width:"100%"}:{height:"100%"}})),s.default.createElement("div",{className:"clip-board-preview-name"},s.default.createElement(i.default,{checked:u,onChange:d})," ",s.default.createElement("span",null,"自定义名称"),s.default.createElement(c.XfInput,{className:"clip-board-preview-name-input",style:{display:u?"":"none"},value:l,onChange:f})))}}]),t}())||a;t.default=d},1341:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_LRPZ="INIT_LRPZ",t.CHANGE_VC_ID="CHANGE_VC_ID",t.CHANGE_VOUCHER_DATE="CHANGE_VOUCHER_DATE",t.INSERT_JV_ITEM="INSERT_JV_ITEM",t.DELETE_JV_ITEM="DELETE_JV_ITEM",t.CHANGE_JV_ABSTRACT="CHANGE_JV_ABSTRACT",t.COPY_JV_ABSTRACT="COPY_JV_ABSTRACT",t.CHANGE_JV_DIRECTION="CHANGE_JV_DIRECTION",t.CHANGE_JV_AMOUNT="CHANGE_JV_AMOUNT",t.REFRESH_ACITEM_ASSLIST="REFRESH_ACITEM_ASSLIST",t.CHANGE_JV_AC="CHANGE_JV_AC",t.CHANGE_JV_ASS="CHANGE_JV_ASS",t.CANCLE_ASS_INPUT="CANCLE_ASS_INPUT",t.CHANGE_LRPZ_ASS_INFO="CHANGE_LRPZ_ASS_INFO",t.SHOW_LRPZ_ASS_DISABLE_MODAL="SHOW_LRPZ_ASS_DISABLE_MODAL",t.CHANGE_AC_MODAL_DISPLAY="CHANGE_AC_MODAL_DISPLAY",t.CHANGE_TREE_SELECT_CONTENT="CHANGE_TREE_SELECT_CONTENT",t.REVIEWEDBY_VC="REVIEWEDBY_VC",t.CANCEL_REVIEWEDBY_VC="CANCEL_REVIEWEDBY_VC",t.CLEAR_LRPZ="CLEAR_LRPZ",t.TEMPORARY_SAVE_FETCH="TEMPORARY_SAVE_FETCH",t.GET_LABEL_FETCH="GET_LABEL_FETCH",t.CHANGE_TAG_NAME="CHANGE_TAG_NAME",t.DELETE_UPLOAD_IMG_URL="DELETE_UPLOAD_IMG_URL",t.CHANGE_ENCLOSURE_LIST="CHANGE_ENCLOSURE_LIST",t.GET_UPLOAD="GET_UPLOAD",t.CHANGE_LR_AC_MODAL_DISPLAY="CHANGE_LR_AC_MODAL_DISPLAY",t.CHANGE_LR_AC_MODAL_CLEAR="CHANGE_LR_AC_MODAL_CLEAR",t.CHANGE_LR_ACID_TEXT="CHANGE_LR_ACID_TEXT",t.CHANGE_LR_ACNAME_TEXT="CHANGE_LR_ACNAME_TEXT",t.CHANGE_LR_CATEGORY_TEXT="CHANGE_LR_CATEGORY_TEXT",t.CHANGE_LR_AC_DIRECTON_TEXT="CHANGE_LR_AC_DIRECTON_TEXT",t.CHANGE_LR_AMOUNT_TEXT="CHANGE_LR_AMOUNT_TEXT",t.CHANGE_LR_AC_UNIT_TEXT="CHANGE_LR_AC_UNIT_TEXT",t.CHANGE_LR_FZHS_MODAL_DISPLAY="CHANGE_LR_FZHS_MODAL_DISPLAY",t.CHANGE_LR_ASS_CATEGORY="CHANGE_LR_ASS_CATEGORY",t.CHANGE_LR_FZHS_MODAL_CLEAR="CHANGE_LR_FZHS_MODAL_CLEAR",t.CHANGE_LR_ASS_ID="CHANGE_LR_ASS_ID",t.CHANGE_LR_ASS_NAME="CHANGE_LR_ASS_NAME",t.GET_AMOUNT_DATA="GET_AMOUNT_DATA",t.GET_AMOUNT_TYPE_MXB_DATA="GET_AMOUNT_TYPE_MXB_DATA",t.CHANGE_JV_COUNT="CHANGE_JV_COUNT",t.CHANGE_JV_PRICE="CHANGE_JV_PRICE",t.AUTO_CALCULATE="AUTO_CALCULATE",t.GET_AC_CLOSE_BALANCE="GET_AC_CLOSE_BALANCE",t.GET_FC_LIST_DATA_FETCH="GET_FC_LIST_DATA_FETCH",t.GET_FC_LIST_DATA_MXB_FETCH="GET_FC_LIST_DATA_MXB_FETCH",t.CHANGE_JV_ITEM_NUMBER="CHANGE_JV_ITEM_NUMBER",t.CHANGE_JV_STANDAR_AMOUNT="CHANGE_JV_STANDAR_AMOUNT",t.CHANGE_JV_EXCHANGE="CHANGE_JV_EXCHANGE",t.AUTO_CALCULATE_ALL="AUTO_CALCULATE_ALL",t.BEFORE_LR_VC_IMPORT="BEFORE_LR_VC_IMPORT",t.CLOSE_LR_IMPORT_CONTENT="CLOSE_LR_IMPORT_CONTENT",t.AFTER_LR_VC_IMPORT="AFTER_LR_VC_IMPORT",t.AFTER_COPY_CLICL="AFTER_COPY_CLICL",t.JUDGE_TITLE_FIXED="JUDGE_TITLE_FIXED",t.SHORT_CUT="SHORT_CUT",t.CHANGE_JV_DIRECTION_BY_KEY="CHANGE_JV_DIRECTION_BY_KEY",t.CHANGE_FOCUS_INPUT="CHANGE_FOCUS_INPUT",t.AFTER_GET_ASS_FETCH="AFTER_GET_ASS_FETCH",t.AFTER_GET_AC_LIST_FETCH="AFTER_GET_AC_LIST_FETCH",t.GET_PERIOD_FETCH="GET_PERIOD_FETCH",t.INIT_PZ_BOMB="INIT_PZ_BOMB",t.PZBOMB_REVIEWEDBY_VC="PZBOMB_REVIEWEDBY_VC",t.CANCEL_PZBOMB_REVIEWEDBY_VC="CANCEL_PZBOMB_REVIEWEDBY_VC",t.CHANGE_VC_ENCLOSURE_COUNT_USER="CHANGE_VC_ENCLOSURE_COUNT_USER",t.GET_LRPZ_IMPORT_PROGRESS="GET_LRPZ_IMPORT_PROGRESS",t.CHANGE_LRPZ_MESSAGEMASK="CHANGE_LRPZ_MESSAGEMASK",t.AFTER_GET_UPLOAD_SIGNATURE="AFTER_GET_UPLOAD_SIGNATURE"},1357:function(e,t,n){},1372:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.typeList=[{key:"cash",value:"现金"},{key:"general",value:"一般户"},{key:"basic",value:"基本户"},{key:"spare",value:"备用金"},{key:"Alipay",value:"支付宝"},{key:"WeChat",value:"微信"},{key:"other",value:"其它"}],t.typeStr=function(e){return({cash:function(){return"现金"},general:function(){return"一般户"},basic:function(){return"基本户"},Alipay:function(){return"支付宝"},WeChat:function(){return"微信"},other:function(){return"其它"},spare:function(){return"备用金"}}[e]||function(){return""})()}},1397:function(e,t,n){},1398:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(47),i=(a=r)&&a.__esModule?a:{default:a},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,n=arguments[1];return((e={},f(e,u.INIT_EDIT_RUNNING,function(){return m}),f(e,u.BEFORE_INSERT_RUNNING,function(){return m.setIn(["oriTemp","oriDate"],n.date)}),f(e,u.SWITCH_EDIT_RUNNING_SWITCH_PAGETAB,function(){var e=t.getIn(["oriTemp","oriDate"]);return"business"===n.value&&(t=t.set("flags",m.get("flags")).set("oriTemp",m.get("oriTemp")).setIn(["oriTemp","oriDate"],e)),t}),f(e,u.SELECT_EDIT_RUNNING_CATEGORY,function(){var e=m.get("oriTemp").toJS(),a=t.getIn(["oriTemp","oriAbstract"]),r=t.getIn(["oriTemp","oriDate"]),i=n.name.uuid;return t=t.setIn(["flags","showModal"],!0).setIn(["flags","switchUuidList"],(0,s.fromJS)([])).set("oriTemp",(0,s.fromJS)(o({},e,n.name))).set("categoryTemp",(0,s.fromJS)(n.name)),n.name.beProject&&(t=t.setIn(["oriTemp","usedProject"],!0).setIn(["oriTemp","projectCardList"],(0,s.fromJS)([{uuid:""}]))),n.isFresh&&(t=t.setIn(["oriTemp","oriAbstract"],a)),t.setIn(["oriTemp","categoryUuid"],i).setIn(["oriTemp","oriDate"],r)}),f(e,u.SELECT_MODIFY_RUNNING_CATEGORY,function(){var e=m.get("oriTemp").toJS(),a=t.getIn(["oriTemp","oriAbstract"]),r=t.getIn(["oriTemp","jrIndex"]),i=t.getIn(["oriTemp","oriDate"]),u=t.getIn(["oriTemp","amount"]),l=t.getIn(["oriTemp","accounts"]),d=t.get("enclosureList"),f=t.getIn(["oriTemp","oriUuid"]),g=t.getIn(["oriTemp","propertyCost"]),p=t.getIn(["oriTemp","billList"]),T=t.getIn(["oriTemp","canBeModifyCategory"]),_=t.getIn(["oriTemp","currentCardList"]),C=n.name.categoryType,S=(n.name.propertyCarryover,t.getIn(["oriTemp","projectCardList"])),I=(t.getIn(["oriTemp","categoryType"]),(0,c.getCategorynameByType)(C)),y=I.categoryTypeObj;n.name.beProject&&!S.size?S=(0,s.fromJS)([{}]):n.name.beProject||(S=(0,s.fromJS)([])),u<0&&"LB_FYZC"!==C&&(u=Math.abs(u));var E=n.name.uuid;return t=t.setIn(["flags","showModal"],!0).setIn(["flags","switchUuidList"],(0,s.fromJS)([])).set("oriTemp",(0,s.fromJS)(o({},e,n.name,{oriAbstract:a,jrIndex:r,oriDate:i,amount:u,accounts:l,enclosureList:d,oriUuid:f,propertyCost:g,billList:p,projectCardList:S,canBeModifyCategory:T,categoryUuid:E}))).set("categoryTemp",(0,s.fromJS)(n.name)),n.isFresh&&(t=t.setIn(["oriTemp","oriAbstract"],a)),t=n.name[y].contactsManagement?t.setIn(["oriTemp","currentCardList"],_):t.setIn(["oriTemp","currentCardList"],(0,s.fromJS)([])).setIn(["oriTemp","usedCurrent"],!1)}),f(e,u.CHANGE_MODIFY_RUNNING_CATEGORY,function(){var e=t.get("categoryTemp").toJS(),a=m.get("oriTemp").toJS(),r=t.getIn(["oriTemp","oriAbstract"]),i=t.getIn(["oriTemp","jrIndex"]),u=t.getIn(["oriTemp","oriDate"]),c=t.getIn(["oriTemp","amount"]),l=t.getIn(["oriTemp","accounts"]),d=t.get("enclosureList"),f=t.getIn(["oriTemp","oriUuid"]),g=t.getIn(["oriTemp","propertyCost"]),p=t.getIn(["oriTemp","categoryUuid"]),T=t.getIn(["oriTemp","usedProject"]),_=n.oriState;return t.setIn(["flags","showModal"],!0).setIn(["flags","switchUuidList"],(0,s.fromJS)([])).set("oriTemp",(0,s.fromJS)(o({},a,e,{oriAbstract:r,jrIndex:i,oriDate:u,amount:c,accounts:l,enclosureList:d,oriUuid:f,categoryUuid:p,oriState:_,propertyCost:g,usedProject:T})))}),f(e,u.CHANGE_EDIT_RUNNING_COMMON_STRING,function(){return n.placeArr&&(t=t.setIn(n.placeArr,n.value)),n.place&&(t=t.set(n.place,n.value)),t}),f(e,u.CHANGE_EDIT_RUNNING_ACCOUNT_NAME,function(){return t.setIn(["oriTemp","accounts",0,"accountUuid"],n.accountUuid).setIn(["oriTemp","accounts",0,"poundage"],n.poundage).setIn(["oriTemp","accounts",0,"accountName"],n.accountName)}),f(e,u.GET_JR_ORI,function(){var e=m.get("oriTemp").toJS(),a=n.receivedData.amount,r=n.receivedData.currentAmount,i=n.uuidList||t.getIn(["flags","switchUuidList"]),u=n.receivedData.payment||{};return(t=Math.abs(a)===r?t.setIn(["flags","allGetFlow"],!0):t.setIn(["flags","allGetFlow"],!1)).set("oriTemp",(0,s.fromJS)(o({},e,n.receivedData,n.category))).set("categoryTemp",(0,s.fromJS)(o({},e,n.category))).setIn(["flags","switchUuidList"],i).setIn(["oriTemp","currentBillList"],(0,s.fromJS)(n.receivedData.billList)).setIn(["oriTemp","currentProjectCardList"],(0,s.fromJS)(n.receivedData.projectCardList)).setIn(["oriTemp","curcurrentCardList"],(0,s.fromJS)(n.receivedData.currentCardList)).setIn(["oriTemp","currentOriDate"],(0,s.fromJS)(n.receivedData.oriDate)).setIn(["oriTemp","currentpersonSocialSecurityAmount"],u.personSocialSecurityAmount||0).setIn(["oriTemp","currentpersonAccumulationAmount"],u.personAccumulationAmount||0).setIn(["oriTemp","currentpincomeTaxAmount"],u.incomeTaxAmount||0)}),f(e,u.CHANGE_STATE_INIT_ORITEMP,function(){var e=m.get("oriTemp").toJS(),a=t.get("categoryTemp").toJS(),r=t.getIn(["oriTemp","oriDate"]),i=t.getIn(["oriTemp","oriAbstract"]),u=t.getIn(["oriTemp","handleType"]),c=t.getIn(["oriTemp","categoryUuid"]),l=t.getIn(["oriTemp","propertyCost"]);return t.set("oriTemp",(0,s.fromJS)(o({},e,a))).setIn(["oriTemp","oriAbstract"],i).setIn(["oriTemp","oriDate"],r).setIn(["oriTemp","handleType"],u).setIn(["oriTemp","categoryUuid"],c).setIn(["oriTemp","propertyCost"],l).setIn(["oriTemp","oriState"],n.state).setIn(["flags","dropManageFetchAllowed"],!0)}),f(e,u.INIT_EDIT_RUNNING_SETTINGS,function(){return t=t.setIn(["taxRateTemp","payableRate"],n.rate.payableRate).setIn(["taxRateTemp","outputRate"],n.rate.outputRate).setIn(["taxRateTemp","scale"],n.rate.scale).set("hideCategoryList",(0,s.fromJS)(n.hideCategoryList))}),f(e,u.CHANGE_EDIT_BILL_STATES,function(){return t.setIn(["oriTemp","billList",0,"billState"],n.billState).setIn(["oriTemp","billList",0,"tax"],n.tax).setIn(["oriTemp","billList",0,"taxRate"],n.taxRate)}),f(e,u.EDIT_CALCULATE_GAIN_OR_LOSS,function(){var e=n.place,a=n.diff,r=n.deletePlace;return t.setIn(e,a).deleteIn(r,a)}),f(e,u.CHANGE_RUNNING_TAX_RATE,function(){var e=n.amount||t.getIn(["oriTemp","amount"])||0;return"-1"==n.value?t.setIn(["oriTemp","billList",0,"tax"],"").setIn(["oriTemp","billList",0,"taxRate"],n.value):t.setIn(["oriTemp","billList",0,"tax"],(Number(e)/(1+Number(n.value)/100)*Number(n.value)/100).toFixed(2)).setIn(["oriTemp","billList",0,"taxRate"],n.value)}),f(e,u.EDIT_RUNNING_CALCULATE_AMOUNT,function(){var e=t.getIn(["oriTemp","payment","companyAccumulationAmount"])||0,a=t.getIn(["oriTemp","payment","personAccumulationAmount"])||0,r=t.getIn(["oriTemp","payment","companySocialSecurityAmount"])||0,i=t.getIn(["oriTemp","payment","personSocialSecurityAmount"])||0,o=t.getIn(["oriTemp","payment","incomeTaxAmount"])||0,s=t.getIn(["oriTemp","amount"])||0,u=t.getIn(["oriTemp","payment","actualAmount"])||0,c=(t.getIn(["oriTemp","categoryType"]),t.getIn(["oriTemp","propertyPay"])),l=(t.getIn(["oriTemp","oriState"]),t.getIn(["oriTemp","acPayment","beAccrued"])),d=t.getIn(["oriTemp","acPayment","beWithholdTax"]),f=t.getIn(["oriTemp","acPayment","beWithholding"]),m=t.getIn(["oriTemp","acPayment","beWithholdSocial"]),g=void 0;switch(c){case"SX_GZXJ":g=n.totalNotHandleAmount<0?(Number(u)-Number(a)-Number(i)-Number(o)).toFixed(2):(Number(u)+Number(a)+Number(i)+Number(o)).toFixed(2);break;case"SX_ZFGJJ":g=n.totalNotHandleAmount<0?(Number(a)-Number(e)).toFixed(2):(Number(a)+Number(e)).toFixed(2);break;case"SX_SHBX":g=n.totalNotHandleAmount<0?(-Number(r)+Number(i)).toFixed(2):(Number(r)+Number(i)).toFixed(2);break;case"SX_QTXC":g=s;break;default:g=0}return t="SX_GZXJ"!==c||!l||d||f||m?"SX_ZFGJJ"!==c&&"SX_SHBX"!==c||"insert"!==n.insertOrModify?t.setIn(["oriTemp","amount"],g):t.setIn(["oriTemp","payment","actualAmount"],g):t.setIn(["oriTemp","payment","actualAmount"],Math.abs(n.totalNotHandleAmount).toFixed(2))}),f(e,u.CALCULATE_FROM_SEARCH_JUMP_TO_EDIT,function(){t.getIn(["flags","uuidList"]);return t}),f(e,u.GET_PREAMOUNT_INFO,function(){return t=t.setIn(["oriTemp","preAmount"],n.preAmount).setIn(["oriTemp","payableAmount"],n.payableAmount)}),f(e,u.CHANGE_ORITEMP_ORIDATE,function(){return t=t.setIn(["oriTemp","oriDate"],n.date)}),f(e,u.INIT_COST_STOCK_ARRAY,function(){return t=t.setIn(["flags","costStockList"],(0,s.fromJS)([]))}),f(e,u.COMMON_CHARGE_ITEM_CHECKBOX_SELECT,function(){var e=t.getIn(["flags","selectList"]),a=t.getIn(["flags","selectItem"]),r=n.item,i=r.uuid,o=r.name,u=r.code,c=r.isOpenedQuantity,l=r.unit,d=void 0===l?{unitList:[]}:l,f=r.unitPriceList,m=void 0===f?[]:f,g=r.financialInfo;if(!n.checked&&-1===e.findIndex(function(e){return e===i})){var p=e.push(i),T=a.push((0,s.fromJS)({uuid:i,name:o,code:u,isOpenedQuantity:c,unit:d,unitPriceList:m,financialInfo:g}));return t.setIn(["flags","selectList"],p).setIn(["flags","selectItem"],(0,s.fromJS)(T))}if(n.checked){var _=e.splice(e.findIndex(function(e){return e===i}),1),C=a.splice(e.findIndex(function(e){return e===i}),1);return t.setIn(["flags","selectList"],_).setIn(["flags","selectItem"],(0,s.fromJS)(C))}return t}),f(e,u.AFTER_INVENTORY_IMPORT,function(){var e=n.receivedData.data.importList.map(function(e){return e.exchange&&e.exchange.indexOf("仓库非末级")>-1&&(e.warehouseCardCode="",e.warehouseCardName=""),e});if(t=n.receivedData.data?t.setIn(["flags","iframeload"],!0).setIn(["flags","acmessage"],(0,s.fromJS)(n.receivedData.message)).setIn(["flags","errorList"],(0,s.fromJS)(n.receivedData.data.errorList)).setIn(["flags","importKey"],n.receivedData.data.importKey).setIn(["flags","importList"],(0,s.fromJS)(e)):t.setIn(["flags","iframeload"],!0).setIn(["flags","showMessageMask"],!1).setIn(["flags","acmessage"],(0,s.fromJS)(n.receivedData.message)),e&&e.length){var a=e.reduce(function(e,t){return e+=t.amount},0)||0;t=t.setIn(["oriTemp","stockCardList"],(0,s.fromJS)(e)).setIn(["oriTemp","carryoverCardList"],(0,s.fromJS)(e.map(function(e){return e.amount="",e}))).setIn(["oriTemp","amount"],a.toFixed(2))}return t}),f(e,u.CHANGE_PRICE_LIST,function(){return n.data.map(function(e,a){if(n.stockPriceList[a].storeUuid&&n.stockPriceList[a].cardUuid&&(t=(t=t.setIn(["oriTemp","stockCardList",a,"currentQuantity"],e.quantity)).setIn(["oriTemp","stockCardList",a,"showQuantity"],!0)),n.stockPriceList[a].isUniformPrice&&(e.price<0||(0,l.numberCalculate)(e.amount,e.quantity,2,"divide")<0))return i.default.error({title:"【"+e.code+" "+e.cardName+"】的单价异常，请调整单价后再录入",content:"",onOk:function(){}});t=t.setIn(["oriTemp","carryoverCardList",a,"referencePrice"],e.price)}),t}),e)[n.type]||function(){return t})()},n(46);var s=n(18),u=d(n(133)),c=n(101),l=(d(n(27)),n(22));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=(0,s.fromJS)({views:{},flags:{selectList:[],indexList:[],managerCategoryList:[],stockThingsList:[],contactsThingsList:[],costStockList:[],selectItem:[],dropManageFetchAllowed:!0,selectedKeys:"",switchUuidList:[],poundage:{needPoundage:!1},accountContactsRange:[],accountProjectRange:[],accountProjectList:[],accountContactsRangeList:[],carryoverCategoryList:[],carryoverProjectList:[],importList:[],errorList:[],batchList:[],serialList:[]},oriTemp:{accounts:[{},{}],oriDate:(new l.DateLib).toString(),pendingStrongList:[],projectCardList:[{}],currentCardList:[],carryoverCardList:[{}],carryoverStrongList:[],stockCardList:[{}],stockStrongList:[],usedProject:!0,usedCurrent:!0,usedStock:!0,billList:[{billType:"bill_other",billState:""}],billStrongList:[],strongList:[],payment:{},cardAllList:[],poundageCurrentCardList:[],poundageProjectCardList:[],assistList:[],serialList:[]},categoryTemp:{},projectList:[],contactsList:[],warehouseList:[],stockList:[],hideCategoryList:[],MemberList:[],selectThingsList:[],thingsList:[]})},1399:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=arguments[1];return((e={},c(e,o.INIT_EIDT_CALCULATE,function(){return l}),c(e,o.INIT_ENCODE_TYPE,function(){return t=t.setIn(["views","chooseNumber"],"-1").setIn(["views","jrIndex"],"").setIn(["views","saveWay"],!1).setIn(["views","encodeType"],"")}),c(e,o.CHANGE_CAN_MODIFY_JRINDEX,function(){var e="0"===n.encodeType?"1":n.encodeType;return t=t.setIn(["views","chooseNumber"],n.encodeType).setIn(["views","jrIndex"],n.jrIndex).setIn(["views","saveWay"],n.saveAndNew).setIn(["views","encodeType"],e)}),c(e,o.CHANGE_EIDT_CALCULATE_COMMON_STATE,function(){return t.setIn([n.parent,n.position],n.value)}),c(e,o.SELECT_EDIT_CALCULATE_ITEM,function(){var e=t.getIn([n.Tem,"uuidList"]),a=t.getIn([n.Tem,"stockCardUuidList"]);if(-1===e.indexOf(n.uuid))e=e.push(n.uuid),a=a?a.push({uuid:n.stockCardUuid,amount:n.amount,onlyId:n.uuid}):[];else{var i=e.findIndex(function(e){return e===n.uuid}),o=a.findIndex(function(e){return e.get("onlyId")===n.uuid});e=e.splice(i,1),a=a?a.splice(o,1):a}var s=a.size?a.toJS():[];return t=t.setIn([n.Tem,"uuidList"],e).setIn([n.Tem,"stockCardUuidList"],(0,r.fromJS)(s))}),c(e,o.SELECT_EDIT_CALCULATE_ITEM_ALL,function(){if(n.selectAll)return t.setIn([n.Tem,"uuidList"],(0,r.fromJS)([])).setIn([n.Tem,"stockCardUuidList"],(0,r.fromJS)([]));var e=t.getIn([n.Tem,n.ListName]),a=[],i=[];return e.forEach(function(e){a.push(e.get("jrJvUuid")),i.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid")})}),t.setIn([n.Tem,"uuidList"],(0,r.fromJS)(a)).setIn([n.Tem,"stockCardUuidList"],(0,r.fromJS)(i))}),c(e,o.AFTER_GET_EDIT_CALCULATE_COMMON_LIST,function(){t.getIn(["CostTransferTemp","uuidList"]);var e=t.getIn(["views","selectList"]),a=t.getIn(["views","selectItem"]),i=t.getIn(["CostTransferTemp","stockCardUuidList"]).toJS(),o=[];i&&i.size&&i.map(function(e){return o.push(e.get("onlyId"))});var s="CostTransferTemp"===n.temp?n.receivedData.carryoverList:n.receivedData.result;t=t.setIn([n.temp,n.ListName],(0,r.fromJS)(s));var u=e,c=a,l=i;if("CostTransferTemp"===n.temp){var d=[];n.receivedData.carryoverList.map(function(t){e.indexOf(t.jrJvUuid)>-1&&d.push(t.jrJvUuid),e.indexOf(t.jrJvUuid)>-1&&(u.push(t.jrJvUuid),c.push(t),-1===o.indexOf(t.jrJvUuid)&&l.push({uuid:t.stockCardUuid,amount:t.amount,onlyId:t.jrJvUuid,quantity:t.quantity,unitCardName:t.unitCardName,number:t.number,quantityAmount:t.quantityAmount}))}),t=t.setIn([n.temp,"uuidList"],(0,r.fromJS)(d)).setIn([n.temp,"stockCardUuidList"],(0,r.fromJS)(l)).setIn([n.temp,"cardPages"],n.receivedData.pages).setIn([n.temp,"currentCardPage"],n.receivedData.currentPage).setIn(["views","selectList"],(0,r.fromJS)(u)).setIn(["views","selectItem"],(0,r.fromJS)(c))}else t=t.setIn([n.temp,"uuidList"],(0,r.fromJS)([])).setIn([n.temp,"stockCardUuidList"],(0,r.fromJS)([])).setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([]));return t}),c(e,o.GET_CARRYOVER_CATEGORY,function(){return t=t.setIn(["CostTransferTemp","carryoverCategory"],(0,r.fromJS)(n.receivedData.categoryList)),n.needSaveData||(t=t.setIn(["CostTransferTemp","dealTypeName"],"").setIn(["CostTransferTemp","dealTypeUuid"],"")),t}),c(e,o.GET_CARRYOVER_WAREHOUSE,function(){return t=t.setIn(["CostTransferTemp","warehouseOptionList"],(0,r.fromJS)(n.receivedData.warehouseList))}),c(e,o.GET_EDIT_CALCULATE_TRANSFER_OUT_LIST,function(){return t=t.setIn(["TransferOutTemp","transferOutObj"],(0,r.fromJS)(n.receivedData))}),c(e,o.INIT_CATEGORY_FROM_CHANGE_ORISTATE,function(){return t=t.setIn(["CostTransferTemp","stockCardList"],(0,r.fromJS)([{}])).setIn(["CostTransferTemp","costTransferList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)([])).setIn(["CostTransferTemp","propertyCostList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","costStockList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","propertyCost"],"").setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])).set("commonCardObj",(0,r.fromJS)({memberList:[],thingsList:[],selectItem:[],selectList:[],selectedKeys:["all"+s.TREE_JOIN_STR+"1"],selectThingsList:[],showSingleModal:!1,modalName:""}))}),c(e,o.INIT_CATEGORY_FROM_GET_CATEGORY,function(){var e=t.getIn(["views","selectItem"]);t.getIn(["views","selectList"]);if(n.notClearItem){var a=n.stockUuidList;if("delete"===n.dealType){var i=e.filter(function(e){return a.indexOf(e.get("stockCardUuid"))>-1}),o=[];i&&i.map(function(e){return o.push(e.get("jrJvUuid"))}),t=t.setIn(["views","selectList"],(0,r.fromJS)(o)).setIn(["views","selectItem"],i).setIn(["CostTransferTemp","stockCardUuidList"],i)}}else t=t.setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])).setIn(["CostTransferTemp","stockCardUuidList"],(0,r.fromJS)([]));return t=t.setIn(["CostTransferTemp","carryoverCategory"],(0,r.fromJS)([])).setIn(["CostTransferTemp","warehouseOptionList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","categoryNameAll"],(0,r.fromJS)([])).setIn(["CostTransferTemp","wareHouseNameAll"],(0,r.fromJS)([])).setIn(["CostTransferTemp","categoryUuidList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","storeUuidList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","condition"],"").setIn(["CostTransferTemp","cardPages"],1).setIn(["CostTransferTemp","currentPage"],1)}),c(e,o.AFTER_SUCCESS_INSERT_CALCULATE_LB_ZZ,function(){return t=n.saveAndNew?t.setIn(["views","insertOrModify"],"insert").set("InternalTransferTemp",l.get("InternalTransferTemp")):t.setIn(["views","insertOrModify"],"modify")}),c(e,o.CHANGE_EDIT_ACCOUNT_ACCOUNT_NAME,function(){var e=n.value.split(s.TREE_JOIN_STR);return t=t.setIn([n.tab+"Temp",n.placeUUid],e[0]).setIn([n.tab+"Temp",n.placeName],e[1])}),c(e,o.INIT_EDIT_CALCULATE_TEMP,function(){t.get("hideCategoryList");var e=t.getIn(["SfglTemp","pageSize"]);if("saveAndNew"===n.strJudgeType){n.needCategoryUuid&&(t=t.setIn([n.temp,"categoryUuid"],n.receivedData.get("categoryUuid")));var a=l.get(n.temp);t=t.setIn(["views","insertOrModify"],"insert").setIn(["views","runningInsertOrModify"],"insert").setIn(["views","dealType"],"").setIn(["views","categoryMessage"],(0,r.fromJS)({beProject:!1,usedProject:!1,propertyCostList:[]})).setIn(["views","paymentTypeStr"],t.getIn(["views","paymentTypeStr"])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])).setIn(["views","totalAmount"],0).set("enclosureList",(0,r.fromJS)([])).set("label",(0,r.fromJS)([])).set("needDeleteUrl",(0,r.fromJS)([])).set(n.temp,a),"StockBuildUpTemp"===n.temp&&(t=t.setIn(["StockBuildUpTemp","categoryUuid"],n.receivedData.get("categoryUuid")))}if("afterSave"===n.strJudgeType){var i=(0,r.fromJS)(n.receivedData),o=n.callBackObj.jrUuid?n.callBackObj.jrUuid:t.getIn([n.temp,"jrUuid"]);t=t.set(n.temp,i).setIn(["views","insertOrModify"],"modify").setIn(["views","runningInsertOrModify"],"modify").setIn([n.temp,"jrNumber"],n.callBackObj.jrNumber).setIn([n.temp,"jrIndex"],n.callBackObj.jrIndex).setIn([n.temp,"jrUuid"],o).setIn([n.temp,"oriUuid"],n.callBackObj.oriUuid)}return"SfglTemp"===n.temp&&(t=t.setIn(["SfglTemp","pageSize"],e)),t}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_NBZZ,function(){var e=n.item,a=(0,r.fromJS)(n.receivedData.jrOri),i=(0,r.fromJS)(n.receivedData.jrOri.accounts),o=void 0,s=void 0,u=void 0,c=void 0;i&&i.map(function(e,t){"ACCOUNT_STATUS_FROM"==e.get("accountStatus")&&(o=e.get("accountName"),u=e.get("accountUuid")),"ACCOUNT_STATUS_TO"==e.get("accountStatus")&&(s=e.get("accountName"),c=e.get("accountUuid"))});a.get("enclosureList")?a.get("enclosureList"):(0,r.fromJS)([]);return t=l.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["InternalTransferTemp","oriUuid"],e.get("oriUuid")).setIn(["InternalTransferTemp","jrUuid"],a.get("jrUuid")).setIn(["InternalTransferTemp","oriAbstract"],a.get("oriAbstract")).setIn(["InternalTransferTemp","oriState"],a.get("oriState")).setIn(["InternalTransferTemp","amount"],a.get("amount")).setIn(["InternalTransferTemp","fromAccountName"],o).setIn(["InternalTransferTemp","toAccountName"],s).setIn(["InternalTransferTemp","fromAccountUuid"],u).setIn(["InternalTransferTemp","toAccountUuid"],c).setIn(["InternalTransferTemp","jrIndex"],a.get("jrIndex")).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["InternalTransferTemp","beCertificate"],n.receivedData.jrOri.beCertificate)}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_ZJTX,function(){var e=n.item,i=l.get("DepreciationTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri));return t=l.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["views","dealType"],o.get("relationCategoryName")).setIn(["views","projectRange"],n.receivedData.category.projectRange).setIn(["views","beProject"],n.receivedData.category.beProject).setIn(["views","propertyCostList"],o.get("propertyCostList")).set("DepreciationTemp",(0,r.fromJS)(o)).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["DepreciationTemp","projectCard"],(0,r.fromJS)(o.getIn(["projectCardList",0]))).setIn(["DepreciationTemp","beCertificate"],n.receivedData.jrOri.beCertificate)}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_SYJZ,function(){var e=n.item,i=l.get("JzjzsyTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri));return t=l.setIn(["views","insertOrModify"],n.insertOrModify).set("JzjzsyTemp",(0,r.fromJS)(o)).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["JzjzsyTemp","pendingProfitAndLossCarryoverList"],(0,r.fromJS)(o.get("pendingProfitAndLossCarryoverList"))).setIn(["JzjzsyTemp","categoryName"],o.get("relationCategoryName")).setIn(["JzjzsyTemp","beCertificate"],n.receivedData.jrOri.beCertificate).setIn(["JzjzsyTemp","amount"],n.receivedData.jrOri.amount).setIn(["JzjzsyTemp","projectCardList"],(0,r.fromJS)(n.receivedData.projectList)).setIn(["JzjzsyTemp","jrCategoryList"],(0,r.fromJS)(n.receivedData.categoryList)).setIn(["views","oriUuid"],e.get("oriUuid"))}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_JZSY,function(){var e=n.item,i=l.get("CqzcTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri)),s=n.receivedData.jrOri.assets,u=s.depreciationAmount,c=s.originalAssetsAmount,d=(Number(c)-Number(u)).toFixed(2),f=(d-s.cleaningAmount).toFixed(2);return t=l.setIn(["views","insertOrModify"],n.insertOrModify).set("CqzcTemp",(0,r.fromJS)(o)).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["CqzcTemp","projectRange"],n.receivedData.category.projectRange).setIn(["CqzcTemp","beProject"],n.receivedData.category.beProject).setIn(["CqzcTemp","projectCard"],(0,r.fromJS)(o.get("projectCardList"))).setIn(["CqzcTemp","categoryName"],o.get("relationCategoryName")).setIn(["CqzcTemp","businessList"],(0,r.fromJS)(n.receivedData.jrOri.pendingStrongList)).setIn(["CqzcTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("oriUuid")})).setIn(["CqzcTemp","beCertificate"],n.receivedData.jrOri.beCertificate).setIn(["CqzcTemp","diffAmount"],f).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))}),c(e,o.COST_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,o=l.get("CostTransferTemp").toJS(),s=(0,r.fromJS)(a({},o,n.receivedData.category,n.receivedData.jrOri)),u=n.receivedData.jrOri.stockCardList,c=o.pageSize;if(t=l.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["CostTransferTemp","canUseWarehouse"],e.get("canUseWarehouse")).setIn(["views","projectRange"],s.get("projectRange")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["CostTransferTemp","oriAbstract"],s.get("oriAbstract")).setIn(["CostTransferTemp","dealTypeUuid"],s.get("relationCategoryUuid")).setIn(["CostTransferTemp","categoryName"],s.get("categoryName")).setIn(["CostTransferTemp","dealTypeName"],s.get("relationCategoryName")).setIn(["CostTransferTemp","dealCategoryType"],n.receivedData.jrOri.relationCategoryType).setIn(["CostTransferTemp","costStockList"],s.get("stockCardList")).setIn(["CostTransferTemp","beCertificate"],n.receivedData.jrOri.beCertificate).setIn(["CostTransferTemp","propertyCostList"],s.get("propertyCostList")).setIn(["CostTransferTemp","propertyCost"],s.get("propertyCost")).setIn(["CostTransferTemp","stockCardList"],(0,r.fromJS)(u)).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(u)).setIn(["CostTransferTemp","totalNumber"],u.length),u&&u.map(function(e,n){t=t.setIn(["CostTransferTemp","stockCardList",n,"allUnit"],(0,r.fromJS)(e.unit)).setIn(["CostTransferTemp","stockCardList",n,"unitCardName"],e.unit?e.unit.name:"").setIn(["CostTransferTemp","selectStockItem",n,"unitCardName"],e.unit?e.unit.name:"")}),"modify"===n.insertOrModify||n.disabledChange){var d=s.get("enclosureList")?s.get("enclosureList"):(0,r.fromJS)([]);t=t.setIn(["CostTransferTemp","oriUuid"],s.get("oriUuid")).setIn(["CostTransferTemp","jrIndex"],s.get("jrIndex")).setIn(["CostTransferTemp","oriState"],s.get("oriState")).setIn(["CostTransferTemp","carryoverAmount"],s.get("notHandleAmount")).setIn(["CostTransferTemp","uuidList"],s.get("stockWeakList").map(function(e,t){return e.get("jrJvUuid")}).slice(0,c)).setIn(["CostTransferTemp","projectCard"],s.get("projectCardList")).setIn(["CostTransferTemp","usedProject"],s.get("usedProject")).setIn(["CostTransferTemp","beProject"],s.get("beProject")).setIn(["CostTransferTemp","enclosureList"],d).setIn(["CostTransferTemp","cardPages"],Math.ceil(s.get("stockWeakList").size/c)).setIn(["CostTransferTemp","currentCardPage"],1).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"));var f=[];"STATE_YYSR_ZJ"!==s.get("oriState")?(s.getIn(["stockWeakList"]).map(function(e){f.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid"),quantity:e.get("quantity"),quantityAmount:e.get("quantityAmount"),number:e.get("number"),storeNumber:e.get("storeNumber")}),u.forEach(function(n,a){n.cardUuid===e.get("stockCardUuid")&&(t=(t=t.setIn(["CostTransferTemp","stockCardList",a,"unitCardName"],e.get("unitCardName"))).setIn(["CostTransferTemp","selectStockItem",a,"unitCardName"],e.get("unitCardName")))})}),u&&u.map(function(e,n){var a=0,r=0,o=0,s=0,u=0;f&&f.map(function(t,n){t.uuid===e.cardUuid&&(t.uuid,t.unitCardName,a=(0,i.numberCalculate)(a,t.amount),u=(0,i.numberCalculate)(u,t.quantity,4,"add",4),r=(0,i.numberCalculate)(r,t.number,4,"add",4),s=(0,i.numberCalculate)(s,t.quantityAmount),o=(0,i.numberCalculate)(o,t.storeNumber,4,"add",4))});0===r||(0,i.numberCalculate)(s,r,4,"divide",4)<0||(0,i.numberCalculate)(s,r,4,"divide",4);t=t.setIn(["CostTransferTemp","stockCardList",n,"referencePrice"],(0,i.numberCalculate)(s,r,4,"divide",4)).setIn(["CostTransferTemp","stockCardList",n,"referenceQuantity"],o).setIn(["CostTransferTemp","selectStockItem",n,"referencePrice"],(0,i.numberCalculate)(s,r,4,"divide",4)).setIn(["CostTransferTemp","selectStockItem",n,"referenceQuantity"],o)})):u.forEach(function(e,n){t=t.setIn(["CostTransferTemp","stockCardList",n,"unitCardName"],e.unitName).setIn(["CostTransferTemp","stockCardList",n,"unitUuid"],e.unitUuid).setIn(["CostTransferTemp","stockCardList",n,"warehouseCardName"],e.warehouseCardName).setIn(["CostTransferTemp","selectStockItem",n,"unitCardName"],e.unitName).setIn(["CostTransferTemp","selectStockItem",n,"unitUuid"],e.unitUuid).setIn(["CostTransferTemp","selectStockItem",n,"warehouseCardName"],e.warehouseCardName)}),t=t.setIn(["CostTransferTemp","costTransferList"],s.get("stockWeakList")).setIn(["CostTransferTemp","canModifyList"],s.get("stockWeakList")).setIn(["views","selectItem"],s.get("stockWeakList")).setIn(["views","selectList"],s.get("stockWeakList").map(function(e){return e.get("jrJvUuid")})).setIn(["CostTransferTemp","stockCardUuidList"],(0,r.fromJS)(f))}else t=(t=t.setIn(["CostTransferTemp","oriUuid"],"").setIn(["CostTransferTemp","oriState"],s.get("oriState")).setIn(["CostTransferTemp","carryoverAmount"],"").setIn(["CostTransferTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")]))).setIn(["CostTransferTemp","costTransferList"],(0,r.fromJS)([e]));return t}),c(e,o.INVOICE_AUTH_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=l.get("InvoiceAuthTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri)),s=[];return o.get("pendingStrongList").map(function(e){s.push({onlyId:e.get("oriUuid")})}),t=l.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["InvoiceAuthTemp","oriAbstract"],o.get("oriAbstract")).setIn(["InvoiceAuthTemp","categoryUuid"],o.get("categoryUuid")).setIn(["InvoiceAuthTemp","oriState"],o.get("oriState")).setIn(["InvoiceAuthTemp","beCertificate"],n.receivedData.jrOri.beCertificate),t="modify"===n.insertOrModify||n.disabledChange?(t=t.setIn(["InvoiceAuthTemp","oriUuid"],e.get("oriUuid")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["InvoiceAuthTemp","jrIndex"],o.get("jrIndex")).setIn(["InvoiceAuthTemp","amount"],o.get("amount")).setIn(["InvoiceAuthTemp","billAuthType"],"STATE_FPRZ_CG"===o.get("oriState")?"BILL_AUTH_TYPE_CG":"BILL_AUTH_TYPE_TG").setIn(["InvoiceAuthTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("jrJvUuid")})).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["InvoiceAuthTemp","stockCardUuidList"],(0,r.fromJS)(s))).setIn(["InvoiceAuthTemp","invoiceAuthList"],o.getIn(["pendingStrongList"])):(t=t.setIn(["InvoiceAuthTemp","oriUuid"],"").setIn(["InvoiceAuthTemp","billAuthType"],"STATE_FPRZ_CG"===o.get("oriState")?"BILL_AUTH_TYPE_CG":"BILL_AUTH_TYPE_TG").setIn(["InvoiceAuthTemp","uuidList"],(0,r.fromJS)([e.get("jrJvUuid")]))).setIn(["InvoiceAuthTemp","invoiceAuthList"],(0,r.fromJS)([e]))}),c(e,o.INVOICING_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=l.get("InvoicingTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri)),s=[];if(o.get("pendingStrongList").map(function(e){s.push({onlyId:e.get("oriUuid")})}),t=l.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["InvoicingTemp","oriAbstract"],o.get("oriAbstract")).setIn(["InvoicingTemp","categoryUuid"],o.get("categoryUuid")).setIn(["InvoicingTemp","oriState"],o.get("oriState")).setIn(["InvoicingTemp","beCertificate"],n.receivedData.jrOri.beCertificate),"modify"===n.insertOrModify||n.disabledChange){var u="STATE_KJFP_XS"===o.get("oriState")?"BILL_MAKE_OUT_TYPE_XS":"BILL_MAKE_OUT_TYPE_TS",c=o.get("enclosureList")?o.get("enclosureList"):(0,r.fromJS)([]);t=(t=t.setIn(["InvoicingTemp","oriUuid"],e.get("oriUuid")).setIn(["InvoicingTemp","jrIndex"],o.get("jrIndex")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["InvoicingTemp","amount"],o.get("amount")).setIn(["InvoicingTemp","enclosureList"],c).setIn(["InvoicingTemp","billMakeOutType"],u).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["InvoicingTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("jrJvUuid")})).setIn(["InvoicingTemp","stockCardUuidList"],(0,r.fromJS)(s))).setIn(["InvoicingTemp","invoicingList"],o.getIn(["pendingStrongList"]))}else t=(t=t.setIn(["InvoicingTemp","oriUuid"],"").setIn(["InvoicingTemp","billMakeOutType"],"STATE_KJFP_XS"===o.get("oriState")?"BILL_MAKE_OUT_TYPE_XS":"BILL_MAKE_OUT_TYPE_TS").setIn(["InvoicingTemp","uuidList"],(0,r.fromJS)([o.get("jrJvUuid")]))).setIn(["InvoicingTemp","invoicingList"],(0,r.fromJS)([o]));return t}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=l.get("DepreciationTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri));t=l.setIn(["views","insertOrModify"],n.insertOrModify).set("TransferOutTemp",(0,r.fromJS)(o)).setIn(["TransferOutTemp","beCertificate"],n.receivedData.jrOri.beCertificate).setIn(["TransferOutTemp","oriUuid"],e.get("oriUuid")).setIn(["TransferOutTemp","jrIndex"],o.get("jrIndex")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["TransferOutTemp","oriAbstract"],o.get("oriAbstract")).setIn(["TransferOutTemp","categoryUuid"],o.get("categoryUuid")).setIn(["TransferOutTemp","handleMonth"],o.getIn(["pendingStrongList",0,"oriDate"]).substr(0,7)).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["TransferOutTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("oriUuid")}));var s=0,u=0,c=0,d=0;return o.get("pendingStrongList").forEach(function(e){"销项税额"===e.get("jrJvTypeName")?(d+=1,c+=e.get("handleAmount")):(u+=1,s+=e.get("handleAmount"))}),t=t.setIn(["TransferOutTemp","transferOutObj","jrJvVatDtoList"],o.get("pendingStrongList")).setIn(["TransferOutTemp","transferOutObj","inputAmount"],s).setIn(["TransferOutTemp","transferOutObj","inputCount"],u).setIn(["TransferOutTemp","transferOutObj","outputAmount"],c).setIn(["TransferOutTemp","transferOutObj","outputCount"],d)}),c(e,o.PAYMANAGE_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=l.get("SfglTemp").toJS(),o=e.get("pageSize")?e.get("pageSize"):20,s=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri)),u="STATE_SFGL_ML"===s.get("oriState"),c=n.receivedData.jrOri.pendingManageDto.pendingManageList,d=n.receivedData.jrOri.pendingManageDto.debitTotal,f=n.receivedData.jrOri.pendingManageDto.creditTotal,m=0,g=[];if(c&&c.length&&c.map(function(e,t){var n=e.direction,r=void 0,i=Number(e.amount);r=i.toFixed(2),"debit"===n?m+=Number(r):m-=Number(r),g.push(a({},e,{moedAmount:e.handleAmount}))}),t=l.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["SfglTemp","oriAbstract"],s.get("oriAbstract")).setIn(["SfglTemp","categoryUuid"],s.getIn(["pendingManageDto","categoryUuid"])).setIn(["SfglTemp","categoryName"],s.getIn(["pendingManageDto","categoryName"])).setIn(["SfglTemp","oriState"],s.get("oriState")).setIn(["SfglTemp","oriUuid"],s.get("oriUuid")).setIn(["SfglTemp","jrUuid"],s.get("jrUuid")).setIn(["SfglTemp","isModeRunning"],u).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["SfglTemp","beCertificate"],n.receivedData.jrOri.beCertificate),"modify"===n.insertOrModify||n.disabledChange){1===n.receivedData.jrOri.accounts.length?t=t.setIn(["SfglTemp","accountUuid"],s.getIn(["accounts",0,"accountUuid"])).setIn(["SfglTemp","accountName"],s.getIn(["accounts",0,"accountName"])).setIn(["SfglTemp","accounts"],(0,r.fromJS)([n.receivedData.jrOri.accounts[0],{amount:""}])).setIn(["SfglTemp","usedAccounts"],!1):n.receivedData.jrOri.accounts.length>1&&(t=t.setIn(["SfglTemp","accounts"],(0,r.fromJS)(n.receivedData.jrOri.accounts)).setIn(["SfglTemp","usedAccounts"],!0));var p="STATE_SFGL_ML"===s.get("oriState")?"moedAmount":"handlingAmount",T=s.get("enclosureList")?s.get("enclosureList"):(0,r.fromJS)([]);t=(t=t.setIn(["SfglTemp","jrIndex"],s.get("jrIndex")).setIn(["SfglTemp",p],s.get("amount")).setIn(["SfglTemp","cardUuid"],s.getIn(["currentCardList",0,"cardUuid"])).setIn(["SfglTemp","usedCard","code"],s.getIn(["currentCardList",0,"code"])).setIn(["SfglTemp","usedCard","name"],s.getIn(["currentCardList",0,"name"])).setIn(["SfglTemp","cardPages"],Math.ceil(s.getIn(["pendingManageDto","pendingManageList"]).size/o)).setIn(["SfglTemp","currentCardPage"],1).setIn(["SfglTemp","pageSize"],o).setIn(["SfglTemp","totalNumber"],s.getIn(["pendingManageDto","pendingManageList"]).size).setIn(["SfglTemp","debitTotal"],d).setIn(["SfglTemp","creditTotal"],f).setIn(["SfglTemp","unAutomatic"],s.getIn(["pendingManageDto","isManualWriteOff"])).setIn(["SfglTemp","enclosureList"],T).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["views","selectList"],s.getIn(["pendingManageDto","pendingManageList"]).map(function(e){return e.get("uuid")})).setIn(["views","indexList"],s.getIn(["pendingManageDto","pendingManageList"]).map(function(e,t){return t})).setIn(["views","selectItem"],(0,r.fromJS)(g)).setIn(["views","totalAmount"],m)).setIn(["SfglTemp","detail"],(0,r.fromJS)(g))}else t=(t=t.setIn(["SfglTemp","oriUuid"],"").setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])).setIn(["SfglTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["SfglTemp","debitTotal"],0).setIn(["SfglTemp","creditTotal"],0)).setIn(["SfglTemp","detail"],(0,r.fromJS)([s]));return t}),c(e,o.COMMONCHARGE_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=l.get("CommonChargeTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri));if(t=l.set("CommonChargeTemp",o).setIn(["views","insertOrModify"],n.insertOrModify).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["CommonChargeTemp","oriAbstract"],o.get("oriAbstract")).setIn(["CommonChargeTemp","oriState"],o.get("oriState")).setIn(["CommonChargeTemp","oriUuid"],o.get("oriUuid")).setIn(["CommonChargeTemp","jrUuid"],o.get("jrUuid")).setIn(["CommonChargeTemp","beCertificate"],n.receivedData.jrOri.beCertificate),"modify"===n.insertOrModify||n.disabledChange){var s=0;o.get("pendingProjectShareList").map(function(e){s+=e.get("amount")}),t=(t=t.setIn(["CommonChargeTemp","jrIndex"],o.get("jrIndex")).setIn(["CommonChargeTemp","amount"],s).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))).setIn(["CommonChargeTemp","paymentList"],o.get("pendingProjectShareList"))}else t=(t=t.setIn(["CommonChargeTemp","oriUuid"],"").setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["CommonChargeTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")]))).setIn(["CommonChargeTemp","detail"],(0,r.fromJS)([o]));return t}),c(e,o.INVENTORY_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=l.get("StockTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri));if(t=l.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["StockTemp","oriAbstract"],o.get("oriAbstract")),"modify"===n.insertOrModify||n.disabledChange){var s=[];n.receivedData.jrOri.stockCardList.map(function(e){s.push(a({},e,{unit:{uuid:e.unitUuid,name:e.unitName}}))});var u=o.get("enclosureList")?o.get("enclosureList"):(0,r.fromJS)([]),c=[];n.receivedData.jrOri.warehouseCardList.map(function(e){c.push({cardUuid:e.cardUuid,name:e.code+" "+e.name,warehouseStatus:e.warehouseStatus})}),t=t.setIn(["StockTemp","oriUuid"],o.get("oriUuid")).setIn(["StockTemp","jrUuid"],o.get("jrUuid")).setIn(["StockTemp","jrIndex"],o.get("jrIndex")).setIn(["StockTemp","oriState"],o.get("oriState")).setIn(["StockTemp","chooseWareHouseCardList"],(0,r.fromJS)(c)).setIn(["StockTemp","enclosureList"],u).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["StockTemp","oriState"],"STATE_CHDB").setIn(["StockTemp","stockCardList"],(0,r.fromJS)(s)).setIn(["StockTemp","beCertificate"],n.receivedData.jrOri.beCertificate);var d=[];o.getIn(["stockWeakList"]).map(function(e){d.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid"),quantity:e.get("quantity"),quantityAmount:e.get("quantityAmount")})}),t=t.setIn(["StockTemp","costTransferList"],o.getIn(["stockWeakList"])).setIn(["StockTemp","canModifyList"],o.getIn(["stockWeakList"])).setIn(["StockTemp","stockCardUuidList"],(0,r.fromJS)(d)).setIn(["StockTemp","categoryUuid"],n.receivedData.category.uuid)}else t=(t=t.setIn(["StockTemp","oriUuid"],"").setIn(["StockTemp","oriState"],o.get("oriState")).setIn(["StockTemp","carryoverAmount"],"").setIn(["StockTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["StockTemp","stockCardList"],(0,r.fromJS)([]))).setIn(["StockTemp","costTransferList"],(0,r.fromJS)([e]));return t}),c(e,o.INVENTORY_BALANCE_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,o=l.get("BalanceTemp").toJS(),s=(0,r.fromJS)(a({},o,n.receivedData.category,n.receivedData.jrOri));s.get("jrState");if(t=l.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["BalanceTemp","canUseWarehouse"],e.get("canUseWarehouse")).setIn(["BalanceTemp","oriAbstract"],s.get("oriAbstract")).setIn(["BalanceTemp","categoryUuid"],s.get("categoryUuid")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName),"modify"===n.insertOrModify||n.disabledChange){var u=[],c=[];n.receivedData.jrOri.stockCardList&&n.receivedData.jrOri.stockCardList.map(function(e,t){c.push(e.cardUuid),u.push(a({},e,{allUnit:{uuid:e.unitUuid,name:e.unitName},price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4),afterAmount:(0,i.numberCalculate)(e.beforeAmount,e.amount),afterQuantity:(0,i.numberCalculate)(e.beforeQuantity,e.quantity,4,"add",4),beforePrice:(0,i.numberCalculate)(e.beforeAmount,e.beforeQuantity,4,"divide",4),afterPrice:(0,i.numberCalculate)((0,i.numberCalculate)(e.beforeAmount,e.amount),(0,i.numberCalculate)(e.beforeQuantity,e.quantity,4,"add",4),4,"divide",4),warehouseCardName:e.warehouseCardName}))});var d=s.get("enclosureList")?s.get("enclosureList"):(0,r.fromJS)([]);t=t.setIn(["BalanceTemp","oriUuid"],s.get("oriUuid")).setIn(["BalanceTemp","jrUuid"],s.get("jrUuid")).setIn(["BalanceTemp","jrIndex"],s.get("jrIndex")).setIn(["BalanceTemp","oriState"],s.get("jrState")).setIn(["BalanceTemp","chooseStockCard"],(0,r.fromJS)({})).setIn(["BalanceTemp","enclosureList"],d).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["BalanceTemp","stockCardList"],(0,r.fromJS)(u)).setIn(["BalanceTemp","oriStockList"],(0,r.fromJS)(u)).setIn(["BalanceTemp","oriStockCardList"],(0,r.fromJS)(c)).setIn(["BalanceTemp","oriWarehouseCardList"],(0,r.fromJS)([])).setIn(["BalanceTemp","categoryUuid"],n.receivedData.category.uuid).setIn(["BalanceTemp","beCertificate"],n.receivedData.jrOri.beCertificate)}else t=t.setIn(["BalanceTemp","oriUuid"],"").setIn(["BalanceTemp","oriState"],s.get("oriState")).setIn(["BalanceTemp","carryoverAmount"],"").setIn(["BalanceTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["BalanceTemp","stockCardList"],(0,r.fromJS)([]));return t}),c(e,o.TAX_TRANSTER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=l.get("TaxTransferTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri)),s=n.receivedData.jrOri.stockCardList;if(t=l.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["TaxTransferTemp","canUseWarehouse"],e.get("canUseWarehouse")).setIn(["views","categoryMessage"],(0,r.fromJS)(n.receivedData.category)).setIn(["views","categoryMessage","categoryType"],n.receivedData.category.relationCategoryType).setIn(["views","projectRange"],o.get("projectRange")).setIn(["TaxTransferTemp","oriAbstract"],o.get("oriAbstract")).setIn(["TaxTransferTemp","dealTypeUuid"],o.get("relationCategoryUuid")).setIn(["TaxTransferTemp","categoryName"],o.get("categoryName")).setIn(["TaxTransferTemp","dealTypeName"],o.get("relationCategoryName")).setIn(["TaxTransferTemp","beCertificate"],n.receivedData.jrOri.beCertificate).setIn(["TaxTransferTemp","stockCardList"],(0,r.fromJS)(s)).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName),s&&s.map(function(e,n){t=(t=t.setIn(["TaxTransferTemp","stockCardList",n,"allUnit"],(0,r.fromJS)(e.unit))).setIn(["TaxTransferTemp","stockCardList",n,"unitCardName"],e.unit?e.unit.name:"")}),"modify"===n.insertOrModify||n.disabledChange){var u=o.get("enclosureList")?o.get("enclosureList"):(0,r.fromJS)([]);t=t.setIn(["TaxTransferTemp","oriUuid"],o.get("oriUuid")).setIn(["TaxTransferTemp","jrIndex"],o.get("jrIndex")).setIn(["TaxTransferTemp","oriState"],o.get("oriState")).setIn(["TaxTransferTemp","projectCard"],o.getIn(["projectCardList",0])?o.getIn(["projectCardList",0]):(0,r.fromJS)({})).setIn(["TaxTransferTemp","usedProject"],o.get("usedProject")).setIn(["TaxTransferTemp","amount"],o.get("amount")).setIn(["TaxTransferTemp","propertyCarryover"],o.get("propertyCarryover")).setIn(["TaxTransferTemp","propertyCost"],o.get("propertyCost")).setIn(["TaxTransferTemp","enclosureList"],u).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))}else t=(t=t.setIn(["TaxTransferTemp","oriUuid"],"").setIn(["TaxTransferTemp","oriState"],o.get("oriState")).setIn(["TaxTransferTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")]))).setIn(["TaxTransferTemp","taxTransferList"],(0,r.fromJS)([e]));return t}),c(e,o.STOCK_BUILDUP_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,o=l.get("StockBuildUpTemp").toJS(),s=(0,r.fromJS)(a({},o,n.receivedData.category,n.receivedData.jrOri)),u=s.get("oriState"),c=s.get("enclosureList")?s.get("enclosureList"):(0,r.fromJS)([]);if(t=l.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["StockBuildUpTemp","oriAbstract"],s.get("oriAbstract")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName),"modify"===n.insertOrModify||n.disabledChange){var d=[],f=[],m=[],g=[];"STATE_CHZZ_ZZCX"===u?(n.receivedData.jrOri.stockCardList&&n.receivedData.jrOri.stockCardList.map(function(e,t){var n=1;e.unit&&(e.unit.unitUuid===e.unitUuid?n=e.unit.basicUnitQuantity?e.unit.basicUnitQuantity:1:e.unit.unitList&&e.unit.unitList.map(function(t){t.uuid===e.unitUuid&&(n=t.basicUnitQuantity?t.basicUnitQuantity:1)})),m.push(e.cardUuid+"+"+e.warehouseCardUuid),d.push(a({},e,{price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4),basicUnitQuantity:n}))}),n.receivedData.jrOri.stockCardOtherList&&n.receivedData.jrOri.stockCardOtherList.map(function(e,t){g.push(e.cardUuid+"+"+e.warehouseCardUuid);var n=1;e.unit&&(e.unit.unitUuid===e.unitUuid?n=e.unit.basicUnitQuantity?e.unit.basicUnitQuantity:1:e.unit.unitList&&e.unit.unitList.map(function(t){t.uuid===e.unitUuid&&(n=t.basicUnitQuantity?t.basicUnitQuantity:1)})),f.push(a({},e,{basicUnitQuantity:n,price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4)}))}),t=t.setIn(["StockBuildUpTemp","stockCardList"],(0,r.fromJS)(d)).setIn(["StockBuildUpTemp","stockCardOtherList"],(0,r.fromJS)(f)).setIn(["StockBuildUpTemp","oriStockCardList"],(0,r.fromJS)(m)).setIn(["StockBuildUpTemp","oriStockCardOtherList"],(0,r.fromJS)(g))):(d=n.receivedData.jrOri.stockCardList&&n.receivedData.jrOri.stockCardList.map(function(e,t){return a({},e,{materialList:e.childCardList&&e.childCardList.map(function(n){m.push(t+"+"+e.cardUuid+"+"+e.warehouseCardUuid);var r=1;return n.unit&&(n.unit.unitUuid===n.unitUuid?r=n.unit.basicUnitQuantity?n.unit.basicUnitQuantity:1:n.unit.unitList&&n.unit.unitList.map(function(e){e.uuid===n.unitUuid&&(r=e.basicUnitQuantity?e.basicUnitQuantity:1)})),a({},n,{materialUuid:n.cardUuid,isOpenQuantity:n.isOpenedQuantity,basicUnitQuantity:r})})||[],uuid:e.cardUuid,productUuid:e.cardUuid,curQuantity:e.quantity})})||[],t=t.setIn(["StockBuildUpTemp","assemblySheet"],(0,r.fromJS)(d)).setIn(["StockBuildUpTemp","oriStockCardList"],(0,r.fromJS)(m))),t=t.setIn(["StockBuildUpTemp","oriUuid"],s.get("oriUuid")).setIn(["StockBuildUpTemp","jrUuid"],s.get("jrUuid")).setIn(["StockBuildUpTemp","jrIndex"],s.get("jrIndex")).setIn(["StockBuildUpTemp","oriState"],s.get("oriState")).setIn(["StockBuildUpTemp","beCertificate"],s.get("beCertificate")).setIn(["StockBuildUpTemp","enclosureList"],c).setIn(["StockBuildUpTemp","categoryUuid"],n.receivedData.category.uuid).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))}else t=t.setIn(["StockBuildUpTemp","oriUuid"],"").setIn(["StockBuildUpTemp","oriState"],s.get("oriState")).setIn(["StockBuildUpTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["stockCardOtherList","stockCardList"],(0,r.fromJS)([])).setIn(["StockBuildUpTemp","oriStockCardList"],(0,r.fromJS)([])).setIn(["StockBuildUpTemp","oriStockCardOtherList"],(0,r.fromJS)([]));return t}),c(e,o.STOCK_INTO_PROJECT_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,o=l.get("StockIntoProjectTemp").toJS(),s=(0,r.fromJS)(a({},o,n.receivedData.category,n.receivedData.jrOri));if(t=l.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["StockIntoProjectTemp","oriAbstract"],s.get("oriAbstract")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName),"modify"===n.insertOrModify||n.disabledChange){var u=[],c=[];n.receivedData.jrOri.stockCardList&&n.receivedData.jrOri.stockCardList.map(function(e,t){c.push(e.cardUuid+"+"+e.warehouseCardUuid),u.push(a({},e,{price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4)}))});var d=s.get("enclosureList")?s.get("enclosureList"):(0,r.fromJS)([]);t=t.setIn(["StockIntoProjectTemp","oriUuid"],s.get("oriUuid")).setIn(["StockIntoProjectTemp","jrUuid"],s.get("jrUuid")).setIn(["StockIntoProjectTemp","jrIndex"],s.get("jrIndex")).setIn(["StockIntoProjectTemp","oriState"],s.get("oriState")).setIn(["StockIntoProjectTemp","beCertificate"],s.get("beCertificate")).setIn(["StockIntoProjectTemp","enclosureList"],d).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["StockIntoProjectTemp","stockCardList"],(0,r.fromJS)(u)).setIn(["StockIntoProjectTemp","oriStockCardList"],(0,r.fromJS)(c)).setIn(["StockIntoProjectTemp","projectCard"],(0,r.fromJS)(n.receivedData.jrOri.projectCardList[0]))}else t=t.setIn(["StockIntoProjectTemp","oriUuid"],"").setIn(["StockIntoProjectTemp","oriState"],s.get("oriState")).setIn(["StockIntoProjectTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["stockCardOtherList","stockCardList"],(0,r.fromJS)([])).setIn(["StockIntoProjectTemp","oriStockCardList"],(0,r.fromJS)([])).setIn(["StockIntoProjectTemp","oriStockCardOtherList"],(0,r.fromJS)([]));return t}),c(e,o.PROJECT_CARROVER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,o=l.get("ProjectCarryoverTemp").toJS(),u=(0,r.fromJS)(a({},o,n.receivedData.category,n.receivedData.jrOri));if(t=l.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["ProjectCarryoverTemp","oriAbstract"],u.get("oriAbstract")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName),"modify"===n.insertOrModify||n.disabledChange){var c=[],d=[];n.receivedData.jrOri.stockCardList&&n.receivedData.jrOri.stockCardList.map(function(e,t){d.push(e.cardUuid+"+"+e.warehouseCardUuid),c.push(a({},e,{price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4)}))});var f=u.get("enclosureList")?u.get("enclosureList"):(0,r.fromJS)([]);"STATE_XMJZ_XMJQ"===u.get("oriState")&&(t=t.setIn(["ProjectCarryoverTemp","carryoverList"],u.get("pendingStrongList"))),t=t.setIn(["ProjectCarryoverTemp","oriUuid"],u.get("oriUuid")).setIn(["ProjectCarryoverTemp","jrUuid"],u.get("jrUuid")).setIn(["ProjectCarryoverTemp","jrIndex"],u.get("jrIndex")).setIn(["ProjectCarryoverTemp","oriState"],u.get("oriState")).setIn(["ProjectCarryoverTemp","beCertificate"],u.get("beCertificate")).setIn(["ProjectCarryoverTemp","allHappenAmount"],u.get("allHappenAmount")).setIn(["ProjectCarryoverTemp","allStoreAmount"],u.get("allStoreAmount")).setIn(["ProjectCarryoverTemp","enclosureList"],f).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["ProjectCarryoverTemp","stockCardList"],(0,r.fromJS)(c)).setIn(["ProjectCarryoverTemp","oriStockCardList"],(0,r.fromJS)(d)).setIn(["ProjectCarryoverTemp","projectCard"],(0,r.fromJS)(n.receivedData.jrOri.projectCardList[0])).setIn(["ProjectCarryoverTemp","receiveAmount"],(0,r.fromJS)(n.receivedData.jrOri.amount)).setIn(["ProjectCarryoverTemp","currentAmount"],(0,r.fromJS)(n.receivedData.jrOri.currentAmount)).setIn(["ProjectCarryoverTemp","cardPages"],Math.ceil(u.get("pendingStrongList").size/s.EDIT_RUNNING_CHOOSE_TABLE)).setIn(["ProjectCarryoverTemp","currentCardPage"],1).setIn(["ProjectCarryoverTemp","pageSize"],s.EDIT_RUNNING_CHOOSE_TABLE).setIn(["ProjectCarryoverTemp","totalNumber"],u.get("pendingStrongList").size)}else t=t.setIn(["ProjectCarryoverTemp","oriUuid"],"").setIn(["ProjectCarryoverTemp","oriState"],u.get("oriState")).setIn(["ProjectCarryoverTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["stockCardOtherList","stockCardList"],(0,r.fromJS)([])).setIn(["ProjectCarryoverTemp","oriStockCardList"],(0,r.fromJS)([])).setIn(["ProjectCarryoverTemp","oriStockCardOtherList"],(0,r.fromJS)([]));return t}),c(e,o.XMJZ_GET_CARRYOVER_LIST,function(){return t=t.setIn(["ProjectCarryoverTemp","carryoverList"],(0,r.fromJS)(n.receivedData.carryoverList)).setIn(["ProjectCarryoverTemp","allHappenAmount"],(0,r.fromJS)(n.receivedData.allHappenAmount)).setIn(["ProjectCarryoverTemp","allStoreAmount"],(0,r.fromJS)(n.receivedData.allStoreAmount)),"XZ_CONSTRUCTION"===n.projectProperty&&(t=t.setIn(["ProjectCarryoverTemp","cardPages"],Math.ceil(n.receivedData.carryoverList.length/s.EDIT_RUNNING_CHOOSE_TABLE)).setIn(["ProjectCarryoverTemp","currentCardPage"],1).setIn(["ProjectCarryoverTemp","pageSize"],s.EDIT_RUNNING_CHOOSE_TABLE).setIn(["ProjectCarryoverTemp","totalNumber"],n.receivedData.carryoverList.length).setIn(["ProjectCarryoverTemp","receiveAmount"],n.receivedData.allHappenAmount).setIn(["ProjectCarryoverTemp","currentAmount"],n.receivedData.allStoreAmount)),t}),c(e,o.CHANGE_CALCULATE_COMMON_STRING,function(){return n.placeArr&&(t=t.setIn(n.placeArr,n.value)),n.place&&(t=t.set(n.place,n.value)),t}),c(e,o.CHANGE_CALCULATE_ENCLOSURE_LIST,function(){var e=[];return t.getIn([n.place,"enclosureList"]).map(function(t){e.push(t)}),n.imgArr.forEach(function(t){e.push(t)}),t=t.setIn([n.place,"enclosureList"],(0,r.fromJS)(e)).setIn([n.place,"enclosureCountUser"],e.length)}),c(e,o.DELETE_CALCULATE_UPLOAD_FJ_URL,function(){var e=[];return t.getIn([n.place,"needDeleteUrl"]).map(function(t){e.push(t)}),t.getIn([n.place,"enclosureList"]).map(function(a,r){r==n.index&&(e.push(t.getIn([n.place,"enclosureList",r]).set("beDelete",!0)),t=t.deleteIn([n.place,"enclosureList",r]))}),t=t.setIn([n.place,"needDeleteUrl"],(0,r.fromJS)(e)).setIn([n.place,"enclosureCountUser"],t.getIn([n.place,"enclosureList"]).size)}),c(e,o.GET_CAL_LABEL_FETCH,function(){return t=t.setIn([n.setPlace,"label"],(0,r.fromJS)(n.receivedData.data)).set("tagModal",!0)}),c(e,o.CHANGE_CAL_TAG_NAME,function(){return t.getIn([n.setPlace,"enclosureList"]).map(function(e,a){a==n.index&&(t=t.setIn([n.setPlace,"enclosureList",a,"label"],n.value))}),t=t.set("tagModal",!1)}),c(e,o.GET_CALCULATE_DEAL_TYPE_CATEGORY,function(){return t=t.setIn([n.temp,"dealTypeList",0,"childList"],(0,r.fromJS)(n.receivedData[0].childList))}),c(e,o.EDIT_CALCULATE_GAIN_OR_LOSS,function(){var e=n.place,a=n.diff,r=n.deletePlace;return t.setIn(e,a).deleteIn(r,a)}),c(e,o.EDIT_CALCULATE_CQZC_GAIN_OR_LOSS,function(){return t.setIn(n.place,n.diff)}),c(e,o.CLEAR_FILTER_CONDITION,function(){return t.setIn(["SfglTemp","categoryNameAll"],(0,r.fromJS)([])).setIn(["SfglTemp","categoryUuidList"],(0,r.fromJS)([])).setIn(["SfglTemp","categoryNameList"],(0,r.fromJS)([])).setIn(["SfglTemp","chooseWriteOffType"],!0)}),c(e,o.GET_PAYMANAGE_LIST,function(){var e=n.receivedData.pendingManageList,a=n.receivedData.writeOffTypeList,o=n.receivedData.writeOffType?n.receivedData.writeOffType:a.length?a[0]:t.getIn(["SfglTemp","writeOffType"]);if(t=t.setIn(["SfglTemp","detail"],(0,r.fromJS)(e)).setIn(["SfglTemp","cardPages"],n.receivedData.pages).setIn(["SfglTemp","currentCardPage"],n.receivedData.currentPage).setIn(["SfglTemp","debitTotal"],n.receivedData.debitTotal).setIn(["SfglTemp","creditTotal"],n.receivedData.creditTotal).setIn(["SfglTemp","totalNumber"],n.receivedData.totalNumber).setIn(["SfglTemp","condition"],n.condition).setIn(["SfglTemp","writeOffType"],o).setIn(["SfglTemp","beginDate"],n.begin).setIn(["SfglTemp","endDate"],n.end),n.needWriteOffTypeList&&(t=t.setIn(["SfglTemp","writeOffTypeList"],(0,r.fromJS)(a))),n.fromPage){var s=[],u=t.getIn(["views","selectItem"]).toJS();e.map(function(e,t){u.map(function(n){e.uuid===n.uuid&&s.push({index:t,item:n})})}),s.map(function(e){t=t.setIn(["SfglTemp","detail",e.index],(0,r.fromJS)(e.item))})}else t=t.setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])),t=""!==n.receivedData.writeOffType?(t=t.setIn(["SfglTemp","handlingAmount"],0)).setIn(["views","totalAmount"],(0,i.numberCalculate)(n.receivedData.debitTotal,n.receivedData.creditTotal,2,"subtract")):t.setIn(["SfglTemp","handlingAmount"],"").setIn(["views","totalAmount"],0);return t}),c(e,o.ITIT_PAYMANAGE_LIST,function(){return(t=t.setIn(["SfglTemp","detail"],(0,r.fromJS)([])).setIn(["SfglTemp","debitTotal"],0).setIn(["SfglTemp","creditTotal"],0)).setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["views","totalAmount"],0).setIn(["views","selectItem"],(0,r.fromJS)([]))}),c(e,o.INIT_WRITE_OFF_TYPE,function(){var e=t.getIn(["SfglTemp","writeOffTypeList"]);e.size&&e.get(0);return t=t.setIn(["SfglTemp","showDKModal"],!1).setIn(["SfglTemp","chooseWriteOffType"],!1)}),c(e,o.EDITRUNNING_ITEM_CHECKBOX_CHECK,function(){var e=t.getIn(["views","selectList"]),i=t.getIn(["views","selectItem"]);if(n.checked){var o=e.splice(e.findIndex(function(e){return e===n.item.get("uuid")}),1),s=i.filter(function(e){return e.get("uuid")!==n.item.get("uuid")});return t.setIn(["views","selectList"],o).setIn(["views","selectItem"],s)}var u=e.push(n.item.get("uuid")),c=i.push((0,r.fromJS)(a({},n.item.toJS(),{handleAmount:n.item.get("amount")})));return t.setIn(["views","selectList"],u).setIn(["views","selectItem"],(0,r.fromJS)(c))}),c(e,o.EDITRUNNING_ITEM_CHECKBOX_CHECK_ALL,function(){if(n.selectAll){var e=[];n.list.map(function(t){return e.push(t.get("uuid"))});var i=t.getIn(["views","selectList"]).toJS(),o=t.getIn(["views","selectItem"]);return t.setIn(["views","selectList"],(0,r.fromJS)(function(e,t){var n=new Set(e),a=new Set(t),r=[],i=!0,o=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value;a.has(l)||r.push(l)}}catch(e){o=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw s}}return r}(i,e))).setIn(["views","selectItem"],o.filter(function(t){return-1===e.indexOf(t.get("uuid"))}))}var s=n.list,u=t.getIn(["views","selectList"]).toJS(),c=t.getIn(["views","selectItem"]).toJS();return s&&s.size&&s.forEach(function(e,t){-1===u.indexOf(e.get("uuid"))&&(u.push(e.get("uuid")),c.push(a({},e.toJS(),{handleAmount:e.get("amount")})))}),t.setIn(["views","selectList"],(0,r.fromJS)(u)).setIn(["views","selectItem"],(0,r.fromJS)(c))}),c(e,o.COMMON_CHARGE_ITEM_CHECKBOX_SELECT,function(){var e=t.getIn(["flags","selectList"]),a=t.getIn(["flags","selectItem"]);if(n.checked){var i=e.splice(e.findIndex(function(e){return e===n.uuid}),1),o=a.splice(e.findIndex(function(e){return e.uuid===n.uuid}),1);return t.setIn(["flags","selectList"],i).setIn(["flags","selectItem"],(0,r.fromJS)(o))}var s=e.push(n.uuid),u=a.push((0,r.fromJS)({uuid:n.uuid,name:n.name,code:n.code}));return t.setIn(["flags","selectList"],s).setIn(["flags","selectItem"],(0,r.fromJS)(u))}),c(e,o.SAVE_AND_NEW_COMMON_CHARGE,function(){if(n.saveAndNew){var e=l.get("CommonChargeTemp");return t.set("CommonChargeTemp",e).set("enclosureList",(0,r.fromJS)([])).set("label",(0,r.fromJS)([])).set("needDeleteUrl",(0,r.fromJS)([]))}return"insert"===n.insertOrModify&&(t=t.setIn(["commonChargeTemp","oriUuid"],n.oriUuid).setIn(["commonChargeTemp","jrNumber"],n.jrNumber)),t}),c(e,o.GET_CANUSE_WAREHOUSE_CARD_LIST,function(){return t=t.setIn([n.temp,"wareHouseCardList"],(0,r.fromJS)(n.receivedData)).setIn([n.temp,"canUseWarehouse"],(0,r.fromJS)(n.canUseWarehouse))}),c(e,o.CHANGE_CANUSE_STOCK_CARD_LIST,function(){return n.cardPageObj&&(t=t.setIn(["commonCardObj","cardPageObj"],(0,r.fromJS)(n.cardPageObj))),t=t.setIn([n.temp,"allStockCardList"],(0,r.fromJS)(n.receivedData)).setIn([n.temp,"canUseWarehouse"],n.canUseWarehouse).setIn(["commonCardObj","thingsList"],(0,r.fromJS)(n.receivedData))}),c(e,o.CHANGE_CANUSE_WAREHOUSE_CARD_LIST,function(){var e=t.getIn(["StockTemp","chooseWareHouseCardList"]),a=-1;return e.map(function(e,t){e.get("warehouseStatus")===n.warehouseStatus&&(a=t)}),t=t.setIn(["StockTemp","chooseWareHouseCardList",a,"cardUuid"],n.uuid).setIn(["StockTemp","chooseWareHouseCardList",a,"name"],n.name)}),c(e,o.CHANGE_ITEM_CHECKBOX_CHECKED,function(){var e=t.getIn(["commonCardObj","selectList"]),i=t.getIn(["commonCardObj","selectItem"]),o=n.item,s=n.isAssembly?o.productUuid:o.cardUuid?o.cardUuid:o.uuid;if(!n.checked&&-1===e.findIndex(function(e){return e===s})){var u=o.materialList?o.materialList:[],c=u.map(function(e){var t=1;return e.unitList&&e.unitList.map(function(n){n.uuid===e.unitUuid&&(t=n.basicUnitQuantity?n.basicUnitQuantity:1)}),a({},e,{basicUnitQuantity:t})}),l=e.push(s),d=i.push((0,r.fromJS)(a({},o,{index:n.index,uuid:s,allUnit:o.unit?o.unit:"",unitUuid:o.unitUuid?o.unitUuid:o.unit?o.unit.unitList.length?"":o.unit.uuid?o.unit.uuid:"":"",unitName:o.unitName?o.unitName:o.unit?o.unit.unitList.length?"":o.unit.name?o.unit.name:"":"",materialList:c,oriMaterialList:c||[],quantity:o.quantity?o.quantity:"",afterQuantity:o.afterQuantity?o.afterQuantity:""})));return t.setIn(["commonCardObj","selectList"],l).setIn(["commonCardObj","selectItem"],(0,r.fromJS)(d))}if(n.checked){var f=e.splice(e.findIndex(function(e){return e===s}),1),m=i.splice(e.findIndex(function(e){return e===s}),1);return t.setIn(["commonCardObj","selectList"],f).setIn(["commonCardObj","selectItem"],(0,r.fromJS)(m))}return t}),c(e,o.SELECT_EDIT_CBJZ_ITEM_ALL,function(){return t.setIn(["CostTransferTemp","uuidList"],(0,r.fromJS)(n.uuidList)).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(n.selectStockItem)).setIn(["views","selectList"],(0,r.fromJS)(n.selectList)).setIn(["views","selectItem"],n.newSelectItem)}),c(e,o.GET_COST_CARRYOVER_CANUSE_WAREHOUSE_CARD,function(){return t.setIn(["CostTransferTemp","stockCardList",n.index,"warehouseCardName"],n.changeWareHouseCard.wareHouseName).setIn(["CostTransferTemp","stockCardList",n.index,"warehouseCardUuid"],n.changeWareHouseCard.uuid).setIn(["CostTransferTemp","stockCardList",n.index,"uniformUuid"],n.changeWareHouseCard.uniformUuid)}),c(e,o.CLEAR_BALANCETEMP,function(){if("STATE_CHYE_CH"===n.oriState){t=t.setIn(["BalanceTemp","wareHouseList"],(0,r.fromJS)([{canUse:!0,code:"",isUniform:!0,name:"",uniformUuid:"",cardUuid:""}]))}else t=t.setIn(["BalanceTemp","wareHouseList"],(0,r.fromJS)([]));return t.setIn(["BalanceTemp","stockCardList"],(0,r.fromJS)([{}])).setIn(["BalanceTemp","chooseWareHouseCard"],(0,r.fromJS)({cardUuid:"",name:""})).setIn(["BalanceTemp","chooseStockCard"],(0,r.fromJS)({cardUuid:"",name:"",isOpenedQuantity:!1,isUniformPrice:!1}))}),c(e,o.GET_MESSAGE_OF_CATEGORY,function(){return t.setIn(["views","categoryMessage"],(0,r.fromJS)(n.message))}),c(e,o.AFTER_GET_JXSE_STOCK_LIST,function(){var e=t.getIn(["TaxTransferTemp","uuidList"]);if(t=t.setIn([n.temp,n.ListName],(0,r.fromJS)(n.receivedData.result)),"TaxTransferTemp"===n.temp){var a=[],i=[];n.receivedData.result.map(function(t){e.indexOf(t.jrJvUuid)>-1&&(a.push(t.jrJvUuid),i.push({uuid:t.stockCardUuid,amount:t.amount,onlyId:t.jrJvUuid,quantity:t.quantity,unitCardName:t.unitCardName,number:t.number,quantityAmount:t.quantityAmount}))}),t=t.setIn([n.temp,"uuidList"],(0,r.fromJS)(a)).setIn([n.temp,"stockCardUuidList"],(0,r.fromJS)(i))}else t=t.setIn([n.temp,"uuidList"],(0,r.fromJS)([])).setIn([n.temp,"stockCardUuidList"],(0,r.fromJS)([]));return t}),c(e,o.AFTER_CALCULATE_INVENTORY_IMPORT,function(){if(t=n.receivedData.data?t.setIn(["views","iframeload"],!0).setIn(["views","acmessage"],(0,r.fromJS)(n.receivedData.message)).setIn(["views","errorList"],(0,r.fromJS)(n.receivedData.data.errorList)).setIn(["views","importKey"],n.receivedData.data.importKey).setIn(["views","importList"],(0,r.fromJS)(n.receivedData.data.importList)):t.setIn(["views","iframeload"],!0).setIn(["views","showMessageMask"],!1).setIn(["views","acmessage"],(0,r.fromJS)(n.receivedData.message)),"countStockCardList"===n.stockTemp){if(n.receivedData.data.stockList&&n.receivedData.data.stockList.length){var e=[];n.receivedData.data.stockList.forEach(function(t){t.financialInfo&&t.financialInfo.openSerial&&!t.serialList&&(t.quantity=0);var r="BalanceTemp"===n.temp?(0,i.numberCalculate)(t.quantity,t.referenceQuantity,4,"subtract",4):(0,i.numberCalculate)(t.referenceQuantity,t.quantity,4,"subtract",4);e.push(a({},t,{afterQuantity:t.quantity,quantity:r,price:t.referencePrice,amount:(0,i.numberCalculate)(t.referencePrice,r,4,"multiply"),cardUuid:t.inventoryUuid,warehouseCardUuid:t.warehouseUuid,warehouseCardName:t.warehouseName,warehouseCardCode:t.warehouseCode,expirationDate:t.expirationDateString,productionDate:t.productionDateString}))}),t=t.setIn([n.temp,n.stockTemp],(0,r.fromJS)(e))}}else if("assemblySheet"===n.stockTemp){var o=t.getIn(["StockBuildUpTemp","allStockCardList"]),s=[];n.receivedData.data.importList.forEach(function(e){var t=0;s.push(a({},e,{productUuid:e.inventoryUuid,curQuantity:e.quantity,warehouseCardUuid:e.warehouseUuid,warehouseCardName:e.warehouseName,warehouseCardCode:e.warehouseCode,expirationDate:e.expirationDateString,productionDate:e.productionDateString,materialList:e.cardDetailList.map(function(e){e.financialInfo&&e.financialInfo.openSerial&&!e.serialList&&(e.quantity=0);var n=o.find(function(t){return t.get("uuid")===e.inventoryUuid})||(0,r.fromJS)([]),s=0,u=n.get("unit"),c=u.get("unitList")||(0,r.fromJS)([]);if(u)if(e.unitUuid===u.get("uuid"))s=e.referencePrice;else{var l=c&&c.find(function(t){return t.get("uuid")===e.unitUuid}),d=l.get("basicUnitQuantity")||1;s=(0,i.numberCalculate)(e.referencePrice,d,4,"multiply",4)}var f=s>0?s:"";return t=(0,i.numberCalculate)(t,(0,i.numberCalculate)(f,e.quantity,4,"multiply")),a({},e,{quantity:e.quantity,price:f,amount:s>0?(0,i.numberCalculate)(s,e.quantity,4,"multiply"):"",isOpenQuantity:e.isOpenedQuantity,materialUuid:e.cardUuid,cardUuid:e.inventoryUuid,warehouseCardUuid:e.warehouseUuid,warehouseCardName:e.warehouseName,warehouseCardCode:e.warehouseCode,expirationDate:e.expirationDateString,productionDate:e.productionDateString})}),amount:t,price:(0,i.numberCalculate)(t,e.quantity,4,"divide",4)}))}),t=t.setIn([n.temp,n.stockTemp],(0,r.fromJS)(s))}else n.receivedData.data.importList&&n.receivedData.data.importList.length&&(t=t.setIn([n.temp,n.stockTemp],(0,r.fromJS)(n.receivedData.data.importList.map(function(e){return e.financialInfo&&e.financialInfo.openSerial&&!e.serialList&&(e.quantity=0),e.warehouseCardUuid=e.warehouseCardUuid?e.warehouseCardUuid:e.warehouseUuid?e.warehouseUuid:"",e.warehouseCardName=e.warehouseCardName?e.warehouseCardName:e.warehouseName?e.warehouseName:"",e.warehouseCardCode=e.warehouseCardCode?e.warehouseCardCode:e.warehouseCode?e.warehouseCode:"",e.cardUuid=e.inventoryUuid,e.uuid=e.inventoryUuid,e.expirationDate=e.expirationDateString,e.productionDate=e.productionDateString,e}))).setIn([n.temp,"carryoverCardList"],(0,r.fromJS)(n.receivedData.data.importList.map(function(e){return e.financialInfo&&e.financialInfo.openSerial&&!e.serialList&&(e.quantity=0),e.amount="",e.warehouseCardUuid=e.warehouseCardUuid?e.warehouseCardUuid:e.warehouseUuid?e.warehouseUuid:"",e.warehouseCardName=e.warehouseCardName?e.warehouseCardName:e.warehouseName?e.warehouseName:"",e.warehouseCardCode=e.warehouseCardCode?e.warehouseCardCode:e.warehouseCode?e.warehouseCode:"",e.cardUuid=e.inventoryUuid,e.uuid=e.inventoryUuid,e.expirationDate=e.expirationDateString,e.productionDate=e.productionDateString,e}))));return t}),c(e,o.SAVE_CALCULATE_COUNT,function(){return n.needStockCardList&&(t=t.setIn([n.temp,"stockCardList"],(0,r.fromJS)(n.stockCardList))),t=t.setIn([n.temp,"countStockCardList"],(0,r.fromJS)([])).setIn([n.temp,"chooseWareHouseCard"],(0,r.fromJS)(n.chooseWareHouseCard)).setIn(["commonCardObj","selectList"],(0,r.fromJS)([])).setIn(["commonCardObj","selectItem"],(0,r.fromJS)([])).setIn(["views","countInsert"],!0).setIn(["views","pdfInsertFirst"],!0)}),c(e,o.GET_BALANCE_UNIFORM_PRICE,function(){var e=n.receivedData;t=t.setIn([n.temp,n.stockCardTemp,n.selectIndex,"price"],e.price);var o=[];return e.priceList&&e.priceList.length&&e.priceList.map(function(t){var n=t.quantity,r=t.amount,s=(0,i.numberCalculate)((0,i.numberCalculate)(e.price,n,4,"multiply",4),r,4,"subtract");o.push(a({},t,{amount:s,oldAmount:t.amount}))}),t=t.setIn([n.temp,n.stockCardTemp,n.selectIndex,"childList"],o.length?(0,r.fromJS)(o):(0,r.fromJS)([]))}),c(e,o.GET_CANUSE_WAREHOUSE_CARD_CHILD_LIST,function(){var e=t.getIn([n.temp,n.stockCardTemp,n.selectIndex,"price"]),o=[];return n.receivedData.map(function(t){var n=t.quantity,r=t.amount,s=(0,i.numberCalculate)((0,i.numberCalculate)(e,n,4,"multiply",4),r,4,"subtract");o.push(a({},t,{amount:s,oldAmount:t.amount}))}),t=t.setIn([n.temp,n.stockCardTemp,n.selectIndex,"childList"],(0,r.fromJS)(o))}),c(e,o.GET_CANUSE_WAREHOUSE_CARD_CHILD_LIST_FROM_UNIT,function(){var e=n.receivedData,a=t.getIn([n.temp,n.stockCardTemp]),i=[];return e&&e.length&&e.map(function(e){return i.push(e.inventoryUuid)}),a&&a.size&&a.map(function(a,o){if(i.indexOf(a.get("cardUuid"))>-1){var s=i.findIndex(function(e){return e===a.get("cardUuid")});t=t.setIn([n.temp,n.stockCardTemp,o,"childList"],(0,r.fromJS)(e[s].childList)).setIn([n.temp,n.stockCardTemp,o,"price"],(0,r.fromJS)(e[s].price))}}),t}),c(e,o.SELECT_EDIT_CBJZ_ITEM,function(){return t=(t=t.setIn(["views","selectList"],n.newShowLowerList).setIn(["views","selectItem"],n.newSelectItem).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(n.selectStockItem)).setIn(["CostTransferTemp","selectStockUuidList"],(0,r.fromJS)(n.selectStockUuidList))).setIn(["CostTransferTemp","uuidList"],n.uuidList)}),c(e,o.SELECT_EDIT_CBJZ_ITEM_ALL,function(){t.getIn(["CostTransferTemp","stockCardList"]);var e=t.getIn(["CostTransferTemp","costTransferList"]),a=t.getIn(["CostTransferTemp","uuidList"]).toJS(),o=t.getIn(["CostTransferTemp","stockCardUuidList"]),s=[];if(o.map(function(e){return s.push(e.get("onlyId"))}),n.selectAll){var u=t.getIn(["views","selectList"]).toJS(),c=t.getIn(["views","selectItem"]);o=o?o.filter(function(e){if(-1===a.indexOf(e.get("onlyId")))return e}):(0,r.fromJS)([]);var l=[];e.map(function(e){return l.push(e.get("jrJvUuid"))});var d=c.filter(function(e){return-1===a.indexOf(e.get("jrJvUuid"))}),f=[],m=[];return d&&d.size&&d.map(function(e){if(f.indexOf(e.get("stockCardUuid"))>-1){var t=m.findIndex(function(t){return t.cardUuid===e.get("stockCardUuid")});m[t].quantity=(0,i.numberCalculate)(m[t].quantity,e.get("quantity"))}else f.push(e.get("stockCardUuid")),m.push({cardUuid:e.get("stockCardUuid"),quantity:e.get("quantity"),name:e.get("stockCardName"),code:e.get("stockCardCode"),amount:e.get("amount")})}),t.setIn(["CostTransferTemp","uuidList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(m)).setIn(["views","selectList"],(0,r.fromJS)(function(e,t){var n=new Set(e),a=new Set(t),r=[],i=!0,o=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value;a.has(l)||r.push(l)}}catch(e){o=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw s}}return r}(u,a))).setIn(["views","selectItem"],d)}var g=[],p=o.size?o.toJS():[];e.forEach(function(e){g.push(e.get("jrJvUuid")),-1===s.indexOf(e.get("onlyId"))&&p.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid"),quantity:e.get("quantity"),unitCardName:e.get("unitCardName"),number:e.get("number"),quantityAmount:e.get("quantityAmount"),storeNumber:e.get("storeNumber")})});var T=t.getIn(["views","selectList"]).toJS(),_=t.getIn(["views","selectItem"]).toJS();e&&e.size&&e.forEach(function(e,t){-1===T.indexOf(e.get("jrJvUuid"))&&(T.push(e.get("jrJvUuid")),_.push(e.toJS()))});var C=[],S=[];return _&&_.length&&_.map(function(e){if(C.indexOf(e.stockCardUuid)>-1){var t=S.findIndex(function(t){return t.cardUuid===e.stockCardUuid});S[t].quantity=(0,i.numberCalculate)(S[t].quantity,e.quantity)}else C.push(e.stockCardUuid),S.push({cardUuid:e.stockCardUuid,quantity:e.quantity,name:e.stockCardName,code:e.stockCardCode,amount:e.amount})}),t.setIn(["CostTransferTemp","uuidList"],(0,r.fromJS)(g)).setIn(["CostTransferTemp","stockCardUuidList"],(0,r.fromJS)(p)).setIn(["views","selectList"],(0,r.fromJS)(T)).setIn(["views","selectItem"],(0,r.fromJS)(_)).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(S))}),c(e,o.CALCULATE_FROM_SEARCH_JUMP_TO_JZCB,function(){return t.setIn(["views","paymentTypeStr"],"存货核算_存货成本结转")}),c(e,o.CHANGE_STOCKCARD_REFERENCE_PRICE_QUNATITY,function(){n.stockCardList;var e=n.receivedData,i=t.getIn([n.temp+"Temp",n.stockTemp]).toJS(),o=[];return e.map(function(t,n){o.push(a({},i[n],{referencePrice:e[n].price,referenceQuantity:e[n].quantity}))}),t=t.setIn([n.temp+"Temp",n.stockTemp,n.index],(0,r.fromJS)(o))}),c(e,o.JZJZSY_CHANGE_FILTER_MODAL_CHECKED,function(){var e=t.getIn(["JzjzsyTemp","curSelectProjectUuid"]),a=e;return n.isAll?(n.allList.map(function(e,t){a=n.checked?a.splice(a.findIndex(function(t){return t===e.get("cardUuid")}),1):-1===a.indexOf(e.get("cardUuid"))?a.push(e.get("cardUuid")):a}),t=t.setIn(["JzjzsyTemp","curSelectProjectUuid"],a)):(a=n.checked?a.splice(e.findIndex(function(e){return e===n.uuid}),1):-1===a.indexOf(n.uuid)?e.push(n.uuid):e,t.setIn(["JzjzsyTemp","curSelectProjectUuid"],a))}),e)[n.type]||function(){return t})()};var r=n(18),i=n(22),o=u(n(183)),s=u(n(27));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(0,r.fromJS)({views:{selectI:0,dealType:"",projectList:[],projectRange:[],propertyCostList:[],dealCategory:[],beProject:!1,costStockList:[],selectList:[],indexList:[],totalAmount:0,SwitchUuidList:[],oriUuid:"",modalName:"",selectItem:[],chooseNumber:"-1",encodeType:"",saveWay:!1,jrIndex:"",categoryMessage:{beProject:!1,usedProject:!1,propertyCostList:[]},paymentTypeStr:"内部转账",importList:[],errorList:[],stockTitleName:"存货",warehouseTreeList:[],countInsert:!0,pdfInsertFirst:!0,isCount:!1,singleUrl:"",hasNumber:!0,isProduct:!1,isAssembly:!1},CostTransferTemp:{uuidList:[],dealTypeName:"",stockCardUuidList:[],categoryUuid:"",dealTypeUuid:"",costStockList:[],carryoverCategory:[],oriState:"STATE_YYSR_XS",oriAbstract:"销售存货结转成本",carryoverAmount:"",categoryName:"",costTransferList:[],canModifyList:[],stockList:[],stockCardList:[{}],categoryNameAll:[],cardUuid:"",runningCategory:[{childList:[]}],beProject:!1,usedProject:!0,projectCard:[{cardUuid:"",name:"",code:""}],canUseWarehouse:!1,propertyCost:"",wareHouseCardList:[],cardPages:1,currentCardPage:1,modifycurrentPage:1,pageSize:20,totalNumber:1,categoryUuidList:[],storeUuidList:[],condition:"",warehouseOptionList:[],wareHouseNameAll:[],wareHouseNameList:[],stockNameAll:[],stockNameList:[],stockUuidList:[],countStockCardList:[],chooseWareHouseCard:{cardUuid:"",name:"全部",isUniform:!1},oldChooseWareHouseCard:[],countWarehouseList:[],selectStockItem:[],selectStockUuidList:[]},InvoiceAuthTemp:{oriUuid:"",uuidList:[],amount:"",billAuthType:"BILL_AUTH_TYPE_CG",oriAbstract:"增值税专用发票认证",oriState:"STATE_FPRZ_CG",categoryUuid:"",invoiceAuthList:[]},InvoicingTemp:{oriUuid:"",uuidList:[],amount:"",billMakeOutType:"BILL_MAKE_OUT_TYPE_XS",oriAbstract:"收入开具发票",oriState:"STATE_KJFP_XS",categoryUuid:"",invoicingList:[],isInvoicingAmount:!0},TransferOutTemp:{uuidList:[],turnOutBusinessUuid:"",oriUuid:"",oriState:"STATE_ZCWJZZS",oriAbstract:"转出未交增值税",handleMonth:"",transferOutObj:{jrJvVatDtoList:[],inputAmount:"",inputCount:"",outputAmount:"",outputCount:""}},InternalTransferTemp:{oriUuid:"",oriState:"STATE_ZZ",oriAbstract:"内部转账",amount:"",categoryType:"",categoryUuid:"",fromAccountUuid:"",toAccountUuid:"",accountChildList:[],poundage:{needPoundage:!1},poundageCurrentCardList:[],poundageProjectCardList:[],accountProjectRange:[],accountContactsRange:[],accountContactsRangeList:[],accountProjectList:[],chooseFirstWay:!0,poundageRate:""},DepreciationTemp:{oriUuid:"",oriState:"STATE_CQZC_ZJTX",oriAbstract:"资产折旧摊销",amount:"",categoryType:"",categoryUuid:"",assetType:"XZ_ZJTX",dealTypeList:[{childList:[]}],usedProject:!0,projectCard:{name:"",code:"",cardUuid:"",amount:""},propertyCost:""},CommonChargeTemp:{projectCardList:[],paymentList:[],oriAbstract:"项目分摊",oriState:"STATE_GGFYFT",projectList:[],propertyCostName:""},CqzcTemp:{uuidList:[],projectRange:[],projectList:[],dealTypeList:[{childList:[]}],assets:{depreciationAmount:"",originalAssetsAmount:""},projectCard:[{cardUuid:"",name:"",code:""}],oriAbstract:"长期资产处置损益",oriState:"STATE_CQZC_JZSY",businessList:[],usedProject:!0,categoryName:"",diffAmount:""},JzjzsyTemp:{oriState:"STATE_XMJZ_XMJQ",amount:"",oriAbstract:"结转本期损益",pendingProfitAndLossCarryoverList:[],cardPages:1,currentPage:1,pageSize:20,chooseProjectCard:[],curSelectProjectUuid:[],projectCardList:[],chooseJrCategoryCard:[],curSelectJrCategoryUuid:[],jrCategoryList:[],modalName:""},SfglTemp:{isModeRunning:!1,paymentList:[],detail:[],debitTotal:0,creditTotal:0,runningIndex:0,categoryList:[{uuid:"",name:"",childList:[]}],handlingAmount:"",condition:"",managerCategoryList:[],oriUuid:"",oriAbstract:"核销账款",contactsCardRange:{name:"",code:""},stockCardList:{name:"",code:""},categoryUuid:"",categoryName:"",categoryUuidList:[],categoryNameList:[""],categoryNameAll:[],cardUuidList:[],cardNameList:[""],cardNameAll:[],handleTypeCard:!1,cardUuid:"",usedCard:{code:"",name:""},beMoed:!1,moedAmount:"",cardPages:1,currentCardPage:1,modifycurrentPage:1,pageSize:20,totalNumber:1,needUsedPoundage:!1,poundageCurrentCardList:[],poundageProjectCardList:[],accountProjectRange:[],accountContactsRange:[],accountContactsRangeList:[],accountProjectList:[],poundage:{needPoundage:!1},writeOffType:"",writeOffTypeList:[],showDKModal:!1,chooseWriteOffType:!1,unAutomatic:!1,oriState:"",oldSelectItem:[],beginDate:"",endDate:"",usedAccounts:!1,accounts:[{},{}]},StockTemp:{oriState:"STATE_CHDB",projectCardList:[],paymentList:[],oriAbstract:"存货调拨",stockCardList:[{}],stockCardUuidList:[],wareHouseCardList:[],chooseWareHouseCardList:[{cardUuid:"",name:"",warehouseStatus:"WAREHOUSE_STATUS_FROM"},{cardUuid:"",name:"",warehouseStatus:"WAREHOUSE_STATUS_TO"}],allStockCardList:[]},BalanceTemp:{oriState:"STATE_CHYE_CK",projectCardList:[],paymentList:[],oriAbstract:"存货价值调整",canUseWarehouse:!1,stockCardList:[{}],wareHouseList:[],oriStockList:[],oriWareHouseList:[],stockCardUuidList:[],wareHouseCardUuidList:[],wareHouseCardList:[],chooseWareHouseCard:{cardUuid:"",name:"全部",isUniform:!1},chooseStockCard:{cardUuid:"",name:"",isOpenedQuantity:!1,isUniformPrice:!1},allStockCardList:[],oriStockCardList:[],oriWarehouseCardList:[],countStockCardList:[],warehouseSelectedKeys:[],countWarehouseList:[]},TaxTransferTemp:{uuidList:[],dealTypeName:"",propertyCarryover:"",stockCardUuidList:[],categoryUuid:"",oriState:"STATE_JXSEZC_FS",oriDate:(0,i.formatDate)(),oriAbstract:"进项税额转出",carryoverAmount:"",categoryName:"",taxTransferList:[],canModifyList:[],stockList:[],stockCardList:[{code:"",name:"",amount:"",cardUuid:"",warehouseCardUuid:""}],cardUuid:"",runningCategory:[{childList:[]}],wareHouseCardList:[],projectCard:{},usedProject:!0},StockBuildUpTemp:{oriDate:(0,i.formatDate)().slice(0,10),oriState:"STATE_CHZZ_ZZCX",projectCardList:[],paymentList:[],oriAbstract:"存货组装",stockCardList:[{}],stockCardOtherList:[{}],wareHouseCardList:[{}],stockCardUuidList:[],allStockCardList:[],allWareHouseCardList:[],oriStockCardList:[],oriStockCardOtherList:[],curItemIsAvailable:!0,assemblySheet:[],assemblyNumber:""},StockIntoProjectTemp:{oriState:"STATE_CHTRXM",projectCardList:[],paymentList:[],oriAbstract:"存货投入使用",stockCardList:[{}],stockCardUuidList:[],wareHouseCardList:[],allStockCardList:[],allWareHouseCardList:[],projectCard:{cardUuid:"",name:"",code:"",projectProperty:""},stockRange:[],categoryTypeObj:{}},ProjectCarryoverTemp:{oriState:"STATE_XMJZ_XMJQ",projectCardList:[],paymentList:[],oriAbstract:"项目结清",stockCardList:[{}],stockCardUuidList:[],wareHouseCardList:[],allStockCardList:[],allWareHouseCardList:[],projectCard:{cardUuid:"",name:"",code:""},carryoverList:[],stockRange:[],categoryTypeObj:{},allHappenAmount:"",allStoreAmount:"",cardPages:1,currentCardPage:1,modifycurrentPage:1,pageSize:20,totalNumber:1},commonCardObj:{memberList:[],thingsList:[],selectItem:[],selectList:[],selectedKeys:["all"+s.TREE_JOIN_STR+"1"],selectThingsList:[],showSingleModal:!1,selectI:"",modalName:"",cardPageObj:{pages:1,currentPage:1,total:1}},vcKey:0})},1401:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleRunningEnclosureChooseStatus=t.deleteEnclosureList=t.setEnclosureUuidList=t.deleteEnclosureLabel=t.insertEnclosureLabel=t.modifyEnclosureLabel=t.setEnclosureLabelValue=t.upLoadRunningEnclosureLabel=t.refreshTagList=t.getEnclosureTagList=t.antiVerifyRunningEnclosure=t.verifyRunningEnclosure=t.getRunningEnclosureSearchData=t.changeRunningEnclosureContent=t.changeRunningEnclosureSearchCodition=t.exportEnclosureList=t.selectAllRunningEncloseureList=t.changeRunningEnclosureSelectList=t.closeRunningEncloseurePreviewModal=t.previewImage=t.getRunningEnclosureData=void 0;var a=u(n(37));n(38);var r=u(n(31)),i=s(n(1459)),o=n(22);s(n(43)),s(n(30)),n(43);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}t.getRunningEnclosureData=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,r.default)("runningEnclosure","POST",JSON.stringify({start:e?"-"===e.substr(4,1)?e:e.substr(0,4)+"-"+e.substr(6,2):"",end:t?"-"===t.substr(4,1)?t:t.substr(0,4)+"-"+t.substr(6,2):"",searchType:"SEARCH_TYPE_ENCLOSURE_NAME",searchContent:""}),function(a){n({type:i.SWITCH_LOADING_MASK}),(0,o.showMessage)(a)&&(n({type:i.SET_ISSUEDATE,issuedate:e,endissuedate:t}),n({type:i.SET_INITIAL_DATA,payload:a.data}))})}},t.previewImage=function(e,t){return{type:i.PREVIEW_RUNNING_ENCLOSURE_IMAGE,idx:e,fjIdx:t}},t.closeRunningEncloseurePreviewModal=function(){return{type:i.CLOSE_PREVIEW_RUNNING_ENCLOSURE_IMAGE}},t.changeRunningEnclosureSelectList=function(e){return{type:i.CHANGE_RUNNING_ENCLOSURE_SELECT_LIST,enclosureKey:e}},t.selectAllRunningEncloseureList=function(e){return{type:i.SELECT_ALL_RUNNING_ENCLOSURE_LIST,selectedAll:e}},t.exportEnclosureList=function(e,t,n,a){return function(n){var i=e.toJS(),s=[],u=function(e){var n=Number(i[e].split("-")[0]);t.forEach(function(e,t){if(e.jrIndex===n){var a={jrIndex:e.jrIndex,period:e.period,enclosureList:[]},r=!1;for(var i in s)if(s[i].jrIndex===a.jrIndex){r=!0;break}r||s.push(a)}})};for(var c in i)u(c);var l=function(e){var n=Number(i[e].split("-")[0]),a=Number(i[e].split("-")[1]);t.forEach(function(e,t){e.jrIndex===n&&e.enclosureList.forEach(function(e,t){if(e.enclosureKey===a){var r={uuid:e.uuid,enclosurePath:e.enclosurePath,fileName:e.fileName,size:e.size};for(var i in s)s[i].jrIndex===n&&s[i].enclosureList.push(r)}})})};for(var c in i)l(c);(0,r.default)("exportEncloseure","POST",JSON.stringify({jrList:s}),function(e){(0,o.showMessage)(e)&&a&&a()})}},t.changeRunningEnclosureSearchCodition=function(e){return function(t){t({type:i.CHANGE_RUNNING_ENCLOSEURE_SEARCH_CONDITION,value:e})}},t.changeRunningEnclosureContent=function(e){return function(t){t({type:i.CHANGE_RUNNING_ENCLOSEURE_SEARCH_CONTENT,value:e})}};var c=t.getRunningEnclosureSearchData=function(e,t,n,a){return function(s){s({type:i.SWITCH_LOADING_MASK}),(0,r.default)("runningEnclosure","POST",JSON.stringify({start:e?"-"===e.substr(4,1)?e:e.substr(0,4)+"-"+e.substr(6,2):"",end:t?"-"===t.substr(4,1)?t:t.substr(0,4)+"-"+t.substr(6,2):"",searchType:n,searchContent:a}),function(t){s({type:i.SWITCH_LOADING_MASK}),(0,o.showMessage)(t)&&s({type:i.SET_RUNNING_ENCLOSURE_SEARCHED_DATA,payload:t.data,issuedate:e})})}},l=(t.verifyRunningEnclosure=function(e,t,n,s,u){return function(l){l({type:i.SWITCH_LOADING_MASK}),(0,r.default)("insertVcList","POST",JSON.stringify({uuidList:[e],action:"QUERY_JR-AUDIT"}),function(e){if(l({type:i.SWITCH_LOADING_MASK}),(0,o.showMessage)(e))if(e.data.result.length){var r=e.data.result.join(",");a.default.error(r)}else a.default.success("成功"),l(c(t,n,s,u))})}},t.antiVerifyRunningEnclosure=function(e,t,n,s,u){return function(l){l({type:i.SWITCH_LOADING_MASK}),(0,r.default)("deleteVcList","POST",JSON.stringify({year:t.substr(0,4),month:"-"===t.substr(4,1)?t.substr(5,2):t.substr(6,2),vcindexlist:[e],action:"QUERY_JR-CANCEL_AUDIT"}),function(e){if(l({type:i.SWITCH_LOADING_MASK}),(0,o.showMessage)(e))if(e.data.failJsonList.length){var r=e.data.text;a.default.error(r)}else a.default.success("成功"),l(c(t,n,s,u))})}},t.getEnclosureTagList=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,r.default)("getEnclosureTagList","GET","",function(a){n({type:i.SWITCH_LOADING_MASK}),(0,o.showMessage)(a)&&(n({type:i.GET_RUNNING_ENCLOSURE_TAG_LIST,data:a.data,enclosureKey:e}),t())})}},t.refreshTagList=function(e,t,n,a){return function(s){s({type:i.SWITCH_LOADING_MASK}),(0,r.default)("getEnclosureTagList","GET","",function(r){s({type:i.SWITCH_LOADING_MASK}),(0,o.showMessage)(r)&&(s({type:i.REFRESH_RUNNING_ENCLOSURE_TAG_LIST,data:r.data}),s(c(e,t,n,a)))})}}),d=t.upLoadRunningEnclosureLabel=function(e,t,n,a,s){return function(u){u({type:i.SWITCH_LOADING_MASK}),(0,r.default)("updateLabel","POST",JSON.stringify(e),function(e){u({type:i.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)&&u(l(t,n,a,s))})}};t.setEnclosureLabelValue=function(e,t){return function(n){n({type:i.SET_RUNNING_ENCLOSEURE_LABEL,value:e,id:t})}},t.modifyEnclosureLabel=function(e,t,n,a,s,u,c){return function(l){l({type:i.SWITCH_LOADING_MASK}),(0,r.default)("modifyEnclosureLabel","POST",JSON.stringify({id:e,label:t}),function(e){l({type:i.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)&&l(d({label:t,enKey:n},a,s,u,c))})}},t.insertEnclosureLabel=function(e,t,n,a,s,u){return function(c){c({type:i.SWITCH_LOADING_MASK}),(0,r.default)("insertNewEnclosureLabel","POST",JSON.stringify({label:e}),function(r){c({type:i.SWITCH_LOADING_MASK}),(0,o.showMessage)(r)&&c(d({label:e,enKey:t},n,a,s,u))})}},t.deleteEnclosureLabel=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,r.default)("deleteEnclosureLabel","POST",JSON.stringify({id:e}),function(e){t({type:i.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)&&t({type:i.REFRESH_RUNNING_ENCLOSURE_TAG_LIST,data:e.data})})}},t.setEnclosureUuidList=function(e){return function(t){t({type:i.SET_ENCLOSURE_UUIDLIST,uuid:e})}},t.deleteEnclosureList=function(){return function(e,t){var n=t().runningEnclosureState.get("issuedate"),a=t().runningEnclosureState.get("endissuedate"),s=t().runningEnclosureState.get("uuidList"),u=t().runningEnclosureState.get("searchCondition"),l=t().runningEnclosureState.get("searchContent");e({type:i.SWITCH_LOADING_MASK}),(0,r.default)("deleteEnclosureList","POST",JSON.stringify({uuidList:s,start:n?"-"===n.substr(4,1)?n:n.substr(0,4)+"-"+n.substr(6,2):"",end:a?"-"===a.substr(4,1)?a:a.substr(0,4)+"-"+a.substr(6,2):""}),function(t){e({type:i.SWITCH_LOADING_MASK}),(0,o.showMessage)(t)&&e(c(n,a,u,l))})}},t.handleRunningEnclosureChooseStatus=function(e){return function(t){t({type:i.HANDLE_RUNNING_ENCLOSURE_CHOOSE_VALUE,value:e})}}},1453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=g(n(47)),i=g(n(14)),o=g(n(37)),s=g(n(89)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(78),n(38),n(88);var c=g(n(1)),l=(n(18),n(17));n(1397);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(30));var d=n(22),f=g(n(1326)),m=g(n(1250));function g(e){return e&&e.__esModule?e:{default:e}}var p=s.default.Group,T=(0,l.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={tagModal:!1,tagValue:"无标签",currentIdx:"",preview:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.dispatch,u=t.permission,l=t.closed,g=t.reviewed,T=t.enclosureList,_=t.label,C=t.enCanUse,S=t.checkMoreFj,I=t.getLabelFetch,y=t.deleteUploadImgUrl,E=t.changeTagName,A=t.uploadEnclosureList,L=t.downloadEnclosure,v=t.type,h=t.uploadKeyJson,O=t.getUploadTokenFetch,N=t.id,b=this.state,R=b.tagValue,M=b.currentIdx,U=b.preview,D=b.tagModal,P=b.page,w=T&&T.filter(function(e){return"TRUE"===e.get("imageOrFile")||"application/pdf"===e.get("mimeType")}),J=!1;!u||l||g||(J=!0);var k=!0;!l&&!g||T.size||(k=!1);return c.default.createElement("div",{className:n,style:{display:k&&C?"":"none"}},c.default.createElement("span",{className:"enclosure-wrap-title",style:{display:J&&T.size<9&&(S?"":"none")}},"附件(最多上传九个)"),c.default.createElement("div",{className:"cxls-enclosure-list-wrap"},(T||[]).map(function(t,n){return c.default.createElement("div",{className:"enclosure-item",key:n},c.default.createElement("div",{className:"enclosure-item-icon",onClick:function(){if("TRUE"===t.get("imageOrFile")||"application/pdf"==t.get("mimeType")){var n=0;w.forEach(function(e,a){t.get("enclosurePath")!==e.get("enclosurePath")||(n=a)}),e.setState({preview:!0,page:n})}else o.default.warn("仅图片及PDF格式支持预览")}},c.default.createElement("img",{src:(0,d.showImg)(t.get("imageOrFile"),t.get("fileName"))})),c.default.createElement("div",{className:"enclosure-item-detail"},c.default.createElement("p",{className:"enclosure-item-filename"},t.get("fileName")),c.default.createElement("span",{className:"enclosure-item-tip"},t.get("size")>=1024?(t.get("size")/1024).toFixed(2)+"M":t.get("size")+"kb"),c.default.createElement("a",{className:"enclosure-item-tip",onClick:function(){return L(t.get("signedUrl"),t.get("fileName"))},href:"javascript:void(0);",style:{display:u?"":"none"}},c.default.createElement(i.default,{type:"download"})),c.default.createElement("span",{className:"enclosure-tag",style:{display:J?"":"none"},onClick:function(){e.setState({currentIdx:n,tagValue:t.get("label"),tagModal:!0}),I()}},"无标签"===t.get("label")?"添加标签":t.get("label"))),c.default.createElement("div",{className:"icon-close",style:{display:J?"":"none"},onClick:function(){y(n)}},c.default.createElement(i.default,{type:"close"})))}),c.default.createElement(f.default,{style:{display:J&&T.size<9&&S?"":"none"},dispatch:a,enclosureList:T,uploadEnclosureList:A,uploadKeyJson:h,getUploadTokenFetch:O,id:N,formPage:"searchRunning"})),c.default.createElement(r.default,{title:"添加标签",visible:D,onOk:function(){E(M,R),e.setState({tagModal:!1})},onCancel:function(){return e.setState({tagModal:!1})}},c.default.createElement(p,{onChange:function(t){return e.setState({tagValue:t.target.value})},value:R},_.map(function(e,t){return c.default.createElement(s.default,{className:"enclosure-radio",key:t,value:e},"无标签"===e?"取消标签":e)}))),c.default.createElement(m.default,{page:P,dispatch:a,preview:U,downloadPermission:u,previewImgArr:w,downloadEnclosure:L,closePreviewModal:function(){return e.setState({preview:!1})},type:v,uploadKeyJson:h}))}}]),t}())||a;t.default=T},1459:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SET_ISSUEDATE="SET_ISSUEDATE",t.SET_INITIAL_DATA="SET_INITIAL_DATA",t.PREVIEW_RUNNING_ENCLOSURE_IMAGE="PREVIEW_RUNNING_ENCLOSURE_IMAGE",t.CLOSE_PREVIEW_RUNNING_ENCLOSURE_IMAGE="CLOSE_PREVIEW_RUNNING_ENCLOSURE_IMAGE",t.CHANGE_RUNNING_ENCLOSURE_SELECT_LIST="CHANGE_RUNNING_ENCLOSURE_SELECT_LIST",t.SELECT_ALL_RUNNING_ENCLOSURE_LIST="SELECT_ALL_RUNNING_ENCLOSURE_LIST",t.GET_EXPORT_ENCLOSURE_LIST="GET_EXPORT_ENCLOSURE_LIST",t.EXPORT_ENCLOSEURE_FILE="EXPORT_ENCLOSEURE_FILE",t.CHANGE_RUNNING_ENCLOSEURE_SEARCH_CONDITION="CHANGE_RUNNING_ENCLOSEURE_SEARCH_CONDITION",t.CHANGE_RUNNING_ENCLOSEURE_SEARCH_CONTENT="CHANGE_RUNNING_ENCLOSEURE_SEARCH_CONTENT",t.GET_RUNNING_ENCLOSURE_SEARCH_DATA="GET_RUNNING_ENCLOSURE_SEARCH_DATA",t.GET_RUNNING_ENCLOSURE_TAG_LIST="GET_RUNNING_ENCLOSURE_TAG_LIST",t.REFRESH_RUNNING_ENCLOSURE_TAG_LIST="REFRESH_RUNNING_ENCLOSURE_TAG_LIST",t.SET_RUNNING_ENCLOSEURE_LABEL="SET_RUNNING_ENCLOSEURE_LABEL",t.INSERT_NEW_ENCLOSURE_LABEL="INSERT_NEW_ENCLOSURE_LABEL",t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.SET_ENCLOSURE_UUIDLIST="SET_ENCLOSURE_UUIDLIST",t.SET_RUNNING_ENCLOSURE_SEARCHED_DATA="SET_RUNNING_ENCLOSURE_SEARCHED_DATA",t.HANDLE_RUNNING_ENCLOSURE_CHOOSE_VALUE="HANDLE_RUNNING_ENCLOSURE_CHOOSE_VALUE"},1570:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=C(n(1234)),i=C(n(129)),o=C(n(45)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1235),n(128),n(55);var u=C(n(1)),c=n(17),l=n(18),d=(C(n(6)),n(56),C(n(1237))),f=_(n(27)),m=C(n(483)),g=(C(n(90)),n(22)),p=(C(n(1325)),n(482)),T=_(n(1304));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}var S=o.default.Option,I=(0,c.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),s(t,[{key:"componentDidMount",value:function(){var e=this.props.accountPoundage.get("categoryUuid"),t=this.props.accountPoundage.get("canUsed");e&&t&&this.props.dispatch(T.getAccountRunningCate(e))}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.accountPoundage,a=e.flags,o=(e.projectList,e.modalTemp),s=o.get("poundageCurrentCardList")||(0,l.fromJS)([]),c=o.get("poundageProjectCardList")||(0,l.fromJS)([]),_=o.get("needUsedPoundage"),C=a.get("accountProjectRange"),I=a.get("accountContactsRange"),y=a.get("accountContactsRangeList"),E=a.get("accountProjectList"),A=(o.getIn(["accounts",0,"accountName"]),o.getIn(["accounts",0,"poundageAmount"])),L=o.getIn(["accounts",0,"accountUuid"]),v=(o.getIn(["accounts",0,"poundage"])||(0,l.fromJS)({})).get("needPoundage"),h=n.get("canUsed");return u.default.createElement("div",{style:{display:v&&L&&h?"":"none"}},u.default.createElement("div",{style:{marginBottom:"10px"}},u.default.createElement("span",null,u.default.createElement(i.default,{style:{width:"auto",fontSize:"12px"},checked:_,onChange:function(e){t(T.changeCxAccountCommonOutString(["modalTemp","needUsedPoundage"],!_))}},"账户手续费")),n.get("poundageNeedCurrent")&&_?u.default.createElement(r.default,{className:"use-unuse-style edit-running-switch",checked:s.size,checkedChildren:"往来",unCheckedChildren:"往来",onChange:function(){s.size?t(T.changeCxAccountCommonOutString(["modalTemp","poundageCurrentCardList"],(0,l.fromJS)([]))):t(T.changeCxAccountCommonOutString(["modalTemp","poundageCurrentCardList"],(0,l.fromJS)([{}])))}}):"",n.get("poundageNeedProject")&&_?u.default.createElement(r.default,{className:"use-unuse-style edit-running-switch",checked:c.size,checkedChildren:"项目",unCheckedChildren:"项目",style:{marginLeft:"10px"},onChange:function(){c.size?t(T.changeCxAccountCommonOutString(["modalTemp","poundageProjectCardList"],(0,l.fromJS)([]))):t(T.changeCxAccountCommonOutString(["modalTemp","poundageProjectCardList"],(0,l.fromJS)([{}])))}}):""),s.size&&_?u.default.createElement("div",{className:"manager-item"},u.default.createElement("label",null,"往来单位："),u.default.createElement(m.default,{combobox:!0,showSearch:!0,onDropdownVisibleChange:function(e){e&&t(T.getAccountContactsCardList(I))},value:(s&&s.getIn([0,"code"])?s.getIn([0,"code"]):"")+" "+(s&&s.getIn([0,"name"])?s.getIn([0,"name"]):""),onChange:function(e){var n=e.split(f.TREE_JOIN_STR),a=n[0],r=n[1],i=n[2];t(T.changeCxAccountCommonOutString(["modalTemp","poundageCurrentCardList",0],(0,l.fromJS)({cardUuid:a,name:i,code:r})))}},y.map(function(e,t){return u.default.createElement(S,{key:e.get("uuid"),value:""+e.get("uuid")+f.TREE_JOIN_STR+e.get("code")+f.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))}))):"",c.size&&_?u.default.createElement("div",{className:"manager-item"},u.default.createElement("label",null,"项目："),u.default.createElement(m.default,{combobox:!0,showSearch:!0,value:(c&&(0,p.projectCodeTest)(c.getIn([0,"code"])))+" "+(c&&c.getIn([0,"name"])?c.getIn([0,"name"]):""),onDropdownVisibleChange:function(e){e&&t(T.getAccountProjectCardList(C))},onChange:function(e){var n=e.split(f.TREE_JOIN_STR),a=n[0],r=n[1],i=n[2];t(T.changeCxAccountCommonOutString(["modalTemp","poundageProjectCardList",0],(0,l.fromJS)({cardUuid:a,name:i,code:r})))}},E.map(function(e,t){return u.default.createElement(S,{key:t,value:""+e.get("uuid")+f.TREE_JOIN_STR+e.get("code")+f.TREE_JOIN_STR+e.get("name")},(0,p.projectCodeTest)(e.get("code"))+" "+e.get("name"))}))):"",_?u.default.createElement("div",{style:{display:"flex"},className:"manager-item"},u.default.createElement("label",null,"支出金额："),u.default.createElement(d.default,{placeholder:"",value:A,onChange:function(e){(0,g.numberTest)(e,function(e){t(T.changeCxAccountCommonOutString(["modalTemp","accounts",0,"poundageAmount"],e))})}})):"")}}]),t}())||a;t.default=I},1571:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=d(n(47)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46);var o=d(n(1)),s=n(17),u=d(n(1453)),c=n(43),l=n(488);function d(e){return e&&e.__esModule?e:{default:e}}n(1397);var f=(0,s.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.lrPermissionInfo,n=e.enclosureList,a=e.label,i=e.closedBy,s=e.reviewedBy,d=e.enCanUse,f=e.checkMoreFj,m=e.uploadKeyJson,g=e.dispatch,p=e.visible,T=e.onCancel,_=e.className,C=e.title,S=e.okText,I=e.onOk,y=e.id;return o.default.createElement(r.default,{visible:p,onCancel:T,className:_,title:C,okText:S,onOk:I},o.default.createElement("div",null,this.props.children,o.default.createElement(u.default,{id:y,type:"ls",className:"cxls-enclosure-wrap",dispatch:g,permission:t.getIn(["edit","permission"]),enclosureList:n,label:a,closed:i,reviewed:s,enCanUse:d,checkMoreFj:f,getUploadTokenFetch:function(){return g(l.searchRunningAllActions.getUploadTokenFetch())},getLabelFetch:function(){return g(l.searchRunningAllActions.getRunningLabelFetch())},deleteUploadImgUrl:function(e){return g(l.searchRunningAllActions.deleteRunningEnclosureUrl(e))},changeTagName:function(e,t){return g(l.searchRunningAllActions.changeRunningTagName(e,t))},downloadEnclosure:function(e,t){return g((0,c.allDownloadEnclosure)(e,t))},uploadEnclosureList:function(e){g(l.searchRunningAllActions.uploadFiles.apply(l.searchRunningAllActions,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)))},uploadKeyJson:m})))}}]),t}())||a;t.default=f},1581:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,n=arguments[1];return((e={},i(e,r.SET_ISSUEDATE,function(){return t.set("issuedate",n.issuedate).set("endissuedate",n.endissuedate).set("selectList",(0,a.fromJS)([])).set("searchContent","").set("uuidList",(0,a.fromJS)([]))}),i(e,r.SET_INITIAL_DATA,function(){return t.set("totalSize",Number(n.payload.totalSize)).set("useSizeByCorp",n.payload.useSizeByCorp).set("useSizeBySob",n.payload.useSizeBySob).set("jsonArray",n.payload.jsonArray).set("selectedAll",!1)}),i(e,r.SET_RUNNING_ENCLOSURE_SEARCHED_DATA,function(){return t.set("totalSize",Number(n.payload.totalSize)).set("useSizeByCorp",n.payload.useSizeByCorp).set("useSizeBySob",n.payload.useSizeBySob).set("jsonArray",n.payload.jsonArray).set("selectedAll",!1).set("selectList",(0,a.fromJS)([])).set("uuidList",(0,a.fromJS)([])).set("issuedate",n.issuedate)}),i(e,r.PREVIEW_RUNNING_ENCLOSURE_IMAGE,function(){var e=[];t.get("jsonArray").forEach(function(t){return t.enclosureList.forEach(function(t){"TRUE"!==t.imageOrFile&&"application/pdf"!=t.mimeType||e.push(t)})});var r=0,i=t.get("jsonArray")[n.idx].enclosureList[n.fjIdx].enclosureKey;return e.forEach(function(e,t){e.enclosureKey!=i||(r=t)}),t=t.setIn(["flags","preview"],!0).set("previewSrcIdx",r).set("previewImgArr",(0,a.fromJS)(e))}),i(e,r.CLOSE_PREVIEW_RUNNING_ENCLOSURE_IMAGE,function(){return t.setIn(["flags","preview"],!1)}),i(e,r.CHANGE_RUNNING_ENCLOSURE_SELECT_LIST,function(){var e=t.get("selectList").toJS(),r=n.enclosureKey;if(e.includes(r)){var i=e.findIndex(function(e,t){return e===r});e.splice(i,1)}else e.push(r);return t.set("selectList",(0,a.fromJS)(e))}),i(e,r.SELECT_ALL_RUNNING_ENCLOSURE_LIST,function(){var e=n.selectedAll,r=[],i=[],o=t.get("jsonArray");if(e)for(var s in o)for(var u in o[s].enclosureList)r.push(o[s].jrIndex+"-"+o[s].enclosureList[u].enclosureKey),i.push(o[s].enclosureList[u].uuid);return t.set("selectList",(0,a.fromJS)(r)).set("selectedAll",e).set("uuidList",(0,a.fromJS)(i))}),i(e,r.CHANGE_RUNNING_ENCLOSEURE_SEARCH_CONTENT,function(){return t.set("searchContent",n.value)}),i(e,r.CHANGE_RUNNING_ENCLOSEURE_SEARCH_CONDITION,function(){return t.set("searchCondition",n.value)}),i(e,r.GET_RUNNING_ENCLOSURE_TAG_LIST,function(){return t.set("tagList",n.data).set("enclosureKey",n.enclosureKey)}),i(e,r.REFRESH_RUNNING_ENCLOSURE_TAG_LIST,function(){return t.set("tagList",n.data).set()}),i(e,r.SET_RUNNING_ENCLOSEURE_LABEL,function(){return t.set("labelValue",n.value).set("tagId",n.id)}),i(e,r.SET_ENCLOSURE_UUIDLIST,function(){var e=t.get("uuidList").toJS(),r=n.uuid;if(e.includes(r)){var i=e.findIndex(function(e,t){return e===r});e.splice(i,1)}else e.push(r);return t.set("uuidList",(0,a.fromJS)(e))}),i(e,r.HANDLE_RUNNING_ENCLOSURE_CHOOSE_VALUE,function(){return t.set("chooseValue",n.value)}),e)[n.type]||function(){return t})()};var a=n(18),r=(n(22),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1459)));function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=(0,a.fromJS)({issuedate:"",endissuedate:"",chooseValue:"MONTH",jsonArray:[],totalSize:1,useSizeBySob:0,useSizeByCorp:0,selectList:[],selectedAll:!1,searchCondition:"SEARCH_TYPE_ENCLOSURE_NAME",searchContent:"",tagList:[],enclosureKey:null,labelValue:"",tagId:"",importresponlist:{failJsonList:[],successJsonList:[]},message:"",needDeleteUrl:[],vcIndexArray:[],needDownLoad:[],previewImgArr:[],previewSrcIdx:0,label:[],currentLabel:"",vcIdx:"",fjIdx:"",updatePath:"",flags:{selectedVcItemArray:[],selectVcAll:!1,maxVoucherId:"0",lastvcindex:"",vcindexSort:1,vcdateSort:1,showMessageMask:!1,iframeload:!1,serchValue:"",preview:!1,labelModal:!1},uuidList:[]})},2464:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=I(n(182)),s=I(n(45)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(181),n(55);var c=I(n(1)),l=I(n(0)),d=n(56),f=n(18);n(2465);var m=n(127),g=(S(n(27)),n(482),I(n(2467))),p=I(n(2468)),T=I(n(1224)),_=S(n(1304)),C=S(n(177));n(43),n(488);function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}s.default.Option;var y=(0,d.connect)(function(e){return e})((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showCardModal:!1,showRunningModal:!1,showPayOrReceive:!1,payList:(0,f.fromJS)([]),receivedList:(0,f.fromJS)([]),showRunningInfoModal:!1,runningInfoModalType:!1,yllsVisible:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentWillMount",value:function(){console.log(new Date)}},{key:"componentDidMount",value:function(){console.log(new Date),this.props.dispatch(_.getPeriodAndBusinessList()),this.props.dispatch(_.changeCxAccountCommonOutString(["flags","inputValue"],"")),this.props.dispatch(_.changeCxAccountCommonOutString(["flags","searchType"],"SEARCH_TYPE_ABSTRACT"))}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.allState!==e.allState||this.props.homeState!==e.homeState||this.props.searchRunningState!==e.searchRunningState||this.state!==t||this.props.searchRunningAllState!==e.searchRunningAllState}},{key:"componentWillReceiveProps",value:function(e){this.props.homeState.get("homeActiveKey")===e.homeState.get("homeActiveKey")&&this.props.homeState.get("pageActive")===e.homeState.get("pageActive")||!0!==this.props.allState.getIn(["views","searchRunningPreviewVisibility"])||this.props.dispatch(C.closePreviewRunning())}},{key:"render",value:function(){var e=this,t=this.props,n=t.allState,a=t.dispatch,r=t.searchRunningState,i=t.homeState,s=t.searchRunningAllState,u=this.state,l=(u.showCardModal,u.showRunningModal,u.showPayOrReceive,u.payList,u.receivedList,u.showRunningInfoModal,u.runningInfoModalType,u.yllsVisible,i.getIn(["permissionInfo","LrAccount"])),d=l.getIn(["edit","permission"]),f=l.getIn(["review","permission"]),_=i.getIn(["permissionInfo","Pz"]).getIn(["edit","permission"]),S=i.getIn(["data","userInfo"]).get("pageController").get("QUERY_VC"),I=i.get("pageList"),y=i.getIn(["views","isSpread"]),E=i.get("panes"),A=i.get("allPanes"),L=r.get("issues"),v=r.get("businessTemp"),h=r.getIn(["flags","inputValue"]),O=r.getIn(["flags","issuedate"]),N=r.getIn(["flags","endissuedate"]),b=r.get("flags"),R=r.getIn(["flags","currentAccount"]),M=r.getIn(["flags","curCategory"]),U=r.getIn(["flags","curAccountUuid"]),D=r.getIn(["flags","selectList"]),P=r.getIn(["flags","selectItem"]),w=r.getIn(["flags","pzSelectAllList"]),J=r.getIn(["flags","currentVcIndex"]),k=r.getIn(["flags","accountName"]),G=r.getIn(["flags","searchType"]),j=r.getIn(["flags","allItemShow"]),H=r.getIn(["orderByList","dateSortType"]),x=r.getIn(["orderByList","indexSortType"]),B=r.getIn(["orderByList","categorySortType"]),F=r.getIn(["orderByList","certificateSortType"]),Y=r.getIn(["orderByList","nameSortType"]),W=n.get("accountList"),K=(r.get("taxRateTemp"),r.getIn(["flags","pzDealNum"])),V=r.getIn(["flags","pzDealStatus"]),z=r.getIn(["flags","pzDealType"]),Z=r.getIn(["flags","orderType"]),X=s.get("enclosureList"),Q=n.get("uploadKeyJson"),q=i.getIn(["permissionInfo","LrAccount"]),$=s.get("label"),ee=!re||re.indexOf("ENCLOSURE_RUN")>-1,te="TRUE"===i.getIn(["data","userInfo","checkMoreFj"]),ne="insert"==z?w:J,ae=ne.size?(100*K/ne.size).toFixed(2):0,re=i.getIn(["data","userInfo","sobInfo","moduleInfo"]),ie=!!re&&re.indexOf("RUNNING_GL")>-1,oe=n.getIn(["views","searchRunningPreviewVisibility"]),se=n.get("accountPoundage");return c.default.createElement(T.default,{type:"search-two",className:"search-running",onClick:function(){oe&&a(C.closePreviewRunning())}},c.default.createElement(g.default,{issues:L,issuedate:O,endissuedate:N,searchType:G,inputValue:h,accountName:k,accountList:W,currentAccount:R,dispatch:a,curCategory:M,curAccountUuid:U,selectList:D,pzSelectAllList:w,newCard:function(){return e.setState({showCardModal:!0})},newRunning:function(){return e.setState({showRunningModal:!0})},payOrReceiveOnClick:function(){return e.setState({showPayOrReceive:!0})},setReceivedList:function(t){return e.setState({receivedList:t})},setPayList:function(t){return e.setState({payList:t})},pageList:I,isSpread:y,editLrAccountPermission:d,reviewLrAccountPermission:f,flags:b,allPanes:A,orderType:Z,selectItem:P}),V?c.default.createElement("div",{className:"cxls-pz-progress"},c.default.createElement("div",{class:"cxls-pz-modal-mask"}),c.default.createElement(o.default,{className:"pz-progress-percentage",type:"circle",percent:ae,width:80})):"",c.default.createElement(m.TableWrap,{className:"table-cxls-wrap",notPosition:!0},c.default.createElement(p.default,{issuedate:O,endissuedate:N,inputValue:h,dateSortType:H,indexSortType:x,categorySortType:B,certificateSortType:F,nameSortType:Y,selectList:D,searchRunningState:r,curAccountUuid:U,dispatch:a,openCardModal:function(){return e.setState({showCardModal:!0})},openRunningModal:function(){return e.setState({showRunningModal:!0})},businessTemp:v,panes:E,accountList:W,editLrAccountPermission:d,reviewLrAccountPermission:f,editPzPermission:_,intelligentStatus:ie,allItemShow:j,orderTyp:Z,accountPoundage:se,lrPermissionInfo:q,enclosureList:X,label:$,enCanUse:ee,uploadKeyJson:Q,checkMoreFj:te,QUERY_VC:S})))}}]),t}(),r.displayName="SearchRunning",r.propTypes={allState:l.default.instanceOf(f.Map),searchRunningState:l.default.instanceOf(f.Map),homeState:l.default.instanceOf(f.Map),dispatch:l.default.func},a=i))||a;t.default=y},2465:function(e,t,n){},2467:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=O(n(47)),i=O(n(61)),o=O(n(176)),s=O(n(32)),u=O(n(100)),c=O(n(14)),l=O(n(174)),d=O(n(45)),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(79),n(175),n(51),n(99),n(78),n(173),n(55);var m=O(n(1)),g=n(17),p=(n(127),n(22),n(18),h(n(30))),T=h(n(27)),_=O(n(1227)),C=O(n(1226)),S=O(n(1269)),I=h(n(60)),y=h(n(43)),E=h(n(103)),A=h(n(1304)),L=h(n(1401)),v=h(n(1314));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function O(e){return e&&e.__esModule?e:{default:e}}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=d.default.Option,R=(0,g.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=N(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={deleteAllModal:!1},N(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),f(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.issuedate,a=t.endissuedate,f=t.inputValue,g=t.searchType,h=(t.accountList,t.accountName,t.currentAccount,t.dispatch),O=(t.newCard,t.newRunning,t.issues),N=(t.curCategory,t.curAccountUuid),R=t.selectList,M=t.pzSelectAllList,U=(t.payOrReceiveOnClick,t.setReceivedList,t.setPayList,t.isSpread),D=t.pageList,P=t.editLrAccountPermission,w=t.reviewLrAccountPermission,J=t.flags,k=t.allPanes,G=t.orderType,j=t.selectItem,H=this.state.deleteAllModal,x={SEARCH_TYPE_ABSTRACT:function(){return"摘要"},SEARCH_TYPE_RUNNING_TYPE:function(){return"类型"},SEARCH_TYPE_AMOUNT:function(){return"金额"},SEARCH_TYPE_CREATE_NAME:function(){return"制单人"},SEARCH_TYPE_CATEGORY_TYPE:function(){return"流水类别"}}[g](),B=J.get("isAccount"),F=J.get("isAsc"),Y=!1,W=!0;j&&j.size&&j.map(function(e){e.get("isClose")||(W=!1)}),W&&(Y=!0);var K=J.get("chooseValue"),V=m.default.createElement(l.default,null,m.default.createElement(l.default.Item,null,m.default.createElement("span",{className:"setting-common-ant-dropdown-menu-item",onClick:function(){h(A.getgetSearchRunningSortFun(n,"1",f,G))}},"按流水号顺次前移补齐断号")),m.default.createElement(l.default.Item,null,m.default.createElement("span",{className:"setting-common-ant-dropdown-menu-item",onClick:function(){h(A.getgetSearchRunningSortFun(n,"2",f,G))}},"按流水日期重新顺次编号")));return m.default.createElement(C.default,null,m.default.createElement("div",{className:"flex-title-left"},U||D.getIn(["Search","pageList"]).size<=1?"":m.default.createElement(_.default,{pageItem:D.get("Search"),onClick:function(e,t,n){h(I.addPageTabPane("SearchPanes",n,n,t)),h(I.addHomeTabpane(e,n,t))}}),m.default.createElement(S.default,{issuedate:n,endissuedate:a,issues:O,chooseValue:K,changeChooseperiodsStatu:function(e){return h(A.changeSearchRunningChooseValue(e))},changePeriodCallback:function(e,t){h(A.getBusinessList(e,t,N,1,G,"","",!1,!0)),h(A.changeCxAccountCommonOutString(["flags","inputValue"],""))}}),m.default.createElement("span",{className:"cxls-serch"},m.default.createElement(d.default,{style:{width:88},className:"cxls-type-choose",defaultValue:"流水类别",value:x,onChange:function(e){h(A.changeCxAccountCommonString("",["flags","searchType"],e))},onSelect:function(e){return h(A.changeCxAccountCommonString("",["flags","searchType"],e))}},[{value:"SEARCH_TYPE_ABSTRACT",key:"摘要"},{value:"SEARCH_TYPE_RUNNING_TYPE",key:"类型"},{value:"SEARCH_TYPE_AMOUNT",key:"金额"},{value:"SEARCH_TYPE_CREATE_NAME",key:"制单人"},{value:"SEARCH_TYPE_CATEGORY_TYPE",key:"流水类别"}].map(function(e,t){return m.default.createElement(b,{key:e.key,value:e.value},e.key)})),f?m.default.createElement(c.default,{className:"normal-search-delete",type:"close-circle",theme:"filled",onClick:function(){h(A.changeCxAccountCommonOutString(["flags","inputValue"],"")),h(A.getBusinessList(n,a,N,"",G,"",F,B))}}):null,m.default.createElement(c.default,{className:"cxpz-serch-icon",type:"search",onClick:function(){h(A.getBusinessList(n,a,N,"",G,f,F,B))}}),m.default.createElement(u.default,{placeholder:"搜索流水",className:"cxls-serch-input",value:f,onChange:function(e){return h(A.changeCxAccountCommonOutString(["flags","inputValue"],e.target.value))},onKeyDown:function(e){e.keyCode==T.ENTER_KEY_CODE&&(h(A.changeCxAccountCommonOutString(["flags","inputValue"],f)),h(A.getBusinessList(n,a,N,1,G,f,F,B)))}}))),m.default.createElement("div",{className:"pcxls-account",style:{display:J.get("isClose")?"block":"none"}},"已结账"),m.default.createElement("div",{className:"flex-title-right"},m.default.createElement(s.default,{type:"ghost",className:"title-right",onClick:function(){sessionStorage.setItem("previousPage","SearchRunning"),h(I.addPageTabPane("SearchPanes","RunningEnclosure","RunningEnclosure","附件管理")),h(I.addHomeTabpane("Search","RunningEnclosure","附件管理")),h(L.getRunningEnclosureData(n,a)),h(L.handleRunningEnclosureChooseStatus(K))}},"附件管理"),m.default.createElement(s.default,{type:"ghost",disabled:Y||!R.size||!w||!J.get("currentVcIndex").size,className:"title-right",onClick:function(){w&&h(A.deleteVcItemFetch("searchRunningBatch","","",J.get("currentVcIndex").toJS(),n,f))}},"反审核"),m.default.createElement(s.default,{type:"ghost",disabled:!R.size||!w||!M.size,className:"title-right",onClick:function(){h(A.runningInsertOrModifyVc("searchRunningBatch",M,"insert",n,f))}},"审核"),m.default.createElement(s.default,{type:"ghost",disabled:!R.size||!w,className:"title-right",onClick:function(){h(y.handlePrintModalVisible(!0)),sessionStorage.setItem("fromPos","searchRunning"),h(v.setPrintString("fromPage","cxls")),h(v.setPrintString("oriUuid",R))}},"打印"),m.default.createElement(s.default,{className:"title-right four-word-btn",type:"ghost",disabled:!P,onClick:function(){k.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})?p.Confirm({message:"是否不保存已有的录入流水的内容，进行新增？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&(h(E.insertRunningFromHomePageAndSearchPage()),h(I.addPageTabPane("EditPanes","EditRunning","EditRunning","录入流水")),h(I.addHomeTabpane("Edit","EditRunning","录入流水")))}}):(h(E.insertRunningFromHomePageAndSearchPage()),h(I.addPageTabPane("EditPanes","EditRunning","EditRunning","录入流水")),h(I.addHomeTabpane("Edit","EditRunning","录入流水")))}},"新增"),m.default.createElement(s.default,{type:"ghost",disabled:Y||!R.size||!P||!M.size,className:"title-right",onClick:function(){h(A.deleteAccountItemCardAndRunning(!0,f,null,"QUERY_JR-DELETE_JR-FULL_DELETE"))}},"删除"),"MONTH"===K||J.get("isClose")?m.default.createElement("span",{className:"title-right title-dropdown"},m.default.createElement(o.default,{overlay:V,disabled:"MONTH"!==K||J.get("isClose"),className:J.get("isClose")?"title-disabled":""},m.default.createElement("span",null,"整理 ",m.default.createElement(c.default,{className:"title-dropdown-icon",type:"down"})))):m.default.createElement(i.default,{title:"按账期查询时，支持批量处理"},m.default.createElement("span",{className:"title-right title-dropdown"},m.default.createElement(o.default,{overlay:V,disabled:"MONTH"!==K||J.get("isClose"),className:J.get("isClose")?"title-disabled":""},m.default.createElement("span",null,"整理 ",m.default.createElement(c.default,{className:"title-dropdown-icon",type:"down"}))))),m.default.createElement(s.default,{type:"ghost",className:"title-right",onClick:function(){h(A.afterModifyAccountAllList(!0,f)),h(y.freshSearchPage("查询流水"))}},"刷新")),m.default.createElement(r.default,{ref:"modal",visible:H,title:"提示",onCancel:function(){return e.setState({deleteAllModal:!1})},footer:[m.default.createElement(s.default,{key:"back",type:"ghost",size:"large",onClick:function(){return e.setState({deleteAllModal:!1})}},"取消"),m.default.createElement(s.default,{key:"submit",type:"primary",size:"large",onClick:function(){e.setState({deleteAllModal:!1}),h(A.deleteVcItemFetch("searchRunningBatch",J.get("currentYear"),J.get("currentMonth"),J.get("currentVcIndex").toJS(),n,f))}},"确定")]},m.default.createElement("p",null,"确定删除凭证吗？")))}}]),t}())||a;t.default=R},2468:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=O(n(61)),i=O(n(37)),o=O(n(1234)),s=O(n(45)),u=O(n(100)),c=O(n(1230)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(79),n(38),n(1235),n(55),n(99),n(1231);var d=O(n(1)),f=n(17),m=n(18),g=n(127),p=O(n(1237)),T=O(n(6)),_=n(22),C=n(482),S=O(n(2469)),I=O(n(2470)),y=O(n(1570)),E=h(n(27)),A=h(n(1304)),L=O(n(1571)),v=n(488);function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function O(e){return e&&e.__esModule?e:{default:e}}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var M=(0,f.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;N(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={manageModal:!1,carryoverModal:!1,invioceModal:!1,defineModal:!1,jzsyModal:!1,grantModal:!1,backModal:!1,takeBackModal:!1,defrayModal:!1,isInvoicingAmount:!0,showSingleJsAmount:""},a.initModal=function(e){var t,n,r;a.setState((r=!1,(n=e)in(t={})?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)),a.props.dispatch(A.changeCxAccountCommonOutString("modalTemp",(0,m.fromJS)({oriDate:(0,_.formatDate)().substr(0,10)}))),a.props.dispatch(v.searchRunningAllActions.clearEnclosureList())},b(a,n)}return R(t,d.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.selectList,l=t.openCardModal,f=t.openRunningModal,h=t.businessTemp,O=t.issuedate,N=t.endissuedate,b=t.curAccountUuid,R=t.panes,M=t.searchRunningState,D=t.dateSortType,P=t.indexSortType,w=t.categorySortType,J=t.certificateSortType,k=t.nameSortType,G=t.inputValue,j=t.accountList,H=t.editLrAccountPermission,x=t.reviewLrAccountPermission,B=t.editPzPermission,F=t.intelligentStatus,Y=t.showDrawer,W=t.allItemShow,K=t.orderType,V=t.accountPoundage,z=t.lrPermissionInfo,Z=t.enclosureList,X=t.label,Q=t.closedBy,q=t.reviewedBy,$=t.enCanUse,ee=t.checkMoreFj,te=t.uploadKeyJson,ne=t.QUERY_VC,ae=this.state,re=ae.manageModal,ie=(ae.carryoverModal,ae.invioceModal),oe=ae.defineModal,se=ae.jzsyModal,ue=ae.grantModal,ce=ae.defrayModal,le=ae.backModal,de=ae.takeBackModal,fe=ae.isInvoicingAmount,me=ae.showSingleJsAmount,ge=!!h.size&&a.size===h.size,pe=M.get("currentPage"),Te=M.get("pageCount"),_e=M.getIn(["flags","isAccount"]),Ce=M.getIn(["flags","isAsc"]),Se=M.getIn(["flags","curAccountUuid"]),Ie=(M.getIn(["flags","debitAmount"]),M.getIn(["flags","creditAmount"]),M.getIn(["flags","openedAmount"]),M.getIn(["flags","endedAmount"]),M.get("flags")),ye=(Ie.get("isClose"),Ie.get("projectList")),Ee=M.get("runningFlowTemp"),Ae=Ee.get("categoryType"),Le=M.get("modalTemp"),ve=(Le.get("stockCardList"),C.categoryTypeAll[Ae]),he=Ee.getIn(["currentCardList",0]),Oe=Ee.get("oriDate"),Ne=Ee.get("magenerType"),be=Ee.get("propertyPay"),Re=M.getIn(["flags","showChildList"]),Me=Le.getIn(["payment","companySocialSecurityAmount"]),Ue=Le.getIn(["payment","companyAccumulationAmount"]);return d.default.createElement(g.TableAll,null,d.default.createElement(S.default,{className:"search-running-table-width search-running-table-title",dispatch:n,curAccountUuid:b,selectAcAll:ge,issuedate:O,endissuedate:N,dateSortType:D,indexSortType:P,categorySortType:w,nameSortType:k,certificateSortType:J,inputValue:G,isAccount:_e,isAsc:Ce,intelligentStatus:F,onClick:function(){return n(A.accountItemCheckboxCheckAll(ge,h))},allItemShow:W,orderType:K}),d.default.createElement(g.TableBody,null,h.map(function(t,r){return d.default.createElement(I.default,{issuedate:O,key:t.get("oriUuid"),item:t,line:r,className:"search-running-table-width search-running-table-body",dispatch:n,selectList:a,openCardModal:l,openRunningModal:f,panes:R,flags:Ie,accountList:j,editLrAccountPermission:H,reviewLrAccountPermission:x,editPzPermission:B,intelligentStatus:F,uuidList:h,showDrawer:Y,inputValue:G,allItemShow:W,parent:e,showChildList:Re,QUERY_VC:ne})})),d.default.createElement(g.TablePagination,{currentPage:pe,pageCount:Te,paginationCallBack:function(e){return n(A.getBusinessList(O,N,Se,e,K,G,""))}}),d.default.createElement(L.default,{id:"modal_1",visible:re,onCancel:function(){e.initModal("manageModal")},className:"single-manager",title:("debit"===Ne?"收款":"付款")+"核销",okText:"保存",dispatch:n,lrPermissionInfo:z,enclosureList:Z,label:X,enCanUse:$,uploadKeyJson:te,checkMoreFj:ee,reviewedBy:q,closedBy:Q,onOk:function(){console.log("modalTemp",Le.toJS()),n(A.insertRunningManagerModal(function(){e.setState({manageModal:!1}),n(v.searchRunningAllActions.clearEnclosureList())},ve))}},d.default.createElement("div",{className:"manager-content"},he?d.default.createElement("div",null,d.default.createElement("label",null,"往来单位："),(he&&he.get("code"))+" "+(he&&he.get("name"))):"",d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"日期："),d.default.createElement(c.default,{allowClear:!1,disabledDate:function(e){return(0,T.default)(Le.getIn(["pendingManageDto","pendingManageList",0,"oriDate"]))>e},value:Le.get("oriDate")?(0,T.default)(Le.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(A.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"摘要："),d.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:Le.get("oriAbstract"),onChange:function(e){n(A.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,("debit"===Ne?"收款":"付款")+"金额："),d.default.createElement(p.default,{value:Le.get("amount"),onChange:function(e){(0,_.numberTest)(e,function(e){n(A.changeCxAccountCommonOutString(["modalTemp","amount"],e))})}})),d.default.createElement(U,{modalTemp:Le,dispatch:n,accountList:j}),"debit"===Ne?d.default.createElement(y.default,{dispatch:n,accountPoundage:V,modalTemp:Le,flags:Ie}):"")),d.default.createElement(L.default,{id:"modal_2",visible:ue,onCancel:function(){e.initModal("grantModal")},className:"single-manager",title:"debit"===Ne?"收款核销":"付款核销",okText:"保存",dispatch:n,lrPermissionInfo:z,enclosureList:Z,label:X,enCanUse:$,uploadKeyJson:te,checkMoreFj:ee,reviewedBy:q,closedBy:Q,onOk:function(){n(A.insertCommonModal(function(){return e.setState({grantModal:!1})},ve,"","insertJrPayment"))}},d.default.createElement("div",{className:"manager-content"},he?d.default.createElement("div",null,d.default.createElement("label",null,"往来单位："),(he&&he.get("code"))+" "+(he&&he.get("name"))):"",d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"日期："),d.default.createElement(c.default,{allowClear:!1,disabledDate:function(e){return(0,T.default)(Le.getIn(["pendingManageDto","pendingManageList",0,"oriDate"])||Oe)>e},value:Le.get("oriDate")?(0,T.default)(Le.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(A.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"摘要："),d.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:Le.get("oriAbstract"),onChange:function(e){n(A.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"debit"===Ne?"收款金额：":"付款金额："),d.default.createElement(p.default,{value:Le.get("amount"),onChange:function(e){(0,_.numberTest)(e,function(e){n(A.changeCxAccountCommonOutString(["modalTemp","amount"],e)),n(A.changeCxAccountCommonOutString(["modalTemp","payment","actualAmount"],e))})}})),d.default.createElement(U,{modalTemp:Le,dispatch:n,accountList:j}),"debit"===Ne?d.default.createElement(y.default,{dispatch:n,accountPoundage:V,modalTemp:Le,flags:Ie}):"")),d.default.createElement(L.default,{id:"modal_3",visible:ce,onCancel:function(){e.initModal("defrayModal")},className:"single-manager",title:"debit"===Ne?"收款核销":"付款核销",okText:"保存",dispatch:n,lrPermissionInfo:z,enclosureList:Z,label:X,enCanUse:$,uploadKeyJson:te,checkMoreFj:ee,reviewedBy:q,closedBy:Q,onOk:function(){n(A.insertCommonModal(function(){return e.setState({defrayModal:!1})},ve,"","acTax"===ve?"insertJrTax":"insertJrPayment"))}},d.default.createElement("div",{className:"manager-content"},he?d.default.createElement("div",null,d.default.createElement("label",null,"往来单位："),(he&&he.get("code"))+" "+(he&&he.get("name"))):"",d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"日期："),d.default.createElement(c.default,{allowClear:!1,disabledDate:function(e){return(0,T.default)(Le.getIn(["pendingManageDto","pendingManageList",0,"oriDate"])||Oe)>e},value:Le.get("oriDate")?(0,T.default)(Le.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(A.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"摘要："),d.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:Le.get("oriAbstract"),onChange:function(e){n(A.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"debit"===Ne?"收款金额：":"付款金额："),d.default.createElement(p.default,{value:"acTax"===ve?Le.get("amount"):Le.getIn(["payment","actualAmount"]),onChange:function(e){(0,_.numberTest)(e,function(e){n(A.changeCxAccountCommonOutString(["modalTemp","payment","actualAmount"],e)),n("acTax"===ve?A.changeCxAccountCommonOutString(["modalTemp","amount"],e):"SX_ZFGJJ"===be?A.changeCxAccountCommonOutString(["modalTemp","payment","companyAccumulationAmount"],e):A.changeCxAccountCommonOutString(["modalTemp","payment","companySocialSecurityAmount"],e))})}})),d.default.createElement(U,{modalTemp:Le,dispatch:n,accountList:j,amount:{SX_SHBX:Me,SX_ZFGJJ:Ue}[[be]]}),"debit"===Ne?d.default.createElement(y.default,{dispatch:n,accountPoundage:V,modalTemp:Le,flags:Ie,amount:{SX_SHBX:Me,SX_ZFGJJ:Ue}[[be]]}):"")),d.default.createElement(L.default,{id:"modal_4",visible:de,onCancel:function(){e.initModal("takeBackModal")},className:"single-manager",title:"收款核销",okText:"保存",lrPermissionInfo:z,enclosureList:Z,label:X,enCanUse:$,uploadKeyJson:te,checkMoreFj:ee,reviewedBy:q,closedBy:Q,dispatch:n,onOk:function(){n(A.insertCommonModal(function(){return e.setState({takeBackModal:!1})},ve,"","insertJrTemporaryReceipt"))}},d.default.createElement("div",{className:"manager-content"},he?d.default.createElement("div",null,d.default.createElement("label",null,"往来单位："),(he&&he.get("code"))+" "+(he&&he.get("name"))):"",d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"日期："),d.default.createElement(c.default,{allowClear:!1,disabledDate:function(e){return(0,T.default)(Le.getIn(["pendingManageDto","pendingManageList",0,"oriDate"])||Oe)>e},value:Le.get("oriDate")?(0,T.default)(Le.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(A.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"摘要："),d.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:Le.get("oriAbstract"),onChange:function(e){n(A.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"收款金额："),d.default.createElement(p.default,{value:Le.get("amount"),onChange:function(e){(0,_.numberTest)(e,function(e){n(A.changeCxAccountCommonOutString(["modalTemp","amount"],e))})}})),d.default.createElement(U,{modalTemp:Le,dispatch:n,accountList:j}),d.default.createElement(y.default,{dispatch:n,accountPoundage:V,modalTemp:Le,flags:Ie}))),d.default.createElement(L.default,{id:"modal_5",visible:le,onCancel:function(){e.initModal("backModal")},className:"single-manager",title:"付款核销",okText:"保存",lrPermissionInfo:z,enclosureList:Z,label:X,enCanUse:$,uploadKeyJson:te,checkMoreFj:ee,reviewedBy:q,closedBy:Q,dispatch:n,onOk:function(){n(A.insertCommonModal(function(){return e.setState({backModal:!1})},ve,"","insertJrTemporaryPay"))}},d.default.createElement("div",{className:"manager-content"},he?d.default.createElement("div",null,d.default.createElement("label",null,"往来单位："),(he&&he.get("code"))+" "+(he&&he.get("name"))):"",d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"日期："),d.default.createElement(c.default,{allowClear:!1,disabledDate:function(e){return(0,T.default)(Le.getIn(["pendingManageDto","pendingManageList",0,"oriDate"])||Oe)>e},value:Le.get("oriDate")?(0,T.default)(Le.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(A.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"摘要："),d.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:Le.get("oriAbstract"),onChange:function(e){n(A.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"付款金额："),d.default.createElement(p.default,{value:Le.get("amount"),onChange:function(e){(0,_.numberTest)(e,function(e){n(A.changeCxAccountCommonOutString(["modalTemp","amount"],e))})}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"账户："),d.default.createElement(s.default,{value:Le.getIn(["accounts",0,"accountName"]),onChange:function(e){var t=e.split(E.TREE_JOIN_STR)[0],a=e.split(E.TREE_JOIN_STR)[1];n(A.changeCxAccountCommonOutString(["modalTemp","accounts"],(0,m.fromJS)([{accountName:a,accountUuid:t}])))}},j&&j.getIn([0,"childList"])&&j.getIn([0,"childList"]).map(function(e,t){return d.default.createElement(Option,{key:t,value:""+e.get("uuid")+E.TREE_JOIN_STR+e.get("name")},e.get("name"))}))))),d.default.createElement(L.default,{id:"modal_6",visible:se,onCancel:function(){e.initModal("jzsyModal")},className:"single-manager",title:"处置损益",okText:"保存",lrPermissionInfo:z,enclosureList:Z,label:X,enCanUse:$,uploadKeyJson:te,checkMoreFj:ee,reviewedBy:q,closedBy:Q,dispatch:n,onOk:function(){n(A.insertlrAccountJzsyModal(function(){return e.setState({jzsyModal:!1})}))}},d.default.createElement("div",{className:"manager-content"},d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"日期："),d.default.createElement(c.default,{allowClear:!1,disabledDate:function(e){return(0,T.default)(Le.getIn(["pendingStrongList",0,"oriDate"]))>e},value:Le.get("oriDate")?(0,T.default)(Le.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(A.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}}),Ee.get("beProject")?d.default.createElement(o.default,{className:"use-unuse-style",style:{marginLeft:"10px"},checked:Le.get("usedProject"),checkedChildren:"项目",onChange:function(){n(A.changeCxAccountCommonOutString(["modalTemp","usedProject"],!Le.get("usedProject")))}}):""),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"摘要："),d.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:Le.get("oriAbstract"),onChange:function(e){n(A.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,Le.get("netProfitAmount")>0?"净收益金额：":"净损失金额："),(0,_.formatMoney)(Le.get("netProfitAmount")>0?Le.get("netProfitAmount"):Le.get("lossAmount"))),Le.get("usedProject")?d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"项目："),d.default.createElement(s.default,{combobox:!0,showSearch:!0,value:(Le.getIn(["projectCardList",0,"code"])||"")+" "+(Le.getIn(["projectCardList",0,"name"])||""),onChange:function(e){var t=e.split(E.TREE_JOIN_STR),a=t[0],r=t[1],i=t[2];n(A.changeCxAccountCommonOutString(["modalTemp","projectCardList"],(0,m.fromJS)([{cardUuid:a,code:r,name:i}])))}},ye.map(function(e,t){return d.default.createElement(Option,{key:t,value:""+e.get("uuid")+E.TREE_JOIN_STR+e.get("code")+E.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))}))):"",d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"资产原值："),d.default.createElement(p.default,{value:Le.getIn(["assets","originalAssetsAmount"]),onChange:function(e){(0,_.numberTest)(e,function(e){n(A.changeCxAccountCommonOutString(["modalTemp","assets","originalAssetsAmount"],e)),n(A.calculateGainForJzsy())})}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"累计折旧摊销："),d.default.createElement(p.default,{value:Le.getIn(["assets","depreciationAmount"]),onChange:function(e){(0,_.numberTest)(e,function(e){n(A.changeCxAccountCommonOutString(["modalTemp","assets","depreciationAmount"],e)),n(A.calculateGainForJzsy())})}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"处置金额："),(0,_.formatMoney)(Le.getIn(["pendingStrongList",0,"amount"]))))),d.default.createElement(L.default,{id:"modal_7",visible:ie,onCancel:function(){e.initModal("invioceModal"),e.setState({isInvoicingAmount:!0})},className:"single-manager",title:"开具发票",okText:"保存",lrPermissionInfo:z,enclosureList:Z,label:X,enCanUse:$,uploadKeyJson:te,checkMoreFj:ee,reviewedBy:q,closedBy:Q,dispatch:n,onOk:function(){n(A.insertRunningInvioceModal(function(){return e.setState({invioceModal:!1})}))}},d.default.createElement("div",{className:"manager-content"},d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"日期："),d.default.createElement(c.default,{allowClear:!1,value:Le.get("oriDate")?(0,T.default)(Le.get("oriDate")):"",disabledDate:function(e){return(0,T.default)(Le.getIn(["pendingStrongList",0,"oriDate"]))>e},onChange:function(e){var t=e.format("YYYY-MM-DD");n(A.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"摘要："),d.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:Le.get("oriAbstract"),onChange:function(e){n(A.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),d.default.createElement("div",{className:"manager-item manager-item-kjfp"},d.default.createElement("label",null,fe?"开票税额":"价税合计"),fe?d.default.createElement(g.XfInput,{autoSelect:!0,mode:"amount",placeholder:"",value:Le.get("amount")<0?-Le.get("amount"):Le.get("amount"),onChange:function(e){(0,_.numberTest)(e,function(e){e>Math.abs(Le.getIn(["pendingStrongList",0,"taxAmount"]))?(i.default.info("金额不能大于待开发票税额"),n(A.changeCxAccountCommonOutString(["modalTemp","amount"],""))):n(A.changeCxAccountCommonOutString(["modalTemp","amount"],e))})}}):d.default.createElement(g.XfInput,{autoSelect:!0,mode:"amount",placeholder:"",value:me,onChange:function(t){(0,_.numberTest)(t,function(t){if(t>Math.abs(Le.getIn(["pendingStrongList",0,"oriAmount"])))i.default.info("金额不能大于待处理价税合计"),n(A.changeCxAccountCommonOutString(["modalTemp","amount"],"")),e.setState({showSingleJsAmount:""});else{var a=(0,_.numberCalculate)((0,_.numberCalculate)(t,Le.getIn(["pendingStrongList",0,"taxAmount"]),2,"multiply"),Le.getIn(["pendingStrongList",0,"oriAmount"]),2,"divide");n(A.changeCxAccountCommonOutString(["modalTemp","amount"],a)),e.setState({showSingleJsAmount:t})}})}}),d.default.createElement(r.default,{title:"切换税额计算方式"},d.default.createElement(o.default,{className:"use-unuse-style lend-bg",checked:fe,style:{margin:".1rem 0 0 .2rem"},checkedChildren:"",unCheckedChildren:"",onChange:function(){var t=(0,_.numberCalculate)((0,_.numberCalculate)(Le.get("amount"),Le.getIn(["pendingStrongList",0,"oriAmount"]),2,"multiply"),Le.getIn(["pendingStrongList",0,"taxAmount"]),2,"divide");e.setState({showSingleJsAmount:(0,_.formatMoney)(t),isInvoicingAmount:!fe})}}))),d.default.createElement("div",{className:"manager-item manager-item-kjfp-tips"},d.default.createElement("label",null),fe?d.default.createElement("div",null,d.default.createElement("span",null,"价税合计：",(0,_.numberCalculate)((0,_.numberCalculate)(Le.get("amount"),Le.getIn(["pendingStrongList",0,"oriAmount"]),2,"multiply"),Le.getIn(["pendingStrongList",0,"taxAmount"]),2,"divide"))," (",d.default.createElement("span",null,"待处理价税合计：",Le.getIn(["pendingStrongList",0,"oriAmount"]))," ",d.default.createElement("span",null,"待开票税额：",Le.getIn(["pendingStrongList",0,"taxAmount"])),")"):d.default.createElement("div",null,d.default.createElement("span",null,"开票税额：",(0,_.formatMoney)(Math.abs(Le.get("amount"))))," （ ",d.default.createElement("span",null,"待处理价税合计：",Le.getIn(["pendingStrongList",0,"oriAmount"]))," ",d.default.createElement("span",null,"待开票税额：",Le.getIn(["pendingStrongList",0,"taxAmount"]))," ）")))),d.default.createElement(L.default,{id:"modal_8",visible:oe,onCancel:function(){e.initModal("defineModal")},className:"single-manager",title:"发票认证",okText:"保存",lrPermissionInfo:z,enclosureList:Z,label:X,enCanUse:$,uploadKeyJson:te,checkMoreFj:ee,reviewedBy:q,closedBy:Q,dispatch:n,onOk:function(){n(A.insertRunningInvioceDefineModal(function(){return e.setState({defineModal:!1})}))}},d.default.createElement("div",{className:"manager-content"},d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"日期："),d.default.createElement(c.default,{disabledDate:function(e){return(0,T.default)(Le.getIn(["pendingStrongList",0,"oriDate"]))>e},allowClear:!1,value:Le.get("oriDate")?(0,T.default)(Le.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(A.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"摘要："),d.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:Le.get("oriAbstract"),onChange:function(e){n(A.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"金额："),d.default.createElement(p.default,{value:Le.get("amount")<0?-Le.get("amount"):Le.get("amount"),onChange:function(e){(0,_.numberTest)(e,function(e){e>Math.abs(Le.getIn(["pendingStrongList",0,"taxAmount"]))?(i.default.info("金额不能大于待认证税额"),n(A.changeCxAccountCommonOutString(["modalTemp","amount"],""))):n(A.changeCxAccountCommonOutString(["modalTemp","amount"],e))})}})))))}}]),t}())||a;t.default=M;var U=function(e){function t(){return N(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return R(t,d.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.modalTemp,n=e.dispatch,a=e.accountList,r=this.props.amount||t.get("amount");return d.default.createElement("div",{className:"manager-item"},d.default.createElement("label",null,"账户："),d.default.createElement(s.default,{value:t.getIn(["accounts",0,"accountName"]),onChange:function(e,t){var a=e.split(E.TREE_JOIN_STR)[0],i=e.split(E.TREE_JOIN_STR)[1],o=t.props.poundage,s=o.get("poundage"),u=o.get("poundageRate"),c=Math.abs(r||0)*u/1e3>s&&s>0?s:Math.abs(r||0)*u/1e3;n(A.changeCxAccountCommonOutString(["modalTemp","accounts"],(0,m.fromJS)([{accountName:i,accountUuid:a,poundage:o}]))),n(A.changeCxAccountCommonOutString(["modalTemp","accounts",0,"poundageAmount"],c.toFixed(2)))}},a&&a.getIn([0,"childList"])&&a.getIn([0,"childList"]).map(function(e,t){return d.default.createElement(Option,{key:t,value:""+e.get("uuid")+E.TREE_JOIN_STR+e.get("name"),poundage:(0,m.fromJS)({needPoundage:e.get("needPoundage"),poundage:e.get("poundage"),poundageRate:e.get("poundageRate")})},e.get("name"))})))}}]),t}()},2469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=l(n(129)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(128);var o=l(n(1)),s=n(17),u=(n(18),n(127)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1304));function l(e){return e&&e.__esModule?e:{default:e}}var d=(0,s.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.className,a=e.onClick,i=e.issuedate,s=e.endissuedate,l=e.curAccountUuid,d=e.selectAcAll,f=e.dateSortType,m=e.indexSortType,g=e.categorySortType,p=e.certificateSortType,T=e.nameSortType,_=e.inputValue,C=e.isAccount,S=(e.isAsc,e.allItemShow);e.orderType;return o.default.createElement("div",{className:"table-title-wrap"},o.default.createElement("ul",{className:n?n+" table-title":"table-title"},o.default.createElement("li",{onClick:a},o.default.createElement(r.default,{checked:d})),o.default.createElement("li",{onClick:function(){t(c.getBusinessList(i,s,l,"","SEARCH_ORDER_DATE",_,!f,C))}},o.default.createElement("span",null,"日期"),o.default.createElement("span",{className:"cxls-sort-icon"})),o.default.createElement("li",null,o.default.createElement("div",{onClick:function(){t(c.getBusinessList(i,s,l,"","SEARCH_ORDER_JR_INDEX",_,!m,C))}},o.default.createElement("span",null,"流水号"),o.default.createElement("span",{className:"cxls-sort-icon sort-number"})),o.default.createElement("span",{onClick:function(){t(c.changeSearchRunningAllChildItemShow(!S))}},o.default.createElement(u.XfnIcon,{type:S?"kmyeUp":"kmyeDown",style:{color:"#999"}}))),o.default.createElement("li",{onClick:function(){t(c.getBusinessList(i,s,l,"","SEARCH_ORDER_CATEGORY_TYPE",_,!g,C))}},o.default.createElement("span",null,"流水类别"),o.default.createElement("span",{className:"cxls-sort-icon"})),o.default.createElement("li",null,o.default.createElement("span",null,"摘要")),o.default.createElement("li",null,o.default.createElement("span",null,"类型")),C?o.default.createElement("li",null,o.default.createElement("span",null,"收款金额")):o.default.createElement("li",null,o.default.createElement("span",null,"借方金额")),C?"":o.default.createElement("li",null,o.default.createElement("span",null,"贷方金额")),C?o.default.createElement("li",null,o.default.createElement("span",null,"付款金额")):"",C?o.default.createElement("li",null,o.default.createElement("span",null,"余额")):"",o.default.createElement("li",null,o.default.createElement("span",null,"状态")),o.default.createElement("li",{onClick:function(){t(c.getBusinessList(i,s,l,"","SEARCH_ORDER_CREATE_NAME",_,!T,C))}},o.default.createElement("span",null,"制单人"),o.default.createElement("span",{className:"cxls-sort-icon"})),o.default.createElement("li",{onClick:function(){t(c.getBusinessList(i,s,l,"","SEARCH_ORDER_CERTIFICATE",_,!p,C))}},o.default.createElement("span",null,"审核人"),o.default.createElement("span",{className:"cxls-sort-icon"}))))}}]),t}())||a;t.default=d},2470:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=A(n(14)),i=A(n(176)),o=A(n(174)),s=A(n(61)),u=A(n(129)),c=A(n(32)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78),n(175),n(173),n(79),n(128),n(51);var d=A(n(1)),f=n(17),m=n(18),g=n(127),p=n(22),T=E(n(1276)),_=E(n(43)),C=E(n(1304)),S=E(n(103)),I=E(n(177)),y=E(n(1314));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=(0,f.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=L(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={},L(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.item,a=e.line,l=e.dispatch,f=e.selectList,E=e.issuedate,A=e.flags,L=e.editLrAccountPermission,v=e.reviewLrAccountPermission,h=e.intelligentStatus,O=e.uuidList,N=e.inputValue,b=e.parent,R=e.showChildList,M=e.QUERY_VC,U=A.get("isClose"),D=A.get("isAccount"),P=n.get("oriDate"),w=[],J=void 0,k=void 0;n.get("vcList")&&n.get("vcList").map(function(e,t){w.push({vcIndex:e.get("vcIndex")}),J=e.get("year"),k=e.get("month")});var G=function(e,t,a,r){var i={shouldReturn:"核销",pay:"核销",receive:"核销",makeOut:"开票",auth:"认证",carryover:"结转",grant:"核销",defray:"核销",takeBack:"核销",back:"核销"},o={shouldReturn:"退款",pay:"付款",receive:"收款",makeOut:"开票",auth:"认证",carryover:"结转",grant:r.get("notHandleAmount")<0?"收款":"发放",defray:r.get("notHandleAmount")<0?"收款":"缴纳",takeBack:"收回",back:"退还"};switch(e){case"1":t.push(d.default.createElement("div",{key:"a1"+a,className:"cxls-item-btn-status"},d.default.createElement("span",null,"未"+i[a]),d.default.createElement(c.default,{type:"ghost",disabled:!L,onClick:function(){switch(a){case"shouldReturn":l(C.getBusinessManagerModal(n,r,function(){b.setState({manageModal:!0})},"STATE_YYZC_TG"===r.get("oriState")?"debit":"credit","shouldReturn"));break;case"pay":l(C.getBusinessManagerModal(n,r,function(){b.setState({manageModal:!0})},"credit","pay"));break;case"receive":l(C.getBusinessManagerModal(n,r,function(){b.setState({manageModal:!0})},"debit","receive"));break;case"makeOut":l(C.getBusinessInvioceModal(n,r,function(e){b.setState({invioceModal:!0,showSingleJsAmount:e})}));break;case"auth":l(C.getBusinessDefineModal(n,r,function(){b.setState({defineModal:!0})}));break;case"carryover":l(C.getBusinessJzsyModal(n,r,function(){b.setState({jzsyModal:!0})}));break;case"grant":l(C.getBusinessGrantModal(n,r,function(){b.setState({grantModal:!0})}));break;case"defray":l(C.getBusinessDefrayModal(n,r,function(){b.setState({defrayModal:!0})}));break;case"takeBack":l(C.getBusinessTakeBackModal(n,r,function(){b.setState({takeBackModal:!0})}));break;case"back":l(C.getBusinessBackModal(n,r,function(){b.setState({backModal:!0})}))}}},o[a])));break;case"2":t.push(d.default.createElement("div",{key:"a2"+a,className:"cxls-item-btn-status"},d.default.createElement("span",null,"部分核销"),d.default.createElement(c.default,{type:"ghost",disabled:!L,onClick:function(){switch(a){case"shouldReturn":l(C.getBusinessManagerModal(n,r,function(){b.setState({manageModal:!0})},"STATE_YYZC_TG"===r.get("oriState")?"debit":"credit","shouldReturn"));break;case"pay":l(C.getBusinessManagerModal(n,r,function(){b.setState({manageModal:!0})},"credit","pay"));break;case"receive":l(C.getBusinessManagerModal(n,r,function(){b.setState({manageModal:!0})},"debit","receive"));break;case"makeOut":l(C.getBusinessInvioceModal(n,r,function(){b.setState({invioceModal:!0})}));break;case"auth":l(C.getBusinessDefineModal(n,r,function(){b.setState({defineModal:!0})}));break;case"carryover":l(C.getBusinessJzsyModal(n,r,function(){b.setState({jzsyModal:!0})}));break;case"grant":l(C.getBusinessGrantModal(n,r,function(){b.setState({grantModal:!0})}));break;case"defray":l(C.getBusinessDefrayModal(n,r,function(){b.setState({defrayModal:!0})}));break;case"takeBack":l(C.getBusinessTakeBackModal(n,r,function(){b.setState({takeBackModal:!0})}));break;case"back":l(C.getBusinessBackModal(n,r,function(){b.setState({backModal:!0})}))}}},o[a])));break;case"3":t.push(d.default.createElement("div",{key:"a3"+a,className:"cxls-item-btn-status"},d.default.createElement("span",null,"shouldReturn"===a||"pay"===a||"receive"===a?"全部核销":"已"+i[a])))}},j=function(e){var t=[];return[{key:"receive",value:e.get("receive")},{key:"pay",value:e.get("pay")},{key:"shouldReturn",value:e.get("shouldReturn")},{key:"makeOut",value:e.get("makeOut")},{key:"auth",value:e.get("auth")},{key:"carryover",value:e.get("carryover")},{key:"grant",value:e.get("grant")},{key:"defray",value:e.get("defray")},{key:"takeBack",value:e.get("takeBack")},{key:"back",value:e.get("back")}].forEach(function(n){G(n.value,t,n.key,e)}),{elementList:t}},H=!!f&&f.indexOf(n.get("oriUuid"))>-1,x=n.get("childList"),B=n.get("beOpen"),F=n.get("modelNo")||"",Y="X"===F.charAt(0)||"Y56#0-00-0"===F||"Y57#0-00-0"===F,W=R.indexOf(n.get("oriUuid"))>-1,K=B||W;return d.default.createElement(g.CxpzTableItem,{className:t,line:a+1},d.default.createElement("li",{onClick:function(e){e.stopPropagation(),l(C.accountItemCheckboxCheck(H,n))}},d.default.createElement(u.default,{checked:H})),d.default.createElement(g.TableOver,null,P),d.default.createElement(g.TableOver,{textAlign:"left"},d.default.createElement("span",{className:"account-flowNumber"},d.default.createElement(i.default,{placement:"topCenter",trigger:["contextMenu"],overlay:d.default.createElement(o.default,{className:"cxls-menu-content"},d.default.createElement(o.default.Item,{key:"del",disabled:!L||U||n.get("beCertificate"),onClick:function(){l(C.deleteAccountItemCardAndRunning(!0,N,[n.get("oriUuid")],"QUERY_JR-DELETE_JR"))}},d.default.createElement(s.default,{placement:"right",title:L?U?"结账后不允许该操作":"":"权限不足"},d.default.createElement("span",{className:"setting-common-ant-dropdown-menu-item"},"删除"))),d.default.createElement(o.default.Divider,null),d.default.createElement(o.default.Item,{key:"sh",disabled:!v||U,onClick:function(){n.get("beCertificate")?l(C.deleteVcItemFetch("searchRunning",J,k,w,E,N)):l(C.runningInsertOrModifyVc("searchRunning",(0,m.fromJS)([{oriUuid:n.get("oriUuid"),jrNumber:n.get("jrIndex")}]),"insert",E,N))}},d.default.createElement(s.default,{placement:"right",title:v?U?"结账后不允许该操作":"":"权限不足"},d.default.createElement("span",{className:"setting-common-ant-dropdown-menu-item"},n.get("beCertificate")?"反审核":"审核"))),d.default.createElement(o.default.Item,{key:"insert",disabled:!L||Y,onClick:function(){l(S.getEditSettingInfo()),l(S.initEditRunning()),l(C.getSearchRunningItem(n,"insert",(0,m.fromJS)([]),"","",!0))}},d.default.createElement(s.default,{title:Y?"有关联流水，不可复制":""},d.default.createElement("span",{className:"setting-common-ant-dropdown-menu-item"},"复制"))),d.default.createElement(o.default.Item,{key:"edit",disabled:!L||n.get("beCertificate")&&"STATE_SYJZ_JZSR"!==n.get("oriState")&&"STATE_SYJZ_JZCBFY"!==n.get("oriState")&&"STATE_SYJZ_JZBNLR"!==n.get("oriState"),onClick:function(){l(S.getEditSettingInfo()),l(S.initEditRunning()),l(C.getSearchRunningItem(n,"modify",O))}},d.default.createElement(s.default,{placement:"right",title:L?"":"权限不足"},d.default.createElement("span",{className:"setting-common-ant-dropdown-menu-item"},"修改"))),d.default.createElement(o.default.Item,{key:"insert",disabled:!L,onClick:function(){l(_.handlePrintModalVisible(!0)),sessionStorage.setItem("fromPos","searchRunningPreview"),l(y.setPrintString("fromPage","cxls")),l(y.setPrintString("oriUuid",[n.get("oriUuid")]))}},d.default.createElement("span",{className:"setting-common-ant-dropdown-menu-item"},"打印")))},d.default.createElement("span",{className:"ant-dropdown-link",onClick:function(e){e.stopPropagation(),l(I.getPreviewRunningBusinessFetch(n,"search_cxls",O,function(){l(C.afterModifyAccountAllList())}))}},n.get("jrIndex")+" 号"))),x.size?d.default.createElement(r.default,{type:W?"up":"down",onClick:function(e){e.stopPropagation(),l(C.changeSearchRunningChildItemShow(W,n.get("oriUuid")))},className:"account-show",style:{margin:"3px 5px 0 0",float:"right"}}):null,K&&n.get("vcList")&&n.get("vcList").size&&h&&v?n.get("vcList").map(function(e,t){return d.default.createElement("div",{className:"searchrunning-pz-btn",key:t,style:{display:(0,p.judgePermission)(M).display?"":"none"}},d.default.createElement(g.XfnIcon,{type:"running-pz-show",className:"pz-btn-icon",key:t,onClick:function(){if((0,p.judgePermission)(M).disabled){var a=n.get("vcList").toJS().map(function(e){return e.year+"-"+e.month+"-01_"+e.vcIndex});l(T.getPzVcFetch([e.get("year"),e.get("month")].join("-"),e.get("vcIndex"),t,a)),l(_.showPzBomb(!0,"Cxpz"))}}}))}):null),d.default.createElement("li",null,d.default.createElement("p",{className:"table-item-line"},d.default.createElement(s.default,{placement:"topLeft",title:n.get("categoryMergeName")},n.get("categoryName"))),K?x.map(function(e,t){return W||"货币资金"===e.get("typeMergeName")?d.default.createElement("p",{className:"table-item-line",key:t},d.default.createElement(s.default,{placement:"topLeft",title:e.get("categoryMergeName")},e.get("categoryName"))):null}):null),d.default.createElement("li",null,d.default.createElement("p",{className:"table-item-line"},d.default.createElement(s.default,{placement:"topLeft",title:n.get("oriAbstract")+(n.get("jrJvCardAbstract")?n.get("jrJvCardAbstract"):"")},n.get("oriAbstract")+(n.get("jrJvCardAbstract")?n.get("jrJvCardAbstract"):""))),K?x.map(function(e,t){return W||"货币资金"===e.get("typeMergeName")?d.default.createElement("p",{className:"table-item-line",key:t},d.default.createElement(s.default,{placement:"topLeft",title:e.get("oriAbstract")+(e.get("jrJvCardAbstract")?e.get("jrJvCardAbstract"):"")},e.get("oriAbstract")+(e.get("jrJvCardAbstract")?e.get("jrJvCardAbstract"):""))):null}):null),d.default.createElement("li",null,d.default.createElement("p",{className:"table-item-line"},d.default.createElement(s.default,{placement:"topLeft",title:n.get("typeMergeName")},n.get("jrJvTypeName"))),K?x.map(function(e,t){return W||"货币资金"===e.get("typeMergeName")?d.default.createElement("p",{className:"table-item-line",key:t},d.default.createElement(s.default,{placement:"topLeft",title:e.get("typeMergeName")},e.get("jrJvTypeName"))):null}):null),d.default.createElement("li",null,d.default.createElement("p",{className:"table-item-line-amonut"},null!==n.get("debitAmount")?(0,p.formatMoney)(n.get("debitAmount")):""),K?x.map(function(e,t){return W||"货币资金"===e.get("typeMergeName")?d.default.createElement("p",{className:"table-item-line-amonut",key:t},null!==e.get("debitAmount")?(0,p.formatMoney)(e.get("debitAmount")):""):null}):null),d.default.createElement("li",null,d.default.createElement("p",{className:"table-item-line-amonut"},null!==n.get("creditAmount")?n.get("creditAmount")<0?"-"+(0,p.formatNum)(Math.abs(n.get("creditAmount")).toFixed(2)):(0,p.formatMoney)(n.get("creditAmount")):""),K?x.map(function(e,t){return W||"货币资金"===e.get("typeMergeName")?d.default.createElement("p",{className:"table-item-line-amonut",key:t},null!==e.get("creditAmount")?e.get("creditAmount")<0?"-"+(0,p.formatMoney)(Math.abs(e.get("creditAmount")).toFixed(2)):(0,p.formatMoney)(e.get("creditAmount")):""):null}):null),D?d.default.createElement("li",null,d.default.createElement("p",{className:"table-item-line-amonut"},null!==n.get("endAmount")?n.get("endAmount")<0?"-"+(0,p.formatNum)(Math.abs(n.get("endAmount")).toFixed(2)):(0,p.formatMoney)(n.get("endAmount")):""),K?x.map(function(e,t){return W||"货币资金"===e.get("typeMergeName")?d.default.createElement("p",{className:"table-item-line-amonut",key:t},e.get("endAmount")<0?"-"+(0,p.formatNum)(Math.abs(e.get("endAmount")).toFixed(2)):e.get("endAmount")>0?(0,p.formatNum)(Number(e.get("endAmount")).toFixed(2)):""):null}):null):"",d.default.createElement("li",null,d.default.createElement("p",{className:"table-item-line"},j(n).elementList),K?x.map(function(e,t){return W||"货币资金"===e.get("typeMergeName")?d.default.createElement("p",{className:"table-item-line",key:t},j(e).elementList):null}):null),d.default.createElement(g.TableOver,{textAlign:"left"},n.get("createUserName")),d.default.createElement("li",null,n.get("vcList")&&n.get("vcList").size?h?d.default.createElement("span",{style:{width:"100%"}},d.default.createElement("span",{className:"searchrunning-reviewer"},n.get("auditUserName")),K?n.get("vcList").map(function(e,t){return d.default.createElement(c.default,{key:t,type:"ghost",disabled:!v||U,onClick:function(){v&&!U&&l(C.deleteVcItemFetch("searchRunning",e.get("year"),e.get("month"),[{vcIndex:e.get("vcIndex")}],E,N))}},"反审核")}):null):d.default.createElement("span",null,d.default.createElement(c.default,{type:"ghost",disabled:!v||U,onClick:function(){v&&!U&&l(C.deleteVcItemFetch("searchRunning",J,k,w,E,N))}},"反审核")):d.default.createElement("span",null,d.default.createElement(c.default,{type:"ghost",disabled:n.get("beCertificate")||!v,onClick:function(){return l(C.runningInsertOrModifyVc("searchRunning",(0,m.fromJS)([{oriUuid:n.get("oriUuid"),jrNumber:n.get("jrIndex"),currentYear:P.substr(0,4),currentMonth:P.substr(5,2)}]),"insert",E,N))}},"审核"))))}}]),t}())||a;t.default=v}}]);