(window.webpackJsonp=window.webpackJsonp||[]).push([[50,1,2,24],{1169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=c(n(1722)),r=c(n(1291)),i=c(n(1398)),o=c(n(1399)),u=c(n(491)),s=c(n(1305)),l=c(n(1324));function c(e){return e&&e.__esModule?e:{default:e}}var d={runningPreviewState:r.default,editRunningState:i.default,editCalculateState:o.default,editRunningAllState:u.default,searchRunningState:s.default,filePrintState:l.default};t.reducer=d,t.view=a.default},1229:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitLraccountJzsy=t.getJzsyProjectCardList=t.insertlrAccountJzsy=t.calculateGainForJzsy=t.getAssetsCarryoverList=t.getAssetsCleaningCategory=t.changeTagName=t.getLabelFetch=t.initLabel=t.deleteUploadFJUrl=t.uploadFiles=t.switchLoadingMask=t.getUploadGetTokenFetch=t.changeStateAndAbstract=t.insertProjectShare=t.calculateCommonChargeAmount=t.chargeItemCheckboxCheck=t.getChargeProjectCard=t.getProjectShareList=t.addCarryStock=t.deleteCarryStock=t.getCostCardTypeList=t.getCostCardList=t.deleteStock=t.addStock=t.autoCalculateStockAmount=t.autoCalculateProjectAmount=t.deleteProject=t.addProject=t.getCalculateCardList=t.getAllManagesCardList=t.getManagesCardList=t.closeAccountconfModal=t.refreshRunningbusiness=t.initStockCard=t.initRelaCard=t.inventorySettingInit=t.changeCardCategoryType=t.changeCardCategoryStatus=t.changeCardNature=t.changeManageCardRelationType=t.saveIUManageTypeCard=t.changeManageCardRelation=t.getIUmanageListTitle=t.searchCardList=t.getCurrentCardList=t.getAllCardList=t.getProjectSomeCardList=t.getProjectAllCardList=t.getCardList=t.getFirstContactsCardList=t.getFirstStockCardList=t.calculateAccruedAmount=t.changeBeforeAmount=t.initLrAccountAfterFailed=t.getManagerCategoryList=t.insertlrAccount=t.accountTotalAmount=t.accountItemCheckboxCheckAll=t.accountItemCheckboxCheck=t.getAccountObjectList=t.AsssetsInsert=t.getBusinessList=t.billChange=t.calculateGain=t.updateAssList=t.justNewRunningbusiness=t.initBussiness=t.initCalculate=t.saveRunningbusiness=t.autoCalculateAmount=t.changeAccountAssName=t.changeAccountAssId=t.changeAccountFzhsModalClear=t.changeAccountAssCategory=t.changeAccountFzhsModalDisplay=t.autoCalculateBillInfo=t.changeAccountTaxRate=t.changeAccountAmount=t.changeAccountSalaryCheckbox=t.changeAccountSalary=t.changeLrAccountAccountName=t.getRunningAccountInfo=t.saveCard=t.changeIUMangeCardAc=t.changeLrAccountOutString=t.changeLrAccountCommonString=t.selectAccountAss=t.selectRunningAcInfo=t.getCostStockList=t.getProjectCardList=t.selectAccountRunningCategory=t.getRunningSettingInfo=t.initLrAccount=t.lsDownloadEnclosure=void 0;var a=p(n(37)),r=p(n(47)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(38),n(46);var o=g(n(1313)),u=p(n(52)),s=p(n(31)),l=n(22),c=(g(n(43)),g(n(60)),g(n(1298))),d=n(18),f=(g(n(30)),g(n(27))),m=n(43);function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function _(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var T=r.default.confirm,C=(t.lsDownloadEnclosure=function(e,t){return function(n){n((0,m.allDownloadEnclosure)(e,t))}},t.initLrAccount=function(e,t,n){return function(a){a({type:o.INIT_LR_ACCOUNT,strJudgeType:e,receivedData:t,callBackObj:n})}}),S=(t.getRunningSettingInfo=function(e){return function(e){(0,u.default)("getRunningSettingInfo","GET","",function(t){if((0,l.showMessage)(t)){var n=t.data.rate;e({type:o.GET_ACCOUNTCONF_ALL_SETTINGS,receivedData:t.data}),e({type:o.INIT_LR_ACCOUNT_SETTINGS,rate:n,hideCategoryList:t.data.hideCategoryList}),e({type:o.SET_INVOIC_ASSLIST_FROM_SETTINGS,rate:n})}})}},t.selectAccountRunningCategory=function(e,t,n,a,r,i){return function(t,n){t({type:o.SWITCH_LOADING_MASK}),e?(0,u.default)("getRunningDetail","GET","uuid="+e,function(n){if(t({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(n)){var u=n.data.result;t({type:o.SELECT_ACCOUNT_RUNNING_CATEGORY,uuid:e,name:u});var s=u.categoryType,c=u.propertyPay,f=u.propertyCostList,m=(u.propertyCost,u.propertyTax),g=u.assetType,p=void 0,_="debit";(({LB_YYSR:function(){!0,"营业收入",p="acBusinessIncome"},LB_YYZC:function(){!0,"营业支出",p="acBusinessExpense",_="credit"},LB_YYWSR:function(){!0,"营业外收入",p="acBusinessOutIncome",!0},LB_YYWZC:function(){!0,"营业外支出",p="acBusinessOutExpense",_="credit",!0},LB_JK:function(){!0,"借款",p="acLoan"},LB_TZ:function(){!0,"投资",p="acInvest"},LB_ZB:function(){!0,"资本",p="acCapital"},LB_CQZC:function(){!0,"长期资产",p="acAssets",_="debit"},LB_FYZC:function(){!0,"费用支出",p="acCost",_="credit"},LB_ZSKX:function(){!1,"暂收款项",p="acTemporaryReceipt",!0},LB_ZFKX:function(){!1,"暂付款项",p="acTemporaryPay",!0},LB_XCZC:function(){!1,"薪酬支出",p="acPayment",_="credit"},LB_SFZC:function(){!1,"税费支出",p="acTax",_="credit"}})[s]||function(){return""})();var T=u[p].beSellOff,C=u[p].beManagemented,S=u[p].beAccrued,I=u[p].beInAdvance,y=u[p].beTurnOut,L=u[p].beDeposited,N=u[p].stockRange,O=u[p].contactsRange,h=u.beProject,b=u.projectRange;t(A("card","taxRate","small"===a?r:i)),"LB_YYSR"!==s||L||T?"LB_YYZC"!==s||L||T?"LB_FYZC"!==s||C?"LB_XCZC"!==s||S?"LB_SFZC"!==s||I||"SX_ZZS"!==m?("LB_SFZC"!==s||y||"SX_GRSF"!==m)&&("LB_SFZC"!==s||S||"SX_QYSDS"!==m&&"SX_QTSF"!==m)?"LB_YYWSR"!==s||C?"LB_YYWZC"!==s||C?"LB_CQZC"!==s||C?"LB_JK"!==s||S?"LB_TZ"!==s||S?"LB_ZSKX"===s?(t(D((0,d.fromJS)(u),"STATE_ZS_SQ")),t(A("card","runningState","STATE_ZS_SQ"))):"LB_ZFKX"===s?(t(D((0,d.fromJS)(u),"STATE_ZF_FC")),t(A("card","runningState","STATE_ZF_FC"))):t(A("card","runningState","")):(t(D((0,d.fromJS)(u),"STATE_TZ_YS")),t(A("card","runningState","STATE_TZ_YS"))):(t(D((0,d.fromJS)(u),"STATE_JK_YF")),t(A("card","runningState","STATE_JK_YF"))):(t(D((0,d.fromJS)(u),"STATE_CQZC_YF")),t(A("card","runningState","STATE_CQZC_YF"))):(t(D((0,d.fromJS)(u),"STATE_YYWZC_YF")),t(A("card","runningState","STATE_YYWZC_YF"))):(t(D((0,d.fromJS)(u),"STATE_YYWSR_YS")),t(A("card","runningState","STATE_YYWSR_YS"))):(t(D((0,d.fromJS)(u),"STATE_SF_JN")),t(A("card","runningState","STATE_SF_JN"))):(t(A("card","runningState","STATE_SF_JN")),t(D((0,d.fromJS)(u),"STATE_SF_JN"))):"SX_FLF"===c?(t(D((0,d.fromJS)(u),"STATE_XC_YF")),t(A("card","runningState","STATE_XC_YF"))):"SX_QTXC"===c||"SX_GZXJ"===c?(t(A("card","runningState","STATE_XC_FF")),t(D((0,d.fromJS)(u),"STATE_XC_FF"))):(t(A("card","runningState","STATE_XC_JN")),t(D((0,d.fromJS)(u),"STATE_XC_JN"))):(t(A("card","runningState","STATE_FY_YF")),t(D((0,d.fromJS)(u),"STATE_FY_YF"))):(t(A("card","runningState","STATE_YYZC_GJ")),t(D((0,d.fromJS)(u),"STATE_YYZC_GJ")),t(v(N,"STATE_YYZC_GJ")),t(R(O,"STATE_YYZC_GJ"))):(t(A("card","runningState","STATE_YYSR_XS")),t(D((0,d.fromJS)(u),"STATE_YYSR_XS")),t(v(N,"STATE_YYSR_XS")),t(R(O,"STATE_YYSR_XS"))),f&&1===f.length?t(A("card","propertyCost",f[0])):t(A("card","propertyCost","")),t(A("card","billStates","")),t(A("card","billType","small"!==a||"credit"!==_&&"XZ_GJZC"!==g?"":"bill_other")),h&&t(E(b)),u.acBusinessIncome&&u.acBusinessIncome.beCarryover&&t(A("card",["acBusinessIncome","carryoverCardList"],(0,d.fromJS)([{uuid:""}])))}}):t({type:o.SWITCH_LOADING_MASK})}}),E=t.getProjectCardList=function(e){return function(t,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,u.default)("getProjectCardList","POST",JSON.stringify({sobId:a,categoryList:e,needCommonCard:!0}),function(e){(0,l.showMessage)(e)&&t(A("",["flags","projectList"],(0,d.fromJS)(e.data.result)))})}},A=(t.getCostStockList=function(e,t){return function(n){(0,u.default)("getCostStock","POST",JSON.stringify({runningDate:e,runningState:t}),function(e){(0,l.showMessage)(e)&&(n(A("",["flags","costStockList"],(0,d.fromJS)(e.data.result))),n(A("",["flags","thingsList"],(0,d.fromJS)(e.data.result))),n(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.result))))})}},t.selectRunningAcInfo=function(e,t,n,a,r){return{type:o.SELECT_RUNNING_AC_INFO,acid:e,acFullName:t,idPlace:n,namePlace:a,assPlace:r}},t.selectAccountAss=function(e,t,n,a){return{type:o.SELECT_ACCOUNT_ASS,assId:e,assName:t,assCategory:n,place:a}},t.changeLrAccountCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(_(t));"flags"===t[0]&&(r=t),a({type:o.CHANGE_LR_ACCOUNT_COMMON_STRING,tab:e,placeArr:r,value:n})}}),I=(t.changeLrAccountOutString=function(e,t){return function(n){n("string"==typeof e?{type:o.CHANGE_LR_ACCOUNT_COMMON_STRING,place:e,value:t}:{type:o.CHANGE_LR_ACCOUNT_COMMON_STRING,placeArr:e,value:t})}},t.changeIUMangeCardAc=function(e,t,n,a){return function(r){var i=e.split(" ");r({type:o.ACCOUNT_CHANGE_IUMANAGE_CARD_AC,uuid:i[0],name:i[1],acId:t,acName:n,place:a})}},t.saveCard=function(e,t,n,r,i){return function(s,c){s({type:o.SWITCH_LOADING_MASK});var d=c().lrAccountState.get("inventorySettingCard").toJS(),f=c().lrAccountState.getIn(["cardTemp","runningState"]),m=function(){(0,u.default)("addInventorySettingCard","POST",JSON.stringify({psiData:d,needAutoIncrementCode:"insert"!==e,insertFrom:"",treeFrom:""}),function(n){(0,l.showMessage)(n)&&(s({type:o.ACCOUNT_SAVE_INVENTORY_SETTING_CARD,list:n.data.resultList,flag:e,autoIncrementCode:n.data.autoIncrementCode}),t&&t(),a.default.info("保存成功"),s(v(i,f)))})};(0,u.default)("adjustInventorySettingCardTitleSame","POST",JSON.stringify({psiData:{name:d.name,uuid:d.uuid}}),function(e){(0,l.showMessage)(e)&&(e.data.repeat?(n(),T({title:"名称重复",content:"卡片类别名称与已有卡片类别名称重复，确定保存吗？",onOk:function(){m(),r()},onCancel:function(){r()}})):m()),s({type:o.SWITCH_LOADING_MASK})})}},t.getRunningAccountInfo=function(e,t,n,a,r,i,s){return function(c,d){var f="",m="",g="",p="",_="";switch(t=t.substr(0,10),n.size?(f=n.getIn(["0","assId"]),m=n.getIn(["0","assCategory"]),g=2==n.size?n.getIn(["1","assId"]):"",p=2==n.size?n.getIn(["1","assCategory"]):""):_=a,r){case"other":(0,u.default)("getRunningOtherAccountInfo","POST",JSON.stringify({categoryUuid:e,runningDate:t,acId:_,assId1:f,assCategory1:m,assId2:g,assCategory2:p,uuid:"modify"===i?s:""}),function(e){(0,l.showMessage)(e)&&c({type:o.GET_RUNNING_ACCOUNT_INFO,receivedData:e.data,wordType:"other"})});break;case"VAT":(0,u.default)("getBusinessVATInfo","POST",JSON.stringify({categoryUuid:e,runningDate:t,acId:_,assId1:f,assCategory1:m,assId2:g,assCategory2:p,uuid:"modify"===i?s:""}),function(e){(0,l.showMessage)(e)&&c({type:o.GET_RUNNING_ACCOUNT_INFO,receivedData:e.data,wordType:"VAT"})});break;case"dikou":(0,u.default)("getRunningAccountInfo","POST",JSON.stringify({categoryUuid:e,runningDate:t,cardUuid:a,uuid:"modify"===i?s:""}),function(e){(0,l.showMessage)(e)&&c({type:o.GET_RUNNING_ACCOUNT_INFO,receivedData:e.data.result,wordType:"dikou"})});break;case"accruedXCZC":(0,u.default)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:e,runningDate:t,acId:_,assId1:f,assCategory1:m,assId2:g,assCategory2:p}),function(e){(0,l.showMessage)(e)&&c({type:o.GET_RUNNING_ACCOUNT_INFO,receivedData:e.data,wordType:"other"})});break;case"accruedZZS":(0,u.default)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:e,runningDate:t,acId:_,assId1:f,assCategory1:m,assId2:g,assCategory2:p}),function(e){(0,l.showMessage)(e)&&c({type:o.GET_RUNNING_ACCOUNT_INFO,receivedData:e.data.result,wordType:"accruedZZS"})});break;case"socialSecurity":(0,u.default)("getPaymentInfo","POST",JSON.stringify({categoryUuid:e,runningDate:t,acType:"AC_SB"}),function(e){(0,l.showMessage)(e)&&c({type:o.GET_RUNNING_ACCOUNT_INFO,receivedData:e.data.result,wordType:"socialSecurity"})});break;case"sfAmount":(0,u.default)("getIncomeTax","POST",JSON.stringify({categoryUuid:e,runningDate:t,acId:_,assId1:f,assCategory1:m,assId2:g,assCategory2:p}),function(e){(0,l.showMessage)(e)&&c({type:o.GET_RUNNING_ACCOUNT_INFO,receivedData:e.data.result,wordType:"sfAmount"})});break;case"fund":(0,u.default)("getPaymentInfo","POST",JSON.stringify({categoryUuid:e,runningDate:t,acType:"AC_GJJ"}),function(e){(0,l.showMessage)(e)&&c({type:o.GET_RUNNING_ACCOUNT_INFO,receivedData:e.data.result,wordType:"fund"})});break;default:(0,u.default)("getOutPutTax","POST",JSON.stringify({categoryUuid:e,runningDate:t,acId:_,assId1:f,assCategory1:m,assId2:g,assCategory2:p}),function(e){(0,l.showMessage)(e)&&c({type:o.GET_RUNNING_ACCOUNT_INFO,receivedData:e.data.result,wordType:"tax"})})}}},t.changeLrAccountAccountName=function(e,t,n,a){return{type:o.CHANGE_LR_ACCOUNT_ACCOUNT_NAME,tab:e,placeUUid:t,placeName:n,value:a}},t.changeAccountSalary=function(e,t){return{type:o.CHANGE_ACCOUNT_SALARY,place:e,value:t}},t.changeAccountSalaryCheckbox=function(e,t,n){return function(a){if(!n)switch(t){case"personAccumulationAmountchecked":a(L(["acPayment","fundList"],""));break;case"personSocialSecurityAmountchecked":a(L(["acPayment","socialSecurityList"],""));break;case"incomeTaxAmountchecked":a(L(["acPayment","incomeTaxList"],""))}a({type:o.CHANGE_ACCOUNT_SALARY,place:e,value:0,checkplace:t,checked:n})}},t.changeAccountAmount=function(e){return{type:o.CHANGE_ACCOUNT_BILL_TYPE,value:e}},t.changeAccountTaxRate=function(e){return{type:o.CHANGE_ACCOUNT_TAX_RATE,value:e}}),y=(t.autoCalculateBillInfo=function(e){return{type:o.AUTO_CALCULATE_BILL_INFO,strJudgeType:e}},t.changeAccountFzhsModalDisplay=function(){return{type:o.CHANGE_ACCOUNT_FZHS_MODAL_DISPLAY}},t.changeAccountAssCategory=function(e){return{type:o.CHANGE_ACCOUNT_ASS_CATEGORY,assCategory:e}},t.changeAccountFzhsModalClear=function(){return{type:o.CHANGE_ACCOUNT_FZHS_MODAL_CLEAR}},t.changeAccountAssId=function(e){return{type:o.CHANGE_ACCOUNT_ASSID,value:e}},t.changeAccountAssName=function(e){return{type:o.CHANGE_ACCOUNT_ASSNAME,value:e}},t.autoCalculateAmount=function(){return{type:o.CALCULATE_AMOUNT}},t.saveRunningbusiness=function(e){return function(t,n){t(y());var r=n().lrAccountState,s=n().accountConfState,c=(r.getIn(["flags","insertOrModify"]),r.getIn(["flags","specialStateforAssets"])),d=r.getIn(["flags","runningInsertOrModify"]),f=r.get("cardTemp"),m=f.get("runningState"),g=f.get("categoryType"),p=f.get("categoryUuid"),_=f.get("scale"),T=f.get("payableRate"),E=f.get("outputRate"),A=s.get("runningCategory"),I=r.get("enclosureList").toJS(),L=r.get("needDeleteUrl").toJS(),O=I.concat(L),h={LB_YYSR:"insertIncome",LB_YYZC:"insertExpense",LB_JK:"insertLoan",LB_TZ:"insertInvest",LB_ZB:"insertCapital",LB_ZZ:"insertVirement",LB_XCZC:"insertPayment",LB_FYZC:"insertCost",LB_SFZC:"insertTax",LB_ZFKX:"insertTemporaryPay",LB_ZSKX:"insertTemporaryReceipt",LB_CQZC:"insertAssets",LB_YYWZC:"insertOutIncome",LB_YYWSR:"insertOutExpense"}[g],v={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[g],R=void 0;R="STATE_YYSR_DJ"===m||"STATE_ZS"===m||"STATE_ZF"===m||"STATE_YYZC_DJ"===m?-Math.abs(f.get("amount")):f.get("amount");var M=f.toJS(),U=b(g);for(var J in U)delete M[U[J]];delete M.queryObj,M.usedProject&&M.projectCard.size&&(M.projectCard=M.projectCard.filter(function(e){return e.uuid})),M[v].stockCardList&&M[v].stockCardList.size&&(M[v].stockCardList=M[v].stockCardList.filter(function(e){return e.uuid})),"insert"!==d||c||delete M.uuid,t({type:o.SWITCH_LOADING_MASK}),(0,u.default)(""+("modify"===d?"modifyRunningbusiness":h),"POST",JSON.stringify(i({},M,{amount:R,enclosureList:O})),function(n){if(t({type:o.SWITCH_LOADING_MASK}),0!==n.code)a.default.info(n.code+" "+n.message);else{var r=n.data.businessFlowNumberList;if(r&&r.length?a.default.success("已生成如下流水："+n.data.flowNumber+"、"+r.map(function(e,t){return e+(t<r.length-1?"、":"")})):a.default.success(n.message),e)t(C("saveAndNew")),t(S(p,"",A,_,T,E));else if("STATE_JK_ZFLX"===m||"STATE_TZ_SRGL"===m||"STATE_TZ_SRLX"===m||"STATE_ZB_ZFLR"===m||"STATE_XC_FF"===m||"STATE_XC_JN"===m||"STATE_SF_JN"===m||"STATE_ZS_TH"===m||"STATE_ZF_SH"===m||"STATE_CQZC_JZSY"===m||"STATE_CQZC_YS"===m||"STATE_CQZC_WS"===m){var i=void 0;if("insert"===d)i=n.data.uuid;else i=f.get("uuid");t({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getRunningBusiness","GET","uuid="+i,function(e){t({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(t({type:o.INIT_LR_ACCOUNT,strJudgeType:"fromCxAccount",receivedData:e.data}),"STATE_CQZC_JZSY"===m&&t(N()))})}else t(C("afterSave",f,n.data))}})}},t.initCalculate=function(){return{type:o.INIT_LR_CALCULATE_STATE}}),L=(t.initBussiness=function(){return{type:o.INIT_LR_ACOUNT_STATE}},t.justNewRunningbusiness=function(e,t){return function(n,a){var r=a().lrAccountState,i=a().accountConfState,u=r.get("cardTemp"),s=u.get("categoryUuid"),l=u.get("scale"),d=u.get("payableRate"),f=u.get("outputRate"),m=i.get("runningCategory"),g=r.get("calculateTemp").get("runningDate");if("business"===e&&n(y()),"business"===e||"payment"===e&&""===t)n(C("saveAndNew")),n(S(s,"",m,l,d,f));else switch(t){case"LB_ZZ":n({type:o.AFTER_SUCCESS_INSERT_LB_ZZ_ITEM,saveAndNew:!0});break;case"LB_SFGL":n(O(g)),n({type:o.INIT_LR_ACCOUNT_PAYMENT,saveAndNew:!0,paymentInsertOrModify:"insert"});break;case"LB_JZCB":n({type:o.AFTER_SUCCESS_INSERT_CARRYOVER_ITEM,saveAndNew:!0});break;case"LB_FPRZ":n({type:o.AFTER_SUCCESS_INSERT_INVOICEAUTH_ITEM,saveAndNew:!0});break;case"LB_KJFP":n({type:o.AFTER_SUCCESS_INSERT_INVOICING_ITEM,saveAndNew:!0}),n(c.getInvoicingList("BILL_MAKE_OUT_TYPE_XS",g));break;case"LB_ZCWJZZS":n({type:o.AFTER_SUCCESS_INSERT_TRANSFER_OUT_ITEM,saveAndNew:!0});break;case"LB_GGFYFT":n(J()),n({type:o.INIT_COMMON_CHARGE,saveAndNew:!0});break;case"LB_ZJTX":n({type:o.INIT_LR_CALCULATE_STATE}),n(c.getAssetsList("LB_ZJTX"));break;case"LB_JZSY":n(J()),n({type:o.AFTER_INSERT_JZSY,saveAndNew:!0})}}},t.updateAssList=function(e,t){return function(n){var a="string"==typeof e?["cardTemp",e]:["cardTemp"].concat(_(e)),r=!1,i=void 0;if(t){var u=t.split(f.TREE_JOIN_STR);i={assName:u[0],assId:u[1],assCategory:u[2]}}else r=!0;n({type:o.UPDATE_ACCOUNT_LIST,placeArr:a,value:i,empty:r})}}),N=t.calculateGain=function(e){return function(t,n){var a=n().lrAccountState,r=a.get("cardTemp"),i=r.get("amount"),u=r.get("taxRate"),s=r.get("businessList"),l=e||r.get("billType"),c=a.getIn(["flags","isQueryByBusiness"]),d=a.getIn(["flags","specialStateforAssets"]);"bill_common"!==l||c&&!d?c&&s.size&&"bill_common"===s.getIn([0,"billType"])&&(i=(i/(1+Number(s.getIn([0,"taxRate"]))/100)).toFixed(2)):i=(i/(1+Number(u)/100)).toFixed(2);var f=r.getIn(["acAssets","originalAssetsAmount"]),m=r.getIn(["acAssets","depreciationAmount"]),g=(r.getIn(["acAssets","cleaningAmount"]),r.getIn(["acAssets","upgradingAmount"])),p=(Number(f)-Number(m)+Number(g)).toFixed(2),_=Math.abs(p-i).toFixed(2),T=void 0,C=void 0;Number(p)<=i?(T=["cardTemp","acAssets","netProfitAmount"],C=["cardTemp","acAssets","lossAmount"]):Number(p)>i&&(T=["cardTemp","acAssets","lossAmount"],C=["cardTemp","acAssets","netProfitAmount"]),t({type:o.CALCULATE_GAIN_OR_LOSS,deletePlace:C,place:T,diff:_})}},O=(t.billChange=function(e,t,n,a,r){return function(n,i){i().lrAccountState.get("cardTemp");var u=void 0;"small"===e&&"bill_states_make_out"===t?u=a:"small"===e&&"bill_states_not_make_out"===t?u=r:"general"!==e||"bill_states_make_out"!==t&&"bill_states_auth"!==t?"general"!==e||"bill_states_not_make_out"!==t&&"bill_states_not_auth"!==t||(u=r):u=a,n({type:o.CHANGE_LR_ACCOUNT_COMMON_STRING,placeArr:["cardTemp","billStates"],value:t}),n({type:o.CHANGE_LR_ACCOUNT_COMMON_STRING,placeArr:["cardTemp","billAcList"],value:[{acId:u}]})}},t.getBusinessList=function(e,t){return function(n){n({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getManageList","POST",JSON.stringify({runningDate:e,cardUuid:t,isCheck:!1}),function(e){n({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&n({type:o.GET_PAYMENT_PERIOD,receivedData:e.data.result.childList})})}},t.AsssetsInsert=function(){return function(e){e(A("",["flags","specialStateforAssets"],!0)),e(A("",["flags","runningInsertOrModify"],"insert"))}},t.getAccountObjectList=function(e){return function(t){t({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getBusinessManagerCardList","POST",JSON.stringify({runningDate:e}),function(e){t({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&t(A("calculate","cardList",(0,d.fromJS)(e.data.cardList)))})}}),h=(t.accountItemCheckboxCheck=function(e,t,n){return{type:o.LRACCOUNT_ITEM_CHECKBOX_CHECK,checked:e,uuid:t,index:n}},t.accountItemCheckboxCheckAll=function(e,t){return function(n,a){var r=a().lrAccountState,i=r.getIn(["calculateTemp","detail"]),u=r.getIn(["flags","managerCategoryList"]);i.forEach(function(e,t){e.get("beOpened")&&!u.get(t)&&n(h(t,e.get("assType")))}),n({type:o.LRACCOUNT_ITEM_CHECKBOX_CHECK_ALL,selectAll:e,list:t})}},t.accountTotalAmount=function(e){return function(t,n){var a=n().lrAccountState,r=a.get("calculateTemp"),i=a.getIn(["flags","indexList"]),o=a.getIn(["calculateTemp","detail"]),u=a.get("flags"),s=u.get("isQuery"),l=u.get("modify"),c=(u.get("accountType"),0);r.get("direction"),r.get("flowType"),r.get("runningState");o&&o.size&&o.map(function(e,t){var n=e.get("direction"),a=e.get("flowType"),r=e.get("runningState"),o=void 0,u=Number(e.get("notHandleAmount")),d=Number(e.get("handleAmount"));"STATE_YYSR_TS"!==r&&"STATE_YYZC_TG"!==r||(u=-Math.abs(u),d=-Math.abs(d)),o=s?d.toFixed(2):l?(u+d).toFixed(2):u.toFixed(2),i.some(function(e){return e===t})&&("debit"===n?"FLOW_INADVANCE"===a?c-=Number(o):c+=Number(o):"FLOW_INADVANCE"===a?c+=Number(o):c-=Number(o))}),t(A("",["flags","totalAmount"],c.toFixed(2))),e&&t(A("calculate","handlingAmount",Math.abs(c).toFixed(2)))}},t.insertlrAccount=function(e){return function(t,n){var r=n().lrAccountState,i=r.get("calculateTemp"),s=r.get("flags"),c=i.get("runningDate"),d=i.get("runningAbstract"),f=i.get("accountUuid"),m=i.get("handlingAmount"),g=i.get("detail"),p=i.get("moedAmount"),_=s.get("indexList"),T=i.get("beMoed"),C=r.get("enclosureList").toJS(),S=r.get("needDeleteUrl").toJS(),E=C.concat(S),A=_.map(function(e){return g.getIn([e,"beOpened"])?{uuid:g.getIn([e,"uuid"]),categoryUuid:g.getIn([e,"categoryUuid"]),beOpened:!0,assType:g.getIn([e,"assType"])}:{uuid:g.getIn([e,"uuid"]),assType:g.getIn([e,"assType"])}}),I=i.get("uuid"),y=i.get("cardUuid"),L=s.get("paymentInsertOrModify");t({type:o.SWITCH_LOADING_MASK}),(0,u.default)(L+"Runningpayment","POST",JSON.stringify({runningDate:c,runningAbstract:d,accountUuid:f,amount:m,uuidList:A,cardUuid:y,beMoed:T,moedAmount:p,enclosureList:E,uuid:""+("modify"===L?I:"")}),function(n){if(t({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(n))if(a.default.success(n.message),e)t(O(c)),t({type:o.INIT_LR_ACCOUNT_PAYMENT,saveAndNew:e,paymentInsertOrModify:L});else{var r=void 0;if("insert"===L)r=n.data;else{var s=i.get("uuid");r=s}t({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getRunningBusiness","GET","uuid="+r,function(e){if(t({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)){var n=e.data.result;t({type:o.AFTER_SAVE_ACCOUNT_PAYMENT,result:n,currentUuid:r})}})}})}},t.getManagerCategoryList=function(e,t){return function(n){(0,u.default)("getManagerCategoryList","POST",JSON.stringify({assType:t}),function(t){n(A("",["flags","managerCategoryList",e],(0,d.fromJS)(t.data)))})}}),v=(t.initLrAccountAfterFailed=function(){return function(e,t){e(A("",["flags","pzFailedButtonShow"],!1)),e(A("",["flags","specialStateforAccrued"],!1)),e(C("saveAndNew"))}},t.changeBeforeAmount=function(e,t,n){return function(e,a){t.split(f.TREE_JOIN_STR)[0];var r=t.split(f.TREE_JOIN_STR)[1],i=t.split(f.TREE_JOIN_STR)[2];e(A("calculate",["detail",n,"categoryUuid"],i)),e(A("calculate",["detail",n,"categoryName"],r))}},t.calculateAccruedAmount=function(e,t,n,a){return function(r,i){var o=0,u=i().lrAccountState.getIn(["cardTemp","propertyPay"]),s=i().lrAccountState.getIn(["cardTemp","propertyTax"]);switch(e?t&&t.forEach(function(e,t){t===n&&a?o+=Number(e.get("handleAmount"))+Number(e.get("notHandleAmount")):e.get("beSelect")&&t!==n&&(o+=Number(e.get("handleAmount"))+Number(e.get("notHandleAmount")))}):t&&t.forEach(function(e,t){t===n&&a?o+=e.get("notHandleAmount"):e.get("beSelect")&&t!==n&&(o+=e.get("notHandleAmount"))}),o=o.toFixed(2),u){case"SX_GZXJ":r(A("card","amount",o));break;case"SX_SHBX":r(A("card",["acPayment","companySocialSecurityAmount"],o));break;case"SX_ZFGJJ":r(A("card",["acPayment","companyAccumulationAmount"],o));break;case"SX_QTXC":r(A("card","amount",o))}r(A("card","SX_QTSF"===s?"amount":"SX_ZZS"===s?"handleAmount":"amount",o))}},t.getFirstStockCardList=function(e,t){return function(n,a){var r=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]),i={STATE_YYSR_XS:"4",STATE_YYSR_TS:"4",STATE_YYZC_TG:"5",STATE_YYZC_GJ:"5"}[t];(0,u.default)("getStockCategoryList","POST",JSON.stringify({sobId:r,categoryList:e,property:i}),function(e){(0,l.showMessage)(e)&&n(A("",["flags","stockThingsList"],(0,d.fromJS)(e.data.result)))})}}),R=t.getFirstContactsCardList=function(e,t){return function(n,a){var r=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]),i={STATE_YYSR_DJ:"PREIN",STATE_YYSR_XS:"NEEDIN",STATE_YYSR_TS:"NEEDIN",STATE_YYZC_DJ:"PREPAY",STATE_YYZC_TG:"NEEDPAY",STATE_YYZC_GJ:"NEEDPAY",STATE_FY_DJ:"PREPAY",STATE_FY_YF:"NEEDPAY",STATE_FY_WF:"NEEDPAY",STATE_CQZC_WF:"NEEDPAY",STATE_CQZC_YF:"NEEDPAY",STATE_CQZC_YS:"NEEDIN",STATE_CQZC_WS:"NEEDIN",STATE_YYWSR_WS:"NEEDIN",STATE_YYWSR_YS:"NEEDIN",STATE_YYWZC_WF:"NEEDPAY",STATE_YYWZC_YF:"NEEDPAY"}[t];i&&(0,u.default)("getContactsCategoryList","POST",JSON.stringify({sobId:r,categoryList:e,property:i}),function(e){(0,l.showMessage)(e)&&n(A("",["flags","contactsThingsList"],(0,d.fromJS)(e.data.result)))})}},b=(t.getCardList=function(e,t,n,a){return function(r,i){var s=i().homeState.getIn(["data","userInfo","sobInfo","sobId"]);if("stock"===e){var c={STATE_YYSR_XS:"4",STATE_YYSR_TS:"4",STATE_YYZC_TG:"5",STATE_YYZC_GJ:"5"}[t];r({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getStockCardList","POST",JSON.stringify({sobId:s,categoryList:n,property:c}),function(e){r({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&r(A("",["flags","MemberList"],(0,d.fromJS)(e.data.typeList)))}),(0,u.default)("getStockCategoryList","POST",JSON.stringify({sobId:s,categoryList:n,property:c}),function(e){(0,l.showMessage)(e)&&(r(A("",["flags",a],!0)),r(A("",["flags","thingsList"],(0,d.fromJS)(e.data.result))),r(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.result))))})}else if("contacts"===e){var f={STATE_YYSR_DJ:"PREIN",STATE_YYSR_XS:"NEEDIN",STATE_YYSR_TS:"NEEDIN",STATE_YYZC_DJ:"PREPAY",STATE_YYZC_TG:"NEEDPAY",STATE_YYZC_GJ:"NEEDPAY",STATE_FY_DJ:"PREPAY",STATE_FY_YF:"NEEDPAY",STATE_FY_WF:"NEEDPAY",STATE_CQZC_WF:"NEEDPAY",STATE_CQZC_YF:"NEEDPAY",STATE_CQZC_YS:"NEEDIN",STATE_CQZC_WS:"NEEDIN",STATE_YYWSR_WS:"NEEDIN",STATE_YYWSR_YS:"NEEDIN",STATE_YYWZC_WF:"NEEDPAY",STATE_YYWZC_YF:"NEEDPAY"}[t];r({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getContactsCardList","POST",JSON.stringify({sobId:s,categoryList:n,property:f}),function(e){r({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&r(A("",["flags","MemberList"],(0,d.fromJS)(e.data.typeList)))}),(0,u.default)("getContactsCategoryList","POST",JSON.stringify({sobId:s,categoryList:n,property:f}),function(e){(0,l.showMessage)(e)&&(r(A("",["flags","showContactsModal"],!0)),r(A("",["flags","thingsList"],(0,d.fromJS)(e.data.result))),r(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.result))))})}}},t.getProjectAllCardList=function(e,t,n){return function(a,r){var i=r().homeState.getIn(["data","userInfo","sobInfo","sobId"]),s=r().lrAccountState,c=s.getIn(["cardTemp","categoryType"]),f=s.getIn(["cardTemp","runningState"]),m=s.getIn(["cardTemp","beAccrued"]),g=s.getIn(["cardTemp","propertyCost"]),p=!1;("LB_FYZC"===c||"STATE_XC_JT"===f||!m&&"STATE_XC_JN"===f||"XZ_CHLX"===g&&("STATE_JK_JTLX"===f||!m&&"STATE_JK_ZFLX"===f))&&(p=!0),a({type:o.SWITCH_LOADING_MASK}),n||(0,u.default)("getProjectTreeList","POST",JSON.stringify({sobId:i,categoryList:e}),function(e){(0,l.showMessage)(e)&&a(A("",["flags","MemberList"],(0,d.fromJS)(e.data.typeList)))}),(0,u.default)("getProjectCardList","POST",JSON.stringify({sobId:i,categoryList:e,needCommonCard:p}),function(e){a({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(a(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.result))),a(A("",["flags","thingsList"],(0,d.fromJS)(e.data.result))),a(A("",["flags",t],!0)))})}},t.getProjectSomeCardList=function(e,t){return function(n,a){var r=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);1==t?(0,u.default)("getProjectSubordinateCardList","POST",JSON.stringify({sobId:r,categoryUuid:e,listByCategory:!0,subordinateUuid:""}),function(e){(0,l.showMessage)(e)&&(n(A("",["flags","thingsList"],(0,d.fromJS)(e.data.resultList))),n(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.resultList))))}):(0,u.default)("getProjectSubordinateCardList","POST",JSON.stringify({sobId:r,subordinateUuid:e,listByCategory:!1,categoryUuid:e}),function(e){(0,l.showMessage)(e)&&(n(A("",["flags","thingsList"],(0,d.fromJS)(e.data.resultList))),n(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.resultList))))})}},t.getAllCardList=function(e,t,n,a){return function(r,i){var o=i().homeState.getIn(["data","userInfo","sobInfo","sobId"]);if("stock"===e){var s={STATE_YYSR_XS:"4",STATE_YYSR_TS:"4",STATE_YYZC_TG:"5",STATE_YYZC_GJ:"5"}[t];(0,u.default)("getStockCategoryList","POST",JSON.stringify({sobId:o,categoryList:n,property:s}),function(e){(0,l.showMessage)(e)&&(r(A("",["flags",a],!0)),r(A("",["flags","thingsList"],(0,d.fromJS)(e.data.result))),r(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.result))))})}else if("contacts"===e){var c={STATE_YYSR_DJ:"PREIN",STATE_YYSR_XS:"NEEDIN",STATE_YYSR_TS:"NEEDIN",STATE_YYZC_DJ:"PREPAY",STATE_YYZC_TG:"NEEDPAY",STATE_YYZC_GJ:"NEEDPAY",STATE_FY_DJ:"PREPAY",STATE_FY_YF:"NEEDPAY",STATE_FY_WF:"NEEDPAY",STATE_CQZC_WF:"NEEDPAY",STATE_CQZC_YF:"NEEDPAY",STATE_CQZC_YS:"NEEDIN",STATE_CQZC_WS:"NEEDIN",STATE_YYWSR_WS:"NEEDIN",STATE_YYWSR_YS:"NEEDIN",STATE_YYWZC_WF:"NEEDPAY",STATE_YYWZC_YF:"NEEDPAY"}[t];(0,u.default)("getContactsCategoryList","POST",JSON.stringify({sobId:o,categoryList:n,property:c}),function(e){(0,l.showMessage)(e)&&(r(A("",["flags","showContactsModal"],!0)),r(A("",["flags","thingsList"],(0,d.fromJS)(e.data.result))),r(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.result))))})}}},t.getCurrentCardList=function(e,t,n,a){return function(r,i){var o=i().homeState.getIn(["data","userInfo","sobInfo","sobId"]);if("stock"===e){var s={STATE_YYSR_XS:"4",STATE_YYSR_TS:"4",STATE_YYZC_TG:"5",STATE_YYZC_GJ:"5"}[t];1==a?(0,u.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:o,categoryUuid:n,listByCategory:!0,subordinateUuid:"",property:s}),function(e){(0,l.showMessage)(e)&&(r(A("",["flags","thingsList"],(0,d.fromJS)(e.data.resultList))),r(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.resultList))))}):(0,u.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:o,subordinateUuid:n,listByCategory:!1,categoryUuid:"",property:s}),function(e){(0,l.showMessage)(e)&&(r(A("",["flags","thingsList"],(0,d.fromJS)(e.data.resultList))),r(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.resultList))))})}else if("contacts"===e){var c={STATE_YYSR_DJ:"PREIN",STATE_YYSR_XS:"NEEDIN",STATE_YYSR_TS:"NEEDIN",STATE_YYZC_DJ:"PREPAY",STATE_YYZC_TG:"NEEDPAY",STATE_YYZC_GJ:"NEEDPAY",STATE_FY_DJ:"PREPAY",STATE_FY_YF:"NEEDPAY",STATE_FY_WF:"NEEDPAY",STATE_CQZC_WF:"NEEDPAY",STATE_CQZC_YF:"NEEDPAY",STATE_CQZC_YS:"NEEDIN",STATE_CQZC_WS:"NEEDIN",STATE_YYWSR_WS:"NEEDIN",STATE_YYWSR_YS:"NEEDIN",STATE_YYWZC_WF:"NEEDPAY",STATE_YYWZC_YF:"NEEDPAY"}[t];1==a?(0,u.default)("getRunningContactsMemberList","POST",JSON.stringify({sobId:o,categoryUuid:n,listByCategory:!0,property:c,subordinateUuid:""}),function(e){(0,l.showMessage)(e)&&(r(A("",["flags","thingsList"],(0,d.fromJS)(e.data.resultList))),r(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.resultList))))}):(0,u.default)("getRunningContactsMemberList","POST",JSON.stringify({sobId:o,subordinateUuid:n,property:c,listByCategory:!1,categoryUuid:""}),function(e){(0,l.showMessage)(e)&&(r(A("",["flags","thingsList"],(0,d.fromJS)(e.data.resultList))),r(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.resultList))))})}}},t.searchCardList=function(e,t){return{type:o.LRACCOUNT_ITEM_SEARCH_CARD_LIST,isSearch:e,list:t}},t.getIUmanageListTitle=function(){return function(e){e({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getIUManageListTitle","GET","",function(t){e({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(t)&&e({type:o.ACCOUNT_IUMANAGE_LIST_TITLE,data:t.data})})}},t.changeManageCardRelation=function(e,t){return function(n){(0,u.default)("getIUManageTreeByType","GET","ctgyUuid="+e.get("uuid"),function(a){(0,l.showMessage)(a)&&n({type:o.CHANGE_ACCOUNT_MANAGE_CARD_RELATION,tag:e,checked:t,tree:a.data.resultList})})}},t.saveIUManageTypeCard=function(e,t,n,r,i){return function(s,c){s({type:o.SWITCH_LOADING_MASK});var d=c().lrAccountState.get("iuManageTypeCard").toJS(),f=c().lrAccountState.getIn(["cardTemp","runningState"]),m=function(){(0,u.default)("saveIUManageCard","POST",JSON.stringify({psiData:d,insertFrom:"",treeFrom:"",needAutoIncrementCode:"insert"!==t}),function(n){(0,l.showMessage)(n)&&(s({type:o.ACCOUNT_SAVE_IUMANAGE_TYPE_CARD,list:n.data.resultList,treeList:n.data.typeList,flag:t,code:n.data.autoIncrementCode}),"insert"===t?e():a.default.info("保存成功"),s(R(i,f)))})};(0,u.default)("adjustIUmanageCardTitleSame","POST",JSON.stringify({psiData:{name:d.name,uuid:d.uuid}}),function(e){(0,l.showMessage)(e)&&(e.data.repeat?(n(),T({title:"名称重复",content:"卡片名称与已有卡片名称重复，确定保存吗？",onOk:function(){m(),r()},onCancel:function(){r()}})):m()),s({type:o.SWITCH_LOADING_MASK})})}},t.changeManageCardRelationType=function(e,t){return function(n){var a=t.split(f.TREE_JOIN_STR);n({type:o.CHANGE_ACCOUNT_CARD_RELATION_TYPE,tag:e,uuid:a[0],name:a[1]})}},t.changeCardNature=function(e,t){return function(n){n({type:o.ACCOUNT_CHANGE_INVENTORY_CARD_NATURE,name:e,value:t})}},t.changeCardCategoryStatus=function(e,t){return function(n){(0,u.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+e.get("uuid"),function(a){(0,l.showMessage)(a)&&n({type:o.ACCOUNT_CHANGE_INVENTORY_CARD_CATEGORY_STATUS,list:a.data.resultList,item:e,value:t})})}},t.changeCardCategoryType=function(e,t){return function(n){var a=t.split(f.TREE_JOIN_STR);n({type:o.ACCOUNT_CHANGE_INVENTORY_CARD_CATEGORY_TYPE,item:e,uuid:a[0],name:a[1]})}},t.inventorySettingInit=function(){return function(e){(0,u.default)("getInventorySettingCardList","GET","listFrom=",function(t){(0,l.showMessage)(t)&&(0,u.default)("getInventoryHighTypeList","GET","",function(n){(0,l.showMessage)(n)&&e({type:o.ACCOUNT_INVENTORY_SETTING_INIT,title:n.data,cardList:t.data.resultList})})})}},t.initRelaCard=function(e,t){return function(n){n({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getInitRelaCard","GET","",function(t){(0,l.showMessage)(t)&&n({type:o.INIT_RELA_CARD,data:t.data,direction:e}),n({type:o.SWITCH_LOADING_MASK})}),t()}},t.initStockCard=function(e,t){return function(n){n({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getInitStockCard","GET","",function(t){(0,l.showMessage)(t)&&n({type:o.INIT_STOCK_CARD,data:t.data,direction:e}),n({type:o.SWITCH_LOADING_MASK})}),t()}},function(e){var t={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[e],n=["acAssets","acBusinessExpense","acBusinessIncome","acBusinessOutExpense","acBusinessOutIncome","acCapital","acCost","acInvest","acLoan","acPayment","acTax","acTemporaryReceipt","acTemporaryPay"];return n.splice(n.indexOf(t),1),n}),M=(t.refreshRunningbusiness=function(e,t){return function(n,a){a().lrAccountState;n({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getRunningBusiness","GET","uuid="+e,function(e){if(n({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)){var a=e.data.result.beBusiness,r=e.data.result.runningState;a?(("STATE_YYSR_JZCB"===r||"STATE_FPRZ_CG"===r||"STATE_FPRZ_TG"===r||"STATE_KJFP_XS"===r||"STATE_KJFP_TS"===r||"STATE_ZCWJZZS"===r||"STATE_ZZ"===r)&&(0,u.default)("getRunningSettingInfo","GET","",function(a){if((0,l.showMessage)(e)){var r={LB_JZCB:function(){return"COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS"},LB_FPRZ:function(){return"INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS"},LB_KJFP:function(){return"INVOICING_FROM_CXLS_JUMP_TO_LRLS"},LB_ZCWJZZS:function(){return"TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS"},LB_ZZ:function(){return"TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ"}}[t]();n({type:o.GET_ACCOUNTCONF_ALL_SETTINGS,receivedData:a.data}),n({type:o.CALCULATE_FROM_CXLS_JUMP_TO_LRLS,pageType:t,rate:a.data.rate,hideCategoryList:a.data.hideCategoryList}),n({type:o.CALCULATE_CHANGE_QUERY}),n({type:o[r],item:(0,d.fromJS)(e.data.result),receivedData:e.data,insertOrModify:"modify",fromRefresh:!0,rate:a.data.rate,hideCategoryList:a.data.hideCategoryList})}}),"LB_JZCB"!==t&&n({type:o.INIT_LR_ACCOUNT,strJudgeType:"fromCxAccount",receivedData:e.data}),e.data.result.beProject&&n(E(e.data.result.projectRange))):n({type:o.INIT_PAYMENT_STATE,item:(0,d.fromJS)(e.data.result),result:e.data.result})}})}},t.closeAccountconfModal=function(){return{type:o.CLOSE_ACCOUNTCONF_MODAL_LR}},t.getManagesCardList=function(e){return function(t,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);t({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getManageCardTree","GET","",function(e){t({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&t(A("",["flags","MemberList"],(0,d.fromJS)(e.data.array)))}),(0,u.default)("getBusinessManagerCardList","POST",JSON.stringify({sobId:a,runningDate:e}),function(e){(0,l.showMessage)(e)&&(t(A("",["flags","showContactsModal"],!0)),t(A("",["flags","thingsList"],(0,d.fromJS)(e.data.cardList))),t(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.cardList))))})}},t.getAllManagesCardList=function(e){return function(t,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,u.default)("getBusinessManagerCardList","POST",JSON.stringify({sobId:a,runningDate:e}),function(e){(0,l.showMessage)(e)&&(t(A("",["flags","showContactsModal"],!0)),t(A("",["flags","thingsList"],(0,d.fromJS)(e.data.cardList))),t(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.cardList))))})}},t.getCalculateCardList=function(e,t,n){return function(a,r){var i=r().homeState.getIn(["data","userInfo","sobInfo","sobId"]);1==n?(0,u.default)("getManagerCardList","POST",JSON.stringify({sobId:i,categoryUuid:t,subordinateUuid:"",runningDate:e}),function(e){(0,l.showMessage)(e)&&(a(A("",["flags","thingsList"],(0,d.fromJS)(e.data.cardList))),a(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.cardList))))}):(0,u.default)("getManagerCardList","POST",JSON.stringify({sobId:i,subordinateUuid:t,categoryUuid:"",runningDate:e}),function(e){(0,l.showMessage)(e)&&(a(A("",["flags","thingsList"],(0,d.fromJS)(e.data.cardList))),a(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.cardList))))})}},t.addProject=function(e,t){return function(n){var a=e.toJS();a.splice(t+1,0,{amount:"",uuid:""}),n(A("card","projectCard",(0,d.fromJS)(a)))}},t.deleteProject=function(e,t,n){return function(a){var r=e.toJS();r.splice(t,1),a(A("card","projectCard",(0,d.fromJS)(r))),a(M()),n&&a(I())}},t.autoCalculateProjectAmount=function(){return function(e,t){var n=t().lrAccountState.getIn(["cardTemp","projectCard"]).reduce(function(e,t){return e+(t.get("amount")?Number(t.get("amount")):0)},0);e(A("card","amount",n))}}),U=t.autoCalculateStockAmount=function(e){return function(t,n){var a=n().lrAccountState.getIn(["cardTemp",e,"stockCardList"]).reduce(function(e,t){return(100*e+100*(t.get("amount")&&"."!==t.get("amount")?Number(t.get("amount")):0))/100},0);t(A("card","amount",a))}},J=(t.addStock=function(e,t,n){return function(a){var r=e.toJS();r.splice(t+1,0,{amount:"",uuid:""}),a(A("card",[n,"stockCardList"],(0,d.fromJS)(r)))}},t.deleteStock=function(e,t,n,a){return function(r){var i=e.toJS();i.splice(t,1),r(A("card",[a,"stockCardList"],(0,d.fromJS)(i))),r(U(a)),n&&r(I())}},t.getCostCardList=function(e,t,n){return function(a,r){a({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getCostCardList","POST",JSON.stringify({runningState:t,runningDate:e,categoryUuid:"",subordinateUuid:""}),function(e){a({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(a(A("",["flags",n],!0)),a(A("",["flags","thingsList"],(0,d.fromJS)(e.data.result))),a(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.result))))}),(0,u.default)("getCostCategoryTree","GET","",function(e){(0,l.showMessage)(e)&&a(A("",["flags","MemberList"],(0,d.fromJS)(e.data.typeList)))})}},t.getCostCardTypeList=function(e,t,n,a){return function(r,i){1==a?(0,u.default)("getCostCardList","POST",JSON.stringify({categoryUuid:n,subordinateUuid:"",runningDate:e,runningState:t}),function(e){(0,l.showMessage)(e)&&(r(A("",["flags","thingsList"],(0,d.fromJS)(e.data.result))),r(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.result))))}):(0,u.default)("getCostCardList","POST",JSON.stringify({subordinateUuid:n,categoryUuid:"",runningDate:e,runningState:t}),function(e){(0,l.showMessage)(e)&&(r(A("",["flags","thingsList"],(0,d.fromJS)(e.data.result))),r(A("",["flags","selectThingsList"],(0,d.fromJS)(e.data.result))))})}},t.deleteCarryStock=function(e,t,n){return function(a){var r=e?e.toJS():[];r.splice(t,1),a(A("card",[n,"carryoverCardList"],(0,d.fromJS)(r)))}},t.addCarryStock=function(e,t,n){return function(a){if(null!==e){var r=e.toJS();r.splice(t+1,0,{amount:"",uuid:""}),a(A("card",[n,"carryoverCardList"],(0,d.fromJS)(r)))}}},t.getProjectShareList=function(e){return function(t,n){var a=n().lrAccountState.get("commonChargeTemp"),r=e||a.get("runningDate");(0,u.default)("getProjectShareList","POST",JSON.stringify({runningDate:r}),function(e){(0,l.showMessage)(e)&&t(A("commonCharge","paymentList",(0,d.fromJS)(e.data)))})}}),D=(t.getChargeProjectCard=function(){return function(e,t){var n=t().homeState.getIn(["data","userInfo","sobInfo","sobId"]);e({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getProjectAllTreeList","POST",JSON.stringify({sobId:n}),function(t){(0,l.showMessage)(t)&&e(A("",["flags","MemberList"],(0,d.fromJS)(t.data.typeList)))}),(0,u.default)("getProjectListAndTree","GET","listFrom=&treeFrom=",function(t){e({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(t)&&(e(A("",["flags","thingsList"],(0,d.fromJS)(t.data.resultList))),e(A("",["flags","selectThingsList"],(0,d.fromJS)(t.data.resultList))))})}},t.chargeItemCheckboxCheck=function(e,t,n,a){return{type:o.CHARGE_ITEM_CHECKBOX_SELECT,checked:e,uuid:t,name:a,code:n}},t.calculateCommonChargeAmount=function(e,t){return function(n,a){var r=a().lrAccountState.get("commonChargeTemp").get("paymentList"),i=r.size?r.reduce(function(n,a,r){return e===r?t?n+Number(a.get("amount")):n:a.get("beSelect")?n+Number(a.get("amount")):n},0):0;n(A("commonCharge","amount",i.toFixed(2)))}},t.insertProjectShare=function(e){return function(t,n){var r=n().lrAccountState,s=r.get("commonChargeTemp"),c=r.getIn(["flags","paymentInsertOrModify"]),f=r.get("enclosureList").toJS(),m=r.get("needDeleteUrl").toJS(),g=f.concat(m);s=s.set("enclosureList",(0,d.fromJS)(g)),t({type:o.SWITCH_LOADING_MASK}),(0,u.default)(c+"ProjectShare","POST",JSON.stringify(i({},s.toJS())),function(n){t({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(n)&&(e&&t(J()),t({type:o.INIT_COMMON_CHARGE,saveAndNew:e,uuid:n.data.uuid,flowNumber:n.data.flowNumber}),a.default.info("保存成功"))})}},t.changeStateAndAbstract=function(e,t){return function(n){var a=e.get("propertyCarryover"),r=e.get("name"),i=e.get("propertyPay"),o=e.get("propertyTax");n(A("card","runningAbstract",{STATE_YYSR_DJ:"收到预收款",STATE_YYSR_XS:"销售"+("SX_HW"===a?"存货":"")+"收入",STATE_YYSR_TS:("SX_HW"===a?"销货":"销售")+"退回支出",STATE_YYZC_DJ:"支付预付款",STATE_YYZC_GJ:"采购"+("SX_HW"===a?"存货":"")+"支出",STATE_YYZC_TG:("SX_HW"===a?"购货":"采购")+"退还收入",STATE_FY_DJ:"支付预付款",STATE_FY_YF:r+"支出",STATE_FY_WF:r+"支出",STATE_XC_JT:"计提"+{SX_GZXJ:"工资薪金",SX_SHBX:"社会保险",SX_ZFGJJ:"住房公积金",SX_QTXC:r}[i],STATE_XC_FF:"发放"+{SX_GZXJ:"工资薪金",SX_QTXC:r}[i],STATE_XC_JN:"缴纳"+{SX_SHBX:"社会保险",SX_ZFGJJ:"住房公积金"}[i],STATE_XC_YF:"福利费支出",STATE_SF_YJZZS:"预缴增值税",STATE_SF_JN:""+{SX_QYSDS:"缴纳企业所得税",SX_GRSF:"代缴个人税费",SX_QTSF:"缴纳"+r,SX_ZZS:"缴纳增值税"}[o],STATE_SF_JT:"计提"+{SX_QYSDS:"企业所得税",SX_GRSF:"个人税费",SX_QTSF:""+r,SX_ZZS:"增值税"}[o],STATE_YYWSR_WS:r,STATE_YYWSR_YS:r,STATE_YYWZC_WF:r,STATE_YYWZC_YF:r,STATE_ZS_SQ:"暂收款",STATE_ZS_TH:"暂收款退还",STATE_ZF_FC:"暂付款",STATE_ZF_SH:"暂付款收回",STATE_CQZC_WF:"购进资产支出",STATE_CQZC_YF:"购进资产支出",STATE_CQZC_ZJTX:"资产折旧摊销",STATE_CQZC_WS:"处置资产收入",STATE_CQZC_YS:"处置资产收入",STATE_CQZC_JZSY:"长期资产处置损益",STATE_JK_YS:"收到借款",STATE_JK_JTLX:"计提借款利息",STATE_JK_ZFLX:"支付借款利息",STATE_JK_YF:"偿还本金支出",STATE_TZ_YF:"对外投资支出",STATE_TZ_SRGL:"收到投资收益",STATE_TZ_JTGL:"计提投资收益",STATE_TZ_JTLX:"计提投资收益",STATE_TZ_SRLX:"收到投资收益",STATE_TZ_WS:"收回投资款",STATE_TZ_YS:"收回投资款",STATE_ZB_ZZ:"增加注册资本",STATE_ZB_ZFLR:"支付分配利润",STATE_ZB_LRFP:"计提分配利润",STATE_ZB_JZ:"减少注册资本"}[t]))}}),P=(t.getUploadGetTokenFetch=function(){return function(e,t){var n=t().allState.get("expire"),a=Date.parse(new Date)/1e3;console.log(n,a,n<a+300),n<a+300&&(0,s.default)("aliyunOssPolicy","GET","",function(t){e({type:o.AFTER_GET_UPLOAD_SIGNATURE,receivedData:t.data,code:t.code})})}},t.switchLoadingMask=function(){return{type:o.SWITCH_LOADING_MASK}},t.uploadFiles=function(e,t,n,a,r,i){return function(a){var s=[];s.push({fileName:n,enclosurePath:r.data.enclosurePath,size:(r.data.size/1024).toFixed(2),imageOrFile:r.data.mimeType.toString().toUpperCase().indexOf("IMAGE")>-1?"TRUE":"FALSE",label:"无标签",beDelete:!1,mimeType:r.data.mimeType}),(0,u.default)("insertEnclosure","POST",JSON.stringify({enclosureList:s}),function(n){if((0,l.showMessage)(n))if("business"===e||"LB_GGFYFT"===t||"LB_SFGL"===t||"LB_JZSY"===t)a({type:o.CHANGE_RUNNING_ENCLOSURE_LIST,imgArr:n.data.enclosureList});else{var r={LB_JZCB:function(){return"costTransferTemp"},LB_FPRZ:function(){return"invoiceAuthTemp"},LB_KJFP:function(){return"invoicingTemp"},LB_ZCWJZZS:function(){return"transferOutTemp"},LB_ZZ:function(){return"InternalTransferTemp"},LB_ZJTX:function(){return"DepreciationTemp"}}[t]();a({type:o.CHANGE_CALCULATE_ENCLOSURE_LIST,imgArr:n.data.enclosureList,place:r})}i&&a({type:o.SWITCH_LOADING_MASK})})}},t.deleteUploadFJUrl=function(e,t,n){return function(a){if("business"===t||"LB_GGFYFT"===n||"LB_SFGL"===n||"LB_JZSY"===n)a({type:o.DELETE_UPLOAD_FJ_URL,index:e});else{var r=({LB_JZCB:function(){return"costTransferTemp"},LB_FPRZ:function(){return"invoiceAuthTemp"},LB_KJFP:function(){return"invoicingTemp"},LB_ZCWJZZS:function(){return"transferOutTemp"},LB_ZZ:function(){return"InternalTransferTemp"},LB_ZJTX:function(){return"DepreciationTemp"}}[n]||function(){return""})();a({type:o.DELETE_CALCULATE_UPLOAD_FJ_URL,index:e,place:r})}}},t.initLabel=function(){return function(e){(0,u.default)("initLsLabel","POST","",function(e){(0,l.showMessage)(e)})}},t.getLabelFetch=function(e,t){return function(n){n({type:o.SWITCH_LOADING_MASK});var a=({LB_JZCB:function(){return"costTransferTemp"},LB_FPRZ:function(){return"invoiceAuthTemp"},LB_KJFP:function(){return"invoicingTemp"},LB_ZCWJZZS:function(){return"transferOutTemp"},LB_ZZ:function(){return"InternalTransferTemp"},LB_ZJTX:function(){return"DepreciationTemp"}}[t]||function(){return""})();(0,u.default)("getLsLabel","POST","",function(r){n({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(r)&&n("business"===e||""===t||"LB_GGFYFT"===t||"LB_SFGL"===t||"LB_JZSY"===t?{type:o.GET_LS_LABEL_FETCH,receivedData:r}:{type:o.GET_CAL_LABEL_FETCH,receivedData:r,setPlace:a})})}},t.changeTagName=function(e,t,n,a){return function(r){var i=({LB_JZCB:function(){return"costTransferTemp"},LB_FPRZ:function(){return"invoiceAuthTemp"},LB_KJFP:function(){return"invoicingTemp"},LB_ZCWJZZS:function(){return"transferOutTemp"},LB_ZZ:function(){return"InternalTransferTemp"},LB_ZJTX:function(){return"DepreciationTemp"}}[a]||function(){return""})();r("business"===n||""===a||"LB_GGFYFT"===a||"LB_SFGL"===a||"LB_JZSY"===a?{type:o.CHANGE_LS_TAG_NAME,index:e,value:t}:{type:o.CHANGE_CAL_TAG_NAME,index:e,value:t,setPlace:i})}},t.getAssetsCleaningCategory=function(){return function(e){(0,u.default)("getAssetsCleaningCategory","POST",JSON.stringify({type:"LB_JZSY"}),function(t){(0,l.showMessage)(t)&&e(A("Cqzc","assetsCategory",(0,d.fromJS)(t.data.result)))})}}),w=(t.getAssetsCarryoverList=function(e,t){return function(n){(0,u.default)("getAssetsCarryoverList","POST",JSON.stringify({runningDate:e,categoryUuid:t}),function(e){(0,l.showMessage)(e)&&n(A("Cqzc",["detail","businessList"],(0,d.fromJS)(e.data.result)))})}},t.calculateGainForJzsy=function(){return function(e,t){var n=t().lrAccountState.get("CqzcTemp"),a=n.get("detail").get("businessList").reduce(function(e,t){return t.get("beSelect")?e+(Number(t.get("amount"))-Number(t.get("tax"))):e},0),r=n.getIn(["detail","acAssets","depreciationAmount"]),i=n.getIn(["detail","acAssets","originalAssetsAmount"]),u=(Number(i)-Number(r)).toFixed(2),s=Math.abs(u-a).toFixed(2),l=void 0,c=void 0;Number(u)<=a?(l=["CqzcTemp","detail","netProfitAmount"],c=["CqzcTemp","detail","lossAmount"]):(l=["CqzcTemp","detail","lossAmount"],c=["CqzcTemp","detail","netProfitAmount"]),e(A("Cqzc",["detail","amount"],a)),(i||r)&&a>0&&e({type:o.CALCULATE_GAIN_OR_LOSS,deletePlace:c,place:l,diff:s})}}),G=(t.insertlrAccountJzsy=function(e){return function(t,n){var r=n().lrAccountState,s=r.getIn(["flags","paymentInsertOrModify"]),c=r.get("CqzcTemp").get("detail").toJS(),f=r.getIn(["flags","uuidList"]),m=r.get("enclosureList").toJS(),g=r.get("needDeleteUrl").toJS(),p=m.concat(g);t({type:o.SWITCH_LOADING_MASK}),(0,u.default)(s+"AssetsCleaning","POST",JSON.stringify(i({},c,{enclosureList:p})),function(n){if(t({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(n))if(a.default.success("成功"),e)t({type:o.AFTER_INSERT_JZSY,saveAndNew:e}),t(P());else{var r=n.data,i=r.flowNumber,u=r.uuid;t({type:o.AFTER_INSERT_JZSY,saveAndNew:e,flowNumber:i,uuid:u}),t(F((0,d.fromJS)({uuid:n.data.uuid}),f))}})}},t.getJzsyProjectCardList=function(e){return function(t,n){t(A("Cqzc",["detail","beProject"],!0)),t(A("Cqzc","projectRange",e));var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,u.default)("getProjectCardList","POST",JSON.stringify({sobId:a,categoryList:e,needCommonCard:!1}),function(e){(0,l.showMessage)(e)&&t(A("Cqzc","projectList",(0,d.fromJS)(e.data.result)))})}}),F=t.getInitLraccountJzsy=function(e,t){return function(n){var a=e.get("uuid");n({type:o.SWITCH_LOADING_MASK}),(0,u.default)("getRunningBusiness","GET","uuid="+a,function(e){n({type:o.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(n({type:o.INIT_JZSY_FROM_CXLS,data:e.data.result,uuidList:t,uuid:a}),n(w()),e.data.beProject&&n(G(e.data.projectRange)))})}}},1237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=c(n(100)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(99);var u=c(n(1)),s=n(17),l=(n(101),n(22));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=(0,s.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={formate:!0},d(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),o(t,[{key:"render",value:function(){var e=this,t=(this.props.showZero,this.state.formate?this.props.value&&Number(this.props.value)?(0,l.formatMoney)(this.props.value,this.props.PointDisabled?0:2):"":this.props.value);return u.default.createElement(r.default,i({},this.props,{value:t||"",onFocus:function(t){"function"==typeof e.props.onFocus&&e.props.onFocus(t),e.setState({formate:!1},function(){e.nameInput&&e.nameInput.select()})},onBlur:function(t){"function"==typeof e.props.onBlur&&e.props.onBlur(t),e.setState({formate:!0})},ref:function(t){return e.nameInput=t}}))}}]),t}())||a;t.default=f},1239:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitLraccountJzsy=t.deleteSingleFlow=t.jumpCommonCharge=t.changeBeforeAmount=t.getManagerCategoryList=t.insertManagerModal=t.setDefineMadalInitState=t.setInvioceMadalInitState=t.setCarryoverMadalInitState=t.setManageMadalInitState=t.changeCxAccountCommonOutString=t.changeCxAccountCommonString=t.changeCurrentPage=t.jumpCalculateCxToLr=t.getBusinessBeforeSwitch=t.insertlrAccountInvioceDefineModal=t.insertlrAccountInvioceModal=t.insertlrAccountJzsyModal=t.insertlrAccountCarryoverModal=t.insertlrAccountManagerModal=t.getBusinessDefineModal=t.getBusinessInvioceModal=t.calculateGainForJzsy=t.getBusinessJzsyModal=t.getBusinessCarryoverModal=t.getBusinessManagerModal=t.getBusinessPayment=t.beforeRunningPayOrReceive=t.currentPz=t.deleteVcItemFetch=t.getAccountDimensionFetch=t.afterModifyAccountAllList=t.changePzCommonString=t.runningInsertVc=t.deleteAccountItemCardAndRunning=t.accountItemCheckboxCheck=t.accountItemCheckboxCheckAll=t.getBusinessList=t.getPeriodAndBusinessList=t.cxlsDownloadEnclosure=void 0;var a=S(n(37)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(38);var i=C(n(1274)),o=S(n(52)),u=n(18),s=n(22),l=C(n(30)),c=C(n(27)),d=C(n(43)),f=C(n(60)),m=C(n(1243)),g=C(n(1245)),p=C(n(1242)),_=C(n(1229)),T=C(n(1249));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}t.cxlsDownloadEnclosure=function(e,t){return function(n){n(_.lsDownloadEnclosure(e,t))}},t.getPeriodAndBusinessList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"allWater",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(r,u){r({type:i.SWITCH_LOADING_MASK});var l="allWater"==t?"getRunningBusinessList":"getRunning"+t+"List",f=(u().cxlsState,""===a?1:a);(0,o.default)(l,"POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",getPeriod:"true",accountUuid:n,currentPage:f,pageSize:c.CXLS_LIMIE_LENGTH}),function(a){if(r({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(a)){var o=a.data.periodDtoJson.openedyear+"年第"+a.data.periodDtoJson.openedmonth+"期",u=e||o,l=a.data.periodDtoJson?r(d.everyTableGetIssuedate(a.data.periodDtoJson)):"";r({type:i.GET_BUSINESS_LIST,receivedData:a.data.result.childList,receivedExtra:a.data.result,period:a.data.periodDtoJson,issuedate:u,getPeriod:"true",issues:l,waterType:t,accountUuid:n,currentPage:f,pageCount:a.data.pageCount})}}),r(p.getRunningAccount())}};var E=t.getBusinessList=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",f=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return function(g,p){g({type:i.SWITCH_LOADING_MASK});var _="allWater"==t?"getRunningBusinessList":"getRunning"+t+"List",T=m&&n?n.split(c.TREE_JOIN_STR)[0]:"",C=p().cxlsState,S=""===r?C.get("currentPage"):r,E=l?C.getIn(["flags","searchType"]):"";(0,o.default)(_,"POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",accountUuid:T,getPeriod:"true",orderBy:u,searchType:E,searchContent:l,isAsc:f,currentPage:S,pageSize:c.CXLS_LIMIE_LENGTH,isAccount:m}),function(r){if(g({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(r)){var o=r.data.periodDtoJson?g(d.everyTableGetIssuedate(r.data.periodDtoJson)):"";g({type:i.GET_BUSINESS_LIST,receivedData:r.data.result.childList,receivedExtra:r.data.result,period:r.data.periodDtoJson,issuedate:e,issues:o,waterType:t,accountUuid:n,currentPage:S,isAsc:f,orderBy:u,isAccount:m,pageCount:r.data.pageCount,getPeriod:"true"}),r.data.result.msg&&a.default.info(r.data.result.msg)}})}},A=(t.accountItemCheckboxCheckAll=function(e,t){return{type:i.CXLS_ITEM_CHECKBOX_CHECK_ALL,selectAll:e,list:t}},t.accountItemCheckboxCheck=function(e,t){return{type:i.CXLS_ITEM_CHECKBOX_CHECK,checked:e,item:t}},t.deleteAccountItemCardAndRunning=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2];return function(r,u){var c=n||u().cxlsState.getIn(["flags","selectList"]),d="reality"==e?"payment":"business",f=u().cxlsState,m=f.getIn(["flags","issuedate"]),g=f.getIn(["flags","mainWater"]),p=f.getIn(["flags","isAsc"]),_=f.getIn(["flags","isAccount"]),T=f.getIn(["flags","curAccountUuid"]);l.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&(r({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunning"+d,"POST",JSON.stringify({deleteList:c}),function(e){if((0,s.showMessage)(e)){if(e.message)if(e.data.errorList.length){var n=e.data.errorList.join(",");a.default.error(n)}else a.default.success(e.message);r(E(m,g,T,"","",t,p,_))}r({type:i.SWITCH_LOADING_MASK})}))}})}},t.runningInsertVc=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",u=arguments[4],l=arguments[5],c=arguments[6],d=arguments[7];return function(f,g){var p=g().cxlsState,_=p.get("currentPage"),T=p.getIn(["flags","mainWater"]),C=p.getIn(["flags","curAccountUuid"]),S=p.getIn(["flags","isAsc"]),y=p.getIn(["flags","isAccount"]),L=0;f(A(["flags","pzDealNum"],L)),f(A(["flags","pzDealType"],"insert"));var N=e.sort(function(e,t){return parseInt(e.get("flowNumber"))-parseInt(t.get("flowNumber"))});if(e&&e.size>1)f(A(["flags","pzDealStatus"],!0)),function e(i){var u=0,l=setInterval(function(){u<.9?f(A(["flags","pzDealNum"],L+(u+=.01))):(clearInterval(l),f(A(["flags","pzDealNum"],L)))},100);(0,o.default)("insertRunning"+t+"Vc","POST",JSON.stringify({uuidList:[i]}),function(t){if((0,s.showMessage)(t))if(t.message)if(t.data.result.length){var i=t.data.result.join(",");a.default.error(i),clearInterval(l),f(A(["flags","pzDealStatus"],!1)),f(E(n,T,C,_,"",r,S,y))}else f(A(["flags","pzDealNum"],L+=1)),L<N.size?(clearInterval(l),e(N.getIn([L,"uuid"]))):(clearInterval(l),f(A(["flags","pzDealStatus"],!1)),f(E(n,T,C,_,"",r,S,y)));else clearInterval(l),f(A(["flags","pzDealStatus"],!1));else clearInterval(l),f(A(["flags","pzDealStatus"],!1)),f(E(n,T,C,_,"",r,S,y))})}(N.getIn([0,"uuid"]));else{var O=e.getIn([0,"uuid"]);f({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertRunning"+t+"Vc","POST",JSON.stringify({uuidList:[O]}),function(e){if(f({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&e.message){if(e.data.result.length){var t=e.data.result.join(",");a.default.error(t)}else a.default.success(e.message);l&&l()||f(I()),u&&f(m.getYllsBusinessData(c,d))}})}}},t.changePzCommonString=function(e,t){return function(n){n({type:i.CHANGE_PZ_COMMON_STRING,name:e,value:t})}}),I=t.afterModifyAccountAllList=function(e){return function(t,n){var a=n().cxlsState,r=a.getIn(["flags","issuedate"]),u=a.getIn(["flags","mainWater"]),l=a.getIn(["flags","curAccountUuid"]),f=a.getIn(["flags","isAccount"]),m=a.getIn(["flags","isAsc"]),g=a.get("currentPage"),p="allWater"==u?"getRunningBusinessList":"getRunning"+u+"List",_=f&&l?l.split(c.TREE_JOIN_STR)[0]:"";t({type:i.SWITCH_LOADING_MASK}),(0,o.default)(p,"POST",JSON.stringify({year:r?r.substr(0,4):"",month:r?r.substr(6,2):"",accountUuid:_,getPeriod:"true",orderBy:"",isAsc:m,currentPage:g,pageSize:c.CXLS_LIMIE_LENGTH,isAccount:f}),function(n){if(t({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(n)){var a=n.data.periodDtoJson?t(d.everyTableGetIssuedate(n.data.periodDtoJson)):"";t({type:i.GET_BUSINESS_LIST,receivedData:n.data.result.childList,receivedExtra:n.data.result,period:n.data.periodDtoJson,issuedate:r,issues:a,isReflash:e,waterType:u,isAccount:f,accountUuid:l,currentPage:g,isAsc:m,pageCount:n.data.pageCount,getPeriod:"true"})}})}},y=(t.getAccountDimensionFetch=function(e,t,n,a,r,i,o){return function(u){u(y(e,t,n,a,r,i,o))}},function(e,t,n,a,r,u,l,c){return function(e){(0,o.default)("getRunningSettingInfo","GET","",function(t){(0,s.showMessage)(t)&&e({type:i.GET_CXLSCONF_ALL_SETTINGS,receivedData:t.data})})}}),L=(t.deleteVcItemFetch=function(e,t,n,a,r,u,l,c,d){return function(f,g){var p=g().cxlsState,_=p.get("currentPage"),T=p.getIn(["flags","mainWater"]),C=p.getIn(["flags","isAccount"]),S=p.getIn(["flags","isAsc"]),y=p.getIn(["flags","curAccountUuid"]),L=0;f(A(["flags","pzDealNum"],L)),f(A(["flags","pzDealType"],"delete"));n&&n.length>1?(f(A(["flags","pzDealStatus"],!0)),function i(u){var l=0,c=setInterval(function(){l<.99?f(A(["flags","pzDealNum"],L+(l+=.01))):(clearInterval(c),f(A(["flags","pzDealNum"],L+.99)))},100);(0,o.default)("deletevc","POST",JSON.stringify({year:e,month:t,vcindexlist:[u]}),function(e){(0,s.showMessage)(e,"show")?(L+=1,f(A(["flags","pzDealNum"],Math.floor(L))),L<n.length?(clearInterval(c),i(n[L])):(clearInterval(c),f(A(["flags","pzDealStatus"],!1)),f(E(a,T,y,_,"",r,S,C)))):(clearInterval(c),f(A(["flags","pzDealStatus"],!1)),f(E(a,T,y,_,"",r,S,C)))})}(n[0])):(f({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deletevc","POST",JSON.stringify({year:e,month:t,vcindexlist:n}),function(e){if(f({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e,"show")){var t=g().cxlsState;t.get("currentPage"),t.getIn(["flags","mainWater"]),t.getIn(["flags","curAccountUuid"]),t.getIn(["flags","isAsc"]),t.getIn(["flags","isAccount"]);l&&l()||f(I()),u&&f(m.getYllsBusinessData(c,d))}}))}},t.currentPz=function(e,t,n){return{type:i.SET_CURRENT_PZ,year:e,month:t,vcIndexList:n}},t.beforeRunningPayOrReceive=function(e,t,n,a,r){return function(o){n<0&&(n=-n,e="收"===e?"付":"收"),o({type:i.BEFORE_RUNNING_PAY_OR_RECEIVE,payDirection:e,assList:t,notHandleAmount:n,uuidList:a,runningList:r})}},t.getBusinessPayment=function(e,t,n){return function(a){a({type:i.SWITCH_LOADING_MASK});var r=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+r,function(r){if(a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(r)){var o=r.data.result,u=void 0,l=o.assList;if(l&&l.length)u=l[0].assId+" "+l[0].assName;else{var c=o.acList;u=c.length?c[0].acFullName:""}a({type:i.INIT_PAYMENT_STATE,item:e,result:o,assName:u,stateType:t,uuidList:n,fromCxls:!0}),a(_.getRunningSettingInfo()),a(_.accountTotalAmount()),a(f.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),a(f.addHomeTabpane("Edit","LrAccount","录入流水"))}})}}),N=(t.getBusinessManagerModal=function(e,t,n){return function(a,r){a({type:i.SWITCH_LOADING_MASK});var l=e.get("uuid"),c=e.get("beOpened"),d=e.get("assType"),f=r().lrCalculateState,m=f.getIn(["calculateTemp","usedCard"]),g=f.getIn(["calculateTemp","cardUuid"]);(0,o.default)("getRunningBusiness","GET","uuid="+l,function(e){a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&(a(O("runningFlowTemp",(0,u.fromJS)(e.data.result))),a(O(["runningFlowTemp","magenerType"],n)),a(O(["modalTemp","uuidList"],(0,u.fromJS)([{uuid:l,assType:d}]))),a(O(["modalTemp","handlingAmount"],e.data.result.notHandleAmount)),a(O(["modalTemp","runningAbstract"],e.data.result.runningAbstract)),a(O(["modalTemp","beOpened"],c)),a(O(["modalTemp","assType"],d)),c&&(a(O(["modalTemp","usedCard"],m)),a(O(["modalTemp","cardUuid"],g)),a(h(0,d))),t())})}},t.getBusinessCarryoverModal=function(e,t,n){return function(n){n({type:i.SWITCH_LOADING_MASK});var a=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)){var a=e.data.result;n(O("runningFlowTemp",(0,u.fromJS)(e.data.result))),n(O(["modalTemp","uuidList"],(0,u.fromJS)([a.uuid]))),n(O(["modalTemp","runningState"],a.runningState)),n(O(["modalTemp","categoryUuid"],a.categoryUuid)),n(O(["modalTemp","runningAbstract"],a.runningAbstract)),n(O(["modalTemp","stockCardList"],a.acBusinessIncome.stockCardList)),t()}})}},t.getBusinessJzsyModal=function(e,t,n){return function(n,a){n({type:i.SWITCH_LOADING_MASK});var l=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+l,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)){var l=e.data.result;if(n(O("runningFlowTemp",(0,u.fromJS)(e.data.result))),n(O(["modalTemp","uuidList"],(0,u.fromJS)([l.uuid]))),n(O(["modalTemp","runningState"],l.runningState)),n(O(["modalTemp","categoryUuid"],l.categoryUuid)),n(O(["modalTemp","runningAbstract"],l.runningAbstract)),n(O(["modalTemp","amount"],l.amount-l.tax)),n(O(["modalTemp","businessList"],(0,u.fromJS)(r({},e.data.result,{beSelect:!0})))),e.data.result.beProject){var c=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]),d=e.data.result.projectRange;(0,o.default)("getProjectCardList","POST",JSON.stringify({sobId:c,categoryList:d,needCommonCard:!1}),function(e){(0,s.showMessage)(e)&&n(O(["flags","projectList"],(0,u.fromJS)(e.data.result)))})}t()}})}},t.calculateGainForJzsy=function(){return function(e,t){var n=t().cxlsState,a=n.get("modalTemp"),r=n.get("runningFlowTemp"),o=r.get("amount")-r.get("tax"),u=a.getIn(["acAssets","depreciationAmount"])?a.getIn(["acAssets","depreciationAmount"]):0,s=a.getIn(["acAssets","originalAssetsAmount"])?a.getIn(["acAssets","originalAssetsAmount"]):0;console.log(u,s);var l=(Number(s)-Number(u)).toFixed(2),c=Math.abs(l-o).toFixed(2),d=void 0,f=void 0;Number(l)<=o?(d=["modalTemp","netProfitAmount"],f=["modalTemp","lossAmount"]):(d=["modalTemp","lossAmount"],f=["modalTemp","netProfitAmount"]),(s||u)&&e({type:i.CXLS_CALCULATE_GAIN_OR_LOSS,deletePlace:f,place:d,diff:c})}},t.getBusinessInvioceModal=function(e,t,n){return function(n){n({type:i.SWITCH_LOADING_MASK});var a=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)){var a=e.data.result,r={STATE_YYSR_TS:"BILL_MAKE_OUT_TYPE_TS",STATE_YYSR_XS:"BILL_MAKE_OUT_TYPE_XS"}[a.runningState];n(O(["modalTemp","uuidList"],(0,u.fromJS)([a.uuid]))),n(O(["modalTemp","categoryUuid"],a.categoryUuid)),n(O(["modalTemp","runningAbstract"],a.runningAbstract)),n(O(["modalTemp","billMakeOutType"],r)),t()}})}},t.getBusinessDefineModal=function(e,t,n){return function(n){n({type:i.SWITCH_LOADING_MASK});var a=e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)){var a=e.data.result,r={STATE_YYZC_GJ:"BILL_AUTH_TYPE_CG",STATE_YYZC_TG:"BILL_AUTH_TYPE_TG"}[a.runningState]||"BILL_AUTH_TYPE_CG";n(O(["modalTemp","uuidList"],(0,u.fromJS)([a.uuid]))),n(O(["modalTemp","runningAbstract"],a.runningAbstract)),n(O(["modalTemp","categoryUuid"],a.categoryUuid)),n(O(["modalTemp","billAuthType"],r)),t()}})}},t.insertlrAccountManagerModal=function(e,t,n){return function(a,r){var l=r().cxlsState,c=l.get("runningFlowTemp"),d=l.get("modalTemp"),f=d.get("runningDate"),m=d.get("runningAbstract"),g=d.get("accountUuid"),p=d.get("handlingAmount"),_=d.get("beOpened"),T=d.get("uuidList").toJS(),C=_?d.get("cardUuid"):c.getIn([t,"contactsCardRange","uuid"]);a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertRunningpayment","POST",JSON.stringify({runningDate:f,runningAbstract:m,accountUuid:g,amount:p,uuidList:T,cardUuid:C,uuid:""}),function(t){a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(t)&&(e(),a(O("modalTemp",(0,u.fromJS)({runningDate:(0,s.formatDate)()}))),a("fromcalCultion"===n?R():I()))})}},t.insertlrAccountCarryoverModal=function(e,t){return function(n,a){var r=a().cxlsState.get("modalTemp"),l=r.get("uuidList"),c=r.get("runningState"),d=r.get("runningDate"),f=r.get("runningAbstract"),m=r.get("stockCardList"),g=r.get("carryoverAmount"),p=[];m&&m.map(function(e){p.push({uuid:e.uuid,amount:g})}),n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertCarryoverItem","POST",JSON.stringify({uuidList:l,runningState:c,runningDate:d,cardList:p,runningAbstract:f}),function(a){(0,s.showMessage)(a,"show")&&(e(),n(O("modalTemp",(0,u.fromJS)({runningDate:(0,s.formatDate)()}))),n("fromcalCultion"===t?R():I())),n({type:i.SWITCH_LOADING_MASK})})}},t.insertlrAccountJzsyModal=function(e,t){return function(n,a){var l=a().cxlsState.get("modalTemp").toJS();n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertAssetsCleaning","POST",JSON.stringify(r({},l)),function(a){(0,s.showMessage)(a,"show")&&(e(),n(O("modalTemp",(0,u.fromJS)({runningDate:(0,s.formatDate)()}))),n("fromcalCultion"===t?R():I())),n({type:i.SWITCH_LOADING_MASK})})}},t.insertlrAccountInvioceModal=function(e,t){return function(n,a){var r=a().cxlsState.get("modalTemp");n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertBusinessMakeoutItem","POST",JSON.stringify(r),function(a){(0,s.showMessage)(a,"show")&&(e(),n(O("modalTemp",(0,u.fromJS)({runningDate:(0,s.formatDate)()}))),n("fromcalCultion"===t?R():I())),n({type:i.SWITCH_LOADING_MASK})})}},t.insertlrAccountInvioceDefineModal=function(e,t){return function(n,a){var r=a().cxlsState.get("modalTemp");n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertBusinessAuthItem","POST",JSON.stringify(r),function(a){(0,s.showMessage)(a,"show")&&(e(),n(O("modalTemp",(0,u.fromJS)({runningDate:(0,s.formatDate)()}))),n("fromcalCultion"===t?R():I())),n({type:i.SWITCH_LOADING_MASK})})}},t.getBusinessBeforeSwitch=function(e,t){return function(n){var a=e.get("parentUuid")?e.get("parentUuid"):e.get("uuid"),r=e.get("beBusiness"),i=e.get("runningState");n(r||"STATE_ZZ"===i?"STATE_YYSR_JZCB"===i?N(e,"modify","LB_JZCB"):"STATE_FPRZ_CG"===i||"STATE_FPRZ_TG"===i?N(e,"modify","LB_FPRZ"):"STATE_KJFP_XS"===i||"STATE_KJFP_TS"===i?N(e,"modify","LB_KJFP"):"STATE_ZCWJZZS"===i?N(e,"modify","LB_ZCWJZZS"):"STATE_ZZ"===i?N(e,"modify","LB_ZZ"):"STATE_CQZC_ZJTX"===i?N(e,"modify","LB_ZJTX"):"STATE_GGFYFT"===i?v(e,t):"STATE_CQZC_JZSY"===i?_.getInitLraccountJzsy(e,t):g.getRunningBusinessDuty("",a):L(e))}},t.jumpCalculateCxToLr=function(e,t,n,a){return function(r,u){r({type:i.SWITCH_LOADING_MASK});var l=e.get("parentUuid")?e.get("parentUuid"):e.get("uuid");(0,o.default)("getRunningBusiness","GET","uuid="+l,function(u){(0,s.showMessage)(u)?(0,o.default)("getRunningSettingInfo","GET","",function(o){if((0,s.showMessage)(u)){var l={LB_JZCB:function(){return"COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS"},LB_FPRZ:function(){return"INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS"},LB_KJFP:function(){return"INVOICING_FROM_CXLS_JUMP_TO_LRLS"},LB_ZCWJZZS:function(){return"TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS"},LB_ZZ:function(){return"TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ"},LB_ZJTX:function(){return"TRANSFER_OUT_FROM_CXLS_JUMP_TO_ZJTX"}}[n]();r({type:i.GET_ACCOUNTCONF_ALL_SETTINGS,receivedData:o.data}),r({type:i.CALCULATE_FROM_CXLS_JUMP_TO_LRLS,pageType:n,rate:o.data.rate,hideCategoryList:o.data.hideCategoryList}),r({type:i.CALCULATE_CHANGE_QUERY}),r({type:i[l],item:e,receivedData:u.data,insertOrModify:t,fromRefresh:!0,rate:o.data.rate,hideCategoryList:o.data.hideCategoryList,uuidList:a}),r({type:i.SWITCH_LOADING_MASK}),r(f.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),r(f.addHomeTabpane("Edit","LrAccount","录入流水"))}else r({type:i.SWITCH_LOADING_MASK})}):r({type:i.SWITCH_LOADING_MASK})})}}),O=(t.changeCurrentPage=function(e,t){return function(n){n({type:i.CHANGE_CURRENT_PAGE_FZHE,assList:e,value:t})}},t.changeCxAccountCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t));"flags"===t[0]&&(r=t),a({type:i.CHANGE_CX_ACCOUNT_COMMON_STRING,tab:e,placeArr:r,value:n})}},t.changeCxAccountCommonOutString=function(e,t){return function(n){n("string"==typeof e?{type:i.CHANGE_CX_ACCOUNT_COMMON_STRING,place:e,value:t}:{type:i.CHANGE_CX_ACCOUNT_COMMON_STRING,placeArr:e,value:t})}}),h=(t.setManageMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["payManageList","childList"]),r=(n.getIn(["flags","selectDate"]),n.getIn(["flags","selectList"])),i=n.getIn(["calculateTemp","cardUuid"]),o=n.getIn(["calculateTemp","usedCard"]),s=[],l=0;r.forEach(function(e){var t=a.find(function(t){return t.get("uuid")===e}),n=t.get("direction"),r=t.get("flowType"),i=t.get("assType");s.push({uuid:e,assType:i});var o=t.get("notHandleAmount"),u=t.get("runningState");"STATE_YYSR_TS"!==u&&"STATE_YYZC_TG"!==u||(o=-Math.abs(o)),"debit"===n?"FLOW_INADVANCE"===r?l-=Number(o):l+=Number(o):"FLOW_INADVANCE"===r?l+=Number(o):l-=Number(o)}),e(O(["modalTemp","uuidList"],(0,u.fromJS)(s))),e(O(["modalTemp","handlingAmount"],l)),e(O(["modalTemp","cardUuid"],i)),e(O(["modalTemp","usedCard"],o))}},t.setCarryoverMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["calculateTemp","stockUuid"]),i=n.getIn(["flags","costTransferType"]);e(O(["modalTemp","uuidList"],a)),e(O(["modalTemp","runningState"],i)),e(O(["modalTemp","cardList"],(0,u.fromJS)([{uuid:r,amount:""}])))}},t.setInvioceMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["flags","invoicingType"]);e(O(["modalTemp","uuidList"],a)),e(O(["modalTemp","billMakeOutType"],r))}},t.setDefineMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["flags","certifiedType"]);e(O(["modalTemp","uuidList"],a)),e(O(["modalTemp","billAuthType"],r))}},t.insertManagerModal=function(e){return function(t,n){var a=n().cxlsState.get("modalTemp"),r=a.get("runningDate"),l=a.get("runningAbstract"),c=a.get("accountUuid"),d=a.get("cardUuid"),f=a.get("handlingAmount")?Math.abs(a.get("handlingAmount")):0,m=a.get("uuidList").toJS();t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertRunningpayment","POST",JSON.stringify({runningDate:r,runningAbstract:l,accountUuid:c,amount:f,uuidList:m,cardUuid:d,uuid:""}),function(n){t({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(n)&&(e(),t(O("modalTemp",(0,u.fromJS)({runningDate:(0,s.formatDate)(),uuidList:[]}))),t(R()))})}},t.getManagerCategoryList=function(e,t){return function(n){(0,o.default)("getManagerCategoryList","POST",JSON.stringify({assType:t}),function(t){n(O(["flags","managerCategoryList",e],(0,u.fromJS)(t.data)))})}}),v=(t.changeBeforeAmount=function(e,t,n){return function(a,r){t.split(c.TREE_JOIN_STR)[0];var i=t.split(c.TREE_JOIN_STR)[1],o=t.split(c.TREE_JOIN_STR)[2],s=e.get("uuid");a(O(["modalTemp","uuidList",n],(0,u.fromJS)({beOpened:!0,categoryUuid:o,uuid:s,categoryName:i})))}},t.jumpCommonCharge=function(e,t){return function(n){var a=e.get("uuid");n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&n({type:i.INIT_COMMON_CHARGE_FROM_CXLS,data:e.data.result,uuidList:t,uuid:a}),n(_.getRunningSettingInfo()),n(f.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),n(f.addHomeTabpane("Edit","LrAccount","录入流水"))})}}),R=function(){return function(e,t){var n=t().calculationState,a=n.get("flags"),r=n.getIn(["calculateTemp","cardUuid"]),i=n.getIn(["calculateTemp","stockUuid"]),o=a.get("issuedate"),u=a.get("curCategory"),s=a.get("isCheck"),l=a.get("accountingType"),c=n.get("certificationList"),d=n.get("invoicingList"),f=c.get("billAuthType"),m=d.get("billMakeOutType"),g=n.getIn(["costTransferList","runningState"]);switch(l){case"manages":e(T.getCalculateList(o,l,"",u,r,s,""));break;case"invoicing":e(T.getCalculateInvoicingList(o,u,m,""));break;case"certification":e(T.getCalculateCertificationList(o,u,f,""));break;case"costTransfer":e(T.getCalculateCarryoverList(o,g,"","",i))}}};t.deleteSingleFlow=function(e,t){return function(n){var r=[e];l.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&(n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunningbusiness","POST",JSON.stringify({deleteList:r}),function(e){if((0,s.showMessage)(e)){if(e.message)if(e.data.errorList.length){var r=e.data.errorList.join(",");a.default.error(r)}else a.default.success(e.message);!e.data.errorList.length&&t()}n({type:i.SWITCH_LOADING_MASK})}))}})}},t.getInitLraccountJzsy=function(e,t){return function(n){var a=e.get("uuid");n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusiness","GET","uuid="+a,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&(n({type:i.INIT_JZSY_FROM_CXLS,data:e.data.result,uuidList:t,uuid:a}),e.data.result.beProject&&n(_.getJzsyProjectCardList(e.data.result.projectRange))),n(_.getRunningSettingInfo()),n(f.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),n(f.addHomeTabpane("Edit","LrAccount","录入流水")),n(_.calculateGainForJzsy())})}}},1242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveRegretMessage=t.changeRegretCancle=t.changeRegretAccountCommonString=t.changeRegretAccountAccountName=t.getRegretCategory=t.changeItemDisableStatus=t.disabledCategory=t.enabledCategory=t.swapRunningItem=t.emptyAccountCheck=t.changeDefaultAccount=t.changeCardCheckboxArrOut=t.changeCardCheckboxArr=t.changeAccountConfcCheckboxArr=t.deleteAccountConfAccount=t.deleteAccountConfRunning=t.saveAccountConfTaxRate=t.saveAccountConfAccount=t.saveAccountConfRunningCategory=t.changeAccountConfAccountNumber=t.selectAccountConfMultipleAc=t.selectAccountConfAllAc=t.changeAccountConfRunningCategory=t.changeAccountConfCommonFlagsString=t.changeAccountConfCommonString=t.selectAccountConfUpperCategory=t.accountConfTaxRateSettingScale=t.selectOrUnselectAccountAll=t.accountconfAccountCheckboxCheck=t.accountconfRunningCheckboxCheck=t.accountConfRunningTriangleSwitch=t.closeAccountconfModal=t.beforeModifyaccountConfRunning=t.beforeModifyaccountConfRunningOld=t.beforeInsertAccountConf=t.changeAccountConfCurrentPage=t.getRunningTaxRate=t.getRunningAccount=t.getRunningCategory=void 0;var a=d(n(37)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(38);var i=c(n(1273)),o=d(n(52)),u=n(22),s=c(n(30)),l=n(18);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.getRunningCategory=function(){return function(e){e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getRunningCategory","GET","",function(t){e({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(t)&&e({type:i.GET_RUNNING_CATEGORY,receivedData:t.data})})}},t.getRunningAccount=function(){return function(e){(0,o.default)("getRunningAccount","GET","",function(t){(0,u.showMessage)(t)&&e({type:i.GET_RUNNING_ACCOUNT,receivedData:t.data})})}};var m=t.getRunningTaxRate=function(){return function(e){(0,o.default)("getRunningTaxRate","GET","",function(t){(0,u.showMessage)(t)&&e({type:i.GET_RUNNING_TAX_RATE,receivedData:t.data})})}},g=(t.changeAccountConfCurrentPage=function(e){return{type:i.CHANGE_ACCOUNTCONF_CURRENTPAGE,currentPage:e}},t.beforeInsertAccountConf=function(e,t,n){return function(a){if(t){var r=t.get("uuid");"running"===e?(a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getRunningDetail","GET","uuid="+r,function(r){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(r)){var o=r.data.result;a({type:i.BEFORE_INSERT_ACCOUNTCONF,currentPage:e,item:t,data:o,insertFrom:n})}})):a({type:i.BEFORE_INSERT_ACCOUNTCONF,currentPage:e,item:t,insertFrom:n})}else a({type:i.BEFORE_INSERT_ACCOUNTCONF,currentPage:e,item:t,insertFrom:n})}}),p=(t.beforeModifyaccountConfRunningOld=function(e,t,n){return{type:i.BEFORE_MODIFY_ACCOUNTCONF_RUNNING_OLD,currentPage:e,item:t,old:n}},t.beforeModifyaccountConfRunning=function(e,t){return function(n){var a=t.get("uuid");(0,o.default)("getRunningDetail","GET","uuid="+a,function(a){if((0,u.showMessage)(a)){var r=a.data.result;n({type:i.BEFORE_MODIFY_ACCOUNTCONF_RUNNING_OLD,currentPage:e,name:r,item:t})}})}},t.closeAccountconfModal=function(){return{type:i.CLOSE_ACCOUNTCONF_MODAL}},t.accountConfRunningTriangleSwitch=function(e,t){return{type:i.ACCOUNTCONF_RUNNING_TRIANGLE_SWITCH,showChild:e,uuid:t}},t.accountconfRunningCheckboxCheck=function(e,t){return{type:i.ACCOUNTCONF_RUNNING_CHECKBOX_CHECK,item:e,upperArr:t}},t.accountconfAccountCheckboxCheck=function(e,t){return{type:i.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK,checked:e,uuid:t}},t.selectOrUnselectAccountAll=function(e){return{type:i.SELECT_OR_UNSELECT_ACCOUNT_ALL,selectAll:e}},t.accountConfTaxRateSettingScale=function(e){return{type:i.ACCOUNTCONF_TAX_RATE_SETTING_SCALE,value:e}},t.selectAccountConfUpperCategory=function(e){return{type:i.SELECT_ACCOUNTCONF_UPPER_CATEGORY,value:e}},t.changeAccountConfCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(f(t));a({type:i.CHANGE_ACCOUNTCONF_COMMON_STRING,placeArr:r,value:n})}},t.changeAccountConfCommonFlagsString=function(e,t){return function(n){var a="string"==typeof e?["flags",e]:["flags"].concat(f(e));n({type:i.CHANGE_ACCOUNTCONF_COMMON_STRING,placeArr:a,value:t})}}),_=t.changeAccountConfRunningCategory=function(e){return function(t){t({type:i.CHANGE_ACCOUNTCONF_COMMON_STRING,placeArr:["runningCategory",0],value:e})}},T=(t.selectAccountConfAllAc=function(e,t,n,a,r){return{type:i.SELECT_ACCOUNTCONF_ALL_AC,acId:e,acFullName:t,asscategorylist:n,tab:a,place:r}},t.selectAccountConfMultipleAc=function(e,t,n,a){return function(r){var o="string"==typeof t?["runningTemp",t]:["runningTemp"].concat(f(t));r({type:i.SELECT_ACCOUNTCONF_MULTIPLE_AC,acList:e,placeArr:o,assList:n,assPlace:a})}}),C=(t.changeAccountConfAccountNumber=function(e,t){return{type:i.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER,accountType:e,value:t}},t.saveAccountConfRunningCategory=function(e){return function(t,n){t({type:i.SWITCH_LOADING_MASK});var a=n().accountConfState,s=a.getIn(["flags","insertOrModify"]),c=a.get("runningTemp"),d=c.get("parentUuid"),f=c.get("categoryType"),m=c.get("level"),p=c.toJS(),_=S(f);for(var T in _)delete p[_[T]];(0,o.default)(s+"RunningCategory","POST",JSON.stringify(r({},p)),function(n){(0,u.showMessage)(n)&&t(e?g("running",(0,l.fromJS)({uuid:d,level:m})):{type:i.AFTER_UPDATE_ACCOUNTCONF_RUNNING_CATEGORY,receivedData:n.data}),t({type:i.SWITCH_LOADING_MASK})})}},t.saveAccountConfAccount=function(e,t){return function(n,a){n({type:i.SWITCH_LOADING_MASK});var s=a().accountConfState,l=s.getIn(["flags","insertOrModify"]),c=s.get("accountTemp").toJS();(0,o.default)(l+"RunningAccount","POST",JSON.stringify(r({},c)),function(a){(0,u.showMessage)(a)&&(n({type:i.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT,saveAndNew:e,receivedData:a.data}),"fromLrAccount"===t&&n({type:i.CHANGE_LR_ACCOUNT_COMMON_STRING,tab:"",placeArr:["flags","showAccountModal"],value:!1})),n({type:i.SWITCH_LOADING_MASK})})}},t.saveAccountConfTaxRate=function(e){return function(e,t){e({type:i.SWITCH_LOADING_MASK});var n=t().accountConfState,l=(n.getIn(["flags","insertOrModify"]),n.get("taxRateTemp")),c=l.get("scale"),d={};if("small"===c){var f=l.get("payableAcId"),g=l.get("notBillingAcId"),_=l.get("payableRate");d={payableAcId:f,notBillingAcId:g,payableRate:_,scale:c}}else{var T=l.get("inputAcId"),C=l.get("certifiedAcId"),S=l.get("outputAcId"),E=l.get("waitOutputAcId"),A=l.get("turnOutUnpaidAcId"),I=l.get("unpaidAcId"),y=l.get("preAcId"),L=l.get("outputRate");d={inputAcId:T,certifiedAcId:C,outputAcId:S,waitOutputAcId:E,turnOutUnpaidAcId:A,unpaidAcId:I,outputRate:L,scale:c,preAcId:y}}(0,o.default)("canModifyRunningTaxRate","POST",JSON.stringify(r({},d)),function(t){t.data.result.hasBusiness?t.data.result.canModify?(e({type:i.SWITCH_LOADING_MASK}),s.Confirm({message:t.data.result.msg,title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex?(0,o.default)("modifyRunningTaxRate","POST",JSON.stringify(r({},d)),function(t){(0,u.showMessage)(t,"show")&&e(p("isTaxQuery",!0))}):e(m())}})):(a.default.error(t.data.result.msg),e(m()),e({type:i.SWITCH_LOADING_MASK})):(0,o.default)("modifyRunningTaxRate","POST",JSON.stringify(r({},d)),function(t){(0,u.showMessage)(t,"show")&&e(p("isTaxQuery",!0)),e({type:i.SWITCH_LOADING_MASK})})})}},t.deleteAccountConfRunning=function(){return function(e,t){var n=t().accountConfState.getIn(["flags","runningSelect"]);0!==n.size&&s.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunningCategory","POST",JSON.stringify({deleteList:n}),function(t){(0,u.showMessage)(t)&&(a.default.success(t.message),e({type:i.AFTER_UPDATE_ACCOUNTCONF_RUNNING_CATEGORY,receivedData:t.data})),e({type:i.SWITCH_LOADING_MASK})}))}})}},t.deleteAccountConfAccount=function(){return function(e,t){var n=t().accountConfState.getIn(["flags","accountSelect"]);0!==n.size&&s.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunningAccount","POST",JSON.stringify({deleteList:n}),function(t){(0,u.showMessage)(t)&&e({type:i.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT,receivedData:t.data}),e({type:i.SWITCH_LOADING_MASK})}))}})}},t.changeAccountConfcCheckboxArr=function(e,t){return function(n){var a=[];t.forEach(function(e){switch(e){case"销售费用":a.push("XZ_SALE");break;case"管理费用":a.push("XZ_MANAGE");break;case"财务费用":a.push("XZ_FINANCE")}}),n({type:i.CHANGE_ACCOUNTCONF_PROPERTY,placeArr:e,valArr:a})}},t.changeCardCheckboxArr=function(e,t,n,a){return function(r,o){var u=o().accountConfState.getIn(["runningTemp",e,t]),s=void 0;s=a?u.update(function(e){return e.concat(n)}):u.update(function(e){return e.filter(function(e){return e!==n})});var l=["runningTemp",e,t];r({type:i.CHANGE_ACCOUNTCONF_PROPERTY,placeArr:l,valArr:s})}},t.changeCardCheckboxArrOut=function(e,t,n){return function(a,r){var o=r().accountConfState.getIn(["runningTemp",e]),u=void 0;u=n?o.update(function(e){return e.concat(t)}):o.update(function(e){return e.filter(function(e){return e!==t})});var s=["runningTemp",e];a({type:i.CHANGE_ACCOUNTCONF_PROPERTY,placeArr:s,valArr:u})}},t.changeDefaultAccount=function(e,t,n){return function(a){var r={SX_SHBX:"AC_JT_YFSB",SX_ZFGJJ:"AC_JT_YFGJJ",SX_QTXC:"AC_JT_YFXC",SX_QYSDS:["AC_YFQYSDS","AC_QYSDS"],SX_QTSF:["AC_YFSF","AC_SF"],SX_GRSF:"AC_SDS",SX_FLF:"AC_FLF",SX_GQ:["AC_TZ","AC_TZ_SY"],SX_ZQ:["AC_TZ","AC_TZ_SY"],SX_GDZC:["AC_ZC_ASSETS","AC_ZC_CLEANING","AC_ZC_ZJ"],SX_WXZC:["AC_ZC_ASSETS","AC_ZC_CLEANING","AC_ZC_ZJ"],SX_TZXFDC:["AC_ZC_ASSETS","AC_ZC_CLEANING","AC_ZC_ZJ"]}[t],i=function(e,t,n){var a=e.find(function(e){return e.get("type")===t&&e.get("property")===n});return{acId:a?a.get("acId"):"",acFullName:a?a.get("acFullName"):""}};"SX_GRSF"===t?a(T([i(e,r,t)],[n,"payAc"])):"string"==typeof r?a(T([i(e,r,t)],[n,"accruedAc"])):"SX_QYSDS"===t||"SX_QTSF"===t?(a(T([i(e,r[0],t)],[n,"accruedAc"])),a(T([i(e,r[1],t)],[n,"payAc"]))):"SX_GQ"===t||"SX_ZQ"===t?(a(T([i(e,r[0],t)],[n,"investAc"])),a(T([i(e,r[1],t)],[n,"profitAc"]))):"SX_GDZC"!==t&&"SX_WXZC"!==t&&"SX_TZXFDC"!==t||(a(T([i(e,r[0],t)],[n,"assetsAc"])),a(T([i(e,r[1],t)],[n,"cleaningAc"])),a(T([i(e,r[2],t)],[n,"depreciationAc"])))}},t.emptyAccountCheck=function(e){return function(t){e.forEach(function(e){var n=e.tab,a=e.place,r=e.value,o="string"==typeof a?[n+"Temp",a]:[n+"Temp"].concat(f(a));t({type:i.CHANGE_ACCOUNTCONF_COMMON_STRING,placeArr:o,value:r})})}},t.swapRunningItem=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("runningSwapItem","POST",JSON.stringify({fromCategoryUuid:e,toCategoryUuid:t}),function(e){(0,u.showMessage)(e)&&n(_((0,l.fromJS)(e.data.categoryList[0]))),n({type:i.SWITCH_LOADING_MASK})})}},t.enabledCategory=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("enabledCategory","POST",JSON.stringify({enabledList:e}),function(n){(0,u.showMessage)(n)&&t(C(e[0],!1)),t({type:i.SWITCH_LOADING_MASK})})}},t.disabledCategory=function(e,t){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("disabledCategory","POST",JSON.stringify({disabledList:e}),function(n){if((0,u.showMessage)(n)){var a=n.data.parentList;t(C(e[0],!0,a))}t({type:i.SWITCH_LOADING_MASK})})}},t.changeItemDisableStatus=function(e,t,n){return function(a,r){var o=r().accountConfState,u=o.getIn(["runningCategory",0,"childList"]),s=o.getIn(["runningCategory",0,"disableList"]),l=[e];t&&n.length&&(l=l.concat(n));var c=function e(n,r,o,u){r&&r.size&&r.find(function(r,s){if(n.find(function(e){return e===r.get("uuid")}))return a({type:i.CHANGE_ITEM_DISABLE_STATUS,placeArr:[].concat(f(o),[s]),disabled:t}),!0;e(n,r.get("childList"),[].concat(f(o),[s,"childList"]),u),e(n,r.get("disableList"),[].concat(f(o),[s,"disableList"]),u)})};c(l,u,["childList"],!0),c(l,s,["disableList"],!0)}}),S=function(e){var t={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[e],n=["acAssets","acBusinessExpense","acBusinessIncome","acBusinessOutExpense","acBusinessOutIncome","acCapital","acCost","acInvest","acLoan","acPayment","acTax","acTemporaryReceipt","acTemporaryPay"];return n.splice(n.indexOf(t),1),n},E=(t.getRegretCategory=function(){return function(e){e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getRegretCategory","GET","",function(t){(0,u.showMessage)(t)&&e({type:i.GET_REGRET_CATEGORY,receivedData:t.data}),e({type:i.SWITCH_LOADING_MASK})})}},t.changeRegretAccountAccountName=function(e,t,n,a,r,o){return{type:i.CHANGE_REGRET_ACCOUNT_ACCOUNT_NAME,tab:e,placeUUid:t,placeName:n,isBalance:a,isBusiness:r,value:o}},t.changeRegretAccountCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(f(t));"flags"===t[0]&&(r=t),a({type:i.CHANGE_REGRET_ACCOUNT_COMMON_STRING,tab:e,placeArr:r,value:n})}});t.changeRegretCancle=function(){return{type:i.CHANGE_REGRET_CANCLE}},t.saveRegretMessage=function(){return function(e,t){var n=t().accountConfState,a=n.getIn(["regretTemp","subordinateName"]),r=n.getIn(["regretTemp","categoryUuid"]);e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("saveRegretMessage","POST",JSON.stringify({name:a,uuid:r}),function(t){(0,u.showMessage)(t)?(e({type:i.GET_RUNNING_CATEGORY,receivedData:t.data}),e(E("regret","showConfirmModal",!1))):(e(E("regret","showConfirmModal",!1)),e(E("regret","showModal",!0))),e({type:i.SWITCH_LOADING_MASK})})}}},1243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelYllsVisible=t.getYllsBusinessData=void 0;var a,r=n(52),i=(a=r)&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1270)),u=n(22);t.getYllsBusinessData=function(e,t){return function(n){var a=e.get("parentUuid")?e.get("parentUuid"):e.get("uuid");a&&n({type:o.SWITCH_LOADING_MASK}),a&&(0,i.default)("getRunningBusiness","GET","uuid="+a,function(a){(0,u.showMessage)(a)?(n({type:o.SWITCH_LOADING_MASK}),n({type:o.GET_YLLS_BUSINESS_DATA,item:a.data.result,curItem:e}),t&&t()):n({type:o.SWITCH_LOADING_MASK})})}},t.cancelYllsVisible=function(){return function(e){e({type:o.CANCEL_YLLS_VISIBLE})}}},1245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeItemChildShow=t.deleteRunningVc=t.showRelatePaymentFetch=t.showRelateBusinessFetch=t.modifyRunningPayment=t.getRunningPayment=t.getRunningBusinessDuty=void 0;var a,r=f(n(1278)),i=n(52),o=(a=i)&&a.__esModule?a:{default:a},u=n(18),s=n(22),l=f(n(30)),c=(f(n(27)),f(n(1229))),d=f(n(60));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.getRunningBusinessDuty=function(e,t,n,a,i){return function(i,l){console.log(n);var f=l().accountConfState.get("runningCategory");i({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusiness","GET","uuid="+t,function(o){if(i({type:r.SWITCH_LOADING_MASK}),(0,s.showMessage)(o)){var l=o.data.result.categoryUuid,m=(0,u.fromJS)([]);!function e(t){return t.map(function(t){t.get("uuid")===l&&(m=m.push(t)),t.get("childList")&&t.get("childList").size&&e(t.get("childList"))})}(f);var g={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[o.data.result.categoryType],p=o.data.result.runningState,_=o.data.result[g].beManagemented,T=o.data.result[g].contactsRange,C=o.data.result[g].stockRange,S=o.data.result.beProject,E=o.data.result.projectRange,A=o.data.result.propertyCarryover;"STATE_JK_ZFLX"!==p&&"STATE_TZ_SRGL"!==p&&"STATE_TZ_SRLX"!==p&&"STATE_ZB_ZFLR"!==p&&"STATE_XC_JN"!==p&&"STATE_XC_FF"!==p&&"STATE_SF_JN"!==p&&"STATE_ZS_TH"!==p&&"STATE_ZF_SH"!==p&&"STATE_SF_SFJM"!==p||i(c.changeLrAccountCommonString("",["flags","specialStateforAccrued"],!0)),i(c.getRunningSettingInfo()),i(d.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),i(d.addHomeTabpane("Edit","LrAccount","录入流水")),i({type:r.INIT_LR_ACCOUNT,strJudgeType:"fromCxAccount",receivedData:o.data,category:m,canMakeVc:a,flowNumber:e,uuidList:n,uuid:t}),"STATE_CQZC_JZSY"===p&&i(c.calculateGain()),S&&i(c.getProjectCardList(E,o.data.result)),_&&i(c.getFirstContactsCardList(T,p)),"SX_HW"===A&&i(c.getFirstStockCardList(C,p))}})}},t.getRunningPayment=function(e,t){return function(n){n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningPayment","GET","uuid="+e,function(e){n({type:r.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&(t(),n({type:r.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.modifyRunningPayment=function(){return{type:r.MODIFY_RUNNING_PAYMENT}},t.showRelateBusinessFetch=function(e,t){return function(n){n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusinessDuty","GET","uuid="+e,function(e){n({type:r.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&(t(),n({type:r.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.showRelatePaymentFetch=function(e,t){return function(n){n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningPayment","GET","uuid="+e,function(e){n({type:r.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&(t(),n({type:r.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.deleteRunningVc=function(e,t){return function(n,a){l.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(i){1===i.buttonIndex&&(n({type:r.SWITCH_LOADING_MASK}),(0,o.default)("deletevc","POST",JSON.stringify({year:t.substr(0,4),month:t.substr(5,2),vcindexlist:[e]}),function(e){if(n({type:r.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)){var t=a().accountState,i=t.getIn(["flags","issuedate"]),o=t.getIn(["flags","main"]),u=t.getIn(["flags","curCategory"]),l=t.getIn(["flags","curAccountUuid"]),c=t.getIn(["flags","assId"]),d=t.getIn(["flags","assCategory"]),f=t.getIn(["flags","acId"]);n(getAccountDimensionFetch(i,o,u,l,f,d,c))}}))}})}},t.changeItemChildShow=function(e){return{type:r.CHANGE_ITEM_CHILD_SHOW,idx:e}}},1246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_PZ_BOMB="INIT_PZ_BOMB",t.PZBOMB_REVIEWEDBY_VC="PZBOMB_REVIEWEDBY_VC",t.CANCEL_PZBOMB_REVIEWEDBY_VC="CANCEL_PZBOMB_REVIEWEDBY_VC"},1249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeItemChildShow=t.deleteRunningVc=t.showRelatePaymentFetch=t.showRelateBusinessFetch=t.modifyRunningPayment=t.getRunningPayment=t.getRunningBusinessDuty=t.deleteAccountItemCardAndRunning=t.accountItemCheckboxCheckAll=t.accountItemCheckboxCheck=t.saveAccountPayOrReceive=t.oneClickPayment=t.beforeRunningPayOrReceive=t.changeAccountAccountName=t.changeAccountCommonString=t.afterModifyAccountAllList=t.changeSearchType=t.changeCalculateCommonString=t.getFirstStockCardList=t.getAccountObjectList=t.getCostCategoryListInfo=t.getAuthCategoryListInfo=t.getMakeoutCategoryListInfo=t.getManageCategoryListInfo=t.getCalculateCarryoverList=t.getCalculateCertificationList=t.getCalculateInvoicingList=t.getCalculateList=t.getPeriodCalculateList=void 0;var a,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=g(n(1277)),o=n(52),u=(a=o)&&a.__esModule?a:{default:a},s=n(22),l=g(n(30)),c=n(18),d=g(n(60)),f=g(n(43)),m=g(n(1229));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.getPeriodCalculateList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"manages",n=arguments[2];arguments[3],arguments[4];return function(a){a({type:i.SWITCH_LOADING_MASK}),a(L(e));(0,u.default)("getManageList","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",categoryUuid:"",cardUuid:"",isCheck:!1,getPeriod:n}),function(e){if((0,s.showMessage)(e)){var n;a(f.AccountTableGetPeriod(e));a((p(n={type:i.GET_CALCULATE_LIST,receivedData:e.data.result,period:e.data.periodDtoJson,issuedate:"",getPeriod:"true",isCheck:!1,categoryUuid:""},"isCheck",!1),p(n,"searchType","SEARCH_TYPE_DATE"),p(n,"accountingType",t),n))}a({type:i.SWITCH_LOADING_MASK})})}};var _=t.getCalculateList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"manages",n=(arguments[2],arguments[3]),a=arguments[4],r=arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",l=arguments[7];return function(c,d){c({type:i.SWITCH_LOADING_MASK});var f=d().calculationState,m=o?f.getIn(["flags","searchType"]):"";t=t||f.getIn(["flags","accountingType"]),r=(!0===r||!1===r)&&r,(0,u.default)("getManageList","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",categoryUuid:n?"全部"===n?"":n:f.getIn(["flags","categoryUuid"]),cardUuid:a,isCheck:r,getPeriod:"",searchType:m,searchContent:o}),function(a){c({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(a)&&(m=""==m?"SEARCH_TYPE_DATE":m,c({type:i.GET_CALCULATE_LIST,receivedData:a.data.result,period:a.data.periodDtoJson,issuedate:e,getPeriod:"",isCheck:r,searchType:m,curCategory:n,accountingType:t}))}),l||c(E("",a,r))}},T=t.getCalculateInvoicingList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments[4];return function(o,l){o({type:i.SWITCH_LOADING_MASK});var c=l().calculationState,d=a?c.getIn(["flags","searchType"]):"";(0,u.default)("getBusinessMakeoutList","POST",JSON.stringify({runningDate:"",categoryUuid:t?"全部"===t?"":t:c.getIn(["flags","categoryUuid"]),billMakeOutType:n,searchType:d,searchContent:a}),function(a){o({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(a)&&(d=""==d?"SEARCH_TYPE_DATE":d,o({type:i.GET_CALCULATE_INVOICING_LIST,receivedData:a.data.result,curCategory:t,billMakeOutType:n,searchType:d,runningDate:e}))}),r||o(A("",n))}},C=t.getCalculateCertificationList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments[4];return function(o,l){o({type:i.SWITCH_LOADING_MASK});var c=l().calculationState,d=a?c.getIn(["flags","searchType"]):"";(0,u.default)("getBusinessAuthList","POST",JSON.stringify({runningDate:"",categoryUuid:t?"全部"===t?"":t:c.getIn(["flags","categoryUuid"]),billAuthType:n,searchType:d,searchContent:a}),function(a){o({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(a)&&(d=""==d?"SEARCH_TYPE_DATE":d,o({type:i.GET_CALCULATE_CERTIFICATE_LIST,receivedData:a.data.result,curCategory:t,billAuthType:n,searchType:d,runningDate:e}))}),r||o(I("",n))}},S=t.getCalculateCarryoverList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return function(o,l){o({type:i.SWITCH_LOADING_MASK}),o(N(e,t));var c=l().calculationState,d=""===r?[]:[r],f=n?c.getIn(["flags","searchType"]):"";(0,u.default)("getCarryoverList","POST",JSON.stringify({runningDate:"",runningState:t,searchType:f,searchContent:n,cardUuidList:d}),function(n){o({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(n)&&(f=""==f?"SEARCH_TYPE_DATE":f,o({type:i.GET_CALCULATE_COST_LIST,receivedData:n.data.result,runningState:t,searchType:f,runningDate:e}))}),a||o(y("",t))}},E=t.getManageCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a,r){(0,u.default)("getRunningManageCategory","POST",JSON.stringify({runningDate:e,cardUuid:t,isCheck:n}),function(e){(0,s.showMessage)(e)&&a({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data,isCheck:n})})}},A=t.getMakeoutCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n,a){(0,u.default)("getRunningMakeoutCategory","POST",JSON.stringify({runningDate:e,billMakeOutType:t}),function(e){(0,s.showMessage)(e)&&n({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data})})}},I=t.getAuthCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n,a){(0,u.default)("getRunningAuthCategory","POST",JSON.stringify({runningDate:e,billAuthType:t}),function(e){(0,s.showMessage)(e)&&n({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data})})}},y=t.getCostCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n,a){(0,u.default)("getRunningCarryoverCategory","POST",JSON.stringify({runningDate:e,runningState:t}),function(e){(0,s.showMessage)(e)&&n({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data})})}},L=t.getAccountObjectList=function(e){return function(e){(0,u.default)("getBusinessManagerCardList","POST",JSON.stringify({}),function(t){(0,s.showMessage)(t)&&(e(O("calculate","cardList",(0,c.fromJS)(t.data.cardList))),t.data.categoryList&&e(O("calculate","typeList",(0,c.fromJS)(t.data.categoryList))))})}},N=t.getFirstStockCardList=function(e,t){return function(n,a){a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,u.default)("getCostStock","POST",JSON.stringify({runningDate:e,runningState:t}),function(e){(0,s.showMessage)(e)&&n(O("calculate","stockThingsList",(0,c.fromJS)(e.data.result)))})}},O=t.changeCalculateCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t));"flags"===t[0]&&(r=t),a({type:i.CHANGE_CALCULATE_COMMON_STRING,tab:e,placeArr:r,value:n})}},h=(t.changeSearchType=function e(t,n){return function(a){switch(n){case"manages":a(_()),a(e(["calculateTemp","usedCard"],(0,c.fromJS)({name:"",code:"全部"})));break;case"invoicing":a(T());break;case"certification":a(C());break;case"costTransfer":a(S()),a(e(["calculateTemp","stockCard"],(0,c.fromJS)({name:"",code:"全部"})))}a({type:i.CHANGE_TYPE_OF_SEARCH,placeArr:t,value:n})}},t.afterModifyAccountAllList=function(e){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","issuedate"]),r=n.getIn(["flags","accountingType"]),i=n.getIn(["flags","curCategory"]),o=(n.getIn(["calculateTemp","ass","assid"]),n.getIn(["calculateTemp","ass","asscategory"]),n.getIn(["calculateTemp","ass","acId"]),n.getIn(["calculateTemp","cardUuid"])),u=n.getIn(["flags","isCheck"]),s=n.getIn(["invoicingList","billMakeOutType"]),l=n.getIn(["certificationList","billAuthType"]),c=n.getIn(["costTransferList","runningState"]);switch(r){case"manages":e(_(a,r,"true",i,o,u));break;case"invoicing":e(T("",i,s));break;case"certification":e(C("",i,l));break;case"costTransfer":e(S("",c))}}}),v=(t.changeAccountCommonString=function(e,t,n){return{type:i.CHANGE_ACCOUNT_COMMON_STRING,tab:e,place:t,value:n}},t.changeAccountAccountName=function(e,t,n,a){return{type:i.CHANGE_ACCOUNT_ACCOUNT_NAME,tab:e,placeUUid:t,placeName:n,value:a}},t.beforeRunningPayOrReceive=function(e,t,n,a,r){return function(o){n<0&&(n=-n,e="收"===e?"付":"收"),o({type:i.BEFORE_RUNNING_PAY_OR_RECEIVE,payDirection:e,assList:t,notHandleAmount:n,uuidList:a,runningList:r})}});t.oneClickPayment=function(e){return function(t,n){var a=n().calculationState,r=a.getIn(["flags","selectList"]),i=a.getIn(["payManageList","childList"]),o=a.getIn(["flags","assId"]),u=a.getIn(["flags","assCategory"]),s=a.getIn(["flags","acId"]),l=a.get("mediumAcAssList"),d="";s?l.get("acList").forEach(function(e){e.get("acId")===s&&(d=e.get("acName"))}):l.get("category").forEach(function(e){e.get("category")===u&&e.get("assList").forEach(function(e){e.get("assId")===o&&(d=e.get("assName"))})});var f=(0,c.fromJS)([]),m=(0,c.fromJS)([]),g=(0,c.fromJS)([]),p=(0,c.fromJS)([]);if(i.forEach(function(e){r.indexOf(e.get("uuid"))>-1&&(g=g.push(e),p=p.push(e.get("uuid")),"income"===e.get("property")||"otherIncome"===e.get("property")?m=m.push(e):f=f.push(e))}),m.size&&f.size){var _=0,T=0;m.forEach(function(e){return _+=e.get("notHandleAmount")}),f.forEach(function(e){return T+=e.get("notHandleAmount")});var C=_-T;if(C>0){t(v("收",d,C,p,g))}else{t(v("付",d,-C,p,g))}e()}else if(m.size&&!f.size){var S="收",E=0;m.forEach(function(e){E+=e.get("notHandleAmount"),p.push(e.get("uuid"))}),E<0&&(S="付",E=-E),t(v(S,d,E,p,g)),e()}else if(!m.size&&f.size){var A="付",I=0;f.forEach(function(e){I+=e.get("notHandleAmount"),p.push(e.get("uuid"))}),I<0&&(A="收",I=-I),t(v(A,d,I,p,g)),e()}else console.log("异常情况：未匹配")}},t.saveAccountPayOrReceive=function(e){return function(t,n){var a=n().calculationState,i=a.getIn(["flags","runningInsertOrModify"]),o=a.get("runningTemp").toJS();(0,u.default)(i+"Runningpayment","POST",JSON.stringify(r({},o)),function(n){(0,s.showMessage)(n)&&(t(h()),e())})}},t.accountItemCheckboxCheck=function(e,t,n){return{type:i.ACCOUNT_ITEM_CHECKBOX_SELECT,checked:e,uuid:t,runningDate:n}},t.accountItemCheckboxCheckAll=function(e,t){return{type:i.PAY_RECEIVE_ITEM_CHECKBOX_CHECK_ALL,selectAll:e,listName:t}},t.deleteAccountItemCardAndRunning=function(e){return function(e,t){var n=t().calculationState.getIn(["flags","selectList"]);l.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(e({type:i.SWITCH_LOADING_MASK}),(0,u.default)("deleteRunningbusiness","POST",JSON.stringify({deleteList:n}),function(t){if((0,s.showMessage)(t)){if(t.data.errorList.length){var n=t.data.errorList.reduce(function(e,t){return e+","+t});l.Alert(n)}e(h())}e({type:i.SWITCH_LOADING_MASK})}))}})}},t.getRunningBusinessDuty=function(e,t,n,a){return function(a,r){var o=r().accountConfState.get("runningCategory");a({type:i.SWITCH_LOADING_MASK}),(0,u.default)("getNewRunningBusiness","GET","oriUuid="+t,function(t){if(a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(t)){var r=t.data.result.categoryUuid,u=(0,c.fromJS)([]);!function e(t){return t.map(function(t){t.get("uuid")===r&&(u=u.push(t)),t.get("childList")&&t.get("childList").size&&e(t.get("childList"))})}(o);var l=t.data.result.runningState;"STATE_JK_ZFLX"!==l&&"STATE_TZ_SRGL"!==l&&"STATE_TZ_SRLX"!==l&&"STATE_ZB_ZFLR"!==l&&"STATE_ZS_TH"!==l&&"STATE_ZF_SH"!==l||a(m.changeLrAccountCommonString("",["flags","specialStateforAccrued"],!0)),a(m.getRunningSettingInfo()),a(d.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),a(d.addHomeTabpane("Edit","LrAccount","录入流水")),a({type:i.INIT_LR_ACCOUNT,strJudgeType:"fromCxAccount",receivedData:t.data,category:u,canMakeVc:n,flowNumber:e}),"STATE_CQZC_JZSY"===l&&a(m.calculateGain())}})}},t.getRunningPayment=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,u.default)("getRunningPayment","GET","uuid="+e,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&(t(),n({type:i.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.modifyRunningPayment=function(){return{type:i.MODIFY_RUNNING_PAYMENT}},t.showRelateBusinessFetch=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,u.default)("getRunningBusinessDuty","GET","uuid="+e,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&(t(),n({type:i.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.showRelatePaymentFetch=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,u.default)("getRunningPayment","GET","uuid="+e,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&(t(),n({type:i.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.deleteRunningVc=function(e,t){return function(n,a){l.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(r){1===r.buttonIndex&&(n({type:i.SWITCH_LOADING_MASK}),(0,u.default)("deletevc","POST",JSON.stringify({year:t.substr(0,4),month:t.substr(5,2),vcindexlist:[e]}),function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)){var t=a().calculationState,r=t.getIn(["flags","issuedate"]),o=t.getIn(["flags","main"]),u=t.getIn(["flags","curCategory"]),l=(t.getIn(["flags","curAccountUuid"]),t.getIn(["flags","assId"]),t.getIn(["flags","assCategory"]),t.getIn(["flags","acId"]),t.getIn(["flags","isCheck"])),c=t.getIn(["calculateTemp","cardUuid"]);n(_(r,o,"",u,c,l))}}))}})}},t.changeItemChildShow=function(e){return{type:i.CHANGE_ITEM_CHILD_SHOW,idx:e}}},1250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=T(n(14)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78);var s=T(n(1)),l=T(n(0)),c=n(18),d=n(17);n(1258);var f=_(n(30)),m=T(n(1260)),g=T(n(1264)),p=_(n(60));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}var C=(0,d.immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={rotate:0,magnificationRate:1,imgWpercent:0,idx:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),u(t,[{key:"componentDidMount",value:function(){this.props.dispatch(p.setDdConfig())}},{key:"componentWillReceiveProps",value:function(e,t){0==this.props.preview&&1==e.preview&&this.setState({rotate:0,magnificationRate:1,imgWpercent:0,idx:e.page,maxLimit:40,minLimit:40})}},{key:"render",value:function(){var e=this,t=this.props,n=t.preview,a=t.downloadPermission,r=t.previewImgArr,i=t.closePreviewModal,u=t.downloadEnclosure,l=t.dispatch,c=(t.page,t.type,t.uploadKeyJson,this.state),d=c.idx,p=c.rotate,_=c.magnificationRate,T=c.imgWpercent,C=c.maxLimit,S=c.minLimit,E=r.get(d);return s.default.createElement("div",{className:"preview",style:{display:n?"":"none"},onClick:function(e){}},s.default.createElement("div",{className:"nav"},s.default.createElement("button",{onClick:function(){return e.setState({idx:d-1,imgWpercent:0,rotate:0})},disabled:0==d},s.default.createElement(o.default,{type:"left-circle"}),s.default.createElement("div",null,"上一张")),s.default.createElement("button",{disabled:E&&"TRUE"!==E.get("imageOrFile"),onClick:function(){return e.setState({rotate:p+90})}},s.default.createElement(o.default,{type:"reload"}),s.default.createElement("div",null,"旋转")),E&&"application/pdf"===E.get("mimeType")?s.default.createElement("button",{disabled:.5===_,onClick:function(){e.setState({magnificationRate:_-.5})}},s.default.createElement(o.default,{type:"zoom-out"}),s.default.createElement("div",null,"缩小")):s.default.createElement("button",{disabled:-S>=T,onClick:function(){e.setState({imgWpercent:T-10})}},s.default.createElement(o.default,{type:"minus-circle"}),s.default.createElement("div",null,"缩小")),E&&"application/pdf"==E.get("mimeType")?s.default.createElement("button",{disabled:_>=4||"application/pdf"!==E.get("mimeType"),onClick:function(){e.setState({magnificationRate:_+.5})}},s.default.createElement(o.default,{type:"zoom-in"}),s.default.createElement("div",null,"放大")):s.default.createElement("button",{disabled:T>=C,onClick:function(){e.setState({imgWpercent:T+10})}},s.default.createElement(o.default,{type:"plus-circle"}),s.default.createElement("div",null,"放大")),s.default.createElement("button",{disabled:!a},a?s.default.createElement("span",{onClick:function(){return u(r.getIn([d,"signedUrl"]),r.getIn([d,"fileName"]))}},s.default.createElement(o.default,{type:"download"}),s.default.createElement("div",null,"下载")):s.default.createElement("a",null,s.default.createElement(o.default,{type:"download"}),s.default.createElement("div",null,"下载"))),s.default.createElement("button",{disabled:!(E&&"application/pdf"==E.get("mimeType")),onClick:function(){E&&"application/pdf"==E.get("mimeType")&&f.openLink({url:r.getIn([d,"signedUrl"])})}},s.default.createElement(o.default,{type:"printer"}),s.default.createElement("div",null,"打印")),s.default.createElement("button",{onClick:function(){return e.setState({idx:d+1,imgWpercent:0,rotate:0})},disabled:d===r.size-1},s.default.createElement(o.default,{type:"right-circle"}),s.default.createElement("div",null,"下一张"))),E&&"TRUE"===E.get("imageOrFile")&&n?s.default.createElement(g.default,{imgUrl:""+E.get("signedUrl"),imgWpercent:T,rotate:p,preview:n,maxLimit:C,minLimit:S}):"",E&&"application/pdf"===E.get("mimeType")&&n?s.default.createElement(m.default,{pdfUrl:""+E.get("signedUrl"),dispatch:l,magnificationRate:_,preview:n}):"",s.default.createElement("div",{className:"img-box",style:{display:E&&"application/pdf"!==E.get("mimeType")&&"TRUE"!==E.get("imageOrFile")?"":"none"}},s.default.createElement("div",{className:"img-box-contain"},s.default.createElement("div",{className:"img-box-contain-overflow"},s.default.createElement("div",{className:"noSupport"},s.default.createElement(o.default,{type:"file"}),s.default.createElement("p",null,"仅图片及PDF格式支持预览"))))),s.default.createElement("div",{className:"btnBar"},s.default.createElement("div",{className:"title"},"预览"),s.default.createElement("div",{onClick:i,className:"closeBtn"},s.default.createElement(o.default,{type:"close"}))))}}]),t}(),r.displayName="EnclosurePreview",r.propTypes={preview:l.default.bool,downloadPermission:l.default.bool,previewImgArr:l.default.instanceOf(c.List),closePreviewModal:l.default.func,dispatch:l.default.func,page:l.default.number,type:l.default.string},a=i))||a;t.default=C},1258:function(e,t,n){},1260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=g(n(14)),u=g(n(37)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78),n(38);var l=g(n(1)),c=g(n(0)),d=n(17);n(1261);n(127),m(n(30));var f=m(n(1263));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var p=(0,d.immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderPdf=function(e){var t=document.getElementById("canvas_wrapper");t.innerHTML="";var a=atob(e),r=window.PDFJS;if(!r)return n.setState({networkFaild:!0}),u.default.info("网路问题导致PDF预览相关文件加载失败",2);if(r.cMapUrl="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.0.288/cmaps/",r.cMapPacked=!0,!r.getDocument)return n.setState({networkFaild:!0}),u.default.info("网路问题导致PDF预览相关文件加载失败",2);var i=r.getDocument({data:a}),o=n;i.promise.then(function(e){var n="";e.numPages;for(var a=0;a<e.numPages;a++)(n=document.createElement("canvas")).id="pdf_canvas_"+a,t.appendChild(n);for(var r=function(t){e.getPage(t+1).then(function(e){var n=e.getViewport(o.props.magnificationRate),a=document.getElementById("pdf_canvas_"+t);a.width=n.width,a.height=n.height;var r=a.getContext("2d");return e.render({canvasContext:r,viewport:n}).promise})},i=0;i<e.numPages;i++)r(i)}).catch(function(e){document.getElementById("canvas_wrapper").innerHTML="",o.setState({broken:!0})})},n.state={base64:"",broken:!1,networkFaild:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),s(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch(f.getCxpzUploadEnclosure(this.props.pdfUrl,function(t){t&&(e.setState({base64:t,broken:!1}),e.renderPdf(t))}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.magnificationRate!==e.magnificationRate&&this.renderPdf(this.state.base64),this.props.pdfUrl!==e.pdfUrl&&this.props.dispatch(f.getCxpzUploadEnclosure(e.pdfUrl,function(e){e&&(t.setState({base64:e,broken:!1,networkFaild:!1}),t.renderPdf(e))}))}},{key:"render",value:function(){var e=this.props,t=(e.pdfUrl,e.dispatch,e.magnificationRate,this.state),n=t.broken,a=t.networkFaild;return l.default.createElement("div",{className:"img-box"},l.default.createElement("div",{className:"img-box-contain"},l.default.createElement("div",{className:"pdf-box-contain-overflow"},l.default.createElement("div",{className:"pdf_canvas_main"},l.default.createElement("div",{className:"pdf_canvas_pdf"},l.default.createElement("div",{id:"canvas_wrapper"}))),n?l.default.createElement("div",{className:"noSupport"},l.default.createElement(o.default,{type:"file"}),l.default.createElement("p",null,"PDF文件损坏，无法预览")):"",a?l.default.createElement("div",{className:"noSupport"},l.default.createElement(o.default,{type:"file"}),l.default.createElement("p",null,"网络异常，无法预览")):"")))}}]),t}(),r.displayName="PdfPreview",r.propTypes={pdfUrl:c.default.string,dispatch:c.default.func,magnificationRate:c.default.number},a=i))||a;t.default=p},1261:function(e,t,n){},1263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCxpzUploadEnclosure=void 0;var a,r=n(31),i=(a=r)&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1246)),u=(n(18),n(22));t.getCxpzUploadEnclosure=function(e,t){return function(n){n({type:o.SWITCH_LOADING_MASK}),e.indexOf("xfn-ddy-annex-bucket.oss-accelerate")>0&&(e=e.replace("xfn-ddy-annex-bucket.oss-accelerate","xfn-ddy-annex-bucket.oss-cn-hangzhou-internal")),(0,i.default)("uploadGetEnclosure","POST",JSON.stringify({enclosureUrl:e}),function(e){(0,u.showMessage)(e)?t(e.data.enclosureFile):t(""),n({type:o.SWITCH_LOADING_MASK})})}}},1264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=l(n(1)),s=l(n(0));function l(e){return e&&e.__esModule?e:{default:e}}var c=(0,n(17).immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawImgScal=function(e,t,a,r){var i,o,u,s,l,c=t/100,d=a/100,f=r/100;i=n.refs.bargraphCanvas,o=i.getContext("2d"),(u=new Image).onload=function(){!0,m()},u.src=e;var m=function(){-f<=c&&c<=d&&(0===c?(s=u.width>960?960:u.width*Number(1+c),l=u.width>960?960*u.height/u.width:u.height*Number(1+c)):(s=u.width>960?960*Number(1+c):u.width*Number(1+c),l=u.width>960?960*u.height/u.width*Number(1+c):u.height*Number(1+c)),n.setState({imgHeight:l,imgWidth:s}),i.width=s,i.height=l,o.clearRect(0,0,s,l),o.drawImage(u,0,0,u.width,u.height,0,0,s,l))}},n.state={imgHeight:0,imgWidth:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),o(t,[{key:"componentDidMount",value:function(){this.drawImgScal(this.props.imgUrl,this.props.imgWpercent,this.props.maxLimit,this.props.minLimit)}},{key:"componentWillReceiveProps",value:function(e){this.props.imgUrl!==e.imgUrl&&this.drawImgScal(e.imgUrl,e.imgWpercent,this.props.maxLimit,this.props.minLimit),this.props.imgUrl===e.imgUrl&&this.props.imgWpercent!==e.imgWpercent&&this.drawImgScal(this.props.imgUrl,e.imgWpercent,this.props.maxLimit,this.props.minLimit)}},{key:"isVertail",value:function(e){return!(e<90)&&(90===e||e%180!=0)}},{key:"render",value:function(){var e=this.props,t=(e.imgUrl,e.imgWpercent,e.rotate),n=this.state,a=n.imgHeight,r=n.imgWidth,i=0,o=0;return this.isVertail(t)?(a>960&&(i=a-960),r>960&&(o=r-960)):(r>960&&(i=r-960),a>960&&(o=a/2+10)),u.default.createElement("div",{className:"img-box"},u.default.createElement("div",{className:"img-box-contain"},u.default.createElement("div",{className:"img-box-contain-overflow"},u.default.createElement("canvas",{ref:"bargraphCanvas",style:{transform:"rotate("+t+"deg)",marginLeft:i+"px",marginTop:o+"px",display:"block"}}))))}}]),t}(),r.displayName="ImgPreview",r.propTypes={imgUrl:s.default.string,imgWpercent:s.default.number,rotate:s.default.number,maxLimit:s.default.number,minLimit:s.default.number},a=i))||a;t.default=c},1270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_YLLS="INIT_YLLS",t.GET_YLLS_BUSINESS_DATA="GET_YLLS_BUSINESS_DATA",t.CANCEL_YLLS_VISIBLE="CANCEL_YLLS_VISIBLE"},1273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_ACCOUNTCONF="INIT_ACCOUNTCONF",t.GET_ACCOUNTCONF_ALL_SETTINGS="GET_ACCOUNTCONF_ALL_SETTINGS",t.GET_RUNNING_CATEGORY="GET_RUNNING_CATEGORY",t.GET_RUNNING_ACCOUNT="GET_RUNNING_ACCOUNT",t.GET_RUNNING_TAX_RATE="GET_RUNNING_TAX_RATE",t.CHANGE_ACCOUNTCONF_CURRENTPAGE="CHANGE_ACCOUNTCONF_CURRENTPAGE",t.BEFORE_INSERT_ACCOUNTCONF="BEFORE_INSERT_ACCOUNTCONF",t.BEFORE_MODIFY_ACCOUNTCONF_RUNNING_OLD="BEFORE_MODIFY_ACCOUNTCONF_RUNNING_OLD",t.CLOSE_ACCOUNTCONF_MODAL="CLOSE_ACCOUNTCONF_MODAL",t.ACCOUNTCONF_RUNNING_TRIANGLE_SWITCH="ACCOUNTCONF_RUNNING_TRIANGLE_SWITCH",t.ACCOUNTCONF_RUNNING_CHECKBOX_CHECK="ACCOUNTCONF_RUNNING_CHECKBOX_CHECK",t.SELECT_OR_UNSELECT_RUNNING_ALL="SELECT_OR_UNSELECT_RUNNING_ALL",t.SELECT_OR_UNSELECT_ACCOUNT_ALL="SELECT_OR_UNSELECT_ACCOUNT_ALL",t.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK="ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK",t.ACCOUNTCONF_TAX_RATE_SETTING_SCALE="ACCOUNTCONF_TAX_RATE_SETTING_SCALE",t.SELECT_ACCOUNTCONF_UPPER_CATEGORY="SELECT_ACCOUNTCONF_UPPER_CATEGORY",t.CHANGE_ACCOUNTCONF_COMMON_STRING="CHANGE_ACCOUNTCONF_COMMON_STRING",t.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER="CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER",t.SELECT_ACCOUNTCONF_ALL_AC="SELECT_ACCOUNTCONF_ALL_AC",t.SELECT_ACCOUNTCONF_MULTIPLE_AC="SELECT_ACCOUNTCONF_MULTIPLE_AC",t.AFTER_UPDATE_ACCOUNTCONF_RUNNING_CATEGORY="AFTER_UPDATE_ACCOUNTCONF_RUNNING_CATEGORY",t.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT="AFTER_UPDATE_ACCOUNTCONF_ACCOUNT",t.CHANGE_ACCOUNTCONF_PROPERTY="CHANGE_ACCOUNTCONF_PROPERTY",t.CHANGE_ITEM_DISABLE_STATUS="CHANGE_ITEM_DISABLE_STATUS",t.GET_REGRET_CATEGORY="GET_REGRET_CATEGORY",t.CHANGE_REGRET_ACCOUNT_ACCOUNT_NAME="CHANGE_REGRET_ACCOUNT_ACCOUNT_NAME",t.CHANGE_REGRET_ACCOUNT_COMMON_STRING="CHANGE_REGRET_ACCOUNT_COMMON_STRING",t.CHANGE_REGRET_CANCLE="CHANGE_REGRET_CANCLE",t.SAVE_REGRET_MESSAGE="SAVE_REGRET_MESSAGE",t.CHANGE_LR_ACCOUNT_COMMON_STRING="CHANGE_LR_ACCOUNT_COMMON_STRING"},1274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.GET_BUSINESS_LIST="GET_BUSINESS_LIST",t.CHANGE_CX_ACCOUNT_COMMON_STRING="CHANGE_CX_ACCOUNT_COMMON_STRING",t.CXLS_ITEM_CHECKBOX_CHECK_ALL="CXLS_ITEM_CHECKBOX_CHECK_ALL",t.CXLS_ITEM_CHECKBOX_CHECK="CXLS_ITEM_CHECKBOX_CHECK",t.GET_CXLSCONF_ALL_SETTINGS="GET_CXLSCONF_ALL_SETTINGS",t.SET_CURRENT_PZ="SET_CURRENT_PZ",t.GET_ACCOUNTCONF_ALL_SETTINGS="GET_ACCOUNTCONF_ALL_SETTINGS",t.CALCULATE_FROM_CXLS_JUMP_TO_LRLS="CALCULATE_FROM_CXLS_JUMP_TO_LRLS",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS="TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS",t.COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS="COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS",t.INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS="INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS",t.INVOICING_FROM_CXLS_JUMP_TO_LRLS="INVOICING_FROM_CXLS_JUMP_TO_LRLS",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ="TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_ZJTX="TRANSFER_OUT_FROM_CXLS_JUMP_TO_ZJTX",t.AFTER_SAVE_ACCOUNT_PAYMENT="AFTER_SAVE_ACCOUNT_PAYMENT",t.INIT_PAYMENT_STATE="INIT_PAYMENT_STATE",t.INIT_LR_ACCOUNT_SETTINGS="INIT_LR_ACCOUNT_SETTINGS",t.CALCULATE_CHANGE_QUERY="CALCULATE_CHANGE_QUERY",t.CHANGE_PZ_COMMON_STRING="CHANGE_PZ_COMMON_STRING",t.INIT_CXLS="INIT_CXLS",t.INIT_COMMON_CHARGE_FROM_CXLS="INIT_COMMON_CHARGE_FROM_CXLS",t.INIT_JZSY_FROM_CXLS="INIT_JZSY_FROM_CXLS",t.CXLS_CALCULATE_GAIN_OR_LOSS="CXLS_CALCULATE_GAIN_OR_LOSS"},1277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.ACCOUNT_CHANGE_VIEW_DIMENSION="ACCOUNT_CHANGE_VIEW_DIMENSION",t.GET_MANAGE_CATEGORY_DETAIL="GET_MANAGE_CATEGORY_DETAIL",t.GET_CALCULATE_LIST="GET_CALCULATE_LIST",t.GET_CALCULATE_INVOICING_LIST="GET_CALCULATE_INVOICING_LIST",t.GET_CALCULATE_CERTIFICATE_LIST="GET_CALCULATE_CERTIFICATE_LIST",t.GET_CALCULATE_COST_LIST="GET_CALCULATE_COST_LIST",t.CHANGE_CALCULATE_COMMON_STRING="CHANGE_CALCULATE_COMMON_STRING",t.CHANGE_ACCOUNT_AMOUNT_SUM="CHANGE_ACCOUNT_AMOUNT_SUM",t.CHANGE_ACCOUNT_COMMON_STRING="CHANGE_ACCOUNT_COMMON_STRING",t.CHANGE_ACCOUNT_ACCOUNT_NAME="CHANGE_ACCOUNT_ACCOUNT_NAME",t.BEFORE_RUNNING_PAY_OR_RECEIVE="BEFORE_RUNNING_PAY_OR_RECEIVE",t.ACCOUNT_ITEM_CHECKBOX_SELECT="ACCOUNT_ITEM_CHECKBOX_SELECT",t.PAY_RECEIVE_ITEM_CHECKBOX_CHECK_ALL="PAY_RECEIVE_ITEM_CHECKBOX_CHECK_ALL",t.INIT_RUNNING_BUSINESS_OR_PAY_CARD="INIT_RUNNING_BUSINESS_OR_PAY_CARD",t.MODIFY_RUNNING_PAYMENT="MODIFY_RUNNING_PAYMENT",t.SHOW_RELATE_PAYMENT_FETCH="SHOW_RELATE_PAYMENT_FETCH",t.CHANGE_ITEM_CHILD_SHOW="CHANGE_ITEM_CHILD_SHOW",t.CHANGE_TYPE_OF_SEARCH="CHANGE_TYPE_OF_SEARCH",t.INIT_SEARCH_CALCULATION="INIT_SEARCH_CALCULATION"},1278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.GET_BUSINESS_LIST="GET_BUSINESS_LIST",t.CHANGE_CX_ACCOUNT_COMMON_STRING="CHANGE_CX_ACCOUNT_COMMON_STRING",t.CXLS_ITEM_CHECKBOX_CHECK_ALL="CXLS_ITEM_CHECKBOX_CHECK_ALL",t.CXLS_ITEM_CHECKBOX_CHECK="CXLS_ITEM_CHECKBOX_CHECK",t.GET_CXLSCONF_ALL_SETTINGS="GET_CXLSCONF_ALL_SETTINGS",t.SET_CURRENT_PZ="SET_CURRENT_PZ",t.SHOW_RELATE_PAYMENT_FETCH="SHOW_RELATE_PAYMENT_FETCH",t.CHANGE_ITEM_CHILD_SHOW="CHANGE_ITEM_CHILD_SHOW",t.INIT_LR_ACCOUNT="INIT_LR_ACCOUNT",t.MODIFY_RUNNING_PAYMENT="MODIFY_RUNNING_PAYMENT"},1279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRunningAccount=t.saveAccountRegret=t.getAccountRegretList=t.getPaoundgeConfig=t.initPoundageTemp=t.savePoundageConfig=t.selectAccountRunningCategory=t.swapRunningAccount=t.runningAccountUsed=t.changeAccountConfAccountNumber=t.closeAccountconfModal=t.changeAccountConfingCommonString=t.beforeModifyaccountConfRunningOld=t.accountconfAccountCheckboxCheck=t.selectOrUnselectAccountAll=t.beforeInsertAccountConf=void 0;var a=c(n(1315)),r=l(n(52)),i=l(n(31)),o=n(22),u=n(18),s=(c(n(30)),c(n(102)));c(n(27));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.beforeInsertAccountConf=function(){return function(e){e({type:a.BEFORE_INSERT_ACCOUNTCONF})}},t.selectOrUnselectAccountAll=function(e){return function(t,n){var r=n().allState,i=r.get("accountList").size?r.getIn(["accountList",0,"childList"]):(0,u.fromJS)([]),o=r.get("accountList",0,"disableList").size?r.getIn(["accountList",0,"disableList"]):(0,u.fromJS)([]);t({type:a.SELECT_OR_UNSELECT_ACCOUNT_ALL,selectAll:e,accountList:i,disableList:o})}},t.accountconfAccountCheckboxCheck=function(e,t){return{type:a.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK,checked:e,uuid:t}},t.beforeModifyaccountConfRunningOld=function(e){return{type:a.BEFORE_MODIFY_ACCOUNTCONF_RUNNING,item:e}};var d=t.changeAccountConfingCommonString=function(e,t,n){return function(r){var i="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t));r({type:a.CHANGE_ACCOUNTCONFIG_COMMON_STRING,placeArr:i,value:n})}},f=(t.closeAccountconfModal=function(){return{type:a.CLOSE_ACCOUNTCONF_MODAL}},t.changeAccountConfAccountNumber=function(e,t){return{type:a.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER,accountType:e,value:t}},t.runningAccountUsed=function(e,t){return function(n){n({type:a.SWITCH_LOADING_MASK}),(0,r.default)("runningAccountUsed","POST",JSON.stringify({accountUuid:e,used:t}),function(r){n({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(r,"show")&&n({type:a.CHANGE_ACCOUNT_CARD_USED_STATUS,accountUuid:e,used:t})})}},t.swapRunningAccount=function(e,t){return function(n){n({type:a.SWITCH_LOADING_MASK}),(0,r.default)("swapRunningAccount","POST",JSON.stringify({fromUuid:e,toUuid:t}),function(e){n({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(e,"show")&&n({type:a.GET_RUNNING_ACCOUNT,receivedData:e.data})})}},t.selectAccountRunningCategory=function(e){return function(t,n){t({type:a.SWITCH_LOADING_MASK}),(0,r.default)("getRunningDetail","GET","uuid="+e,function(e){t({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)&&(t(d("poundage","item",(0,u.fromJS)(e.data.result))),t(d("poundage","name",e.data.result.name)))})}}),m=(t.savePoundageConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"insert",t=arguments[1];return function(n,r){var u=r().accountConfigState.get("poundageTemp"),s=u.get("categoryUuid"),l=u.get("poundageNeedProject"),c=u.get("poundageNeedCurrent");n({type:a.SWITCH_LOADING_MASK}),(0,i.default)(e+"Poundage","POST",JSON.stringify({categoryUuid:s,poundageNeedProject:l,poundageNeedCurrent:c}),function(e){n({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(e,"show")&&(t(),n(m()))})}},t.initPoundageTemp=function(){return{type:a.INIT_POUNDAGE_TEMP}});t.getPaoundgeConfig=function(){return function(e){e({type:a.SWITCH_LOADING_MASK}),(0,i.default)("getPoundage","GET","",function(t){e({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(t)&&(e({type:a.GET_POUNDGE_ACCOUNT,data:t.data}),t.data.categoryUuid&&e(f(t.data.categoryUuid)))})}},t.getAccountRegretList=function(e){return function(t){t({type:a.SWITCH_LOADING_MASK}),(0,r.default)("getAccountRegretList","GET","",function(n){t({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(n)&&(t(d("regret","accountRegretList",(0,u.fromJS)(n.data.accountRegretList))),e&&e())})}},t.saveAccountRegret=function(e,t,n){return function(i){i({type:a.SWITCH_LOADING_MASK}),(0,r.default)("saveAccountRegret","POST",JSON.stringify({uuid:e,newType:t}),function(e){i({type:a.SWITCH_LOADING_MASK}),(0,o.showMessage)(e,"show")&&(i({type:a.INIT_REGRETTEMP}),i(s.getRunningAccount()),n&&n())})}},t.getRunningAccount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){(0,r.default)("getRunningAccount","GET","currentPage="+e+"&pageSize=1",function(n){(0,o.showMessage)(n)&&t({type:a.GET_ACCOUNT_CONFIG_LIST,list:n.data.resultList,currentPage:e,pageCount:n.data.pages})})}}},1289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.SET_PRINT_VC_INDEX_AND_DATE="SET_PRINT_VC_INDEX_AND_DATE",t.SET_PRINT_STRING="SET_PRINT_STRING"},1291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments[1];return((e={},o(e,i.INIT_YLLS,function(){return u}),o(e,i.GET_PREVIEW_RUNNING_BUSINESS_FETCH,function(){return t=(t=t.setIn(["views","refreshList"],n.refreshList)).set("jrOri",(0,r.fromJS)(n.receivedData.jrOri)).set("category",(0,r.fromJS)(n.receivedData.category)).set("processInfo",n.receivedData.processInfo?(0,r.fromJS)(n.receivedData.processInfo):null).set("lsItemData",(0,r.fromJS)(a({},n.receivedData.category,n.receivedData.jrOri))).set("currentItem",n.currentItem).setIn(["views","fromPage"],n.fromPage).setIn(["views","uuidList"],n.uuidList)}),o(e,i.GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH,function(){return t=t.set("jrOri",(0,r.fromJS)(n.receivedData.jrOri)).set("category",(0,r.fromJS)(n.receivedData.category)).set("processInfo",n.receivedData.processInfo?(0,r.fromJS)(n.receivedData.processInfo):null).set("lsItemData",(0,r.fromJS)(a({},n.receivedData.category,n.receivedData.jrOri))).set("currentItem",n.item)}),o(e,i.GET_PREVIEW_RELATED_RUNNING_BUSINESS_FETCH,function(){return t=t.set("relatedJrOri",(0,r.fromJS)(n.receivedData.jrOri)).set("relatedCategory",(0,r.fromJS)(n.receivedData.category)).set("relatedProcessInfo",n.receivedData.processInfo?(0,r.fromJS)(n.receivedData.processInfo):null).setIn(["relatedJrOri","uuidList"],n.uuidList)}),e)[n.type]||function(){return t})()};var r=n(18),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(493));function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=(0,r.fromJS)({views:{fromPage:"",uuidList:[],showMask:!1,refreshList:{}},lsItemData:{},currentItem:{},jrOri:{},category:{},processInfo:null,relatedJrOri:{},relatedCategory:{},relatedProcessInfo:null})},1298:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProjectCardList=t.getAssetsList=t.changeStockList=t.getCostCategory=t.insertOrModifyLrTransferOutPz=t.insertOrModifyLrInvoicingPz=t.insertOrModifyLrInvoiceAuthPz=t.insertOrModifyLrCostTransferPz=t.initLrBussiness=t.insertOrModifyLrDepreciation=t.insertOrModifyLrInternalTransfer=t.changeCalculateCommonString=t.changeLrAccountCommonString=t.getTransferOutList=t.getInvoicingList=t.getInvoiceAuthList=t.getCostTransferList=t.changeLrAccountAccountName=t.changeLrCalculateRateAssList=t.changeLrCostTransferRunningAssList=t.selectLrCalculateItemAll=t.selectLrCalculateItem=t.changeLrCostTransferCategoryUuidAndName=t.initLrAccount=t.changeLrCalculateCommonState=t.initLrCalculate=void 0;var a=f(n(37)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(38);var i=d(n(1342)),o=f(n(52)),u=n(18),s=n(22),l=(d(n(30)),d(n(27))),c=(d(n(43)),d(n(60)),d(n(1229)));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.initLrCalculate=function(){return{type:i.INIT_LR_CALCULATE_STATE}};var g=t.changeLrCalculateCommonState=function(e,t,n){return{type:i.CHANGE_LR_CALCULATE_COMMON_STATE,parent:e,position:t,value:n}},p=t.initLrAccount=function(e,t,n,a){return{type:i.INIT_CLR_ACCOUNT,strJudgeType:e,receivedData:t,callBackObj:n,temp:a}},_=(t.changeLrCostTransferCategoryUuidAndName=function(e){return function(t){(0,o.default)("getRunningDetail","GET","uuid="+e[0],function(n){if((0,s.showMessage)(n)){var a=n.data.result.acBusinessIncome;t({type:i.CHANGE_LR_COST_TRANSFER_CATEGORY_UUID_AND_NAME,valueList:e,acBusinessIncome:a})}})}},t.selectLrCalculateItem=function(e,t,n,a){return{type:i.SELECT_LR_CALCULATE_ITEM,uuid:e,Tem:t,stockCardUuid:n,amount:a}},t.selectLrCalculateItemAll=function(e,t,n){return{type:i.SELECT_LR_CALCULATE_ITEM_ALL,selectAll:e,Tem:t,ListName:n}},t.changeLrCostTransferRunningAssList=function(e,t){return{type:i.CHANGE_LR_COST_TRANSFER_RUNNING_ASSLIST,ass:e,index:t}},t.changeLrCalculateRateAssList=function(e,t){return{type:i.CHANGE_LR_CALCULATE_RATE_ASSLIST,ass:e,index:t}},t.changeLrAccountAccountName=function(e,t,n,a){return{type:i.CHANGE_LR_ACCOUNT_ACCOUNT_NAME,tab:e,placeUUid:t,placeName:n,value:a}},t.getCostTransferList=function(e,t){return function(n,a){var r=[];a().lrCalculateState.getIn(["costTransferTemp","stockCardList"]).map(function(e){r.push(e.get("uuid"))}),t&&(0,o.default)("getCarryoverList","POST",JSON.stringify({runningState:e,runningDate:t,cardUuidList:r}),function(e){(0,s.showMessage)(e)&&n({type:i.AFTER_GET_COMMON_LIST,receivedData:e.data,ListName:"costTransferList",temp:"costTransferTemp"})})}}),T=t.getInvoiceAuthList=function(e,t,n){return function(n,a){t&&(0,o.default)("getBusinessAuthList","POST",JSON.stringify({billAuthType:e,runningDate:t}),function(e){(0,s.showMessage)(e)&&n({type:i.AFTER_GET_COMMON_LIST,receivedData:e.data,ListName:"invoiceAuthList",temp:"invoiceAuthTemp"})})}},C=t.getInvoicingList=function(e,t){return function(n,a){t&&(0,o.default)("getBusinessMakeoutList","POST",JSON.stringify({billMakeOutType:e,runningDate:t}),function(e){(0,s.showMessage)(e)&&n({type:i.AFTER_GET_COMMON_LIST,receivedData:e.data,ListName:"invoicingList",temp:"invoicingTemp"})})}},S=(t.getTransferOutList=function(e){return function(t,n){(0,o.default)("getBusinessTurnoutList","POST",JSON.stringify({runningDate:e}),function(e){(0,s.showMessage)(e)&&t({type:i.AFTER_GET_TRANSFER_OUT_LIST,receivedData:e.data})})}},function(e,t){return t.every(function(t){return new Date(t.get("runningDate"))<=new Date(e)})}),E=(t.changeLrAccountCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(m(t));"flags"===t[0]&&(r=t),a({type:i.CHANGE_LR_ACCOUNT_COMMON_STRING,tab:e,placeArr:r,value:n})}},t.changeCalculateCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(m(t));"flags"===t[0]&&(r=t),a({type:i.CHANGE_CALCULATE_COMMON_STRING,tab:e,placeArr:r,value:n})}}),A=(t.insertOrModifyLrInternalTransfer=function(e){return function(t,n){var r=n().lrAccountState,s=r.get("hideCategoryList").find(function(e){return"LB_ZZ"===e.get("categoryType")}).get("uuid"),l=n().lrCalculateState,d=l.get("InternalTransferTemp"),f=d.get("enclosureList").toJS(),m=d.get("needDeleteUrl").toJS(),g=f.concat(m);d.get("runningState");d=(d=(d=d.set("categoryUuid",s).set("categoryType","LB_ZZ")).set("amount",parseFloat(d.get("amount")))).set("enclosureList",(0,u.fromJS)(g));var _=l.getIn(["flags","insertOrModify"]),T=(d=(d=d.get("uuid")?d:d.set("uuid",r.getIn(["cardTemp","uuid"]))).get("flowNumber")?d:d.set("flowNumber",r.getIn(["cardTemp","flowNumber"]))).get("runningDate"),C=d.get("runningAbstract"),S=d.get("fromAccountUuid"),E=d.get("toAccountUuid");return T?s?C?C.length>50?a.default.info("摘要长度不能超过50个字符"):S?E?("insert"===_&&d.get("uuid"),t({type:i.SWITCH_LOADING_MASK}),void("insert"===_?(0,o.default)("insertVirement","POST",JSON.stringify(d),function(n){t({type:i.SWITCH_LOADING_MASK}),0!==n.code?(a.default.info(n.code+" "+n.message),n.message.indexOf("已生成凭证")>-1&&t(c.changeLrAccountCommonString("",["flags","pzFailedButtonShow"],!0))):(a.default.success(n.message),t(e?p("saveAndNew","","","InternalTransferTemp"):p("afterSave",d,n.data,"InternalTransferTemp")))}):(0,o.default)("modifyRunningbusiness","POST",JSON.stringify(d),function(n){t({type:i.SWITCH_LOADING_MASK}),0!==n.code?(a.default.info(n.code+" "+n.message),n.message.indexOf("已生成凭证")>-1&&t(c.changeLrAccountCommonString("",["flags","pzFailedButtonShow"],!0))):(a.default.success(n.message),t(e?p("saveAndNew","","","InternalTransferTemp"):p("afterSave",d,n.data,"InternalTransferTemp")))}))):a.default.info("转入账户未获取"):a.default.info("转出账户未获取"):a.default.info("摘要必填"):a.default.info("流水类别未获取"):a.default.info("日期必填")}},t.insertOrModifyLrDepreciation=function(e){return function(t,n){var u=n().lrAccountState,s=(u.get("hideCategoryList"),n().lrCalculateState),l=s.get("DepreciationTemp"),d=l.get("enclosureList").toJS(),f=l.get("needDeleteUrl").toJS(),m=d.concat(f);l.get("runningState");l=(l=l.set("categoryType","LB_ZJTX")).set("amount",parseFloat(l.get("amount")));var g=s.getIn(["flags","insertOrModify"]),_=(l=(l=l.get("uuid")?l:l.set("uuid",u.getIn(["cardTemp","uuid"]))).get("flowNumber")?l:l.set("flowNumber",u.getIn(["cardTemp","flowNumber"]))).get("runningDate"),T=l.get("runningAbstract"),C=l.get("categoryUuid");return _?C?T?T.length>50?a.default.info("摘要长度不能超过50个字符"):("insert"===g&&l.get("uuid"),t({type:i.SWITCH_LOADING_MASK}),void("insert"===g?(0,o.default)("insertAssets","POST",JSON.stringify(r({},l.toJS(),{enclosureList:m})),function(n){if(t({type:i.SWITCH_LOADING_MASK}),0!==n.code)a.default.info(n.code+" "+n.message);else{n.data.businessFlowNumberList;a.default.success(n.message),e?(t(p("saveAndNew","","","DepreciationTemp")),t(A("LB_ZJTX"))):t(p("afterSave",l,n.data,"DepreciationTemp"))}}):(0,o.default)("modifyRunningbusiness","POST",JSON.stringify(r({},l.toJS(),{enclosureList:m})),function(n){t({type:i.SWITCH_LOADING_MASK}),0!==n.code?(a.default.info(n.code+" "+n.message),n.message.indexOf("已生成凭证")>-1&&t(c.changeLrAccountCommonString("",["flags","pzFailedButtonShow"],!0))):(a.default.success(n.message),t(e?p("saveAndNew","","","DepreciationTemp"):p("afterSave",l,n.data,"DepreciationTemp")))}))):a.default.info("摘要必填"):a.default.info("处理类别未获取"):a.default.info("日期必填")}},t.initLrBussiness=function(){return{type:i.INIT_LR_ACOUNT_STATE}},t.insertOrModifyLrCostTransferPz=function(e){return function(t,n){var r=n().lrCalculateState,u=r.get("costTransferTemp"),l=r.get("costTransferList"),c=r.getIn(["flags","insertOrModify"]),d=u.get("uuidList"),f=(u.get("categoryUuid"),u.get("runningState")),m=u.get("runningDate"),g=u.get("runningAbstract"),p=(u.get("carryoverAmount"),u.get("assList")),_=(u.get("categoryName"),u.get("stockCardList")),T=u.get("stockCardUuidList"),C=u.get("carryoverBusinessUuid"),E=u.get("enclosureList").toJS(),A=u.get("needDeleteUrl").toJS(),I=E.concat(A),y=[];if(T&&T.map(function(e){y.push(e.get("uuid"))}),!m)return a.default.info("日期必填");if(!S(m,l))return a.default.info("日期不能比所选流水的日期前");if(!g)return a.default.info("摘要必填");if(g.length>50)return a.default.info("摘要长度不能超过50个字符");if(p.some(function(e){return!e.get("assId")&&!e.get("assName")}))return a.default.info("辅助核算未填");if(!d.size)return a.default.info("请勾选要结转的流水");var L="false",N=[];return _&&_.forEach(function(e){return e.get("amount")?-1===y.indexOf(e.get("uuid"))?(L="ListTrue",N.push(e.get("code")+" "+e.get("name")),!1):void 0:(L="amountTrue",N.push(e.get("code")+" "+e.get("name")),!1)}),"amountTrue"===L?a.default.info("请填入"+N+"的成本金额"):"ListTrue"===L?a.default.info("请选择"+N+"的待处理流水"):(t({type:i.SWITCH_LOADING_MASK}),void("insert"===c?(0,o.default)("insertCarryoverItem","POST",JSON.stringify({uuidList:d,runningState:f,runningDate:m,cardList:_,runningAbstract:g,enclosureList:I}),function(n){(0,s.showMessage)(n,"show")&&t({type:i.AFTER_SUCCESS_INSERT_CARRYOVER_ITEM,saveAndNew:e,carryoverBusinessUuid:n.data.result}),t({type:i.SWITCH_LOADING_MASK})}):"modify"===c&&(0,o.default)("modifyCarryoverItem","POST",JSON.stringify({carryoverBusinessUuid:C,uuidList:d,runningState:f,runningDate:m,cardList:_,runningAbstract:g,enclosureList:I}),function(n){(0,s.showMessage)(n,"show")&&t({type:i.AFTER_SUCCESS_INSERT_CARRYOVER_ITEM,saveAndNew:e,carryoverBusinessUuid:n.data.result}),t({type:i.SWITCH_LOADING_MASK})})))}},t.insertOrModifyLrInvoiceAuthPz=function(e){return function(t,n){var c=n().lrAccountState.get("hideCategoryList").find(function(e){return"LB_FPRZ"===e.get("categoryType")}).get("uuid"),d=n().lrCalculateState,f=d.get("invoiceAuthTemp"),m=f.get("enclosureList").toJS(),g=f.get("needDeleteUrl").toJS(),p=m.concat(g);f=f.set("enclosureList",(0,u.fromJS)(p));var _=d.get("invoiceAuthList"),C=d.getIn(["flags","insertOrModify"]),E=f.get("uuidList"),A=f.get("billAuthType"),I=f.get("runningDate"),y=f.get("runningAbstract");f=f.set("categoryUuid",c);var L=d.get("rateAcAndAsslist"),N=[l.ACCOUNT_RATE_TYPE_OF_INPUT,l.ACCOUNT_RATE_TYPE_OF_CERTIFIED],O=L.get("acList").filter(function(e){return N.indexOf(e.get("type"))>-1}),h=L.get("assList").filter(function(e){return N.indexOf(e.get("type"))>-1});return f=f.set("acList",O).set("assList",h),I?S(I,_)?c?y?y.length>50?a.default.info("摘要长度不能超过50个字符"):E.size?h.some(function(e){return!e.get("assId")&&!e.get("assName")})?a.default.info("辅助核算未填"):(t({type:i.SWITCH_LOADING_MASK}),void("insert"===C?(0,o.default)("insertBusinessAuthItem","POST",JSON.stringify(r({},f.toJS())),function(n){(0,s.showMessage)(n,"show")&&(e&&t(T(A,I)),t({type:i.AFTER_SUCCESS_INSERT_INVOICEAUTH_ITEM,saveAndNew:e,authBusinessUuid:n.data.result})),t({type:i.SWITCH_LOADING_MASK})}):"modify"===C&&(0,o.default)("modifyBusinessAuthItem","POST",JSON.stringify(r({},f.toJS())),function(n){(0,s.showMessage)(n,"show")&&(e&&t(T(A,I)),t({type:i.AFTER_SUCCESS_INSERT_INVOICEAUTH_ITEM,saveAndNew:e,authBusinessUuid:n.data.result})),t({type:i.SWITCH_LOADING_MASK})}))):a.default.info("请勾选要认证的流水"):a.default.info("摘要必填"):a.default.info("流水类别未获取"):a.default.info("日期不能比所选流水的日期前"):a.default.info("日期必填")}},t.insertOrModifyLrInvoicingPz=function(e){return function(t,n){var c=n().lrAccountState.get("hideCategoryList").find(function(e){return"LB_KJFP"===e.get("categoryType")}).get("uuid"),d=n().lrCalculateState,f=d.get("invoicingTemp"),m=f.get("enclosureList").toJS(),g=f.get("needDeleteUrl").toJS(),p=m.concat(g);f=(f=f.set("enclosureList",(0,u.fromJS)(p))).set("categoryUuid",c);var _=d.get("invoicingList"),T=d.getIn(["flags","insertOrModify"]),E=f.get("uuidList"),A=f.get("billMakeOutType"),I=f.get("runningDate"),y=f.get("runningAbstract"),L=d.get("rateAcAndAsslist"),N=n().accountConfState.getIn(["taxRateTemp","scale"]),O=[];"small"===N?O=[l.ACCOUNT_RATE_TYPE_OF_PAYABLE,l.ACCOUNT_RATE_TYPE_OF_NOTBILLING]:"general"===N&&(O=[l.ACCOUNT_RATE_TYPE_OF_WAITOUTPUT,l.ACCOUNT_RATE_TYPE_OF_OUTPUT]);var h=L.get("acList").filter(function(e){return O.indexOf(e.get("type"))>-1}),v=L.get("assList").filter(function(e){return O.indexOf(e.get("type"))>-1});return f=f.set("acList",h).set("assList",v),I?S(I,_)?c?y?y.length>50?a.default.info("摘要长度不能超过50个字符"):E.size?v.some(function(e){return!e.get("assId")&&!e.get("assName")})?a.default.info("辅助核算未填"):(t({type:i.SWITCH_LOADING_MASK}),void("insert"===T?(0,o.default)("insertBusinessMakeoutItem","POST",JSON.stringify(r({},f.toJS())),function(n){(0,s.showMessage)(n,"show")&&(e&&t(C(A,I)),t({type:i.AFTER_SUCCESS_INSERT_INVOICING_ITEM,saveAndNew:e,makeOutBusinessUuid:n.data.result})),t({type:i.SWITCH_LOADING_MASK})}):"modify"===T&&(0,o.default)("modifyBusinessMakeoutItem","POST",JSON.stringify(r({},f.toJS())),function(n){(0,s.showMessage)(n,"show")&&(e&&t(C(A,I)),t({type:i.AFTER_SUCCESS_INSERT_INVOICING_ITEM,saveAndNew:e,makeOutBusinessUuid:n.data.result})),t({type:i.SWITCH_LOADING_MASK})}))):a.default.info("请勾选要认证的流水"):a.default.info("摘要必填"):a.default.info("流水类别未获取"):a.default.info("日期不能比所选流水的日期前"):a.default.info("日期必填")}},t.insertOrModifyLrTransferOutPz=function(e){return function(t,n){var c=n().lrAccountState.get("hideCategoryList").find(function(e){return"LB_ZCWJZZS"===e.get("categoryType")}).get("uuid"),d=n().lrCalculateState,f=d.get("transferOutTemp"),m=f.get("enclosureList").toJS(),g=f.get("needDeleteUrl").toJS(),p=m.concat(g);f=f.set("enclosureList",(0,u.fromJS)(p));var _=d.get("transferOutObj"),T=_.get("flowDtoList"),C=_.get("inputAmount"),E=_.get("outputAmount"),A=d.getIn(["flags","insertOrModify"]),I=T.map(function(e){return e.get("uuid")}),y=f.get("runningDate"),L=f.get("runningAbstract");f=f.set("categoryUuid",c).set("uuidList",I);var N=d.get("rateAcAndAsslist"),O=[l.ACCOUNT_RATE_TYPE_OF_TURNOUTUNPAID,l.ACCOUNT_RATE_TYPE_OF_UNPAID],h=N.get("acList").filter(function(e){return O.indexOf(e.get("type"))>-1}),v=N.get("assList").filter(function(e){return O.indexOf(e.get("type"))>-1});return f=f.set("acList",h).set("assList",v),y?S(y,T)?c?L?L.length>50?a.default.info("摘要长度不能超过50个字符"):I.size?C>=E?a.default.info("进项税额大于销项税额，无需转出未交增值税"):(t({type:i.SWITCH_LOADING_MASK}),void("insert"===A?(0,o.default)("insertBusinessTurnoutItem","POST",JSON.stringify(r({},f.toJS())),function(n){(0,s.showMessage)(n,"show")&&t({type:i.AFTER_SUCCESS_INSERT_TRANSFER_OUT_ITEM,saveAndNew:e,turnOutBusinessUuid:n.data.result}),t({type:i.SWITCH_LOADING_MASK})}):"modify"===A&&(0,o.default)("modifyBusinessTurnoutItem","POST",JSON.stringify(r({},f.toJS())),function(n){(0,s.showMessage)(n,"show")&&t({type:i.AFTER_SUCCESS_INSERT_TRANSFER_OUT_ITEM,saveAndNew:e,turnOutBusinessUuid:n.data.result}),t({type:i.SWITCH_LOADING_MASK})}))):a.default.info("没有要转出的流水"):a.default.info("摘要必填"):a.default.info("流水类别未获取"):a.default.info("日期不能在流水的日期前"):a.default.info("日期必填")}},t.getCostCategory=function(e,t,n){return function(a){a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getCostCategory","POST",JSON.stringify({sobId:e,runningState:t,runningDate:n}),function(e){a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&a({type:i.GET_COST_CATEGORY,receivedData:e.data})})}},t.changeStockList=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"add";return function(a,r){var i=r().lrCalculateState,o=i.getIn(["costTransferTemp","runningDate"]),s=i.getIn(["costTransferTemp","runningState"]),l=e.toJS();"delete"==n?(l.splice(t,1),a(E("costTransfer","stockCardList",(0,u.fromJS)(l))),a(_(s,o))):(l.splice(t+1,0,{amount:"",uuid:""}),a(E("costTransfer","stockCardList",(0,u.fromJS)(l))))}},t.getAssetsList=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getAssetsList","POST",JSON.stringify({type:e}),function(e){t({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&t({type:i.GET_DEAL_TYPE_CATEGORY,receivedData:e.data.result})})}});t.getProjectCardList=function(e){return function(t,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,o.default)("getProjectCardList","POST",JSON.stringify({sobId:a,categoryList:e,needCommonCard:!0}),function(e){(0,s.showMessage)(e)&&t(g("flags","projectList",(0,u.fromJS)(e.data.result)))})}}},1304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccountProjectCardList=t.getAccountContactsCardList=t.getAccountRunningCate=t.changeSearchRunningChooseValue=t.changeSearchRunningAllChildItemShow=t.changeSearchRunningChildItemShow=t.getgetSearchRunningSortFun=t.getRunningBusinessDuty=t.deleteSingleFlow=t.changeBeforeAmount=t.getManagerCategoryList=t.setDefineMadalInitState=t.setInvioceMadalInitState=t.setCarryoverMadalInitState=t.setManageMadalInitState=t.changeCxAccountCommonOutString=t.changeCxAccountCommonString=t.changeCurrentPage=t.getSearchRunningItem=t.getBusinessBeforeSwitch=t.insertRunningInvioceDefineModal=t.insertRunningInvioceModal=t.insertlrAccountJzsyModal=t.insertlrAccountCarryoverModal=t.insertCommonModal=t.insertRunningManagerModal=t.getBusinessDefineModal=t.getBusinessInvioceModal=t.calculateGainForJzsy=t.getBusinessBackModal=t.getBusinessTakeBackModal=t.getBusinessDefrayModal=t.getBusinessGrantModal=t.getBusinessJzsyModal=t.getBusinessManagerModal=t.beforeRunningPayOrReceive=t.getAccountDimensionFetch=t.afterModifyAccountAllList=t.changePzCommonString=t.deleteVcItemFetch=t.runningInsertOrModifyVc=t.deleteAccountItemCardAndRunning=t.accountItemCheckboxCheck=t.accountItemCheckboxCheckAll=t.getBusinessList=t.getPeriodAndBusinessList=void 0;var a=y(n(37)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(38);var i=I(n(492)),o=y(n(52)),u=n(18),s=n(22),l=I(n(30)),c=I(n(27)),d=I(n(43)),f=I(n(60)),m=I(n(177)),g=(I(n(1245)),I(n(1242))),p=I(n(172)),_=I(n(1249)),T=I(n(130)),C=I(n(102)),S=I(n(485)),E=I(n(484)),A=n(488);function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}t.getPeriodAndBusinessList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(a,r){a({type:i.SWITCH_LOADING_MASK});r().searchRunningState;var u=""===n?1:n;(0,o.default)("getSearchRunningList","POST",JSON.stringify({start:e||"",end:e||"",getPeriod:"true",accountUuid:t,currentPage:u,pageSize:c.CXLS_LIMIE_LENGTH}),function(n){if(a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(n)){var r=a(C.reportGetIssuedateAndFreshPeriod(n)),o=e||r,l=n.data.periodDtoJson?a(d.everyTableGetIssuedate(n.data.periodDtoJson)):"";a({type:i.GET_SEARCH_BUSINESS_LIST,receivedData:n.data.result.jrList,receivedExtra:n.data.result,period:n.data.periodDtoJson,issuedate:o,endissuedate:o,getPeriod:"true",issues:l,accountUuid:t,currentPage:u,pageCount:n.data.result.pageCount,reExpand:!0})}}),a(g.getRunningAccount())}};var L=t.getBusinessList=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",u=arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",f=arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],g=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return function(p,_){p({type:i.SWITCH_LOADING_MASK});var T=m&&n?n.split(c.TREE_JOIN_STR)[0]:"",C=_().searchRunningState,S=""===r?C.get("currentPage"):r,E=l?C.getIn(["flags","searchType"]):"",A=u||C.getIn(["flags","orderType"]),I=(C.getIn(["flags","chooseValue"]),"-"===e.substr(4,1)?e:e.substr(0,4)+"-"+e.substr(6,2)),y="-"===t.substr(4,1)?t:t.substr(0,4)+"-"+t.substr(6,2),L=void 0;switch(A){case"SEARCH_ORDER_DATE":L=C.getIn(["orderByList","dateSortType"]);break;case"SEARCH_ORDER_JR_INDEX":L=C.getIn(["orderByList","indexSortType"]);break;case"SEARCH_ORDER_CATEGORY_TYPE":L=C.getIn(["orderByList","categorySortType"]);break;case"SEARCH_ORDER_CERTIFICATE":L=C.getIn(["orderByList","certificateSortType"]);break;case"SEARCH_ORDER_CREATE_NAME":L=C.getIn(["orderByList","nameSortType"])}L=""===f?L:f,(0,o.default)("getSearchRunningList","POST",JSON.stringify({start:I||"",end:y||I,accountUuid:T,getPeriod:"true",orderBy:A,searchType:E,searchContent:l,isAsc:L,currentPage:S,pageSize:c.CXLS_LIMIE_LENGTH,isAccount:m}),function(r){if(p({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(r)){var o=r.data.periodDtoJson?p(d.everyTableGetIssuedate(r.data.periodDtoJson)):"";p({type:i.GET_SEARCH_BUSINESS_LIST,receivedData:r.data.result.jrList,receivedExtra:r.data.result,period:r.data.periodDtoJson,issuedate:e,endissuedate:t,issues:o,accountUuid:n,currentPage:S,isAsc:L,orderBy:A,isAccount:m,pageCount:r.data.result.pageCount,getPeriod:"true",reExpand:g}),r.data.result.msg&&a.default.info(r.data.result.msg)}})}},N=(t.accountItemCheckboxCheckAll=function(e,t){return{type:i.SEARCH_ITEM_CHECKBOX_CHECK_ALL,selectAll:e,list:t}},t.accountItemCheckboxCheck=function(e,t){return{type:i.SEARCH_ITEM_CHECKBOX_CHECK,checked:e,item:t}},t.deleteAccountItemCardAndRunning=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2],r=arguments[3];return function(e,u){var c=n||u().searchRunningState.getIn(["flags","selectList"]),d=u().searchRunningState,f=d.getIn(["flags","issuedate"]),m=d.getIn(["flags","endissuedate"]),g=d.getIn(["flags","isAccount"]),p=d.getIn(["flags","curAccountUuid"]),_=d.getIn(["flags","orderType"]);l.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(n){1===n.buttonIndex&&(e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunningItems","POST",JSON.stringify({deleteList:c,action:r}),function(n){if((0,s.showMessage)(n)){if(n.message)if(n.data.errorList.length){var r=n.data.errorList.join(",");a.default.error(r)}else a.default.success(n.message);e(L(f,m,p,"",_,t,"",g))}e({type:i.SWITCH_LOADING_MASK})}))}})}},t.runningInsertOrModifyVc=function(e,t,n,r){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments[5],c=arguments[6],d=arguments[7];return function(f,g){var p=g().searchRunningState,_=p.get("currentPage"),T=p.getIn(["flags","curAccountUuid"]),C=p.getIn(["flags","isAccount"]),S=p.getIn(["flags","orderType"]),E=p.getIn(["flags","endissuedate"]),A=0;f(N(["flags","pzDealNum"],A)),f(N(["flags","pzDealType"],"insert"));var I=t.sort(function(e,t){return parseInt(e.get("oriDate"))-parseInt(t.get("oriDate"))}).sort(function(e,t){return parseInt(e.get("jrNumber"))-parseInt(t.get("jrNumber"))}),y={runningPreview:"QUERY_JR-AUDIT",searchRunning:"QUERY_JR-AUDIT",searchRunningBatch:"QUERY_JR-AUDIT-BATCH_AUDIT"};if(t&&t.size>1)f(N(["flags","pzDealStatus"],!0)),function t(i,l){var c=0,d=setInterval(function(){c<.9?f(N(["flags","pzDealNum"],A+(c+=.01))):(clearInterval(d),f(N(["flags","pzDealNum"],A)))},100);(0,o.default)(n+"VcList","POST",JSON.stringify({uuidList:[i.getIn([l,"oriUuid"])],year:i.getIn([l,"currentYear"]),month:i.getIn([l,"currentMonth"]),vcindexlist:[i.getIn([l,"jrNumber"])],action:y[e]}),function(e){if((0,s.showMessage)(e))if(e.message)if(e.data.result.length){var n=e.data.result.join(",");a.default.error(n),clearInterval(d),f(N(["flags","pzDealStatus"],!1)),f(L(r,E,T,_,S,u,"",C))}else f(N(["flags","pzDealNum"],A+=1)),A<I.size?(clearInterval(d),t(I,A)):(clearInterval(d),f(N(["flags","pzDealStatus"],!1)),f(L(r,E,T,_,S,u,"",C)));else clearInterval(d),f(N(["flags","pzDealStatus"],!1));else clearInterval(d),f(N(["flags","pzDealStatus"],!1)),f(L(r,E,T,_,S,u,"",C))})}(I,0);else{var h=t.getIn([0,"oriUuid"]);f({type:i.SWITCH_LOADING_MASK}),(0,o.default)(n+"VcList","POST",JSON.stringify({uuidList:[h],year:t.getIn([0,"currentYear"]),month:t.getIn([0,"currentMonth"]),vcindexlist:[t.getIn([0,"jrNumber"])],action:y[e]}),function(e){if(f({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&e.message){if(e.data.result.length){var t=e.data.result.join(",");a.default.error(t)}else a.default.success(e.message);l?f(m.getPreviewNextRunningBusinessFetch(c,function(){d?d():f(O())})):d?d():f(O())}})}}},t.deleteVcItemFetch=function(e,t,n,a,r,u,l,c,d,f){return function(f,g){var p=g().searchRunningState,_=p.get("currentPage"),T=p.getIn(["flags","isAccount"]),C=p.getIn(["flags","curAccountUuid"]),S=p.getIn(["flags","orderType"]),E=p.getIn(["flags","endissuedate"]),A=0;f(N(["flags","pzDealNum"],A)),f(N(["flags","pzDealType"],"delete"));var I={runningPreview:"QUERY_JR-CANCEL_AUDIT",searchRunning:"QUERY_JR-CANCEL_AUDIT",searchRunningBatch:"QUERY_JR-CANCEL_AUDIT-BATCH_AUDIT"};console.log("ddd",I[e]);a&&a.length>1?(f(N(["flags","pzDealStatus"],!0)),function i(l){var c=0,d=setInterval(function(){c<.99?f(N(["flags","pzDealNum"],A+(c+=.01))):(clearInterval(d),f(N(["flags","pzDealNum"],A+.99)))},100);(0,o.default)("deleteVcList","POST",JSON.stringify({year:t||l.year,month:n||l.month,vcindexlist:[l.vcIndex],action:I[e]}),function(e){(0,s.showMessage)(e)?(A+=1,f(N(["flags","pzDealNum"],Math.floor(A))),A<a.length?(clearInterval(d),i(a[A])):(clearInterval(d),f(N(["flags","pzDealStatus"],!1)),f(L(r,E,C,_,S,u,"",T)))):(clearInterval(d),f(N(["flags","pzDealStatus"],!1)),f(L(r,E,C,_,S,u,"",T)))})}(a[0])):(f({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteVcList","POST",JSON.stringify({year:t||a[0].year,month:n||a[0].month,vcindexlist:[a[0].vcIndex],action:I[e]}),function(e){if(f({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e,"show")){var t=g().searchRunningState;t.get("currentPage"),t.getIn(["views","curAccountUuid"]),t.getIn(["flags","isAccount"]);l?f(m.getPreviewNextRunningBusinessFetch(c,function(){d?d():f(O())})):d?d():f(O())}}))}},t.changePzCommonString=function(e,t){return function(n){n({type:i.SEARCH_CHANGE_PZ_COMMON_STRING,name:e,value:t})}}),O=t.afterModifyAccountAllList=function(e){return function(t,n){var a=n().searchRunningState,r=a.getIn(["flags","issuedate"]),u=a.getIn(["flags","endissuedate"]),l=a.getIn(["flags","curAccountUuid"]),f=a.getIn(["flags","isAccount"]),m=a.get("currentPage"),g=f&&l?l.split(c.TREE_JOIN_STR)[0]:"",p=a.getIn(["flags","inputValue"]),_=p?a.getIn(["flags","searchType"]):"",T=a.getIn(["flags","orderType"]),C=r?"-"===r.substr(4,1)?r:r.substr(0,4)+"-"+r.substr(6,2):"",S=u?"-"===u.substr(4,1)?u:u.substr(0,4)+"-"+u.substr(6,2):"",E=void 0;switch(T){case"SEARCH_ORDER_DATE":E=a.getIn(["orderByList","dateSortType"]);break;case"SEARCH_ORDER_JR_INDEX":E=a.getIn(["orderByList","indexSortType"]);break;case"SEARCH_ORDER_CATEGORY_TYPE":E=a.getIn(["orderByList","categorySortType"]);break;case"SEARCH_ORDER_CERTIFICATE":E=a.getIn(["orderByList","certificateSortType"]);break;case"SEARCH_ORDER_CREATE_NAME":E=a.getIn(["orderByList","nameSortType"])}t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getSearchRunningList","POST",JSON.stringify({start:C||"",end:S||"",accountUuid:g,getPeriod:"true",orderBy:T,searchType:_,searchContent:p,isAsc:E,currentPage:m,pageSize:c.CXLS_LIMIE_LENGTH,isAccount:f}),function(n){if(t({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(n)){var a=n.data.periodDtoJson?t(d.everyTableGetIssuedate(n.data.periodDtoJson)):"";t({type:i.GET_SEARCH_BUSINESS_LIST,receivedData:n.data.result.jrList,receivedExtra:n.data.result,period:n.data.periodDtoJson,issuedate:r,endissuedate:u,issues:a,isReflash:e,isAccount:f,accountUuid:l,currentPage:m,isAsc:E,orderBy:T,pageCount:n.data.result.pageCount,getPeriod:"true"})}})}},h=(t.getAccountDimensionFetch=function(e,t,n,a,r,i,o){return function(u){u(h(e,t,n,a,r,i,o))}},function(e,t,n,a,r,u,l,c){return function(e){(0,o.default)("getRunningSettingInfo","GET","",function(t){(0,s.showMessage)(t)&&e({type:i.GET_SEARCH_CONF_ALL_SETTINGS,receivedData:t.data})})}}),v=(t.beforeRunningPayOrReceive=function(e,t,n,a,r){return function(o){n<0&&(n=-n,e="收"===e?"付":"收"),o({type:i.BEFORE_RUNNING_PAY_OR_RECEIVE,payDirection:e,assList:t,notHandleAmount:n,uuidList:a,runningList:r})}},t.getBusinessManagerModal=function(e,t,n,a,l){return function(c,f){c({type:i.SWITCH_LOADING_MASK});var m=f().allState.get("hideCategoryList").find(function(e){return"LB_SFGL"===e.get("categoryType")}).get("uuid"),g=t.get("jrJvUuid"),p=e.get("oriUuid"),_=e.get("categoryUuid"),T=(e.get("oriDate"),!!e.get("beOpened"));p||c(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getBusinessManagerModal",remark:"单笔流水核销"})),(0,o.default)("getJrOri","GET","oriUuid="+p,function(e){if(c({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)){var t=e.data.jrOri,o=t.notHandleAmount,d=t.oriState,f=t.handleType,p=t.oriDate;a=o<0?"JR_HANDLE_CZ"===f?"credit":"debit"===a?"credit":"debit":"credit"===a&&"STATE_YYZC_TG"!==d&&"STATE_YYZC_DJ"!==d&&"STATE_FY_DJ"!==d&&"STATE_SF_YJZZS"!==d?"credit":"debit",p>(0,s.formatDate)().substr(0,10)&&c(b(["modalTemp","oriDate"],p)),c(b("runningFlowTemp",(0,u.fromJS)(r({},e.data.jrOri,e.data.category)))),c(b(["runningFlowTemp","magenerType"],a)),c(b(["runningFlowTemp","actionFrom"],l)),c(b(["modalTemp","pendingManageDto"],(0,u.fromJS)({categoryUuid:_,pendingManageList:[{uuid:g,beOpened:T,oriDate:p}]}))),c(b(["modalTemp","amount"],Math.abs(e.data.jrOri.notHandleAmount))),c(b(["modalTemp","oriAbstract"],"核销账款")),c(b(["modalTemp","beOpened"],T)),c(b(["modalTemp","categoryUuid"],m)),n()}})}},t.getBusinessJzsyModal=function(e,t,n,a){return function(a,l){a({type:i.SWITCH_LOADING_MASK});var c=e.get("oriUuid");c||a(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getBusinessJzsyModal",remark:"单笔流水核销"})),(0,o.default)("getJrOri","GET","oriUuid="+c,function(c){if(a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(c)){var d=r({},c.data.jrOri,c.data.category),f=d.billList.length?d.billList[0].tax:0,m=(d.amount-f).toFixed(2);a(b("runningFlowTemp",(0,u.fromJS)(d))),a(b(["modalTemp","pendingStrongList"],(0,u.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:d.jrIndex,oriDate:e.get("oriDate"),jrNumber:t.get("jrNumber"),beSelect:!0,amount:m}])));var g=(0,s.formatDate)().substr(0,10);if(d.oriDate>g&&a(b(["modalTemp","oriDate"],d.oriDate)),a(b(["modalTemp","oriState"],"STATE_CQZC_JZSY")),a(b(["modalTemp","categoryUuid"],d.categoryUuid)),a(b(["modalTemp","oriAbstract"],"长期资产处置损益")),a(b(["modalTemp","assets","cleaningAmount"],m)),d.beProject){a(b(["modalTemp","usedProject"],!0));var p=l().homeState.getIn(["data","userInfo","sobInfo","sobId"]),_=d.projectRange;(0,o.default)("getProjectCardList","POST",JSON.stringify({sobId:p,categoryList:_,needCommonCard:!1}),function(e){(0,s.showMessage)(e)&&a(b(["flags","projectList"],(0,u.fromJS)(e.data.result)))})}a(v()),n()}})}},t.getBusinessGrantModal=function(e,t,n,a){return function(a,l){a({type:i.SWITCH_LOADING_MASK});var c=e.get("oriUuid");(0,o.default)("getJrOri","GET","oriUuid="+c,function(o){if(a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(o)){var l=r({},o.data.jrOri,o.data.category),c=(e.get("amount")-(e.get("tax")||0)).toFixed(2),d=l.notHandleAmount<0?"debit":"credit";a(b("runningFlowTemp",(0,u.fromJS)(l))),a(b(["runningFlowTemp","magenerType"],d)),a(b(["modalTemp","pendingStrongList"],(0,u.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:l.jrIndex,oriDate:e.get("oriDate"),beSelect:!0,amount:c}])));var f=(0,s.formatDate)().substr(0,10);l.oriDate>f&&a(b(["modalTemp","oriDate"],l.oriDate)),a(b(["modalTemp","oriState"],"STATE_XC_FF")),a(b(["modalTemp","categoryUuid"],l.categoryUuid)),a(b(["modalTemp","oriAbstract"],{SX_GZXJ:"发放工资薪金",SX_FLF:"支付"+l.categoryName,SX_QTXC:"发放"+l.categoryName}[l.propertyPay])),a(b(["modalTemp","amount"],Math.abs(l.notHandleAmount))),a(b(["modalTemp","payment","actualAmount"],Math.abs(l.notHandleAmount))),n()}})}},t.getBusinessDefrayModal=function(e,t,n,a){return function(a,l){a({type:i.SWITCH_LOADING_MASK});var c=e.get("oriUuid");(0,o.default)("getJrOri","GET","oriUuid="+c,function(o){if(a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(o)){var l=r({},o.data.jrOri,o.data.category),d=l.categoryType,f=(e.get("amount")-(e.get("tax")||0)).toFixed(2),m=l.notHandleAmount<0?"debit":"credit";a(b("runningFlowTemp",(0,u.fromJS)(l))),a(b(["runningFlowTemp","magenerType"],m)),a(b(["modalTemp","pendingStrongList"],(0,u.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:l.jrIndex,oriDate:e.get("oriDate"),beSelect:!0,amount:f,notHandleAmount:l.notHandleAmount,oriUuid:c}])));var g=(0,s.formatDate)().substr(0,10);l.oriDate>g&&a(b(["modalTemp","oriDate"],l.oriDate)),a(b(["modalTemp","oriState"],"LB_SFZC"===d?"STATE_SF_JN":"STATE_XC_JN")),a(b(["modalTemp","categoryUuid"],l.categoryUuid)),a(b(["modalTemp","oriAbstract"],""+("LB_SFZC"===d?{SX_QYSDS:"缴纳企业所得税",SX_QTSF:"缴纳"+l.categoryName,SX_ZZS:"缴纳增值税"}[l.propertyTax]:"缴纳"+{SX_SHBX:"社会保险",SX_ZFGJJ:"住房公积金"}[l.propertyPay]))),"LB_XCZC"===d?(a(b(["modalTemp","payment","actualAmount"],Math.abs(l.notHandleAmount))),"SX_ZFGJJ"===l.propertyPay?a(b(["modalTemp","payment","companyAccumulationAmount"],Math.abs(l.notHandleAmount))):a(b(["modalTemp","payment","companySocialSecurityAmount"],Math.abs(l.notHandleAmount)))):a(b(["modalTemp","amount"],Math.abs(l.notHandleAmount))),n()}})}},t.getBusinessTakeBackModal=function(e,t,n,a){return function(a,l){a({type:i.SWITCH_LOADING_MASK});var c=e.get("oriUuid");(0,o.default)("getJrOri","GET","oriUuid="+c,function(o){if(a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(o)){var l=r({},o.data.jrOri,o.data.category),c=(e.get("amount")-(e.get("tax")||0)).toFixed(2);a(b("runningFlowTemp",(0,u.fromJS)(l))),a(b(["modalTemp","pendingStrongList"],(0,u.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:l.jrIndex,oriDate:e.get("oriDate"),beSelect:!0,amount:c}])));var d=(0,s.formatDate)().substr(0,10);l.oriDate>d&&a(b(["modalTemp","oriDate"],l.oriDate)),a(b(["modalTemp","oriState"],"STATE_ZF_SH")),a(b(["modalTemp","categoryUuid"],l.categoryUuid)),a(b(["modalTemp","oriAbstract"],"暂付款收回")),a(b(["modalTemp","amount"],l.notHandleAmount)),n()}})}},t.getBusinessBackModal=function(e,t,n,a){return function(a,l){a({type:i.SWITCH_LOADING_MASK});var c=e.get("oriUuid");(0,o.default)("getJrOri","GET","oriUuid="+c,function(o){if(a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(o)){var l=r({},o.data.jrOri,o.data.category),c=(e.get("amount")-(e.get("tax")||0)).toFixed(2);a(b("runningFlowTemp",(0,u.fromJS)(l))),a(b(["modalTemp","pendingStrongList"],(0,u.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:l.jrIndex,oriDate:e.get("oriDate"),beSelect:!0,amount:c}])));var d=(0,s.formatDate)().substr(0,10);l.oriDate>d&&a(b(["modalTemp","oriDate"],l.oriDate)),a(b(["modalTemp","oriState"],"STATE_ZS_TH")),a(b(["modalTemp","categoryUuid"],l.categoryUuid)),a(b(["modalTemp","oriAbstract"],"暂收款退还")),a(b(["modalTemp","amount"],l.notHandleAmount)),n()}})}},t.calculateGainForJzsy=function(){return function(e,t){var n=t().searchRunningState,a=n.get("modalTemp"),r=n.get("runningFlowTemp"),o=r.getIn(["billList",0,"tax"])||0,u=r.get("amount")-o,s=a.getIn(["assets","depreciationAmount"])?a.getIn(["assets","depreciationAmount"]):0,l=a.getIn(["assets","originalAssetsAmount"])?a.getIn(["assets","originalAssetsAmount"]):0,c=(Number(l)-Number(s)).toFixed(2),d=Math.abs(c-u).toFixed(2),f=void 0,m=void 0;Number(c)<=u?(f=["modalTemp","netProfitAmount"],m=["modalTemp","lossAmount"]):(f=["modalTemp","lossAmount"],m=["modalTemp","netProfitAmount"]),e(b(["modalTemp","amount"],d)),e({type:i.SEARCH_CALCULATE_GAIN_OR_LOSS,deletePlace:m,place:f,diff:d})}}),R=(t.getBusinessInvioceModal=function(e,t,n,a){return function(a,r){a({type:i.SWITCH_LOADING_MASK});var l=e.get("oriUuid"),c=r().allState.get("hideCategoryList").find(function(e){e.get("categoryType")}),f=c&&c.get("uuid");l||a(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getBusinessInvioceModal",remark:"单笔流水核销"})),(0,o.default)("getJrOri","GET","oriUuid="+l,function(e){if(a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)){var r=e.data.jrOri,o=r.billList[0].oriState,l={STATE_KJFP_TS:"BILL_MAKE_OUT_TYPE_TS",STATE_KJFP_XS:"BILL_MAKE_OUT_TYPE_XS"}[o],c={STATE_KJFP_TS:"退销开具红字发票",STATE_KJFP_XS:"收入开具发票"}[o],d=r.billList[0],m=d.oriUuid,g=d.tax,p=d.taxRate,_=d.notHandleAmount,T=[{oriUuid:m,taxAmount:g,taxRate:p,categoryUuid:r.categoryUuid,oriState:r.billList[0].oriState,oriAmount:r.amount,jrJvUuid:t.get("jrJvUuid"),oriDate:r.oriDate}],C=(0,s.formatDate)().substr(0,10);r.oriDate>C&&a(b(["modalTemp","oriDate"],r.oriDate)),a(b(["modalTemp","categoryUuid"],f)),a(b(["modalTemp","oriAbstract"],c)),a(b(["modalTemp","billType"],l)),a(b(["modalTemp","oriState"],o)),a(b(["modalTemp","amount"],_)),a(b(["modalTemp","pendingStrongList"],(0,u.fromJS)(T))),n()}})}},t.getBusinessDefineModal=function(e,t,n,a){return function(a,r){a({type:i.SWITCH_LOADING_MASK});var l=e.get("oriUuid"),c=r().allState.get("hideCategoryList").find(function(e){e.get("categoryType")}),f=c&&c.get("uuid");l||a(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getBusinessDefineModal",remark:"单笔流水核销"})),(0,o.default)("getJrOri","GET","oriUuid="+l,function(e){if(a({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)){var r=e.data.jrOri,o=(r.billList[0].tax,r.billList[0].tax,r.billList[0].oriState),l={STATE_FPRZ_CG:"BILL_AUTH_TYPE_CG",STATE_FPRZ_TG:"BILL_AUTH_TYPE_TG"}[o]||"BILL_AUTH_TYPE_CG",c={STATE_FPRZ_CG:"增值税专用发票认证",STATE_FPRZ_TG:"退购红字发票认证"}[o],d=r.billList[0],m=d.oriUuid,g=d.tax,p=d.notHandleAmount,_=[{oriUuid:m,taxAmount:g,taxRate:null,categoryUuid:r.categoryUuid,oriAmount:null,jrJvUuid:t.get("jrJvUuid"),oriDate:r.oriDate}],T=(0,s.formatDate)().substr(0,10);r.oriDate>T&&a(b(["modalTemp","oriDate"],r.oriDate)),a(b(["modalTemp","oriAbstract"],c)),a(b(["modalTemp","categoryUuid"],f)),a(b(["modalTemp","billType"],l)),a(b(["modalTemp","oriState"],o)),a(b(["modalTemp","amount"],p)),a(b(["modalTemp","pendingStrongList"],(0,u.fromJS)(_))),n()}})}},t.insertRunningManagerModal=function(e,t,n){return function(t,r){var l=r().searchRunningState,c=l.get("runningFlowTemp"),d=l.get("modalTemp"),f=d.get("oriDate"),m=d.get("oriAbstract"),g=d.get("accounts"),p=d.get("amount"),_=d.get("categoryUuid"),T=(d.get("poundageCurrentCardList")||(0,u.fromJS)([])).toJS(),C=(d.get("poundageProjectCardList")||(0,u.fromJS)([])).toJS(),S=d.get("needUsedPoundage"),E=d.get("pendingManageDto").toJS(),I=c.get("currentCardList").toJS(),y=r().searchRunningAllState.get("enclosureList");if(m.length>45)a.default.info("摘要不得大于45个字");else{t({type:i.SWITCH_LOADING_MASK});var L=c.get("magenerType"),N=c.get("actionFrom"),h="";"debit"===L?h="shouldReturn"===N?"QUERY_JR-QUICK_OPERATION-PAYMENT_REFUND":"QUERY_JR-QUICK_OPERATION-COLLECTION":"credit"===L&&(h="shouldReturn"===N?"QUERY_JR-QUICK_OPERATION-INCOME_REFUND":"QUERY_JR-QUICK_OPERATION-PAYMENT"),(0,o.default)("insertPaymentManage","POST",JSON.stringify({oriDate:f,oriAbstract:m,accounts:g,amount:p,pendingManageDto:E,categoryUuid:_,currentCardList:I,moedAmount:"",poundageCurrentCardList:T,poundageProjectCardList:C,needUsedPoundage:S,enclosureList:y,action:h}),function(a){t({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(a,"show")&&(e(),t(b("modalTemp",(0,u.fromJS)({oriDate:(0,s.formatDate)().substr(0,10)}))),t(A.searchRunningAllActions.clearEnclosureList()),t("fromcalCultion"===n?M():O()))})}}},t.insertCommonModal=function(e,t,n,l){return function(t,c){var d=c().searchRunningState,f=(d.get("runningFlowTemp"),d.get("modalTemp").toJS()),m=c().searchRunningAllState.get("enclosureList");f.oriAbstract.length>45?a.default.info("摘要不得大于45个字"):(t({type:i.SWITCH_LOADING_MASK}),(0,o.default)(l,"POST",JSON.stringify(r({},f,{enclosureList:m})),function(a){t({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(a,"show")&&(e(),t(b("modalTemp",(0,u.fromJS)({oriDate:(0,s.formatDate)().substr(0,10)}))),t(A.searchRunningAllActions.clearEnclosureList()),t("fromcalCultion"===n?M():O()))}))}},t.insertlrAccountCarryoverModal=function(e,t){return function(n,r){var l=r().searchRunningState.get("modalTemp"),c=l.get("uuidList"),d=l.get("runningState"),f=l.get("oriDate"),m=l.get("oriAbstract"),g=l.get("stockCardList"),p=l.get("carryoverAmount"),_=r().searchRunningAllState.get("enclosureList");if(m.length>45)a.default.info("摘要不得大于45个字");else{var T=[];g&&g.map(function(e){T.push({uuid:e.uuid,amount:p})}),n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertCarryoverItem","POST",JSON.stringify({uuidList:c,runningState:d,oriDate:f,cardList:T,oriAbstract:m,enclosureList:_}),function(a){(0,s.showMessage)(a,"show")&&(e(),n(b("modalTemp",(0,u.fromJS)({oriDate:(0,s.formatDate)()}))),n("fromcalCultion"===t?M():O())),n({type:i.SWITCH_LOADING_MASK})})}}},t.insertlrAccountJzsyModal=function(e,t){return function(n,l){var c=l().searchRunningState.get("modalTemp").toJS(),d=l().searchRunningAllState.get("enclosureList");c.oriAbstract.length>45?a.default.info("摘要不得大于45个字"):(n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertCarryover","POST",JSON.stringify(r({},c,{enclosureList:d,action:"QUERY_JR-QUICK_OPERATION-DISPOSAL_PROFIT_LOSS"})),function(a){(0,s.showMessage)(a,"show")&&(e(),n(b("modalTemp",(0,u.fromJS)({oriDate:(0,s.formatDate)()}))),n(A.searchRunningAllActions.clearEnclosureList()),n("fromcalCultion"===t?M():O())),n({type:i.SWITCH_LOADING_MASK})}))}},t.insertRunningInvioceModal=function(e,t){return function(n,l){var c=l().searchRunningState.get("modalTemp").toJS(),d=l().searchRunningAllState.get("enclosureList");c.oriAbstract.length>45?a.default.info("摘要不得大于45个字"):(n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertInvoice","POST",JSON.stringify(r({},c,{enclosureList:d,action:"QUERY_JR-QUICK_OPERATION-INVOICE"})),function(a){(0,s.showMessage)(a,"show")&&(e(),n(b("modalTemp",(0,u.fromJS)({oriDate:(0,s.formatDate)()}))),n(A.searchRunningAllActions.clearEnclosureList()),n("fromcalCultion"===t?M():O())),n({type:i.SWITCH_LOADING_MASK})}))}},t.insertRunningInvioceDefineModal=function(e,t){return function(n,l){var c=l().searchRunningState.get("modalTemp").toJS(),d=l().searchRunningAllState.get("enclosureList");c.oriAbstract.length>45?a.default.info("摘要不得大于45个字"):(n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertInvoice","POST",JSON.stringify(r({},c,{enclosureList:d,action:"QUERY_JR-QUICK_OPERATION-INVOICE"})),function(a){(0,s.showMessage)(a,"show")&&(e(),n(b("modalTemp",(0,u.fromJS)({oriDate:(0,s.formatDate)()}))),n(A.searchRunningAllActions.clearEnclosureList()),n("fromcalCultion"===t?M():O())),n({type:i.SWITCH_LOADING_MASK})}))}},t.getBusinessBeforeSwitch=function(e,t,n){return function(e){e(R(n.get(t),"modify",n,"edit",t))}},t.getSearchRunningItem=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"search",u=arguments[4],l=arguments[5];return function(c,m){c({type:i.SWITCH_LOADING_MASK});var g=e.get("oriUuid");g||c(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getSearchRunningItem,状态："+t+"，item："+e+",page:"+a+",uuidList:"+n+",index:"+u,remark:"核算管理 查询流水 跳转到 录入流水"})),(0,o.default)("getJrOri","GET","oriUuid="+g,function(a){if((0,s.showMessage)(a)){var o=a.data.jrOri,u=o.oriState,d=(o.jrState,o.oriDate),m=o.relationCategoryUuid,g="STATE_CQZC_ZJTX"===u?"LB_ZJTX":"STATE_CQZC_JZSY"===u?"LB_JZSY":a.data.category.categoryType,_="LB_KJFP"===g||"LB_ZCWJZZS"===g||"LB_ZZ"===g||"LB_FPRZ"===g||"LB_JZCB"===g||"LB_SFGL"===g||"LB_GGFYFT"===g||"LB_ZJTX"===g||"LB_JZSY"===g||"LB_CHDB"===g||"LB_CHYE"===g||"LB_JXSEZC"===g||"LB_CHZZ"===g||"LB_CHTRXM"===g||"LB_SYJZ"===g||"LB_XMJZ"===g;if(l){c(E.changeViewString("disabledChange",!0)),c(_?T.justNewCalculatebusiness(g,u,!0):p.copyRunning(r({},a.data.jrOri,a.data.category,{uuid:a.data.jrOri.categoryUuid}),!0)),a.data.jrOri.oriDate=(0,s.formatDate)(),a.data.jrOri.beCertificate=!1,a.data.jrOri.currentAmount="";var C=a.data.category.propertyPay;if("STATE_XC_DJ"!==u||"SX_SHBX"!==C&&"SX_ZFGJJ"!==C){if("STATE_XC_JN"===u&&("SX_SHBX"===C||"SX_ZFGJJ"===C)){var A=a.data.jrOri.amount;a.data.jrOri.payment.personSocialSecurityAmount="",a.data.jrOri.payment.personAccumulationAmount="",a.data.jrOri.payment.companyAccumulationAmount=A,a.data.jrOri.payment.companySocialSecurityAmount=A,a.data.jrOri.payment.actualAmount=A}}else{var I=a.data.jrOri.amount;a.data.jrOri.oriState="STATE_XC_JN",a.data.jrOri.payment.companySocialSecurityAmount="",a.data.jrOri.payment.companyAccumulationAmount="",a.data.jrOri.payment.actualAmount=I}"SX_GZXJ"===C&&"STATE_XC_FF"===u&&a.data.category.acPayment.beAccrued&&(a.data.jrOri.payment.actualAmount=a.data.jrOri.amount)}if(_){var y={LB_KJFP:function(){return"INVOICING_FROM_SEARCH_JUMP_TO_LRLS"},LB_ZCWJZZS:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_LRLS"},LB_ZZ:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_NBZZ"},LB_ZJTX:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_ZJTX"},LB_JZSY:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_JZSY"},LB_FPRZ:function(){return"INVOICE_AUTH_FROM_SEARCH_JUMP_TO_LRLS"},LB_JZCB:function(){return"COST_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS"},LB_SFGL:function(){return"PAYMANAGE_FROM_SEARCH_JUMP_TO_LRLS"},LB_GGFYFT:function(){return"COMMONCHARGE_FROM_SEARCH_JUMP_TO_LRLS"},LB_CHDB:function(){return"INVENTORY_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS"},LB_CHYE:function(){return"INVENTORY_BALANCE_FROM_SEARCH_JUMP_TO_LRLS"},LB_JXSEZC:function(){return"TAX_TRANSTER_FROM_SEARCH_JUMP_TO_LRLS"},LB_CHZZ:function(){return"STOCK_BUILDUP_FROM_SEARCH_JUMP_TO_LRLS"},LB_CHTRXM:function(){return"STOCK_INTO_PROJECT_FROM_SEARCH_JUMP_TO_LRLS"},LB_XMJZ:function(){return"PROJECT_CARROVER_FROM_SEARCH_JUMP_TO_LRLS"},LB_SYJZ:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_SYJZ"}}[g]();c({type:i.CALCULATE_FROM_SEARCH_JUMP_TO_EDIT,pageType:g,PageTab:"LB_SFGL"===g?"business":"payment",insertOrModify:t,disabledChange:l,enclosureList:a.data.jrOri.enclosureList}),c({type:i[y],item:e,receivedData:a.data,insertOrModify:t,disabledChange:l,uuidList:n}),c({type:i.CHANGE_ORITEMP_ORIDATE,date:a.data.jrOri.oriDate});var L=[],N=[],O="";if("LB_CHDB"===u&&a.data.jrOri.warehouseCardList.map(function(e){"WAREHOUSE_STATUS_FROM"===e.warehouseStatus&&(O=e.cardUuid)}),a.data.jrOri.stockCardList&&a.data.jrOri.stockCardList.length&&a.data.jrOri.stockCardList.map(function(e,t){"STATE_CHZZ_ZZD"===u||e.childCardList?(e.amount=0,e.childCardList.map(function(e,n){e.storeUuid=e.warehouseCardUuid,e.parentIndex=t,L.push(e)})):L.push({cardUuid:e.cardUuid,storeUuid:"LB_CHDB"!==u?e.warehouseCardUuid:O,assistList:e.assistList,batchUuid:e.batchUuid})}),a.data.jrOri.stockCardOtherList&&a.data.jrOri.stockCardOtherList.length&&a.data.jrOri.stockCardOtherList.map(function(e,t){N.push({cardUuid:e.cardUuid,storeUuid:e.warehouseCardUuid,assistList:e.assistList,batchUuid:e.batchUuid})}),"LB_JZSY"===g&&c(T.getJzsyProjectCardList(a.data.category.projectRange)),"LB_JZCB"===g){var h="LB_YYSR"!==a.data.jrOri.relationCategoryType,v="LB_FYZC"===a.data.jrOri.relationCategoryType,R="LB_FYZC"===a.data.jrOri.relationCategoryType,b="LB_FYZC"===a.data.jrOri.relationCategoryType,M="LB_FYZC"===a.data.jrOri.relationCategoryType;c(T.getJzsyProjectCardList(a.data.jrOri.projectRange,"CostTransferTemp",h,"",v,R,b,M)),L.length&&c(S.getModifyStockPrice(d,L,"CostTransfer","stockCardList","")),a.data.jrOri.oriState}if("LB_ZJTX"===g&&c(T.getProjectCardList(a.data.category.projectRange)),"LB_CHDB"===g&&(c(T.getCanUseWarehouseCardList({temp:"StockTemp"})),c(T.getStockCardList()),c(T.getJrProjectShareType()),c(S.getModifyStockPrice(a.data.jrOri.oriDate,L,"Stock","stockCardList",""))),"LB_CHYE"===g&&(c(T.getStockCardList("BalanceTemp")),c(T.getCanUseWarehouseCardList({temp:"BalanceTemp"})),c(S.getModifyStockPrice(a.data.jrOri.oriDate,L,"Balance","stockCardList",""))),"LB_CHZZ"===g&&(c(T.getStockCardList("StockBuildUpTemp")),c(T.getCanUseWarehouseCardList({temp:"StockBuildUpTemp"})),"STATE_CHZZ_ZZCX"===u?c(S.getModifyStockPrice(d,L.concat(N),"StockBuildUp","stockCardList","stock")):L.length&&c(S.getModifyStockPrice(d,L,"StockBuildUp","stockCardList","Assembly",a.data.jrOri.stockCardList))),"LB_JXSEZC"===g){var J=a.data.category.relationCategoryType,D=a.data.category.propertyCarryover,P=a.data.category.projectRange,w=a.data.category.acBusinessExpense;("LB_YYZC"===J&&"SX_FW"===D||"LB_FYZC"===J)&&c(T.getJzsyProjectCardList(P,"TaxTransferTemp",!0)),"LB_YYZC"===J&&"SX_HW"===D&&(c(T.getStockCategoryList(w.stockRange)),c(T.getCanUseWarehouseCardList({temp:"TaxTransferTemp"})))}"LB_JZCB"===g&&"STATE_YYSR_ZJ"===u&&(c(T.getCanUseWarehouseCardList({temp:"CostTransferTemp"})),c(T.getCostCarryoverStockList(d,"STATE_YYSR_ZJ",m))),"LB_GGFYFT"===g&&(c(T.getJrProjectShareType()),c(T.getChargeProjectCard(u))),"LB_CHTRXM"===g&&(c(T.getChargeProjectCard("STATE_CHTRXM","StockIntoProjectTemp")),c(T.getCostCarryoverStockList(d,"STATE_YYSR_ZJ","","StockIntoProjectTemp")),c(T.getCanUseWarehouseCardList({temp:"StockIntoProjectTemp"})),L.length&&c(S.getModifyStockPrice(d,L,"StockIntoProject","stockCardList",""))),"LB_XMJZ"===g&&(c(T.getProjectCarryoverCard({oriDate:a.data.jrOri.oriDate,categoryUuid:"",level:"",justCard:!0,needLeft:!1})),c(T.getCostCarryoverStockList(d,"STATE_YYSR_ZJ","","ProjectCarryoverTemp")),c(T.getCanUseWarehouseCardList({temp:"ProjectCarryoverTemp"})),"STATE_XMJZ_JZRK"!==a.data.jrOri.oriState&&"STATE_XMJZ_QRSRCB"!==a.data.jrOri.oriState||(c(T.getProjectCarryoverList(d,a.data.jrOri.projectCardList[0].cardUuid,a.data.jrOri.oriUuid)),L.length&&c(S.getModifyStockPrice(d,L,"ProjectCarryover","stockCardList","")))),c({type:i.SWITCH_LOADING_MASK})}else c(p.refreshRunningbusiness(e.get("oriUuid"),function(e){c(U(e))},n,a.data,"insert"===t));c(f.addPageTabPane("EditPanes","EditRunning","EditRunning","录入流水")),c(f.addHomeTabpane("Edit","EditRunning","录入流水"))}else c({type:i.SWITCH_LOADING_MASK})})}}),b=(t.changeCurrentPage=function(e,t){return function(n){n({type:i.CHANGE_CURRENT_PAGE_FZHE,assList:e,value:t})}},t.changeCxAccountCommonString=function(e,t,n){return function(a){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t));"flags"===t[0]&&(r=t),a({type:i.CHANGE_SEARCH_ACCOUNT_COMMON_STRING,tab:e,placeArr:r,value:n})}},t.changeCxAccountCommonOutString=function(e,t){return function(n){n("string"==typeof e?{type:i.CHANGE_SEARCH_ACCOUNT_COMMON_STRING,place:e,value:t}:{type:i.CHANGE_SEARCH_ACCOUNT_COMMON_STRING,placeArr:e,value:t})}}),M=(t.setManageMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["payManageList","childList"]),r=(n.getIn(["flags","selectDate"]),n.getIn(["flags","selectList"])),i=n.getIn(["calculateTemp","cardUuid"]),o=n.getIn(["calculateTemp","usedCard"]),s=[],l=0;r.forEach(function(e){var t=a.find(function(t){return t.get("uuid")===e}),n=t.get("direction"),r=t.get("flowType"),i=t.get("assType");s.push({uuid:e,assType:i});var o=t.get("notHandleAmount"),u=t.get("runningState");"STATE_YYSR_TS"!==u&&"STATE_YYZC_TG"!==u||(o=-Math.abs(o)),"debit"===n?"FLOW_INADVANCE"===r?l-=Number(o):l+=Number(o):"FLOW_INADVANCE"===r?l+=Number(o):l-=Number(o)}),e(b(["modalTemp","uuidList"],(0,u.fromJS)(s))),e(b(["modalTemp","handlingAmount"],l)),e(b(["modalTemp","cardUuid"],i)),e(b(["modalTemp","usedCard"],o))}},t.setCarryoverMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["calculateTemp","stockUuid"]),i=n.getIn(["flags","costTransferType"]);e(b(["modalTemp","uuidList"],a)),e(b(["modalTemp","runningState"],i)),e(b(["modalTemp","cardList"],(0,u.fromJS)([{uuid:r,amount:""}])))}},t.setInvioceMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["flags","invoicingType"]);e(b(["modalTemp","uuidList"],a)),e(b(["modalTemp","billMakeOutType"],r))}},t.setDefineMadalInitState=function(){return function(e,t){var n=t().calculationState,a=n.getIn(["flags","selectList"]),r=n.getIn(["flags","certifiedType"]);e(b(["modalTemp","uuidList"],a)),e(b(["modalTemp","billAuthType"],r))}},t.getManagerCategoryList=function(e,t){return function(n){(0,o.default)("getManagerCategoryList","POST",JSON.stringify({assType:t}),function(t){n(b(["flags","managerCategoryList",e],(0,u.fromJS)(t.data)))})}},t.changeBeforeAmount=function(e,t,n){return function(a,r){t.split(c.TREE_JOIN_STR)[0];var i=t.split(c.TREE_JOIN_STR)[1],o=t.split(c.TREE_JOIN_STR)[2],s=e.get("uuid");a(b(["modalTemp","uuidList",n],(0,u.fromJS)({beOpened:!0,categoryUuid:o,uuid:s,categoryName:i})))}},function(){return function(e,t){var n=t().calculationState,a=n.get("flags"),r=n.getIn(["calculateTemp","cardUuid"]),i=n.getIn(["calculateTemp","stockUuid"]),o=a.get("issuedate"),u=a.get("curCategory"),s=a.get("isCheck"),l=a.get("accountingType"),c=n.get("certificationList"),d=n.get("invoicingList"),f=c.get("billAuthType"),m=d.get("billMakeOutType"),g=n.getIn(["costTransferList","runningState"]);t().searchRunningAllState.get("enclosureList");switch(l){case"manages":e(_.getCalculateList(o,l,"",u,r,s,""));break;case"invoicing":e(_.getCalculateInvoicingList(o,u,m,""));break;case"certification":e(_.getCalculateCertificationList(o,u,f,""));break;case"costTransfer":e(_.getCalculateCarryoverList(o,g,"","",i))}}}),U=(t.deleteSingleFlow=function(e,t){return function(n){var r=[e];l.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&(n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunningItems","POST",JSON.stringify({deleteList:r,action:"COMMON-DELETE"}),function(e){if((0,s.showMessage)(e)){if(e.message)if(e.data.errorList.length){var r=e.data.errorList.join(",");a.default.error(r)}else a.default.success(e.message);!e.data.errorList.length&&t()}n({type:i.SWITCH_LOADING_MASK})}))}})}},t.getRunningBusinessDuty=function(e){return function(t,n){t({type:i.SWITCH_LOADING_MASK}),t({type:i.CALCULATE_FROM_SEARCH_JUMP_TO_EDIT,PageTab:"business",pageType:e})}});t.getgetSearchRunningSortFun=function(e,t,n,a){return function(r,u){var l=e.substr(0,4),c="-"===e.substr(4,1)?e.substr(5,2):e.substr(6,2),d=u().searchRunningState,f=d.getIn(["flags","isAccount"]),m=d.getIn(["flags","curAccountUuid"]),g=d.getIn(["flags","endissuedate"]);r({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getSearchRunningSort","POST",JSON.stringify({year:l,month:c,sortModel:t}),function(t){(0,s.showMessage)(t,"show")&&r(L(e,g,m,"",a,n,"",f)),r({type:i.SWITCH_LOADING_MASK})})}},t.changeSearchRunningChildItemShow=function(e,t){return{type:i.SEARCH_RUNNING_TRIANGLE_SWITCH,showChild:e,uuid:t}},t.changeSearchRunningAllChildItemShow=function(e){return{type:i.SEARCH_RUNNING_ALL_TRIANGLE_SWITCH,allItemShow:e}},t.changeSearchRunningChooseValue=function(e){return{type:i.CHANGE_SEARCH_RUNNING_CHOOSE_VALUE,chooseValue:e}},t.getAccountRunningCate=function(e){return function(t,n){(0,o.default)("getRunningDetail","GET","uuid="+e,function(e){if((0,s.showMessage)(e)){var n=e.data.result.projectRange,a=e.data.result.acCost.contactsRange;t(N(["flags","accountProjectRange"],(0,u.fromJS)(n))),t(N(["flags","accountContactsRange"],(0,u.fromJS)(a)))}})}},t.getAccountContactsCardList=function(e){return function(t,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getContactsCategoryList","POST",JSON.stringify({sobId:a,categoryList:e.toJS(),property:"NEEDPAY"}),function(e){t({type:i.SWITCH_LOADING_MASK}),(0,s.showMessage)(e)&&t(N(["flags","accountContactsRangeList"],(0,u.fromJS)(e.data.result)))})}},t.getAccountProjectCardList=function(e){return function(t,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,o.default)("getProjectCardList","POST",JSON.stringify({sobId:a,categoryList:e,needCommonCard:!0,needAssist:!0,needMake:!0,needIndirect:!0,needMechanical:!0}),function(e){(0,s.showMessage)(e)&&t(N(["flags","accountProjectList"],(0,u.fromJS)(e.data.result)))})}}},1305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=arguments[1];return((e={},s(e,r.INIT_SEARCH_RUNNING,function(){return l}),s(e,r.GET_SEARCH_BUSINESS_LIST,function(){if(n.isReflash&&(t=t.set("businessTemp",l)),"true"===n.getPeriod&&(t=t.set("period",(0,a.fromJS)(n.period)).set("issues",(0,a.fromJS)(n.issues))),n.accountUuid&&n.isAccount){var e=n.accountUuid.split(i.TREE_JOIN_STR);t=t.setIn(["flags","curAccountUuid"],(0,a.fromJS)(n.accountUuid)).setIn(["flags","accountName"],(0,a.fromJS)(e[1]))}else t=t.setIn(["flags","curAccountUuid"],"").setIn(["flags","accountName"],"");var r=t.getIn(["flags","allItemShow"]),o=[];r&&(n.receivedData&&n.receivedData.map(function(e){o.push(e.oriUuid)}),t=t.setIn(["flags","showChildList"],(0,a.fromJS)(o)));var u="boolean"==typeof n.isAsc?n.isAsc:n.receivedExtra.isClose,s="boolean"!=typeof n.isAsc||n.isAsc;switch(n.orderBy){case"SEARCH_ORDER_DATE":t=t.setIn(["orderByList","dateSortType"],u).setIn(["orderByList","indexSortType"],u);break;case"SEARCH_ORDER_JR_INDEX":t=t.setIn(["orderByList","indexSortType"],u);break;case"SEARCH_ORDER_CATEGORY_TYPE":t=t.setIn(["orderByList","categorySortType"],s).setIn(["orderByList","indexSortType"],s);break;case"SEARCH_ORDER_CERTIFICATE":t=t.setIn(["orderByList","certificateSortType"],s).setIn(["orderByList","indexSortType"],s);break;case"SEARCH_ORDER_CREATE_NAME":t=t.setIn(["orderByList","nameSortType"],s).setIn(["orderByList","indexSortType"],s)}t=t.setIn(["flags","orderType"],n.orderBy);var c=n.receivedExtra,d=(c.childList,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(c,["childList"]));for(var f in d)t=t.setIn(["flags",f],d[f]);return t.set("businessTemp",(0,a.fromJS)(n.receivedData)).set("pageCount",n.pageCount).set("currentPage",n.currentPage).setIn(["flags","issuedate"],(0,a.fromJS)(n.issuedate)).setIn(["flags","endissuedate"],(0,a.fromJS)(n.endissuedate)).setIn(["flags","isAccount"],(0,a.fromJS)(n.isAccount)).setIn(["flags","isAsc"],(0,a.fromJS)(u)).setIn(["flags","selectList"],(0,a.fromJS)([])).setIn(["flags","pzSelectAllList"],(0,a.fromJS)([])).setIn(["flags","currentVcIndex"],(0,a.fromJS)([]))}),s(e,r.CHANGE_SEARCH_ACCOUNT_COMMON_STRING,function(){return n.placeArr&&(t=t.setIn(n.placeArr,n.value)),n.place&&(t=t.set(n.place,n.value)),t}),s(e,r.SEARCH_ITEM_CHECKBOX_CHECK_ALL,function(){if(n.selectAll)return t.setIn(["flags","selectList"],(0,a.fromJS)([])).setIn(["flags","pzSelectAllList"],(0,a.fromJS)([])).setIn(["flags","currentVcIndex"],(0,a.fromJS)([])).setIn(["flags","selectItem"],(0,a.fromJS)([]));var e=n.list,r=[],i=[],o=[];return e.forEach(function(e){r.push(e.get("oriUuid"));var n=e.get("oriDate");e.get("vcList")&&e.get("vcList").size?e.get("vcList").map(function(e){o.push({year:n.substr(0,4),month:n.substr(5,2),vcIndex:e.get("vcIndex")}),t=t.setIn(["flags","currentYear"],e.get("year")).setIn(["flags","currentMonth"],e.get("month"))}):i.push((0,a.fromJS)({oriUuid:e.get("oriUuid"),jrNumber:e.get("jrIndex"),oriDate:Date.parse(e.get("oriDate")),currentYear:e.get("oriDate")?e.get("oriDate").substr(0,4):"",currentMonth:e.get("oriDate")?e.get("oriDate").substr(5,2):""}))}),t.setIn(["flags","selectList"],(0,a.fromJS)(r)).setIn(["flags","pzSelectAllList"],(0,a.fromJS)(i)).setIn(["flags","currentVcIndex"],(0,a.fromJS)(o)).setIn(["flags","selectItem"],n.list)}),s(e,r.SEARCH_ITEM_CHECKBOX_CHECK,function(){var e=t.getIn(["flags","selectList"]),r=t.getIn(["flags","pzSelectAllList"]),i=t.getIn(["flags","selectItem"]).toJS(),o=t.getIn(["flags","currentVcIndex"]),u=n.item.toJS();if(n.checked){var s=e.splice(e.findIndex(function(e){return e===n.item.get("oriUuid")}),1),l=r,c=o.toJS();n.item.get("vcList")&&n.item.get("vcList").size?n.item.get("vcList").map(function(e){c=c.filter(function(t){return!(e.get("year")===t.year&&e.get("month")===t.month&&e.get("vcIndex")===t.vcIndex)})}):l=r.splice(r.findIndex(function(e){return e.get("oriUuid")===n.item.get("oriUuid")}),1);var d=i.filter(function(e){return e.oriUuid!==n.item.get("oriUuid")});return t.setIn(["flags","selectList"],(0,a.fromJS)(s)).setIn(["flags","pzSelectAllList"],(0,a.fromJS)(l)).setIn(["flags","currentVcIndex"],(0,a.fromJS)(c)).setIn(["flags","selectItem"],d?(0,a.fromJS)(d):(0,a.fromJS)([]))}var f=e.push(n.item.get("oriUuid")),m=r,g=o.toJS();return n.item.get("vcList")&&n.item.get("vcList").size?n.item.get("vcList").map(function(e){g.push({year:u.oriDate.substr(0,4),month:u.oriDate.substr(5,2),vcIndex:e.get("vcIndex")}),t=t.setIn(["flags","currentYear"],e.get("year")).setIn(["flags","currentMonth"],e.get("month"))}):m=r.push((0,a.fromJS)({oriUuid:n.item.get("oriUuid"),jrNumber:n.item.get("jrIndex"),oriDate:Date.parse(n.item.get("oriDate")),currentYear:n.item.get("oriDate")?n.item.get("oriDate").substr(0,4):"",currentMonth:n.item.get("oriDate")?n.item.get("oriDate").substr(5,2):""})),t.setIn(["flags","selectList"],(0,a.fromJS)(f)).setIn(["flags","pzSelectAllList"],(0,a.fromJS)(m)).setIn(["flags","currentVcIndex"],(0,a.fromJS)(g)).setIn(["flags","selectItem"],(0,a.fromJS)(i.concat([u])))}),s(e,r.GET_SEARCH_CONF_ALL_SETTINGS,function(){return t=t.set("runningCategory",(0,a.fromJS)(n.receivedData.categoryList)).set("accountList",(0,a.fromJS)(n.receivedData.accountList)).set("taxRateTemp",(0,a.fromJS)(n.receivedData.rate))}),s(e,r.SEARCH_CHANGE_PZ_COMMON_STRING,function(){return t=t.setIn(n.name,n.value)}),s(e,r.SEARCH_CALCULATE_GAIN_OR_LOSS,function(){var e=n.place,a=n.diff,r=n.deletePlace;return t.setIn(e,a).deleteIn(r,a)}),s(e,r.SEARCH_RUNNING_TRIANGLE_SWITCH,function(){var e=t.getIn(["flags","showChildList"]);if(n.showChild){var a=e.splice(e.findIndex(function(e){return e===n.uuid}),1);return t.setIn(["flags","showChildList"],a)}var r=e.push(n.uuid);return t.setIn(["flags","showChildList"],r)}),s(e,r.SEARCH_RUNNING_ALL_TRIANGLE_SWITCH,function(){var e=[],r=t.get("businessTemp");return r&&r.size&&r.map(function(t){e.push(t.get("oriUuid"))}),t=t.setIn(["flags","allItemShow"],n.allItemShow),n.allItemShow?t.setIn(["flags","showChildList"],(0,a.fromJS)(e)):t.setIn(["flags","showChildList"],(0,a.fromJS)([]))}),s(e,r.CHANGE_SEARCH_RUNNING_CHOOSE_VALUE,function(){return t.setIn(["flags","chooseValue"],n.chooseValue)}),e)[n.type]||function(){return t})()};var a=n(18),r=u(n(492)),i=u(n(27)),o=n(22);function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(0,a.fromJS)({flags:{issuedate:"",insertOrModify:"insert",runningInsertOrModify:"insert",payOrReceive:"收",accountAssModalShow:!1,curCategory:"全部",curAccountUuid:"",accountName:"全部",assId:"",assCategory:"",acId:"",selectList:[],pzSelectAllList:[],pzDealNum:0,pzDealStatus:!1,showRunningInfo:{},currentYear:"",currentMonth:"",currentVcIndex:[],searchType:"SEARCH_TYPE_ABSTRACT",managerCategoryList:[],pzDealType:"",projectList:[],inputValue:"",orderType:"",showChildList:[],allItemShow:!1,chooseValue:"MONTH",accountProjectRange:[],accountContactsRange:[],accountContactsRangeList:[],accountProjectList:[],selectItem:[]},orderByList:{dateSortType:!1,indexSortType:!1,categorySortType:!1,nameSortType:!1,certificateSortType:!1,orderByArr:[]},businessTemp:{},runningFlowTemp:{oriDate:(0,o.formatDate)().substr(0,10)},modalTemp:{oriDate:(0,o.formatDate)().substr(0,10)},period:{closedmonth:"",closedyear:"",firstmonth:"",firstyear:"",lastmonth:"",lastyear:""},issues:[],currentPage:1,pageCount:1})},1313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_LR_ACCOUNT="INIT_LR_ACCOUNT",t.INIT_LR_ACCOUNT_SETTINGS="INIT_LR_ACCOUNT_SETTINGS",t.CALCULATE_FROM_CXLS_JUMP_TO_LRLS="CALCULATE_FROM_CXLS_JUMP_TO_LRLS",t.INVOICING_FROM_CXLS_JUMP_TO_LRLS="INVOICING_FROM_CXLS_JUMP_TO_LRLS",t.SELECT_ACCOUNT_RUNNING_CATEGORY="SELECT_ACCOUNT_RUNNING_CATEGORY",t.SELECT_RUNNING_AC_INFO="SELECT_RUNNING_AC_INFO",t.SELECT_ACCOUNT_ASS="SELECT_ACCOUNT_ASS",t.CHANGE_LR_ACCOUNT_COMMON_STRING="CHANGE_LR_ACCOUNT_COMMON_STRING",t.GET_RUNNING_ACCOUNT_INFO="GET_RUNNING_ACCOUNT_INFO",t.CHANGE_LR_ACCOUNT_ACCOUNT_NAME="CHANGE_LR_ACCOUNT_ACCOUNT_NAME",t.CHANGE_ACCOUNT_BILL_TYPE="CHANGE_ACCOUNT_BILL_TYPE",t.AUTO_CALCULATE_BILL_INFO="AUTO_CALCULATE_BILL_INFO",t.CHANGE_ACCOUNT_TAX_RATE="CHANGE_ACCOUNT_TAX_RATE",t.CHANGE_ACCOUNT_FZHS_MODAL_DISPLAY="CHANGE_ACCOUNT_FZHS_MODAL_DISPLAY",t.CHANGE_ACCOUNT_ASS_CATEGORY="CHANGE_ACCOUNT_ASS_CATEGORY",t.CHANGE_ACCOUNT_FZHS_MODAL_CLEAR="CHANGE_ACCOUNT_FZHS_MODAL_CLEAR",t.CHANGE_ACCOUNT_ASSID="CHANGE_ACCOUNT_ASSID",t.CHANGE_ACCOUNT_ASSNAME="CHANGE_ACCOUNT_ASSNAME",t.CHANGE_ACCOUNT_SALARY="CHANGE_ACCOUNT_SALARY",t.CALCULATE_AMOUNT="CALCULATE_AMOUNT",t.UPDATE_ACCOUNT_LIST="UPDATE_ACCOUNT_LIST",t.CALCULATE_GAIN_OR_LOSS="CALCULATE_GAIN_OR_LOSS",t.INIT_PAYMENT_STATE="INIT_PAYMENT_STATE",t.GET_PAYMENT_PERIOD="GET_PAYMENT_PERIOD",t.LRACCOUNT_ITEM_CHECKBOX_CHECK_ALL="LRACCOUNT_ITEM_CHECKBOX_CHECK_ALL",t.LRACCOUNT_ITEM_CHECKBOX_CHECK="LRACCOUNT_ITEM_CHECKBOX_CHECK",t.INIT_LR_ACCOUNT_PAYMENT="INIT_LR_ACCOUNT_PAYMENT",t.AFTER_SAVE_ACCOUNT_PAYMENT="AFTER_SAVE_ACCOUNT_PAYMENT",t.GET_ACCOUNTCONF_ALL_SETTINGS="GET_ACCOUNTCONF_ALL_SETTINGS",t.LRACCOUNT_ITEM_SEARCH_CARD_LIST="LRACCOUNT_ITEM_SEARCH_CARD_LIST",t.SET_INVOIC_ASSLIST_FROM_SETTINGS="SET_INVOIC_ASSLIST_FROM_SETTINGS",t.GET_ACCOUNTCONF_CATEGORY_LIST="GET_ACCOUNTCONF_CATEGORY_LIST",t.ACCOUNT_IUMANAGE_LIST_TITLE="ACCOUNT_IUMANAGE_LIST_TITLE",t.CHANGE_ACCOUNT_MANAGE_CARD_RELATION="CHANGE_ACCOUNT_MANAGE_CARD_RELATION",t.ACCOUNT_SAVE_IUMANAGE_TYPE_CARD="ACCOUNT_SAVE_IUMANAGE_TYPE_CARD",t.ACCOUNT_CHANGE_IUMANAGE_CARD_AC="ACCOUNT_CHANGE_IUMANAGE_CARD_AC",t.CHANGE_ACCOUNT_CARD_RELATION_TYPE="CHANGE_ACCOUNT_CARD_RELATION_TYPE",t.CALCULATE_CHANGE_QUERY="CALCULATE_CHANGE_QUERY",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ="TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_ZJTX="TRANSFER_OUT_FROM_CXLS_JUMP_TO_ZJTX",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS="TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS",t.INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS="INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS",t.COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS="COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS",t.ACCOUNT_CHANGE_INVENTORY_CARD_NATURE="ACCOUNT_CHANGE_INVENTORY_CARD_NATURE",t.ACCOUNT_CHANGE_INVENTORY_CARD_CATEGORY_STATUS="ACCOUNT_CHANGE_INVENTORY_CARD_CATEGORY_STATUS",t.ACCOUNT_CHANGE_INVENTORY_CARD_CATEGORY_TYPE="ACCOUNT_CHANGE_INVENTORY_CARD_CATEGORY_TYPE",t.ACCOUNT_SAVE_INVENTORY_SETTING_CARD="ACCOUNT_SAVE_INVENTORY_SETTING_CARD",t.ACCOUNT_INVENTORY_SETTING_INIT="ACCOUNT_INVENTORY_SETTING_INIT",t.INIT_RELA_CARD="INIT_RELA_CARD",t.INIT_STOCK_CARD="INIT_STOCK_CARD",t.CLOSE_ACCOUNTCONF_MODAL_LR="CLOSE_ACCOUNTCONF_MODAL_LR",t.AFTER_SUCCESS_INSERT_INVOICING_ITEM="AFTER_SUCCESS_INSERT_INVOICING_ITEM",t.AFTER_SUCCESS_INSERT_TRANSFER_OUT_ITEM="AFTER_SUCCESS_INSERT_TRANSFER_OUT_ITEM",t.AFTER_SUCCESS_INSERT_LB_ZZ_ITEM="AFTER_SUCCESS_INSERT_LB_ZZ_ITEM",t.AFTER_SUCCESS_INSERT_INVOICEAUTH_ITEM="AFTER_SUCCESS_INSERT_INVOICEAUTH_ITEM",t.AFTER_SUCCESS_INSERT_CARRYOVER_ITEM="AFTER_SUCCESS_INSERT_CARRYOVER_ITEM",t.CHARGE_ITEM_CHECKBOX_SELECT="CHARGE_ITEM_CHECKBOX_SELECT",t.INIT_COMMON_CHARGE="INIT_COMMON_CHARGE",t.INIT_COMMON_CHARGE_FROM_CXLS="INIT_COMMON_CHARGE_FROM_CXLS",t.INIT_LR_CALCULATE_STATE="INIT_LR_CALCULATE_STATE",t.INIT_LR_ACOUNT_STATE="INIT_LR_ACOUNT_STATE",t.CHANGE_RUNNING_ENCLOSURE_LIST="CHANGE_RUNNING_ENCLOSURE_LIST",t.DELETE_UPLOAD_FJ_URL="DELETE_UPLOAD_FJ_URL",t.CHANGE_CALCULATE_ENCLOSURE_LIST="CHANGE_CALCULATE_ENCLOSURE_LIST",t.DELETE_CALCULATE_UPLOAD_FJ_URL="DELETE_CALCULATE_UPLOAD_FJ_URL",t.GET_LS_LABEL_FETCH="GET_LS_LABEL_FETCH",t.CHANGE_LS_TAG_NAME="CHANGE_LS_TAG_NAME",t.GET_CAL_LABEL_FETCH="GET_CAL_LABEL_FETCH",t.CHANGE_CAL_TAG_NAME="CHANGE_CAL_TAG_NAME",t.AFTER_INSERT_JZSY="AFTER_INSERT_JZSY",t.INIT_JZSY_FROM_CXLS="INIT_JZSY_FROM_CXLS",t.AFTER_GET_UPLOAD_SIGNATURE="AFTER_GET_UPLOAD_SIGNATURE"},1314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPrintString=t.jrPdfPrint=t.printPdf=t.setPrintVcIndexAndDate=void 0;var a,r=n(31),i=(a=r)&&a.__esModule?a:{default:a},o=c(n(1289)),u=(n(18),n(22)),s=c(n(43)),l=c(n(30));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.setPrintVcIndexAndDate=function(e,t,n){return function(a){a({type:o.SET_PRINT_VC_INDEX_AND_DATE,year:e,month:t,vcIndex:n})}},t.printPdf=function(e,t,n,a,r,c,d,f){return function(m){m({type:o.SWITCH_LOADING_MASK});var g=sessionStorage.getItem("fromPos");(0,i.default)("pdfPrint","POST",JSON.stringify({year:e,month:t,needCreatedBy:a,needA4:r,needAss:c,vcIndex:n,needReviewedBy:d?"1":"0",reviewedBy:d?f:"",action:{modal:"QUERY_VC-PRINT",cxpz:"QUERY_VC-PRINT-BATCH_PRINT_AND_EXPORT_PDF",lrpz:""}[g]}),function(e){(0,u.showMessage)(e)?(m({type:o.SWITCH_LOADING_MASK}),l.openLink({url:e.data.signedUrl}),m(s.handlePrintModalVisible(!1))):m({type:o.SWITCH_LOADING_MASK})})}},t.jrPdfPrint=function(e,t,n){return function(a){a({type:o.SWITCH_LOADING_MASK});var r=sessionStorage.getItem("fromPos");(0,i.default)("JrPdfPrint","POST",JSON.stringify({needPrintName:e,needPrintEnclosure:t,oriUuid:n,action:{searchRunningPreview:"QUERY_JR-PRINT",searchRunning:"QUERY_JR-PRINT-BATCH_PRINT"}[r]}),function(e){(0,u.showMessage)(e)?(a({type:o.SWITCH_LOADING_MASK}),l.openLink({url:e.data.signedUrl}),a(s.handlePrintModalVisible(!1))):a({type:o.SWITCH_LOADING_MASK})})}},t.setPrintString=function(e,t){return function(n){n({type:o.SET_PRINT_STRING,name:e,value:t})}}},1315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_ACCOUNT_CONFIG="INIT_ACCOUNT_CONFIG",t.BEFORE_INSERT_ACCOUNTCONF="BEFORE_INSERT_ACCOUNTCONF",t.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT="AFTER_UPDATE_ACCOUNTCONF_ACCOUNT",t.SELECT_OR_UNSELECT_ACCOUNT_ALL="SELECT_OR_UNSELECT_ACCOUNT_ALL",t.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK="ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK",t.BEFORE_MODIFY_ACCOUNTCONF_RUNNING="BEFORE_MODIFY_ACCOUNTCONF_RUNNING",t.CHANGE_ACCOUNTCONFIG_COMMON_STRING="CHANGE_ACCOUNTCONFIG_COMMON_STRING",t.CLOSE_ACCOUNTCONF_MODAL_LR="CLOSE_ACCOUNTCONF_MODAL_LR",t.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER="CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER",t.CLOSE_ACCOUNTCONF_MODAL="CLOSE_ACCOUNTCONF_MODAL",t.CHANGE_ACCOUNT_CARD_USED_STATUS="CHANGE_ACCOUNT_CARD_USED_STATUS",t.GET_RUNNING_ACCOUNT="GET_RUNNING_ACCOUNT",t.INIT_POUNDAGE_TEMP="INIT_POUNDAGE_TEMP",t.GET_POUNDGE_ACCOUNT="GET_POUNDGE_ACCOUNT",t.INIT_REGRETTEMP="INIT_REGRETTEMP",t.GET_ACCOUNT_CONFIG_LIST="GET_ACCOUNT_CONFIG_LIST"},1324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments[1];return((e={},o(e,r.SET_PRINT_VC_INDEX_AND_DATE,function(){return t.set("vcIndex",n.vcIndex).set("year",n.year).set("month",n.month)}),o(e,r.SET_PRINT_STRING,function(){return t.set(n.name,n.value)}),e)[n.type]||function(){return t})()};var a=n(18),r=i(n(1289));i(n(27));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=(0,a.fromJS)({vcIndex:[],year:"",month:"",fromPage:"static"})},1325:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=L(n(47)),u=L(n(129)),s=L(n(61)),l=L(n(100)),c=L(n(37)),d=L(n(32)),f=L(n(14)),m=L(n(45)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(128),n(79),n(99),n(38),n(51),n(78),n(55);var p=L(n(1)),_=(L(n(0)),n(18)),T=n(56);n(1357);n(127);var C=n(1372),S=y(n(27)),E=n(22),A=y(n(1279)),I=y(n(102));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function L(e){return e&&e.__esModule?e:{default:e}}var N=m.default.Option,O=(0,T.connect)(function(e){return e})((i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),g(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.accountConfigState!=e.accountConfigState||this.props.homeState!=e.homeState||this.props.allState!=e.allState||this.props.showModal!=e.showModal}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.showModal,a=e.homeState,r=e.allState,i=e.accountConfigState,g=e.onClose,T=e.fromPage,y=e.cardList,L=void 0===y?(0,_.fromJS)([]):y,O=(a.getIn(["data","userInfo","sobInfo","moduleInfo"]),a.getIn(["permissionInfo","Config"]).getIn(["edit","permission"])),h="accountConfig"!==T;h&&(O=a.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]));var v=i.getIn(["views","insertOrModify"]),R=i.get("accountTemp"),b=R.get("name"),M=R.get("uuid"),U=R.get("type"),J=R.get("openingName"),D=R.get("openingBank"),P=R.get("accountNumber"),w=R.get("beginAmount"),G=R.get("openInfo"),F=R.get("needPoundage"),j=R.get("poundage"),H=R.get("poundageRate"),k=!!r.getIn(["period","closedyear"]);function B(){var e=[];return""===b?e.push("账户名称必填"):(0,E.nameCheck)(b)&&e.push("名称包含中文及中文标点字符，长度不能超过"+S.AC_CHINESE_NAME_LENGTH+"位；不包含中文及中文标点字符，长度不能超过"+S.AC_NAME_LENGTH+"位"),""===U&&e.push("账户类型必填"),P.length>40&&e.push("卡号最长40个字符"),D.length>40&&e.push("银行户名最长40个字符"),J.length>40&&e.push("开户行／机构最长40个字符"),"-"===w&&e.push("请输入有效的数值"),!F||0!==j&&"0"!==j||e.push("费用上限不能为0"),e}var Y=/^\d{0,14}(\.\d{0,2})?$/,Z=void 0,x=void 0,K=void 0;return"modify"===v&&L.size&&(K=L.findIndex(function(e){return e.get("uuid")===M}),Z=K-1,x=K+1),p.default.createElement(o.default,{okText:"保存",visible:n,maskClosable:!1,title:"insert"==v?"新增账户":"编辑账户",onCancel:function(){return g()},width:"480px",footer:[p.default.createElement(d.default,{style:{float:"left",display:"insert"==v?"none":""},disabled:0===L.findIndex(function(e){return e.get("uuid")===M}),onClick:function(){t(A.beforeModifyaccountConfRunningOld(L.get(Z)))}},p.default.createElement(f.default,{type:"caret-left"})),p.default.createElement(d.default,{style:{float:"left",display:"insert"==v?"none":""},disabled:L.findIndex(function(e){return e.get("uuid")===M})===L.size-1||!L.size,onClick:function(){t(A.beforeModifyaccountConfRunningOld(L.get(x)))}},p.default.createElement(f.default,{type:"caret-right"})),p.default.createElement(d.default,{key:"cancel",type:"ghost",style:{display:"insert"==v?"none":"inline-block"},onClick:function(){g()}},"取 消"),p.default.createElement(d.default,{key:"ok",disabled:!O,type:h?"primary":"modify"==v?"primary":"ghost",onClick:function(){var e=B();e.length?c.default.info(e.join(",")):t(I.saveAccountConfAccount(T,!1,function(){return g()}))}},"保 存"),p.default.createElement(d.default,{key:"addNextAc",type:"primary",disabled:!O,style:{display:"insert"!=v||h?"none":"inline-block"},onClick:function(){var e=B();e.length?c.default.info(e.join(",")):t(I.saveAccountConfAccount(T,!0))}},"保存并新增")]},p.default.createElement("div",{className:"accountConf-modal-list"},p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"账户名称："),p.default.createElement("div",null,p.default.createElement(l.default,{placeholder:"请输入便于识别的账户名",value:b,onChange:function(e){t(A.changeAccountConfingCommonString("account","name",e.target.value))}}))),p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"账户类型："),p.default.createElement(s.default,{title:"modify"===v&&k&&0!=w?"账套已结账且存在期初值，请通过反悔模式进行修改":""},p.default.createElement("div",null,p.default.createElement(m.default,{disabled:"modify"===v&&k&&0!=w,placeholder:"（必填）",value:(0,C.typeStr)(U),onChange:function(e){t(A.changeAccountConfingCommonString("account","type",e))}},C.typeList.map(function(e,t){return p.default.createElement(N,{key:e.key,value:e.key},e.value)}))))),p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"期初余额："),p.default.createElement("div",null,p.default.createElement(l.default,{disabled:k,value:w,placeholder:"（选填）",onChange:function(e){(0,E.numberTest)(e,function(e){t(A.changeAccountConfingCommonString("account","beginAmount",e))},!0)}}))),p.default.createElement("div",{style:{display:"spare"===U?"none":""}},p.default.createElement(u.default,{onChange:function(e){t(A.changeAccountConfingCommonString("account","needPoundage",e.target.checked))},checked:F},"启用账户手续费")),F&&"spare"!==U?p.default.createElement("div",null,p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"费用比率："),p.default.createElement("div",{style:{display:"flex",lineHeight:"28px"}},p.default.createElement(l.default,{placeholder:"请输入手续费费用比率",value:H,onChange:function(e){var n=e.target.value.indexOf("。")>-1?e.target.value.replace("。","."):e.target.value;0===(n=n.replace(/,/g,"")).indexOf("0")&&"0"!=n&&n>=1&&(n=n.substr(1)),"."===n||"-."===n?c.default.info("请输入正确的数值"):n>1e3?c.default.info("费用比率必须小于1000‰"):0===n.indexOf("-")?c.default.info("费用比率不能为负"):Y.test(n)?t(A.changeAccountConfingCommonString("account","poundageRate",n)):c.default.info("金额只能输入小于14位数两位小数的数字")}}),"‰")),p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"费用上限："),p.default.createElement("div",null,p.default.createElement(l.default,{placeholder:"请输入手续费金额上限",value:-1===j?"":j,onChange:function(e){var n=e.target.value.indexOf("。")>-1?e.target.value.replace("。","."):e.target.value;0===(n=n.replace(/,/g,"")).indexOf("0")&&"0"!=n&&n>=1&&(n=n.substr(1)),"."===n||"-."===n?c.default.info("请输入正确的数值"):0===n.indexOf("-")?c.default.info("费用上限不能为负"):""===n||Y.test(n)?t(A.changeAccountConfingCommonString("account","poundage",n)):c.default.info("费用上限需大于0")}})))):"","cash"===U||"spare"===U?"":p.default.createElement(u.default,{onChange:function(e){t(A.changeAccountConfingCommonString("account","openInfo",e.target.checked))},checked:G},"账户信息"),G&&"cash"!==U&&"spare"!==U?p.default.createElement("div",null,p.default.createElement("div",{style:{display:"cash"===U?"none":""},className:"accountConf-modal-list-item"},p.default.createElement("label",null,"账号："),p.default.createElement("div",null,p.default.createElement(l.default,{placeholder:"请输入账户号码",value:P,onChange:function(e){t(A.changeAccountConfingCommonString("account","accountNumber",e.target.value))},onBlur:function(e){return t(A.changeAccountConfAccountNumber((0,C.typeStr)(U),P))}}))),p.default.createElement("div",{style:{display:"cash"===U?"none":""},className:"accountConf-modal-list-item"},p.default.createElement("label",null,"开户名："),p.default.createElement("div",null,p.default.createElement(l.default,{placeholder:"请输入账户的开户名称",value:J,onChange:function(e){t(A.changeAccountConfingCommonString("account","openingName",e.target.value))}}))),p.default.createElement("div",{style:{display:"cash"===U?"none":""},className:"accountConf-modal-list-item"},p.default.createElement("label",null,"开户行/机构："),p.default.createElement("div",null,p.default.createElement(l.default,{placeholder:"请填入开户行或支付机构名称",value:D,onChange:function(e){t(A.changeAccountConfingCommonString("account","openingBank",e.target.value))}})))):""))}}]),t}(),r.displayName="AccountCongigModifyModal",a=i))||a;t.default=O},1326:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=C(n(47)),i=C(n(14)),o=C(n(37)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(78),n(38);var s=n(1),l=C(s),c=n(18),d=n(17),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(30)),m=(n(22),n(31)),g=C(n(1415)),p=C(n(1327)),_=n(43),T=n(104);function C(e){return e&&e.__esModule?e:{default:e}}var S=(0,d.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.setUploadParam=function(t,n,a){var r=e.props.uploadKeyJson.get("dir");""!=n&&(e.get_suffix(n),r=e.calculateObjectName(n,r));var i={key:r,policy:e.props.uploadKeyJson.get("policy"),OSSAccessKeyId:e.props.uploadKeyJson.get("accessKeyId"),success_action_status:"200",callback:e.props.uploadKeyJson.get("callback"),signature:e.props.uploadKeyJson.get("signature")};t.setOption({url:e.props.uploadKeyJson.get("host"),multipart_params:i}),t.start()},e.callback=function(e,t,n){e.removeFile(t),e.addFile(n)},e.reUploadFile=function(e,t,n){e.removeFile(t.id),e.addFile(n.getNative())},e.get_suffix=function(e){var t=e.lastIndexOf("."),n="";return-1!=t&&(n=e.substring(t)),n},e.calculateObjectName=function(e,t){return t+(new Date).getTime()+"/"+e},e.checkEnclosureExist=function(t){for(var n=e.props.enclosureList?e.props.enclosureList:(0,c.fromJS)([]),a=!1,r=0;r<n.size;r++)if(n.getIn([r,"fileName"])==t.name){a=!0;break}return a},e.dataURLtoBlob=function(e){for(var t=e.split(","),n=(t[0].match(/:(.*?);/)[1],atob(t[1])),a=n.length,r=new Uint8Array(a);a--;)r[a]=n.charCodeAt(a);return new Blob([r],{type:"image/jpeg"})},e.state={uploadingModal:!1,errMessage:"",secondUpload:!1,isClipBoardUpload:!1,compressFileLength:0,clipUploadFile:function(){}},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),u(t,[{key:"componentDidMount",value:function(){var e=this,t=new g.default.Uploader({browse_button:void 0===e.props.id?"browse":e.props.id,drop_element:"drag-area",multi_selection:!0,url:m.ROOTPKT+"/aliyun/oss/callback",filters:{max_file_size:"10mb",prevent_duplicates:!1}});t.init();var n=0,a=0;t.bind("FilesAdded",function(t,a){if(void 0!==e.props.uploadKeyJson.get("checkMoreFj")&&!1===e.props.uploadKeyJson.get("checkMoreFj"))return a.forEach(function(e,n){t.removeFile(e.id)}),void e.setState({uploadingModal:!0,errMessage:"贵公司的附件容量已用完"});if(a.length>0){if(e.state.secondUpload)return e.setUploadParam(t,a[0].name,""),void(1==e.state.compressFileLength?e.setState({secondUpload:!1,compressFileLength:0}):e.setState({compressFileLength:e.state.compressFileLength-1}));if(e.props.dispatch((0,_.switchLoadingMask)()),a.length>9||a.length+e.props.enclosureList.size>9)return o.default.error("最多上传9个附件",3),a.forEach(function(e,n){t.removeFile(e.id)}),void e.props.dispatch((0,_.switchLoadingMask)());for(var r=!1,i=!0,u=!1,s=0;s<a.length;s++){var l=a[s],c=l.name;if(c.indexOf("@")>-1){e.setState({uploadingModal:!0,errMessage:"文件名中不允许包含@符号"}),i=!1,a.forEach(function(e,n){t.removeFile(e.id)}),e.props.dispatch((0,_.switchLoadingMask)());break}if(c.length>40){e.setState({uploadingModal:!0,errMessage:"文件名称不能超过40字符"}),i=!1,a.forEach(function(e,n){t.removeFile(e.id)}),e.props.dispatch((0,_.switchLoadingMask)());break}if(e.checkEnclosureExist(a[s])){e.setState({uploadingModal:!0,errMessage:"文件名已存在"}),i=!1,a.forEach(function(e,n){t.removeFile(e.id)}),e.props.dispatch((0,_.switchLoadingMask)());break}"image"==l.type.substr(0,5)&&l.size>204800&&(u=!0)}if(i){if(n=a.length,e.state.isClipBoardUpload)return void e.setUploadParam(t,"",!1);if(u)e.props.dispatch((0,_.switchLoadingMask)()),f.Confirm({message:"请选择是否原图上传",title:"提示",buttonLabels:["压缩上传","原图上传"],onSuccess:function(n){e.props.dispatch((0,_.switchLoadingMask)()),r=1!==n.buttonIndex;for(var i=function(n){var i=new FileReader,u=new Image,s=document.createElement("canvas"),l=s.getContext("2d");if("image"==a[n].type.substr(0,5)){var c=a[n].getNative();i.readAsDataURL(c),i.onload=function(e){u.src=e.target.result},u.onload=function(){var i=a[n];if(i.size>204800)if(r)try{var c=u.width,d=u.height,f=1*c,m=1*d;s.width=f,s.height=m,l.clearRect(0,0,f,m),l.drawImage(u,0,0,f,m);var g=s.toDataURL("image/jpeg",.3),p=e.dataURLtoBlob(g);p.name=i.name,i.size<p.size?i.size<=2097152?n+1===a.length&&e.setUploadParam(t,"",!1):((0,o.default)("压缩上传失败，仅可上传原图"),a.length):p.size<=2097152?(e.callback(t,i.id,p),e.setState({compressFileLength:e.state.compressFileLength+1,secondUpload:!0}),n+1===a.length&&e.setUploadParam(t,"",!1)):((0,o.default)("压缩上传失败，仅可上传原图"),a.length)}catch(t){a.length,e.setState({uploadingModal:!0,errMessage:"图片压缩异常，不支持该图片压缩"})}else n+1===a.length&&e.setUploadParam(t,"",!1);else n+1===a.length&&e.setUploadParam(t,"",!1)}}else n+1===a.length&&e.setUploadParam(t,"",!1)},u=0;u<a.length;u++)i(u)}});else for(var d=0;d<a.length;d++)d+1===a.length&&e.setUploadParam(t,"",!1)}}}),t.bind("FileUploaded",function(t,r,i){t.removeFile(r.id),a+=1,200==i.status?e.props.uploadEnclosureList([r.name,r,JSON.parse(i.response),a===n]):203==i.status?o.default.info("上传到OSS成功，但是oss访问用户设置的上传回调服务器失败，失败原因是:"+i.response):o.default.info(i.response),a===n&&(a=0,n=0,t.files.forEach(function(e){t.removeFile(e.id)}))}),t.bind("BeforeUpload",function(t,n){e.setUploadParam(t,n.name,!0)}),t.bind("Error",function(t,r){-600==r.code?o.default.info("文件最大不能超过10M"):-601==r.code?o.default.info("不能上传所选择的文件类型"):-602==r.code?o.default.info("这个文件已经上传过一遍了"):(0===r.status?f.Alert("服务器正忙，请稍后再试","确定"):f.Alert("上传出错:"+r.response,"确定"),(0,T.xfnFetchErrorToDeveloper)({title:"上传出错",message:r.status+"-"+r.code+"-"+r.message+"-"+r.requestId+"-"+JSON.stringify(r.file),remark:"附件"},{msgTextSend:m.ROOT+"/msg/text/send"}),(a+=1)===n&&(a=0,n=0,t.files.forEach(function(e){t.removeFile(e.id)}),e.props.dispatch((0,_.switchLoadingMask)())))}),this.clipUploadFile=function(e){t.addFile(e)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.formPage,a=(t.dispatch,t.enclosureList,t.uploadEnclosureList,t.style),o=(t.uploadKeyJson,t.getUploadTokenFetch),u=this.state,c=u.uploadingModal,d=u.errMessage;u.secondUpload,u.isClipBoardUpload;return l.default.createElement(s.Fragment,null,l.default.createElement("div",{className:"enclosure-item enclosure-add-file",style:a,id:"drag-area"},l.default.createElement("a",{className:"enclosure-item-input",id:void 0===this.props.id?"browse":this.props.id,onClick:function(){o(),e.setState({secondUpload:!1,isClipBoardUpload:!1})}}),l.default.createElement(i.default,{type:"plus"}),l.default.createElement(r.default,{title:"上传失败",visible:c,onOk:function(){return e.setState({uploadingModal:!1})},onCancel:function(){return e.setState({uploadingModal:!1})}},l.default.createElement("p",null,d))),l.default.createElement(p.default,{getUploadTokenFetch:o,clipUploadFile:function(t){e.setState({secondUpload:!1,isClipBoardUpload:!0}),e.clipUploadFile(t)},formPage:n}))}}]),t}())||a;t.default=S},1327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=c(n(37)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(38);var o=c(n(1)),u=(n(18),n(17)),s=n(22),l=c(n(1328));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,u.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.get_suffix=function(e){var t=e.lastIndexOf("."),n="";return-1!=t&&(n=e.substring(t)),n},e.state={clipBoardModalShow:!1,clipBoardFile:"",clipBoardBlob:"",isCustomName:!1,fileName:"",widthHeigthRate:1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"componentDidMount",value:function(){var e=this;document.getElementById(this.props.formPage?this.props.formPage:"clipBoard").addEventListener("paste",function(t){var n=event.clipboardData&&event.clipboardData.items,a=null;if(n&&n.length)for(var i=0;i<n.length;i++)if(-1!==n[i].type.indexOf("image")){a=n[i].getAsFile();break}if(a){console.log("file",a),e.props.getUploadTokenFetch();var o=new FileReader,u=new Image;o.readAsDataURL(a);var s=e;o.onload=function(e){u.src=e.target.result,u.onload=function(){var t=u.width,n=u.height;s.setState({clipBoardFile:a,clipBoardModalShow:!0,clipBoardBlob:e.target.result,widthHeigthRate:t/n})}}}else r.default.info("没有可粘贴的图片")})}},{key:"render",value:function(){var e=this,t=this.props,n=t.formPage,a=(t.dispatch,t.enclosureList,t.uploadEnclosureList,t.style),i=(t.uploadKeyJson,t.getUploadTokenFetch,t.clipUploadFile),u=this.state,c=u.clipBoardModalShow,d=u.clipBoardFile,f=u.clipBoardBlob,m=u.isCustomName,g=u.customName,p=u.widthHeigthRate;return o.default.createElement("div",{className:"enclosure-clipboard-add-file",style:a,id:"drag-area"},o.default.createElement("input",{id:n||"clipBoard",value:"",className:"enclosure-clipboard-add-btn"}),o.default.createElement("div",{className:"enclosure-clipboard-add-fake-btn"},o.default.createElement("p",null,"在此区域内点击右键"),o.default.createElement("p",{className:"enclosure-clipboard-add-fake-btn-text"},"“粘贴”剪贴板中的图片")),o.default.createElement(l.default,{clipBoardModalShow:c,clipBoardFile:d,clipBoardBlob:f,widthHeigthRate:p,onCancel:function(){return e.setState({clipBoardModalShow:!1,isCustomName:!1,customName:""})},onOK:function(){var t="";if(m){if(!g)return r.default.info("请输入自定义名称");if(g.indexOf("@")>-1)return r.default.info("文件名中不允许包含@符号");if(g.length>40)return r.default.info("文件名称不能超过40字符");t=g+".jpg"}else t="粘贴图片"+(new s.DateLib).getFullDate()+".jpg";var n=new File([d],t,{type:d.type});i(n),e.setState({clipBoardModalShow:!1,isCustomName:!1,customName:""})},isCustomName:m,customName:g,changeIsCustomName:function(){e.setState({isCustomName:!m})},changeCustomName:function(t){e.setState({customName:t.target.value})}}))}}]),t}())||a;t.default=d},1328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=c(n(47)),i=c(n(129)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(128);var u=c(n(1)),s=(n(18),n(17)),l=n(127);function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,s.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.clipBoardModalShow,n=(e.clipBoardFile,e.clipBoardBlob),a=e.onOK,o=e.onCancel,s=e.isCustomName,c=e.customName,d=e.changeIsCustomName,f=e.changeCustomName,m=e.widthHeigthRate;return console.log("widthHeigthRate",m),u.default.createElement(r.default,{title:"上传附件",maskClosable:!1,visible:t,onOk:a,onCancel:o},u.default.createElement("div",{className:"clip-board-preview-img",style:m>=1?{maxHeight:"500px"}:{height:"500px"}},u.default.createElement("img",{id:"clipBoardImg",src:n,style:m>=1?{width:"100%"}:{height:"100%"}})),u.default.createElement("div",{className:"clip-board-preview-name"},u.default.createElement(i.default,{checked:s,onChange:d})," ",u.default.createElement("span",null,"自定义名称"),u.default.createElement(l.XfInput,{className:"clip-board-preview-name-input",style:{display:s?"":"none"},value:c,onChange:f})))}}]),t}())||a;t.default=d},1342:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_LR_CALCULATE_STATE="INIT_LR_CALCULATE_STATE",t.SET_INVOIC_ASSLIST_FROM_SETTINGS="SET_INVOIC_ASSLIST_FROM_SETTINGS",t.CHANGE_LR_CALCULATE_COMMON_STATE="CHANGE_LR_CALCULATE_COMMON_STATE",t.CHANGE_LR_COST_TRANSFER_CATEGORY_UUID_AND_NAME="CHANGE_LR_COST_TRANSFER_CATEGORY_UUID_AND_NAME",t.CHANGE_LR_COST_TRANSFER_RUNNING_ASSLIST="CHANGE_LR_COST_TRANSFER_RUNNING_ASSLIST",t.CHANGE_LR_CALCULATE_RATE_ASSLIST="CHANGE_LR_CALCULATE_RATE_ASSLIST",t.SELECT_LR_CALCULATE_ITEM="SELECT_LR_CALCULATE_ITEM",t.SELECT_LR_CALCULATE_ITEM_ALL="SELECT_LR_CALCULATE_ITEM_ALL",t.AFTER_GET_COMMON_LIST="AFTER_GET_COMMON_LIST",t.AFTER_GET_TRANSFER_OUT_LIST="AFTER_GET_TRANSFER_OUT_LIST",t.AFTER_SUCCESS_INSERT_CARRYOVER_ITEM="AFTER_SUCCESS_INSERT_CARRYOVER_ITEM",t.AFTER_SUCCESS_INSERT_INVOICEAUTH_ITEM="AFTER_SUCCESS_INSERT_INVOICEAUTH_ITEM",t.AFTER_SUCCESS_INSERT_INTERNALTRANSFER_ITEM="AFTER_SUCCESS_INSERT_INTERNALTRANSFER_ITEM",t.CHANGE_LR_ACCOUNT_ACCOUNT_NAME="CHANGE_LR_ACCOUNT_ACCOUNT_NAME",t.INIT_CLR_ACCOUNT="INIT_CLR_ACCOUNT",t.AFTER_SUCCESS_INSERT_INVOICING_ITEM="AFTER_SUCCESS_INSERT_INVOICING_ITEM",t.AFTER_SUCCESS_INSERT_TRANSFER_OUT_ITEM="AFTER_SUCCESS_INSERT_TRANSFER_OUT_ITEM",t.AFTER_SUCCESS_INSERT_LB_ZZ_ITEM="AFTER_SUCCESS_INSERT_LB_ZZ_ITEM",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ="TRANSFER_OUT_FROM_CXLS_JUMP_TO_NBZZ",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_ZJTX="TRANSFER_OUT_FROM_CXLS_JUMP_TO_ZJTX",t.COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS="COST_TRANSFER_FROM_CXLS_JUMP_TO_LRLS",t.INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS="INVOICE_AUTH_FROM_CXLS_JUMP_TO_LRLS",t.INVOICING_FROM_CXLS_JUMP_TO_LRLS="INVOICING_FROM_CXLS_JUMP_TO_LRLS",t.TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS="TRANSFER_OUT_FROM_CXLS_JUMP_TO_LRLS",t.CHANGE_LR_ACCOUNT_COMMON_STRING="CHANGE_LR_ACCOUNT_COMMON_STRING",t.CHANGE_CALCULATE_COMMON_STRING="CHANGE_CALCULATE_COMMON_STRING",t.CALCULATE_CHANGE_QUERY="CALCULATE_CHANGE_QUERY",t.GET_COST_CATEGORY="GET_COST_CATEGORY",t.INIT_LR_ACOUNT_STATE="INIT_LR_ACOUNT_STATE",t.CHANGE_CALCULATE_ENCLOSURE_LIST="CHANGE_CALCULATE_ENCLOSURE_LIST",t.DELETE_CALCULATE_UPLOAD_FJ_URL="DELETE_CALCULATE_UPLOAD_FJ_URL",t.GET_CAL_LABEL_FETCH="GET_CAL_LABEL_FETCH",t.CHANGE_CAL_TAG_NAME="CHANGE_CAL_TAG_NAME",t.GET_DEAL_TYPE_CATEGORY="GET_DEAL_TYPE_CATEGORY"},1357:function(e,t,n){},1372:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.typeList=[{key:"cash",value:"现金"},{key:"general",value:"一般户"},{key:"basic",value:"基本户"},{key:"spare",value:"备用金"},{key:"Alipay",value:"支付宝"},{key:"WeChat",value:"微信"},{key:"other",value:"其它"}],t.typeStr=function(e){return({cash:function(){return"现金"},general:function(){return"一般户"},basic:function(){return"基本户"},Alipay:function(){return"支付宝"},WeChat:function(){return"微信"},other:function(){return"其它"},spare:function(){return"备用金"}}[e]||function(){return""})()}},1397:function(e,t,n){},1398:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(47),i=(a=r)&&a.__esModule?a:{default:a},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,n=arguments[1];return((e={},f(e,s.INIT_EDIT_RUNNING,function(){return m}),f(e,s.BEFORE_INSERT_RUNNING,function(){return m.setIn(["oriTemp","oriDate"],n.date)}),f(e,s.SWITCH_EDIT_RUNNING_SWITCH_PAGETAB,function(){var e=t.getIn(["oriTemp","oriDate"]);return"business"===n.value&&(t=t.set("flags",m.get("flags")).set("oriTemp",m.get("oriTemp")).setIn(["oriTemp","oriDate"],e)),t}),f(e,s.SELECT_EDIT_RUNNING_CATEGORY,function(){var e=m.get("oriTemp").toJS(),a=t.getIn(["oriTemp","oriAbstract"]),r=t.getIn(["oriTemp","oriDate"]),i=n.name.uuid;return t=t.setIn(["flags","showModal"],!0).setIn(["flags","switchUuidList"],(0,u.fromJS)([])).set("oriTemp",(0,u.fromJS)(o({},e,n.name))).set("categoryTemp",(0,u.fromJS)(n.name)),n.name.beProject&&(t=t.setIn(["oriTemp","usedProject"],!0).setIn(["oriTemp","projectCardList"],(0,u.fromJS)([{uuid:""}]))),n.isFresh&&(t=t.setIn(["oriTemp","oriAbstract"],a)),t.setIn(["oriTemp","categoryUuid"],i).setIn(["oriTemp","oriDate"],r)}),f(e,s.SELECT_MODIFY_RUNNING_CATEGORY,function(){var e=m.get("oriTemp").toJS(),a=t.getIn(["oriTemp","oriAbstract"]),r=t.getIn(["oriTemp","jrIndex"]),i=t.getIn(["oriTemp","oriDate"]),s=t.getIn(["oriTemp","amount"]),c=t.getIn(["oriTemp","accounts"]),d=t.get("enclosureList"),f=t.getIn(["oriTemp","oriUuid"]),g=t.getIn(["oriTemp","propertyCost"]),p=t.getIn(["oriTemp","billList"]),_=t.getIn(["oriTemp","canBeModifyCategory"]),T=t.getIn(["oriTemp","currentCardList"]),C=n.name.categoryType,S=(n.name.propertyCarryover,t.getIn(["oriTemp","projectCardList"])),E=(t.getIn(["oriTemp","categoryType"]),(0,l.getCategorynameByType)(C)),A=E.categoryTypeObj;n.name.beProject&&!S.size?S=(0,u.fromJS)([{}]):n.name.beProject||(S=(0,u.fromJS)([])),s<0&&"LB_FYZC"!==C&&(s=Math.abs(s));var I=n.name.uuid;return t=t.setIn(["flags","showModal"],!0).setIn(["flags","switchUuidList"],(0,u.fromJS)([])).set("oriTemp",(0,u.fromJS)(o({},e,n.name,{oriAbstract:a,jrIndex:r,oriDate:i,amount:s,accounts:c,enclosureList:d,oriUuid:f,propertyCost:g,billList:p,projectCardList:S,canBeModifyCategory:_,categoryUuid:I}))).set("categoryTemp",(0,u.fromJS)(n.name)),n.isFresh&&(t=t.setIn(["oriTemp","oriAbstract"],a)),t=n.name[A].contactsManagement?t.setIn(["oriTemp","currentCardList"],T):t.setIn(["oriTemp","currentCardList"],(0,u.fromJS)([])).setIn(["oriTemp","usedCurrent"],!1)}),f(e,s.CHANGE_MODIFY_RUNNING_CATEGORY,function(){var e=t.get("categoryTemp").toJS(),a=m.get("oriTemp").toJS(),r=t.getIn(["oriTemp","oriAbstract"]),i=t.getIn(["oriTemp","jrIndex"]),s=t.getIn(["oriTemp","oriDate"]),l=t.getIn(["oriTemp","amount"]),c=t.getIn(["oriTemp","accounts"]),d=t.get("enclosureList"),f=t.getIn(["oriTemp","oriUuid"]),g=t.getIn(["oriTemp","propertyCost"]),p=t.getIn(["oriTemp","categoryUuid"]),_=t.getIn(["oriTemp","usedProject"]),T=n.oriState;return t.setIn(["flags","showModal"],!0).setIn(["flags","switchUuidList"],(0,u.fromJS)([])).set("oriTemp",(0,u.fromJS)(o({},a,e,{oriAbstract:r,jrIndex:i,oriDate:s,amount:l,accounts:c,enclosureList:d,oriUuid:f,categoryUuid:p,oriState:T,propertyCost:g,usedProject:_})))}),f(e,s.CHANGE_EDIT_RUNNING_COMMON_STRING,function(){return n.placeArr&&(t=t.setIn(n.placeArr,n.value)),n.place&&(t=t.set(n.place,n.value)),t}),f(e,s.CHANGE_EDIT_RUNNING_ACCOUNT_NAME,function(){return t.setIn(["oriTemp","accounts",0,"accountUuid"],n.accountUuid).setIn(["oriTemp","accounts",0,"poundage"],n.poundage).setIn(["oriTemp","accounts",0,"accountName"],n.accountName)}),f(e,s.GET_JR_ORI,function(){var e=m.get("oriTemp").toJS(),a=n.receivedData.amount,r=n.receivedData.currentAmount,i=n.uuidList||t.getIn(["flags","switchUuidList"]),s=n.receivedData.payment||{};return(t=Math.abs(a)===r?t.setIn(["flags","allGetFlow"],!0):t.setIn(["flags","allGetFlow"],!1)).set("oriTemp",(0,u.fromJS)(o({},e,n.receivedData,n.category))).set("categoryTemp",(0,u.fromJS)(o({},e,n.category))).setIn(["flags","switchUuidList"],i).setIn(["oriTemp","currentBillList"],(0,u.fromJS)(n.receivedData.billList)).setIn(["oriTemp","currentProjectCardList"],(0,u.fromJS)(n.receivedData.projectCardList)).setIn(["oriTemp","curcurrentCardList"],(0,u.fromJS)(n.receivedData.currentCardList)).setIn(["oriTemp","currentOriDate"],(0,u.fromJS)(n.receivedData.oriDate)).setIn(["oriTemp","currentpersonSocialSecurityAmount"],s.personSocialSecurityAmount||0).setIn(["oriTemp","currentpersonAccumulationAmount"],s.personAccumulationAmount||0).setIn(["oriTemp","currentpincomeTaxAmount"],s.incomeTaxAmount||0)}),f(e,s.CHANGE_STATE_INIT_ORITEMP,function(){var e=m.get("oriTemp").toJS(),a=t.get("categoryTemp").toJS(),r=t.getIn(["oriTemp","oriDate"]),i=t.getIn(["oriTemp","oriAbstract"]),s=t.getIn(["oriTemp","handleType"]),l=t.getIn(["oriTemp","categoryUuid"]),c=t.getIn(["oriTemp","propertyCost"]);return t.set("oriTemp",(0,u.fromJS)(o({},e,a))).setIn(["oriTemp","oriAbstract"],i).setIn(["oriTemp","oriDate"],r).setIn(["oriTemp","handleType"],s).setIn(["oriTemp","categoryUuid"],l).setIn(["oriTemp","propertyCost"],c).setIn(["oriTemp","oriState"],n.state).setIn(["flags","dropManageFetchAllowed"],!0)}),f(e,s.INIT_EDIT_RUNNING_SETTINGS,function(){return t=t.setIn(["taxRateTemp","payableRate"],n.rate.payableRate).setIn(["taxRateTemp","outputRate"],n.rate.outputRate).setIn(["taxRateTemp","scale"],n.rate.scale).set("hideCategoryList",(0,u.fromJS)(n.hideCategoryList))}),f(e,s.CHANGE_EDIT_BILL_STATES,function(){return t.setIn(["oriTemp","billList",0,"billState"],n.billState).setIn(["oriTemp","billList",0,"tax"],n.tax).setIn(["oriTemp","billList",0,"taxRate"],n.taxRate)}),f(e,s.EDIT_CALCULATE_GAIN_OR_LOSS,function(){var e=n.place,a=n.diff,r=n.deletePlace;return t.setIn(e,a).deleteIn(r,a)}),f(e,s.CHANGE_RUNNING_TAX_RATE,function(){var e=n.amount||t.getIn(["oriTemp","amount"])||0;return"-1"==n.value?t.setIn(["oriTemp","billList",0,"tax"],"").setIn(["oriTemp","billList",0,"taxRate"],n.value):t.setIn(["oriTemp","billList",0,"tax"],(Number(e)/(1+Number(n.value)/100)*Number(n.value)/100).toFixed(2)).setIn(["oriTemp","billList",0,"taxRate"],n.value)}),f(e,s.EDIT_RUNNING_CALCULATE_AMOUNT,function(){var e=t.getIn(["oriTemp","payment","companyAccumulationAmount"])||0,a=t.getIn(["oriTemp","payment","personAccumulationAmount"])||0,r=t.getIn(["oriTemp","payment","companySocialSecurityAmount"])||0,i=t.getIn(["oriTemp","payment","personSocialSecurityAmount"])||0,o=t.getIn(["oriTemp","payment","incomeTaxAmount"])||0,u=t.getIn(["oriTemp","amount"])||0,s=t.getIn(["oriTemp","payment","actualAmount"])||0,l=(t.getIn(["oriTemp","categoryType"]),t.getIn(["oriTemp","propertyPay"])),c=(t.getIn(["oriTemp","oriState"]),t.getIn(["oriTemp","acPayment","beAccrued"])),d=t.getIn(["oriTemp","acPayment","beWithholdTax"]),f=t.getIn(["oriTemp","acPayment","beWithholding"]),m=t.getIn(["oriTemp","acPayment","beWithholdSocial"]),g=void 0;switch(l){case"SX_GZXJ":g=n.totalNotHandleAmount<0?(Number(s)-Number(a)-Number(i)-Number(o)).toFixed(2):(Number(s)+Number(a)+Number(i)+Number(o)).toFixed(2);break;case"SX_ZFGJJ":g=n.totalNotHandleAmount<0?(Number(a)-Number(e)).toFixed(2):(Number(a)+Number(e)).toFixed(2);break;case"SX_SHBX":g=n.totalNotHandleAmount<0?(-Number(r)+Number(i)).toFixed(2):(Number(r)+Number(i)).toFixed(2);break;case"SX_QTXC":g=u;break;default:g=0}return t="SX_GZXJ"!==l||!c||d||f||m?"SX_ZFGJJ"!==l&&"SX_SHBX"!==l||"insert"!==n.insertOrModify?t.setIn(["oriTemp","amount"],g):t.setIn(["oriTemp","payment","actualAmount"],g):t.setIn(["oriTemp","payment","actualAmount"],Math.abs(n.totalNotHandleAmount).toFixed(2))}),f(e,s.CALCULATE_FROM_SEARCH_JUMP_TO_EDIT,function(){t.getIn(["flags","uuidList"]);return t}),f(e,s.GET_PREAMOUNT_INFO,function(){return t=t.setIn(["oriTemp","preAmount"],n.preAmount).setIn(["oriTemp","payableAmount"],n.payableAmount)}),f(e,s.CHANGE_ORITEMP_ORIDATE,function(){return t=t.setIn(["oriTemp","oriDate"],n.date)}),f(e,s.INIT_COST_STOCK_ARRAY,function(){return t=t.setIn(["flags","costStockList"],(0,u.fromJS)([]))}),f(e,s.COMMON_CHARGE_ITEM_CHECKBOX_SELECT,function(){var e=t.getIn(["flags","selectList"]),a=t.getIn(["flags","selectItem"]),r=n.item,i=r.uuid,o=r.name,s=r.code,l=r.isOpenedQuantity,c=r.unit,d=void 0===c?{unitList:[]}:c,f=r.unitPriceList,m=void 0===f?[]:f,g=r.financialInfo;if(!n.checked&&-1===e.findIndex(function(e){return e===i})){var p=e.push(i),_=a.push((0,u.fromJS)({uuid:i,name:o,code:s,isOpenedQuantity:l,unit:d,unitPriceList:m,financialInfo:g}));return t.setIn(["flags","selectList"],p).setIn(["flags","selectItem"],(0,u.fromJS)(_))}if(n.checked){var T=e.splice(e.findIndex(function(e){return e===i}),1),C=a.splice(e.findIndex(function(e){return e===i}),1);return t.setIn(["flags","selectList"],T).setIn(["flags","selectItem"],(0,u.fromJS)(C))}return t}),f(e,s.AFTER_INVENTORY_IMPORT,function(){var e=n.receivedData.data.importList.map(function(e){return e.exchange&&e.exchange.indexOf("仓库非末级")>-1&&(e.warehouseCardCode="",e.warehouseCardName=""),e});if(t=n.receivedData.data?t.setIn(["flags","iframeload"],!0).setIn(["flags","acmessage"],(0,u.fromJS)(n.receivedData.message)).setIn(["flags","errorList"],(0,u.fromJS)(n.receivedData.data.errorList)).setIn(["flags","importKey"],n.receivedData.data.importKey).setIn(["flags","importList"],(0,u.fromJS)(e)):t.setIn(["flags","iframeload"],!0).setIn(["flags","showMessageMask"],!1).setIn(["flags","acmessage"],(0,u.fromJS)(n.receivedData.message)),e&&e.length){var a=e.reduce(function(e,t){return e+=t.amount},0)||0;t=t.setIn(["oriTemp","stockCardList"],(0,u.fromJS)(e)).setIn(["oriTemp","carryoverCardList"],(0,u.fromJS)(e.map(function(e){return e.amount="",e}))).setIn(["oriTemp","amount"],a.toFixed(2))}return t}),f(e,s.CHANGE_PRICE_LIST,function(){return n.data.map(function(e,a){if(n.stockPriceList[a].storeUuid&&n.stockPriceList[a].cardUuid&&(t=(t=t.setIn(["oriTemp","stockCardList",a,"currentQuantity"],e.quantity)).setIn(["oriTemp","stockCardList",a,"showQuantity"],!0)),n.stockPriceList[a].isUniformPrice&&(e.price<0||(0,c.numberCalculate)(e.amount,e.quantity,2,"divide")<0))return i.default.error({title:"【"+e.code+" "+e.cardName+"】的单价异常，请调整单价后再录入",content:"",onOk:function(){}});t=t.setIn(["oriTemp","carryoverCardList",a,"referencePrice"],e.price)}),t}),e)[n.type]||function(){return t})()},n(46);var u=n(18),s=d(n(133)),l=n(101),c=(d(n(27)),n(22));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=(0,u.fromJS)({views:{},flags:{selectList:[],indexList:[],managerCategoryList:[],stockThingsList:[],contactsThingsList:[],costStockList:[],selectItem:[],dropManageFetchAllowed:!0,selectedKeys:"",switchUuidList:[],poundage:{needPoundage:!1},accountContactsRange:[],accountProjectRange:[],accountProjectList:[],accountContactsRangeList:[],carryoverCategoryList:[],carryoverProjectList:[],importList:[],errorList:[],batchList:[],serialList:[]},oriTemp:{accounts:[{},{}],oriDate:(new c.DateLib).toString(),pendingStrongList:[],projectCardList:[{}],currentCardList:[],carryoverCardList:[{}],carryoverStrongList:[],stockCardList:[{}],stockStrongList:[],usedProject:!0,usedCurrent:!0,usedStock:!0,billList:[{billType:"bill_other",billState:""}],billStrongList:[],strongList:[],payment:{},cardAllList:[],poundageCurrentCardList:[],poundageProjectCardList:[],assistList:[],serialList:[]},categoryTemp:{},projectList:[],contactsList:[],warehouseList:[],stockList:[],hideCategoryList:[],MemberList:[],selectThingsList:[],thingsList:[]})},1399:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments[1];return((e={},l(e,o.INIT_EIDT_CALCULATE,function(){return c}),l(e,o.INIT_ENCODE_TYPE,function(){return t=t.setIn(["views","chooseNumber"],"-1").setIn(["views","jrIndex"],"").setIn(["views","saveWay"],!1).setIn(["views","encodeType"],"")}),l(e,o.CHANGE_CAN_MODIFY_JRINDEX,function(){var e="0"===n.encodeType?"1":n.encodeType;return t=t.setIn(["views","chooseNumber"],n.encodeType).setIn(["views","jrIndex"],n.jrIndex).setIn(["views","saveWay"],n.saveAndNew).setIn(["views","encodeType"],e)}),l(e,o.CHANGE_EIDT_CALCULATE_COMMON_STATE,function(){return t.setIn([n.parent,n.position],n.value)}),l(e,o.SELECT_EDIT_CALCULATE_ITEM,function(){var e=t.getIn([n.Tem,"uuidList"]),a=t.getIn([n.Tem,"stockCardUuidList"]);if(-1===e.indexOf(n.uuid))e=e.push(n.uuid),a=a?a.push({uuid:n.stockCardUuid,amount:n.amount,onlyId:n.uuid}):[];else{var i=e.findIndex(function(e){return e===n.uuid}),o=a.findIndex(function(e){return e.get("onlyId")===n.uuid});e=e.splice(i,1),a=a?a.splice(o,1):a}var u=a.size?a.toJS():[];return t=t.setIn([n.Tem,"uuidList"],e).setIn([n.Tem,"stockCardUuidList"],(0,r.fromJS)(u))}),l(e,o.SELECT_EDIT_CALCULATE_ITEM_ALL,function(){if(n.selectAll)return t.setIn([n.Tem,"uuidList"],(0,r.fromJS)([])).setIn([n.Tem,"stockCardUuidList"],(0,r.fromJS)([]));var e=t.getIn([n.Tem,n.ListName]),a=[],i=[];return e.forEach(function(e){a.push(e.get("jrJvUuid")),i.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid")})}),t.setIn([n.Tem,"uuidList"],(0,r.fromJS)(a)).setIn([n.Tem,"stockCardUuidList"],(0,r.fromJS)(i))}),l(e,o.AFTER_GET_EDIT_CALCULATE_COMMON_LIST,function(){t.getIn(["CostTransferTemp","uuidList"]);var e=t.getIn(["views","selectList"]),a=t.getIn(["views","selectItem"]),i=t.getIn(["CostTransferTemp","stockCardUuidList"]).toJS(),o=[];i&&i.size&&i.map(function(e){return o.push(e.get("onlyId"))});var u="CostTransferTemp"===n.temp?n.receivedData.carryoverList:n.receivedData.result;t=t.setIn([n.temp,n.ListName],(0,r.fromJS)(u));var s=e,l=a,c=i;if("CostTransferTemp"===n.temp){var d=[];n.receivedData.carryoverList.map(function(t){e.indexOf(t.jrJvUuid)>-1&&d.push(t.jrJvUuid),e.indexOf(t.jrJvUuid)>-1&&(s.push(t.jrJvUuid),l.push(t),-1===o.indexOf(t.jrJvUuid)&&c.push({uuid:t.stockCardUuid,amount:t.amount,onlyId:t.jrJvUuid,quantity:t.quantity,unitCardName:t.unitCardName,number:t.number,quantityAmount:t.quantityAmount}))}),t=t.setIn([n.temp,"uuidList"],(0,r.fromJS)(d)).setIn([n.temp,"stockCardUuidList"],(0,r.fromJS)(c)).setIn([n.temp,"cardPages"],n.receivedData.pages).setIn([n.temp,"currentCardPage"],n.receivedData.currentPage).setIn(["views","selectList"],(0,r.fromJS)(s)).setIn(["views","selectItem"],(0,r.fromJS)(l))}else t=t.setIn([n.temp,"uuidList"],(0,r.fromJS)([])).setIn([n.temp,"stockCardUuidList"],(0,r.fromJS)([])).setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([]));return t}),l(e,o.GET_CARRYOVER_CATEGORY,function(){return t=t.setIn(["CostTransferTemp","carryoverCategory"],(0,r.fromJS)(n.receivedData.categoryList)),n.needSaveData||(t=t.setIn(["CostTransferTemp","dealTypeName"],"").setIn(["CostTransferTemp","dealTypeUuid"],"")),t}),l(e,o.GET_CARRYOVER_WAREHOUSE,function(){return t=t.setIn(["CostTransferTemp","warehouseOptionList"],(0,r.fromJS)(n.receivedData.warehouseList))}),l(e,o.GET_EDIT_CALCULATE_TRANSFER_OUT_LIST,function(){return t=t.setIn(["TransferOutTemp","transferOutObj"],(0,r.fromJS)(n.receivedData))}),l(e,o.INIT_CATEGORY_FROM_CHANGE_ORISTATE,function(){return t=t.setIn(["CostTransferTemp","stockCardList"],(0,r.fromJS)([{}])).setIn(["CostTransferTemp","costTransferList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)([])).setIn(["CostTransferTemp","propertyCostList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","costStockList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","propertyCost"],"").setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])).set("commonCardObj",(0,r.fromJS)({memberList:[],thingsList:[],selectItem:[],selectList:[],selectedKeys:["all"+u.TREE_JOIN_STR+"1"],selectThingsList:[],showSingleModal:!1,modalName:""}))}),l(e,o.INIT_CATEGORY_FROM_GET_CATEGORY,function(){var e=t.getIn(["views","selectItem"]);t.getIn(["views","selectList"]);if(n.notClearItem){var a=n.stockUuidList;if("delete"===n.dealType){var i=e.filter(function(e){return a.indexOf(e.get("stockCardUuid"))>-1}),o=[];i&&i.map(function(e){return o.push(e.get("jrJvUuid"))}),t=t.setIn(["views","selectList"],(0,r.fromJS)(o)).setIn(["views","selectItem"],i).setIn(["CostTransferTemp","stockCardUuidList"],i)}}else t=t.setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])).setIn(["CostTransferTemp","stockCardUuidList"],(0,r.fromJS)([]));return t=t.setIn(["CostTransferTemp","carryoverCategory"],(0,r.fromJS)([])).setIn(["CostTransferTemp","warehouseOptionList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","categoryNameAll"],(0,r.fromJS)([])).setIn(["CostTransferTemp","wareHouseNameAll"],(0,r.fromJS)([])).setIn(["CostTransferTemp","categoryUuidList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","storeUuidList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","condition"],"").setIn(["CostTransferTemp","cardPages"],1).setIn(["CostTransferTemp","currentPage"],1)}),l(e,o.AFTER_SUCCESS_INSERT_CALCULATE_LB_ZZ,function(){return t=n.saveAndNew?t.setIn(["views","insertOrModify"],"insert").set("InternalTransferTemp",c.get("InternalTransferTemp")):t.setIn(["views","insertOrModify"],"modify")}),l(e,o.CHANGE_EDIT_ACCOUNT_ACCOUNT_NAME,function(){var e=n.value.split(u.TREE_JOIN_STR);return t=t.setIn([n.tab+"Temp",n.placeUUid],e[0]).setIn([n.tab+"Temp",n.placeName],e[1])}),l(e,o.INIT_EDIT_CALCULATE_TEMP,function(){t.get("hideCategoryList");var e=t.getIn(["SfglTemp","pageSize"]);if("saveAndNew"===n.strJudgeType){n.needCategoryUuid&&(t=t.setIn([n.temp,"categoryUuid"],n.receivedData.get("categoryUuid")));var a=c.get(n.temp);t=t.setIn(["views","insertOrModify"],"insert").setIn(["views","runningInsertOrModify"],"insert").setIn(["views","dealType"],"").setIn(["views","categoryMessage"],(0,r.fromJS)({beProject:!1,usedProject:!1,propertyCostList:[]})).setIn(["views","paymentTypeStr"],t.getIn(["views","paymentTypeStr"])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])).setIn(["views","totalAmount"],0).set("enclosureList",(0,r.fromJS)([])).set("label",(0,r.fromJS)([])).set("needDeleteUrl",(0,r.fromJS)([])).set(n.temp,a),"StockBuildUpTemp"===n.temp&&(t=t.setIn(["StockBuildUpTemp","categoryUuid"],n.receivedData.get("categoryUuid")))}if("afterSave"===n.strJudgeType){var i=(0,r.fromJS)(n.receivedData),o=n.callBackObj.jrUuid?n.callBackObj.jrUuid:t.getIn([n.temp,"jrUuid"]);t=t.set(n.temp,i).setIn(["views","insertOrModify"],"modify").setIn(["views","runningInsertOrModify"],"modify").setIn([n.temp,"jrNumber"],n.callBackObj.jrNumber).setIn([n.temp,"jrIndex"],n.callBackObj.jrIndex).setIn([n.temp,"jrUuid"],o).setIn([n.temp,"oriUuid"],n.callBackObj.oriUuid)}return"SfglTemp"===n.temp&&(t=t.setIn(["SfglTemp","pageSize"],e)),t}),l(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_NBZZ,function(){var e=n.item,a=(0,r.fromJS)(n.receivedData.jrOri),i=(0,r.fromJS)(n.receivedData.jrOri.accounts),o=void 0,u=void 0,s=void 0,l=void 0;i&&i.map(function(e,t){"ACCOUNT_STATUS_FROM"==e.get("accountStatus")&&(o=e.get("accountName"),s=e.get("accountUuid")),"ACCOUNT_STATUS_TO"==e.get("accountStatus")&&(u=e.get("accountName"),l=e.get("accountUuid"))});a.get("enclosureList")?a.get("enclosureList"):(0,r.fromJS)([]);return t=c.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["InternalTransferTemp","oriUuid"],e.get("oriUuid")).setIn(["InternalTransferTemp","jrUuid"],a.get("jrUuid")).setIn(["InternalTransferTemp","oriAbstract"],a.get("oriAbstract")).setIn(["InternalTransferTemp","oriState"],a.get("oriState")).setIn(["InternalTransferTemp","amount"],a.get("amount")).setIn(["InternalTransferTemp","fromAccountName"],o).setIn(["InternalTransferTemp","toAccountName"],u).setIn(["InternalTransferTemp","fromAccountUuid"],s).setIn(["InternalTransferTemp","toAccountUuid"],l).setIn(["InternalTransferTemp","jrIndex"],a.get("jrIndex")).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["InternalTransferTemp","beCertificate"],n.receivedData.jrOri.beCertificate)}),l(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_ZJTX,function(){var e=n.item,i=c.get("DepreciationTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri));return t=c.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["views","dealType"],o.get("relationCategoryName")).setIn(["views","projectRange"],n.receivedData.category.projectRange).setIn(["views","beProject"],n.receivedData.category.beProject).setIn(["views","propertyCostList"],o.get("propertyCostList")).set("DepreciationTemp",(0,r.fromJS)(o)).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["DepreciationTemp","projectCard"],(0,r.fromJS)(o.getIn(["projectCardList",0]))).setIn(["DepreciationTemp","beCertificate"],n.receivedData.jrOri.beCertificate)}),l(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_SYJZ,function(){var e=n.item,i=c.get("JzjzsyTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri));return t=c.setIn(["views","insertOrModify"],n.insertOrModify).set("JzjzsyTemp",(0,r.fromJS)(o)).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["JzjzsyTemp","pendingProfitAndLossCarryoverList"],(0,r.fromJS)(o.get("pendingProfitAndLossCarryoverList"))).setIn(["JzjzsyTemp","categoryName"],o.get("relationCategoryName")).setIn(["JzjzsyTemp","beCertificate"],n.receivedData.jrOri.beCertificate).setIn(["JzjzsyTemp","amount"],n.receivedData.jrOri.amount).setIn(["JzjzsyTemp","projectCardList"],(0,r.fromJS)(n.receivedData.projectList)).setIn(["JzjzsyTemp","jrCategoryList"],(0,r.fromJS)(n.receivedData.categoryList)).setIn(["views","oriUuid"],e.get("oriUuid"))}),l(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_JZSY,function(){var e=n.item,i=c.get("CqzcTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri)),u=n.receivedData.jrOri.assets,s=u.depreciationAmount,l=u.originalAssetsAmount,d=(Number(l)-Number(s)).toFixed(2),f=(d-u.cleaningAmount).toFixed(2);return t=c.setIn(["views","insertOrModify"],n.insertOrModify).set("CqzcTemp",(0,r.fromJS)(o)).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["CqzcTemp","projectRange"],n.receivedData.category.projectRange).setIn(["CqzcTemp","beProject"],n.receivedData.category.beProject).setIn(["CqzcTemp","projectCard"],(0,r.fromJS)(o.get("projectCardList"))).setIn(["CqzcTemp","categoryName"],o.get("relationCategoryName")).setIn(["CqzcTemp","businessList"],(0,r.fromJS)(n.receivedData.jrOri.pendingStrongList)).setIn(["CqzcTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("oriUuid")})).setIn(["CqzcTemp","beCertificate"],n.receivedData.jrOri.beCertificate).setIn(["CqzcTemp","diffAmount"],f).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))}),l(e,o.COST_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,o=c.get("CostTransferTemp").toJS(),u=(0,r.fromJS)(a({},o,n.receivedData.category,n.receivedData.jrOri)),s=n.receivedData.jrOri.stockCardList,l=o.pageSize;if(t=c.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["CostTransferTemp","canUseWarehouse"],e.get("canUseWarehouse")).setIn(["views","projectRange"],u.get("projectRange")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["CostTransferTemp","oriAbstract"],u.get("oriAbstract")).setIn(["CostTransferTemp","dealTypeUuid"],u.get("relationCategoryUuid")).setIn(["CostTransferTemp","categoryName"],u.get("categoryName")).setIn(["CostTransferTemp","dealTypeName"],u.get("relationCategoryName")).setIn(["CostTransferTemp","dealCategoryType"],n.receivedData.jrOri.relationCategoryType).setIn(["CostTransferTemp","costStockList"],u.get("stockCardList")).setIn(["CostTransferTemp","beCertificate"],n.receivedData.jrOri.beCertificate).setIn(["CostTransferTemp","propertyCostList"],u.get("propertyCostList")).setIn(["CostTransferTemp","propertyCost"],u.get("propertyCost")).setIn(["CostTransferTemp","stockCardList"],(0,r.fromJS)(s)).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(s)).setIn(["CostTransferTemp","totalNumber"],s.length),s&&s.map(function(e,n){t=t.setIn(["CostTransferTemp","stockCardList",n,"allUnit"],(0,r.fromJS)(e.unit)).setIn(["CostTransferTemp","stockCardList",n,"unitCardName"],e.unit?e.unit.name:"").setIn(["CostTransferTemp","selectStockItem",n,"unitCardName"],e.unit?e.unit.name:"")}),"modify"===n.insertOrModify||n.disabledChange){var d=u.get("enclosureList")?u.get("enclosureList"):(0,r.fromJS)([]);t=t.setIn(["CostTransferTemp","oriUuid"],u.get("oriUuid")).setIn(["CostTransferTemp","jrIndex"],u.get("jrIndex")).setIn(["CostTransferTemp","oriState"],u.get("oriState")).setIn(["CostTransferTemp","carryoverAmount"],u.get("notHandleAmount")).setIn(["CostTransferTemp","uuidList"],u.get("stockWeakList").map(function(e,t){return e.get("jrJvUuid")}).slice(0,l)).setIn(["CostTransferTemp","projectCard"],u.get("projectCardList")).setIn(["CostTransferTemp","usedProject"],u.get("usedProject")).setIn(["CostTransferTemp","beProject"],u.get("beProject")).setIn(["CostTransferTemp","enclosureList"],d).setIn(["CostTransferTemp","cardPages"],Math.ceil(u.get("stockWeakList").size/l)).setIn(["CostTransferTemp","currentCardPage"],1).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"));var f=[];"STATE_YYSR_ZJ"!==u.get("oriState")?(u.getIn(["stockWeakList"]).map(function(e){f.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid"),quantity:e.get("quantity"),quantityAmount:e.get("quantityAmount"),number:e.get("number"),storeNumber:e.get("storeNumber")}),s.forEach(function(n,a){n.cardUuid===e.get("stockCardUuid")&&(t=(t=t.setIn(["CostTransferTemp","stockCardList",a,"unitCardName"],e.get("unitCardName"))).setIn(["CostTransferTemp","selectStockItem",a,"unitCardName"],e.get("unitCardName")))})}),s&&s.map(function(e,n){var a=0,r=0,o=0,u=0,s=0;f&&f.map(function(t,n){t.uuid===e.cardUuid&&(t.uuid,t.unitCardName,a=(0,i.numberCalculate)(a,t.amount),s=(0,i.numberCalculate)(s,t.quantity,4,"add",4),r=(0,i.numberCalculate)(r,t.number,4,"add",4),u=(0,i.numberCalculate)(u,t.quantityAmount),o=(0,i.numberCalculate)(o,t.storeNumber,4,"add",4))});0===r||(0,i.numberCalculate)(u,r,4,"divide",4)<0||(0,i.numberCalculate)(u,r,4,"divide",4);t=t.setIn(["CostTransferTemp","stockCardList",n,"referencePrice"],(0,i.numberCalculate)(u,r,4,"divide",4)).setIn(["CostTransferTemp","stockCardList",n,"referenceQuantity"],o).setIn(["CostTransferTemp","selectStockItem",n,"referencePrice"],(0,i.numberCalculate)(u,r,4,"divide",4)).setIn(["CostTransferTemp","selectStockItem",n,"referenceQuantity"],o)})):s.forEach(function(e,n){t=t.setIn(["CostTransferTemp","stockCardList",n,"unitCardName"],e.unitName).setIn(["CostTransferTemp","stockCardList",n,"unitUuid"],e.unitUuid).setIn(["CostTransferTemp","stockCardList",n,"warehouseCardName"],e.warehouseCardName).setIn(["CostTransferTemp","selectStockItem",n,"unitCardName"],e.unitName).setIn(["CostTransferTemp","selectStockItem",n,"unitUuid"],e.unitUuid).setIn(["CostTransferTemp","selectStockItem",n,"warehouseCardName"],e.warehouseCardName)}),t=t.setIn(["CostTransferTemp","costTransferList"],u.get("stockWeakList")).setIn(["CostTransferTemp","canModifyList"],u.get("stockWeakList")).setIn(["views","selectItem"],u.get("stockWeakList")).setIn(["views","selectList"],u.get("stockWeakList").map(function(e){return e.get("jrJvUuid")})).setIn(["CostTransferTemp","stockCardUuidList"],(0,r.fromJS)(f))}else t=(t=t.setIn(["CostTransferTemp","oriUuid"],"").setIn(["CostTransferTemp","oriState"],u.get("oriState")).setIn(["CostTransferTemp","carryoverAmount"],"").setIn(["CostTransferTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")]))).setIn(["CostTransferTemp","costTransferList"],(0,r.fromJS)([e]));return t}),l(e,o.INVOICE_AUTH_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=c.get("InvoiceAuthTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri)),u=[];return o.get("pendingStrongList").map(function(e){u.push({onlyId:e.get("oriUuid")})}),t=c.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["InvoiceAuthTemp","oriAbstract"],o.get("oriAbstract")).setIn(["InvoiceAuthTemp","categoryUuid"],o.get("categoryUuid")).setIn(["InvoiceAuthTemp","oriState"],o.get("oriState")).setIn(["InvoiceAuthTemp","beCertificate"],n.receivedData.jrOri.beCertificate),t="modify"===n.insertOrModify||n.disabledChange?(t=t.setIn(["InvoiceAuthTemp","oriUuid"],e.get("oriUuid")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["InvoiceAuthTemp","jrIndex"],o.get("jrIndex")).setIn(["InvoiceAuthTemp","amount"],o.get("amount")).setIn(["InvoiceAuthTemp","billAuthType"],"STATE_FPRZ_CG"===o.get("oriState")?"BILL_AUTH_TYPE_CG":"BILL_AUTH_TYPE_TG").setIn(["InvoiceAuthTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("jrJvUuid")})).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["InvoiceAuthTemp","stockCardUuidList"],(0,r.fromJS)(u))).setIn(["InvoiceAuthTemp","invoiceAuthList"],o.getIn(["pendingStrongList"])):(t=t.setIn(["InvoiceAuthTemp","oriUuid"],"").setIn(["InvoiceAuthTemp","billAuthType"],"STATE_FPRZ_CG"===o.get("oriState")?"BILL_AUTH_TYPE_CG":"BILL_AUTH_TYPE_TG").setIn(["InvoiceAuthTemp","uuidList"],(0,r.fromJS)([e.get("jrJvUuid")]))).setIn(["InvoiceAuthTemp","invoiceAuthList"],(0,r.fromJS)([e]))}),l(e,o.INVOICING_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=c.get("InvoicingTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri)),u=[];if(o.get("pendingStrongList").map(function(e){u.push({onlyId:e.get("oriUuid")})}),t=c.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["InvoicingTemp","oriAbstract"],o.get("oriAbstract")).setIn(["InvoicingTemp","categoryUuid"],o.get("categoryUuid")).setIn(["InvoicingTemp","oriState"],o.get("oriState")).setIn(["InvoicingTemp","beCertificate"],n.receivedData.jrOri.beCertificate),"modify"===n.insertOrModify||n.disabledChange){var s="STATE_KJFP_XS"===o.get("oriState")?"BILL_MAKE_OUT_TYPE_XS":"BILL_MAKE_OUT_TYPE_TS",l=o.get("enclosureList")?o.get("enclosureList"):(0,r.fromJS)([]);t=(t=t.setIn(["InvoicingTemp","oriUuid"],e.get("oriUuid")).setIn(["InvoicingTemp","jrIndex"],o.get("jrIndex")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["InvoicingTemp","amount"],o.get("amount")).setIn(["InvoicingTemp","enclosureList"],l).setIn(["InvoicingTemp","billMakeOutType"],s).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["InvoicingTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("jrJvUuid")})).setIn(["InvoicingTemp","stockCardUuidList"],(0,r.fromJS)(u))).setIn(["InvoicingTemp","invoicingList"],o.getIn(["pendingStrongList"]))}else t=(t=t.setIn(["InvoicingTemp","oriUuid"],"").setIn(["InvoicingTemp","billMakeOutType"],"STATE_KJFP_XS"===o.get("oriState")?"BILL_MAKE_OUT_TYPE_XS":"BILL_MAKE_OUT_TYPE_TS").setIn(["InvoicingTemp","uuidList"],(0,r.fromJS)([o.get("jrJvUuid")]))).setIn(["InvoicingTemp","invoicingList"],(0,r.fromJS)([o]));return t}),l(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=c.get("DepreciationTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri));t=c.setIn(["views","insertOrModify"],n.insertOrModify).set("TransferOutTemp",(0,r.fromJS)(o)).setIn(["TransferOutTemp","beCertificate"],n.receivedData.jrOri.beCertificate).setIn(["TransferOutTemp","oriUuid"],e.get("oriUuid")).setIn(["TransferOutTemp","jrIndex"],o.get("jrIndex")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["TransferOutTemp","oriAbstract"],o.get("oriAbstract")).setIn(["TransferOutTemp","categoryUuid"],o.get("categoryUuid")).setIn(["TransferOutTemp","handleMonth"],o.getIn(["pendingStrongList",0,"oriDate"]).substr(0,7)).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["TransferOutTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("oriUuid")}));var u=0,s=0,l=0,d=0;return o.get("pendingStrongList").forEach(function(e){"销项税额"===e.get("jrJvTypeName")?(d+=1,l+=e.get("handleAmount")):(s+=1,u+=e.get("handleAmount"))}),t=t.setIn(["TransferOutTemp","transferOutObj","jrJvVatDtoList"],o.get("pendingStrongList")).setIn(["TransferOutTemp","transferOutObj","inputAmount"],u).setIn(["TransferOutTemp","transferOutObj","inputCount"],s).setIn(["TransferOutTemp","transferOutObj","outputAmount"],l).setIn(["TransferOutTemp","transferOutObj","outputCount"],d)}),l(e,o.PAYMANAGE_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=c.get("SfglTemp").toJS(),o=e.get("pageSize")?e.get("pageSize"):20,u=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri)),s="STATE_SFGL_ML"===u.get("oriState"),l=n.receivedData.jrOri.pendingManageDto.pendingManageList,d=n.receivedData.jrOri.pendingManageDto.debitTotal,f=n.receivedData.jrOri.pendingManageDto.creditTotal,m=0,g=[];if(l&&l.length&&l.map(function(e,t){var n=e.direction,r=void 0,i=Number(e.amount);r=i.toFixed(2),"debit"===n?m+=Number(r):m-=Number(r),g.push(a({},e,{moedAmount:e.handleAmount}))}),t=c.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["SfglTemp","oriAbstract"],u.get("oriAbstract")).setIn(["SfglTemp","categoryUuid"],u.getIn(["pendingManageDto","categoryUuid"])).setIn(["SfglTemp","categoryName"],u.getIn(["pendingManageDto","categoryName"])).setIn(["SfglTemp","oriState"],u.get("oriState")).setIn(["SfglTemp","oriUuid"],u.get("oriUuid")).setIn(["SfglTemp","jrUuid"],u.get("jrUuid")).setIn(["SfglTemp","isModeRunning"],s).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["SfglTemp","beCertificate"],n.receivedData.jrOri.beCertificate),"modify"===n.insertOrModify||n.disabledChange){1===n.receivedData.jrOri.accounts.length?t=t.setIn(["SfglTemp","accountUuid"],u.getIn(["accounts",0,"accountUuid"])).setIn(["SfglTemp","accountName"],u.getIn(["accounts",0,"accountName"])).setIn(["SfglTemp","accounts"],(0,r.fromJS)([n.receivedData.jrOri.accounts[0],{amount:""}])).setIn(["SfglTemp","usedAccounts"],!1):n.receivedData.jrOri.accounts.length>1&&(t=t.setIn(["SfglTemp","accounts"],(0,r.fromJS)(n.receivedData.jrOri.accounts)).setIn(["SfglTemp","usedAccounts"],!0));var p="STATE_SFGL_ML"===u.get("oriState")?"moedAmount":"handlingAmount",_=u.get("enclosureList")?u.get("enclosureList"):(0,r.fromJS)([]);t=(t=t.setIn(["SfglTemp","jrIndex"],u.get("jrIndex")).setIn(["SfglTemp",p],u.get("amount")).setIn(["SfglTemp","cardUuid"],u.getIn(["currentCardList",0,"cardUuid"])).setIn(["SfglTemp","usedCard","code"],u.getIn(["currentCardList",0,"code"])).setIn(["SfglTemp","usedCard","name"],u.getIn(["currentCardList",0,"name"])).setIn(["SfglTemp","cardPages"],Math.ceil(u.getIn(["pendingManageDto","pendingManageList"]).size/o)).setIn(["SfglTemp","currentCardPage"],1).setIn(["SfglTemp","pageSize"],o).setIn(["SfglTemp","totalNumber"],u.getIn(["pendingManageDto","pendingManageList"]).size).setIn(["SfglTemp","debitTotal"],d).setIn(["SfglTemp","creditTotal"],f).setIn(["SfglTemp","unAutomatic"],u.getIn(["pendingManageDto","isManualWriteOff"])).setIn(["SfglTemp","enclosureList"],_).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["views","selectList"],u.getIn(["pendingManageDto","pendingManageList"]).map(function(e){return e.get("uuid")})).setIn(["views","indexList"],u.getIn(["pendingManageDto","pendingManageList"]).map(function(e,t){return t})).setIn(["views","selectItem"],(0,r.fromJS)(g)).setIn(["views","totalAmount"],m)).setIn(["SfglTemp","detail"],(0,r.fromJS)(g))}else t=(t=t.setIn(["SfglTemp","oriUuid"],"").setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])).setIn(["SfglTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["SfglTemp","debitTotal"],0).setIn(["SfglTemp","creditTotal"],0)).setIn(["SfglTemp","detail"],(0,r.fromJS)([u]));return t}),l(e,o.COMMONCHARGE_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=c.get("CommonChargeTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri));if(t=c.set("CommonChargeTemp",o).setIn(["views","insertOrModify"],n.insertOrModify).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["CommonChargeTemp","oriAbstract"],o.get("oriAbstract")).setIn(["CommonChargeTemp","oriState"],o.get("oriState")).setIn(["CommonChargeTemp","oriUuid"],o.get("oriUuid")).setIn(["CommonChargeTemp","jrUuid"],o.get("jrUuid")).setIn(["CommonChargeTemp","beCertificate"],n.receivedData.jrOri.beCertificate),"modify"===n.insertOrModify||n.disabledChange){var u=0;o.get("pendingProjectShareList").map(function(e){u+=e.get("amount")}),t=(t=t.setIn(["CommonChargeTemp","jrIndex"],o.get("jrIndex")).setIn(["CommonChargeTemp","amount"],u).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))).setIn(["CommonChargeTemp","paymentList"],o.get("pendingProjectShareList"))}else t=(t=t.setIn(["CommonChargeTemp","oriUuid"],"").setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["CommonChargeTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")]))).setIn(["CommonChargeTemp","detail"],(0,r.fromJS)([o]));return t}),l(e,o.INVENTORY_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=c.get("StockTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri));if(t=c.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["StockTemp","oriAbstract"],o.get("oriAbstract")),"modify"===n.insertOrModify||n.disabledChange){var u=[];n.receivedData.jrOri.stockCardList.map(function(e){u.push(a({},e,{unit:{uuid:e.unitUuid,name:e.unitName}}))});var s=o.get("enclosureList")?o.get("enclosureList"):(0,r.fromJS)([]),l=[];n.receivedData.jrOri.warehouseCardList.map(function(e){l.push({cardUuid:e.cardUuid,name:e.code+" "+e.name,warehouseStatus:e.warehouseStatus})}),t=t.setIn(["StockTemp","oriUuid"],o.get("oriUuid")).setIn(["StockTemp","jrUuid"],o.get("jrUuid")).setIn(["StockTemp","jrIndex"],o.get("jrIndex")).setIn(["StockTemp","oriState"],o.get("oriState")).setIn(["StockTemp","chooseWareHouseCardList"],(0,r.fromJS)(l)).setIn(["StockTemp","enclosureList"],s).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName).setIn(["StockTemp","oriState"],"STATE_CHDB").setIn(["StockTemp","stockCardList"],(0,r.fromJS)(u)).setIn(["StockTemp","beCertificate"],n.receivedData.jrOri.beCertificate);var d=[];o.getIn(["stockWeakList"]).map(function(e){d.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid"),quantity:e.get("quantity"),quantityAmount:e.get("quantityAmount")})}),t=t.setIn(["StockTemp","costTransferList"],o.getIn(["stockWeakList"])).setIn(["StockTemp","canModifyList"],o.getIn(["stockWeakList"])).setIn(["StockTemp","stockCardUuidList"],(0,r.fromJS)(d)).setIn(["StockTemp","categoryUuid"],n.receivedData.category.uuid)}else t=(t=t.setIn(["StockTemp","oriUuid"],"").setIn(["StockTemp","oriState"],o.get("oriState")).setIn(["StockTemp","carryoverAmount"],"").setIn(["StockTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["StockTemp","stockCardList"],(0,r.fromJS)([]))).setIn(["StockTemp","costTransferList"],(0,r.fromJS)([e]));return t}),l(e,o.INVENTORY_BALANCE_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,o=c.get("BalanceTemp").toJS(),u=(0,r.fromJS)(a({},o,n.receivedData.category,n.receivedData.jrOri));u.get("jrState");if(t=c.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["BalanceTemp","canUseWarehouse"],e.get("canUseWarehouse")).setIn(["BalanceTemp","oriAbstract"],u.get("oriAbstract")).setIn(["BalanceTemp","categoryUuid"],u.get("categoryUuid")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName),"modify"===n.insertOrModify||n.disabledChange){var s=[],l=[];n.receivedData.jrOri.stockCardList&&n.receivedData.jrOri.stockCardList.map(function(e,t){l.push(e.cardUuid),s.push(a({},e,{allUnit:{uuid:e.unitUuid,name:e.unitName},price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4),afterAmount:(0,i.numberCalculate)(e.beforeAmount,e.amount),afterQuantity:(0,i.numberCalculate)(e.beforeQuantity,e.quantity,4,"add",4),beforePrice:(0,i.numberCalculate)(e.beforeAmount,e.beforeQuantity,4,"divide",4),afterPrice:(0,i.numberCalculate)((0,i.numberCalculate)(e.beforeAmount,e.amount),(0,i.numberCalculate)(e.beforeQuantity,e.quantity,4,"add",4),4,"divide",4),warehouseCardName:e.warehouseCardName}))});var d=u.get("enclosureList")?u.get("enclosureList"):(0,r.fromJS)([]);t=t.setIn(["BalanceTemp","oriUuid"],u.get("oriUuid")).setIn(["BalanceTemp","jrUuid"],u.get("jrUuid")).setIn(["BalanceTemp","jrIndex"],u.get("jrIndex")).setIn(["BalanceTemp","oriState"],u.get("jrState")).setIn(["BalanceTemp","chooseStockCard"],(0,r.fromJS)({})).setIn(["BalanceTemp","enclosureList"],d).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["BalanceTemp","stockCardList"],(0,r.fromJS)(s)).setIn(["BalanceTemp","oriStockList"],(0,r.fromJS)(s)).setIn(["BalanceTemp","oriStockCardList"],(0,r.fromJS)(l)).setIn(["BalanceTemp","oriWarehouseCardList"],(0,r.fromJS)([])).setIn(["BalanceTemp","categoryUuid"],n.receivedData.category.uuid).setIn(["BalanceTemp","beCertificate"],n.receivedData.jrOri.beCertificate)}else t=t.setIn(["BalanceTemp","oriUuid"],"").setIn(["BalanceTemp","oriState"],u.get("oriState")).setIn(["BalanceTemp","carryoverAmount"],"").setIn(["BalanceTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["BalanceTemp","stockCardList"],(0,r.fromJS)([]));return t}),l(e,o.TAX_TRANSTER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,i=c.get("TaxTransferTemp").toJS(),o=(0,r.fromJS)(a({},i,n.receivedData.category,n.receivedData.jrOri)),u=n.receivedData.jrOri.stockCardList;if(t=c.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["TaxTransferTemp","canUseWarehouse"],e.get("canUseWarehouse")).setIn(["views","categoryMessage"],(0,r.fromJS)(n.receivedData.category)).setIn(["views","categoryMessage","categoryType"],n.receivedData.category.relationCategoryType).setIn(["views","projectRange"],o.get("projectRange")).setIn(["TaxTransferTemp","oriAbstract"],o.get("oriAbstract")).setIn(["TaxTransferTemp","dealTypeUuid"],o.get("relationCategoryUuid")).setIn(["TaxTransferTemp","categoryName"],o.get("categoryName")).setIn(["TaxTransferTemp","dealTypeName"],o.get("relationCategoryName")).setIn(["TaxTransferTemp","beCertificate"],n.receivedData.jrOri.beCertificate).setIn(["TaxTransferTemp","stockCardList"],(0,r.fromJS)(u)).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName),u&&u.map(function(e,n){t=(t=t.setIn(["TaxTransferTemp","stockCardList",n,"allUnit"],(0,r.fromJS)(e.unit))).setIn(["TaxTransferTemp","stockCardList",n,"unitCardName"],e.unit?e.unit.name:"")}),"modify"===n.insertOrModify||n.disabledChange){var s=o.get("enclosureList")?o.get("enclosureList"):(0,r.fromJS)([]);t=t.setIn(["TaxTransferTemp","oriUuid"],o.get("oriUuid")).setIn(["TaxTransferTemp","jrIndex"],o.get("jrIndex")).setIn(["TaxTransferTemp","oriState"],o.get("oriState")).setIn(["TaxTransferTemp","projectCard"],o.getIn(["projectCardList",0])?o.getIn(["projectCardList",0]):(0,r.fromJS)({})).setIn(["TaxTransferTemp","usedProject"],o.get("usedProject")).setIn(["TaxTransferTemp","amount"],o.get("amount")).setIn(["TaxTransferTemp","propertyCarryover"],o.get("propertyCarryover")).setIn(["TaxTransferTemp","propertyCost"],o.get("propertyCost")).setIn(["TaxTransferTemp","enclosureList"],s).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))}else t=(t=t.setIn(["TaxTransferTemp","oriUuid"],"").setIn(["TaxTransferTemp","oriState"],o.get("oriState")).setIn(["TaxTransferTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")]))).setIn(["TaxTransferTemp","taxTransferList"],(0,r.fromJS)([e]));return t}),l(e,o.STOCK_BUILDUP_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,o=c.get("StockBuildUpTemp").toJS(),u=(0,r.fromJS)(a({},o,n.receivedData.category,n.receivedData.jrOri)),s=u.get("oriState"),l=u.get("enclosureList")?u.get("enclosureList"):(0,r.fromJS)([]);if(t=c.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["StockBuildUpTemp","oriAbstract"],u.get("oriAbstract")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName),"modify"===n.insertOrModify||n.disabledChange){var d=[],f=[],m=[],g=[];"STATE_CHZZ_ZZCX"===s?(n.receivedData.jrOri.stockCardList&&n.receivedData.jrOri.stockCardList.map(function(e,t){var n=1;e.unit&&(e.unit.unitUuid===e.unitUuid?n=e.unit.basicUnitQuantity?e.unit.basicUnitQuantity:1:e.unit.unitList&&e.unit.unitList.map(function(t){t.uuid===e.unitUuid&&(n=t.basicUnitQuantity?t.basicUnitQuantity:1)})),m.push(e.cardUuid+"+"+e.warehouseCardUuid),d.push(a({},e,{price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4),basicUnitQuantity:n}))}),n.receivedData.jrOri.stockCardOtherList&&n.receivedData.jrOri.stockCardOtherList.map(function(e,t){g.push(e.cardUuid+"+"+e.warehouseCardUuid);var n=1;e.unit&&(e.unit.unitUuid===e.unitUuid?n=e.unit.basicUnitQuantity?e.unit.basicUnitQuantity:1:e.unit.unitList&&e.unit.unitList.map(function(t){t.uuid===e.unitUuid&&(n=t.basicUnitQuantity?t.basicUnitQuantity:1)})),f.push(a({},e,{basicUnitQuantity:n,price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4)}))}),t=t.setIn(["StockBuildUpTemp","stockCardList"],(0,r.fromJS)(d)).setIn(["StockBuildUpTemp","stockCardOtherList"],(0,r.fromJS)(f)).setIn(["StockBuildUpTemp","oriStockCardList"],(0,r.fromJS)(m)).setIn(["StockBuildUpTemp","oriStockCardOtherList"],(0,r.fromJS)(g))):(d=n.receivedData.jrOri.stockCardList&&n.receivedData.jrOri.stockCardList.map(function(e,t){return a({},e,{materialList:e.childCardList&&e.childCardList.map(function(n){m.push(t+"+"+e.cardUuid+"+"+e.warehouseCardUuid);var r=1;return n.unit&&(n.unit.unitUuid===n.unitUuid?r=n.unit.basicUnitQuantity?n.unit.basicUnitQuantity:1:n.unit.unitList&&n.unit.unitList.map(function(e){e.uuid===n.unitUuid&&(r=e.basicUnitQuantity?e.basicUnitQuantity:1)})),a({},n,{materialUuid:n.cardUuid,isOpenQuantity:n.isOpenedQuantity,basicUnitQuantity:r})})||[],uuid:e.cardUuid,productUuid:e.cardUuid,curQuantity:e.quantity})})||[],t=t.setIn(["StockBuildUpTemp","assemblySheet"],(0,r.fromJS)(d)).setIn(["StockBuildUpTemp","oriStockCardList"],(0,r.fromJS)(m))),t=t.setIn(["StockBuildUpTemp","oriUuid"],u.get("oriUuid")).setIn(["StockBuildUpTemp","jrUuid"],u.get("jrUuid")).setIn(["StockBuildUpTemp","jrIndex"],u.get("jrIndex")).setIn(["StockBuildUpTemp","oriState"],u.get("oriState")).setIn(["StockBuildUpTemp","beCertificate"],u.get("beCertificate")).setIn(["StockBuildUpTemp","enclosureList"],l).setIn(["StockBuildUpTemp","categoryUuid"],n.receivedData.category.uuid).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))}else t=t.setIn(["StockBuildUpTemp","oriUuid"],"").setIn(["StockBuildUpTemp","oriState"],u.get("oriState")).setIn(["StockBuildUpTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["stockCardOtherList","stockCardList"],(0,r.fromJS)([])).setIn(["StockBuildUpTemp","oriStockCardList"],(0,r.fromJS)([])).setIn(["StockBuildUpTemp","oriStockCardOtherList"],(0,r.fromJS)([]));return t}),l(e,o.STOCK_INTO_PROJECT_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,o=c.get("StockIntoProjectTemp").toJS(),u=(0,r.fromJS)(a({},o,n.receivedData.category,n.receivedData.jrOri));if(t=c.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["StockIntoProjectTemp","oriAbstract"],u.get("oriAbstract")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName),"modify"===n.insertOrModify||n.disabledChange){var s=[],l=[];n.receivedData.jrOri.stockCardList&&n.receivedData.jrOri.stockCardList.map(function(e,t){l.push(e.cardUuid+"+"+e.warehouseCardUuid),s.push(a({},e,{price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4)}))});var d=u.get("enclosureList")?u.get("enclosureList"):(0,r.fromJS)([]);t=t.setIn(["StockIntoProjectTemp","oriUuid"],u.get("oriUuid")).setIn(["StockIntoProjectTemp","jrUuid"],u.get("jrUuid")).setIn(["StockIntoProjectTemp","jrIndex"],u.get("jrIndex")).setIn(["StockIntoProjectTemp","oriState"],u.get("oriState")).setIn(["StockIntoProjectTemp","beCertificate"],u.get("beCertificate")).setIn(["StockIntoProjectTemp","enclosureList"],d).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["StockIntoProjectTemp","stockCardList"],(0,r.fromJS)(s)).setIn(["StockIntoProjectTemp","oriStockCardList"],(0,r.fromJS)(l)).setIn(["StockIntoProjectTemp","projectCard"],(0,r.fromJS)(n.receivedData.jrOri.projectCardList[0]))}else t=t.setIn(["StockIntoProjectTemp","oriUuid"],"").setIn(["StockIntoProjectTemp","oriState"],u.get("oriState")).setIn(["StockIntoProjectTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["stockCardOtherList","stockCardList"],(0,r.fromJS)([])).setIn(["StockIntoProjectTemp","oriStockCardList"],(0,r.fromJS)([])).setIn(["StockIntoProjectTemp","oriStockCardOtherList"],(0,r.fromJS)([]));return t}),l(e,o.PROJECT_CARROVER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=n.item,o=c.get("ProjectCarryoverTemp").toJS(),s=(0,r.fromJS)(a({},o,n.receivedData.category,n.receivedData.jrOri));if(t=c.setIn(["views","insertOrModify"],n.insertOrModify).setIn(["ProjectCarryoverTemp","oriAbstract"],s.get("oriAbstract")).setIn(["views","paymentTypeStr"],n.receivedData.jrOri.categoryFullName),"modify"===n.insertOrModify||n.disabledChange){var l=[],d=[];n.receivedData.jrOri.stockCardList&&n.receivedData.jrOri.stockCardList.map(function(e,t){d.push(e.cardUuid+"+"+e.warehouseCardUuid),l.push(a({},e,{price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4)}))});var f=s.get("enclosureList")?s.get("enclosureList"):(0,r.fromJS)([]);"STATE_XMJZ_XMJQ"===s.get("oriState")&&(t=t.setIn(["ProjectCarryoverTemp","carryoverList"],s.get("pendingStrongList"))),t=t.setIn(["ProjectCarryoverTemp","oriUuid"],s.get("oriUuid")).setIn(["ProjectCarryoverTemp","jrUuid"],s.get("jrUuid")).setIn(["ProjectCarryoverTemp","jrIndex"],s.get("jrIndex")).setIn(["ProjectCarryoverTemp","oriState"],s.get("oriState")).setIn(["ProjectCarryoverTemp","beCertificate"],s.get("beCertificate")).setIn(["ProjectCarryoverTemp","allHappenAmount"],s.get("allHappenAmount")).setIn(["ProjectCarryoverTemp","allStoreAmount"],s.get("allStoreAmount")).setIn(["ProjectCarryoverTemp","enclosureList"],f).setIn(["views","switchUuidList"],n.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["ProjectCarryoverTemp","stockCardList"],(0,r.fromJS)(l)).setIn(["ProjectCarryoverTemp","oriStockCardList"],(0,r.fromJS)(d)).setIn(["ProjectCarryoverTemp","projectCard"],(0,r.fromJS)(n.receivedData.jrOri.projectCardList[0])).setIn(["ProjectCarryoverTemp","receiveAmount"],(0,r.fromJS)(n.receivedData.jrOri.amount)).setIn(["ProjectCarryoverTemp","currentAmount"],(0,r.fromJS)(n.receivedData.jrOri.currentAmount)).setIn(["ProjectCarryoverTemp","cardPages"],Math.ceil(s.get("pendingStrongList").size/u.EDIT_RUNNING_CHOOSE_TABLE)).setIn(["ProjectCarryoverTemp","currentCardPage"],1).setIn(["ProjectCarryoverTemp","pageSize"],u.EDIT_RUNNING_CHOOSE_TABLE).setIn(["ProjectCarryoverTemp","totalNumber"],s.get("pendingStrongList").size)}else t=t.setIn(["ProjectCarryoverTemp","oriUuid"],"").setIn(["ProjectCarryoverTemp","oriState"],s.get("oriState")).setIn(["ProjectCarryoverTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["stockCardOtherList","stockCardList"],(0,r.fromJS)([])).setIn(["ProjectCarryoverTemp","oriStockCardList"],(0,r.fromJS)([])).setIn(["ProjectCarryoverTemp","oriStockCardOtherList"],(0,r.fromJS)([]));return t}),l(e,o.XMJZ_GET_CARRYOVER_LIST,function(){return t=t.setIn(["ProjectCarryoverTemp","carryoverList"],(0,r.fromJS)(n.receivedData.carryoverList)).setIn(["ProjectCarryoverTemp","allHappenAmount"],(0,r.fromJS)(n.receivedData.allHappenAmount)).setIn(["ProjectCarryoverTemp","allStoreAmount"],(0,r.fromJS)(n.receivedData.allStoreAmount)),"XZ_CONSTRUCTION"===n.projectProperty&&(t=t.setIn(["ProjectCarryoverTemp","cardPages"],Math.ceil(n.receivedData.carryoverList.length/u.EDIT_RUNNING_CHOOSE_TABLE)).setIn(["ProjectCarryoverTemp","currentCardPage"],1).setIn(["ProjectCarryoverTemp","pageSize"],u.EDIT_RUNNING_CHOOSE_TABLE).setIn(["ProjectCarryoverTemp","totalNumber"],n.receivedData.carryoverList.length).setIn(["ProjectCarryoverTemp","receiveAmount"],n.receivedData.allHappenAmount).setIn(["ProjectCarryoverTemp","currentAmount"],n.receivedData.allStoreAmount)),t}),l(e,o.CHANGE_CALCULATE_COMMON_STRING,function(){return n.placeArr&&(t=t.setIn(n.placeArr,n.value)),n.place&&(t=t.set(n.place,n.value)),t}),l(e,o.CHANGE_CALCULATE_ENCLOSURE_LIST,function(){var e=[];return t.getIn([n.place,"enclosureList"]).map(function(t){e.push(t)}),n.imgArr.forEach(function(t){e.push(t)}),t=t.setIn([n.place,"enclosureList"],(0,r.fromJS)(e)).setIn([n.place,"enclosureCountUser"],e.length)}),l(e,o.DELETE_CALCULATE_UPLOAD_FJ_URL,function(){var e=[];return t.getIn([n.place,"needDeleteUrl"]).map(function(t){e.push(t)}),t.getIn([n.place,"enclosureList"]).map(function(a,r){r==n.index&&(e.push(t.getIn([n.place,"enclosureList",r]).set("beDelete",!0)),t=t.deleteIn([n.place,"enclosureList",r]))}),t=t.setIn([n.place,"needDeleteUrl"],(0,r.fromJS)(e)).setIn([n.place,"enclosureCountUser"],t.getIn([n.place,"enclosureList"]).size)}),l(e,o.GET_CAL_LABEL_FETCH,function(){return t=t.setIn([n.setPlace,"label"],(0,r.fromJS)(n.receivedData.data)).set("tagModal",!0)}),l(e,o.CHANGE_CAL_TAG_NAME,function(){return t.getIn([n.setPlace,"enclosureList"]).map(function(e,a){a==n.index&&(t=t.setIn([n.setPlace,"enclosureList",a,"label"],n.value))}),t=t.set("tagModal",!1)}),l(e,o.GET_CALCULATE_DEAL_TYPE_CATEGORY,function(){return t=t.setIn([n.temp,"dealTypeList",0,"childList"],(0,r.fromJS)(n.receivedData[0].childList))}),l(e,o.EDIT_CALCULATE_GAIN_OR_LOSS,function(){var e=n.place,a=n.diff,r=n.deletePlace;return t.setIn(e,a).deleteIn(r,a)}),l(e,o.EDIT_CALCULATE_CQZC_GAIN_OR_LOSS,function(){return t.setIn(n.place,n.diff)}),l(e,o.CLEAR_FILTER_CONDITION,function(){return t.setIn(["SfglTemp","categoryNameAll"],(0,r.fromJS)([])).setIn(["SfglTemp","categoryUuidList"],(0,r.fromJS)([])).setIn(["SfglTemp","categoryNameList"],(0,r.fromJS)([])).setIn(["SfglTemp","chooseWriteOffType"],!0)}),l(e,o.GET_PAYMANAGE_LIST,function(){var e=n.receivedData.pendingManageList,a=n.receivedData.writeOffTypeList,o=n.receivedData.writeOffType?n.receivedData.writeOffType:a.length?a[0]:t.getIn(["SfglTemp","writeOffType"]);if(t=t.setIn(["SfglTemp","detail"],(0,r.fromJS)(e)).setIn(["SfglTemp","cardPages"],n.receivedData.pages).setIn(["SfglTemp","currentCardPage"],n.receivedData.currentPage).setIn(["SfglTemp","debitTotal"],n.receivedData.debitTotal).setIn(["SfglTemp","creditTotal"],n.receivedData.creditTotal).setIn(["SfglTemp","totalNumber"],n.receivedData.totalNumber).setIn(["SfglTemp","condition"],n.condition).setIn(["SfglTemp","writeOffType"],o).setIn(["SfglTemp","beginDate"],n.begin).setIn(["SfglTemp","endDate"],n.end),n.needWriteOffTypeList&&(t=t.setIn(["SfglTemp","writeOffTypeList"],(0,r.fromJS)(a))),n.fromPage){var u=[],s=t.getIn(["views","selectItem"]).toJS();e.map(function(e,t){s.map(function(n){e.uuid===n.uuid&&u.push({index:t,item:n})})}),u.map(function(e){t=t.setIn(["SfglTemp","detail",e.index],(0,r.fromJS)(e.item))})}else t=t.setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])),t=""!==n.receivedData.writeOffType?(t=t.setIn(["SfglTemp","handlingAmount"],0)).setIn(["views","totalAmount"],(0,i.numberCalculate)(n.receivedData.debitTotal,n.receivedData.creditTotal,2,"subtract")):t.setIn(["SfglTemp","handlingAmount"],"").setIn(["views","totalAmount"],0);return t}),l(e,o.ITIT_PAYMANAGE_LIST,function(){return(t=t.setIn(["SfglTemp","detail"],(0,r.fromJS)([])).setIn(["SfglTemp","debitTotal"],0).setIn(["SfglTemp","creditTotal"],0)).setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["views","totalAmount"],0).setIn(["views","selectItem"],(0,r.fromJS)([]))}),l(e,o.INIT_WRITE_OFF_TYPE,function(){var e=t.getIn(["SfglTemp","writeOffTypeList"]);e.size&&e.get(0);return t=t.setIn(["SfglTemp","showDKModal"],!1).setIn(["SfglTemp","chooseWriteOffType"],!1)}),l(e,o.EDITRUNNING_ITEM_CHECKBOX_CHECK,function(){var e=t.getIn(["views","selectList"]),i=t.getIn(["views","selectItem"]);if(n.checked){var o=e.splice(e.findIndex(function(e){return e===n.item.get("uuid")}),1),u=i.filter(function(e){return e.get("uuid")!==n.item.get("uuid")});return t.setIn(["views","selectList"],o).setIn(["views","selectItem"],u)}var s=e.push(n.item.get("uuid")),l=i.push((0,r.fromJS)(a({},n.item.toJS(),{handleAmount:n.item.get("amount")})));return t.setIn(["views","selectList"],s).setIn(["views","selectItem"],(0,r.fromJS)(l))}),l(e,o.EDITRUNNING_ITEM_CHECKBOX_CHECK_ALL,function(){if(n.selectAll){var e=[];n.list.map(function(t){return e.push(t.get("uuid"))});var i=t.getIn(["views","selectList"]).toJS(),o=t.getIn(["views","selectItem"]);return t.setIn(["views","selectList"],(0,r.fromJS)(function(e,t){var n=new Set(e),a=new Set(t),r=[],i=!0,o=!1,u=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;a.has(c)||r.push(c)}}catch(e){o=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw u}}return r}(i,e))).setIn(["views","selectItem"],o.filter(function(t){return-1===e.indexOf(t.get("uuid"))}))}var u=n.list,s=t.getIn(["views","selectList"]).toJS(),l=t.getIn(["views","selectItem"]).toJS();return u&&u.size&&u.forEach(function(e,t){-1===s.indexOf(e.get("uuid"))&&(s.push(e.get("uuid")),l.push(a({},e.toJS(),{handleAmount:e.get("amount")})))}),t.setIn(["views","selectList"],(0,r.fromJS)(s)).setIn(["views","selectItem"],(0,r.fromJS)(l))}),l(e,o.COMMON_CHARGE_ITEM_CHECKBOX_SELECT,function(){var e=t.getIn(["flags","selectList"]),a=t.getIn(["flags","selectItem"]);if(n.checked){var i=e.splice(e.findIndex(function(e){return e===n.uuid}),1),o=a.splice(e.findIndex(function(e){return e.uuid===n.uuid}),1);return t.setIn(["flags","selectList"],i).setIn(["flags","selectItem"],(0,r.fromJS)(o))}var u=e.push(n.uuid),s=a.push((0,r.fromJS)({uuid:n.uuid,name:n.name,code:n.code}));return t.setIn(["flags","selectList"],u).setIn(["flags","selectItem"],(0,r.fromJS)(s))}),l(e,o.SAVE_AND_NEW_COMMON_CHARGE,function(){if(n.saveAndNew){var e=c.get("CommonChargeTemp");return t.set("CommonChargeTemp",e).set("enclosureList",(0,r.fromJS)([])).set("label",(0,r.fromJS)([])).set("needDeleteUrl",(0,r.fromJS)([]))}return"insert"===n.insertOrModify&&(t=t.setIn(["commonChargeTemp","oriUuid"],n.oriUuid).setIn(["commonChargeTemp","jrNumber"],n.jrNumber)),t}),l(e,o.GET_CANUSE_WAREHOUSE_CARD_LIST,function(){return t=t.setIn([n.temp,"wareHouseCardList"],(0,r.fromJS)(n.receivedData)).setIn([n.temp,"canUseWarehouse"],(0,r.fromJS)(n.canUseWarehouse))}),l(e,o.CHANGE_CANUSE_STOCK_CARD_LIST,function(){return n.cardPageObj&&(t=t.setIn(["commonCardObj","cardPageObj"],(0,r.fromJS)(n.cardPageObj))),t=t.setIn([n.temp,"allStockCardList"],(0,r.fromJS)(n.receivedData)).setIn([n.temp,"canUseWarehouse"],n.canUseWarehouse).setIn(["commonCardObj","thingsList"],(0,r.fromJS)(n.receivedData))}),l(e,o.CHANGE_CANUSE_WAREHOUSE_CARD_LIST,function(){var e=t.getIn(["StockTemp","chooseWareHouseCardList"]),a=-1;return e.map(function(e,t){e.get("warehouseStatus")===n.warehouseStatus&&(a=t)}),t=t.setIn(["StockTemp","chooseWareHouseCardList",a,"cardUuid"],n.uuid).setIn(["StockTemp","chooseWareHouseCardList",a,"name"],n.name)}),l(e,o.CHANGE_ITEM_CHECKBOX_CHECKED,function(){var e=t.getIn(["commonCardObj","selectList"]),i=t.getIn(["commonCardObj","selectItem"]),o=n.item,u=n.isAssembly?o.productUuid:o.cardUuid?o.cardUuid:o.uuid;if(!n.checked&&-1===e.findIndex(function(e){return e===u})){var s=o.materialList?o.materialList:[],l=s.map(function(e){var t=1;return e.unitList&&e.unitList.map(function(n){n.uuid===e.unitUuid&&(t=n.basicUnitQuantity?n.basicUnitQuantity:1)}),a({},e,{basicUnitQuantity:t})}),c=e.push(u),d=i.push((0,r.fromJS)(a({},o,{index:n.index,uuid:u,allUnit:o.unit?o.unit:"",unitUuid:o.unitUuid?o.unitUuid:o.unit?o.unit.unitList.length?"":o.unit.uuid?o.unit.uuid:"":"",unitName:o.unitName?o.unitName:o.unit?o.unit.unitList.length?"":o.unit.name?o.unit.name:"":"",materialList:l,oriMaterialList:l||[],quantity:o.quantity?o.quantity:"",afterQuantity:o.afterQuantity?o.afterQuantity:""})));return t.setIn(["commonCardObj","selectList"],c).setIn(["commonCardObj","selectItem"],(0,r.fromJS)(d))}if(n.checked){var f=e.splice(e.findIndex(function(e){return e===u}),1),m=i.splice(e.findIndex(function(e){return e===u}),1);return t.setIn(["commonCardObj","selectList"],f).setIn(["commonCardObj","selectItem"],(0,r.fromJS)(m))}return t}),l(e,o.SELECT_EDIT_CBJZ_ITEM_ALL,function(){return t.setIn(["CostTransferTemp","uuidList"],(0,r.fromJS)(n.uuidList)).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(n.selectStockItem)).setIn(["views","selectList"],(0,r.fromJS)(n.selectList)).setIn(["views","selectItem"],n.newSelectItem)}),l(e,o.GET_COST_CARRYOVER_CANUSE_WAREHOUSE_CARD,function(){return t.setIn(["CostTransferTemp","stockCardList",n.index,"warehouseCardName"],n.changeWareHouseCard.wareHouseName).setIn(["CostTransferTemp","stockCardList",n.index,"warehouseCardUuid"],n.changeWareHouseCard.uuid).setIn(["CostTransferTemp","stockCardList",n.index,"uniformUuid"],n.changeWareHouseCard.uniformUuid)}),l(e,o.CLEAR_BALANCETEMP,function(){if("STATE_CHYE_CH"===n.oriState){t=t.setIn(["BalanceTemp","wareHouseList"],(0,r.fromJS)([{canUse:!0,code:"",isUniform:!0,name:"",uniformUuid:"",cardUuid:""}]))}else t=t.setIn(["BalanceTemp","wareHouseList"],(0,r.fromJS)([]));return t.setIn(["BalanceTemp","stockCardList"],(0,r.fromJS)([{}])).setIn(["BalanceTemp","chooseWareHouseCard"],(0,r.fromJS)({cardUuid:"",name:""})).setIn(["BalanceTemp","chooseStockCard"],(0,r.fromJS)({cardUuid:"",name:"",isOpenedQuantity:!1,isUniformPrice:!1}))}),l(e,o.GET_MESSAGE_OF_CATEGORY,function(){return t.setIn(["views","categoryMessage"],(0,r.fromJS)(n.message))}),l(e,o.AFTER_GET_JXSE_STOCK_LIST,function(){var e=t.getIn(["TaxTransferTemp","uuidList"]);if(t=t.setIn([n.temp,n.ListName],(0,r.fromJS)(n.receivedData.result)),"TaxTransferTemp"===n.temp){var a=[],i=[];n.receivedData.result.map(function(t){e.indexOf(t.jrJvUuid)>-1&&(a.push(t.jrJvUuid),i.push({uuid:t.stockCardUuid,amount:t.amount,onlyId:t.jrJvUuid,quantity:t.quantity,unitCardName:t.unitCardName,number:t.number,quantityAmount:t.quantityAmount}))}),t=t.setIn([n.temp,"uuidList"],(0,r.fromJS)(a)).setIn([n.temp,"stockCardUuidList"],(0,r.fromJS)(i))}else t=t.setIn([n.temp,"uuidList"],(0,r.fromJS)([])).setIn([n.temp,"stockCardUuidList"],(0,r.fromJS)([]));return t}),l(e,o.AFTER_CALCULATE_INVENTORY_IMPORT,function(){if(t=n.receivedData.data?t.setIn(["views","iframeload"],!0).setIn(["views","acmessage"],(0,r.fromJS)(n.receivedData.message)).setIn(["views","errorList"],(0,r.fromJS)(n.receivedData.data.errorList)).setIn(["views","importKey"],n.receivedData.data.importKey).setIn(["views","importList"],(0,r.fromJS)(n.receivedData.data.importList)):t.setIn(["views","iframeload"],!0).setIn(["views","showMessageMask"],!1).setIn(["views","acmessage"],(0,r.fromJS)(n.receivedData.message)),"countStockCardList"===n.stockTemp){if(n.receivedData.data.stockList&&n.receivedData.data.stockList.length){var e=[];n.receivedData.data.stockList.forEach(function(t){t.financialInfo&&t.financialInfo.openSerial&&!t.serialList&&(t.quantity=0);var r="BalanceTemp"===n.temp?(0,i.numberCalculate)(t.quantity,t.referenceQuantity,4,"subtract",4):(0,i.numberCalculate)(t.referenceQuantity,t.quantity,4,"subtract",4);e.push(a({},t,{afterQuantity:t.quantity,quantity:r,price:t.referencePrice,amount:(0,i.numberCalculate)(t.referencePrice,r,4,"multiply"),cardUuid:t.inventoryUuid,warehouseCardUuid:t.warehouseUuid,warehouseCardName:t.warehouseName,warehouseCardCode:t.warehouseCode,expirationDate:t.expirationDateString,productionDate:t.productionDateString}))}),t=t.setIn([n.temp,n.stockTemp],(0,r.fromJS)(e))}}else if("assemblySheet"===n.stockTemp){var o=t.getIn(["StockBuildUpTemp","allStockCardList"]),u=[];n.receivedData.data.importList.forEach(function(e){var t=0;u.push(a({},e,{productUuid:e.inventoryUuid,curQuantity:e.quantity,warehouseCardUuid:e.warehouseUuid,warehouseCardName:e.warehouseName,warehouseCardCode:e.warehouseCode,expirationDate:e.expirationDateString,productionDate:e.productionDateString,materialList:e.cardDetailList.map(function(e){e.financialInfo&&e.financialInfo.openSerial&&!e.serialList&&(e.quantity=0);var n=o.find(function(t){return t.get("uuid")===e.inventoryUuid})||(0,r.fromJS)([]),u=0,s=n.get("unit"),l=s.get("unitList")||(0,r.fromJS)([]);if(s)if(e.unitUuid===s.get("uuid"))u=e.referencePrice;else{var c=l&&l.find(function(t){return t.get("uuid")===e.unitUuid}),d=c.get("basicUnitQuantity")||1;u=(0,i.numberCalculate)(e.referencePrice,d,4,"multiply",4)}var f=u>0?u:"";return t=(0,i.numberCalculate)(t,(0,i.numberCalculate)(f,e.quantity,4,"multiply")),a({},e,{quantity:e.quantity,price:f,amount:u>0?(0,i.numberCalculate)(u,e.quantity,4,"multiply"):"",isOpenQuantity:e.isOpenedQuantity,materialUuid:e.cardUuid,cardUuid:e.inventoryUuid,warehouseCardUuid:e.warehouseUuid,warehouseCardName:e.warehouseName,warehouseCardCode:e.warehouseCode,expirationDate:e.expirationDateString,productionDate:e.productionDateString})}),amount:t,price:(0,i.numberCalculate)(t,e.quantity,4,"divide",4)}))}),t=t.setIn([n.temp,n.stockTemp],(0,r.fromJS)(u))}else n.receivedData.data.importList&&n.receivedData.data.importList.length&&(t=t.setIn([n.temp,n.stockTemp],(0,r.fromJS)(n.receivedData.data.importList.map(function(e){return e.financialInfo&&e.financialInfo.openSerial&&!e.serialList&&(e.quantity=0),e.warehouseCardUuid=e.warehouseCardUuid?e.warehouseCardUuid:e.warehouseUuid?e.warehouseUuid:"",e.warehouseCardName=e.warehouseCardName?e.warehouseCardName:e.warehouseName?e.warehouseName:"",e.warehouseCardCode=e.warehouseCardCode?e.warehouseCardCode:e.warehouseCode?e.warehouseCode:"",e.cardUuid=e.inventoryUuid,e.uuid=e.inventoryUuid,e.expirationDate=e.expirationDateString,e.productionDate=e.productionDateString,e}))).setIn([n.temp,"carryoverCardList"],(0,r.fromJS)(n.receivedData.data.importList.map(function(e){return e.financialInfo&&e.financialInfo.openSerial&&!e.serialList&&(e.quantity=0),e.amount="",e.warehouseCardUuid=e.warehouseCardUuid?e.warehouseCardUuid:e.warehouseUuid?e.warehouseUuid:"",e.warehouseCardName=e.warehouseCardName?e.warehouseCardName:e.warehouseName?e.warehouseName:"",e.warehouseCardCode=e.warehouseCardCode?e.warehouseCardCode:e.warehouseCode?e.warehouseCode:"",e.cardUuid=e.inventoryUuid,e.uuid=e.inventoryUuid,e.expirationDate=e.expirationDateString,e.productionDate=e.productionDateString,e}))));return t}),l(e,o.SAVE_CALCULATE_COUNT,function(){return n.needStockCardList&&(t=t.setIn([n.temp,"stockCardList"],(0,r.fromJS)(n.stockCardList))),t=t.setIn([n.temp,"countStockCardList"],(0,r.fromJS)([])).setIn([n.temp,"chooseWareHouseCard"],(0,r.fromJS)(n.chooseWareHouseCard)).setIn(["commonCardObj","selectList"],(0,r.fromJS)([])).setIn(["commonCardObj","selectItem"],(0,r.fromJS)([])).setIn(["views","countInsert"],!0).setIn(["views","pdfInsertFirst"],!0)}),l(e,o.GET_BALANCE_UNIFORM_PRICE,function(){var e=n.receivedData;t=t.setIn([n.temp,n.stockCardTemp,n.selectIndex,"price"],e.price);var o=[];return e.priceList&&e.priceList.length&&e.priceList.map(function(t){var n=t.quantity,r=t.amount,u=(0,i.numberCalculate)((0,i.numberCalculate)(e.price,n,4,"multiply",4),r,4,"subtract");o.push(a({},t,{amount:u,oldAmount:t.amount}))}),t=t.setIn([n.temp,n.stockCardTemp,n.selectIndex,"childList"],o.length?(0,r.fromJS)(o):(0,r.fromJS)([]))}),l(e,o.GET_CANUSE_WAREHOUSE_CARD_CHILD_LIST,function(){var e=t.getIn([n.temp,n.stockCardTemp,n.selectIndex,"price"]),o=[];return n.receivedData.map(function(t){var n=t.quantity,r=t.amount,u=(0,i.numberCalculate)((0,i.numberCalculate)(e,n,4,"multiply",4),r,4,"subtract");o.push(a({},t,{amount:u,oldAmount:t.amount}))}),t=t.setIn([n.temp,n.stockCardTemp,n.selectIndex,"childList"],(0,r.fromJS)(o))}),l(e,o.GET_CANUSE_WAREHOUSE_CARD_CHILD_LIST_FROM_UNIT,function(){var e=n.receivedData,a=t.getIn([n.temp,n.stockCardTemp]),i=[];return e&&e.length&&e.map(function(e){return i.push(e.inventoryUuid)}),a&&a.size&&a.map(function(a,o){if(i.indexOf(a.get("cardUuid"))>-1){var u=i.findIndex(function(e){return e===a.get("cardUuid")});t=t.setIn([n.temp,n.stockCardTemp,o,"childList"],(0,r.fromJS)(e[u].childList)).setIn([n.temp,n.stockCardTemp,o,"price"],(0,r.fromJS)(e[u].price))}}),t}),l(e,o.SELECT_EDIT_CBJZ_ITEM,function(){return t=(t=t.setIn(["views","selectList"],n.newShowLowerList).setIn(["views","selectItem"],n.newSelectItem).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(n.selectStockItem)).setIn(["CostTransferTemp","selectStockUuidList"],(0,r.fromJS)(n.selectStockUuidList))).setIn(["CostTransferTemp","uuidList"],n.uuidList)}),l(e,o.SELECT_EDIT_CBJZ_ITEM_ALL,function(){t.getIn(["CostTransferTemp","stockCardList"]);var e=t.getIn(["CostTransferTemp","costTransferList"]),a=t.getIn(["CostTransferTemp","uuidList"]).toJS(),o=t.getIn(["CostTransferTemp","stockCardUuidList"]),u=[];if(o.map(function(e){return u.push(e.get("onlyId"))}),n.selectAll){var s=t.getIn(["views","selectList"]).toJS(),l=t.getIn(["views","selectItem"]);o=o?o.filter(function(e){if(-1===a.indexOf(e.get("onlyId")))return e}):(0,r.fromJS)([]);var c=[];e.map(function(e){return c.push(e.get("jrJvUuid"))});var d=l.filter(function(e){return-1===a.indexOf(e.get("jrJvUuid"))}),f=[],m=[];return d&&d.size&&d.map(function(e){if(f.indexOf(e.get("stockCardUuid"))>-1){var t=m.findIndex(function(t){return t.cardUuid===e.get("stockCardUuid")});m[t].quantity=(0,i.numberCalculate)(m[t].quantity,e.get("quantity"))}else f.push(e.get("stockCardUuid")),m.push({cardUuid:e.get("stockCardUuid"),quantity:e.get("quantity"),name:e.get("stockCardName"),code:e.get("stockCardCode"),amount:e.get("amount")})}),t.setIn(["CostTransferTemp","uuidList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(m)).setIn(["views","selectList"],(0,r.fromJS)(function(e,t){var n=new Set(e),a=new Set(t),r=[],i=!0,o=!1,u=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;a.has(c)||r.push(c)}}catch(e){o=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw u}}return r}(s,a))).setIn(["views","selectItem"],d)}var g=[],p=o.size?o.toJS():[];e.forEach(function(e){g.push(e.get("jrJvUuid")),-1===u.indexOf(e.get("onlyId"))&&p.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid"),quantity:e.get("quantity"),unitCardName:e.get("unitCardName"),number:e.get("number"),quantityAmount:e.get("quantityAmount"),storeNumber:e.get("storeNumber")})});var _=t.getIn(["views","selectList"]).toJS(),T=t.getIn(["views","selectItem"]).toJS();e&&e.size&&e.forEach(function(e,t){-1===_.indexOf(e.get("jrJvUuid"))&&(_.push(e.get("jrJvUuid")),T.push(e.toJS()))});var C=[],S=[];return T&&T.length&&T.map(function(e){if(C.indexOf(e.stockCardUuid)>-1){var t=S.findIndex(function(t){return t.cardUuid===e.stockCardUuid});S[t].quantity=(0,i.numberCalculate)(S[t].quantity,e.quantity)}else C.push(e.stockCardUuid),S.push({cardUuid:e.stockCardUuid,quantity:e.quantity,name:e.stockCardName,code:e.stockCardCode,amount:e.amount})}),t.setIn(["CostTransferTemp","uuidList"],(0,r.fromJS)(g)).setIn(["CostTransferTemp","stockCardUuidList"],(0,r.fromJS)(p)).setIn(["views","selectList"],(0,r.fromJS)(_)).setIn(["views","selectItem"],(0,r.fromJS)(T)).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(S))}),l(e,o.CALCULATE_FROM_SEARCH_JUMP_TO_JZCB,function(){return t.setIn(["views","paymentTypeStr"],"存货核算_存货成本结转")}),l(e,o.CHANGE_STOCKCARD_REFERENCE_PRICE_QUNATITY,function(){n.stockCardList;var e=n.receivedData,i=t.getIn([n.temp+"Temp",n.stockTemp]).toJS(),o=[];return e.map(function(t,n){o.push(a({},i[n],{referencePrice:e[n].price,referenceQuantity:e[n].quantity}))}),t=t.setIn([n.temp+"Temp",n.stockTemp,n.index],(0,r.fromJS)(o))}),l(e,o.JZJZSY_CHANGE_FILTER_MODAL_CHECKED,function(){var e=t.getIn(["JzjzsyTemp","curSelectProjectUuid"]),a=e;return n.isAll?(n.allList.map(function(e,t){a=n.checked?a.splice(a.findIndex(function(t){return t===e.get("cardUuid")}),1):-1===a.indexOf(e.get("cardUuid"))?a.push(e.get("cardUuid")):a}),t=t.setIn(["JzjzsyTemp","curSelectProjectUuid"],a)):(a=n.checked?a.splice(e.findIndex(function(e){return e===n.uuid}),1):-1===a.indexOf(n.uuid)?e.push(n.uuid):e,t.setIn(["JzjzsyTemp","curSelectProjectUuid"],a))}),e)[n.type]||function(){return t})()};var r=n(18),i=n(22),o=s(n(183)),u=s(n(27));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=(0,r.fromJS)({views:{selectI:0,dealType:"",projectList:[],projectRange:[],propertyCostList:[],dealCategory:[],beProject:!1,costStockList:[],selectList:[],indexList:[],totalAmount:0,SwitchUuidList:[],oriUuid:"",modalName:"",selectItem:[],chooseNumber:"-1",encodeType:"",saveWay:!1,jrIndex:"",categoryMessage:{beProject:!1,usedProject:!1,propertyCostList:[]},paymentTypeStr:"内部转账",importList:[],errorList:[],stockTitleName:"存货",warehouseTreeList:[],countInsert:!0,pdfInsertFirst:!0,isCount:!1,singleUrl:"",hasNumber:!0,isProduct:!1,isAssembly:!1},CostTransferTemp:{uuidList:[],dealTypeName:"",stockCardUuidList:[],categoryUuid:"",dealTypeUuid:"",costStockList:[],carryoverCategory:[],oriState:"STATE_YYSR_XS",oriAbstract:"销售存货结转成本",carryoverAmount:"",categoryName:"",costTransferList:[],canModifyList:[],stockList:[],stockCardList:[{}],categoryNameAll:[],cardUuid:"",runningCategory:[{childList:[]}],beProject:!1,usedProject:!0,projectCard:[{cardUuid:"",name:"",code:""}],canUseWarehouse:!1,propertyCost:"",wareHouseCardList:[],cardPages:1,currentCardPage:1,modifycurrentPage:1,pageSize:20,totalNumber:1,categoryUuidList:[],storeUuidList:[],condition:"",warehouseOptionList:[],wareHouseNameAll:[],wareHouseNameList:[],stockNameAll:[],stockNameList:[],stockUuidList:[],countStockCardList:[],chooseWareHouseCard:{cardUuid:"",name:"全部",isUniform:!1},oldChooseWareHouseCard:[],countWarehouseList:[],selectStockItem:[],selectStockUuidList:[]},InvoiceAuthTemp:{oriUuid:"",uuidList:[],amount:"",billAuthType:"BILL_AUTH_TYPE_CG",oriAbstract:"增值税专用发票认证",oriState:"STATE_FPRZ_CG",categoryUuid:"",invoiceAuthList:[]},InvoicingTemp:{oriUuid:"",uuidList:[],amount:"",billMakeOutType:"BILL_MAKE_OUT_TYPE_XS",oriAbstract:"收入开具发票",oriState:"STATE_KJFP_XS",categoryUuid:"",invoicingList:[],isInvoicingAmount:!0},TransferOutTemp:{uuidList:[],turnOutBusinessUuid:"",oriUuid:"",oriState:"STATE_ZCWJZZS",oriAbstract:"转出未交增值税",handleMonth:"",transferOutObj:{jrJvVatDtoList:[],inputAmount:"",inputCount:"",outputAmount:"",outputCount:""}},InternalTransferTemp:{oriUuid:"",oriState:"STATE_ZZ",oriAbstract:"内部转账",amount:"",categoryType:"",categoryUuid:"",fromAccountUuid:"",toAccountUuid:"",accountChildList:[],poundage:{needPoundage:!1},poundageCurrentCardList:[],poundageProjectCardList:[],accountProjectRange:[],accountContactsRange:[],accountContactsRangeList:[],accountProjectList:[],chooseFirstWay:!0,poundageRate:""},DepreciationTemp:{oriUuid:"",oriState:"STATE_CQZC_ZJTX",oriAbstract:"资产折旧摊销",amount:"",categoryType:"",categoryUuid:"",assetType:"XZ_ZJTX",dealTypeList:[{childList:[]}],usedProject:!0,projectCard:{name:"",code:"",cardUuid:"",amount:""},propertyCost:""},CommonChargeTemp:{projectCardList:[],paymentList:[],oriAbstract:"项目分摊",oriState:"STATE_GGFYFT",projectList:[],propertyCostName:""},CqzcTemp:{uuidList:[],projectRange:[],projectList:[],dealTypeList:[{childList:[]}],assets:{depreciationAmount:"",originalAssetsAmount:""},projectCard:[{cardUuid:"",name:"",code:""}],oriAbstract:"长期资产处置损益",oriState:"STATE_CQZC_JZSY",businessList:[],usedProject:!0,categoryName:"",diffAmount:""},JzjzsyTemp:{oriState:"STATE_XMJZ_XMJQ",amount:"",oriAbstract:"结转本期损益",pendingProfitAndLossCarryoverList:[],cardPages:1,currentPage:1,pageSize:20,chooseProjectCard:[],curSelectProjectUuid:[],projectCardList:[],chooseJrCategoryCard:[],curSelectJrCategoryUuid:[],jrCategoryList:[],modalName:""},SfglTemp:{isModeRunning:!1,paymentList:[],detail:[],debitTotal:0,creditTotal:0,runningIndex:0,categoryList:[{uuid:"",name:"",childList:[]}],handlingAmount:"",condition:"",managerCategoryList:[],oriUuid:"",oriAbstract:"核销账款",contactsCardRange:{name:"",code:""},stockCardList:{name:"",code:""},categoryUuid:"",categoryName:"",categoryUuidList:[],categoryNameList:[""],categoryNameAll:[],cardUuidList:[],cardNameList:[""],cardNameAll:[],handleTypeCard:!1,cardUuid:"",usedCard:{code:"",name:""},beMoed:!1,moedAmount:"",cardPages:1,currentCardPage:1,modifycurrentPage:1,pageSize:20,totalNumber:1,needUsedPoundage:!1,poundageCurrentCardList:[],poundageProjectCardList:[],accountProjectRange:[],accountContactsRange:[],accountContactsRangeList:[],accountProjectList:[],poundage:{needPoundage:!1},writeOffType:"",writeOffTypeList:[],showDKModal:!1,chooseWriteOffType:!1,unAutomatic:!1,oriState:"",oldSelectItem:[],beginDate:"",endDate:"",usedAccounts:!1,accounts:[{},{}]},StockTemp:{oriState:"STATE_CHDB",projectCardList:[],paymentList:[],oriAbstract:"存货调拨",stockCardList:[{}],stockCardUuidList:[],wareHouseCardList:[],chooseWareHouseCardList:[{cardUuid:"",name:"",warehouseStatus:"WAREHOUSE_STATUS_FROM"},{cardUuid:"",name:"",warehouseStatus:"WAREHOUSE_STATUS_TO"}],allStockCardList:[]},BalanceTemp:{oriState:"STATE_CHYE_CK",projectCardList:[],paymentList:[],oriAbstract:"存货价值调整",canUseWarehouse:!1,stockCardList:[{}],wareHouseList:[],oriStockList:[],oriWareHouseList:[],stockCardUuidList:[],wareHouseCardUuidList:[],wareHouseCardList:[],chooseWareHouseCard:{cardUuid:"",name:"全部",isUniform:!1},chooseStockCard:{cardUuid:"",name:"",isOpenedQuantity:!1,isUniformPrice:!1},allStockCardList:[],oriStockCardList:[],oriWarehouseCardList:[],countStockCardList:[],warehouseSelectedKeys:[],countWarehouseList:[]},TaxTransferTemp:{uuidList:[],dealTypeName:"",propertyCarryover:"",stockCardUuidList:[],categoryUuid:"",oriState:"STATE_JXSEZC_FS",oriDate:(0,i.formatDate)(),oriAbstract:"进项税额转出",carryoverAmount:"",categoryName:"",taxTransferList:[],canModifyList:[],stockList:[],stockCardList:[{code:"",name:"",amount:"",cardUuid:"",warehouseCardUuid:""}],cardUuid:"",runningCategory:[{childList:[]}],wareHouseCardList:[],projectCard:{},usedProject:!0},StockBuildUpTemp:{oriDate:(0,i.formatDate)().slice(0,10),oriState:"STATE_CHZZ_ZZCX",projectCardList:[],paymentList:[],oriAbstract:"存货组装",stockCardList:[{}],stockCardOtherList:[{}],wareHouseCardList:[{}],stockCardUuidList:[],allStockCardList:[],allWareHouseCardList:[],oriStockCardList:[],oriStockCardOtherList:[],curItemIsAvailable:!0,assemblySheet:[],assemblyNumber:""},StockIntoProjectTemp:{oriState:"STATE_CHTRXM",projectCardList:[],paymentList:[],oriAbstract:"存货投入使用",stockCardList:[{}],stockCardUuidList:[],wareHouseCardList:[],allStockCardList:[],allWareHouseCardList:[],projectCard:{cardUuid:"",name:"",code:"",projectProperty:""},stockRange:[],categoryTypeObj:{}},ProjectCarryoverTemp:{oriState:"STATE_XMJZ_XMJQ",projectCardList:[],paymentList:[],oriAbstract:"项目结清",stockCardList:[{}],stockCardUuidList:[],wareHouseCardList:[],allStockCardList:[],allWareHouseCardList:[],projectCard:{cardUuid:"",name:"",code:""},carryoverList:[],stockRange:[],categoryTypeObj:{},allHappenAmount:"",allStoreAmount:"",cardPages:1,currentCardPage:1,modifycurrentPage:1,pageSize:20,totalNumber:1},commonCardObj:{memberList:[],thingsList:[],selectItem:[],selectList:[],selectedKeys:["all"+u.TREE_JOIN_STR+"1"],selectThingsList:[],showSingleModal:!1,selectI:"",modalName:"",cardPageObj:{pages:1,currentPage:1,total:1}},vcKey:0})},1453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=g(n(47)),i=g(n(14)),o=g(n(37)),u=g(n(89)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(78),n(38),n(88);var l=g(n(1)),c=(n(18),n(17));n(1397);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(30));var d=n(22),f=g(n(1326)),m=g(n(1250));function g(e){return e&&e.__esModule?e:{default:e}}var p=u.default.Group,_=(0,c.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={tagModal:!1,tagValue:"无标签",currentIdx:"",preview:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.dispatch,s=t.permission,c=t.closed,g=t.reviewed,_=t.enclosureList,T=t.label,C=t.enCanUse,S=t.checkMoreFj,E=t.getLabelFetch,A=t.deleteUploadImgUrl,I=t.changeTagName,y=t.uploadEnclosureList,L=t.downloadEnclosure,N=t.type,O=t.uploadKeyJson,h=t.getUploadTokenFetch,v=t.id,R=this.state,b=R.tagValue,M=R.currentIdx,U=R.preview,J=R.tagModal,D=R.page,P=_&&_.filter(function(e){return"TRUE"===e.get("imageOrFile")||"application/pdf"===e.get("mimeType")}),w=!1;!s||c||g||(w=!0);var G=!0;!c&&!g||_.size||(G=!1);return l.default.createElement("div",{className:n,style:{display:G&&C?"":"none"}},l.default.createElement("span",{className:"enclosure-wrap-title",style:{display:w&&_.size<9&&(S?"":"none")}},"附件(最多上传九个)"),l.default.createElement("div",{className:"cxls-enclosure-list-wrap"},(_||[]).map(function(t,n){return l.default.createElement("div",{className:"enclosure-item",key:n},l.default.createElement("div",{className:"enclosure-item-icon",onClick:function(){if("TRUE"===t.get("imageOrFile")||"application/pdf"==t.get("mimeType")){var n=0;P.forEach(function(e,a){t.get("enclosurePath")!==e.get("enclosurePath")||(n=a)}),e.setState({preview:!0,page:n})}else o.default.warn("仅图片及PDF格式支持预览")}},l.default.createElement("img",{src:(0,d.showImg)(t.get("imageOrFile"),t.get("fileName"))})),l.default.createElement("div",{className:"enclosure-item-detail"},l.default.createElement("p",{className:"enclosure-item-filename"},t.get("fileName")),l.default.createElement("span",{className:"enclosure-item-tip"},t.get("size")>=1024?(t.get("size")/1024).toFixed(2)+"M":t.get("size")+"kb"),l.default.createElement("a",{className:"enclosure-item-tip",onClick:function(){return L(t.get("signedUrl"),t.get("fileName"))},href:"javascript:void(0);",style:{display:s?"":"none"}},l.default.createElement(i.default,{type:"download"})),l.default.createElement("span",{className:"enclosure-tag",style:{display:w?"":"none"},onClick:function(){e.setState({currentIdx:n,tagValue:t.get("label"),tagModal:!0}),E()}},"无标签"===t.get("label")?"添加标签":t.get("label"))),l.default.createElement("div",{className:"icon-close",style:{display:w?"":"none"},onClick:function(){A(n)}},l.default.createElement(i.default,{type:"close"})))}),l.default.createElement(f.default,{style:{display:w&&_.size<9&&S?"":"none"},dispatch:a,enclosureList:_,uploadEnclosureList:y,uploadKeyJson:O,getUploadTokenFetch:h,id:v,formPage:"searchRunning"})),l.default.createElement(r.default,{title:"添加标签",visible:J,onOk:function(){I(M,b),e.setState({tagModal:!1})},onCancel:function(){return e.setState({tagModal:!1})}},l.default.createElement(p,{onChange:function(t){return e.setState({tagValue:t.target.value})},value:b},T.map(function(e,t){return l.default.createElement(u.default,{className:"enclosure-radio",key:t,value:e},"无标签"===e?"取消标签":e)}))),l.default.createElement(m.default,{page:D,dispatch:a,preview:U,downloadPermission:s,previewImgArr:P,downloadEnclosure:L,closePreviewModal:function(){return e.setState({preview:!1})},type:N,uploadKeyJson:O}))}}]),t}())||a;t.default=_},1570:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=C(n(1234)),i=C(n(129)),o=C(n(45)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1235),n(128),n(55);var s=C(n(1)),l=n(17),c=n(18),d=(C(n(6)),n(56),C(n(1237))),f=T(n(27)),m=C(n(483)),g=(C(n(90)),n(22)),p=(C(n(1325)),n(482)),_=T(n(1304));function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}var S=o.default.Option,E=(0,l.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),u(t,[{key:"componentDidMount",value:function(){var e=this.props.accountPoundage.get("categoryUuid"),t=this.props.accountPoundage.get("canUsed");e&&t&&this.props.dispatch(_.getAccountRunningCate(e))}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.accountPoundage,a=e.flags,o=(e.projectList,e.modalTemp),u=o.get("poundageCurrentCardList")||(0,c.fromJS)([]),l=o.get("poundageProjectCardList")||(0,c.fromJS)([]),T=o.get("needUsedPoundage"),C=a.get("accountProjectRange"),E=a.get("accountContactsRange"),A=a.get("accountContactsRangeList"),I=a.get("accountProjectList"),y=(o.getIn(["accounts",0,"accountName"]),o.getIn(["accounts",0,"poundageAmount"])),L=o.getIn(["accounts",0,"accountUuid"]),N=(o.getIn(["accounts",0,"poundage"])||(0,c.fromJS)({})).get("needPoundage"),O=n.get("canUsed");return s.default.createElement("div",{style:{display:N&&L&&O?"":"none"}},s.default.createElement("div",{style:{marginBottom:"10px"}},s.default.createElement("span",null,s.default.createElement(i.default,{style:{width:"auto",fontSize:"12px"},checked:T,onChange:function(e){t(_.changeCxAccountCommonOutString(["modalTemp","needUsedPoundage"],!T))}},"账户手续费")),n.get("poundageNeedCurrent")&&T?s.default.createElement(r.default,{className:"use-unuse-style edit-running-switch",checked:u.size,checkedChildren:"往来",unCheckedChildren:"往来",onChange:function(){u.size?t(_.changeCxAccountCommonOutString(["modalTemp","poundageCurrentCardList"],(0,c.fromJS)([]))):t(_.changeCxAccountCommonOutString(["modalTemp","poundageCurrentCardList"],(0,c.fromJS)([{}])))}}):"",n.get("poundageNeedProject")&&T?s.default.createElement(r.default,{className:"use-unuse-style edit-running-switch",checked:l.size,checkedChildren:"项目",unCheckedChildren:"项目",style:{marginLeft:"10px"},onChange:function(){l.size?t(_.changeCxAccountCommonOutString(["modalTemp","poundageProjectCardList"],(0,c.fromJS)([]))):t(_.changeCxAccountCommonOutString(["modalTemp","poundageProjectCardList"],(0,c.fromJS)([{}])))}}):""),u.size&&T?s.default.createElement("div",{className:"manager-item"},s.default.createElement("label",null,"往来单位："),s.default.createElement(m.default,{combobox:!0,showSearch:!0,onDropdownVisibleChange:function(e){e&&t(_.getAccountContactsCardList(E))},value:(u&&u.getIn([0,"code"])?u.getIn([0,"code"]):"")+" "+(u&&u.getIn([0,"name"])?u.getIn([0,"name"]):""),onChange:function(e){var n=e.split(f.TREE_JOIN_STR),a=n[0],r=n[1],i=n[2];t(_.changeCxAccountCommonOutString(["modalTemp","poundageCurrentCardList",0],(0,c.fromJS)({cardUuid:a,name:i,code:r})))}},A.map(function(e,t){return s.default.createElement(S,{key:e.get("uuid"),value:""+e.get("uuid")+f.TREE_JOIN_STR+e.get("code")+f.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))}))):"",l.size&&T?s.default.createElement("div",{className:"manager-item"},s.default.createElement("label",null,"项目："),s.default.createElement(m.default,{combobox:!0,showSearch:!0,value:(l&&(0,p.projectCodeTest)(l.getIn([0,"code"])))+" "+(l&&l.getIn([0,"name"])?l.getIn([0,"name"]):""),onDropdownVisibleChange:function(e){e&&t(_.getAccountProjectCardList(C))},onChange:function(e){var n=e.split(f.TREE_JOIN_STR),a=n[0],r=n[1],i=n[2];t(_.changeCxAccountCommonOutString(["modalTemp","poundageProjectCardList",0],(0,c.fromJS)({cardUuid:a,name:i,code:r})))}},I.map(function(e,t){return s.default.createElement(S,{key:t,value:""+e.get("uuid")+f.TREE_JOIN_STR+e.get("code")+f.TREE_JOIN_STR+e.get("name")},(0,p.projectCodeTest)(e.get("code"))+" "+e.get("name"))}))):"",T?s.default.createElement("div",{style:{display:"flex"},className:"manager-item"},s.default.createElement("label",null,"支出金额："),s.default.createElement(d.default,{placeholder:"",value:y,onChange:function(e){(0,g.numberTest)(e,function(e){t(_.changeCxAccountCommonOutString(["modalTemp","accounts",0,"poundageAmount"],e))})}})):"")}}]),t}())||a;t.default=E},1571:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=d(n(47)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46);var o=d(n(1)),u=n(17),s=d(n(1453)),l=n(43),c=n(488);function d(e){return e&&e.__esModule?e:{default:e}}n(1397);var f=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.lrPermissionInfo,n=e.enclosureList,a=e.label,i=e.closedBy,u=e.reviewedBy,d=e.enCanUse,f=e.checkMoreFj,m=e.uploadKeyJson,g=e.dispatch,p=e.visible,_=e.onCancel,T=e.className,C=e.title,S=e.okText,E=e.onOk,A=e.id;return o.default.createElement(r.default,{visible:p,onCancel:_,className:T,title:C,okText:S,onOk:E},o.default.createElement("div",null,this.props.children,o.default.createElement(s.default,{id:A,type:"ls",className:"cxls-enclosure-wrap",dispatch:g,permission:t.getIn(["edit","permission"]),enclosureList:n,label:a,closed:i,reviewed:u,enCanUse:d,checkMoreFj:f,getUploadTokenFetch:function(){return g(c.searchRunningAllActions.getUploadTokenFetch())},getLabelFetch:function(){return g(c.searchRunningAllActions.getRunningLabelFetch())},deleteUploadImgUrl:function(e){return g(c.searchRunningAllActions.deleteRunningEnclosureUrl(e))},changeTagName:function(e,t){return g(c.searchRunningAllActions.changeRunningTagName(e,t))},downloadEnclosure:function(e,t){return g((0,l.allDownloadEnclosure)(e,t))},uploadEnclosureList:function(e){g(c.searchRunningAllActions.uploadFiles.apply(c.searchRunningAllActions,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)))},uploadKeyJson:m})))}}]),t}())||a;t.default=f},1722:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.accountPoundage=void 0;var a,r=S(n(1366)),i=S(n(47)),o=S(n(14)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1356),n(46),n(78);var s=S(n(1)),l=(S(n(0)),n(56));n(2281);n(18),C(n(27)),n(482),n(22);var c=C(n(1723)),d=C(n(1726)),f=S(n(1727)),m=S(n(2287)),g=S(n(1729)),p=S(n(1728)),_=S(n(1730)),T=C(n(177));C(n(1239)),n(43),n(488);function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}t.accountPoundage=null;var E=(0,l.connect)(function(e){return e})(a=function(e){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChangeActiveKey=function(){return e.setState({activeKey:e.state.activeKey.length>0?[]:["1"]})},e.onChangeRelatedActiveKey=function(){return e.setState({relatedActiveKey:e.state.relatedActiveKey.length>0?[]:["1"]})},e.state={activeKey:["1"],deleteModal:!1,tagModal:!1,tagValue:"无标签",currentIdx:"",manageModal:!1,carryoverModal:!1,invioceModal:!1,defineModal:!1,jzsyModal:!1,isSeleck:!1,deleteHasFj:!1,relatedActiveKey:["1"],relatedRunningShow:!1,showMask:!1,page:"detail"},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default.Component),u(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.allState!=e.allState||this.props.runningPreviewState!=e.runningPreviewState||this.props.homeState!=e.homeState||this.props.editRunningState!=e.editRunningState||this.props.searchRunningState!=e.searchRunningState||this.state!==t||this.props.searchRunningAllState!==e.searchRunningAllState}},{key:"render",value:function(){var e=this,n=this.props,a=n.dispatch,u=n.runningPreviewState,l=n.allState,C=n.homeState,S=n.searchRunningState,E=n.searchRunningAllState,A=this.state,I=A.activeKey,y=(A.tagValue,A.currentIdx,A.tagModal,A.manageModal,A.carryoverModal,A.invioceModal,A.defineModal,A.deleteModal,A.jzsyModal,A.isSeleck,A.deleteHasFj,A.relatedActiveKey),L=A.relatedRunningShow,N=(A.showMask,C.get("panes")),O=l.get("accountList");t.accountPoundage=l.get("accountPoundage");var h=E.get("enclosureList"),v=l.get("uploadKeyJson"),R=C.getIn(["permissionInfo","LrAccount"]),b=E.get("label"),M=!J||J.indexOf("ENCLOSURE_RUN")>-1,U="TRUE"===C.getIn(["data","userInfo","checkMoreFj"]),J=C.getIn(["data","userInfo","sobInfo","moduleInfo"]),D=(C.getIn(["data","userInfo","sobInfo"]),C.get("pageActive")),P=C.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1,w=!!J&&J.indexOf("RUNNING_GL")>-1,G=u.get("currentItem"),F=u.get("jrOri"),j=u.get("category"),H=u.get("processInfo"),k=u.get("relatedJrOri"),B=u.get("relatedCategory"),Y=u.get("relatedProcessInfo"),Z=u.getIn(["views","fromPage"]),x=u.getIn(["views","refreshList"]),K=u.getIn(["views","uuidList"]),W=F.get("oriState"),X=F.get("jrState"),z=F.get("beBusiness"),Q=F.get("oriAbstract"),V=u.get("lsItemData"),q=j.get("categoryType"),$=j.get("propertyPay"),ee=[],te=void 0,ne=void 0;V&&V.get("vcList")&&V.get("vcList").map(function(e,t){ee.push({vcIndex:e.get("vcIndex")}),te=e.get("year"),ne=e.get("month")});var ae,re,ie=C.getIn(["permissionInfo","LrAccount"]),oe=ie.getIn(["edit","permission"]),ue=(C.getIn(["permissionInfo","Pz"]).getIn(["edit","permission"]),ie.getIn(["review","permission"])),se=oe,le=F.get("oriUuid"),ce={LB_YYSR:"Yysz",LB_YYZC:"Yysz",LB_FYZC:"Fyzc",LB_XCZC:"Xczc",LB_SFZC:"Sfzc",LB_CQZC:"Cqzc",LB_YYWSR:"Yywsz",LB_YYWZC:"Yywsz",LB_ZSKX:"Zszf",LB_ZFKX:"Zszf",LB_JK:"JkTzZb",LB_TZ:"JkTzZb",LB_ZB:"JkTzZb"},de={STATE_FPRZ_CG:"FpKr",STATE_FPRZ_TG:"FpKr",STATE_KJFP_XS:"FpKr",STATE_KJFP_TS:"FpKr",STATE_ZCWJZZS:"Zcwjzzs",STATE_ZZ:"Nbzz",STATE_CQZC_ZJTX:"Zjtx",STATE_CQZC_JZSY:"Jzsy",STATE_SFGL:"Sfgl",STATE_SFGL_ML:"Sfgl",STATE_YYSR_JZCB:"Jzcb",STATE_GGFYFT:"Xmft",STATE_FZSCCB:"Xmft",STATE_ZZFY:"Xmft",STATE_JJFY:"Xmft",STATE_JXZY:"Xmft",STATE_CHDB:"Chdb",STATE_CHYE:"Chyetz",STATE_JXSEZC_FS:"Jxsezc",STATE_JXSEZC_TFS:"Jxsezc",STATE_CHZZ_ZZCX:"Chzzcx",STATE_CHZZ_ZZD:"Chzzcx",STATE_CHTRXM:"Chtrxm",STATE_XMJZ_XMJQ:"Xmjz",STATE_XMJZ_JZRK:"Xmjz",STATE_XMJZ_QRSRCB:"Xmjz",STATE_SYJZ_JZSR:"Jzjzsy",STATE_SYJZ_JZCBFY:"Jzjzsy",STATE_SYJZ_JZBNLR:"Jzjzsy"},fe={STATE_YYSR_DJ:"预收款",STATE_YYSR_XS:"销售",STATE_YYSR_TS:"退售",STATE_YYZC_DJ:"预付款",STATE_YYZC_GJ:"购进",STATE_YYZC_TG:"退购",STATE_FY_DJ:"预付款",STATE_FY:"发生",STATE_XC_JT:"计提",STATE_XC_FF:"SX_FLF"===$?"支付":"发放",STATE_XC_JN:"缴纳",STATE_XC_DK:"代扣",STATE_XC_DJ:"代缴",STATE_SF_YJZZS:"预缴",STATE_SF_JN:"缴纳",STATE_SF_JT:"计提",STATE_SF_SFJM:"减免",STATE_ZS_SQ:"收取",STATE_ZS_TH:"退还",STATE_ZF_FC:"付出",STATE_ZF_SH:"收回",STATE_JK_JTLX:"计提",STATE_JK_ZFLX:"支付利息",STATE_TZ_SRGL:"收入股利",STATE_TZ_JTGL:"计提",STATE_TZ_JTLX:"计提",STATE_TZ_SRLX:"收入利息",STATE_ZB_ZFLR:"支付利润",STATE_ZB_LRFP:"利润分配",STATE_SF_ZCWJZZS:"转出未交增值税",STATE_KJFP_XS:"销售开票",STATE_KJFP_TS:"退销开票",STATE_FPRZ_CG:"采购发票认证",STATE_FPRZ_TG:"退购发票认证"};return s.default.createElement("div",null,s.default.createElement(r.default,{className:"ylls-wrap",width:479,closable:!1,onClose:function(){return a(T.closePreviewRunning(!1))},visible:!0,maskClosable:!1,mask:!1,placement:"approval"===Z||"serialFollow"===Z?"left":"right"},s.default.createElement(m.default,{relatedJrOri:k,relatedCategory:B,relatedProcessInfo:Y,lsItemNameJson:ce,calLsItemJson:de,relatedActiveKey:y,onChangeRelatedActiveKey:this.onChangeRelatedActiveKey,relatedRunningShow:L,runningPreviewState:u,dispatch:a,searchRunningState:S,editLrAccountPermission:oe,accountList:O,intelligentStatus:w,enableWarehouse:P,jrOri:F,refreshList:x,onClose:function(){e.setState({relatedRunningShow:!1}),setTimeout(function(){return e.setState({showMask:!1})},500)},oriStateName:fe,lrPermissionInfo:R,placement:"approval"===Z||"serialFollow"===Z?"left":"right",reviewLrAccountPermission:ue,pageActive:D}),s.default.createElement("div",null,s.default.createElement("div",{className:"ylls-title"},s.default.createElement("span",{className:"ylls-title-text"},"查看流水"),s.default.createElement("span",{onClick:function(){return a(T.closePreviewRunning(!1))},className:"ylls-title-icon"},s.default.createElement(o.default,{type:"close"}))),s.default.createElement(f.default,{dispatch:a,fromPage:Z,canCreateVc:se,isClose:!1,jrOri:F,lsItemData:V,deleteYear:te,deleteMonth:ne,deleteVcId:ee,panes:N,Modal:i.default,uuidList:K,uuid:le,editLrAccountPermission:oe,beBusiness:z,oriState:W,currentItem:G,categoryType:q,isCurrentRunning:!0,reviewLrAccountPermission:ue,refreshList:x,pageActive:D,currentOri:F,onClose:function(){e.setState({relatedRunningShow:!1})}}),s.default.createElement("div",{className:"ylls-drawer-content"},s.default.createElement("ul",{className:"ylls-item-detail"},s.default.createElement("div",{className:"pcxls-account",style:{display:F.get("beCertificate")?"block":"none"}},"已审核"),s.default.createElement("li",{className:"ylls-category-name"},s.default.createElement("div",{className:"ylls-category-name-word"},F.get("categoryFullName"),s.default.createElement("div",{className:"ylls-bulebtn",style:{display:"LB_JZCB"===q||fe[W]?"":"none"}},"LB_JZCB"===q?{STATE_YYSR_ZJ:"直接结转",STATE_YYSR_XS:"销售成本结转",STATE_YYSR_TS:"退销转回成本"}[W]:fe[W]),s.default.createElement("div",{className:"ylls-bulebtn",style:{display:"LB_CHYE"===q&&X&&P?"":"none"}},{STATE_CHYE_CH:"按存货调整",STATE_CHYE_CK:"按仓库调整",STATE_CHYE_TYDJ:"按统一单价调整"}[X]),s.default.createElement("div",{className:"ylls-bulebtn",style:{display:"LB_CHZZ"===q&&W?"":"none"}},{STATE_CHZZ_ZZCX:"组装拆卸",STATE_CHZZ_ZZD:"组装单组装"}[W]),s.default.createElement("div",{className:"ylls-bulebtn",style:{display:"LB_XMJZ"===q&&W?"":"none"}},{STATE_XMJZ_XMJQ:"项目结清",STATE_XMJZ_JZRK:"结转入库",STATE_XMJZ_QRSRCB:"确认收入成本"}[W]),s.default.createElement("div",{className:"ylls-bulebtn",style:{display:"LB_GGFYFT"===q&&W?"":"none"}},{STATE_GGFYFT:"损益公共项目",STATE_FZSCCB:"辅助生产成本",STATE_ZZFY:"制造费用",STATE_JJFY:"间接费用",STATE_JXZY:"机械作业"}[W]),s.default.createElement("div",{className:"ylls-bulebtn",style:{display:"LB_SYJZ"===q&&W?"":"none"}},{STATE_SYJZ_JZSR:"结转收入",STATE_SYJZ_JZCBFY:"结转成本费用",STATE_SYJZ_JZBNLR:"结转本年利润"}[W]))),s.default.createElement("li",null,s.default.createElement("span",null,"流水号："),s.default.createElement("span",{style:{display:F.get("jrIndex")?"":"none"}},F.get("jrIndex"),"号")),s.default.createElement("li",null,s.default.createElement("span",null,"流水日期："),s.default.createElement("span",null,F.get("oriDate"))),s.default.createElement("li",{style:{lineHeight:"150%"}},s.default.createElement("span",null,"摘要："),s.default.createElement("span",null,Q))),s.default.createElement("div",{className:"ylls-detail-menu"},s.default.createElement("span",{onClick:function(){e.setState({page:"detail"})},className:"detail"===this.state.page?"ylls-detail-menu-active":""},"流水详情"),s.default.createElement("span",{onClick:function(){e.setState({page:"other"})},className:"other"===this.state.page?"ylls-detail-menu-active":""},"流水分录"),s.default.createElement("span",null,"制单人：",V.get("createUserName")+" "+V.get("createTime"))),"detail"===this.state.page?function(t,n){var r="LB_JZCB"===n?d.Jzcb:d[t];return r?s.default.createElement(r,{dispatch:a,lsItemData:V,jrOri:F,category:j,oriState:W,activeKey:I,onChangeActiveKey:e.onChangeActiveKey,isCurrentRunning:!0,showRelatedRunning:function(){return e.setState({relatedRunningShow:!0,showMask:!0})},enableWarehouse:P}):""}(de[W],q)||(re=(ae=ce[q])?c[ae]:c.Other,s.default.createElement(re,{dispatch:a,jrOri:F,category:j,oriState:W,activeKey:I,onChangeActiveKey:e.onChangeActiveKey,isCurrentRunning:!0,showRelatedRunning:function(){return e.setState({relatedRunningShow:!0,showMask:!0})},enableWarehouse:P})):s.default.createElement(p.default,{dispatch:a,lsItemData:V,categoryType:q,editLrAccountPermission:oe,searchRunningState:S,accountList:O,intelligentStatus:w,isCurrentRunning:!0,showRelatedRunning:function(){return e.setState({relatedRunningShow:!0,showMask:!0})},lrPermissionInfo:R,enclosureList:h,label:b,enCanUse:M,uploadKeyJson:v,checkMoreFj:U}),"detail"===this.state.page?s.default.createElement(g.default,{dispatch:a,enclosureList:F.get("enclosureList"),editLrAccountPermission:oe}):"",H?s.default.createElement(_.default,{processInfo:H}):null,s.default.createElement("div",{className:"ylls-end-content"},s.default.createElement("span",{style:{visibility:V.get("auditUserName")?"":"hidden"}},"审核人：",V.get("auditUserName")+" "+V.get("auditTime")),s.default.createElement("span",{style:{visibility:V.get("modifyUserName")?"":"hidden"}},"修改人：",V.get("modifyUserName")+" "+V.get("modifyTime")))))))}}]),n}())||a;t.default=E},1723:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Other=t.JkTzZb=t.Zszf=t.Yywsz=t.Cqzc=t.Sfzc=t.Xczc=t.Fyzc=t.Yysz=void 0;var a,r=g(n(1272)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1271);var o=g(n(1)),u=n(17),s=n(18),l=n(22),c=n(482),d=g(n(1724)),f=g(n(1725)),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(177));function g(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=r.default.Panel,S={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用",XZ_FINANCE:"财务费用",XZ_SCCB:"生产成本",XZ_FZSCCB:"辅助生产成本",XZ_ZZFY:"制造费用",XZ_HTCB:"合同成本",XZ_JJFY:"间接费用",XZ_JXZY:"机械作业"};function E(e){var t=e.usedProject,n=e.projectCardList;if(t&&n&&n.size){var a=n.getIn([0,"code"]);return 1===n.size?o.default.createElement("li",null,o.default.createElement("span",null,"项目："),o.default.createElement("span",null,((0,c.projectCodeTest)(a)?n.getIn([0,"code"])+"_":"")+n.getIn([0,"name"]))):o.default.createElement("div",null,o.default.createElement("li",null,o.default.createElement("span",null,"项目："),o.default.createElement("span",null,"多项目")),n.map(function(e){return o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"项目："),o.default.createElement("span",null,e.get("code")+"_"+e.get("name"))),o.default.createElement("li",{key:e.get("uuid")},o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,l.formatMoney)(e.get("amount"),2,""))))}))}return null}function A(e){var t=e.accounts;return t.size?o.default.createElement("li",null,o.default.createElement("span",null,"账户："),o.default.createElement("span",null,t.getIn([0,"accountName"]))):null}function I(e){var t=e.currentCardList;return t.size?o.default.createElement("li",null,o.default.createElement("span",null,"往来单位："),o.default.createElement("span",null,t.getIn([0,"code"])+"_"+t.getIn([0,"name"]))):null}t.Yysz=(0,u.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;p(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={activeKey:"1"},_(a,n)}return T(t,o.default.Component),i(t,[{key:"render",value:function(){var e,t=this,n=this.props,a=n.jrOri,i=n.category,u=n.oriState,s=n.activeKey,c=n.onChangeActiveKey,g=n.isCurrentRunning,p=n.showRelatedRunning,_=n.dispatch,T=n.enableWarehouse,S=a.get("currentCardList"),A=a.get("stockCardList"),y=a.get("accounts"),L=a.get("usedProject"),N=a.get("projectCardList"),O=a.get("amount"),h=a.get("currentAmount"),v=i.get("propertyCarryover"),R=(a.get("oriAbstract"),a.get("stockStrongList")),b=void 0;return e=a.get("strongList"),b=R,o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement(I,{currentCardList:S}),o.default.createElement(E,{usedProject:L,projectCardList:N}),("SX_HW"===v||"SX_HW_FW"===v)&&"STATE_YYSR_DJ"!==u&&"STATE_YYZC_DJ"!==u&&A&&A.size?1===A.size?o.default.createElement("div",null,o.default.createElement("li",null,o.default.createElement("span",null,"存货："),o.default.createElement("span",null,A.getIn([0,"code"])+"_"+A.getIn([0,"name"]))),A.getIn([0,"assistList"])&&A.getIn([0,"assistList"]).size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,A.getIn([0,"assistList"]).map(function(e){return e.get("propertyName")}).join(";"))):"",A.getIn([0,"batch"])?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,A.getIn([0,"batch"])+(A.getIn([0,"financialInfo","openShelfLife"])&&A.getIn([0,"expirationDate"])&&"undefined"!==A.getIn([0,"expirationDate"])?"("+A.getIn([0,"expirationDate"])+")":""))):"",T?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,A.getIn([0,"warehouseCardCode"])+"_"+A.getIn([0,"warehouseCardName"]))):"",A.getIn([0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,l.formatFour)(A.getIn([0,"quantity"]))," ",A.getIn([0,"unitName"]))):"",A.getIn([0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,l.formatFour)(A.getIn([0,"price"])))):""):o.default.createElement("div",null,o.default.createElement("li",{style:{marginBottom:"10px"}},o.default.createElement("span",null,"存货："),o.default.createElement("span",null,"多存货")),A.map(function(e){return o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"存货："),o.default.createElement("span",null,e.get("code")+"_"+e.get("name"))),T?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,e.get("warehouseCardCode")+"_"+e.get("warehouseCardName"))):"",e.get("assistList")&&e.get("assistList").size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,e.get("assistList").map(function(e){return e.get("propertyName")}).join(";"))):"",e.get("batch")?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,e.get("batch")+(e.getIn(["financialInfo","openShelfLife"])&&e.get("expirationDate")&&"undefined"!==e.get("expirationDate")?"("+e.get("expirationDate")+")":""))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,l.formatFour)(e.get("quantity"))," ",e.get("unitName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,l.formatFour)(e.get("price")))):"",o.default.createElement("li",{key:e.get("uuid")},o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,l.formatMoney)(e.get("amount"),2,""))))})):"",o.default.createElement("li",null,o.default.createElement("span",null,N&&N.size>1||A&&A.size>1?"总":"","金额："),o.default.createElement("span",null,(0,l.formatMoney)(O))),y.size&&(S.size&&Number(O)===Number(h)||!S.size||"STATE_YYSR_DJ"===u||"STATE_YYZC_DJ"===u)?y.size>1?o.default.createElement("div",null,o.default.createElement("li",{style:{marginBottom:"10px"}},o.default.createElement("span",null,"账户："),o.default.createElement("span",null,"多账户")),y.map(function(e){return o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"账户："),o.default.createElement("span",null,e.get("accountName"))),o.default.createElement("li",{key:e.get("uuid")},o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,l.formatMoney)(e.get("amount"),2,""))))})):o.default.createElement("li",null,o.default.createElement("span",null,"账户："),o.default.createElement("span",null,y.getIn([0,"accountName"]))):"","STATE_YYSR_DJ"!==u&&"STATE_YYZC_DJ"!==u?o.default.createElement(d.default,{itemData:a.get("billList")}):""),("STATE_YYSR_XS"===u||"STATE_YYSR_TS"===u)&&b&&b.size?o.default.createElement("div",{className:"ylls-item-child-list"},o.default.createElement(r.default,{bordered:!1,activeKey:this.state.activeKey},o.default.createElement(C,{showArrow:!1,header:o.default.createElement("div",{className:"ylls-item-child-title "+(this.state.activeKey?"":"shadow-area"),style:"1"===this.state.activeKey?{background:"#f6f6f6"}:{marginBottom:"15px"}},o.default.createElement("span",null,"结转情况"),"1"===this.state.activeKey?o.default.createElement("span",{onClick:function(){t.setState({activeKey:""})}},"收起"):o.default.createElement("span",{onClick:function(){t.setState({activeKey:"1"})}},"展开")),key:"1"},o.default.createElement("ul",null,b.map(function(e,t){return o.default.createElement("li",{className:"ylls-item-child-item",key:t},o.default.createElement("div",null,o.default.createElement("span",{onClick:function(){g&&a.get("jrIndex")&&_(m.getPreviewRelatedRunningBusinessFetch(e.get("oriUuid"),b,function(){return p()}))}},"流水号：",o.default.createElement("span",{className:g?"ylls-item-child-item-underline":""},e.get("jrIndex"),"号")),o.default.createElement("span",null,e.get("oriDate"))),o.default.createElement("div",null,o.default.createElement("span",null,e.get("stockCardCode"),"_",e.get("stockCardName")),o.default.createElement("span",null,(0,l.formatMoney)(e.get("handleAmount")))))}))))):"",o.default.createElement(f.default,{title:"核销情况",activeKey:s,onChangeActiveKey:c,itemList:e,isCurrentRunning:g,showRelatedRunning:p,dispatch:_}))}}]),t}())||a,t.Fyzc=function(e){function t(){return p(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.jrOri,n=e.category,a=e.oriState,r=e.activeKey,i=e.onChangeActiveKey,u=e.isCurrentRunning,s=e.showRelatedRunning,c=e.dispatch,m=t.get("currentCardList"),g=t.get("usedProject"),p=t.get("projectCardList"),_=t.get("accounts"),T=(t.get("oriAbstract"),t.get("amount")),C=t.get("propertyCost"),y=n.get("propertyCostList"),L=t.get("strongList");return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},"STATE_FY_DJ"!==a&&y.size>1?o.default.createElement("li",null,o.default.createElement("span",null,"费用性质："),o.default.createElement("span",null,S[C])):"",o.default.createElement(I,{currentCardList:m}),o.default.createElement(E,{usedProject:g,projectCardList:p}),o.default.createElement("li",null,o.default.createElement("span",null,p&&p.size>1?"总":"","金额："),o.default.createElement("span",null,(0,l.formatMoney)(T))),o.default.createElement(A,{accounts:_}),o.default.createElement(d.default,{itemData:t.get("billList")})),o.default.createElement(f.default,{title:"核销情况",activeKey:r,onChangeActiveKey:i,itemList:L,isCurrentRunning:u,showRelatedRunning:s,dispatch:c}))}}]),t}(),t.Xczc=function(e){function t(){return p(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.jrOri,n=e.category,a=e.oriState,r=e.activeKey,i=e.onChangeActiveKey,u=e.isCurrentRunning,c=e.showRelatedRunning,d=e.dispatch,m=t.get("usedProject"),g=t.get("projectCardList"),p=t.get("accounts"),_=t.get("propertyCost"),T=n.get("propertyPay"),C=(t.get("oriAbstract"),t.get("handleType"),n.get("acPayment")),I=t.get("amount"),y=t.get("payment")?t.get("payment"):(0,s.fromJS)({}),L=C.get("beAccrued"),N=y.get("personAccumulationAmount"),O=y.get("personSocialSecurityAmount"),h=y.get("incomeTaxAmount"),v=y.get("companySocialSecurityAmount"),R=y.get("companyAccumulationAmount"),b=(y.get("actualAmount"),t.get("pendingStrongList")),M=t.get("strongList"),U=n.get("propertyCostList"),J=void 0;J="STATE_XC_JT"===a?M:b;var D=0;b&&b.forEach(function(e){e.get("beSelect")&&(D+=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount")))});return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},("STATE_XC_JT"===a||("STATE_XC_JN"===a||"STATE_XC_FF"===a)&&(!L||L&&!b.size))&&U.size>1&&_?o.default.createElement("li",null,o.default.createElement("span",null,"费用性质："),o.default.createElement("span",null,S[_])):"",o.default.createElement(E,{usedProject:m,projectCardList:g}),"STATE_XC_JT"===a||"SX_QTXC"===T||"SX_FLF"===T?o.default.createElement("li",null,o.default.createElement("span",null,g&&g.size>1?"总":"","金额："),o.default.createElement("span",null,(0,l.formatMoney)(I,2,""))):"","STATE_XC_FF"===a&&"SX_GZXJ"===T?o.default.createElement("li",null,o.default.createElement("span",null,"工资薪金："),o.default.createElement("span",null,(0,l.formatMoney)(I,2,""))):"","SX_SHBX"===T&&"STATE_XC_DJ"===a?o.default.createElement("li",null,o.default.createElement("span",null,"代缴金额："),o.default.createElement("span",null,(0,l.formatMoney)(O,2,""))):"","SX_ZFGJJ"===T&&"STATE_XC_DJ"===a?o.default.createElement("li",null,o.default.createElement("span",null,"代缴金额："),o.default.createElement("span",null,(0,l.formatMoney)(N,2,""))):"","STATE_XC_JN"===a?o.default.createElement("li",null,o.default.createElement("span",null,D<0?"收款":"支付","金额："),o.default.createElement("span",null,(0,l.formatMoney)(I))):"","STATE_XC_JT"!==a?o.default.createElement(A,{accounts:p}):"",L&&"STATE_XC_DK"===a?o.default.createElement("div",null,o.default.createElement("li",{style:{marginBottom:"10px"}},o.default.createElement("span",null,"STATE_XC_DK"===a?"代扣款：":"代缴款："),o.default.createElement("span",null,function(){if("STATE_XC_DK"===a)return Number(O+N+h).toFixed(2)}())),v?o.default.createElement("div",{className:"multi-content"},o.default.createElement("li",{className:"long-width"},o.default.createElement("span",null,o.default.createElement("b",null,"•"),"代扣社会保险(公司部分)")),o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,l.formatMoney)(v)))):"",R?o.default.createElement("div",{className:"multi-content"},o.default.createElement("li",{className:"long-width"},o.default.createElement("span",null,o.default.createElement("b",null,"•"),"代扣公积金(公司部分)")),o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,l.formatMoney)(R)))):"",N?o.default.createElement("div",{className:"multi-content"},o.default.createElement("li",{className:"long-width"},o.default.createElement("span",null,o.default.createElement("b",null,"•"),"STATE_XC_DK"===a?"代扣":"代缴","公积金(个人部分)")),o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,l.formatMoney)(N)))):"",O?o.default.createElement("div",{className:"multi-content"},o.default.createElement("li",{className:"long-width"},o.default.createElement("span",null,o.default.createElement("b",null,"•"),"STATE_XC_DK"===a?"代扣":"代缴","社会保险(个人部分)")),o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,l.formatMoney)(O)))):"",h?o.default.createElement("div",{className:"multi-content"},o.default.createElement("li",{className:"long-width"},o.default.createElement("span",null,o.default.createElement("b",null,"•"),"STATE_XC_DK"===a?"代扣":"代缴","个人所得税")),o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,l.formatMoney)(h)))):""):""),o.default.createElement(f.default,{title:"核销情况",activeKey:r,onChangeActiveKey:i,itemList:J,isCurrentRunning:u,showRelatedRunning:c,dispatch:d}))}}]),t}(),t.Sfzc=function(e){function t(){return p(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.jrOri,n=e.category,a=e.oriState,r=e.activeKey,i=e.onChangeActiveKey,u=e.isCurrentRunning,s=e.showRelatedRunning,c=e.dispatch,d=t.get("offsetAmount"),m=t.get("amount"),g=t.get("usedProject"),p=t.get("projectCardList"),_=t.get("accounts"),T=(t.get("oriAbstract"),n.get("propertyTax")),C=t.get("pendingStrongList"),S=t.get("strongList"),I=void 0;return I="STATE_SF_JT"===a?S:C,o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement(E,{usedProject:g,projectCardList:p}),"SX_ZZS"===T&&"STATE_SF_JN"===a&&d>0?o.default.createElement("li",null,o.default.createElement("span",null,"预交抵扣："),o.default.createElement("span",null,(0,l.formatMoney)(d))):"",o.default.createElement("li",null,o.default.createElement("span",null,p&&p.size>1?"总":"","金额："),o.default.createElement("span",null,(0,l.formatMoney)(m,2,""))),o.default.createElement(A,{accounts:_})),o.default.createElement(f.default,{title:"核销情况",activeKey:r,onChangeActiveKey:i,itemList:I,isCurrentRunning:u,showRelatedRunning:s,dispatch:c}))}}]),t}(),t.Cqzc=function(e){function t(){return p(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.jrOri,n=(e.category,e.oriState),a=(e.activeKey,e.onChangeActiveKey,e.isCurrentRunning),i=e.showRelatedRunning,u=e.dispatch,s=t.get("handleType"),f=t.get("currentCardList"),g=t.get("usedProject"),p=t.get("projectCardList"),_=t.get("accounts"),T=(t.get("oriAbstract"),c.runningStateType[n]&&c.runningStateType[n],t.get("carryoverStrongList"));return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement("li",null,o.default.createElement("span",null,"处理类型："),o.default.createElement("span",null,{JR_HANDLE_GJ:"购进资产",JR_HANDLE_CZ:"处置资产"}[s])),o.default.createElement(I,{currentCardList:f}),o.default.createElement(E,{usedProject:g,projectCardList:p}),o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,l.formatMoney)(t.get("amount"),2,""))),o.default.createElement(A,{accounts:_}),o.default.createElement(d.default,{itemData:t.get("billList")})),"JR_HANDLE_CZ"===s&&T&&T.size?o.default.createElement("div",{className:"ylls-item-child-list"},o.default.createElement(r.default,{bordered:!1,activeKey:"1"},o.default.createElement(C,{showArrow:!1,header:o.default.createElement("div",{className:"ylls-item-child-title"},o.default.createElement("span",null,"处置损益")),key:"1"},o.default.createElement("ul",null,o.default.createElement("li",{className:"ylls-item-child-item",key:1},o.default.createElement("div",null,o.default.createElement("span",null,T.getIn([0,"categoryName"])),o.default.createElement("span",{className:a?"ylls-item-child-item-underline":"",onClick:function(){if(a){var e=T.getIn([0,"oriUuid"]);e&&u(m.getPreviewRelatedRunningBusinessFetch(e,T,function(){return i()}))}}},"流水号：",T.getIn([0,"jrIndex"]),"号"))))))):"")}}]),t}(),t.Yywsz=function(e){function t(){return p(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.jrOri,n=(e.category,e.oriState,e.activeKey),a=e.onChangeActiveKey,r=e.isCurrentRunning,i=e.showRelatedRunning,u=e.dispatch,s=t.get("currentCardList"),c=t.get("usedProject"),m=t.get("projectCardList"),g=t.get("accounts"),p=(t.get("oriAbstract"),t.get("strongList")),_=t.get("amount");return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement(I,{currentCardList:s}),o.default.createElement(E,{usedProject:c,projectCardList:m}),o.default.createElement("li",null,o.default.createElement("span",null,m&&m.size>1?"总":"","金额："),o.default.createElement("span",null,(0,l.formatMoney)(_,2,""))),o.default.createElement(A,{accounts:g}),o.default.createElement(d.default,{itemData:t.get("billList")})),o.default.createElement(f.default,{title:"核销情况",activeKey:n,onChangeActiveKey:a,itemList:p,isCurrentRunning:r,showRelatedRunning:i,dispatch:u}))}}]),t}(),t.Zszf=function(e){function t(){return p(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.jrOri,n=(e.category,e.oriState),a=e.activeKey,r=e.onChangeActiveKey,i=e.isCurrentRunning,u=e.showRelatedRunning,s=e.dispatch,c=t.get("usedProject"),d=t.get("projectCardList"),m=t.get("accounts"),g=(t.get("oriAbstract"),t.get("amount")),p=t.get("currentCardList"),_=t.get("pendingStrongList"),T=t.get("strongList"),C=void 0;return C="STATE_ZS_SQ"===n||"STATE_ZF_FC"===n?T:_,o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement(E,{usedProject:c,projectCardList:d}),o.default.createElement(I,{currentCardList:p}),o.default.createElement("li",null,o.default.createElement("span",null,d&&d.size>1?"总":"","金额："),o.default.createElement("span",null,(0,l.formatMoney)(g,2,""))),o.default.createElement(A,{accounts:m})),o.default.createElement(f.default,{title:"核销情况",activeKey:a,onChangeActiveKey:r,itemList:C,isCurrentRunning:i,showRelatedRunning:u,dispatch:s}))}}]),t}(),t.JkTzZb=function(e){function t(){return p(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.jrOri,n=(e.category,e.oriState),a=e.activeKey,r=e.onChangeActiveKey,i=e.isCurrentRunning,u=e.showRelatedRunning,d=e.dispatch,m=t.get("usedProject"),g=t.get("projectCardList"),p=t.get("accounts"),_=(t.get("oriAbstract"),t.get("amount")),T=t.get("currentCardList"),C=(c.runningStateType[n]&&c.runningStateType[n],t.get("handleType")),S=t.get("pendingStrongList"),y=t.get("strongList"),L=void 0;return L="JR_HANDLE_CHLX"===C||"JR_HANDLE_LRFP"===C||"JR_HANDLE_QDSY"===C?"STATE_ZB_LRFP"===n||"STATE_JK_JTLX"===n||"STATE_TZ_JTGL"===n||"STATE_TZ_JTLX"===n?y:S:(0,s.fromJS)([]),o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement("li",null,o.default.createElement("span",null,"处理类型："),o.default.createElement("span",null,{JR_HANDLE_QDJK:"取得借款",JR_HANDLE_CHLX:"偿还利息",JR_HANDLE_CHBJ:"偿还本金",JR_HANDLE_DWTZ:"对外投资",JR_HANDLE_QDSY:"取得收益",JR_HANDLE_SHTZ:"收回投资",JR_HANDLE_ZZ:"实收资本",JR_HANDLE_LRFP:"利润分配",JR_HANDLE_JZ:"减资",JR_HANDLE_ZBYJ:"资本溢价"}[C])),o.default.createElement(I,{currentCardList:T}),o.default.createElement(E,{usedProject:m,projectCardList:g}),o.default.createElement("li",null,o.default.createElement("span",null,g&&g.size>1?"总":"","金额："),o.default.createElement("span",null,(0,l.formatMoney)(_,2,""))),o.default.createElement(A,{accounts:p})),o.default.createElement(f.default,{title:"核销情况",activeKey:a,onChangeActiveKey:r,itemList:L,isCurrentRunning:i,showRelatedRunning:u,dispatch:d}))}}]),t}(),t.Other=function(e){function t(){return p(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,o.default.Component),i(t,[{key:"render",value:function(){return o.default.createElement("div",null,"没写")}}]),t}()},1724:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),u=(r=o)&&r.__esModule?r:{default:r},s=n(17),l=n(22);var c=(0,s.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),i(t,[{key:"render",value:function(){var e=this.props.itemData,t=e.getIn([0,"tax"]),n=e.getIn([0,"taxRate"]),a=(e.getIn([0,"billStates"]),e.getIn([0,"billType"])),r=a?"bill_other"===a?"其他票据":{bill_common:"发票(税额"+(0,l.formatMoney)(t,2,"")+"，税率"+(-1==n?"**":n)+"%)",bill_special:"增值税发票(税额"+(0,l.formatMoney)(t,2,"")+"，税率"+(-1==n?"**":n)+"%)"}[a]:"";return a?u.default.createElement("li",null,u.default.createElement("span",null,"票据："),u.default.createElement("span",null,r)):""}}]),t}())||a;t.default=c},1725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=l(n(14)),i=l(n(1272)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78),n(1271);var u=l(n(1)),s=n(17);n(22),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(177));function l(e){return e&&e.__esModule?e:{default:e}}i.default.Panel;var c=(0,s.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.activeKey;e.onChangeActiveKey,e.itemList,e.amountStr,e.amountStr2,e.isCurrentRunning,e.showRelatedRunning,e.dispatch,u.default.createElement("div",{className:n.length>0?"ylls-item-child-title":"ylls-item-child-title-no"},u.default.createElement("span",null,t),u.default.createElement("span",null,n.length>0?"收起":"展开",u.default.createElement(r.default,{type:n.length>0?"up":"down"})));return u.default.createElement("div",{className:"ylls-item-child-list"})}}]),t}())||a;t.default=c},1726:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Other=t.Jzjzsy=t.Xmjz=t.Chtrxm=t.Chzzcx=t.Jxsezc=t.Chyetz=t.Chdb=t.Jzsy=t.Xmft=t.Zcwjzzs=t.FpKr=t.Jzcb=t.Sfgl=t.Zjtx=t.Nbzz=void 0;var a=c(n(1272)),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1271);var i=n(1),o=c(i),u=(n(17),n(22)),s=n(482),l=(c(n(1724)),c(n(1725)));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a.default.Panel;var g={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用",XZ_FINANCE:"财务费用",XZ_SCCB:"生产成本",XZ_FZSCCB:"辅助生产成本",XZ_ZZFY:"制造费用",XZ_HTCB:"合同成本",XZ_JJFY:"间接费用",XZ_JXZY:"机械作业"};function p(e){var t=e.usedProject,n=e.projectCardList;if(t&&n&&n.size){var a=n.getIn([0,"code"]);return 1===n.size?o.default.createElement("li",null,o.default.createElement("span",null,"项目："),o.default.createElement("span",null,""+(0,s.projectCodeTest)(a)+n.getIn([0,"name"]))):o.default.createElement("div",null,o.default.createElement("li",null,o.default.createElement("span",null,"项目："),o.default.createElement("span",null,"多项目")),n.map(function(e){return o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"项目："),o.default.createElement("span",null,(0,s.projectCodeTest)(e.get("code"))?e.get("code")+"_"+e.get("name"):e.get("name"))),e.get("propertyCost")?o.default.createElement("li",null,o.default.createElement("span",null,"费用性质："),o.default.createElement("span",null,g[e.get("propertyCost")])):null,o.default.createElement("li",{key:e.get("uuid")},o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(e.get("amount"),2,""))))}))}return null}function _(e){var t=e.accounts;return t.size?t.size>1?o.default.createElement("div",null,o.default.createElement("li",{style:{marginBottom:"10px"}},o.default.createElement("span",null,"账户："),o.default.createElement("span",null,"多账户")),t.map(function(e){return o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"账户："),o.default.createElement("span",null,e.get("accountName"))),o.default.createElement("li",{key:e.get("uuid")},o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(e.get("amount"),2,""))))})):o.default.createElement("li",null,o.default.createElement("span",null,"账户："),o.default.createElement("span",null,t.getIn([0,"accountName"]))):null}t.Nbzz=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.jrOri,n=(e.category,e.oriState,e.activeKey,e.onChangeActiveKey,t.get("oriAbstract"),t.get("amount")),a=t.get("accounts"),r=a.find(function(e){return"ACCOUNT_STATUS_FROM"===e.get("accountStatus")}),i=a.find(function(e){return"ACCOUNT_STATUS_TO"===e.get("accountStatus")});return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(n,2,""))),o.default.createElement("li",null,o.default.createElement("span",null,"转出账户："),o.default.createElement("span",null,r&&r.get("accountName"))),o.default.createElement("li",null,o.default.createElement("span",null,"转入账户："),o.default.createElement("span",null,i&&i.get("accountName")))))}}]),t}(),t.Zjtx=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.lsItemData,n=(e.activeKey,e.onChangeActiveKey,t.get("projectCardList")),a=t.get("usedProject"),r=t.get("propertyCostList"),i=t.get("propertyCost");return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement("li",null,o.default.createElement("span",null,"处理类别："),o.default.createElement("span",null,t.get("name"))),r.size>1?o.default.createElement("li",null,o.default.createElement("span",null,"费用性质："),o.default.createElement("span",null,g[i])):"",p({usedProject:a,projectCardList:n}),o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(t.get("amount"))))))}}]),t}(),t.Sfgl=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.jrOri,n=(e.category,e.oriState),a=e.activeKey,r=e.onChangeActiveKey,i=e.isCurrentRunning,s=e.showRelatedRunning,c=e.dispatch,d=(t.get("oriAbstract"),t.get("currentCardList")),f=t.get("amount"),m=t.get("accounts"),g=(t.get("moedAmount"),t.get("jrFlowList").getIn([0,"debitAmount"])>0?"debit":"credit"),p=(t.get("relationCategoryName"),t.getIn(["pendingManageDto","pendingManageList"])||[]);p.reduce(function(e,t){return e+("debit"===t.get("direction")?t.get("amount"):-t.get("amount"))},0);return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},d.size?o.default.createElement("li",null,o.default.createElement("span",null,"往来单位："),o.default.createElement("span",null,(d.getIn([0,"code"])?d.getIn([0,"code"])+"_":"")+d.getIn([0,"name"]))):"",o.default.createElement("li",null,o.default.createElement("span",null,("STATE_SFGL_ML"===n?"debit"===g?"收款抹零":"付款抹零":"debit"===g?"收款金额":"付款金额")+"："),o.default.createElement("span",null,(0,u.formatMoney)(Math.abs(f)))),o.default.createElement(_,{accounts:m})),o.default.createElement(l.default,{title:"核销情况",activeKey:a,onChangeActiveKey:r,itemList:p,isCurrentRunning:i,showRelatedRunning:s,dispatch:c,amountStr:"handleAmount"}))}}]),t}(),t.Jzcb=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.lsItemData,n=e.activeKey,a=e.onChangeActiveKey,r=e.isCurrentRunning,s=e.dispatch,c=e.showRelatedRunning,d=e.enableWarehouse,f=e.jrOri,m=t.get("oriState"),_=t.get("stockCardList"),T=t.get("relationCategoryName"),C=t.get("usedProject"),S=t.get("projectCardList"),E=f.get("propertyCostList"),A=f.get("propertyCost"),I=0;return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},"STATE_YYSR_ZJ"===m?o.default.createElement("li",null,o.default.createElement("span",null,"处理类别："),o.default.createElement("span",null,T)):null,E&&E.size>1&&A?o.default.createElement("li",null,o.default.createElement("span",null,"费用性质："),o.default.createElement("span",null,g[A])):"",p({usedProject:C,projectCardList:S}),_&&_.size?1===_.size?o.default.createElement("div",null,o.default.createElement("li",null,o.default.createElement("span",null,"存货："),o.default.createElement("span",null,_.getIn([0,"code"])+"_"+_.getIn([0,"name"]))),_.getIn([0,"assistList"])&&_.getIn([0,"assistList"]).size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,_.getIn([0,"assistList"]).map(function(e){return e.get("propertyName")}).join(";"))):"",_.getIn([0,"batch"])?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,_.getIn([0,"batch"])+(_.getIn([0,"financialInfo","openShelfLife"])&&_.getIn([0,"expirationDate"])&&"undefined"!==_.getIn([0,"expirationDate"])?"("+_.getIn([0,"expirationDate"])+")":""))):"",d&&"STATE_YYSR_ZJ"===m?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,_.getIn([0,"warehouseCardCode"])+"_"+_.getIn([0,"warehouseCardName"]))):"",_.getIn([0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(_.getIn([0,"quantity"]))," ",_.getIn([0,"unitName"]))):"",_.getIn([0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(_.getIn([0,"price"])))):"",o.default.createElement("li",null,o.default.createElement("span",null,"成本金额："),o.default.createElement("span",null,(0,u.formatMoney)(_.getIn([0,"amount"]))))):o.default.createElement(i.Fragment,null,o.default.createElement("li",{style:{marginBottom:"10px"}},o.default.createElement("span",null,"存货："),o.default.createElement("span",null,"多存货")),o.default.createElement("div",null,_.map(function(e){return I=(0,u.numberCalculate)(I,e.get("amount")),o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"存货："),o.default.createElement("span",null,e.get("code")+"_"+e.get("name"))),e.get("assistList")&&e.get("assistList").size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,e.get("assistList").map(function(e){return e.get("propertyName")}).join(";"))):"",e.get("batch")?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,e.get("batch")+(e.getIn(["financialInfo","openShelfLife"])&&e.get("expirationDate")&&"undefined"!==e.get("expirationDate")?"("+e.get("expirationDate")+")":""))):"",d&&"STATE_YYSR_ZJ"===m?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,e.get("warehouseCardCode")+"_"+e.get("warehouseCardName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(e.get("quantity"))," ",e.get("unitName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(e.get("price")))):"",o.default.createElement("li",null,o.default.createElement("span",null,"成本金额："),o.default.createElement("span",null,(0,u.formatMoney)(e.get("amount")))))})),o.default.createElement("li",null,o.default.createElement("span",null,"总金额："),o.default.createElement("span",null,(0,u.formatMoney)(I,2,"")))):""),o.default.createElement(l.default,{title:"结转情况",lsItemData:t,activeKey:n,onChangeActiveKey:a,itemList:t.get("stockWeakList"),amountStr:"amount",isCurrentRunning:r,dispatch:s,showRelatedRunning:c}))}}]),t}(),t.FpKr=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.jrOri,n=e.category,a=e.oriState,r=e.activeKey,i=e.onChangeActiveKey,c=e.isCurrentRunning,d=e.dispatch,f=e.showRelatedRunning,m=s.categoryTypeAll[n.get("categoryType")];t.getIn([m,"stockCardList"]);return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"}),o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement("li",null,o.default.createElement("span",null,{STATE_KJFP_TS:"对冲",STATE_KJFP_XS:"开票",STATE_FPRZ_CG:"认证",STATE_FPRZ_TG:"对冲"}[a],"税额："),o.default.createElement("span",null,(0,u.formatMoney)(Math.abs(t.get("amount")))))),o.default.createElement(l.default,{title:"核销情况",activeKey:r,onChangeActiveKey:i,itemList:t.get("pendingStrongList"),isCurrentRunning:c,amountStr:"taxAmount",dispatch:d,showRelatedRunning:f}))}}]),t}(),t.Zcwjzzs=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=(e.oriState,e.activeKey),n=e.onChangeActiveKey,a=e.lsItemData,r=e.isCurrentRunning,i=e.dispatch,c=e.showRelatedRunning,d=s.categoryTypeAll[a.get("categoryType")],f=(a.getIn([d,"stockCardList"]),0),m=0;return a.get("pendingStrongList").forEach(function(e){"JR_STRONG_STAY_ZCXX"===e.get("pendingStrongType")?(1,f+=e.get("handleAmount")):(1,m+=e.get("handleAmount"))}),o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement("li",null,o.default.createElement("span",null,"处理税额月份："),o.default.createElement("span",null,a.get("oriDate").substr(0,7))),o.default.createElement("li",null,o.default.createElement("span",null,"销项税额："),o.default.createElement("span",null,(0,u.formatMoney)(f))),o.default.createElement("li",null,o.default.createElement("span",null,"进项税额："),o.default.createElement("span",null,(0,u.formatMoney)(m))),o.default.createElement("li",null,o.default.createElement("span",null,"转出税额："),o.default.createElement("span",null,(0,u.formatMoney)(f-m)))),o.default.createElement(l.default,{title:"核销情况",lsItemData:a,activeKey:t,onChangeActiveKey:n,itemList:a.get("pendingStrongList"),isCurrentRunning:r,amountStr:"handleAmount",dispatch:i,showRelatedRunning:c}))}}]),t}(),t.Xmft=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.lsItemData,n=e.activeKey,a=e.onChangeActiveKey,r=e.isCurrentRunning,i=e.dispatch,c=e.showRelatedRunning,d=(s.categoryTypeAll[t.get("categoryType")],t.get("projectCardList")),f=t.get("usedProject"),m=(t.get("jrFlowList"),t.get("amount"));return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},p({usedProject:f,projectCardList:d}),o.default.createElement("li",null,o.default.createElement("span",null,d&&d.size>1?"总":"","金额："),o.default.createElement("span",null,(0,u.formatMoney)(m)))),o.default.createElement(l.default,{title:"核销情况",lsItemData:t,activeKey:n,onChangeActiveKey:a,itemList:t.get("pendingProjectShareList"),isCurrentRunning:r,amountStr:"amount",dispatch:i,showRelatedRunning:c}))}}]),t}(),t.Jzsy=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.lsItemData,n=e.activeKey,a=e.onChangeActiveKey,r=e.isCurrentRunning,i=e.dispatch,c=e.showRelatedRunning,d=(s.categoryTypeAll[t.get("categoryType")],t.get("projectCardList")),f=t.get("amount"),m=t.get("usedProject");return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement("li",null,o.default.createElement("span",null,"处理类别："),o.default.createElement("span",null,t.get("name"))),p({usedProject:m,projectCardList:d}),o.default.createElement("li",null,o.default.createElement("span",null,(f>0?"收益":"损失")+"金额："),o.default.createElement("span",null,(0,u.formatMoney)(Math.abs(t.get("amount"))))),o.default.createElement("div",{className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"处置收入")),o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(t.getIn(["assets","cleaningAmount"])))),o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"累计折旧")),o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(t.getIn(["assets","depreciationAmount"])))),o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"资产原值")),o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(t.getIn(["assets","originalAssetsAmount"])))))),o.default.createElement(l.default,{title:"核销情况",lsItemData:t,activeKey:n,onChangeActiveKey:a,itemList:t.get("pendingStrongList"),isCurrentRunning:r,amountStr:"amount",dispatch:i,showRelatedRunning:c}))}}]),t}(),t.Chdb=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.jrOri,n=(e.oriState,e.lsItemData),a=t.get("amount"),r=t.get("warehouseCardList"),s=r.find(function(e){return"WAREHOUSE_STATUS_FROM"===e.get("warehouseStatus")}),l=r.find(function(e){return"WAREHOUSE_STATUS_TO"===e.get("warehouseStatus")}),c=n.get("stockCardList");return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement("li",null,o.default.createElement("span",null,"调出仓库："),o.default.createElement("span",null,s&&s.get("code")+" "+s.get("name"))),o.default.createElement("li",null,o.default.createElement("span",null,"调入仓库："),o.default.createElement("span",null,l&&l.get("code")+" "+l.get("name"))),c&&c.size?1===c.size?o.default.createElement("div",null,o.default.createElement("li",null,o.default.createElement("span",null,"存货："),o.default.createElement("span",null,c.getIn([0,"code"])+"_"+c.getIn([0,"name"]))),c.getIn([0,"isOpenedQuantity"])?o.default.createElement(i.Fragment,null,o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(c.getIn([0,"quantity"]))+" "+c.getIn([0,"unitName"]))),o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,""+(0,u.formatFour)(c.getIn([0,"price"]))))):null,o.default.createElement("li",null,o.default.createElement("span",null,"成本金额："),o.default.createElement("span",null,(0,u.formatMoney)(c.getIn([0,"amount"]))))):o.default.createElement("div",null,o.default.createElement("li",{style:{marginBottom:"10px"}}," ",o.default.createElement("span",null,"存货：")," ",o.default.createElement("span",null,"多存货")," "),c.map(function(e){return o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"存货："),o.default.createElement("span",null,e.get("code")+"_"+e.get("name"))),e.get("assistList")&&e.get("assistList").size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,e.get("assistList").map(function(e){return e.get("propertyName")}).join(";"))):"",e.get("batch")?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,e.get("batch")+(e.getIn(["financialInfo","openShelfLife"])&&e.get("expirationDate")&&"undefined"!==e.get("expirationDate")?"("+e.get("expirationDate")+")":""))):"",e.get("isOpenedQuantity")?o.default.createElement(i.Fragment,null,o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(e.get("quantity"))+" "+e.get("unitName"))),o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,""+(0,u.formatFour)(e.get("price"))))):null,o.default.createElement("li",null,o.default.createElement("span",null,"成本金额："),o.default.createElement("span",null,(0,u.formatMoney)(e.get("amount")))))})):"",c.size>1?o.default.createElement("li",null,o.default.createElement("span",null,"总金额："),o.default.createElement("span",null,(0,u.formatMoney)(a,2,""))):null))}}]),t}(),t.Chyetz=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.jrOri,n=(e.oriState,e.lsItemData),a=e.enableWarehouse,r=t.get("amount"),s=t.get("warehouseCardList"),l=t.get("stockCardList"),c=n.get("jrState");return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},l&&l.size?1===l.size?o.default.createElement("div",null,o.default.createElement("li",null,o.default.createElement("span",null,"存货："),o.default.createElement("span",null,l.getIn([0,"code"])+"_"+l.getIn([0,"name"]))),l.getIn([0,"assistList"])&&l.getIn([0,"assistList"]).size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,l.getIn([0,"assistList"]).map(function(e){return e.get("propertyName")}).join(";"))):"",l.getIn([0,"batch"])?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,l.getIn([0,"batch"])+(l.getIn([0,"financialInfo","openShelfLife"])&&l.getIn([0,"expirationDate"])&&"undefined"!==l.getIn([0,"expirationDate"])?"("+l.getIn([0,"expirationDate"])+")":""))):"",a?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,l.getIn([0,"warehouseCardCode"])+"_"+l.getIn([0,"warehouseCardName"]))):"",l.getIn([0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(l.getIn([0,"quantity"]))," ",l.getIn([0,"unitName"]))):"",l.getIn([0,"isOpenedQuantity"])&&"STATE_CHYE_CK"===c?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(l.getIn([0,"price"])?l.getIn([0,"price"]):0))):"",o.default.createElement("li",null,o.default.createElement("span",null,"成本金额："),o.default.createElement("span",null,(0,u.formatMoney)(l.getIn([0,"amount"]))))):o.default.createElement(i.Fragment,null,o.default.createElement("li",{style:{marginBottom:"10px"}},o.default.createElement("span",null,"存货："),o.default.createElement("span",null,"多存货")),o.default.createElement("div",null,l.map(function(e){return o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"存货："),o.default.createElement("span",null,e.get("code")+"_"+e.get("name"))),e.get("assistList")&&e.get("assistList").size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,e.get("assistList").map(function(e){return e.get("propertyName")}).join(";"))):"",e.get("batch")?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,e.get("batch")+(e.getIn(["financialInfo","openShelfLife"])&&e.get("expirationDate")&&"undefined"!==e.get("expirationDate")?"("+e.get("expirationDate")+")":""))):"",a?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,e.get("warehouseCardCode")+"_"+e.get("warehouseCardName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(e.get("quantity"))," ",e.get("unitName"))):"",e.get("isOpenedQuantity")&&"STATE_CHYE_CK"===c?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(e.get("price")?e.get("price"):0))):"",o.default.createElement("li",null,o.default.createElement("span",null,"成本金额："),o.default.createElement("span",null,(0,u.formatMoney)(e.get("amount")))))})),o.default.createElement("li",null,o.default.createElement("span",null,"总金额："),o.default.createElement("span",null,(0,u.formatMoney)(r,2,"")))):"",s&&s.size>1||l&&l.size>1?o.default.createElement("li",null,o.default.createElement("span",null,"总金额："),o.default.createElement("span",null,(0,u.formatMoney)(r,2,""))):null))}}]),t}(),t.Jxsezc=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.jrOri,n=e.category,a=e.lsItemData,r=e.enableWarehouse,s=a.get("stockCardList"),l=a.get("relationCategoryName"),c=a.get("usedProject"),d=a.get("projectCardList"),f=n.get("propertyCostList"),m=t.get("propertyCost"),_=t.get("amount");return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement("li",null,o.default.createElement("span",null,"处理类别："),o.default.createElement("span",null,l)),f.size>1&&m?o.default.createElement("li",null,o.default.createElement("span",null,"费用性质："),o.default.createElement("span",null,g[m])):"",p({usedProject:c,projectCardList:d}),s&&s.size?1===s.size?o.default.createElement("div",null,o.default.createElement("li",null,o.default.createElement("span",null,"存货："),o.default.createElement("span",null,s.getIn([0,"code"])+"_"+s.getIn([0,"name"]))),s.getIn([0,"assistList"])&&s.getIn([0,"assistList"]).size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,s.getIn([0,"assistList"]).map(function(e){return e.get("propertyName")}).join(";"))):"",s.getIn([0,"batch"])?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,s.getIn([0,"batch"])+(s.getIn([0,"financialInfo","openShelfLife"])&&s.getIn([0,"expirationDate"])&&"undefined"!==s.getIn([0,"expirationDate"])?"("+s.getIn([0,"expirationDate"])+")":""))):"",r?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,s.getIn([0,"warehouseCardCode"])+"_"+s.getIn([0,"warehouseCardName"]))):"",o.default.createElement("li",null,o.default.createElement("span",null,"税额："),o.default.createElement("span",null,(0,u.formatMoney)(s.getIn([0,"amount"]))))):o.default.createElement(i.Fragment,null,o.default.createElement("li",{style:{marginBottom:"10px"}},o.default.createElement("span",null,"存货："),o.default.createElement("span",null,"多存货")),o.default.createElement("div",null,s.map(function(e){return o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"存货："),o.default.createElement("span",null,e.get("code")+"_"+e.get("name"))),e.get("assistList")&&e.get("assistList").size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,e.get("assistList").map(function(e){return e.get("propertyName")}).join(";"))):"",e.get("batch")?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,e.get("batch")+(e.getIn(["financialInfo","openShelfLife"])&&e.get("expirationDate")&&"undefined"!==e.get("expirationDate")?"("+e.get("expirationDate")+")":""))):"",r?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,e.get("warehouseCardCode")+"_"+e.get("warehouseCardName"))):"",o.default.createElement("li",null,o.default.createElement("span",null,"税额："),o.default.createElement("span",null,(0,u.formatMoney)(e.get("amount")))))})),o.default.createElement("li",null,o.default.createElement("span",null,"总税额："),o.default.createElement("span",null,(0,u.formatMoney)(_,2,"")))):o.default.createElement("li",null,o.default.createElement("span",null,"税额："),o.default.createElement("span",null,(0,u.formatMoney)(_,2,"")))))}}]),t}(),t.Chzzcx=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.lsItemData,n=e.activeKey,a=e.onChangeActiveKey,r=e.isCurrentRunning,s=e.dispatch,c=e.showRelatedRunning,d=e.enableWarehouse,f=e.jrOri,m=t.get("oriState"),g=t.get("stockCardList"),p=t.get("stockCardOtherList"),_=(t.get("relationCategoryName"),t.get("usedProject"),t.get("projectCardList"),f.get("amount"));return o.default.createElement("div",null,"STATE_CHZZ_ZZCX"===m?o.default.createElement("ul",{className:"ylls-item-detail"},g&&g.size?1===g.size?o.default.createElement("div",null,o.default.createElement("li",null,o.default.createElement("span",null,"物料："),o.default.createElement("span",null,g.getIn([0,"code"])+"_"+g.getIn([0,"name"]))),g.getIn([0,"assistList"])&&g.getIn([0,"assistList"]).size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,g.getIn([0,"assistList"]).map(function(e){return e.get("propertyName")}).join(";"))):"",g.getIn([0,"batch"])?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,g.getIn([0,"batch"])+(g.getIn([0,"financialInfo","openShelfLife"])&&g.getIn([0,"expirationDate"])&&"undefined"!==g.getIn([0,"expirationDate"])?"("+g.getIn([0,"expirationDate"])+")":""))):"",d?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,g.getIn([0,"warehouseCardCode"])+"_"+g.getIn([0,"warehouseCardName"]))):"",g.getIn([0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(g.getIn([0,"quantity"]))," ",g.getIn([0,"unitName"]))):"",g.getIn([0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(g.getIn([0,"price"])))):"",o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(g.getIn([0,"amount"]))))):o.default.createElement(i.Fragment,null,o.default.createElement("li",{style:{marginBottom:"10px"}},o.default.createElement("span",null,"物料："),o.default.createElement("span",null,"多物料")),o.default.createElement("div",null,g.map(function(e){return o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"物料："),o.default.createElement("span",null,e.get("code")+"_"+e.get("name"))),e.get("assistList")&&e.get("assistList").size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,e.get("assistList").map(function(e){return e.get("propertyName")}).join(";"))):"",e.get("batch")?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,e.get("batch")+(e.getIn(["financialInfo","openShelfLife"])&&e.get("expirationDate")&&"undefined"!==e.get("expirationDate")?"("+e.get("expirationDate")+")":""))):"",d?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,e.get("warehouseCardCode")+"_"+e.get("warehouseCardName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(e.get("quantity"))," ",e.get("unitName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(e.get("price")))):"",o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(e.get("amount")))))})),o.default.createElement("li",null,o.default.createElement("span",null,"总金额："),o.default.createElement("span",null,(0,u.formatMoney)(_,2,"")))):"",p&&p.size?1===p.size?o.default.createElement("div",null,o.default.createElement("li",null,o.default.createElement("span",null,"成品："),o.default.createElement("span",null,p.getIn([0,"code"])+"_"+p.getIn([0,"name"]))),p.getIn([0,"assistList"])&&p.getIn([0,"assistList"]).size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,p.getIn([0,"assistList"]).map(function(e){return e.get("propertyName")}).join(";"))):"",p.getIn([0,"batch"])?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,p.getIn([0,"batch"]))):"",d?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,p.getIn([0,"warehouseCardCode"])+"_"+p.getIn([0,"warehouseCardName"]))):"",p.getIn([0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(p.getIn([0,"quantity"]))," ",p.getIn([0,"unitName"]))):"",p.getIn([0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(p.getIn([0,"price"])))):"",o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(p.getIn([0,"amount"]))))):o.default.createElement(i.Fragment,null,o.default.createElement("li",{style:{marginBottom:"10px"}},o.default.createElement("span",null,"成品："),o.default.createElement("span",null,"多成品")),o.default.createElement("div",null,p.map(function(e){return o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"成品："),o.default.createElement("span",null,e.get("code")+"_"+e.get("name"))),e.get("assistList")&&e.get("assistList").size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,e.get("assistList").map(function(e){return e.get("propertyName")}).join(";"))):"",e.get("batch")?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,e.get("batch")+(e.getIn(["financialInfo","openShelfLife"])&&e.get("expirationDate")&&"undefined"!==e.get("expirationDate")?"("+e.get("expirationDate")+")":""))):"",d?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,e.get("warehouseCardCode")+"_"+e.get("warehouseCardName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(e.get("quantity"))," ",e.get("unitName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(e.get("price")))):"",o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(e.get("amount")))))})),o.default.createElement("li",null,o.default.createElement("span",null,"总金额："),o.default.createElement("span",null,(0,u.formatMoney)(_,2,"")))):""):o.default.createElement("ul",{className:"ylls-item-detail"},g&&g.size?g.map(function(e,t){return o.default.createElement(i.Fragment,null,o.default.createElement("div",null,o.default.createElement("li",null,o.default.createElement("span",null,"成品："),o.default.createElement("span",null,e.get("code")+"_"+e.get("name"))),d?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,e.get("warehouseCardCode")+"_"+e.get("warehouseCardName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(e.get("quantity"))," ",e.get("unitName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(e.get("price")))):"",o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(e.get("amount"))))),e.get("childCardList")&&1===e.get("childCardList").size?o.default.createElement("div",null,o.default.createElement("li",null,o.default.createElement("span",null,"物料："),o.default.createElement("span",null,e.getIn(["childCardList",0,"code"])+"_"+e.getIn(["childCardList",0,"name"]))),d?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,e.getIn(["childCardList",0,"warehouseCardCode"])+"_"+e.getIn(["childCardList",0,"warehouseCardName"]))):"",e.getIn(["childCardList",0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(e.getIn(["childCardList",0,"quantity"]))," ",e.getIn(["childCardList",0,"unitName"]))):"",e.getIn(["childCardList",0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(e.getIn(["childCardList",0,"price"])))):"",o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(e.getIn(["childCardList",0,"amount"]))))):o.default.createElement(i.Fragment,null,o.default.createElement("li",{style:{marginBottom:"10px"}},o.default.createElement("span",null,"物料："),o.default.createElement("span",null,"多物料")),o.default.createElement("div",null,e.get("childCardList").map(function(e){return o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"物料："),o.default.createElement("span",null,e.get("code")+"_"+e.get("name"))),d?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,e.get("warehouseCardCode")+"_"+e.get("warehouseCardName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(e.get("quantity"))," ",e.get("unitName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(e.get("price")))):"",o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(e.get("amount")))))}))))}):"",o.default.createElement("li",null,o.default.createElement("span",null,"总金额："),o.default.createElement("span",null,(0,u.formatMoney)(_,2,"")))),o.default.createElement(l.default,{title:"结转情况",lsItemData:t,activeKey:n,onChangeActiveKey:a,itemList:t.get("stockWeakList"),amountStr:"amount",isCurrentRunning:r,dispatch:s,showRelatedRunning:c}))}}]),t}(),t.Chtrxm=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.lsItemData,n=e.activeKey,a=e.onChangeActiveKey,r=e.isCurrentRunning,s=e.dispatch,c=e.showRelatedRunning,d=e.enableWarehouse,f=e.jrOri,m=(t.get("oriState"),t.get("stockCardList")),g=(t.get("stockCardOtherList"),t.get("relationCategoryName"),t.get("usedProject")),_=t.get("projectCardList"),T=f.get("amount");return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},p({usedProject:g,projectCardList:_}),m&&m.size?1===m.size?o.default.createElement("div",null,o.default.createElement("li",null,o.default.createElement("span",null,"存货："),o.default.createElement("span",null,m.getIn([0,"code"])+"_"+m.getIn([0,"name"]))),m.getIn([0,"assistList"])&&m.getIn([0,"assistList"]).size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,m.getIn([0,"assistList"]).map(function(e){return e.get("propertyName")}).join(";"))):"",m.getIn([0,"batch"])?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,m.getIn([0,"batch"])+(m.getIn([0,"financialInfo","openShelfLife"])&&m.getIn([0,"expirationDate"])&&"undefined"!==m.getIn([0,"expirationDate"])?"("+m.getIn([0,"expirationDate"])+")":""))):"",d?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,m.getIn([0,"warehouseCardCode"])+"_"+m.getIn([0,"warehouseCardName"]))):"",m.getIn([0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(m.getIn([0,"quantity"]))," ",m.getIn([0,"unitName"]))):"",m.getIn([0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(m.getIn([0,"price"])))):"",o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(m.getIn([0,"amount"]))))):o.default.createElement(i.Fragment,null,o.default.createElement("li",{style:{marginBottom:"10px"}},o.default.createElement("span",null,"存货："),o.default.createElement("span",null,"多存货")),o.default.createElement("div",null,m.map(function(e){return o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"存货："),o.default.createElement("span",null,e.get("code")+"_"+e.get("name"))),e.get("assistList")&&e.get("assistList").size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,e.get("assistList").map(function(e){return e.get("propertyName")}).join(";"))):"",e.get("batch")?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,e.get("batch")+(e.getIn(["financialInfo","openShelfLife"])&&e.get("expirationDate")&&"undefined"!==e.get("expirationDate")?"("+e.get("expirationDate")+")":""))):"",d?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,e.get("warehouseCardCode")+"_"+e.get("warehouseCardName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(e.get("quantity"))," ",e.get("unitName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(e.get("price")))):"",o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(e.get("amount")))))})),o.default.createElement("li",null,o.default.createElement("span",null,"总金额："),o.default.createElement("span",null,(0,u.formatMoney)(T,2,"")))):""),o.default.createElement(l.default,{title:"结转情况",lsItemData:t,activeKey:n,onChangeActiveKey:a,itemList:t.get("stockWeakList"),amountStr:"amount",isCurrentRunning:r,dispatch:s,showRelatedRunning:c}))}}]),t}(),t.Xmjz=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.lsItemData,n=e.activeKey,a=e.onChangeActiveKey,r=e.isCurrentRunning,s=e.dispatch,c=e.showRelatedRunning,d=e.enableWarehouse,f=e.jrOri,m=t.get("oriState"),g=t.get("stockCardList"),_=(t.get("stockCardOtherList"),t.get("relationCategoryName"),t.get("usedProject")),T=t.get("projectCardList"),C=f.get("amount"),S=f.get("currentAmount");return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},p({usedProject:_,projectCardList:T}),g&&g.size?1===g.size?o.default.createElement("div",null,o.default.createElement("li",null,o.default.createElement("span",null,"存货："),o.default.createElement("span",null,g.getIn([0,"code"])+"_"+g.getIn([0,"name"]))),g.getIn([0,"assistList"])&&g.getIn([0,"assistList"]).size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,g.getIn([0,"assistList"]).map(function(e){return e.get("propertyName")}).join(";"))):"",g.getIn([0,"batch"])?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,g.getIn([0,"batch"])+(g.getIn([0,"financialInfo","openShelfLife"])&&g.getIn([0,"expirationDate"])&&"undefined"!==g.getIn([0,"expirationDate"])?"("+g.getIn([0,"expirationDate"])+")":""))):"",d?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,g.getIn([0,"warehouseCardCode"])+"_"+g.getIn([0,"warehouseCardName"]))):"",g.getIn([0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(g.getIn([0,"quantity"]))," ",g.getIn([0,"unitName"]))):"",g.getIn([0,"isOpenedQuantity"])?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(g.getIn([0,"price"])))):"",o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(g.getIn([0,"amount"]))))):o.default.createElement(i.Fragment,null,o.default.createElement("li",{style:{marginBottom:"10px"}},o.default.createElement("span",null,"存货："),o.default.createElement("span",null,"多存货")),o.default.createElement("div",null,g.map(function(e){return o.default.createElement("div",{key:e.get("uuid"),className:"multi-content"},o.default.createElement("li",null,o.default.createElement("span",null,o.default.createElement("b",null,"•"),"存货："),o.default.createElement("span",null,e.get("code")+"_"+e.get("name"))),e.get("assistList")&&e.get("assistList").size?o.default.createElement("li",null,o.default.createElement("span",null,"属性："),o.default.createElement("span",null,e.get("assistList").map(function(e){return e.get("propertyName")}).join(";"))):"",e.get("batch")?o.default.createElement("li",null,o.default.createElement("span",null,"批次："),o.default.createElement("span",null,e.get("batch")+(e.getIn(["financialInfo","openShelfLife"])&&e.get("expirationDate")&&"undefined"!==e.get("expirationDate")?"("+e.get("expirationDate")+")":""))):"",d?o.default.createElement("li",null,o.default.createElement("span",null,"仓库："),o.default.createElement("span",null,e.get("warehouseCardCode")+"_"+e.get("warehouseCardName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"数量："),o.default.createElement("span",null,(0,u.formatFour)(e.get("quantity"))," ",e.get("unitName"))):"",e.get("isOpenedQuantity")?o.default.createElement("li",null,o.default.createElement("span",null,"单价："),o.default.createElement("span",null,(0,u.formatFour)(e.get("price")))):"",o.default.createElement("li",null,o.default.createElement("span",null,"金额："),o.default.createElement("span",null,(0,u.formatMoney)(e.get("amount")))))})),o.default.createElement("li",null,o.default.createElement("span",null,"总金额："),o.default.createElement("span",null,(0,u.formatMoney)(C,2,"")))):"","STATE_XMJZ_QRSRCB"===m?o.default.createElement("li",null,o.default.createElement("span",null," 收入金额： "),o.default.createElement("span",null,(0,u.formatMoney)(Math.abs(C)))):null,"STATE_XMJZ_QRSRCB"===m?o.default.createElement("li",null,o.default.createElement("span",null," 成本金额： "),o.default.createElement("span",null,(0,u.formatMoney)(Math.abs(S)))):null),o.default.createElement(l.default,{title:"结转情况",lsItemData:t,activeKey:n,onChangeActiveKey:a,itemList:t.get("stockWeakList"),amountStr:"amount",isCurrentRunning:r,dispatch:s,showRelatedRunning:c}))}}]),t}(),t.Jzjzsy=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props.jrOri,t=e.get("amount"),n={STATE_SYJZ_JZSR:"收入",STATE_SYJZ_JZCBFY:"成本费用",STATE_SYJZ_JZBNLR:"本年利润","":"金额"}[e.get("oriState")];return o.default.createElement("div",null,o.default.createElement("ul",{className:"ylls-item-detail"},o.default.createElement("li",null,o.default.createElement("span",null,n,"："),o.default.createElement("span",null,(0,u.formatMoney)(t,2,"")))))}}]),t}(),t.Other=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,o.default.Component),r(t,[{key:"render",value:function(){return o.default.createElement("div",null,"没写")}}]),t}()},1727:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=C(n(61)),i=C(n(32)),o=C(n(14)),u=C(n(45)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(79),n(51),n(78),n(55);var l=C(n(1)),c=n(17),d=n(18),f=(n(127),n(482),n(22),T(n(27)),C(n(6)),C(n(1604)),T(n(1304))),m=T(n(177)),g=(T(n(172)),T(n(103))),p=T(n(43)),_=T(n(1314));function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}u.default.Option;var S=(0,c.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),s(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=(e.fromPage,e.canCreateVc,e.currentItem),a=e.isClose,u=(e.jrOri,e.deleteYear),s=e.deleteMonth,c=e.deleteVcId,T=e.issuedate,C=e.inputValue,S=(e.showDrawer,e.panes,e.lsItemData),E=e.uuid,A=e.editLrAccountPermission,I=(e.beBusiness,e.oriState),y=e.isCurrentRunning,L=(e.categoryType,e.showRelatedRunning),N=e.reviewLrAccountPermission,O=e.refreshList,h=e.onClose,v=e.currentOri,R=e.pageActive,b=this.props.uuidList||(0,d.fromJS)([]),M=S.get("modelNo")||"",U="X"===M.charAt(0)||"Y56#0-00-0"===M||"Y57#0-00-0"===M;return l.default.createElement("div",{className:"ylls-opration-wrap"},b&&b.size?l.default.createElement("div",{key:"x6",className:"ylls-title-btn"},l.default.createElement(i.default,{type:"ghost",className:"ylls-btn",disabled:b.some(function(e,t){return e.get("oriUuid")===E&&0===t}),onClick:function(){if(!b.some(function(e,t){return e.get("oriUuid")===E&&0===t})){var e=b.findIndex(function(e){return e.get("oriUuid")===E})-1,n=b.get(e);y?n&&t(m.getPreviewNextRunningBusinessFetch(n)):t(m.getPreviewRelatedRunningBusinessFetch(n.get("oriUuid"),b,function(){return L()}))}}},l.default.createElement(o.default,{type:"caret-left"}))):"",l.default.createElement("div",{key:"z6",className:"ylls-title-btn"},l.default.createElement(i.default,{type:"ghost",className:"handle-btn",disabled:!A||S.get("beCertificate")&&"STATE_SYJZ_JZSR"!==I&&"STATE_SYJZ_JZCBFY"!==I&&"STATE_SYJZ_JZBNLR"!==I,onClick:function(){(A&&!S.get("beCertificate")||("STATE_SYJZ_JZSR"===I||"STATE_SYJZ_JZCBFY"===I||"STATE_SYJZ_JZBNLR"===I)&&S.get("beCertificate"))&&(t(g.initEditRunning()),t(f.getSearchRunningItem(n,"modify",b)),t(m.closePreviewRunning(!1)))}},"修改")),l.default.createElement("div",{key:"z9",className:"ylls-title-btn"},l.default.createElement(r.default,{title:U?"有关联流水，不可复制":""},l.default.createElement(i.default,{type:"ghost",className:"handle-btn",disabled:!N||U,onClick:function(){t(g.initEditRunning()),t(f.getSearchRunningItem(n,"insert",(0,d.fromJS)([]),"","",!0)),t(m.closePreviewRunning(!1))}},l.default.createElement("span",null,"复制")))),l.default.createElement("div",{key:"z5",className:"ylls-title-btn"},l.default.createElement(i.default,{type:"ghost",className:"handle-btn",disabled:S.get("beCertificate")||!A,onClick:function(){if(A&&!a&&!S.get("beCertificate"))if(b.some(function(e,t){return e.get("oriUuid")===E&&t===b.size-1}))t(f.deleteSingleFlow(E,function(){"function"==typeof h?(O&&y&&O(),t(y?m.closePreviewRunning(!1):m.getPreviewNextRunningBusinessFetch(v,function(){"SearchRunning"===R&&t(f.afterModifyAccountAllList())})),h()):(O&&y&&O(),t(m.closePreviewRunning(!1)))}));else{var e=b.findIndex(function(e){return e.get("oriUuid")===E})+1;t(f.deleteSingleFlow(E,function(){var n=b.get(e);t(y?m.getPreviewNextRunningBusinessFetch(n,function(){O&&O()}):m.getPreviewRelatedRunningBusinessFetch(n.get("oriUuid"),b.splice(e-1,1),function(){L(),t(m.getPreviewNextRunningBusinessFetch(v)),"SearchRunning"===R&&t(f.afterModifyAccountAllList())}))}))}}},"删除")),l.default.createElement("div",{key:"z8",className:"ylls-title-btn"},l.default.createElement(i.default,{type:"ghost",className:"handle-btn",disabled:!N||a||"STATE_SYJZ_JZSR"===I||"STATE_SYJZ_JZCBFY"===I||"STATE_SYJZ_JZBNLR"===I,onClick:function(){S.get("beCertificate")?t(f.deleteVcItemFetch("runningPreview",u,s,c,T,C,!0,v,function(){O&&O(),"SearchRunning"===R&&!y&&t(f.afterModifyAccountAllList())})):t(f.runningInsertOrModifyVc("runningPreview",(0,d.fromJS)([{oriUuid:S.get("oriUuid"),jrNumber:S.get("jrIndex")}]),"insert",T,C,!0,v,function(){O&&O(),"SearchRunning"===R&&!y&&t(f.afterModifyAccountAllList())}))}},S.get("beCertificate")?"反审核":"审核")),l.default.createElement(i.default,{type:"ghost",disabled:!N,className:"title-right",onClick:function(){t(p.handlePrintModalVisible(!0)),sessionStorage.setItem("fromPos","searchRunningPreview"),t(_.setPrintString("fromPage","cxls")),t(_.setPrintString("oriUuid",[n.get("oriUuid")]))}},"打印"),b&&b.size?l.default.createElement("div",{key:"z9",className:"ylls-title-btn"},l.default.createElement(i.default,{type:"ghost",className:"ylls-btn",disabled:b.some(function(e,t){return e.get("oriUuid")===E&&t===b.size-1}),onClick:function(){if(!b.some(function(e,t){return e.get("oriUuid")===E&&t===b.size-1})){var e=b.findIndex(function(e){return e.get("oriUuid")===E})+1,n=b.get(e);t(y?m.getPreviewNextRunningBusinessFetch(n):m.getPreviewRelatedRunningBusinessFetch(n.get("oriUuid"),b,function(){return L()}))}}},l.default.createElement(o.default,{type:"caret-right"}))):"")}}]),t}())||a;t.default=S},1728:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=f(n(1272)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1271);var o=f(n(1)),u=n(17),s=n(18),l=n(22),c=f(n(2288));d(n(177)),d(n(1304));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}r.default.Panel;var m=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.lsItemData,n=e.dispatch,a=e.editLrAccountPermission,r=e.categoryType,i=e.searchRunningState,u=e.accountList,d=e.intelligentStatus,f=e.isCurrentRunning,m=e.showRelatedRunning,g=e.lrPermissionInfo,p=e.enclosureList,_=e.label,T=e.enCanUse,C=e.uploadKeyJson,S=e.checkMoreFj,E=t.get("jrFlowList"),A=E.get(E.size-1)||(0,s.fromJS)([]);return o.default.createElement("div",{className:"ylls-item-child-list"},o.default.createElement("div",{className:"ylls-journ-title ylls-journ-split ylls-juron-overwidth"},o.default.createElement("span",null,"流水类型"),o.default.createElement("span",null,"借方金额"),o.default.createElement("span",null,"贷方金额"),o.default.createElement("span",null,"状态")),o.default.createElement("div",{className:"ylls-journ-total"},E&&E.size?E.map(function(e,t){return o.default.createElement(c.default,{dispatch:n,jrFlowList:E,item:e,i:t,categoryType:r,editLrAccountPermission:a,searchRunningState:i,accountList:u,intelligentStatus:d,isCurrentRunning:f,showRelatedRunning:m,lrPermissionInfo:g,enclosureList:p,label:_,enCanUse:T,uploadKeyJson:C,checkMoreFj:S})}):"",o.default.createElement("div",{className:"ylls-journ-title ylls-journ-split ylls-juron-overwidth",style:{marginBottom:"15px"}},o.default.createElement("span",null,"合计"),o.default.createElement("span",null,o.default.createElement("b",null,null!==A.get("debitAmount")?(0,l.formatMoney)(A.get("debitAmount")):"")),o.default.createElement("span",null,o.default.createElement("b",null,null!==A.get("creditAmount")?(0,l.formatMoney)(A.get("creditAmount")):"")),o.default.createElement("span",null))))}}]),t}())||a;t.default=m},1729:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=_(n(14)),i=_(n(37)),o=_(n(45)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78),n(38),n(55);var s=_(n(1)),l=n(17),c=n(18),d=n(22),f=(p(n(27)),_(n(1250))),m=p(n(177)),g=n(43);function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}o.default.Option;var T=(0,l.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={preview:!1,page:0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.enclosureList,o=t.editLrAccountPermission,u=this.state,l=u.page,p=u.preview,_=a?a.filter(function(e){return"TRUE"===e.get("imageOrFile")||"application/pdf"===e.get("mimeType")}):(0,c.fromJS)([]);return s.default.createElement("div",{style:{overflow:"hidden"}},a&&a.size?s.default.createElement("div",{className:"fj-title"},"附件"):"",s.default.createElement("div",{className:"upload-content"},(a||[]).map(function(t,a){return s.default.createElement("div",{className:"upload",key:a},s.default.createElement("div",{className:"plus",onClick:function(){if("TRUE"===t.get("imageOrFile")||"application/pdf"==t.get("mimeType")){var n=0;_.forEach(function(e,a){t.get("enclosurePath")!==e.get("enclosurePath")||(n=a)}),e.setState({preview:!0,page:n})}else i.default.warn("仅图片及PDF格式支持预览")}},s.default.createElement("img",{src:(0,d.showImg)(t.get("imageOrFile"),t.get("fileName"))})),s.default.createElement("div",null,s.default.createElement("p",null,t.get("fileName")),s.default.createElement("span",null,s.default.createElement("span",{style:{display:o?"":"none",color:"#5e81d1",marginRight:"3px"},onClick:function(){return n(m.previewDownloadEnclosure(t.get("signedUrl"),t.get("fileName")))}},s.default.createElement(r.default,{type:"download"})),t.get("size")>=1024?(t.get("size")/1024).toFixed(2)+"M":t.get("size")+"kb","无标签"===t.get("label")?"":s.default.createElement("span",{className:"tag"},t.get("label")))))})),s.default.createElement(f.default,{page:l,dispatch:n,preview:p,downloadPermission:o,downloadEnclosure:function(e,t){return n((0,g.allDownloadEnclosure)(e,t))},previewImgArr:_,closePreviewModal:function(){return e.setState({preview:!1})},type:"ls"}))}}]),t}())||a;t.default=T},1730:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),u=(r=o)&&r.__esModule?r:{default:r},s=n(17),l=(n(18),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(30)));var c=(0,s.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=(e.dispatch,e.processInfo);return u.default.createElement("div",null,u.default.createElement("div",{className:"fj-title"},"审批"),u.default.createElement("div",{className:"ylls-process-info-wrap"},u.default.createElement("span",{className:"ylls-process-info-text",onClick:function(){l.openSlidePanel("https://aflow.dingtalk.com/dingtalk/pc/query/pchomepage.htm?corpid="+sessionStorage.getItem("corpId")+"#/approval?procInstId="+t.get("processInstanceId"),"查看审批")}},t.get("processTitle")),u.default.createElement("span",{className:"ylls-process-info-code"},"单号：",t.get("processBusinessCode"))))}}]),t}())||a;t.default=c},2281:function(e,t,n){},2287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=C(n(1366)),i=C(n(14)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1356),n(78);var u=C(n(1)),s=n(17),l=n(18),c=T(n(1723)),d=T(n(1726)),f=C(n(1727)),m=C(n(1728)),g=C(n(1729)),p=C(n(1730)),_=T(n(177));function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=(0,s.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=S(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={page:"detail"},S(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.relatedJrOri,a=t.relatedCategory,o=t.relatedProcessInfo,s=t.lsItemNameJson,T=t.calLsItemJson,C=t.relatedActiveKey,S=t.relatedRunningShow,E=t.onClose,A=t.onChangeRelatedActiveKey,I=t.dispatch,y=(t.runningPreviewState,t.editLrAccountPermission),L=t.oriStateName,N=t.searchRunningState,O=t.accountList,h=t.intelligentStatus,v=t.enableWarehouse,R=t.placement,b=t.jrOri,M=t.refreshList,U=t.lrPermissionInfo,J=t.pageActive,D=t.reviewLrAccountPermission,P=n.get("oriState"),w=a.get("categoryType"),G=n.get("beBusiness"),F=n.get("oriAbstract"),j=n.get("uuidList")||(0,l.fromJS)([]),H=[],k=void 0,B=void 0;n&&n.get("vcList")&&n.get("vcList").map(function(e,t){H.push({vcIndex:e.get("vcIndex")}),k=e.get("year"),B=e.get("month")});var Y,Z,x,K,W;return u.default.createElement(r.default,{className:"ylls-wrap",width:479,closable:!1,onClose:E,visible:S,placement:R},u.default.createElement("div",null,u.default.createElement("div",{className:"ylls-title"},u.default.createElement("span",{className:"ylls-title-text"},"查看流水"),u.default.createElement("span",{onClick:E,className:"ylls-title-icon"},u.default.createElement(i.default,{type:"close"}))),u.default.createElement(f.default,(x={dispatch:I,isClose:!1,lsItemData:n.update(function(e){return e.concat(a)}),editLrAccountPermission:y,beBusiness:G,oriState:P,currentItem:n.update(function(e){return e.concat(a)}),categoryType:w,fromPage:"ylls",uuidList:j,uuid:n.get("oriUuid"),currentOri:b,isCurrentRunning:!1,refreshList:M,onClose:E,deleteYear:k,deleteMonth:B,deleteVcId:H,pageActive:J,showRelatedRunning:function(){return e.setState({relatedRunningShow:!0,showMask:!0})},reviewLrAccountPermission:D},W=function(){I(_.getPreviewRelatedRunningBusinessFetch(n.get("oriUuid"),j))},(K="refreshList")in x?Object.defineProperty(x,K,{value:W,enumerable:!0,configurable:!0,writable:!0}):x[K]=W,x)),u.default.createElement("div",{className:"ylls-drawer-content"},u.default.createElement("div",{className:"pcxls-account",style:{display:n.get("beCertificate")?"block":"none"}},"已审核"),u.default.createElement("ul",{className:"ylls-item-detail"},u.default.createElement("li",{className:"ylls-category-name"},u.default.createElement("div",{className:"ylls-category-name-word"},n.get("categoryFullName"),u.default.createElement("div",{className:"ylls-bulebtn",style:{display:"LB_JZCB"===w||L[P]?"":"none"}},"LB_JZCB"===w?{STATE_YYSR_ZJ:"直接结转",STATE_YYSR_XS:"销售成本结转",STATE_YYSR_TS:"退销转回成本"}[P]:L[P]))),u.default.createElement("li",null,u.default.createElement("span",null,"流水号："),u.default.createElement("span",{style:{display:n.get("jrIndex")?"":"none"}},n.get("jrIndex"),"号")),u.default.createElement("li",null,u.default.createElement("span",null,"流水日期："),u.default.createElement("span",null,n.get("oriDate"))),u.default.createElement("li",{style:{lineHeight:"150%"}},u.default.createElement("span",null,"摘要："),u.default.createElement("span",null,F))),u.default.createElement("div",{className:"ylls-detail-menu"},u.default.createElement("span",{onClick:function(){e.setState({page:"detail"})},className:"detail"===this.state.page?"ylls-detail-menu-active":""},"流水详情"),u.default.createElement("span",{onClick:function(){e.setState({page:"other"})},className:"other"===this.state.page?"ylls-detail-menu-active":""},"流水分录"),u.default.createElement("span",null,"制单人：",n.get("createUserName")+" "+n.get("createTime"))),"detail"===this.state.page?(Y=T[P],((Z="LB_JZCB"===w?d.Jzcb:d[Y])?u.default.createElement(Z,{jrOri:n,category:a,lsItemData:n.update(function(e){return e.concat(a)}),oriState:P,activeKey:C,isCurrentRunning:!1,onChangeActiveKey:A,enableWarehouse:v}):"")||function(e){var t=e?c[e]:c.Other;return u.default.createElement(t,{jrOri:n,category:a,lsItemData:n.update(function(e){return e.concat(a)}),oriState:P,activeKey:C,isCurrentRunning:!1,onChangeActiveKey:A,enableWarehouse:v})}(s[w])):u.default.createElement(m.default,{dispatch:I,lsItemData:n.update(function(e){return e.concat(a)}),categoryType:w,editLrAccountPermission:y,searchRunningState:N,accountList:O,intelligentStatus:h,isCurrentRunning:!1,showRelatedRunning:function(){return e.setState({relatedRunningShow:!0,showMask:!0})},lrPermissionInfo:U}),"detail"===this.state.page?u.default.createElement(g.default,{dispatch:I,enclosureList:n.get("enclosureList"),editLrAccountPermission:y}):"",o?u.default.createElement(p.default,{processInfo:o}):null,u.default.createElement("div",{className:"ylls-end-content"},u.default.createElement("span",{style:{visibility:n.get("auditUserName")?"":"hidden"}},"审核人：",n.get("auditUserName")+" "+n.get("auditTime")),u.default.createElement("span",{style:{visibility:n.get("modifyUserName")?"":"hidden"}},"修改人：",n.get("modifyUserName")+" "+n.get("modifyTime"))))))}}]),t}())||a;t.default=E},2288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=R(n(37)),i=R(n(1234)),o=R(n(45)),u=R(n(100)),s=R(n(1230)),l=R(n(61)),c=R(n(14)),d=R(n(32)),f=R(n(1272)),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(38),n(1235),n(55),n(99),n(1231),n(79),n(78),n(51),n(1271);var g=R(n(1)),p=n(17),_=n(18),T=n(22),C=v(n(27)),S=R(n(6)),E=n(482),A=R(n(1237)),I=R(n(1570)),y=n(1722),L=v(n(177)),N=v(n(1304)),O=R(n(1571)),h=n(488);function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function R(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}f.default.Panel;var J=(0,p.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;b(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=M(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={show:!1},a.initModal=function(e){var t,n,r;a.setState((r=!1,(n=e)in(t={})?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)),a.props.dispatch(N.changeCxAccountCommonOutString("modalTemp",(0,_.fromJS)({oriDate:(0,T.formatDate)().substr(0,10)}))),a.props.dispatch(h.searchRunningAllActions.clearEnclosureList())},M(a,n)}return U(t,g.default.Component),m(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.jrFlowList,f=t.item,m=t.i,p=t.editLrAccountPermission,h=t.categoryType,v=t.searchRunningState,R=t.accountList,b=(t.intelligentStatus,t.isCurrentRunning),M=t.showRelatedRunning,U=t.lrPermissionInfo,J=t.enclosureList,P=t.label,w=t.closedBy,G=t.reviewedBy,F=t.enCanUse,j=t.checkMoreFj,H=t.uploadKeyJson,k=v.get("modalTemp"),B=v.get("flags"),Y=v.get("runningFlowTemp"),Z=Y.getIn(["currentCardList",0]),x=Y.get("oriDate"),K=Y.get("magenerType"),W=Y.get("propertyPay"),X=B.get("projectList"),z=E.categoryTypeAll[h],Q=(k.get("stockCardList"),k.getIn(["payment","companySocialSecurityAmount"])),V=k.getIn(["payment","companyAccumulationAmount"]),q=f.get("childList").get(f.get("childList").size-1)||(0,_.fromJS)([]),$=this.state,ee=($.deleteModal,$.manageModal),te=($.carryoverModal,$.show),ne=$.invioceModal,ae=$.defineModal,re=$.jzsyModal,ie=$.grantModal,oe=$.defrayModal,ue=$.backModal,se=$.takeBackModal,le=void 0;return le=1==f.get("writeOff")?"未核销":2==f.get("writeOff")?"部分核销":"全部核销",g.default.createElement("div",{className:"ylls-journ-item",key:f.get("oriUuid"),style:{display:m===a.size-1?"none":"",borderBottom:m===a.size-2?"none":""}},g.default.createElement("div",{className:"ylls-journ-item-title"},g.default.createElement("span",{className:"ylls-journ-categroy"},""+f.get("oriAbstract")+f.get("jrJvCardAbstract")),g.default.createElement("span",{className:"ylls-journ-btn"},b?function(t){var a=t.get("makeOut"),r=t.get("carryover"),i=t.get("auth"),o=t.get("receive"),u=t.get("pay"),s=t.get("shouldReturn"),l=t.get("grant"),c=t.get("defray"),f=t.get("takeBack"),m=t.get("back"),T=t.get("runningType"),C=[];switch(o){case"1":case"2":C.push(g.default.createElement("div",{key:"c3",className:"ylls-title-btn"},g.default.createElement(d.default,{type:"ghost",className:"handle-btn",disabled:!p,onClick:function(){n(N.getBusinessManagerModal(t,(0,_.fromJS)({jrJvUuid:t.get("jrJvUuid")}),function(){e.setState({manageModal:!0})},"debit","receive"))}},"收款")))}switch(u){case"1":case"2":C.push(g.default.createElement("div",{key:"d3",className:"ylls-title-btn"},g.default.createElement(d.default,{type:"ghost",className:"handle-btn",disabled:!p,onClick:function(){n(N.getBusinessManagerModal(t,(0,_.fromJS)({jrJvUuid:t.get("jrJvUuid")}),function(){e.setState({manageModal:!0})},"credit","pay"))}},"付款")))}switch(s){case"1":case"2":C.push(g.default.createElement("div",{key:"f3",className:"ylls-title-btn"},g.default.createElement(d.default,{type:"ghost",className:"handle-btn",disabled:!p,onClick:function(){n(N.getBusinessManagerModal(t,(0,_.fromJS)({jrJvUuid:t.get("jrJvUuid")}),function(){e.setState({manageModal:!0})},"credit","shouldReturn"))}},"退款")))}switch(l){case"1":case"2":C.push(g.default.createElement("div",{key:"f3",className:"ylls-title-btn"},g.default.createElement(d.default,{type:"ghost",className:"handle-btn",disabled:!p,onClick:function(){n(N.getBusinessGrantModal(t,(0,_.fromJS)({jrJvUuid:t.get("jrJvUuid")}),function(){e.setState({grantModal:!0})}))}},t.get("notHandleAmount")<0?"收款":"发放")))}switch(c){case"1":case"2":C.push(g.default.createElement("div",{key:"f3",className:"ylls-title-btn"},g.default.createElement(d.default,{type:"ghost",className:"handle-btn",disabled:!p,onClick:function(){n(N.getBusinessDefrayModal(t,(0,_.fromJS)({jrJvUuid:t.get("jrJvUuid")}),function(){e.setState({defrayModal:!0})}))}},t.get("notHandleAmount")<0?"收款":"缴纳")))}switch(f){case"1":case"2":C.push(g.default.createElement("div",{key:"f3",className:"ylls-title-btn"},g.default.createElement(d.default,{type:"ghost",className:"handle-btn",disabled:!p,onClick:function(){n(N.getBusinessTakeBackModal(t,(0,_.fromJS)({jrJvUuid:t.get("jrJvUuid")}),function(){e.setState({takeBackModal:!0})}))}},"收回")))}switch(m){case"1":case"2":C.push(g.default.createElement("div",{key:"f3",className:"ylls-title-btn"},g.default.createElement(d.default,{type:"ghost",className:"handle-btn",disabled:!p,onClick:function(){n(N.getBusinessBackModal(t,(0,_.fromJS)({jrJvUuid:t.get("jrJvUuid")}),function(){e.setState({backModal:!0})}))}},"退还")))}return 1!=a&&2!=a||C.push(g.default.createElement("div",{className:"ylls-title-btn"},g.default.createElement(d.default,{type:"ghost",className:"handle-btn",disabled:!p,onClick:function(){n(N.getBusinessInvioceModal(t,(0,_.fromJS)({jrJvUuid:t.get("jrJvUuid")}),function(){e.setState({invioceModal:!0})}))}},"开票"))),1==r&&"LX_ZZS_YKP"!==T&&"LX_ZZS_WKP"!==T&&"LX_ZZS_YRZ"!==T&&"LX_ZZS_WRZ"!==T?C.push(g.default.createElement("div",{className:"ylls-title-btn",style:{display:"LB_CQZC"===h?"":"none"}},g.default.createElement(d.default,{type:"ghost",className:"handle-btn",disabled:!p,onClick:function(){n("LB_CQZC"===h?N.getBusinessJzsyModal(t,(0,_.fromJS)({jrJvUuid:t.get("jrJvUuid")}),function(){e.setState({jzsyModal:!0})}):N.getBusinessCarryoverModal(t,(0,_.fromJS)({jrJvUuid:t.get("jrJvUuid")}),function(){e.setState({carryoverModal:!0})}))}},"结转"))):1==r&&"LB_CQZC"===h&&C.push(g.default.createElement("div",{className:"ylls-title-btn"},g.default.createElement(d.default,{type:"ghost",className:"handle-btn",disabled:!p,onClick:function(){n(N.getBusinessJzsyModal(t,(0,_.fromJS)({jrJvUuid:t.get("jrJvUuid")}),function(){e.setState({jzsyModal:!0})}))}},"结转"))),1!=i&&2!=i||C.push(g.default.createElement("div",{className:"ylls-title-btn"},g.default.createElement(d.default,{type:"ghost",className:"handle-btn",disabled:!p,onClick:function(){n(N.getBusinessDefineModal(t,(0,_.fromJS)({jrJvUuid:t.get("jrJvUuid")}),function(){e.setState({defineModal:!0})}))}},"认证"))),C}(f):"")),g.default.createElement("div",{className:"ylls-journ-split"},g.default.createElement("span",null,f.get("jrJvTypeName")),g.default.createElement("span",null,g.default.createElement("b",null,null!==f.get("debitAmount")?(0,T.formatMoney)(f.get("debitAmount")):"")),g.default.createElement("span",null,g.default.createElement("b",null,null!==f.get("creditAmount")?(0,T.formatMoney)(f.get("creditAmount")):"")),f.get("childList").size?g.default.createElement("span",{style:{color:"#5e81d1",cursor:"pointer",textAlign:"right",paddingRight:0},onClick:function(){e.setState({show:!te})}},"详情",te?g.default.createElement(c.default,{type:"up",style:{paddingLeft:"3px"}}):g.default.createElement(c.default,{type:"down",style:{paddingLeft:"3px"}})):g.default.createElement("span",null)),te&&f.get("childList").size?g.default.createElement("div",{className:"ylls-journ-detail",style:{marginBottom:m===a.size-2?"15px":""}},g.default.createElement("div",null,g.default.createElement("span",null,"核销情况：",le),g.default.createElement("span",null,"待核销余额")),f.get("childList").map(function(e,t){return g.default.createElement(l.default,{title:e.get("oriAbstract"),placement:"left"},g.default.createElement("div",{className:"ylls-journ-detail-item",key:e.get("oriUuid"),style:{display:t===f.get("childList").size-1?"none":""}},g.default.createElement("span",null,e.get("oriDate")),g.default.createElement("span",{style:b?{textDecoration:"underline",cursor:"pointer"}:{},onClick:function(){b&&e.get("jrIndex")&&n(L.getPreviewRelatedRunningBusinessFetch(e.get("oriUuid"),f.get("childList").filter(function(e,t){return t!==f.get("childList").size-1}),function(){return M()}))}},e.get("jrIndex")?e.get("jrIndex")+"号":"期初余额"),f.get("jrIndex")===e.get("jrIndex")&&f.get("oriDate")===e.get("oriDate")?g.default.createElement("span",null,g.default.createElement("b",null,null!==e.get("debitAmount")?(0,T.formatMoney)(e.get("debitAmount")):""," ")):g.default.createElement("span",null,null!==e.get("debitAmount")?(0,T.formatMoney)(e.get("debitAmount")):""," "),f.get("jrIndex")===e.get("jrIndex")&&f.get("oriDate")===e.get("oriDate")?g.default.createElement("span",null,g.default.createElement("b",null,null!==e.get("creditAmount")?(0,T.formatMoney)(e.get("creditAmount")):""," ")):g.default.createElement("span",null,null!==e.get("creditAmount")?(0,T.formatMoney)(e.get("creditAmount")):""," "),f.get("jrIndex")===e.get("jrIndex")&&f.get("oriDate")===e.get("oriDate")?g.default.createElement("span",null,g.default.createElement("b",null,(0,T.formatMoney)(e.get("balanceAmount")))):g.default.createElement("span",null,(0,T.formatMoney)(e.get("balanceAmount")))))}),g.default.createElement("div",{className:"ylls-journ-detail-item"},g.default.createElement("span",null),g.default.createElement("span",{style:{textDecoration:"none",cursor:"auto"}},"合计"),g.default.createElement("span",null,null!==q.get("debitAmount")?(0,T.formatMoney)(q.get("debitAmount")):""),g.default.createElement("span",null,null!==q.get("creditAmount")?(0,T.formatMoney)(q.get("creditAmount")):""),g.default.createElement("span",null,(0,T.formatMoney)(q.get("balanceAmount"))))):"",g.default.createElement(O.default,{id:"modal_9",visible:ee,onCancel:function(){e.initModal("manageModal")},className:"single-manager",title:("debit"===K?"收款":"付款")+"核销",okText:"保存",dispatch:n,lrPermissionInfo:U,enclosureList:J,label:P,enCanUse:F,uploadKeyJson:H,checkMoreFj:j,reviewedBy:G,closedBy:w,onOk:function(){n(N.insertRunningManagerModal(function(){e.setState({manageModal:!1}),n(L.getPreviewNextRunningBusinessFetch(f))},z))}},g.default.createElement("div",{className:"manager-content"},Z?g.default.createElement("div",null,g.default.createElement("label",null,"往来单位："),(Z&&Z.get("code"))+" "+(Z&&Z.get("name"))):"",g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"日期："),g.default.createElement(s.default,{allowClear:!1,disabledDate:function(e){return(0,S.default)(k.getIn(["pendingManageDto","pendingManageList",0,"oriDate"]))>e},value:k.get("oriDate")?(0,S.default)(k.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(N.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"摘要："),g.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:k.get("oriAbstract"),onChange:function(e){n(N.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,("debit"===K?"收款":"付款")+"金额："),g.default.createElement(A.default,{value:k.get("amount"),onChange:function(e){(0,T.numberTest)(e,function(e){n(N.changeCxAccountCommonOutString(["modalTemp","amount"],e))})}})),g.default.createElement(D,{modalTemp:k,dispatch:n,accountList:R}),"debit"===K?g.default.createElement(I.default,{dispatch:n,accountPoundage:y.accountPoundage,modalTemp:k,flags:B}):"")),g.default.createElement(O.default,{id:"modal_10",visible:ie,onCancel:function(){e.initModal("grantModal")},className:"single-manager",title:"debit"===K?"收款核销":"付款核销",okText:"保存",dispatch:n,lrPermissionInfo:U,enclosureList:J,label:P,enCanUse:F,uploadKeyJson:H,checkMoreFj:j,reviewedBy:G,closedBy:w,onOk:function(){n(N.insertCommonModal(function(){e.setState({grantModal:!1}),n(L.getPreviewNextRunningBusinessFetch(f))},z,"","insertJrPayment"))}},g.default.createElement("div",{className:"manager-content"},Z?g.default.createElement("div",null,g.default.createElement("label",null,"往来单位："),(Z&&Z.get("code"))+" "+(Z&&Z.get("name"))):"",g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"日期："),g.default.createElement(s.default,{allowClear:!1,disabledDate:function(e){return(0,S.default)(k.getIn(["pendingManageDto","pendingManageList",0,"oriDate"])||x)>e},value:k.get("oriDate")?(0,S.default)(k.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(N.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"摘要："),g.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:k.get("oriAbstract"),onChange:function(e){n(N.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"debit"===K?"收款金额：":"付款金额："),g.default.createElement(A.default,{value:k.get("amount"),onChange:function(e){(0,T.numberTest)(e,function(e){n(N.changeCxAccountCommonOutString(["modalTemp","amount"],e)),n(N.changeCxAccountCommonOutString(["modalTemp","payment","actualAmount"],e))})}})),g.default.createElement(D,{modalTemp:k,dispatch:n,accountList:R}),"debit"===K?g.default.createElement(I.default,{dispatch:n,accountPoundage:y.accountPoundage,modalTemp:k,flags:B}):"")),g.default.createElement(O.default,{id:"modal_11",visible:oe,onCancel:function(){e.initModal("defrayModal")},className:"single-manager",title:"debit"===K?"收款核销":"付款核销",okText:"保存",dispatch:n,lrPermissionInfo:U,enclosureList:J,label:P,enCanUse:F,uploadKeyJson:H,checkMoreFj:j,reviewedBy:G,closedBy:w,onOk:function(){n(N.insertCommonModal(function(){e.setState({defrayModal:!1}),n(L.getPreviewNextRunningBusinessFetch(f))},z,"","acTax"===z?"insertJrTax":"insertJrPayment"))}},g.default.createElement("div",{className:"manager-content"},Z?g.default.createElement("div",null,g.default.createElement("label",null,"往来单位："),(Z&&Z.get("code"))+" "+(Z&&Z.get("name"))):"",g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"日期："),g.default.createElement(s.default,{allowClear:!1,disabledDate:function(e){return(0,S.default)(k.getIn(["pendingManageDto","pendingManageList",0,"oriDate"])||x)>e},value:k.get("oriDate")?(0,S.default)(k.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(N.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"摘要："),g.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:k.get("oriAbstract"),onChange:function(e){n(N.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"debit"===K?"收款金额：":"付款金额："),g.default.createElement(A.default,{value:"acTax"===z?k.get("amount"):k.getIn(["payment","actualAmount"]),onChange:function(e){(0,T.numberTest)(e,function(e){n(N.changeCxAccountCommonOutString(["modalTemp","payment","actualAmount"],e)),n("acTax"===z?N.changeCxAccountCommonOutString(["modalTemp","amount"],e):"SX_ZFGJJ"===W?N.changeCxAccountCommonOutString(["modalTemp","payment","companyAccumulationAmount"],e):N.changeCxAccountCommonOutString(["modalTemp","payment","companySocialSecurityAmount"],e))})}})),g.default.createElement(D,{modalTemp:k,dispatch:n,accountList:R,amount:{SX_SHBX:Q,SX_ZFGJJ:V}[[W]]}),"debit"===K?g.default.createElement(I.default,{dispatch:n,accountPoundage:y.accountPoundage,modalTemp:k,flags:B}):"")),g.default.createElement(O.default,{id:"modal_12",visible:se,onCancel:function(){e.initModal("takeBackModal")},className:"single-manager",title:"收款核销",okText:"保存",dispatch:n,lrPermissionInfo:U,enclosureList:J,label:P,enCanUse:F,uploadKeyJson:H,checkMoreFj:j,reviewedBy:G,closedBy:w,onOk:function(){n(N.insertCommonModal(function(){e.setState({takeBackModal:!1}),n(L.getPreviewNextRunningBusinessFetch(f))},z,"","insertJrTemporaryReceipt"))}},g.default.createElement("div",{className:"manager-content"},Z?g.default.createElement("div",null,g.default.createElement("label",null,"往来单位："),(Z&&Z.get("code"))+" "+(Z&&Z.get("name"))):"",g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"日期："),g.default.createElement(s.default,{allowClear:!1,disabledDate:function(e){return(0,S.default)(k.getIn(["pendingManageDto","pendingManageList",0,"oriDate"])||x)>e},value:k.get("oriDate")?(0,S.default)(k.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(N.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"摘要："),g.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:k.get("oriAbstract"),onChange:function(e){n(N.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"收款金额："),g.default.createElement(A.default,{value:k.get("amount"),onChange:function(e){(0,T.numberTest)(e,function(e){n(N.changeCxAccountCommonOutString(["modalTemp","amount"],e))})}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"账户："),g.default.createElement(o.default,{value:k.getIn(["accounts",0,"accountName"]),onChange:function(e){var t=e.split(C.TREE_JOIN_STR)[0],a=e.split(C.TREE_JOIN_STR)[1];n(N.changeCxAccountCommonOutString(["modalTemp","accounts"],(0,_.fromJS)([{accountName:a,accountUuid:t}])))}},R&&R.getIn([0,"childList"])&&R.getIn([0,"childList"]).map(function(e,t){return g.default.createElement(Option,{key:t,value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("name")},e.get("name"))}))))),g.default.createElement(O.default,{id:"modal_13",visible:ue,onCancel:function(){e.initModal("backModal")},className:"single-manager",title:"付款核销",okText:"保存",dispatch:n,lrPermissionInfo:U,enclosureList:J,label:P,enCanUse:F,uploadKeyJson:H,checkMoreFj:j,reviewedBy:G,closedBy:w,onOk:function(){n(N.insertCommonModal(function(){e.setState({backModal:!1}),n(L.getPreviewNextRunningBusinessFetch(f))},z,"","insertJrTemporaryPay"))}},g.default.createElement("div",{className:"manager-content"},Z?g.default.createElement("div",null,g.default.createElement("label",null,"往来单位："),(Z&&Z.get("code"))+" "+(Z&&Z.get("name"))):"",g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"日期："),g.default.createElement(s.default,{allowClear:!1,disabledDate:function(e){return(0,S.default)(k.getIn(["pendingManageDto","pendingManageList",0,"oriDate"]))>e},value:k.get("oriDate")?(0,S.default)(k.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(N.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"摘要："),g.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:k.get("oriAbstract"),onChange:function(e){n(N.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"付款金额："),g.default.createElement(A.default,{value:k.get("amount"),onChange:function(e){(0,T.numberTest)(e,function(e){n(N.changeCxAccountCommonOutString(["modalTemp","amount"],e))})}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"账户："),g.default.createElement(o.default,{value:k.getIn(["accounts",0,"accountName"]),onChange:function(e){var t=e.split(C.TREE_JOIN_STR)[0],a=e.split(C.TREE_JOIN_STR)[1];n(N.changeCxAccountCommonOutString(["modalTemp","accounts"],(0,_.fromJS)([{accountName:a,accountUuid:t}])))}},R&&R.getIn([0,"childList"])&&R.getIn([0,"childList"]).map(function(e,t){return g.default.createElement(Option,{key:t,value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("name")},e.get("name"))}))))),g.default.createElement(O.default,{id:"modal_14",visible:re,onCancel:function(){e.initModal("jzsyModal")},className:"single-manager",title:"处置损益",okText:"保存",dispatch:n,lrPermissionInfo:U,enclosureList:J,label:P,enCanUse:F,uploadKeyJson:H,checkMoreFj:j,reviewedBy:G,closedBy:w,onOk:function(){n(N.insertlrAccountJzsyModal(function(){e.setState({jzsyModal:!1}),n(L.getPreviewNextRunningBusinessFetch(f))}))}},g.default.createElement("div",{className:"manager-content"},g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"日期："),g.default.createElement(s.default,{allowClear:!1,disabledDate:function(e){return(0,S.default)(k.getIn(["pendingStrongList",0,"oriDate"]))>e},value:k.get("oriDate")?(0,S.default)(k.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(N.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}}),Y.get("beProject")?g.default.createElement(i.default,{className:"use-unuse-style",style:{marginLeft:"10px"},checked:k.get("usedProject"),checkedChildren:"项目",onChange:function(){n(N.changeCxAccountCommonOutString(["modalTemp","usedProject"],!k.get("usedProject")))}}):""),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"摘要："),g.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:k.get("oriAbstract"),onChange:function(e){n(N.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,k.get("netProfitAmount")>0?"净收益金额：":"净损失金额："),k.get("netProfitAmount")>0?k.get("netProfitAmount"):k.get("lossAmount")),k.get("usedProject")?g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"项目："),g.default.createElement(o.default,{combobox:!0,showSearch:!0,value:(k.getIn(["projectCardList",0,"code"])||"")+" "+(k.getIn(["projectCardList",0,"name"])||""),onChange:function(e){var t=e.split(C.TREE_JOIN_STR),a=t[0],r=t[1],i=t[2];n(N.changeCxAccountCommonOutString(["modalTemp","projectCardList"],(0,_.fromJS)([{cardUuid:a,code:r,name:i}])))}},X.map(function(e,t){return g.default.createElement(Option,{key:t,value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("code")+C.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))}))):"",g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"资产原值："),g.default.createElement(A.default,{value:k.getIn(["assets","originalAssetsAmount"]),onChange:function(e){(0,T.numberTest)(e,function(e){n(N.changeCxAccountCommonOutString(["modalTemp","assets","originalAssetsAmount"],e)),n(N.calculateGainForJzsy())})}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"累计折旧摊销："),g.default.createElement(A.default,{value:k.getIn(["assets","depreciationAmount"]),onChange:function(e){(0,T.numberTest)(e,function(e){n(N.changeCxAccountCommonOutString(["modalTemp","assets","depreciationAmount"],e)),n(N.calculateGainForJzsy())})}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"处置金额："),(0,T.formatMoney)(k.getIn(["pendingStrongList",0,"amount"]))))),g.default.createElement(O.default,{id:"modal_15",visible:ne,onCancel:function(){e.initModal("invioceModal")},className:"single-manager",title:"开具发票",okText:"保存",dispatch:n,lrPermissionInfo:U,enclosureList:J,label:P,enCanUse:F,uploadKeyJson:H,checkMoreFj:j,reviewedBy:G,closedBy:w,onOk:function(){n(N.insertRunningInvioceModal(function(){e.setState({invioceModal:!1}),n(L.getPreviewNextRunningBusinessFetch(f))}))}},g.default.createElement("div",{className:"manager-content"},g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"日期："),g.default.createElement(s.default,{allowClear:!1,value:k.get("oriDate")?(0,S.default)(k.get("oriDate")):"",disabledDate:function(e){return(0,S.default)(k.getIn(["pendingStrongList",0,"oriDate"]))>e},onChange:function(e){var t=e.format("YYYY-MM-DD");n(N.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"摘要："),g.default.createElement(u.default,{onFocus:function(e){return e.target.select()},value:k.get("oriAbstract"),onChange:function(e){n(N.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"金额："),g.default.createElement(A.default,{value:k.get("amount")<0?-k.get("amount"):k.get("amount"),onChange:function(e){(0,T.numberTest)(e,function(e){e>k.getIn(["pendingStrongList",0,"taxAmount"])?(r.default.info("金额不能大于待开发票税额"),n(N.changeCxAccountCommonOutString(["modalTemp","amount"],""))):n(N.changeCxAccountCommonOutString(["modalTemp","amount"],e))})}})))),g.default.createElement(O.default,{id:"modal_16",visible:ae,onCancel:function(){e.initModal("defineModal")},className:"single-manager",title:"发票认证",okText:"保存",dispatch:n,lrPermissionInfo:U,enclosureList:J,label:P,enCanUse:F,uploadKeyJson:H,checkMoreFj:j,reviewedBy:G,closedBy:w,onOk:function(){n(N.insertRunningInvioceDefineModal(function(){e.setState({defineModal:!1}),n(L.getPreviewNextRunningBusinessFetch(f))}))}},g.default.createElement("div",{className:"manager-content"},g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"日期："),g.default.createElement(s.default,{disabledDate:function(e){return(0,S.default)(k.getIn(["pendingStrongList",0,"oriDate"]))>e},allowClear:!1,value:k.get("oriDate")?(0,S.default)(k.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(N.changeCxAccountCommonOutString(["modalTemp","oriDate"],t))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"摘要："),g.default.createElement(u.default,{value:k.get("oriAbstract"),onChange:function(e){n(N.changeCxAccountCommonOutString(["modalTemp","oriAbstract"],e.target.value))}})),g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"金额："),g.default.createElement(A.default,{value:k.get("amount")<0?-k.get("amount"):k.get("amount"),onChange:function(e){(0,T.numberTest)(e,function(e){e>k.getIn(["pendingStrongList",0,"taxAmount"])?(r.default.info("金额不能大于待认证税额"),n(N.changeCxAccountCommonOutString(["modalTemp","amount"],""))):n(N.changeCxAccountCommonOutString(["modalTemp","amount"],e))})}})))))}}]),t}())||a;t.default=J;var D=function(e){function t(){return b(this,t),M(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return U(t,g.default.Component),m(t,[{key:"render",value:function(){var e=this.props,t=e.modalTemp,n=e.dispatch,a=e.accountList,r=this.props.amount||t.get("amount");return g.default.createElement("div",{className:"manager-item"},g.default.createElement("label",null,"账户："),g.default.createElement(o.default,{value:t.getIn(["accounts",0,"accountName"]),onChange:function(e,t){var a=e.split(C.TREE_JOIN_STR)[0],i=e.split(C.TREE_JOIN_STR)[1],o=t.props.poundage,u=o.get("poundage"),s=o.get("poundageRate"),l=Math.abs(r||0)*s/1e3>u&&u>0?u:Math.abs(r||0)*s/1e3;n(N.changeCxAccountCommonOutString(["modalTemp","accounts",0,"poundageAmount"],l.toFixed(2))),n(N.changeCxAccountCommonOutString(["modalTemp","accounts"],(0,_.fromJS)([{accountName:i,accountUuid:a,poundage:o}])))}},a&&a.getIn([0,"childList"])&&a.getIn([0,"childList"]).map(function(e,t){return g.default.createElement(Option,{key:t,value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("name"),poundage:(0,_.fromJS)({needPoundage:e.get("needPoundage"),poundage:e.get("poundage"),poundageRate:e.get("poundageRate")})},e.get("name"))})))}}]),t}()}}]);