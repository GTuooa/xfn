(window.webpackJsonp=window.webpackJsonp||[]).push([[51,9,10,24],{1196:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var n=p(a(2564)),r=p(a(1398)),i=p(a(1399)),o=p(a(491)),l=p(a(1469)),u=p(a(1470)),c=p(a(1471)),s=p(a(1472)),d=p(a(1478)),f=p(a(1291)),m=p(a(488)),g=p(a(1305));function p(e){return e&&e.__esModule?e:{default:e}}var C={editRunningState:r.default,editCalculateState:i.default,editRunningAllState:o.default,inventoryCardState:l.default,relativeCardState:u.default,projectCardState:c.default,projectConfState:s.default,accountConfigState:d.default,runningPreviewState:f.default,searchRunningAllState:m.default,searchRunningState:g.default};t.reducer=C,t.view=n.default},1234:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return T});var n=a(1),r=a(5),i=a(1251),o=a.n(i),l=a(2),u=a.n(l),c=a(24),s=a(180),d=a(14),f=(a(21),a(1599)),m=a(20);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=y(this,E(t).call(this,e))).saveSwitch=function(e){a.rcSwitch=e},a.renderSwitch=function(e){var t,r=e.getPrefixCls,i=a.props,l=i.prefixCls,f=i.size,m=i.loading,g=i.className,h=void 0===g?"":g,y=i.disabled,E=r("switch",l),S=u()(h,(C(t={},"".concat(E,"-small"),"small"===f),C(t,"".concat(E,"-loading"),m),t)),T=m?n.createElement(d.default,{type:"loading",className:"".concat(E,"-loading-icon")}):null;return n.createElement(s.a,{insertExtraNode:!0},n.createElement(o.a,p({},Object(c.a)(a.props,["loading"]),{prefixCls:E,className:S,disabled:y||m,ref:a.saveSwitch,loadingIcon:T})))},Object(m.a)("checked"in e||!("value"in e),"Switch","`value` is not validate prop, do you mean `checked`?"),a}var a,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,n["Component"]),a=t,(r=[{key:"focus",value:function(){this.rcSwitch.focus()}},{key:"blur",value:function(){this.rcSwitch.blur()}},{key:"render",value:function(){return n.createElement(f.a,null,this.renderSwitch)}}])&&h(a.prototype,r),i&&h(a,i),t}();T.__ANT_SWITCH=!0,T.propTypes={prefixCls:r.string,size:r.oneOf(["small","default","large"]),className:r.string}},1235:function(e,t,a){"use strict";a.r(t);a(33),a(1253)},1237:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=s(a(100)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(99);var l=s(a(1)),u=a(17),c=(a(101),a(22));function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=(0,u.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={formate:!0},d(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"render",value:function(){var e=this,t=(this.props.showZero,this.state.formate?this.props.value&&Number(this.props.value)?(0,c.formatMoney)(this.props.value,this.props.PointDisabled?0:2):"":this.props.value);return l.default.createElement(r.default,i({},this.props,{value:t||"",onFocus:function(t){"function"==typeof e.props.onFocus&&e.props.onFocus(t),e.setState({formate:!1},function(){e.nameInput&&e.nameInput.select()})},onBlur:function(t){"function"==typeof e.props.onBlur&&e.props.onBlur(t),e.setState({formate:!0})},ref:function(t){return e.nameInput=t}}))}}]),t}())||n;t.default=f},1240:function(e,t,a){},1241:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleBatch=t.deleteBatch=t.getInitBatchList=t.getBatchList=t.emptyWarehouseListQuantity=t.getSerialList=t.modifyBatch=t.insertBatch=t.insertInventoryBatch=t.deleteAssist=t.modifyAssist=t.insertAssist=t.deleteAssistCategroy=t.modifyAssistCategroy=t.insertAssistCategroy=t.chooseAssitUniform=t.getAssistList=t.getInventorySomeCardList=t.chargeItemCheckboxCheck=t.chargeItemCheckboxCheckAll=t.getInventoryAllCardList=t.getInventorySettingOneCard=t.deleteMaterial=t.addMaterial=t.initInventoryCard=t.deleteunitPrice=t.addUnitPrice=t.getSomeWarehouseTree=t.getWarehouseTree=t.initUnitState=t.deleteUnit=t.addUnit=t.getUnitCardList=t.afterEditInventoryConf=t.deleteInventoryCardList=t.saveInventoryCard=t.changeInventoryCardCategoryType=t.changeInventoryCardCategoryStatus=t.changeInventoryInnerSrting=t.changeInventoryCardNature=t.changeInventoryViewsContent=t.changeInventoryCardViews=t.changeInventoryCardContent=t.beforeInventoryEditCard=t.beforeInventoryAddCard=void 0;var n=p(a(47)),r=p(a(37));a(46),a(38);var i=g(a(1318)),o=p(a(52)),l=a(22),u=a(18),c=g(a(30)),s=g(a(27)),d=g(a(484)),f=g(a(1229)),m=g(a(1307));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}t.beforeInventoryAddCard=function(e,t){return function(a,n){a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getIUManageCardLimitAndAc","GET","",function(n){(0,l.showMessage)(n)&&(0,o.default)("getInitStockCard","GET","",function(e){if((0,l.showMessage)(e)){var r=e.data.code;a({type:i.BEFORE_ADD_INVENTORY_CONF_CARD_INVENTORY,data:n.data,originTags:t,code:r})}}),e(),a({type:i.SWITCH_LOADING_MASK})})}},t.beforeInventoryEditCard=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(c,s){c({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCard","GET","uuid="+e.get("uuid"),function(e){if(c({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)){var d=s().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1;e.data.unitPriceList&&!e.data.unitPriceList.some(function(e){return 1===e.type})&&e.data.unitPriceList.push({type:1}),e.data.unitPriceList&&!e.data.unitPriceList.some(function(e){return 2===e.type})&&e.data.unitPriceList.push({type:2}),e.data.isOpenedQuantity&&c(T()),e.data.financialInfo&&e.data.financialInfo.openBatch&&c(b(e.data.uuid)),"OPEN"!==n&&"INVALID"!==n||(0,o.default)("getInventorySettingCardList","GET","listFrom=&isOpenQuantity=true&isUsed=true",function(e){(0,l.showMessage)(e)&&c(h("stockList",(0,u.fromJS)(e.data.resultList)))}),c({type:i.BEFORE_EDIT_INVENTORY_CONF_CARD,data:e.data,originTags:a,assemblyState:n,fromOpen:r,enableWarehouse:d}),t()}})}};var C=t.changeInventoryCardContent=function(e,t){return function(a){a({type:i.CHANGE_INVENTORY_CARD_CONTENT,name:e,value:t})}},h=t.changeInventoryCardViews=function(e,t){return function(a){a({type:i.CHANGE_INVENTORY_CONF_CARD_VIEWS,name:e,value:t})}},y=(t.changeInventoryViewsContent=function(e,t){return function(a){a({type:i.CHANGE_INVENTORY_CONF_VIEWS_CONTENT,name:e,value:t})}},t.changeInventoryCardNature=function(e,t){return function(a){a({type:i.CHANGE_INVENTORY_CONF_CARD_NATURE,name:e,value:t})}},t.changeInventoryInnerSrting=function(e,t){return function(a){a({type:i.CHANGE_INVENTORY_CONF_INNER_STRING,arr:e,value:t})}}),E=(t.changeInventoryCardCategoryStatus=function(e,t){return function(a){(0,o.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+e.get("uuid"),function(n){(0,l.showMessage)(n)&&a({type:i.CHANGE_INVENTORY_CONF_CARD_CATEGORY_STATUS,list:n.data.resultList,item:e,value:t})})}},t.changeInventoryCardCategoryType=function(e,t){return function(a){var n=t.split(s.TREE_JOIN_STR);a({type:i.CHANGE_INVENTORY_CONF_CARD_CATEGORY_TYPE,item:e,uuid:n[0],name:n[1]})}},t.saveInventoryCard=function(e,t,a,n,r){return function(s,d){var f=d().homeState,g=f.get("allPanes"),p=d().inventoryCardState.get("inventoryCardTemp").toJS(),C=f.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1,h=[],y=p.financialInfo||{};C&&(!function e(t){return t.forEach(function(t){if(t.isEnd){var a=void 0;a=y.openAssist||y.openBatch?t.childList.map(function(e){return e.warehouseName=t.warehouseName,e.warehouseUuid=t.warehouseUuid,e.warehouseCode=t.warehouseCode,e}):t,h=h.concat(a)}else e(t.childList)})}(p.openList),p.openList=h);var E=d().inventoryCardState.getIn(["views","insertOrModify"]),T="",_="";g.get("ConfigPanes").find(function(e){return"存货设置"===e.get("title")})&&(T=d().inventoryConfState.getIn(["views","activeTapKeyUuid"]),_=d().inventoryConfState.getIn(["views","selectTypeId"])),"INVALID"===p.assemblyState&&(p.assemblyState="OPEN"),p.assemblySheet&&p.assemblySheet.materialList&&p.assemblySheet.materialList.length&&(p.assemblySheet.materialList=p.assemblySheet.materialList.filter(function(e){return e.materialUuid}));var v=function(){if("insert"===E){(0,o.default)("addInventorySettingCard","POST",JSON.stringify({psiData:p,insertFrom:T,treeFrom:_,needAutoIncrementCode:"insert"!==t,action:{editRunning:"SAVE_JR-QUICK_MANAGER-SAVE_STOCK",payment:"SAVE_JR-QUICK_MANAGER-SAVE_STOCK",inventoryConfig:"MANAGER-STOCK_SETTING-CUD_CARD",searchApproval:"QUERY_PROCESS-QUICK_MANAGER-SAVE_STOCK",searchApprovalHideCategory:"QUERY_PROCESS-QUICK_MANAGER-SAVE_STOCK"}[e]}),function(n){if((0,l.showMessage)(n,"show")&&(s({type:i.SAVE_INVENTORY_CONF_CARD_INVENTORY,flag:t,autoIncrementCode:n.data.autoIncrementCode}),a&&a(),s(S("payment"===e,e)),"inventoryConfig"===e)){var r=d().inventoryConfState.getIn(["views","activeTapKey"]),o=d().inventoryConfState.getIn(["views","activeTapKeyUuid"]),c=(0,u.fromJS)({name:r,uuid:o});s(m.refreshInventoryList(c))}s({type:i.SWITCH_LOADING_MASK})})}else(0,o.default)("editInventorySettingCard","POST",JSON.stringify({psiData:p,modifyFrom:T,treeFrom:_}),function(t){if((0,l.showMessage)(t,"show")&&(s({type:i.SAVE_INVENTORY_CONF_CARD_INVENTORY}),a(),s(S()),"inventoryConfig"===e)){var n=d().inventoryConfState.getIn(["views","activeTapKey"]),r=d().inventoryConfState.getIn(["views","activeTapKeyUuid"]),o=(0,u.fromJS)({name:n,uuid:r});s(m.refreshInventoryList(o))}s({type:i.SWITCH_LOADING_MASK})})};s({type:i.SWITCH_LOADING_MASK}),(0,o.default)("adjustInventorySettingCardTitleSame","POST",JSON.stringify({psiData:{name:p.name,uuid:p.uuid}}),function(e){(0,l.showMessage)(e)?e.data.repeat?(n(),s({type:i.SWITCH_LOADING_MASK}),c.Confirm({message:"卡片名称与【编码："+e.data.card.code+"】卡片重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(s({type:i.SWITCH_LOADING_MASK}),v(),r()):r()},onFail:function(e){return console.log(e)}})):v():s({type:i.SWITCH_LOADING_MASK})})}},t.deleteInventoryCardList=function(){return function(e,t){var a=t().inventoryConfState.getIn(["views","cardSelectList"]);c.Confirm({message:"确定删除卡片？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(0,o.default)("deleteInventoryCheck","POST",JSON.stringify({deleteList:a}),function(t){(0,l.showMessage)(t)&&(t.data.inMaterialList&&t.data.inMaterialList.length?c.Confirm({message:t.data.inMaterialList.map(function(e){return"【"+e.code+"】【"+e.name+"】"}).join("、")+"属于其他存货的组装物料，删除后将导致组装单失效。确认删除吗？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&e(E(a))},onFail:function(e){return console.log(e)}}):e(E(a)))})},onFail:function(e){return console.log(e)}})}},function(e){return function(t,a){var n=a().inventoryConfState.getIn(["views","activeTapKeyUuid"]),u=a().inventoryConfState.getIn(["views","activeTreeKeyUuid"]);t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteInventorySettingCardList","POST",JSON.stringify({deleteList:e,deleteFrom:n,treeFrom:u}),function(e){(0,l.showMessage)(e)&&(t({type:i.DELETE_INVENTORY_CONF_CARD_LIST,list:e.data.resultList,treeList:e.data.typeList}),""===e.data.error?r.default.info("删除成功"):r.default.info(e.data.error),t(S())),t({type:i.SWITCH_LOADING_MASK})})}}),S=t.afterEditInventoryConf=function(e,t){return function(a,n){var r=n().homeState,i=r.get("allPanes");if(!0===r.getIn(["data","userInfo","sobInfo","newJr"]))i.get("SearchPanes").find(function(e){return"查询审批"===e.get("title")})?(a("searchApproval"===t?d.getApprovalStockCardList():d.getApprovalStockCardList([],"hidecategory")),i.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&setTimeout(function(){a(d.getStokcListFromConfig())},800)):i.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&e?a(d.getStokcListFromConfig()):i.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&a(d.getInventoryCardListForchangeConfig());else{var o=n().lrAccountState.get("cardTemp"),l={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[o.get("categoryType")],u=o.getIn([l,"stockRange"]),c=o.get("runningState");u&&u.size&&a(f.getFirstStockCardList(u,c))}}},T=t.getUnitCardList=function(){return function(e){(0,o.default)("getUnitList","GET","inventoryUuid=",function(t){(0,l.showMessage)(t)&&(e(h("standardList",(0,u.fromJS)(t.data.standardList))),e(h("customList",(0,u.fromJS)(t.data.customList))))})}},_=(t.addUnit=function(e,t){return function(a){var n=e.toJS();n.splice(t+1,0,{amount:"",uuid:""}),a(C(["unit","unitList"],(0,u.fromJS)(n)))}},t.deleteUnit=function(e,t){return function(a){var n=e.toJS();n.splice(t,1),a(C(["unit","unitList"],(0,u.fromJS)(n)))}},t.initUnitState=function(){return{type:i.INIT_UNIT_STATE}},t.getWarehouseTree=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("warehouseCardTree","POST",JSON.stringify({uuidList:[]}),function(a){t({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(a)&&(t(h("warehouseList",(0,u.fromJS)(a.data.cardList[0].childList))),e())})}},t.getSomeWarehouseTree=function(e,t){return function(a,n){var r="insert"===n().inventoryCardState.getIn(["views","insertOrModify"])?"":n().inventoryCardState.getIn(["inventoryCardTemp","uuid"]);if(!e.length)return a(C("openList",(0,u.fromJS)([]))),void t();a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getOpenWarehouseCardTree","POST",JSON.stringify({warehouseUuidList:e,inventoryUuid:r}),function(e){a({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(a(C("openList",(0,u.fromJS)(e.data.openList[0].childList?e.data.openList[0].childList:[]))),a(h("selectedKeys",(0,u.fromJS)([]))),t())})}},t.addUnitPrice=function(e,t,a){return function(n){var r=e.toJS();r.splice(t+1,0,{amount:"",uuid:"",type:a}),n(C("unitPriceList",(0,u.fromJS)(r)))}},t.deleteunitPrice=function(e,t){return function(a){var n=e.toJS();n.splice(t,1),a(C("unitPriceList",(0,u.fromJS)(n)))}},t.initInventoryCard=function(){return{type:i.INIT_ADD_INVENTORY_STATE}},t.addMaterial=function(e,t){return function(a){var n=e.toJS();n.splice(t+1,0,{amount:"",uuid:""}),a(y(["assemblySheet","materialList"],(0,u.fromJS)(n)))}},t.deleteMaterial=function(e,t){return function(a){var n=e.toJS();n.splice(t,1),a(y(["assemblySheet","materialList"],(0,u.fromJS)(n)))}},t.getInventorySettingOneCard=function(e,t){return function(a){a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCard","GET","uuid="+e,function(e){if(a({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)){var n=e.data.unit.unitList||[];n.unshift({uuid:e.data.unit.uuid,name:e.data.unit.name}),1===n.length&&(a(y(["assemblySheet","materialList",t,"unitUuid"],n[0].uuid)),a(y(["assemblySheet","materialList",t,"unitName"],n[0].name))),a(y(["assemblySheet","materialList",t,"unitList"],(0,u.fromJS)(n)))}})}},t.getInventoryAllCardList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],a=arguments[2];return function(n,r){n({type:i.SWITCH_LOADING_MASK});var c=r().homeState.getIn(["data","userInfo","sobInfo","sobId"]);r().editRunningState;a||(0,o.default)("getStockCardList","POST",JSON.stringify({sobId:c,categoryList:[],openQuantity:!0}),function(e){(0,l.showMessage)(e)&&n(h("MemberList",(0,u.fromJS)(e.data.typeList)))}),(0,o.default)("getStockCategoryList","POST",JSON.stringify({sobId:c,categoryList:e,property:0,openQuantity:!0}),function(e){(0,l.showMessage)(e)&&(n(h("thingsList",(0,u.fromJS)(e.data.result))),n(h(t,!0))),n({type:i.SWITCH_LOADING_MASK})})}},t.chargeItemCheckboxCheckAll=function(e,t,a){return function(n){t.map(function(t){var r=a.find(function(e){return e.get("uuid")===t.uuid}).toJS(),i=r.uuid,o=r.code,l=r.name,u=r.unit.unitList||[];u.unshift({uuid:r.unit.uuid,name:r.unit.name}),n(_(e,i,o,l,u))})}},t.chargeItemCheckboxCheck=function(e,t,a,n,r){return{type:i.IVNENTORY_CHARGE_ITEM_CHECKBOX_SELECT,checked:e,uuid:t,name:n,code:a,unitList:r}}),v=(t.getInventorySomeCardList=function(e,t){return function(a,n){var r=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);1==t?(0,o.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:r,categoryUuid:e,listByCategory:!0,subordinateUuid:"",property:0,openQuantity:!0}),function(e){(0,l.showMessage)(e)&&a(h("thingsList",(0,u.fromJS)(e.data.resultList)))}):(0,o.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:r,subordinateUuid:e,listByCategory:!1,categoryUuid:"",property:0,openQuantity:!0}),function(e){(0,l.showMessage)(e)&&a(h("thingsList",(0,u.fromJS)(e.data.resultList)))})}},t.getAssistList=function(e,t){return function(e){(0,o.default)("getInventoryAssistList","GET","inventoryUuid=",function(a){e(h("allAssistClassificationList",(0,u.fromJS)(a.data.assistClassificationList))),t&&t()})}}),b=(t.chooseAssitUniform=function(e,t){return function(a){a({type:i.CHOOSE_ASSIST_UNIFORM,uuidList:e,bool:t})}},t.insertAssistCategroy=function(e,t){return function(a){(0,o.default)("insertAssistCategroy","POST",JSON.stringify({name:e}),function(e){(0,l.showMessage)(e,"show")&&(t&&t(),a(v()))})}},t.modifyAssistCategroy=function(e,t,a){return function(n){(0,o.default)("modifyAssistCategroy","POST",JSON.stringify({name:t,uuid:e}),function(e){(0,l.showMessage)(e,"show")&&(a&&a(),n(v()))})}},t.deleteAssistCategroy=function(e,t){return function(a){(0,o.default)("deleteAssistCategroy","GET","uuid="+e,function(e){(0,l.showMessage)(e,"show")&&(t&&t(),a(v()))})}},t.insertAssist=function(e,t,a){return function(n){(0,o.default)("insertAssist","POST",JSON.stringify({name:t,classificationUuid:e}),function(e){(0,l.showMessage)(e,"show")&&(a&&a(),n(v()))})}},t.modifyAssist=function(e,t,a){return function(n){(0,o.default)("modifyAssist","POST",JSON.stringify({name:a,uuid:e,classificationUuid:t}),function(e){(0,l.showMessage)(e,"show")&&n(v())})}},t.deleteAssist=function(e,t){return function(a){(0,o.default)("deleteAssist","GET","uuid="+e,function(e){(0,l.showMessage)(e,"show")&&(t&&t(),a(v()))})}},t.insertInventoryBatch=function(e,t,a,n,r,i,c,s,d){return function(f,m){(0,o.default)("insertBatch","POST",JSON.stringify({batch:e,productionDate:t,expirationDate:a,inventoryUuid:n,condition:r,orderBy:i,currentPage:c,isAsc:s}),function(e){(0,l.showMessage)(e,"show")&&(d&&d(),f(h("batchList",(0,u.fromJS)(e.data.batchList)||(0,u.fromJS)([]))))})}},t.insertBatch=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments[4],c=arguments[5];return function(s,d){var f=d().inventoryCardState,m=f.getIn(["views","insertOrModify"]),g=f.getIn(["inventoryCardTemp","financialInfo","batchList"])||(0,u.fromJS)([]);"insert"===m&&g.some(function(t){return t.get("batch")===e&&e})?r.default.info("批次号重复"):"insert"===m?(r.default.success("成功"),c&&c(e,a),i&&i(),s(C(["financialInfo","batchList"],g.push((0,u.fromJS)({batch:e,productionDate:t,expirationDate:a,inventoryUuid:n}))))):(0,o.default)("insertBatch","POST",JSON.stringify({batch:e,productionDate:t,expirationDate:a,inventoryUuid:n}),function(e){if((0,l.showMessage)(e,"show")){var t=e.data,a=t.batch,n=t.batchUuid,r=t.expirationDate;c&&c(a,n,r),i&&i(),s(C(["financialInfo","batchList"],(0,u.fromJS)(e.data.batchList)))}})}},t.modifyBatch=function(e,t,a,r,c,s){return function(d,f){(0,o.default)("batchUsedCheck","GET","inventoryUuid="+c+"&batchUuid="+t,function(f){(0,l.showMessage)(f)&&(f.data.used?n.default.confirm({title:"提示",content:"原批次在期初值或流水中已被使用，修改后所有信息将同步修改。确认更改该批次的信息吗？",onOk:function(){d({type:i.SWITCH_LOADING_MASK}),(0,o.default)("modifyBatch","POST",JSON.stringify({batch:e,productionDate:a,inventoryUuid:c,batchUuid:t,expirationDate:r}),function(e){d({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e,"show")&&(s&&s(),d(C(["financialInfo","batchList"],(0,u.fromJS)(e.data.batchList))))})}}):(d({type:i.SWITCH_LOADING_MASK}),(0,o.default)("modifyBatch","POST",JSON.stringify({batch:e,productionDate:a,inventoryUuid:c,batchUuid:t,expirationDate:r}),function(e){d({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e,"show")&&(s&&s(),d(C(["financialInfo","batchList"],(0,u.fromJS)(e.data.batchList))))})))})}},t.getSerialList=function(e,t){return function(e,a){var n=a().inventoryCardState,r=n.getIn(["inventoryCardTemp","uuid"]);n.getIn(["inventoryCardTemp","uuid"]);(0,o.default)("getSerialList","POST",JSON.stringify({inventoryUuid:r,inUuid:t}),function(t){(0,l.showMessage)(t)&&(e(h("serialList",(0,u.fromJS)(t.data)||(0,u.fromJS)([]))),e(h("serialModal",!0)))})}},t.emptyWarehouseListQuantity=function(){return{type:i.EMPTY_WAREHOUSE_LIST_QUANTITY}},t.getBatchList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments[2],n=arguments[3],r=arguments[4],c=arguments[5];return function(s,d){var f=e||d().inventoryCardState.getIn(["views","batchUuid"]);s({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getBatchList","POST",JSON.stringify({inventoryUuid:f,condition:a,orderBy:n,currentPage:t,isAsc:r}),function(e){s({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(s(h("batchList",(0,u.fromJS)(e.data.batchList)||(0,u.fromJS)([]))),s(h("batchUuid",f)),s(h("batchManageModal",!0)),s(h("shelfLife",e.data.shelfLife)),c&&c())})}},t.getInitBatchList=function(e){return function(t,a){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getBatchList","POST",JSON.stringify({inventoryUuid:e}),function(e){t({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&t(C(["financialInfo","batchList"],(0,u.fromJS)(e.data.batchList)))})}});t.deleteBatch=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments[3],c=arguments[4],s=arguments[5],d=arguments[6];return function(f,m){f({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteBatch","POST",JSON.stringify({inventoryUuid:e,deleteList:t,condition:n,orderBy:c,currentPage:a,isAsc:s}),function(e){f({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(e.data.usedList&&e.data.usedList.length?r.default.info(e.data.usedList.map(function(e){return"【"+e.batch+"】"}).join("、")+"批次已在期初值或流水中使用，不可删除"):r.default.success("成功"),f(h("batchList",(0,u.fromJS)(e.data.batchList)||(0,u.fromJS)([]))),d&&d())})}},t.toggleBatch=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments[4],u=arguments[5],c=arguments[6],s=arguments[7];return function(d,f){d({type:i.SWITCH_LOADING_MASK}),(0,o.default)("toggleBatch","POST",JSON.stringify({inventoryUuid:e,canUse:a,condition:r,orderBy:u,currentPage:n,isAsc:c,batchUuid:t}),function(e){d({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&s&&s()})}}},1244:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={name:"必填",code:"最长20个字符",remark:"选填(最多40个字符)",amount:"必填，请输入金额",selectAc:"选填，请选择科目",upperClass:"选择上级类别",cardCode:"必填，支持数字和大小写英文",specifications:"支持数字字母，不区分大小写，最长20个字符",specificationsTip:"选填，最长20个字符",unit:"必填，支持多单位",barCode:"选填，最长40个字符",companyAddress:"选填，最长40个字符",financeName:"选填，最长20个字符"}},1245:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeItemChildShow=t.deleteRunningVc=t.showRelatePaymentFetch=t.showRelateBusinessFetch=t.modifyRunningPayment=t.getRunningPayment=t.getRunningBusinessDuty=void 0;var n,r=f(a(1278)),i=a(52),o=(n=i)&&n.__esModule?n:{default:n},l=a(18),u=a(22),c=f(a(30)),s=(f(a(27)),f(a(1229))),d=f(a(60));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.getRunningBusinessDuty=function(e,t,a,n,i){return function(i,c){console.log(a);var f=c().accountConfState.get("runningCategory");i({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusiness","GET","uuid="+t,function(o){if(i({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(o)){var c=o.data.result.categoryUuid,m=(0,l.fromJS)([]);!function e(t){return t.map(function(t){t.get("uuid")===c&&(m=m.push(t)),t.get("childList")&&t.get("childList").size&&e(t.get("childList"))})}(f);var g={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[o.data.result.categoryType],p=o.data.result.runningState,C=o.data.result[g].beManagemented,h=o.data.result[g].contactsRange,y=o.data.result[g].stockRange,E=o.data.result.beProject,S=o.data.result.projectRange,T=o.data.result.propertyCarryover;"STATE_JK_ZFLX"!==p&&"STATE_TZ_SRGL"!==p&&"STATE_TZ_SRLX"!==p&&"STATE_ZB_ZFLR"!==p&&"STATE_XC_JN"!==p&&"STATE_XC_FF"!==p&&"STATE_SF_JN"!==p&&"STATE_ZS_TH"!==p&&"STATE_ZF_SH"!==p&&"STATE_SF_SFJM"!==p||i(s.changeLrAccountCommonString("",["flags","specialStateforAccrued"],!0)),i(s.getRunningSettingInfo()),i(d.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),i(d.addHomeTabpane("Edit","LrAccount","录入流水")),i({type:r.INIT_LR_ACCOUNT,strJudgeType:"fromCxAccount",receivedData:o.data,category:m,canMakeVc:n,flowNumber:e,uuidList:a,uuid:t}),"STATE_CQZC_JZSY"===p&&i(s.calculateGain()),E&&i(s.getProjectCardList(S,o.data.result)),C&&i(s.getFirstContactsCardList(h,p)),"SX_HW"===T&&i(s.getFirstStockCardList(y,p))}})}},t.getRunningPayment=function(e,t){return function(a){a({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningPayment","GET","uuid="+e,function(e){a({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),a({type:r.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.modifyRunningPayment=function(){return{type:r.MODIFY_RUNNING_PAYMENT}},t.showRelateBusinessFetch=function(e,t){return function(a){a({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningBusinessDuty","GET","uuid="+e,function(e){a({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),a({type:r.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.showRelatePaymentFetch=function(e,t){return function(a){a({type:r.SWITCH_LOADING_MASK}),(0,o.default)("getRunningPayment","GET","uuid="+e,function(e){a({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),a({type:r.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.deleteRunningVc=function(e,t){return function(a,n){c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(i){1===i.buttonIndex&&(a({type:r.SWITCH_LOADING_MASK}),(0,o.default)("deletevc","POST",JSON.stringify({year:t.substr(0,4),month:t.substr(5,2),vcindexlist:[e]}),function(e){if(a({type:r.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var t=n().accountState,i=t.getIn(["flags","issuedate"]),o=t.getIn(["flags","main"]),l=t.getIn(["flags","curCategory"]),c=t.getIn(["flags","curAccountUuid"]),s=t.getIn(["flags","assId"]),d=t.getIn(["flags","assCategory"]),f=t.getIn(["flags","acId"]);a(getAccountDimensionFetch(i,o,l,c,f,d,s))}}))}})}},t.changeItemChildShow=function(e){return{type:r.CHANGE_ITEM_CHILD_SHOW,idx:e}}},1246:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_PZ_BOMB="INIT_PZ_BOMB",t.PZBOMB_REVIEWEDBY_VC="PZBOMB_REVIEWEDBY_VC",t.CANCEL_PZBOMB_REVIEWEDBY_VC="CANCEL_PZBOMB_REVIEWEDBY_VC"},1249:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeItemChildShow=t.deleteRunningVc=t.showRelatePaymentFetch=t.showRelateBusinessFetch=t.modifyRunningPayment=t.getRunningPayment=t.getRunningBusinessDuty=t.deleteAccountItemCardAndRunning=t.accountItemCheckboxCheckAll=t.accountItemCheckboxCheck=t.saveAccountPayOrReceive=t.oneClickPayment=t.beforeRunningPayOrReceive=t.changeAccountAccountName=t.changeAccountCommonString=t.afterModifyAccountAllList=t.changeSearchType=t.changeCalculateCommonString=t.getFirstStockCardList=t.getAccountObjectList=t.getCostCategoryListInfo=t.getAuthCategoryListInfo=t.getMakeoutCategoryListInfo=t.getManageCategoryListInfo=t.getCalculateCarryoverList=t.getCalculateCertificationList=t.getCalculateInvoicingList=t.getCalculateList=t.getPeriodCalculateList=void 0;var n,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=g(a(1277)),o=a(52),l=(n=o)&&n.__esModule?n:{default:n},u=a(22),c=g(a(30)),s=a(18),d=g(a(60)),f=g(a(43)),m=g(a(1229));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.getPeriodCalculateList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"manages",a=arguments[2];arguments[3],arguments[4];return function(n){n({type:i.SWITCH_LOADING_MASK}),n(b(e));(0,l.default)("getManageList","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",categoryUuid:"",cardUuid:"",isCheck:!1,getPeriod:a}),function(e){if((0,u.showMessage)(e)){var a;n(f.AccountTableGetPeriod(e));n((p(a={type:i.GET_CALCULATE_LIST,receivedData:e.data.result,period:e.data.periodDtoJson,issuedate:"",getPeriod:"true",isCheck:!1,categoryUuid:""},"isCheck",!1),p(a,"searchType","SEARCH_TYPE_DATE"),p(a,"accountingType",t),a))}n({type:i.SWITCH_LOADING_MASK})})}};var C=t.getCalculateList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"manages",a=(arguments[2],arguments[3]),n=arguments[4],r=arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",c=arguments[7];return function(s,d){s({type:i.SWITCH_LOADING_MASK});var f=d().calculationState,m=o?f.getIn(["flags","searchType"]):"";t=t||f.getIn(["flags","accountingType"]),r=(!0===r||!1===r)&&r,(0,l.default)("getManageList","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(6,2):"",categoryUuid:a?"全部"===a?"":a:f.getIn(["flags","categoryUuid"]),cardUuid:n,isCheck:r,getPeriod:"",searchType:m,searchContent:o}),function(n){s({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)&&(m=""==m?"SEARCH_TYPE_DATE":m,s({type:i.GET_CALCULATE_LIST,receivedData:n.data.result,period:n.data.periodDtoJson,issuedate:e,getPeriod:"",isCheck:r,searchType:m,curCategory:a,accountingType:t}))}),c||s(S("",n,r))}},h=t.getCalculateInvoicingList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments[4];return function(o,c){o({type:i.SWITCH_LOADING_MASK});var s=c().calculationState,d=n?s.getIn(["flags","searchType"]):"";(0,l.default)("getBusinessMakeoutList","POST",JSON.stringify({runningDate:"",categoryUuid:t?"全部"===t?"":t:s.getIn(["flags","categoryUuid"]),billMakeOutType:a,searchType:d,searchContent:n}),function(n){o({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)&&(d=""==d?"SEARCH_TYPE_DATE":d,o({type:i.GET_CALCULATE_INVOICING_LIST,receivedData:n.data.result,curCategory:t,billMakeOutType:a,searchType:d,runningDate:e}))}),r||o(T("",a))}},y=t.getCalculateCertificationList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments[4];return function(o,c){o({type:i.SWITCH_LOADING_MASK});var s=c().calculationState,d=n?s.getIn(["flags","searchType"]):"";(0,l.default)("getBusinessAuthList","POST",JSON.stringify({runningDate:"",categoryUuid:t?"全部"===t?"":t:s.getIn(["flags","categoryUuid"]),billAuthType:a,searchType:d,searchContent:n}),function(n){o({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)&&(d=""==d?"SEARCH_TYPE_DATE":d,o({type:i.GET_CALCULATE_CERTIFICATE_LIST,receivedData:n.data.result,curCategory:t,billAuthType:a,searchType:d,runningDate:e}))}),r||o(_("",a))}},E=t.getCalculateCarryoverList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return function(o,c){o({type:i.SWITCH_LOADING_MASK}),o(L(e,t));var s=c().calculationState,d=""===r?[]:[r],f=a?s.getIn(["flags","searchType"]):"";(0,l.default)("getCarryoverList","POST",JSON.stringify({runningDate:"",runningState:t,searchType:f,searchContent:a,cardUuidList:d}),function(a){o({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)&&(f=""==f?"SEARCH_TYPE_DATE":f,o({type:i.GET_CALCULATE_COST_LIST,receivedData:a.data.result,runningState:t,searchType:f,runningDate:e}))}),n||o(v("",t))}},S=t.getManageCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(n,r){(0,l.default)("getRunningManageCategory","POST",JSON.stringify({runningDate:e,cardUuid:t,isCheck:a}),function(e){(0,u.showMessage)(e)&&n({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data,isCheck:a})})}},T=t.getMakeoutCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(a,n){(0,l.default)("getRunningMakeoutCategory","POST",JSON.stringify({runningDate:e,billMakeOutType:t}),function(e){(0,u.showMessage)(e)&&a({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data})})}},_=t.getAuthCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(a,n){(0,l.default)("getRunningAuthCategory","POST",JSON.stringify({runningDate:e,billAuthType:t}),function(e){(0,u.showMessage)(e)&&a({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data})})}},v=t.getCostCategoryListInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(a,n){(0,l.default)("getRunningCarryoverCategory","POST",JSON.stringify({runningDate:e,runningState:t}),function(e){(0,u.showMessage)(e)&&a({type:i.GET_MANAGE_CATEGORY_DETAIL,receivedData:e.data})})}},b=t.getAccountObjectList=function(e){return function(e){(0,l.default)("getBusinessManagerCardList","POST",JSON.stringify({}),function(t){(0,u.showMessage)(t)&&(e(I("calculate","cardList",(0,s.fromJS)(t.data.cardList))),t.data.categoryList&&e(I("calculate","typeList",(0,s.fromJS)(t.data.categoryList))))})}},L=t.getFirstStockCardList=function(e,t){return function(a,n){n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,l.default)("getCostStock","POST",JSON.stringify({runningDate:e,runningState:t}),function(e){(0,u.showMessage)(e)&&a(I("calculate","stockThingsList",(0,s.fromJS)(e.data.result)))})}},I=t.changeCalculateCommonString=function(e,t,a){return function(n){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(t));"flags"===t[0]&&(r=t),n({type:i.CHANGE_CALCULATE_COMMON_STRING,tab:e,placeArr:r,value:a})}},N=(t.changeSearchType=function e(t,a){return function(n){switch(a){case"manages":n(C()),n(e(["calculateTemp","usedCard"],(0,s.fromJS)({name:"",code:"全部"})));break;case"invoicing":n(h());break;case"certification":n(y());break;case"costTransfer":n(E()),n(e(["calculateTemp","stockCard"],(0,s.fromJS)({name:"",code:"全部"})))}n({type:i.CHANGE_TYPE_OF_SEARCH,placeArr:t,value:a})}},t.afterModifyAccountAllList=function(e){return function(e,t){var a=t().calculationState,n=a.getIn(["flags","issuedate"]),r=a.getIn(["flags","accountingType"]),i=a.getIn(["flags","curCategory"]),o=(a.getIn(["calculateTemp","ass","assid"]),a.getIn(["calculateTemp","ass","asscategory"]),a.getIn(["calculateTemp","ass","acId"]),a.getIn(["calculateTemp","cardUuid"])),l=a.getIn(["flags","isCheck"]),u=a.getIn(["invoicingList","billMakeOutType"]),c=a.getIn(["certificationList","billAuthType"]),s=a.getIn(["costTransferList","runningState"]);switch(r){case"manages":e(C(n,r,"true",i,o,l));break;case"invoicing":e(h("",i,u));break;case"certification":e(y("",i,c));break;case"costTransfer":e(E("",s))}}}),O=(t.changeAccountCommonString=function(e,t,a){return{type:i.CHANGE_ACCOUNT_COMMON_STRING,tab:e,place:t,value:a}},t.changeAccountAccountName=function(e,t,a,n){return{type:i.CHANGE_ACCOUNT_ACCOUNT_NAME,tab:e,placeUUid:t,placeName:a,value:n}},t.beforeRunningPayOrReceive=function(e,t,a,n,r){return function(o){a<0&&(a=-a,e="收"===e?"付":"收"),o({type:i.BEFORE_RUNNING_PAY_OR_RECEIVE,payDirection:e,assList:t,notHandleAmount:a,uuidList:n,runningList:r})}});t.oneClickPayment=function(e){return function(t,a){var n=a().calculationState,r=n.getIn(["flags","selectList"]),i=n.getIn(["payManageList","childList"]),o=n.getIn(["flags","assId"]),l=n.getIn(["flags","assCategory"]),u=n.getIn(["flags","acId"]),c=n.get("mediumAcAssList"),d="";u?c.get("acList").forEach(function(e){e.get("acId")===u&&(d=e.get("acName"))}):c.get("category").forEach(function(e){e.get("category")===l&&e.get("assList").forEach(function(e){e.get("assId")===o&&(d=e.get("assName"))})});var f=(0,s.fromJS)([]),m=(0,s.fromJS)([]),g=(0,s.fromJS)([]),p=(0,s.fromJS)([]);if(i.forEach(function(e){r.indexOf(e.get("uuid"))>-1&&(g=g.push(e),p=p.push(e.get("uuid")),"income"===e.get("property")||"otherIncome"===e.get("property")?m=m.push(e):f=f.push(e))}),m.size&&f.size){var C=0,h=0;m.forEach(function(e){return C+=e.get("notHandleAmount")}),f.forEach(function(e){return h+=e.get("notHandleAmount")});var y=C-h;if(y>0){t(O("收",d,y,p,g))}else{t(O("付",d,-y,p,g))}e()}else if(m.size&&!f.size){var E="收",S=0;m.forEach(function(e){S+=e.get("notHandleAmount"),p.push(e.get("uuid"))}),S<0&&(E="付",S=-S),t(O(E,d,S,p,g)),e()}else if(!m.size&&f.size){var T="付",_=0;f.forEach(function(e){_+=e.get("notHandleAmount"),p.push(e.get("uuid"))}),_<0&&(T="收",_=-_),t(O(T,d,_,p,g)),e()}else console.log("异常情况：未匹配")}},t.saveAccountPayOrReceive=function(e){return function(t,a){var n=a().calculationState,i=n.getIn(["flags","runningInsertOrModify"]),o=n.get("runningTemp").toJS();(0,l.default)(i+"Runningpayment","POST",JSON.stringify(r({},o)),function(a){(0,u.showMessage)(a)&&(t(N()),e())})}},t.accountItemCheckboxCheck=function(e,t,a){return{type:i.ACCOUNT_ITEM_CHECKBOX_SELECT,checked:e,uuid:t,runningDate:a}},t.accountItemCheckboxCheckAll=function(e,t){return{type:i.PAY_RECEIVE_ITEM_CHECKBOX_CHECK_ALL,selectAll:e,listName:t}},t.deleteAccountItemCardAndRunning=function(e){return function(e,t){var a=t().calculationState.getIn(["flags","selectList"]);c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(e({type:i.SWITCH_LOADING_MASK}),(0,l.default)("deleteRunningbusiness","POST",JSON.stringify({deleteList:a}),function(t){if((0,u.showMessage)(t)){if(t.data.errorList.length){var a=t.data.errorList.reduce(function(e,t){return e+","+t});c.Alert(a)}e(N())}e({type:i.SWITCH_LOADING_MASK})}))}})}},t.getRunningBusinessDuty=function(e,t,a,n){return function(n,r){var o=r().accountConfState.get("runningCategory");n({type:i.SWITCH_LOADING_MASK}),(0,l.default)("getNewRunningBusiness","GET","oriUuid="+t,function(t){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(t)){var r=t.data.result.categoryUuid,l=(0,s.fromJS)([]);!function e(t){return t.map(function(t){t.get("uuid")===r&&(l=l.push(t)),t.get("childList")&&t.get("childList").size&&e(t.get("childList"))})}(o);var c=t.data.result.runningState;"STATE_JK_ZFLX"!==c&&"STATE_TZ_SRGL"!==c&&"STATE_TZ_SRLX"!==c&&"STATE_ZB_ZFLR"!==c&&"STATE_ZS_TH"!==c&&"STATE_ZF_SH"!==c||n(m.changeLrAccountCommonString("",["flags","specialStateforAccrued"],!0)),n(m.getRunningSettingInfo()),n(d.addPageTabPane("EditPanes","LrAccount","LrAccount","录入流水")),n(d.addHomeTabpane("Edit","LrAccount","录入流水")),n({type:i.INIT_LR_ACCOUNT,strJudgeType:"fromCxAccount",receivedData:t.data,category:l,canMakeVc:a,flowNumber:e}),"STATE_CQZC_JZSY"===c&&n(m.calculateGain())}})}},t.getRunningPayment=function(e,t){return function(a){a({type:i.SWITCH_LOADING_MASK}),(0,l.default)("getRunningPayment","GET","uuid="+e,function(e){a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),a({type:i.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.modifyRunningPayment=function(){return{type:i.MODIFY_RUNNING_PAYMENT}},t.showRelateBusinessFetch=function(e,t){return function(a){a({type:i.SWITCH_LOADING_MASK}),(0,l.default)("getRunningBusinessDuty","GET","uuid="+e,function(e){a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),a({type:i.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.showRelatePaymentFetch=function(e,t){return function(a){a({type:i.SWITCH_LOADING_MASK}),(0,l.default)("getRunningPayment","GET","uuid="+e,function(e){a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(t(),a({type:i.SHOW_RELATE_PAYMENT_FETCH,receivedData:e.data.result}))})}},t.deleteRunningVc=function(e,t){return function(a,n){c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(r){1===r.buttonIndex&&(a({type:i.SWITCH_LOADING_MASK}),(0,l.default)("deletevc","POST",JSON.stringify({year:t.substr(0,4),month:t.substr(5,2),vcindexlist:[e]}),function(e){if(a({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var t=n().calculationState,r=t.getIn(["flags","issuedate"]),o=t.getIn(["flags","main"]),l=t.getIn(["flags","curCategory"]),c=(t.getIn(["flags","curAccountUuid"]),t.getIn(["flags","assId"]),t.getIn(["flags","assCategory"]),t.getIn(["flags","acId"]),t.getIn(["flags","isCheck"])),s=t.getIn(["calculateTemp","cardUuid"]);a(C(r,o,"",l,s,c))}}))}})}},t.changeItemChildShow=function(e){return{type:i.CHANGE_ITEM_CHILD_SHOW,idx:e}}},1250:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=h(a(14)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(78);var u=h(a(1)),c=h(a(0)),s=a(18),d=a(17);a(1258);var f=C(a(30)),m=h(a(1260)),g=h(a(1264)),p=C(a(60));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var y=(0,d.immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={rotate:0,magnificationRate:1,imgWpercent:0,idx:""},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"componentDidMount",value:function(){this.props.dispatch(p.setDdConfig())}},{key:"componentWillReceiveProps",value:function(e,t){0==this.props.preview&&1==e.preview&&this.setState({rotate:0,magnificationRate:1,imgWpercent:0,idx:e.page,maxLimit:40,minLimit:40})}},{key:"render",value:function(){var e=this,t=this.props,a=t.preview,n=t.downloadPermission,r=t.previewImgArr,i=t.closePreviewModal,l=t.downloadEnclosure,c=t.dispatch,s=(t.page,t.type,t.uploadKeyJson,this.state),d=s.idx,p=s.rotate,C=s.magnificationRate,h=s.imgWpercent,y=s.maxLimit,E=s.minLimit,S=r.get(d);return u.default.createElement("div",{className:"preview",style:{display:a?"":"none"},onClick:function(e){}},u.default.createElement("div",{className:"nav"},u.default.createElement("button",{onClick:function(){return e.setState({idx:d-1,imgWpercent:0,rotate:0})},disabled:0==d},u.default.createElement(o.default,{type:"left-circle"}),u.default.createElement("div",null,"上一张")),u.default.createElement("button",{disabled:S&&"TRUE"!==S.get("imageOrFile"),onClick:function(){return e.setState({rotate:p+90})}},u.default.createElement(o.default,{type:"reload"}),u.default.createElement("div",null,"旋转")),S&&"application/pdf"===S.get("mimeType")?u.default.createElement("button",{disabled:.5===C,onClick:function(){e.setState({magnificationRate:C-.5})}},u.default.createElement(o.default,{type:"zoom-out"}),u.default.createElement("div",null,"缩小")):u.default.createElement("button",{disabled:-E>=h,onClick:function(){e.setState({imgWpercent:h-10})}},u.default.createElement(o.default,{type:"minus-circle"}),u.default.createElement("div",null,"缩小")),S&&"application/pdf"==S.get("mimeType")?u.default.createElement("button",{disabled:C>=4||"application/pdf"!==S.get("mimeType"),onClick:function(){e.setState({magnificationRate:C+.5})}},u.default.createElement(o.default,{type:"zoom-in"}),u.default.createElement("div",null,"放大")):u.default.createElement("button",{disabled:h>=y,onClick:function(){e.setState({imgWpercent:h+10})}},u.default.createElement(o.default,{type:"plus-circle"}),u.default.createElement("div",null,"放大")),u.default.createElement("button",{disabled:!n},n?u.default.createElement("span",{onClick:function(){return l(r.getIn([d,"signedUrl"]),r.getIn([d,"fileName"]))}},u.default.createElement(o.default,{type:"download"}),u.default.createElement("div",null,"下载")):u.default.createElement("a",null,u.default.createElement(o.default,{type:"download"}),u.default.createElement("div",null,"下载"))),u.default.createElement("button",{disabled:!(S&&"application/pdf"==S.get("mimeType")),onClick:function(){S&&"application/pdf"==S.get("mimeType")&&f.openLink({url:r.getIn([d,"signedUrl"])})}},u.default.createElement(o.default,{type:"printer"}),u.default.createElement("div",null,"打印")),u.default.createElement("button",{onClick:function(){return e.setState({idx:d+1,imgWpercent:0,rotate:0})},disabled:d===r.size-1},u.default.createElement(o.default,{type:"right-circle"}),u.default.createElement("div",null,"下一张"))),S&&"TRUE"===S.get("imageOrFile")&&a?u.default.createElement(g.default,{imgUrl:""+S.get("signedUrl"),imgWpercent:h,rotate:p,preview:a,maxLimit:y,minLimit:E}):"",S&&"application/pdf"===S.get("mimeType")&&a?u.default.createElement(m.default,{pdfUrl:""+S.get("signedUrl"),dispatch:c,magnificationRate:C,preview:a}):"",u.default.createElement("div",{className:"img-box",style:{display:S&&"application/pdf"!==S.get("mimeType")&&"TRUE"!==S.get("imageOrFile")?"":"none"}},u.default.createElement("div",{className:"img-box-contain"},u.default.createElement("div",{className:"img-box-contain-overflow"},u.default.createElement("div",{className:"noSupport"},u.default.createElement(o.default,{type:"file"}),u.default.createElement("p",null,"仅图片及PDF格式支持预览"))))),u.default.createElement("div",{className:"btnBar"},u.default.createElement("div",{className:"title"},"预览"),u.default.createElement("div",{onClick:i,className:"closeBtn"},u.default.createElement(o.default,{type:"close"}))))}}]),t}(),r.displayName="EnclosurePreview",r.propTypes={preview:c.default.bool,downloadPermission:c.default.bool,previewImgArr:c.default.instanceOf(s.List),closePreviewModal:c.default.func,dispatch:c.default.func,page:c.default.number,type:c.default.string},n=i))||n;t.default=y},1251:function(e,t,a){e.exports=a(1252)},1252:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(0),o=a.n(i),l=a(15);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var p=a(2),C=function(e){function t(e){var a,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=d(t).call(this,e),g(m(m(a=!r||"object"!=typeof r&&"function"!=typeof r?m(n):r)),"handleClick",function(e){var t=a.state.checked,n=a.props.onClick,r=!t;a.setChecked(r,e),n&&n(r,e)}),g(m(m(a)),"handleKeyDown",function(e){37===e.keyCode?a.setChecked(!1,e):39===e.keyCode&&a.setChecked(!0,e)}),g(m(m(a)),"handleMouseUp",function(e){var t=a.props.onMouseUp;a.node&&a.node.blur(),t&&t(e)}),g(m(m(a)),"saveNode",function(e){a.node=e});var i=!1;return i="checked"in e?!!e.checked:!!e.defaultChecked,a.state={checked:i},a}var a,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,n["Component"]),a=t,o=[{key:"getDerivedStateFromProps",value:function(e){var t={},a=e.checked;return"checked"in e&&(t.checked=!!a),t}}],(i=[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoFocus,a=e.disabled;t&&!a&&this.focus()}},{key:"setChecked",value:function(e,t){var a=this.props,n=a.disabled,r=a.onChange;n||("checked"in this.props||this.setState({checked:e}),r&&r(e,t))}},{key:"focus",value:function(){this.node.focus()}},{key:"blur",value:function(){this.node.blur()}},{key:"render",value:function(){var e,t=this.props,a=t.className,n=t.prefixCls,i=t.disabled,o=t.loadingIcon,l=t.checkedChildren,s=t.unCheckedChildren,d=c(t,["className","prefixCls","disabled","loadingIcon","checkedChildren","unCheckedChildren"]),f=this.state.checked,m=p((g(e={},a,!!a),g(e,n,!0),g(e,"".concat(n,"-checked"),f),g(e,"".concat(n,"-disabled"),i),e));return r.a.createElement("button",u({},d,{type:"button",role:"switch","aria-checked":f,disabled:i,className:m,ref:this.saveNode,onKeyDown:this.handleKeyDown,onClick:this.handleClick,onMouseUp:this.handleMouseUp}),o,r.a.createElement("span",{className:"".concat(n,"-inner")},f?l:s))}}])&&s(a.prototype,i),o&&s(a,o),t}();C.propTypes={className:o.a.string,prefixCls:o.a.string,disabled:o.a.bool,checkedChildren:o.a.any,unCheckedChildren:o.a.any,onChange:o.a.func,onMouseUp:o.a.func,onClick:o.a.func,tabIndex:o.a.number,checked:o.a.bool,defaultChecked:o.a.bool,autoFocus:o.a.bool,loadingIcon:o.a.node},C.defaultProps={prefixCls:"rc-switch",checkedChildren:null,unCheckedChildren:null,className:"",defaultChecked:!1},Object(l.polyfill)(C),t.default=C},1253:function(e,t,a){},1256:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(2),i=a.n(r),o=(a(21),a(1599));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};t.default=function(e){return n.createElement(o.a,null,function(t){var a,r=t.getPrefixCls,o=e.prefixCls,s=e.type,d=void 0===s?"horizontal":s,f=e.orientation,m=void 0===f?"center":f,g=e.className,p=e.children,C=e.dashed,h=c(e,["prefixCls","type","orientation","className","children","dashed"]),y=r("divider",o),E=m.length>0?"-".concat(m):m,S=i()(g,y,"".concat(y,"-").concat(d),(u(a={},"".concat(y,"-with-text").concat(E),p),u(a,"".concat(y,"-dashed"),!!C),a));return n.createElement("div",l({className:S},h,{role:"separator"}),p&&n.createElement("span",{className:"".concat(y,"-inner-text")},p))})}},1257:function(e,t,a){"use strict";a.r(t);a(33),a(1360)},1258:function(e,t,a){},1260:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=g(a(14)),l=g(a(37)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(78),a(38);var c=g(a(1)),s=g(a(0)),d=a(17);a(1261);a(127),m(a(30));var f=m(a(1263));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var p=(0,d.immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.renderPdf=function(e){var t=document.getElementById("canvas_wrapper");t.innerHTML="";var n=atob(e),r=window.PDFJS;if(!r)return a.setState({networkFaild:!0}),l.default.info("网路问题导致PDF预览相关文件加载失败",2);if(r.cMapUrl="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.0.288/cmaps/",r.cMapPacked=!0,!r.getDocument)return a.setState({networkFaild:!0}),l.default.info("网路问题导致PDF预览相关文件加载失败",2);var i=r.getDocument({data:n}),o=a;i.promise.then(function(e){var a="";e.numPages;for(var n=0;n<e.numPages;n++)(a=document.createElement("canvas")).id="pdf_canvas_"+n,t.appendChild(a);for(var r=function(t){e.getPage(t+1).then(function(e){var a=e.getViewport(o.props.magnificationRate),n=document.getElementById("pdf_canvas_"+t);n.width=a.width,n.height=a.height;var r=n.getContext("2d");return e.render({canvasContext:r,viewport:a}).promise})},i=0;i<e.numPages;i++)r(i)}).catch(function(e){document.getElementById("canvas_wrapper").innerHTML="",o.setState({broken:!0})})},a.state={base64:"",broken:!1,networkFaild:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch(f.getCxpzUploadEnclosure(this.props.pdfUrl,function(t){t&&(e.setState({base64:t,broken:!1}),e.renderPdf(t))}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.magnificationRate!==e.magnificationRate&&this.renderPdf(this.state.base64),this.props.pdfUrl!==e.pdfUrl&&this.props.dispatch(f.getCxpzUploadEnclosure(e.pdfUrl,function(e){e&&(t.setState({base64:e,broken:!1,networkFaild:!1}),t.renderPdf(e))}))}},{key:"render",value:function(){var e=this.props,t=(e.pdfUrl,e.dispatch,e.magnificationRate,this.state),a=t.broken,n=t.networkFaild;return c.default.createElement("div",{className:"img-box"},c.default.createElement("div",{className:"img-box-contain"},c.default.createElement("div",{className:"pdf-box-contain-overflow"},c.default.createElement("div",{className:"pdf_canvas_main"},c.default.createElement("div",{className:"pdf_canvas_pdf"},c.default.createElement("div",{id:"canvas_wrapper"}))),a?c.default.createElement("div",{className:"noSupport"},c.default.createElement(o.default,{type:"file"}),c.default.createElement("p",null,"PDF文件损坏，无法预览")):"",n?c.default.createElement("div",{className:"noSupport"},c.default.createElement(o.default,{type:"file"}),c.default.createElement("p",null,"网络异常，无法预览")):"")))}}]),t}(),r.displayName="PdfPreview",r.propTypes={pdfUrl:s.default.string,dispatch:s.default.func,magnificationRate:s.default.number},n=i))||n;t.default=p},1261:function(e,t,a){},1263:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCxpzUploadEnclosure=void 0;var n,r=a(31),i=(n=r)&&n.__esModule?n:{default:n},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1246)),l=(a(18),a(22));t.getCxpzUploadEnclosure=function(e,t){return function(a){a({type:o.SWITCH_LOADING_MASK}),e.indexOf("xfn-ddy-annex-bucket.oss-accelerate")>0&&(e=e.replace("xfn-ddy-annex-bucket.oss-accelerate","xfn-ddy-annex-bucket.oss-cn-hangzhou-internal")),(0,i.default)("uploadGetEnclosure","POST",JSON.stringify({enclosureUrl:e}),function(e){(0,l.showMessage)(e)?t(e.data.enclosureFile):t(""),a({type:o.SWITCH_LOADING_MASK})})}}},1264:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=c(a(1)),u=c(a(0));function c(e){return e&&e.__esModule?e:{default:e}}var s=(0,a(17).immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.drawImgScal=function(e,t,n,r){var i,o,l,u,c,s=t/100,d=n/100,f=r/100;i=a.refs.bargraphCanvas,o=i.getContext("2d"),(l=new Image).onload=function(){!0,m()},l.src=e;var m=function(){-f<=s&&s<=d&&(0===s?(u=l.width>960?960:l.width*Number(1+s),c=l.width>960?960*l.height/l.width:l.height*Number(1+s)):(u=l.width>960?960*Number(1+s):l.width*Number(1+s),c=l.width>960?960*l.height/l.width*Number(1+s):l.height*Number(1+s)),a.setState({imgHeight:c,imgWidth:u}),i.width=u,i.height=c,o.clearRect(0,0,u,c),o.drawImage(l,0,0,l.width,l.height,0,0,u,c))}},a.state={imgHeight:0,imgWidth:0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"componentDidMount",value:function(){this.drawImgScal(this.props.imgUrl,this.props.imgWpercent,this.props.maxLimit,this.props.minLimit)}},{key:"componentWillReceiveProps",value:function(e){this.props.imgUrl!==e.imgUrl&&this.drawImgScal(e.imgUrl,e.imgWpercent,this.props.maxLimit,this.props.minLimit),this.props.imgUrl===e.imgUrl&&this.props.imgWpercent!==e.imgWpercent&&this.drawImgScal(this.props.imgUrl,e.imgWpercent,this.props.maxLimit,this.props.minLimit)}},{key:"isVertail",value:function(e){return!(e<90)&&(90===e||e%180!=0)}},{key:"render",value:function(){var e=this.props,t=(e.imgUrl,e.imgWpercent,e.rotate),a=this.state,n=a.imgHeight,r=a.imgWidth,i=0,o=0;return this.isVertail(t)?(n>960&&(i=n-960),r>960&&(o=r-960)):(r>960&&(i=r-960),n>960&&(o=n/2+10)),l.default.createElement("div",{className:"img-box"},l.default.createElement("div",{className:"img-box-contain"},l.default.createElement("div",{className:"img-box-contain-overflow"},l.default.createElement("canvas",{ref:"bargraphCanvas",style:{transform:"rotate("+t+"deg)",marginLeft:i+"px",marginTop:o+"px",display:"block"}}))))}}]),t}(),r.displayName="ImgPreview",r.propTypes={imgUrl:u.default.string,imgWpercent:u.default.number,rotate:u.default.number,maxLimit:u.default.number,minLimit:u.default.number},n=i))||n;t.default=s},1277:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.ACCOUNT_CHANGE_VIEW_DIMENSION="ACCOUNT_CHANGE_VIEW_DIMENSION",t.GET_MANAGE_CATEGORY_DETAIL="GET_MANAGE_CATEGORY_DETAIL",t.GET_CALCULATE_LIST="GET_CALCULATE_LIST",t.GET_CALCULATE_INVOICING_LIST="GET_CALCULATE_INVOICING_LIST",t.GET_CALCULATE_CERTIFICATE_LIST="GET_CALCULATE_CERTIFICATE_LIST",t.GET_CALCULATE_COST_LIST="GET_CALCULATE_COST_LIST",t.CHANGE_CALCULATE_COMMON_STRING="CHANGE_CALCULATE_COMMON_STRING",t.CHANGE_ACCOUNT_AMOUNT_SUM="CHANGE_ACCOUNT_AMOUNT_SUM",t.CHANGE_ACCOUNT_COMMON_STRING="CHANGE_ACCOUNT_COMMON_STRING",t.CHANGE_ACCOUNT_ACCOUNT_NAME="CHANGE_ACCOUNT_ACCOUNT_NAME",t.BEFORE_RUNNING_PAY_OR_RECEIVE="BEFORE_RUNNING_PAY_OR_RECEIVE",t.ACCOUNT_ITEM_CHECKBOX_SELECT="ACCOUNT_ITEM_CHECKBOX_SELECT",t.PAY_RECEIVE_ITEM_CHECKBOX_CHECK_ALL="PAY_RECEIVE_ITEM_CHECKBOX_CHECK_ALL",t.INIT_RUNNING_BUSINESS_OR_PAY_CARD="INIT_RUNNING_BUSINESS_OR_PAY_CARD",t.MODIFY_RUNNING_PAYMENT="MODIFY_RUNNING_PAYMENT",t.SHOW_RELATE_PAYMENT_FETCH="SHOW_RELATE_PAYMENT_FETCH",t.CHANGE_ITEM_CHILD_SHOW="CHANGE_ITEM_CHILD_SHOW",t.CHANGE_TYPE_OF_SEARCH="CHANGE_TYPE_OF_SEARCH",t.INIT_SEARCH_CALCULATION="INIT_SEARCH_CALCULATION"},1278:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.GET_BUSINESS_LIST="GET_BUSINESS_LIST",t.CHANGE_CX_ACCOUNT_COMMON_STRING="CHANGE_CX_ACCOUNT_COMMON_STRING",t.CXLS_ITEM_CHECKBOX_CHECK_ALL="CXLS_ITEM_CHECKBOX_CHECK_ALL",t.CXLS_ITEM_CHECKBOX_CHECK="CXLS_ITEM_CHECKBOX_CHECK",t.GET_CXLSCONF_ALL_SETTINGS="GET_CXLSCONF_ALL_SETTINGS",t.SET_CURRENT_PZ="SET_CURRENT_PZ",t.SHOW_RELATE_PAYMENT_FETCH="SHOW_RELATE_PAYMENT_FETCH",t.CHANGE_ITEM_CHILD_SHOW="CHANGE_ITEM_CHILD_SHOW",t.INIT_LR_ACCOUNT="INIT_LR_ACCOUNT",t.MODIFY_RUNNING_PAYMENT="MODIFY_RUNNING_PAYMENT"},1279:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRunningAccount=t.saveAccountRegret=t.getAccountRegretList=t.getPaoundgeConfig=t.initPoundageTemp=t.savePoundageConfig=t.selectAccountRunningCategory=t.swapRunningAccount=t.runningAccountUsed=t.changeAccountConfAccountNumber=t.closeAccountconfModal=t.changeAccountConfingCommonString=t.beforeModifyaccountConfRunningOld=t.accountconfAccountCheckboxCheck=t.selectOrUnselectAccountAll=t.beforeInsertAccountConf=void 0;var n=s(a(1315)),r=c(a(52)),i=c(a(31)),o=a(22),l=a(18),u=(s(a(30)),s(a(102)));s(a(27));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.beforeInsertAccountConf=function(){return function(e){e({type:n.BEFORE_INSERT_ACCOUNTCONF})}},t.selectOrUnselectAccountAll=function(e){return function(t,a){var r=a().allState,i=r.get("accountList").size?r.getIn(["accountList",0,"childList"]):(0,l.fromJS)([]),o=r.get("accountList",0,"disableList").size?r.getIn(["accountList",0,"disableList"]):(0,l.fromJS)([]);t({type:n.SELECT_OR_UNSELECT_ACCOUNT_ALL,selectAll:e,accountList:i,disableList:o})}},t.accountconfAccountCheckboxCheck=function(e,t){return{type:n.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK,checked:e,uuid:t}},t.beforeModifyaccountConfRunningOld=function(e){return{type:n.BEFORE_MODIFY_ACCOUNTCONF_RUNNING,item:e}};var d=t.changeAccountConfingCommonString=function(e,t,a){return function(r){var i="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(t));r({type:n.CHANGE_ACCOUNTCONFIG_COMMON_STRING,placeArr:i,value:a})}},f=(t.closeAccountconfModal=function(){return{type:n.CLOSE_ACCOUNTCONF_MODAL}},t.changeAccountConfAccountNumber=function(e,t){return{type:n.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER,accountType:e,value:t}},t.runningAccountUsed=function(e,t){return function(a){a({type:n.SWITCH_LOADING_MASK}),(0,r.default)("runningAccountUsed","POST",JSON.stringify({accountUuid:e,used:t}),function(r){a({type:n.SWITCH_LOADING_MASK}),(0,o.showMessage)(r,"show")&&a({type:n.CHANGE_ACCOUNT_CARD_USED_STATUS,accountUuid:e,used:t})})}},t.swapRunningAccount=function(e,t){return function(a){a({type:n.SWITCH_LOADING_MASK}),(0,r.default)("swapRunningAccount","POST",JSON.stringify({fromUuid:e,toUuid:t}),function(e){a({type:n.SWITCH_LOADING_MASK}),(0,o.showMessage)(e,"show")&&a({type:n.GET_RUNNING_ACCOUNT,receivedData:e.data})})}},t.selectAccountRunningCategory=function(e){return function(t,a){t({type:n.SWITCH_LOADING_MASK}),(0,r.default)("getRunningDetail","GET","uuid="+e,function(e){t({type:n.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)&&(t(d("poundage","item",(0,l.fromJS)(e.data.result))),t(d("poundage","name",e.data.result.name)))})}}),m=(t.savePoundageConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"insert",t=arguments[1];return function(a,r){var l=r().accountConfigState.get("poundageTemp"),u=l.get("categoryUuid"),c=l.get("poundageNeedProject"),s=l.get("poundageNeedCurrent");a({type:n.SWITCH_LOADING_MASK}),(0,i.default)(e+"Poundage","POST",JSON.stringify({categoryUuid:u,poundageNeedProject:c,poundageNeedCurrent:s}),function(e){a({type:n.SWITCH_LOADING_MASK}),(0,o.showMessage)(e,"show")&&(t(),a(m()))})}},t.initPoundageTemp=function(){return{type:n.INIT_POUNDAGE_TEMP}});t.getPaoundgeConfig=function(){return function(e){e({type:n.SWITCH_LOADING_MASK}),(0,i.default)("getPoundage","GET","",function(t){e({type:n.SWITCH_LOADING_MASK}),(0,o.showMessage)(t)&&(e({type:n.GET_POUNDGE_ACCOUNT,data:t.data}),t.data.categoryUuid&&e(f(t.data.categoryUuid)))})}},t.getAccountRegretList=function(e){return function(t){t({type:n.SWITCH_LOADING_MASK}),(0,r.default)("getAccountRegretList","GET","",function(a){t({type:n.SWITCH_LOADING_MASK}),(0,o.showMessage)(a)&&(t(d("regret","accountRegretList",(0,l.fromJS)(a.data.accountRegretList))),e&&e())})}},t.saveAccountRegret=function(e,t,a){return function(i){i({type:n.SWITCH_LOADING_MASK}),(0,r.default)("saveAccountRegret","POST",JSON.stringify({uuid:e,newType:t}),function(e){i({type:n.SWITCH_LOADING_MASK}),(0,o.showMessage)(e,"show")&&(i({type:n.INIT_REGRETTEMP}),i(u.getRunningAccount()),a&&a())})}},t.getRunningAccount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){(0,r.default)("getRunningAccount","GET","currentPage="+e+"&pageSize=1",function(a){(0,o.showMessage)(a)&&t({type:n.GET_ACCOUNT_CONFIG_LIST,list:a.data.resultList,currentPage:e,pageCount:a.data.pages})})}}},1288:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=g(a(100)),r=g(a(14)),i=g(a(129)),o=g(a(89)),l=g(a(45)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(99),a(78),a(128),a(88),a(55);var c=g(a(1)),s=(g(a(0)),a(18));a(56);a(1240);var d=m(a(27)),f=(a(22),g(a(1244)),a(127),m(a(1241)));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=l.default.Option,y=l.default.OptGroup,E=(o.default.Group,i.default.Group,function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={addUnit:!1,name:"",uuid:"",isStandard:!1},C(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,i=t.selectListOne,o=t.selectListTwo,u=t.onChange,m=t.name,g=t.onSwitch,C=t.style,E=t.disabled,S=t.addUnitdisabled,T=this.state,_=T.addUnit;T.value;return!_||S?c.default.createElement(l.default,{disabled:E,style:C,value:m||"",placeholder:"请选择",dropdownRender:function(t){return c.default.createElement("div",null,t,S?"":c.default.createElement("div",{onMouseDown:function(e){return e.preventDefault()},style:{padding:"8px",cursor:"pointer"},onClick:function(){e.setState({addUnit:!0}),a(f.changeInventoryCardContent("unit",(0,s.fromJS)({})))}},c.default.createElement(r.default,{type:"plus"})," 新增单位"))},onChange:function(e,t){var a=e.split(d.TREE_JOIN_STR),n=a[0],r=a[1],i=a[2],o=a[3],l=a[4],c=a[5];u({uuid:n,name:r,isStandard:i,unitList:o,basicUnitUuid:l,unitQuantity:c},t)}},o.size?c.default.createElement(y,{label:"自定义单位"},o.map(function(e){return c.default.createElement(h,{key:e.get("uuid"),value:""+e.get("uuid")+d.TREE_JOIN_STR+e.get("name")+d.TREE_JOIN_STR+e.get("isStandard")+d.TREE_JOIN_STR+JSON.stringify(e.get("unitList").toJS()),basicStandardUnitQuantityList:[e.get("basicStandardUnitQuantity")].concat(p(e.get("unitList").toJS().map(function(e){return e.basicStandardUnitQuantity}))),basicStandardUnitUuidList:[e.get("basicStandardUnitUuid")].concat(p(e.get("unitList").toJS().map(function(e){return e.basicStandardUnitUuid}))),isCustom:!0},e.get("fullName"))})):"",c.default.createElement(y,{label:"标准单位"},i.map(function(e){return c.default.createElement(h,{key:e.get("uuid"),value:""+e.get("uuid")+d.TREE_JOIN_STR+e.get("name")+d.TREE_JOIN_STR+e.get("isStandard")+d.TREE_JOIN_STR+d.TREE_JOIN_STR+e.get("basicUnitUuid")+d.TREE_JOIN_STR+e.get("basicUnitQuantity")},e.get("name"))}))):c.default.createElement("div",{className:"inventory-xfn-input"},c.default.createElement(n.default,{disabled:E,placeholder:"输入单位",value:m||"",onChange:function(e){u({uuid:"",name:e.target.value,isStandard:!1},{props:{}})}}),E?"":c.default.createElement("span",null,c.default.createElement(r.default,{type:"close",style:{cursor:"pointer"},onClick:function(){e.setState({addUnit:!1}),g()}})))}}]),t}());t.default=E},1291:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,a=arguments[1];return((e={},o(e,i.INIT_YLLS,function(){return l}),o(e,i.GET_PREVIEW_RUNNING_BUSINESS_FETCH,function(){return t=(t=t.setIn(["views","refreshList"],a.refreshList)).set("jrOri",(0,r.fromJS)(a.receivedData.jrOri)).set("category",(0,r.fromJS)(a.receivedData.category)).set("processInfo",a.receivedData.processInfo?(0,r.fromJS)(a.receivedData.processInfo):null).set("lsItemData",(0,r.fromJS)(n({},a.receivedData.category,a.receivedData.jrOri))).set("currentItem",a.currentItem).setIn(["views","fromPage"],a.fromPage).setIn(["views","uuidList"],a.uuidList)}),o(e,i.GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH,function(){return t=t.set("jrOri",(0,r.fromJS)(a.receivedData.jrOri)).set("category",(0,r.fromJS)(a.receivedData.category)).set("processInfo",a.receivedData.processInfo?(0,r.fromJS)(a.receivedData.processInfo):null).set("lsItemData",(0,r.fromJS)(n({},a.receivedData.category,a.receivedData.jrOri))).set("currentItem",a.item)}),o(e,i.GET_PREVIEW_RELATED_RUNNING_BUSINESS_FETCH,function(){return t=t.set("relatedJrOri",(0,r.fromJS)(a.receivedData.jrOri)).set("relatedCategory",(0,r.fromJS)(a.receivedData.category)).set("relatedProcessInfo",a.receivedData.processInfo?(0,r.fromJS)(a.receivedData.processInfo):null).setIn(["relatedJrOri","uuidList"],a.uuidList)}),e)[a.type]||function(){return t})()};var r=a(18),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(493));function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=(0,r.fromJS)({views:{fromPage:"",uuidList:[],showMask:!1,refreshList:{}},lsItemData:{},currentItem:{},jrOri:{},category:{},processInfo:null,relatedJrOri:{},relatedCategory:{},relatedProcessInfo:null})},1295:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.relativeCardTemp={name:"",code:"",isPayUnit:!0,isReceiveUnit:!0,payableAcName:"应付账款",receivableAcName:"应收账款",advanceAcName:"预收账款",prepaidAcName:"预付账款",payableAcId:"2202",receivableAcId:"1122",advanceAcId:"2203",prepaidAcId:"1123",companyAddress:"",companyTel:"",financeName:"",financeTel:"",remark:"",receivableOpened:"",advanceOpened:"",payableOpened:"",prepaidOpened:"",categoryTypeList:[],enablePrepaidAc:!0,enableAdvanceAc:!0,contacterInfo:!1,isCheckOut:!1},t.relativeHighTypeTemp={name:"",isPayUnit:!1,isReceiveUnit:!1,isAppliedInvoicing:!1,isAppliedLedger:!1,isAppliedWater:!0,advanceAcId:"",advanceAcName:"",payableAcId:"",payableAcName:"",prepaidAcId:"",prepaidAcName:"",receivableAcId:"",receivableAcName:""},t.relativeTypeBtnStatus={isAdd:!1,isDelete:!1,treeUuid:"",treeName:"全部",isUp:!1,isDown:!1,isEdit:!1,parentUuid:""},t.relativeTypeTemp={name:"",remark:"",parentName:"全部",parentUuid:"",currentUnitCtgyUuid:""},t.inventoryHighTypeTemp={name:"",uuid:"",isAppliedSale:!1,isAppliedPurchase:!1,isAppliedProduce:!1,isAppliedWater:!0,isAppliedInvoicing:!1},t.inventoryCardTypeTemp={parentUuid:"",name:"",remark:"",ctgyUuid:"",parentName:"",uuid:""},t.inventoryCardTemp={code:"",name:"",inventoryNature:5,inventoryAcName:"库存商品",inventoryAcId:"1405",opened:"",remark:"",isAppliedSale:!0,isAppliedPurchase:!0,isAppliedProduce:!1,categoryTypeList:[],contacterInfo:!1,isCheckOut:!1,warehouseList:[],isOpenedQuantity:!1,isUniformPrice:!1,unit:{unitList:[]},openedQuantity:"",unitPriceList:[]},t.inventorySettingBtnStatus={isAdd:!1,isDelete:!1,treeUuid:"",treeName:"全部",isUp:!1,isDown:!1,isEdit:!1,parentUuid:""},t.projectHighTypeTemp={name:"",commonFee:!1,uuid:""},t.projectCardTemp={name:"",code:"",selectUuid:"",selectName:"",categoryTypeList:[{ctgyUuid:"",subordinateUuid:""}]},t.projectTypeBtnStatus={isAdd:!1,isDelete:!1,treeUuid:"",treeName:"全部",isUp:!1,isDown:!1,upUuid:"",downUuid:"",isEdit:!1,parentUuid:""},t.projectTypeTemp={name:"",remark:"",parentName:"全部",parentUuid:"",uuid:""}},1296:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=f(a(45)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(55);var o=f(a(1)),l=(f(a(0)),a(18),a(17)),u=d(a(27)),c=a(491),s=d(a(485));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}var m=r.default.Option,g=(0,l.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.insertOrModify,n=e.paymentTypeStr,i=e.hideCategoryList,l=[];return function e(t){return t.map(function(t,a){t.childList&&t.childList.length?e(t.childList):l.push(o.default.createElement(m,{value:""+t.categoryType+u.TREE_JOIN_STR+t.fullCategoryName,key:t.uuid},t.name))})}(i?i.toJS():[]),o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,"流水类别："),o.default.createElement("div",null,o.default.createElement(r.default,{disabled:"modify"===a,value:n,onChange:function(e){var a=e.split(u.TREE_JOIN_STR);t(c.editRunningAllActions.changeEditCalculatePaymentType(a[0])),t(s.changeEditCalculateCommonString("",["views","paymentTypeStr"],a[1]))}},l)))}}]),t}())||n;t.default=g},1302:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_PROJECT_CONF="INIT_PROJECT_CONF",t.PROJECT_GET_HTIGH_TYPE="PROJECT_GET_HTIGH_TYPE",t.GET_PROJECT_LIST_AND_TREE="GET_PROJECT_LIST_AND_TREE",t.CHANGE_ACTIVE_PROJECT_HIGH_TYPE="CHANGE_ACTIVE_PROJECT_HIGH_TYPE",t.CHANGE_PEOJECT_CONF_CARD_USED_STATUS="CHANGE_PEOJECT_CONF_CARD_USED_STATUS",t.CHANGE_PEOJECT_CONF_CARD_BOX_STATUS="CHANGE_PEOJECT_CONF_CARD_BOX_STATUS",t.SELECT_PEOJECT_CONF_CARD_ALL="SELECT_PEOJECT_CONF_CARD_ALL",t.DELETE_PROJECT_CONF_CARD="DELETE_PROJECT_CONF_CARD",t.SELECT_PROJECT_CARD_BY_TYPE="SELECT_PROJECT_CARD_BY_TYPE",t.GET_PROJECT_HIGH_TYPE_ONE="GET_PROJECT_HIGH_TYPE_ONE",t.CHANGE_PREJECT_HIGH_TYPE_CONTENT="CHANGE_PREJECT_HIGH_TYPE_CONTENT",t.BEFORE_ADD_PROJECT_CARD="BEFORE_ADD_PROJECT_CARD",t.BEFORE_ADD_PROJECT_CARD_FROM_RUNNING="BEFORE_ADD_PROJECT_CARD_FROM_RUNNING",t.CHANGE_PROJECT_CARD_CONTENT="CHANGE_PROJECT_CARD_CONTENT",t.CHANGE_PROJECT_VIEWS_CONTENT="CHANGE_PROJECT_VIEWS_CONTENT",t.BEFORE_EDIT_PROJECT_CARD="BEFORE_EDIT_PROJECT_CARD",t.CHANGE_PROJECT_CARD_CATEGORY_TYPE="CHANGE_PROJECT_CARD_CATEGORY_TYPE",t.SAVE_PROJECT_CARD="SAVE_PROJECT_CARD",t.NEW_SAVE_PROJECT_CARD="NEW_SAVE_PROJECT_CARD",t.CHANGE_PROJECT_PROPERTY="CHANGE_PROJECT_PROPERTY",t.BEFORE_ADD_PROJECT_CONFIG_CARD_TYPE="BEFORE_ADD_PROJECT_CONFIG_CARD_TYPE",t.BEFORE_INSERT_PROJECT_CONF_CARD_TYPE="BEFORE_INSERT_PROJECT_CONF_CARD_TYPE",t.CHANGE_PROJECT_CONF_CARD_TYPE_CONTENT="CHANGE_PROJECT_CONF_CARD_TYPE_CONTENT",t.SELECT_PROJECT_CONF_CARD_TYPE="SELECT_PROJECT_CONF_CARD_TYPE",t.GET_PROJECT_CONF_TYPE_CONTENT="GET_PROJECT_CONF_TYPE_CONTENT",t.CHANGE_PROJECT_CONF_CARD_TYPE_BOX_STATUS="CHANGE_PROJECT_CONF_CARD_TYPE_BOX_STATUS",t.PROJECT_CONF_TYPE_DELETE_BTN_SHOW="PROJECT_CONF_TYPE_DELETE_BTN_SHOW",t.CONFIRM_DELETE_PROJECT_CONF_TYPE="CONFIRM_DELETE_PROJECT_CONF_TYPE",t.CHANGE_PROJECT_CONF_TYPE_POSITION="CHANGE_PROJECT_CONF_TYPE_POSITION",t.PROJECT_CONF_DELETE_BTN_SHOW="PROJECT_CONF_DELETE_BTN_SHOW",t.CANCLE_PROJECT_CONF_TYPE_BTN="CANCLE_PROJECT_CONF_TYPE_BTN",t.SAVE_PROJECT_CONF_CARD_TYPE="SAVE_PROJECT_CONF_CARD_TYPE",t.ADJUST_PROJECT_CONF_CARD_TYPE_LIST="ADJUST_PROJECT_CONF_CARD_TYPE_LIST"},1303:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=S(a(14)),i=S(a(1256)),o=S(a(45)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(78),a(1257),a(55);var u=S(a(1)),c=a(17),s=a(18),d=(S(a(6)),a(56),S(a(1237))),f=E(a(27)),m=S(a(483)),g=(S(a(90)),a(22),a(101)),p=S(a(1520)),C=S(a(1461)),h=E(a(172)),y=E(a(484));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}var T=o.default.Option,_=(0,c.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showCardModal:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.projectCardList,a=e.oriTemp,n=this.props,r=n.projectCardList,i=n.dispatch,o=a.get("propertyCost"),l=a.get("propertyCostList");if(r!==t){var u=t.getIn([0,"code"]),c=t.getIn([0,"projectProperty"]);switch(u){case"ASSIST":i(h.changeLrAccountCommonString("ori","propertyCost","XZ_FZSCCB"));break;case"MAKE":i(h.changeLrAccountCommonString("ori","propertyCost","XZ_ZZFY"));break;case"INDIRECT":i(h.changeLrAccountCommonString("ori","propertyCost","XZ_JJFY"));break;case"MECHANICAL":i(h.changeLrAccountCommonString("ori","propertyCost","XZ_JXZY"));break;default:"XZ_PRODUCE"===c?i(h.changeLrAccountCommonString("ori","propertyCost","XZ_SCCB")):"XZ_CONSTRUCTION"===c?i(h.changeLrAccountCommonString("ori","propertyCost","XZ_HTCB")):"XZ_FINANCE"!==o&&"XZ_MANAGE"!==o&&"XZ_SALE"!==o&&c&&o&&i(h.changeLrAccountCommonString("ori","propertyCost",l.get(0)))}}}},{key:"render",value:function(){var e=this,t=this.props,a=t.projectCardList,n=t.usedProject,o=t.projectList,l=t.dispatch,c=(t.beProject,t.amount,t.taxRate),E=(t.beAccrued,t.oriState,t.showSingleModal),S=t.MemberList,_=t.selectThingsList,v=t.thingsList,b=t.oriTemp,L=t.flags,I=t.moduleInfo,N=t.projectRange,O=void 0===N?b.get("projectRange"):N,A=t.insertOrModify,R=this.state.showCardModal,w=L.get("selectedKeys"),P=L.get("currentCardType"),U=L.get("pageCount"),M=b.get("categoryType"),k=(b.get("propertyCarryover"),b.get("stockStrongList")),j=(b.get("carryoverStrongList"),b.get("strongList"),b.get("propertyCostList"),b.get("propertyCost"),b.get("newProjectRange")||(0,s.fromJS)([]));return u.default.createElement("div",null,n&&(0,g.ProductProjectTest)(M,j)?a.map(function(t,n){return u.default.createElement("div",{key:n,className:"project-content-area",style:a.size>1?{}:{border:"none",marginBottom:"0"}},u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"项目："),u.default.createElement("div",{className:"chosen-right"},u.default.createElement(m.default,{combobox:!0,showSearch:!0,disabled:k.size&&"insert"!==A,value:(0,g.projectCodeTest)(t.get("code"))+" "+(t.get("name")?t.get("name"):""),dropdownRender:function(t){return u.default.createElement("div",null,t,u.default.createElement(i.default,{style:{margin:"4px 0",display:O.size?"":"none"}}),O.size?u.default.createElement("div",{style:{padding:"8px",cursor:"pointer"},onMouseDown:function(){l(y.beforeRunningAddProjectCard(function(){e.setState({showCardModal:!0})},O,"lrls"))}},u.default.createElement(r.default,{type:"plus"})," 新增项目"):"")},onChange:function(e,a){var r=e.split(f.TREE_JOIN_STR),i=r[0],o=r[1],u=r[2],c=t.get("amount");l(h.changeLrAccountCommonString("ori",["projectCardList",n],(0,s.fromJS)({cardUuid:i,name:u,code:o,amount:c,projectProperty:a.props.projectProperty})))}},(0,g.CommonProjectTest)(b,o).map(function(e,t){return u.default.createElement(T,{key:t,value:""+e.get("uuid")+f.TREE_JOIN_STR+e.get("code")+f.TREE_JOIN_STR+e.get("name"),projectProperty:e.get("projectProperty")},(0,g.projectCodeTest)(e.get("code"))+" "+e.get("name"))})),u.default.createElement("div",{className:"chosen-word",onClick:function(){k.size||(l(h.getProjectAllCardList(O,"showSingleModal")),l(h.changeLrAccountCommonString("",["flags","currentCardType"],"project")),e.setState({index:n,curAmount:t.get("amount")}))}},"选择"))),a.size>1?u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"金额："),u.default.createElement(d.default,{value:t.get("amount"),onChange:function(e){(0,g.numberTest)(e,function(e){l(h.changeLrAccountCommonString("ori",["projectCardList",n,"amount"],e)),l(h.autoCalculateProjectAmount()),c&&l(h.changeAccountTaxRate())},"LB_FYZC"===M)}})):"")}):null,u.default.createElement(C.default,{showModal:R,closeModal:function(){return e.setState({showCardModal:!1})},dispatch:l,moduleInfo:I,fromPage:"editRunning"}),E&&"project"===P?u.default.createElement(p.default,{pageCount:U,dispatch:l,showSingleModal:E&&"project"===P,MemberList:S,selectThingsList:_,thingsList:(0,g.CommonProjectTest)(b,v),selectedKeys:w,title:"选择项目",selectFunc:function(t,a,n,r){l(h.changeLrAccountCommonString("ori",["projectCardList",e.state.index],(0,s.fromJS)({code:t,name:a,cardUuid:n,amount:e.state.curAmount,projectProperty:r}))),l(h.changeLrAccountCommonString("",["flags","showSingleModal"],!1))},selectListFunc:function(e,t,a,n){l("all"===e?h.getProjectAllCardList(O,"showSingleModal",!0,a,n):h.getProjectSomeCardList(e,t,a,n))}}):"")}}]),t}())||n;t.default=_},1304:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccountProjectCardList=t.getAccountContactsCardList=t.getAccountRunningCate=t.changeSearchRunningChooseValue=t.changeSearchRunningAllChildItemShow=t.changeSearchRunningChildItemShow=t.getgetSearchRunningSortFun=t.getRunningBusinessDuty=t.deleteSingleFlow=t.changeBeforeAmount=t.getManagerCategoryList=t.setDefineMadalInitState=t.setInvioceMadalInitState=t.setCarryoverMadalInitState=t.setManageMadalInitState=t.changeCxAccountCommonOutString=t.changeCxAccountCommonString=t.changeCurrentPage=t.getSearchRunningItem=t.getBusinessBeforeSwitch=t.insertRunningInvioceDefineModal=t.insertRunningInvioceModal=t.insertlrAccountJzsyModal=t.insertlrAccountCarryoverModal=t.insertCommonModal=t.insertRunningManagerModal=t.getBusinessDefineModal=t.getBusinessInvioceModal=t.calculateGainForJzsy=t.getBusinessBackModal=t.getBusinessTakeBackModal=t.getBusinessDefrayModal=t.getBusinessGrantModal=t.getBusinessJzsyModal=t.getBusinessManagerModal=t.beforeRunningPayOrReceive=t.getAccountDimensionFetch=t.afterModifyAccountAllList=t.changePzCommonString=t.deleteVcItemFetch=t.runningInsertOrModifyVc=t.deleteAccountItemCardAndRunning=t.accountItemCheckboxCheck=t.accountItemCheckboxCheckAll=t.getBusinessList=t.getPeriodAndBusinessList=void 0;var n=v(a(37)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};a(38);var i=_(a(492)),o=v(a(52)),l=a(18),u=a(22),c=_(a(30)),s=_(a(27)),d=_(a(43)),f=_(a(60)),m=_(a(177)),g=(_(a(1245)),_(a(1242))),p=_(a(172)),C=_(a(1249)),h=_(a(130)),y=_(a(102)),E=_(a(485)),S=_(a(484)),T=a(488);function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}t.getPeriodAndBusinessList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(n,r){n({type:i.SWITCH_LOADING_MASK});r().searchRunningState;var l=""===a?1:a;(0,o.default)("getSearchRunningList","POST",JSON.stringify({start:e||"",end:e||"",getPeriod:"true",accountUuid:t,currentPage:l,pageSize:s.CXLS_LIMIE_LENGTH}),function(a){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)){var r=n(y.reportGetIssuedateAndFreshPeriod(a)),o=e||r,c=a.data.periodDtoJson?n(d.everyTableGetIssuedate(a.data.periodDtoJson)):"";n({type:i.GET_SEARCH_BUSINESS_LIST,receivedData:a.data.result.jrList,receivedExtra:a.data.result,period:a.data.periodDtoJson,issuedate:o,endissuedate:o,getPeriod:"true",issues:c,accountUuid:t,currentPage:l,pageCount:a.data.result.pageCount,reExpand:!0})}}),n(g.getRunningAccount())}};var b=t.getBusinessList=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",f=arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],g=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return function(p,C){p({type:i.SWITCH_LOADING_MASK});var h=m&&a?a.split(s.TREE_JOIN_STR)[0]:"",y=C().searchRunningState,E=""===r?y.get("currentPage"):r,S=c?y.getIn(["flags","searchType"]):"",T=l||y.getIn(["flags","orderType"]),_=(y.getIn(["flags","chooseValue"]),"-"===e.substr(4,1)?e:e.substr(0,4)+"-"+e.substr(6,2)),v="-"===t.substr(4,1)?t:t.substr(0,4)+"-"+t.substr(6,2),b=void 0;switch(T){case"SEARCH_ORDER_DATE":b=y.getIn(["orderByList","dateSortType"]);break;case"SEARCH_ORDER_JR_INDEX":b=y.getIn(["orderByList","indexSortType"]);break;case"SEARCH_ORDER_CATEGORY_TYPE":b=y.getIn(["orderByList","categorySortType"]);break;case"SEARCH_ORDER_CERTIFICATE":b=y.getIn(["orderByList","certificateSortType"]);break;case"SEARCH_ORDER_CREATE_NAME":b=y.getIn(["orderByList","nameSortType"])}b=""===f?b:f,(0,o.default)("getSearchRunningList","POST",JSON.stringify({start:_||"",end:v||_,accountUuid:h,getPeriod:"true",orderBy:T,searchType:S,searchContent:c,isAsc:b,currentPage:E,pageSize:s.CXLS_LIMIE_LENGTH,isAccount:m}),function(r){if(p({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(r)){var o=r.data.periodDtoJson?p(d.everyTableGetIssuedate(r.data.periodDtoJson)):"";p({type:i.GET_SEARCH_BUSINESS_LIST,receivedData:r.data.result.jrList,receivedExtra:r.data.result,period:r.data.periodDtoJson,issuedate:e,endissuedate:t,issues:o,accountUuid:a,currentPage:E,isAsc:b,orderBy:T,isAccount:m,pageCount:r.data.result.pageCount,getPeriod:"true",reExpand:g}),r.data.result.msg&&n.default.info(r.data.result.msg)}})}},L=(t.accountItemCheckboxCheckAll=function(e,t){return{type:i.SEARCH_ITEM_CHECKBOX_CHECK_ALL,selectAll:e,list:t}},t.accountItemCheckboxCheck=function(e,t){return{type:i.SEARCH_ITEM_CHECKBOX_CHECK,checked:e,item:t}},t.deleteAccountItemCardAndRunning=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments[2],r=arguments[3];return function(e,l){var s=a||l().searchRunningState.getIn(["flags","selectList"]),d=l().searchRunningState,f=d.getIn(["flags","issuedate"]),m=d.getIn(["flags","endissuedate"]),g=d.getIn(["flags","isAccount"]),p=d.getIn(["flags","curAccountUuid"]),C=d.getIn(["flags","orderType"]);c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(a){1===a.buttonIndex&&(e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunningItems","POST",JSON.stringify({deleteList:s,action:r}),function(a){if((0,u.showMessage)(a)){if(a.message)if(a.data.errorList.length){var r=a.data.errorList.join(",");n.default.error(r)}else n.default.success(a.message);e(b(f,m,p,"",C,t,"",g))}e({type:i.SWITCH_LOADING_MASK})}))}})}},t.runningInsertOrModifyVc=function(e,t,a,r){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments[5],s=arguments[6],d=arguments[7];return function(f,g){var p=g().searchRunningState,C=p.get("currentPage"),h=p.getIn(["flags","curAccountUuid"]),y=p.getIn(["flags","isAccount"]),E=p.getIn(["flags","orderType"]),S=p.getIn(["flags","endissuedate"]),T=0;f(L(["flags","pzDealNum"],T)),f(L(["flags","pzDealType"],"insert"));var _=t.sort(function(e,t){return parseInt(e.get("oriDate"))-parseInt(t.get("oriDate"))}).sort(function(e,t){return parseInt(e.get("jrNumber"))-parseInt(t.get("jrNumber"))}),v={runningPreview:"QUERY_JR-AUDIT",searchRunning:"QUERY_JR-AUDIT",searchRunningBatch:"QUERY_JR-AUDIT-BATCH_AUDIT"};if(t&&t.size>1)f(L(["flags","pzDealStatus"],!0)),function t(i,c){var s=0,d=setInterval(function(){s<.9?f(L(["flags","pzDealNum"],T+(s+=.01))):(clearInterval(d),f(L(["flags","pzDealNum"],T)))},100);(0,o.default)(a+"VcList","POST",JSON.stringify({uuidList:[i.getIn([c,"oriUuid"])],year:i.getIn([c,"currentYear"]),month:i.getIn([c,"currentMonth"]),vcindexlist:[i.getIn([c,"jrNumber"])],action:v[e]}),function(e){if((0,u.showMessage)(e))if(e.message)if(e.data.result.length){var a=e.data.result.join(",");n.default.error(a),clearInterval(d),f(L(["flags","pzDealStatus"],!1)),f(b(r,S,h,C,E,l,"",y))}else f(L(["flags","pzDealNum"],T+=1)),T<_.size?(clearInterval(d),t(_,T)):(clearInterval(d),f(L(["flags","pzDealStatus"],!1)),f(b(r,S,h,C,E,l,"",y)));else clearInterval(d),f(L(["flags","pzDealStatus"],!1));else clearInterval(d),f(L(["flags","pzDealStatus"],!1)),f(b(r,S,h,C,E,l,"",y))})}(_,0);else{var N=t.getIn([0,"oriUuid"]);f({type:i.SWITCH_LOADING_MASK}),(0,o.default)(a+"VcList","POST",JSON.stringify({uuidList:[N],year:t.getIn([0,"currentYear"]),month:t.getIn([0,"currentMonth"]),vcindexlist:[t.getIn([0,"jrNumber"])],action:v[e]}),function(e){if(f({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&e.message){if(e.data.result.length){var t=e.data.result.join(",");n.default.error(t)}else n.default.success(e.message);c?f(m.getPreviewNextRunningBusinessFetch(s,function(){d?d():f(I())})):d?d():f(I())}})}}},t.deleteVcItemFetch=function(e,t,a,n,r,l,c,s,d,f){return function(f,g){var p=g().searchRunningState,C=p.get("currentPage"),h=p.getIn(["flags","isAccount"]),y=p.getIn(["flags","curAccountUuid"]),E=p.getIn(["flags","orderType"]),S=p.getIn(["flags","endissuedate"]),T=0;f(L(["flags","pzDealNum"],T)),f(L(["flags","pzDealType"],"delete"));var _={runningPreview:"QUERY_JR-CANCEL_AUDIT",searchRunning:"QUERY_JR-CANCEL_AUDIT",searchRunningBatch:"QUERY_JR-CANCEL_AUDIT-BATCH_AUDIT"};console.log("ddd",_[e]);n&&n.length>1?(f(L(["flags","pzDealStatus"],!0)),function i(c){var s=0,d=setInterval(function(){s<.99?f(L(["flags","pzDealNum"],T+(s+=.01))):(clearInterval(d),f(L(["flags","pzDealNum"],T+.99)))},100);(0,o.default)("deleteVcList","POST",JSON.stringify({year:t||c.year,month:a||c.month,vcindexlist:[c.vcIndex],action:_[e]}),function(e){(0,u.showMessage)(e)?(T+=1,f(L(["flags","pzDealNum"],Math.floor(T))),T<n.length?(clearInterval(d),i(n[T])):(clearInterval(d),f(L(["flags","pzDealStatus"],!1)),f(b(r,S,y,C,E,l,"",h)))):(clearInterval(d),f(L(["flags","pzDealStatus"],!1)),f(b(r,S,y,C,E,l,"",h)))})}(n[0])):(f({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteVcList","POST",JSON.stringify({year:t||n[0].year,month:a||n[0].month,vcindexlist:[n[0].vcIndex],action:_[e]}),function(e){if(f({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e,"show")){var t=g().searchRunningState;t.get("currentPage"),t.getIn(["views","curAccountUuid"]),t.getIn(["flags","isAccount"]);c?f(m.getPreviewNextRunningBusinessFetch(s,function(){d?d():f(I())})):d?d():f(I())}}))}},t.changePzCommonString=function(e,t){return function(a){a({type:i.SEARCH_CHANGE_PZ_COMMON_STRING,name:e,value:t})}}),I=t.afterModifyAccountAllList=function(e){return function(t,a){var n=a().searchRunningState,r=n.getIn(["flags","issuedate"]),l=n.getIn(["flags","endissuedate"]),c=n.getIn(["flags","curAccountUuid"]),f=n.getIn(["flags","isAccount"]),m=n.get("currentPage"),g=f&&c?c.split(s.TREE_JOIN_STR)[0]:"",p=n.getIn(["flags","inputValue"]),C=p?n.getIn(["flags","searchType"]):"",h=n.getIn(["flags","orderType"]),y=r?"-"===r.substr(4,1)?r:r.substr(0,4)+"-"+r.substr(6,2):"",E=l?"-"===l.substr(4,1)?l:l.substr(0,4)+"-"+l.substr(6,2):"",S=void 0;switch(h){case"SEARCH_ORDER_DATE":S=n.getIn(["orderByList","dateSortType"]);break;case"SEARCH_ORDER_JR_INDEX":S=n.getIn(["orderByList","indexSortType"]);break;case"SEARCH_ORDER_CATEGORY_TYPE":S=n.getIn(["orderByList","categorySortType"]);break;case"SEARCH_ORDER_CERTIFICATE":S=n.getIn(["orderByList","certificateSortType"]);break;case"SEARCH_ORDER_CREATE_NAME":S=n.getIn(["orderByList","nameSortType"])}t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getSearchRunningList","POST",JSON.stringify({start:y||"",end:E||"",accountUuid:g,getPeriod:"true",orderBy:h,searchType:C,searchContent:p,isAsc:S,currentPage:m,pageSize:s.CXLS_LIMIE_LENGTH,isAccount:f}),function(a){if(t({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)){var n=a.data.periodDtoJson?t(d.everyTableGetIssuedate(a.data.periodDtoJson)):"";t({type:i.GET_SEARCH_BUSINESS_LIST,receivedData:a.data.result.jrList,receivedExtra:a.data.result,period:a.data.periodDtoJson,issuedate:r,endissuedate:l,issues:n,isReflash:e,isAccount:f,accountUuid:c,currentPage:m,isAsc:S,orderBy:h,pageCount:a.data.result.pageCount,getPeriod:"true"})}})}},N=(t.getAccountDimensionFetch=function(e,t,a,n,r,i,o){return function(l){l(N(e,t,a,n,r,i,o))}},function(e,t,a,n,r,l,c,s){return function(e){(0,o.default)("getRunningSettingInfo","GET","",function(t){(0,u.showMessage)(t)&&e({type:i.GET_SEARCH_CONF_ALL_SETTINGS,receivedData:t.data})})}}),O=(t.beforeRunningPayOrReceive=function(e,t,a,n,r){return function(o){a<0&&(a=-a,e="收"===e?"付":"收"),o({type:i.BEFORE_RUNNING_PAY_OR_RECEIVE,payDirection:e,assList:t,notHandleAmount:a,uuidList:n,runningList:r})}},t.getBusinessManagerModal=function(e,t,a,n,c){return function(s,f){s({type:i.SWITCH_LOADING_MASK});var m=f().allState.get("hideCategoryList").find(function(e){return"LB_SFGL"===e.get("categoryType")}).get("uuid"),g=t.get("jrJvUuid"),p=e.get("oriUuid"),C=e.get("categoryUuid"),h=(e.get("oriDate"),!!e.get("beOpened"));p||s(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getBusinessManagerModal",remark:"单笔流水核销"})),(0,o.default)("getJrOri","GET","oriUuid="+p,function(e){if(s({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var t=e.data.jrOri,o=t.notHandleAmount,d=t.oriState,f=t.handleType,p=t.oriDate;n=o<0?"JR_HANDLE_CZ"===f?"credit":"debit"===n?"credit":"debit":"credit"===n&&"STATE_YYZC_TG"!==d&&"STATE_YYZC_DJ"!==d&&"STATE_FY_DJ"!==d&&"STATE_SF_YJZZS"!==d?"credit":"debit",p>(0,u.formatDate)().substr(0,10)&&s(R(["modalTemp","oriDate"],p)),s(R("runningFlowTemp",(0,l.fromJS)(r({},e.data.jrOri,e.data.category)))),s(R(["runningFlowTemp","magenerType"],n)),s(R(["runningFlowTemp","actionFrom"],c)),s(R(["modalTemp","pendingManageDto"],(0,l.fromJS)({categoryUuid:C,pendingManageList:[{uuid:g,beOpened:h,oriDate:p}]}))),s(R(["modalTemp","amount"],Math.abs(e.data.jrOri.notHandleAmount))),s(R(["modalTemp","oriAbstract"],"核销账款")),s(R(["modalTemp","beOpened"],h)),s(R(["modalTemp","categoryUuid"],m)),a()}})}},t.getBusinessJzsyModal=function(e,t,a,n){return function(n,c){n({type:i.SWITCH_LOADING_MASK});var s=e.get("oriUuid");s||n(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getBusinessJzsyModal",remark:"单笔流水核销"})),(0,o.default)("getJrOri","GET","oriUuid="+s,function(s){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(s)){var d=r({},s.data.jrOri,s.data.category),f=d.billList.length?d.billList[0].tax:0,m=(d.amount-f).toFixed(2);n(R("runningFlowTemp",(0,l.fromJS)(d))),n(R(["modalTemp","pendingStrongList"],(0,l.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:d.jrIndex,oriDate:e.get("oriDate"),jrNumber:t.get("jrNumber"),beSelect:!0,amount:m}])));var g=(0,u.formatDate)().substr(0,10);if(d.oriDate>g&&n(R(["modalTemp","oriDate"],d.oriDate)),n(R(["modalTemp","oriState"],"STATE_CQZC_JZSY")),n(R(["modalTemp","categoryUuid"],d.categoryUuid)),n(R(["modalTemp","oriAbstract"],"长期资产处置损益")),n(R(["modalTemp","assets","cleaningAmount"],m)),d.beProject){n(R(["modalTemp","usedProject"],!0));var p=c().homeState.getIn(["data","userInfo","sobInfo","sobId"]),C=d.projectRange;(0,o.default)("getProjectCardList","POST",JSON.stringify({sobId:p,categoryList:C,needCommonCard:!1}),function(e){(0,u.showMessage)(e)&&n(R(["flags","projectList"],(0,l.fromJS)(e.data.result)))})}n(O()),a()}})}},t.getBusinessGrantModal=function(e,t,a,n){return function(n,c){n({type:i.SWITCH_LOADING_MASK});var s=e.get("oriUuid");(0,o.default)("getJrOri","GET","oriUuid="+s,function(o){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(o)){var c=r({},o.data.jrOri,o.data.category),s=(e.get("amount")-(e.get("tax")||0)).toFixed(2),d=c.notHandleAmount<0?"debit":"credit";n(R("runningFlowTemp",(0,l.fromJS)(c))),n(R(["runningFlowTemp","magenerType"],d)),n(R(["modalTemp","pendingStrongList"],(0,l.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:c.jrIndex,oriDate:e.get("oriDate"),beSelect:!0,amount:s}])));var f=(0,u.formatDate)().substr(0,10);c.oriDate>f&&n(R(["modalTemp","oriDate"],c.oriDate)),n(R(["modalTemp","oriState"],"STATE_XC_FF")),n(R(["modalTemp","categoryUuid"],c.categoryUuid)),n(R(["modalTemp","oriAbstract"],{SX_GZXJ:"发放工资薪金",SX_FLF:"支付"+c.categoryName,SX_QTXC:"发放"+c.categoryName}[c.propertyPay])),n(R(["modalTemp","amount"],Math.abs(c.notHandleAmount))),n(R(["modalTemp","payment","actualAmount"],Math.abs(c.notHandleAmount))),a()}})}},t.getBusinessDefrayModal=function(e,t,a,n){return function(n,c){n({type:i.SWITCH_LOADING_MASK});var s=e.get("oriUuid");(0,o.default)("getJrOri","GET","oriUuid="+s,function(o){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(o)){var c=r({},o.data.jrOri,o.data.category),d=c.categoryType,f=(e.get("amount")-(e.get("tax")||0)).toFixed(2),m=c.notHandleAmount<0?"debit":"credit";n(R("runningFlowTemp",(0,l.fromJS)(c))),n(R(["runningFlowTemp","magenerType"],m)),n(R(["modalTemp","pendingStrongList"],(0,l.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:c.jrIndex,oriDate:e.get("oriDate"),beSelect:!0,amount:f,notHandleAmount:c.notHandleAmount,oriUuid:s}])));var g=(0,u.formatDate)().substr(0,10);c.oriDate>g&&n(R(["modalTemp","oriDate"],c.oriDate)),n(R(["modalTemp","oriState"],"LB_SFZC"===d?"STATE_SF_JN":"STATE_XC_JN")),n(R(["modalTemp","categoryUuid"],c.categoryUuid)),n(R(["modalTemp","oriAbstract"],""+("LB_SFZC"===d?{SX_QYSDS:"缴纳企业所得税",SX_QTSF:"缴纳"+c.categoryName,SX_ZZS:"缴纳增值税"}[c.propertyTax]:"缴纳"+{SX_SHBX:"社会保险",SX_ZFGJJ:"住房公积金"}[c.propertyPay]))),"LB_XCZC"===d?(n(R(["modalTemp","payment","actualAmount"],Math.abs(c.notHandleAmount))),"SX_ZFGJJ"===c.propertyPay?n(R(["modalTemp","payment","companyAccumulationAmount"],Math.abs(c.notHandleAmount))):n(R(["modalTemp","payment","companySocialSecurityAmount"],Math.abs(c.notHandleAmount)))):n(R(["modalTemp","amount"],Math.abs(c.notHandleAmount))),a()}})}},t.getBusinessTakeBackModal=function(e,t,a,n){return function(n,c){n({type:i.SWITCH_LOADING_MASK});var s=e.get("oriUuid");(0,o.default)("getJrOri","GET","oriUuid="+s,function(o){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(o)){var c=r({},o.data.jrOri,o.data.category),s=(e.get("amount")-(e.get("tax")||0)).toFixed(2);n(R("runningFlowTemp",(0,l.fromJS)(c))),n(R(["modalTemp","pendingStrongList"],(0,l.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:c.jrIndex,oriDate:e.get("oriDate"),beSelect:!0,amount:s}])));var d=(0,u.formatDate)().substr(0,10);c.oriDate>d&&n(R(["modalTemp","oriDate"],c.oriDate)),n(R(["modalTemp","oriState"],"STATE_ZF_SH")),n(R(["modalTemp","categoryUuid"],c.categoryUuid)),n(R(["modalTemp","oriAbstract"],"暂付款收回")),n(R(["modalTemp","amount"],c.notHandleAmount)),a()}})}},t.getBusinessBackModal=function(e,t,a,n){return function(n,c){n({type:i.SWITCH_LOADING_MASK});var s=e.get("oriUuid");(0,o.default)("getJrOri","GET","oriUuid="+s,function(o){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(o)){var c=r({},o.data.jrOri,o.data.category),s=(e.get("amount")-(e.get("tax")||0)).toFixed(2);n(R("runningFlowTemp",(0,l.fromJS)(c))),n(R(["modalTemp","pendingStrongList"],(0,l.fromJS)([{jrJvUuid:t.get("jrJvUuid"),jrIndex:c.jrIndex,oriDate:e.get("oriDate"),beSelect:!0,amount:s}])));var d=(0,u.formatDate)().substr(0,10);c.oriDate>d&&n(R(["modalTemp","oriDate"],c.oriDate)),n(R(["modalTemp","oriState"],"STATE_ZS_TH")),n(R(["modalTemp","categoryUuid"],c.categoryUuid)),n(R(["modalTemp","oriAbstract"],"暂收款退还")),n(R(["modalTemp","amount"],c.notHandleAmount)),a()}})}},t.calculateGainForJzsy=function(){return function(e,t){var a=t().searchRunningState,n=a.get("modalTemp"),r=a.get("runningFlowTemp"),o=r.getIn(["billList",0,"tax"])||0,l=r.get("amount")-o,u=n.getIn(["assets","depreciationAmount"])?n.getIn(["assets","depreciationAmount"]):0,c=n.getIn(["assets","originalAssetsAmount"])?n.getIn(["assets","originalAssetsAmount"]):0,s=(Number(c)-Number(u)).toFixed(2),d=Math.abs(s-l).toFixed(2),f=void 0,m=void 0;Number(s)<=l?(f=["modalTemp","netProfitAmount"],m=["modalTemp","lossAmount"]):(f=["modalTemp","lossAmount"],m=["modalTemp","netProfitAmount"]),e(R(["modalTemp","amount"],d)),e({type:i.SEARCH_CALCULATE_GAIN_OR_LOSS,deletePlace:m,place:f,diff:d})}}),A=(t.getBusinessInvioceModal=function(e,t,a,n){return function(n,r){n({type:i.SWITCH_LOADING_MASK});var c=e.get("oriUuid"),s=r().allState.get("hideCategoryList").find(function(e){e.get("categoryType")}),f=s&&s.get("uuid");c||n(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getBusinessInvioceModal",remark:"单笔流水核销"})),(0,o.default)("getJrOri","GET","oriUuid="+c,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var r=e.data.jrOri,o=r.billList[0].oriState,c={STATE_KJFP_TS:"BILL_MAKE_OUT_TYPE_TS",STATE_KJFP_XS:"BILL_MAKE_OUT_TYPE_XS"}[o],s={STATE_KJFP_TS:"退销开具红字发票",STATE_KJFP_XS:"收入开具发票"}[o],d=r.billList[0],m=d.oriUuid,g=d.tax,p=d.taxRate,C=d.notHandleAmount,h=[{oriUuid:m,taxAmount:g,taxRate:p,categoryUuid:r.categoryUuid,oriState:r.billList[0].oriState,oriAmount:r.amount,jrJvUuid:t.get("jrJvUuid"),oriDate:r.oriDate}],y=(0,u.formatDate)().substr(0,10);r.oriDate>y&&n(R(["modalTemp","oriDate"],r.oriDate)),n(R(["modalTemp","categoryUuid"],f)),n(R(["modalTemp","oriAbstract"],s)),n(R(["modalTemp","billType"],c)),n(R(["modalTemp","oriState"],o)),n(R(["modalTemp","amount"],C)),n(R(["modalTemp","pendingStrongList"],(0,l.fromJS)(h))),a()}})}},t.getBusinessDefineModal=function(e,t,a,n){return function(n,r){n({type:i.SWITCH_LOADING_MASK});var c=e.get("oriUuid"),s=r().allState.get("hideCategoryList").find(function(e){e.get("categoryType")}),f=s&&s.get("uuid");c||n(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getBusinessDefineModal",remark:"单笔流水核销"})),(0,o.default)("getJrOri","GET","oriUuid="+c,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var r=e.data.jrOri,o=(r.billList[0].tax,r.billList[0].tax,r.billList[0].oriState),c={STATE_FPRZ_CG:"BILL_AUTH_TYPE_CG",STATE_FPRZ_TG:"BILL_AUTH_TYPE_TG"}[o]||"BILL_AUTH_TYPE_CG",s={STATE_FPRZ_CG:"增值税专用发票认证",STATE_FPRZ_TG:"退购红字发票认证"}[o],d=r.billList[0],m=d.oriUuid,g=d.tax,p=d.notHandleAmount,C=[{oriUuid:m,taxAmount:g,taxRate:null,categoryUuid:r.categoryUuid,oriAmount:null,jrJvUuid:t.get("jrJvUuid"),oriDate:r.oriDate}],h=(0,u.formatDate)().substr(0,10);r.oriDate>h&&n(R(["modalTemp","oriDate"],r.oriDate)),n(R(["modalTemp","oriAbstract"],s)),n(R(["modalTemp","categoryUuid"],f)),n(R(["modalTemp","billType"],c)),n(R(["modalTemp","oriState"],o)),n(R(["modalTemp","amount"],p)),n(R(["modalTemp","pendingStrongList"],(0,l.fromJS)(C))),a()}})}},t.insertRunningManagerModal=function(e,t,a){return function(t,r){var c=r().searchRunningState,s=c.get("runningFlowTemp"),d=c.get("modalTemp"),f=d.get("oriDate"),m=d.get("oriAbstract"),g=d.get("accounts"),p=d.get("amount"),C=d.get("categoryUuid"),h=(d.get("poundageCurrentCardList")||(0,l.fromJS)([])).toJS(),y=(d.get("poundageProjectCardList")||(0,l.fromJS)([])).toJS(),E=d.get("needUsedPoundage"),S=d.get("pendingManageDto").toJS(),_=s.get("currentCardList").toJS(),v=r().searchRunningAllState.get("enclosureList");if(m.length>45)n.default.info("摘要不得大于45个字");else{t({type:i.SWITCH_LOADING_MASK});var b=s.get("magenerType"),L=s.get("actionFrom"),N="";"debit"===b?N="shouldReturn"===L?"QUERY_JR-QUICK_OPERATION-PAYMENT_REFUND":"QUERY_JR-QUICK_OPERATION-COLLECTION":"credit"===b&&(N="shouldReturn"===L?"QUERY_JR-QUICK_OPERATION-INCOME_REFUND":"QUERY_JR-QUICK_OPERATION-PAYMENT"),(0,o.default)("insertPaymentManage","POST",JSON.stringify({oriDate:f,oriAbstract:m,accounts:g,amount:p,pendingManageDto:S,categoryUuid:C,currentCardList:_,moedAmount:"",poundageCurrentCardList:h,poundageProjectCardList:y,needUsedPoundage:E,enclosureList:v,action:N}),function(n){t({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(n,"show")&&(e(),t(R("modalTemp",(0,l.fromJS)({oriDate:(0,u.formatDate)().substr(0,10)}))),t(T.searchRunningAllActions.clearEnclosureList()),t("fromcalCultion"===a?w():I()))})}}},t.insertCommonModal=function(e,t,a,c){return function(t,s){var d=s().searchRunningState,f=(d.get("runningFlowTemp"),d.get("modalTemp").toJS()),m=s().searchRunningAllState.get("enclosureList");f.oriAbstract.length>45?n.default.info("摘要不得大于45个字"):(t({type:i.SWITCH_LOADING_MASK}),(0,o.default)(c,"POST",JSON.stringify(r({},f,{enclosureList:m})),function(n){t({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(n,"show")&&(e(),t(R("modalTemp",(0,l.fromJS)({oriDate:(0,u.formatDate)().substr(0,10)}))),t(T.searchRunningAllActions.clearEnclosureList()),t("fromcalCultion"===a?w():I()))}))}},t.insertlrAccountCarryoverModal=function(e,t){return function(a,r){var c=r().searchRunningState.get("modalTemp"),s=c.get("uuidList"),d=c.get("runningState"),f=c.get("oriDate"),m=c.get("oriAbstract"),g=c.get("stockCardList"),p=c.get("carryoverAmount"),C=r().searchRunningAllState.get("enclosureList");if(m.length>45)n.default.info("摘要不得大于45个字");else{var h=[];g&&g.map(function(e){h.push({uuid:e.uuid,amount:p})}),a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertCarryoverItem","POST",JSON.stringify({uuidList:s,runningState:d,oriDate:f,cardList:h,oriAbstract:m,enclosureList:C}),function(n){(0,u.showMessage)(n,"show")&&(e(),a(R("modalTemp",(0,l.fromJS)({oriDate:(0,u.formatDate)()}))),a("fromcalCultion"===t?w():I())),a({type:i.SWITCH_LOADING_MASK})})}}},t.insertlrAccountJzsyModal=function(e,t){return function(a,c){var s=c().searchRunningState.get("modalTemp").toJS(),d=c().searchRunningAllState.get("enclosureList");s.oriAbstract.length>45?n.default.info("摘要不得大于45个字"):(a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertCarryover","POST",JSON.stringify(r({},s,{enclosureList:d,action:"QUERY_JR-QUICK_OPERATION-DISPOSAL_PROFIT_LOSS"})),function(n){(0,u.showMessage)(n,"show")&&(e(),a(R("modalTemp",(0,l.fromJS)({oriDate:(0,u.formatDate)()}))),a(T.searchRunningAllActions.clearEnclosureList()),a("fromcalCultion"===t?w():I())),a({type:i.SWITCH_LOADING_MASK})}))}},t.insertRunningInvioceModal=function(e,t){return function(a,c){var s=c().searchRunningState.get("modalTemp").toJS(),d=c().searchRunningAllState.get("enclosureList");s.oriAbstract.length>45?n.default.info("摘要不得大于45个字"):(a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertInvoice","POST",JSON.stringify(r({},s,{enclosureList:d,action:"QUERY_JR-QUICK_OPERATION-INVOICE"})),function(n){(0,u.showMessage)(n,"show")&&(e(),a(R("modalTemp",(0,l.fromJS)({oriDate:(0,u.formatDate)()}))),a(T.searchRunningAllActions.clearEnclosureList()),a("fromcalCultion"===t?w():I())),a({type:i.SWITCH_LOADING_MASK})}))}},t.insertRunningInvioceDefineModal=function(e,t){return function(a,c){var s=c().searchRunningState.get("modalTemp").toJS(),d=c().searchRunningAllState.get("enclosureList");s.oriAbstract.length>45?n.default.info("摘要不得大于45个字"):(a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("insertInvoice","POST",JSON.stringify(r({},s,{enclosureList:d,action:"QUERY_JR-QUICK_OPERATION-INVOICE"})),function(n){(0,u.showMessage)(n,"show")&&(e(),a(R("modalTemp",(0,l.fromJS)({oriDate:(0,u.formatDate)()}))),a(T.searchRunningAllActions.clearEnclosureList()),a("fromcalCultion"===t?w():I())),a({type:i.SWITCH_LOADING_MASK})}))}},t.getBusinessBeforeSwitch=function(e,t,a){return function(e){e(A(a.get(t),"modify",a,"edit",t))}},t.getSearchRunningItem=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"search",l=arguments[4],c=arguments[5];return function(s,m){s({type:i.SWITCH_LOADING_MASK});var g=e.get("oriUuid");g||s(d.sendMessageToDeveloper({title:"获取单条流水",message:"oriUuid不存在，function:getSearchRunningItem,状态："+t+"，item："+e+",page:"+n+",uuidList:"+a+",index:"+l,remark:"核算管理 查询流水 跳转到 录入流水"})),(0,o.default)("getJrOri","GET","oriUuid="+g,function(n){if((0,u.showMessage)(n)){var o=n.data.jrOri,l=o.oriState,d=(o.jrState,o.oriDate),m=o.relationCategoryUuid,g="STATE_CQZC_ZJTX"===l?"LB_ZJTX":"STATE_CQZC_JZSY"===l?"LB_JZSY":n.data.category.categoryType,C="LB_KJFP"===g||"LB_ZCWJZZS"===g||"LB_ZZ"===g||"LB_FPRZ"===g||"LB_JZCB"===g||"LB_SFGL"===g||"LB_GGFYFT"===g||"LB_ZJTX"===g||"LB_JZSY"===g||"LB_CHDB"===g||"LB_CHYE"===g||"LB_JXSEZC"===g||"LB_CHZZ"===g||"LB_CHTRXM"===g||"LB_SYJZ"===g||"LB_XMJZ"===g;if(c){s(S.changeViewString("disabledChange",!0)),s(C?h.justNewCalculatebusiness(g,l,!0):p.copyRunning(r({},n.data.jrOri,n.data.category,{uuid:n.data.jrOri.categoryUuid}),!0)),n.data.jrOri.oriDate=(0,u.formatDate)(),n.data.jrOri.beCertificate=!1,n.data.jrOri.currentAmount="";var y=n.data.category.propertyPay;if("STATE_XC_DJ"!==l||"SX_SHBX"!==y&&"SX_ZFGJJ"!==y){if("STATE_XC_JN"===l&&("SX_SHBX"===y||"SX_ZFGJJ"===y)){var T=n.data.jrOri.amount;n.data.jrOri.payment.personSocialSecurityAmount="",n.data.jrOri.payment.personAccumulationAmount="",n.data.jrOri.payment.companyAccumulationAmount=T,n.data.jrOri.payment.companySocialSecurityAmount=T,n.data.jrOri.payment.actualAmount=T}}else{var _=n.data.jrOri.amount;n.data.jrOri.oriState="STATE_XC_JN",n.data.jrOri.payment.companySocialSecurityAmount="",n.data.jrOri.payment.companyAccumulationAmount="",n.data.jrOri.payment.actualAmount=_}"SX_GZXJ"===y&&"STATE_XC_FF"===l&&n.data.category.acPayment.beAccrued&&(n.data.jrOri.payment.actualAmount=n.data.jrOri.amount)}if(C){var v={LB_KJFP:function(){return"INVOICING_FROM_SEARCH_JUMP_TO_LRLS"},LB_ZCWJZZS:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_LRLS"},LB_ZZ:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_NBZZ"},LB_ZJTX:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_ZJTX"},LB_JZSY:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_JZSY"},LB_FPRZ:function(){return"INVOICE_AUTH_FROM_SEARCH_JUMP_TO_LRLS"},LB_JZCB:function(){return"COST_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS"},LB_SFGL:function(){return"PAYMANAGE_FROM_SEARCH_JUMP_TO_LRLS"},LB_GGFYFT:function(){return"COMMONCHARGE_FROM_SEARCH_JUMP_TO_LRLS"},LB_CHDB:function(){return"INVENTORY_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS"},LB_CHYE:function(){return"INVENTORY_BALANCE_FROM_SEARCH_JUMP_TO_LRLS"},LB_JXSEZC:function(){return"TAX_TRANSTER_FROM_SEARCH_JUMP_TO_LRLS"},LB_CHZZ:function(){return"STOCK_BUILDUP_FROM_SEARCH_JUMP_TO_LRLS"},LB_CHTRXM:function(){return"STOCK_INTO_PROJECT_FROM_SEARCH_JUMP_TO_LRLS"},LB_XMJZ:function(){return"PROJECT_CARROVER_FROM_SEARCH_JUMP_TO_LRLS"},LB_SYJZ:function(){return"TRANSFER_OUT_FROM_SEARCH_JUMP_TO_SYJZ"}}[g]();s({type:i.CALCULATE_FROM_SEARCH_JUMP_TO_EDIT,pageType:g,PageTab:"LB_SFGL"===g?"business":"payment",insertOrModify:t,disabledChange:c,enclosureList:n.data.jrOri.enclosureList}),s({type:i[v],item:e,receivedData:n.data,insertOrModify:t,disabledChange:c,uuidList:a}),s({type:i.CHANGE_ORITEMP_ORIDATE,date:n.data.jrOri.oriDate});var b=[],L=[],I="";if("LB_CHDB"===l&&n.data.jrOri.warehouseCardList.map(function(e){"WAREHOUSE_STATUS_FROM"===e.warehouseStatus&&(I=e.cardUuid)}),n.data.jrOri.stockCardList&&n.data.jrOri.stockCardList.length&&n.data.jrOri.stockCardList.map(function(e,t){"STATE_CHZZ_ZZD"===l||e.childCardList?(e.amount=0,e.childCardList.map(function(e,a){e.storeUuid=e.warehouseCardUuid,e.parentIndex=t,b.push(e)})):b.push({cardUuid:e.cardUuid,storeUuid:"LB_CHDB"!==l?e.warehouseCardUuid:I,assistList:e.assistList,batchUuid:e.batchUuid})}),n.data.jrOri.stockCardOtherList&&n.data.jrOri.stockCardOtherList.length&&n.data.jrOri.stockCardOtherList.map(function(e,t){L.push({cardUuid:e.cardUuid,storeUuid:e.warehouseCardUuid,assistList:e.assistList,batchUuid:e.batchUuid})}),"LB_JZSY"===g&&s(h.getJzsyProjectCardList(n.data.category.projectRange)),"LB_JZCB"===g){var N="LB_YYSR"!==n.data.jrOri.relationCategoryType,O="LB_FYZC"===n.data.jrOri.relationCategoryType,A="LB_FYZC"===n.data.jrOri.relationCategoryType,R="LB_FYZC"===n.data.jrOri.relationCategoryType,w="LB_FYZC"===n.data.jrOri.relationCategoryType;s(h.getJzsyProjectCardList(n.data.jrOri.projectRange,"CostTransferTemp",N,"",O,A,R,w)),b.length&&s(E.getModifyStockPrice(d,b,"CostTransfer","stockCardList","")),n.data.jrOri.oriState}if("LB_ZJTX"===g&&s(h.getProjectCardList(n.data.category.projectRange)),"LB_CHDB"===g&&(s(h.getCanUseWarehouseCardList({temp:"StockTemp"})),s(h.getStockCardList()),s(h.getJrProjectShareType()),s(E.getModifyStockPrice(n.data.jrOri.oriDate,b,"Stock","stockCardList",""))),"LB_CHYE"===g&&(s(h.getStockCardList("BalanceTemp")),s(h.getCanUseWarehouseCardList({temp:"BalanceTemp"})),s(E.getModifyStockPrice(n.data.jrOri.oriDate,b,"Balance","stockCardList",""))),"LB_CHZZ"===g&&(s(h.getStockCardList("StockBuildUpTemp")),s(h.getCanUseWarehouseCardList({temp:"StockBuildUpTemp"})),"STATE_CHZZ_ZZCX"===l?s(E.getModifyStockPrice(d,b.concat(L),"StockBuildUp","stockCardList","stock")):b.length&&s(E.getModifyStockPrice(d,b,"StockBuildUp","stockCardList","Assembly",n.data.jrOri.stockCardList))),"LB_JXSEZC"===g){var U=n.data.category.relationCategoryType,M=n.data.category.propertyCarryover,k=n.data.category.projectRange,j=n.data.category.acBusinessExpense;("LB_YYZC"===U&&"SX_FW"===M||"LB_FYZC"===U)&&s(h.getJzsyProjectCardList(k,"TaxTransferTemp",!0)),"LB_YYZC"===U&&"SX_HW"===M&&(s(h.getStockCategoryList(j.stockRange)),s(h.getCanUseWarehouseCardList({temp:"TaxTransferTemp"})))}"LB_JZCB"===g&&"STATE_YYSR_ZJ"===l&&(s(h.getCanUseWarehouseCardList({temp:"CostTransferTemp"})),s(h.getCostCarryoverStockList(d,"STATE_YYSR_ZJ",m))),"LB_GGFYFT"===g&&(s(h.getJrProjectShareType()),s(h.getChargeProjectCard(l))),"LB_CHTRXM"===g&&(s(h.getChargeProjectCard("STATE_CHTRXM","StockIntoProjectTemp")),s(h.getCostCarryoverStockList(d,"STATE_YYSR_ZJ","","StockIntoProjectTemp")),s(h.getCanUseWarehouseCardList({temp:"StockIntoProjectTemp"})),b.length&&s(E.getModifyStockPrice(d,b,"StockIntoProject","stockCardList",""))),"LB_XMJZ"===g&&(s(h.getProjectCarryoverCard({oriDate:n.data.jrOri.oriDate,categoryUuid:"",level:"",justCard:!0,needLeft:!1})),s(h.getCostCarryoverStockList(d,"STATE_YYSR_ZJ","","ProjectCarryoverTemp")),s(h.getCanUseWarehouseCardList({temp:"ProjectCarryoverTemp"})),"STATE_XMJZ_JZRK"!==n.data.jrOri.oriState&&"STATE_XMJZ_QRSRCB"!==n.data.jrOri.oriState||(s(h.getProjectCarryoverList(d,n.data.jrOri.projectCardList[0].cardUuid,n.data.jrOri.oriUuid)),b.length&&s(E.getModifyStockPrice(d,b,"ProjectCarryover","stockCardList","")))),s({type:i.SWITCH_LOADING_MASK})}else s(p.refreshRunningbusiness(e.get("oriUuid"),function(e){s(P(e))},a,n.data,"insert"===t));s(f.addPageTabPane("EditPanes","EditRunning","EditRunning","录入流水")),s(f.addHomeTabpane("Edit","EditRunning","录入流水"))}else s({type:i.SWITCH_LOADING_MASK})})}}),R=(t.changeCurrentPage=function(e,t){return function(a){a({type:i.CHANGE_CURRENT_PAGE_FZHE,assList:e,value:t})}},t.changeCxAccountCommonString=function(e,t,a){return function(n){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(t));"flags"===t[0]&&(r=t),n({type:i.CHANGE_SEARCH_ACCOUNT_COMMON_STRING,tab:e,placeArr:r,value:a})}},t.changeCxAccountCommonOutString=function(e,t){return function(a){a("string"==typeof e?{type:i.CHANGE_SEARCH_ACCOUNT_COMMON_STRING,place:e,value:t}:{type:i.CHANGE_SEARCH_ACCOUNT_COMMON_STRING,placeArr:e,value:t})}}),w=(t.setManageMadalInitState=function(){return function(e,t){var a=t().calculationState,n=a.getIn(["payManageList","childList"]),r=(a.getIn(["flags","selectDate"]),a.getIn(["flags","selectList"])),i=a.getIn(["calculateTemp","cardUuid"]),o=a.getIn(["calculateTemp","usedCard"]),u=[],c=0;r.forEach(function(e){var t=n.find(function(t){return t.get("uuid")===e}),a=t.get("direction"),r=t.get("flowType"),i=t.get("assType");u.push({uuid:e,assType:i});var o=t.get("notHandleAmount"),l=t.get("runningState");"STATE_YYSR_TS"!==l&&"STATE_YYZC_TG"!==l||(o=-Math.abs(o)),"debit"===a?"FLOW_INADVANCE"===r?c-=Number(o):c+=Number(o):"FLOW_INADVANCE"===r?c+=Number(o):c-=Number(o)}),e(R(["modalTemp","uuidList"],(0,l.fromJS)(u))),e(R(["modalTemp","handlingAmount"],c)),e(R(["modalTemp","cardUuid"],i)),e(R(["modalTemp","usedCard"],o))}},t.setCarryoverMadalInitState=function(){return function(e,t){var a=t().calculationState,n=a.getIn(["flags","selectList"]),r=a.getIn(["calculateTemp","stockUuid"]),i=a.getIn(["flags","costTransferType"]);e(R(["modalTemp","uuidList"],n)),e(R(["modalTemp","runningState"],i)),e(R(["modalTemp","cardList"],(0,l.fromJS)([{uuid:r,amount:""}])))}},t.setInvioceMadalInitState=function(){return function(e,t){var a=t().calculationState,n=a.getIn(["flags","selectList"]),r=a.getIn(["flags","invoicingType"]);e(R(["modalTemp","uuidList"],n)),e(R(["modalTemp","billMakeOutType"],r))}},t.setDefineMadalInitState=function(){return function(e,t){var a=t().calculationState,n=a.getIn(["flags","selectList"]),r=a.getIn(["flags","certifiedType"]);e(R(["modalTemp","uuidList"],n)),e(R(["modalTemp","billAuthType"],r))}},t.getManagerCategoryList=function(e,t){return function(a){(0,o.default)("getManagerCategoryList","POST",JSON.stringify({assType:t}),function(t){a(R(["flags","managerCategoryList",e],(0,l.fromJS)(t.data)))})}},t.changeBeforeAmount=function(e,t,a){return function(n,r){t.split(s.TREE_JOIN_STR)[0];var i=t.split(s.TREE_JOIN_STR)[1],o=t.split(s.TREE_JOIN_STR)[2],u=e.get("uuid");n(R(["modalTemp","uuidList",a],(0,l.fromJS)({beOpened:!0,categoryUuid:o,uuid:u,categoryName:i})))}},function(){return function(e,t){var a=t().calculationState,n=a.get("flags"),r=a.getIn(["calculateTemp","cardUuid"]),i=a.getIn(["calculateTemp","stockUuid"]),o=n.get("issuedate"),l=n.get("curCategory"),u=n.get("isCheck"),c=n.get("accountingType"),s=a.get("certificationList"),d=a.get("invoicingList"),f=s.get("billAuthType"),m=d.get("billMakeOutType"),g=a.getIn(["costTransferList","runningState"]);t().searchRunningAllState.get("enclosureList");switch(c){case"manages":e(C.getCalculateList(o,c,"",l,r,u,""));break;case"invoicing":e(C.getCalculateInvoicingList(o,l,m,""));break;case"certification":e(C.getCalculateCertificationList(o,l,f,""));break;case"costTransfer":e(C.getCalculateCarryoverList(o,g,"","",i))}}}),P=(t.deleteSingleFlow=function(e,t){return function(a){var r=[e];c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&(a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteRunningItems","POST",JSON.stringify({deleteList:r,action:"COMMON-DELETE"}),function(e){if((0,u.showMessage)(e)){if(e.message)if(e.data.errorList.length){var r=e.data.errorList.join(",");n.default.error(r)}else n.default.success(e.message);!e.data.errorList.length&&t()}a({type:i.SWITCH_LOADING_MASK})}))}})}},t.getRunningBusinessDuty=function(e){return function(t,a){t({type:i.SWITCH_LOADING_MASK}),t({type:i.CALCULATE_FROM_SEARCH_JUMP_TO_EDIT,PageTab:"business",pageType:e})}});t.getgetSearchRunningSortFun=function(e,t,a,n){return function(r,l){var c=e.substr(0,4),s="-"===e.substr(4,1)?e.substr(5,2):e.substr(6,2),d=l().searchRunningState,f=d.getIn(["flags","isAccount"]),m=d.getIn(["flags","curAccountUuid"]),g=d.getIn(["flags","endissuedate"]);r({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getSearchRunningSort","POST",JSON.stringify({year:c,month:s,sortModel:t}),function(t){(0,u.showMessage)(t,"show")&&r(b(e,g,m,"",n,a,"",f)),r({type:i.SWITCH_LOADING_MASK})})}},t.changeSearchRunningChildItemShow=function(e,t){return{type:i.SEARCH_RUNNING_TRIANGLE_SWITCH,showChild:e,uuid:t}},t.changeSearchRunningAllChildItemShow=function(e){return{type:i.SEARCH_RUNNING_ALL_TRIANGLE_SWITCH,allItemShow:e}},t.changeSearchRunningChooseValue=function(e){return{type:i.CHANGE_SEARCH_RUNNING_CHOOSE_VALUE,chooseValue:e}},t.getAccountRunningCate=function(e){return function(t,a){(0,o.default)("getRunningDetail","GET","uuid="+e,function(e){if((0,u.showMessage)(e)){var a=e.data.result.projectRange,n=e.data.result.acCost.contactsRange;t(L(["flags","accountProjectRange"],(0,l.fromJS)(a))),t(L(["flags","accountContactsRange"],(0,l.fromJS)(n)))}})}},t.getAccountContactsCardList=function(e){return function(t,a){var n=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getContactsCategoryList","POST",JSON.stringify({sobId:n,categoryList:e.toJS(),property:"NEEDPAY"}),function(e){t({type:i.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&t(L(["flags","accountContactsRangeList"],(0,l.fromJS)(e.data.result)))})}},t.getAccountProjectCardList=function(e){return function(t,a){var n=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,o.default)("getProjectCardList","POST",JSON.stringify({sobId:n,categoryList:e,needCommonCard:!0,needAssist:!0,needMake:!0,needIndirect:!0,needMechanical:!0}),function(e){(0,u.showMessage)(e)&&t(L(["flags","accountProjectList"],(0,l.fromJS)(e.data.result)))})}}},1305:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments[1];return((e={},u(e,r.INIT_SEARCH_RUNNING,function(){return c}),u(e,r.GET_SEARCH_BUSINESS_LIST,function(){if(a.isReflash&&(t=t.set("businessTemp",c)),"true"===a.getPeriod&&(t=t.set("period",(0,n.fromJS)(a.period)).set("issues",(0,n.fromJS)(a.issues))),a.accountUuid&&a.isAccount){var e=a.accountUuid.split(i.TREE_JOIN_STR);t=t.setIn(["flags","curAccountUuid"],(0,n.fromJS)(a.accountUuid)).setIn(["flags","accountName"],(0,n.fromJS)(e[1]))}else t=t.setIn(["flags","curAccountUuid"],"").setIn(["flags","accountName"],"");var r=t.getIn(["flags","allItemShow"]),o=[];r&&(a.receivedData&&a.receivedData.map(function(e){o.push(e.oriUuid)}),t=t.setIn(["flags","showChildList"],(0,n.fromJS)(o)));var l="boolean"==typeof a.isAsc?a.isAsc:a.receivedExtra.isClose,u="boolean"!=typeof a.isAsc||a.isAsc;switch(a.orderBy){case"SEARCH_ORDER_DATE":t=t.setIn(["orderByList","dateSortType"],l).setIn(["orderByList","indexSortType"],l);break;case"SEARCH_ORDER_JR_INDEX":t=t.setIn(["orderByList","indexSortType"],l);break;case"SEARCH_ORDER_CATEGORY_TYPE":t=t.setIn(["orderByList","categorySortType"],u).setIn(["orderByList","indexSortType"],u);break;case"SEARCH_ORDER_CERTIFICATE":t=t.setIn(["orderByList","certificateSortType"],u).setIn(["orderByList","indexSortType"],u);break;case"SEARCH_ORDER_CREATE_NAME":t=t.setIn(["orderByList","nameSortType"],u).setIn(["orderByList","indexSortType"],u)}t=t.setIn(["flags","orderType"],a.orderBy);var s=a.receivedExtra,d=(s.childList,function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(s,["childList"]));for(var f in d)t=t.setIn(["flags",f],d[f]);return t.set("businessTemp",(0,n.fromJS)(a.receivedData)).set("pageCount",a.pageCount).set("currentPage",a.currentPage).setIn(["flags","issuedate"],(0,n.fromJS)(a.issuedate)).setIn(["flags","endissuedate"],(0,n.fromJS)(a.endissuedate)).setIn(["flags","isAccount"],(0,n.fromJS)(a.isAccount)).setIn(["flags","isAsc"],(0,n.fromJS)(l)).setIn(["flags","selectList"],(0,n.fromJS)([])).setIn(["flags","pzSelectAllList"],(0,n.fromJS)([])).setIn(["flags","currentVcIndex"],(0,n.fromJS)([]))}),u(e,r.CHANGE_SEARCH_ACCOUNT_COMMON_STRING,function(){return a.placeArr&&(t=t.setIn(a.placeArr,a.value)),a.place&&(t=t.set(a.place,a.value)),t}),u(e,r.SEARCH_ITEM_CHECKBOX_CHECK_ALL,function(){if(a.selectAll)return t.setIn(["flags","selectList"],(0,n.fromJS)([])).setIn(["flags","pzSelectAllList"],(0,n.fromJS)([])).setIn(["flags","currentVcIndex"],(0,n.fromJS)([])).setIn(["flags","selectItem"],(0,n.fromJS)([]));var e=a.list,r=[],i=[],o=[];return e.forEach(function(e){r.push(e.get("oriUuid"));var a=e.get("oriDate");e.get("vcList")&&e.get("vcList").size?e.get("vcList").map(function(e){o.push({year:a.substr(0,4),month:a.substr(5,2),vcIndex:e.get("vcIndex")}),t=t.setIn(["flags","currentYear"],e.get("year")).setIn(["flags","currentMonth"],e.get("month"))}):i.push((0,n.fromJS)({oriUuid:e.get("oriUuid"),jrNumber:e.get("jrIndex"),oriDate:Date.parse(e.get("oriDate")),currentYear:e.get("oriDate")?e.get("oriDate").substr(0,4):"",currentMonth:e.get("oriDate")?e.get("oriDate").substr(5,2):""}))}),t.setIn(["flags","selectList"],(0,n.fromJS)(r)).setIn(["flags","pzSelectAllList"],(0,n.fromJS)(i)).setIn(["flags","currentVcIndex"],(0,n.fromJS)(o)).setIn(["flags","selectItem"],a.list)}),u(e,r.SEARCH_ITEM_CHECKBOX_CHECK,function(){var e=t.getIn(["flags","selectList"]),r=t.getIn(["flags","pzSelectAllList"]),i=t.getIn(["flags","selectItem"]).toJS(),o=t.getIn(["flags","currentVcIndex"]),l=a.item.toJS();if(a.checked){var u=e.splice(e.findIndex(function(e){return e===a.item.get("oriUuid")}),1),c=r,s=o.toJS();a.item.get("vcList")&&a.item.get("vcList").size?a.item.get("vcList").map(function(e){s=s.filter(function(t){return!(e.get("year")===t.year&&e.get("month")===t.month&&e.get("vcIndex")===t.vcIndex)})}):c=r.splice(r.findIndex(function(e){return e.get("oriUuid")===a.item.get("oriUuid")}),1);var d=i.filter(function(e){return e.oriUuid!==a.item.get("oriUuid")});return t.setIn(["flags","selectList"],(0,n.fromJS)(u)).setIn(["flags","pzSelectAllList"],(0,n.fromJS)(c)).setIn(["flags","currentVcIndex"],(0,n.fromJS)(s)).setIn(["flags","selectItem"],d?(0,n.fromJS)(d):(0,n.fromJS)([]))}var f=e.push(a.item.get("oriUuid")),m=r,g=o.toJS();return a.item.get("vcList")&&a.item.get("vcList").size?a.item.get("vcList").map(function(e){g.push({year:l.oriDate.substr(0,4),month:l.oriDate.substr(5,2),vcIndex:e.get("vcIndex")}),t=t.setIn(["flags","currentYear"],e.get("year")).setIn(["flags","currentMonth"],e.get("month"))}):m=r.push((0,n.fromJS)({oriUuid:a.item.get("oriUuid"),jrNumber:a.item.get("jrIndex"),oriDate:Date.parse(a.item.get("oriDate")),currentYear:a.item.get("oriDate")?a.item.get("oriDate").substr(0,4):"",currentMonth:a.item.get("oriDate")?a.item.get("oriDate").substr(5,2):""})),t.setIn(["flags","selectList"],(0,n.fromJS)(f)).setIn(["flags","pzSelectAllList"],(0,n.fromJS)(m)).setIn(["flags","currentVcIndex"],(0,n.fromJS)(g)).setIn(["flags","selectItem"],(0,n.fromJS)(i.concat([l])))}),u(e,r.GET_SEARCH_CONF_ALL_SETTINGS,function(){return t=t.set("runningCategory",(0,n.fromJS)(a.receivedData.categoryList)).set("accountList",(0,n.fromJS)(a.receivedData.accountList)).set("taxRateTemp",(0,n.fromJS)(a.receivedData.rate))}),u(e,r.SEARCH_CHANGE_PZ_COMMON_STRING,function(){return t=t.setIn(a.name,a.value)}),u(e,r.SEARCH_CALCULATE_GAIN_OR_LOSS,function(){var e=a.place,n=a.diff,r=a.deletePlace;return t.setIn(e,n).deleteIn(r,n)}),u(e,r.SEARCH_RUNNING_TRIANGLE_SWITCH,function(){var e=t.getIn(["flags","showChildList"]);if(a.showChild){var n=e.splice(e.findIndex(function(e){return e===a.uuid}),1);return t.setIn(["flags","showChildList"],n)}var r=e.push(a.uuid);return t.setIn(["flags","showChildList"],r)}),u(e,r.SEARCH_RUNNING_ALL_TRIANGLE_SWITCH,function(){var e=[],r=t.get("businessTemp");return r&&r.size&&r.map(function(t){e.push(t.get("oriUuid"))}),t=t.setIn(["flags","allItemShow"],a.allItemShow),a.allItemShow?t.setIn(["flags","showChildList"],(0,n.fromJS)(e)):t.setIn(["flags","showChildList"],(0,n.fromJS)([]))}),u(e,r.CHANGE_SEARCH_RUNNING_CHOOSE_VALUE,function(){return t.setIn(["flags","chooseValue"],a.chooseValue)}),e)[a.type]||function(){return t})()};var n=a(18),r=l(a(492)),i=l(a(27)),o=a(22);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=(0,n.fromJS)({flags:{issuedate:"",insertOrModify:"insert",runningInsertOrModify:"insert",payOrReceive:"收",accountAssModalShow:!1,curCategory:"全部",curAccountUuid:"",accountName:"全部",assId:"",assCategory:"",acId:"",selectList:[],pzSelectAllList:[],pzDealNum:0,pzDealStatus:!1,showRunningInfo:{},currentYear:"",currentMonth:"",currentVcIndex:[],searchType:"SEARCH_TYPE_ABSTRACT",managerCategoryList:[],pzDealType:"",projectList:[],inputValue:"",orderType:"",showChildList:[],allItemShow:!1,chooseValue:"MONTH",accountProjectRange:[],accountContactsRange:[],accountContactsRangeList:[],accountProjectList:[],selectItem:[]},orderByList:{dateSortType:!1,indexSortType:!1,categorySortType:!1,nameSortType:!1,certificateSortType:!1,orderByArr:[]},businessTemp:{},runningFlowTemp:{oriDate:(0,o.formatDate)().substr(0,10)},modalTemp:{oriDate:(0,o.formatDate)().substr(0,10)},period:{closedmonth:"",closedyear:"",firstmonth:"",firstyear:"",lastmonth:"",lastyear:""},issues:[],currentPage:1,pageCount:1})},1307:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkUsed=t.downloadBefore=t.regretCode=t.getRegretCategoryTree=t.beforeCloseMaterial=t.changeViews=t.adjustCategoryOrder=t.adjustInventoryCardList=t.adjustAllRelativeCardList=t.switchWarehouse=t.exportToNotification=t.afterChImport=t.getFileUploadInitialFetch=t.getFileUploadFetch=t.closeVcImportContent=t.beforeCHImport=t.cancelDeleteOrAddInventoryType=t.adjustInventoryCardTyepList=t.inventoryDownType=t.inventoryUpType=t.confirmDeleteInventoryType=t.deleteInventoryType=t.changeInventoryCardTypeBoxChecked=t.getInventoryTypeInfo=t.saveInventoryCardType=t.changeInventoryCardTypeSelect=t.changeInventoryCardTypeContent=t.beforeInsertAddInventoryCardType=t.beforeAddInventoryCardType=t.deleteInventoryHighType=t.saveInventoryHighType=t.changeInventoryHighTypeContent=t.beforeAddInventoryHighType=t.changeInventoryModalActiveHighType=t.beforeEditInventoryHighType=t.getInventoryCardListByType=t.selectCardAll=t.changeInventoryCardBoxStatus=t.modifyInventoryAssemblyStatus=t.modifyInventoryCardUsedStatus=t.refreshInventoryList=t.changeInventoryActiveHighType=t.getInventoryConfigInit=void 0;var n=g(a(37)),r=g(a(47));a(38),a(46);var i=m(a(1318)),o=(m(a(43)),g(a(52))),l=m(a(60)),u=m(a(1375)),c=a(22),s=m(a(30)),d=m(a(27)),f=a(18);m(a(1241));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}r.default.confirm;var p=t.getInventoryConfigInit=function(){return function(e,t){e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingCardList","GET","listFrom=&currentPage=1&pageSize="+d.CONFIG_PAGE_SIZE+"&condition=",function(t){(0,c.showMessage)(t)?(0,o.default)("getInventoryHighTypeList","GET","",function(a){(0,c.showMessage)(a)&&e({type:i.GET_INVENTORY_CONFIG_INIT,title:a.data,cardList:t.data.resultList,enableWarehouse:t.data.enableWarehouse,pageCount:t.data.pages}),e({type:i.SWITCH_LOADING_MASK})}):e({type:i.SWITCH_LOADING_MASK})})}},C=(t.changeInventoryActiveHighType=function(e,t){return function(a,n){a(h(e,t))}},t.refreshInventoryList=function(e,t,a){return function(n,r){n(h(e,t,a))}}),h=function(e,t,a){return function(n,r){var l=r().inventoryConfState.get("views"),u=t||l.get("currentPage"),s=void 0===a?l.get("searchContent"):a;n({type:i.SWITCH_LOADING_MASK}),e.get("name")===d.ALL_TAB_NAME_STR?(0,o.default)("getInventorySettingCardList","GET","listFrom=&currentPage="+u+"&pageSize="+d.CONFIG_PAGE_SIZE+"&condition="+s,function(t){(0,c.showMessage)(t)&&n({type:i.CHANGE_ACTIVE_INVENTORY_CONF_HIGH_TYPE,name:e.get("name"),uuid:e.get("uuid"),cardList:t.data.resultList,enableWarehouse:t.data.enableWarehouse,treeList:[],currentPage:u,pageCount:t.data.pages,condition:s}),n({type:i.SWITCH_LOADING_MASK})}):(0,o.default)("getInventorySettingCardList","GET","listFrom="+e.get("uuid")+"&currentPage="+u+"&pageSize="+d.CONFIG_PAGE_SIZE+"&condition="+s,function(t){(0,c.showMessage)(t)?(0,o.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+e.get("uuid"),function(a){(0,c.showMessage)(a)&&n({type:i.CHANGE_ACTIVE_INVENTORY_CONF_HIGH_TYPE,name:e.get("name"),uuid:e.get("uuid"),cardList:t.data.resultList,treeList:a.data.resultList,enableWarehouse:a.data.enableWarehouse,setDefault:!0,currentPage:u,pageCount:t.data.pages,condition:s}),n({type:i.SWITCH_LOADING_MASK})}):n({type:i.SWITCH_LOADING_MASK})})}},y=(t.modifyInventoryCardUsedStatus=function(e,t){return function(a){a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("modifyInventorySettingCardUsedStatus","POST",JSON.stringify({psiData:{uuid:e,used:t}}),function(n){(0,c.showMessage)(n,"show")&&a({type:i.CHANGE_INVENTORY_CONF_CARD_USED_STATUS,list:n.data.resultList,uuid:e,used:t}),a({type:i.SWITCH_LOADING_MASK})})}},t.modifyInventoryAssemblyStatus=function(e,t,a){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("modifyInventoryAssembly"+(t?"Open":"Close"),"GET","productUuid="+e,function(r){(0,c.showMessage)(r,"show")&&(n({type:i.CHANGE_INVENTORY_CONF_ASSEMBLY_STATUS,uuid:e,used:t}),a&&a()),n({type:i.SWITCH_LOADING_MASK})})}}),E=(t.changeInventoryCardBoxStatus=function(e,t){return function(a){a({type:i.CHANGE_INVENTORY_CONF_CARD_BOX_STATUS,status:e,uuid:t})}},t.selectCardAll=function(e){return function(t){t({type:i.SELECT_INVENTORY_CONF_CARD_ALL,value:e})}},t.getInventoryCardListByType=function(e,t,a,n,r){return function(l,u){l({type:i.SWITCH_LOADING_MASK});var s=u().inventoryConfState.get("views"),f=void 0===r?s.get("searchContent"):r,m=n||s.get("currentPage");(0,o.default)("getInventorySettingCardListByType","GET","ctgyUuid="+e+"&&subordinateUuid="+t+"&currentPage="+m+"&pageSize="+d.CONFIG_PAGE_SIZE+"&condition="+f,function(e){(0,c.showMessage)(e)&&l({type:i.SELECT_INVENTORY_CONF_CARD_BY_TYPE,list:e.data.resultList,uuid:t,name:a,currentPage:m,pageCount:e.data.pages,condition:f}),l({type:i.SWITCH_LOADING_MASK})})}},t.beforeEditInventoryHighType=function(e){return function(t,a){var n=a().inventoryConfState,r=n.getIn(["views","activeTapKey"]),l=n.getIn(["views","activeTapKeyUuid"]),u=n.get("originTags"),s="",f="";1!=u.size&&(r===d.ALL_TAB_NAME_STR?(s=u.getIn([1,"uuid"]),f=u.getIn([1,"name"])):(s=l,f=r)),t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getOneInventorySettingHighType","GET","uuid="+s,function(a){(0,c.showMessage)(a)&&(t({type:i.BEFORE_EDIT_INVENETORY_HIGH_TYPE,receivedData:a.data,activeName:f,activeUuid:s}),e()),t({type:i.SWITCH_LOADING_MASK})})}},t.changeInventoryModalActiveHighType=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getOneInventorySettingHighType","GET","uuid="+e.get("uuid"),function(a){(0,c.showMessage)(a)&&t({type:i.BEFORE_EDIT_INVENETORY_HIGH_TYPE,receivedData:a.data,activeName:e.get("name"),activeUuid:e.get("uuid")}),t({type:i.SWITCH_LOADING_MASK})})}},t.beforeAddInventoryHighType=function(){return{type:i.BEFORE_INSERT_INVENTORY_CONF_HGIH_TYPE}},t.changeInventoryHighTypeContent=function(e,t){return function(a){a({type:i.CHANGE_INVENTORY_CONF_HIGH_TYPE_CONTENT,name:e,value:t})}},t.saveInventoryHighType=function(){return function(e,t){e({type:i.SWITCH_LOADING_MASK});var a=t().inventoryConfState.get("inventoryHighTypeTemp"),n=a.get("uuid")?"modify":"insert";(0,o.default)("insertInventoryHighType","POST",JSON.stringify({psiData:a}),function(t){(0,c.showMessage)(t,"show")&&0===t.code&&e({type:i.AFTER_SAVE_INVENTORYSETTING_CONTENT,title:t.data,insertOrModify:n})}),e({type:i.SWITCH_LOADING_MASK})}},t.deleteInventoryHighType=function(e){return function(t,a){var n=a().inventoryConfState,r=n.getIn(["views","activeInventoryTypeUuid"]),l=n.getIn(["views","activeTapKeyUuid"]);t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteInventorySettingHighType","POST",JSON.stringify({ctgyUuid:r}),function(a){(0,c.showMessage)(a,"show")?r==l?(0,o.default)("getInventorySettingCardList","GET","listFrom=",function(e){(0,c.showMessage)(a)&&t({type:i.DELETE_CURRENT_INVENTORY_CONF_HGIH_TYPE,title:a.data.resultList,name:d.ALL_TAB_NAME_STR,uuid:"",cardList:e.data.resultList,treeList:[]}),t({type:i.SWITCH_LOADING_MASK})}):(t({type:i.DELETE_INVENTORY_CONF_HGIH_TYPE,title:a.data.resultList}),t({type:i.SWITCH_LOADING_MASK})):t({type:i.SWITCH_LOADING_MASK}),e()})}},t.beforeAddInventoryCardType=function(){return function(e){e({type:i.BEFORE_ADD_INVENTORY_CONF_CARD_TYPE})}},t.beforeInsertAddInventoryCardType=function(){return function(e){e({type:i.BEFORE_INSERT_INVENTORY_CONF_CARD_TYPE})}},t.changeInventoryCardTypeContent=function(e,t){return function(a){a({type:i.CHANGE_INVENTORY_CONF_CARD_TYPE_CONTENT,name:e,value:t})}},t.changeInventoryCardTypeSelect=function(e){return function(t){var a=e.split(d.TREE_JOIN_STR),n=a[1],r=a[0];t({type:i.SELECT_INVENTORY_CONF_CARD_TYPE,parentName:n,parentUuid:r})}},t.saveInventoryCardType=function(e,t,a){return function(n,r){var l=r().inventoryConfState.get("inventoryCardTypeTemp").toJS();l.ctgyUuid=r().inventoryConfState.getIn(["views","activeTapKeyUuid"]);var u=function(){(0,o.default)("addInventorySettingCardType","POST",JSON.stringify({psiData:l}),function(t){(0,c.showMessage)(t,"show")&&n({type:i.SAVE_INVENTORY_CONF_CARD_TYPE,typeTree:t.data.resultList,uuid:l.uuid,btnFlag:e,typeInfo:t.data.info}),n({type:i.SWITCH_LOADING_MASK})})};n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("adjustInventorySettingTypeTitleSame","POST",JSON.stringify({psiData:{parentUuid:l.parentUuid,name:l.name,uuid:l.uuid}}),function(e){(0,c.showMessage)(e)?e.data.repeat?(t(),n({type:i.SWITCH_LOADING_MASK}),s.Confirm({message:"卡片名称与【编码："+e.data.card.code+"】卡片重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(n({type:i.SWITCH_LOADING_MASK}),u(),a()):a()},onFail:function(e){return console.log(e)}})):u():n({type:i.SWITCH_LOADING_MASK})})}},t.getInventoryTypeInfo=function(e){return function(t,a){var n=a().inventoryConfState.getIn(["typeTree","0","uuid"])===e;n?t({type:i.GET_INVENTORY_CONF_TYPE_CONTENT,uuid:e,data:{},isAll:n}):(t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCardType","GET","uuid="+e,function(a){(0,c.showMessage)(a)&&t({type:i.GET_INVENTORY_CONF_TYPE_CONTENT,uuid:e,data:a.data,isAll:n}),t({type:i.SWITCH_LOADING_MASK})}))}},t.changeInventoryCardTypeBoxChecked=function(e){return function(t){t({type:i.CHANGE_INVENTORY_CONF_CARD_TYPE_BOX_STATUS,list:e})}},t.deleteInventoryType=function(){return function(e,t){e({type:i.INVENTORY_CONF_TYPE_DELETE_BTN_SHOW})}},t.confirmDeleteInventoryType=function(){return function(e,t){var a=t().inventoryConfState.getIn(["views","typeTreeSelectList"]);if(0!==a.size){var r=t().inventoryConfState.getIn(["views","activeTapKeyUuid"]);e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteInventorySettingOneCardType","POST",JSON.stringify({ctgyUuid:r,deleteList:a}),function(t){(0,c.showMessage)(t,"show")&&e({type:i.CONFIRM_DELETE_INVENTORY_CONF_TYPE,data:t.data.resultList}),e({type:i.SWITCH_LOADING_MASK})})}else n.default.info("请选择要删除的类别")}},t.inventoryUpType=function(){return function(e,t){e({type:i.SWITCH_LOADING_MASK});var a=t().inventoryConfState.getIn(["inventorySettingBtnStatus","treeUuid"]),n=t().inventoryConfState.getIn(["inventorySettingBtnStatus","upUuid"]),r=t().inventoryConfState.getIn(["views","activeTapKeyUuid"]);(0,o.default)("swapInventorySettingTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:a,swappedSubordinateUuid:n,categoryUuid:r}}),function(t){(0,c.showMessage)(t)&&e({type:i.CHANGE_INVENTORY_CONF_TYPE_POSITION,list:t.data.resultList}),e({type:i.SWITCH_LOADING_MASK})})}},t.inventoryDownType=function(){return function(e,t){e({type:i.SWITCH_LOADING_MASK});var a=t().inventoryConfState.getIn(["inventorySettingBtnStatus","treeUuid"]),n=t().inventoryConfState.getIn(["inventorySettingBtnStatus","downUuid"]),r=t().inventoryConfState.getIn(["views","activeTapKeyUuid"]);(0,o.default)("swapInventorySettingTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:a,swappedSubordinateUuid:n,categoryUuid:r}}),function(t){(0,c.showMessage)(t)&&e({type:i.CHANGE_INVENTORY_CONF_TYPE_POSITION,list:t.data.resultList}),e({type:i.SWITCH_LOADING_MASK})})}},t.adjustInventoryCardTyepList=function(e,t,a){return function(n,r){n({type:i.SWITCH_LOADING_MASK});var l=r().inventoryConfState.getIn(["views","cardSelectList"]).toJS();l.map(function(t,a){t.subordinateName=e});var u=t,s=r().inventoryConfState.getIn(["views","activeTapKeyUuid"]),d=r().inventoryConfState.getIn(["views","activeTreeKeyUuid"]);(0,o.default)("adjustInventorySettingCardTypeList","POST",JSON.stringify({cardList:l,subordinateUuid:u,adjustFrom:s,treeFrom:d}),function(e){(0,c.showMessage)(e)&&(n({type:i.ADJUST_INVENTORY_CONF_CARD_TYPE_LIST,list:e.data.resultList}),a()),n({type:i.SWITCH_LOADING_MASK})})}},t.cancelDeleteOrAddInventoryType=function(){return function(e,t){if(t().inventoryConfState.getIn(["inventorySettingBtnStatus","isAdd"])){var a=t().inventoryConfState.getIn(["inventorySettingBtnStatus","treeUuid"]);a===t().inventoryConfState.getIn(["typeTree",0,"uuid"])?e({type:i.CANCLE_INVENTORY_CONF_TYPE_BTN,data:{}}):(e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCardType","GET","uuid="+a,function(t){(0,c.showMessage)(t)&&e({type:i.CANCLE_INVENTORY_CONF_TYPE_BTN,data:t.data}),e({type:i.SWITCH_LOADING_MASK})}))}else e({type:i.CANCLE_INVENTORY_CONF_TYPE_BTN,data:{}})}},t.beforeCHImport=function(){return{type:i.BEFORE_CH_IMPORT}},t.closeVcImportContent=function(){return{type:i.CLOSE_CH_IMPORT_CONTENT}}),S=(t.getFileUploadFetch=function(e){return function(t){(0,o.default)("chUpload","UPLOAD",e,function(e){if((0,c.showMessage)(e)){if(e.data){t({type:i.CHANGE_CH_IMPORT_NUM,name:"totalNumber",value:e.data.pages}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"importKey",value:e.data.importKey}),t({type:i.CHANGE_CH_IMPORT_STATUS,value:!0});!function a(n){n<=e.data.pages&&setTimeout(function(){(0,o.default)("chImport","POST",JSON.stringify({importKey:e.data.importKey,current:n}),function(l){(0,c.showMessage)(l)?n<e.data.pages?a(n+1):(t({type:i.CHANGE_CH_IMPORT_STATUS,value:!1}),(0,o.default)("chImportError","GET","importKey="+e.data.importKey+"&needDownload=false",function(e){t(S(e))})):(r.default.error({title:"异常提示",content:"请求异常，请稍后重试"}),t(E()))}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"curNumber",value:n})},500)}(1)}}else t(E())})}},t.getFileUploadInitialFetch=function(e){return function(t){(0,o.default)("chUploadInitial","UPLOAD",e,function(e){if((0,c.showMessage)(e)){if(e.data){t({type:i.CHANGE_CH_IMPORT_NUM,name:"totalNumber",value:e.data.pages}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"importKey",value:e.data.importKey}),t({type:i.CHANGE_CH_IMPORT_STATUS,value:!0});!function a(n){n<=e.data.pages&&setTimeout(function(){(0,o.default)("chImportInitial","POST",JSON.stringify({importKey:e.data.importKey,current:n}),function(l){(0,c.showMessage)(l)?n<e.data.pages?a(n+1):(t({type:i.CHANGE_CH_IMPORT_STATUS,value:!1}),(0,o.default)("chImportErrorInitial","GET","importKey="+e.data.importKey+"&needDownload=false",function(e){t(S(e))})):(r.default.error({title:"异常提示",content:"请求异常，请稍后重试"}),t(E()))}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"curNumber",value:n})},500)}(1)}}else t(E())})}},t.afterChImport=function(e){return function(t){t({type:i.AFTER_CH_IMPORT,receivedData:e})}}),T=(t.exportToNotification=function(e,t){return function(e){(0,o.default)(t,"GET","",function(e){(0,c.showMessage)(e,"show")})}},t.switchWarehouse=function(e){return function(t,a){e?s.Confirm({message:"“仓库管理”启用后不允许勾除，请谨慎操作。",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(e){if(1===e.buttonIndex){var r=a().inventoryConfState.get("views"),s=r.get("activeTapKey"),d=r.get("activeTapKeyUuid"),m=(0,f.fromJS)({name:s,uuid:d});t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("enableWarehouse","GET","",function(e){t({type:i.SWITCH_LOADING_MASK}),(0,c.showMessage)(e)&&(n.default.info("启用仓库成功！"),t(C(m)),t(u.getWarehouseTree()),t(l.getDbListFetch()))})}}}):(0,o.default)("disableWarehouse","GET","needCheck=true",function(e){(0,c.showMessage)(e)&&(e.data.canDisable?s.Confirm({message:"关闭仓库管理，将同步删除仓库。确定删除并关闭吗？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(e){if(1===e.buttonIndex){var r=a().inventoryConfState.get("views"),u=r.get("activeTapKey"),s=r.get("activeTapKeyUuid"),d=(0,f.fromJS)({name:u,uuid:s});t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("disableWarehouse","GET","needCheck=false",function(e){t({type:i.SWITCH_LOADING_MASK}),(0,c.showMessage)(e)&&(n.default.info("关闭仓库成功！"),t(C(d)),t(l.getDbListFetch()))})}}}):s.Confirm({message:"关闭仓库失败！有历史存货流水或存货期初值关联仓库。",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(){}}))})}},t.adjustAllRelativeCardList=function(e){return function(t){e()}},t.adjustInventoryCardList=function(e,t){return function(a){(0,o.default)("relativeInventoryTags","POST",JSON.stringify(e),function(e){(0,c.showMessage)(e)&&(t(),a(p()))})}},t.adjustCategoryOrder=function(e){return function(t){(0,o.default)("adjustCategoryOrder","POST",JSON.stringify(e),function(e){if((0,c.showMessage)(e)){var a=[{name:"全部",uuid:""}].concat(e.data.resultList);t({type:i.ADJUST_CATEGORY_ORDER_INVENTORY,payload:a})}})}},t.changeViews=function(e,t){return{type:i.CHANGE_CH_IMPORT_NUM,name:e,value:t}});t.beforeCloseMaterial=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCard","GET","uuid="+e.get("uuid"),function(a){(0,c.showMessage)(a)&&(a.data.assemblySheet&&a.data.assemblySheet.materialList?(t(T("materialModal",!0)),t(T("activeUuid",e.get("uuid")))):t(y(e.get("uuid"),!1)),t({type:i.SWITCH_LOADING_MASK}))})}},t.getRegretCategoryTree=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments[2];return function(n,r){n({type:i.SWITCH_LOADING_MASK}),e.get("parentUuid")?(0,o.default)("getInventorySettingCardListByType","GET","ctgyUuid="+e.get("parentUuid")+"&&subordinateUuid="+e.get("uuid")+"&currentPage="+t+"&pageSize="+d.CONFIG_PAGE_SIZE,function(e){n({type:i.SWITCH_LOADING_MASK}),(0,c.showMessage)(e)&&(n({type:i.CHANGE_CH_IMPORT_NUM,name:"cardList",value:(0,f.fromJS)(e.data.resultList)}),n({type:i.CHANGE_CH_IMPORT_NUM,name:"regretPages",value:e.data.pages}),a&&a())}):((0,o.default)("getInventorySettingCardList","GET","listFrom="+e.get("uuid")+"&currentPage="+t+"&pageSize="+d.CONFIG_PAGE_SIZE,function(e){(0,c.showMessage)(e)&&(n({type:i.SWITCH_LOADING_MASK}),n({type:i.CHANGE_CH_IMPORT_NUM,name:"cardList",value:(0,f.fromJS)(e.data.resultList)}),n({type:i.CHANGE_CH_IMPORT_NUM,name:"regretPages",value:e.data.pages}),a&&a())}),e.get("uuid")&&(0,o.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+e.get("uuid"),function(e){(0,c.showMessage)(e)&&n({type:i.CHANGE_CH_IMPORT_NUM,name:"cardTypeList",value:(0,f.fromJS)(e.data.resultList)})}))}},t.regretCode=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("regretCode","POST",JSON.stringify({regretType:"CODE_INVENTORY",cardList:e.map(function(e){return{cardUuid:e.uuid,newCode:e.newCode}}),action:"MANAGER-STOCK_SETTING-REGRET_MODEL"}),function(a){if((0,c.showMessage)(a)){var r=a.data.key;if(r)var l=new Date,u=setInterval(function(){(0,o.default)("regretResult","GET","key="+a.data.key,function(a){if((0,c.showMessage)(a)){var o=new Date;a.data.index==e.length&&a.data.regretCardDto&&a.data.regretCardDto.cardList.length==e.length?(clearInterval(u),t({type:i.CHANGE_CH_IMPORT_NUM,name:"regretResultList",value:(0,f.fromJS)(a.data.regretCardDto.cardList)}),t({type:i.SWITCH_LOADING_MASK})):a.data.index==e.length&&!a.data.regretCardDto&&o-l>3e4&&(clearInterval(u),t({type:i.SWITCH_LOADING_MASK}),n.default.info("系统出错，请重试")),t({type:i.CHANGE_CH_IMPORT_NUM,name:"regretResultIndex",value:a.data.index}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"regretResultKey",value:r})}else clearInterval(u),t({type:i.SWITCH_LOADING_MASK})})},500)}else t({type:i.SWITCH_LOADING_MASK})})}},t.downloadBefore=function(e){return function(t){(0,o.default)("regretCardConfirm","POST",JSON.stringify({cardList:e.map(function(e){return{cardUuid:e.uuid,cardName:e.name,oldCode:e.code,newCode:e.newCode}})}),function(e){if((0,c.showMessage)(e)){t({type:i.CHANGE_CH_IMPORT_NUM,name:"regretResultKey",value:e.data.key});var a=document.getElementsByClassName("regret-download-click")[0];setTimeout(function(){return a.click()},100)}})}},t.checkUsed=function(e){return function(t){(0,o.default)("checkCardUsed","POST",JSON.stringify({cardUuidList:e.map(function(e){return e.uuid}),cardType:"CARD4PERSON"}),function(e){t({type:i.CHANGE_CH_IMPORT_NUM,name:"usedCardList",value:(0,f.fromJS)(e.data.usedCard)})})}}},1309:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=h(a(14)),i=h(a(1256)),o=h(a(45)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(78),a(1257),a(55);var u=h(a(1)),c=a(17),s=a(18),d=(h(a(6)),a(56),C(a(27))),f=h(a(483)),m=(h(a(90)),a(22),a(101),h(a(1325))),g=C(a(172)),p=C(a(1279));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var y=o.default.Option,E=(0,c.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.accounts,n=t.accountList,o=t.dispatch,l=t.isCheckOut,c=t.oriTemp,C=this.state.showModal;return u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"账户："),u.default.createElement("div",{className:"lrls-account-box"},u.default.createElement(f.default,{showSearch:!0,value:a.getIn([0,"accountName"])?a.getIn([0,"accountName"]):"",dropdownRender:function(t){return u.default.createElement("div",null,t,u.default.createElement(i.default,{style:{margin:"4px 0"}}),u.default.createElement("div",{style:{padding:"8px",cursor:"pointer"},onMouseDown:function(){o(p.beforeInsertAccountConf()),e.setState({showModal:!0})}},u.default.createElement(r.default,{type:"plus"})," 新增账户"))},onSelect:function(t,a){var n=t.split(d.TREE_JOIN_STR),r=n[0],i=n[1],l=a.props.poundage,u=l.get("poundage"),s=l.get("poundageRate"),f=e.props.amount||c.get("amount"),m=Math.abs(f||0)*s/1e3>u&&u>0?u:Math.abs(f||0)*s/1e3;o(g.changeLrAccountCommonString("ori",["accounts",0,"poundageAmount"],(m||0).toFixed(2))),o(g.changeLrAccountAccountName(r,i,l))}},n.getIn([0,"childList"]).map(function(e,t){return u.default.createElement(y,{key:t,value:""+e.get("uuid")+d.TREE_JOIN_STR+e.get("name"),poundage:(0,s.fromJS)({needPoundage:e.get("needPoundage"),poundage:e.get("poundage"),poundageRate:e.get("poundageRate")})},e.get("name"))}))),u.default.createElement(m.default,{dispatch:o,showModal:C,onClose:function(){return e.setState({showModal:!1})},fromPage:"editRunning",isCheckOut:l}))}}]),t}())||n;t.default=E},1310:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regNegative=t.reg=t.numberTest=void 0;var n=r(a(37));a(38);r(a(1));function r(e){return e&&e.__esModule?e:{default:e}}t.numberTest=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"金额",l=arguments[4];if(void 0!==e.target.value){var u=e.target.value.indexOf("。")>-1?e.target.value.replace("。","."):e.target.value;0===(u=u.replace(/,/g,"")).indexOf("0")&&"0"!=u&&u>=1&&(u=u.substr(1)),"."===u||"-."===u?n.default.info("请输入正确的数值"):l&&Number(u)>0?n.default.info(r+"仅支持输入负数"):0!==u.indexOf("-")||a?(a?o.test(u):i.test(u))?t(u):n.default.info(r+"只能输入小于14位数两位小数的数字"):n.default.info(r+"仅支持输入正数")}};var i=t.reg=/^\d{0,14}(\.\d{0,2})?$/,o=t.regNegative=/^-{0,1}\d{0,14}(\.\d{0,2})?$/},1315:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_ACCOUNT_CONFIG="INIT_ACCOUNT_CONFIG",t.BEFORE_INSERT_ACCOUNTCONF="BEFORE_INSERT_ACCOUNTCONF",t.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT="AFTER_UPDATE_ACCOUNTCONF_ACCOUNT",t.SELECT_OR_UNSELECT_ACCOUNT_ALL="SELECT_OR_UNSELECT_ACCOUNT_ALL",t.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK="ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK",t.BEFORE_MODIFY_ACCOUNTCONF_RUNNING="BEFORE_MODIFY_ACCOUNTCONF_RUNNING",t.CHANGE_ACCOUNTCONFIG_COMMON_STRING="CHANGE_ACCOUNTCONFIG_COMMON_STRING",t.CLOSE_ACCOUNTCONF_MODAL_LR="CLOSE_ACCOUNTCONF_MODAL_LR",t.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER="CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER",t.CLOSE_ACCOUNTCONF_MODAL="CLOSE_ACCOUNTCONF_MODAL",t.CHANGE_ACCOUNT_CARD_USED_STATUS="CHANGE_ACCOUNT_CARD_USED_STATUS",t.GET_RUNNING_ACCOUNT="GET_RUNNING_ACCOUNT",t.INIT_POUNDAGE_TEMP="INIT_POUNDAGE_TEMP",t.GET_POUNDGE_ACCOUNT="GET_POUNDGE_ACCOUNT",t.INIT_REGRETTEMP="INIT_REGRETTEMP",t.GET_ACCOUNT_CONFIG_LIST="GET_ACCOUNT_CONFIG_LIST"},1317:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkUsed=t.downloadBefore=t.regretCode=t.getRegretCategoryTree=t.cancelInsertOrDeleteProjectType=t.adjustProjectCardTyepList=t.projectDownType=t.projectUpType=t.confirmDeleteProjectType=t.deleteProjectType=t.changeProjectCardTypeBoxChecked=t.switchProjectType=t.saveProjectCardType=t.changeProjectCardTypeSelect=t.changeProjectCardTypeContent=t.beforeInsertProjectConfCardType=t.beforeAddProjectCardType=t.saveProjectHighType=t.changePrejectHighTypeContent=t.getProjectHighTypeOne=t.getProjectCardListByType=t.selectProjectCardAll=t.changeProjectCardBoxStatus=t.modifyProjectCardUsedStatus=t.refreshProjectList=t.changeProjectActiveHighType=t.getProjectConfigInit=void 0;var n=m(a(37)),r=m(a(47)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};a(38),a(46);var o=f(a(1302)),l=(f(a(43)),m(a(52))),u=a(22),c=f(a(30)),s=f(a(27)),d=a(18);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}r.default.confirm,t.getProjectConfigInit=function(){return function(e,t){e({type:o.SWITCH_LOADING_MASK}),(0,l.default)("getProjectConfigHighType","GET","",function(t){(0,u.showMessage)(t)&&e({type:o.PROJECT_GET_HTIGH_TYPE,list:t.data})});t().projectConfState.getIn(["views","activeTapKeyUuid"]),t().projectConfState.get("treeSelectUuid");(0,l.default)("getProjectListAndTree","GET","listFrom=&currentPage=1&pageSize="+s.CONFIG_PAGE_SIZE+"&condition=",function(t){e({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(t)&&e({type:o.GET_PROJECT_LIST_AND_TREE,cardList:t.data.resultList,treeList:t.data.typeList,pageCount:t.data.pages})})}},t.changeProjectActiveHighType=function(e){return function(t,a){t({type:o.SWITCH_LOADING_MASK});var n=e.get("name"),r=e.get("uuid");(0,l.default)("getProjectListAndTree","GET","listFrom="+r+"&currentPage=1&pageSize="+s.CONFIG_PAGE_SIZE+"&condition=",function(e){(0,u.showMessage)(e)&&t({type:o.CHANGE_ACTIVE_PROJECT_HIGH_TYPE,cardList:e.data.resultList,treeList:e.data.typeList,name:n,uuid:r,pageCount:e.data.pages}),t({type:o.SWITCH_LOADING_MASK})})}},t.refreshProjectList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments[2];return function(e,n){e({type:o.SWITCH_LOADING_MASK});var r=n().projectConfState.get("views"),i=void 0===a?r.get("searchContent"):a,c=n().projectConfState.getIn(["views","activeTapKeyUuid"]);n().projectConfState.getIn(["views","selectTypeId"]);(0,l.default)("getProjectListAndTree","GET","listFrom="+c+"&condition="+i+"&pageSize="+s.CONFIG_PAGE_SIZE+"&currentPage="+t,function(n){e({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)&&e({type:o.GET_PROJECT_LIST_AND_TREE,cardList:n.data.resultList,treeList:n.data.typeList,isFresh:!0,currentPage:t,searchContent:a,pageCount:n.data.pages})})}},t.modifyProjectCardUsedStatus=function(e,t){return function(a){a({type:o.SWITCH_LOADING_MASK}),(0,l.default)("changeProjectCardUsedStatus","POST",JSON.stringify({psiData:{uuid:e,used:t}}),function(n){(0,u.showMessage)(n,"show")&&a({type:o.CHANGE_PEOJECT_CONF_CARD_USED_STATUS,list:n.data.resultList,uuid:e,used:t}),a({type:o.SWITCH_LOADING_MASK})})}},t.changeProjectCardBoxStatus=function(e,t){return function(a){a({type:o.CHANGE_PEOJECT_CONF_CARD_BOX_STATUS,status:e,uuid:t})}},t.selectProjectCardAll=function(e){return function(t){t({type:o.SELECT_PEOJECT_CONF_CARD_ALL,value:e})}},t.getProjectCardListByType=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments[4];return function(i,c){i({type:o.SWITCH_LOADING_MASK});var d=c().projectConfState.get("views"),f=void 0===r?d.get("searchContent"):r;(0,l.default)("getProjectCardByType","GET","ctgyUuid="+e+"&&subordinateUuid="+t+"&condition="+f+"&pageSize="+s.CONFIG_PAGE_SIZE+"&currentPage="+n,function(l){(0,u.showMessage)(l)&&i({type:o.SELECT_PROJECT_CARD_BY_TYPE,list:l.data.resultList,uuid:t,name:a,parentUuid:e,currentPage:n,searchContent:r,pageCount:l.data.pages}),i({type:o.SWITCH_LOADING_MASK})})}},t.getProjectHighTypeOne=function(e,t){return function(a){a({type:o.SWITCH_LOADING_MASK});var n=e.uuid,r=e.name;(0,l.default)("getProjectConfigHighTypeOne","GET","uuid="+n,function(e){(0,u.showMessage)(e)&&(a({type:o.GET_PROJECT_HIGH_TYPE_ONE,data:e.data,name:r,uuid:n}),t&&t()),a({type:o.SWITCH_LOADING_MASK})})}},t.changePrejectHighTypeContent=function(e,t){return function(a){a({type:o.CHANGE_PREJECT_HIGH_TYPE_CONTENT,name:e,value:t})}},t.saveProjectHighType=function(e){return function(t,a){t({type:o.SWITCH_LOADING_MASK});var n=a().projectConfState.get("projectHighTypeTemp").toJS(),r=n.commonFee,c=n.beMake,s=n.beAssist,d=n.beIndirect,f=n.beMechanical,m=n.assistOpen,g=n.makeOpen,p=n.indirectOpen,C=n.mechanicalOpen,h=(n.saveProjectHighType,{"生产项目":{beMake:c,beAssist:s,makeOpen:g,assistOpen:m},"施工项目":{beIndirect:d,beMechanical:f,indirectOpen:p,mechanicalOpen:C},"损益项目":{commonFee:r}}[n.name]);(0,l.default)("modifyProjectConfigHighType","POST",JSON.stringify({psiData:i({},h,{name:n.name,uuid:n.uuid})}),function(a){(0,u.showMessage)(a,"show")&&e(),t({type:o.SWITCH_LOADING_MASK})})}},t.beforeAddProjectCardType=function(){return function(e){e({type:o.BEFORE_ADD_PROJECT_CONFIG_CARD_TYPE})}},t.beforeInsertProjectConfCardType=function(){return function(e){e({type:o.BEFORE_INSERT_PROJECT_CONF_CARD_TYPE})}},t.changeProjectCardTypeContent=function(e,t){return function(a){a({type:o.CHANGE_PROJECT_CONF_CARD_TYPE_CONTENT,name:e,value:t})}},t.changeProjectCardTypeSelect=function(e){return function(t){var a=e.split(s.TREE_JOIN_STR),n=a[1],r=a[0];t({type:o.SELECT_PROJECT_CONF_CARD_TYPE,parentName:n,parentUuid:r})}},t.saveProjectCardType=function(e,t,a){return function(n,r){var i=r().projectConfState.get("projectTypeTemp").toJS();i.ctgyUuid=r().projectConfState.getIn(["views","activeTapKeyUuid"]);var s=function(){(0,l.default)("insertProjectTreeOne","POST",JSON.stringify({psiData:i}),function(t){(0,u.showMessage)(t,"show")&&n({type:o.SAVE_PROJECT_CONF_CARD_TYPE,typeTree:t.data.resultList,uuid:i.uuid,btnFlag:e,typeInfo:t.data.info}),n({type:o.SWITCH_LOADING_MASK})})};n({type:o.SWITCH_LOADING_MASK}),(0,l.default)("adjustProjectTypeNameSame","POST",JSON.stringify({psiData:{parentUuid:i.parentUuid,name:i.name,uuid:i.uuid}}),function(e){(0,u.showMessage)(e)?e.data.repeat?(t(),n({type:o.SWITCH_LOADING_MASK}),c.Confirm({message:"卡片类别名称与已有卡片类别名称重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(n({type:o.SWITCH_LOADING_MASK}),s(),a()):a()},onFail:function(e){return console.log(e)}})):s():n({type:o.SWITCH_LOADING_MASK})})}},t.switchProjectType=function(e){return function(t,a){var n=a().projectConfState.getIn(["typeTree","0","uuid"])===e;n?t({type:o.GET_PROJECT_CONF_TYPE_CONTENT,uuid:e,data:{},isAll:n}):(t({type:o.SWITCH_LOADING_MASK}),(0,l.default)("getProjectTreeOne","GET","uuid="+e,function(a){(0,u.showMessage)(a)&&t({type:o.GET_PROJECT_CONF_TYPE_CONTENT,uuid:e,data:a.data,isAll:n}),t({type:o.SWITCH_LOADING_MASK})}))}},t.changeProjectCardTypeBoxChecked=function(e){return function(t){t({type:o.CHANGE_PROJECT_CONF_CARD_TYPE_BOX_STATUS,list:e})}},t.deleteProjectType=function(){return function(e,t){e({type:o.PROJECT_CONF_TYPE_DELETE_BTN_SHOW})}},t.confirmDeleteProjectType=function(){return function(e,t){var a=t().projectConfState.getIn(["views","typeTreeSelectList"]);if(0!==a.size){var r=t().projectConfState.getIn(["views","activeTapKeyUuid"]);e({type:o.SWITCH_LOADING_MASK}),(0,l.default)("deleteProjectType","POST",JSON.stringify({ctgyUuid:r,deleteList:a}),function(t){(0,u.showMessage)(t,"show")&&e({type:o.CONFIRM_DELETE_PROJECT_CONF_TYPE,data:t.data.resultList}),e({type:o.SWITCH_LOADING_MASK})})}else n.default.info("请选择要删除的类别")}},t.projectUpType=function(){return function(e,t){e({type:o.SWITCH_LOADING_MASK});var a=t().projectConfState.getIn(["projectTypeBtnStatus","treeUuid"]),n=t().projectConfState.getIn(["projectTypeBtnStatus","upUuid"]),r=t().projectConfState.getIn(["views","activeTapKeyUuid"]);(0,l.default)("swapProjectTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:a,swappedSubordinateUuid:n,categoryUuid:r}}),function(t){(0,u.showMessage)(t)&&e({type:o.CHANGE_PROJECT_CONF_TYPE_POSITION,list:t.data.resultList,selectedSubordinateUuid:a}),e({type:o.SWITCH_LOADING_MASK})})}},t.projectDownType=function(){return function(e,t){e({type:o.SWITCH_LOADING_MASK});var a=t().projectConfState.getIn(["projectTypeBtnStatus","treeUuid"]),n=t().projectConfState.getIn(["projectTypeBtnStatus","downUuid"]),r=t().projectConfState.getIn(["views","activeTapKeyUuid"]);(0,l.default)("swapProjectTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:a,swappedSubordinateUuid:n,categoryUuid:r}}),function(t){(0,u.showMessage)(t)&&e({type:o.CHANGE_PROJECT_CONF_TYPE_POSITION,list:t.data.resultList,selectedSubordinateUuid:a}),e({type:o.SWITCH_LOADING_MASK})})}},t.adjustProjectCardTyepList=function(e,t,a){return function(n,r){n({type:o.SWITCH_LOADING_MASK});var i=r().projectConfState.getIn(["views","cardSelectList"]).toJS();i.map(function(t,a){t.subordinateName=e});var c=t,s=r().projectConfState.getIn(["views","activeTapKeyUuid"]),d=r().projectConfState.getIn(["views","activeTreeKeyUuid"]);(0,l.default)("adjustProjectCardType","POST",JSON.stringify({cardList:i,subordinateUuid:c,adjustFrom:s,treeFrom:d}),function(e){(0,u.showMessage)(e)&&(n({type:o.ADJUST_PROJECT_CONF_CARD_TYPE_LIST,list:e.data.resultList}),a()),n({type:o.SWITCH_LOADING_MASK})})}},t.cancelInsertOrDeleteProjectType=function(){return function(e,t){if(t().projectConfState.getIn(["projectTypeBtnStatus","isAdd"])){var a=t().projectConfState.getIn(["projectTypeBtnStatus","treeUuid"]);a===t().projectConfState.getIn(["typeTree",0,"uuid"])?e({type:o.CANCLE_PROJECT_CONF_TYPE_BTN,data:{}}):(e({type:o.SWITCH_LOADING_MASK}),(0,l.default)("getProjectTreeOne","GET","uuid="+a,function(t){(0,u.showMessage)(t)&&e({type:o.CANCLE_PROJECT_CONF_TYPE_BTN,data:t.data}),e({type:o.SWITCH_LOADING_MASK})}))}else e({type:o.CANCLE_PROJECT_CONF_TYPE_BTN,data:{}})}},t.getRegretCategoryTree=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments[2];return function(n,r){n({type:o.SWITCH_LOADING_MASK}),e.get("parentUuid")?(0,l.default)("getProjectCardByType","GET","ctgyUuid="+e.get("parentUuid")+"&&subordinateUuid="+e.get("uuid")+"&currentPage="+t+"&pageSize="+s.CONFIG_PAGE_SIZE,function(e){n({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(n({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"cardList",value:(0,d.fromJS)(e.data.resultList)}),n({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretPages",value:e.data.pages}),a&&a())}):(0,l.default)("getProjectListAndTree","GET","listFrom="+e.get("uuid")+"&currentPage="+t+"&pageSize="+s.CONFIG_PAGE_SIZE,function(e){(0,u.showMessage)(e)&&(n({type:o.SWITCH_LOADING_MASK}),n({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"cardList",value:(0,d.fromJS)(e.data.resultList)}),n({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretPages",value:e.data.pages}),n({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"cardTypeList",value:(0,d.fromJS)(e.data.typeList)}),a&&a())})}},t.regretCode=function(e){return function(t){t({type:o.SWITCH_LOADING_MASK}),(0,l.default)("regretCode","POST",JSON.stringify({regretType:"CODE_PROJECT",cardList:e.map(function(e){return{cardUuid:e.uuid,newCode:e.newCode}}),action:"MANAGER-PROJECT_SETTING-REGRET_MODEL"}),function(a){if((0,u.showMessage)(a)){var r=a.data.key;if(r)var i=new Date,c=setInterval(function(){(0,l.default)("regretResult","GET","key="+a.data.key,function(a){if((0,u.showMessage)(a)){var l=new Date;a.data.index==e.length&&a.data.regretCardDto&&a.data.regretCardDto.cardList.length==e.length?(clearInterval(c),t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretResultList",value:(0,d.fromJS)(a.data.regretCardDto.cardList)}),t({type:o.SWITCH_LOADING_MASK})):a.data.index==e.length&&!a.data.regretCardDto&&l-i>3e4&&(clearInterval(c),t({type:o.SWITCH_LOADING_MASK}),n.default.info("系统出错，请重试")),t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretResultIndex",value:a.data.index}),t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretResultKey",value:r})}else clearInterval(c),t({type:o.SWITCH_LOADING_MASK})})},500)}else t({type:o.SWITCH_LOADING_MASK})})}},t.downloadBefore=function(e){return function(t){(0,l.default)("regretCardConfirm","POST",JSON.stringify({cardList:e.map(function(e){return{cardUuid:e.uuid,cardName:e.name,oldCode:e.code,newCode:e.newCode}})}),function(e){if((0,u.showMessage)(e)){t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretResultKey",value:e.data.key});var a=document.getElementsByClassName("regret-download-click")[0];setTimeout(function(){return a.click()},100)}})}},t.checkUsed=function(e){return function(t){(0,l.default)("checkCardUsed","POST",JSON.stringify({cardUuidList:e.map(function(e){return e.uuid}),cardType:"CARD4PERSON"}),function(e){t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"usedCardList",value:(0,d.fromJS)(e.data.usedCard)})})}}},1318:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_INVENTORY_CONF="INIT_INVENTORY_CONF",t.CHANGE_ACTIVE_INVENTORY_CONF_HIGH_TYPE="CHANGE_ACTIVE_INVENTORY_CONF_HIGH_TYPE",t.CHANGE_INVENTORY_CONF_CARD_USED_STATUS="CHANGE_INVENTORY_CONF_CARD_USED_STATUS",t.SELECT_INVENTORY_CONF_CARD_ALL="SELECT_INVENTORY_CONF_CARD_ALL",t.CHANGE_INVENTORY_CONF_CARD_BOX_STATUS="CHANGE_INVENTORY_CONF_CARD_BOX_STATUS",t.DELETE_INVENTORY_CONF_CARD_LIST="DELETE_INVENTORY_CONF_CARD_LIST",t.SELECT_INVENTORY_CONF_CARD_BY_TYPE="SELECT_INVENTORY_CONF_CARD_BY_TYPE",t.GET_INVENTORY_CONFIG_INIT="GET_INVENTORY_CONFIG_INIT",t.BEFORE_EDIT_INVENETORY_HIGH_TYPE="BEFORE_EDIT_INVENETORY_HIGH_TYPE",t.BEFORE_INSERT_INVENTORY_CONF_HGIH_TYPE="BEFORE_INSERT_INVENTORY_CONF_HGIH_TYPE",t.CHANGE_INVENTORY_CONF_HIGH_TYPE_CONTENT="CHANGE_INVENTORY_CONF_HIGH_TYPE_CONTENT",t.AFTER_SAVE_INVENTORYSETTING_CONTENT="AFTER_SAVE_INVENTORYSETTING_CONTENT",t.DELETE_INVENTORY_CONF_HGIH_TYPE="DELETE_INVENTORY_CONF_HGIH_TYPE",t.DELETE_CURRENT_INVENTORY_CONF_HGIH_TYPE="DELETE_CURRENT_INVENTORY_CONF_HGIH_TYPE",t.GET_INVENTORY_CONF_HIGH_TYPE_LIST="GET_INVENTORY_CONF_HIGH_TYPE_LIST",t.CHANGE_INVENTORY_CONF_ASSEMBLY_STATUS="CHANGE_INVENTORY_CONF_ASSEMBLY_STATUS",t.BEFORE_ADD_INVENTORY_CONF_CARD_INVENTORY="BEFORE_ADD_INVENTORY_CONF_CARD_INVENTORY",t.INIT_ADD_INVENTORY_STATE="INIT_ADD_INVENTORY_STATE",t.BEFORE_ADD_INVENTORY_CONF_CARD_RUNNING="BEFORE_ADD_INVENTORY_CONF_CARD_RUNNING",t.EMPTY_WAREHOUSE_LIST_QUANTITY="EMPTY_WAREHOUSE_LIST_QUANTITY",t.CHANGE_INVENTORY_CONF_CARD_CONTENT="CHANGE_INVENTORY_CONF_CARD_CONTENT",t.CHANGE_INVENTORY_CARD_CONTENT="CHANGE_INVENTORY_CARD_CONTENT",t.CHANGE_INVENTORY_CONF_CARD_VIEWS="CHANGE_INVENTORY_CONF_CARD_VIEWS",t.CHANGE_INVENTORY_CONF_VIEWS_CONTENT="CHANGE_INVENTORY_CONF_VIEWS_CONTENT",t.CHANGE_INVENTORY_CONF_CARD_NATURE="CHANGE_INVENTORY_CONF_CARD_NATURE",t.CHANGE_INVENTORY_CONF_CARD_CATEGORY_STATUS="CHANGE_INVENTORY_CONF_CARD_CATEGORY_STATUS",t.CHANGE_INVENTORY_CONF_CARD_CATEGORY_TYPE="CHANGE_INVENTORY_CONF_CARD_CATEGORY_TYPE",t.CHANGE_INVENTORY_CONF_INNER_STRING="CHANGE_INVENTORY_CONF_INNER_STRING",t.IVNENTORY_CHARGE_ITEM_CHECKBOX_SELECT="IVNENTORY_CHARGE_ITEM_CHECKBOX_SELECT",t.SAVE_INVENTORY_CONF_CARD_INVENTORY="SAVE_INVENTORY_CONF_CARD_INVENTORY",t.BEFORE_EDIT_INVENTORY_CONF_CARD="BEFORE_EDIT_INVENTORY_CONF_CARD",t.BEFORE_ADD_INVENTORY_CONF_CARD_TYPE="BEFORE_ADD_INVENTORY_CONF_CARD_TYPE",t.BEFORE_INSERT_INVENTORY_CONF_CARD_TYPE="BEFORE_INSERT_INVENTORY_CONF_CARD_TYPE",t.CHANGE_INVENTORY_CONF_CARD_TYPE_CONTENT="CHANGE_INVENTORY_CONF_CARD_TYPE_CONTENT",t.SELECT_INVENTORY_CONF_CARD_TYPE="SELECT_INVENTORY_CONF_CARD_TYPE",t.GET_INVENTORY_CONF_TYPE_CONTENT="GET_INVENTORY_CONF_TYPE_CONTENT",t.CHANGE_INVENTORY_CONF_CARD_TYPE_BOX_STATUS="CHANGE_INVENTORY_CONF_CARD_TYPE_BOX_STATUS",t.INVENTORY_CONF_TYPE_DELETE_BTN_SHOW="INVENTORY_CONF_TYPE_DELETE_BTN_SHOW",t.CONFIRM_DELETE_INVENTORY_CONF_TYPE="CONFIRM_DELETE_INVENTORY_CONF_TYPE",t.CHANGE_INVENTORY_CONF_TYPE_POSITION="CHANGE_INVENTORY_CONF_TYPE_POSITION",t.CANCLE_INVENTORY_CONF_TYPE_BTN="CANCLE_INVENTORY_CONF_TYPE_BTN",t.SAVE_INVENTORY_CONF_CARD_TYPE="SAVE_INVENTORY_CONF_CARD_TYPE",t.ADJUST_INVENTORY_CONF_CARD_TYPE_LIST="ADJUST_INVENTORY_CONF_CARD_TYPE_LIST",t.INIT_UNIT_STATE="INIT_UNIT_STATE",t.BEFORE_CH_IMPORT="BEFORE_CH_IMPORT",t.CLOSE_CH_IMPORT_CONTENT="CLOSE_CH_IMPORT_CONTENT",t.CHANGE_CH_IMPORT_STATUS="CHANGE_CH_IMPORT_STATUS",t.CHANGE_CH_IMPORT_NUM="CHANGE_CH_IMPORT_NUM",t.AFTER_CH_IMPORT="AFTER_CH_IMPORT",t.ADJUST_CATEGORY_ORDER_INVENTORY="ADJUST_CATEGORY_ORDER_INVENTORY",t.CHOOSE_ASSIST_UNIFORM="CHOOSE_ASSIST_UNIFORM"},1325:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=b(a(47)),l=b(a(129)),u=b(a(61)),c=b(a(100)),s=b(a(37)),d=b(a(32)),f=b(a(14)),m=b(a(45)),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(128),a(79),a(99),a(38),a(51),a(78),a(55);var p=b(a(1)),C=(b(a(0)),a(18)),h=a(56);a(1357);a(127);var y=a(1372),E=v(a(27)),S=a(22),T=v(a(1279)),_=v(a(102));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}var L=m.default.Option,I=(0,h.connect)(function(e){return e})((i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),g(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.accountConfigState!=e.accountConfigState||this.props.homeState!=e.homeState||this.props.allState!=e.allState||this.props.showModal!=e.showModal}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.showModal,n=e.homeState,r=e.allState,i=e.accountConfigState,g=e.onClose,h=e.fromPage,v=e.cardList,b=void 0===v?(0,C.fromJS)([]):v,I=(n.getIn(["data","userInfo","sobInfo","moduleInfo"]),n.getIn(["permissionInfo","Config"]).getIn(["edit","permission"])),N="accountConfig"!==h;N&&(I=n.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]));var O=i.getIn(["views","insertOrModify"]),A=i.get("accountTemp"),R=A.get("name"),w=A.get("uuid"),P=A.get("type"),U=A.get("openingName"),M=A.get("openingBank"),k=A.get("accountNumber"),j=A.get("beginAmount"),J=A.get("openInfo"),D=A.get("needPoundage"),x=A.get("poundage"),F=A.get("poundageRate"),H=!!r.getIn(["period","closedyear"]);function B(){var e=[];return""===R?e.push("账户名称必填"):(0,S.nameCheck)(R)&&e.push("名称包含中文及中文标点字符，长度不能超过"+E.AC_CHINESE_NAME_LENGTH+"位；不包含中文及中文标点字符，长度不能超过"+E.AC_NAME_LENGTH+"位"),""===P&&e.push("账户类型必填"),k.length>40&&e.push("卡号最长40个字符"),M.length>40&&e.push("银行户名最长40个字符"),U.length>40&&e.push("开户行／机构最长40个字符"),"-"===j&&e.push("请输入有效的数值"),!D||0!==x&&"0"!==x||e.push("费用上限不能为0"),e}var G=/^\d{0,14}(\.\d{0,2})?$/,Y=void 0,Z=void 0,z=void 0;return"modify"===O&&b.size&&(z=b.findIndex(function(e){return e.get("uuid")===w}),Y=z-1,Z=z+1),p.default.createElement(o.default,{okText:"保存",visible:a,maskClosable:!1,title:"insert"==O?"新增账户":"编辑账户",onCancel:function(){return g()},width:"480px",footer:[p.default.createElement(d.default,{style:{float:"left",display:"insert"==O?"none":""},disabled:0===b.findIndex(function(e){return e.get("uuid")===w}),onClick:function(){t(T.beforeModifyaccountConfRunningOld(b.get(Y)))}},p.default.createElement(f.default,{type:"caret-left"})),p.default.createElement(d.default,{style:{float:"left",display:"insert"==O?"none":""},disabled:b.findIndex(function(e){return e.get("uuid")===w})===b.size-1||!b.size,onClick:function(){t(T.beforeModifyaccountConfRunningOld(b.get(Z)))}},p.default.createElement(f.default,{type:"caret-right"})),p.default.createElement(d.default,{key:"cancel",type:"ghost",style:{display:"insert"==O?"none":"inline-block"},onClick:function(){g()}},"取 消"),p.default.createElement(d.default,{key:"ok",disabled:!I,type:N?"primary":"modify"==O?"primary":"ghost",onClick:function(){var e=B();e.length?s.default.info(e.join(",")):t(_.saveAccountConfAccount(h,!1,function(){return g()}))}},"保 存"),p.default.createElement(d.default,{key:"addNextAc",type:"primary",disabled:!I,style:{display:"insert"!=O||N?"none":"inline-block"},onClick:function(){var e=B();e.length?s.default.info(e.join(",")):t(_.saveAccountConfAccount(h,!0))}},"保存并新增")]},p.default.createElement("div",{className:"accountConf-modal-list"},p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"账户名称："),p.default.createElement("div",null,p.default.createElement(c.default,{placeholder:"请输入便于识别的账户名",value:R,onChange:function(e){t(T.changeAccountConfingCommonString("account","name",e.target.value))}}))),p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"账户类型："),p.default.createElement(u.default,{title:"modify"===O&&H&&0!=j?"账套已结账且存在期初值，请通过反悔模式进行修改":""},p.default.createElement("div",null,p.default.createElement(m.default,{disabled:"modify"===O&&H&&0!=j,placeholder:"（必填）",value:(0,y.typeStr)(P),onChange:function(e){t(T.changeAccountConfingCommonString("account","type",e))}},y.typeList.map(function(e,t){return p.default.createElement(L,{key:e.key,value:e.key},e.value)}))))),p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"期初余额："),p.default.createElement("div",null,p.default.createElement(c.default,{disabled:H,value:j,placeholder:"（选填）",onChange:function(e){(0,S.numberTest)(e,function(e){t(T.changeAccountConfingCommonString("account","beginAmount",e))},!0)}}))),p.default.createElement("div",{style:{display:"spare"===P?"none":""}},p.default.createElement(l.default,{onChange:function(e){t(T.changeAccountConfingCommonString("account","needPoundage",e.target.checked))},checked:D},"启用账户手续费")),D&&"spare"!==P?p.default.createElement("div",null,p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"费用比率："),p.default.createElement("div",{style:{display:"flex",lineHeight:"28px"}},p.default.createElement(c.default,{placeholder:"请输入手续费费用比率",value:F,onChange:function(e){var a=e.target.value.indexOf("。")>-1?e.target.value.replace("。","."):e.target.value;0===(a=a.replace(/,/g,"")).indexOf("0")&&"0"!=a&&a>=1&&(a=a.substr(1)),"."===a||"-."===a?s.default.info("请输入正确的数值"):a>1e3?s.default.info("费用比率必须小于1000‰"):0===a.indexOf("-")?s.default.info("费用比率不能为负"):G.test(a)?t(T.changeAccountConfingCommonString("account","poundageRate",a)):s.default.info("金额只能输入小于14位数两位小数的数字")}}),"‰")),p.default.createElement("div",{className:"accountConf-modal-list-item"},p.default.createElement("label",null,"费用上限："),p.default.createElement("div",null,p.default.createElement(c.default,{placeholder:"请输入手续费金额上限",value:-1===x?"":x,onChange:function(e){var a=e.target.value.indexOf("。")>-1?e.target.value.replace("。","."):e.target.value;0===(a=a.replace(/,/g,"")).indexOf("0")&&"0"!=a&&a>=1&&(a=a.substr(1)),"."===a||"-."===a?s.default.info("请输入正确的数值"):0===a.indexOf("-")?s.default.info("费用上限不能为负"):""===a||G.test(a)?t(T.changeAccountConfingCommonString("account","poundage",a)):s.default.info("费用上限需大于0")}})))):"","cash"===P||"spare"===P?"":p.default.createElement(l.default,{onChange:function(e){t(T.changeAccountConfingCommonString("account","openInfo",e.target.checked))},checked:J},"账户信息"),J&&"cash"!==P&&"spare"!==P?p.default.createElement("div",null,p.default.createElement("div",{style:{display:"cash"===P?"none":""},className:"accountConf-modal-list-item"},p.default.createElement("label",null,"账号："),p.default.createElement("div",null,p.default.createElement(c.default,{placeholder:"请输入账户号码",value:k,onChange:function(e){t(T.changeAccountConfingCommonString("account","accountNumber",e.target.value))},onBlur:function(e){return t(T.changeAccountConfAccountNumber((0,y.typeStr)(P),k))}}))),p.default.createElement("div",{style:{display:"cash"===P?"none":""},className:"accountConf-modal-list-item"},p.default.createElement("label",null,"开户名："),p.default.createElement("div",null,p.default.createElement(c.default,{placeholder:"请输入账户的开户名称",value:U,onChange:function(e){t(T.changeAccountConfingCommonString("account","openingName",e.target.value))}}))),p.default.createElement("div",{style:{display:"cash"===P?"none":""},className:"accountConf-modal-list-item"},p.default.createElement("label",null,"开户行/机构："),p.default.createElement("div",null,p.default.createElement(c.default,{placeholder:"请填入开户行或支付机构名称",value:M,onChange:function(e){t(T.changeAccountConfingCommonString("account","openingBank",e.target.value))}})))):""))}}]),t}(),r.displayName="AccountCongigModifyModal",n=i))||n;t.default=I},1326:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=y(a(47)),i=y(a(14)),o=y(a(37)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(78),a(38);var u=a(1),c=y(u),s=a(18),d=a(17),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(30)),m=(a(22),a(31)),g=y(a(1415)),p=y(a(1327)),C=a(43),h=a(104);function y(e){return e&&e.__esModule?e:{default:e}}var E=(0,d.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.setUploadParam=function(t,a,n){var r=e.props.uploadKeyJson.get("dir");""!=a&&(e.get_suffix(a),r=e.calculateObjectName(a,r));var i={key:r,policy:e.props.uploadKeyJson.get("policy"),OSSAccessKeyId:e.props.uploadKeyJson.get("accessKeyId"),success_action_status:"200",callback:e.props.uploadKeyJson.get("callback"),signature:e.props.uploadKeyJson.get("signature")};t.setOption({url:e.props.uploadKeyJson.get("host"),multipart_params:i}),t.start()},e.callback=function(e,t,a){e.removeFile(t),e.addFile(a)},e.reUploadFile=function(e,t,a){e.removeFile(t.id),e.addFile(a.getNative())},e.get_suffix=function(e){var t=e.lastIndexOf("."),a="";return-1!=t&&(a=e.substring(t)),a},e.calculateObjectName=function(e,t){return t+(new Date).getTime()+"/"+e},e.checkEnclosureExist=function(t){for(var a=e.props.enclosureList?e.props.enclosureList:(0,s.fromJS)([]),n=!1,r=0;r<a.size;r++)if(a.getIn([r,"fileName"])==t.name){n=!0;break}return n},e.dataURLtoBlob=function(e){for(var t=e.split(","),a=(t[0].match(/:(.*?);/)[1],atob(t[1])),n=a.length,r=new Uint8Array(n);n--;)r[n]=a.charCodeAt(n);return new Blob([r],{type:"image/jpeg"})},e.state={uploadingModal:!1,errMessage:"",secondUpload:!1,isClipBoardUpload:!1,compressFileLength:0,clipUploadFile:function(){}},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new g.default.Uploader({browse_button:void 0===e.props.id?"browse":e.props.id,drop_element:"drag-area",multi_selection:!0,url:m.ROOTPKT+"/aliyun/oss/callback",filters:{max_file_size:"10mb",prevent_duplicates:!1}});t.init();var a=0,n=0;t.bind("FilesAdded",function(t,n){if(void 0!==e.props.uploadKeyJson.get("checkMoreFj")&&!1===e.props.uploadKeyJson.get("checkMoreFj"))return n.forEach(function(e,a){t.removeFile(e.id)}),void e.setState({uploadingModal:!0,errMessage:"贵公司的附件容量已用完"});if(n.length>0){if(e.state.secondUpload)return e.setUploadParam(t,n[0].name,""),void(1==e.state.compressFileLength?e.setState({secondUpload:!1,compressFileLength:0}):e.setState({compressFileLength:e.state.compressFileLength-1}));if(e.props.dispatch((0,C.switchLoadingMask)()),n.length>9||n.length+e.props.enclosureList.size>9)return o.default.error("最多上传9个附件",3),n.forEach(function(e,a){t.removeFile(e.id)}),void e.props.dispatch((0,C.switchLoadingMask)());for(var r=!1,i=!0,l=!1,u=0;u<n.length;u++){var c=n[u],s=c.name;if(s.indexOf("@")>-1){e.setState({uploadingModal:!0,errMessage:"文件名中不允许包含@符号"}),i=!1,n.forEach(function(e,a){t.removeFile(e.id)}),e.props.dispatch((0,C.switchLoadingMask)());break}if(s.length>40){e.setState({uploadingModal:!0,errMessage:"文件名称不能超过40字符"}),i=!1,n.forEach(function(e,a){t.removeFile(e.id)}),e.props.dispatch((0,C.switchLoadingMask)());break}if(e.checkEnclosureExist(n[u])){e.setState({uploadingModal:!0,errMessage:"文件名已存在"}),i=!1,n.forEach(function(e,a){t.removeFile(e.id)}),e.props.dispatch((0,C.switchLoadingMask)());break}"image"==c.type.substr(0,5)&&c.size>204800&&(l=!0)}if(i){if(a=n.length,e.state.isClipBoardUpload)return void e.setUploadParam(t,"",!1);if(l)e.props.dispatch((0,C.switchLoadingMask)()),f.Confirm({message:"请选择是否原图上传",title:"提示",buttonLabels:["压缩上传","原图上传"],onSuccess:function(a){e.props.dispatch((0,C.switchLoadingMask)()),r=1!==a.buttonIndex;for(var i=function(a){var i=new FileReader,l=new Image,u=document.createElement("canvas"),c=u.getContext("2d");if("image"==n[a].type.substr(0,5)){var s=n[a].getNative();i.readAsDataURL(s),i.onload=function(e){l.src=e.target.result},l.onload=function(){var i=n[a];if(i.size>204800)if(r)try{var s=l.width,d=l.height,f=1*s,m=1*d;u.width=f,u.height=m,c.clearRect(0,0,f,m),c.drawImage(l,0,0,f,m);var g=u.toDataURL("image/jpeg",.3),p=e.dataURLtoBlob(g);p.name=i.name,i.size<p.size?i.size<=2097152?a+1===n.length&&e.setUploadParam(t,"",!1):((0,o.default)("压缩上传失败，仅可上传原图"),n.length):p.size<=2097152?(e.callback(t,i.id,p),e.setState({compressFileLength:e.state.compressFileLength+1,secondUpload:!0}),a+1===n.length&&e.setUploadParam(t,"",!1)):((0,o.default)("压缩上传失败，仅可上传原图"),n.length)}catch(t){n.length,e.setState({uploadingModal:!0,errMessage:"图片压缩异常，不支持该图片压缩"})}else a+1===n.length&&e.setUploadParam(t,"",!1);else a+1===n.length&&e.setUploadParam(t,"",!1)}}else a+1===n.length&&e.setUploadParam(t,"",!1)},l=0;l<n.length;l++)i(l)}});else for(var d=0;d<n.length;d++)d+1===n.length&&e.setUploadParam(t,"",!1)}}}),t.bind("FileUploaded",function(t,r,i){t.removeFile(r.id),n+=1,200==i.status?e.props.uploadEnclosureList([r.name,r,JSON.parse(i.response),n===a]):203==i.status?o.default.info("上传到OSS成功，但是oss访问用户设置的上传回调服务器失败，失败原因是:"+i.response):o.default.info(i.response),n===a&&(n=0,a=0,t.files.forEach(function(e){t.removeFile(e.id)}))}),t.bind("BeforeUpload",function(t,a){e.setUploadParam(t,a.name,!0)}),t.bind("Error",function(t,r){-600==r.code?o.default.info("文件最大不能超过10M"):-601==r.code?o.default.info("不能上传所选择的文件类型"):-602==r.code?o.default.info("这个文件已经上传过一遍了"):(0===r.status?f.Alert("服务器正忙，请稍后再试","确定"):f.Alert("上传出错:"+r.response,"确定"),(0,h.xfnFetchErrorToDeveloper)({title:"上传出错",message:r.status+"-"+r.code+"-"+r.message+"-"+r.requestId+"-"+JSON.stringify(r.file),remark:"附件"},{msgTextSend:m.ROOT+"/msg/text/send"}),(n+=1)===a&&(n=0,a=0,t.files.forEach(function(e){t.removeFile(e.id)}),e.props.dispatch((0,C.switchLoadingMask)())))}),this.clipUploadFile=function(e){t.addFile(e)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.formPage,n=(t.dispatch,t.enclosureList,t.uploadEnclosureList,t.style),o=(t.uploadKeyJson,t.getUploadTokenFetch),l=this.state,s=l.uploadingModal,d=l.errMessage;l.secondUpload,l.isClipBoardUpload;return c.default.createElement(u.Fragment,null,c.default.createElement("div",{className:"enclosure-item enclosure-add-file",style:n,id:"drag-area"},c.default.createElement("a",{className:"enclosure-item-input",id:void 0===this.props.id?"browse":this.props.id,onClick:function(){o(),e.setState({secondUpload:!1,isClipBoardUpload:!1})}}),c.default.createElement(i.default,{type:"plus"}),c.default.createElement(r.default,{title:"上传失败",visible:s,onOk:function(){return e.setState({uploadingModal:!1})},onCancel:function(){return e.setState({uploadingModal:!1})}},c.default.createElement("p",null,d))),c.default.createElement(p.default,{getUploadTokenFetch:o,clipUploadFile:function(t){e.setState({secondUpload:!1,isClipBoardUpload:!0}),e.clipUploadFile(t)},formPage:a}))}}]),t}())||n;t.default=E},1327:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=s(a(37)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(38);var o=s(a(1)),l=(a(18),a(17)),u=a(22),c=s(a(1328));function s(e){return e&&e.__esModule?e:{default:e}}var d=(0,l.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.get_suffix=function(e){var t=e.lastIndexOf("."),a="";return-1!=t&&(a=e.substring(t)),a},e.state={clipBoardModalShow:!1,clipBoardFile:"",clipBoardBlob:"",isCustomName:!1,fileName:"",widthHeigthRate:1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"componentDidMount",value:function(){var e=this;document.getElementById(this.props.formPage?this.props.formPage:"clipBoard").addEventListener("paste",function(t){var a=event.clipboardData&&event.clipboardData.items,n=null;if(a&&a.length)for(var i=0;i<a.length;i++)if(-1!==a[i].type.indexOf("image")){n=a[i].getAsFile();break}if(n){console.log("file",n),e.props.getUploadTokenFetch();var o=new FileReader,l=new Image;o.readAsDataURL(n);var u=e;o.onload=function(e){l.src=e.target.result,l.onload=function(){var t=l.width,a=l.height;u.setState({clipBoardFile:n,clipBoardModalShow:!0,clipBoardBlob:e.target.result,widthHeigthRate:t/a})}}}else r.default.info("没有可粘贴的图片")})}},{key:"render",value:function(){var e=this,t=this.props,a=t.formPage,n=(t.dispatch,t.enclosureList,t.uploadEnclosureList,t.style),i=(t.uploadKeyJson,t.getUploadTokenFetch,t.clipUploadFile),l=this.state,s=l.clipBoardModalShow,d=l.clipBoardFile,f=l.clipBoardBlob,m=l.isCustomName,g=l.customName,p=l.widthHeigthRate;return o.default.createElement("div",{className:"enclosure-clipboard-add-file",style:n,id:"drag-area"},o.default.createElement("input",{id:a||"clipBoard",value:"",className:"enclosure-clipboard-add-btn"}),o.default.createElement("div",{className:"enclosure-clipboard-add-fake-btn"},o.default.createElement("p",null,"在此区域内点击右键"),o.default.createElement("p",{className:"enclosure-clipboard-add-fake-btn-text"},"“粘贴”剪贴板中的图片")),o.default.createElement(c.default,{clipBoardModalShow:s,clipBoardFile:d,clipBoardBlob:f,widthHeigthRate:p,onCancel:function(){return e.setState({clipBoardModalShow:!1,isCustomName:!1,customName:""})},onOK:function(){var t="";if(m){if(!g)return r.default.info("请输入自定义名称");if(g.indexOf("@")>-1)return r.default.info("文件名中不允许包含@符号");if(g.length>40)return r.default.info("文件名称不能超过40字符");t=g+".jpg"}else t="粘贴图片"+(new u.DateLib).getFullDate()+".jpg";var a=new File([d],t,{type:d.type});i(a),e.setState({clipBoardModalShow:!1,isCustomName:!1,customName:""})},isCustomName:m,customName:g,changeIsCustomName:function(){e.setState({isCustomName:!m})},changeCustomName:function(t){e.setState({customName:t.target.value})}}))}}]),t}())||n;t.default=d},1328:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=s(a(47)),i=s(a(129)),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(128);var l=s(a(1)),u=(a(18),a(17)),c=a(127);function s(e){return e&&e.__esModule?e:{default:e}}var d=(0,u.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.clipBoardModalShow,a=(e.clipBoardFile,e.clipBoardBlob),n=e.onOK,o=e.onCancel,u=e.isCustomName,s=e.customName,d=e.changeIsCustomName,f=e.changeCustomName,m=e.widthHeigthRate;return console.log("widthHeigthRate",m),l.default.createElement(r.default,{title:"上传附件",maskClosable:!1,visible:t,onOk:n,onCancel:o},l.default.createElement("div",{className:"clip-board-preview-img",style:m>=1?{maxHeight:"500px"}:{height:"500px"}},l.default.createElement("img",{id:"clipBoardImg",src:a,style:m>=1?{width:"100%"}:{height:"100%"}})),l.default.createElement("div",{className:"clip-board-preview-name"},l.default.createElement(i.default,{checked:u,onChange:d})," ",l.default.createElement("span",null,"自定义名称"),l.default.createElement(c.XfInput,{className:"clip-board-preview-name-input",style:{display:u?"":"none"},value:s,onChange:f})))}}]),t}())||n;t.default=d},1336:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=g(a(14)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(78);var o=g(a(1)),l=a(17),u=a(18),c=(g(a(6)),a(56),a(127)),s=(m(a(27)),g(a(90)),a(22)),d=(a(101),g(a(1303)),g(a(1309)),a(1748)),f=m(a(177));m(a(172));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=(0,l.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={show:!1},p(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.titleList,n=(t.listTitle,t.strongList),i=t.dispatch,l=t.amount,m=t.oriState,g=t.notHandleAmount,p=n.reduce(function(e,t){return e+Number(t.get("handleAmount"))},0),C=void 0;return C=0===p?"未核销":"STATE_XC_DK"!==m&&"STATE_XC_DJ"!==m&&"STATE_SF_JN"!==m||0!==g?("STATE_XC_DK"===m||"STATE_XC_DJ"===m||"STATE_SF_JN"===m)&&g>0?"部分核销":Math.abs(p)<Math.abs(l||0)?"部分核销":"全部核销":"全部核销",o.default.createElement("div",null,o.default.createElement("div",{className:"payment-water"},o.default.createElement("span",null,"核销情况：",C),"未核销"!==C?o.default.createElement("span",{className:"detail"},this.state.show?o.default.createElement("span",{onClick:function(){e.setState({show:!1})}},"收拢 ",o.default.createElement(r.default,{type:"up"})):o.default.createElement("span",{onClick:function(){e.setState({show:!0})}},"查看详情 ",o.default.createElement(r.default,{type:"down"}))):null),o.default.createElement(c.TableAll,{className:"editRunning-table-no-box",style:{display:this.state.show&&n&&n.size?"":"none"}},o.default.createElement(c.TableTitle,{className:"editRunning-table-no-box-width",titleList:a,hasCheckbox:!1}),o.default.createElement(c.TableBody,null,n&&n.map(function(e,t){var a=e.get("handleAmount");e.get("notHandleAmount");return o.default.createElement(c.TableItem,{className:"editRunning-table-no-box-width",key:e.get("uuid")},o.default.createElement("li",null,e.get("oriDate")),o.default.createElement(c.TableOver,{textAlign:"left",className:"account-flowNumber",onClick:function(t){t.stopPropagation(),i(f.getPreviewRunningBusinessFetch(e,"lrls",(0,u.fromJS)([]),function(){(0,d.refreshButtonAction)()}))}},o.default.createElement("span",null,e.get("jrIndex")+" 号")),o.default.createElement("li",null,o.default.createElement("span",null,e.get("oriAbstract"))),o.default.createElement("li",null,o.default.createElement("span",null,e.get("jrJvTypeName"))),o.default.createElement("li",null,o.default.createElement("p",null,(0,s.formatMoney)(a))))}),o.default.createElement(c.TableItem,{className:"editRunning-table-no-box-width",key:"total"},o.default.createElement("li",null),o.default.createElement("li",null),o.default.createElement("li",null),o.default.createElement("li",null,o.default.createElement("span",null,"合计")),o.default.createElement("li",null,o.default.createElement("p",null,(0,s.formatMoney)(n.reduce(function(e,t){return e+Number(t.get("handleAmount"))},0))))))))}}]),t}())||n;t.default=C},1344:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_RELATIVE_CONF="INIT_RELATIVE_CONF",t.GET_RELATIVE_CONF_INIT="GET_RELATIVE_CONF_INIT",t.CHANGE_ACTIVE_RELATIVE_CONF_HIGH_TYPE="CHANGE_ACTIVE_RELATIVE_CONF_HIGH_TYPE",t.CHANGE_RELATIVE_CARD_USED_STATUS="CHANGE_RELATIVE_CARD_USED_STATUS",t.SELECT_RELATIVE_CARD_ALL="SELECT_RELATIVE_CARD_ALL",t.CHANGE_RELATIVE_CARD_BOX_STATUS="CHANGE_RELATIVE_CARD_BOX_STATUS",t.DELETE_RELATIVE_CARD_LIST="DELETE_RELATIVE_CARD_LIST",t.SELECT_RELATIVE_CARD_BY_TYPE="SELECT_RELATIVE_CARD_BY_TYPE",t.BEFORE_EDIT_RELATIVE_HIGH_TYPE="BEFORE_EDIT_RELATIVE_HIGH_TYPE",t.BEFORE_INSERT_RELATIVE_HGIH_TYPE="BEFORE_INSERT_RELATIVE_HGIH_TYPE",t.CHANGE_RELATIVE_HIGH_TYPE_CONTENT="CHANGE_RELATIVE_HIGH_TYPE_CONTENT",t.AFTER_SAVE_RELATIVE_HIGH_TYPE="AFTER_SAVE_RELATIVE_HIGH_TYPE",t.DELETE_CURRENT_RELATIVE_HGIH_TYPE="DELETE_CURRENT_RELATIVE_HGIH_TYPE",t.DELETE_RELATIVE_HGIH_TYPE="DELETE_RELATIVE_HGIH_TYPE",t.BEFORE_ADD_RELATIVE_CARD="BEFORE_ADD_RELATIVE_CARD",t.BEFORE_ADD_RELATIVE_CARD_FROM_RUNNING="BEFORE_ADD_RELATIVE_CARD_FROM_RUNNING",t.BEFORE_EDIT_RELATIVE_CARD="BEFORE_EDIT_RELATIVE_CARD",t.CHANGE_RELATIVE_CARD_CONTENT="CHANGE_RELATIVE_CARD_CONTENT",t.CHANGE_RELATIVE_VIEWS_CONTENT="CHANGE_RELATIVE_VIEWS_CONTENT",t.CHANGE_RELATIVE_CARD_CATEGORY_STATUS="CHANGE_RELATIVE_CARD_CATEGORY_STATUS",t.CHANGE_RELATIVE_CARD_CATEGORY_TYPE="CHANGE_RELATIVE_CARD_CATEGORY_TYPE",t.SAVE_RELATIVE_CARD="SAVE_RELATIVE_CARD",t.BEFORE_ADD_RELATIVE_CARD_TYPE="BEFORE_ADD_RELATIVE_CARD_TYPE",t.BEFORE_INSERT_RELATIVE_CARD_TYPE="BEFORE_INSERT_RELATIVE_CARD_TYPE",t.CHANGE_RELATIVE_TYPE_CONTENT="CHANGE_RELATIVE_TYPE_CONTENT",t.SELECT_RELATIVE_TYPE_PARENT="SELECT_RELATIVE_TYPE_PARENT",t.GET_RELATIVE_TYPE_CONTENT="GET_RELATIVE_TYPE_CONTENT",t.CHANGE_RELATIVE_TYPE_BOX_STATUS="CHANGE_RELATIVE_TYPE_BOX_STATUS",t.RELATIVE_TYPE_DELETE_BTN_SHOW="RELATIVE_TYPE_DELETE_BTN_SHOW",t.CONFIRM_DELETE_RELATIVE_TYPE="CONFIRM_DELETE_RELATIVE_TYPE",t.CHANGE_RELATIVE_TYPE_POSITION="CHANGE_RELATIVE_TYPE_POSITION",t.CANCLE_RELATIVE_TYPE_BTN="CANCLE_RELATIVE_TYPE_BTN",t.SAVE_RELATIVE_CARD_TYPE="SAVE_RELATIVE_CARD_TYPE",t.ADJUST_RELATIVE_CONF_CARD_TYPE_LIST="ADJUST_RELATIVE_CONF_CARD_TYPE_LIST",t.BEFORE_WL_IMPORT="BEFORE_WL_IMPORT",t.CLOSE_WL_IMPORT_CONTENT="CLOSE_WL_IMPORT_CONTENT",t.AFTER_WL_IMPORT="AFTER_WL_IMPORT",t.CHANGE_WL_IMPORT_NUM="CHANGE_WL_IMPORT_NUM",t.CHANGE_WL_IMPORT_STATUS="CHANGE_WL_IMPORT_STATUS",t.ADJUST_CATEGORY_ORDER_RELATIVE="ADJUST_CATEGORY_ORDER_RELATIVE"},1345:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(a(14)),r=p(a(100)),i=p(a(32)),o=p(a(37)),l=p(a(47)),u=p(a(171)),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(78),a(99),a(51),a(38),a(46),a(170);var d=p(a(1));p(a(0)),a(18),a(56);a(1240);g(a(27));var f=p(a(90)),m=(a(22),p(a(1244)),p(a(1288)),a(127));g(a(1241));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}u.default.TreeNode;var h=l.default.confirm,y=new RegExp("^[^一-龥]{0,16}$"),E=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={curSerialList:n.props.serialList.toJS()||[],preWords:"",openNumber:"",increase:"",addNumber:"",curPage:1,sortIndex:1},n.matchMath=function(e){return e.match(/\d+$/)?e.match(/\d+$/)[0]:""},C(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,a=(t.assistModal,t.allAssistClassificationList,t.assistClassificationList,t.onClose),u=t.visible,s=t.onOk,g=t.fromPage,p=this.state,C=p.curSerialList,E=p.curPage,S=p.preWords,T=p.addNumber,_=p.openNumber,v=p.increase,b=p.sortIndex,L=Math.ceil((C.length||1)/20),I=C.filter(function(e,t){return t<20*E&&t>=20*(E-1)});return d.default.createElement(l.default,{destroyOnClose:!0,className:"serial-modal",width:"480px",visible:u,maskClosable:!1,title:"序列号录入",footer:[d.default.createElement(i.default,{style:C.length?{borderColor:"#fd5458",color:"#fd5458"}:{},disabled:!C.length,onClick:function(){C.some(function(e){return e.serialUuid&&!e.canModify})?o.default.info("存在序列号已出库，不允许清空"):C.length&&l.default.confirm({title:"提示",content:"确认清空当前序列号吗？",onOk:function(){e.setState({curSerialList:[],curPage:1})}})}},"清空"),d.default.createElement(i.default,{onClick:a},"取消"),d.default.createElement(i.default,{type:"primary",onClick:function(){var t=[],n=C.map(function(e){return c({},e,{serialNumber:(e.serialNumber||"").trim()})});if(n.forEach(function(e,a){(e.serialNumber||"").length>16&&t.push(a+1)}),n.length>1e3)o.default.info("序列号数量不能超过1000个！");else if(n.some(function(e){return!e.serialNumber}))o.default.info("序列号不能为空！");else if(t.length){var r=t;o.default.info("序号"+r.join("、")+"的序列号不可超过16字符")}else if("inventory"===g&&C.length>1e3)o.default.info("序列号不能超过1000个");else{if("inventory"!==g&&C.length>100)o.default.info("序列号不能超过100个");else{var i=[],l=[];if(n.map(function(e,t){var a=e.serialNumber,n=C.findIndex(function(e,n){return a===e.serialNumber&&t<n});n>-1&&(i.push(t+1),l=l.concat([n+1,t+1]))}),i.length){var u=Array.from(new Set(l)).sort(function(e,t){return e-t}).join("、");return void h({title:"提示",okText:"自动去重",cancelText:"取消",content:"序号"+u+"序列号重复！",onOk:function(){var t=n.filter(function(e,t){return!i.some(function(e){return e===t+1})});e.setState({curSerialList:t})}})}}s(n),a()}}},"确定")],onCancel:a},d.default.createElement("div",null,d.default.createElement("div",{className:"serial-condition"},d.default.createElement("div",null,d.default.createElement("span",null,"前缀："),d.default.createElement(r.default,{onChange:function(t){y.test(t.target.value)?e.setState({preWords:t.target.value}):o.default.info("前缀仅支持16位数字、字母和符号")},value:S})),d.default.createElement("div",null,d.default.createElement("span",null,"起始号："),d.default.createElement(m.NumberInput,{type:"roundNumber",onChange:function(t){e.setState({openNumber:t})},value:_}))),d.default.createElement("div",{className:"serial-condition"},d.default.createElement("div",null,d.default.createElement("span",null,"递增量："),d.default.createElement(m.NumberInput,{type:"roundNumber",onChange:function(t){e.setState({increase:t})},value:v})),d.default.createElement("div",{className:"special"},d.default.createElement("span",null,"个数："),d.default.createElement(m.NumberInput,{type:"roundNumber",onChange:function(t){t<=1e3?e.setState({addNumber:t}):o.default.info("个数不可大于1000")},value:T}),d.default.createElement(i.default,{type:"primary",disabled:!_||!v||!T,onClick:function(){for(var t=S||"",a=[{serialNumber:(t+_).trim()}],n=1;n<Number(T);n++){for(var r=Number(_),i=_.length,l=String(r).length,u=i-l,c=String(r+Number(v)*n),s=u-c.length+l,d="",f=1;f<=s;f++)d+="0";a.push({serialNumber:(t+d+c).trim()})}C.concat(a).some(function(e){return e.serialNumber&&e.serialNumber.length>16})?o.default.info("序列号不可超过16个字符"):e.setState({curSerialList:C.concat(a)})}},"新增"))),d.default.createElement("div",{style:{overflow:"hidden"}},d.default.createElement(m.TableAll,{className:"serial-table"},d.default.createElement("div",{className:"table-title-wrap"},d.default.createElement("ul",{className:"serial-table-item serial-table-title table-title",line:2},d.default.createElement("li",null,"操作"),d.default.createElement("li",null,"序列"),d.default.createElement("li",null,"序列号",d.default.createElement("span",{className:"icon-sort",onClick:function(){e.setState({curSerialList:C.sort(function(e,t){return e.serialNumber>t.serialNumber?b:-b}),sortIndex:-b})}})))),d.default.createElement(m.TableBody,null,(I.length?I:[{}]).map(function(t,a){return d.default.createElement(m.TableItem,{className:"serial-table-item",line:a+1,key:a},d.default.createElement("li",null,d.default.createElement("span",null,d.default.createElement(f.default,{type:"big-plus",onClick:function(){0===C.length?e.setState({curSerialList:[{},{}]}):(C.splice(20*(E-1)+a+1,0,{}),e.setState({curSerialList:C}))}})),d.default.createElement("span",null,d.default.createElement(n.default,{type:"close",onClick:function(){!t.serialUuid||t.canModify?0===C.length?e.setState({curSerialList:[]}):(C.splice(20*(E-1)+a,1),e.setState({curSerialList:C,curPage:(0===I.length||1===I.length)&&L>1?E-1:E})):o.default.info("该序列号已出库,无法删除")}}))),d.default.createElement("li",null,20*(E-1)+a+1),d.default.createElement("li",null,d.default.createElement(r.default,{value:t.serialNumber,onChange:function(t){y.test(t.target.value)?C.length?(C[20*(E-1)+a].serialNumber=t.target.value,e.setState({curSerialList:C})):e.setState({curSerialList:[{serialNumber:t.target.value}]}):o.default.info("序列号仅支持数字、字母和符号")}})))})),d.default.createElement(m.TablePagination,{size:"small",currentPage:E,pageCount:L,paginationCallBack:function(t){return e.setState({curPage:t})}})))))}}]),t}();t.default=E},1346:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=p(a(47)),i=p(a(100)),o=p(a(14)),l=p(a(171)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(99),a(78),a(170);var c=p(a(1)),s=a(17),d=(a(18),a(127)),f=g(a(27)),m=g(a(130));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=l.default.TreeNode,y=(0,s.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={searchContent:""},C(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.showSingleModal,u=t.title,s=t.MemberList,g=t.thingsList,p=t.selectedKeys,C=t.selectFunc,y=t.selectListFunc,E=t.stockCardList,S=t.cancel,T=t.isCardUuid,_=t.notNeedProduct,v=t.cardPageObj,b=t.paginationCallBack,L=this.state.searchContent,I=_?s.filter(function(e){return"生产项目"!==e.get("name")}):s,N=T?"cardUuid":"uuid",O=I?function e(t,a,n){return t&&t.map(function(t,r){return t.childList&&t.childList.length?c.default.createElement(h,{key:""+t.uuid+f.TREE_JOIN_STR+t.name+f.TREE_JOIN_STR+n,title:t.name},e(t.childList,a,n+1)):c.default.createElement(h,{key:""+t.uuid+f.TREE_JOIN_STR+t.name+f.TREE_JOIN_STR+n,title:t.name,checkable:!0})})}(I.toJS(),["全部"],1):"",A=(g.map(function(e){return{string:""+e.get("code")+f.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")}}),[]),R=[];E&&E.size&&E.map(function(e,t){A.push(e.get("cardUuid"))}),g&&g&&g.toJS().map(function(e){-1===A.indexOf(e[N])&&R.push(e)});var w=g.toJS().filter(function(e){return!L||(e.code.indexOf(L)>-1||e.name.indexOf(L)>-1)});return c.default.createElement(r.default,{className:"no-foot select-modal",title:u,visible:n,onCancel:function(){S&&S(),a(m.changeEditCalculateCommonState("commonCardObj","selectedKeys",["all"+f.TREE_JOIN_STR+"1"]))},width:"800px"},c.default.createElement("div",{className:"lsqc-contacts-card-top"},c.default.createElement("div",{className:"table-tree-container",style:{height:w.length>5?"634px":"286px"}},c.default.createElement(l.default,{defaultExpandAll:!0,onSelect:function(t){if(t[0]){var n=t[0].split(f.TREE_JOIN_STR),r=n[0],i=(n[1],n[2]);y(r,i),a(m.changeEditCalculateCommonState("commonCardObj","selectedKeys",t)),e.setState({searchContent:""})}},selectedKeys:p||["all-:-1"]},c.default.createElement(h,{key:"all"+f.TREE_JOIN_STR+"1",title:"全部",checkable:!0}),O)),c.default.createElement(d.TableAll,{className:"contacts-table-right",style:{height:w.length>5?"634px":"286px"}},c.default.createElement("span",{className:"lsqc-serch"},c.default.createElement("span",{className:"lsqc-icon"},"搜索"),c.default.createElement(o.default,{className:"lsqc-serch-icon",type:"search"}),c.default.createElement(i.default,{placeholder:"",className:"lsqc-serch-input",value:L,onChange:function(t){e.setState({searchContent:t.target.value})}})),c.default.createElement("div",{className:"table-title-wrap"},c.default.createElement("ul",{className:"table-title"},c.default.createElement("li",null,c.default.createElement("span",null,"编号")),c.default.createElement("li",null,c.default.createElement("span",null,"名称")))),c.default.createElement(d.TableBody,null,R.filter(function(e){return!L||(e.code.indexOf(L)>-1||e.code.indexOf(L.toUpperCase())>-1||e.code.indexOf(L.toLowerCase())>-1||e.name.indexOf(L)>-1||e.name.indexOf(L.toUpperCase())>-1||e.name.indexOf(L.toLowerCase())>-1)}).map(function(e){var t=e.uuid?e.uuid:e.cardUuid;return c.default.createElement(d.TableItem,{className:"contacts-table-width cursor",key:t,onClick:function(a){a.stopPropagation(),C(e,t)}},c.default.createElement("li",null,e.code),c.default.createElement("li",null,e.name))})),v?c.default.createElement(d.TablePagination,{className:"editcalculate-card-modal-pagination",currentPage:v.get("currentPage"),pageCount:v.get("pages"),paginationCallBack:function(e){return b(e)}}):"")))}}]),t}())||n;t.default=y},1357:function(e,t,a){},1360:function(e,t,a){},1362:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=g(a(47)),r=g(a(1230)),i=g(a(100)),o=g(a(37)),l=g(a(32)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(1231),a(99),a(38),a(51);var c=g(a(1));g(a(0)),a(18),a(56);a(1240);m(a(27));var s=g(a(6)),d=a(22),f=(a(127),g(a(487)),m(a(1241)));g(a(1237));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={batchNumber:"",batchDate:"",value:"",expirationDate:""},n.getCurShelfLife=function(e,t){var a=Date.parse(e),n=Date.parse(t);return n>a?Math.floor((n-a)/864e5):null},n.calculLife=function(e,t){var a=Date.parse(e),n=new Date(a+24*t*3600*1e3);return new d.DateLib(n).toString()},n.initState=function(){n.setState({batchDate:"",batchNumber:"",expirationDate:""})},p(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.batchDate,u=t.batchNumber,d=t.expirationDate,m=this.props,g=m.dispatch,p=m.uuid,C=(m.onChange,m.close),h=m.visible,y=m.openShelfLife,E=m.onOk,S=m.shelfLife,T=m.callBack;return c.default.createElement(n.default,{title:"新增批次",visible:h,onCancel:C,footer:[c.default.createElement(l.default,{onClick:C},"取消"),c.default.createElement(l.default,{onClick:function(){E?E(u,a,d,C,T):g(f.insertBatch(u,y?a:"",y?d:"",p,C,T))}},"保存"),c.default.createElement(l.default,{type:"primary",onClick:function(){E?E(u,a,d,e.initState):g(f.insertBatch(u,y?a:"",y?d:"",p,e.initState))}},"保存并新增")]},c.default.createElement("div",{className:"batch-select-frame"},c.default.createElement("div",null,c.default.createElement("span",null,c.default.createElement("span",{style:{color:"red"}},"*"),"批次号："),c.default.createElement(i.default,{value:u,onChange:function(t){t.preventDefault();/^[0-9a-zA-Z]{0,20}$/.test(t.target.value)?e.setState({batchNumber:t.target.value}):o.default.info("批次只支持输入20位以内的数字或字母")},placeholder:"请输入批次号"})),y?c.default.createElement("div",null,c.default.createElement("span",null,"生产日期："),c.default.createElement(r.default,{placeholder:"请选择生产日期",allowClear:!1,size:"small",value:a?(0,s.default)(a):"",onChange:function(t){var a=t.format("YYYY-MM-DD");e.setState({batchDate:a}),!d&&S&&e.setState({expirationDate:e.calculLife(a,S)})}})):"",y?c.default.createElement("div",null,c.default.createElement("span",null,c.default.createElement("span",{style:{color:"red"}},"*"),"截止日期："),c.default.createElement(r.default,{placeholder:"请选择截止日期",allowClear:!1,size:"small",value:d?(0,s.default)(d):"",onChange:function(t){var a=t.format("YYYY-MM-DD");e.setState({expirationDate:a})}})):"",y&&(S||a&&d)?c.default.createElement("div",null,c.default.createElement("span",null),c.default.createElement("div",null,"("+(S?"默认保质期："+S+"天 ":"")+(this.getCurShelfLife(a,d)?"实际保质期："+this.getCurShelfLife(a,d)+"天":"")+")")):""))}}]),t}();t.default=C},1363:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=h(a(1230)),r=h(a(100)),i=h(a(37)),o=h(a(32)),l=h(a(45)),u=h(a(47)),c=h(a(171)),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1231),a(99),a(38),a(51),a(55),a(46),a(170);var d=h(a(1));h(a(0)),a(18),a(56);a(1240);var f=C(a(27)),m=(h(a(90)),a(22)),g=h(a(6)),p=(h(a(1244)),a(127));C(a(1241));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}c.default.TreeNode,u.default.confirm;var E=l.default.Option,S=(l.default.OptGroup,function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={modifyBatch:"",modifyBatchDate:"",modifyBatchUuid:"",modifyExpirationDate:""},n.emptyState=function(){n.setState({modifyBatchUuid:"",batch:"",modifyBatch:"",modifyBatchDate:"",modifyExpirationDate:""})},n.calculLife=function(e,t){var a=Date.parse(e),n=new Date(a+24*t*3600*1e3);return new m.DateLib(n).toString()},n.getCurShelfLife=function(e,t){var a=Date.parse(e),n=Date.parse(t);return n>a?Math.floor((n-a)/864e5):null},y(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"componentDidMount",value:function(){if(this.props.modifyBatchUuid){var e=this.props,t=e.modifyBatchUuid,a=e.batch,n=e.modifyBatchDate;this.setState({modifyBatchUuid:t,batch:a,modifyBatch:a,modifyBatchDate:n})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,l=t.onClose,c=t.onOk,s=t.onOkAndNew,C=t.batchList,h=t.openShelfLife,y=t.insertOrModify,S=void 0===y?"modify":y,T=t.saveAndNewForbidden,_=t.className,v=t.shelfLife,b=this.state,L=b.modifyBatch,I=b.modifyBatchUuid,N=this.state.modifyBatchDate&&"undefined"!==this.state.modifyBatchDate?this.state.modifyBatchDate:(new m.DateLib).toString(),O=this.state.modifyExpirationDate&&"undefined"!==this.state.modifyExpirationDate?this.state.modifyExpirationDate:"";return d.default.createElement(u.default,{className:_,visible:a,okText:"保存",footer:[d.default.createElement(o.default,{onClick:l},"取消"),d.default.createElement(o.default,{type:"primary",onClick:function(){c(L,I,N,O),e.emptyState()}},"保存"),T?"":d.default.createElement(o.default,{type:"primary",onClick:function(){s(L,I,N,O),e.emptyState()}},"保存并继续")],title:"修改批次信息",onCancel:l},d.default.createElement("div",{className:"batch-modal"},d.default.createElement("div",null,d.default.createElement("span",null,"原批次："),d.default.createElement("div",null,d.default.createElement(p.XfnSelect,{dropdownClassName:"inventory-are-for-dom",className:"batch-select",showSearch:!0,placeholder:"请选择批次号",value:this.state.batch,onChange:function(t){var a=t.split(f.TREE_JOIN_STR),n=a[0],r=a[1],i=a[2],o=a[3];e.setState({modifyBatchUuid:r,batch:n,modifyBatch:n,modifyBatchDate:i,modifyExpirationDate:o})}},C.map(function(e){return d.default.createElement(E,{key:"insert"===S?e.get("batch"):""+e.get("batchUuid"),value:""+e.get("batch")+f.TREE_JOIN_STR+e.get("batchUuid")+f.TREE_JOIN_STR+e.get("productionDate")+f.TREE_JOIN_STR+e.get("expirationDate")},""+e.get("batch"))})))),d.default.createElement("div",{className:"jxc-config-title",style:{marginBottom:0,paddingBottom:"10px"}},"修改后信息"),d.default.createElement("div",null,d.default.createElement("span",null,"批次号："),d.default.createElement("div",null,d.default.createElement(r.default,{value:L,placeholder:"请输入批次号",onChange:function(t){t.preventDefault();/^[0-9a-zA-Z]{0,20}$/.test(t.target.value)?e.setState({modifyBatch:t.target.value}):i.default.info("批次只支持输入20位以内的数字或字母")}}))),h?d.default.createElement("div",null,d.default.createElement("span",null,"生产日期："),d.default.createElement("div",null,d.default.createElement(n.default,{allowClear:!1,dropdownClassName:"inventory-are-for-dom",value:N?(0,g.default)(N):"",onChange:function(t){var a=t.format("YYYY-MM-DD");e.setState({modifyBatchDate:a}),!O&&v&&e.setState({modifyExpirationDate:e.calculLife(a,v)})}}))):"",h?d.default.createElement("div",null,d.default.createElement("span",null,d.default.createElement("span",{style:{color:"red"}},"*"),"截止日期"),d.default.createElement("div",null,d.default.createElement(n.default,{allowClear:!1,dropdownClassName:"inventory-are-for-dom",value:O?(0,g.default)(O):"",onChange:function(t){var a=t.format("YYYY-MM-DD");e.setState({modifyExpirationDate:a})}}))):"",h&&(v||N&&O)?d.default.createElement("div",null,d.default.createElement("span",null),d.default.createElement("div",null,"("+(v?"默认保质期："+v+"天 ":"")+(this.getCurShelfLife(N,O)?"实际保质期："+this.getCurShelfLife(N,O)+"天":"")+")")):""))}}]),t}());t.default=S},1364:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=h(a(1234)),i=h(a(129)),o=h(a(45)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1235),a(128),a(55);var u=h(a(1)),c=a(17),s=a(18),d=(h(a(6)),a(56),a(101)),f=h(a(1237)),m=C(a(27)),g=h(a(483)),p=(h(a(90)),a(22),C(a(172)));C(a(1279));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var y=o.default.Option,E=(0,c.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"componentDidMount",value:function(){var e=this.props.accountPoundage.get("categoryUuid");e&&"insert"===this.props.insertOrModify&&this.props.dispatch(p.getAccountRunningCate(e))}},{key:"componentWillReceiveProps",value:function(e){var t=e.amount||e.oriTemp.get("amount"),a=e.oriTemp.get("accounts"),n=e.oriTemp.get("usedAccounts"),r=e.insertOrModify,i=a.getIn([0,"poundage","poundage"]);if(t!==(this.props.amount||this.props.oriTemp.get("amount"))&&!n&&"insert"===r){var o=Math.abs(t||0)*a.getIn([0,"poundage","poundageRate"])/1e3>i&&i>0?i:Math.abs(t||0)*a.getIn([0,"poundage","poundageRate"])/1e3;this.props.dispatch(p.changeLrAccountCommonString("ori",["accounts",0,"poundageAmount"],(o||0).toFixed(2)))}}},{key:"render",value:function(){var e=this.props,t=e.accounts,a=e.dispatch,n=e.accountPoundage,o=e.oriTemp,l=(e.projectList,e.accountContactsRangeList),c=e.accountProjectList,C=e.accountProjectRange,h=e.accountContactsRange,E=e.insertOrModify,S=o.get("poundageCurrentCardList"),T=o.get("poundageProjectCardList"),_=o.get("needUsedPoundage"),v=o.get("strongList"),b=(o.get("oriState"),o.get("categoryType"),o.get("usedAccounts")),L=this.props.amount||o.get("amount"),I=T.getIn([0,"code"]),N=t.getIn([0,"poundage","poundage"]);Math.abs(L||0)*t.getIn([0,"poundage","poundageRate"])/1e3>N&&N>0||(Math.abs(L||0),t.getIn([0,"poundage","poundageRate"]));return u.default.createElement("div",{style:{display:t.some(function(e){return e.getIn(["poundage","needPoundage"])})&&t.some(function(e){return e.get("accountUuid")})&&n.get("canUsed")&&"insert"===E?"":"none"}},u.default.createElement("div",{style:{marginBottom:"10px"}},u.default.createElement("span",{style:{margin:"0 10px 0 0"}},u.default.createElement(i.default,{checked:_,onChange:function(e){a(p.changeLrAccountCommonString("ori","needUsedPoundage",!_))}},"账户手续费")),n.get("poundageNeedCurrent")&&_?u.default.createElement(r.default,{className:"use-unuse-style edit-running-switch",checked:S.size,checkedChildren:"往来",unCheckedChildren:"往来",disabled:v.size,onChange:function(){S.size?a(p.changeLrAccountCommonString("ori","poundageCurrentCardList",(0,s.fromJS)([]))):a(p.getAccountContactsCardList(h))}}):"",n.get("poundageNeedProject")&&_?u.default.createElement(r.default,{className:"use-unuse-style edit-running-switch",checked:T.size,disabled:v.size,checkedChildren:"项目",unCheckedChildren:"项目",style:{marginLeft:"10px"},onChange:function(){T.size?a(p.changeLrAccountCommonString("ori","poundageProjectCardList",(0,s.fromJS)([]))):a(p.getAccountProjectCardList(C))}}):""),S.size&&_?u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"往来单位："),u.default.createElement(g.default,{combobox:!0,showSearch:!0,value:(S&&S.getIn([0,"code"])?S.getIn([0,"code"]):"")+" "+(S&&S.getIn([0,"name"])?S.getIn([0,"name"]):""),onChange:function(e){var t=e.split(m.TREE_JOIN_STR),n=t[0],r=t[1],i=t[2];a(p.changeLrAccountCommonString("ori",["poundageCurrentCardList",0],(0,s.fromJS)({cardUuid:n,name:i,code:r})))}},l.map(function(e,t){return u.default.createElement(y,{key:e.get("uuid"),value:""+e.get("uuid")+m.TREE_JOIN_STR+e.get("code")+m.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))}))):"",T.size&&_?u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"项目："),u.default.createElement("div",{className:"chosen-right"},u.default.createElement(g.default,{combobox:!0,showSearch:!0,value:(T&&(0,d.projectCodeTest)(I)?I:"")+" "+(T&&T.getIn([0,"name"])?T.getIn([0,"name"]):""),onChange:function(e){var t=e.split(m.TREE_JOIN_STR),n=t[0],r=t[1],i=t[2];a(p.changeLrAccountCommonString("ori",["poundageProjectCardList",0],(0,s.fromJS)({cardUuid:n,name:i,code:r})))}},c.map(function(e,t){return u.default.createElement(y,{key:t,value:""+e.get("uuid")+m.TREE_JOIN_STR+e.get("code")+m.TREE_JOIN_STR+e.get("name")},(0,d.projectCodeTest)(e.get("code"))+" "+e.get("name"))})))):"",_?t.size>1&&b?t.map(function(e,t){Math.abs(e.get("amount")||0)*e.getIn(["poundage","poundageRate"])/1e3>e.getIn(["poundage","poundage"])&&-1!==e.getIn(["poundage","poundage"])?e.getIn(["poundage","poundage"]):(Math.abs(e.get("amount")||0),e.getIn(["poundage","poundageRate"]));return u.default.createElement("div",{style:{display:e.get("accountUuid")&&e.getIn(["poundage","needPoundage"])?"":"none"}},u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"账户",t+1,"："),u.default.createElement("div",null,e.get("accountName"))),u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"支出金额："),u.default.createElement("div",null,u.default.createElement(f.default,{className:"lrls-account-box",placeholder:"",value:e.get("poundageAmount"),onChange:function(e){(0,d.numberTest)(e,function(e){a(p.changeLrAccountCommonString("ori",["accounts",t,"poundageAmount"],e))})}}))))}):u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"支出金额："),u.default.createElement("div",null,u.default.createElement(f.default,{className:"lrls-account-box",placeholder:"",value:t.getIn([0,"poundageAmount"]),onChange:function(e){(0,d.numberTest)(e,function(e){a(p.changeLrAccountCommonString("ori",["accounts",0,"poundageAmount"],e))})}}))):"")}}]),t}())||n;t.default=E},1365:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=y(a(14)),i=y(a(1256)),o=y(a(45)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(78),a(1257),a(55);var u=y(a(1)),c=a(17),s=a(18),d=(y(a(6)),a(56),h(a(27))),f=y(a(483)),m=(y(a(90)),a(22),a(101),y(a(1520))),g=y(a(1460)),p=h(a(172)),C=h(a(484));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var E=o.default.Option,S=(0,c.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showCardModal:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.currentCardList,n=t.dropManageFetchAllowed,o=t.oriState,l=t.contactsRange,c=t.dispatch,h=(t.categoryTypeObj,t.selectedKeys),y=t.showSingleModal,S=t.MemberList,T=t.selectThingsList,_=t.thingsList,v=t.insertOrModify,b=t.strongList,L=t.contactsManagement,I=t.currentCardType,N=this.props.contactsList,O=this.state.showCardModal;this.props.stockStrongList||(0,s.fromJS)([]),this.props.carryoverStrongList||(0,s.fromJS)([]);return"STATE_ZS_TH"!==o&&"STATE_ZF_SH"!==o||(N=N.unshift((0,s.fromJS)({uuid:"nothing",code:"",name:"不限制往来单位"}))),u.default.createElement("div",{className:"edit-running-modal-list-item",style:{display:L||"modify"===v&&a.size?"":"none"}},u.default.createElement("label",null,"往来单位："),u.default.createElement("div",{className:"chosen-right"},u.default.createElement(f.default,{disabled:"modify"===v&&(b.size||"STATE_ZS_TH"===o||"STATE_ZF_SH"===o),combobox:!0,showSearch:!0,onDropdownVisibleChange:function(e){e&&n&&c(p.getFirstContactsCardList(l,o))},value:(a&&a.getIn([0,"code"])?a.getIn([0,"code"]):"")+" "+(a&&a.getIn([0,"name"])?a.getIn([0,"name"]):""),dropdownRender:function(t){return u.default.createElement("div",null,t,u.default.createElement(i.default,{style:{margin:"4px 0",display:l.size?"":"none"}}),l.size?u.default.createElement("div",{style:{padding:"8px",cursor:"pointer"},onMouseDown:function(){c(C.beforeRunningAddRelativeCard(function(){e.setState({showCardModal:!0})},l,"lrls"))}},u.default.createElement(r.default,{type:"plus"})," 新增往来单位"):"")},onChange:function(e){var t=e.split(d.TREE_JOIN_STR),a=t[0],n=t[1],r=t[2];"nothing"!==a?(c(p.changeLrAccountCommonString("ori",["currentCardList",0],(0,s.fromJS)({cardUuid:a,name:r,code:n}))),c(p.changeLrAccountCommonString("ori","offsetAmount",0))):c(p.changeLrAccountCommonString("ori","currentCardList",(0,s.fromJS)([])))}},N.map(function(e,t){return u.default.createElement(E,{key:e.get("uuid"),value:""+e.get("uuid")+d.TREE_JOIN_STR+e.get("code")+d.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))})),u.default.createElement("div",{className:"chosen-word",style:{cursor:"insert"===v?"pointer":"not-allowed"},onClick:function(){"modify"===v&&b.size||(c(p.getRelativeAllCardList(l,"showSingleModal")),c(p.changeLrAccountCommonString("",["flags","currentCardType"],"contacts")))}},"选择")),u.default.createElement(g.default,{showModal:O,closeModal:function(){return e.setState({showCardModal:!1})},dispatch:c,fromPage:"editRunning"}),y&&"contacts"===I?u.default.createElement(m.default,{dispatch:c,showSingleModal:y&&"contacts"===I,MemberList:S,selectThingsList:T,thingsList:_,selectedKeys:h,title:"选择往来单位",selectFunc:function(e,t,a){c(p.changeLrAccountCommonString("ori",["currentCardList",0],(0,s.fromJS)({code:e,name:t,cardUuid:a}))),c(p.changeLrAccountCommonString("",["flags","showSingleModal"],!1))},selectListFunc:function(e,t,a,n){c("all"===e?p.getRelativeAllCardList(l,"showSingleModal",!0,a,n):p.getRelativeSomeCardList(e,t,a,n))}}):"")}}]),t}())||n;t.default=S},1372:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.typeList=[{key:"cash",value:"现金"},{key:"general",value:"一般户"},{key:"basic",value:"基本户"},{key:"spare",value:"备用金"},{key:"Alipay",value:"支付宝"},{key:"WeChat",value:"微信"},{key:"other",value:"其它"}],t.typeStr=function(e){return({cash:function(){return"现金"},general:function(){return"一般户"},basic:function(){return"基本户"},Alipay:function(){return"支付宝"},WeChat:function(){return"微信"},other:function(){return"其它"},spare:function(){return"备用金"}}[e]||function(){return""})()}},1374:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=k(a(47)),l=k(a(1267)),u=k(a(32)),c=k(a(14)),s=k(a(37)),d=k(a(129)),f=k(a(89)),m=k(a(45)),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(1265),a(51),a(78),a(38),a(128),a(88),a(55);var p=k(a(1)),C=(k(a(0)),a(18)),h=a(56);a(1418);var y=M(a(27)),E=a(22),S=k(a(1244)),T=a(127),_=k(a(1288)),v=k(a(483)),b=k(a(1463)),L=k(a(1464)),I=k(a(1465)),N=k(a(1466)),O=k(a(1467)),A=k(a(1468)),R=k(a(1345)),w=k(a(1363)),P=k(a(90)),U=M(a(1241));function M(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function k(e){return e&&e.__esModule?e:{default:e}}function j(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function J(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var D=m.default.Option,x=m.default.OptGroup,F=f.default.Group,H=(d.default.Group,(0,h.connect)(function(e){return e})((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={confirmModal:!1,showAddModal:!1,showMultiUnit:!1,showWarehouseModal:!1,page:"basic",showCheckModal:!1,assistModal:!1,modifyBatchUuid:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),g(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.inventoryCardState,a=e.dispatch,n=t.getIn(["inventoryCardTemp","assemblyState"]),r=t.getIn(["inventoryCardTemp","assemblySheet","unitUuid"]),i=t.getIn(["inventoryCardTemp","unit","unitList"]),o=t.getIn(["views","fromOpen"]),l=t.getIn(["inventoryCardTemp","unit"]);"OPEN"===n&&o&&this.setState({page:"other"}),"OPEN"!==n||i.size||r||(a(U.changeInventoryInnerSrting(["assemblySheet","unitUuid"],l.get("uuid"))),a(U.changeInventoryInnerSrting(["assemblySheet","unitName"],l.get("name"))))}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.inventoryCardState!==e.inventoryCardState||this.props.showModal!==e.showModal||this.props.homeState!==e.homeState||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.showModal,r=t.inventoryCardState,i=t.homeState,g=t.enableWarehouse,h=t.Psi,M=t.cardList,k=void 0===M?(0,C.fromJS)([]):M,H=t.originTags,B=t.fromPage,G=t.isJz,Y=function(){e.props.closeModal(),e.setState({page:"basic"})},Z=this.state,z=Z.confirmModal,W=Z.showAddModal,K=(Z.showMultiUnit,Z.showWarehouseModal),X=Z.page,V=Z.showCheckModal,Q=Z.assistModal,q=(Z.modifyBatchUuid,i.getIn(["permissionInfo","Config"]).getIn(["edit","permission"])),$=i.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("QUANTITY")>-1,ee=i.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("ASSIST")>-1,te=i.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("BATCH")>-1,ae=i.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("SERIAL")>-1,ne=i.getIn(["data","userInfo","sobInfo","newJr"]),re=r.getIn(["views","standardList"]),ie=r.getIn(["views","customList"]),oe=r.getIn(["views","stockList"]),le=r.getIn(["views","serialModal"]),ue=r.getIn(["views","serialPlaceArr"]),ce=r.getIn(["views","serialList"]),se=r.getIn(["views","warehouseList"]),de=r.getIn(["views","selectedKeys"]),fe=r.getIn(["views","materialSelectedKeys"]),me=r.getIn(["views","MemberList"]),ge=r.getIn(["views","thingsList"]),pe=r.getIn(["views","showStockModal"]),Ce=r.getIn(["views","selectList"]),he=r.getIn(["views","selectItem"]),ye=r.getIn(["views","batchModal"]),Ee=r.getIn(["views","allAssistClassificationList"]),Se="inventoryConfig"!==B;Se&&(q=i.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]));var Te=r.get("tags").filter(function(e){return"全部"!==e.get("name")}),_e=r.getIn(["views","insertOrModify"]),ve="insert"===_e?"新增存货卡片":"修改存货卡片",be=r.get("inventoryCardTemp"),Le=be.get("code"),Ie=be.get("name"),Ne=be.get("uuid"),Oe=be.get("warehousePriceMode"),Ae=be.get("inventoryNature"),Re=be.get("isOpenedQuantity"),we=be.get("financialInfo")||(0,C.fromJS)({}),Pe=be.getIn(["financialInfo","openAssist"]),Ue=be.getIn(["financialInfo","openBatch"]),Me=be.getIn(["financialInfo","openShelfLife"]),ke=be.getIn(["financialInfo","shelfLife"]),je=be.getIn(["financialInfo","batchList"])||(0,C.fromJS)([]),Je=be.getIn(["financialInfo","openSerial"]),De=(be.getIn(["financialInfo","serialList"])||(0,C.fromJS)([]),be.getIn(["financialInfo","assistClassificationList"])||(0,C.fromJS)([])),xe=be.getIn(["financialInfo","isBatchUniform"]),Fe=De.every(function(e){return e.get("isUniform")}),He=be.get("unit")||(0,C.fromJS)({}),Be=be.get("CurUnit")||(0,C.fromJS)({}),Ge=He.get("unitList")||(0,C.fromJS)([]),Ye=be.get("openedQuantity"),Ze=be.get("unitPriceList"),ze=be.get("opened"),We=be.get("remark"),Ke=be.get("openList"),Xe=(be.get("isAppliedSale"),be.get("isAppliedPurchase"),be.get("isAppliedProduce"),be.get("categoryTypeList")),Ve=(be.get("contacterInfo"),be.get("isCheckOut")),Qe=be.get("assemblySheet")||(0,C.fromJS)({}),qe=be.get("assemblyState"),$e=Qe.get("materialList")||(0,C.fromJS)([]),et=be.getIn(["defaultAc","inventoryGoodsAcId"]),tt=be.getIn(["defaultAc","inventoryGoodsAcName"]),at=be.getIn(["defaultAc","inventoryMaterialAcId"]),nt=be.getIn(["defaultAc","inventoryMaterialAcName"]),rt=function(){return e.setState({confirmModal:!0})},it=function(){return e.setState({confirmModal:!1})},ot=function(t,n){var r=[{type:"stockName",value:Ie},{type:"code",value:Le},{type:"remark",value:We}];E.jxcConfigCheck.beforeSaveCheck(r,function(){return function(t,n){if(""!==Ae){var r=!0;if(Te.map(function(e,t){e.get("checked")&&(r=!1)}),r)s.default.info("所属分类必选一项");else{var i=!1;Xe.map(function(e,t){""!==e.get("ctgyUuid")&&""!==e.get("subordinateUuid")||(i=!0)}),i?s.default.info("类别需要填写完整"):(Ze.filter(function(e){return e.get("name")===He.get("name")&&1==e.get("type")}).size>1||Ze.filter(function(e){return e.get("name")===He.get("name")&&2==e.get("type")}).size>1||Ge.some(function(e){return Ze.filter(function(t){return t.get("name")===e.get("name")&&1==t.get("type")}).size>1})||Ge.some(function(e){return Ze.filter(function(t){return t.get("name")===e.get("name")&&1==t.get("type")}).size>1}))&&Re?s.default.info("同一个单位，默认采购价和默认销售价只能有一个"):Re&&(He.get("name")&&He.get("name").length>6||Ge.some(function(e){return e.get("name")&&e.get("name").length>6}))?s.default.info("单位名称不可大于6个字符"):"OPEN"!==qe&&"INVALID"!==qe||Re?$e.some(function(e){return e.get("materialUuid")})&&Qe.get("unitUuid")&&Qe.get("unitUuid")!==He.get("uuid")&&Ge.every(function(e){return e.get("uuid")!==Qe.get("unitUuid")})?s.default.info("组装单设置中，请重新选择成品的单位"):Re&&Ue&&"boolean"!=typeof xe?s.default.info("请选择单价模式"):a(U.saveInventoryCard(B,t,n,rt,it,Se)):e.setState({showCheckModal:!0})}}else s.default.info("存货性质必选")}(t,n)})},lt=void 0,ut=void 0,ct=void 0;return"modify"===_e&&k.size&&(ct=k.findIndex(function(e){return e.get("code")===Le}),lt=ct-1,ut=ct+1),p.default.createElement(o.default,{className:"inventory-addCard-modal",width:"800px",visible:n,maskClosable:!1,title:ve,onCancel:function(){return Y()},footer:[p.default.createElement(u.default,{style:{float:"left",display:"insert"==_e?"none":""},disabled:0===k.findIndex(function(e){return e.get("code")===Le}),onClick:function(){a(U.beforeInventoryEditCard(k.get(lt),function(){},H,k.getIn([lt,"assemblyState"])))}},p.default.createElement(c.default,{type:"caret-left"})),p.default.createElement(u.default,{style:{float:"left",display:"insert"==_e?"none":""},disabled:k.findIndex(function(e){return e.get("code")===Le})===k.size-1||!k.size,onClick:function(){a(U.beforeInventoryEditCard(k.get(ut),function(){},H,k.getIn([ut,"assemblyState"])))}},p.default.createElement(c.default,{type:"caret-right"})),p.default.createElement(u.default,{key:"cancel",type:"ghost",onClick:function(){return Y()}},"取 消"),p.default.createElement(u.default,{key:"ok",type:Se?"primary":"modify"==_e?"primary":"ghost",disabled:!q,onClick:function(){ot("insert",Y)}},"保 存"),p.default.createElement(u.default,{key:"addAndNew",type:"primary",disabled:!q,style:Se?{display:"none"}:{display:"modify"==_e?"none":"inline-block"},onClick:function(){ot("insertAndNew")}},"保存并新增")]},p.default.createElement("div",{className:"jxc-config-card-modal-wrap"},p.default.createElement("div",{className:"jxc-config-inventory-title",style:{display:"OPEN"!==qe&&"INVALID"!==qe||!h?"none":""}},p.default.createElement("span",{className:"basic"===X?"active":"",onClick:function(){e.setState({page:"basic"})}},"基础设置"),p.default.createElement("span",{className:"basic"===X?"":"active",onClick:function(){e.setState({page:"other"})}},"组装单设置")),p.default.createElement("div",{style:{display:"other"!==X||["CLOSE","DISABLE"].includes(qe)?"none":"",marginTop:10}},p.default.createElement("div",{className:"inventory-content"},p.default.createElement("div",{className:"inventory-content-detail"},p.default.createElement("span",null,"投入物料"),p.default.createElement("span",null,"数量"),p.default.createElement("span",null,"单位")),$e.map(function(e,t){return p.default.createElement("div",{className:"inventory-content-detail",key:t},p.default.createElement("span",null,p.default.createElement(v.default,{combobox:!0,showSearch:!0,value:(e.get("code")||"")+" "+(e.get("name")||""),onChange:function(e,n){var r=e.split(y.TREE_JOIN_STR),i=r[0],o=r[1],l=r[2];a(U.changeInventoryInnerSrting(["assemblySheet","materialList",t],(0,C.fromJS)({materialUuid:i,code:o,name:l}))),a(U.getInventorySettingOneCard(i,t))}},oe.filter(function(e){return e.get("code")!==Le}).map(function(e,t){return p.default.createElement(D,{key:e.get("uuid"),value:""+e.get("uuid")+y.TREE_JOIN_STR+e.get("code")+y.TREE_JOIN_STR+e.get("name")+y.TREE_JOIN_STR+e.get("isOpenedQuantity")+y.TREE_JOIN_STR+t,priceList:e.get("unitPriceList"),unit:e.get("unit")},e.get("code")+" "+e.get("name"))}))),p.default.createElement("span",null,p.default.createElement(T.XfInput,{mode:"number",tipTit:"数量",placeholder:"输入数量",value:e.get("quantity"),onChange:function(e){var n=e.target.value;a(U.changeInventoryInnerSrting(["assemblySheet","materialList",t,"quantity"],n))}})),p.default.createElement("span",null,p.default.createElement(v.default,{placeholder:"单位",combobox:!0,showSearch:!0,dropdownClassName:"auto-width",value:e.get("unitName")?""+e.get("unitName"):void 0,onChange:function(e){var n=e.split(y.TREE_JOIN_STR),r=n[0],i=n[1];a(U.changeInventoryInnerSrting(["assemblySheet","materialList",t,"unitUuid"],r)),a(U.changeInventoryInnerSrting(["assemblySheet","materialList",t,"unitName"],i))}},(e.get("unitList")||[]).map(function(e,t){return p.default.createElement(D,{key:e.get("uuid"),value:""+e.get("uuid")+y.TREE_JOIN_STR+e.get("name")},""+e.get("name"))}))),p.default.createElement("span",null,p.default.createElement(P.default,{type:"bigDel",theme:"outlined",onClick:function(){1===$e.size?a(U.changeInventoryInnerSrting(["assemblySheet","materialList",0],(0,C.fromJS)({}))):a(U.deleteMaterial($e,t))}})))}),p.default.createElement("div",{className:"inventory-button"},p.default.createElement(u.default,{onClick:function(){a(U.addMaterial($e,$e.size-1))}},p.default.createElement(P.default,{type:"big-plus"}),"添加存货明细"),p.default.createElement(u.default,{onClick:function(){a(U.getInventoryAllCardList([],"showStockModal"))}},p.default.createElement(P.default,{type:"editPlus"}),"批量添加存货"))),p.default.createElement("div",{className:"inventory-content"},p.default.createElement("div",{className:"inventory-content-detail"},p.default.createElement("span",null,"组装成品"),p.default.createElement("span",null,"数量"),p.default.createElement("span",null,"单位")),p.default.createElement("div",{className:"inventory-content-detail"},p.default.createElement("span",{style:{borderBottom:"1px solid #d9d9d9",color:"#ccc"}},(Le||"")+" "+(Ie||"")),p.default.createElement("span",null,p.default.createElement(T.XfInput,{mode:"number",tipTit:"数量",placeholder:"输入数量",value:Qe.get("quantity"),onChange:function(e){var t=e.target.value;a(U.changeInventoryInnerSrting(["assemblySheet","quantity"],t))}})),p.default.createElement("span",null,p.default.createElement(m.default,{placeholder:"单位",combobox:!0,showSearch:!0,dropdownClassName:"auto-width",value:Qe.get("unitName")?""+Qe.get("unitName"):void 0,onChange:function(e){var t=e.split(y.TREE_JOIN_STR),n=t[0],r=t[1];a(U.changeInventoryInnerSrting(["assemblySheet","unitUuid"],n)),a(U.changeInventoryInnerSrting(["assemblySheet","unitName"],r))}},p.default.createElement(D,{key:He.get("uuid"),value:""+He.get("uuid")+y.TREE_JOIN_STR+He.get("name")},""+He.get("name")),Ge.map(function(e,t){return p.default.createElement(D,{key:e.get("uuid"),value:""+e.get("uuid")+y.TREE_JOIN_STR+e.get("name")},""+e.get("name"))})))))),p.default.createElement("div",{style:{display:"basic"===X||["CLOSE","DISABLE"].includes(qe)?"":"none"}},p.default.createElement("div",{className:"flex-row"},p.default.createElement("div",{className:"flex-row-item"},p.default.createElement("label",{className:"flex-row-label"},"编码："),p.default.createElement("div",{className:"flex-row-input"},p.default.createElement(T.XfInput,{style:{width:"100%"},placeholder:"必填，支持数字和大小写英文，最长16个字符",value:Le,onChange:function(e){return E.jxcConfigCheck.inputCheck("stockCode",e.target.value,function(){return a(U.changeInventoryCardContent("code",e.target.value))})}}))),p.default.createElement("div",{className:"flex-row-item"},p.default.createElement("label",{className:"flex-row-label"},"名称："),p.default.createElement("div",{className:"flex-row-input"},p.default.createElement(T.XfInput,{style:{width:"100%"},placeholder:"必填",value:Ie,onChange:function(e){return a(U.changeInventoryCardContent("name",e.target.value))}})))),p.default.createElement("div",{className:"flex-row"},p.default.createElement("div",{className:"flex-row-item"},p.default.createElement("label",{className:"flex-row-label"},"存货性质："),p.default.createElement("div",{className:"flex-row-input"},p.default.createElement(F,{onChange:function(e){a(U.changeInventoryCardNature("inventoryNature",e.target.value)),6===e.target.value?(a(U.changeInventoryCardNature("inventoryAcId",at)),a(U.changeInventoryCardNature("inventoryAcName",nt))):(a(U.changeInventoryCardNature("inventoryAcId",et)),a(U.changeInventoryCardNature("inventoryAcName",tt)))},value:Ae},p.default.createElement(f.default,{key:"a",value:5},"库存商品"),p.default.createElement(f.default,{key:"b",value:6},"原材料"))))),p.default.createElement("div",{className:"jxc-config-card-modal-row",style:{marginTop:"10px"}},p.default.createElement("div",{className:"jxc-config-card-modal-item"},p.default.createElement("label",{className:"jxc-config-card-modal-label"},"所属分类："),p.default.createElement("div",{className:"jxc-config-card-modal-input"},Te.map(function(e,t){return p.default.createElement("label",{key:t},p.default.createElement(d.default,{checked:e.get("checked"),onChange:function(t){return a(U.changeInventoryCardCategoryStatus(e,t.target.checked))}}),p.default.createElement("span",null,e.get("name")))})))),p.default.createElement("div",{className:"category-box"},Te.map(function(e,t){return e.get("checked")?p.default.createElement("div",{className:"jxc-config-card-modal-row select-row-with-two",key:e.get("name")},p.default.createElement("div",{className:"jxc-config-card-modal-item"},p.default.createElement("label",{className:"jxc-config-card-modal-label"},e.get("name"),"类别："),p.default.createElement("div",{className:"jxc-config-card-modal-input"},p.default.createElement(T.UpperClassSelect,{className:"jxc-config-modal-select",placeholder:"",treeData:e.get("tree")?e.get("tree"):[],treeDefaultExpandAll:!0,isLastSelect:!0,disabledParent:!0,value:e.get("selectUuid")?[e.get("selectName")]:[""],onSelect:function(t){a(U.changeInventoryCardCategoryType(e,t))}})))):null})),p.default.createElement("div",{className:"jxc-config-card-modal-row",style:Se?{display:"none"}:{clear:"both"}},p.default.createElement("div",{className:"jxc-config-card-modal-item"},p.default.createElement("label",{className:"jxc-config-card-modal-label"},"备注："),p.default.createElement("div",{className:"jxc-config-card-modal-input"},p.default.createElement(T.XfInput,{placeholder:S.default.remark,value:We,onChange:function(e){return a(U.changeInventoryCardContent("remark",e.target.value))}})))),Se&&$||!Se?p.default.createElement("div",{className:"jxc-config-title",style:{marginBottom:0,paddingBottom:"10px"}},"财务信息"):"",p.default.createElement("div",{className:"flex-row",style:{lineHeight:"28px"}},ne&&$?p.default.createElement("div",{className:"flex-row-item"},$?p.default.createElement("div",null,p.default.createElement(d.default,{style:{marginRight:"6px"},checked:Re,onChange:function(e){a(U.changeInventoryCardContent("isOpenedQuantity",!Re)),Re?(a(U.changeInventoryCardContent("warehousePriceMode","T")),a(U.changeInventoryCardContent(["financialInfo","openAssist"],!1)),a(U.changeInventoryCardContent(["financialInfo","openBatch"],!1)),a(U.changeInventoryCardContent(["financialInfo","openSerial"],!1))):(a(U.changeInventoryCardContent("warehousePriceMode","U")),a(U.getUnitCardList()))}}),"启用数量核算"):"",Re&&ae?p.default.createElement("div",null,p.default.createElement(d.default,{style:{marginRight:"6px"},checked:Je,onChange:function(e){a(U.changeInventoryCardContent(["financialInfo","openSerial"],!Je)),Je||a(U.emptyWarehouseListQuantity())}}),"启用序列号管理"):"",p.default.createElement("div",{style:{visibility:"hidden"}},p.default.createElement(d.default,{style:{marginRight:"6px"},checked:Je,onChange:function(e){a(U.changeInventoryCardContent(["financialInfo","openSerial"],!Je))}}),"允许负库存")):"",Re?p.default.createElement("div",{className:"flex-row-item"},p.default.createElement("label",{className:"flex-row-label"},"计量单位："),p.default.createElement("div",{className:"flex-row-input"},p.default.createElement(_.default,{Type:"select",dispatch:a,disabled:"modify"===_e&&Be.get("name"),selectListOne:re,selectListTwo:ie,onChange:function(e,t){var n=e.uuid,r=e.name,i=e.isStandard,o=e.unitList,l=e.unitQuantity,u=e.basicUnitUuid;o="undefined"!=o&&o?JSON.parse(o):[];var c=t.props,s=c.isCustom,d=c.basicStandardUnitQuantityList,f=c.basicStandardUnitUuidList;s&&f.length&&(u=f[0],l=d[0],f.length>=2&&f.slice(1).forEach(function(e,t){o[t].basicUnitUuid=e,o[t].unitQuantity=d[t+1],e===f[0]&&(o[t].disabled=!0)})),a(U.changeInventoryCardContent("unit",(0,C.fromJS)({uuid:n,name:r,isStandard:i,unitList:o,unitQuantity:l,basicUnitUuid:u})))},onSwitch:function(){a(U.initUnitState())},name:(He.get("name")||"")+(Ge.size?"("+He.get("name")+Ge.toJS().reduce(function(e,t){return e+":"+(t.name||"")},""):"")+(Ge.size?Ge.toJS().reduce(function(e,t){return e+":"+(t.basicUnitQuantity||"")},"=1")+")":"")}),p.default.createElement(u.default,{className:"ant-btn-primary",style:{width:"55px",marginLeft:"10px",lineHeight:"28px"},onClick:function(){e.setState({showAddModal:!0});var t=He.toJS();t.basicStandardUnitQuantity&&(t.unitQuantity=t.basicStandardUnitQuantity,t.basicUnitUuid=t.basicStandardUnitUuid),t.unitList&&t.unitList.length&&t.unitList.forEach(function(e,a){t.unitList[a].unitQuantity=e.basicStandardUnitQuantity,t.unitList[a].basicUnitUuid=e.basicStandardUnitUuid,e.basicStandardUnitUuid===t.basicStandardUnitUuid&&(t.unitList[a].disabled=!0)}),a(U.changeInventoryCardContent("unit",(0,C.fromJS)(t)))}},"modify"===_e&&Be.get("name")?"修改":"多单位"))):""),g&&ne?p.default.createElement("div",{className:"flex-row"},p.default.createElement("div",{className:"flex-row-item"},p.default.createElement(d.default,{style:{marginRight:"6px"},checked:!0,onClick:function(){s.default.info("账套已启用仓库核算")}}),"启用仓库核算"),g&&Re?p.default.createElement("div",{className:"flex-row-item"},p.default.createElement("label",{className:"flex-row-label"},"单价模式"),p.default.createElement("div",{className:"flex-row-input-nomal"},p.default.createElement(m.default,{onChange:function(e){a(U.changeInventoryCardContent("warehousePriceMode",e))},value:Oe},p.default.createElement(D,{key:"1",value:"U"},"按全部仓库统一单价"),p.default.createElement(D,{key:"2",value:"T"},"按一级仓库不同单价"),p.default.createElement(D,{key:"3",value:"E"},"按不同仓库不同单价")))):""):"",p.default.createElement("div",{className:"flex-row"},Re&&ne&&ee?p.default.createElement("div",{className:"flex-row-item"},p.default.createElement(d.default,{style:{marginRight:"6px"},checked:Pe,onChange:function(e){a(U.changeInventoryCardContent(["financialInfo","openAssist"],!Pe))}}),"启用辅助属性 ",Pe?p.default.createElement("span",{className:"assist-update",onClick:function(){a(U.getAssistList("",function(){e.setState({assistModal:!0})}))}},"编辑属性"):""):"",Pe&&Re?p.default.createElement("div",{className:"flex-row-item"},p.default.createElement("label",{className:"flex-row-label"},"单价模式"),p.default.createElement("div",{className:"flex-row-input-nomal"},p.default.createElement(m.default,{onChange:function(e){!0!==e[e.length-1]?a(U.chooseAssitUniform(e.filter(function(e){return!0!==e}),!1)):a(U.chooseAssitUniform(De.map(function(e){return e.get("uuid")}),!0))},value:Fe?[!0]:De.filter(function(e){return!e.get("isUniform")}).map(function(e){return e.get("uuid")}).toJS(),mode:"multiple"},p.default.createElement(D,{key:"1",value:!0},"按全部属性统一单价"),p.default.createElement(x,{label:"按不同属性不同单价"},De.map(function(e){return p.default.createElement(D,{key:e.get("uuid"),value:e.get("uuid")},"不同",e.get("name"),"不同单价")}))))):""),Pe&&Re?p.default.createElement("div",{className:"assist-content"},De.size?De.map(function(e){return p.default.createElement("div",{className:"assist-item"},p.default.createElement("span",null,e.get("name"),"："),e.get("propertyList").map(function(e){return p.default.createElement(l.default,{key:e.get("uuid")},e.get("name"))}))}):p.default.createElement("div",{className:"assist-item img-kongtaitu"},p.default.createElement("div",{className:""}),p.default.createElement("div",null,"暂无属性分类，请点击“编辑属性”新增分类"))):"",p.default.createElement("div",{className:"flex-row"},Re&&ne&&te?p.default.createElement("div",{className:"flex-row-item"},p.default.createElement("div",null,p.default.createElement(d.default,{style:{marginRight:"6px"},checked:Ue,onChange:function(e){a(U.changeInventoryCardContent(["financialInfo","openBatch"],!Ue)),Ue&&a(U.changeInventoryCardContent(["financialInfo","openShelfLife"],!1))}}),"启用批次管理"),Ue?p.default.createElement("div",null,p.default.createElement(d.default,{style:{marginRight:"6px"},checked:Me,onChange:function(e){je.size?s.default.info("请删除原有批次"):a(U.changeInventoryCardContent(["financialInfo","openShelfLife"],!Me))}}),"启用保质期管理"):p.default.createElement("div",null),Me?p.default.createElement("div",null,p.default.createElement(T.XfInput,{tipTit:"保质期",mode:"integer",style:{width:"107px"},placeholder:"请输入保质期天数",value:ke,onChange:function(e){var t=e.target.value;a(U.changeInventoryCardContent(["financialInfo","shelfLife"],t))},disabled:Ve})):p.default.createElement("div",null)):"",Ue&&Re?p.default.createElement("div",{className:"flex-row-item"},p.default.createElement("label",{className:"flex-row-label"},"单价模式"),p.default.createElement("div",{className:"flex-row-input-nomal"},p.default.createElement(m.default,{onChange:function(e){a(U.changeInventoryCardContent(["financialInfo","isBatchUniform"],e))},value:xe},p.default.createElement(D,{key:"1",value:!0},"按全部批次统一单价"),p.default.createElement(D,{key:"2",value:!1},"按不同批次不同单价")))):""),p.default.createElement("div",{className:"flex-row",style:Se&&!Ge.size||g&&!Re?{display:"none"}:{}},g||Ue||Pe||Je?"":p.default.createElement("div",{className:"flex-row-item"},p.default.createElement("label",{className:"flex-row-label"},"期初余额："),p.default.createElement("div",{className:"flex-row-input"},g?p.default.createElement(T.XfInput,J({disabled:G,mode:"number",negativeAllowed:!0,style:{width:"250px"},placeholder:(Re&&"U"===Oe?"必填":"选填")+"，请输入金额",value:ze,onChange:function(e){var t=e.target.value;a(U.changeInventoryCardContent("opened",t))}},"disabled",Ve)):p.default.createElement(T.XfInput,J({disabled:G,negativeAllowed:!0,mode:"amount",style:{width:"250px"},placeholder:"选填，请输入金额",value:ze,onChange:function(e){var t=e.target.value;a(U.changeInventoryCardContent("opened",t))}},"disabled",Ve)))),!Re||g||Ue||Pe||Je?"":p.default.createElement("div",{className:"flex-row-item"},p.default.createElement("label",{className:"flex-row-label"},"期初数量："),p.default.createElement("div",{className:"flex-row-input"},p.default.createElement(T.XfInput,{mode:"number",tipTit:"数量",negativeAllowed:!0,placeholder:"选填，请输入数量",value:Ye,onChange:function(e){var t=e.target.value;a(U.changeInventoryCardContent("openedQuantity",t))},disabled:Ve}),p.default.createElement("span",{style:{marginLeft:"10px"}},He.get("name"))))),g||Ue||Pe||Je?p.default.createElement("div",{style:{display:"flex",marginTop:"10px"}},g?p.default.createElement(I.default,{dispatch:a,warehousePriceMode:Oe,isOpenedQuantity:Re,enableWarehouse:g,treeList:Ke,unit:He,isCheckOut:Ve,assistClassificationList:De,batchList:je,uuid:Ne,financialInfo:we,showWarehouseModal:function(){return e.setState({showWarehouseModal:!0})}}):p.default.createElement(N.default,{dispatch:a,warehousePriceMode:Oe,isOpenedQuantity:Re,enableWarehouse:g,treeList:Ke,unit:He,isCheckOut:Ve,assistClassificationList:De,batchList:je,uuid:Ne,financialInfo:we,insertOrModify:_e,showWarehouseModal:function(){return e.setState({showWarehouseModal:!0})}})):"",Re?p.default.createElement("div",null,p.default.createElement("div",{className:"flex-row"},Ze.map(function(e,t){return 1===e.get("type")?p.default.createElement("div",{className:"flex-row-item"},p.default.createElement("label",{className:"flex-row-label"},{1:"默认采购价：",2:"默认销售价："}[e.get("type")]),p.default.createElement("div",{className:"flex-row-input",style:{display:"flex"}},p.default.createElement(T.XfInput,{mode:"number",style:{width:"140px"},placeholder:"选填，请输入金额",value:e.get("defaultPrice"),onChange:function(e){var n=e.target.value;a(U.changeInventoryCardContent(["unitPriceList",t,"defaultPrice"],n))}}),Ge.size?p.default.createElement("div",null,p.default.createElement("span",{style:{margin:"0 4px 0 2px"}},"元/"),p.default.createElement(m.default,{style:{width:"78px"},onChange:function(e){var n=e.split(y.TREE_JOIN_STR),r=n[0],i=n[1];n[2];a(U.changeInventoryCardContent(["unitPriceList",t,"unitUuid"],r)),a(U.changeInventoryCardContent(["unitPriceList",t,"name"],i))},value:e.get("name")},p.default.createElement(D,{key:He.get("uuid"),value:""+He.get("uuid")+y.TREE_JOIN_STR+He.get("name")+y.TREE_JOIN_STR+He.get("isStandard")},He.get("name")),Ge.map(function(e){return p.default.createElement(D,{key:e.get("uuid"),value:""+e.get("uuid")+y.TREE_JOIN_STR+e.get("name")+y.TREE_JOIN_STR+e.get("isStandard")},e.get("name"))}))):He.get("name")?p.default.createElement("span",{style:{marginLeft:"5px"}},"元/"+He.get("name")):"",Ge.size?p.default.createElement("div",{className:"pre-content"},p.default.createElement(T.XfnIcon,{type:"bigPlus",style:1===Ze.filter(function(t){return t.get("type")===e.get("type")}).size?{lineHeight:"28px",fontSize:"15px"}:{},onClick:function(){a(U.addUnitPrice(Ze,t,e.get("type")))}}),Ze.filter(function(t){return t.get("type")===e.get("type")}).size>1?p.default.createElement(T.XfnIcon,{type:"bigDel",onClick:function(){a(U.deleteunitPrice(Ze,t))}}):""):"")):""})),p.default.createElement("div",{className:"flex-row"},Ze.map(function(e,t){return 2===e.get("type")?p.default.createElement("div",{className:"flex-row-item"},p.default.createElement("label",{className:"flex-row-label"},{1:"默认采购价：",2:"默认销售价："}[e.get("type")]),p.default.createElement("div",{className:"flex-row-input",style:{display:"flex"}},p.default.createElement(T.XfInput,{mode:"number",tipTit:"数量",style:{width:"140px"},placeholder:"选填，请输入金额",value:e.get("defaultPrice"),onChange:function(e){var n=e.target.value;a(U.changeInventoryCardContent(["unitPriceList",t,"defaultPrice"],n))}}),Ge.size?p.default.createElement("div",null,p.default.createElement("span",{style:{margin:"0 4px 0 2px"}},"元/"),p.default.createElement(m.default,{style:{width:"78px"},onChange:function(e){var n=e.split(y.TREE_JOIN_STR),r=n[0],i=n[1];n[2];a(U.changeInventoryCardContent(["unitPriceList",t,"unitUuid"],r)),a(U.changeInventoryCardContent(["unitPriceList",t,"name"],i))},value:e.get("name")},p.default.createElement(D,{key:He.get("uuid"),value:""+He.get("uuid")+y.TREE_JOIN_STR+He.get("name")+y.TREE_JOIN_STR+He.get("isStandard")},He.get("name")),Ge.map(function(e){return p.default.createElement(D,{key:e.get("uuid"),value:""+e.get("uuid")+y.TREE_JOIN_STR+e.get("name")+y.TREE_JOIN_STR+e.get("isStandard")},e.get("name"))}))):He.get("name")?p.default.createElement("span",{style:{marginLeft:"5px"}},"元/"+He.get("name")):"",Ge.size?p.default.createElement("div",{className:"pre-content"},p.default.createElement(T.XfnIcon,{type:"bigPlus",style:1===Ze.filter(function(t){return t.get("type")===e.get("type")}).size?{lineHeight:"28px",fontSize:"15px"}:{},onClick:function(){a(U.addUnitPrice(Ze,t,e.get("type")))}}),Ze.filter(function(t){return t.get("type")===e.get("type")}).size>1?p.default.createElement(T.XfnIcon,{type:"bigDel",onClick:function(){a(U.deleteunitPrice(Ze,t))}}):""):"")):""}))):"",p.default.createElement("div",{className:"modalBomb",style:{display:z?"":"none"}}))),W?p.default.createElement(b.default,{dispatch:a,inventoryCardState:r,enableWarehouse:g,showAddModal:W,insertOrModify:"modify"===_e&&Be.get("name")?"modify":"insert",closeAddModal:function(){return e.setState({showAddModal:!1})}}):"",p.default.createElement(L.default,{treeList:se,inventoryCardState:r,showWarehouseModal:K,onClose:function(){return e.setState({showWarehouseModal:!1})},dispatch:a,selectedKeys:de}),p.default.createElement(O.default,{MemberList:me,thingsList:ge,dispatch:a,showModal:pe,selectList:Ce,selectItem:he,materialSelectedKeys:fe,materialList:$e,code:Le}),Q?p.default.createElement(A.default,{onClose:function(){return e.setState({assistModal:!1})},dispatch:a,assistModal:Q,uuid:be.get("uuid"),allAssistClassificationList:Ee,assistClassificationList:De}):"",p.default.createElement(o.default,{visible:V,title:"关闭数量核算",onOk:function(){a(U.saveInventoryCard(B,"modify",Y,rt,it,Se)),e.setState({showCheckModal:!1})},onCancel:function(){return e.setState({showCheckModal:!1})}},p.default.createElement("span",null,"关闭数量核算，不可使用组装功能，组装单设置内容将被置空")),p.default.createElement(w.default,{visible:ye,onClose:function(){a(U.changeInventoryCardViews("batchModal",!1))},onOk:function(t,n,r,i){if("insert"===_e){var o=je.findIndex(function(t){return t.get("batch")===e.state.batch});a(U.changeInventoryCardContent(["financialInfo","batchList",o,"batch"],t)),a(U.changeInventoryCardContent(["financialInfo","batchList",o,"productionDate"],Me?r:"")),a(U.changeInventoryCardViews("batchModal",!1))}else a(U.modifyBatch(t,n,Me?r:"",i,Ne,function(){a(U.changeInventoryCardViews("batchModal",!1))}))},onOkAndNew:function(t,n,r,i){if("insert"===_e){var o=je.findIndex(function(t){return t.get("batch")===e.state.batch});a(U.changeInventoryCardContent(["financialInfo","batchList",o,"batch"],t)),a(U.changeInventoryCardContent(["financialInfo","batchList",o,"productionDate"],Me?r:"")),e.setState({modifyBatch:"",modifyBatchDate:(new E.DateLib).toString(),modifyBatchUuid:"",batch:""})}else a(U.modifyBatch(t,n,Me?r:"",i,Ne,function(){e.setState({modifyBatch:"",modifyBatchDate:(new E.DateLib).toString(),modifyBatchUuid:"",batch:""})}))},batchList:je,openShelfLife:Me,shelfLife:ke,insertOrModify:_e}),le?p.default.createElement(R.default,{fromPage:"inventory",visible:le,serialList:ce,onClose:function(){return a(U.changeInventoryCardViews("serialModal",!1))},onOk:function(e){a(U.changeInventoryCardContent([].concat(j(ue),["serialList"]),(0,C.fromJS)(e))),a(U.changeInventoryCardContent([].concat(j(ue),["isModify"]),!0)),a(U.changeInventoryCardContent([].concat(j(ue),["openedQuantity"]),e.length))}}):"")}}]),t}(),r.displayName="InventoryConfAddCardModal",n=i))||n);t.default=H},1375:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exportToNotification=t.getFileUploadFetch=t.afterCkImport=t.closeVcImportContent=t.beforeCkImport=t.beforeInsertWarehouseCard=t.changeItemDisableStatus=t.deleteWarehouseCard=t.enabledCategory=t.warehouseCheckboxCheck=t.warehouseTraingleSwitch=t.changeWarehouseConfingCommonViews=t.changeWarehouseConfingCommonString=t.beforeModifyaccountConfRunningOld=t.accountconfAccountCheckboxCheck=t.clearInsertModal=t.getWarehouseCard=t.saveWarehouseConfAccount=t.getWarehouseTree=t.beforeInsertWarehouseConfig=void 0;var n=f(a(37)),r=f(a(47)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};a(38),a(46);var o=d(a(1517)),l=f(a(52)),u=a(22),c=d(a(30)),s=a(18);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}r.default.confirm,t.beforeInsertWarehouseConfig=function(){return function(e){}};var g=t.getWarehouseTree=function(e){return function(t){t({type:o.SWITCH_LOADING_MASK}),(0,l.default)("warehouseCardTree","POST",JSON.stringify({uuidList:[]}),function(a){t({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)&&t({type:o.GET_WAREHOUSE_TREE,cardList:a.data.cardList,first:e})})}},p=(t.saveWarehouseConfAccount=function(e,t){return function(a,n){var r=n().warehouseConfigState.get("insertCardTemp").toJS(),s=r.name,d=r.uuid,f=n().warehouseConfigState.getIn(["views","insertOrModify"]);"insert"==f&&(r.action="MANAGER-WAREHOUSE_SETTING-CUD_CARD"),(0,l.default)("repeatWarehouseCardName","POST",JSON.stringify({name:s,uuid:"modify"===f?d:""}),function(n){(0,u.showMessage)(n)&&(n.data.codeList.length?c.Confirm({message:"卡片名称与【编码："+n.data.codeList[0]+"】卡片重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(n){1===n.buttonIndex&&(a({type:o.SWITCH_LOADING_MASK}),(0,l.default)(f+"WarehouseCard","POST",JSON.stringify(i({},r)),function(n){a({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(n)&&(e?a(E()):t(),a(p(e)),a(g()))}))}}):(a({type:o.SWITCH_LOADING_MASK}),(0,l.default)(f+"WarehouseCard","POST",JSON.stringify(i({},r)),function(n){a({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(n,"show")&&(e?a(E()):t(),a(p(e)),a(g()))})))})}},t.getWarehouseCard=function(e){return function(t,a){var n=e.get("uuid");(0,l.default)("getWarehouseCard","GET","uuid="+n,function(e){(0,u.showMessage)(e)&&t({type:o.GET_WAREHOUSE_CARD,data:e.data})})}},t.clearInsertModal=function(e){return{type:o.AFTER_INSERT_WAREHOUSE_CARD,saveAndNew:e}}),C=(t.accountconfAccountCheckboxCheck=function(e,t){return{type:o.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK,checked:e,uuid:t}},t.beforeModifyaccountConfRunningOld=function(e){return{type:o.BEFORE_MODIFY_ACCOUNTCONF_RUNNING,item:e}},t.changeWarehouseConfingCommonString=function(e,t,a){return function(n){var r="string"==typeof t?[e+"Temp",t]:[e+"Temp"].concat(m(t));n({type:o.CHANGE_WAREHOUSECONFIG_COMMON_STRING,placeArr:r,value:a})}}),h=t.changeWarehouseConfingCommonViews=function(e,t){return function(a){var n="string"==typeof e?["views",e]:["views"].concat(m(e));a({type:o.CHANGE_WAREHOUSECONFIG_COMMON_STRING,placeArr:n,value:t})}},y=(t.warehouseTraingleSwitch=function(e,t){return{type:o.WAREHOUSE_TRIANGLE_SWITCH,showChild:e,uuid:t}},t.warehouseCheckboxCheck=function(e,t,a){return{type:o.WAREHOUSE_CHECKBOX_CHECK,item:e,upperArr:t,checked:a}},t.enabledCategory=function(e,t){return function(a){a({type:o.SWITCH_LOADING_MASK}),(0,l.default)("modifyWarehouseCardStatus","GET","uuid="+e+"&canUse="+t,function(n){if((0,u.showMessage)(n)){var r=n.data.parentList||[];a(y(e,!t,r))}a({type:o.SWITCH_LOADING_MASK})})}},t.deleteWarehouseCard=function(e){return function(t){c.Confirm({message:"确定删除？",title:"温馨提示",buttonLabels:["取消","确定"],onSuccess:function(a){1===a.buttonIndex&&(t({type:o.SWITCH_LOADING_MASK}),(0,l.default)("deleteWarehouseCard","POST",JSON.stringify({deleteList:e}),function(e){if(t({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var a=e.data;a.errorChild?n.default.info("删除仓库失败："+a.errorChild+"拥有下级仓库；"):a.errorJr?n.default.info("删除仓库失败："+a.errorJr+"已被流水使用"):a.errorOpen?n.default.info("删除仓库失败："+a.errorOpen+"已设置期初值；"):n.default.info("删除成功！"),t(h("selectItem",(0,s.fromJS)([]))),t(g())}}))}})}},t.changeItemDisableStatus=function(e,t,a){return function(n,r){var i=r().warehouseConfigState,l=i.getIn(["warehouseTemp","cardList",0,"childList"]),u=i.getIn(["warehouseTemp","cardList",0,"disableList"]),c=[e];t&&a.length&&(c=c.concat(a));var s=function e(a,r,i,l){r&&r.size&&r.find(function(r,u){if(a.find(function(e){return e===r.get("uuid")}))return n({type:o.CHANGE_WAREHOUSE_ITEM_DISABLE_STATUS,placeArr:[].concat(m(i),[u]),disabled:t}),!0;e(a,r.get("childList"),[].concat(m(i),[u,"childList"]),l),e(a,r.get("disableList"),[].concat(m(i),[u,"disableList"]),l)})};s(c,l,["childList"],!0),s(c,u,["disableList"],!0)}}),E=t.beforeInsertWarehouseCard=function(e){return function(t){t({type:o.SWITCH_LOADING_MASK}),(0,l.default)("getWarehouseDefaultCode","GET","",function(a){t({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)&&(e&&e(),a.data.code&&t(C("insertCard","code",a.data.code)))})}},S=(t.beforeCkImport=function(){return{type:o.BEFORE_CK_IMPORT}},t.closeVcImportContent=function(){return{type:o.CLOSE_CK_IMPORT_CONTENT}}),T=t.afterCkImport=function(e){return function(t){t({type:o.AFTER_CK_IMPORT,receivedData:e})}};t.getFileUploadFetch=function(e){return function(t){(0,l.default)("ckUpload","UPLOAD",e,function(e){if((0,u.showMessage)(e)){if(e.data){t({type:o.CHANGE_CK_IMPORT_NUM,name:"totalNumber",value:e.data.pages}),t({type:o.CHANGE_CK_IMPORT_NUM,name:"importKey",value:e.data.importKey}),t({type:o.CHANGE_CK_IMPORT_NUM,name:"wlImportantStatus",value:!0});!function a(n){n<=e.data.pages&&setTimeout(function(){(0,l.default)("ckImport","POST",JSON.stringify({importKey:e.data.importKey,current:n}),function(i){(0,u.showMessage)(i)?n<e.data.pages?a(n+1):(t({type:o.CHANGE_CK_IMPORT_NUM,name:"wlImportantStatus",value:!1}),(0,l.default)("ckImportError","GET","importKey="+e.data.importKey+"&needDownload=false",function(e){t(T(e))})):(r.default.error({title:"异常提示",content:"请求异常，请稍后重试"}),t(S()))}),t({type:o.CHANGE_CK_IMPORT_NUM,name:"curNumber",value:n})},500)}(1)}}else t(S())})}},t.exportToNotification=function(){return function(e){(0,l.default)("ckExport","GET","",function(e){(0,u.showMessage)(e,"show")})}}},1376:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(a(14)),r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(78);var i=c(a(1));c(a(0)),a(18),a(56);a(1240);u(a(27));var o=a(22),l=a(127);c(a(487)),u(a(1241)),c(a(1237));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.showChild,r=(e.hideChildList,e.warehousePriceMode,e.isOpenedQuantity),u=(e.enableWarehouse,e.unit),c=e.hideChildFunc,s=e.showChildFunc,d=e.line,f=e.level,m=(e.isCheckOut,e.dispatch,e.index,e.openAssist),g=e.openBatch,p=0,C=0;!function e(t){return t.map(function(t){t.get("childList")&&t.get("childList").size&&!t.get("isEnd")?e(t.get("childList")):m||g?(p+=t.get("childList").reduce(function(e,t){return e+(Number(t.get("openedAmount"))||0)},0),C+=t.get("childList").reduce(function(e,t){return e+(Number(t.get("openedQuantity"))||0)},0)):(p+=Number(t.get("openedAmount"))||0,C+=Number(t.get("openedQuantity"))||0)})}(t.get("childList"));var h=5+7*(f-1)+"px";return i.default.createElement(l.TableItem,{key:t.get("warehouseUuid"),line:d},i.default.createElement("li",{className:"inventory-code",style:{paddingLeft:h}},t.get("warehouseCode")),i.default.createElement("li",{className:"inventory-name"},i.default.createElement("span",null,t.get("warehouseName")),i.default.createElement(n.default,{type:a?"up":"down",onClick:function(){a?c():s()}})),r?i.default.createElement("li",{className:"force-centet"},i.default.createElement("span",{className:"input-quantity"},(0,o.formatFour)(C)),i.default.createElement("span",null,u.get("name"))):"",i.default.createElement("li",{className:"force-centet"},i.default.createElement("span",{className:"input-amount"},(0,o.formatMoney)(p)),i.default.createElement("span",null,"元")))}}]),t}();t.default=s},1398:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(47),i=(n=r)&&n.__esModule?n:{default:n},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,a=arguments[1];return((e={},f(e,u.INIT_EDIT_RUNNING,function(){return m}),f(e,u.BEFORE_INSERT_RUNNING,function(){return m.setIn(["oriTemp","oriDate"],a.date)}),f(e,u.SWITCH_EDIT_RUNNING_SWITCH_PAGETAB,function(){var e=t.getIn(["oriTemp","oriDate"]);return"business"===a.value&&(t=t.set("flags",m.get("flags")).set("oriTemp",m.get("oriTemp")).setIn(["oriTemp","oriDate"],e)),t}),f(e,u.SELECT_EDIT_RUNNING_CATEGORY,function(){var e=m.get("oriTemp").toJS(),n=t.getIn(["oriTemp","oriAbstract"]),r=t.getIn(["oriTemp","oriDate"]),i=a.name.uuid;return t=t.setIn(["flags","showModal"],!0).setIn(["flags","switchUuidList"],(0,l.fromJS)([])).set("oriTemp",(0,l.fromJS)(o({},e,a.name))).set("categoryTemp",(0,l.fromJS)(a.name)),a.name.beProject&&(t=t.setIn(["oriTemp","usedProject"],!0).setIn(["oriTemp","projectCardList"],(0,l.fromJS)([{uuid:""}]))),a.isFresh&&(t=t.setIn(["oriTemp","oriAbstract"],n)),t.setIn(["oriTemp","categoryUuid"],i).setIn(["oriTemp","oriDate"],r)}),f(e,u.SELECT_MODIFY_RUNNING_CATEGORY,function(){var e=m.get("oriTemp").toJS(),n=t.getIn(["oriTemp","oriAbstract"]),r=t.getIn(["oriTemp","jrIndex"]),i=t.getIn(["oriTemp","oriDate"]),u=t.getIn(["oriTemp","amount"]),s=t.getIn(["oriTemp","accounts"]),d=t.get("enclosureList"),f=t.getIn(["oriTemp","oriUuid"]),g=t.getIn(["oriTemp","propertyCost"]),p=t.getIn(["oriTemp","billList"]),C=t.getIn(["oriTemp","canBeModifyCategory"]),h=t.getIn(["oriTemp","currentCardList"]),y=a.name.categoryType,E=(a.name.propertyCarryover,t.getIn(["oriTemp","projectCardList"])),S=(t.getIn(["oriTemp","categoryType"]),(0,c.getCategorynameByType)(y)),T=S.categoryTypeObj;a.name.beProject&&!E.size?E=(0,l.fromJS)([{}]):a.name.beProject||(E=(0,l.fromJS)([])),u<0&&"LB_FYZC"!==y&&(u=Math.abs(u));var _=a.name.uuid;return t=t.setIn(["flags","showModal"],!0).setIn(["flags","switchUuidList"],(0,l.fromJS)([])).set("oriTemp",(0,l.fromJS)(o({},e,a.name,{oriAbstract:n,jrIndex:r,oriDate:i,amount:u,accounts:s,enclosureList:d,oriUuid:f,propertyCost:g,billList:p,projectCardList:E,canBeModifyCategory:C,categoryUuid:_}))).set("categoryTemp",(0,l.fromJS)(a.name)),a.isFresh&&(t=t.setIn(["oriTemp","oriAbstract"],n)),t=a.name[T].contactsManagement?t.setIn(["oriTemp","currentCardList"],h):t.setIn(["oriTemp","currentCardList"],(0,l.fromJS)([])).setIn(["oriTemp","usedCurrent"],!1)}),f(e,u.CHANGE_MODIFY_RUNNING_CATEGORY,function(){var e=t.get("categoryTemp").toJS(),n=m.get("oriTemp").toJS(),r=t.getIn(["oriTemp","oriAbstract"]),i=t.getIn(["oriTemp","jrIndex"]),u=t.getIn(["oriTemp","oriDate"]),c=t.getIn(["oriTemp","amount"]),s=t.getIn(["oriTemp","accounts"]),d=t.get("enclosureList"),f=t.getIn(["oriTemp","oriUuid"]),g=t.getIn(["oriTemp","propertyCost"]),p=t.getIn(["oriTemp","categoryUuid"]),C=t.getIn(["oriTemp","usedProject"]),h=a.oriState;return t.setIn(["flags","showModal"],!0).setIn(["flags","switchUuidList"],(0,l.fromJS)([])).set("oriTemp",(0,l.fromJS)(o({},n,e,{oriAbstract:r,jrIndex:i,oriDate:u,amount:c,accounts:s,enclosureList:d,oriUuid:f,categoryUuid:p,oriState:h,propertyCost:g,usedProject:C})))}),f(e,u.CHANGE_EDIT_RUNNING_COMMON_STRING,function(){return a.placeArr&&(t=t.setIn(a.placeArr,a.value)),a.place&&(t=t.set(a.place,a.value)),t}),f(e,u.CHANGE_EDIT_RUNNING_ACCOUNT_NAME,function(){return t.setIn(["oriTemp","accounts",0,"accountUuid"],a.accountUuid).setIn(["oriTemp","accounts",0,"poundage"],a.poundage).setIn(["oriTemp","accounts",0,"accountName"],a.accountName)}),f(e,u.GET_JR_ORI,function(){var e=m.get("oriTemp").toJS(),n=a.receivedData.amount,r=a.receivedData.currentAmount,i=a.uuidList||t.getIn(["flags","switchUuidList"]),u=a.receivedData.payment||{};return(t=Math.abs(n)===r?t.setIn(["flags","allGetFlow"],!0):t.setIn(["flags","allGetFlow"],!1)).set("oriTemp",(0,l.fromJS)(o({},e,a.receivedData,a.category))).set("categoryTemp",(0,l.fromJS)(o({},e,a.category))).setIn(["flags","switchUuidList"],i).setIn(["oriTemp","currentBillList"],(0,l.fromJS)(a.receivedData.billList)).setIn(["oriTemp","currentProjectCardList"],(0,l.fromJS)(a.receivedData.projectCardList)).setIn(["oriTemp","curcurrentCardList"],(0,l.fromJS)(a.receivedData.currentCardList)).setIn(["oriTemp","currentOriDate"],(0,l.fromJS)(a.receivedData.oriDate)).setIn(["oriTemp","currentpersonSocialSecurityAmount"],u.personSocialSecurityAmount||0).setIn(["oriTemp","currentpersonAccumulationAmount"],u.personAccumulationAmount||0).setIn(["oriTemp","currentpincomeTaxAmount"],u.incomeTaxAmount||0)}),f(e,u.CHANGE_STATE_INIT_ORITEMP,function(){var e=m.get("oriTemp").toJS(),n=t.get("categoryTemp").toJS(),r=t.getIn(["oriTemp","oriDate"]),i=t.getIn(["oriTemp","oriAbstract"]),u=t.getIn(["oriTemp","handleType"]),c=t.getIn(["oriTemp","categoryUuid"]),s=t.getIn(["oriTemp","propertyCost"]);return t.set("oriTemp",(0,l.fromJS)(o({},e,n))).setIn(["oriTemp","oriAbstract"],i).setIn(["oriTemp","oriDate"],r).setIn(["oriTemp","handleType"],u).setIn(["oriTemp","categoryUuid"],c).setIn(["oriTemp","propertyCost"],s).setIn(["oriTemp","oriState"],a.state).setIn(["flags","dropManageFetchAllowed"],!0)}),f(e,u.INIT_EDIT_RUNNING_SETTINGS,function(){return t=t.setIn(["taxRateTemp","payableRate"],a.rate.payableRate).setIn(["taxRateTemp","outputRate"],a.rate.outputRate).setIn(["taxRateTemp","scale"],a.rate.scale).set("hideCategoryList",(0,l.fromJS)(a.hideCategoryList))}),f(e,u.CHANGE_EDIT_BILL_STATES,function(){return t.setIn(["oriTemp","billList",0,"billState"],a.billState).setIn(["oriTemp","billList",0,"tax"],a.tax).setIn(["oriTemp","billList",0,"taxRate"],a.taxRate)}),f(e,u.EDIT_CALCULATE_GAIN_OR_LOSS,function(){var e=a.place,n=a.diff,r=a.deletePlace;return t.setIn(e,n).deleteIn(r,n)}),f(e,u.CHANGE_RUNNING_TAX_RATE,function(){var e=a.amount||t.getIn(["oriTemp","amount"])||0;return"-1"==a.value?t.setIn(["oriTemp","billList",0,"tax"],"").setIn(["oriTemp","billList",0,"taxRate"],a.value):t.setIn(["oriTemp","billList",0,"tax"],(Number(e)/(1+Number(a.value)/100)*Number(a.value)/100).toFixed(2)).setIn(["oriTemp","billList",0,"taxRate"],a.value)}),f(e,u.EDIT_RUNNING_CALCULATE_AMOUNT,function(){var e=t.getIn(["oriTemp","payment","companyAccumulationAmount"])||0,n=t.getIn(["oriTemp","payment","personAccumulationAmount"])||0,r=t.getIn(["oriTemp","payment","companySocialSecurityAmount"])||0,i=t.getIn(["oriTemp","payment","personSocialSecurityAmount"])||0,o=t.getIn(["oriTemp","payment","incomeTaxAmount"])||0,l=t.getIn(["oriTemp","amount"])||0,u=t.getIn(["oriTemp","payment","actualAmount"])||0,c=(t.getIn(["oriTemp","categoryType"]),t.getIn(["oriTemp","propertyPay"])),s=(t.getIn(["oriTemp","oriState"]),t.getIn(["oriTemp","acPayment","beAccrued"])),d=t.getIn(["oriTemp","acPayment","beWithholdTax"]),f=t.getIn(["oriTemp","acPayment","beWithholding"]),m=t.getIn(["oriTemp","acPayment","beWithholdSocial"]),g=void 0;switch(c){case"SX_GZXJ":g=a.totalNotHandleAmount<0?(Number(u)-Number(n)-Number(i)-Number(o)).toFixed(2):(Number(u)+Number(n)+Number(i)+Number(o)).toFixed(2);break;case"SX_ZFGJJ":g=a.totalNotHandleAmount<0?(Number(n)-Number(e)).toFixed(2):(Number(n)+Number(e)).toFixed(2);break;case"SX_SHBX":g=a.totalNotHandleAmount<0?(-Number(r)+Number(i)).toFixed(2):(Number(r)+Number(i)).toFixed(2);break;case"SX_QTXC":g=l;break;default:g=0}return t="SX_GZXJ"!==c||!s||d||f||m?"SX_ZFGJJ"!==c&&"SX_SHBX"!==c||"insert"!==a.insertOrModify?t.setIn(["oriTemp","amount"],g):t.setIn(["oriTemp","payment","actualAmount"],g):t.setIn(["oriTemp","payment","actualAmount"],Math.abs(a.totalNotHandleAmount).toFixed(2))}),f(e,u.CALCULATE_FROM_SEARCH_JUMP_TO_EDIT,function(){t.getIn(["flags","uuidList"]);return t}),f(e,u.GET_PREAMOUNT_INFO,function(){return t=t.setIn(["oriTemp","preAmount"],a.preAmount).setIn(["oriTemp","payableAmount"],a.payableAmount)}),f(e,u.CHANGE_ORITEMP_ORIDATE,function(){return t=t.setIn(["oriTemp","oriDate"],a.date)}),f(e,u.INIT_COST_STOCK_ARRAY,function(){return t=t.setIn(["flags","costStockList"],(0,l.fromJS)([]))}),f(e,u.COMMON_CHARGE_ITEM_CHECKBOX_SELECT,function(){var e=t.getIn(["flags","selectList"]),n=t.getIn(["flags","selectItem"]),r=a.item,i=r.uuid,o=r.name,u=r.code,c=r.isOpenedQuantity,s=r.unit,d=void 0===s?{unitList:[]}:s,f=r.unitPriceList,m=void 0===f?[]:f,g=r.financialInfo;if(!a.checked&&-1===e.findIndex(function(e){return e===i})){var p=e.push(i),C=n.push((0,l.fromJS)({uuid:i,name:o,code:u,isOpenedQuantity:c,unit:d,unitPriceList:m,financialInfo:g}));return t.setIn(["flags","selectList"],p).setIn(["flags","selectItem"],(0,l.fromJS)(C))}if(a.checked){var h=e.splice(e.findIndex(function(e){return e===i}),1),y=n.splice(e.findIndex(function(e){return e===i}),1);return t.setIn(["flags","selectList"],h).setIn(["flags","selectItem"],(0,l.fromJS)(y))}return t}),f(e,u.AFTER_INVENTORY_IMPORT,function(){var e=a.receivedData.data.importList.map(function(e){return e.exchange&&e.exchange.indexOf("仓库非末级")>-1&&(e.warehouseCardCode="",e.warehouseCardName=""),e});if(t=a.receivedData.data?t.setIn(["flags","iframeload"],!0).setIn(["flags","acmessage"],(0,l.fromJS)(a.receivedData.message)).setIn(["flags","errorList"],(0,l.fromJS)(a.receivedData.data.errorList)).setIn(["flags","importKey"],a.receivedData.data.importKey).setIn(["flags","importList"],(0,l.fromJS)(e)):t.setIn(["flags","iframeload"],!0).setIn(["flags","showMessageMask"],!1).setIn(["flags","acmessage"],(0,l.fromJS)(a.receivedData.message)),e&&e.length){var n=e.reduce(function(e,t){return e+=t.amount},0)||0;t=t.setIn(["oriTemp","stockCardList"],(0,l.fromJS)(e)).setIn(["oriTemp","carryoverCardList"],(0,l.fromJS)(e.map(function(e){return e.amount="",e}))).setIn(["oriTemp","amount"],n.toFixed(2))}return t}),f(e,u.CHANGE_PRICE_LIST,function(){return a.data.map(function(e,n){if(a.stockPriceList[n].storeUuid&&a.stockPriceList[n].cardUuid&&(t=(t=t.setIn(["oriTemp","stockCardList",n,"currentQuantity"],e.quantity)).setIn(["oriTemp","stockCardList",n,"showQuantity"],!0)),a.stockPriceList[n].isUniformPrice&&(e.price<0||(0,s.numberCalculate)(e.amount,e.quantity,2,"divide")<0))return i.default.error({title:"【"+e.code+" "+e.cardName+"】的单价异常，请调整单价后再录入",content:"",onOk:function(){}});t=t.setIn(["oriTemp","carryoverCardList",n,"referencePrice"],e.price)}),t}),e)[a.type]||function(){return t})()},a(46);var l=a(18),u=d(a(133)),c=a(101),s=(d(a(27)),a(22));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m=(0,l.fromJS)({views:{},flags:{selectList:[],indexList:[],managerCategoryList:[],stockThingsList:[],contactsThingsList:[],costStockList:[],selectItem:[],dropManageFetchAllowed:!0,selectedKeys:"",switchUuidList:[],poundage:{needPoundage:!1},accountContactsRange:[],accountProjectRange:[],accountProjectList:[],accountContactsRangeList:[],carryoverCategoryList:[],carryoverProjectList:[],importList:[],errorList:[],batchList:[],serialList:[]},oriTemp:{accounts:[{},{}],oriDate:(new s.DateLib).toString(),pendingStrongList:[],projectCardList:[{}],currentCardList:[],carryoverCardList:[{}],carryoverStrongList:[],stockCardList:[{}],stockStrongList:[],usedProject:!0,usedCurrent:!0,usedStock:!0,billList:[{billType:"bill_other",billState:""}],billStrongList:[],strongList:[],payment:{},cardAllList:[],poundageCurrentCardList:[],poundageProjectCardList:[],assistList:[],serialList:[]},categoryTemp:{},projectList:[],contactsList:[],warehouseList:[],stockList:[],hideCategoryList:[],MemberList:[],selectThingsList:[],thingsList:[]})},1399:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments[1];return((e={},c(e,o.INIT_EIDT_CALCULATE,function(){return s}),c(e,o.INIT_ENCODE_TYPE,function(){return t=t.setIn(["views","chooseNumber"],"-1").setIn(["views","jrIndex"],"").setIn(["views","saveWay"],!1).setIn(["views","encodeType"],"")}),c(e,o.CHANGE_CAN_MODIFY_JRINDEX,function(){var e="0"===a.encodeType?"1":a.encodeType;return t=t.setIn(["views","chooseNumber"],a.encodeType).setIn(["views","jrIndex"],a.jrIndex).setIn(["views","saveWay"],a.saveAndNew).setIn(["views","encodeType"],e)}),c(e,o.CHANGE_EIDT_CALCULATE_COMMON_STATE,function(){return t.setIn([a.parent,a.position],a.value)}),c(e,o.SELECT_EDIT_CALCULATE_ITEM,function(){var e=t.getIn([a.Tem,"uuidList"]),n=t.getIn([a.Tem,"stockCardUuidList"]);if(-1===e.indexOf(a.uuid))e=e.push(a.uuid),n=n?n.push({uuid:a.stockCardUuid,amount:a.amount,onlyId:a.uuid}):[];else{var i=e.findIndex(function(e){return e===a.uuid}),o=n.findIndex(function(e){return e.get("onlyId")===a.uuid});e=e.splice(i,1),n=n?n.splice(o,1):n}var l=n.size?n.toJS():[];return t=t.setIn([a.Tem,"uuidList"],e).setIn([a.Tem,"stockCardUuidList"],(0,r.fromJS)(l))}),c(e,o.SELECT_EDIT_CALCULATE_ITEM_ALL,function(){if(a.selectAll)return t.setIn([a.Tem,"uuidList"],(0,r.fromJS)([])).setIn([a.Tem,"stockCardUuidList"],(0,r.fromJS)([]));var e=t.getIn([a.Tem,a.ListName]),n=[],i=[];return e.forEach(function(e){n.push(e.get("jrJvUuid")),i.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid")})}),t.setIn([a.Tem,"uuidList"],(0,r.fromJS)(n)).setIn([a.Tem,"stockCardUuidList"],(0,r.fromJS)(i))}),c(e,o.AFTER_GET_EDIT_CALCULATE_COMMON_LIST,function(){t.getIn(["CostTransferTemp","uuidList"]);var e=t.getIn(["views","selectList"]),n=t.getIn(["views","selectItem"]),i=t.getIn(["CostTransferTemp","stockCardUuidList"]).toJS(),o=[];i&&i.size&&i.map(function(e){return o.push(e.get("onlyId"))});var l="CostTransferTemp"===a.temp?a.receivedData.carryoverList:a.receivedData.result;t=t.setIn([a.temp,a.ListName],(0,r.fromJS)(l));var u=e,c=n,s=i;if("CostTransferTemp"===a.temp){var d=[];a.receivedData.carryoverList.map(function(t){e.indexOf(t.jrJvUuid)>-1&&d.push(t.jrJvUuid),e.indexOf(t.jrJvUuid)>-1&&(u.push(t.jrJvUuid),c.push(t),-1===o.indexOf(t.jrJvUuid)&&s.push({uuid:t.stockCardUuid,amount:t.amount,onlyId:t.jrJvUuid,quantity:t.quantity,unitCardName:t.unitCardName,number:t.number,quantityAmount:t.quantityAmount}))}),t=t.setIn([a.temp,"uuidList"],(0,r.fromJS)(d)).setIn([a.temp,"stockCardUuidList"],(0,r.fromJS)(s)).setIn([a.temp,"cardPages"],a.receivedData.pages).setIn([a.temp,"currentCardPage"],a.receivedData.currentPage).setIn(["views","selectList"],(0,r.fromJS)(u)).setIn(["views","selectItem"],(0,r.fromJS)(c))}else t=t.setIn([a.temp,"uuidList"],(0,r.fromJS)([])).setIn([a.temp,"stockCardUuidList"],(0,r.fromJS)([])).setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([]));return t}),c(e,o.GET_CARRYOVER_CATEGORY,function(){return t=t.setIn(["CostTransferTemp","carryoverCategory"],(0,r.fromJS)(a.receivedData.categoryList)),a.needSaveData||(t=t.setIn(["CostTransferTemp","dealTypeName"],"").setIn(["CostTransferTemp","dealTypeUuid"],"")),t}),c(e,o.GET_CARRYOVER_WAREHOUSE,function(){return t=t.setIn(["CostTransferTemp","warehouseOptionList"],(0,r.fromJS)(a.receivedData.warehouseList))}),c(e,o.GET_EDIT_CALCULATE_TRANSFER_OUT_LIST,function(){return t=t.setIn(["TransferOutTemp","transferOutObj"],(0,r.fromJS)(a.receivedData))}),c(e,o.INIT_CATEGORY_FROM_CHANGE_ORISTATE,function(){return t=t.setIn(["CostTransferTemp","stockCardList"],(0,r.fromJS)([{}])).setIn(["CostTransferTemp","costTransferList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)([])).setIn(["CostTransferTemp","propertyCostList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","costStockList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","propertyCost"],"").setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])).set("commonCardObj",(0,r.fromJS)({memberList:[],thingsList:[],selectItem:[],selectList:[],selectedKeys:["all"+l.TREE_JOIN_STR+"1"],selectThingsList:[],showSingleModal:!1,modalName:""}))}),c(e,o.INIT_CATEGORY_FROM_GET_CATEGORY,function(){var e=t.getIn(["views","selectItem"]);t.getIn(["views","selectList"]);if(a.notClearItem){var n=a.stockUuidList;if("delete"===a.dealType){var i=e.filter(function(e){return n.indexOf(e.get("stockCardUuid"))>-1}),o=[];i&&i.map(function(e){return o.push(e.get("jrJvUuid"))}),t=t.setIn(["views","selectList"],(0,r.fromJS)(o)).setIn(["views","selectItem"],i).setIn(["CostTransferTemp","stockCardUuidList"],i)}}else t=t.setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])).setIn(["CostTransferTemp","stockCardUuidList"],(0,r.fromJS)([]));return t=t.setIn(["CostTransferTemp","carryoverCategory"],(0,r.fromJS)([])).setIn(["CostTransferTemp","warehouseOptionList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","categoryNameAll"],(0,r.fromJS)([])).setIn(["CostTransferTemp","wareHouseNameAll"],(0,r.fromJS)([])).setIn(["CostTransferTemp","categoryUuidList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","storeUuidList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","condition"],"").setIn(["CostTransferTemp","cardPages"],1).setIn(["CostTransferTemp","currentPage"],1)}),c(e,o.AFTER_SUCCESS_INSERT_CALCULATE_LB_ZZ,function(){return t=a.saveAndNew?t.setIn(["views","insertOrModify"],"insert").set("InternalTransferTemp",s.get("InternalTransferTemp")):t.setIn(["views","insertOrModify"],"modify")}),c(e,o.CHANGE_EDIT_ACCOUNT_ACCOUNT_NAME,function(){var e=a.value.split(l.TREE_JOIN_STR);return t=t.setIn([a.tab+"Temp",a.placeUUid],e[0]).setIn([a.tab+"Temp",a.placeName],e[1])}),c(e,o.INIT_EDIT_CALCULATE_TEMP,function(){t.get("hideCategoryList");var e=t.getIn(["SfglTemp","pageSize"]);if("saveAndNew"===a.strJudgeType){a.needCategoryUuid&&(t=t.setIn([a.temp,"categoryUuid"],a.receivedData.get("categoryUuid")));var n=s.get(a.temp);t=t.setIn(["views","insertOrModify"],"insert").setIn(["views","runningInsertOrModify"],"insert").setIn(["views","dealType"],"").setIn(["views","categoryMessage"],(0,r.fromJS)({beProject:!1,usedProject:!1,propertyCostList:[]})).setIn(["views","paymentTypeStr"],t.getIn(["views","paymentTypeStr"])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])).setIn(["views","totalAmount"],0).set("enclosureList",(0,r.fromJS)([])).set("label",(0,r.fromJS)([])).set("needDeleteUrl",(0,r.fromJS)([])).set(a.temp,n),"StockBuildUpTemp"===a.temp&&(t=t.setIn(["StockBuildUpTemp","categoryUuid"],a.receivedData.get("categoryUuid")))}if("afterSave"===a.strJudgeType){var i=(0,r.fromJS)(a.receivedData),o=a.callBackObj.jrUuid?a.callBackObj.jrUuid:t.getIn([a.temp,"jrUuid"]);t=t.set(a.temp,i).setIn(["views","insertOrModify"],"modify").setIn(["views","runningInsertOrModify"],"modify").setIn([a.temp,"jrNumber"],a.callBackObj.jrNumber).setIn([a.temp,"jrIndex"],a.callBackObj.jrIndex).setIn([a.temp,"jrUuid"],o).setIn([a.temp,"oriUuid"],a.callBackObj.oriUuid)}return"SfglTemp"===a.temp&&(t=t.setIn(["SfglTemp","pageSize"],e)),t}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_NBZZ,function(){var e=a.item,n=(0,r.fromJS)(a.receivedData.jrOri),i=(0,r.fromJS)(a.receivedData.jrOri.accounts),o=void 0,l=void 0,u=void 0,c=void 0;i&&i.map(function(e,t){"ACCOUNT_STATUS_FROM"==e.get("accountStatus")&&(o=e.get("accountName"),u=e.get("accountUuid")),"ACCOUNT_STATUS_TO"==e.get("accountStatus")&&(l=e.get("accountName"),c=e.get("accountUuid"))});n.get("enclosureList")?n.get("enclosureList"):(0,r.fromJS)([]);return t=s.setIn(["views","insertOrModify"],a.insertOrModify).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName).setIn(["InternalTransferTemp","oriUuid"],e.get("oriUuid")).setIn(["InternalTransferTemp","jrUuid"],n.get("jrUuid")).setIn(["InternalTransferTemp","oriAbstract"],n.get("oriAbstract")).setIn(["InternalTransferTemp","oriState"],n.get("oriState")).setIn(["InternalTransferTemp","amount"],n.get("amount")).setIn(["InternalTransferTemp","fromAccountName"],o).setIn(["InternalTransferTemp","toAccountName"],l).setIn(["InternalTransferTemp","fromAccountUuid"],u).setIn(["InternalTransferTemp","toAccountUuid"],c).setIn(["InternalTransferTemp","jrIndex"],n.get("jrIndex")).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["InternalTransferTemp","beCertificate"],a.receivedData.jrOri.beCertificate)}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_ZJTX,function(){var e=a.item,i=s.get("DepreciationTemp").toJS(),o=(0,r.fromJS)(n({},i,a.receivedData.category,a.receivedData.jrOri));return t=s.setIn(["views","insertOrModify"],a.insertOrModify).setIn(["views","dealType"],o.get("relationCategoryName")).setIn(["views","projectRange"],a.receivedData.category.projectRange).setIn(["views","beProject"],a.receivedData.category.beProject).setIn(["views","propertyCostList"],o.get("propertyCostList")).set("DepreciationTemp",(0,r.fromJS)(o)).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName).setIn(["DepreciationTemp","projectCard"],(0,r.fromJS)(o.getIn(["projectCardList",0]))).setIn(["DepreciationTemp","beCertificate"],a.receivedData.jrOri.beCertificate)}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_SYJZ,function(){var e=a.item,i=s.get("JzjzsyTemp").toJS(),o=(0,r.fromJS)(n({},i,a.receivedData.category,a.receivedData.jrOri));return t=s.setIn(["views","insertOrModify"],a.insertOrModify).set("JzjzsyTemp",(0,r.fromJS)(o)).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName).setIn(["JzjzsyTemp","pendingProfitAndLossCarryoverList"],(0,r.fromJS)(o.get("pendingProfitAndLossCarryoverList"))).setIn(["JzjzsyTemp","categoryName"],o.get("relationCategoryName")).setIn(["JzjzsyTemp","beCertificate"],a.receivedData.jrOri.beCertificate).setIn(["JzjzsyTemp","amount"],a.receivedData.jrOri.amount).setIn(["JzjzsyTemp","projectCardList"],(0,r.fromJS)(a.receivedData.projectList)).setIn(["JzjzsyTemp","jrCategoryList"],(0,r.fromJS)(a.receivedData.categoryList)).setIn(["views","oriUuid"],e.get("oriUuid"))}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_JZSY,function(){var e=a.item,i=s.get("CqzcTemp").toJS(),o=(0,r.fromJS)(n({},i,a.receivedData.category,a.receivedData.jrOri)),l=a.receivedData.jrOri.assets,u=l.depreciationAmount,c=l.originalAssetsAmount,d=(Number(c)-Number(u)).toFixed(2),f=(d-l.cleaningAmount).toFixed(2);return t=s.setIn(["views","insertOrModify"],a.insertOrModify).set("CqzcTemp",(0,r.fromJS)(o)).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName).setIn(["CqzcTemp","projectRange"],a.receivedData.category.projectRange).setIn(["CqzcTemp","beProject"],a.receivedData.category.beProject).setIn(["CqzcTemp","projectCard"],(0,r.fromJS)(o.get("projectCardList"))).setIn(["CqzcTemp","categoryName"],o.get("relationCategoryName")).setIn(["CqzcTemp","businessList"],(0,r.fromJS)(a.receivedData.jrOri.pendingStrongList)).setIn(["CqzcTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("oriUuid")})).setIn(["CqzcTemp","beCertificate"],a.receivedData.jrOri.beCertificate).setIn(["CqzcTemp","diffAmount"],f).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))}),c(e,o.COST_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=a.item,o=s.get("CostTransferTemp").toJS(),l=(0,r.fromJS)(n({},o,a.receivedData.category,a.receivedData.jrOri)),u=a.receivedData.jrOri.stockCardList,c=o.pageSize;if(t=s.setIn(["views","insertOrModify"],a.insertOrModify).setIn(["CostTransferTemp","canUseWarehouse"],e.get("canUseWarehouse")).setIn(["views","projectRange"],l.get("projectRange")).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName).setIn(["CostTransferTemp","oriAbstract"],l.get("oriAbstract")).setIn(["CostTransferTemp","dealTypeUuid"],l.get("relationCategoryUuid")).setIn(["CostTransferTemp","categoryName"],l.get("categoryName")).setIn(["CostTransferTemp","dealTypeName"],l.get("relationCategoryName")).setIn(["CostTransferTemp","dealCategoryType"],a.receivedData.jrOri.relationCategoryType).setIn(["CostTransferTemp","costStockList"],l.get("stockCardList")).setIn(["CostTransferTemp","beCertificate"],a.receivedData.jrOri.beCertificate).setIn(["CostTransferTemp","propertyCostList"],l.get("propertyCostList")).setIn(["CostTransferTemp","propertyCost"],l.get("propertyCost")).setIn(["CostTransferTemp","stockCardList"],(0,r.fromJS)(u)).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(u)).setIn(["CostTransferTemp","totalNumber"],u.length),u&&u.map(function(e,a){t=t.setIn(["CostTransferTemp","stockCardList",a,"allUnit"],(0,r.fromJS)(e.unit)).setIn(["CostTransferTemp","stockCardList",a,"unitCardName"],e.unit?e.unit.name:"").setIn(["CostTransferTemp","selectStockItem",a,"unitCardName"],e.unit?e.unit.name:"")}),"modify"===a.insertOrModify||a.disabledChange){var d=l.get("enclosureList")?l.get("enclosureList"):(0,r.fromJS)([]);t=t.setIn(["CostTransferTemp","oriUuid"],l.get("oriUuid")).setIn(["CostTransferTemp","jrIndex"],l.get("jrIndex")).setIn(["CostTransferTemp","oriState"],l.get("oriState")).setIn(["CostTransferTemp","carryoverAmount"],l.get("notHandleAmount")).setIn(["CostTransferTemp","uuidList"],l.get("stockWeakList").map(function(e,t){return e.get("jrJvUuid")}).slice(0,c)).setIn(["CostTransferTemp","projectCard"],l.get("projectCardList")).setIn(["CostTransferTemp","usedProject"],l.get("usedProject")).setIn(["CostTransferTemp","beProject"],l.get("beProject")).setIn(["CostTransferTemp","enclosureList"],d).setIn(["CostTransferTemp","cardPages"],Math.ceil(l.get("stockWeakList").size/c)).setIn(["CostTransferTemp","currentCardPage"],1).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"));var f=[];"STATE_YYSR_ZJ"!==l.get("oriState")?(l.getIn(["stockWeakList"]).map(function(e){f.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid"),quantity:e.get("quantity"),quantityAmount:e.get("quantityAmount"),number:e.get("number"),storeNumber:e.get("storeNumber")}),u.forEach(function(a,n){a.cardUuid===e.get("stockCardUuid")&&(t=(t=t.setIn(["CostTransferTemp","stockCardList",n,"unitCardName"],e.get("unitCardName"))).setIn(["CostTransferTemp","selectStockItem",n,"unitCardName"],e.get("unitCardName")))})}),u&&u.map(function(e,a){var n=0,r=0,o=0,l=0,u=0;f&&f.map(function(t,a){t.uuid===e.cardUuid&&(t.uuid,t.unitCardName,n=(0,i.numberCalculate)(n,t.amount),u=(0,i.numberCalculate)(u,t.quantity,4,"add",4),r=(0,i.numberCalculate)(r,t.number,4,"add",4),l=(0,i.numberCalculate)(l,t.quantityAmount),o=(0,i.numberCalculate)(o,t.storeNumber,4,"add",4))});0===r||(0,i.numberCalculate)(l,r,4,"divide",4)<0||(0,i.numberCalculate)(l,r,4,"divide",4);t=t.setIn(["CostTransferTemp","stockCardList",a,"referencePrice"],(0,i.numberCalculate)(l,r,4,"divide",4)).setIn(["CostTransferTemp","stockCardList",a,"referenceQuantity"],o).setIn(["CostTransferTemp","selectStockItem",a,"referencePrice"],(0,i.numberCalculate)(l,r,4,"divide",4)).setIn(["CostTransferTemp","selectStockItem",a,"referenceQuantity"],o)})):u.forEach(function(e,a){t=t.setIn(["CostTransferTemp","stockCardList",a,"unitCardName"],e.unitName).setIn(["CostTransferTemp","stockCardList",a,"unitUuid"],e.unitUuid).setIn(["CostTransferTemp","stockCardList",a,"warehouseCardName"],e.warehouseCardName).setIn(["CostTransferTemp","selectStockItem",a,"unitCardName"],e.unitName).setIn(["CostTransferTemp","selectStockItem",a,"unitUuid"],e.unitUuid).setIn(["CostTransferTemp","selectStockItem",a,"warehouseCardName"],e.warehouseCardName)}),t=t.setIn(["CostTransferTemp","costTransferList"],l.get("stockWeakList")).setIn(["CostTransferTemp","canModifyList"],l.get("stockWeakList")).setIn(["views","selectItem"],l.get("stockWeakList")).setIn(["views","selectList"],l.get("stockWeakList").map(function(e){return e.get("jrJvUuid")})).setIn(["CostTransferTemp","stockCardUuidList"],(0,r.fromJS)(f))}else t=(t=t.setIn(["CostTransferTemp","oriUuid"],"").setIn(["CostTransferTemp","oriState"],l.get("oriState")).setIn(["CostTransferTemp","carryoverAmount"],"").setIn(["CostTransferTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")]))).setIn(["CostTransferTemp","costTransferList"],(0,r.fromJS)([e]));return t}),c(e,o.INVOICE_AUTH_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=a.item,i=s.get("InvoiceAuthTemp").toJS(),o=(0,r.fromJS)(n({},i,a.receivedData.category,a.receivedData.jrOri)),l=[];return o.get("pendingStrongList").map(function(e){l.push({onlyId:e.get("oriUuid")})}),t=s.setIn(["views","insertOrModify"],a.insertOrModify).setIn(["InvoiceAuthTemp","oriAbstract"],o.get("oriAbstract")).setIn(["InvoiceAuthTemp","categoryUuid"],o.get("categoryUuid")).setIn(["InvoiceAuthTemp","oriState"],o.get("oriState")).setIn(["InvoiceAuthTemp","beCertificate"],a.receivedData.jrOri.beCertificate),t="modify"===a.insertOrModify||a.disabledChange?(t=t.setIn(["InvoiceAuthTemp","oriUuid"],e.get("oriUuid")).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName).setIn(["InvoiceAuthTemp","jrIndex"],o.get("jrIndex")).setIn(["InvoiceAuthTemp","amount"],o.get("amount")).setIn(["InvoiceAuthTemp","billAuthType"],"STATE_FPRZ_CG"===o.get("oriState")?"BILL_AUTH_TYPE_CG":"BILL_AUTH_TYPE_TG").setIn(["InvoiceAuthTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("jrJvUuid")})).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["InvoiceAuthTemp","stockCardUuidList"],(0,r.fromJS)(l))).setIn(["InvoiceAuthTemp","invoiceAuthList"],o.getIn(["pendingStrongList"])):(t=t.setIn(["InvoiceAuthTemp","oriUuid"],"").setIn(["InvoiceAuthTemp","billAuthType"],"STATE_FPRZ_CG"===o.get("oriState")?"BILL_AUTH_TYPE_CG":"BILL_AUTH_TYPE_TG").setIn(["InvoiceAuthTemp","uuidList"],(0,r.fromJS)([e.get("jrJvUuid")]))).setIn(["InvoiceAuthTemp","invoiceAuthList"],(0,r.fromJS)([e]))}),c(e,o.INVOICING_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=a.item,i=s.get("InvoicingTemp").toJS(),o=(0,r.fromJS)(n({},i,a.receivedData.category,a.receivedData.jrOri)),l=[];if(o.get("pendingStrongList").map(function(e){l.push({onlyId:e.get("oriUuid")})}),t=s.setIn(["views","insertOrModify"],a.insertOrModify).setIn(["InvoicingTemp","oriAbstract"],o.get("oriAbstract")).setIn(["InvoicingTemp","categoryUuid"],o.get("categoryUuid")).setIn(["InvoicingTemp","oriState"],o.get("oriState")).setIn(["InvoicingTemp","beCertificate"],a.receivedData.jrOri.beCertificate),"modify"===a.insertOrModify||a.disabledChange){var u="STATE_KJFP_XS"===o.get("oriState")?"BILL_MAKE_OUT_TYPE_XS":"BILL_MAKE_OUT_TYPE_TS",c=o.get("enclosureList")?o.get("enclosureList"):(0,r.fromJS)([]);t=(t=t.setIn(["InvoicingTemp","oriUuid"],e.get("oriUuid")).setIn(["InvoicingTemp","jrIndex"],o.get("jrIndex")).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName).setIn(["InvoicingTemp","amount"],o.get("amount")).setIn(["InvoicingTemp","enclosureList"],c).setIn(["InvoicingTemp","billMakeOutType"],u).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["InvoicingTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("jrJvUuid")})).setIn(["InvoicingTemp","stockCardUuidList"],(0,r.fromJS)(l))).setIn(["InvoicingTemp","invoicingList"],o.getIn(["pendingStrongList"]))}else t=(t=t.setIn(["InvoicingTemp","oriUuid"],"").setIn(["InvoicingTemp","billMakeOutType"],"STATE_KJFP_XS"===o.get("oriState")?"BILL_MAKE_OUT_TYPE_XS":"BILL_MAKE_OUT_TYPE_TS").setIn(["InvoicingTemp","uuidList"],(0,r.fromJS)([o.get("jrJvUuid")]))).setIn(["InvoicingTemp","invoicingList"],(0,r.fromJS)([o]));return t}),c(e,o.TRANSFER_OUT_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=a.item,i=s.get("DepreciationTemp").toJS(),o=(0,r.fromJS)(n({},i,a.receivedData.category,a.receivedData.jrOri));t=s.setIn(["views","insertOrModify"],a.insertOrModify).set("TransferOutTemp",(0,r.fromJS)(o)).setIn(["TransferOutTemp","beCertificate"],a.receivedData.jrOri.beCertificate).setIn(["TransferOutTemp","oriUuid"],e.get("oriUuid")).setIn(["TransferOutTemp","jrIndex"],o.get("jrIndex")).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName).setIn(["TransferOutTemp","oriAbstract"],o.get("oriAbstract")).setIn(["TransferOutTemp","categoryUuid"],o.get("categoryUuid")).setIn(["TransferOutTemp","handleMonth"],o.getIn(["pendingStrongList",0,"oriDate"]).substr(0,7)).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["TransferOutTemp","uuidList"],o.get("pendingStrongList").map(function(e){return e.get("oriUuid")}));var l=0,u=0,c=0,d=0;return o.get("pendingStrongList").forEach(function(e){"销项税额"===e.get("jrJvTypeName")?(d+=1,c+=e.get("handleAmount")):(u+=1,l+=e.get("handleAmount"))}),t=t.setIn(["TransferOutTemp","transferOutObj","jrJvVatDtoList"],o.get("pendingStrongList")).setIn(["TransferOutTemp","transferOutObj","inputAmount"],l).setIn(["TransferOutTemp","transferOutObj","inputCount"],u).setIn(["TransferOutTemp","transferOutObj","outputAmount"],c).setIn(["TransferOutTemp","transferOutObj","outputCount"],d)}),c(e,o.PAYMANAGE_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=a.item,i=s.get("SfglTemp").toJS(),o=e.get("pageSize")?e.get("pageSize"):20,l=(0,r.fromJS)(n({},i,a.receivedData.category,a.receivedData.jrOri)),u="STATE_SFGL_ML"===l.get("oriState"),c=a.receivedData.jrOri.pendingManageDto.pendingManageList,d=a.receivedData.jrOri.pendingManageDto.debitTotal,f=a.receivedData.jrOri.pendingManageDto.creditTotal,m=0,g=[];if(c&&c.length&&c.map(function(e,t){var a=e.direction,r=void 0,i=Number(e.amount);r=i.toFixed(2),"debit"===a?m+=Number(r):m-=Number(r),g.push(n({},e,{moedAmount:e.handleAmount}))}),t=s.setIn(["views","insertOrModify"],a.insertOrModify).setIn(["SfglTemp","oriAbstract"],l.get("oriAbstract")).setIn(["SfglTemp","categoryUuid"],l.getIn(["pendingManageDto","categoryUuid"])).setIn(["SfglTemp","categoryName"],l.getIn(["pendingManageDto","categoryName"])).setIn(["SfglTemp","oriState"],l.get("oriState")).setIn(["SfglTemp","oriUuid"],l.get("oriUuid")).setIn(["SfglTemp","jrUuid"],l.get("jrUuid")).setIn(["SfglTemp","isModeRunning"],u).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName).setIn(["SfglTemp","beCertificate"],a.receivedData.jrOri.beCertificate),"modify"===a.insertOrModify||a.disabledChange){1===a.receivedData.jrOri.accounts.length?t=t.setIn(["SfglTemp","accountUuid"],l.getIn(["accounts",0,"accountUuid"])).setIn(["SfglTemp","accountName"],l.getIn(["accounts",0,"accountName"])).setIn(["SfglTemp","accounts"],(0,r.fromJS)([a.receivedData.jrOri.accounts[0],{amount:""}])).setIn(["SfglTemp","usedAccounts"],!1):a.receivedData.jrOri.accounts.length>1&&(t=t.setIn(["SfglTemp","accounts"],(0,r.fromJS)(a.receivedData.jrOri.accounts)).setIn(["SfglTemp","usedAccounts"],!0));var p="STATE_SFGL_ML"===l.get("oriState")?"moedAmount":"handlingAmount",C=l.get("enclosureList")?l.get("enclosureList"):(0,r.fromJS)([]);t=(t=t.setIn(["SfglTemp","jrIndex"],l.get("jrIndex")).setIn(["SfglTemp",p],l.get("amount")).setIn(["SfglTemp","cardUuid"],l.getIn(["currentCardList",0,"cardUuid"])).setIn(["SfglTemp","usedCard","code"],l.getIn(["currentCardList",0,"code"])).setIn(["SfglTemp","usedCard","name"],l.getIn(["currentCardList",0,"name"])).setIn(["SfglTemp","cardPages"],Math.ceil(l.getIn(["pendingManageDto","pendingManageList"]).size/o)).setIn(["SfglTemp","currentCardPage"],1).setIn(["SfglTemp","pageSize"],o).setIn(["SfglTemp","totalNumber"],l.getIn(["pendingManageDto","pendingManageList"]).size).setIn(["SfglTemp","debitTotal"],d).setIn(["SfglTemp","creditTotal"],f).setIn(["SfglTemp","unAutomatic"],l.getIn(["pendingManageDto","isManualWriteOff"])).setIn(["SfglTemp","enclosureList"],C).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["views","selectList"],l.getIn(["pendingManageDto","pendingManageList"]).map(function(e){return e.get("uuid")})).setIn(["views","indexList"],l.getIn(["pendingManageDto","pendingManageList"]).map(function(e,t){return t})).setIn(["views","selectItem"],(0,r.fromJS)(g)).setIn(["views","totalAmount"],m)).setIn(["SfglTemp","detail"],(0,r.fromJS)(g))}else t=(t=t.setIn(["SfglTemp","oriUuid"],"").setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])).setIn(["SfglTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["SfglTemp","debitTotal"],0).setIn(["SfglTemp","creditTotal"],0)).setIn(["SfglTemp","detail"],(0,r.fromJS)([l]));return t}),c(e,o.COMMONCHARGE_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=a.item,i=s.get("CommonChargeTemp").toJS(),o=(0,r.fromJS)(n({},i,a.receivedData.category,a.receivedData.jrOri));if(t=s.set("CommonChargeTemp",o).setIn(["views","insertOrModify"],a.insertOrModify).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName).setIn(["CommonChargeTemp","oriAbstract"],o.get("oriAbstract")).setIn(["CommonChargeTemp","oriState"],o.get("oriState")).setIn(["CommonChargeTemp","oriUuid"],o.get("oriUuid")).setIn(["CommonChargeTemp","jrUuid"],o.get("jrUuid")).setIn(["CommonChargeTemp","beCertificate"],a.receivedData.jrOri.beCertificate),"modify"===a.insertOrModify||a.disabledChange){var l=0;o.get("pendingProjectShareList").map(function(e){l+=e.get("amount")}),t=(t=t.setIn(["CommonChargeTemp","jrIndex"],o.get("jrIndex")).setIn(["CommonChargeTemp","amount"],l).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))).setIn(["CommonChargeTemp","paymentList"],o.get("pendingProjectShareList"))}else t=(t=t.setIn(["CommonChargeTemp","oriUuid"],"").setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["CommonChargeTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")]))).setIn(["CommonChargeTemp","detail"],(0,r.fromJS)([o]));return t}),c(e,o.INVENTORY_TRANSFER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=a.item,i=s.get("StockTemp").toJS(),o=(0,r.fromJS)(n({},i,a.receivedData.category,a.receivedData.jrOri));if(t=s.setIn(["views","insertOrModify"],a.insertOrModify).setIn(["StockTemp","oriAbstract"],o.get("oriAbstract")),"modify"===a.insertOrModify||a.disabledChange){var l=[];a.receivedData.jrOri.stockCardList.map(function(e){l.push(n({},e,{unit:{uuid:e.unitUuid,name:e.unitName}}))});var u=o.get("enclosureList")?o.get("enclosureList"):(0,r.fromJS)([]),c=[];a.receivedData.jrOri.warehouseCardList.map(function(e){c.push({cardUuid:e.cardUuid,name:e.code+" "+e.name,warehouseStatus:e.warehouseStatus})}),t=t.setIn(["StockTemp","oriUuid"],o.get("oriUuid")).setIn(["StockTemp","jrUuid"],o.get("jrUuid")).setIn(["StockTemp","jrIndex"],o.get("jrIndex")).setIn(["StockTemp","oriState"],o.get("oriState")).setIn(["StockTemp","chooseWareHouseCardList"],(0,r.fromJS)(c)).setIn(["StockTemp","enclosureList"],u).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName).setIn(["StockTemp","oriState"],"STATE_CHDB").setIn(["StockTemp","stockCardList"],(0,r.fromJS)(l)).setIn(["StockTemp","beCertificate"],a.receivedData.jrOri.beCertificate);var d=[];o.getIn(["stockWeakList"]).map(function(e){d.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid"),quantity:e.get("quantity"),quantityAmount:e.get("quantityAmount")})}),t=t.setIn(["StockTemp","costTransferList"],o.getIn(["stockWeakList"])).setIn(["StockTemp","canModifyList"],o.getIn(["stockWeakList"])).setIn(["StockTemp","stockCardUuidList"],(0,r.fromJS)(d)).setIn(["StockTemp","categoryUuid"],a.receivedData.category.uuid)}else t=(t=t.setIn(["StockTemp","oriUuid"],"").setIn(["StockTemp","oriState"],o.get("oriState")).setIn(["StockTemp","carryoverAmount"],"").setIn(["StockTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["StockTemp","stockCardList"],(0,r.fromJS)([]))).setIn(["StockTemp","costTransferList"],(0,r.fromJS)([e]));return t}),c(e,o.INVENTORY_BALANCE_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=a.item,o=s.get("BalanceTemp").toJS(),l=(0,r.fromJS)(n({},o,a.receivedData.category,a.receivedData.jrOri));l.get("jrState");if(t=s.setIn(["views","insertOrModify"],a.insertOrModify).setIn(["BalanceTemp","canUseWarehouse"],e.get("canUseWarehouse")).setIn(["BalanceTemp","oriAbstract"],l.get("oriAbstract")).setIn(["BalanceTemp","categoryUuid"],l.get("categoryUuid")).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName),"modify"===a.insertOrModify||a.disabledChange){var u=[],c=[];a.receivedData.jrOri.stockCardList&&a.receivedData.jrOri.stockCardList.map(function(e,t){c.push(e.cardUuid),u.push(n({},e,{allUnit:{uuid:e.unitUuid,name:e.unitName},price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4),afterAmount:(0,i.numberCalculate)(e.beforeAmount,e.amount),afterQuantity:(0,i.numberCalculate)(e.beforeQuantity,e.quantity,4,"add",4),beforePrice:(0,i.numberCalculate)(e.beforeAmount,e.beforeQuantity,4,"divide",4),afterPrice:(0,i.numberCalculate)((0,i.numberCalculate)(e.beforeAmount,e.amount),(0,i.numberCalculate)(e.beforeQuantity,e.quantity,4,"add",4),4,"divide",4),warehouseCardName:e.warehouseCardName}))});var d=l.get("enclosureList")?l.get("enclosureList"):(0,r.fromJS)([]);t=t.setIn(["BalanceTemp","oriUuid"],l.get("oriUuid")).setIn(["BalanceTemp","jrUuid"],l.get("jrUuid")).setIn(["BalanceTemp","jrIndex"],l.get("jrIndex")).setIn(["BalanceTemp","oriState"],l.get("jrState")).setIn(["BalanceTemp","chooseStockCard"],(0,r.fromJS)({})).setIn(["BalanceTemp","enclosureList"],d).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["BalanceTemp","stockCardList"],(0,r.fromJS)(u)).setIn(["BalanceTemp","oriStockList"],(0,r.fromJS)(u)).setIn(["BalanceTemp","oriStockCardList"],(0,r.fromJS)(c)).setIn(["BalanceTemp","oriWarehouseCardList"],(0,r.fromJS)([])).setIn(["BalanceTemp","categoryUuid"],a.receivedData.category.uuid).setIn(["BalanceTemp","beCertificate"],a.receivedData.jrOri.beCertificate)}else t=t.setIn(["BalanceTemp","oriUuid"],"").setIn(["BalanceTemp","oriState"],l.get("oriState")).setIn(["BalanceTemp","carryoverAmount"],"").setIn(["BalanceTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["BalanceTemp","stockCardList"],(0,r.fromJS)([]));return t}),c(e,o.TAX_TRANSTER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=a.item,i=s.get("TaxTransferTemp").toJS(),o=(0,r.fromJS)(n({},i,a.receivedData.category,a.receivedData.jrOri)),l=a.receivedData.jrOri.stockCardList;if(t=s.setIn(["views","insertOrModify"],a.insertOrModify).setIn(["TaxTransferTemp","canUseWarehouse"],e.get("canUseWarehouse")).setIn(["views","categoryMessage"],(0,r.fromJS)(a.receivedData.category)).setIn(["views","categoryMessage","categoryType"],a.receivedData.category.relationCategoryType).setIn(["views","projectRange"],o.get("projectRange")).setIn(["TaxTransferTemp","oriAbstract"],o.get("oriAbstract")).setIn(["TaxTransferTemp","dealTypeUuid"],o.get("relationCategoryUuid")).setIn(["TaxTransferTemp","categoryName"],o.get("categoryName")).setIn(["TaxTransferTemp","dealTypeName"],o.get("relationCategoryName")).setIn(["TaxTransferTemp","beCertificate"],a.receivedData.jrOri.beCertificate).setIn(["TaxTransferTemp","stockCardList"],(0,r.fromJS)(l)).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName),l&&l.map(function(e,a){t=(t=t.setIn(["TaxTransferTemp","stockCardList",a,"allUnit"],(0,r.fromJS)(e.unit))).setIn(["TaxTransferTemp","stockCardList",a,"unitCardName"],e.unit?e.unit.name:"")}),"modify"===a.insertOrModify||a.disabledChange){var u=o.get("enclosureList")?o.get("enclosureList"):(0,r.fromJS)([]);t=t.setIn(["TaxTransferTemp","oriUuid"],o.get("oriUuid")).setIn(["TaxTransferTemp","jrIndex"],o.get("jrIndex")).setIn(["TaxTransferTemp","oriState"],o.get("oriState")).setIn(["TaxTransferTemp","projectCard"],o.getIn(["projectCardList",0])?o.getIn(["projectCardList",0]):(0,r.fromJS)({})).setIn(["TaxTransferTemp","usedProject"],o.get("usedProject")).setIn(["TaxTransferTemp","amount"],o.get("amount")).setIn(["TaxTransferTemp","propertyCarryover"],o.get("propertyCarryover")).setIn(["TaxTransferTemp","propertyCost"],o.get("propertyCost")).setIn(["TaxTransferTemp","enclosureList"],u).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))}else t=(t=t.setIn(["TaxTransferTemp","oriUuid"],"").setIn(["TaxTransferTemp","oriState"],o.get("oriState")).setIn(["TaxTransferTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")]))).setIn(["TaxTransferTemp","taxTransferList"],(0,r.fromJS)([e]));return t}),c(e,o.STOCK_BUILDUP_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=a.item,o=s.get("StockBuildUpTemp").toJS(),l=(0,r.fromJS)(n({},o,a.receivedData.category,a.receivedData.jrOri)),u=l.get("oriState"),c=l.get("enclosureList")?l.get("enclosureList"):(0,r.fromJS)([]);if(t=s.setIn(["views","insertOrModify"],a.insertOrModify).setIn(["StockBuildUpTemp","oriAbstract"],l.get("oriAbstract")).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName),"modify"===a.insertOrModify||a.disabledChange){var d=[],f=[],m=[],g=[];"STATE_CHZZ_ZZCX"===u?(a.receivedData.jrOri.stockCardList&&a.receivedData.jrOri.stockCardList.map(function(e,t){var a=1;e.unit&&(e.unit.unitUuid===e.unitUuid?a=e.unit.basicUnitQuantity?e.unit.basicUnitQuantity:1:e.unit.unitList&&e.unit.unitList.map(function(t){t.uuid===e.unitUuid&&(a=t.basicUnitQuantity?t.basicUnitQuantity:1)})),m.push(e.cardUuid+"+"+e.warehouseCardUuid),d.push(n({},e,{price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4),basicUnitQuantity:a}))}),a.receivedData.jrOri.stockCardOtherList&&a.receivedData.jrOri.stockCardOtherList.map(function(e,t){g.push(e.cardUuid+"+"+e.warehouseCardUuid);var a=1;e.unit&&(e.unit.unitUuid===e.unitUuid?a=e.unit.basicUnitQuantity?e.unit.basicUnitQuantity:1:e.unit.unitList&&e.unit.unitList.map(function(t){t.uuid===e.unitUuid&&(a=t.basicUnitQuantity?t.basicUnitQuantity:1)})),f.push(n({},e,{basicUnitQuantity:a,price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4)}))}),t=t.setIn(["StockBuildUpTemp","stockCardList"],(0,r.fromJS)(d)).setIn(["StockBuildUpTemp","stockCardOtherList"],(0,r.fromJS)(f)).setIn(["StockBuildUpTemp","oriStockCardList"],(0,r.fromJS)(m)).setIn(["StockBuildUpTemp","oriStockCardOtherList"],(0,r.fromJS)(g))):(d=a.receivedData.jrOri.stockCardList&&a.receivedData.jrOri.stockCardList.map(function(e,t){return n({},e,{materialList:e.childCardList&&e.childCardList.map(function(a){m.push(t+"+"+e.cardUuid+"+"+e.warehouseCardUuid);var r=1;return a.unit&&(a.unit.unitUuid===a.unitUuid?r=a.unit.basicUnitQuantity?a.unit.basicUnitQuantity:1:a.unit.unitList&&a.unit.unitList.map(function(e){e.uuid===a.unitUuid&&(r=e.basicUnitQuantity?e.basicUnitQuantity:1)})),n({},a,{materialUuid:a.cardUuid,isOpenQuantity:a.isOpenedQuantity,basicUnitQuantity:r})})||[],uuid:e.cardUuid,productUuid:e.cardUuid,curQuantity:e.quantity})})||[],t=t.setIn(["StockBuildUpTemp","assemblySheet"],(0,r.fromJS)(d)).setIn(["StockBuildUpTemp","oriStockCardList"],(0,r.fromJS)(m))),t=t.setIn(["StockBuildUpTemp","oriUuid"],l.get("oriUuid")).setIn(["StockBuildUpTemp","jrUuid"],l.get("jrUuid")).setIn(["StockBuildUpTemp","jrIndex"],l.get("jrIndex")).setIn(["StockBuildUpTemp","oriState"],l.get("oriState")).setIn(["StockBuildUpTemp","beCertificate"],l.get("beCertificate")).setIn(["StockBuildUpTemp","enclosureList"],c).setIn(["StockBuildUpTemp","categoryUuid"],a.receivedData.category.uuid).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid"))}else t=t.setIn(["StockBuildUpTemp","oriUuid"],"").setIn(["StockBuildUpTemp","oriState"],l.get("oriState")).setIn(["StockBuildUpTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["stockCardOtherList","stockCardList"],(0,r.fromJS)([])).setIn(["StockBuildUpTemp","oriStockCardList"],(0,r.fromJS)([])).setIn(["StockBuildUpTemp","oriStockCardOtherList"],(0,r.fromJS)([]));return t}),c(e,o.STOCK_INTO_PROJECT_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=a.item,o=s.get("StockIntoProjectTemp").toJS(),l=(0,r.fromJS)(n({},o,a.receivedData.category,a.receivedData.jrOri));if(t=s.setIn(["views","insertOrModify"],a.insertOrModify).setIn(["StockIntoProjectTemp","oriAbstract"],l.get("oriAbstract")).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName),"modify"===a.insertOrModify||a.disabledChange){var u=[],c=[];a.receivedData.jrOri.stockCardList&&a.receivedData.jrOri.stockCardList.map(function(e,t){c.push(e.cardUuid+"+"+e.warehouseCardUuid),u.push(n({},e,{price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4)}))});var d=l.get("enclosureList")?l.get("enclosureList"):(0,r.fromJS)([]);t=t.setIn(["StockIntoProjectTemp","oriUuid"],l.get("oriUuid")).setIn(["StockIntoProjectTemp","jrUuid"],l.get("jrUuid")).setIn(["StockIntoProjectTemp","jrIndex"],l.get("jrIndex")).setIn(["StockIntoProjectTemp","oriState"],l.get("oriState")).setIn(["StockIntoProjectTemp","beCertificate"],l.get("beCertificate")).setIn(["StockIntoProjectTemp","enclosureList"],d).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["StockIntoProjectTemp","stockCardList"],(0,r.fromJS)(u)).setIn(["StockIntoProjectTemp","oriStockCardList"],(0,r.fromJS)(c)).setIn(["StockIntoProjectTemp","projectCard"],(0,r.fromJS)(a.receivedData.jrOri.projectCardList[0]))}else t=t.setIn(["StockIntoProjectTemp","oriUuid"],"").setIn(["StockIntoProjectTemp","oriState"],l.get("oriState")).setIn(["StockIntoProjectTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["stockCardOtherList","stockCardList"],(0,r.fromJS)([])).setIn(["StockIntoProjectTemp","oriStockCardList"],(0,r.fromJS)([])).setIn(["StockIntoProjectTemp","oriStockCardOtherList"],(0,r.fromJS)([]));return t}),c(e,o.PROJECT_CARROVER_FROM_SEARCH_JUMP_TO_LRLS,function(){var e=a.item,o=s.get("ProjectCarryoverTemp").toJS(),u=(0,r.fromJS)(n({},o,a.receivedData.category,a.receivedData.jrOri));if(t=s.setIn(["views","insertOrModify"],a.insertOrModify).setIn(["ProjectCarryoverTemp","oriAbstract"],u.get("oriAbstract")).setIn(["views","paymentTypeStr"],a.receivedData.jrOri.categoryFullName),"modify"===a.insertOrModify||a.disabledChange){var c=[],d=[];a.receivedData.jrOri.stockCardList&&a.receivedData.jrOri.stockCardList.map(function(e,t){d.push(e.cardUuid+"+"+e.warehouseCardUuid),c.push(n({},e,{price:(0,i.numberCalculate)(e.amount,e.quantity,4,"divide",4)}))});var f=u.get("enclosureList")?u.get("enclosureList"):(0,r.fromJS)([]);"STATE_XMJZ_XMJQ"===u.get("oriState")&&(t=t.setIn(["ProjectCarryoverTemp","carryoverList"],u.get("pendingStrongList"))),t=t.setIn(["ProjectCarryoverTemp","oriUuid"],u.get("oriUuid")).setIn(["ProjectCarryoverTemp","jrUuid"],u.get("jrUuid")).setIn(["ProjectCarryoverTemp","jrIndex"],u.get("jrIndex")).setIn(["ProjectCarryoverTemp","oriState"],u.get("oriState")).setIn(["ProjectCarryoverTemp","beCertificate"],u.get("beCertificate")).setIn(["ProjectCarryoverTemp","allHappenAmount"],u.get("allHappenAmount")).setIn(["ProjectCarryoverTemp","allStoreAmount"],u.get("allStoreAmount")).setIn(["ProjectCarryoverTemp","enclosureList"],f).setIn(["views","switchUuidList"],a.uuidList).setIn(["views","oriUuid"],e.get("oriUuid")).setIn(["ProjectCarryoverTemp","stockCardList"],(0,r.fromJS)(c)).setIn(["ProjectCarryoverTemp","oriStockCardList"],(0,r.fromJS)(d)).setIn(["ProjectCarryoverTemp","projectCard"],(0,r.fromJS)(a.receivedData.jrOri.projectCardList[0])).setIn(["ProjectCarryoverTemp","receiveAmount"],(0,r.fromJS)(a.receivedData.jrOri.amount)).setIn(["ProjectCarryoverTemp","currentAmount"],(0,r.fromJS)(a.receivedData.jrOri.currentAmount)).setIn(["ProjectCarryoverTemp","cardPages"],Math.ceil(u.get("pendingStrongList").size/l.EDIT_RUNNING_CHOOSE_TABLE)).setIn(["ProjectCarryoverTemp","currentCardPage"],1).setIn(["ProjectCarryoverTemp","pageSize"],l.EDIT_RUNNING_CHOOSE_TABLE).setIn(["ProjectCarryoverTemp","totalNumber"],u.get("pendingStrongList").size)}else t=t.setIn(["ProjectCarryoverTemp","oriUuid"],"").setIn(["ProjectCarryoverTemp","oriState"],u.get("oriState")).setIn(["ProjectCarryoverTemp","uuidList"],(0,r.fromJS)([e.get("oriUuid")])).setIn(["stockCardOtherList","stockCardList"],(0,r.fromJS)([])).setIn(["ProjectCarryoverTemp","oriStockCardList"],(0,r.fromJS)([])).setIn(["ProjectCarryoverTemp","oriStockCardOtherList"],(0,r.fromJS)([]));return t}),c(e,o.XMJZ_GET_CARRYOVER_LIST,function(){return t=t.setIn(["ProjectCarryoverTemp","carryoverList"],(0,r.fromJS)(a.receivedData.carryoverList)).setIn(["ProjectCarryoverTemp","allHappenAmount"],(0,r.fromJS)(a.receivedData.allHappenAmount)).setIn(["ProjectCarryoverTemp","allStoreAmount"],(0,r.fromJS)(a.receivedData.allStoreAmount)),"XZ_CONSTRUCTION"===a.projectProperty&&(t=t.setIn(["ProjectCarryoverTemp","cardPages"],Math.ceil(a.receivedData.carryoverList.length/l.EDIT_RUNNING_CHOOSE_TABLE)).setIn(["ProjectCarryoverTemp","currentCardPage"],1).setIn(["ProjectCarryoverTemp","pageSize"],l.EDIT_RUNNING_CHOOSE_TABLE).setIn(["ProjectCarryoverTemp","totalNumber"],a.receivedData.carryoverList.length).setIn(["ProjectCarryoverTemp","receiveAmount"],a.receivedData.allHappenAmount).setIn(["ProjectCarryoverTemp","currentAmount"],a.receivedData.allStoreAmount)),t}),c(e,o.CHANGE_CALCULATE_COMMON_STRING,function(){return a.placeArr&&(t=t.setIn(a.placeArr,a.value)),a.place&&(t=t.set(a.place,a.value)),t}),c(e,o.CHANGE_CALCULATE_ENCLOSURE_LIST,function(){var e=[];return t.getIn([a.place,"enclosureList"]).map(function(t){e.push(t)}),a.imgArr.forEach(function(t){e.push(t)}),t=t.setIn([a.place,"enclosureList"],(0,r.fromJS)(e)).setIn([a.place,"enclosureCountUser"],e.length)}),c(e,o.DELETE_CALCULATE_UPLOAD_FJ_URL,function(){var e=[];return t.getIn([a.place,"needDeleteUrl"]).map(function(t){e.push(t)}),t.getIn([a.place,"enclosureList"]).map(function(n,r){r==a.index&&(e.push(t.getIn([a.place,"enclosureList",r]).set("beDelete",!0)),t=t.deleteIn([a.place,"enclosureList",r]))}),t=t.setIn([a.place,"needDeleteUrl"],(0,r.fromJS)(e)).setIn([a.place,"enclosureCountUser"],t.getIn([a.place,"enclosureList"]).size)}),c(e,o.GET_CAL_LABEL_FETCH,function(){return t=t.setIn([a.setPlace,"label"],(0,r.fromJS)(a.receivedData.data)).set("tagModal",!0)}),c(e,o.CHANGE_CAL_TAG_NAME,function(){return t.getIn([a.setPlace,"enclosureList"]).map(function(e,n){n==a.index&&(t=t.setIn([a.setPlace,"enclosureList",n,"label"],a.value))}),t=t.set("tagModal",!1)}),c(e,o.GET_CALCULATE_DEAL_TYPE_CATEGORY,function(){return t=t.setIn([a.temp,"dealTypeList",0,"childList"],(0,r.fromJS)(a.receivedData[0].childList))}),c(e,o.EDIT_CALCULATE_GAIN_OR_LOSS,function(){var e=a.place,n=a.diff,r=a.deletePlace;return t.setIn(e,n).deleteIn(r,n)}),c(e,o.EDIT_CALCULATE_CQZC_GAIN_OR_LOSS,function(){return t.setIn(a.place,a.diff)}),c(e,o.CLEAR_FILTER_CONDITION,function(){return t.setIn(["SfglTemp","categoryNameAll"],(0,r.fromJS)([])).setIn(["SfglTemp","categoryUuidList"],(0,r.fromJS)([])).setIn(["SfglTemp","categoryNameList"],(0,r.fromJS)([])).setIn(["SfglTemp","chooseWriteOffType"],!0)}),c(e,o.GET_PAYMANAGE_LIST,function(){var e=a.receivedData.pendingManageList,n=a.receivedData.writeOffTypeList,o=a.receivedData.writeOffType?a.receivedData.writeOffType:n.length?n[0]:t.getIn(["SfglTemp","writeOffType"]);if(t=t.setIn(["SfglTemp","detail"],(0,r.fromJS)(e)).setIn(["SfglTemp","cardPages"],a.receivedData.pages).setIn(["SfglTemp","currentCardPage"],a.receivedData.currentPage).setIn(["SfglTemp","debitTotal"],a.receivedData.debitTotal).setIn(["SfglTemp","creditTotal"],a.receivedData.creditTotal).setIn(["SfglTemp","totalNumber"],a.receivedData.totalNumber).setIn(["SfglTemp","condition"],a.condition).setIn(["SfglTemp","writeOffType"],o).setIn(["SfglTemp","beginDate"],a.begin).setIn(["SfglTemp","endDate"],a.end),a.needWriteOffTypeList&&(t=t.setIn(["SfglTemp","writeOffTypeList"],(0,r.fromJS)(n))),a.fromPage){var l=[],u=t.getIn(["views","selectItem"]).toJS();e.map(function(e,t){u.map(function(a){e.uuid===a.uuid&&l.push({index:t,item:a})})}),l.map(function(e){t=t.setIn(["SfglTemp","detail",e.index],(0,r.fromJS)(e.item))})}else t=t.setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["views","selectItem"],(0,r.fromJS)([])),t=""!==a.receivedData.writeOffType?(t=t.setIn(["SfglTemp","handlingAmount"],0)).setIn(["views","totalAmount"],(0,i.numberCalculate)(a.receivedData.debitTotal,a.receivedData.creditTotal,2,"subtract")):t.setIn(["SfglTemp","handlingAmount"],"").setIn(["views","totalAmount"],0);return t}),c(e,o.ITIT_PAYMANAGE_LIST,function(){return(t=t.setIn(["SfglTemp","detail"],(0,r.fromJS)([])).setIn(["SfglTemp","debitTotal"],0).setIn(["SfglTemp","creditTotal"],0)).setIn(["views","selectList"],(0,r.fromJS)([])).setIn(["views","indexList"],(0,r.fromJS)([])).setIn(["views","totalAmount"],0).setIn(["views","selectItem"],(0,r.fromJS)([]))}),c(e,o.INIT_WRITE_OFF_TYPE,function(){var e=t.getIn(["SfglTemp","writeOffTypeList"]);e.size&&e.get(0);return t=t.setIn(["SfglTemp","showDKModal"],!1).setIn(["SfglTemp","chooseWriteOffType"],!1)}),c(e,o.EDITRUNNING_ITEM_CHECKBOX_CHECK,function(){var e=t.getIn(["views","selectList"]),i=t.getIn(["views","selectItem"]);if(a.checked){var o=e.splice(e.findIndex(function(e){return e===a.item.get("uuid")}),1),l=i.filter(function(e){return e.get("uuid")!==a.item.get("uuid")});return t.setIn(["views","selectList"],o).setIn(["views","selectItem"],l)}var u=e.push(a.item.get("uuid")),c=i.push((0,r.fromJS)(n({},a.item.toJS(),{handleAmount:a.item.get("amount")})));return t.setIn(["views","selectList"],u).setIn(["views","selectItem"],(0,r.fromJS)(c))}),c(e,o.EDITRUNNING_ITEM_CHECKBOX_CHECK_ALL,function(){if(a.selectAll){var e=[];a.list.map(function(t){return e.push(t.get("uuid"))});var i=t.getIn(["views","selectList"]).toJS(),o=t.getIn(["views","selectItem"]);return t.setIn(["views","selectList"],(0,r.fromJS)(function(e,t){var a=new Set(e),n=new Set(t),r=[],i=!0,o=!1,l=void 0;try{for(var u,c=a[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s=u.value;n.has(s)||r.push(s)}}catch(e){o=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw l}}return r}(i,e))).setIn(["views","selectItem"],o.filter(function(t){return-1===e.indexOf(t.get("uuid"))}))}var l=a.list,u=t.getIn(["views","selectList"]).toJS(),c=t.getIn(["views","selectItem"]).toJS();return l&&l.size&&l.forEach(function(e,t){-1===u.indexOf(e.get("uuid"))&&(u.push(e.get("uuid")),c.push(n({},e.toJS(),{handleAmount:e.get("amount")})))}),t.setIn(["views","selectList"],(0,r.fromJS)(u)).setIn(["views","selectItem"],(0,r.fromJS)(c))}),c(e,o.COMMON_CHARGE_ITEM_CHECKBOX_SELECT,function(){var e=t.getIn(["flags","selectList"]),n=t.getIn(["flags","selectItem"]);if(a.checked){var i=e.splice(e.findIndex(function(e){return e===a.uuid}),1),o=n.splice(e.findIndex(function(e){return e.uuid===a.uuid}),1);return t.setIn(["flags","selectList"],i).setIn(["flags","selectItem"],(0,r.fromJS)(o))}var l=e.push(a.uuid),u=n.push((0,r.fromJS)({uuid:a.uuid,name:a.name,code:a.code}));return t.setIn(["flags","selectList"],l).setIn(["flags","selectItem"],(0,r.fromJS)(u))}),c(e,o.SAVE_AND_NEW_COMMON_CHARGE,function(){if(a.saveAndNew){var e=s.get("CommonChargeTemp");return t.set("CommonChargeTemp",e).set("enclosureList",(0,r.fromJS)([])).set("label",(0,r.fromJS)([])).set("needDeleteUrl",(0,r.fromJS)([]))}return"insert"===a.insertOrModify&&(t=t.setIn(["commonChargeTemp","oriUuid"],a.oriUuid).setIn(["commonChargeTemp","jrNumber"],a.jrNumber)),t}),c(e,o.GET_CANUSE_WAREHOUSE_CARD_LIST,function(){return t=t.setIn([a.temp,"wareHouseCardList"],(0,r.fromJS)(a.receivedData)).setIn([a.temp,"canUseWarehouse"],(0,r.fromJS)(a.canUseWarehouse))}),c(e,o.CHANGE_CANUSE_STOCK_CARD_LIST,function(){return a.cardPageObj&&(t=t.setIn(["commonCardObj","cardPageObj"],(0,r.fromJS)(a.cardPageObj))),t=t.setIn([a.temp,"allStockCardList"],(0,r.fromJS)(a.receivedData)).setIn([a.temp,"canUseWarehouse"],a.canUseWarehouse).setIn(["commonCardObj","thingsList"],(0,r.fromJS)(a.receivedData))}),c(e,o.CHANGE_CANUSE_WAREHOUSE_CARD_LIST,function(){var e=t.getIn(["StockTemp","chooseWareHouseCardList"]),n=-1;return e.map(function(e,t){e.get("warehouseStatus")===a.warehouseStatus&&(n=t)}),t=t.setIn(["StockTemp","chooseWareHouseCardList",n,"cardUuid"],a.uuid).setIn(["StockTemp","chooseWareHouseCardList",n,"name"],a.name)}),c(e,o.CHANGE_ITEM_CHECKBOX_CHECKED,function(){var e=t.getIn(["commonCardObj","selectList"]),i=t.getIn(["commonCardObj","selectItem"]),o=a.item,l=a.isAssembly?o.productUuid:o.cardUuid?o.cardUuid:o.uuid;if(!a.checked&&-1===e.findIndex(function(e){return e===l})){var u=o.materialList?o.materialList:[],c=u.map(function(e){var t=1;return e.unitList&&e.unitList.map(function(a){a.uuid===e.unitUuid&&(t=a.basicUnitQuantity?a.basicUnitQuantity:1)}),n({},e,{basicUnitQuantity:t})}),s=e.push(l),d=i.push((0,r.fromJS)(n({},o,{index:a.index,uuid:l,allUnit:o.unit?o.unit:"",unitUuid:o.unitUuid?o.unitUuid:o.unit?o.unit.unitList.length?"":o.unit.uuid?o.unit.uuid:"":"",unitName:o.unitName?o.unitName:o.unit?o.unit.unitList.length?"":o.unit.name?o.unit.name:"":"",materialList:c,oriMaterialList:c||[],quantity:o.quantity?o.quantity:"",afterQuantity:o.afterQuantity?o.afterQuantity:""})));return t.setIn(["commonCardObj","selectList"],s).setIn(["commonCardObj","selectItem"],(0,r.fromJS)(d))}if(a.checked){var f=e.splice(e.findIndex(function(e){return e===l}),1),m=i.splice(e.findIndex(function(e){return e===l}),1);return t.setIn(["commonCardObj","selectList"],f).setIn(["commonCardObj","selectItem"],(0,r.fromJS)(m))}return t}),c(e,o.SELECT_EDIT_CBJZ_ITEM_ALL,function(){return t.setIn(["CostTransferTemp","uuidList"],(0,r.fromJS)(a.uuidList)).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(a.selectStockItem)).setIn(["views","selectList"],(0,r.fromJS)(a.selectList)).setIn(["views","selectItem"],a.newSelectItem)}),c(e,o.GET_COST_CARRYOVER_CANUSE_WAREHOUSE_CARD,function(){return t.setIn(["CostTransferTemp","stockCardList",a.index,"warehouseCardName"],a.changeWareHouseCard.wareHouseName).setIn(["CostTransferTemp","stockCardList",a.index,"warehouseCardUuid"],a.changeWareHouseCard.uuid).setIn(["CostTransferTemp","stockCardList",a.index,"uniformUuid"],a.changeWareHouseCard.uniformUuid)}),c(e,o.CLEAR_BALANCETEMP,function(){if("STATE_CHYE_CH"===a.oriState){t=t.setIn(["BalanceTemp","wareHouseList"],(0,r.fromJS)([{canUse:!0,code:"",isUniform:!0,name:"",uniformUuid:"",cardUuid:""}]))}else t=t.setIn(["BalanceTemp","wareHouseList"],(0,r.fromJS)([]));return t.setIn(["BalanceTemp","stockCardList"],(0,r.fromJS)([{}])).setIn(["BalanceTemp","chooseWareHouseCard"],(0,r.fromJS)({cardUuid:"",name:""})).setIn(["BalanceTemp","chooseStockCard"],(0,r.fromJS)({cardUuid:"",name:"",isOpenedQuantity:!1,isUniformPrice:!1}))}),c(e,o.GET_MESSAGE_OF_CATEGORY,function(){return t.setIn(["views","categoryMessage"],(0,r.fromJS)(a.message))}),c(e,o.AFTER_GET_JXSE_STOCK_LIST,function(){var e=t.getIn(["TaxTransferTemp","uuidList"]);if(t=t.setIn([a.temp,a.ListName],(0,r.fromJS)(a.receivedData.result)),"TaxTransferTemp"===a.temp){var n=[],i=[];a.receivedData.result.map(function(t){e.indexOf(t.jrJvUuid)>-1&&(n.push(t.jrJvUuid),i.push({uuid:t.stockCardUuid,amount:t.amount,onlyId:t.jrJvUuid,quantity:t.quantity,unitCardName:t.unitCardName,number:t.number,quantityAmount:t.quantityAmount}))}),t=t.setIn([a.temp,"uuidList"],(0,r.fromJS)(n)).setIn([a.temp,"stockCardUuidList"],(0,r.fromJS)(i))}else t=t.setIn([a.temp,"uuidList"],(0,r.fromJS)([])).setIn([a.temp,"stockCardUuidList"],(0,r.fromJS)([]));return t}),c(e,o.AFTER_CALCULATE_INVENTORY_IMPORT,function(){if(t=a.receivedData.data?t.setIn(["views","iframeload"],!0).setIn(["views","acmessage"],(0,r.fromJS)(a.receivedData.message)).setIn(["views","errorList"],(0,r.fromJS)(a.receivedData.data.errorList)).setIn(["views","importKey"],a.receivedData.data.importKey).setIn(["views","importList"],(0,r.fromJS)(a.receivedData.data.importList)):t.setIn(["views","iframeload"],!0).setIn(["views","showMessageMask"],!1).setIn(["views","acmessage"],(0,r.fromJS)(a.receivedData.message)),"countStockCardList"===a.stockTemp){if(a.receivedData.data.stockList&&a.receivedData.data.stockList.length){var e=[];a.receivedData.data.stockList.forEach(function(t){t.financialInfo&&t.financialInfo.openSerial&&!t.serialList&&(t.quantity=0);var r="BalanceTemp"===a.temp?(0,i.numberCalculate)(t.quantity,t.referenceQuantity,4,"subtract",4):(0,i.numberCalculate)(t.referenceQuantity,t.quantity,4,"subtract",4);e.push(n({},t,{afterQuantity:t.quantity,quantity:r,price:t.referencePrice,amount:(0,i.numberCalculate)(t.referencePrice,r,4,"multiply"),cardUuid:t.inventoryUuid,warehouseCardUuid:t.warehouseUuid,warehouseCardName:t.warehouseName,warehouseCardCode:t.warehouseCode,expirationDate:t.expirationDateString,productionDate:t.productionDateString}))}),t=t.setIn([a.temp,a.stockTemp],(0,r.fromJS)(e))}}else if("assemblySheet"===a.stockTemp){var o=t.getIn(["StockBuildUpTemp","allStockCardList"]),l=[];a.receivedData.data.importList.forEach(function(e){var t=0;l.push(n({},e,{productUuid:e.inventoryUuid,curQuantity:e.quantity,warehouseCardUuid:e.warehouseUuid,warehouseCardName:e.warehouseName,warehouseCardCode:e.warehouseCode,expirationDate:e.expirationDateString,productionDate:e.productionDateString,materialList:e.cardDetailList.map(function(e){e.financialInfo&&e.financialInfo.openSerial&&!e.serialList&&(e.quantity=0);var a=o.find(function(t){return t.get("uuid")===e.inventoryUuid})||(0,r.fromJS)([]),l=0,u=a.get("unit"),c=u.get("unitList")||(0,r.fromJS)([]);if(u)if(e.unitUuid===u.get("uuid"))l=e.referencePrice;else{var s=c&&c.find(function(t){return t.get("uuid")===e.unitUuid}),d=s.get("basicUnitQuantity")||1;l=(0,i.numberCalculate)(e.referencePrice,d,4,"multiply",4)}var f=l>0?l:"";return t=(0,i.numberCalculate)(t,(0,i.numberCalculate)(f,e.quantity,4,"multiply")),n({},e,{quantity:e.quantity,price:f,amount:l>0?(0,i.numberCalculate)(l,e.quantity,4,"multiply"):"",isOpenQuantity:e.isOpenedQuantity,materialUuid:e.cardUuid,cardUuid:e.inventoryUuid,warehouseCardUuid:e.warehouseUuid,warehouseCardName:e.warehouseName,warehouseCardCode:e.warehouseCode,expirationDate:e.expirationDateString,productionDate:e.productionDateString})}),amount:t,price:(0,i.numberCalculate)(t,e.quantity,4,"divide",4)}))}),t=t.setIn([a.temp,a.stockTemp],(0,r.fromJS)(l))}else a.receivedData.data.importList&&a.receivedData.data.importList.length&&(t=t.setIn([a.temp,a.stockTemp],(0,r.fromJS)(a.receivedData.data.importList.map(function(e){return e.financialInfo&&e.financialInfo.openSerial&&!e.serialList&&(e.quantity=0),e.warehouseCardUuid=e.warehouseCardUuid?e.warehouseCardUuid:e.warehouseUuid?e.warehouseUuid:"",e.warehouseCardName=e.warehouseCardName?e.warehouseCardName:e.warehouseName?e.warehouseName:"",e.warehouseCardCode=e.warehouseCardCode?e.warehouseCardCode:e.warehouseCode?e.warehouseCode:"",e.cardUuid=e.inventoryUuid,e.uuid=e.inventoryUuid,e.expirationDate=e.expirationDateString,e.productionDate=e.productionDateString,e}))).setIn([a.temp,"carryoverCardList"],(0,r.fromJS)(a.receivedData.data.importList.map(function(e){return e.financialInfo&&e.financialInfo.openSerial&&!e.serialList&&(e.quantity=0),e.amount="",e.warehouseCardUuid=e.warehouseCardUuid?e.warehouseCardUuid:e.warehouseUuid?e.warehouseUuid:"",e.warehouseCardName=e.warehouseCardName?e.warehouseCardName:e.warehouseName?e.warehouseName:"",e.warehouseCardCode=e.warehouseCardCode?e.warehouseCardCode:e.warehouseCode?e.warehouseCode:"",e.cardUuid=e.inventoryUuid,e.uuid=e.inventoryUuid,e.expirationDate=e.expirationDateString,e.productionDate=e.productionDateString,e}))));return t}),c(e,o.SAVE_CALCULATE_COUNT,function(){return a.needStockCardList&&(t=t.setIn([a.temp,"stockCardList"],(0,r.fromJS)(a.stockCardList))),t=t.setIn([a.temp,"countStockCardList"],(0,r.fromJS)([])).setIn([a.temp,"chooseWareHouseCard"],(0,r.fromJS)(a.chooseWareHouseCard)).setIn(["commonCardObj","selectList"],(0,r.fromJS)([])).setIn(["commonCardObj","selectItem"],(0,r.fromJS)([])).setIn(["views","countInsert"],!0).setIn(["views","pdfInsertFirst"],!0)}),c(e,o.GET_BALANCE_UNIFORM_PRICE,function(){var e=a.receivedData;t=t.setIn([a.temp,a.stockCardTemp,a.selectIndex,"price"],e.price);var o=[];return e.priceList&&e.priceList.length&&e.priceList.map(function(t){var a=t.quantity,r=t.amount,l=(0,i.numberCalculate)((0,i.numberCalculate)(e.price,a,4,"multiply",4),r,4,"subtract");o.push(n({},t,{amount:l,oldAmount:t.amount}))}),t=t.setIn([a.temp,a.stockCardTemp,a.selectIndex,"childList"],o.length?(0,r.fromJS)(o):(0,r.fromJS)([]))}),c(e,o.GET_CANUSE_WAREHOUSE_CARD_CHILD_LIST,function(){var e=t.getIn([a.temp,a.stockCardTemp,a.selectIndex,"price"]),o=[];return a.receivedData.map(function(t){var a=t.quantity,r=t.amount,l=(0,i.numberCalculate)((0,i.numberCalculate)(e,a,4,"multiply",4),r,4,"subtract");o.push(n({},t,{amount:l,oldAmount:t.amount}))}),t=t.setIn([a.temp,a.stockCardTemp,a.selectIndex,"childList"],(0,r.fromJS)(o))}),c(e,o.GET_CANUSE_WAREHOUSE_CARD_CHILD_LIST_FROM_UNIT,function(){var e=a.receivedData,n=t.getIn([a.temp,a.stockCardTemp]),i=[];return e&&e.length&&e.map(function(e){return i.push(e.inventoryUuid)}),n&&n.size&&n.map(function(n,o){if(i.indexOf(n.get("cardUuid"))>-1){var l=i.findIndex(function(e){return e===n.get("cardUuid")});t=t.setIn([a.temp,a.stockCardTemp,o,"childList"],(0,r.fromJS)(e[l].childList)).setIn([a.temp,a.stockCardTemp,o,"price"],(0,r.fromJS)(e[l].price))}}),t}),c(e,o.SELECT_EDIT_CBJZ_ITEM,function(){return t=(t=t.setIn(["views","selectList"],a.newShowLowerList).setIn(["views","selectItem"],a.newSelectItem).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(a.selectStockItem)).setIn(["CostTransferTemp","selectStockUuidList"],(0,r.fromJS)(a.selectStockUuidList))).setIn(["CostTransferTemp","uuidList"],a.uuidList)}),c(e,o.SELECT_EDIT_CBJZ_ITEM_ALL,function(){t.getIn(["CostTransferTemp","stockCardList"]);var e=t.getIn(["CostTransferTemp","costTransferList"]),n=t.getIn(["CostTransferTemp","uuidList"]).toJS(),o=t.getIn(["CostTransferTemp","stockCardUuidList"]),l=[];if(o.map(function(e){return l.push(e.get("onlyId"))}),a.selectAll){var u=t.getIn(["views","selectList"]).toJS(),c=t.getIn(["views","selectItem"]);o=o?o.filter(function(e){if(-1===n.indexOf(e.get("onlyId")))return e}):(0,r.fromJS)([]);var s=[];e.map(function(e){return s.push(e.get("jrJvUuid"))});var d=c.filter(function(e){return-1===n.indexOf(e.get("jrJvUuid"))}),f=[],m=[];return d&&d.size&&d.map(function(e){if(f.indexOf(e.get("stockCardUuid"))>-1){var t=m.findIndex(function(t){return t.cardUuid===e.get("stockCardUuid")});m[t].quantity=(0,i.numberCalculate)(m[t].quantity,e.get("quantity"))}else f.push(e.get("stockCardUuid")),m.push({cardUuid:e.get("stockCardUuid"),quantity:e.get("quantity"),name:e.get("stockCardName"),code:e.get("stockCardCode"),amount:e.get("amount")})}),t.setIn(["CostTransferTemp","uuidList"],(0,r.fromJS)([])).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(m)).setIn(["views","selectList"],(0,r.fromJS)(function(e,t){var a=new Set(e),n=new Set(t),r=[],i=!0,o=!1,l=void 0;try{for(var u,c=a[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s=u.value;n.has(s)||r.push(s)}}catch(e){o=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw l}}return r}(u,n))).setIn(["views","selectItem"],d)}var g=[],p=o.size?o.toJS():[];e.forEach(function(e){g.push(e.get("jrJvUuid")),-1===l.indexOf(e.get("onlyId"))&&p.push({uuid:e.get("stockCardUuid"),amount:e.get("amount"),onlyId:e.get("jrJvUuid"),quantity:e.get("quantity"),unitCardName:e.get("unitCardName"),number:e.get("number"),quantityAmount:e.get("quantityAmount"),storeNumber:e.get("storeNumber")})});var C=t.getIn(["views","selectList"]).toJS(),h=t.getIn(["views","selectItem"]).toJS();e&&e.size&&e.forEach(function(e,t){-1===C.indexOf(e.get("jrJvUuid"))&&(C.push(e.get("jrJvUuid")),h.push(e.toJS()))});var y=[],E=[];return h&&h.length&&h.map(function(e){if(y.indexOf(e.stockCardUuid)>-1){var t=E.findIndex(function(t){return t.cardUuid===e.stockCardUuid});E[t].quantity=(0,i.numberCalculate)(E[t].quantity,e.quantity)}else y.push(e.stockCardUuid),E.push({cardUuid:e.stockCardUuid,quantity:e.quantity,name:e.stockCardName,code:e.stockCardCode,amount:e.amount})}),t.setIn(["CostTransferTemp","uuidList"],(0,r.fromJS)(g)).setIn(["CostTransferTemp","stockCardUuidList"],(0,r.fromJS)(p)).setIn(["views","selectList"],(0,r.fromJS)(C)).setIn(["views","selectItem"],(0,r.fromJS)(h)).setIn(["CostTransferTemp","selectStockItem"],(0,r.fromJS)(E))}),c(e,o.CALCULATE_FROM_SEARCH_JUMP_TO_JZCB,function(){return t.setIn(["views","paymentTypeStr"],"存货核算_存货成本结转")}),c(e,o.CHANGE_STOCKCARD_REFERENCE_PRICE_QUNATITY,function(){a.stockCardList;var e=a.receivedData,i=t.getIn([a.temp+"Temp",a.stockTemp]).toJS(),o=[];return e.map(function(t,a){o.push(n({},i[a],{referencePrice:e[a].price,referenceQuantity:e[a].quantity}))}),t=t.setIn([a.temp+"Temp",a.stockTemp,a.index],(0,r.fromJS)(o))}),c(e,o.JZJZSY_CHANGE_FILTER_MODAL_CHECKED,function(){var e=t.getIn(["JzjzsyTemp","curSelectProjectUuid"]),n=e;return a.isAll?(a.allList.map(function(e,t){n=a.checked?n.splice(n.findIndex(function(t){return t===e.get("cardUuid")}),1):-1===n.indexOf(e.get("cardUuid"))?n.push(e.get("cardUuid")):n}),t=t.setIn(["JzjzsyTemp","curSelectProjectUuid"],n)):(n=a.checked?n.splice(e.findIndex(function(e){return e===a.uuid}),1):-1===n.indexOf(a.uuid)?e.push(a.uuid):e,t.setIn(["JzjzsyTemp","curSelectProjectUuid"],n))}),e)[a.type]||function(){return t})()};var r=a(18),i=a(22),o=u(a(183)),l=u(a(27));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s=(0,r.fromJS)({views:{selectI:0,dealType:"",projectList:[],projectRange:[],propertyCostList:[],dealCategory:[],beProject:!1,costStockList:[],selectList:[],indexList:[],totalAmount:0,SwitchUuidList:[],oriUuid:"",modalName:"",selectItem:[],chooseNumber:"-1",encodeType:"",saveWay:!1,jrIndex:"",categoryMessage:{beProject:!1,usedProject:!1,propertyCostList:[]},paymentTypeStr:"内部转账",importList:[],errorList:[],stockTitleName:"存货",warehouseTreeList:[],countInsert:!0,pdfInsertFirst:!0,isCount:!1,singleUrl:"",hasNumber:!0,isProduct:!1,isAssembly:!1},CostTransferTemp:{uuidList:[],dealTypeName:"",stockCardUuidList:[],categoryUuid:"",dealTypeUuid:"",costStockList:[],carryoverCategory:[],oriState:"STATE_YYSR_XS",oriAbstract:"销售存货结转成本",carryoverAmount:"",categoryName:"",costTransferList:[],canModifyList:[],stockList:[],stockCardList:[{}],categoryNameAll:[],cardUuid:"",runningCategory:[{childList:[]}],beProject:!1,usedProject:!0,projectCard:[{cardUuid:"",name:"",code:""}],canUseWarehouse:!1,propertyCost:"",wareHouseCardList:[],cardPages:1,currentCardPage:1,modifycurrentPage:1,pageSize:20,totalNumber:1,categoryUuidList:[],storeUuidList:[],condition:"",warehouseOptionList:[],wareHouseNameAll:[],wareHouseNameList:[],stockNameAll:[],stockNameList:[],stockUuidList:[],countStockCardList:[],chooseWareHouseCard:{cardUuid:"",name:"全部",isUniform:!1},oldChooseWareHouseCard:[],countWarehouseList:[],selectStockItem:[],selectStockUuidList:[]},InvoiceAuthTemp:{oriUuid:"",uuidList:[],amount:"",billAuthType:"BILL_AUTH_TYPE_CG",oriAbstract:"增值税专用发票认证",oriState:"STATE_FPRZ_CG",categoryUuid:"",invoiceAuthList:[]},InvoicingTemp:{oriUuid:"",uuidList:[],amount:"",billMakeOutType:"BILL_MAKE_OUT_TYPE_XS",oriAbstract:"收入开具发票",oriState:"STATE_KJFP_XS",categoryUuid:"",invoicingList:[],isInvoicingAmount:!0},TransferOutTemp:{uuidList:[],turnOutBusinessUuid:"",oriUuid:"",oriState:"STATE_ZCWJZZS",oriAbstract:"转出未交增值税",handleMonth:"",transferOutObj:{jrJvVatDtoList:[],inputAmount:"",inputCount:"",outputAmount:"",outputCount:""}},InternalTransferTemp:{oriUuid:"",oriState:"STATE_ZZ",oriAbstract:"内部转账",amount:"",categoryType:"",categoryUuid:"",fromAccountUuid:"",toAccountUuid:"",accountChildList:[],poundage:{needPoundage:!1},poundageCurrentCardList:[],poundageProjectCardList:[],accountProjectRange:[],accountContactsRange:[],accountContactsRangeList:[],accountProjectList:[],chooseFirstWay:!0,poundageRate:""},DepreciationTemp:{oriUuid:"",oriState:"STATE_CQZC_ZJTX",oriAbstract:"资产折旧摊销",amount:"",categoryType:"",categoryUuid:"",assetType:"XZ_ZJTX",dealTypeList:[{childList:[]}],usedProject:!0,projectCard:{name:"",code:"",cardUuid:"",amount:""},propertyCost:""},CommonChargeTemp:{projectCardList:[],paymentList:[],oriAbstract:"项目分摊",oriState:"STATE_GGFYFT",projectList:[],propertyCostName:""},CqzcTemp:{uuidList:[],projectRange:[],projectList:[],dealTypeList:[{childList:[]}],assets:{depreciationAmount:"",originalAssetsAmount:""},projectCard:[{cardUuid:"",name:"",code:""}],oriAbstract:"长期资产处置损益",oriState:"STATE_CQZC_JZSY",businessList:[],usedProject:!0,categoryName:"",diffAmount:""},JzjzsyTemp:{oriState:"STATE_XMJZ_XMJQ",amount:"",oriAbstract:"结转本期损益",pendingProfitAndLossCarryoverList:[],cardPages:1,currentPage:1,pageSize:20,chooseProjectCard:[],curSelectProjectUuid:[],projectCardList:[],chooseJrCategoryCard:[],curSelectJrCategoryUuid:[],jrCategoryList:[],modalName:""},SfglTemp:{isModeRunning:!1,paymentList:[],detail:[],debitTotal:0,creditTotal:0,runningIndex:0,categoryList:[{uuid:"",name:"",childList:[]}],handlingAmount:"",condition:"",managerCategoryList:[],oriUuid:"",oriAbstract:"核销账款",contactsCardRange:{name:"",code:""},stockCardList:{name:"",code:""},categoryUuid:"",categoryName:"",categoryUuidList:[],categoryNameList:[""],categoryNameAll:[],cardUuidList:[],cardNameList:[""],cardNameAll:[],handleTypeCard:!1,cardUuid:"",usedCard:{code:"",name:""},beMoed:!1,moedAmount:"",cardPages:1,currentCardPage:1,modifycurrentPage:1,pageSize:20,totalNumber:1,needUsedPoundage:!1,poundageCurrentCardList:[],poundageProjectCardList:[],accountProjectRange:[],accountContactsRange:[],accountContactsRangeList:[],accountProjectList:[],poundage:{needPoundage:!1},writeOffType:"",writeOffTypeList:[],showDKModal:!1,chooseWriteOffType:!1,unAutomatic:!1,oriState:"",oldSelectItem:[],beginDate:"",endDate:"",usedAccounts:!1,accounts:[{},{}]},StockTemp:{oriState:"STATE_CHDB",projectCardList:[],paymentList:[],oriAbstract:"存货调拨",stockCardList:[{}],stockCardUuidList:[],wareHouseCardList:[],chooseWareHouseCardList:[{cardUuid:"",name:"",warehouseStatus:"WAREHOUSE_STATUS_FROM"},{cardUuid:"",name:"",warehouseStatus:"WAREHOUSE_STATUS_TO"}],allStockCardList:[]},BalanceTemp:{oriState:"STATE_CHYE_CK",projectCardList:[],paymentList:[],oriAbstract:"存货价值调整",canUseWarehouse:!1,stockCardList:[{}],wareHouseList:[],oriStockList:[],oriWareHouseList:[],stockCardUuidList:[],wareHouseCardUuidList:[],wareHouseCardList:[],chooseWareHouseCard:{cardUuid:"",name:"全部",isUniform:!1},chooseStockCard:{cardUuid:"",name:"",isOpenedQuantity:!1,isUniformPrice:!1},allStockCardList:[],oriStockCardList:[],oriWarehouseCardList:[],countStockCardList:[],warehouseSelectedKeys:[],countWarehouseList:[]},TaxTransferTemp:{uuidList:[],dealTypeName:"",propertyCarryover:"",stockCardUuidList:[],categoryUuid:"",oriState:"STATE_JXSEZC_FS",oriDate:(0,i.formatDate)(),oriAbstract:"进项税额转出",carryoverAmount:"",categoryName:"",taxTransferList:[],canModifyList:[],stockList:[],stockCardList:[{code:"",name:"",amount:"",cardUuid:"",warehouseCardUuid:""}],cardUuid:"",runningCategory:[{childList:[]}],wareHouseCardList:[],projectCard:{},usedProject:!0},StockBuildUpTemp:{oriDate:(0,i.formatDate)().slice(0,10),oriState:"STATE_CHZZ_ZZCX",projectCardList:[],paymentList:[],oriAbstract:"存货组装",stockCardList:[{}],stockCardOtherList:[{}],wareHouseCardList:[{}],stockCardUuidList:[],allStockCardList:[],allWareHouseCardList:[],oriStockCardList:[],oriStockCardOtherList:[],curItemIsAvailable:!0,assemblySheet:[],assemblyNumber:""},StockIntoProjectTemp:{oriState:"STATE_CHTRXM",projectCardList:[],paymentList:[],oriAbstract:"存货投入使用",stockCardList:[{}],stockCardUuidList:[],wareHouseCardList:[],allStockCardList:[],allWareHouseCardList:[],projectCard:{cardUuid:"",name:"",code:"",projectProperty:""},stockRange:[],categoryTypeObj:{}},ProjectCarryoverTemp:{oriState:"STATE_XMJZ_XMJQ",projectCardList:[],paymentList:[],oriAbstract:"项目结清",stockCardList:[{}],stockCardUuidList:[],wareHouseCardList:[],allStockCardList:[],allWareHouseCardList:[],projectCard:{cardUuid:"",name:"",code:""},carryoverList:[],stockRange:[],categoryTypeObj:{},allHappenAmount:"",allStoreAmount:"",cardPages:1,currentCardPage:1,modifycurrentPage:1,pageSize:20,totalNumber:1},commonCardObj:{memberList:[],thingsList:[],selectItem:[],selectList:[],selectedKeys:["all"+l.TREE_JOIN_STR+"1"],selectThingsList:[],showSingleModal:!1,selectI:"",modalName:"",cardPageObj:{pages:1,currentPage:1,total:1}},vcKey:0})},1400:function(e,t,a){},1403:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adjustAllRelativeCardList=t.afterEditRelativeConf=t.deleteRelativeCardList=t.saveRelativeCard=t.changeRelativeCardCategoryType=t.changeRelativeCardCategoryStatus=t.changeRelativeViewsContent=t.changeRelativeCardContent=t.beforeRelativeEditCard=t.beforeRelativeAddCard=void 0;var n=g(a(37));a(38);var r=m(a(1344)),i=g(a(52)),o=a(22),l=a(18),u=m(a(30)),c=m(a(27)),s=m(a(484)),d=m(a(172)),f=m(a(1229));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}t.beforeRelativeAddCard=function(e,t){return function(a,n){a({type:r.SWITCH_LOADING_MASK}),(0,i.default)("getIUManageCardLimitAndAc","GET","",function(n){if((0,o.showMessage)(n)){var l=void 0;(0,i.default)("getInitRelaCard","GET","",function(e){(0,o.showMessage)(e)&&(l=e.data.code,a({type:r.BEFORE_ADD_RELATIVE_CARD,data:n.data,originTags:t,code:l}))})}e(),a({type:r.SWITCH_LOADING_MASK})})}},t.beforeRelativeEditCard=function(e,t,a){return function(n){n({type:r.SWITCH_LOADING_MASK}),(0,i.default)("getIUManageOneCardInfo","GET","uuid="+e.get("uuid"),function(e){n({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)&&(n({type:r.BEFORE_EDIT_RELATIVE_CARD,data:e.data,originTags:a}),t())})}},t.changeRelativeCardContent=function(e,t){return function(a){a({type:r.CHANGE_RELATIVE_CARD_CONTENT,name:e,value:t})}},t.changeRelativeViewsContent=function(e,t){return function(a){a({type:r.CHANGE_RELATIVE_VIEWS_CONTENT,name:e,value:t})}},t.changeRelativeCardCategoryStatus=function(e,t){return function(a){(0,i.default)("getIUManageTreeByType","GET","ctgyUuid="+e.get("uuid"),function(n){(0,o.showMessage)(n)&&a({type:r.CHANGE_RELATIVE_CARD_CATEGORY_STATUS,list:n.data.resultList,item:e,value:t})})}},t.changeRelativeCardCategoryType=function(e,t){return function(a){var n=t.split(c.TREE_JOIN_STR);a({type:r.CHANGE_RELATIVE_CARD_CATEGORY_TYPE,item:e,uuid:n[0],name:n[1]})}},t.saveRelativeCard=function(e,t,a,n,c){return function(s,f){var m=f().homeState.get("allPanes"),g=f().relativeCardState.get("relativeCardTemp").toJS(),C=f().relativeCardState.getIn(["views","insertOrModify"]),h=f().relativeCardState.getIn(["views","range"]),y="",E="";m.get("ConfigPanes").find(function(e){return"往来设置"===e.get("title")})&&(y=f().relativeConfState.getIn(["views","activeTapKeyUuid"]),E=f().relativeConfState.getIn(["views","selectTypeId"]));var S=function(){if("insert"===C){(0,i.default)("saveIUManageCard","POST",JSON.stringify({psiData:g,insertFrom:y,treeFrom:E,needAutoIncrementCode:"insert"!==t,action:{editRunning:"SAVE_JR-QUICK_MANAGER-SAVE_CONTACT",relativeConfig:"MANAGER-CONTACT_SETTING-CUD_CONTACT_CARD",searchApproval:"QUERY_PROCESS-QUICK_MANAGER-SAVE_CONTACT"}[e]}),function(n){if((0,o.showMessage)(n,"show")&&(s({type:r.SAVE_RELATIVE_CARD,list:n.data.resultList,flag:t,autoIncrementCode:n.data.autoIncrementCode}),a&&a(),s(p(e)),"editRunning"===e&&h.some(function(e){return g.categoryTypeList.some(function(t){return t.ctgyUuid===e})}))){var i=n.data.resultList.find(function(e){return e.code===g.code});if(i){var u=i.uuid;s(d.changeLrAccountCommonString("ori","currentCardList",(0,l.fromJS)([{code:g.code,name:g.name,cardUuid:u}])))}}s({type:r.SWITCH_LOADING_MASK})})}else(0,i.default)("editIUManageCard","POST",JSON.stringify({psiData:g,modifyFrom:y,treeFrom:E}),function(n){if((0,o.showMessage)(n,"show")&&(s({type:r.SAVE_RELATIVE_CARD,list:n.data.resultList,flag:t,autoIncrementCode:n.data.autoIncrementCode}),a(),s(p()),"editRunning"===e&&h.some(function(e){return g.categoryTypeList.some(function(t){return t.ctgyUuid===e})}))){var i=n.data.resultList.find(function(e){return e.code===g.code});if(i){var u=i.uuid;s(d.changeLrAccountCommonString("ori","currentCardList",(0,l.fromJS)([{code:g.code,name:g.name,cardUuid:u}])))}}s({type:r.SWITCH_LOADING_MASK})})};s({type:r.SWITCH_LOADING_MASK}),(0,i.default)("adjustIUmanageCardTitleSame","POST",JSON.stringify({psiData:{name:g.name,uuid:g.uuid}}),function(e){(0,o.showMessage)(e)?e.data.repeat?(n(),s({type:r.SWITCH_LOADING_MASK}),u.Confirm({message:"卡片名称与【编码："+e.data.card.code+"】卡片重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(s({type:r.SWITCH_LOADING_MASK}),S(),c()):c()},onFail:function(e){return console.log(e)}})):S():s({type:r.SWITCH_LOADING_MASK})})}},t.deleteRelativeCardList=function(){return function(e,t){var a=t().relativeConfState.getIn(["views","activeTapKeyUuid"]),l=t().relativeConfState.getIn(["views","activeTreeKeyUuid"]),c=t().relativeConfState.getIn(["views","cardSelectList"]);u.Confirm({message:"确定删除卡片？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(e({type:r.SWITCH_LOADING_MASK}),(0,i.default)("deleteIUManageListCard","POST",JSON.stringify({deleteList:c,deleteFrom:a,treeFrom:l}),function(t){(0,o.showMessage)(t)&&(e({type:r.DELETE_RELATIVE_CARD_LIST,list:t.data.resultList,treeList:t.data.typeList}),""===t.data.error?n.default.info("删除成功"):n.default.info(t.data.error),e(p())),e({type:r.SWITCH_LOADING_MASK})}))},onFail:function(e){return console.log(e)}})}};var p=t.afterEditRelativeConf=function(e){return function(t,a){var n=a().homeState,r=n.get("allPanes");if(!0===n.getIn(["data","userInfo","sobInfo","newJr"]))"searchApproval"===e?(t(s.getApprovalRelativeCardList()),r.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&setTimeout(function(){t(s.getRelativeCardListForchangeConfig())},800)):r.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&t(s.getRelativeCardListForchangeConfig());else{var i=a().lrAccountState.get("cardTemp"),o={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[i.get("categoryType")],l=i.getIn([o,"contactsRange"]),u=i.get("runningState");l&&l.size&&t(f.getFirstContactsCardList(l,u))}}};t.adjustAllRelativeCardList=function(e){return function(t){e()}}},1404:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEditProjectConf=t.deleteProjectCardList=t.saveProjectCard=t.changeProjectCardCategoryType=t.changeProjectViewsContent=t.changeProjectCardContent=t.beforeEditProjectCard=t.changeProjectPropertyState=t.beforeProjectAddCard=void 0;var n=g(a(37));a(38);var r=m(a(1302)),i=g(a(52)),o=a(22),l=a(18),u=m(a(30)),c=m(a(27)),s=m(a(172)),d=m(a(484)),f=m(a(1317));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}t.beforeProjectAddCard=function(e,t,a,n){return function(t,a){var l="",u=u||a().projectConfState.get("originTags"),c=u.findIndex(function(e){return"损益项目"===e.get("name")});a().projectConfState.getIn(["views","activeKey"]);t({type:r.SWITCH_LOADING_MASK}),(0,i.default)("getDefaultProjectCode","GET","",function(a){(0,o.showMessage)(a)&&(l=a.data.code,(0,i.default)("getProjectTree","GET","uuid="+u.getIn([c,"uuid"]),function(a){(0,o.showMessage)(a)&&(t({type:r.BEFORE_ADD_PROJECT_CARD,data:a.data.resultList,code:l,noFresh:n}),e&&e())}))}),t({type:r.SWITCH_LOADING_MASK})}},t.changeProjectPropertyState=function(e,t){return function(a,n){var l=l||n().projectConfState.get("originTags"),u=l.findIndex(function(e){return e.get("name")===t});a({type:r.SWITCH_LOADING_MASK}),(0,i.default)("getProjectTree","GET","uuid="+l.getIn([u,"uuid"]),function(n){a({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(n)&&a({type:r.CHANGE_PROJECT_PROPERTY,data:n.data.resultList,projectProperty:e,projectPropertyName:t})})}},t.beforeEditProjectCard=function(e,t,a){return function(n){n({type:r.SWITCH_LOADING_MASK}),(0,i.default)("getProjectCardOne","GET","uuid="+e.get("uuid"),function(e){(0,o.showMessage)(e)&&(n({type:r.BEFORE_EDIT_PROJECT_CARD,data:e.data,originTags:a}),t(),n({type:r.SWITCH_LOADING_MASK}))})}},t.changeProjectCardContent=function(e,t){return function(a){a({type:r.CHANGE_PROJECT_CARD_CONTENT,name:e,value:t})}},t.changeProjectViewsContent=function(e,t){return function(a){a({type:r.CHANGE_PROJECT_VIEWS_CONTENT,name:e,value:t})}},t.changeProjectCardCategoryType=function(e){return function(t){var a=e.split(c.TREE_JOIN_STR);t({type:r.CHANGE_PROJECT_CARD_CATEGORY_TYPE,uuid:a[0],name:a[1]})}},t.saveProjectCard=function(e,t,a,n,c){return function(d,m){var g,C=m().homeState.get("allPanes"),h=m().projectCardState.get("projectCardTemp").toJS(),y=m().projectCardState.getIn(["views","insertOrModify"]),E=m().projectConfState.getIn(["views","activeTapKey"]),S=m().projectCardState.getIn(["projectCardTemp","projectPropertyName"]),T=m().projectConfState.get("originTags"),_=T.findIndex(function(e){return e.get("name")===S}),v=(T.findIndex(function(e){return e.get("name")===E}),""),b="";C.get("ConfigPanes").find(function(e){return"项目设置"===e.get("title")})&&(v=m().projectConfState.getIn(["views","activeTapKeyUuid"]),b=m().projectConfState.getIn(["views","selectTypeId"])),g=[{ctgyUuid:T.getIn([_,"uuid"]),subordinateUuid:h.selectUuid}],h.categoryTypeList=g;var L=function(){if("insert"===y){(0,i.default)("insertProjectCard","POST",JSON.stringify({psiData:h,insertFrom:v,treeFrom:b,needAutoIncrementCode:"insert"!==t,action:{editRunning:"SAVE_JR-QUICK_MANAGER-SAVE_PROJECT",projectConfig:"MANAGER-PROJECT_SETTING-CUD_CARD",searchApproval:"QUERY_PROCESS-QUICK_MANAGER-SAVE_PROJECT"}[e]}),function(n){if((0,o.showMessage)(n,"show")&&(d(f.refreshProjectList((0,l.fromJS)({name:E,uuid:v}))),d({type:r.NEW_SAVE_PROJECT_CARD,flag:t,code:n.data.autoIncrementCode}),"insert"===t&&a(),d(p(e)),"editRunning"===e)){var i=m().editRunningState.getIn(["oriTemp","newProjectRange"])||(0,l.fromJS)([]),u=[];switch(m().editRunningState.getIn(["oriTemp","categoryType"])||(0,l.fromJS)([])){case"LB_CQZC":u=n.data.resultList.filter(function(e){return"XZ_PRODUCE"!==e.projectProperty});break;default:u=n.data.resultList}var c=u.filter(function(e){return i.some(function(t){return t.get("name")===e.projectPropertyName})}).find(function(e){return e.code===h.code});c&&d(s.changeLrAccountCommonString("ori","projectCardList",(0,l.fromJS)([{code:h.code,name:h.name,cardUuid:c.uuid,projectProperty:c.projectProperty}])))}d({type:r.SWITCH_LOADING_MASK})})}else(0,i.default)("editProjectCard","POST",JSON.stringify({psiData:h,modifyFrom:v,treeFrom:b}),function(e){(0,o.showMessage)(e,"show")&&(d(f.refreshProjectList((0,l.fromJS)({name:E,uuid:v}))),a(),d(p())),d({type:r.SWITCH_LOADING_MASK})})};d({type:r.SWITCH_LOADING_MASK}),(0,i.default)("adjustProjectCardNameSame","POST",JSON.stringify({psiData:{name:h.name,uuid:h.uuid}}),function(e){(0,o.showMessage)(e)?e.data.repeat?(n(),d({type:r.SWITCH_LOADING_MASK}),u.Confirm({message:"卡片名称与【编码："+e.data.card.code+"】卡片重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(d({type:r.SWITCH_LOADING_MASK}),L(),c()):c()},onFail:function(e){return console.log(e)}})):L():d({type:r.SWITCH_LOADING_MASK})})}},t.deleteProjectCardList=function(){return function(e,t){var a=t().projectConfState.getIn(["views","activeTapKeyUuid"]),l=t().projectConfState.getIn(["views","activeTreeKeyUuid"]),c=t().projectConfState.getIn(["views","cardSelectList"]);u.Confirm({message:"确定删除卡片？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(e({type:r.SWITCH_LOADING_MASK}),(0,i.default)("deleteProjectCard","POST",JSON.stringify({deleteList:c,deleteFrom:a,treeFrom:l}),function(t){(0,o.showMessage)(t)&&(e({type:r.DELETE_PROJECT_CONF_CARD,list:t.data.resultList,treeList:t.data.typeList}),""===t.data.error?n.default.info("删除成功"):n.default.info(t.data.error),e(p())),e({type:r.SWITCH_LOADING_MASK})}))},onFail:function(e){return console.log(e)}})}};var p=t.afterEditProjectConf=function(e){return function(t,a){var n=a().homeState,r=n.get("allPanes");n.getIn(["data","userInfo","sobInfo","newJr"]);"searchApproval"===e?(t(d.getApprovalProjectCardList()),r.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&setTimeout(function(){t(d.getProjectCardListForchangeConfig())},800)):r.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&t(d.getProjectCardListForchangeConfig())}}},1405:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=y(a(129)),i=y(a(37)),o=y(a(100)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(128),a(38),a(99);var u=y(a(1)),c=a(17),s=a(18),d=(y(a(6)),a(56),a(127)),f=h(a(27)),m=(y(a(90)),a(22)),g=(a(101),y(a(1303)),y(a(1309)),y(a(2569))),p=(y(a(483)),h(a(177))),C=h(a(172));h(a(484));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var E=o.default.Search,S=(0,c.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=(e.contactsRange,e.oriState,e.categoryUuid),n=e.categoryType,r=e.oriDate;"LB_ZSKX"!==n&&"LB_ZFKX"!==n||t(C.getPaymentCardList(r,a))}},{key:"render",value:function(){var e=this.props,t=e.titleList,a=e.listTitle,n=e.pendingStrongList,o=e.modify,l=(e.stateName,e.dispatch),c=e.extraFunc,h=(e.currentCardList,e.insertOrModify),y=(e.strongList,e.oriState),S=(e.contactsRange,e.contactsList),T=(e.contactsManagement,e.cardAllList),_=e.condition,v=e.oriDate,b=e.categoryUuid,L=!(!n||!n.size)&&n.every(function(e){return e.get("beSelect")}),I=0,N=0;n&&n.forEach(function(e){e.get("beSelect")&&(I++,N+=o?Number(e.get("notHandleAmount"))+Number(e.get("handleAmount")):Number(e.get("notHandleAmount")))});var O=[];return O=(T||[]).some(function(e){return"无往来单位"===e.get("label")})?["0"]:(T||[]).map(function(e){return e.get("value").split(f.TREE_JOIN_STR)[0]}),u.default.createElement("div",{className:"accountConf-modal-list-hidden",style:{display:n.size||"STATE_ZS_TH"===y||"STATE_ZF_SH"===y?"":"none"}},u.default.createElement("div",{className:"editRunning-detail-title"},u.default.createElement("div",{className:"editRunning-detail-title-top"},"请勾选需要处理的流水："),u.default.createElement("div",{className:"editRunning-detail-title-bottom"},u.default.createElement("span",null,"已勾选流水：",I||"","条"),u.default.createElement("span",null,a,u.default.createElement("span",null,(0,m.formatMoney)(Math.abs(N)))))),u.default.createElement(d.TableAll,{className:"editRunning-table"},"STATE_ZS_TH"!==y&&"STATE_ZF_SH"!==y||"insert"!==h?null:u.default.createElement("div",{className:"zszf-table-top-select"},u.default.createElement(g.default,{combobox:!0,showSearch:!0,placeholder:"筛选往来单位...",treeData:S,value:T.toJS(),onChange:function(e){l(C.changeLrAccountCommonString("ori","cardAllList",(0,s.fromJS)(e)))}}),u.default.createElement(E,{placeholder:"搜索摘要、金额...",value:_,onSearch:function(e){l(C.getPaymentManageList(v,O,e,b))},onChange:function(e){l(C.changeLrAccountCommonString("ori","condition",e.target.value))},style:{width:150,height:32}})),u.default.createElement(d.TableTitle,{className:"editRunning-table-width",titleList:t,hasCheckbox:!0,selectAcAll:L,onClick:function(e){if(e.stopPropagation(),n.size>160)i.default.info("勾选的核销流水不能超过160条");else{n&&n.forEach(function(t,a){l(C.changeLrAccountCommonString("ori",["pendingStrongList",a,"beSelect"],e.target.checked))});var t=0;e.target.checked&&(o?n&&n.forEach(function(e,a){t+=Number(e.get("handleAmount"))+Number(e.get("notHandleAmount"))}):n&&n.forEach(function(e){return t+=Number(e.get("notHandleAmount"))})),c&&"function"==typeof c?c(t.toFixed(2)):l(C.changeLrAccountCommonString("ori","amount",Math.abs(t).toFixed(2)))}}}),u.default.createElement(d.TableBody,null,n&&n.map(function(e,t){var a=e.get("handleAmount"),s=e.get("notHandleAmount");return u.default.createElement(d.TableItem,{className:"editRunning-table-width",key:e.get("jrUuid")},u.default.createElement("li",null,u.default.createElement(r.default,{checked:e.get("beSelect"),onChange:function(e){if(I>=160)i.default.info("勾选的核销流水不能超过160条");else{l(C.changeLrAccountCommonString("ori",["pendingStrongList",t,"beSelect"],e.target.checked));var a=0;o?n&&n.forEach(function(n,r){(t===r&&e.target.checked||t!==r&&n.get("beSelect"))&&(a+=Number(n.get("handleAmount"))+Number(n.get("notHandleAmount")))}):n&&n.forEach(function(n,r){(t===r&&e.target.checked||t!==r&&n.get("beSelect"))&&(a+=Number(n.get("notHandleAmount")))}),c&&"function"==typeof c?c(a.toFixed(2)):l(C.changeLrAccountCommonString("ori","amount",Math.abs(a).toFixed(2)))}}})),u.default.createElement("li",null,e.get("oriDate")),u.default.createElement(d.TableOver,{textAlign:"left",className:"account-flowNumber",onClick:function(t){t.stopPropagation(),l(p.getPreviewRunningBusinessFetch(e,"lrls"))}},u.default.createElement("span",null,e.get("beOpened")?"":e.get("jrIndex")+" 号")),u.default.createElement("li",null,u.default.createElement("span",null,e.get("oriAbstract"))),u.default.createElement("li",null,u.default.createElement("span",null,e.get("jrJvTypeName"))),u.default.createElement("li",null,u.default.createElement("p",null,(0,m.formatMoney)(e.get("amount")))),u.default.createElement("li",null,u.default.createElement("p",null,o?(0,m.formatMoney)((Number(s)+Number(a)).toFixed(2)):(0,m.formatMoney)(s.toFixed(2)))))}),u.default.createElement(d.TableItem,{className:"editRunning-table-width",key:"total"},u.default.createElement("li",null),u.default.createElement("li",null),u.default.createElement("li",null),u.default.createElement("li",null),u.default.createElement("li",null,"合计"),u.default.createElement("li",null),u.default.createElement("li",null,u.default.createElement("p",null,o?(0,m.formatMoney)(n.reduce(function(e,t){return e+Number(t.get("notHandleAmount"))+Number(t.get("handleAmount"))},0)):(0,m.formatMoney)(n.reduce(function(e,t){return e+Number(t.get("notHandleAmount"))},0))))))))}}]),t}())||n;t.default=S},1418:function(e,t,a){},1423:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=y(a(37)),i=y(a(1234)),o=y(a(45)),l=y(a(89)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(38),a(1235),a(55),a(88);var c=y(a(1)),s=a(17),d=a(18),f=(a(56),y(a(1237))),m=a(101),g=(h(a(27)),a(127),y(a(1749)),y(a(1750)),a(22)),p=h(a(172)),C=h(a(177));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}l.default.Group;var E=o.default.Option,S=(0,s.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.oriTemp.get("amount"),a=this.props.oriTemp.get("amount"),n=e.oriTemp.getIn(["billList",0,"taxRate"]),r=this.props.oriTemp.get("handleType"),i=this.props.oriTemp.get("beCleaning");t!==a&&"-1"!=n&&Math.abs(n)>0&&this.props.dispatch(p.changeAccountTaxRate(n,t)),"JR_HANDLE_CZ"===r&&i&&this.props.dispatch(p.calculateGain())}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=(e.flags,e.oriTemp),n=e.taxRateTemp,l=e.insertOrModify,u=(a.get("oriState"),a.get("categoryType")),s=n.get("scale"),h=(n.get("rateOptionList")||(0,d.fromJS)([])).toJS().map(function(e){return{key:e+"%",value:e}});h.push({value:"-1",key:"**%"});var y=(0,m.getCategorynameByType)(u),S=(y.propertyShow,y.categoryTypeObj),T=y.direction,_=a.get("billList"),v=_.getIn([0,"taxRate"]),b=_.getIn([0,"tax"]),L=_.getIn([0,"billState"]),I=(a.get("runningType"),a.getIn(["billList",0,"billType"])),N=a.getIn(["currentBillList",0,"billType"]),O=a.get("amount"),A=a.get("billStrongList"),R=a.get("handleType"),w=(a.get("businessList"),a.getIn([S,"beCleaning"]),"debit"===T&&"JR_HANDLE_GJ"!==R?({"":function(){return""},bill_common:function(){return"发票"},bill_other:function(){return"其他票据"}}[I]||function(){return""})():({"":function(){return""},bill_special:function(){return"增值税专用发票"},bill_other:function(){return"其他票据"}}[I]||function(){return""})()),P="debit"===T&&"JR_HANDLE_GJ"!==R?[{value:"发票",key:"bill_common"},{value:"其他票据",key:"bill_other"}]:[{value:"增值税专用发票",key:"bill_special"},{value:"其他票据",key:"bill_other"}];return c.default.createElement("div",null,c.default.createElement("div",{className:"accountConf-separator"}),"small"==s&&"credit"!==T&&"JR_HANDLE_GJ"!==R||"general"==s||"modify"===l&&("bill_special"===I||"bill_common"===I||"bill_common"===N||"bill_special"===N)?c.default.createElement("div",{className:"edit-running-modal-list-item"},c.default.createElement("label",null,"票据类型："),c.default.createElement("div",null,c.default.createElement(o.default,{disabled:"modify"===l&&A.size>0,value:w,onChange:function(e){t(p.changeLrAccountCommonString("ori",["billList",0,"billType"],e)),"small"===s?"JR_HANDLE_GJ"!==R&&"debit"===T&&"bill_other"!==e&&t(p.billChange("bill_states_make_out")):"general"===s&&("LB_CQZC"===u?"JR_HANDLE_GJ"===R&&"bill_other"!==e?t(p.billChange("bill_states_auth")):"JR_HANDLE_CZ"===R&&"bill_other"!==e&&t(p.billChange("bill_states_make_out")):"debit"===T&&"bill_other"!==e?t(p.billChange("bill_states_make_out")):"bill_other"!==e&&t(p.billChange("bill_states_auth")))}},P.map(function(e,t){return c.default.createElement(E,{key:t,value:e.key},e.value)})))):"","bill_common"===I||"bill_special"===I?c.default.createElement("div",null,c.default.createElement("div",{className:"edit-running-modal-list-item"},c.default.createElement("label",null,"税率："),c.default.createElement("div",null,c.default.createElement(o.default,{className:"editRunning-rate",disabled:"modify"===l&&A.size,value:-1==v?"**%":v?v+"%":"",onChange:function(e){t(p.changeAccountTaxRate(e))}},h.map(function(e,t){return c.default.createElement(E,{key:t,value:e.value},e.key)})),c.default.createElement(i.default,{className:"use-unuse-style",checked:"bill_states_make_out"===L||"bill_states_auth"===L,onChange:function(){"small"===s?"debit"===T&&"bill_other"!==I?t("bill_states_make_out"===L?p.changeLrAccountCommonString("ori",["billList",0,"billState"],"bill_states_not_make_out"):p.changeLrAccountCommonString("ori",["billList",0,"billState"],"bill_states_make_out")):"bill_states_auth"===L?t(p.changeLrAccountCommonString("ori",["billList",0,"billState"],"bill_states_not_auth")):"bill_states_not_auth"===L&&t(p.changeLrAccountCommonString("ori",["billList",0,"billState"],"bill_states_auth")):"JR_HANDLE_GJ"===R?t("bill_states_auth"===L?p.changeLrAccountCommonString("ori",["billList",0,"billState"],"bill_states_not_auth"):p.changeLrAccountCommonString("ori",["billList",0,"billState"],"bill_states_auth")):"debit"===T?"bill_other"!==I&&t("bill_states_make_out"===L?p.changeLrAccountCommonString("ori",["billList",0,"billState"],"bill_states_not_make_out"):p.changeLrAccountCommonString("ori",["billList",0,"billState"],"bill_states_make_out")):"bill_other"!==I&&t("bill_states_auth"===L?p.changeLrAccountCommonString("ori",["billList",0,"billState"],"bill_states_not_auth"):p.changeLrAccountCommonString("ori",["billList",0,"billState"],"bill_states_auth"))},checkedChildren:"debit"===T&&"JR_HANDLE_GJ"!==R?"已开票":"已认证",unCheckedChildren:"debit"===T&&"JR_HANDLE_GJ"!==R?"未开票":"未认证",disabled:"modify"===l&&A.size}))),-1==v?c.default.createElement("div",{className:"edit-running-modal-list-item"},c.default.createElement("label",null,"税额："),c.default.createElement(f.default,{value:b,disabled:"modify"===l&&A.size>0,onChange:function(e){(0,m.numberTest)(e,function(e){Math.abs(e)>Math.abs(O)?r.default.info("税额有误，不允许大于价税合计"):t(p.changeLrAccountCommonString("ori",["billList",0,"tax"],e))},"LB_FYZC"===u||"LB_CQZC"===u)}})):c.default.createElement("div",{className:"edit-running-modal-list-item accountConf-premount"},c.default.createElement("label",null),c.default.createElement("label",null,"价税合计："),c.default.createElement("div",null,(0,g.formatMoney)(O)),c.default.createElement("label",null,"税额："),c.default.createElement("div",null,b?(0,g.formatMoney)(b):""))):null,"modify"===l&&A.size?c.default.createElement("div",{className:"edit-running-modal-list-item"},c.default.createElement("span",null,"debit"===T&&"JR_HANDLE_GJ"!==R?"开票流水：":"认证流水："),A.map(function(e){return c.default.createElement("span",{className:"flowNumber-area",onClick:function(a){a.stopPropagation(),t(C.getPreviewRunningBusinessFetch(e,"lrls"))}},e.get("oriDate")+" "+e.get("jrIndex")+"号")})):null)}}]),t}())||n;t.default=S},1424:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=S(a(47)),i=S(a(32)),o=S(a(37)),l=S(a(45)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(51),a(38),a(55);var c=S(a(1)),s=a(17),d=a(18),f=(a(56),S(a(1237)),S(a(483)),a(22)),m=E(a(27)),g=S(a(90)),p=(a(1310),S(a(1477))),C=S(a(2596)),h=S(a(1374)),y=(E(a(484)),E(a(130)));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}var T=l.default.Option,_=(0,s.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showCardModal:!1,warehouseModal:!1,warehouseCards:{warehouseCardUuid:"",warehouseCardCode:"",warehouseCardName:""},showModal:!1,showInventoryModal:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.stockCardList,u=t.stockAllLength,s=(t.carryoverCardList,t.stockList),E=t.warehouseList,S=(t.stockRange,t.amount,t.taxRate,t.showStockModal,t.MemberList),_=t.thingsList,v=t.selectedKeys,b=(t.categoryTypeObj,t.currentCardType,t.insertOrModify),L=t.enableWarehouse,I=t.openQuantity,N=t.selectList,O=t.selectItem,A=t.stockTitleName,R=t.oriState,w=t.oriDate,P=t.stockTemplate,U=t.sectionTemp,M=t.callback,k=t.selectTreeCallBack,j=(t.amountDisable,t.isCardUuid),J=t.needTotalAmount,D=(t.assemblyNumber,t.needHidePrice),x=t.addInBatchesFun,F=t.selectStockFun,H=t.deleteStockFun,B=t.notNeedOpenModal,G=t.totalAmountName,Y=(t.dealTypeUuid,t.needSpliceChoosedStock),Z=t.stockCardIdList,z=t.notNeedMessage,W=t.warehouseUuid,K=t.noPrice,X=t.notFoundContent,V=(t.serialList,t.oriUuid),Q=t.cardPageObj,q=t.cardPaginationCallBack,$=this.state,ee=$.showCardModal,te=$.warehouseModal,ae=$.warehouseCards,ne=$.showInventoryModal,re=j?"cardUuid":"uuid",ie="STATE_CHZZ_ZZD"===R?"物料"===A?"materialUuid":"productUuid":"cardUuid",oe="";oe=L&&I?K?"inventory-content-area-warehouse-no-price":"inventory-content-area-warehouse":L&&!I?"inventory-content-area-warehouse-no-open":!L&&I?"inventory-content-area":"inventory-content-area-no-open";var le="物料"===A||"存货"===A?"notFinish":"finish",ue=0;n.map(function(e,t){ue=(0,f.numberCalculate)(ue,e.get("amount"))});var ce=!1;"STATE_CHYE_CH"!==R&&"STATE_CHYE_CK"!==R&&"STATE_YYSR_ZJ"!==R||(ce=!0);var se="成品"===A||"STATE_XMJZ_JZRK"===R||"STATE_XMJZ_QRSRCB"===R||"STATE_XMJZ_XMJQ"===R?"in":"out";return c.default.createElement("div",{className:"inventory-content calculate-inventory-content"},c.default.createElement("div",{className:oe,style:{marginBottom:"5px"}},c.default.createElement("span",null,A),L?c.default.createElement("span",null,c.default.createElement("span",{style:{marginRight:"5px"}},"仓库"),c.default.createElement(g.default,{type:"editConfig",onClick:function(){e.setState({warehouseModal:!0})}})):"",I?c.default.createElement("span",null,"数量"):"",I&&!K?c.default.createElement("span",null,"单价"):"",c.default.createElement("span",null,"金额"),c.default.createElement("span",null)),c.default.createElement("div",{className:"calculate-inventory-list-items"},n.map(function(t,r){var i=s.find(function(e){return e.get(re)===t.get("cardUuid")})||(0,d.fromJS)([]),o="true"===t.get("isOpenedQuantity")||!0===t.get("isOpenedQuantity"),l="STATE_CHDB"===R&&t.get("cardUuid")?o:I,u=t.get("assistList")||(0,d.fromJS)([]),f=t.get("serialList")||(0,d.fromJS)([]),m="";m=L&&I?K?"inventory-content-area-warehouse-no-price":"inventory-content-area-warehouse":L&&!I?"inventory-content-area-warehouse-no-open":!L&&I?"inventory-content-area":"inventory-content-area-no-open";var g=n.filter(function(e,a){return e.get(re)===t.get(re)&&a!==r}).toJS().reduce(function(e,t){return e.concat(t.serialList||[])},[]);return c.default.createElement(C.default,{dispatch:a,stockList:s,oriState:R,needTooltip:I,oriDate:w,stockTitleName:A,notFoundContent:X,stockTemplate:P,sectionTemp:U,needHidePrice:D,selectStockFun:F,warehouseUuid:W,noPrice:K,showAddCardModal:function(){e.setState({showCardModal:!0})},enableWarehouse:L,openQuantity:I,warehouseList:E,insertOrModify:b,oriUuid:V,stockCardList:n,deleteStockFun:H,v:t,i:r,cardUuidName:re,curItem:i,className:m,type:le,mergeOpenQuantity:l,inOrOut:se,assistList:u,cardNameString:ie,NegativeAllowed:ce,propsSerialList:e.props.serialList,serialList:f,selectedList:g})})),"STATE_CHZZ_ZZD"===R?null:c.default.createElement("div",{className:"inventory-button chzz-inventory-button"},c.default.createElement(i.default,{onClick:function(){var e="STATE_CHDB"===R?m.STOCK_MAX_NUMBER_ONE:m.STOCK_MAX_NUMBER_TWO;("STATE_CHZZ_ZZCX"===R?u:n.size)<e?B?o.default.info(z):a(y.deleteStockList(n,n.size-1,"add",U,P)):o.default.info("所选存货总数不可超过"+e+"个")}},c.default.createElement(g.default,{type:"big-plus"}),"添加"+A+"明细"),c.default.createElement(i.default,{onClick:function(){B||e.setState({showInventoryModal:!0}),x?x():a(y.getStockCardCategoryAndList({currentPage:1}))}},c.default.createElement(g.default,{type:"editPlus"}),"批量添加"+A),"STATE_YYSR_ZJ"===R||"STATE_CHDB"===R||"STATE_CHYE_CK"===R||"STATE_CHYE_CH"===R||"STATE_CHZZ_ZZCX"===R||"STATE_CHTRXM"===R?c.default.createElement(i.default,{style:{width:88},onClick:function(){("STATE_YYSR_ZJ"===R||"STATE_CHDB"===R)&&B?o.default.info(z):a(y.changeEditCalculateCommonState("views","showall",!0)),a(y.changeEditCalculateCommonState("views","isCount",!1)),a(y.changeEditCalculateCommonState("views","isAssembly",!1)),a("成品"===A?y.changeEditCalculateCommonState("views","isProduct",!0):y.changeEditCalculateCommonState("views","isProduct",!1))}},c.default.createElement(g.default,{type:"upload"}),"批量导入"):null,"STATE_CHYE_CK"!==R&&"STATE_YYSR_ZJ"!==R||!I||"insert"!==b?null:c.default.createElement(i.default,{onClick:function(){if(!B&&"STATE_YYSR_ZJ"===R||"STATE_CHYE_CK"===R){a(y.changeEditCalculateCommonState("views","showCount",!0)),L&&a(y.getWarehouseCardTree({haveQuantity:!1,inventoryUuid:"",oriDate:w,tempName:"STATE_CHYE_CK"===R?"Balance":"CostTransfer",isNeedHaveQuantity:!1}));var e="STATE_CHYE_CK"===R?"BalanceTemp":"CostTransferTemp";a(y.getStockCardList(e,null,!0))}else o.default.info("请先选择处理类别")},style:{marginRight:"10px",width:88}},c.default.createElement(g.default,{type:"count-inventory"}),"  ","STATE_CHYE_CK"===R?"盘点调整":"盘点结转"),"STATE_CHYE_CH"===R&&I&&L&&"insert"===b?c.default.createElement(i.default,{onClick:function(){a(y.changeEditCalculateCommonState("views","showCount",!0)),a(y.getWarehouseCardTree({haveQuantity:!1,inventoryUuid:"",oriDate:w,tempName:"Balance",isNeedHaveQuantity:!1})),a(y.getStockCardList("BalanceTemp",null,!0))},style:{marginRight:"10px",width:113}},c.default.createElement(g.default,{type:"count-inventory"}),"  调整统一单价"):null,J?c.default.createElement("span",{className:"chzz-inventory-total"},G||"合计","：",(0,f.formatMoney)(ue)):null),c.default.createElement(h.default,{showModal:ee,closeModal:function(){return e.setState({showCardModal:!1})},dispatch:a,enableWarehouse:L,fromPage:"payment"}),c.default.createElement(p.default,{showCommonChargeModal:ne,MemberList:S,thingsList:_,dispatch:a,oriState:R,selectedKeys:v,selectItem:O,selectList:N,stockCard:n,stockAllLength:u,temp:U,showSelectAll:!0,stockTemplate:P,cancel:function(){e.setState({showInventoryModal:!1})},selectTreeFunc:k,callback:M,needSpliceChoosedStock:Y,stockCardIdList:Z,cardPageObj:Q,paginationCallBack:q}),c.default.createElement(r.default,{visible:te,title:"批量设置仓库",onCancel:function(){e.setState({warehouseModal:!1})},onOk:function(){var t=ae.warehouseCardUuid,r=ae.warehouseCardCode,i=ae.warehouseCardName,o=n.toJS();a(y.changeEditCalculateCommonString(U,P,(0,d.fromJS)(o.map(function(e){return e.warehouseCardUuid=t,e.warehouseCardCode=r,e.warehouseCardName=i,e}))));var l=[],u=[];o&&o.map(function(e){l.push({cardUuid:e.cardUuid?e.cardUuid:"",storeUuid:t,assistList:e.assistList,batchUuid:e.batchUuid}),e.cardUuid&&u.push(e.cardUuid)}),u.length&&"STATE_YYSR_XS"!==R&&"STATE_YYSR_TS"!==R&&a(y.getStockBuildUpPrice(w,l,0,U,"notFinish")),e.setState({warehouseModal:!1,warehouseCards:{}})}},c.default.createElement("div",{style:{display:"flex"}},c.default.createElement("span",{style:{width:"100px",lineHeight:"28px"}},"仓库："),c.default.createElement(l.default,{style:{flex:1},placeholder:"请选择",combobox:!0,showSearch:!0,value:ae.warehouseCardUuid?(ae.warehouseCardCode||"")+" "+(ae.warehouseCardName||""):void 0,onChange:function(t){var a=t.split(m.TREE_JOIN_STR),n=a[0],r=a[1],i=a[2];e.setState({warehouseCards:{warehouseCardUuid:n,warehouseCardCode:r,warehouseCardName:i}})}},E&&E.map(function(e,t){return c.default.createElement(T,{key:e.get("uuid"),value:""+e.get("uuid")+m.TREE_JOIN_STR+e.get("code")+m.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))})))))}}]),t}())||n;t.default=_},1455:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=f(a(32)),i=f(a(129)),o=f(a(100)),l=f(a(14)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(51),a(128),a(99),a(78);var c=f(a(1)),s=a(17),d=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);t.default=e}(a(27)),a(18));function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}a(1400);var p=(0,s.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={inputValue:""},g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e,t=this,a=this.props,n=(a.dispatch,a.modalStyle),u=a.modalName,s=a.cardList,f=a.curSelectUuid,g=a.cancel,p=a.allCheckBoxClick,C=a.singleCheckBoxClick,h=a.onOkCallback,y=a.hideEmpty,E=a.isCardUuid,S=this.state.inputValue,T=E?"cardUuid":"uuid",_=s&&s.size?s:(0,d.fromJS)([]),v=(y?_:_.concat((0,d.fromJS)([(e={name:"(空白)"},m(e,T,"空白"),m(e,"code",""),e)]))).filter(function(e){return!S||(e.get("code")&&e.get("code").indexOf(S)>-1||e.get("name").indexOf(S)>-1)}),b=v.every(function(e){return f.some(function(t){return t===e.get(T)})});return c.default.createElement("div",{className:"mxb-common-modal",style:n},c.default.createElement("div",{className:"mxb-common-modal-title"},c.default.createElement("span",{className:"title-icon",onClick:function(e){e.stopPropagation(),g()}},c.default.createElement(l.default,{type:"close"}))),c.default.createElement("div",{className:"mxb-common-modal-content"},c.default.createElement("div",{className:"common-modal-serch"},S?c.default.createElement(l.default,{className:"search-delete",type:"close-circle",theme:"filled",onClick:function(){t.setState({inputValue:""})}}):null,c.default.createElement(l.default,{className:"serch-icon",type:"search",onClick:function(e){}}),c.default.createElement(o.default,{className:"serch-input",placeholder:"筛选"+u,value:S,onChange:function(e){t.setState({inputValue:e.target.value})}})),c.default.createElement("div",{className:"common-mocal-card-list"},c.default.createElement("ul",{className:"mxb-common-modal-account"},!S||"(全选)".indexOf(S)>-1?c.default.createElement("li",null,c.default.createElement(i.default,{checked:b,onClick:function(e){e.stopPropagation(),p(b,v)}}),c.default.createElement("span",null,"(全选)")):null,v.map(function(e){var t=f.indexOf(e.get(T))>-1;return c.default.createElement("li",{key:e.get(T)},c.default.createElement(i.default,{checked:t,onClick:function(a){a.stopPropagation(),C(t,e.get(T))}}),c.default.createElement("span",null,"COMNCRD"!==e.get("code")&&"INDIRECT"!==e.get("code")&&"ASSIST"!==e.get("code")&&"MAKE"!==e.get("code")&&"MECHANICAL"!==e.get("code")&&e.get("code")?e.get("code")+" "+e.get("name"):e.get("name")))})))),c.default.createElement("div",{className:"mxb-common-modal-bottom"},c.default.createElement(r.default,{type:"primary",onClick:function(e){e.stopPropagation(),g(),h(f)}},"确定")))}}]),t}())||n;t.default=p},1460:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=T(a(47)),l=T(a(100)),u=T(a(32)),c=T(a(14)),s=T(a(37)),d=T(a(129)),f=T(a(45)),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(99),a(51),a(78),a(38),a(128),a(55);var g=T(a(1)),p=(T(a(0)),a(18)),C=a(56);a(1240);var h=a(22),y=T(a(1244)),E=a(127),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1403));function T(e){return e&&e.__esModule?e:{default:e}}f.default.Option,d.default.Group;var _=(0,C.connect)(function(e){return e})((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={confirmModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,g.default.Component),m(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.relativeCardState!==e.relativeCardState||this.props.showModal!==e.showModal||this.props.homeState!==e.homeState||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.showModal,r=t.closeModal,i=t.relativeCardState,f=t.homeState,m=t.fromPage,C=t.cardList,T=void 0===C?(0,p.fromJS)([]):C,_=t.originTags,v=this.state.confirmModal,b=f.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]),L=i.get("tags").filter(function(e){return"全部"!==e.get("name")}),I=i.get("relativeCardTemp"),N=i.getIn(["views","insertOrModify"]),O="relativeConfig"!==m;O&&(b=f.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]));var A="insert"===N?"新增往来单位":"修改往来单位",R=I.get("code"),w=I.get("name"),P=I.get("isPayUnit"),U=I.get("isReceiveUnit"),M=I.get("companyAddress"),k=I.get("companyTel"),j=I.get("financeName"),J=I.get("financeTel"),D=I.get("remark"),x=I.get("receivableOpened"),F=I.get("advanceOpened"),H=I.get("payableOpened"),B=I.get("prepaidOpened"),G=I.get("categoryTypeList"),Y=(I.get("enablePrepaidAc"),I.get("enableAdvanceAc"),I.get("contacterInfo")),Z=I.get("isCheckOut"),z=function(t,n){var r=[{type:"stockName",value:w},{type:"code",value:R},{type:"remark",value:D},{type:"companyAddress",value:M},{type:"financeName",value:j}];h.jxcConfigCheck.beforeSaveCheck(r,function(){return function(){if(P||U){var r=0;if(L.map(function(e,t){e.get("checked")&&r++}),0!==r)if(G.size>0){var i=!0;G.map(function(e,t){void 0!==e.get("subordinateUuid")&&""!==e.get("subordinateUuid")||(i=!1)}),i?a(S.saveRelativeCard(m,t,n,function(){return e.setState({confirmModal:!0})},function(){return e.setState({confirmModal:!1})})):s.default.info("请选择所属分类子级类别")}else s.default.info("请选择所属分类子级类别");else s.default.info("所属分类必选一项")}else s.default.info("往来关系必选一项")}()})},W=void 0,K=void 0,X=void 0;return"modify"===N&&T.size&&(X=T.findIndex(function(e){return e.get("code")===R}),W=X-1,K=X+1),g.default.createElement(o.default,{width:"820px",visible:n,maskClosable:!1,title:A,onCancel:function(){return r()},footer:[g.default.createElement(u.default,{style:{float:"left",display:"insert"==N?"none":""},disabled:0===T.findIndex(function(e){return e.get("code")===R}),onClick:function(){a(S.beforeRelativeEditCard(T.get(W),function(){},_))}},g.default.createElement(c.default,{type:"caret-left"})),g.default.createElement(u.default,{style:{float:"left",display:"insert"==N?"none":""},disabled:T.findIndex(function(e){return e.get("code")===R})===T.size-1||!T.size,onClick:function(){a(S.beforeRelativeEditCard(T.get(K),function(){},_))}},g.default.createElement(c.default,{type:"caret-right"})),g.default.createElement(u.default,{key:"cancel",type:"ghost",onClick:function(){return r()}},"取 消"),g.default.createElement(u.default,{key:"ok",type:O?"primary":"modify"==N?"primary":"ghost",disabled:!b,onClick:function(){z("insert",r)}},"保 存"),g.default.createElement(u.default,{key:"addAndNew",type:"primary",disabled:!b,style:O?{display:"none"}:{display:"insert"==N?"inline-block":"none"},onClick:function(){z("insertAndNew")}},"保存并新增")]},g.default.createElement("div",{className:"jxc-config-card-modal-wrap"},g.default.createElement("div",{className:"jxc-config-card-modal-row"},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"编码："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(l.default,{placeholder:y.default.cardCode,value:R,onChange:function(e){return h.jxcConfigCheck.inputCheck("cardCode",e.target.value,function(){return a(S.changeRelativeCardContent("code",e.target.value))})},onFocus:function(e){return e.target.select()}}))),g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"名称："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(l.default,{placeholder:y.default.name,value:w,onChange:function(e){return a(S.changeRelativeCardContent("name",e.target.value))},onFocus:function(e){return e.target.select()}})))),g.default.createElement("div",{className:"jxc-config-card-modal-row"},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"所属分类："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},L.map(function(e,t){return g.default.createElement("label",{key:t,className:"checkbox-box"},g.default.createElement(d.default,{checked:e.get("checked"),onChange:function(t){return a(S.changeRelativeCardCategoryStatus(e,t.target.checked))}}),g.default.createElement("span",null,e.get("name")))})))),g.default.createElement("div",{className:"category-box"},L.map(function(e,t){return e.get("checked")?g.default.createElement("div",{className:"jxc-config-card-modal-row select-row-with-two",key:t},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},e.get("name"),"类别："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(E.UpperClassSelect,{className:"jxc-config-modal-select",placeholder:"",treeData:e.get("tree")?e.get("tree"):[],treeDefaultExpandAll:!0,isLastSelect:!0,disabledParent:!0,value:e.get("selectUuid")?[e.get("selectName")]:[""],onSelect:function(t){a(S.changeRelativeCardCategoryType(e,t))}})))):null})),g.default.createElement("div",{className:"jxc-config-card-modal-row",style:{clear:"both"}},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"备注："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(l.default,{placeholder:y.default.remark,value:D,onChange:function(e){return a(S.changeRelativeCardContent("remark",e.target.value))},onFocus:function(e){return e.target.select()}})))),g.default.createElement("div",{className:"jxc-config-title",style:{display:P||U?"":"none"}},"财务信息"),g.default.createElement("div",{className:"jxc-config-card-modal-row",style:{display:U?"":"none"}},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"应收期初值："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(E.NumberInput,{type:"amount",placeholder:"(选填)",value:x,onChange:function(e){return a(S.changeRelativeCardContent("receivableOpened",e))},onFocus:function(e){return e.target.select()},disabled:Z}))),g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"预收期初值："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(E.NumberInput,{type:"amount",placeholder:"(选填)",value:F,onChange:function(e){return a(S.changeRelativeCardContent("advanceOpened",e))},onFocus:function(e){return e.target.select()},disabled:Z})))),g.default.createElement("div",{className:"jxc-config-card-modal-row",style:{display:P?"":"none"}},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"应付期初值："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(E.NumberInput,{type:"amount",placeholder:"(选填)",value:H,onChange:function(e){return a(S.changeRelativeCardContent("payableOpened",e))},onFocus:function(e){return e.target.select()},disabled:Z}))),g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"预付期初值："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(E.NumberInput,{type:"amount",placeholder:"(选填)",value:B,onChange:function(e){return a(S.changeRelativeCardContent("prepaidOpened",e))},onFocus:function(e){return e.target.select()},disabled:Z})))),g.default.createElement("div",{className:"jxc-config-title"},g.default.createElement("label",null,g.default.createElement(d.default,{checked:Y,onChange:function(e){return a(S.changeRelativeCardContent("contacterInfo",e.target.checked))}}),"  联系信息")),Y?g.default.createElement("div",null,g.default.createElement("div",{className:"jxc-config-card-modal-row"},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"单位地址："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(l.default,{placeholder:y.default.companyAddress,value:M,onChange:function(e){return a(S.changeRelativeCardContent("companyAddress",e.target.value))},onFocus:function(e){return e.target.select()}}))),g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"单位电话："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(l.default,{placeholder:"(选填)",value:k,onChange:function(e){return h.jxcConfigCheck.inputCheck("tel",e.target.value,function(){return a(S.changeRelativeCardContent("companyTel",e.target.value))})},onFocus:function(e){return e.target.select()}})))),g.default.createElement("div",{className:"jxc-config-card-modal-row"},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"财务联系人："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(l.default,{placeholder:y.default.financeName,value:j,onChange:function(e){return a(S.changeRelativeCardContent("financeName",e.target.value))},onFocus:function(e){return e.target.select()}}))),g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"联系电话："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(l.default,{placeholder:"(选填)",value:J,onChange:function(e){return h.jxcConfigCheck.inputCheck("tel",e.target.value,function(){return a(S.changeRelativeCardContent("financeTel",e.target.value))})},onFocus:function(e){return e.target.select()}}))))):null,g.default.createElement("div",{className:"modalBomb",style:{display:v?"":"none"}})))}}]),t}(),r.displayName="RelativeConfAddCardModal",n=i))||n;t.default=_},1461:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=L(a(47)),l=L(a(61)),u=L(a(100)),c=L(a(32)),s=L(a(14)),d=L(a(37)),f=L(a(89)),m=L(a(129)),g=L(a(45)),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(79),a(99),a(51),a(78),a(38),a(88),a(128),a(55);var C=L(a(1)),h=(L(a(0)),a(18)),y=a(56);a(1240);var E=b(a(27)),S=a(22),T=L(a(1244)),_=a(127),v=b(a(1404));function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function L(e){return e&&e.__esModule?e:{default:e}}g.default.Option,m.default.Group;var I=f.default.Group,N=(0,y.connect)(function(e){return e})((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={confirmModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,C.default.Component),p(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.projectCardState!==e.projectCardState||this.props.showModal!==e.showModal||this.props.homeState!==e.homeState||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.showModal,r=t.closeModal,i=t.projectCardState,m=t.homeState,g=t.originTags,p=t.fromPage,y=t.cardList,b=void 0===y?(0,h.fromJS)([]):y,L=t.allState,N=(this.state.confirmModal,!!L.getIn(["period","closedyear"])),O=m.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]),A=i.get("typeTree"),R=i.getIn(["views","insertOrModify"]),w="projectConfig"!==p;w&&(O=m.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]));var P="insert"===R?"新增项目":"修改项目",U=i.get("projectCardTemp"),M=U.get("code"),k=U.get("name"),j=U.get("selectUuid"),J=U.get("selectName"),D=U.get("projectProperty"),x=U.get("projectPropertyName"),F=U.get("basicProductOpen"),H=U.get("contractCostOpen"),B=U.get("contractProfitOpen"),G=U.get("engineeringSettlementOpen"),Y=m.getIn(["data","userInfo","sobInfo","moduleInfo"]),Z=Y.indexOf("SCXM")>-1,z=Y.indexOf("SGXM")>-1,W=function(t){var n=[{type:"stockName",value:k},{type:"code",value:M}];if(""!==j){S.jxcConfigCheck.beforeSaveCheck(n,function(){return function(t){a(v.saveProjectCard(p,t,r,function(){return e.setState({confirmModal:!0})},function(){return e.setState({confirmModal:!1})}))}(t)})}else d.default.info("请选择类别！")},K=void 0,X=void 0,V=void 0;return"modify"===R&&b.size&&(V=b.findIndex(function(e){return e.get("code")===M}),K=V-1,X=V+1),C.default.createElement(o.default,{width:"820px",visible:n,maskClosable:!1,title:P,onCancel:function(){return r()},footer:[C.default.createElement(c.default,{style:{float:"left",display:"insert"==R?"none":""},disabled:0===b.findIndex(function(e){return e.get("code")===M}),onClick:function(){a(v.beforeEditProjectCard(b.get(K),function(){},g))}},C.default.createElement(s.default,{type:"caret-left"})),C.default.createElement(c.default,{style:{float:"left",display:"insert"==R?"none":""},disabled:b.findIndex(function(e){return e.get("code")===M})===b.size-1||!b.size,onClick:function(){a(v.beforeEditProjectCard(b.get(X),function(){},g))}},C.default.createElement(s.default,{type:"caret-right"})),C.default.createElement(c.default,{key:"cancel",type:"ghost",onClick:function(){return r()}},"取 消"),C.default.createElement(c.default,{key:"ok",type:w?"primary":"modify"==R?"primary":"ghost",disabled:!O,onClick:function(){W("insert")}},"保 存"),C.default.createElement(c.default,{key:"addAndNew",type:"primary",disabled:!O,style:{display:"insert"!=R||w?"none":"inline-block"},onClick:function(){W("insertAndNew")}},"保存并新增")]},C.default.createElement("div",{className:"jxc-config-card-modal-wrap"},C.default.createElement("div",{className:"jxc-config-card-modal-row"},C.default.createElement("div",{className:"jxc-config-card-modal-item"},C.default.createElement("label",{className:"jxc-config-card-modal-label"},"编码："),C.default.createElement("div",{className:"jxc-config-card-modal-input"},C.default.createElement(u.default,{placeholder:T.default.cardCode,value:M,onChange:function(e){return S.jxcConfigCheck.inputCheck("cardCode",e.target.value,function(){return a(v.changeProjectCardContent("code",e.target.value))})},onFocus:function(e){return e.target.select()}}))),C.default.createElement("div",{className:"jxc-config-card-modal-item"},C.default.createElement("label",{className:"jxc-config-card-modal-label"},"名称："),C.default.createElement("div",{className:"jxc-config-card-modal-input"},C.default.createElement(u.default,{placeholder:T.default.name,value:k,onChange:function(e){return a(v.changeProjectCardContent("name",e.target.value))},onFocus:function(e){return e.target.select()}})))),C.default.createElement("div",{className:"jxc-config-card-modal-row"},C.default.createElement("div",{className:"jxc-config-card-modal-item"},C.default.createElement("label",{className:"jxc-config-card-modal-label"},"项目性质："),C.default.createElement("div",{className:"jxc-config-card-modal-input",style:{maxWidth:"800px"}},C.default.createElement(I,{onChange:function(e){var t=e.target.value.split(E.TREE_JOIN_STR),n=t[0],r=t[1];a(v.changeProjectPropertyState(n,r))},value:""+D+E.TREE_JOIN_STR+x},C.default.createElement(f.default,{value:"XZ_LOSS"+E.TREE_JOIN_STR+"损益项目"},"损益项目"),Z?C.default.createElement(f.default,{value:"XZ_PRODUCE"+E.TREE_JOIN_STR+"生产项目"},"生产项目"):"",z?C.default.createElement(f.default,{value:"XZ_CONSTRUCTION"+E.TREE_JOIN_STR+"施工项目"},"施工项目"):"")))),C.default.createElement("div",{className:"jxc-config-card-modal-row"},C.default.createElement("div",{className:"jxc-config-card-modal-item"},C.default.createElement("label",{className:"jxc-config-card-modal-label"},"类别："),C.default.createElement("div",{className:"jxc-config-card-modal-input"},C.default.createElement(_.UpperClassSelect,{className:"jxc-config-modal-select",placeholder:"",treeData:A||[],treeDefaultExpandAll:!0,isLastSelect:!0,disabledParent:!0,value:j?[J]:[""],onSelect:function(e){a(v.changeProjectCardCategoryType(e))}}))),C.default.createElement("div",null)),"XZ_PRODUCE"===D||"XZ_CONSTRUCTION"===D?C.default.createElement("div",{className:"jxc-config-title",style:{marginBottom:"10px"}},"期初信息"):"",C.default.createElement("div",{className:"jxc-config-card-modal-row"},"XZ_PRODUCE"===D?C.default.createElement("div",{className:"jxc-config-card-modal-item"},C.default.createElement("label",{className:"jxc-config-card-modal-label"},"基本生产成本："),C.default.createElement("div",{className:"jxc-config-card-modal-input"},C.default.createElement(l.default,{title:N?"已结账，无法修改期初值":""},C.default.createElement(_.XfInput,{negativeAllowed:!0,mode:"amount",placeholder:"请输入金额",disabled:N,value:F,onChange:function(e){var t=e.target.value;a(v.changeProjectCardContent("basicProductOpen",t))}})))):"","XZ_CONSTRUCTION"===D?C.default.createElement("div",{className:"jxc-config-card-modal-item"},C.default.createElement("label",{className:"jxc-config-card-modal-label"},"合同成本："),C.default.createElement("div",{className:"jxc-config-card-modal-input"},C.default.createElement(l.default,{title:N?"已结账，无法修改期初值":""},C.default.createElement(_.XfInput,{negativeAllowed:!0,mode:"amount",placeholder:"请输入金额",disabled:N,value:H,onChange:function(e){var t=e.target.value;a(v.changeProjectCardContent("contractCostOpen",t))}})))):"","XZ_CONSTRUCTION"===D?C.default.createElement("div",{className:"jxc-config-card-modal-item"},C.default.createElement("label",{className:"jxc-config-card-modal-label"},"合同毛利："),C.default.createElement("div",{className:"jxc-config-card-modal-input"},C.default.createElement(l.default,{title:N?"已结账，无法修改期初值":""},C.default.createElement(_.XfInput,{negativeAllowed:!0,mode:"amount",placeholder:"请输入金额",disabled:N,value:B,onChange:function(e){var t=e.target.value;a(v.changeProjectCardContent("contractProfitOpen",t))}})))):""),"XZ_CONSTRUCTION"===D?C.default.createElement("div",{className:"jxc-config-card-modal-row"},C.default.createElement("div",{className:"jxc-config-card-modal-item"},C.default.createElement("label",{className:"jxc-config-card-modal-label"},"工程结算："),C.default.createElement("div",{className:"jxc-config-card-modal-input"},C.default.createElement(l.default,{title:N?"已结账，无法修改期初值":""},C.default.createElement(_.XfInput,{negativeAllowed:!0,mode:"amount",placeholder:"请输入金额",disabled:N,value:G,onChange:function(e){var t=e.target.value;a(v.changeProjectCardContent("engineeringSettlementOpen",t))}}))))):""))}}]),t}(),r.displayName="ProjectConfAddCardModal",n=i))||n;t.default=N},1463:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=S(a(47)),i=S(a(61)),o=S(a(14)),l=S(a(1234)),u=S(a(37)),c=S(a(129)),s=S(a(89)),d=S(a(45)),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(79),a(78),a(1235),a(38),a(128),a(88),a(55);var m=S(a(1)),g=(S(a(0)),a(18)),p=a(56);a(1240);E(a(27)),a(22),S(a(1244));var C=S(a(1288)),h=a(127),y=E(a(1241));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}d.default.Option,d.default.OptGroup,s.default.Group,c.default.Group;var _=(0,p.connect)(function(e){return e})(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={unitList:(n.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"])&&n.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"]).size?n.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"]):(0,g.fromJS)([{amount:"",uuid:""}])).toJS(),uuid:n.props.inventoryCardState.getIn(["inventoryCardTemp","unit","uuid"]),name:n.props.inventoryCardState.getIn(["inventoryCardTemp","unit","name"]),isStandard:n.props.inventoryCardState.getIn(["inventoryCardTemp","unit","isStandard"]),basicUnitUuid:n.props.inventoryCardState.getIn(["inventoryCardTemp","unit","basicUnitUuid"]),unitQuantity:n.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitQuantity"]),basicUnitQuantity:"",canEdit:!0,relateBoth:"",allowSave:!1,changeUnit:!1,oldUnit:(0,g.fromJS)({})},T(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),f(t,[{key:"initState",value:function(){this.setState({unitList:[{amount:"",uuid:""}],uuid:"",name:"",isStandard:!1,basicUnitUuid:"",unitQuantity:"",basicUnitQuantity:"",canEdit:!0,relateBoth:"",allowSave:!1,changeUnit:!1,oldUnit:(0,g.fromJS)({})})}},{key:"beforeSaveCheck",value:function(){var e=this.props,t=e.inventoryCardState,a=e.insertOrModify,n=this.state,r=n.unitList,i=n.name,o=n.oldUnit,l=(n.uuid,n.unitQuantity),c=n.basicUnitQuantity,s=n.isStandard,d=n.basicUnitUuid,f=t.getIn(["views","standardList"]);if(!i)return u.default.info("基本单位必填"),!1;if(r.some(function(e){return e.basicUnitQuantity<=1}))return u.default.info("多单位关系必须大于1"),!1;if(r.some(function(e){return!e.basicUnitQuantity||!e.name}))return u.default.info("多单位填写完整"),!1;if(r.some(function(e){return r.filter(function(t){return t.name===e.name}).length>1})||r.filter(function(e){return e.name===i}).length>0)return u.default.info("同一存货的单位组中，不支持两个单位名称相同"),!1;if(r.some(function(e){return r.filter(function(t){return t.basicUnitQuantity==e.basicUnitQuantity}).length>1}))return u.default.info("同一存货的单位组中，不支持与基本单位重复数量比的多单位"),!1;if("modify"===a&&JSON.parse(s||"false")&&JSON.parse(o.get("isStandard")||"false")){var m=f.find(function(e){return e.get("uuid")===o.get("uuid")}).get("basicUnitQuantity")||0;if(Number(c||0).toFixed(4)!==(Number(m)/Number(l||0)).toFixed(4)&&d===o.get("basicUnitUuid"))return u.default.info("新旧基本单位关系错误"),!1}return r.every(function(e,t){return r.every(function(a,n){var r=(Number(e.unitQuantity||0)/Number(a.unitQuantity||0)).toFixed(4),i=(Number(e.basicUnitQuantity||0)/Number(a.basicUnitQuantity||0)).toFixed(4);return!e.basicUnitUuid||e.basicUnitUuid!==a.basicUnitUuid||t===n||r===i||(u.default.info("多单位"+(t+1)+"和多单位"+(n+1)+"关系错误"),!1)})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.inventoryCardState,s=(t.homeState,t.enableWarehouse,t.showAddModal),d=t.closeAddModal,f=t.insertOrModify,p=this.state,E=p.unitList,S=p.uuid,T=p.name,_=p.isStandard,v=p.canEdit,b=p.allowSave,L=p.oldUnit,I=p.basicUnitQuantity,N=p.changeUnit,O=p.basicUnitUuid,A=p.unitQuantity,R=(n.getIn(["views","fromPage"]),n.getIn(["views","standardList"])),w=n.getIn(["views","customList"]),P=n.get("inventoryCardTemp"),U=(P.get("inventoryNature"),P.get("isOpenedQuantity"),P.get("unitPriceList")),M=P.get("unit")||(0,g.fromJS)({});P.get("CurUnit")||(0,g.fromJS)({});return m.default.createElement(r.default,{destroyOnClose:!0,className:"add-unit "+(b||"modify"!==f?"":"add-unit-disabled"),width:"500px",visible:s,maskClosable:!1,title:("insert"===f?"新增":"修改")+"单位",okText:"保存",onCancel:function(){d(),e.initState()},onOk:function(){if((b||"modify"!==f)&&e.beforeSaveCheck()){d(),e.initState();var t=U.toJS().filter(function(e){return T===e.name||E.some(function(t){return t.name===e.name})});t.some(function(e){return 1===e.type})||(t=t.concat([{type:1}])),t.some(function(e){return 2===e.type})||(t=t.concat([{type:2}])),a(y.changeInventoryCardContent("unitPriceList",(0,g.fromJS)(t))),a(y.changeInventoryCardContent("unit",(0,g.fromJS)({uuid:S,name:T,isStandard:_,basicUnitQuantity:I,unitList:E,changeUnit:N,basicUnitUuid:O,unitQuantity:A})))}}},m.default.createElement("div",null,m.default.createElement("div",{className:"modal-flex"},v?m.default.createElement("div",{className:"modal-item"},m.default.createElement("label",null,"基本单位："),m.default.createElement("div",{className:"modal-input"},m.default.createElement(C.default,{style:{width:"calc(100% - 75px)"},disabled:v&&"modify"===f,selectListOne:R,selectListTwo:w.filter(function(e){return!(e.get("unitList")&&e.get("unitList").size)}),onChange:function(t){var a=t.uuid,n=t.name,r=t.isStandard,i=t.basicUnitUuid,o=t.unitQuantity;if(e.setState({uuid:a,name:n,isStandard:r,basicUnitUuid:i,unitQuantity:o,unitList:E.map(function(e){return e.disabled=!1,e})}),"true"==String(r)){var l=E.map(function(e){return e.name="",e.basicUnitQuantity="",e});e.setState({unitList:l})}},onSwitch:function(){e.setState({uuid:"",name:"",isStandard:!1})},name:"modify"===f?M.get("name"):T}),"modify"===f?m.default.createElement(h.XfnIcon,{type:"config-edit",onClick:function(){e.setState({canEdit:!1,oldUnit:M,name:"",changeUnit:!0,unitList:(e.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"])&&e.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"]).size?e.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"]):(0,g.fromJS)([])).toJS()})}}):"")):m.default.createElement("div",{style:{flex:1}},m.default.createElement("div",{className:"modal-flex"},m.default.createElement("span",{className:"modal-item"},"原基本单位"),m.default.createElement("span",{className:"modal-item"},"新基本单位"),m.default.createElement("span",{className:"modal-item"},"数量关系"),m.default.createElement("span",{style:{maxWidth:"70px"}})),m.default.createElement("div",{className:"modal-flex"},m.default.createElement("div",{className:"modal-input-content"},m.default.createElement("span",null,L.get("name"),"  =  "),m.default.createElement(C.default,{disabled:v&&"modify"===f,selectListOne:R,selectListTwo:w.filter(function(e){return!(e.get("unitList")&&e.get("unitList").size)}),onChange:function(t){var a=t.uuid,n=t.name,r=t.isStandard,i=t.basicUnitUuid,o=t.unitQuantity;if(e.setState({uuid:a,name:n,isStandard:r,basicUnitUuid:i,unitQuantity:o,unitList:E.map(function(e){return e.disabled=!1,e})}),"false"!=r){var l=E.map(function(e){return e.name="",e.basicUnitQuantity="",e});e.setState({unitList:l})}},onSwitch:function(){e.setState({uuid:"",name:"",isStandard:!1})},name:T}),"  *  ",m.default.createElement(h.NumberInput,{type:"count4",placeholder:"请输入数量值",value:I,onChange:function(t){e.setState({basicUnitQuantity:t})}}),m.default.createElement(l.default,{className:"use-unuse-style",style:{marginLeft:".4rem"},checked:E.length,checkedChildren:"多单位",unCheckedChildren:"多单位",onChange:function(){e.setState({unitList:E.length?[]:[{}]})}}))))),E.length?m.default.createElement("div",{className:"multi-unit-content"},E.map(function(t,a){return m.default.createElement("div",{className:"multi-unit"},m.default.createElement("span",null,"多单位",a+1,"："),m.default.createElement(C.default,{selectListOne:R,selectListTwo:w.filter(function(e){return!(e.get("unitList")&&e.get("unitList").size)}),onChange:function(n){var r=n.uuid,i=n.name,o=n.isStandard,l=n.basicUnitUuid,c=n.unitQuantity,s=E;if("true"==o&&l==e.state.basicUnitUuid){var d=Number(e.state.unitQuantity||0),f=Number(c||0);d<f?(s[a]={uuid:r,name:i,isStandard:o,basicUnitQuantity:parseInt(f/d),disabled:!0,unitQuantity:c},e.setState({unitList:s})):u.default.info("数量关系必须大于1")}else s[a]={uuid:r,name:i,isStandard:o,basicUnitUuid:l,unitQuantity:c,basicUnitQuantity:t.basicUnitQuantity},e.setState({unitList:s})},onSwitch:function(){var t=E;t[a]={uuid:"",name:"",isStandard:!1},e.setState({unitList:t})},name:t.fullName||t.name}),m.default.createElement("span",null," =  ",T,"  *   "),m.default.createElement(h.NumberInput,{type:"count",placeholder:"请输入数量值",value:t.basicUnitQuantity,disabled:t.disabled,onChange:function(t){var n=E;n[a].basicUnitQuantity=t,e.setState({unitList:n})}}),E.length>1||"modify"===f?m.default.createElement(h.XfnIcon,{type:"bigDel",onClick:function(){E.splice(a,1),e.setState({unitList:E})}}):"")})):"",E.length||"modify"===f&&v?m.default.createElement("div",{style:{marginBottom:"10px"}},m.default.createElement(i.default,{title:E.length>=2?"单位组最多3级单位":""},m.default.createElement("span",{style:{cursor:"pointer",color:E.length>=2?"#ccc":"#1eb6f8"},onClick:function(){E.length>=2||(E.push({amount:"",uuid:""}),e.setState({unitList:E}))}},m.default.createElement(o.default,{type:"plus"}),"增加单位"))):"","modify"===f?m.default.createElement("div",null,m.default.createElement(c.default,{onChange:function(t){e.setState({allowSave:t.target.checked})}},"所有历史单据中，该商品的单位将统一转换为基本单位")):""))}}]),t}())||n;t.default=_},1464:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=d(a(47)),r=d(a(171)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(170);var o=d(a(1)),l=(d(a(0)),a(18));a(56);a(1240);var u=s(a(27)),c=(a(22),d(a(1244)),d(a(1288)),a(127),s(a(1241)));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=r.default.TreeNode,g=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={showMultiUnit:!1},f(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.showWarehouseModal,i=e.onClose,s=e.treeList,d=e.selectedKeys;this.state.showMultiUnit;return o.default.createElement(n.default,{destroyOnClose:!0,className:"add-unit",width:"500px",visible:a,maskClosable:!1,title:"选择仓库",onCancel:function(){i(),t(c.changeInventoryCardViews("selectedKeys",(0,l.fromJS)([])))},onOk:function(){t(c.getSomeWarehouseTree(d.toJS(),function(){i()}))}},o.default.createElement(r.default,{checkable:!0,defaultExpandAll:!0,checkedKeys:d.toJS(),selectedKeys:[],onCheck:function(e,a){t(c.changeInventoryCardViews("selectedKeys",(0,l.fromJS)(e)))},onSelect:function(){return""}},s.size?function e(t,a){return t.map(function(t){return t.get("childList")&&t.get("childList").size?o.default.createElement(m,{title:t.get("name"),key:""+t.get("uuid")},e(t.get("childList"),a+u.TREE_JOIN_STR+t.get("uuid"))):o.default.createElement(m,{title:t.get("name"),key:""+t.get("uuid")})})}(s,""):[]))}}]),t}();t.default=g},1465:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=E(a(37)),r=E(a(1256)),i=E(a(14)),o=E(a(171)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(38),a(1257),a(78),a(170);var u=a(1),c=E(u),s=(E(a(0)),a(18));a(56);a(1240);var d=y(a(27)),f=a(22),m=(E(a(1244)),a(127)),g=E(a(487)),p=E(a(1376)),C=E(a(1362)),h=y(a(1241));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function S(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o.default.TreeNode;var _=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={showMultiUnit:!1,hideChildList:[],newBatchNumber:"",newBatchDate:"",placeArr:[]},T(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,o=t.warehousePriceMode,l=t.isOpenedQuantity,y=t.enableWarehouse,E=t.treeList,T=t.showWarehouseModal,_=t.isCheckOut,v=t.assistClassificationList,b=t.batchList,L=t.uuid,I=t.financialInfo,N=this.props.unit||(0,s.fromJS)({}),O=(I.get("serialList")||(0,s.fromJS)([]),I.get("openAssist")),A=I.get("openSerial"),R=I.get("openBatch"),w=I.get("openShelfLife"),P=I.get("shelfLife"),U=this.state,M=(U.showMultiUnit,U.hideChildList),k=U.placeArr,j=U.index,J=U.batchIndex,D=1,x=0,F=0;!function e(t){return t.map(function(t){t.get("childList")&&t.get("childList").size&&!t.get("isEnd")?e(t.get("childList")):(O||R)&&l?(x+=t.get("childList").reduce(function(e,t){return e+(Number(t.get("openedAmount"))||0)},0),F+=t.get("childList").reduce(function(e,t){return e+(Number(t.get("openedQuantity"))||0)},0)):(x+=Number(t.get("openedAmount"))||0,F+=Number(t.get("openedQuantity"))||0)})}(E);var H="";return l&&y?H="quantity-warehouse-table":!l&&y&&(H="warehouse-table"),c.default.createElement(m.TableAll,{className:"inventory-table-width "+H},c.default.createElement(m.TableBody,null,c.default.createElement(m.TableItem,{line:2},c.default.createElement("li",null,"仓库编码"),c.default.createElement("li",{key:"1",onClick:function(){if(_)n.default.info("已结账，不允许修改期初值");else if(a(h.getWarehouseTree(T)),E.size){var e=[];!function t(a){return a.map(function(a){a.get("childList")&&a.get("childList").size?t(a.get("childList")):e.push(a.get("warehouseUuid"))})}(E),a(h.changeInventoryCardViews("selectedKeys",(0,s.fromJS)(e)))}}},"仓库",c.default.createElement(m.XfnIcon,{type:"config-edit"})),l?c.default.createElement("li",null,"期初数量"):"",c.default.createElement("li",null,"期初余额")),function t(n,C,E,T){return n.map(function(E,I){var P=I>0?n.getIn([I-1,"childList"]).size%2==0?P+I:P+I+1:P+I;if(!E.get("childList")||!E.get("childList").size||E.get("isEnd")){D++,E.getIn(["childList",0,"assistList"])||(0,s.fromJS)([]);var U=E.get("childList")||(0,s.fromJS)([]),k=(R||O)&&l?U.reduce(function(e,t){return e+(Number(t.get("openedQuantity"))||0)},0):E.get("openedQuantity"),j=(R||O)&&l?U.reduce(function(e,t){return e+(Number(t.get("openedAmount"))||0)},0):E.get("openedAmount"),J=5+7*(T-1)+"px";return c.default.createElement("div",{className:"item-content"},c.default.createElement(m.TableItem,{key:E.get("warehouseUuid"),line:P},c.default.createElement("li",{className:"inventory-code",style:{paddingLeft:J}},E.get("warehouseCode")),c.default.createElement("li",{className:"inventory-name"},c.default.createElement("span",null,E.get("warehouseName")),(O||R)&&l?c.default.createElement(i.default,{type:"plus",onClick:function(){var e=(E.get("childList")||(0,s.fromJS)([])).push((0,s.fromJS)({openedQuantity:"",openedAmount:""}));a(h.changeInventoryCardContent(["openList"].concat(S(C),[I,"childList"]),e))}}):""),l?O||R?U.size?c.default.createElement("li",{className:"force-centet"},c.default.createElement("span",{className:"input-quantity"},(0,f.formatFour)(k)),c.default.createElement("span",null,N.get("name"))):c.default.createElement("li",null):c.default.createElement("li",{className:"force-centet"},A?c.default.createElement("div",{className:"serial-box",onClick:function(){a(h.changeInventoryCardViews("serialPlaceArr",(0,s.fromJS)(["openList"].concat(S(C),[I])))),E.get("openUuid")&&!E.get("isModify")?a(h.getSerialList(L,E.get("openUuid"))):(a(h.changeInventoryCardViews("serialList",E.get("serialList")||(0,s.fromJS)([]))),a(h.changeInventoryCardViews("serialModal",!0)))}},E.get("openedQuantity")>0?(0,f.formatFour)(E.get("openedQuantity")):"点击输入",c.default.createElement(m.XfnIcon,{type:"edit-pen"})):c.default.createElement(g.default,{className:"input-quantity",type:"regAmount",disabled:_,placeholder:"必填，请输入数量",value:k,onChange:function(e){(0,f.numberFourTest)(e,function(e){a(h.changeInventoryCardContent(["openList"].concat(S(C),[I,"openedQuantity"]),e))},!0)}}),c.default.createElement("span",null,N.get("name"))):"",(O||R)&&l?c.default.createElement("li",{className:"force-centet"},c.default.createElement("span",{className:"input-amount"},(0,f.formatMoney)(j)),c.default.createElement("span",null,"元")):c.default.createElement("li",{className:"force-centet"},c.default.createElement(m.NumberInput,{type:"regAmount",className:"input-amount",disabled:_,placeholder:"必填，请输入金额",value:E.get("openedAmount"),onChange:function(e){a(h.changeInventoryCardContent(["openList"].concat(S(C),[I,"openedAmount"]),e))}}),c.default.createElement("span",null,"元"))),U.size&&l&&(O||R)?U.map(function(t,n){var o=b.find(function(e){return e.get("batchUuid")===t.get("batchUuid")&&t.get("batchUuid")||e.get("batch")===t.get("batch")});return c.default.createElement(m.TableItem,{className:"detail-item",line:P},c.default.createElement("li",null),c.default.createElement("li",{className:"inventory-select"},O&&v.map(function(e){return c.default.createElement(u.Fragment,null,c.default.createElement(m.XfnSelect,{showSearch:!0,className:"assist-select",placeholder:e.get("name"),value:((t.get("assistList")||(0,s.fromJS)([])).find(function(t){return t.get("classificationUuid")===e.get("uuid")})||(0,s.fromJS)({})).get("propertyName")||void 0,onChange:function(r){var i=r.split(d.TREE_JOIN_STR),o=i[0],l=i[1],u=t.get("assistList")||(0,s.fromJS)([]),c=u.size,f=u.findIndex(function(t){return t.get("classificationUuid")===e.get("uuid")});0===c?a(h.changeInventoryCardContent(["openList"].concat(S(C),[I,"childList",n,"assistList"]),(0,s.fromJS)([{classificationUuid:e.get("uuid"),classificationName:e.get("name"),propertyUuid:o,propertyName:l}]))):-1===f?a(h.changeInventoryCardContent(["openList"].concat(S(C),[I,"childList",n,"assistList",c]),(0,s.fromJS)({classificationUuid:e.get("uuid"),classificationName:e.get("name"),propertyUuid:o,propertyName:l}))):(a(h.changeInventoryCardContent(["openList"].concat(S(C),[I,"childList",n,"assistList",f,"propertyUuid"]),o)),a(h.changeInventoryCardContent(["openList"].concat(S(C),[I,"childList",n,"assistList",f,"propertyName"]),l)))}},e.get("propertyList").map(function(e){return c.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+d.TREE_JOIN_STR+e.get("name")},e.get("name"))})))}),R?c.default.createElement(u.Fragment,null,c.default.createElement("div",{className:"batch-content"},c.default.createElement(m.XfnSelect,{showSearch:!0,className:"batch-select input"+n,placeholder:"请选择/新增批次",value:o?o.get("batch")+(w&&o.get("expirationDate")?"("+o.get("expirationDate")+")":""):void 0,showArrow:!1,dropdownRender:function(e){return c.default.createElement("div",{onMouseDown:function(e){return e.preventDefault()},className:"edit-box"},e,c.default.createElement(r.default,{style:{margin:"4px 0"}}),c.default.createElement("div",{className:"edit-area",onClick:function(){a(h.changeInventoryCardViews("batchModal",!0))}},c.default.createElement(m.XfnIcon,{type:"edit-pen"}),"修改批次信息"))},onChange:function(t){var r=t.split(d.TREE_JOIN_STR),i=r[0],o=r[1],l=r[2];E.getIn(["childList",0,"assistList"]),e.setState(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},"value"+n,!1)),a(h.changeInventoryCardContent(["openList"].concat(S(C),[I,"childList",n,"batch"]),i)),a(h.changeInventoryCardContent(["openList"].concat(S(C),[I,"childList",n,"batchUuid"]),o)),a(h.changeInventoryCardContent(["openList"].concat(S(C),[I,"childList",n,"expirationDate"]),l))}},b.map(function(e){return c.default.createElement(Option,{key:e.get("batch"),value:""+e.get("batch")+d.TREE_JOIN_STR+(e.get("batchUuid")||"")+d.TREE_JOIN_STR+e.get("expirationDate")},e.get("batch")+(w&&e.get("expirationDate")?"("+e.get("expirationDate")+")":""))})),c.default.createElement("span",{className:"add-button",onClick:function(){e.setState({batchDrop:!0,batchIndex:n,index:I,placeArr:C})}},"新增"))):"",c.default.createElement("div",{className:"close-button"},c.default.createElement(i.default,{type:"close",onClick:function(){a(h.changeInventoryCardContent(["openList"].concat(S(C),[I,"childList"]),U.splice(U.size-1,1)))}}))),l?c.default.createElement("li",{className:"force-centet"},A?c.default.createElement("div",{className:"serial-box",onClick:function(){a(h.changeInventoryCardViews("serialPlaceArr",(0,s.fromJS)(["openList"].concat(S(C),[I,"childList",n])))),t.get("openUuid")&&!t.get("isModify")?a(h.getSerialList(L,t.get("openUuid"))):(a(h.changeInventoryCardViews("serialList",t.get("serialList")||(0,s.fromJS)([]))),a(h.changeInventoryCardViews("serialModal",!0)))}},t.get("openedQuantity")>0?(0,f.formatFour)(t.get("openedQuantity")):"点击输入",c.default.createElement(m.XfnIcon,{type:"edit-pen"})):c.default.createElement(g.default,{className:"input-quantity",type:"regAmount",disabled:_,placeholder:"必填，请输入数量",value:t.get("openedQuantity"),onChange:function(e){(0,f.numberFourTest)(e,function(e){a(h.changeInventoryCardContent(["openList"].concat(S(C),[I,"childList",n,"openedQuantity"]),e))},!0)}}),c.default.createElement("span",null,N.get("name"))):"",c.default.createElement("li",{className:"force-centet"},c.default.createElement(m.NumberInput,{type:"regAmount",className:"input-amount",disabled:_,placeholder:"必填，请输入金额",value:t.get("openedAmount"),onChange:function(e){a(h.changeInventoryCardContent(["openList"].concat(S(C),[I,"childList",n,"openedAmount"]),e))}}),c.default.createElement("span",null,"元")))}):"")}D++;var x=-1==M.indexOf(E.get("warehouseUuid"));return c.default.createElement("div",{className:"item-content"},c.default.createElement(p.default,{item:E,showChild:x,hideChildList:M,warehousePriceMode:o,isOpenedQuantity:l,enableWarehouse:y,unit:N,showChildFunc:function(){return e.setState({hideChildList:M.filter(function(e){return e!=E.get("warehouseUuid")})})},hideChildFunc:function(){return e.setState({hideChildList:[].concat(S(M),[E.get("warehouseUuid")])})},line:P,level:T,isCheckOut:_,dispatch:a,index:I,openAssist:O,openBatch:R}),x?t(E.get("childList"),[].concat(S(C),[I,"childList"]),0,T+1):[])})}(E,[],0,1),c.default.createElement(m.TableItem,{key:"2",line:D,className:"no-border-bottom"},c.default.createElement("li",null),c.default.createElement("li",null,"合计"),l?c.default.createElement("li",{className:"force-centet"},c.default.createElement("span",{className:"input-quantity"},(0,f.formatFour)(F)),c.default.createElement("span",null,N.get("name"))):"",c.default.createElement("li",{className:"force-centet"},c.default.createElement("span",{className:"input-amount"},(0,f.formatMoney)(x)),c.default.createElement("span",null,"元"))),this.state.batchDrop?c.default.createElement(C.default,{shelfLife:P,visible:this.state.batchDrop,index:this.state.batchIndex||0,dispatch:a,uuid:L,openShelfLife:w,callBack:function(e,t,n){a(h.changeInventoryCardContent(["openList"].concat(S(k),[j,"childList",J,"batch"]),e)),a(h.changeInventoryCardContent(["openList"].concat(S(k),[j,"childList",J,"batchUuid"]),t)),a(h.changeInventoryCardContent(["openList"].concat(S(k),[j,"childList",J,"expirationDate"]),n))},close:function(){return e.setState({batchDrop:!1})}}):""))}}]),t}();t.default=_},1466:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=h(a(1256)),r=h(a(45)),i=h(a(14)),o=h(a(171)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1257),a(55),a(78),a(170);var u=h(a(1)),c=(h(a(0)),a(18));a(56);a(1240);var s=C(a(27)),d=a(22),f=(h(a(1244)),a(127)),m=h(a(487)),g=(h(a(1376)),h(a(1362))),p=C(a(1241));h(a(1237));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o.default.TreeNode;var E=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={showMultiUnit:!1,hideChildList:[],newBatchNumber:"",newBatchDate:"",x:"0px",y:"0px"},y(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,o=(t.warehousePriceMode,t.isOpenedQuantity),l=(t.enableWarehouse,t.treeList),C=(t.showWarehouseModal,t.isCheckOut),h=t.assistClassificationList,y=t.batchList,E=t.uuid,S=t.financialInfo,T=t.insertOrModify,_=this.props.unit||(0,c.fromJS)({}),v=(S.get("serialList")||(0,c.fromJS)([]),S.get("openAssist")),b=S.get("openBatch"),L=S.get("openSerial"),I=S.get("openShelfLife"),N=S.get("shelfLife"),O=this.state,A=(O.showMultiUnit,O.hideChildList,O.batchIndex),R=0,w=0;l.map(function(e){w+=Number(e.get("openedQuantity"))||0,R+=Number(e.get("openedAmount"))||0});var P=l.size?l:(0,c.fromJS)([{}]),U="";return U=o&&v&&b?"quantity-assist-batch-table":o&&(v||b)?"quantity-assist-or-batch-table":"quantity-table",u.default.createElement(f.TableAll,{className:"inventory-table-width "+U,style:{display:o?"":"none"}},u.default.createElement(f.TableBody,null,u.default.createElement(f.TableItem,{line:2},v||b?u.default.createElement("li",null,"操作"):"",v?u.default.createElement("li",null,"属性"):"",b?u.default.createElement("li",null,"批次"):"",u.default.createElement("li",null,"期初数量"),u.default.createElement("li",null,"期初余额")),u.default.createElement("div",{className:"item-content"},P.map(function(t,o){var g=o+1;t.getIn(["childList",0,"assistList"])||(0,c.fromJS)([]),t.get("childList")||(0,c.fromJS)([{}]);return u.default.createElement(f.TableItem,{className:"detail-item",line:g},v||b?u.default.createElement("li",{className:"choose-li"},u.default.createElement("span",null,u.default.createElement(i.default,{type:"plus",onClick:function(){l.size?a(p.changeInventoryCardContent("openList",l.push((0,c.fromJS)({})))):a(p.changeInventoryCardContent("openList",l.concat((0,c.fromJS)([{},{}]))))}})),u.default.createElement("span",null,u.default.createElement(i.default,{type:"close",onClick:function(){l.size?a(p.changeInventoryCardContent("openList",l.splice(o,1))):a(p.changeInventoryCardContent("openList",(0,c.fromJS)([{}])))}}))):"",v?u.default.createElement("li",null,h.map(function(e){return u.default.createElement("div",{className:"batch-content",style:{maxWidth:"calc("+100/h.size+"% - 6px)"}},u.default.createElement(r.default,{className:"assist-select",placeholder:e.get("name"),value:((t.get("assistList")||(0,c.fromJS)([])).find(function(t){return t.get("classificationUuid")===e.get("uuid")})||(0,c.fromJS)({})).get("propertyName")||void 0,onChange:function(n){var r=n.split(s.TREE_JOIN_STR),i=r[0],l=r[1],u=t.get("assistList")||(0,c.fromJS)([]),d=u.size,f=u.findIndex(function(t){return t.get("classificationUuid")===e.get("uuid")});0===d?a(p.changeInventoryCardContent(["openList",o,"assistList"],(0,c.fromJS)([{classificationUuid:e.get("uuid"),classificationName:e.get("name"),propertyUuid:i,propertyName:l}]))):-1===f?a(p.changeInventoryCardContent(["openList",o,"assistList",d],(0,c.fromJS)({classificationUuid:e.get("uuid"),classificationName:e.get("name"),propertyUuid:i,propertyName:l}))):(a(p.changeInventoryCardContent(["openList",o,"assistList",f,"propertyUuid"],i)),a(p.changeInventoryCardContent(["openList",o,"assistList",f,"propertyName"],l)))}},e.get("propertyList").map(function(e){return u.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+s.TREE_JOIN_STR+e.get("name")},e.get("name"))})))})):"",b?u.default.createElement("li",null,u.default.createElement("div",{className:"batch-content"},u.default.createElement(f.XfnSelect,{className:"batch-select input"+o,placeholder:"请选择/新增批次",value:t.get("batch")?t.get("batch")+(I&&t.get("expirationDate")?"("+t.get("expirationDate")+")":""):void 0,showArrow:!1,showSearch:!0,dropdownRender:function(e){return u.default.createElement("div",{onMouseDown:function(e){return e.preventDefault()},className:"edit-box"},e,u.default.createElement(n.default,{style:{margin:"4px 0"}}),u.default.createElement("div",{className:"edit-area",onClick:function(){a(p.changeInventoryCardViews("batchModal",!0))}},u.default.createElement(f.XfnIcon,{type:"edit-pen"}),"修改批次信息"))},onChange:function(n){var r=n.split(s.TREE_JOIN_STR),i=r[0],l=r[1]||"",u=r[2];t.getIn(["childList",0,"assistList"]);e.setState(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},"value"+o,!1)),a(p.changeInventoryCardContent(["openList",o,"batch"],i)),a(p.changeInventoryCardContent(["openList",o,"batchUuid"],"insert"===T?"":l)),a(p.changeInventoryCardContent(["openList",o,"expirationDate"],u))}},y.map(function(e){return u.default.createElement(Option,{key:e.get("batch"),value:""+e.get("batch")+s.TREE_JOIN_STR+(e.get("batchUuid")||"")+s.TREE_JOIN_STR+e.get("expirationDate")},e.get("batch")+(I&&e.get("expirationDate")?"("+e.get("expirationDate")+")":""))})),u.default.createElement("span",{className:"add-button",onClick:function(){e.setState({batchDrop:!0,batchIndex:o})}},"新增"))):"",u.default.createElement("li",{className:"force-centet"},L?u.default.createElement("div",{className:"serial-box",onClick:function(){a(p.changeInventoryCardViews("serialPlaceArr",(0,c.fromJS)(["openList",o]))),t.get("openUuid")&&!t.get("isModify")?a(p.getSerialList(E,t.get("openUuid"))):(a(p.changeInventoryCardViews("serialList",t.get("serialList")||(0,c.fromJS)([]))),a(p.changeInventoryCardViews("serialModal",!0)))}},t.get("openedQuantity")>0?(0,d.formatFour)(t.get("openedQuantity")):"点击输入",u.default.createElement(f.XfnIcon,{type:"edit-pen"})):u.default.createElement(m.default,{className:"input-quantity",type:"regAmount",disabled:C,placeholder:"必填，请输入数量",value:t.get("openedQuantity"),onChange:function(e){(0,d.numberFourTest)(e,function(e){a(p.changeInventoryCardContent(["openList",o,"openedQuantity"],e))})}}),u.default.createElement("span",{className:"unit"},_.get("name"))),u.default.createElement("li",{className:"force-centet"},u.default.createElement(f.NumberInput,{className:"input-amount",type:"regAmount",disabled:C,placeholder:"必填，请输入金额",value:t.get("openedAmount"),onChange:function(e){a(p.changeInventoryCardContent(["openList",o,"openedAmount"],e))}}),u.default.createElement("span",{className:"unit"},"元")))})),v||b?u.default.createElement(f.TableItem,{key:"2",line:l.size+1,className:"no-border-bottom"},v?u.default.createElement("li",null):"",b?u.default.createElement("li",null):"",u.default.createElement("li",null,"合计"),u.default.createElement("li",{className:"force-centet"},u.default.createElement("span",{className:"input-quantity"},(0,d.formatFour)(w)),u.default.createElement("span",null,_.get("name"))),u.default.createElement("li",{className:"force-centet"},u.default.createElement("span",{className:"input-amount"},(0,d.formatMoney)(R)),u.default.createElement("span",null,"元"))):"",this.state.batchDrop?u.default.createElement(g.default,{visible:this.state.batchDrop,index:A||0,dispatch:a,uuid:E,shelfLife:N,openShelfLife:I,close:function(){return e.setState({batchDrop:!1})},callBack:function(e,t,n){a(p.changeInventoryCardContent(["openList",A,"batch"],e)),a(p.changeInventoryCardContent(["openList",A,"batchUuid"],t)),a(p.changeInventoryCardContent(["openList",A,"expirationDate"],n))}}):""))}}]),t}();t.default=E},1467:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=y(a(47)),i=y(a(1267)),o=y(a(129)),l=y(a(100)),u=y(a(14)),c=y(a(171)),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(1265),a(128),a(99),a(78),a(170);var d=y(a(1)),f=a(17),m=a(127),g=h(a(27)),p=a(18),C=h(a(1241));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S=c.default.TreeNode,T=(0,f.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={inputValue:""},n.closeModal=function(){n.props.dispatch(C.changeInventoryCardViews("showStockModal",!1)),n.props.dispatch(C.changeInventoryCardViews("materialSelectedKeys","")),n.props.dispatch(C.changeInventoryCardViews("selectList",(0,p.fromJS)([]))),n.props.dispatch(C.changeInventoryCardViews("selectItem",(0,p.fromJS)([])))},E(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.MemberList,s=(t.searchCardContent,t.searchList,t.hasSearchContent,t.thingsList),f=t.materialSelectedKeys,h=t.showModal,y=t.selectItem,E=t.selectList,T=(t.cancel,t.materialList),_=(t.categoryList,t.code),v=y&&y.size||0,b=n?function e(t,a,n){return t&&t.map(function(t,r){return t.childList&&t.childList.length?d.default.createElement(S,{key:""+t.uuid+g.TREE_JOIN_STR+t.name+g.TREE_JOIN_STR+n,title:t.name},e(t.childList,a,n+1)):d.default.createElement(S,{key:""+t.uuid+g.TREE_JOIN_STR+t.name+g.TREE_JOIN_STR+n,title:t.name,checkable:!0})})}(n.toJS(),["全部"],1):"",L=(s.map(function(e){return{string:""+e.get("code")+g.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")}}),s.toJS().filter(function(t){return!e.state.inputValue||(t.code.indexOf(e.state.inputValue)>-1||t.name.indexOf(e.state.inputValue)>-1)}).filter(function(e){return e.code!==_})),I=L.every(function(e){return E.some(function(t){return t===e.uuid})})&&L.length;return d.default.createElement(r.default,{className:"select-modal",title:"选择存货",visible:h,onCancel:function(){e.closeModal()},onOk:function(){var t=T.toJS(),n=y.toJS().map(function(e){return e.materialUuid=e.uuid,1===e.unitList.length&&(e.unitUuid=e.unitList[0].uuid,e.unitName=e.unitList[0].name),e});e.closeModal(),a(C.changeInventoryInnerSrting(["assemblySheet","materialList"],(0,p.fromJS)(t.concat(n))))},width:"800px"},d.default.createElement("div",{className:"lsqc-contacts-card-top"},d.default.createElement("div",{className:"table-tree-container",style:{height:L.length>5?"461px":"249px"}},d.default.createElement(c.default,{defaultExpandAll:!0,onSelect:function(e){if(e[0]){var t=e[0].split(g.TREE_JOIN_STR),n=t[0],r=t[1],i=t[2];"all"===n?(a(C.changeInventoryCardViews("materialSelectedKeys","all")),a(C.getInventoryAllCardList([],"showStockModal"))):(a(C.changeInventoryCardViews("materialSelectedKeys",""+n+g.TREE_JOIN_STR+r+g.TREE_JOIN_STR+i)),a(C.getInventorySomeCardList(n,i)))}},selectedKeys:[f||"all"]},d.default.createElement(S,{key:"all",title:"全部",checkable:!0}),b)),d.default.createElement(m.TableAll,{className:"contacts-table-right",style:{height:L.length>5?"461px":"249px"}},d.default.createElement("span",{className:"lsqc-serch"},d.default.createElement(u.default,{className:"lsqc-serch-icon",type:"search",onClick:function(){}}),d.default.createElement(l.default,{placeholder:"搜索",className:"lsqc-serch-input",style:{paddingLeft:10},onChange:function(t){e.setState({inputValue:t.target.value})}})),d.default.createElement("div",{className:"table-title-wrap"},d.default.createElement("ul",{className:"table-title table-title-charge"},d.default.createElement("li",{onClick:function(e){e.stopPropagation(),a(C.chargeItemCheckboxCheckAll(I,L,s))}},d.default.createElement(o.default,{checked:I})),d.default.createElement("li",null,d.default.createElement("span",null,"编号")),d.default.createElement("li",null,d.default.createElement("span",null,"名称")))),d.default.createElement(m.TableBody,null,L&&L.map(function(t){var n=E.indexOf(t.uuid)>-1;return(t.code+" "+t.name).indexOf(e.state.inputValue)>-1?d.default.createElement(m.TableItem,{className:"contacts-table-width-charge",key:t.uuid,onClick:function(e){e.stopPropagation()}},d.default.createElement("li",{onClick:function(e){e.stopPropagation();var r=t.unit.unitList||[];r.unshift({uuid:t.unit.uuid,name:t.unit.name}),a(C.chargeItemCheckboxCheck(n,t.uuid,t.code,t.name,r))}},d.default.createElement(o.default,{checked:n})),d.default.createElement("li",null,t.code),d.default.createElement("li",null,t.name)):""})))),d.default.createElement("div",{className:"charge-chosen-project"},"选择存货：",y&&y.map(function(e){return d.default.createElement(i.default,{closable:!0,onClose:function(){a(C.chargeItemCheckboxCheck(!0,e.get("uuid")))}},e.get("code")," ",e.get("name"))})),d.default.createElement("div",{style:{display:v>0?"":"none",margin:"0 0 10px 20px"}},v,"个存货"))}}]),t}())||n;t.default=T},1468:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(a(47)),r=p(a(100)),i=p(a(32)),o=p(a(129)),l=p(a(171)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(99),a(51),a(128),a(170);var c=p(a(1)),s=(p(a(0)),a(18));a(56);a(1240);g(a(27));var d=p(a(90)),f=(a(22),p(a(1244)),p(a(1288)),a(127)),m=g(a(1241));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}l.default.TreeNode;var h=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={addAssistCategroy:!1,activeUuid:"",activeType:"",newAssistClassificationList:n.props.assistClassificationList},n.emptySelect=function(){n.setState({activeType:"",activeUuid:""})},n.afterAdd=function(){n.setState({activeType:"",activeUuid:"plus"})},C(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentDidMount",value:function(){this.props.dispatch(m.getAssistList(this.props.uuid))}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,l=t.assistModal,u=t.allAssistClassificationList,g=(t.assistClassificationList,t.onClose),p=this.state,C=p.addAssistCategroy,h=p.activeUuid,y=p.activeType,E=p.title,S=p.classificationUuid,T=p.newAssistClassificationList,_=u.findIndex(function(e){return e.get("uuid")===S});return c.default.createElement(n.default,{destroyOnClose:!0,className:"add-unit",width:"800px",visible:l,maskClosable:!1,title:"辅助属性",onCancel:function(){g(),a(m.changeInventoryCardViews("selectedKeys",(0,s.fromJS)([])))},onOk:function(){a(m.changeInventoryInnerSrting(["financialInfo","assistClassificationList"],T)),g()}},c.default.createElement("div",null,c.default.createElement("div",{style:{color:"#999"}}," *请勾选属性，最多支持3个属性分类"),c.default.createElement("div",null,c.default.createElement(f.TableAll,{className:"assist-table"},c.default.createElement(f.TableBody,null,u.size?u.map(function(t,a){return c.default.createElement(f.TableItem,null,c.default.createElement("li",null,t.get("name")),c.default.createElement("li",null,t.get("propertyList").map(function(a){return c.default.createElement("span",null,c.default.createElement(o.default,{disabled:T.size>=3&&T.every(function(e){return e.get("name")!==t.get("name")}),checked:T.some(function(e){return e.get("propertyList").find(function(e){return e.get("uuid")===a.get("uuid")})}),onClick:function(n){var r=T.findIndex(function(e){return e.get("uuid")===t.get("uuid")}),i=T,o=(0,s.fromJS)([]);n.target.checked?(-1===r&&(i=T.push(t.set("propertyList",(0,s.fromJS)([])).set("isUniform",!0))),o=i.updateIn([r,"propertyList"],function(e){return e.push(a)})):o=n.target.checked||1!==i.getIn([r,"propertyList"]).size?i.updateIn([r,"propertyList"],function(e){return e.splice(e.findIndex(function(e){return e.get("uuid")===a.get("uuid")}),1)}):i.delete(r),e.setState({newAssistClassificationList:o})}},a.get("name")))}),c.default.createElement("span",{className:"assist-add",onClick:function(){e.setState({addAssistCategroy:!0,title:"属性管理："+t.get("name"),classificationUuid:t.get("uuid"),activeUuid:"plus",activeType:""})}},c.default.createElement(d.default,{type:"big-plus"}))))}):c.default.createElement(f.TableItem,null,c.default.createElement("div",{className:"assist-item img-kongtaitu",style:{borderBottom:0}},c.default.createElement("div",null),c.default.createElement("div",null,"暂无属性分类，请新增属性分类"))))),c.default.createElement("span",{onClick:function(){return e.setState({addAssistCategroy:!0,activeUuid:"plus",activeType:"",title:"属性分类"})}},c.default.createElement(i.default,{type:"primary",style:{background:"#5e81d1",marginTop:"12px",borderColor:"#5e81d1"}},c.default.createElement(d.default,{type:"big-plus"}),"新增属性分类")))),c.default.createElement(n.default,{visible:C,title:E,onCancel:function(){return e.setState({addAssistCategroy:!1})},footer:[c.default.createElement(i.default,{onClick:function(){e.setState({addAssistCategroy:!1})}},"取消"),c.default.createElement(i.default,{disabled:!h||"plus"===h,onClick:function(){a("属性分类"===E?m.deleteAssistCategroy(h,e.emptySelect):m.deleteAssist(h,e.emptySelect))}},"删除"),c.default.createElement(i.default,{type:"primary",disabled:!h,onClick:function(){a("属性分类"===E?"plus"===h?m.insertAssistCategroy(y,e.afterAdd):m.modifyAssistCategroy(h,y):"plus"===h?m.insertAssist(S,y,e.afterAdd):m.modifyAssist(h,S,y))}},"保存")]},c.default.createElement("div",null,c.default.createElement(f.Tab,{addButton:!0,tabList:"属性分类"===E?u.toJS().map(function(e){return{key:e.uuid,value:e.name}}):(u.getIn([_,"propertyList"])||(0,s.fromJS)([])).toJS().map(function(e){return{key:e.uuid,value:e.name}}),activeKey:h,addKey:"plus",addFunc:function(){e.setState({activeUuid:"plus",activeType:""})},tabFunc:function(t){e.setState({activeUuid:t.key,activeType:t.value})}}),c.default.createElement("div",{style:{display:"flex"}},c.default.createElement("span",{style:{width:"72px"}},"分类名称："),c.default.createElement(r.default,{value:y,onChange:function(t){e.setState({activeType:t.target.value})}})))))}}]),t}();t.default=h},1469:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments[1];return((e={},l(e,i.INIT_ADD_INVENTORY_STATE,function(){return t.set("inventoryCardTemp",(0,r.fromJS)(c.get("inventoryCardTemp")))}),l(e,i.BEFORE_ADD_INVENTORY_CONF_CARD_INVENTORY,function(){return t=t.set("tags",a.originTags).setIn(["views","insertOrModify"],"insert").set("inventoryCardTemp",c.get("inventoryCardTemp")).setIn(["inventoryCardTemp","isCheckOut"],a.data.isCheckOut).setIn(["inventoryCardTemp","defaultAc"],(0,r.fromJS)(a.data.defaultAc)).setIn(["inventoryCardTemp","code"],(0,r.fromJS)(a.code)).setIn(["inventoryCardTemp","acId"],(0,r.fromJS)(a.code))}),l(e,i.BEFORE_ADD_INVENTORY_CONF_CARD_RUNNING,function(){return t=t.set("inventoryCardTemp",(0,r.fromJS)(c.get("inventoryCardTemp"))).set("tags",a.originTags).setIn(["views","insertOrModify"],"insert").setIn(["inventoryCardTemp","code"],a.receivedData.code).setIn(["views","fromPage"],"otherPage").setIn(["inventoryCardTemp","defaultAc"],(0,r.fromJS)(a.receivedData.defaultAc))}),l(e,i.BEFORE_EDIT_INVENTORY_CONF_CARD,function(){var e=a.data.openList,n=e&&e.length&&e[0].childList&&e[0].childList.length?e[0].childList:[];return t=t.set("inventoryCardTemp",(0,r.fromJS)(a.data)).setIn(["views","insertOrModify"],"modify").setIn(["views","fromPage"],"inventory").setIn(["views","fromOpen"],a.fromOpen).set("tags",(0,r.fromJS)(a.originTags)).setIn(["inventoryCardTemp","openList"],(0,r.fromJS)(a.enableWarehouse?n:e)).setIn(["inventoryCardTemp","assemblyState"],a.assemblyState),a.data.isOpenedQuantity&&(t=t.setIn(["inventoryCardTemp","CurUnit"],(0,r.fromJS)(a.data.unit))),"OPEN"!==a.assemblyState||a.data.assemblySheet?"OPEN"===a.assemblyState&&a.data.assemblySheet&&!a.data.assemblySheet.materialList&&(t=t.setIn(["inventoryCardTemp","assemblySheet","materialList"],(0,r.fromJS)([{}]))):t=t.setIn(["inventoryCardTemp","assemblySheet"],(0,r.fromJS)({materialList:[{}]})),a.data.categoryTypeList.map(function(e,a){t.get("tags").map(function(a,n){e.ctgyUuid!==a.get("uuid")||(t=t.setIn(["tags",n,"checked"],!0).setIn(["tags",n,"selectUuid"],e.subordinateUuid).setIn(["tags",n,"selectName"],e.subordinateName).setIn(["tags",n,"tree"],(0,r.fromJS)(e.options)))})}),t}),l(e,i.CHANGE_INVENTORY_CARD_CONTENT,function(){return t="object"===n(a.name)?t.setIn(["inventoryCardTemp"].concat(u(a.name)),a.value):t.setIn(["inventoryCardTemp",a.name],a.value)}),l(e,i.CHANGE_INVENTORY_CONF_CARD_VIEWS,function(){return t=t.setIn(["views",a.name],a.value)}),l(e,i.CHANGE_INVENTORY_CONF_CARD_NATURE,function(){return t=t.setIn(["inventoryCardTemp",a.name],a.value)}),l(e,i.CHANGE_INVENTORY_CONF_INNER_STRING,function(){return t=t.setIn(["inventoryCardTemp"].concat(u(a.arr)),a.value)}),l(e,i.CHANGE_INVENTORY_CONF_CARD_CATEGORY_STATUS,function(){var e="";if(t.get("tags").find(function(n,i){if(n.get("uuid")===a.item.get("uuid"))return t=t.setIn(["tags",i,"checked"],a.value).setIn(["tags",i,"tree"],(0,r.fromJS)(a.list)),n.get("selectUuid")&&(e=n.get("selectUuid")),void(a.value&&0===a.list[0].childList.length&&(t=t.setIn(["tags",i,"selectUuid"],a.list[0].uuid).setIn(["tags",i,"selectName"],a.list[0].name),e=a.list[0].uuid))}),a.value){var n=(0,r.fromJS)({ctgyUuid:a.item.get("uuid"),subordinateUuid:e}),i=t.getIn(["inventoryCardTemp","categoryTypeList"]).push(n);t=t.setIn(["inventoryCardTemp","categoryTypeList"],i)}else{var o=t.getIn(["inventoryCardTemp","categoryTypeList"]).findIndex(function(e,t){return e.get("ctgyUuid")===a.item.get("uuid")}),l=t.getIn(["inventoryCardTemp","categoryTypeList"]).delete(o);t=t.setIn(["inventoryCardTemp","categoryTypeList"],l)}return t}),l(e,i.CHANGE_INVENTORY_CONF_CARD_CATEGORY_TYPE,function(){return t.get("tags").map(function(e,n){e.get("uuid")!==a.item.get("uuid")||(t=t.setIn(["tags",n,"selectUuid"],a.uuid).setIn(["tags",n,"selectName"],a.name))}),t.getIn(["inventoryCardTemp","categoryTypeList"]).map(function(e,n){e.get("ctgyUuid")===a.item.get("uuid")&&(t=t.setIn(["inventoryCardTemp","categoryTypeList",n,"subordinateUuid"],a.uuid))}),t}),l(e,i.SAVE_INVENTORY_CONF_CARD_INVENTORY,function(){if("insertAndNew"===a.flag){t.getIn(["inventoryCardTemp","defaultAc"]);t=t.set("inventoryCardTemp",c.get("inventoryCardTemp")).setIn(["inventoryCardTemp","defaultAc"],t.getIn(["inventoryCardTemp","defaultAc"])).setIn(["inventoryCardTemp","categoryTypeList"],t.getIn(["inventoryCardTemp","categoryTypeList"])).setIn(["inventoryCardTemp","code"],a.autoIncrementCode)}return t}),l(e,i.SAVE_INVENTORY_CONF_CARD_RUNNING,function(){return"insertAndNew"===a.flag&&(t=t.setIn(["inventoryCardTemp","name"],"").setIn(["inventoryCardTemp","code"],a.autoIncrementCode)),t}),l(e,i.IVNENTORY_CHARGE_ITEM_CHECKBOX_SELECT,function(){var e=t.getIn(["views","selectList"]),n=t.getIn(["views","selectItem"]),i=a.uuid,o=a.name,l=a.code,u=a.unitList;if(!a.checked&&-1===e.findIndex(function(e){return e===a.uuid})){var c=e.push(a.uuid),s=n.push((0,r.fromJS)({uuid:i,name:o,code:l,unitList:u}));return t.setIn(["views","selectList"],c).setIn(["views","selectItem"],(0,r.fromJS)(s))}if(a.checked){var d=e.splice(e.findIndex(function(e){return e===a.uuid}),1),f=n.splice(e.findIndex(function(e){return e===a.uuid}),1);return t.setIn(["views","selectList"],d).setIn(["views","selectItem"],(0,r.fromJS)(f))}return t}),l(e,i.CHOOSE_ASSIST_UNIFORM,function(){var e=t.getIn(["inventoryCardTemp","financialInfo","assistClassificationList"])||(0,r.fromJS)([]),n=e.map(function(e){return e=a.uuidList.some(function(t){return t===e.get("uuid")})?e.set("isUniform",a.bool):e.set("isUniform",!a.bool)});return t.setIn(["inventoryCardTemp","financialInfo","assistClassificationList"],n)}),l(e,i.EMPTY_WAREHOUSE_LIST_QUANTITY,function(){var e=t.getIn(["inventoryCardTemp","openList"])||(0,r.fromJS)([]),a=function e(t){return t.map(function(t){return t.get("childList")&&t.get("childList").size?t.set("childList",e(t.get("childList"))):t.set("openedQuantity",0)})}(e);return t.setIn(["inventoryCardTemp","openList"],a)}),e)[a.type]||function(){return t})()};var r=a(18),i=o(a(1318));o(a(27)),a(1295);function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var c=(0,r.fromJS)({views:{insertOrModify:"insert",fromPage:"inventory",standardList:[],customList:[],warehouseList:[],selectedKeys:[],stockList:[],selectList:[],selectItem:[],MemberList:[],thingsList:[],allAssistClassificationList:[],materialSelectedKeys:"all",serialPlaceArr:[],serialList:[],batchList:[]},tags:[],inventoryCardTemp:{code:"",name:"",inventoryNature:5,inventoryAcId:"1405",inventoryAcName:"库存商品",opened:"",remark:"",isAppliedSale:!1,isAppliedPurchase:!1,isAppliedProduce:!1,categoryTypeList:[],contacterInfo:!1,isCheckOut:!1,warehouseList:[],openList:[],isOpenedQuantity:!1,isUniformPrice:!0,unit:{name:"",isStandard:!1,uuid:"",unitList:[]},CurUnit:{},openedQuantity:"",unitPriceList:[{type:1},{type:2}],financialInfo:{assistClassificationList:[],batchList:[]}}})},1470:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,a=arguments[1];return((e={},l(e,r.BEFORE_ADD_RELATIVE_CARD,function(){return t=t.set("relativeCardTemp",(0,n.fromJS)(i.relativeCardTemp)).set("tags",a.originTags).setIn(["views","insertOrModify"],"insert").setIn(["views","fromPage"],"relative").setIn(["relativeCardTemp","isCheckOut"],a.data.isCheckOut).setIn(["relativeCardTemp","code"],a.code)}),l(e,r.BEFORE_ADD_RELATIVE_CARD_FROM_RUNNING,function(){return t=t.set("relativeCardTemp",(0,n.fromJS)(i.relativeCardTemp)).set("tags",a.originTags).setIn(["views","insertOrModify"],"insert").setIn(["views","fromPage"],"otherPage").setIn(["views","fromPosition"],a.fromPosition).setIn(["relativeCardTemp","isCheckOut"],a.isCheckOut).setIn(["relativeCardTemp","code"],a.receivedData.code).setIn(["views","range"],a.range)}),l(e,r.BEFORE_EDIT_RELATIVE_CARD,function(){return t=t.set("relativeCardTemp",(0,n.fromJS)(a.data)).setIn(["views","insertOrModify"],"modify").setIn(["views","fromPage"],"relative").set("tags",(0,n.fromJS)(a.originTags)),a.data.categoryTypeList.map(function(e,a){t.get("tags").map(function(a,r){e.ctgyUuid!==a.get("uuid")||(t=t.setIn(["tags",r,"checked"],!0).setIn(["tags",r,"selectUuid"],e.subordinateUuid).setIn(["tags",r,"selectName"],e.subordinateName).setIn(["tags",r,"tree"],(0,n.fromJS)(e.options)))})}),t}),l(e,r.CHANGE_RELATIVE_CARD_CONTENT,function(){return t=t.setIn(["relativeCardTemp",a.name],a.value)}),l(e,r.CHANGE_RELATIVE_CARD_CATEGORY_STATUS,function(){var e="";if(t.get("tags").find(function(r,i){if(r.get("uuid")===a.item.get("uuid"))return t=t.setIn(["tags",i,"checked"],a.value).setIn(["tags",i,"tree"],(0,n.fromJS)(a.list)),r.get("selectUuid")&&(e=r.get("selectUuid")),void(a.value&&0===a.list[0].childList.length&&(t=t.setIn(["tags",i,"selectUuid"],a.list[0].uuid).setIn(["tags",i,"selectName"],a.list[0].name),e=a.list[0].uuid))}),a.value){var r=(0,n.fromJS)({ctgyUuid:a.item.get("uuid"),subordinateUuid:e}),i=t.getIn(["relativeCardTemp","categoryTypeList"]).push(r);t=t.setIn(["relativeCardTemp","categoryTypeList"],i)}else{var o=t.getIn(["relativeCardTemp","categoryTypeList"]).findIndex(function(e,t){return e.get("ctgyUuid")===a.item.get("uuid")}),l=t.getIn(["relativeCardTemp","categoryTypeList"]).delete(o);t=t.setIn(["relativeCardTemp","categoryTypeList"],l)}return t}),l(e,r.CHANGE_RELATIVE_CARD_CATEGORY_TYPE,function(){return t.get("tags").map(function(e,n){e.get("uuid")!==a.item.get("uuid")||(t=t.setIn(["tags",n,"selectUuid"],a.uuid).setIn(["tags",n,"selectName"],a.name))}),t.getIn(["relativeCardTemp","categoryTypeList"]).map(function(e,n){e.get("ctgyUuid")===a.item.get("uuid")&&(t=t.setIn(["relativeCardTemp","categoryTypeList",n,"subordinateUuid"],a.uuid))}),t}),l(e,r.SAVE_RELATIVE_CARD,function(){return"insertAndNew"===a.flag&&(t=t.setIn(["relativeCardTemp","name"],"").setIn(["relativeCardTemp","code"],a.autoIncrementCode).setIn(["relativeCardTemp","companyAddress"],"").setIn(["relativeCardTemp","companyTel"],"").setIn(["relativeCardTemp","financeName"],"").setIn(["relativeCardTemp","financeTel"],"").setIn(["relativeCardTemp","receivableOpened"],"").setIn(["relativeCardTemp","advanceOpened"],"").setIn(["relativeCardTemp","payableOpened"],"").setIn(["relativeCardTemp","prepaidOpened"],"")),t}),e)[a.type]||function(){return t})()};var n=a(18),r=o(a(1344)),i=(o(a(27)),a(1295));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=(0,n.fromJS)({views:{insertOrModify:"insert",fromPage:"relative"},tags:[],relativeCardTemp:{name:"",code:"",isPayUnit:!1,isReceiveUnit:!1,payableAcName:"应付账款",receivableAcName:"应收账款",advanceAcName:"预收账款",prepaidAcName:"预付账款",payableAcId:"2202",receivableAcId:"1122",advanceAcId:"2203",prepaidAcId:"1123",companyAddress:"",companyTel:"",financeName:"",financeTel:"",remark:"",receivableOpened:"",advanceOpened:"",payableOpened:"",prepaidOpened:"",categoryTypeList:[],insertFrom:"",enablePrepaidAc:!1,enableAdvanceAc:!1,contacterInfo:!1,isCheckOut:!1}})},1471:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,a=arguments[1];return((e={},l(e,r.BEFORE_ADD_PROJECT_CARD,function(){return a.noFresh||(t=t.set("projectCardTemp",(0,n.fromJS)(u.get("projectCardTemp"))).setIn(["views","insertOrModify"],"insert")),a.noCode||(t=t.setIn(["projectCardTemp","code"],a.code)),t=t.set("typeTree",(0,n.fromJS)(a.data)).setIn(["views","fromPage"],"project"),a.data[0].childList.length<=0?t=t.setIn(["projectCardTemp","selectUuid"],a.data[0].uuid).setIn(["projectCardTemp","selectName"],a.data[0].name):a.noFresh&&(t=t.setIn(["projectCardTemp","selectUuid"],"").setIn(["projectCardTemp","selectName"],"")),t}),l(e,r.CHANGE_PROJECT_PROPERTY,function(){return(t=a.data[0].childList.length<=0?t.setIn(["projectCardTemp","selectUuid"],a.data[0].uuid).setIn(["projectCardTemp","selectName"],a.data[0].name):t.setIn(["projectCardTemp","selectUuid"],"").setIn(["projectCardTemp","selectName"],"")).set("typeTree",(0,n.fromJS)(a.data)).setIn(["projectCardTemp","projectPropertyName"],a.projectPropertyName).setIn(["projectCardTemp","projectProperty"],a.projectProperty)}),l(e,r.BEFORE_ADD_PROJECT_CARD_FROM_RUNNING,function(){return t=t.set("projectCardTemp",(0,n.fromJS)(i.projectCardTemp)).setIn(["projectCardTemp","code"],a.code).set("typeTree",(0,n.fromJS)(a.receivedData)).setIn(["views","insertOrModify"],"insert").setIn(["views","fromPage"],"otherPage").setIn(["views","fromPosition"],a.fromPosition).setIn(["projectCardTemp","categoryTypeList",0,"ctgyUuid"],a.ctgyUuid).setIn(["projectCardTemp","projectProperty"],"XZ_LOSS").setIn(["projectCardTemp","projectPropertyName"],"损益项目"),a.receivedData[0].childList.length<=0&&(t=t.setIn(["projectCardTemp","selectUuid"],a.receivedData[0].uuid).setIn(["projectCardTemp","selectName"],a.receivedData[0].name)),t}),l(e,r.BEFORE_EDIT_PROJECT_CARD,function(){return t=t.set("projectCardTemp",(0,n.fromJS)(a.data)).setIn(["views","insertOrModify"],"modify").setIn(["views","fromPage"],"project").set("projectCardTemp",(0,n.fromJS)(a.data)).set("typeTree",(0,n.fromJS)(a.data.categoryTypeList[0].options)).setIn(["projectCardTemp","selectUuid"],a.data.categoryTypeList[0].subordinateUuid).setIn(["projectCardTemp","selectName"],a.data.categoryTypeList[0].subordinateName).setIn(["projectCardTemp","projectPropertyName"],{XZ_LOSS:"损益项目",XZ_PRODUCE:"生产项目",XZ_CONSTRUCTION:"施工项目"}[a.data.projectProperty])}),l(e,r.CHANGE_PROJECT_CARD_CONTENT,function(){return t=t.setIn(["projectCardTemp",a.name],a.value)}),l(e,r.CHANGE_PROJECT_CARD_CATEGORY_TYPE,function(){return t=t.setIn(["projectCardTemp","selectUuid"],a.uuid).setIn(["projectCardTemp","selectName"],a.name)}),l(e,r.SAVE_PROJECT_CARD,function(){return"insertAndNew"===a.flag&&(t=t.setIn(["projectCardTemp","name"],"").setIn(["projectCardTemp","code"],a.code)),t}),l(e,r.NEW_SAVE_PROJECT_CARD,function(){return"insertAndNew"===a.flag&&(t=t.setIn(["projectCardTemp","name"],"").setIn(["projectCardTemp","basicProductOpen"],"").setIn(["projectCardTemp","contractCostOpen"],"").setIn(["projectCardTemp","engineeringSettlementOpen"],"").setIn(["projectCardTemp","contractProfitOpen"],"").setIn(["projectCardTemp","code"],a.code)),t}),e)[a.type]||function(){return t})()};var n=a(18),r=o(a(1302)),i=(o(a(27)),a(1295));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=(0,n.fromJS)({views:{insertOrModify:"insert",fromPage:"project"},typeTree:[],projectCardTemp:{name:"",code:"",selectUuid:"",selectName:"",categoryTypeList:[{ctgyUuid:"",subordinateUuid:""}],projectProperty:"XZ_LOSS",projectPropertyName:"损益项目"}})},1472:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments[1];return((e={},u(e,r.INIT_PROJECT_CONF,function(){return c}),u(e,r.PROJECT_GET_HTIGH_TYPE,function(){return a.list.unshift({uuid:"",name:"全部"}),t=t.set("originTags",(0,n.fromJS)(a.list)).set("views",c.get("views"))}),u(e,r.GET_PROJECT_LIST_AND_TREE,function(){if(t=t.set("cardList",(0,n.fromJS)(a.cardList)).set("typeTree",(0,n.fromJS)(a.treeList)),!0===a.isFresh){var e=t.get("typeTree");t=t.setIn(["views","selectTypeId"],e.getIn([0,"uuid"])).setIn(["views","selectTypeName"],e.getIn([0,"name"]))}return t.set("parentUuid","").setIn(["views","currentPage"],a.currentPage||1).setIn(["views","pageCount"],a.pageCount||1).setIn(["views","searchContent"],a.condition||"")}),u(e,r.CHANGE_ACTIVE_PROJECT_HIGH_TYPE,function(){return t=t.setIn(["views","activeProjectType"],a.name).setIn(["views","activeProjectTypeUuid"],a.uuid).setIn(["views","activeTapKey"],a.name).setIn(["views","activeTapKeyUuid"],a.uuid).setIn(["views","selectTypeId"],"").setIn(["views","selectTypeName"],"").setIn(["views","cardSelectList"],(0,n.fromJS)([])).set("cardList",(0,n.fromJS)(a.cardList)).set("typeTree",(0,n.fromJS)(a.treeList)),a.name!==i.ALL_TAB_NAME_STR&&(t=t.setIn(["views","selectTypeId"],a.treeList[0].uuid).setIn(["views","selectTypeName"],a.treeList[0].name)),t}),u(e,r.CHANGE_PEOJECT_CONF_CARD_USED_STATUS,function(){return t.get("cardList").map(function(e,n){e.get("uuid")===a.uuid&&(t=t.setIn(["cardList",n,"used"],a.used))}),t}),u(e,r.CHANGE_PEOJECT_CONF_CARD_BOX_STATUS,function(){var e=t.get("cardList"),r=t.getIn(["views","cardSelectList"]);return e.find(function(e,n){e.get("uuid")===a.uuid&&(t=t.setIn(["cardList",n,"checked"],a.status))}),a.status?t=t.setIn(["views","cardSelectList"],t.getIn(["views","cardSelectList"]).push((0,n.fromJS)({uuid:a.uuid}))):r.forEach(function(e,n){e.get("uuid")===a.uuid&&(t=t.setIn(["views","cardSelectList"],t.getIn(["views","cardSelectList"]).delete(n)))}),t}),u(e,r.SELECT_PEOJECT_CONF_CARD_ALL,function(){return a.value?(t=t.setIn(["views","cardSelectList"],(0,n.fromJS)([]))).get("cardList").map(function(e,a){t=t.setIn(["cardList",a,"checked"],!1)}):t.get("cardList").map(function(e,a){t=(t=t.setIn(["views","cardSelectList"],t.getIn(["views","cardSelectList"]).push((0,n.fromJS)({uuid:e.get("uuid")})))).setIn(["cardList",a,"checked"],!0)}),t}),u(e,r.DELETE_PROJECT_CONF_CARD,function(){return t=t.set("cardList",(0,n.fromJS)(a.list)).setIn(["views","cardSelectList"],(0,n.fromJS)([])).set("typeTree",(0,n.fromJS)(a.treeList))}),u(e,r.SELECT_PROJECT_CARD_BY_TYPE,function(){return t=t.setIn(["views","selectTypeId"],a.uuid).setIn(["views","parentUuid"],a.parentUuid).setIn(["views","selectTypeName"],a.name).set("cardList",(0,n.fromJS)(a.list)).setIn(["views","currentPage"],a.currentPage||1).setIn(["views","pageCount"],a.pageCount||1).setIn(["views","searchContent"],a.condition||"")}),u(e,r.GET_PROJECT_HIGH_TYPE_ONE,function(){return t=t.set("projectHighTypeTemp",(0,n.fromJS)(a.data)).setIn(["views","activeProjectType"],a.name).setIn(["views","activeProjectTypeUuid"],a.uuid)}),u(e,r.CHANGE_PREJECT_HIGH_TYPE_CONTENT,function(){return t=t.setIn(["projectHighTypeTemp",a.name],a.value)}),u(e,r.SAVE_PROJECT_CARD,function(){return t=t.set("cardList",(0,n.fromJS)(a.cardlist)).set("typeTree",(0,n.fromJS)(a.treeList))}),u(e,r.BEFORE_ADD_PROJECT_CONFIG_CARD_TYPE,function(){var e=t.get("typeTree").toJS();return function e(t){return t.map(function(t){t.checked=!1,t.childList.length&&e(t.childList)})}(e),t=t.set("typeTree",(0,n.fromJS)(e)).set("projectTypeBtnStatus",(0,n.fromJS)(o.projectTypeBtnStatus)).setIn(["views","typeTreeSelectList"],(0,n.fromJS)([])).setIn(["projectTypeBtnStatus","treeUuid"],t.getIn(["typeTree",0,"uuid"])).setIn(["projectTypeTemp","parentUuid"],t.getIn(["typeTree",0,"uuid"]))}),u(e,r.BEFORE_INSERT_PROJECT_CONF_CARD_TYPE,function(){return t=t.set("projectTypeTemp",(0,n.fromJS)(o.projectTypeTemp)).setIn(["projectTypeTemp","parentUuid"],t.getIn(["projectTypeBtnStatus","treeUuid"])).setIn(["projectTypeTemp","parentName"],t.getIn(["projectTypeBtnStatus","treeName"])).setIn(["projectTypeBtnStatus","isAdd"],!0)}),u(e,r.CHANGE_PROJECT_CONF_CARD_TYPE_CONTENT,function(){return t=t.setIn(["projectTypeTemp",a.name],a.value)}),u(e,r.SELECT_PROJECT_CONF_CARD_TYPE,function(){return t=t.setIn(["projectTypeTemp","parentName"],a.parentName).setIn(["projectTypeTemp","parentUuid"],a.parentUuid)}),u(e,r.GET_PROJECT_CONF_TYPE_CONTENT,function(){return t=t.set("projectTypeTemp",(0,n.fromJS)(a.data)).setIn(["projectTypeBtnStatus","isAdd"],!1),a.isAll?t=t.setIn(["projectTypeBtnStatus","isEdit"],!1).setIn(["projectTypeBtnStatus","treeUuid"],a.uuid).setIn(["projectTypeBtnStatus","treeName"],t.getIn(["typeTree",0,"name"])).setIn(["projectTypeBtnStatus","isUp"],!1).setIn(["projectTypeBtnStatus","isDown"],!1):(t=t.setIn(["projectTypeBtnStatus","isEdit"],!0),t=s(t,a.uuid)),t}),u(e,r.CHANGE_PROJECT_CONF_CARD_TYPE_BOX_STATUS,function(){return t=t.setIn(["views","typeTreeSelectList"],(0,n.fromJS)(a.list))}),u(e,r.PROJECT_CONF_DELETE_BTN_SHOW,function(){return t=t.setIn(["projectTypeBtnStatus","isDelete"],!0)}),u(e,r.CONFIRM_DELETE_PROJECT_CONF_TYPE,function(){var e=(t=t.set("typeTree",(0,n.fromJS)(a.data))).getIn(["projectTypeBtnStatus","treeUuid"]),r=!1;return function t(a){return a.map(function(a){a.uuid===e&&(r=!0),a.childList.length>0&&t(a.childList)})}(a.data),t=(t=r?s(t,e):t.set("projectTypeBtnStatus",(0,n.fromJS)(o.projectTypeBtnStatus)).setIn(["projectTypeBtnStatus","treeUuid"],a.data[0].uuid)).setIn(["projectTypeBtnStatus","isDelete"],!1).setIn(["views","typeTreeSelectList"],(0,n.fromJS)([]))}),u(e,r.CHANGE_PROJECT_CONF_TYPE_POSITION,function(){t=t.set("typeTree",(0,n.fromJS)(a.list));var e=void 0;!function t(n){return n.map(function(n){n.uuid!==a.selectedSubordinateUuid?t(n.childList):e=n})}(a.list);var r=t.getIn(["projectTypeBtnStatus","treeUuid"]);return(t=s(t,r)).set("projectTypeTemp",(0,n.fromJS)(e))}),u(e,r.CANCLE_PROJECT_CONF_TYPE_BTN,function(){return t=t.setIn(["projectTypeBtnStatus","isAdd"],!1).setIn(["projectTypeBtnStatus","isDelete"],!1).set("projectTypeTemp",(0,n.fromJS)(a.data)).setIn(["views","typeTreeSelectList"],(0,n.fromJS)([]))}),u(e,r.PROJECT_CONF_TYPE_DELETE_BTN_SHOW,function(){return t=t.setIn(["projectTypeBtnStatus","isDelete"],!0)}),u(e,r.SAVE_PROJECT_CONF_CARD_TYPE,function(){return t=t.set("typeTree",(0,n.fromJS)(a.typeTree)),"new"!=a.btnFlag?t=s(t,a.uuid):(t=t.set("projectTypeTemp",(0,n.fromJS)(a.typeInfo)).setIn(["projectTypeBtnStatus","treeUuid"],a.typeInfo.uuid).setIn(["projectTypeBtnStatus","isAdd"],!1).setIn(["projectTypeBtnStatus","isEdit"],!0),t=s(t,a.typeInfo.uuid)),t}),u(e,r.ADJUST_PROJECT_CONF_CARD_TYPE_LIST,function(){return t=t.set("cardList",(0,n.fromJS)(a.list)).setIn(["views","cardSelectList"],(0,n.fromJS)([]))}),u(e,r.CHANGE_PROJECT_VIEWS_CONTENT,function(){return t=t.setIn(["views",a.name],a.value)}),e)[a.type]||function(){return t})()};var n=a(18),r=l(a(1302)),i=l(a(27)),o=a(1295);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=(0,n.fromJS)({views:{activeTapKey:"全部",activeTapKeyUuid:"",activeProjectType:"",activeProjectTypeUuid:"",activeTreeKeyUuid:"",typeTreeSelectList:[],cardSelectList:[],selectTypeId:"",selectTypeName:"",searchContent:"",regretResultList:[],regretResultIndex:0,usedCardList:[],cardTypeList:[],cardList:[],categoryList:[]},originTags:[],cardList:[],typeTree:[],projectHighTypeTemp:{name:"",commonFee:!1,uuid:""},projectTypeTemp:{name:"",remark:"",parentName:"全部",parentUuid:"",uuid:""},projectTypeBtnStatus:{isAdd:!1,isDelete:!1,treeUuid:"",treeName:"全部",isUp:!1,isDown:!1,upUuid:"",downUuid:"",isEdit:!1,parentUuid:""}});var s=function(e,t){var a=e.get("typeTree").toJS();if(t!=a[0].uuid){var n="",r=[],i="",o="";!function e(a){return a.map(function(a,r){a.uuid===t&&(n=a.name,i=r,o=a.parentUuid),a.childList.length>0&&e(a.childList)})}(a),e=e.setIn(["projectTypeBtnStatus","treeUuid"],t).setIn(["projectTypeBtnStatus","treeName"],n).setIn(["projectTypeBtnStatus","parentUuid"],o||"");!function e(t){return t.map(function(t,a){t.uuid===o&&(r=t.childList),t.childList.length>0&&e(t.childList)})}(a);var l=Number(i)-1,u=Number(i)+1;e=0===i||"未分类"===n?e.setIn(["projectTypeBtnStatus","isUp"],!1).setIn(["projectTypeBtnStatus","upUuid"],""):e.setIn(["projectTypeBtnStatus","isUp"],!0).setIn(["projectTypeBtnStatus","upUuid"],r[l].uuid),e=i===r.length-1||"未分类"===r[u].name?e.setIn(["projectTypeBtnStatus","isDown"],!1).setIn(["projectTypeBtnStatus","downUuid"],""):e.setIn(["projectTypeBtnStatus","isDown"],!0).setIn(["projectTypeBtnStatus","downUuid"],r[u].uuid)}return e}},1473:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=g(a(47)),i=g(a(14)),o=g(a(37)),l=g(a(89)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(78),a(38),a(88);var c=g(a(1)),s=(a(18),a(17));a(1474);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);t.default=e}(a(30));var d=a(22),f=g(a(1326)),m=g(a(1250));function g(e){return e&&e.__esModule?e:{default:e}}var p=l.default.Group,C=(0,s.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={tagModal:!1,tagValue:"无标签",currentIdx:"",preview:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.formPage,n=t.className,u=t.dispatch,s=t.permission,g=t.closed,C=t.reviewed,h=t.enclosureList,y=t.label,E=t.enCanUse,S=t.checkMoreFj,T=t.getLabelFetch,_=t.deleteUploadImgUrl,v=t.changeTagName,b=t.uploadEnclosureList,L=t.downloadEnclosure,I=t.type,N=t.uploadKeyJson,O=t.getUploadTokenFetch,A=this.state,R=A.tagValue,w=A.currentIdx,P=A.preview,U=A.tagModal,M=A.page,k=h&&h.filter(function(e){return"TRUE"===e.get("imageOrFile")||"application/pdf"===e.get("mimeType")}),j=!1;!s||g||C||(j=!0);var J=!0;!g&&!C||h.size||(J=!1);return c.default.createElement("div",{className:["enclosure-upload-part",n].join(" "),style:{display:J&&E?"":"none"}},c.default.createElement("span",{className:"enclosure-wrap-title",style:{display:j&&h.size<9&&(S?"":"none")}},"附件(最多上传九个)"),c.default.createElement("div",{className:"enclosure-list-wrap"},(h||[]).map(function(t,a){return c.default.createElement("div",{className:"enclosure-item",key:a},c.default.createElement("div",{className:"enclosure-item-icon",onClick:function(){if("TRUE"===t.get("imageOrFile")||"application/pdf"==t.get("mimeType")){var a=0;k.forEach(function(e,n){t.get("enclosurePath")!==e.get("enclosurePath")||(a=n)}),e.setState({preview:!0,page:a})}else o.default.warn("仅图片及PDF格式支持预览")}},c.default.createElement("img",{src:(0,d.showImg)(t.get("imageOrFile"),t.get("fileName"))})),c.default.createElement("div",{className:"enclosure-item-detail"},c.default.createElement("p",{className:"enclosure-item-filename"},t.get("fileName")),c.default.createElement("span",{className:"enclosure-item-tip"},t.get("size")>=1024?(t.get("size")/1024).toFixed(2)+"M":t.get("size")+"kb"),c.default.createElement("a",{className:"enclosure-item-tip",onClick:function(){return L(t.get("signedUrl"),t.get("fileName"))},href:"javascript:void(0);",style:{display:s?"":"none"}},c.default.createElement(i.default,{type:"download"})),c.default.createElement("span",{className:"enclosure-tag",style:{display:j?"":"none"},onClick:function(){e.setState({currentIdx:a,tagValue:t.get("label"),tagModal:!0}),T()}},"无标签"===t.get("label")?"添加标签":t.get("label"))),c.default.createElement("div",{className:"icon-close",style:{display:j?"":"none"},onClick:function(){_(a)}},c.default.createElement(i.default,{type:"close"})))}),c.default.createElement(f.default,{style:{display:j&&h.size<9&&S?"":"none"},dispatch:u,enclosureList:h,uploadEnclosureList:b,uploadKeyJson:N,getUploadTokenFetch:O,formPage:a})),c.default.createElement(r.default,{title:"添加标签",visible:U,onOk:function(){v(w,R),e.setState({tagModal:!1})},onCancel:function(){return e.setState({tagModal:!1})}},c.default.createElement(p,{onChange:function(t){return e.setState({tagValue:t.target.value})},value:R},y.map(function(e,t){return c.default.createElement(l.default,{className:"enclosure-radio",key:t,value:e},"无标签"===e?"取消标签":e)}))),c.default.createElement(m.default,{page:M,dispatch:u,preview:P,downloadPermission:s,previewImgArr:k,downloadEnclosure:L,closePreviewModal:function(){return e.setState({preview:!1})},type:I,uploadKeyJson:N}))}}]),t}())||n;t.default=C},1474:function(e,t,a){},1477:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=E(a(47)),i=E(a(1267)),o=E(a(129)),l=E(a(100)),u=E(a(14)),c=E(a(37)),s=E(a(171)),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(1265),a(128),a(99),a(78),a(38),a(170);var f=E(a(1)),m=a(17),g=a(127),p=y(a(27)),C=a(18),h=(y(a(172)),y(a(130)));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var T=s.default.TreeNode,_=(0,m.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=S(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={inputValue:""},S(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),d(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.MemberList,d=(t.searchCardContent,t.searchList,t.hasSearchContent,t.thingsList),m=t.selectedKeys,y=t.showCommonChargeModal,E=t.selectItem,S=t.selectList,_=t.cancel,v=t.callback,b=t.stockCard,L=t.stockAllLength,I=t.temp,N=t.oriState,O=(t.oriDate,t.selectTreeFunc),A=t.showSelectAll,R=t.stockTemplate,w=t.needSpliceChoosedStock,P=t.stockCardIdList,U=t.cardPageObj,M=t.paginationCallBack,k=E&&E.size||0,j=n?function e(t,a,n){return t&&t.map(function(t,r){return t.childList&&t.childList.length?f.default.createElement(T,{key:""+t.uuid+p.TREE_JOIN_STR+t.name+p.TREE_JOIN_STR+n,title:t.name},e(t.childList,a,n+1)):f.default.createElement(T,{key:""+t.uuid+p.TREE_JOIN_STR+t.name+p.TREE_JOIN_STR+n,title:t.name,checkable:!0})})}(n.toJS(),["全部"],1):"",J=(d&&d.map(function(e){return{string:""+e.get("code")+p.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")}}),d.toJS().filter(function(t){return!e.state.inputValue||(t.code.indexOf(e.state.inputValue)>-1||t.name.indexOf(e.state.inputValue)>-1)})),D="CostTransfer"===I?"cardUuid":"uuid",x="CostTransfer"===I&&P?J.filter(function(e){return P.indexOf(e[D])}):J,F=x.every(function(e){return S.some(function(t){return t===e[D]})})&&(x.length||J.length);return f.default.createElement(r.default,{className:"select-modal",title:"选择存货",visible:y,onCancel:function(){_(),a(h.changeEditCalculateCommonState("commonCardObj","selectedKeys",["all"+p.TREE_JOIN_STR+"1"])),a(h.changeEditCalculateCommonState("commonCardObj","selectList",(0,C.fromJS)([]))),a(h.changeEditCalculateCommonState("commonCardObj","selectItem",(0,C.fromJS)([])))},onOk:function(){var e=b.concat(E),t="STATE_CHDB"===N?p.STOCK_MAX_NUMBER_ONE:p.STOCK_MAX_NUMBER_TWO;if(("STATE_CHZZ_ZZCX"===N?L:e.size)<t){_();w||b.concat(E);E.size&&a(h.changeSelectStock(b.concat(E),I,R)),v(b.concat(E)),a(h.changeEditCalculateCommonState("commonCardObj","selectedKeys",["all"+p.TREE_JOIN_STR+"1"])),a(h.changeEditCalculateCommonState("commonCardObj","selectList",(0,C.fromJS)([]))),a(h.changeEditCalculateCommonState("commonCardObj","selectItem",(0,C.fromJS)([])))}else c.default.info("所选存货总数不可超过"+t+"个")},width:"800px"},f.default.createElement("div",{className:"lsqc-contacts-card-top"},f.default.createElement("div",{className:"table-tree-container",style:{height:J.length>5?"461px":"286px"}},f.default.createElement(s.default,{defaultExpandAll:!0,onSelect:function(e){if(e[0]){var t=e[0].split(p.TREE_JOIN_STR),n=t[0],r=t[2];O(n,r),a(h.changeEditCalculateCommonState("commonCardObj","selectedKeys",e))}},selectedKeys:m},f.default.createElement(T,{key:"all"+p.TREE_JOIN_STR+"1",title:"全部",checkable:!0}),j)),f.default.createElement(g.TableAll,{className:"contacts-table-right",style:{height:J.length>5?"461px":"286px"}},f.default.createElement("span",{className:"lsqc-serch"},f.default.createElement(u.default,{className:"lsqc-serch-icon",type:"search",onClick:function(){}}),f.default.createElement(l.default,{placeholder:"搜索",className:"lsqc-serch-input",onChange:function(t){e.setState({inputValue:t.target.value})}})),f.default.createElement("div",{className:"table-title-wrap"},f.default.createElement("ul",{className:"table-title table-title-charge"},f.default.createElement("li",{onClick:function(e){e.stopPropagation();var t="CostTransfer"===I,n="CostTransfer"===I&&P?J.filter(function(e){return P.indexOf(e[D])}):J;A&&a(h.changeItemCheckboxCheckAll(F,n,d,!1,t))}},A?f.default.createElement(o.default,{disabled:P&&P.length===J.length,checked:F}):null),f.default.createElement("li",null,f.default.createElement("span",null,"编号")),f.default.createElement("li",null,f.default.createElement("span",null,"名称")))),f.default.createElement(g.TableBody,null,d&&d.toJS().map(function(t){var n="Stock"===I||"Balance"===I||"StockBuildUp"===I||"StockIntoProject"===I||"ProjectCarryover"===I?t.uuid:t.cardUuid,r=S.indexOf(n)>-1,i="STATE_YYSR_ZJ"!==N&&"StockBuildUp"!==I&&"StockIntoProject"!==I&&"ProjectCarryover"!==I&&"Balance"!==I&&"Stock"!==I&&b.some(function(e){return e.get("cardUuid")===n}),l=t.code+" "+t.name;return l.indexOf(e.state.inputValue)>-1||l.indexOf(e.state.inputValue.toUpperCase())>-1||l.indexOf(e.state.inputValue.toLowerCase())>-1?f.default.createElement(g.TableItem,{className:"contacts-table-width-charge",key:n,onClick:function(e){e.stopPropagation()}},f.default.createElement("li",{onClick:function(e){e.stopPropagation(),!i&&a(h.changeItemCheckboxCheck(r,t))}},f.default.createElement(o.default,{disabled:i,checked:r||i})),f.default.createElement("li",null,t.code),f.default.createElement("li",null,t.name)):""})),U?f.default.createElement(g.TablePagination,{className:"editcalculate-card-modal-pagination",currentPage:U.get("currentPage"),pageCount:U.get("pages"),paginationCallBack:function(e){return M(e)}}):"")),f.default.createElement("div",{className:"charge-chosen-project"},"选择存货：",E&&E.map(function(e){return f.default.createElement(i.default,{closable:!0,onClose:function(t){t.preventDefault(),a(h.changeItemCheckboxCheck(!0,e.toJS()))}},e.get("code")," ",e.get("name"))})),f.default.createElement("div",{style:{display:k>0?"":"none",margin:"0 0 10px 20px"}},k,"个存货"))}}]),t}())||n;t.default=_},1478:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,a=arguments[1];return((e={},o(e,r.INIT_ACCOUNT_CONFIG,function(){return l}),o(e,r.BEFORE_INSERT_ACCOUNTCONF,function(){return t=t.setIn(["views","insertOrModify"],"insert").set("accountTemp",l.get("accountTemp"))}),o(e,r.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT,function(){return a.saveAndNew&&(t=t.set("accountTemp",l.get("accountTemp"))),t}),o(e,r.SELECT_OR_UNSELECT_ACCOUNT_ALL,function(){if(a.selectAll)return t.setIn(["views","accountSelect"],(0,n.fromJS)([]));var e=[];return a.accountList.forEach(function(t){return e.push(t.get("uuid"))}),a.disableList.forEach(function(t){return e.push(t.get("uuid"))}),t.setIn(["views","accountSelect"],(0,n.fromJS)(e))}),o(e,r.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK,function(){var e=t.getIn(["views","accountSelect"]);if(a.checked){var n=e.splice(e.findIndex(function(e){return e===a.uuid}),1);return t.setIn(["views","accountSelect"],n)}var r=e.push(a.uuid);return t.setIn(["views","accountSelect"],r)}),o(e,r.BEFORE_MODIFY_ACCOUNTCONF_RUNNING,function(){return t.setIn(["views","insertOrModify"],"modify").set("accountTemp",a.item)}),o(e,r.CLOSE_ACCOUNTCONF_MODAL_LR,function(){return t.setIn(["views","showAccountModal"],!1)}),o(e,r.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER,function(){var e=t.getIn(["accountTemp","name"]);return""===e&&(t=t.setIn(["accountTemp","name"],a.accountType+""+(a.value.length>4?a.value.substr(a.value.length-4):a.value))),t}),o(e,r.CHANGE_ACCOUNTCONFIG_COMMON_STRING,function(){return t.setIn(a.placeArr,a.value)}),o(e,r.CLOSE_ACCOUNTCONF_MODAL,function(){return t.setIn(["views","showModal"],!1).setIn(["views","showZHModal"],!1)}),o(e,r.INIT_POUNDAGE_TEMP,function(){var e=l.get("poundageTemp");return t.set("poundageTemp",e)}),o(e,r.GET_POUNDGE_ACCOUNT,function(){return t=t.set("poundageTemp",(0,n.fromJS)(a.data)).setIn(["poundageTemp","item"],(0,n.fromJS)({})),t=a.data.uuid?t.setIn(["poundageTemp","insertOrModify"],"modify"):t.setIn(["poundageTemp","insertOrModify"],"insert")}),o(e,r.INIT_REGRETTEMP,function(){return t.set("regretTemp",l.get("regretTemp"))}),o(e,r.GET_ACCOUNT_CONFIG_LIST,function(){return t.set("accountList",(0,n.fromJS)(a.list)).setIn(["views","pageCount"],a.pageCount||1).setIn(["views","currentPage"],a.currentPage||1)}),e)[a.type]||function(){return t})()};var n=a(18),r=i(a(1315));i(a(27));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=(0,n.fromJS)({views:{insertOrModify:"insert",accountSelect:[]},accountTemp:{uuid:"00000001",type:"general",name:"",openingName:"",openingBank:"",accountNumber:"",beginAmount:"",acId:"",acFullName:"",openInfo:!1,needPoundage:!1,poundage:"",poundageRate:""},poundageTemp:{categoryUuid:"",poundageNeedProject:"",poundageNeedCurrent:"",item:{},insertOrModify:"insert"},regretTemp:{accountRegretList:[]},accountList:[]})},1517:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_ACCOUNT_CONFIG="INIT_ACCOUNT_CONFIG",t.BEFORE_INSERT_WAREHOUSECONF="BEFORE_INSERT_WAREHOUSECONF",t.GET_WAREHOUSE_TREE="GET_WAREHOUSE_TREE",t.AFTER_UPDATE_ACCOUNTCONF_ACCOUNT="AFTER_UPDATE_ACCOUNTCONF_ACCOUNT",t.SELECT_OR_UNSELECT_ACCOUNT_ALL="SELECT_OR_UNSELECT_ACCOUNT_ALL",t.ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK="ACCOUNTCONF_ACCOUNT_CHECKBOX_CHECK",t.BEFORE_MODIFY_ACCOUNTCONF_RUNNING="BEFORE_MODIFY_ACCOUNTCONF_RUNNING",t.CHANGE_ACCOUNTCONFIG_COMMON_STRING="CHANGE_ACCOUNTCONFIG_COMMON_STRING",t.CLOSE_ACCOUNTCONF_MODAL_LR="CLOSE_ACCOUNTCONF_MODAL_LR",t.CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER="CHANGE_ACCOUNTCONF_ACCOUNT_NUMBER",t.CLOSE_ACCOUNTCONF_MODAL="CLOSE_ACCOUNTCONF_MODAL",t.CHANGE_WAREHOUSECONFIG_COMMON_STRING="CHANGE_WAREHOUSECONFIG_COMMON_STRING",t.AFTER_INSERT_WAREHOUSE_CARD="AFTER_INSERT_WAREHOUSE_CARD",t.WAREHOUSE_TRIANGLE_SWITCH="WAREHOUSE_TRIANGLE_SWITCH",t.WAREHOUSE_CHECKBOX_CHECK="WAREHOUSE_CHECKBOX_CHECK",t.GET_WAREHOUSE_CARD="GET_WAREHOUSE_CARD",t.CHANGE_WAREHOUSE_ITEM_DISABLE_STATUS="CHANGE_WAREHOUSE_ITEM_DISABLE_STATUS",t.BEFORE_CK_IMPORT="BEFORE_CK_IMPORT",t.CLOSE_CK_IMPORT_CONTENT="CLOSE_CK_IMPORT_CONTENT",t.AFTER_CK_IMPORT="AFTER_CK_IMPORT",t.CHANGE_CK_IMPORT_NUM="CHANGE_CK_IMPORT_NUM"},1520:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=g(a(47)),i=g(a(100)),o=g(a(171)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(99),a(170);var u=g(a(1)),c=a(17),s=(a(18),a(127)),d=m(a(27)),f=m(a(172));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=o.default.TreeNode,h=i.default.Search,y=(0,c.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={searchContent:"",currentPage:1,uuid:"all"},p(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.showSingleModal,i=t.title,l=t.MemberList,c=t.thingsList,m=t.selectedKeys,g=t.selectFunc,p=t.selectListFunc,y=t.pageCount,E=void 0===y?1:y,S=this.state,T=S.searchContent,_=S.currentPage,v=S.level,b=S.uuid,L=(S.name,l?function e(t,a,n){return t&&t.map(function(t,r){return t.childList&&t.childList.length?u.default.createElement(C,{key:""+t.uuid+d.TREE_JOIN_STR+t.name+d.TREE_JOIN_STR+n,title:t.name},e(t.childList,a,n+1)):u.default.createElement(C,{key:""+t.uuid+d.TREE_JOIN_STR+t.name+d.TREE_JOIN_STR+n,title:t.name,checkable:!0})})}(l.toJS(),["全部"],1):""),I=(c.map(function(e){return{string:""+e.get("code")+d.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")}}),c.toJS());return u.default.createElement(r.default,{className:"no-foot select-modal",title:i,visible:n,onCancel:function(){a(f.changeLrAccountCommonString("",["flags","showSingleModal"],!1)),a(f.changeLrAccountCommonString("",["flags","selectedKeys"],""))},width:"800px"},u.default.createElement("div",{className:"lsqc-contacts-card-top"},u.default.createElement("div",{className:"table-tree-container",style:{height:I.length>5?"634px":"249px"}},u.default.createElement(o.default,{defaultExpandAll:!0,onSelect:function(t){if(t[0]){var n=t[0].split(d.TREE_JOIN_STR),r=n[0],i=n[1],o=n[2];p(r,o,_,""),a(f.changeLrAccountCommonString("",["flags","selectedKeys"],t[0])),e.setState({searchContent:"",uuid:r,level:o,name:i})}},selectedKeys:[m||"all-:-1"]},u.default.createElement(C,{key:"all"+d.TREE_JOIN_STR+"1",title:"全部",checkable:!0}),L)),u.default.createElement(s.TableAll,{className:"contacts-table-right",style:{height:I.length>5?"634px":"249px"}},u.default.createElement("span",{className:"lsqc-serch"},u.default.createElement(h,{placeholder:"搜索",className:"lsqc-serch-input",value:T,onChange:function(t){e.setState({searchContent:t.target.value})},onSearch:function(t){p(b,v,1,T),e.setState({currentPage:1})}})),u.default.createElement("div",{className:"table-title-wrap"},u.default.createElement("ul",{className:"table-title"},u.default.createElement("li",null,u.default.createElement("span",null,"编号")),u.default.createElement("li",null,u.default.createElement("span",null,"名称")))),u.default.createElement(s.TableBody,null,I.map(function(e){var t=e.uuid?e.uuid:e.cardUuid;return u.default.createElement(s.TableItem,{className:"contacts-table-width cursor",key:e.uuid,onClick:function(a){a.stopPropagation(),g(e.code,e.name,t,e.projectProperty)}},u.default.createElement("li",null,e.code),u.default.createElement("li",null,e.name))})),u.default.createElement(s.TablePagination,{size:"small",style:{marginTop:"10px"},currentPage:_,pageCount:E,paginationCallBack:function(t){p(b,v,t,T),e.setState({currentPage:t})}}))))}}]),t}())||n;t.default=y},1521:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=h(a(14)),r=h(a(32)),i=h(a(47)),o=h(a(171)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(78),a(51),a(46),a(170);var u=h(a(1)),c=(h(a(0)),a(18)),s=(a(56),C(a(27))),d=h(a(90)),f=h(a(483)),m=(a(22),h(a(1244)),a(127)),g=C(a(172)),p=h(a(2585));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o.default.TreeNode,i.default.confirm;var E=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={curPage:1,multiModal:!1,curSerialList:n.props.curSerialList,sortIndex:1},y(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"componentDidMount",value:function(){this.props.dispatch(g.getInSerialList(this.props.item,this.props.oriUuid,this.props.oriState))}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,o=t.onClose,l=t.visible,C=t.serialList,h=t.stockIndex,y=t.onOK,E=t.item,S=t.taxRate,T=t.selectedList,_=this.state,v=_.curPage,b=_.multiModal,L=_.curSerialList,I=_.sortIndex,N=Math.ceil((L.length||1)/20),O=L.filter(function(e,t){return t<20*v&&t>=20*(v-1)}).filter(function(e){return!T.some(function(t){return t.serialNumber===e.serialNumber})}),A=E.get("assistList")||(0,c.fromJS)([]);return u.default.createElement(i.default,{destroyOnClose:!0,className:"serial-modal lr-serial-modal",width:"480px",visible:l,maskClosable:!1,title:"选择序列号",footer:[u.default.createElement(r.default,{style:L.length?{borderColor:"#fd5458",color:"#fd5458"}:{},disabled:!L.length,onClick:function(){L.length&&i.default.confirm({title:"提示",content:"确认清空当前序列号吗？",onOk:function(){e.setState({curSerialList:[],curPage:1})}})}},"清空"),u.default.createElement(r.default,{onClick:function(){o()}},"取消"),u.default.createElement(r.default,{type:"primary",onClick:function(){if(o(),y)y(L);else{var e=L.filter(function(e){return e.serialNumber});if(a(g.changeLrAccountCommonString("ori",["stockCardList",h,"serialList"],(0,c.fromJS)(e))),a(g.changeLrAccountCommonString("ori",["stockCardList",h,"quantity"],e.length)),a(g.changeLrAccountCommonString("ori",["stockCardList",h,"isModify"],!0)),E.get("price")>0){var t=(e.length*E.get("price")).toFixed(2);a(g.changeLrAccountCommonString("ori",["stockCardList",h,"amount"],t)),a(g.autoCalculateStockAmount()),S&&a(g.changeAccountTaxRate())}}}},"确定")],onCancel:function(){o()}},u.default.createElement("div",null,u.default.createElement("div",{className:"serial-modal-title"},(E.get("warehouseCardName")?"仓库："+E.get("warehouseCardName")+";":"")+(A.some(function(e){return e.get("propertyName")})?"属性："+A.map(function(e){return e.get("propertyName")}).join():"")+(E.get("batch")?"批次："+E.get("batch"):"")),u.default.createElement("div",{style:{overflow:"hidden"}},u.default.createElement(m.TableAll,{className:"serial-table"},u.default.createElement("div",{className:"table-title-wrap"},u.default.createElement("ul",{className:"serial-table-item serial-table-title table-title",line:2},u.default.createElement("li",null,"操作"),u.default.createElement("li",null,"序列"),u.default.createElement("li",null,"序列号",u.default.createElement("span",{className:"icon-sort",onClick:function(){e.setState({curSerialList:L.sort(function(e,t){return e.serialNumber>t.serialNumber?I:-I}),sortIndex:-I})}})))),u.default.createElement(m.TableBody,null,(O.length?O:[{}]).map(function(t,a){return u.default.createElement(m.TableItem,{className:"serial-table-item",line:a+1,key:a},u.default.createElement("li",null,u.default.createElement("span",null,u.default.createElement(d.default,{type:"big-plus",onClick:function(){0===L.length?e.setState({curSerialList:[{},{}]}):(L.splice(20*(v-1)+a+1,0,{}),e.setState({curSerialList:L}))}})),u.default.createElement("span",null,u.default.createElement(n.default,{type:"close",onClick:function(){0===L.length?e.setState({curSerialList:[]}):(L.splice(20*(v-1)+a,1),e.setState({curSerialList:L,curPage:(0===O.length||1===O.length)&&N>1?v-1:v}))}}))),u.default.createElement("li",null,20*(v-1)+a+1),u.default.createElement("li",null,u.default.createElement(f.default,{value:t.serialNumber,showSearch:!0,onChange:function(t){var n=t.split(s.TREE_JOIN_STR),r=n[0],i=n[1];L.length?(L[20*(v-1)+a]={serialUuid:r,serialNumber:i},e.setState({curSerialList:L})):e.setState({curSerialList:[{serialNumber:i,serialUuid:r}]})}},C.filter(function(e){return L.every(function(t){return t.serialNumber!==e.get("serialNumber")})}).filter(function(e){return T.every(function(t){return t.serialNumber!==e.get("serialNumber")})}).map(function(e){return u.default.createElement(Option,{key:e.get("serialNumber"),value:""+e.get("serialUuid")+s.TREE_JOIN_STR+e.get("serialNumber")},e.get("serialNumber"))}))))})),u.default.createElement("div",{className:"serial-modal-bottom"},u.default.createElement(r.default,{type:"primary",onClick:function(){return e.setState({multiModal:!0})}},"批量选择"),u.default.createElement(m.TablePagination,{size:"small",currentPage:v,pageCount:N,paginationCallBack:function(t){return e.setState({curPage:t})}}))))),b?u.default.createElement(p.default,{visible:b,dispatch:a,serialList:C.toJS(),curSerialList:L.filter(function(e){return e.serialNumber}),close:function(){return e.setState({multiModal:!1})},closePre:o,stockIndex:h,item:E,taxRate:S,selectedList:T,onOk:function(t){e.setState({curSerialList:t})},multiSelectOnok:y}):"")}}]),t}();t.default=E},1522:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=s(a(100)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(99);var l=s(a(1)),u=a(17),c=(a(101),a(22));function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=(0,u.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={formate:!0},d(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props.showZero||!1,a=m(this.props.value,t),n=this.state.formate?t?0===a||a?(0,c.formatMoney)(m(this.props.value,t),this.props.PointDisabled?0:2):"":a?(0,c.formatMoney)(m(this.props.value,t),this.props.PointDisabled?0:2):"":this.props.value;return l.default.createElement(r.default,i({},this.props,{value:n||"",onFocus:function(t){"function"==typeof e.props.onFocus&&e.props.onFocus(t),e.setState({formate:!1}),setTimeout(function(){e.nameInput&&e.nameInput.select()},0)},onBlur:function(t){"function"==typeof e.props.onBlur&&e.props.onFocus(t),e.setState({formate:!0})},ref:function(t){return e.nameInput=t}}))}}]),t}())||n;function m(e,t){if(!e)return t?""===e?"":"0":"";if("-"==e)return e;var a=e<0?"-":"",n=(e=e<0?String(e).slice(1):String(e)).indexOf(".")>-1?".":"",r=e.indexOf(".")>-1?e.slice(e.indexOf(".")+1):"",i=e.slice(0,e.indexOf(".")>-1?e.indexOf("."):e.length)+"",o=i.length>3?i.length%3:0;return a+(o?i.substr(0,o)+",":"")+i.substr(o).replace(/(\d{3})(?=\d)/g,"$1,")+n+r}t.default=f},1523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=N(a(47)),r=N(a(32)),i=N(a(1230)),o=N(a(37)),l=N(a(45)),u=N(a(100)),c=N(a(1256)),s=N(a(14)),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(51),a(1231),a(38),a(55),a(99),a(1257),a(78);var m=a(1),g=N(m),p=(N(a(0)),a(18)),C=(a(56),I(a(27))),h=N(a(6)),y=a(22),E=a(127),S=(N(a(487)),N(a(483))),T=N(a(1363)),_=I(a(484)),v=I(a(130)),b=I(a(485)),L=I(a(172));N(a(1237));function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function N(e){return e&&e.__esModule?e:{default:e}}var O=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.closeFocus=function(e){for(var t=e.target||e.srcElement,n=1;t.parentNode&&n<20;){if(t.parentNode.className&&"string"==typeof t.parentNode.className&&t.parentNode.className.indexOf("inventory-are-for-dom")>-1)return;t=t.parentNode,n++}a.setState({focus:!1,addBatch:!1,assistModal:!1})},a.getCurShelfLife=function(e,t){var a=Date.parse(e),n=Date.parse(t);return n>a?Math.floor((n-a)/864e5):null},a.openDrop=function(e){a.setState({focus:!0},function(){for(var t=e?document.getElementsByClassName("assembly-drop-content"):document.getElementsByClassName("inventory-drop-content"),n=0;n<t.length;n++)t[n]&&(t[n].style.display="none");a.nameInput.style.display=""})},a.state={batchNumber:"",batchDate:(new y.DateLib).toString(),expirationDate:(new y.DateLib).toString(),focus:!1,addBatch:!1,batchModal:!1,assistModal:!1,asssistName:"",classificationUuid:"",assIndex:-1,addBatchChange:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,g.default.Component),f(t,[{key:"componentDidMount",value:function(){document.getElementsByTagName("body")[0].addEventListener("click",this.closeFocus)}},{key:"componentWillUnmount",value:function(){document.getElementsByTagName("body")[0].removeEventListener("click",this.closeFocus)}},{key:"render",value:function(){var e=this,t=this.state,a=t.batchDate,f=t.expirationDate,I=t.batchNumber,N=t.focus,O=t.addBatch,A=t.batchModal,R=t.assistModal,w=t.asssistName,P=t.classificationUuid,U=t.assIndex,M=t.addBatchChange,k=this.props,j=k.dispatch,J=k.item,D=k.index,x=k.oriDate,F=k.stockList,H=k.stockTitleName,B=k.notFoundContent,G=k.stockTemplate,Y=k.sectionTemp,Z=k.needHidePrice,z=k.selectStockFun,W=k.oriState,K=k.warehouseUuid,X=k.cardUuidName,V=k.type,Q=k.onSelectChange,q=k.isAssemblySheet,$=k.materIndex,ee=k.isClearSerialList,te=k.noPrice,ae=k.showModalFun,ne="",re=J.get("assistList")||(0,p.fromJS)([]),ie=J.getIn(["financialInfo","openBatch"]),oe=J.getIn(["financialInfo","openAssist"]),le=J.getIn(["financialInfo","openShelfLife"]),ue=J.getIn(["financialInfo","shelfLife"]),ce=J.getIn(["financialInfo","assistClassificationList"])||(0,p.fromJS)([]),se=q?["assemblySheet",D,"materialList",$]:[G,D],de=(J.get("batchList")||(0,p.fromJS)([])).find(function(e){return e.get("batchUuid")===J.get("batchUuid")||e.get("batch")===J.get("batch")})||(0,p.fromJS)({}),fe=de.get("batch")||J.get("batch")?(de.get("batch")||J.get("batch"))+(le&&de.get("expirationDate")&&"undefined"!==de.get("expirationDate")?"("+de.get("expirationDate")+")":le&&J.get("expirationDate")&&"undefined"!==J.get("expirationDate")?"("+J.get("expirationDate")+")":""):void 0;ne=oe&&ie?(re.some(function(e){return e.get("propertyName")})?re.map(function(e){return e.get("propertyName")}).join():"属性")+" | "+(J.get("batch")?fe:"批次"):oe||ie?oe?re.some(function(e){return e.get("propertyName")})?re.map(function(e){return e.get("propertyName")}).join():"属性":J.get("batch")?fe:"批次":J.get("code")?(J.get("code")?J.get("code"):"")+" "+(J.get("name")?J.get("name"):""):void 0;var me=!oe&&!ie||!J.get("code")||!N;return g.default.createElement("span",{className:"stock-assist-items inventory-are-for-dom "+(q?"stock-assist-items-top":""),style:{overflow:me?"hidden":"visible"}},!oe&&!ie||N?"":g.default.createElement("span",null,J.get("code")?J.get("code")+" "+J.get("name"):J.get("name")),!oe&&!ie||N?"":g.default.createElement(E.XfnIcon,{type:"circle-del",className:"inventory-select-circle-del",onClick:function(e){e.preventDefault(),j(v.changeEditCalculateCommonString(Y,se,(0,p.fromJS)({})))}}),me?g.default.createElement(S.default,{combobox:!0,showSearch:!0,showArrow:!0,placeholder:"请选择"+H,className:ie||oe?"extra-card":"",value:ne,notFoundContent:B?g.default.createElement("span",null,g.default.createElement(s.default,{type:"info-circle",theme:"filled",style:{color:"#1890ff"}})," ",B):void 0,onFocus:function(){(oe||ie)&&e.openDrop(q)},dropdownRender:function(e){return g.default.createElement("div",null,e,g.default.createElement(c.default,{style:{margin:"4px 0",display:"STATE_CHZZ_ZZCX"===W||"STATE_XMJZ_JZRK"===W?"":"none"}}),"STATE_CHZZ_ZZCX"===W||"STATE_XMJZ_JZRK"===W?g.default.createElement("div",{style:{padding:"8px",cursor:"pointer"},onMouseDown:function(){ae(),j(_.beforeRunningAddInventoryCard(ae))}},g.default.createElement(s.default,{type:"plus"})," 新增存货"):"")},onChange:function(t,a){Q?Q(t,a):function(e,t){var a=e.split(C.TREE_JOIN_STR),n=a[0],r=a[1],i=a[2],o="true"===a[3],l="true"===a[4],u=J.get("amount"),c=J.get("warehouseCardUuid"),s=J.get("warehouseCardCode"),f=J.get("warehouseCardName"),m=t.props.financialInfo,g={cardUuid:n,name:i,code:r,amount:u,isOpenedQuantity:o,isUniformPrice:l,warehouseCardUuid:c,warehouseCardCode:s,warehouseCardName:f,unit:t.props.unit,financialInfo:m};"true"===o.toString()&&t.props.unit&&!t.props.unit.get("unitList").size?j(v.changeEditCalculateCommonString(Y,[G,D],(0,p.fromJS)(d({},g,{unitUuid:t.props.unit.get("uuid"),unitName:t.props.unit.get("name")})))):j(v.changeEditCalculateCommonString(Y,[G,D],(0,p.fromJS)(d({},g))));var h=!1,y=!1;Z&&(h=!0,y="STATE_CHYE_CH"===W||!("true"===o&&t.props.unit&&!t.props.unit.get("unitList").size)),z&&z(n,D),"STATE_YYSR_XS"!==W&&"STATE_YYSR_TS"!==W&&j(v.getStockBuildUpPrice(x,[{cardUuid:n,storeUuid:"STATE_CHDB"===W?K:c,assistList:J.get("assistList"),batchUuid:J.get("batchUuid"),noNeedPrice:h,moreUnit:y}],D,Y,V))}(t,a),ee&&(j(v.changeEditCalculateCommonString(Y,se.concat(["serialList"]),(0,p.fromJS)([]))),j(v.changeEditCalculateCommonString(Y,se.concat(["quantity"]),"")),j(v.changeEditCalculateCommonString(Y,se.concat(["isModify"]),!0)),te||j(v.changeEditCalculateCommonString(Y,se.concat(["amount"]),"")));var n=a.props.financialInfo;n&&(n.get("openAssist")||n.get("openBatch"))&&e.openDrop(q)}},F.map(function(e,t){return g.default.createElement(Option,{key:e.get(X),value:""+e.get(X)+C.TREE_JOIN_STR+e.get("code")+C.TREE_JOIN_STR+e.get("name")+C.TREE_JOIN_STR+e.get("isOpenedQuantity")+C.TREE_JOIN_STR+e.get("isUniformPrice"),unit:e.get("unit"),financialInfo:e.get("financialInfo")},e.get("code")+" "+e.get("name"))})):g.default.createElement("div",{style:{position:"relative"}},g.default.createElement(u.default,{value:J.get("code")?(J.get("code")?J.get("code"):"")+" "+(J.get("name")?J.get("name"):""):void 0,onChange:function(){j(v.changeEditCalculateCommonString(Y,se,(0,p.fromJS)({})))},onFocus:function(){e.openDrop(q)}}),g.default.createElement(E.XfnIcon,{type:"circle-del",className:"inventory-circle-del",onClick:function(e){e.preventDefault(),j(v.changeEditCalculateCommonString(Y,se,(0,p.fromJS)({})))}}),g.default.createElement("div",{className:q?"assembly-drop-content":"inventory-drop-content",style:{display:N?"":"none"},ref:function(t){return e.nameInput=t},onClick:function(t){t.stopPropagation(),M&&e.setState({addBatch:!1,addBatchChange:!1})}},g.default.createElement("div",{style:{display:oe?"":"none"}},g.default.createElement("span",null,"属性:"),ce.map(function(t,a){return g.default.createElement(l.default,{key:t.get("uuid"),dropdownClassName:"inventory-are-for-dom"+a,value:((re||(0,p.fromJS)([])).find(function(e){return e.get("classificationUuid")===t.get("uuid")})||(0,p.fromJS)({})).get("propertyName")||void 0,dropdownRender:function(n){return g.default.createElement("div",null,n,g.default.createElement(c.default,{style:{margin:"4px 0"}}),g.default.createElement("div",{style:{padding:"4px 8px",cursor:"pointer"},onMouseDown:function(e){return e.preventDefault()},onClick:function(){return e.setState({assistModal:!0,classificationUuid:t.get("uuid"),assIndex:a})}},g.default.createElement(s.default,{type:"plus"})," 新增"))},onChange:function(n){var r=n.split(C.TREE_JOIN_STR),i=r[0],o=r[1],l=re.size,u=re.findIndex(function(e){return e.get("classificationUuid")===t.get("uuid")});J.get("assistList");0===l?j(v.changeEditCalculateCommonString(Y,se.concat(["assistList"]),(0,p.fromJS)([{classificationUuid:t.get("uuid"),classificationName:t.get("name"),propertyUuid:i,propertyName:o}]))):-1===u?j(v.changeEditCalculateCommonString(Y,se.concat(["assistList",l]),(0,p.fromJS)({classificationUuid:t.get("uuid"),classificationName:t.get("name"),propertyUuid:i,propertyName:o}))):(j(v.changeEditCalculateCommonString(Y,se.concat(["assistList",a,"propertyUuid"]),i)),j(v.changeEditCalculateCommonString(Y,se.concat(["assistList",a,"propertyName"]),o))),ee&&(j(v.changeEditCalculateCommonString(Y,se.concat(["serialList"]),(0,p.fromJS)([]))),j(v.changeEditCalculateCommonString(Y,se.concat(["quantity"]),"")),j(v.changeEditCalculateCommonString(Y,se.concat(["isModify"]),!0)),te||j(v.changeEditCalculateCommonString(Y,se.concat(["amount"]),"")));var c=!1,s=!1;e.props.needHidePrice&&(c=!0,s="STATE_CHYE_CH"===W||!("true"===J.get("isOpenedQuantity")&&J.get("unit")&&!J.getIn(["unit","unitList"]).size)),j(v.getStockBuildUpPrice(x,[{cardUuid:J.get("cardUuid"),storeUuid:"STATE_CHDB"===W?e.props.warehouseUuid:J.get("warehouseCardUuid"),assistList:J.get("assistList")?J.get("assistList").toJS():[],batchUuid:J.get("batchUuid"),noNeedPrice:c,moreUnit:s}],D,Y,V))}},t.get("propertyList").map(function(e){return g.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("name")},e.get("name"))}))})),ie?g.default.createElement("div",null,g.default.createElement("span",{style:{width:"36px"}},"批次:"),g.default.createElement(m.Fragment,null,g.default.createElement(l.default,{showSearch:!0,key:J.get("uuid"),showArrow:!1,placeholder:"请选择/新增批次",dropdownClassName:"inventory-are-for-dom"+D,dropdownRender:function(t){return g.default.createElement("div",null,t,g.default.createElement(c.default,{style:{margin:"4px 0"}}),g.default.createElement("div",{style:{padding:"4px 8px",cursor:"pointer"},onMouseDown:function(e){return e.preventDefault()},onClick:function(){return e.setState({batchModal:!0})}},g.default.createElement(E.XfnIcon,{type:"edit-pen"}),"修改批次信息"))},onDropdownVisibleChange:function(e){e&&j(b.getStockBatchList({inventoryUuid:q?J.get("materialUuid"):J.get("cardUuid"),sectionTemp:Y,stockTemplate:G,index:D,materIndex:$}))},value:fe,onChange:function(t,a){var n=t.split(C.TREE_JOIN_STR),r=a.props.batchUuid,i=n[0]||"",o=n[1]?n[1]:"";j(v.changeEditCalculateCommonString(Y,se.concat(["batch"]),i)),j(v.changeEditCalculateCommonString(Y,se.concat(["batchUuid"]),r)),j(v.changeEditCalculateCommonString(Y,se.concat(["expirationDate"]),o)),ee&&(j(v.changeEditCalculateCommonString(Y,se.concat(["serialList"]),(0,p.fromJS)([]))),j(v.changeEditCalculateCommonString(Y,se.concat(["quantity"]),"")),j(v.changeEditCalculateCommonString(Y,se.concat(["isModify"]),!0)),te||j(v.changeEditCalculateCommonString(Y,se.concat(["amount"]),"")));var l=!1,u=!1;e.props.needHidePrice&&(l=!0,u="STATE_CHYE_CH"===W||!("true"===J.get("isOpenedQuantity")&&J.get("unit")&&!J.getIn(["unit","unitList"]).size)),j(v.getStockBuildUpPrice(x,[{cardUuid:J.get("cardUuid"),storeUuid:"STATE_CHDB"===W?e.props.warehouseUuid:J.get("warehouseCardUuid"),assistList:J.get("assistList")?J.get("assistList").toJS():[],batchUuid:r,noNeedPrice:l,moreUnit:u}],D,Y,V))}},J.get("batchList")&&J.get("batchList").map(function(e){return g.default.createElement(Option,{key:e.get("batchUuid"),value:""+e.get("batch")+C.TREE_JOIN_STR+e.get("expirationDate"),batchUuid:e.get("batchUuid")},e.get("batch")+(le&&e.get("expirationDate")?"("+e.get("expirationDate")+")":""))})),g.default.createElement("span",{className:"add-button",onClick:function(t){t.preventDefault(),e.setState({addBatch:!0,addBatchChange:!0})}},"新增")),g.default.createElement("div",{className:"ls-batch-select-frame",style:{display:O?"":"none"},onClick:function(e){e.stopPropagation()}},g.default.createElement("div",null,g.default.createElement("span",null,g.default.createElement("span",{style:{color:"red"}},"*"),"批次号："),g.default.createElement(u.default,{value:I,onChange:function(t){t.preventDefault();/^[0-9a-zA-Z]{0,8}$/.test(t.target.value)?e.setState({batchNumber:t.target.value}):o.default.info("批次只支持输入8位以内的数字或字母")},placeholder:"请输入批次号"})),le?g.default.createElement("div",null,g.default.createElement("span",null,"生产日期："),g.default.createElement(i.default,{placeholder:"请选择生产日期",allowClear:!1,size:"small",value:(0,h.default)(a),dropdownClassName:"inventory-are-for-dom"+D,onChange:function(t){var a=t.format("YYYY-MM-DD");e.setState({batchDate:a})}})):"",le?g.default.createElement("div",null,g.default.createElement("span",null,g.default.createElement("span",{style:{color:"red"}},"*"),"截止日期："),g.default.createElement(i.default,{placeholder:"请选择生产日期",allowClear:!1,size:"small",value:(0,h.default)(f),dropdownClassName:"inventory-are-for-dom"+D,onChange:function(t){var a=t.format("YYYY-MM-DD");e.setState({expirationDate:a})}})):"",le&&(ue||a&&f)?g.default.createElement("div",null,g.default.createElement("span",null),g.default.createElement("div",null,"("+(ue?"默认保质期："+ue+"天 ":"")+(this.getCurShelfLife(a,f)?"实际保质期："+this.getCurShelfLife(a,f)+"天":"")+")")):"",g.default.createElement("div",null,g.default.createElement(r.default,{onClick:function(){return e.setState({addBatch:!1})}},"取消"),g.default.createElement(r.default,{type:"primary",onClick:function(){j(L.insertBatch(I,a,f,J.get("cardUuid"),function(t){var a=t.batchUuid,n=t.batch,r=t.expirationDate;j(v.changeEditCalculateCommonString(Y,se.concat(["batch"]),n)),j(v.changeEditCalculateCommonString(Y,se.concat(["batchUuid"]),a)),j(v.changeEditCalculateCommonString(Y,se.concat(["expirationDate"]),r)),ee&&(j(v.changeEditCalculateCommonString(Y,se.concat(["serialList"]),(0,p.fromJS)([]))),j(v.changeEditCalculateCommonString(Y,se.concat(["quantity"]),"")),j(v.changeEditCalculateCommonString(Y,se.concat(["isModify"]),!0)),te||j(v.changeEditCalculateCommonString(Y,se.concat(["amount"]),""))),e.setState({addBatch:!1,batchNumber:"",batchDate:(new y.DateLib).toString(),expirationDate:(new y.DateLib).toString()})}))}},"新增")))):""),R?g.default.createElement(n.default,{visible:!0,title:"新增属性",className:"inventory-are-for-dom",onCancel:function(){return e.setState({assistModal:!1})},onOk:function(){j(b.insertAssist({classificationUuid:P,name:w,inventoryUuid:J.get("cardUuid"),sectionTemp:Y,stockTemplate:G,isAssembly:q,index:D,materIndex:$,assIndex:U},function(t,a){var n=t.filter(function(e){return e.name===a}),r=(n.length,re?re.findIndex(function(e){return e.get("classificationUuid")===P}):-1),i=n[0].uuid,o=n[0].name;-1===r?j(v.changeEditCalculateCommonString(Y,se.concat(["assistList"]),re.concat((0,p.fromJS)([{classificationUuid:P,propertyUuid:i,propertyName:o}])))):(j(v.changeEditCalculateCommonString(Y,se.concat(["assistList",U,"propertyUuid"]),i)),j(v.changeEditCalculateCommonString(Y,se.concat(["assistList",U,"propertyName"]),o))),ee&&(j(v.changeEditCalculateCommonString(Y,se.concat(["serialList"]),(0,p.fromJS)([]))),j(v.changeEditCalculateCommonString(Y,se.concat(["quantity"]),"")),j(v.changeEditCalculateCommonString(Y,se.concat(["isModify"]),!0)),te||j(v.changeEditCalculateCommonString(Y,se.concat(["amount"]),""))),e.setState({assistModal:!1,asssistName:"",assIndex:-1})}))}},g.default.createElement("div",{style:{display:"flex"}},g.default.createElement("span",{style:{width:"72px",lineHeight:"28px"}},"属性名称："),g.default.createElement(u.default,{value:w,onChange:function(t){t.preventDefault(),e.setState({asssistName:t.target.value})}}))):"",A?g.default.createElement(T.default,{className:"inventory-are-for-dom",visible:!0,onClose:function(){e.setState({batchModal:!1})},onOk:function(t,a,n,r){j(b.modifyBatch({inventoryUuid:q?J.get("materialUuid"):J.get("cardUuid"),sectionTemp:Y,stockTemplate:G,index:D,materIndex:$,batch:t,batchUuid:a,productionDate:le?n:"",expirationDate:le?r:"",isAssembly:q},function(){e.setState({batchModal:!1})}))},saveAndNewForbidden:!0,batchList:J.get("batchList"),openShelfLife:le,shelfLife:ue}):""))}}]),t}();t.default=O},1576:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=f(a(32)),i=f(a(100)),o=f(a(14)),l=f(a(171)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(51),a(99),a(78),a(170);var c=f(a(1)),s=a(17),d=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);t.default=e}(a(27)),a(18));function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}a(1400);var p=l.default.TreeNode,C=(0,s.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={inputValue:""},g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e,t=this,a=this.props,n=(a.dispatch,a.modalStyle),u=a.modalName,s=a.cardList,f=(a.curSelectUuid,a.cancel),g=(a.allCheckBoxClick,a.onOkCallback),C=a.onCheck,h=a.checkedKeys,y=a.nameString,E=a.uuidString,S=this.state.inputValue,T=s&&s.size?s:(0,d.fromJS)([]),_=y||"jrCategoryName",v=E||"jrCategoryUuid",b=(m(e={},_,"全部"),m(e,v,""),m(e,"childList",T.toJS()),e),L=[];!function e(t){if(L.push(t[v]),t.childList&&t.childList.length){var a=!1,n=!0,r=!1,i=void 0;try{for(var o,l=t.childList[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)a=e(o.value)||a}catch(e){r=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw i}}return t.selected=a,a}if(!t.childList||0===t.childList.length)return t[_]&&t[_].indexOf(S)>-1?(t.selected=!0,!0):(t.selected=!1,!1)}(b);!function e(t){if(t.selected||delete t.selected,t.childList){t.childList=t.childList.filter(function(e){return e.selected})||[];var a=!0,n=!1,r=void 0;try{for(var i,o=t.childList[Symbol.iterator]();!(a=(i=o.next()).done);a=!0)e(i.value)}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}}}(b);return c.default.createElement("div",{className:"mxb-common-modal",style:n},c.default.createElement("div",{className:"mxb-common-modal-title"},c.default.createElement("span",{className:"title-icon",onClick:function(e){e.stopPropagation(),f()}},c.default.createElement(o.default,{type:"close"}))),c.default.createElement("div",{className:"mxb-common-modal-content"},c.default.createElement("div",{className:"common-modal-serch"},S?c.default.createElement(o.default,{className:"search-delete",type:"close-circle",theme:"filled",onClick:function(){t.setState({inputValue:""})}}):null,c.default.createElement(o.default,{className:"serch-icon",type:"search",onClick:function(e){}}),c.default.createElement(i.default,{className:"serch-input",placeholder:"筛选"+u,value:S,onChange:function(e){t.setState({inputValue:e.target.value})}})),c.default.createElement("div",{className:"common-mocal-card-list"},c.default.createElement("div",{className:"mxb-common-modal-tree"},c.default.createElement(l.default,{checkable:!0,onCheck:function(e,t){C(e,t,L)},checkedKeys:h,style:{position:"relative"}},"(全选)".indexOf(S)>-1?c.default.createElement(p,{key:"all",title:"(全选)",checkable:!0}):"",b.childList.length?function e(t){return t.map(function(t,a){var n=""+t.get(v),r=""+t.get(_);return t.get("childList")&&t.get("childList").size?c.default.createElement(p,{key:n,title:r},e(t.get("childList"))):c.default.createElement(p,{key:n,title:r})})}((0,d.fromJS)(b.childList)):"")))),c.default.createElement("div",{className:"mxb-common-modal-bottom"},c.default.createElement(r.default,{type:"primary",onClick:function(e){e.stopPropagation(),f(),g()}},"确定")))}}]),t}())||n;t.default=C},1583:function(e,t,a){},1747:function(e,t,a){},1748:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.refreshButtonAction=void 0;var n,r=h(a(14)),i=h(a(32)),o=h(a(37)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(78),a(51),a(38);var u=h(a(1)),c=a(17),s=(a(18),a(127),C(a(30)),C(a(27)),a(22)),d=(a(482),a(101)),f=C(a(172)),m=C(a(130)),g=C(a(1304)),p=C(a(102));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var y=t.refreshButtonAction=null,E=(0,c.immutableRenderDecorator)(n=function(e){function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,u.default.Component),l(a,[{key:"render",value:function(){var e=this.props,a=e.dispatch,n=e.oriTemp,l=e.flags,c=e.editPermission,C=e.taxRateTemp,h=e.pageTab,E=e.paymentType,S=e.insertOrModify,T=e.calculateViews,_=(e.SfglTemp,e.CqzcTemp,e.CommonChargeTemp,e.InternalTransferTemp,e.DepreciationTemp,e.InvoicingTemp,e.InvoiceAuthTemp,e.TransferOutTemp,e.CostTransferTemp,e.StockTemp,e.BalanceTemp,e.TaxTransferTemp,e.StockBuildUpTemp,e.StockIntoProjectTemp,e.ProjectCarryoverTemp,e.commonTemp),v=n.get("categoryType"),b=(0,d.getCategorynameByType)(v),L=(b.categoryTypeObj,b.direction,l.get("switchUuidList")||[]),I=T.get("switchUuidList")||[],N="business"===h&&"LB_SFGL"!==E?L:I,O=(n.get("name"),n.get("beCertificate")),A="business"===h&&"LB_SFGL"!==E?n.get("oriUuid"):T.get("oriUuid"),R=(l.get("uuidList"),l.get("currentSwitchUuid"),C.get("scale")),w=_.get("beCertificate"),P=null,U=null;switch("LB_SFGL"===E?"payment":h){case"business":"modify"===S?(t.refreshButtonAction=y=function(){return(0,s.debounce)(function(){a(f.refreshRunningbusiness())})()},P=function(){return(0,s.debounce)(function(){var e=(0,d.beforeSaveCheck)(n,R,S);if(e.length){var t=e.join(",");o.default.info(t)}else a(f.saveRunningbusiness(!0));a(p.getRunningSettingInfo())})()}):(t.refreshButtonAction=y=function(){return(0,s.debounce)(function(){a(p.getRunningSettingInfo(!0)),a(f.selectAccountRunningCategory(n.get("categoryUuid"),!0))})()},P=function(){return(0,s.debounce)(function(){var e=(0,d.beforeSaveCheck)(n,R,S);if(e.length){var t=e.join(",");o.default.info(t)}else a(f.saveRunningbusiness(!0))})()}),U=function(){return(0,s.debounce)(function(){var e=(0,d.beforeSaveCheck)(n,R,S);if(e.length){var t=e.join(",");o.default.info(t)}else a(f.saveRunningbusiness())})()};break;case"payment":"modify"===S?(t.refreshButtonAction=y=function(){return(0,s.debounce)(function(){a(m.modifyRefreshCalculate(E))})()},P=function(){return(0,s.debounce)(function(){a(p.getRunningSettingInfo()),a(m.saveCalculatebusiness(E,!0))})()}):(t.refreshButtonAction=y=function(){return(0,s.debounce)(function(){a(p.getRunningSettingInfo(!0)),a(m.insertRefreshCalculate(E))})()},P=function(){return(0,s.debounce)(function(){a(m.saveCalculatebusiness(E,!0))})()}),U=function(){return(0,s.debounce)(function(){a(m.saveCalculatebusiness(E))})()}}return u.default.createElement("div",{className:"title"},u.default.createElement("div",null,u.default.createElement(i.default,{type:"ghost",className:"title-right",onClick:y},"刷新"),u.default.createElement(i.default,{type:"ghost",className:"title-right",disabled:"business"===h&&"LB_SFGL"!==E?!c||O:!c||w,onClick:P},"保存并新增"),u.default.createElement(i.default,{type:"ghost",disabled:"business"===h&&"LB_SFGL"!==E?!c||O:!c||w,className:"title-right",onClick:U},"保存")),"modify"===S&&N.size?u.default.createElement("div",null,u.default.createElement(i.default,{type:"ghost",className:"title-right",disabled:N.some(function(e,t){return e.get("oriUuid")===A&&t===N.size-1}),onClick:function(){var e=N.findIndex(function(e){return e.get("oriUuid")===A})+1;a(g.getBusinessBeforeSwitch(N.get(e),e,N))}},u.default.createElement(r.default,{type:"caret-right"})),u.default.createElement(i.default,{type:"ghost",className:"title-right",disabled:N.some(function(e,t){return e.get("oriUuid")===A&&0===t}),onClick:function(){var e=N.findIndex(function(e){return e.get("oriUuid")===A})-1;a(g.getBusinessBeforeSwitch(N.get(e),e,N))}},u.default.createElement(r.default,{type:"caret-left"}))):"")}}]),a}())||n;t.default=E},1749:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=g(a(61)),i=g(a(45)),o=g(a(89)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(79),a(55),a(88);var u=g(a(1)),c=a(17),s=(a(18),m(a(27)),a(101)),d=(a(127),m(a(172))),f=m(a(484));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var p=o.default.Group,C=(i.default.Option,(0,c.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.oriTemp.get("oriState"),a=e.insertOrModify,n=e.disabledChange;t!==this.props.oriTemp.get("oriState")&&n&&this.props.dispatch(f.changeViewString("disabledChange",!1)),t===this.props.oriTemp.get("oriState")||"insert"!==a||n||(this.props.dispatch(d.changeStateAndAbstract(e.oriTemp,t)),this.props.dispatch(d.changeStateInitOriTemp(t)))}},{key:"render",value:function(){var e=this.props,t=(e.isModify,e.oriTemp),a=e.dispatch,n=(e.beSpecial,e.oriState),i=(e.payOrReceive,e.flags,e.disabled,e.specialStateforAccrued,e.insertOrModify),l=t.get("categoryType"),c=(0,s.getCategorynameByType)(l),f=(c.propertyShow,c.categoryTypeObj),m=c.direction,g=(c.showInvoice,c.isShowAbout,c.specialState,t.get("propertyPay")),C=t.get("categoryUuid"),h=t.getIn([f,"beAccrued"]),y=t.getIn([f,"beWelfare"]),E=t.get("propertyTax"),S=(t.getIn([f,"beTurnOut"]),t.getIn([f,"beInAdvance"])),T=t.getIn([f,"beSellOff"]),_=t.getIn([f,"propertyCarryover"]),v=t.getIn([f,"beWithholding"]),b=t.getIn([f,"beWithholdSocial"]),L=t.getIn([f,"beWithholdTax"]),I=t.get("handleType"),N=t.get("propertyInvest"),O=(t.get("handleAmount"),t.get("runningType"),t.get("pendingStrongList"),t.get("strongList")),A=t.getIn([f,"beDeposited"]),R=(t.get("assetType"),t.get("oriDate")),w=t.getIn([f,"stockRange"]),P=t.getIn([f,"contactsRange"]);return"JR_HANDLE_QDJK"!==I&&"JR_HANDLE_CHBJ"!==I&&"JR_HANDLE_DWTZ"!==I&&"JR_HANDLE_SHTZ"!==I&&"JR_HANDLE_ZZ"!==I&&"JR_HANDLE_JZ"!==I&&"SX_GRSF"!==E?u.default.createElement("div",{className:"edit-running-modal-list-item",style:{minHeight:"auto"}},u.default.createElement("label",null),"LB_YYSR"===l||"LB_YYZC"===l?u.default.createElement("div",null,u.default.createElement(p,{disabled:"modify"===i&&O.size,onChange:function(e){a(d.changeStateAndAbstract(t,e.target.value)),a(d.changeLrAccountCommonString("ori","oriState",e.target.value)),"SX_HW"===_&&a(d.getStockCardList(e.target.value,w))},value:n},u.default.createElement(o.default,{key:"a",value:"debit"===m?"STATE_YYSR_DJ":"STATE_YYZC_DJ",disabled:!A},u.default.createElement(r.default,{placement:"topLeft",title:A?"":"流水设置中未启用"},"debit"===m?"预收":"预付")),u.default.createElement(o.default,{key:"b",value:"debit"===m?"STATE_YYSR_XS":"STATE_YYZC_GJ"},"debit"===m?"销售":"购进"),u.default.createElement(o.default,{key:"c",value:"debit"===m?"STATE_YYSR_TS":"STATE_YYZC_TG",disabled:!T},u.default.createElement(r.default,{placement:"topLeft",title:T?"":"流水设置中未启用"},"debit"===m?"退销":"退购")))):null,"LB_FYZC"===l?u.default.createElement("div",null,u.default.createElement(p,{disabled:"modify"===i&&O.size,onChange:function(e){a(d.changeStateAndAbstract(t,e.target.value)),a(d.getFirstContactsCardList(P,e.target.value)),a(d.changeLrAccountCommonString("ori","oriState",e.target.value)),"modify"===i&&a(d.changeModifyState(e.target.value))},value:n},u.default.createElement(o.default,{key:"a",value:"STATE_FY_DJ",disabled:!A},u.default.createElement(r.default,{placement:"topLeft",title:A?"":"流水设置中未启用"},"预付")),u.default.createElement(o.default,{key:"d",value:"STATE_FY"},"发生"))):null,"LB_TZ"===l&&"JR_HANDLE_QDSY"===I?u.default.createElement("div",null,u.default.createElement(p,{disabled:"modify"===i,onChange:function(e){a(d.changeStateAndAbstract(t,e.target.value)),a(d.changeLrAccountCommonString("ori","oriState",e.target.value)),"STATE_TZ_SRGL"!==e.target.value&&"STATE_TZ_SRLX"!==e.target.value||a(d.getJrNotHandleList(C,"Invest"))},value:n},u.default.createElement(o.default,{key:"j",value:"STATE_TZ_JTGL",style:{display:"SX_GQ"===N?"":"none"},disabled:!h},u.default.createElement(r.default,{placement:"topLeft",title:h?"":"流水设置中未启用"},"计提股利")),u.default.createElement(o.default,{key:"k",value:"STATE_TZ_SRGL",style:{display:"SX_GQ"===N?"":"none"}},"收入股利"),u.default.createElement(o.default,{key:"l",value:"STATE_TZ_JTLX",style:{display:"SX_ZQ"===N?"":"none"},disabled:!h},u.default.createElement(r.default,{placement:"topLeft",title:h?"":"流水设置中未启用"},"计提利息")),u.default.createElement(o.default,{key:"m",value:"STATE_TZ_SRLX",style:{display:"SX_ZQ"===N?"":"none"}},"收入利息"))):null,"LB_JK"===l&&"JR_HANDLE_CHLX"===I?u.default.createElement("div",null,u.default.createElement(p,{disabled:"modify"===i&&O.size,onChange:function(e){a(d.changeStateAndAbstract(t,e.target.value)),a(d.changeLrAccountCommonString("ori","oriState",e.target.value)),"STATE_JK_ZFLX"===e.target.value&&a(d.getJrNotHandleList(C,"Loan"))},value:n},u.default.createElement(o.default,{key:"sa",value:"STATE_JK_JTLX",disabled:!h},u.default.createElement(r.default,{placement:"topLeft",title:h?"":"流水设置中未启用"},"计提利息")),u.default.createElement(o.default,{key:"t",value:"STATE_JK_ZFLX"},"支付利息"))):null,"LB_XCZC"===l?u.default.createElement("div",null,u.default.createElement(p,{disabled:"modify"===i,onChange:function(e){a(d.changeStateAndAbstract(t,e.target.value)),a(d.changeLrAccountCommonString("ori","oriState",e.target.value)),"STATE_XC_FF"!==e.target.value&&"STATE_XC_JN"!==e.target.value||a(d.getJrNotHandleList(C,"Payment")),(v||b)&&a(d.getJrPaymentAmountInfo()),L&&"SX_GZXJ"===g&&a(d.getJrPaymentTaxInfo())},value:n},"modify"===i&&"STATE_XC_DK"!==n&&"STATE_XC_DJ"!==n||"insert"===i?u.default.createElement(o.default,{key:"v",value:"STATE_XC_JT",disabled:!h&&!y},u.default.createElement(r.default,{placement:"topLeft",title:h||y?"":"流水设置中未启用"},"计提")):"","modify"===i&&"STATE_XC_DK"!==n&&"STATE_XC_DJ"!==n&&"SX_FLF"!==g||"insert"===i&&"SX_FLF"!==g?u.default.createElement(o.default,{key:"x",value:"SX_GZXJ"===g||"SX_QTXC"===g?"STATE_XC_FF":"STATE_XC_JN"},"SX_GZXJ"===g||"SX_QTXC"===g?"发放":"缴纳"):"","SX_FLF"===g?u.default.createElement(o.default,{key:"x",value:"STATE_XC_FF"},"支付"):"","STATE_XC_DK"===n?u.default.createElement(o.default,{key:"x",value:"STATE_XC_DK"},"代扣"):"","STATE_XC_DJ"===n?u.default.createElement(o.default,{key:"x",value:"STATE_XC_DJ"},"代缴"):"")):null,"LB_SFZC"===l?u.default.createElement("div",null,u.default.createElement(p,{disabled:"modify"===i,onChange:function(e){a(d.changeStateAndAbstract(t,e.target.value)),a(d.changeLrAccountCommonString("ori","oriState",e.target.value)),"STATE_SF_JN"===e.target.value&&(h||S||"SX_ZZS"===E)&&(a(d.getJrNotHandleList(C,"Vat")),E&&a(d.getJrVatPrepayList("STATE_SF_JN"))),"STATE_SF_ZCWJZZS"===e.target.value&&a(d.getTransferAmount())},value:n},u.default.createElement(o.default,{key:"z",value:"STATE_SF_JT",style:{display:"SX_QTSF"!==E&&"SX_QYSDS"!==E||"STATE_SF_SFJM"===n?"none":""},disabled:!h},u.default.createElement(r.default,{placement:"topLeft",title:h?"":"流水设置中未启用"},"计提")),u.default.createElement(o.default,{key:"ab",value:"STATE_SF_YJZZS",style:{display:"SX_ZZS"===E&&"STATE_SF_SFJM"!==n?"":"none"},disabled:!S},u.default.createElement(r.default,{placement:"topLeft",title:S?"":"流水设置中未启用"},"预缴增值税")),u.default.createElement(o.default,{key:"aa",value:"STATE_SF_ZCWJZZS",style:{display:"SX_ZZS"===E?"":"none"}},"转出未交增值税"),u.default.createElement(o.default,{key:"aa",value:"STATE_SF_JN",style:{display:"STATE_SF_SFJM"!==n?"":"none"}},"缴纳"),"STATE_SF_SFJM"===n?u.default.createElement(o.default,{key:"aa",value:"STATE_SF_SFJM"},"减免"):"")):null,"LB_ZSKX"===l?u.default.createElement("div",null,u.default.createElement(p,{disabled:"modify"===i&&O.size,onChange:function(e){a(d.changeStateAndAbstract(t,e.target.value)),a(d.changeLrAccountCommonString("ori","oriState",e.target.value)),"STATE_ZS_TH"===e.target.value&&a(d.getPaymentManageList(R))},value:n},u.default.createElement(o.default,{key:"ba",value:"STATE_ZS_SQ"},"收取"),u.default.createElement(o.default,{key:"ca",value:"STATE_ZS_TH"},"退还"))):null,"LB_ZFKX"===l?u.default.createElement("div",null,u.default.createElement(p,{disabled:"modify"===i&&O.size,onChange:function(e){a(d.changeStateAndAbstract(t,e.target.value)),a(d.changeLrAccountCommonString("ori","oriState",e.target.value)),"STATE_ZF_SH"===e.target.value&&a(d.getPaymentManageList(R))},value:n},u.default.createElement(o.default,{key:"ae",value:"STATE_ZF_FC"},"付出"),u.default.createElement(o.default,{key:"af",value:"STATE_ZF_SH"},"收回"))):null,"JR_HANDLE_LRFP"===I?u.default.createElement("div",null,u.default.createElement(p,{disabled:"modify"===i,onChange:function(e){a(d.changeStateAndAbstract(t,e.target.value)),a(d.changeLrAccountCommonString("ori","oriState",e.target.value)),"STATE_ZB_ZFLR"===e.target.value&&a(d.getJrNotHandleList(C,"Capital"))},value:n},u.default.createElement(o.default,{key:"ah",value:"STATE_ZB_LRFP",disabled:!h},u.default.createElement(r.default,{placement:"topLeft",title:h?"":"流水设置中未启用"},"利润分配")),u.default.createElement(o.default,{key:"bj",value:"STATE_ZB_ZFLR"},"支付利润"))):null):null}}]),t}())||n);t.default=C},1750:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=g(a(61)),i=g(a(45)),o=g(a(89)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(79),a(55),a(88);var u=g(a(1)),c=a(17),s=a(18),d=(a(56),m(a(27)),a(127),a(101)),f=(a(22),m(a(172)));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}o.default.Group;var p=i.default.Option,C=(0,c.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.oriTemp,a=(e.flags,e.dispatch),n=e.insertOrModify,o=t.get("categoryType"),l=(0,d.getCategorynameByType)(o),c=(l.propertyShow,l.categoryTypeObj),m=(l.direction,l.showInvoice,l.isShowAbout,l.specialState,t.get("runningType")),g=(t.getIn([c,"beManagemented"]),t.get("handleType")),C=t.getIn([c,"beAccrued"]),h=t.get("oriState"),y=t.get("pendingStrongList"),E=t.get("beCertificate"),S=t.get("propertyInvest"),T=t.get("categoryUuid"),_=t.get("propertyCostList"),v=t.get("propertyCost"),b=d.propertyName[v],L=(0,d.disablePropertyFunc)(v);return u.default.createElement("div",null,"LB_CQZC"===o&&"LX_JZSY_SY"!==m&&"LX_JZSY_SS"!==m?u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"处理类型："),u.default.createElement("div",null,u.default.createElement(i.default,{disabled:"modify"===n,value:g,onChange:function(e){var n={JR_HANDLE_CZ:"STATE_CQZC_YS",JR_HANDLE_GJ:"STATE_CQZC_YF"}[e]||"";a(f.changeStateAndAbstract(t,n)),a(f.changeLrAccountCommonString("ori","oriState",n)),a(f.changeLrAccountCommonString("ori","handleType",e)),a(f.changeLrAccountCommonString("ori","billList",(0,s.fromJS)([{}]))),a(f.changeLrAccountCommonString("",["flags","dropManageFetchAllowed"],!0))}},u.default.createElement(p,{key:"a",value:"JR_HANDLE_GJ"},"购进资产"),u.default.createElement(p,{key:"b",value:"JR_HANDLE_CZ"},"处置")))):null,"LB_JK"===o?u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"处理类型："),u.default.createElement("div",null,u.default.createElement(i.default,{disabled:"modify"===n,value:g,onChange:function(e){var n={JR_HANDLE_CHLX:"STATE_JK_ZFLX",JR_HANDLE_CHBJ:"STATE_JK_YF",JR_HANDLE_QDJK:"STATE_JK_YS"}[e]||"";a(f.changeStateAndAbstract(t,n)),a(f.changeLrAccountCommonString("ori","oriState",n)),a(f.changeLrAccountCommonString("ori","handleType",e))}},u.default.createElement(p,{key:"a",value:"JR_HANDLE_QDJK"},"取得借款"),u.default.createElement(p,{key:"b",value:"JR_HANDLE_CHLX"},"偿还利息"),u.default.createElement(p,{key:"c",value:"JR_HANDLE_CHBJ"},"偿还本金")))):null,"LB_TZ"===o?u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"处理类型："),u.default.createElement("div",null,u.default.createElement(i.default,{disabled:"modify"===n,value:g,onChange:function(e){"JR_HANDLE_DWTZ"===e?(a(f.changeStateAndAbstract(t,"STATE_TZ_YF")),a(f.changeLrAccountCommonString("ori","oriState","STATE_TZ_YF"))):"JR_HANDLE_SHTZ"===e?(a(f.changeStateAndAbstract(t,"STATE_TZ_YS")),a(f.changeLrAccountCommonString("ori","oriState","STATE_TZ_YS"))):"JR_HANDLE_QDSY"===e&&"SX_ZQ"===S?(a(f.changeStateAndAbstract(t,"STATE_TZ_SRLX")),a(f.changeLrAccountCommonString("ori","oriState","STATE_TZ_SRLX")),a(f.getJrNotHandleList(T,"Invest"))):"JR_HANDLE_QDSY"===e&&"SX_GQ"===S?(a(f.changeStateAndAbstract(t,"STATE_TZ_SRGL")),a(f.changeLrAccountCommonString("ori","oriState","STATE_TZ_SRGL")),a(f.getJrNotHandleList(T,"Invest"))):a(f.changeLrAccountCommonString("ori","oriState","")),a(f.changeLrAccountCommonString("ori","handleType",e))}},u.default.createElement(p,{key:"a",value:"JR_HANDLE_DWTZ"},"对外投资"),u.default.createElement(p,{key:"b",value:"JR_HANDLE_QDSY"},"取得收益"),u.default.createElement(p,{key:"c",value:"JR_HANDLE_SHTZ"},"收回投资")))):null,"LB_ZB"===o?u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"处理类型："),u.default.createElement("div",null,u.default.createElement(i.default,{disabled:"modify"===n,value:g,onChange:function(e){var n={JR_HANDLE_ZZ:"STATE_ZB_ZZ",JR_HANDLE_LRFP:"STATE_ZB_ZFLR",JR_HANDLE_JZ:"STATE_ZB_JZ",JR_HANDLE_ZBYJ:"STATE_ZB_ZBYJ"}[e]||"";a(f.changeStateAndAbstract(t,n)),a(f.changeLrAccountCommonString("ori","oriState",n)),a(f.changeLrAccountCommonString("ori","handleType",e)),"JR_HANDLE_LRFP"===e&&a(f.getJrNotHandleList(T,"Capital"))}},u.default.createElement(p,{key:"a",value:"JR_HANDLE_ZZ"},"实收资本"),u.default.createElement(p,{key:"d",value:"JR_HANDLE_ZBYJ"},"资本溢价"),u.default.createElement(p,{key:"b",value:"JR_HANDLE_LRFP"},"利润分配"),u.default.createElement(p,{key:"c",value:"JR_HANDLE_JZ"},"减资")))):null,_&&_.size>1&&"STATE_XC_DK"!==h&&"STATE_XC_DJ"!==h&&("LB_FYZC"===o&&"STATE_FY_DJ"!==h||"LB_XCZC"===o||"STATE_XC_JN"===o&&C&&"STATE_XC_JT"===h||"STATE_XC_FF"===h||"LB_XCZC"===o&&!C||"XZ_ZJTX"===g)?u.default.createElement("div",{className:"edit-running-modal-list-item",style:{display:("STATE_XC_FF"===h||"STATE_XC_JN"===h||"STATE_XC_DJ"===h)&&y.filter(function(e){return e.get("beSelect")}).size>=1?"none":""}},u.default.createElement("label",null,"费用性质："),u.default.createElement("div",null,u.default.createElement(r.default,{title:d.projectTip[v]||"",placement:"topLeft"},u.default.createElement(i.default,{disabled:"modify"===n&&E||L,value:b,onChange:function(e){a(f.changeLrAccountCommonString("ori","propertyCost",e))}},_&&_.size?_.map(function(e,t){var a={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用",XZ_FINANCE:"财务费用"}[e];return u.default.createElement(p,{key:t,value:e},a)}):null)))):null)}}]),t}())||n;t.default=C},1751:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=s(a(1)),o=a(17),l=a(18),u=(s(a(6)),a(56),a(127),c(a(27)),s(a(90)),a(22),a(101),s(a(1303)),c(a(172)),c(a(177)));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var d=(0,o.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.strongList,n=e.dispatch,r=[];return a.toJS().reduce(function(e,t){return-1===e.indexOf(t.oriUuid)&&(r.push(t),e.push(t.oriUuid)),e},[]),i.default.createElement("div",null,i.default.createElement("div",{className:"accountConf-separator"}),i.default.createElement("div",{className:"edit-running-modal-list-item",style:{flexWrap:"wrap"}},i.default.createElement("span",null,t),(0,l.fromJS)(r).map(function(e){return i.default.createElement("span",{className:"flowNumber-area",onClick:function(t){t.stopPropagation(),n(u.getPreviewRunningBusinessFetch(e,"lrls"))}},e.get("oriDate")+" "+e.get("jrIndex")+"号")})))}}]),t}())||n;t.default=d},1752:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=v(a(32)),i=v(a(37)),o=v(a(14)),l=v(a(1256)),u=v(a(45)),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(51),a(38),a(78),a(1257),a(55);var s=v(a(1)),d=a(17),f=a(18),m=(v(a(6)),a(56),v(a(1237))),g=_(a(27)),p=v(a(483)),C=v(a(90)),h=a(22),y=a(101),E=v(a(1325)),S=_(a(172)),T=_(a(1279));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}var b=u.default.Option,L=(0,d.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),c(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.accounts,n=t.accountList,u=t.dispatch,c=t.isCheckOut,d=t.beManagemented,_=t.oriTemp,v=t.insertOrModify,L=this.state.showModal,I=_.get("amount"),N=a.reduce(function(e,t){return e+Number(t.get("amount")||0)},0),O=1===a.size?a.push((0,f.fromJS)({})):a;return s.default.createElement("div",{className:"account-content"},s.default.createElement("div",{className:"account-content-area",style:{marginBottom:"10px"}},s.default.createElement("span",null,"账户"),s.default.createElement("span",null,"金额"),s.default.createElement("span",null)),O.map(function(t,r){return s.default.createElement("div",{key:r,className:"account-content-area",style:a.size>1?{}:{border:"none",marginBottom:"0"}},s.default.createElement("span",null,s.default.createElement(p.default,{showSearch:!0,combobox:!0,placeholder:"请选择账户",value:t.get("accountName")||void 0,dropdownRender:function(t){return s.default.createElement("div",null,t,s.default.createElement(l.default,{style:{margin:"4px 0"}}),s.default.createElement("div",{style:{padding:"8px",cursor:"pointer"},onMouseDown:function(){u(T.beforeInsertAccountConf()),e.setState({showModal:!0})}},s.default.createElement(o.default,{type:"plus"})," 新增账户"))},onChange:function(e,a){var n=e.split(g.TREE_JOIN_STR),i=n[0],o=n[1],l=a.props.poundage,c=l.get("poundage"),s=l.get("poundageRate"),d=(t.get("amount"),Math.abs(t.get("amount")||0)*s/1e3>c&&-1!==c?c:Math.abs(t.get("amount")||0)*s/1e3);u(S.changeLrAccountCommonString("ori",["accounts",r,"poundageAmount"],d.toFixed(2))),u(S.changeLrAccountCommonString("ori",["accounts",r,"accountUuid"],i)),u(S.changeLrAccountCommonString("ori",["accounts",r,"accountName"],o)),u(S.changeLrAccountCommonString("ori",["accounts",r,"poundage"],a.props.poundage))}},n.getIn([0,"childList"]).map(function(e,t){return s.default.createElement(b,{key:t,value:""+e.get("uuid")+g.TREE_JOIN_STR+e.get("name"),poundage:(0,f.fromJS)({needPoundage:e.get("needPoundage"),poundage:e.get("poundage"),poundageRate:e.get("poundageRate")})},e.get("name"))}))),s.default.createElement("span",null,s.default.createElement(m.default,{value:t.get("amount"),placeholder:"请输入金额",onFocus:function(){if(!t.get("amount")&&N<I){var e=(0,h.decimal)(Number(I)-(Number(N)||0));u(S.changeLrAccountCommonString("ori",["accounts",r,"amount"],e))}},onChange:function(e){(0,y.numberTest)(e,function(e){if("insert"===v){t.getIn(["poundage","poundage"]),t.getIn(["poundage","poundageRate"]);var a=Math.abs(e||0)*t.getIn(["poundage","poundageRate"])/1e3>t.getIn(["poundage","poundage"])&&-1!==t.getIn(["poundage","poundage"])?t.getIn(["poundage","poundage"]):Math.abs(e||0)*t.getIn(["poundage","poundageRate"])/1e3;u(S.changeLrAccountCommonString("ori",["accounts",r,"poundageAmount"],(a||0).toFixed(2)))}u(S.changeLrAccountCommonString("ori",["accounts",r,"amount"],e)),d&&u(S.calculateCurAmount())})}})),s.default.createElement("span",null,a.size>2?s.default.createElement("span",null,s.default.createElement(C.default,{type:"bigDel",theme:"outlined",onClick:function(){u(S.deleteAccounts(a,r))}})):""))}),s.default.createElement(E.default,{dispatch:u,showModal:L,onClose:function(){return e.setState({showModal:!1})},fromPage:"editRunning",isCheckOut:c}),s.default.createElement("div",{className:"account-button"},s.default.createElement(r.default,{onClick:function(){a.size>=32&&i.default.info("多账户不可超过32个账户"),u(S.addAccounts(a,a.size-1))}},s.default.createElement(C.default,{type:"big-plus"}),"添加账户明细"),s.default.createElement("div",{className:"account-amount",style:{marginBottom:5}},s.default.createElement("label",null,"金额合计："),s.default.createElement("div",null,N.toFixed(2)))))}}]),t}())||n;t.default=L},1753:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=S(a(1234)),l=S(a(129)),u=S(a(45)),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1235),a(128),a(55);var s=S(a(1)),d=a(17),f=a(18),m=(S(a(6)),a(56),S(a(1237))),g=E(a(27)),p=S(a(483)),C=(S(a(90)),a(22)),h=a(101),y=(E(a(1279)),E(a(130)));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}var T=u.default.Option,_=(0,d.immutableRenderDecorator)((i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),c(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.accountPoundage,n=e.someTemp,r=(e.projectList,e.insertOrModify),i=e.chooseFirstWay,u=e.amount,c=e.poundageRate,d=e.position,E=e.needAccount,S=e.accounts,_=n.get("poundageCurrentCardList"),v=n.get("poundageProjectCardList"),b=n.get("needUsedPoundage"),L=n.get("accountProjectRange"),I=n.get("accountContactsRange"),N=n.get("accountContactsRangeList"),O=n.get("accountProjectList"),A=(n.get("accountName"),"Sfgl"===d?E?S.some(function(e){return e.get("accountUuid")}):n.get("accountUuid"):n.get("fromAccountName")),R="Sfgl"===d&&E?S.getIn([0,"poundage","poundage"]):n.get("poundage"),w="Sfgl"===d&&E?S.some(function(e){return e.getIn(["poundage","needPoundage"])}):R.get("needPoundage"),P=n.get("poundageAmount");return s.default.createElement("div",{style:{display:w&&A&&a.get("canUsed")&&"insert"===r?"":"none"}},s.default.createElement("div",{style:{marginBottom:"10px"}},s.default.createElement("span",{style:{margin:"0 10px 0 10px"}},s.default.createElement(l.default,{checked:b,onChange:function(e){if("InternalTransfer"===d&&e.target.checked&&u){var n=0;if(i){var r=(0,C.numberCalculate)(u,Number(c)/1e3,2,"multiply");n=r>R.get("poundage")&&R.get("poundage")>0?R.get("poundage"):r}else{var o=(0,C.numberCalculate)((0,C.numberCalculate)(u,1+Number(c)/1e3,4,"divide"),Number(c)/1e3,2,"multiply");n=o>R.get("poundage")&&R.get("poundage")>0?R.get("poundage"):o}t(y.changeEditCalculateCommonState(d,"poundageAmount",n))}t(y.changeEditCalculateCommonString(d,"needUsedPoundage",!b)),!b&&t(y.getAccountRunningCate(a.get("categoryUuid"),d))}},"账户手续费")),a.get("poundageNeedCurrent")&&b?s.default.createElement(o.default,{className:"use-unuse-style edit-running-switch",checked:_.size,checkedChildren:"往来",unCheckedChildren:"往来",onChange:function(){_.size?t(y.changeEditCalculateCommonString(d,"poundageCurrentCardList",(0,f.fromJS)([]))):t(y.changeEditCalculateCommonString(d,"poundageCurrentCardList",(0,f.fromJS)([{}])))}}):"",a.get("poundageNeedProject")&&b?s.default.createElement(o.default,{className:"use-unuse-style edit-running-switch",checked:v.size,checkedChildren:"项目",unCheckedChildren:"项目",style:{marginLeft:"10px"},onChange:function(){v.size?t(y.changeEditCalculateCommonString(d,"poundageProjectCardList",(0,f.fromJS)([]))):t(y.changeEditCalculateCommonString(d,"poundageProjectCardList",(0,f.fromJS)([{}])))}}):""),_.size&&b?s.default.createElement("div",{className:"edit-running-modal-list-item"},s.default.createElement("label",null,"往来单位："),s.default.createElement(p.default,{combobox:!0,showSearch:!0,onDropdownVisibleChange:function(e){e&&t(y.getAccountContactsCardList(I,d))},value:(_&&_.getIn([0,"code"])?_.getIn([0,"code"]):"")+" "+(_&&_.getIn([0,"name"])?_.getIn([0,"name"]):""),onChange:function(e){var a=e.split(g.TREE_JOIN_STR),n=a[0],r=a[1],i=a[2];t(y.changeEditCalculateCommonString(d,["poundageCurrentCardList",0],(0,f.fromJS)({cardUuid:n,name:i,code:r})))}},N.map(function(e,t){return s.default.createElement(T,{key:e.get("uuid"),value:""+e.get("uuid")+g.TREE_JOIN_STR+e.get("code")+g.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))}))):"",v.size&&b?s.default.createElement("div",{className:"edit-running-modal-list-item"},s.default.createElement("label",null,"项目："),s.default.createElement("div",{className:"chosen-right"},s.default.createElement(p.default,{combobox:!0,showSearch:!0,value:(v&&v.getIn([0,"code"])&&"COMNCRD"!==v.getIn([0,"code"])&&"ASSIST"!==v.getIn([0,"code"])&&"MAKE"!==v.getIn([0,"code"])&&"INDIRECT"!==v.getIn([0,"code"])&&"MECHANICAL"!==v.getIn([0,"code"])?v.getIn([0,"code"]):"")+" "+(v&&v.getIn([0,"name"])?v.getIn([0,"name"]):""),onDropdownVisibleChange:function(e){e&&t(y.getAccountProjectCardList(L,d))},onChange:function(e){var a=e.split(g.TREE_JOIN_STR),n=a[0],r=a[1],i=a[2];t(y.changeEditCalculateCommonString(d,["poundageProjectCardList",0],(0,f.fromJS)({cardUuid:n,name:i,code:r})))}},O.map(function(e,t){return s.default.createElement(T,{key:t,value:""+e.get("uuid")+g.TREE_JOIN_STR+e.get("code")+g.TREE_JOIN_STR+e.get("name")},("COMNCRD"!==e.get("code")&&"ASSIST"!==e.get("code")&&"MAKE"!==e.get("code")&&"INDIRECT"!==e.get("code")&&"MECHANICAL"!==e.get("code")?e.get("code"):"")+" "+e.get("name"))})))):"",b?"Sfgl"===d&&S.size>1&&E?S.map(function(e,a){Math.abs(e.get("amount")||0)*e.getIn(["poundage","poundageRate"])/1e3>e.getIn(["poundage","poundage"])&&-1!==e.getIn(["poundage","poundage"])?e.getIn(["poundage","poundage"]):(Math.abs(e.get("amount")||0),e.getIn(["poundage","poundageRate"]));return s.default.createElement("div",{style:{display:e.get("accountUuid")&&e.getIn(["poundage","needPoundage"])?"":"none"}},s.default.createElement("div",{className:"edit-running-modal-list-item"},s.default.createElement("label",null,"账户",a+1,"："),s.default.createElement("div",null,e.get("accountName"))),s.default.createElement("div",{className:"edit-running-modal-list-item"},s.default.createElement("label",null,"支出金额："),s.default.createElement("div",null,s.default.createElement(m.default,{className:"lrls-account-box",placeholder:"",value:e.get("poundageAmount"),onChange:function(e){(0,h.numberTest)(e,function(e){t(y.changeEditCalculateCommonString(d,["accounts",a,"poundageAmount"],e))})}}))))}):s.default.createElement("div",{className:"edit-running-modal-list-item"},s.default.createElement("label",null,"InternalTransfer"===d?"手续费：":"支出金额："),s.default.createElement("div",null,s.default.createElement(m.default,{className:"lrls-account-box",placeholder:"",value:P,onChange:function(e){(0,h.numberTest)(e,function(e){t(y.changeEditCalculateCommonString(d,"poundageAmount",e))})}}))):"")}}]),t}(),r.displayName="AccountSfglPandge",n=i))||n;t.default=_},1754:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=c(a(45)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(55);var o=c(a(1)),l=a(17),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(27));a(18);function c(e){return e&&e.__esModule?e:{default:e}}var s=r.default.Option,d=(0,l.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=(e.className,e.treeData),a=e.value,n=e.placeholder,i=e.onChange,l=(e.parentDisabled,e.disabled),c=[];return function e(t,a){return t.map(function(t,n){t.childList&&t.childList.length?e(t.childList,a+"_"+n):(1!=t.level||t.beSpecial)&&c.push(o.default.createElement(s,{disabled:!t.acAvailable&&"内部转账"!=name&&0!=a||"长期资产"==t.name||1===t.level&&!t.beSpecial,value:""+t.name+u.TREE_JOIN_STR+t.propertyCostList.join("+")+u.TREE_JOIN_STR+t.projectRange.join("+")+u.TREE_JOIN_STR+t.uuid+u.TREE_JOIN_STR+t.beProject,key:t.uuid},t.name))})}(t.getIn([0,"childList"]).toJS(),0),o.default.createElement(r.default,{combobox:!0,showSearch:!0,disabled:l,placeholder:n,dropdownStyle:{maxHeight:400,overflow:"auto"},treeDefaultExpandAll:!0,value:[a],onChange:i},c)}}]),t}())||n;t.default=d},1755:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=s(a(179)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(178);var o=s(a(1)),l=a(17),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(27)),c=a(18);function s(e){return e&&e.__esModule?e:{default:e}}var d=r.default.TreeNode,f=r.default.SHOW_PARENT,m=(0,l.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onExpand=function(t){e.setState({expandedKeys:t})},e.state={expandedKeys:[]},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"componentDidMount",value:function(){var e=this.props.isCardUuid?"cardUuid":"uuid",t=[];!function a(n){return n&&n.length&&n.map(function(n){t.push(n[e]),n.childList&&n.childList.length&&a(n.childList)})}(this.props.treeData.toJS()),this.setState({expandedKeys:t})}},{key:"componentWillReceiveProps",value:function(e){var t=e.isCardUuid?"cardUuid":"uuid";if(!(0,c.is)(e.treeData,this.props.treeData)&&e.treeData&&e.treeData.size){var a=[];!function e(n){return n&&n.map(function(n){a.push(n[t]),n.childList&&n.childList.length&&e(n.childList)})}(e.treeData.toJS()),this.setState({expandedKeys:a})}}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.treeData,n=e.value,i=e.placeholder,l=e.onChange,c=e.parentsDisable,s=e.disabled,m=e.showSearch,g=(e.allowClear,e.multiple,e.treeCheckable),p=(e.id,e.size),C=e.isCardUuid,h=e.chooseAll,y=this.state.expandedKeys,E=C?"cardUuid":"uuid";return o.default.createElement(r.default,{showSearch:!!m,className:t,placeholder:i,disabled:s,dropdownStyle:{maxHeight:400,overflow:"auto"},treeDefaultExpandAll:!0,value:n,size:p||"default",treeCheckable:g,showCheckedStrategy:f,treeCheckStrictly:!h,treeNodeFilterProp:"title",onChange:l,treeExpandedKeys:y,onTreeExpand:this.onExpand},a.size?function e(t,a){return t&&t.length&&t.map(function(t,n){return t.childList&&t.childList.length?o.default.createElement(d,{disabled:c,title:t.code?t.code+" "+t.name:t.name,value:""+t[E]+u.TREE_JOIN_STR+t.name+u.TREE_JOIN_STR+t.code,key:t[E]},e(t.childList,a+1)):o.default.createElement(d,{title:t.code?t.code+" "+t.name:t.name,value:""+t[E]+u.TREE_JOIN_STR+t.name+u.TREE_JOIN_STR+t.code,key:t[E]})})}(a.toJS(),1):[])}}]),t}())||n;t.default=m},1756:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i=s(a(47)),o=s(a(89)),l=s(a(32)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(88),a(51);var c=s(a(1));function s(e){return e&&e.__esModule?e:{default:e}}var d=(r=n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={adjustWay:"add"},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.showAdjustWayModal,n=t.onCancel,r=t.onOk,u=t.clearSerialList,s=this.state.adjustWay;return c.default.createElement(i.default,{title:"选择调整方式",visible:a,onCancel:n,footer:[c.default.createElement(l.default,{type:"primary",onClick:function(){r(s)}},"下一步")]},c.default.createElement(o.default.Group,{onChange:function(t){e.setState({adjustWay:t.target.value}),u&&u()},value:s},c.default.createElement(o.default,{value:"add"},"增加存货"),c.default.createElement(o.default,{value:"cut"},"减少存货")))}}]),t}(),n.displayName="Chye WarehouseTreeModal",r);t.default=d},1757:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=v(a(47)),i=v(a(1267)),o=v(a(129)),l=v(a(100)),u=v(a(14)),c=v(a(37)),s=v(a(171)),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(1265),a(128),a(99),a(78),a(38),a(170);var f=v(a(1)),m=a(17),g=a(127),p=a(22),C=_(a(27)),h=a(18),y=(a(1310),v(a(487))),E=v(a(90)),S=v(a(1345)),T=(_(a(172)),_(a(130)));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var L=s.default.TreeNode,I=(0,m.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={inputValue:"",showEditSerial:!1,curIndex:-1,curItem:(0,h.fromJS)([]),curItemSerialList:(0,h.fromJS)([])},b(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),d(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.MemberList,d=(t.searchCardContent,t.searchList,t.hasSearchContent,t.thingsList),m=t.selectedKeys,_=t.showCommonChargeModal,v=t.selectItem,b=t.selectList,I=t.cancel,N=t.callback,O=t.assemblySheet,A=(t.temp,t.oriState,t.oriDate,t.selectTreeFunc),R=(t.showSelectAll,t.assemblyNumber,t.cardPageObj),w=t.paginationCallBack,P=this.state,U=P.showEditSerial,M=P.curIndex,k=P.curItem,j=P.curItemSerialList,J=n?function e(t,a,n){return t&&t.map(function(t,r){return t.childList&&t.childList.length?f.default.createElement(L,{key:""+t.uuid+C.TREE_JOIN_STR+t.name+C.TREE_JOIN_STR+n,title:t.name},e(t.childList,a,n+1)):f.default.createElement(L,{key:""+t.uuid+C.TREE_JOIN_STR+t.name+C.TREE_JOIN_STR+n,title:t.name,checkable:!0})})}(n.toJS(),["全部"],1):"",D=d.toJS().filter(function(t){return!e.state.inputValue||(t.code.indexOf(e.state.inputValue)>-1||t.name.indexOf(e.state.inputValue)>-1)}),x=D.every(function(e){return b.some(function(t){return t===e.productUuid})})&&D.length,F=v&&v.size||0;return f.default.createElement(r.default,{className:"select-modal",title:"选择组装单",visible:_,onCancel:function(){I(),a(T.changeEditCalculateCommonState("commonCardObj","selectedKeys",["all"+C.TREE_JOIN_STR+"1"])),a(T.changeEditCalculateCommonState("commonCardObj","selectList",(0,h.fromJS)([]))),a(T.changeEditCalculateCommonState("commonCardObj","selectItem",(0,h.fromJS)([])))},onOk:function(){var e=!0;v&&v.size&&v.map(function(t){Number(t.get("curQuantity"))||(e=!1)}),e?(I(),N(O,v),a(T.changeEditCalculateCommonState("commonCardObj","selectedKeys",["all"+C.TREE_JOIN_STR+"1"])),a(T.changeEditCalculateCommonState("commonCardObj","selectList",(0,h.fromJS)([]))),a(T.changeEditCalculateCommonState("commonCardObj","selectItem",(0,h.fromJS)([])))):c.default.info("请输入勾选组装单的数量")},width:"800px"},f.default.createElement("div",{className:"lsqc-contacts-card-top"},f.default.createElement("div",{className:"table-tree-container",style:{height:D.length>5?"461px":"286px"}},f.default.createElement(s.default,{defaultExpandAll:!0,onSelect:function(e){if(e[0]){var t=e[0].split(C.TREE_JOIN_STR),n=t[0],r=t[2];A(n,r),a(T.changeEditCalculateCommonState("commonCardObj","selectedKeys",e))}},selectedKeys:m},f.default.createElement(L,{key:"all"+C.TREE_JOIN_STR+"1",title:"全部",checkable:!0}),J)),f.default.createElement(g.TableAll,{className:"contacts-table-right",style:{height:D.length>5?"461px":"286px"}},f.default.createElement("span",{className:"lsqc-serch"},f.default.createElement(u.default,{className:"lsqc-serch-icon",type:"search",onClick:function(){}}),f.default.createElement(l.default,{placeholder:"搜索",className:"lsqc-serch-input",onChange:function(t){e.setState({inputValue:t.target.value})}})),f.default.createElement("div",{className:"table-title-wrap"},f.default.createElement("ul",{className:"table-title table-title-stock"},f.default.createElement("li",{onClick:function(e){e.stopPropagation(),a(T.changeItemCheckboxCheckAll(x,D,d,!0))}},f.default.createElement(o.default,{checked:x})),f.default.createElement("li",null,f.default.createElement("span",null,"编号")),f.default.createElement("li",null,f.default.createElement("span",null,"名称")),f.default.createElement("li",null,f.default.createElement("span",null,"数量")),f.default.createElement("li",null,f.default.createElement("span",null,"单位")))),f.default.createElement(g.TableBody,null,d&&d.toJS().map(function(t,n){var r=t.productUuid,i=b.indexOf(r)>-1,l=t.code+" "+t.name,u="",c=j;return v.map(function(e,t){e.get("index")===n&&(u=e.get("curQuantity"),c=e.get("serialList"))}),l.indexOf(e.state.inputValue)>-1||l.indexOf(e.state.inputValue.toUpperCase())>-1||l.indexOf(e.state.inputValue.toLowerCase())>-1?f.default.createElement(g.TableItem,{className:"contacts-table-width-stock",key:r,onClick:function(e){e.stopPropagation()}},f.default.createElement("li",{onClick:function(e){e.stopPropagation(),a(T.changeItemCheckboxCheck(i,t,!0,n))}},f.default.createElement(o.default,{checked:i})),f.default.createElement("li",null,t.code),f.default.createElement("li",null,t.name),f.default.createElement("li",null,t.financialInfo&&t.financialInfo.openSerial&&i?f.default.createElement("span",{onClick:function(){e.setState({showEditSerial:!0,curIndex:n,curItem:(0,h.fromJS)(t),curItemSerialList:c})},style:{color:"#1790ff"},className:""},Number(u)?(0,p.formatFour)(Number(u)):"点击输入",f.default.createElement(E.default,{type:"edit-pen"})):f.default.createElement(y.default,{disabled:!i,value:u,onChange:function(e){(0,p.numberFourTest)(e,function(e){v.map(function(t,r){t.get("index")===n&&a(T.changeEditCalculateCommonString("",["commonCardObj","selectItem",r,"curQuantity"],e))})})},PointDisabled:!0})),f.default.createElement("li",null,t.unitName)):""})),R?f.default.createElement(g.TablePagination,{className:"editcalculate-card-modal-pagination",currentPage:R.get("currentPage"),pageCount:R.get("pages"),paginationCallBack:function(e){return w(e)}}):"")),f.default.createElement("div",{style:{margin:"0 0 10px 20px"}},"选择存货：",v&&v.map(function(e){return f.default.createElement("div",{style:{display:"inline-block",marginRight:"10px"}},f.default.createElement(i.default,{closable:!0,onClose:function(t){t.preventDefault(),a(T.changeItemCheckboxCheck(!0,e.toJS()))}},e.get("code")," ",e.get("name")),f.default.createElement(u.default,{type:"close"}),e.get("curQuantity")?e.get("curQuantity"):0," ",e.get("unitName")?e.get("unitName"):"")})),f.default.createElement("div",{style:{display:F>0?"":"none",margin:"0 0 10px 20px"}},F,"个组装单"),U?f.default.createElement(S.default,{visible:!0,dispatch:a,serialList:j||(0,h.fromJS)([]),item:k,onClose:function(){e.setState({showEditSerial:!1})},onOk:function(e){v.map(function(t,n){t.get("index")===M&&(a(T.changeEditCalculateCommonString("",["commonCardObj","selectItem",n,"curQuantity"],e.length)),a(T.changeEditCalculateCommonString("",["commonCardObj","selectItem",n,"serialList"],(0,h.fromJS)(e))))})}}):"")}}]),t}())||n;t.default=I},1758:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i=g(a(47)),o=g(a(171)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(170);var u=g(a(1)),c=(g(a(0)),a(18)),s=(a(56),m(a(27))),d=m(a(130)),f=m(a(485));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var p=o.default.TreeNode,C=(r=n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={uuid:"",name:"",isUniform:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.showWarehouseModal,r=t.onClose,l=t.treeList,m=t.selectedKeys,g=t.checkable,C=t.onSelect,h=t.onCheck,y=t.tempName,E=t.canClick,S=t.countStockCardList,T=t.needTotal,_=this.state,v=(_.uuid,_.name,_.isUniform,[]),b=function e(t,a,n){return t&&t.map(function(t){return n===t.get("uuid")&&(v=t.get("childList")?t.get("childList").toJS():[]),t.get("childList")&&t.get("childList").size?u.default.createElement(p,{title:t.get("code")+" "+t.get("name"),key:""+t.get("uuid")+s.TREE_JOIN_STR+t.get("code")+s.TREE_JOIN_STR+t.get("name")+s.TREE_JOIN_STR+t.get("isUniform")+s.TREE_JOIN_STR+!1+s.TREE_JOIN_STR+t.get("price"),selectable:g||E},e(t.get("childList"),a+s.TREE_JOIN_STR+t.get("uuid"))):u.default.createElement(p,{title:t.get("code")+" "+t.get("name"),key:""+t.get("uuid")+s.TREE_JOIN_STR+t.get("code")+s.TREE_JOIN_STR+t.get("name")+s.TREE_JOIN_STR+t.get("isUniform")+s.TREE_JOIN_STR+!0+s.TREE_JOIN_STR+t.get("price")})})};return u.default.createElement(i.default,{destroyOnClose:!0,className:g?"add-unit":"no-foot add-unit",width:"500px",visible:n,maskClosable:!1,title:"选择仓库",onCancel:function(){e.setState({uuid:"",name:"",isUniform:""}),r()},onOk:function(){if(g){var e=[],t=[],n=[];S&&S.map(function(e){return t.push(e.get("cardUuid"))}),m&&m.length&&m.map(function(t){var a=t.split(s.TREE_JOIN_STR),r=(a[1].split(" "),a[0]),i="true"===a[3];"true"===a[4]&&e.push({cardUuid:r,code:a[1],name:a[1]+" "+a[2],isUniform:i}),n.push(r)});var i=[];e.map(function(e){-1===t.indexOf(e.cardUuid)&&i.push(e)});var o=S.toJS();o=o.filter(function(e){return n.indexOf(e.cardUuid)>-1}),a(f.changeEditCalculateCommonString(y,"countStockCardList",(0,c.fromJS)(o.concat(i)))),h((0,c.fromJS)(o.concat(i)))}r()}},u.default.createElement(o.default,{checkable:g,checkStrictly:!1,defaultExpandAll:!0,checkedKeys:m,onCheck:function(e,t){a(d.changeEditCalculateCommonState(y+"Temp","warehouseSelectedKeys",(0,c.fromJS)(e)))},onSelect:function(e,t){if(e[0]){var a=e[0].split(s.TREE_JOIN_STR),n=a[0],i=a[1],o=a[2],u="true"===a[3],c="true"===a[4],d=a[5];c?v=[{uuid:n,name:a[2],isUniform:u,code:i}]:b(l.getIn([0,"childList"])?l.getIn([0,"childList"]):[],"",n),g||(C(n,i,o,u,v,d,c),r())}}},T?u.default.createElement(p,{title:"全部仓库",key:""+(l.getIn([0,"uuid"])?l.getIn([0,"uuid"]):"all")+s.TREE_JOIN_STR+s.TREE_JOIN_STR+"全部仓库"+s.TREE_JOIN_STR+"flase"+s.TREE_JOIN_STR+!0+s.TREE_JOIN_STR+0}):[],l.getIn([0,"childList"])&&l.getIn([0,"childList"]).size?b(l.getIn([0,"childList"]),""):[]))}}]),t}(),n.displayName="Chye WarehouseTreeModal",r);t.default=C},1759:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=y(a(47)),i=y(a(1267)),o=y(a(129)),l=y(a(100)),u=y(a(14)),c=y(a(171)),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(1265),a(128),a(99),a(78),a(170);var d=y(a(1)),f=a(17),m=a(127),g=h(a(27)),p=a(18),C=(h(a(172)),h(a(130)));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var E=c.default.TreeNode,S=(0,f.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={inputValue:"",uuid:"all",level:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.MemberList,s=(t.searchCardContent,t.searchList,t.hasSearchContent,t.thingsList),f=t.selectedKeys,h=t.showCommonChargeModal,y=t.selectItem,S=t.selectList,T=t.cancel,_=t.callback,v=t.stockCard,b=t.temp,L=(t.oriState,t.oriDate,t.selectTreeFunc),I=t.showSelectAll,N=t.stockTemplate,O=(t.needSpliceChoosedStock,t.notNeedChangeStockItem),A=t.hasNumber,R=t.getNumberCallback,w=t.needConcat,P=this.state,U=P.uuid,M=P.level,k=y&&y.size||0,j=n?function e(t,a,n){return t&&t.map(function(t,r){return t.childList&&t.childList.length?d.default.createElement(E,{key:""+t.uuid+g.TREE_JOIN_STR+t.name+g.TREE_JOIN_STR+n,title:t.name},e(t.childList,a,n+1)):d.default.createElement(E,{key:""+t.uuid+g.TREE_JOIN_STR+t.name+g.TREE_JOIN_STR+n,title:t.name,checkable:!0})})}(n.toJS(),["全部"],1):"",J=(s&&s.map(function(e){return{string:""+e.get("code")+g.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")}}),s.toJS().filter(function(t){return!e.state.inputValue||(t.code.indexOf(e.state.inputValue)>-1||t.name.indexOf(e.state.inputValue)>-1)})),D=J.every(function(e){return S.some(function(t){return t===e.uuid})});return d.default.createElement(r.default,{className:"select-modal",title:"选择存货",visible:h,onCancel:function(){T(),a(C.changeEditCalculateCommonState("commonCardObj","selectedKeys",["all"+g.TREE_JOIN_STR+"1"])),a(C.changeEditCalculateCommonState("commonCardObj","selectList",(0,p.fromJS)(S))),a(C.changeEditCalculateCommonState("commonCardObj","selectItem",(0,p.fromJS)(y))),a(C.changeEditCalculateCommonState("views","hasNumber",!0))},onOk:function(){T();var e=w?v.concat(y):y;!O&&a(C.changeSelectStock(e,b,N,!0)),_(y),a(C.changeEditCalculateCommonState("commonCardObj","selectedKeys",["all"+g.TREE_JOIN_STR+"1"])),a(C.changeEditCalculateCommonState("views","hasNumber",!0))},width:"800px"},d.default.createElement("div",{className:"lsqc-contacts-card-top count-stock-modal"},d.default.createElement("div",{className:"table-tree-container",style:{height:J.length>5?"461px":"286px"}},d.default.createElement(c.default,{defaultExpandAll:!0,onSelect:function(t){if(t[0]){var n=t[0].split(g.TREE_JOIN_STR),r=n[0],i=n[2];L(r,i),a(C.changeEditCalculateCommonState("commonCardObj","selectedKeys",t)),e.setState({uuid:r,level:i})}},selectedKeys:f},d.default.createElement(E,{key:"all"+g.TREE_JOIN_STR+"1",title:"全部",checkable:!0}),j)),d.default.createElement(m.TableAll,{className:"contacts-table-right",style:{height:J.length>5?"461px":"286px"}},d.default.createElement("span",{className:"lsqc-serch"},d.default.createElement("span",{className:"count-search"},d.default.createElement(u.default,{className:"lsqc-serch-icon",type:"search"}),d.default.createElement(l.default,{placeholder:"搜索",className:"lsqc-serch-input",onChange:function(t){e.setState({inputValue:t.target.value})}})),d.default.createElement("span",{className:"count-number",onClick:function(){R(!A,U,M),a(C.changeEditCalculateCommonState("views","hasNumber",!A))}},d.default.createElement(o.default,{checked:A}),"  仅显示有数量的存货")),d.default.createElement("div",{className:"table-title-wrap"},d.default.createElement("ul",{className:"table-title table-title-charge"},d.default.createElement("li",{onClick:function(e){e.stopPropagation();I&&a(C.changeItemCheckboxCheckAll(D,J,s,!1,!1))}},I?d.default.createElement(o.default,{checked:D}):null),d.default.createElement("li",null,d.default.createElement("span",null,"编号")),d.default.createElement("li",null,d.default.createElement("span",null,"名称")))),d.default.createElement(m.TableBody,null,s&&s.toJS().map(function(t){var n=t.uuid,r=S.indexOf(n)>-1,i=t.code+" "+t.name;return i.indexOf(e.state.inputValue)>-1||i.indexOf(e.state.inputValue.toUpperCase())>-1||i.indexOf(e.state.inputValue.toLowerCase())>-1?d.default.createElement(m.TableItem,{className:"contacts-table-width-charge",key:n,onClick:function(e){e.stopPropagation()}},d.default.createElement("li",{onClick:function(e){e.stopPropagation(),a(C.changeItemCheckboxCheck(r,t))}},d.default.createElement(o.default,{checked:r})),d.default.createElement("li",null,t.code),d.default.createElement("li",null,t.name)):""})))),d.default.createElement("div",{style:{margin:"0 0 10px 20px"}},"选择存货：",y&&y.map(function(e){return d.default.createElement(i.default,{closable:!0,onClose:function(t){t.preventDefault(),a(C.changeItemCheckboxCheck(!0,e.toJS()))}},e.get("code")," ",e.get("name"))})),d.default.createElement("div",{style:{display:k>0?"":"none",margin:"0 0 10px 20px"}},k,"个存货"))}}]),t}())||n;t.default=S},2564:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=I(a(1)),u=I(a(0)),c=a(56),s=a(18);a(1747);var d=a(127),f=L(a(27)),m=I(a(6)),g=a(52),p=I(a(1748)),C=I(a(2566)),h=I(a(2610)),y=I(a(2612)),E=L(a(103)),S=(a(491),L(a(177))),T=I(a(2615)),_=L(a(172)),v=L(a(130)),b=L(a(485));function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var O=(0,c.connect)(function(e){return e})((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showCardModal:!1,showRunningModal:!1,showPayOrReceive:!1,payList:(0,s.fromJS)([]),receivedList:(0,s.fromJS)([]),showRunningInfoModal:!1,runningInfoModalType:!1,current:"mail"},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"componentDidMount",value:function(){"home"===sessionStorage.getItem("previousPage")&&(sessionStorage.setItem("previousPage",""),this.props.dispatch(E.insertRunningFromHomePageAndSearchPage()))}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.allState!=e.allState||this.props.editRunningState!=e.editRunningState||this.props.editRunningAllState!=e.editRunningAllState||this.props.homeState!=e.homeState||this.props.editCalculateState!=e.editCalculateState||this.state!==t}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.allState,r=a.editRunningState,i=a.dispatch,o=a.editRunningAllState,u=(a.lrCalculateState,a.homeState),c=a.editCalculateState,E=this.state,L=E.showCardModal,I=(E.showRunningModal,E.showPayOrReceive,E.payList,E.receivedList,E.showRunningInfoModal,E.runningInfoModalType,u.getIn(["views","URL_POSTFIX"])),O=u.getIn(["permissionInfo","LrAccount"]),A=u.getIn(["data","userInfo","sobInfo","moduleInfo"]),R=A.indexOf("WAREHOUSE")>-1,w=(A.indexOf("INVENTORY"),A.indexOf("QUANTITY")>-1),P=O.getIn(["edit","permission"]),U=u.getIn(["permissionInfo","Config","edit","permission"]),M=(A.indexOf("SCXM"),r.get("flags")),k=n.get("accountList"),j=n.getIn(["taxRate","scale"]),J="small"===j?n.get("hideCategoryList").filter(function(e){return e.get("childList")?e.get("childList").filter(function(e){return"LB_FPRZ"!==e.get("categoryType")&&"LB_JXSEZC"!==e.get("categoryType")}):"LB_FPRZ"!==e.get("categoryType")&&"LB_JXSEZC"!==e.get("categoryType")}):"isEnable"===j?n.get("hideCategoryList").filter(function(e){return e.get("childList")?e.get("childList").filter(function(e){return"LB_FPRZ"!==e.get("categoryType")&&"LB_KJFP"!==e.get("categoryType")&&"LB_JXSEZC"!==e.get("categoryType")}):"LB_FPRZ"!==e.get("categoryType")&&"LB_KJFP"!==e.get("categoryType")&&"LB_JXSEZC"!==e.get("categoryType")}):n.get("hideCategoryList").filter(function(e){return"LB_ZCWJZZS"!==e.get("categoryType")}),D=J.filter(function(e){return"LB_SFGL"!==e.get("categoryType")}),x=n.get("taxRate"),F=n.get("runningCategory"),H=n.get("sfglCategory"),B=n.get("accountPoundage"),G=r.get("oriTemp"),Y=r.getIn(["flags","payOrReceive"]),Z=r.getIn(["flags","showall"]),z=r.getIn(["flags","showMessageMask"]),W=r.getIn(["flags","importList"])||(0,s.fromJS)([]),K=r.getIn(["flags","errorList"])||(0,s.fromJS)([]),X=r.getIn(["flags","importKey"]),V=c.get("SfglTemp"),Q=c.get("CqzcTemp"),q=c.get("CommonChargeTemp"),$=c.get("InternalTransferTemp"),ee=c.get("DepreciationTemp"),te=c.get("InvoicingTemp"),ae=c.get("InvoiceAuthTemp"),ne=c.get("TransferOutTemp"),re=c.get("CostTransferTemp"),ie=c.get("StockTemp"),oe=c.get("BalanceTemp"),le=c.get("TaxTransferTemp"),ue=c.get("StockBuildUpTemp"),ce=c.get("StockIntoProjectTemp"),se=c.get("ProjectCarryoverTemp"),de=c.get("JzjzsyTemp"),fe=c.get("commonCardObj"),me=c.get("views"),ge=r.getIn(["cardTemp","flowNumber"]),pe=r.get("MemberList"),Ce=r.get("thingsList"),he=M.get("iframeload"),ye=o.getIn(["views","pageTab"]),Ee=o.getIn(["views","insertOrModify"]),Se=o.getIn(["views","disabledChange"]),Te=o.getIn(["views","paymentType"]),_e=o.getIn(["views","needSendRequest"]),ve=u.get("panes"),be="",Le="",Ie="",Ne="";1==Number(n.getIn(["period","openedyear"]))?(Le=12,be=Number(n.getIn(["period","openedyear"]))-1):(Le=Number(n.getIn(["period","openedmonth"]))-1,be=Number(n.getIn(["period","openedyear"]))),1==Number(n.getIn(["period","firstmonth"]))?(Ne=12,Ie=Number(n.getIn(["period","firstyear"]))-1):(Ne=Number(n.getIn(["period","firstmonth"]))-1,Ie=Number(n.getIn(["period","firstyear"])));var Oe=new Date(be,Le,1),Ae=new Date(Ie,Ne,1),Re=!A||A.indexOf("ENCLOSURE_RUN")>-1,we="TRUE"===u.getIn(["data","userInfo","checkMoreFj"]),Pe=u.getIn(["data","userInfo","sobInfo","newJr"]),Ue=u.getIn(["permissionInfo","LrAccount"]),Me=o.get("enclosureList"),ke=o.get("enclosureCountUser"),je=o.get("label"),Je=u.getIn(["data","userInfo","sobInfo","sobId"]),De="annex/"+Je+"/"+u.getIn(["data","userInfo","useruuid"])+"/"+(new Date).getTime(),xe=n.getIn(["views","searchRunningPreviewVisibility"]),Fe=!(!n.getIn(["period","closedyear"])||!n.getIn(["period","closedmonth"])),He=n.get("uploadKeyJson"),Be=M.get("batchList"),Ge=M.get("serialList"),Ye=(0,s.fromJS)({beCertificate:!1}),Ze="",ze="";if("payment"===ye||"business"===ye&&"LB_SFGL"===Te){switch(Te){case"LB_SFGL":Ye=V,ze="Sfgl";break;case"LB_GGFYFT":Ye=q,ze="CommonCharge";break;case"LB_JZSY":Ye=Q,ze="Cqzc";break;case"LB_JZCB":Ye=re,ze="CostTransfer";break;case"LB_FPRZ":Ye=ae,ze="InvoiceAuth";break;case"LB_KJFP":Ye=te,ze="Invoicing";break;case"LB_ZCWJZZS":Ye=ne,ze="TransferOut";break;case"LB_ZZ":Ye=$,ze="InternalTransfer";break;case"LB_ZJTX":Ye=ee,ze="Depreciation";break;case"LB_CHDB":Ye=ie,ze="Stock";break;case"LB_CHYE":Ye=oe,ze="Balance";break;case"LB_JXSEZC":Ye=le,ze="TaxTransfer";break;case"LB_CHZZ":Ye=ue,ze="StockBuildUp";break;case"LB_CHTRXM":Ye=ce,ze="StockIntoProject";break;case"LB_XMJZ":Ye=se,ze="ProjectCarryover";break;case"LB_SYJZ":Ye=de,ze="JzjzsyTemp"}var We=Ye.get("oriState");Ze="STATE_YYSR_ZJ"===We?Ye.get("dealTypeUuid"):J.find(function(e){return e.get("childList")?e.get("childList").find(function(e){return e.get("categoryType")===Te}):e.get("categoryType")===Te})?J.find(function(e){return e.get("childList")?e.get("childList").find(function(e){return e.get("categoryType")===Te}):e.get("categoryType")===Te}).get("uuid"):Ye.get("categoryUuid")}var Ke=me.get("isCount"),Xe=me.get("isAssembly"),Ve=me.get("isProduct");return l.default.createElement("div",{className:"Page-editRunning",onClick:function(){xe&&i(S.closePreviewRunning())}},l.default.createElement(p.default,{editPermission:P,dispatch:i,oriTemp:G,taxRateTemp:x,flags:M,pageTab:ye,paymentType:Te,insertOrModify:Ee,calculateViews:me,SfglTemp:V,CqzcTemp:Q,CommonChargeTemp:q,InternalTransferTemp:$,DepreciationTemp:ee,InvoicingTemp:te,InvoiceAuthTemp:ae,TransferOutTemp:ne,CostTransferTemp:re,TaxTransferTemp:le,StockTemp:ie,BalanceTemp:oe,StockBuildUpTemp:ue,StockIntoProjectTemp:ce,ProjectCarryoverTemp:se,JzjzsyTemp:de,commonTemp:Ye}),l.default.createElement(d.TableWrap,{className:"table-running-report editRunning-flex"},l.default.createElement("div",{className:"editRunning-wrap"},l.default.createElement(C.default,(N(e={hideCategoryList:D,sfglCategory:H,SfglTemp:V,CqzcTemp:Q,CommonChargeTemp:q,InternalTransferTemp:$,DepreciationTemp:ee,InvoicingTemp:te,InvoiceAuthTemp:ae,TransferOutTemp:ne,CostTransferTemp:re,TaxTransferTemp:le,StockTemp:ie,BalanceTemp:oe,StockBuildUpTemp:ue,StockIntoProjectTemp:ce,ProjectCarryoverTemp:se,JzjzsyTemp:de,batchList:Be,serialList:Ge,commonCardObj:fe,disabledDate:function(e){return e&&(0,m.default)(Oe)>e},defaultFlowNumber:ge,calculateViews:me,needSendRequest:_e,memberList:pe,thingsList:Ce,flags:M,oriTemp:G,dispatch:i,showModal:L,accountList:k,taxRateTemp:x,payOrReceive:Y,pageTab:ye,paymentType:Te,insertOrModify:Ee,runningCategory:F,disabledBeginDate:Oe,firstDisabledBeginDate:Ae,configPermission:U,panes:ve,onCancel:function(){return t.setState({showCardModal:!1})},openRunningInfoModal:function(){return t.setState({showRunningInfoModal:!0,runningInfoModalType:!1})}},"dispatch",i),N(e,"lrPermissionInfo",Ue),N(e,"sobid",Je),N(e,"dirUrl",De),N(e,"enclosureList",Me),N(e,"label",je),N(e,"enCanUse",Re),N(e,"checkMoreFj",we),N(e,"homeState",u),N(e,"isCheckOut",Fe),N(e,"uploadKeyJson",He),N(e,"accountPoundage",B),N(e,"needSendRequest",_e),N(e,"enableWarehouse",R),N(e,"openQuantity",w),N(e,"URL_POSTFIX",I),N(e,"moduleInfo",A),N(e,"disabledChange",Se),e))),l.default.createElement(h.default,{flags:M,hideCategoryList:D,sfglCategory:H,dispatch:i,taxRateTemp:x,curCategory:""+G.get("uuid")+f.TREE_JOIN_STR+G.get("name")+f.TREE_JOIN_STR+"hasnoChild"+f.TREE_JOIN_STR+"canClick",oriTemp:G,runningCategory:F,pageTab:ye,paymentType:Te,paymentTypeStr:me.get("paymentTypeStr"),insertOrModify:Ee,disabledChangeCategory:"modify"===o.getIn(["views","insertOrModify"]),configPermission:U,newJr:Pe})),"business"===ye&&"LB_SFGL"!==Te?l.default.createElement(T.default,N({dispatch:i,iframeload:he,alertStr:"请选择要导入的存货文件",showMessageMask:z,beforCallback:function(){return i(_.changeLrAccountCommonString("",["flags","showMessageMask"],!0))},closeCallback:function(){return i(_.changeLrAccountCommonString("",["flags","showMessageMask"],!1))},onSubmitCallBack:function(e){return i(_.getFileUploadFetch(e,G.get("categoryUuid"),G.get("oriDate"),function(){i(_.changeLrAccountCommonString("",["flags","showMessageMask"],!1))}))},returnBackFun:function(){i(_.changeLrAccountCommonString("",["flags","showall"],!1))},importList:W,errorList:K,InitialExporthrefUrl:g.ROOTPKT+"/data/download/stock/with/insert/error?"+I,downloadUrl:g.ROOTPKT+"/data/export/model/jr/inventory?model=JR",importKey:X,openQuantity:w,enableWarehouse:R,showall:Z,failJsonList:[],successJsonList:[]},"returnBackFun",function(){i(_.changeLrAccountCommonString("",["flags","showall"],!1))})):l.default.createElement(T.default,{dispatch:i,iframeload:me.get("iframeload"),alertStr:"请选择要导入的存货文件",showMessageMask:me.get("showMessageMask"),beforCallback:function(){return i(v.changeEditCalculateCommonState("views","showMessageMask",!0))},closeCallback:function(){return i(v.changeEditCalculateCommonState("views","showMessageMask",!1))},onSubmitCallBack:function(e){return i(b.getFileUploadFetch(e,Ze,G.get("oriDate"),ze,Ke,Ve,Xe))},returnBackFun:function(){i(v.changeEditCalculateCommonState("views","showall",!1))},importTitle:Ke?"盘点导入存货":null,importList:me.get("importList"),errorList:me.get("errorList"),InitialExporthrefUrl:Ke?g.ROOTPKT+"/data/download/jr/inventory/adjustment/error?"+I:Xe?g.ROOTPKT+"/data/download/jr/inventory/assembly/error?"+I:"Stock"===ze?g.ROOTPKT+"/data/download/stock/jr/inventory/transfer/error?"+I:g.ROOTPKT+"/data/download/stock/with/insert/error?"+I,downloadUrl:g.ROOTPKT+"/data/export/model/jr/inventory?model="+(Ke?"ADJUSTMENT":Xe?"ASSEMBLY":"Stock"===ze?"TRANSFER":"JR")+"&"+I,importKey:me.get("importKey"),openQuantity:w,enableWarehouse:R,showall:me.get("showall"),failJsonList:[],successJsonList:[]}),l.default.createElement(y.default,{dispatch:i,calculateViews:me,selectedKeys:(0,s.fromJS)([]),oriDate:G.get("oriDate"),oriState:Ye.get("oriState"),BalanceTemp:oe,CostTransferTemp:re,insertOrModify:Ee,commonCardObj:fe,enableWarehouse:R,homeState:u,paymentType:Te,enclosureCountUser:ke,serialList:Ge}))}}]),t}(),r.displayName="EidtCalculate",r.propTypes={allState:u.default.instanceOf(s.Map),dispatch:u.default.func},n=i))||n;t.default=O},2566:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=m(a(1)),o=a(17),l=(a(18),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);t.default=e}(a(27)),a(127),m(a(2567))),u=m(a(2586)),c=a(101),s=m(a(1473)),d=a(491),f=a(43);function m(e){return e&&e.__esModule?e:{default:e}}var g=(0,o.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showDetail:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.pageTab,a=e.insertOrModify,n=e.disabledChange,r=e.paymentType,o=e.dispatch,m=e.flags,g=e.oriTemp,p=(e.showModal,e.accountList),C=e.taxRateTemp,h=e.payOrReceive,y=e.runningCategory,E=e.disabledBeginDate,S=e.firstDisabledBeginDate,T=e.hideCategoryList,_=e.configPermission,v=e.lrPermissionInfo,b=e.closedBy,L=e.reviewedBy,I=(e.dirUrl,e.enclosureList),N=e.label,O=e.enCanUse,A=e.checkMoreFj,R=e.panes,w=e.homeState,P=e.SfglTemp,U=e.CommonChargeTemp,M=e.CqzcTemp,k=e.cardTemp,j=e.InternalTransferTemp,J=e.DepreciationTemp,D=e.InvoicingTemp,x=e.InvoiceAuthTemp,F=e.TransferOutTemp,H=e.CostTransferTemp,B=e.StockTemp,G=e.BalanceTemp,Y=e.TaxTransferTemp,Z=e.StockBuildUpTemp,z=e.StockIntoProjectTemp,W=e.ProjectCarryoverTemp,K=e.JzjzsyTemp,X=e.batchList,V=e.serialList,Q=e.commonCardObj,q=e.defaultFlowNumber,$=e.disabledDate,ee=e.calculateViews,te=e.memberList,ae=e.thingsList,ne=e.isCheckOut,re=e.uploadKeyJson,ie=e.enableWarehouse,oe=e.needSendRequest,le=e.openQuantity,ue=e.accountPoundage,ce=e.URL_POSTFIX,se=e.moduleInfo,de=(this.state.showDetail,g.get("categoryType")),fe=g.get("oriDate"),me=(0,c.getCategorynameByType)(de).categoryTypeObj;return i.default.createElement("div",{className:"editRunning"},"business"===t&&"LB_SFGL"!==r?i.default.createElement(l.default,{flags:m,oriTemp:g,dispatch:o,accountList:p,taxRateTemp:C,payOrReceive:h,insertOrModify:a,runningCategory:y,disabledBeginDate:E,configPermission:_,categoryTypeObj:me,disabledDate:$,isCheckOut:ne,enableWarehouse:ie,openQuantity:le,accountPoundage:ue,moduleInfo:se,disabledChange:n}):i.default.createElement(u.default,{flags:m,calculateViews:ee,paymentType:r,SfglTemp:P,CommonChargeTemp:U,CqzcTemp:M,InternalTransferTemp:j,DepreciationTemp:J,InvoicingTemp:D,InvoiceAuthTemp:x,TransferOutTemp:F,CostTransferTemp:H,TaxTransferTemp:Y,StockTemp:B,BalanceTemp:G,StockBuildUpTemp:Z,StockIntoProjectTemp:z,ProjectCarryoverTemp:W,JzjzsyTemp:K,batchList:X,serialList:V,commonCardObj:Q,defaultFlowNumber:q,insertOrModify:a,disabledChange:n,enableWarehouse:ie,openQuantity:le,disabledDate:$,cardTemp:k,dispatch:o,accountList:p,disabledBeginDate:E,firstDisabledBeginDate:S,hideCategoryList:T,configPermission:_,panes:R,homeState:w,taxRateTemp:C,memberList:te,thingsList:ae,runningCategory:y,isCheckOut:ne,oriDate:fe,accountPoundage:ue,needSendRequest:oe,URL_POSTFIX:ce}),i.default.createElement(s.default,{formPage:"EditRunning",type:"ls",className:"lrls-enclosure-wrap",dispatch:o,permission:v.getIn(["edit","permission"]),enclosureList:I,label:N,closed:b,reviewed:L,enCanUse:O,checkMoreFj:A,getUploadTokenFetch:function(){return o(d.editRunningAllActions.getUploadTokenFetch())},getLabelFetch:function(){return o(d.editRunningAllActions.getRunningLabelFetch())},deleteUploadImgUrl:function(e){return o(d.editRunningAllActions.deleteRunningEnclosureUrl(e))},changeTagName:function(e,t){return o(d.editRunningAllActions.changeRunningTagName(e,t))},downloadEnclosure:function(e,t){return o((0,f.allDownloadEnclosure)(e,t))},uploadEnclosureList:function(e){o(d.editRunningAllActions.uploadFiles.apply(d.editRunningAllActions,function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(e)))},uploadKeyJson:re}))}}]),t}())||n;t.default=g},2567:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=N(a(47)),i=N(a(61)),o=N(a(100)),l=N(a(1234)),u=N(a(1230)),c=N(a(37)),s=N(a(89)),d=N(a(45)),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(79),a(99),a(1235),a(1231),a(38),a(88),a(55);var m=N(a(1)),g=a(17),p=a(18),C=N(a(6)),h=a(56),y=I(a(27)),E=N(a(1237)),S=a(127),T=(N(a(90)),a(22),N(a(1749))),_=N(a(1750)),v=(N(a(1423)),N(a(2568))),b=a(101),L=(I(a(43)),I(a(1242)),I(a(172)));function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function N(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}d.default.Option,s.default.Group;var A=(0,h.connect)(function(e){return{editRunningState:e.editRunningState}})(n=(0,g.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=O(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={show:!1,showModal:!1,showModalStock:!1,index:0,accountInput:"",stockInput:"",contactsInput:""},O(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),f(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.insertOrModify,a=e.disabledChange,n=e.oriTemp,d=e.dispatch,f=e.accountList,g=e.taxRateTemp,h=e.payOrReceive,I=e.runningCategory,N=e.flags,O=e.editRunningState,A=e.disabledDate,R=(e.configPermission,e.isCheckOut),w=e.enableWarehouse,P=e.openQuantity,U=e.accountPoundage,M=e.moduleInfo,k=n.get("categoryType"),j=(0,b.getCategorynameByType)(k),J=(j.propertyShow,j.categoryTypeObj),D=(j.direction,j.showInvoice,j.isShowAbout,j.specialState,g.get("scale"),g.get("payableAcFullName"),g.get("payableAcId"),g.get("payableAssCategory"),g.get("notBillingAssCategory"),g.get("notBillingAcId"),g.get("outputAcId"),g.get("payableRate"),g.get("outputAssCategory"),g.get("waitOutputAcId"),g.get("waitOutputAssCategory"),g.get("inputAcId"),g.get("inputAssCategory"),g.get("certifiedAcId"),g.get("certifiedAssCategory"),n.get("beProject")),x=n.get("oriState"),F=(n.get("runningType"),n.get("usedCurrent")),H=(n.get("currentCardList"),n.getIn([J,"beAccrued"])),B=n.getIn([J,"beWelfare"]),G=n.getIn([J,"stockRange"])||(0,p.fromJS)([]),Y=n.get("stockCardList")||(0,p.fromJS)([]),Z=n.get("propertyCarryover"),z=n.get("handleType"),W=n.get("assetType"),K=n.get("oriDate"),X=n.get("usedProject"),V=n.get("beSpecial"),Q=n.get("beDeposited"),q=n.get("stockStrongList"),$=n.get("carryoverStrongList"),ee=n.get("billStrongList"),te=(n.getIn([J,"beManagemented"]),n.getIn([J,"contactsManagement"])),ae=n.get("pendingStrongList"),ne=n.get("strongList"),re=n.get("oriAbstract"),ie=n.get("jrIndex"),oe=(O.getIn(["flags","showContactsModal"]),O.getIn(["flags","indexModal"])),le=O.get("projectList"),ue=O.get("contactsList"),ce=O.get("showSingleModal"),se=O.get("MemberList"),de=O.get("selectThingsList"),fe=O.get("thingsList"),me=O.get("stockList"),ge=O.get("warehouseList"),pe=n.get("projectCardList"),Ce=n.get("propertyTax"),he=n.get("encodeType"),ye=n.get("fullCategoryName"),Ee=n.get("usedStock"),Se=n.get("currentProjectCardList")||(0,p.fromJS)([]),Te=n.get("curcurrentCardList")||(0,p.fromJS)([]),_e=n.get("newProjectRange")||(0,p.fromJS)([]),ve=(n.get("name"),n.get("currentOriDate")),be=n.get("propertyCostList")||(0,p.fromJS)([]);return m.default.createElement("div",{className:"accountConf-modal-list editRunning-CardBody"},m.default.createElement("div",{className:"pcxls-account",style:{display:n.get("beCertificate")?"block":"none"}},"已审核"),"modify"===t?m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"流水号："),m.default.createElement("div",null,m.default.createElement(E.default,{style:{width:"67px",marginRight:"5px"},value:n.get("jrIndex"),onChange:function(e){/^\d*$/.test(e.target.value)?/^\d{0,6}$/.test(e.target.value)?d(L.changeLrAccountCommonString("ori","jrIndex",e.target.value)):c.default.info("流水号不能超过6位"):c.default.info("必须是数字")},PointDisabled:!0}),"号")):null,m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"日期："),m.default.createElement("div",null,m.default.createElement(u.default,{allowClear:!1,disabledDate:function(e){return"modify"===t&&ae.getIn([0,"oriDate"])&&ae.some(function(e){return e.get("beSelect")})&&(0,C.default)(ae.reverse().find(function(e){return e.get("beSelect")}).get("oriDate"))>e||A(e)},value:(0,C.default)(K),disabled:"JR_HANDLE_CZ"===W&&"modify"===t,onChange:function(e){var t=e.format("YYYY-MM-DD");d(L.changeLrAccountCommonString("ori","oriDate",t))}}))),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"流水类别："),m.default.createElement("div",{className:"lrls-account-box"},m.default.createElement(S.RunCategorySelect,{disabled:"modify"===t&&("LB_FYZC"!==k||!n.get("canBeModifyCategory")),treeData:I,value:ye,placeholder:"",insertOrModify:t,canBeModifyCategory:n.get("canBeModifyCategory"),parentDisabled:!0,onChange:function(e,a,n){var r=e.split(y.TREE_JOIN_STR),i=r[2].split("_"),o=I;i.forEach(function(e,t){o=t<i.length-1?o.getIn([Number(e),"childList"]):o.getIn([Number(e)])}),d("insert"===t?L.selectAccountRunningCategory(r[0]):L.selectModifyRunningCategory(r[0]))}}),te&&"STATE_ZS_TH"!==x&&"STATE_ZF_SH"!==x&&("STATE_JK_ZFLX"!==x&&"STATE_TZ_SRGL"!==x&&"STATE_TZ_SRLX"!==x&&"STATE_ZB_ZFLR"!==x&&H||!H)||"modify"===t&&Te.size?m.default.createElement(l.default,{className:"use-unuse-style edit-running-switch",checked:F,checkedChildren:"往来",unCheckedChildren:"往来",disabled:ne.size&&"insert"!==t,onChange:function(){d(L.changeLrAccountCommonString("ori","usedCurrent",!F))}}):null,function(){if("insert"===t&&!D||"modify"===t&&!D&&!Se.size)return!1;switch(k){case"LB_YYSR":case"LB_YYZC":case"LB_CQZC":case"LB_FYZC":case"LB_YYWSR":case"LB_YYWZC":return!0;case"LB_XCZC":if((H||B)&&"STATE_XC_JT"===x||!H&&!B&&("STATE_XC_FF"===x||"STATE_XC_JN"===x)||"STATE_XC_YF"===x||"modify"===t&&Se.size)return!0;break;case"LB_SFZC":if(H&&"STATE_SF_JT"===x||!H&&"STATE_SF_JN"===x&&("SX_QYSDS"===Ce||"SX_QTSF"===Ce)||"modify"===t&&Se.size)return!0;break;case"LB_JK":if("JR_HANDLE_CHLX"===z&&(H&&"STATE_JK_JTLX"===x||!H)||"modify"===t&&Se.size)return!0;break;case"LB_TZ":if("JR_HANDLE_QDSY"===z&&(H&&("STATE_TZ_JTGL"===x||"STATE_TZ_JTLX"===x)||!H)||"modify"===t&&Se.size)return!0;break;case"LB_ZB":break;case"LB_ZSKX":if("STATE_ZS_TH"!==x)return!0;break;case"LB_ZFKX":if("STATE_ZF_SH"!==x)return!0}return!1}()&&(0,b.ProductProjectTest)(k,_e)?m.default.createElement(l.default,{className:"use-unuse-style edit-running-switch",checked:X,disabled:q.size&&"insert"!==t,checkedChildren:"项目",unCheckedChildren:"项目",onChange:function(){X||pe.size?X&&(d(L.changeLrAccountCommonString("ori","projectCardList",(0,p.fromJS)([]))),"LB_YYZC"!==k&&d(L.changeLrAccountCommonString("ori","propertyCost",be.get(0)))):d(L.changeLrAccountCommonString("ori","projectCardList",(0,p.fromJS)([{cardUuid:"",amount:""}]))),d(L.changeLrAccountCommonString("ori","usedProject",!X))}}):null,"SX_HW_FW"===Z&&(G.size&&"STATE_YYSR_DJ"!==x||"modify"===t&&Y.size)?m.default.createElement(l.default,{className:"use-unuse-style edit-running-switch",checked:Ee,checkedChildren:"货物",unCheckedChildren:"货物",onChange:function(){Ee||Y.size?Ee&&d(L.changeLrAccountCommonString("ori","stockCardList",(0,p.fromJS)([]))):d(L.changeLrAccountCommonString("ori","stockCardList",(0,p.fromJS)([{}]))),d(L.changeLrAccountCommonString("ori","usedStock",!Ee))}}):null)),m.default.createElement(_.default,{dispatch:d,oriTemp:n,flags:N,insertOrModify:t}),m.default.createElement(T.default,{insertOrModify:t,oriTemp:n,dispatch:d,beSpecial:V,beDeposited:Q,oriState:x,payOrReceive:h,flags:N,disabledChange:a}),m.default.createElement("div",{className:"accountConf-separator"}),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"摘要："),m.default.createElement("div",null,m.default.createElement(o.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:re,onChange:function(e){d(L.changeLrAccountCommonString("ori","oriAbstract",e.target.value))}}))),m.default.createElement(v.default,{oriTemp:n,accountList:f,projectList:le,contactsList:ue,dispatch:d,flags:N,categoryTypeObj:J,taxRateTemp:g,showSingleModal:ce,MemberList:se,selectThingsList:de,thingsList:fe,stockList:me,warehouseList:ge,insertOrModify:t,isCheckOut:R,enableWarehouse:w,openQuantity:P,accountPoundage:U,moduleInfo:M}),m.default.createElement(r.default,{title:"选择保存方式",onOk:function(){d(L.changeLrAccountCommonString("",["flags","indexModal"],0)),d(L.saveRunningbusiness(2===oe))},onCancel:function(){d(L.changeLrAccountCommonString("",["flags","indexModal"],0)),d(L.changeLrAccountCommonString("ori","encodeType",""))},visible:oe>=1},m.default.createElement("div",null,m.default.createElement("div",{style:{marginBottom:"10px"}},"流水号:",ie,"号已经存在，您可以："),m.default.createElement("div",null,m.default.createElement(s.default.Group,{onChange:function(e){d(L.changeLrAccountCommonString("ori","encodeType",e.target.value))},value:he},"modify"===t&&(ne.size||ee.size||$.size)&&ve.substr(0,7)<K.substr(0,7)?"":m.default.createElement(s.default,{value:"1"},"系统自动编号 ",m.default.createElement(i.default,{title:"维持原流水号或自动新增为末尾最新流水编号"},m.default.createElement("span",{className:"icon-tips",style:{marginLeft:"5px"}},"?"))),m.default.createElement("br",{style:{display:"modify"===t&&(ne.size||ee.size||$.size)&&ve.substr(0,7)<K.substr(0,7)?"none":""}}),m.default.createElement(s.default,{value:"2"},"插入流水号",m.default.createElement(i.default,{title:"当前流水号不变，原流水号将顺次后移"},m.default.createElement("span",{className:"icon-tips",style:{marginLeft:"5px"}},"?"))))))))}}]),t}())||n)||n;t.default=A},2568:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=s(a(1)),l=a(17),u=(a(18),s(a(6)),a(56),c(a(27)),s(a(90)),a(22),a(101),s(a(1303)),s(a(1405)),c(a(2570)));c(a(172));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var d=(0,l.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e,t=this.props,a=t.oriTemp,n=t.accountList,i=t.projectList,l=t.contactsList,c=t.dispatch,s=t.flags,d=t.categoryTypeObj,f=t.taxRateTemp,m=t.showSingleModal,g=t.MemberList,p=t.selectThingsList,C=t.thingsList,h=t.stockList,y=t.warehouseList,E={oriTemp:a,accountList:n,projectList:i,contactsList:l,dispatch:c,flags:s,categoryTypeObj:d,taxRateTemp:f,showSingleModal:m,MemberList:g,selectThingsList:p,thingsList:C,insertOrModify:t.insertOrModify,isCheckOut:t.isCheckOut,enableWarehouse:t.enableWarehouse,openQuantity:t.openQuantity,accountPoundage:t.accountPoundage,moduleInfo:t.moduleInfo},S={LB_ZSKX:"ZsZf",LB_ZFKX:"ZsZf",LB_CQZC:"Cqzc",LB_JK:"Jk",LB_TZ:"Tz",LB_ZB:"Zb",LB_YYWSR:"Yywsr",LB_YYWZC:"Yywzc",LB_XCZC:"Xczc",LB_FYZC:"Fyzc",LB_SFZC:"Sfzc",LB_YYSR:"Yysz",LB_YYZC:"Yysz"}[a.get("categoryType")];return o.default.createElement("div",null,(e=u[S])?o.default.createElement(e,r({},E,{stockList:h,warehouseList:y})):"")}}]),t}())||n;t.default=d},2569:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=c(a(179)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(178);var o=c(a(1)),l=a(17),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(27));a(18);function c(e){return e&&e.__esModule?e:{default:e}}var s=r.default.TreeNode,d=r.default.SHOW_PARENT,f=(0,l.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.treeData,n=e.value,i=e.placeholder,l=e.onChange,c=e.parentsDisable,f=e.disabled,m=e.showSearch;e.allowClear,e.multiple,e.treeCheckable;return o.default.createElement(r.default,{showSearch:!!m,className:t,placeholder:i,disabled:f,dropdownStyle:{maxHeight:400,overflow:"auto"},treeDefaultExpandAll:!0,value:n,treeCheckable:!0,showCheckedStrategy:d,treeCheckStrictly:!0,onChange:l},function e(t,a){return t&&t.map(function(t,n){return t.childList&&t.childList.length?o.default.createElement(s,{disabled:c,title:t.code?t.code+" "+t.name:t.name,value:""+t.uuid+u.TREE_JOIN_STR+t.name+u.TREE_JOIN_STR+t.code,key:t.uuid},e(t.childList,a+1)):o.default.createElement(s,{title:t.code?t.code+" "+t.name:t.name,value:""+t.uuid+u.TREE_JOIN_STR+t.name+u.TREE_JOIN_STR+t.code,key:t.uuid})})}(a.toJS(),1))}}]),t}())||n;t.default=f},2570:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Yysz=t.Sfzc=t.Fyzc=t.Xczc=t.Yywzc=t.Yywsr=t.Zb=t.Tz=t.Jk=t.Cqzc=t.ZsZf=void 0;var n=g(a(2571)),r=g(a(2572)),i=g(a(2573)),o=g(a(2574)),l=g(a(2575)),u=g(a(2576)),c=g(a(2577)),s=g(a(2578)),d=g(a(2579)),f=g(a(2580)),m=g(a(2581));function g(e){return e&&e.__esModule?e:{default:e}}t.ZsZf=n.default,t.Cqzc=r.default,t.Jk=i.default,t.Tz=o.default,t.Zb=l.default,t.Yywsr=u.default,t.Yywzc=c.default,t.Xczc=s.default,t.Fyzc=d.default,t.Sfzc=f.default,t.Yysz=m.default},2571:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=E(a(1)),o=a(17),l=a(18),u=(E(a(6)),a(56),E(a(1237))),c=(y(a(27)),E(a(90)),a(22)),s=a(101),d=E(a(1303)),f=E(a(1364)),m=E(a(1309)),g=E(a(1405)),p=E(a(1336)),C=E(a(1365)),h=y(a(172));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}var S=(0,s.JtHoc)("Temporary")(n=(0,o.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.oriTemp,a=e.accountList,n=e.projectList,r=e.dispatch,o=e.flags,y=e.MemberList,E=e.selectThingsList,S=e.thingsList,T=e.insertOrModify,_=e.isCheckOut,v=e.contactsList,b=e.categoryTypeObj,L=e.accountPoundage,I=e.moduleInfo,N=t.get("projectCardList")||(0,l.fromJS)([]),O=t.get("usedProject"),A=t.get("amount"),R=t.get("accounts"),w=t.get("beProject"),P=t.get("taxRate"),U=t.get("oriState"),M=t.get("usedCurrent"),k=t.get("pendingStrongList")||(0,l.fromJS)([]),j=t.get("strongList")||(0,l.fromJS)([]),J=o.get("showSingleModal"),D=(t.getIn([b,"beManagemented"]),t.getIn([b,"contactsManagement"])),x=t.get("currentCardList"),F=t.get("categoryType"),H=t.get("cardAllList"),B=t.get("categoryUuid"),G=t.get("condition"),Y=t.get("oriDate"),Z=t.getIn([b,"contactsRange"]),z=o.get("dropManageFetchAllowed"),W=o.get("currentCardType"),K=o.get("selectedKeys"),X=o.get("poundage"),V=o.get("accountContactsRangeList"),Q=o.get("accountProjectList"),q=o.get("accountProjectRange"),$=o.get("accountContactsRange");return i.default.createElement("div",null,!M||"STATE_ZS_SQ"!==U&&"STATE_ZF_FC"!==U?"":i.default.createElement(C.default,{currentCardList:x,dropManageFetchAllowed:z,contactsList:v,oriState:U,contactsRange:Z,dispatch:r,categoryTypeObj:b,showSingleModal:J,MemberList:y,selectThingsList:E,insertOrModify:T,thingsList:S,contactsManagement:D,strongList:j,currentCardType:W,selectedKeys:K,categoryType:F}),"STATE_ZS_SQ"!==U&&"STATE_ZF_FC"!==U||!(w&&"insert"===T||O&&"modify"===T)?"":i.default.createElement(d.default,{projectCardList:N,usedProject:O,projectList:n,dispatch:r,beProject:w,amount:A,taxRate:P,showSingleModal:J,MemberList:y,selectThingsList:E,thingsList:S,oriTemp:t,flags:o,moduleInfo:I,insertOrModify:T}),i.default.createElement("div",{className:"edit-running-modal-list-item"},i.default.createElement("label",null,"金额："),(w&&O&&"insert"===T||O&&"modify"===T)&&N.size>1?i.default.createElement("div",null,(0,c.formatMoney)(A)):i.default.createElement(u.default,{placeholder:"",value:A,onChange:function(e){(0,s.numberTest)(e,function(e){r(h.changeLrAccountCommonString("ori","amount",e)),1===N.size&&r(h.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e))})}})),i.default.createElement(m.default,{accountList:a,accounts:R,dispatch:r,isCheckOut:_,oriTemp:t}),"STATE_ZS_SQ"===U||"STATE_ZF_SH"===U?i.default.createElement(f.default,{accounts:R,dispatch:r,accountPoundage:L,oriTemp:t,contactsList:v,contactsRange:Z,poundage:X,projectList:n,accountContactsRangeList:V,accountProjectList:Q,accountProjectRange:q,accountContactsRange:$,insertOrModify:T}):"","STATE_ZS_TH"===U||"STATE_ZF_SH"===U&&("insert"===T||"modify"===T&&k.size)?i.default.createElement(g.default,{titleList:["日期","流水号","摘要","类型","流水金额","待核销"+("STATE_ZS_TH"===U?"付":"收")+"款金额"],pendingStrongList:k,stateName:"STATE_ZS_TH"===U?"暂收款项":"暂付款项",modify:"modify"===T,dispatch:r,listTitle:"STATE_ZS_TH"===U?"待处理付款金额：":"待处理收款金额：",currentCardList:x,dropManageFetchAllowed:z,insertOrModify:T,strongList:j,oriState:U,contactsRange:Z,contactsList:v,categoryUuid:B,categoryType:F,contactsManagement:D,cardAllList:H,condition:G,oriDate:Y}):"","modify"!==T||"STATE_ZF_FC"!==U&&"STATE_ZS_SQ"!==U?"":i.default.createElement(p.default,{titleList:["日期","流水号","摘要","类型","金额"],strongList:j,modify:"modify"===T,dispatch:r,amount:A}))}}]),t}())||n)||n;t.default=S},2572:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=S(a(129)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(128);var o=S(a(1)),l=a(17),u=a(18),c=(S(a(6)),a(56),S(a(1237))),s=(E(a(27)),S(a(90)),a(22),a(101)),d=S(a(1303)),f=S(a(1364)),m=S(a(1309)),g=S(a(1365)),p=S(a(1423)),C=S(a(1751)),h=S(a(1336)),y=E(a(172));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}var T=(0,l.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.oriTemp,a=e.accountList,n=e.contactsList,i=e.projectList,l=e.dispatch,E=e.flags,S=e.categoryTypeObj,T=e.taxRateTemp,_=e.MemberList,v=e.selectThingsList,b=e.thingsList,L=e.insertOrModify,I=e.accountPoundage,N=e.isCheckOut,O=e.moduleInfo,A=t.get("projectCardList")||(0,u.fromJS)([]),R=t.get("usedProject"),w=t.get("amount"),P=t.get("accounts"),U=t.get("beProject"),M=t.get("taxRate"),k=t.get("oriState"),j=(t.get("categoryType"),t.get("pendingStrongList"),t.get("currentAmount")),J=t.get("currentCardList"),D=t.get("carryoverStrongList"),x=t.get("strongList"),F=t.getIn([S,"contactsRange"]),H=t.getIn([S,"beCleaning"]),B=t.getIn([S,"beManagemented"]),G=t.getIn([S,"contactsManagement"]),Y=t.getIn(["assets","originalAssetsAmount"]),Z=t.getIn(["assets","depreciationAmount"]),z=t.getIn(["assets","netProfitAmount"]),W=t.getIn(["assets","lossAmount"]),K=(t.getIn(["assets","cleaningAmount"]),t.get("beCleaning")),X=t.get("handleType"),V=(t.get("projectRange"),t.get("allProjectRange")),Q=E.get("showSingleModal"),q=E.get("dropManageFetchAllowed"),$=E.get("selectedKeys"),ee=t.get("usedCurrent"),te=E.get("allGetFlow"),ae=E.get("currentCardType"),ne=E.get("poundage"),re=E.get("accountContactsRangeList"),ie=E.get("accountProjectList"),oe=E.get("accountProjectRange"),le=E.get("accountContactsRange");return o.default.createElement("div",{style:{display:"STATE_CQZC_JZSY"===k?"none":""}},ee&&X?o.default.createElement(g.default,{currentCardList:J,dropManageFetchAllowed:q,contactsList:n,oriState:k,contactsRange:F,dispatch:l,categoryTypeObj:S,selectedKeys:$,showSingleModal:Q,MemberList:_,selectThingsList:v,thingsList:b,insertOrModify:L,strongList:x,carryoverStrongList:D,contactsManagement:G,currentCardType:ae}):"",U&&"insert"===L||R&&"modify"===L?o.default.createElement(d.default,{projectCardList:A,usedProject:R,projectList:i,dispatch:l,beProject:U,amount:w,taxRate:M,showSingleModal:Q,MemberList:_,selectThingsList:v,thingsList:b,oriTemp:t,flags:E,moduleInfo:O,insertOrModify:L,projectRange:(0,u.fromJS)([V.find(function(e){return"损益项目"===e.get("name")}).get("uuid")])}):"",o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,"金额："),o.default.createElement(c.default,{placeholder:"",value:w,onChange:function(e){(0,s.numberTest)(e,function(e){l(y.changeLrAccountCommonString("ori","amount",e)),1===A.size&&l(y.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e)),K&&U&&l(y.calculateGain())},!0)}})),B&&"insert"===L?o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,"本次"+("JR_HANDLE_GJ"===X?w<0?"收":"付":w<0?"付":"收")+"款："),o.default.createElement(c.default,{placeholder:"",value:j,onFocus:function(){l(y.changeLrAccountCommonString("ori","currentAmount",Math.abs(w||"")))},onChange:function(e){(0,s.numberTest)(e,function(e){l(y.changeLrAccountCommonString("ori","currentAmount",e))})}})):"",B&&0!=j&&j&&("modify"===L&&te||"insert"===L)||!B?o.default.createElement(m.default,{accountList:a,accounts:P,dispatch:l,isCheckOut:N,oriTemp:t,amount:B?j:w}):"","JR_HANDLE_GJ"===X&&w<0||"JR_HANDLE_CZ"===X?o.default.createElement(f.default,{accounts:P,dispatch:l,accountPoundage:I,oriTemp:t,contactsList:n,contactsRange:F,poundage:ne,projectList:i,accountContactsRangeList:re,accountProjectList:ie,accountProjectRange:oe,accountContactsRange:le,insertOrModify:L}):"",o.default.createElement(p.default,{dispatch:l,flags:E,oriTemp:t,taxRateTemp:T,insertOrModify:L}),H&&"JR_HANDLE_CZ"===X||"STATE_CQZC_JZSY"===k?o.default.createElement("div",null,o.default.createElement("div",{className:"edit-running-modal-list-item",style:{display:"insert"===L?"":"none"}},o.default.createElement("label",null,o.default.createElement(r.default,{checked:K,onChange:function(e){l(y.changeLrAccountCommonString("ori","beCleaning",e.target.checked)),e.target.checked&&l(y.calculateGain())}}),o.default.createElement("span",null,"处置损益"))),K?o.default.createElement("div",null,z>=0?o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,"净收益金额："),o.default.createElement("div",null,z)):W>0?o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,"净损失金额："),o.default.createElement("div",null,W)):"",o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,"资产原值："),o.default.createElement("div",null,o.default.createElement(c.default,{value:Y,onChange:function(e){(0,s.numberTest)(e,function(e){l(y.changeLrAccountCommonString("ori",["assets","originalAssetsAmount"],e)),l(y.calculateGain())})}}))),o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,"累计折旧余额："),o.default.createElement("div",null,o.default.createElement(c.default,{value:Z,onChange:function(e){(0,s.numberTest)(e,function(e){l(y.changeLrAccountCommonString("ori",["assets","depreciationAmount"],e)),l(y.calculateGain())})}})))):null):null,"modify"===L&&"JR_HANDLE_CZ"===X&&D.size?o.default.createElement(C.default,{title:"处置结转流水：",strongList:D,dispatch:l}):"","modify"===L&&B&&!te?o.default.createElement(h.default,{titleList:["日期","流水号","摘要","类型","金额"],strongList:x,modify:"modify"===L,dispatch:l,amount:w}):"")}}]),t}())||n;t.default=T},2573:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=E(a(1)),o=a(17),l=a(18),u=(E(a(6)),a(56),E(a(1237))),c=(y(a(27)),E(a(90)),a(22)),s=a(101),d=E(a(1303)),f=E(a(1309)),m=E(a(1405)),g=E(a(1365)),p=E(a(1364)),C=E(a(1336)),h=y(a(172));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}var S=(0,s.JtHoc)("Loan")(n=(0,o.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.oriTemp,a=e.accountList,n=e.projectList,r=e.dispatch,o=e.flags,y=e.MemberList,E=e.selectThingsList,S=e.thingsList,T=e.insertOrModify,_=e.isCheckOut,v=e.categoryTypeObj,b=e.contactsList,L=e.accountPoundage,I=e.moduleInfo,N=t.get("projectCardList")||(0,l.fromJS)([]),O=t.get("usedProject"),A=t.get("amount"),R=t.get("accounts"),w=t.get("beProject"),P=t.getIn(["acLoan","beAccrued"]),U=t.get("taxRate"),M=t.get("oriState"),k=t.get("strongList"),j=t.get("pendingStrongList")||(0,l.fromJS)([]),J=o.get("showSingleModal"),D=t.getIn([v,"contactsManagement"]),x=t.get("currentCardList"),F=t.get("categoryType"),H=t.getIn([v,"contactsRange"]),B=o.get("dropManageFetchAllowed"),G=o.get("currentCardType"),Y=t.get("usedCurrent"),Z=t.get("curcurrentCardList"),z=t.get("handleType"),W=o.get("selectedKeys"),K=t.get("currentProjectCardList"),X=o.get("poundage"),V=o.get("accountContactsRangeList"),Q=o.get("accountProjectList"),q=o.get("accountProjectRange"),$=o.get("accountContactsRange");return i.default.createElement("div",null,Y&&(P&&"STATE_JK_ZFLX"!==M||!P||"modify"===T&&Z.size)?i.default.createElement(g.default,{currentCardList:x,dropManageFetchAllowed:B,contactsList:b,oriState:M,contactsRange:H,dispatch:r,categoryTypeObj:v,showSingleModal:J,MemberList:y,selectThingsList:E,insertOrModify:T,thingsList:S,contactsManagement:D,strongList:k,currentCardType:G,selectedKeys:W,categoryType:F}):"",O&&"modify"===T&&K.size||w&&O&&("insert"===T||O&&"modify"===T)&&(P&&"STATE_JK_JTLX"===M||!P&&"STATE_JK_ZFLX"===M)?i.default.createElement(d.default,{projectCardList:N,usedProject:O,projectList:n,dispatch:r,beProject:w,amount:A,taxRate:U,showSingleModal:J,MemberList:y,selectThingsList:E,thingsList:S,oriTemp:t,flags:o,insertOrModify:T,moduleInfo:I}):"",i.default.createElement("div",{className:"edit-running-modal-list-item"},i.default.createElement("label",null,"金额："),(w&&"insert"===T||O&&"modify"===T)&&N.size>1?i.default.createElement("div",null,(0,c.formatMoney)(A)):i.default.createElement(u.default,{placeholder:"",value:A,onChange:function(e){(0,s.numberTest)(e,function(e){r(h.changeLrAccountCommonString("ori","amount",e)),1===N.size&&r(h.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e))})}})),"STATE_JK_JTLX"!==M?i.default.createElement(f.default,{accountList:a,accounts:R,dispatch:r,isCheckOut:_,oriTemp:t}):"","JR_HANDLE_QDJK"===z?i.default.createElement(p.default,{accounts:R,dispatch:r,accountPoundage:L,oriTemp:t,contactsList:b,contactsRange:H,poundage:X,projectList:n,accountContactsRangeList:V,accountProjectList:Q,accountProjectRange:q,accountContactsRange:$,insertOrModify:T}):"",P&&"STATE_JK_ZFLX"===M&&("insert"===T||"modify"===T&&j.size)?i.default.createElement(m.default,{titleList:["日期","流水号","摘要","类型","流水金额","待处理金额"],pendingStrongList:j,stateName:"计提借款利息",modify:"modify"===T,dispatch:r,listTitle:"待处理付款金额："}):"","modify"===T&&P&&"STATE_JK_JTLX"===M?i.default.createElement(C.default,{titleList:["日期","流水号","摘要","类型","金额"],strongList:k,modify:"modify"===T,dispatch:r,amount:A}):"")}}]),t}())||n)||n;t.default=S},2574:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=E(a(1)),o=a(17),l=a(18),u=(E(a(6)),a(56),E(a(1237))),c=(y(a(27)),E(a(90)),a(22)),s=a(101),d=E(a(1303)),f=E(a(1309)),m=E(a(1405)),g=E(a(1336)),p=E(a(1364)),C=E(a(1365)),h=y(a(172));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}var S=(0,s.JtHoc)("Invest")(n=(0,o.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.oriTemp,a=e.accountList,n=e.projectList,r=e.dispatch,o=e.flags,y=e.MemberList,E=e.selectThingsList,S=e.thingsList,T=e.insertOrModify,_=e.isCheckOut,v=e.categoryTypeObj,b=e.contactsList,L=e.accountPoundage,I=e.moduleInfo,N=t.get("projectCardList")||(0,l.fromJS)([]),O=t.get("usedProject"),A=t.get("amount"),R=t.get("accounts"),w=t.get("beProject"),P=t.getIn(["acInvest","beAccrued"]),U=t.get("taxRate"),M=t.get("strongList"),k=t.get("oriState"),j=t.get("pendingStrongList")||(0,l.fromJS)([]),J=o.get("showSingleModal"),D=t.getIn([v,"contactsManagement"]),x=t.get("currentCardList"),F=t.get("categoryType"),H=t.getIn([v,"contactsRange"]),B=o.get("dropManageFetchAllowed"),G=o.get("currentCardType"),Y=t.get("usedCurrent"),Z=t.get("handleType"),z=o.get("selectedKeys"),W=o.get("poundage"),K=o.get("accountContactsRangeList"),X=o.get("accountProjectList"),V=o.get("accountProjectRange"),Q=o.get("accountContactsRange"),q=t.get("curcurrentCardList"),$=t.get("currentProjectCardList");return i.default.createElement("div",null,Y&&("STATE_TZ_SRGL"!==k&&"STATE_TZ_SRLX"!==k&&P||!P||"modify"===T&&q.size)?i.default.createElement(C.default,{currentCardList:x,dropManageFetchAllowed:B,contactsList:b,oriState:k,contactsRange:H,dispatch:r,categoryTypeObj:v,showSingleModal:J,MemberList:y,selectThingsList:E,insertOrModify:T,thingsList:S,contactsManagement:D,strongList:M,currentCardType:G,selectedKeys:z,categoryType:F}):"",O&&"modify"===T&&$.size||w&&("insert"===T||O&&"modify"===T)&&(P&&("STATE_TZ_JTGL"===k||"STATE_TZ_JTLX"===k)||!P&&("STATE_TZ_SRGL"===k||"STATE_TZ_SRLX"===k))?i.default.createElement(d.default,{projectCardList:N,usedProject:O,projectList:n,dispatch:r,beProject:w,amount:A,taxRate:U,showSingleModal:J,MemberList:y,selectThingsList:E,thingsList:S,oriTemp:t,flags:o,moduleInfo:I,insertOrModify:T}):"",i.default.createElement("div",{className:"edit-running-modal-list-item"},i.default.createElement("label",null,"金额："),(w&&O&&"insert"===T||O&&"modify"===T)&&N.size>1?i.default.createElement("div",null,(0,c.formatMoney)(A)):i.default.createElement(u.default,{placeholder:"",value:A,onChange:function(e){(0,s.numberTest)(e,function(e){r(h.changeLrAccountCommonString("ori","amount",e)),1===N.size&&r(h.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e))})}})),"STATE_TZ_JTGL"!==k&&"STATE_TZ_JTLX"!==k?i.default.createElement(f.default,{accountList:a,accounts:R,dispatch:r,isCheckOut:_,oriTemp:t}):"","JR_HANDLE_QDSY"===Z||"JR_HANDLE_SHTZ"===Z?i.default.createElement(p.default,{accounts:R,dispatch:r,accountPoundage:L,oriTemp:t,contactsList:b,contactsRange:H,poundage:W,projectList:n,accountContactsRangeList:K,accountProjectList:X,accountProjectRange:V,accountContactsRange:Q,insertOrModify:T}):"",P&&("STATE_TZ_SRGL"===k||"STATE_TZ_SRLX"===k)&&("insert"===T||"modify"===T&&j.size)?i.default.createElement(m.default,{titleList:["日期","流水号","摘要","类型","流水金额","待收入金额"],pendingStrongList:j,stateName:"计提投资收益",modify:"modify"===T,dispatch:r,listTitle:"待处理收款金额："}):"","modify"!==T||!P||"STATE_TZ_JTGL"!==k&&"STATE_TZ_JTLX"!==k?"":i.default.createElement(g.default,{titleList:["日期","流水号","摘要","类型","金额"],strongList:M,modify:"modify"===T,dispatch:r,amount:A}))}}]),t}())||n)||n;t.default=S},2575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=h(a(1)),o=a(17),l=a(18),u=(h(a(6)),a(56),h(a(1237))),c=(C(a(27)),h(a(90)),a(22),a(101)),s=h(a(1309)),d=h(a(1405)),f=h(a(1364)),m=h(a(1336)),g=h(a(1365)),p=C(a(172));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var y=(0,c.JtHoc)("Capital")(n=(0,o.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.oriTemp,a=e.accountList,n=e.projectList,r=e.dispatch,o=e.flags,C=e.MemberList,h=e.selectThingsList,y=e.thingsList,E=e.insertOrModify,S=e.isCheckOut,T=e.categoryTypeObj,_=e.contactsList,v=e.accountPoundage,b=t.get("projectCardList")||(0,l.fromJS)([]),L=(t.get("usedProject"),t.get("amount")),I=t.get("accounts"),N=t.getIn(["acCapital","beAccrued"]),O=(t.get("taxRate"),t.get("oriState")),A=t.get("strongList"),R=t.get("pendingStrongList")||(0,l.fromJS)([]),w=o.get("showSingleModal"),P=t.getIn([T,"contactsManagement"]),U=t.get("currentCardList"),M=t.get("categoryType"),k=t.getIn([T,"contactsRange"]),j=o.get("dropManageFetchAllowed"),J=o.get("currentCardType"),D=t.get("usedCurrent"),x=t.get("curcurrentCardList"),F=t.get("handleType"),H=o.get("selectedKeys"),B=o.get("poundage"),G=o.get("accountContactsRangeList"),Y=o.get("accountProjectList"),Z=o.get("accountProjectRange"),z=o.get("accountContactsRange");return i.default.createElement("div",null,D&&("STATE_ZB_ZFLR"!==O&&N||!N||"modify"===E&&x.size)?i.default.createElement(g.default,{currentCardList:U,dropManageFetchAllowed:j,contactsList:_,oriState:O,contactsRange:k,dispatch:r,categoryTypeObj:T,showSingleModal:w,MemberList:C,selectThingsList:h,insertOrModify:E,thingsList:y,contactsManagement:P,strongList:A,currentCardType:J,selectedKeys:H,categoryType:M}):"",i.default.createElement("div",{className:"edit-running-modal-list-item"},i.default.createElement("label",null,"金额："),i.default.createElement(u.default,{placeholder:"",value:L,onChange:function(e){(0,c.numberTest)(e,function(e){r(p.changeLrAccountCommonString("ori","amount",e)),1===b.size&&r(p.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e))})}})),"STATE_ZB_LRFP"!==O?i.default.createElement(s.default,{accountList:a,accounts:I,dispatch:r,isCheckOut:S,oriTemp:t}):"","JR_HANDLE_ZZ"===F?i.default.createElement(f.default,{accounts:I,dispatch:r,accountPoundage:v,oriTemp:t,poundage:B,projectList:n,accountContactsRangeList:G,accountProjectList:Y,accountProjectRange:Z,accountContactsRange:z,insertOrModify:E}):"",N&&"STATE_ZB_ZFLR"===O&&("insert"===E||"modify"===E&&R.size)?i.default.createElement(d.default,{titleList:["日期","流水号","摘要","类型","流水金额","待处理金额"],pendingStrongList:R,stateName:"计提分配利润",modify:"modify"===E,dispatch:r,listTitle:"待处理付款金额："}):"","modify"===E&&N&&"STATE_ZB_LRFP"===O?i.default.createElement(m.default,{titleList:["日期","流水号","摘要","类型","金额"],strongList:A,modify:"modify"===E,dispatch:r,amount:L}):"")}}]),t}())||n)||n;t.default=y},2576:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=E(a(1)),o=a(17),l=a(18),u=(E(a(6)),a(56),E(a(1237))),c=(y(a(27)),E(a(90)),a(22)),s=a(101),d=E(a(1303)),f=E(a(1364)),m=E(a(1309)),g=E(a(1423)),p=E(a(1365)),C=E(a(1336)),h=y(a(172));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}var S=(0,o.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.oriTemp,a=e.accountList,n=e.projectList,r=e.contactsList,o=e.dispatch,y=e.flags,E=e.categoryTypeObj,S=e.MemberList,T=e.selectThingsList,_=e.thingsList,v=e.insertOrModify,b=e.isCheckOut,L=e.taxRateTemp,I=e.accountPoundage,N=e.moduleInfo,O=t.get("projectCardList")||(0,l.fromJS)([]),A=t.get("usedProject"),R=t.get("amount"),w=t.get("currentAmount"),P=t.get("accounts"),U=t.get("beProject"),M=t.get("taxRate"),k=t.get("currentCardList"),j=t.getIn([E,"contactsRange"]),J=t.get("oriState"),D=t.getIn([E,"beManagemented"]),x=t.getIn([E,"contactsManagement"]),F=(t.get("pendingStrongList"),t.get("strongList")),H=t.get("usedCurrent"),B=y.get("allGetFlow"),G=y.get("dropManageFetchAllowed"),Y=y.get("showSingleModal"),Z=y.get("currentCardType"),z=y.get("selectedKeys"),W=y.get("poundage"),K=y.get("accountContactsRangeList"),X=y.get("accountProjectList"),V=y.get("accountProjectRange"),Q=y.get("accountContactsRange");return i.default.createElement("div",null,H?i.default.createElement(p.default,{currentCardList:k,dropManageFetchAllowed:G,contactsList:r,oriState:J,contactsRange:j,dispatch:o,categoryTypeObj:E,showSingleModal:Y,MemberList:S,selectThingsList:T,insertOrModify:v,thingsList:_,contactsManagement:x,strongList:F,currentCardType:Z,selectedKeys:z}):"",U&&"insert"===v||A&&"modify"===v?i.default.createElement(d.default,{projectCardList:O,usedProject:A,projectList:n,dispatch:o,beProject:U,amount:R,taxRate:M,showSingleModal:Y,MemberList:S,selectThingsList:T,thingsList:_,oriTemp:t,flags:y,moduleInfo:N,insertOrModify:v}):"",i.default.createElement("div",{className:"edit-running-modal-list-item"},i.default.createElement("label",null,"金额："),(U&&A&&"insert"===v||A&&"modify"===v)&&O.size>1?i.default.createElement("div",null,(0,c.formatMoney)(R)):i.default.createElement(u.default,{placeholder:"",value:R,onChange:function(e){(0,s.numberTest)(e,function(e){o(h.changeLrAccountCommonString("ori","amount",e)),1===O.size&&o(h.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e))})}})),D&&"insert"===v?i.default.createElement("div",{className:"edit-running-modal-list-item"},i.default.createElement("label",null,"本次收款："),i.default.createElement(u.default,{placeholder:"",onFocus:function(){o(h.changeLrAccountCommonString("ori","currentAmount",R||""))},value:w,onChange:function(e){(0,s.numberTest)(e,function(e){o(h.changeLrAccountCommonString("ori","currentAmount",e)),1===O.size&&o(h.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e))})}})):"",D&&w>0&&("modify"===v&&B||"insert"===v)||!D?i.default.createElement(m.default,{accountList:a,accounts:P,dispatch:o,isCheckOut:b,oriTemp:t,amount:D?w:R}):"",i.default.createElement(f.default,{accounts:P,dispatch:o,accountPoundage:I,oriTemp:t,poundage:W,projectList:n,accountContactsRangeList:K,accountProjectList:X,accountProjectRange:V,accountContactsRange:Q,insertOrModify:v,amount:D?w:R}),i.default.createElement(g.default,{dispatch:o,flags:y,oriTemp:t,taxRateTemp:L,insertOrModify:v}),"modify"===v&&D&&!B?i.default.createElement(C.default,{titleList:["日期","流水号","摘要","类型","金额"],strongList:F,modify:"modify"===v,dispatch:o,amount:R}):"")}}]),t}())||n;t.default=S},2577:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=y(a(1)),o=a(17),l=a(18),u=(y(a(6)),a(56),y(a(1237))),c=(h(a(27)),y(a(90)),a(22)),s=a(101),d=y(a(1303)),f=y(a(1309)),m=y(a(1365)),g=y(a(1423)),p=y(a(1336)),C=h(a(172));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var E=(0,o.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.oriTemp,a=e.accountList,n=e.projectList,r=e.contactsList,o=e.dispatch,h=e.flags,y=e.categoryTypeObj,E=e.MemberList,S=e.selectThingsList,T=e.thingsList,_=e.insertOrModify,v=e.isCheckOut,b=e.taxRateTemp,L=e.moduleInfo,I=t.get("projectCardList")||(0,l.fromJS)([]),N=t.get("usedProject"),O=t.get("amount"),A=t.get("currentAmount"),R=t.get("accounts"),w=t.get("beProject"),P=t.get("taxRate"),U=t.get("currentCardList"),M=t.getIn([y,"contactsRange"]),k=t.get("oriState"),j=t.getIn([y,"beManagemented"]),J=t.getIn([y,"contactsManagement"]),D=(t.get("pendingStrongList"),t.get("usedCurrent")),x=t.get("strongList"),F=h.get("dropManageFetchAllowed"),H=h.get("showSingleModal"),B=h.get("allGetFlow"),G=h.get("currentCardType"),Y=h.get("selectedKeys");return i.default.createElement("div",null,D?i.default.createElement(m.default,{currentCardList:U,dropManageFetchAllowed:F,contactsList:r,oriState:k,contactsRange:M,dispatch:o,categoryTypeObj:y,showSingleModal:H,MemberList:E,selectThingsList:S,insertOrModify:_,thingsList:T,contactsManagement:J,strongList:x,currentCardType:G,selectedKeys:Y}):"",w&&"insert"===_||N&&"modify"===_?i.default.createElement(d.default,{projectCardList:I,usedProject:N,projectList:n,dispatch:o,beProject:w,amount:O,taxRate:P,showSingleModal:H,MemberList:E,selectThingsList:S,thingsList:T,oriTemp:t,flags:h,moduleInfo:L,insertOrModify:_}):"",i.default.createElement("div",{className:"edit-running-modal-list-item"},i.default.createElement("label",null,"金额："),(w&&N&&"insert"===_||N&&"modify"===_)&&I.size>1?i.default.createElement("div",null,(0,c.formatMoney)(O)):i.default.createElement(u.default,{placeholder:"",value:O,onChange:function(e){(0,s.numberTest)(e,function(e){o(C.changeLrAccountCommonString("ori","amount",e)),1===I.size&&o(C.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e))})}})),j&&"insert"===_?i.default.createElement("div",{className:"edit-running-modal-list-item"},i.default.createElement("label",null,"本次付款："),i.default.createElement(u.default,{placeholder:"",value:A,onFocus:function(){o(C.changeLrAccountCommonString("ori","currentAmount",O||""))},onChange:function(e){(0,s.numberTest)(e,function(e){o(C.changeLrAccountCommonString("ori","currentAmount",e)),1===I.size&&o(C.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e))})}})):"",j&&A>0&&("modify"===_&&B||"insert"===_)||!j?i.default.createElement(f.default,{accountList:a,accounts:R,dispatch:o,isCheckOut:v,oriTemp:t}):"",i.default.createElement(g.default,{dispatch:o,flags:h,oriTemp:t,taxRateTemp:b,insertOrModify:_}),"modify"===_&&j&&!B?i.default.createElement(p.default,{titleList:["日期","流水号","摘要","类型","金额"],strongList:x,modify:"modify"===_,dispatch:o,amount:O}):"")}}]),t}())||n;t.default=E},2578:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=E(a(129)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(128);var o=E(a(1)),l=a(17),u=a(18),c=(E(a(6)),a(56),E(a(1237))),s=(y(a(27)),E(a(90)),a(22)),d=a(101),f=E(a(1303)),m=E(a(1309)),g=E(a(1405)),p=E(a(1364)),C=E(a(1336)),h=y(a(172));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var T=(0,d.JtHoc)("Payment")(n=(0,l.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=S(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={personSocialSecurityAmountDisabled:!1,personAccumulationAmountDisabled:!1,incomeTaxAmountDisabled:!1},S(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.oriTemp,n=t.categoryTypeObj,r=t.dispatch,i=a.get("oriDate"),o=e.insertOrModify,l=e.oriTemp.get("oriDate"),u=a.get("oriState"),c=e.oriTemp.get("oriState"),s=a.get("categoryUuid"),d=e.oriTemp.get("categoryUuid"),f=e.oriTemp.getIn([n,"beWithholding"]),m=e.oriTemp.getIn([n,"beWithholdSocial"]),g=e.oriTemp.get("propertyCostList");(f||m)&&i!==l&&"modify"!==o&&(this.props.dispatch(h.getJrPaymentAmountInfo(d,l)),this.props.dispatch(h.getJrPaymentTaxInfo(d,l))),s===d&&u===c||(this.setState({personSocialSecurityAmountDisabled:!1,personAccumulationAmountDisabled:!1,incomeTaxAmountDisabled:!1}),"modify"!==o&&r(h.changeLrAccountCommonString("ori","propertyCost",g.get(0))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.oriTemp,n=t.accountList,i=t.projectList,l=t.dispatch,y=t.flags,E=t.MemberList,S=t.selectThingsList,T=t.thingsList,_=t.categoryTypeObj,v=t.insertOrModify,b=t.isCheckOut,L=t.accountPoundage,I=t.moduleInfo,N=this.state,O=N.personSocialSecurityAmountDisabled,A=N.personAccumulationAmountDisabled,R=N.incomeTaxAmountDisabled,w=a.get("projectCardList")||(0,u.fromJS)([]),P=a.get("usedProject"),U=a.get("amount"),M=a.get("accounts"),k=a.get("beProject"),j=a.getIn([_,"beAccrued"]),J=a.getIn([_,"beWithholding"]),D=a.getIn([_,"beWithholdTax"]),x=a.getIn([_,"beWithholdSocial"]),F=a.getIn([_,"beWelfare"]),H=a.get("taxRate"),B=a.get("oriState"),G=a.get("pendingStrongList"),Y=a.get("strongList"),Z=a.get("propertyPay"),z=a.get("accumulationAmount"),W=a.get("payableAmount"),K=a.get("currentProjectCardList"),X=a.get("personTaxAmount"),V=a.get("hxAccumulationAmount"),Q=a.get("hxSocialSecurityAmount"),q=a.get("socialSecurityAmount"),$=a.get("notHandleAmount"),ee=a.getIn(["payment","actualAmount"]),te=a.getIn(["payment","companyAccumulationAmount"]),ae=a.getIn(["payment","personAccumulationAmount"]),ne=a.getIn(["payment","companySocialSecurityAmount"]),re=a.getIn(["payment","personSocialSecurityAmount"]),ie=a.getIn(["payment","incomeTaxAmount"]),oe=a.get("currentpersonSocialSecurityAmount"),le=a.get("currentpersonAccumulationAmount"),ue=a.get("currentpincomeTaxAmount"),ce=(y.get("allGetFlow"),y.get("showSingleModal")),se=y.get("poundage"),de=y.get("accountContactsRangeList"),fe=y.get("accountProjectList"),me=y.get("accountProjectRange"),ge=y.get("accountContactsRange"),pe=0;return G&&G.forEach(function(e){e.get("beSelect")&&(pe+="modify"===v?Number(e.get("notHandleAmount"))+Number(e.get("handleAmount")):Number(e.get("notHandleAmount")))}),o.default.createElement("div",null,P&&"modify"===v&&K.size||k&&("insert"===v||P&&"modify"===v)&&((j||F)&&"STATE_XC_JT"===B||!j&&!F&&("STATE_XC_FF"===B||"STATE_XC_JN"===B))?o.default.createElement(f.default,{projectCardList:w,usedProject:P,projectList:i,dispatch:l,beProject:k,amount:U,taxRate:H,showSingleModal:ce,MemberList:E,selectThingsList:S,thingsList:T,oriTemp:a,flags:y,moduleInfo:I,insertOrModify:v}):"","STATE_XC_FF"===B&&(!j||"SX_GZXJ"!==Z&&j)||"STATE_XC_JT"===B||"STATE_XC_JN"===B&&!J&&!D&&!x&&"insert"===v||"modify"===v&&"STATE_XC_DJ"!==B&&"STATE_XC_DK"!==B?o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,"STATE_XC_JT"===B?"金额：":pe<0?"收款金额：":"付款金额："),(k&&P&&"insert"===v||P&&"modify"===v)&&w.size>1||j&&"SX_GZXJ"===Z&&"STATE_XC_FF"===B&&"insert"===v?o.default.createElement("div",null,(0,s.formatMoney)(U)):o.default.createElement(c.default,{placeholder:"",value:U,onFocus:function(){"modify"===v&&pe&&l(h.changeLrAccountCommonString("ori","amount",Math.abs(pe)))},onChange:function(e){(0,d.numberTest)(e,function(e){l(h.changeLrAccountCommonString("ori","amount",e)),1===w.size&&l(h.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e)),"insert"===v&&j&&"STATE_XC_JT"!==B&&l(h.autoCalculateAmount())},!0)}})):"","insert"!==v||"STATE_XC_FF"!==B||"SX_GZXJ"!==Z||!j||J||D||x?"":o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,pe<0?"收款金额":"付款金额："),o.default.createElement(c.default,{placeholder:"",value:ee,onChange:function(e){(0,d.numberTest)(e,function(e){l(h.changeLrAccountCommonString("ori",["payment","actualAmount"],e))},!0)}})),"STATE_XC_DJ"===B?o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,"代缴金额："),o.default.createElement(c.default,{placeholder:"",value:"SX_SHBX"===Z?re:ae,onChange:function(e){(0,d.numberTest)(e,function(e){l(h.changeLrAccountCommonString("ori",["payment","SX_SHBX"===Z?"personSocialSecurityAmount":"personAccumulationAmount"],e)),l(h.autoCalculateAmount())})}})):"",Q&&"STATE_XC_DJ"===B&&"modify"===v?o.default.createElement("div",{className:"extra-dikou"},"其中社保"+("SX_GZXJ"===Z?"代缴":"代扣")+"抵扣：",(0,s.formatMoney)(Q)):"",V&&"STATE_XC_DJ"===B&&"modify"===v?o.default.createElement("div",{className:"extra-dikou"},"其中公积金"+("SX_GZXJ"===Z?"代缴":"代扣")+"抵扣：",(0,s.formatMoney)(V)):"","STATE_XC_JT"===B||"STATE_XC_DK"===B||"STATE_XC_JN"===B||(D||J||x)&&"SX_GZXJ"===Z&&("modify"!==v||0==U)?"":o.default.createElement(m.default,{accountList:n,accounts:M,dispatch:l,isCheckOut:b,oriTemp:a,amount:{STATE_XC_FF:""+("SX_GZXJ"===Z&&j?ee:U),STATE_XC_JN:""+("SX_SHBX"===Z?x?ee:U:J?ee:U)}[B]}),"STATE_XC_JN"!==B&&"STATE_XC_FF"!==B||!(U<0||pe<0||ee<0)||"STATE_XC_JT"===B||"STATE_XC_DK"===B||"STATE_XC_JN"===B||(D||J||x)&&"SX_GZXJ"===Z&&("modify"!==v||0==U)?"":o.default.createElement(p.default,{accounts:M,dispatch:l,accountPoundage:L,oriTemp:a,poundage:se,projectList:i,accountContactsRangeList:de,accountProjectList:fe,accountProjectRange:me,accountContactsRange:ge,insertOrModify:v,amount:{STATE_XC_FF:""+("SX_GZXJ"===Z&&j?ee:U),STATE_XC_JN:""+("SX_SHBX"===Z?x?ee:U:J?ee:U)}[B]}),o.default.createElement("div",{style:{display:("STATE_XC_FF"===B||"STATE_XC_JN"===B)&&(J||D||x)&&"insert"===v||"modify"===v&&"STATE_XC_DK"===B?"":"none"}},o.default.createElement("div",{className:"edit-running-modal-list-item",style:{display:"SX_SHBX"===Z&&x?"":"none"}},o.default.createElement("label",{className:"large-width-label"},"社会保险(公司部分)："),o.default.createElement(c.default,{placeholder:"",value:ne,onChange:function(e){(0,d.numberTest)(e,function(e){l(h.changeLrAccountCommonString("ori",["payment","companySocialSecurityAmount"],e)),l(h.autoCalculateAmount())},!0)}})),o.default.createElement("div",{style:{display:"SX_SHBX"!==Z&&"SX_GZXJ"!==Z||"STATE_XC_JT"===B||!(x||oe>0)?"none":""}},o.default.createElement("div",{className:"edit-running-modal-list-item "+(Q?".no-margin-bottom":"")},o.default.createElement("span",{style:{marginRight:"10px"}},o.default.createElement(r.default,{checked:!O,onChange:function(t){O||l(h.changeLrAccountCommonString("ori",["payment","personSocialSecurityAmount"],"")),e.setState({personSocialSecurityAmountDisabled:!O}),l(h.autoCalculateAmount())}})),o.default.createElement("label",{className:"large-width-label"},("SX_SHBX"===Z?"代缴":"代扣")+"社会保险(个人部分)："),o.default.createElement(c.default,{disabled:O,placeholder:"",value:re,onChange:function(e){(0,d.numberTest)(e,function(e){l(h.changeLrAccountCommonString("ori",["payment","personSocialSecurityAmount"],e))}),l(h.autoCalculateAmount())}}),q>0?o.default.createElement("div",{className:"dikou-content"},o.default.createElement("label",null,"未处理金额："),o.default.createElement("div",null,(0,s.formatMoney)(q))):""),Q&&"modify"===v?o.default.createElement("div",{className:"extra-dikou"},"其中社保"+("SX_GZXJ"===Z?"代缴":"代扣")+"抵扣：",(0,s.formatMoney)(Q)):""),o.default.createElement("div",{className:"edit-running-modal-list-item",style:{display:"SX_ZFGJJ"===Z&&J?"":"none"}},o.default.createElement("label",{className:"large-width-label"},"公积金(公司部分)："),o.default.createElement(c.default,{placeholder:"",value:te,onChange:function(e){(0,d.numberTest)(e,function(e){l(h.changeLrAccountCommonString("ori",["payment","companyAccumulationAmount"],e)),l(h.autoCalculateAmount())},!0)}})),o.default.createElement("div",{style:{display:"SX_ZFGJJ"!==Z&&"SX_GZXJ"!==Z||!(J||le>0)?"none":""}},o.default.createElement("div",{className:"edit-running-modal-list-item "+(V?".no-margin-bottom":"")},o.default.createElement("span",{style:{marginRight:"10px"}},o.default.createElement(r.default,{checked:!A,onChange:function(t){A||l(h.changeLrAccountCommonString("ori",["payment","personAccumulationAmount"],"")),e.setState({personAccumulationAmountDisabled:!A}),l(h.autoCalculateAmount())}})),o.default.createElement("label",{className:"large-width-label"},("SX_ZFGJJ"===Z?"代缴":"代扣")+"公积金(个人部分)："),o.default.createElement(c.default,{disabled:A,placeholder:"",value:ae,onChange:function(e){(0,d.numberTest)(e,function(e){l(h.changeLrAccountCommonString("ori",["payment","personAccumulationAmount"],e))}),l(h.autoCalculateAmount())}}),z>0?o.default.createElement("div",{className:"dikou-content"},o.default.createElement("label",null,"未处理金额："),o.default.createElement("div",null,(0,s.formatMoney)(z))):""),V&&"modify"===v?o.default.createElement("div",{className:"extra-dikou"},"其中公积金"+("SX_GZXJ"===Z?"代缴":"代扣")+"抵扣：",(0,s.formatMoney)(V)):""),o.default.createElement("div",{style:{display:"SX_SHBX"!==Z&&"SX_GZXJ"!==Z||"STATE_XC_JT"===B||!(D||ue>0)?"none":""}},o.default.createElement("div",{className:"edit-running-modal-list-item "+(X?".no-margin-bottom":"")},o.default.createElement("span",{style:{marginRight:"10px"}},o.default.createElement(r.default,{checked:!R,onChange:function(t){R||l(h.changeLrAccountCommonString("ori",["payment","incomeTaxAmount"],"")),e.setState({incomeTaxAmountDisabled:!R}),l(h.autoCalculateAmount())}})),o.default.createElement("label",{className:"large-width-label"},("SX_GZXJ"===Z?"代扣":"代缴")+"个人所得税："),o.default.createElement(c.default,{disabled:R,placeholder:"",value:ie,onChange:function(e){(0,d.numberTest)(e,function(e){l(h.changeLrAccountCommonString("ori",["payment","incomeTaxAmount"],e))}),l(h.autoCalculateAmount())}}),"SX_GZXJ"===Z&&W>0?o.default.createElement("div",{className:"dikou-content"},o.default.createElement("label",null,"未处理金额："),o.default.createElement("div",null,(0,s.formatMoney)(W))):""),X&&"modify"===v?o.default.createElement("div",{className:"extra-dikou"},"其中个税代缴抵扣：",(0,s.formatMoney)(X)):""),"STATE_XC_FF"===B&&j&&"SX_GZXJ"===Z&&"insert"===v?o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,pe<0?"收款金额：":"付款金额："),o.default.createElement(c.default,{placeholder:"",value:ee,onFocus:function(){if("SX_GZXJ"===Z&&"STATE_XC_FF"===B&&G.size){var e=G.reduce(function(e,t){return t.get("beSelect")?e+="insert"===v?Number(t.get("notHandleAmount")):Number(t.get("notHandleAmount"))+Number(t.get("handlingAmount")):e},0),t=(Number(e||0)-Number(re||0)-Number(ae||0)-Number(ie||0)).toFixed(2);(e>0&&t>0||e<0&&t<0)&&l(h.changeLrAccountCommonString("ori",["payment","actualAmount"],0!=t?Math.abs(t):"")),l(h.autoCalculateAmount())}},onChange:function(e){(0,d.numberTest)(e,function(e){l(h.changeLrAccountCommonString("ori",["payment","actualAmount"],e)),l(h.autoCalculateAmount("amount"))},!0)}})):"",(D||J||x)&&"STATE_XC_FF"===B&&0!=ee&&ee?o.default.createElement(m.default,{accountList:n,accounts:M,dispatch:l,isCheckOut:b,oriTemp:a,amount:{STATE_XC_FF:""+("SX_GZXJ"===Z&&j?ee:U),STATE_XC_JN:""+("SX_SHBX"===Z?x?ee:U:J?ee:U)}[B]}):"",("STATE_XC_JN"===B||"STATE_XC_FF"===B)&&(U<0||pe<0||ee<0)&&(D||J||x)&&"STATE_XC_FF"===B&&0!=ee&&ee?o.default.createElement(p.default,{accounts:M,dispatch:l,accountPoundage:L,oriTemp:a,poundage:se,projectList:i,accountContactsRangeList:de,accountProjectList:fe,accountProjectRange:me,accountContactsRange:ge,insertOrModify:v,amount:{STATE_XC_FF:""+("SX_GZXJ"===Z&&j?ee:U),STATE_XC_JN:""+("SX_SHBX"===Z?x?ee:U:J?ee:U)}[B]}):"",o.default.createElement("div",{className:"edit-running-modal-list-item",style:{display:"SX_GZXJ"!==Z&&"insert"===v?"":"none"}},o.default.createElement("label",null,"实际",ee<0?"收款":"支付","金额："),(0,s.formatMoney)(Math.abs(ee||0))),o.default.createElement("div",{className:"edit-running-modal-list-item",style:{display:"SX_GZXJ"==Z&&"modify"===v&&j?"":"none"}},o.default.createElement("label",null,"核销总金额："),(0,s.formatMoney)(Number(ae||0)+Number(re||0)+Number(ie||0))),o.default.createElement("div",{className:"edit-running-modal-list-item",style:{display:"SX_GZXJ"===Z&&"insert"===v?"":"none"}},o.default.createElement("label",null,"工资薪金合计："),(0,s.formatMoney)(U))),"STATE_XC_JN"===B?o.default.createElement(m.default,{accountList:n,accounts:M,dispatch:l,isCheckOut:b,oriTemp:a,amount:{STATE_XC_FF:""+("SX_GZXJ"===Z&&j?ee:U),STATE_XC_JN:""+("SX_SHBX"===Z?x?ee:U:J?ee:U)}[B]}):"","STATE_XC_JN"!==B&&"STATE_XC_FF"!==B||!(U<0||pe<0||ee<0)||"STATE_XC_JN"!==B?"":o.default.createElement(p.default,{accounts:M,dispatch:l,accountPoundage:L,oriTemp:a,poundage:se,projectList:i,accountContactsRangeList:de,accountProjectList:fe,accountProjectRange:me,accountContactsRange:ge,insertOrModify:v,amount:{STATE_XC_FF:""+("SX_GZXJ"===Z&&j?ee:U),STATE_XC_JN:""+("SX_SHBX"===Z?x?ee:U:J?ee:U)}[B]}),!j&&!F||"STATE_XC_FF"!==B&&"STATE_XC_JN"!==B&&"STATE_XC_DK"!==B||!G.size?"":o.default.createElement(g.default,{titleList:["日期","流水号","摘要","类型","流水金额","待支付金额"],pendingStrongList:G,stateName:"计提"+("SX_GZXJ"===Z?"工资薪金":"SX_SHBX"===Z?"社会保险":"SX_GZXJ"===Z?"公积金":"其他薪酬"),modify:"modify"===v,dispatch:l,listTitle:pe<0?"待处理收款金额：":"待处理付款金额：",extraFunc:{SX_GZXJ:function(e){"STATE_XC_DK"!==B&&l(h.autoCalculateAmount())},SX_SHBX:function(e){"STATE_XC_DJ"!==B&&(l(x?h.changeLrAccountCommonString("ori",["payment","companySocialSecurityAmount"],Math.abs(e).toFixed(2)):h.changeLrAccountCommonString("ori","amount",Math.abs(e).toFixed(2))),l(h.autoCalculateAmount()))},SX_ZFGJJ:function(e){"STATE_XC_DJ"!==B&&(l(J?h.changeLrAccountCommonString("ori",["payment","companyAccumulationAmount"],Math.abs(e).toFixed(2)):h.changeLrAccountCommonString("ori","amount",Math.abs(e).toFixed(2))),l(h.autoCalculateAmount()))}}[Z]}),"modify"===v&&Y.size?o.default.createElement(C.default,{titleList:["日期","流水号","摘要","类型","金额"],strongList:Y,modify:"modify"===v,dispatch:l,amount:U,oriState:B,notHandleAmount:$}):"")}}]),t}())||n)||n;t.default=T},2579:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=T(a(1234)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1235);var o=T(a(1)),l=a(17),u=a(18),c=(T(a(6)),a(56),T(a(1237))),s=(S(a(27)),T(a(90)),a(22)),d=a(101),f=T(a(1303)),m=T(a(1309)),g=T(a(1364)),p=T(a(1365)),C=T(a(1423)),h=T(a(1752)),y=T(a(1336)),E=S(a(172));function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}var _=(0,l.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.oriTemp,n=t.categoryTypeObj,r=a.get("oriDate"),i=a.get("oriState"),o=e.oriTemp.get("oriDate"),l=e.oriTemp.get("categoryUuid"),u=e.oriTemp.get("oriState"),c=a.getIn(["currentCardList",0,"cardUuid"]),s=e.oriTemp.getIn(["currentCardList",0,"cardUuid"]),d=e.oriTemp.getIn([n,"beManagemented"]),f=e.insertOrModify;d&&(r!==o||c!==s&&s||i!==u&&u)&&"insert"===f&&this.props.dispatch(E.getYyszPreAmount({categoryUuid:l,oriDate:o,cardUuid:s,oriState:u}))}},{key:"render",value:function(){var e=this.props,t=e.oriTemp,a=e.taxRateTemp,n=e.accountList,i=e.projectList,l=e.contactsList,S=e.dispatch,T=e.flags,_=e.MemberList,v=e.selectThingsList,b=e.thingsList,L=e.categoryTypeObj,I=e.insertOrModify,N=e.isCheckOut,O=e.accountPoundage,A=e.moduleInfo,R=t.get("projectCardList")||(0,u.fromJS)([]),w=t.get("usedProject"),P=t.get("amount"),U=t.get("accounts"),M=t.get("beProject"),k=t.get("taxRate"),j=t.get("oriState"),J=t.get("currentCardList"),D=t.getIn([L,"contactsRange"]),x=t.getIn([L,"beManagemented"]),F=t.getIn([L,"contactsManagement"]),H=(t.get("pendingStrongList"),t.get("strongList")),B=t.get("currentAmount"),G=t.get("usedCurrent"),Y=T.get("showSingleModal"),Z=T.get("allGetFlow"),z=T.get("dropManageFetchAllowed"),W=T.get("selectedKeys"),K=T.get("currentCardType"),X=t.get("preAmount"),V=t.get("payableAmount"),Q=t.get("offsetAmount"),q=t.get("usedAccounts"),$=T.get("poundage"),ee=T.get("accountContactsRangeList"),te=T.get("accountProjectList"),ae=T.get("accountProjectRange"),ne=T.get("accountContactsRange");return o.default.createElement("div",null,G?o.default.createElement(p.default,{currentCardList:J,dropManageFetchAllowed:z,contactsList:l,oriState:j,contactsRange:D,dispatch:S,categoryTypeObj:L,selectedKeys:W,showSingleModal:Y,MemberList:_,selectThingsList:v,insertOrModify:I,thingsList:b,contactsManagement:F,strongList:H,currentCardType:K}):"",M&&"insert"===I||w&&"modify"===I?o.default.createElement(f.default,{projectCardList:R,usedProject:w,projectList:i,dispatch:S,beProject:M,amount:P,taxRate:k,showSingleModal:Y,MemberList:_,selectThingsList:v,thingsList:b,oriTemp:t,flags:T,moduleInfo:A,insertOrModify:I}):"",o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,("STATE_FY_DJ"===j?"预付":"")+"金额："),(M&&w&&"insert"===I||w&&"modify"===I)&&R.size>1?o.default.createElement("div",null,(0,s.formatMoney)(P),"insert"===I&&P>0||"modify"===I&&Z&&P>0?o.default.createElement(r.default,{className:"use-unuse-style",style:{marginLeft:".2rem",minWidth:"69px",width:"69px",float:"right"},checked:q,checkedChildren:"多账户",unCheckedChildren:"多账户",onChange:function(){S(E.changeLrAccountCommonString("ori","usedAccounts",!q)),q||(S(E.changeLrAccountCommonString("ori","offsetAmount","")),x&&S(E.calculateCurAmount()))}}):""):o.default.createElement("div",{style:{display:"flex"}},o.default.createElement(c.default,{placeholder:"",value:P,onChange:function(e){(0,d.numberTest)(e,function(e){S(E.changeLrAccountCommonString("ori","amount",e)),e<=0&&S(E.changeLrAccountCommonString("ori","usedAccounts",!1)),1===R.size&&S(E.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e)),e<=0&&S(E.changeLrAccountCommonString("ori","usedAccounts",!1))},"STATE_FY_DJ"!==j)}}),"insert"===I&&P>0||"modify"===I&&Z&&P>0?o.default.createElement(r.default,{className:"use-unuse-style",style:{marginLeft:".2rem",minWidth:"69px",width:"69px",float:"right"},checked:q,checkedChildren:"多账户",unCheckedChildren:"多账户",onChange:function(){S(E.changeLrAccountCommonString("ori","usedAccounts",!q)),q||(S(E.changeLrAccountCommonString("ori","offsetAmount","")),x&&S(E.calculateCurAmount()))}}):"")),!q&&"STATE_FY"===j&&x&&"insert"===I&&(X>0&&(!P||P>0)||V>0&&P<0)?o.default.createElement("div",null,o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("div",{className:"edit-running-premount"},o.default.createElement("label",null),o.default.createElement("label",null,"预付款："),o.default.createElement("div",null,t.get("preAmount")),o.default.createElement("label",null,"应付款："),o.default.createElement("div",null,t.get("payableAmount")))),o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,(P>=0||!P?"预":"应")+"付抵扣："),o.default.createElement("div",null,o.default.createElement(c.default,{value:Q,onChange:function(e){(0,d.numberTest)(e,function(e){return S(E.changeLrAccountCommonString("ori","offsetAmount",e))})}})))):null,!q&&x&&"STATE_FY"===j&&"insert"===I?o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("label",null,"本次",P<0?"收":"付","款："),o.default.createElement(c.default,{placeholder:"",value:B,onFocus:function(){var e=Math.abs(P||0)-Math.abs(Q||0)>0?Math.abs(P||0)-Math.abs(Q||0).toFixed(2):"";S(E.changeLrAccountCommonString("ori","currentAmount",e))},onChange:function(e){(0,d.numberTest)(e,function(e){S(E.changeLrAccountCommonString("ori","currentAmount",e))})}})):"",q||!("STATE_FY_DJ"===j||x&&0!=B&&B&&("modify"===I&&Z||"insert"===I))&&x?"":o.default.createElement(m.default,{accountList:n,accounts:U,dispatch:S,isCheckOut:N,oriTemp:t,amount:x?B:P}),q&&P>0?o.default.createElement(h.default,{accountList:n,accounts:U,dispatch:S,isCheckOut:N,beManagemented:x,oriTemp:t,insertOrModify:I,amount:P}):"","STATE_FY"===j&&P<0?o.default.createElement(g.default,{accounts:U,dispatch:S,accountPoundage:O,oriTemp:t,poundage:$,projectList:i,accountContactsRangeList:ee,accountProjectList:te,accountProjectRange:ae,accountContactsRange:ne,insertOrModify:I,amount:x?B:P}):"","STATE_FY"===j?o.default.createElement(C.default,{dispatch:S,flags:T,oriTemp:t,taxRateTemp:a,insertOrModify:I}):"","modify"===I&&x&&!Z?o.default.createElement(y.default,{titleList:["日期","流水号","摘要","类型","金额"],strongList:H,modify:"modify"===I,dispatch:S,amount:P}):"")}}]),t}())||n;t.default=_},2580:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=y(a(129)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(128);var o=y(a(1)),l=a(17),u=a(18),c=(y(a(6)),a(56),y(a(1237))),s=(h(a(27)),y(a(90)),a(22)),d=a(101),f=y(a(1303)),m=y(a(1309)),g=y(a(1405)),p=y(a(1336)),C=h(a(172));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var E=(0,d.JtHoc)("Vat")(n=(0,l.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.oriTemp,n=t.categoryTypeObj,r=e.insertOrModify,i=a.get("oriDate"),o=e.oriTemp.get("oriDate"),l=e.oriTemp.get("oriState");e.oriTemp.getIn([n,"beInAdvance"])&&i!==o&&this.props.dispatch(C.getJrVatPrepayList(o)),"STATE_SF_ZCWJZZS"==l&&i!==o&&"insert"===r&&this.props.dispatch(C.getTransferAmount(o))}},{key:"render",value:function(){var e=this.props,t=e.oriTemp,a=e.accountList,n=e.projectList,i=e.dispatch,l=e.flags,h=e.MemberList,y=e.selectThingsList,E=e.thingsList,S=e.categoryTypeObj,T=e.insertOrModify,_=e.isCheckOut,v=e.moduleInfo,b=t.get("projectCardList")||(0,u.fromJS)([]),L=t.get("usedProject"),I=t.get("amount")||0,N=t.get("accounts"),O=t.get("beProject"),A=t.get("taxRate"),R=t.get("oriState"),w=t.get("payableAmount"),P=t.get("beReduceTax"),U=t.getIn([S,"beReduce"]),M=t.getIn([S,"beAccrued"]),k=t.getIn([S,"beInAdvance"]),j=t.get("offsetAmount")||0,J=t.get("propertyTax"),D=t.get("strongList"),x=t.get("dikouAmount"),F=t.get("transferAmount"),H=t.get("personTaxAmount"),B=t.get("pendingStrongList")||(0,u.fromJS)([]),G=t.get("reduceAmount")||0,Y=t.get("notHandleAmount")||0,Z=l.get("showSingleModal"),z=t.get("currentProjectCardList");return o.default.createElement("div",null,L&&"modify"===T&&z.size||O&&("insert"===T||L&&"modify"===T)&&("STATE_SF_JT"===R||!M&&"STATE_SF_JN"===R&&"SX_ZZS"!==J)?o.default.createElement(f.default,{projectCardList:b,usedProject:L,projectList:n,dispatch:i,beProject:O,amount:I,taxRate:A,showSingleModal:Z,MemberList:h,selectThingsList:y,thingsList:E,oriTemp:t,flags:l,moduleInfo:v,insertOrModify:T}):"",o.default.createElement("div",{style:{display:"SX_ZZS"===J&&"STATE_SF_JN"===R&&("insert"===T||"modify"===T&&j>0)?"":"none"}},o.default.createElement("div",{className:"accountConf-separator"}),o.default.createElement("div",{className:"edit-running-modal-list-item"},o.default.createElement("div",{className:"input-right-amount"},o.default.createElement("span",{style:{margin:0}},"处理税费：",(0,s.formatMoney)(Number(j)+Number(I)+(P&&G?Number(G):0)))))),o.default.createElement("div",{className:"edit-running-modal-list-item",style:{display:"STATE_SF_JN"===R&&k&&(x>0||"modify"===T&&j>0)?"":"none"}},o.default.createElement("label",null,"预交抵扣金额："),o.default.createElement("div",{style:{display:"flex"}},o.default.createElement(c.default,{style:{flex:1},value:j||"",onChange:function(e){(0,d.numberTest)(e,function(e){return i(C.changeLrAccountCommonString("ori","offsetAmount",e))})}}),o.default.createElement("div",{className:"dikou-content"},o.default.createElement("label",null,"待抵扣："),o.default.createElement("div",null,(0,s.formatMoney)(x))))),o.default.createElement("div",{className:"edit-running-modal-list-item",style:{display:"STATE_SF_SFJM"!==R?"":"none"}},o.default.createElement("label",null,("SX_ZZS"===J&&"STATE_SF_JN"===R?"支付":"")+"金额："),(O&&L&&"insert"===T||L&&"modify"===T)&&b.size>1?o.default.createElement("div",null,(0,s.formatMoney)(I)):o.default.createElement(c.default,{placeholder:"",value:I||"",onChange:function(e){(0,d.numberTest)(e,function(e){i(C.changeLrAccountCommonString("ori","amount",e)),1===b.size&&i(C.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e))})}}),"STATE_SF_ZCWJZZS"===R&&"insert"===T&&F>0?o.default.createElement("div",{className:"dikou-content"},o.default.createElement("label",null,"待转增值税："),o.default.createElement("div",null,(0,s.formatMoney)(F))):"","SX_GRSF"===J&&w>0?o.default.createElement("div",{className:"dikou-content"},o.default.createElement("label",null,"待核销税费："),o.default.createElement("div",null,(0,s.formatMoney)(w))):""),"STATE_SF_JT"!==R&&"STATE_SF_SFJM"!==R&&"STATE_SF_ZCWJZZS"!==R&&I>0?o.default.createElement(m.default,{accountList:a,accounts:N,dispatch:i,isCheckOut:_,oriTemp:t}):"",H&&"modify"===T?o.default.createElement("div",{className:"extra-dikou"},"其中个税代扣抵扣： "+(0,s.formatMoney)(H)):"",o.default.createElement("div",null,o.default.createElement("div",{className:"edit-running-modal-list-item",style:{display:U&&"STATE_SF_JN"===R&&"insert"===T?"":"none"}},o.default.createElement("label",null,o.default.createElement(r.default,{checked:P,onChange:function(e){i(C.changeLrAccountCommonString("ori","beReduceTax",e.target.checked))}}),o.default.createElement("span",null,"税费减免"))),o.default.createElement("div",null,o.default.createElement("div",{className:"edit-running-modal-list-item",style:{display:P&&"insert"===T||"modify"===T&&"STATE_SF_SFJM"===R?"":"none"}},o.default.createElement("label",null,"减免金额："),o.default.createElement(c.default,{placeholder:"",value:("insert"===T?G:I)||"",onChange:function(e){(0,d.numberTest)(e,function(e){i("modify"===T&&"STATE_SF_SFJM"===R?C.changeLrAccountCommonString("ori","amount",e):C.changeLrAccountCommonString("ori","reduceAmount",e))})}})))),"SX_ZZS"!==J&&!M||"STATE_SF_JN"!==R&&"STATE_SF_SFJM"!==R||!("insert"===T||"modify"===T&&B.size)?"":o.default.createElement(g.default,{titleList:["日期","流水号","摘要","类型","流水金额","SX_ZZS"===J?"待处理税费":"待支付金额"],pendingStrongList:B,modify:"modify"===T,dispatch:i,listTitle:"待处理付款金额："}),"modify"===T&&D.size?o.default.createElement(p.default,{titleList:["日期","流水号","摘要","类型","金额"],strongList:D,modify:"modify"===T,dispatch:i,amount:I,oriState:R,notHandleAmount:Y}):"")}}]),t}())||n)||n;t.default=E},2581:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=N(a(61)),i=N(a(129)),o=N(a(1234)),l=N(a(45)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(79),a(128),a(1235),a(55);var c=N(a(1)),s=a(17),d=a(18),f=(N(a(6)),a(56),N(a(1237))),m=I(a(27)),g=(N(a(90)),a(22)),p=a(101),C=N(a(1303)),h=N(a(2582)),y=N(a(1309)),E=N(a(1364)),S=N(a(1752)),T=N(a(1336)),_=N(a(1365)),v=N(a(1423)),b=N(a(1751)),L=I(a(172));function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function N(e){return e&&e.__esModule?e:{default:e}}var O=l.default.Option,A=(0,s.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.oriTemp,n=t.categoryTypeObj,r=a.get("oriDate"),i=a.get("oriState"),o=e.oriTemp.get("oriDate"),l=e.oriTemp.get("categoryUuid"),u=e.oriTemp.get("oriState"),c=a.getIn(["currentCardList",0,"cardUuid"]),s=e.oriTemp.getIn(["currentCardList",0,"cardUuid"]),d=e.oriTemp.getIn([n,"beManagemented"]),f=e.insertOrModify;d&&(r!==o||c!==s&&s||i!==u&&u)&&"insert"===f&&this.props.dispatch(L.getYyszPreAmount({categoryUuid:l,oriDate:o,cardUuid:s,oriState:u}))}},{key:"render",value:function(){var e=this.props,t=e.oriTemp,a=e.accountList,n=e.projectList,u=e.contactsList,s=e.dispatch,I=e.flags,N=e.taxRateTemp,A=e.MemberList,R=e.selectThingsList,w=e.thingsList,P=e.stockList,U=e.warehouseList,M=e.insertOrModify,k=e.isCheckOut,j=e.enableWarehouse,J=e.openQuantity,D=e.accountPoundage,x=e.moduleInfo,F=t.get("categoryType"),H=(0,p.getCategorynameByType)(F),B=H.categoryTypeObj,G=H.direction,Y=t.get("projectCardList")||(0,d.fromJS)([]),Z=t.get("usedProject"),z=t.get("oriDate"),W=t.get("oriUuid"),K=t.get("amount"),X=t.get("accounts"),V=t.get("beProject"),Q=t.get("taxRate"),q=t.get("oriState"),$=t.get("currentAmount"),ee=t.get("currentCardList"),te=t.get("stockStrongList"),ae=t.getIn([B,"contactsRange"]),ne=t.getIn([B,"beCarryover"]),re=t.get("beCarryover"),ie=t.get("carryoverCardList")||(0,d.fromJS)([]),oe=t.getIn([B,"stockRange"])||(0,d.fromJS)([]),le=t.getIn([B,"beDeposited"]),ue=t.get("pendingStrongList"),ce=t.get("usedCurrent"),se=t.get("strongList"),de=t.get("stockCardList"),fe=t.get("offsetAmount"),me=t.get("preAmount"),ge=t.get("payableAmount"),pe=t.get("propertyCarryover"),Ce=t.get("usedStock"),he=t.get("usedAccounts"),ye=t.get("relationCategoryName"),Ee=t.get("usedCarryoverProject"),Se=t.get("relationBeProject"),Te=t.get("propertyCost"),_e=t.get("relationCategoryType"),ve=I.get("dropManageFetchAllowed"),be=I.get("batchList"),Le=I.get("serialList"),Ie=I.get("showSingleModal"),Ne=I.get("showStockModal"),Oe=I.get("allGetFlow"),Ae=I.get("currentCardType"),Re=I.get("selectedKeys"),we=I.get("pageCount"),Pe=I.get("relationCategoryPropertyCostList")||(0,d.fromJS)([]),Ue=I.get("accountContactsRangeList"),Me=I.get("selectItem"),ke=I.get("selectList"),je=I.get("accountProjectList"),Je=I.get("accountProjectRange"),De=I.get("accountContactsRange"),xe=I.get("poundage"),Fe=I.get("carryoverCategoryList")||(0,d.fromJS)([]),He=I.get("carryoverProjectList")||(0,d.fromJS)([]),Be=t.getIn([B,"beManagemented"]),Ge=t.getIn([B,"contactsManagement"]),Ye=t.getIn([B,"beZeroInventory"]),Ze=t.get("carryoverProjectCardList")||(0,d.fromJS)([]),ze=(0,p.filterCarryover)(ie,ne,M,j),We=[];!function e(t){return t.map(function(t){t.get("childList").size>0?e(t.get("childList")):We.push(t.toJS())})}(Fe);var Ke=(0,p.disablePropertyFunc)(Te);return c.default.createElement("div",null,ce?c.default.createElement(_.default,{currentCardList:ee,dropManageFetchAllowed:ve,contactsList:u,oriState:q,contactsRange:ae,dispatch:s,categoryTypeObj:B,showSingleModal:Ie,MemberList:A,selectThingsList:R,thingsList:w,insertOrModify:M,strongList:se,stockStrongList:te,contactsManagement:Ge,currentCardType:Ae,selectedKeys:Re}):"",V&&"insert"===M||Z&&"modify"===M?c.default.createElement(C.default,{projectCardList:Y,usedProject:Z,projectList:n,dispatch:s,beProject:V,amount:K,taxRate:Q,showSingleModal:Ie,MemberList:A,selectThingsList:R,thingsList:w,oriTemp:t,flags:I,moduleInfo:x,insertOrModify:M}):"",("SX_HW"===pe||"SX_HW_FW"===pe&&Ce&&(oe.size||"modify"===M&&de.size))&&"STATE_YYSR_DJ"!==q&&"STATE_YYZC_DJ"!==q?c.default.createElement(h.default,{dispatch:s,stockCardList:de,stockList:P,oriState:q,stockRange:oe,amount:K,taxRate:Q,showSingleModal:Ie,MemberList:A,selectThingsList:R,thingsList:w,flags:I,categoryTypeObj:B,carryoverCardList:ie,currentCardType:Ae,selectedKeys:Re,warehouseList:U,insertOrModify:M,enableWarehouse:j,openQuantity:J,selectList:ke,showStockModal:Ne,selectItem:Me,oriDate:z,pageCount:we,batchList:be,serialList:Le,oriUuid:W}):"",c.default.createElement("div",{className:"edit-running-modal-list-item"},c.default.createElement("label",null,((V&&"insert"===M||Z&&"modify"===M)&&de.size>1?"合计":"")+("STATE_YYSR_DJ"===q?"预收":"")+"金额："),(V&&Z&&"insert"===M||Z&&"modify"===M)&&Y.size>1||de.size>1?c.default.createElement("div",null,(0,g.formatMoney)(K),"insert"!==M&&("modify"!==M||!Oe&&"STATE_YYSR_DJ"!==q&&"STATE_YYZC_DJ"!==q)||"STATE_YYSR_TS"===q||"STATE_YYZC_TG"===q?"":c.default.createElement(o.default,{className:"use-unuse-style",style:{marginLeft:".2rem",minWidth:"69px",width:"69px",float:"right"},checked:he,checkedChildren:"多账户",unCheckedChildren:"多账户",onChange:function(){s(L.changeLrAccountCommonString("ori","usedAccounts",!he)),he||(s(L.changeLrAccountCommonString("ori","offsetAmount","")),Be&&s(L.calculateCurAmount()))}})):c.default.createElement("div",{style:{display:"flex"}},c.default.createElement(f.default,{className:"lrls-account-box",placeholder:"",value:K,onChange:function(e){(0,p.numberTest)(e,function(e){if(s(L.changeLrAccountCommonString("ori","amount",e)),1===Y.size&&s(L.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e)),1===de.size&&s(L.changeLrAccountCommonString("ori",["stockCardList",0,"amount"],e)),1===de.size&&de.getIn([0,"quantity"])>0){var t=((e||0)/de.getIn([0,"quantity"])).toFixed(2);s(L.changeLrAccountCommonString("ori",["stockCardList",0,"price"],t))}})}}),"insert"!==M&&("modify"!==M||!Oe&&"STATE_YYSR_DJ"!==q&&"STATE_YYZC_DJ"!==q)||"STATE_YYSR_TS"===q||"STATE_YYZC_TG"===q?"":c.default.createElement(o.default,{className:"use-unuse-style",style:{marginLeft:".2rem",minWidth:"69px",width:"69px"},checked:he,checkedChildren:"多账户",unCheckedChildren:"多账户",onChange:function(){s(L.changeLrAccountCommonString("ori","usedAccounts",!he)),he||(s(L.changeLrAccountCommonString("ori","offsetAmount","")),Be&&s(L.calculateCurAmount()))}}))),he||"STATE_YYSR_XS"!==q&&"STATE_YYZC_GJ"!==q&&"STATE_YYSR_TS"!==q&&"STATE_YYZC_TG"!==q||!Be||"insert"!==M||!(("STATE_YYSR_XS"===q||"STATE_YYZC_GJ"===q)&&me>0&&le||("STATE_YYSR_TS"===q||"STATE_YYZC_TG"===q)&&ge>0)?null:c.default.createElement("div",null,c.default.createElement("div",{className:"edit-running-modal-list-item"},c.default.createElement("div",{className:"edit-running-premount"},c.default.createElement("label",null),c.default.createElement("label",null,"预"+("debit"===G?"收":"付")+"款："),c.default.createElement("div",null,t.get("preAmount")),c.default.createElement("label",null,"应"+("debit"===G?"收":"付")+"款："),c.default.createElement("div",null,t.get("payableAmount")))),c.default.createElement("div",{className:"edit-running-modal-list-item"},c.default.createElement("label",null,("STATE_YYSR_XS"===q||"STATE_YYZC_GJ"===q?"预":"应")+("STATE_YYSR_XS"===q||"STATE_YYSR_TS"===q?"收":"付")+"抵扣："),c.default.createElement("div",null,c.default.createElement(f.default,{value:fe,onChange:function(e){(0,p.numberTest)(e,function(e){return s(L.changeLrAccountCommonString("ori","offsetAmount",e))})}})))),!he&&Be&&"insert"===M&&"STATE_YYSR_DJ"!==q&&"STATE_YYZC_DJ"!==q?c.default.createElement("div",{className:"edit-running-modal-list-item"},c.default.createElement("label",null,"本次"+("STATE_YYSR_XS"===q||"STATE_YYZC_TG"===q?"收":"付")+"款："),c.default.createElement(f.default,{placeholder:"",value:$,onFocus:function(){var e=(e=(K||0)-(fe||0))>0?e.toFixed(2):"";s(L.changeLrAccountCommonString("ori","currentAmount",e))},onChange:function(e){(0,p.numberTest)(e,function(e){s(L.changeLrAccountCommonString("ori","currentAmount",e)),1===Y.size&&s(L.changeLrAccountCommonString("ori",["projectCardList",0,"amount"],e))})}})):"",!he&&("STATE_YYSR_DJ"===q||"STATE_YYZC_DJ"===q||Be&&$>0&&("modify"===M&&Oe||"insert"===M)||!Be&&!se.size)?c.default.createElement(y.default,{accountList:a,accounts:X,dispatch:s,isCheckOut:k,oriTemp:t,amount:{STATE_YYSR_DJ:K,STATE_YYSR_XS:""+(Be?$:K),STATE_YYZC_TG:""+(Be?$:K)}[q]}):"",he&&"STATE_YYSR_TS"!==q?c.default.createElement(S.default,{accountList:a,accounts:X,dispatch:s,isCheckOut:k,beManagemented:Be,oriTemp:t,insertOrModify:M,amount:{STATE_YYSR_DJ:K,STATE_YYSR_XS:""+(Be?$:K),STATE_YYZC_TG:""+(Be?$:K)}[q]}):"",{STATE_YYSR_DJ:!0,STATE_YYSR_XS:Be&&$>0||!Be,STATE_YYZC_TG:Be&&$>0||!Be}[q]&&"insert"===M?c.default.createElement(E.default,{accounts:X,dispatch:s,accountPoundage:D,oriTemp:t,contactsList:u,contactsRange:ae,poundage:xe,projectList:n,accountContactsRangeList:Ue,accountProjectList:je,accountProjectRange:Je,accountContactsRange:De,insertOrModify:M,amount:{STATE_YYSR_DJ:K,STATE_YYSR_XS:""+(Be?$:K),STATE_YYZC_TG:""+(Be?$:K)}[q]}):"","STATE_YYSR_DJ"!==q&&"STATE_YYZC_DJ"!==q?c.default.createElement(v.default,{dispatch:s,flags:I,oriTemp:t,taxRateTemp:N,insertOrModify:M}):"",!("SX_HW"===pe||"SX_HW_FW"===pe&&oe.size&&Ce)||"STATE_YYSR_XS"!==q&&"STATE_YYSR_TS"!==q||"insert"!==M?"":c.default.createElement("div",null,c.default.createElement("div",{className:"edit-running-separator"}),c.default.createElement("label",null,c.default.createElement(i.default,{checked:re,onChange:function(e){s(L.changeLrAccountCommonString("ori","beCarryover",e.target.checked)),e.target.checked&&s(L.changeLrAccountCommonString("ori","carryoverCardList",de.map(function(e){return e.set("amount","")})))}}),c.default.createElement("span",null,"STATE_YYSR_XS"===q?"结转成本":"转回成本")),re&&ze?(0,d.fromJS)(ze).map(function(e,t){var a=e.getIn(["financialInfo","openAssist"]),n=e.getIn(["financialInfo","openBatch"]),r=e.getIn(["financialInfo","openShelfLife"]),i=e.get("assistList")||(0,d.fromJS)([]),o=e.get("batch")?e.get("batch")+(r&&e.get("productionDate")&&"undefined"!==e.get("productionDate")?"("+e.get("productionDate")+")":""):void 0,l="",u="";return a&&n?(u="属性|批次：",l=(i.some(function(e){return e.get("propertyName")})?i.map(function(e){return e.get("propertyName")}).join():"")+" | "+(e.get("batch")?o:"")):(a||n)&&(u=a?"属性：":"批次：",l=a?i.some(function(e){return e.get("propertyName")})?i.map(function(e){return e.get("propertyName")}).join():"":e.get("batch")?o:""),c.default.createElement("div",null,ze.length>1?c.default.createElement("div",{className:"edit-carryover-modal-list-item "},c.default.createElement("div",null,c.default.createElement("label",null,"存货："),c.default.createElement("div",null,(e.get("code")?e.get("code"):"")+" "+(e.get("name")?e.get("name"):""))),a||n?c.default.createElement("div",{style:{maxWidth:j?"33%":"50%"}},c.default.createElement("label",{style:{width:"65px"}},u),c.default.createElement("div",{className:"ellipsis"},l)):"",j?c.default.createElement("div",null,c.default.createElement("label",null,"仓库："),c.default.createElement("div",null,(e.get("warehouseCardCode")?e.get("warehouseCardCode"):"")+" "+(e.get("warehouseCardName")?e.get("warehouseCardName"):""))):""):null,c.default.createElement("div",{className:"edit-running-modal-list-item"},c.default.createElement("label",null,"成本金额："),c.default.createElement("div",null,c.default.createElement(f.default,{value:e.get("amount"),onFocus:function(){var t=0,a=0;"false"==de.getIn([e.get("index"),"isOpenedQuantity"])||e.get("price")<0||(j?de.forEach(function(a){if(e.get("warehouseCardUuid")===a.get("warehouseCardUuid")&&e.get("warehouseCardUuid")&&a.get("cardUuid")===e.get("cardUuid")&&a.get("cardUuid")){var n=P.find(function(e){return e.get("uuid")===a.get("cardUuid")}),r=n.getIn(["unit","name"])===a.get("unitName")?1:(n.getIn(["unit","unitList"]).find(function(e){return e.get("name")===a.get("unitName")})||(0,d.fromJS)({})).get("basicUnitQuantity");t+=Number(r)*Number(a.get("quantity"))||0}}):de.forEach(function(a){if(a.get("cardUuid")===e.get("cardUuid")&&a.get("cardUuid")){var n=P.find(function(e){return e.get("uuid")===a.get("cardUuid")}),r=n.getIn(["unit","name"])===a.get("unitName")?1:(n.getIn(["unit","unitList"]).find(function(e){return e.get("name")===a.get("unitName")})||(0,d.fromJS)({})).get("basicUnitQuantity");t+=Number(r)*Number(a.get("quantity"))||0}}),(a=t*e.get("referencePrice")||0)&&s(L.changeLrAccountCommonString("ori",["carryoverCardList",e.get("index"),"amount"],a.toFixed(2))))},onChange:function(t){(0,p.numberTest)(t,function(t){s(L.changeLrAccountCommonString("ori",["carryoverCardList",e.get("index"),"amount"],t))})}})),"false"!=de.getIn([e.get("index"),"isOpenedQuantity"])&&P.find(function(t){return t.get("uuid")===e.get("cardUuid")})&&e.get("referencePrice")>0?c.default.createElement("span",{style:{marginLeft:5}},"参考单价：",e.get("referencePrice"),"元/",P.find(function(t){return t.get("uuid")===e.get("cardUuid")}).getIn(["unit","name"])):""))}):null),Ye&&"insert"===M&&"STATE_YYZC_GJ"===q?c.default.createElement("div",null,c.default.createElement("div",{className:"edit-running-separator"}),c.default.createElement("label",null,c.default.createElement(i.default,{checked:re,onChange:function(e){s(L.changeLrAccountCommonString("ori","beCarryover",e.target.checked)),s(L.getCarryoverCategory(q))}}),c.default.createElement("span",null,"直接成本结转")),re?c.default.createElement("div",{className:"edit-running-modal-list-item"},c.default.createElement("label",null,"处理类别："),c.default.createElement("div",{className:"chosen-right",style:{display:"flex"}},c.default.createElement(l.default,{disabled:"modify"===M,value:ye,onChange:function(e,t){var a=e.split(m.TREE_JOIN_STR),n=a[0],r=a[1],i=a[3],o=t.props.projectRange,l=t.props.propertyCostList;s(L.changeLrAccountCommonString("ori","relationCategoryUuid",n)),s(L.changeLrAccountCommonString("ori","relationCategoryName",r)),s(L.changeLrAccountCommonString("ori","relationCategoryType",i)),s(L.changeLrAccountCommonString("",["flags","relationCategoryPropertyCostList"],(0,d.fromJS)(l))),s(L.changeLrAccountCommonString("ori","propertyCost",""));var u="true"===a[2];s(L.changeLrAccountCommonString("ori","relationBeProject",u)),u&&s(L.getCarrayProjectCardList(o,Y))}},We.map(function(e,t){return c.default.createElement(O,{key:t,value:""+e.uuid+m.TREE_JOIN_STR+e.name+m.TREE_JOIN_STR+e.beProject+m.TREE_JOIN_STR+e.categoryType,projectRange:e.projectRange,propertyCostList:e.propertyCostList},e.name)})),Se?c.default.createElement(o.default,{className:"use-unuse-style lrls-jzsy-box",style:{margin:".1rem 0 0 .2rem"},checked:Ee,checkedChildren:"项目",unCheckedChildren:"项目",onChange:function(){s(Ee?L.changeLrAccountCommonString("ori","carryoverProjectCardList",(0,d.fromJS)([{}])):L.changeLrAccountCommonString("ori","carryoverProjectCardList",(0,d.fromJS)([]))),s(L.changeLrAccountCommonString("ori","usedCarryoverProject",!Ee))}}):"")):null):"",re&&Pe&&Pe.size>1?c.default.createElement("div",{className:"edit-running-modal-list-item",style:{display:("STATE_XC_FF"===q||"STATE_XC_JN"===q||"STATE_XC_DJ"===q)&&ue.filter(function(e){return e.get("beSelect")}).size>=1?"none":""}},c.default.createElement("label",null,"费用性质："),c.default.createElement("div",null,c.default.createElement(r.default,{title:p.projectTip[Te]||"",placement:"topLeft"},c.default.createElement(l.default,{disabled:Ke,value:p.propertyName[Te],onChange:function(e){s(L.changeLrAccountCommonString("ori","propertyCost",e))}},Pe.map(function(e,t){var a=p.propertyName[e];return c.default.createElement(O,{key:t,value:e},a)}))))):"",re&&Se&&Ee&&"STATE_YYZC_GJ"===q?c.default.createElement("div",{className:"project-content-area"},c.default.createElement("div",{className:"edit-running-modal-list-item"},c.default.createElement("label",null,"项目："),c.default.createElement("div",{className:"chosen-right"},c.default.createElement(l.default,{combobox:!0,showSearch:!0,value:(0,p.projectCodeTest)(Ze.getIn([0,"code"]))+" "+(Ze.getIn([0,"name"])?Ze.getIn([0,"name"]):""),onChange:function(e,t){var a=e.split(m.TREE_JOIN_STR),n=a[0],r=a[1],i=a[2],o=t.props.projectProperty;switch(s(L.changeLrAccountCommonString("ori","carryoverProjectCardList",(0,d.fromJS)([{cardUuid:n,name:i,code:r,projectProperty:o}]))),r){case"ASSIST":s(L.changeLrAccountCommonString("ori","propertyCost","XZ_FZSCCB"));break;case"MAKE":s(L.changeLrAccountCommonString("ori","propertyCost","XZ_ZZFY"));break;case"INDIRECT":s(L.changeLrAccountCommonString("ori","propertyCost","XZ_JJFY"));break;case"MECHANICAL":s(L.changeLrAccountCommonString("ori","propertyCost","XZ_JXZY"));break;default:"XZ_PRODUCE"===o?s(L.changeLrAccountCommonString("ori","propertyCost","XZ_SCCB")):"XZ_CONSTRUCTION"===o?s(L.changeLrAccountCommonString("ori","propertyCost","XZ_HTCB")):"XZ_FINANCE"!==Te&&"XZ_MANAGE"!==Te&&"XZ_SALE"!==Te&&o&&Te&&s(L.changeLrAccountCommonString("ori","propertyCost",Pe.get(0)))}}},He&&(0,p.CommonProjectTest)((0,d.fromJS)({categoryType:_e}),He).map(function(e,t){return c.default.createElement(O,{key:t,value:""+e.get("uuid")+m.TREE_JOIN_STR+e.get("code")+m.TREE_JOIN_STR+e.get("name"),projectProperty:e.get("projectProperty")},(0,p.projectCodeTest)(e.get("code"))+" "+e.get("name"))}))))):null,"modify"===M&&te.size?c.default.createElement(b.default,{title:"成本结转流水：",strongList:te,dispatch:s}):"","modify"!==M||!Be&&!se.size||Oe?"":c.default.createElement(T.default,{titleList:["日期","流水号","摘要","类型","金额"],strongList:se,modify:"modify"===M,dispatch:s,amount:K}))}}]),t}())||n;t.default=A},2582:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=N(a(47)),i=N(a(32)),o=N(a(61)),l=N(a(37)),u=N(a(45)),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(51),a(79),a(38),a(55);var s=N(a(1)),d=a(17),f=a(18),m=(N(a(6)),a(56),N(a(1237))),g=a(127),p=I(a(27)),C=N(a(90)),h=a(22),y=a(101),E=N(a(1520)),S=N(a(2583)),T=N(a(2584)),_=N(a(1521)),v=N(a(1374)),b=N(a(1345)),L=I(a(172));I(a(484));function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function N(e){return e&&e.__esModule?e:{default:e}}var O=u.default.Option,A=(0,d.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showCardModal:!1,warehouseModal:!1,warehouseCards:{warehouseCardUuid:"",warehouseCardCode:"",warehouseCardName:""},showModal:!1,showPriceModal:!1,inventory:{inventoryUuid:"",type:1,defaultPriceList:[]},unitList:[],unit:(0,f.fromJS)({}),drop:!1,serialModal:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),c(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.stockCardList,c=t.carryoverCardList,d=t.stockList,I=t.warehouseList,N=t.oriState,A=t.stockRange,R=t.amount,w=t.taxRate,P=t.showSingleModal,U=t.showStockModal,M=t.MemberList,k=t.selectThingsList,j=t.thingsList,J=t.selectedKeys,D=t.categoryTypeObj,x=t.currentCardType,F=t.insertOrModify,H=t.enableWarehouse,B=t.openQuantity,G=t.selectList,Y=t.selectItem,Z=t.oriDate,z=t.pageCount,W=t.batchList,K=(t.serialList,t.oriUuid),X=this.state,V=X.showCardModal,Q=X.warehouseModal,q=X.warehouseCards,$=(X.showall,X.showPriceModal),ee=X.inventory,te=X.unitList,ae=X.unit,ne=(X.drop,X.serialModal),re=ee.defaultPriceList,ie="";return ie=H&&B?"inventory-content-area-warehouse":H&&!B?"inventory-content-area-warehouse-no-open":!H&&B?"inventory-content-area":"inventory-content-area-no-open",s.default.createElement("div",{className:"inventory-content"},s.default.createElement("div",{className:ie,style:{marginBottom:"10px"}},s.default.createElement("span",null,"存货"),H?s.default.createElement("span",null,s.default.createElement("span",{style:{marginRight:"5px"}},"仓库"),s.default.createElement(C.default,{type:"editConfig",onClick:function(){e.setState({warehouseModal:!0})}})):"",B?s.default.createElement("span",null,"数量"):"",B?s.default.createElement("span",null,"单价"):"",s.default.createElement("span",null,"金额"),s.default.createElement("span",null)),n.map(function(t,r){var i,E="",S=t.get("assistList")||(0,f.fromJS)([]),v=t.get("serialList")||(0,f.fromJS)([]),R=n.filter(function(e,a){return e.get("cardUuid")===t.get("cardUuid")&&a!==r}).toJS().reduce(function(e,t){return e.concat(t.serialList||[])},[]);if(t.get("cardUuid")&&("true"===t.get("isOpenedQuantity")||!0===t.get("isOpenedQuantity"))){var P="acBusinessIncome"===D?"销售":"采购",U=d.find(function(e){return t.get("cardUuid")===e.get("uuid")})||(0,f.fromJS)({}),M=U.get("unit"),k=U.getIn(["unit","unitList"]),j=U.get("unitPriceList")||(0,f.fromJS)([]),J=j.find(function(e){return e.get("unitUuid")===t.get("unitUuid")})||(0,f.fromJS)({}),x=J.get("defaultPrice");J.get("quantity");E=x?s.default.createElement("span",null,t.get("warehouseCardUuid")&&t.get("cardUuid")&&t.get("showQuantity")?"仓库数量："+(0,h.formatFour)(t.get("currentQuantity")):"",t.get("warehouseCardUuid")&&t.get("cardUuid")&&t.get("showQuantity")?s.default.createElement("br",null):"","默认"+P+"价："+(0,h.formatFour)(x)+"元/"+t.get("unitName"),s.default.createElement("br",null),s.default.createElement("p",{className:"tool-high-light",onClick:function(){e.setState({showPriceModal:!0,inventory:{inventoryUuid:t.get("cardUuid"),type:"acBusinessIncome"===D?2:1,defaultPriceList:j.toJS().map(function(e){return{unitUuid:e.unitUuid,name:M.get("uuid")===e.unitUuid?M.get("name"):k.find(function(t){return t.get("uuid")===e.unitUuid}).get("name"),defaultPrice:e.defaultPrice}}),index:r},unitList:k,unit:M})}},"更新")):s.default.createElement("span",{onClick:function(){e.setState({showPriceModal:!0,inventory:{inventoryUuid:t.get("cardUuid"),type:"acBusinessIncome"===D?2:1,defaultPriceList:[{unitUuid:t.get("unitUuid"),name:t.get("unitName")}].concat(j.toJS().map(function(e){return{unitUuid:e.unitUuid,name:M.get("uuid")===e.unitUuid?M.get("name"):k.find(function(t){return t.get("uuid")===e.unitUuid}).get("name"),defaultPrice:e.defaultPrice}})),index:r},unitList:k,unit:M})}},t.get("warehouseCardUuid")&&t.get("cardUuid")&&t.get("showQuantity")?"仓库数量："+(0,h.formatFour)(t.get("currentQuantity")):"",t.get("warehouseCardUuid")&&t.get("cardUuid")&&t.get("showQuantity")?s.default.createElement("br",null):"",s.default.createElement("p",{className:"tool-high-light"},"设置默认",P,"单价"))}return s.default.createElement(o.default,{title:E,placement:"right"},s.default.createElement("div",{key:r,className:ie},s.default.createElement(T.default,{v:t,i:r,stockRange:A,stockCardList:n,oriDate:Z,categoryTypeObj:D,stockList:d,dispatch:a,showModal:function(){return e.setState({showCardModal:!0})},batchList:W,oriState:N,oriUuid:K,insertOrModify:F}),H?s.default.createElement("span",{className:"warehouse-select"},s.default.createElement(g.XfnSelect,{placeholder:"请选择",combobox:!0,showSearch:!0,value:t.get("warehouseCardName")?(t.get("warehouseCardCode")?t.get("warehouseCardCode"):"")+" "+(t.get("warehouseCardName")?t.get("warehouseCardName"):""):void 0,dropdownRender:function(e){return s.default.createElement("div",null,e)},selectId:"warehouse-select"+r,onChange:function(e){var i=e.split(p.TREE_JOIN_STR),o=i[0],l=i[1],u=i[2],s=(t.get("amount"),c.get(r));"insert"===F&&a(L.changeLrAccountCommonString("ori",["carryoverCardList",r],s.set("warehouseCardUuid",o).set("warehouseCardCode",l).set("warehouseCardName",u)));var d=n.toJS().map(function(e,t){return t===r?(e.storeUuid=o,e.warehouseCardUuid=o):e.storeUuid=e.warehouseCardUuid,e});a(L.getStockCardPrice(Z,d,n)),a(L.changeLrAccountCommonString("ori",["stockCardList",r,"warehouseCardUuid"],o)),a(L.changeLrAccountCommonString("ori",["stockCardList",r,"warehouseCardCode"],l)),a(L.changeLrAccountCommonString("ori",["stockCardList",r,"warehouseCardName"],u)),t.getIn(["financialInfo","openSerial"])&&("STATE_YYSR_TS"===N||"STATE_YYZC_GJ"===N?a(L.getSerialList(t,r,N)):(a(L.changeLrAccountCommonString("ori",["stockCardList",r,"quantity"],"")),a(L.changeLrAccountCommonString("ori",["stockCardList",r,"jrOriCardUuid"],"")),a(L.changeLrAccountCommonString("ori",["stockCardList",r,"serialList"],(0,f.fromJS)([]))),a(L.changeLrAccountCommonString("ori",["stockCardList",r,"isModify"],!1))))}},I.map(function(e,t){return s.default.createElement(O,{key:e.get("uuid"),value:""+e.get("uuid")+p.TREE_JOIN_STR+e.get("code")+p.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))}))):"",B?s.default.createElement("span",null,t.getIn(["financialInfo","openSerial"])?s.default.createElement("span",{onClick:function(){if(["STATE_YYSR_XS","STATE_YYZC_TG"].includes(N)){if(H&&!t.get("warehouseCardUuid"))return void l.default.info("请先填写仓库");if(t.getIn(["financialInfo","openBatch"])&&!t.get("batchUuid"))return void l.default.info("请先填写批次");if(t.getIn(["financialInfo","openAssist"])&&(S.some(function(e){return!e.get("propertyName")})||t.getIn(["financialInfo","assistClassificationList"]).size!==S.size))return void l.default.info("请先填写辅助属性")}"modify"!==F||t.get("isModify")?e.setState({serialModal:!0,serialIndex:r}):a(L.getSerialList(t,r,N,function(){return e.setState({serialModal:!0,serialIndex:r})}))},className:t.getIn(["financialInfo","openSerial"])?"serial-count":""},t.get("quantity")>0?t.get("quantity"):"点击输入",s.default.createElement(C.default,{type:"edit-pen"})):(d.find(function(e){return e.get("uuid")===t.get("cardUuid")})||(0,f.fromJS)([])).get("isOpenedQuantity")||JSON.parse(t.get("isOpenedQuantity")||!1)?s.default.createElement(g.InputFour,{placeholder:"输入数量",value:t.get("quantity"),onChange:function(e){(0,h.numberFourTest)(e,function(e){if(a(L.changeLrAccountCommonString("ori",["stockCardList",r,"quantity"],e)),t.get("price")>0){var n=((e||0)*t.get("price")).toFixed(2);a(L.changeLrAccountCommonString("ori",["stockCardList",r,"amount"],n)),a(L.autoCalculateStockAmount()),w&&a(L.changeAccountTaxRate())}})}}):"",(d.find(function(e){return e.get("uuid")===t.get("cardUuid")})||(0,f.fromJS)([])).get("isOpenedQuantity")||JSON.parse(t.get("isOpenedQuantity")||!1)?(i=d.find(function(e){return e.get("uuid")===t.get("cardUuid")})||(0,f.fromJS)([]),s.default.createElement(u.default,{placeholder:"单位",style:{marginLeft:"8px",alignSelf:"flex-end"},dropdownClassName:"auto-width",value:t.get("unitName")?(t.get("unitCode")?t.get("unitCode"):"")+" "+(t.get("unitName")?t.get("unitName"):""):void 0,onChange:function(e){var n=e.split(p.TREE_JOIN_STR),o=n[0],l=n[1];a(L.changeLrAccountCommonString("ori",["stockCardList",r,"unitUuid"],o)),a(L.changeLrAccountCommonString("ori",["stockCardList",r,"unitName"],l));var u=((i.get("unitPriceList")||[]).find(function(e){return e.get("unitUuid")===o})||(0,f.fromJS)({})).get("defaultPrice")||0;if(u&&a(L.changeLrAccountCommonString("ori",["stockCardList",r,"price"],u)),u&&t.get("quantity")>0){var c=((t.get("quantity")||0)*u).toFixed(2);a(L.changeLrAccountCommonString("ori",["stockCardList",r,"amount"],c)),a(L.autoCalculateStockAmount()),w&&a(L.changeAccountTaxRate())}}},i.getIn(["unit","uuid"])?s.default.createElement(O,{key:i.getIn(["unit","uuid"]),value:""+i.getIn(["unit","uuid"])+p.TREE_JOIN_STR+i.getIn(["unit","name"])},i.getIn(["unit","name"])):"",(i.getIn(["unit","unitList"])||[]).map(function(e){return s.default.createElement(O,{key:e.get("uuid"),value:""+e.get("uuid")+p.TREE_JOIN_STR+e.get("name")},e.get("name"))}))):"",ne&&e.state.serialIndex===r?"STATE_YYSR_XS"===N||"STATE_YYZC_TG"===N?s.default.createElement(_.default,{visible:!0,dispatch:a,serialList:e.props.serialList,selectedList:R,curSerialList:v.toJS(),item:t,stockIndex:r,oriUuid:K,taxRate:w,oriState:N,onClose:function(){e.setState({serialModal:!1})}}):s.default.createElement(b.default,{visible:!0,serialList:v,item:t,stockIndex:r,onClose:function(){e.setState({serialModal:!1})},onOk:function(e){if(e.length>100)l.default.info("序列号不能超过100个");else if(a(L.changeLrAccountCommonString("ori",["stockCardList",r,"serialList"],(0,f.fromJS)(e))),a(L.changeLrAccountCommonString("ori",["stockCardList",r,"quantity"],e.length)),a(L.changeLrAccountCommonString("ori",["stockCardList",r,"isModify"],!0)),t.get("price")>0){var n=(e.length*t.get("price")).toFixed(2);a(L.changeLrAccountCommonString("ori",["stockCardList",r,"amount"],n)),a(L.autoCalculateStockAmount()),w&&a(L.changeAccountTaxRate())}}}):""):"",B?s.default.createElement("span",null,(d.find(function(e){return e.get("uuid")===t.get("cardUuid")})||(0,f.fromJS)([])).get("isOpenedQuantity")||JSON.parse(t.get("isOpenedQuantity")||!1)?s.default.createElement(g.InputFour,{placeholder:"请输入单价",value:t.get("price"),onChange:function(e){(0,h.numberFourTest)(e,function(e){if(a(L.changeLrAccountCommonString("ori",["stockCardList",r,"price"],e)),t.get("quantity")>0){var n=t.get("quantity"),i=((e||0)*n).toFixed(2);a(L.changeLrAccountCommonString("ori",["stockCardList",r,"amount"],i)),a(L.autoCalculateStockAmount()),w&&a(L.changeAccountTaxRate())}})}}):""):"",s.default.createElement("span",null,s.default.createElement(m.default,{placeholder:"请输入金额",value:t.get("amount"),onChange:function(e){(0,y.numberTest)(e,function(e){if(a(L.changeLrAccountCommonString("ori",["stockCardList",r,"amount"],e)),a(L.autoCalculateStockAmount()),w&&a(L.changeAccountTaxRate()),t.get("quantity")>0){var n=t.get("quantity"),i=((e||0)/n).toFixed(4);a(L.changeLrAccountCommonString("ori",["stockCardList",r,"price"],parseFloat(i)))}})}})),s.default.createElement("span",null,n.size>1?s.default.createElement(C.default,{type:"bigDel",theme:"outlined",onClick:function(){a(L.deleteStock(n,r,w)),a(L.deleteCarrayover(c,r))}}):"")))}),s.default.createElement("div",{className:"inventory-button"},s.default.createElement(i.default,{onClick:function(){A.size?(a(L.addStock(n,n.size-1)),a(L.addCarrayover(c,n.size-1)),1===n.size&&a(L.changeLrAccountCommonString("ori",["stockCardList",0,"amount"],R))):l.default.info("请在流水设置中选择存货范围")}},s.default.createElement(C.default,{type:"big-plus"}),"添加存货明细"),s.default.createElement(i.default,{onClick:function(){A.size?a(L.getInventoryAllCardList(A,"showStockModal")):l.default.info("请在流水设置中选择存货范围")}},s.default.createElement(C.default,{type:"editPlus"}),"批量添加存货"),s.default.createElement(i.default,{style:{width:88},onClick:function(){A.size?a(L.changeLrAccountCommonString("",["flags","showall"],!0)):l.default.info("请在流水设置中选择存货范围")}},s.default.createElement(C.default,{type:"upload"}),"批量导入")),s.default.createElement(v.default,{showModal:V,closeModal:function(){return e.setState({showCardModal:!1})},dispatch:a,enableWarehouse:H,fromPage:"editRunning"}),s.default.createElement(E.default,{dispatch:a,showSingleModal:P&&"stock"===x,MemberList:M,selectThingsList:k,thingsList:j,selectedKeys:J,title:"选择存货",selectFunc:function(t,n,r){a(L.changeLrAccountCommonString("ori",["stockCardList",e.state.index],(0,f.fromJS)({code:t,name:n,cardUuid:r,amount:e.state.curAmount}))),a(L.changeLrAccountCommonString("ori",["carryoverCardList",e.state.index],(0,f.fromJS)({code:t,name:n,cardUuid:r,amount:e.state.curAmount}))),a(L.changeLrAccountCommonString("",["flags","showSingleModal"],!1))},selectListFunc:function(e,t){a("all"===e?L.getInventoryAllCardList(A,"showSingleModal",!0):L.getInventorySomeCardList(e,t))}}),U?s.default.createElement(S.default,{MemberList:M,selectThingsList:k,thingsList:j,dispatch:a,showModal:U,selectList:G,oriState:N,categoryList:A,selectItem:Y,stockCardList:n,selectedKeys:J,pageCount:z}):"",s.default.createElement(r.default,{visible:Q,title:"批量设置仓库",onCancel:function(){e.setState({warehouseModal:!1})},onOk:function(){var t=q.warehouseCardUuid,r=q.warehouseCardCode,i=q.warehouseCardName,o=c.toJS(),l=n.toJS(),u=(0,f.fromJS)(o.map(function(e){return e.warehouseCardUuid=t,e.warehouseCardCode=r,e.warehouseCardName=i,e})),s=(0,f.fromJS)(l.map(function(e){return e.warehouseCardUuid=t,e.warehouseCardCode=r,e.warehouseCardName=i,e}));"insert"===F&&a(L.changeLrAccountCommonString("ori","carryoverCardList",u)),a(L.changeLrAccountCommonString("ori","stockCardList",s)),a(L.getStockCardPrice(Z,s.toJS().map(function(e){return e.storeUuid=e.warehouseCardUuid,e}),s)),e.setState({warehouseModal:!1,warehouseCards:{}})}},s.default.createElement("div",{style:{display:"flex"}},s.default.createElement("span",{style:{width:"100px",lineHeight:"28px"}},"仓库："),s.default.createElement(u.default,{style:{flex:1},placeholder:"请选择",combobox:!0,showSearch:!0,value:q.warehouseCardUuid?(q.warehouseCardCode||"")+" "+(q.warehouseCardName||""):void 0,onChange:function(t){var a=t.split(p.TREE_JOIN_STR),n=a[0],r=a[1],i=a[2];e.setState({warehouseCards:{warehouseCardUuid:n,warehouseCardCode:r,warehouseCardName:i}})}},I.map(function(e,t){return s.default.createElement(O,{key:e.get("uuid"),value:""+e.get("uuid")+p.TREE_JOIN_STR+e.get("code")+p.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))})))),s.default.createElement(r.default,{width:"480px",visible:$,title:"更新"+{1:"采购",2:"销售"}[ee.type]+"单价",onCancel:function(){e.setState({showPriceModal:!1})},onOk:function(){a(L.saveDefaultPrice(ee,A,N)),e.setState({showPriceModal:!1})}},s.default.createElement("div",null,s.default.createElement("div",{className:"ls-flex-row"},re.map(function(t,a){return s.default.createElement("div",{className:"ls-flex-row-item"},s.default.createElement("label",{className:"ls-flex-row-label"},{1:"默认采购价：",2:"默认销售价："}[ee.type]),s.default.createElement("div",{className:"ls-flex-row-input",style:{display:"flex"}},s.default.createElement(g.InputFour,{style:{width:"221px"},placeholder:"选填，请输入金额",value:t.defaultPrice,onChange:function(t){(0,h.numberFourTest)(t,function(t){ee.defaultPriceList[a].defaultPrice=t,e.setState({inventory:ee})})}}),te.size?s.default.createElement("div",null,s.default.createElement("span",{style:{margin:"0 8px"}},"元/"),s.default.createElement(u.default,{style:{width:"78px"},onChange:function(t){var n=t.split(p.TREE_JOIN_STR),r=n[0],i=n[1];n[2];ee.defaultPriceList[a].name=i,ee.defaultPriceList[a].unitUuid=r,e.setState({inventory:ee})},value:t.name},re.every(function(e){return e.name!==ae.get("name")})?s.default.createElement(O,{key:ae.get("uuid"),value:""+ae.get("uuid")+p.TREE_JOIN_STR+ae.get("name")+p.TREE_JOIN_STR+ae.get("isStandard")},ae.get("name")):"",te.filter(function(e){return re.every(function(t){return t.name!==e.get("name")})}).map(function(e){return s.default.createElement(O,{key:e.get("uuid"),value:""+e.get("uuid")+p.TREE_JOIN_STR+e.get("name")+p.TREE_JOIN_STR+e.get("isStandard")},e.get("name"))}))):ae.get("name")?s.default.createElement("span",{style:{marginLeft:"5px"}},"元/"+ae.get("name")):"",te.size?s.default.createElement("div",{className:"ls-flex-row-content"},re.length<=te.size?s.default.createElement(C.default,{type:"bigPlus",style:1===re.length?{lineHeight:"28px",fontSize:"15px"}:{},onClick:function(){ee.defaultPriceList.push({}),e.setState({inventory:ee})}}):"",re.length>1?s.default.createElement(C.default,{type:"bigDel",onClick:function(){ee.defaultPriceList.splice(a,1),e.setState({inventory:ee})}}):""):""))})))))}}]),t}())||n;t.default=A},2583:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=h(a(47)),i=h(a(1267)),o=h(a(129)),l=h(a(100)),u=h(a(171)),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(1265),a(128),a(99),a(170);var s=h(a(1)),d=a(17),f=a(127),m=C(a(27)),g=a(18),p=C(a(172));C(a(130));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=u.default.TreeNode,S=l.default.Search,T=(0,d.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={searchContent:"",currentPage:1,uuid:"all"},y(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),c(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.MemberList,l=(t.searchCardContent,t.searchList,t.hasSearchContent,t.thingsList),c=(t.selectThingsList,t.selectedKeys),d=t.showModal,C=t.selectItem,h=t.selectList,y=(t.cancel,t.stockCardList),T=(t.oriState,t.categoryList),_=t.pageCount,v=void 0===_?1:_,b=this.state,L=b.searchContent,I=b.currentPage,N=b.level,O=b.uuid,A=b.name,R=C&&C.size||0,w=n?function e(t,a,n){return t&&t.map(function(t,r){return t.childList&&t.childList.length?s.default.createElement(E,{key:""+t.uuid+m.TREE_JOIN_STR+t.name+m.TREE_JOIN_STR+n,title:t.name},e(t.childList,a,n+1)):s.default.createElement(E,{key:""+t.uuid+m.TREE_JOIN_STR+t.name+m.TREE_JOIN_STR+n,title:t.name,checkable:!0})})}(n.toJS(),["全部"],1):"",P=(l.map(function(e){return{string:""+e.get("code")+m.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")}}),l.toJS()),U=P.every(function(e){return h.some(function(t){return t===e.uuid})})&&P.length;return s.default.createElement(r.default,{className:"select-modal",title:"选择存货",visible:d,onCancel:function(){a(p.changeLrAccountCommonString("",["flags","showStockModal"],!1)),a(p.changeLrAccountCommonString("",["flags","selectedKeys"],"")),a(p.changeLrAccountCommonString("",["flags","selectList"],(0,g.fromJS)([]))),a(p.changeLrAccountCommonString("",["flags","selectItem"],(0,g.fromJS)([])))},onOk:function(){a(p.changeLrAccountCommonString("",["flags","showStockModal"],!1)),a(p.changeCommonChargeInvnetory(y,C)),a(p.changeLrAccountCommonString("",["flags","selectedKeys"],"")),a(p.changeLrAccountCommonString("",["flags","selectList"],(0,g.fromJS)([]))),a(p.changeLrAccountCommonString("",["flags","selectItem"],(0,g.fromJS)([])))},width:"800px"},s.default.createElement("div",{className:"lsqc-contacts-card-top"},s.default.createElement("div",{className:"table-tree-container",style:{height:P.length>5?"461px":"249px"}},s.default.createElement(u.default,{defaultExpandAll:!0,onSelect:function(t){if(t[0]){var n=t[0].split(m.TREE_JOIN_STR),r=n[0],i=n[1],o=n[2];"all"===r?(a(p.changeLrAccountCommonString("",["flags","selectedKeys"],"all"+m.TREE_JOIN_STR+"1")),a(p.getInventoryAllCardList(T,"showStockModal",!0,I,""))):(a(p.changeLrAccountCommonString("",["flags","selectedKeys"],""+r+m.TREE_JOIN_STR+i+m.TREE_JOIN_STR+o)),a(p.getInventorySomeCardList(r,o,I,""))),e.setState({searchContent:"",uuid:r,level:o,name:i})}},selectedKeys:[c||"all"+m.TREE_JOIN_STR+"1"]},s.default.createElement(E,{key:"all"+m.TREE_JOIN_STR+"1",title:"全部",checkable:!0}),w)),s.default.createElement(f.TableAll,{className:"contacts-table-right",style:{height:P.length>5?"461px":"249px"}},s.default.createElement("span",{className:"lsqc-serch"},s.default.createElement(S,{placeholder:"搜索",className:"lsqc-serch-input",value:L,onChange:function(t){e.setState({searchContent:t.target.value})},onSearch:function(t){"all"===O?(a(p.changeLrAccountCommonString("",["flags","selectedKeys"],"all"+m.TREE_JOIN_STR+"1")),a(p.getInventoryAllCardList(T,"showStockModal",!0,1,L))):(a(p.changeLrAccountCommonString("",["flags","selectedKeys"],""+O+m.TREE_JOIN_STR+A+m.TREE_JOIN_STR+N)),a(p.getInventorySomeCardList(O,N,1,L))),e.setState({currentPage:1})}})),s.default.createElement("div",{className:"table-title-wrap"},s.default.createElement("ul",{className:"table-title table-title-charge"},s.default.createElement("li",{onClick:function(e){e.stopPropagation(),a(p.chargeItemCheckboxCheckAll(U,P,l))}},s.default.createElement(o.default,{checked:U})),s.default.createElement("li",null,s.default.createElement("span",null,"编号")),s.default.createElement("li",null,s.default.createElement("span",null,"名称")))),s.default.createElement(f.TableBody,{style:{height:l&&l.toJS()>5?"374px":"249px"}},l&&l.toJS().map(function(e){var t=h.indexOf(e.uuid)>-1;e.code,e.name;return s.default.createElement(f.TableItem,{className:"contacts-table-width-charge",key:e.uuid,onClick:function(e){e.stopPropagation()}},s.default.createElement("li",{onClick:function(n){n.stopPropagation(),a(p.chargeItemCheckboxCheck(t,e))}},s.default.createElement(o.default,{checked:t})),s.default.createElement("li",null,e.code),s.default.createElement("li",null,e.name))})),s.default.createElement(f.TablePagination,{size:"small",style:{marginTop:"10px"},currentPage:I,pageCount:v,paginationCallBack:function(t){"all"===O?(a(p.changeLrAccountCommonString("",["flags","selectedKeys"],"all"+m.TREE_JOIN_STR+"1")),a(p.getInventoryAllCardList(T,"showStockModal",!0,I,L))):(a(p.changeLrAccountCommonString("",["flags","selectedKeys"],""+O+m.TREE_JOIN_STR+A+m.TREE_JOIN_STR+N)),a(p.getInventorySomeCardList(O,N,I,L))),e.setState({currentPage:t})}}))),s.default.createElement("div",{className:"charge-chosen-project"},"选择存货：",C&&C.map(function(e){return s.default.createElement(i.default,{closable:!0,onClose:function(t){t.preventDefault(),a(p.chargeItemCheckboxCheck(!0,e.toJS()))}},e.get("code")," ",e.get("name"))})),s.default.createElement("div",{style:{display:R>0?"":"none",margin:"0 0 10px 20px"}},R,"个存货"))}}]),t}())||n;t.default=T},2584:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=L(a(47)),r=L(a(32)),i=L(a(1230)),o=L(a(37)),l=L(a(45)),u=L(a(100)),c=L(a(14)),s=L(a(1256)),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(51),a(1231),a(38),a(55),a(99),a(78),a(1257);var m=a(1),g=L(m),p=(L(a(0)),a(18)),C=(a(56),b(a(27))),h=L(a(6)),y=a(22),E=a(127),S=(L(a(487)),L(a(483))),T=L(a(1363)),_=b(a(484)),v=b(a(172));L(a(1237));function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function L(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var N=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={batchDrop:!1,value:"",focus:!1,batchNumber:"",batchDate:"",expirationDate:"",focusIndex:0,assistModal:!1,asssistName:"",classificationUuid:"",batchModal:!1},n.closeFocus=function(e){var t=e.target||e.srcElement,a=1;if(!(t.className&&t.className.indexOf("ant-modal-wrap")>-1)){for(;t.parentNode&&a<20;){if(t.parentNode.className&&t.parentNode.className.indexOf("inventory-are-for-dom")>-1)return;t=t.parentNode,a++}n.setState({focus:!1,batchDrop:!1})}},n.getCurShelfLife=function(e,t){var a=Date.parse(e),n=Date.parse(t);return n>a?Math.floor((n-a)/864e5):null},n.calculLife=function(e,t){var a=Date.parse(e),n=new Date(a+24*t*3600*1e3);return new y.DateLib(n).toString()},n.openDrop=function(e){n.setState({focus:!0},function(){for(var e=document.getElementsByClassName("inventory-drop-content"),t=0;t<e.length;t++)e[t]&&(e[t].style.display="none");n.nameInput.style.display=""})},I(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,g.default.Component),f(t,[{key:"componentDidMount",value:function(){document.getElementsByTagName("body")[0].addEventListener("click",this.closeFocus)}},{key:"componentWillUnmount",value:function(){document.getElementsByTagName("body")[0].removeEventListener("click",this.closeFocus)}},{key:"render",value:function(){var e=this,t=this.state,a=t.focus,f=t.batchDrop,y=t.batchNumber,b=t.batchDate,L=(t.focusIndex,t.assistModal),I=t.asssistName,N=t.classificationUuid,O=t.batchModal,A=t.expirationDate,R=t.batchIndex,w=this.props,P=w.dispatch,U=w.v,M=w.i,k=w.stockRange,j=w.stockCardList,J=w.oriDate,D=w.categoryTypeObj,x=w.stockList,F=w.batchList,H=void 0===F?(0,p.fromJS)([]):F,B=w.showModal,G=w.oriState,Y=(w.oriUuid,w.insertOrModify),Z="",z=U.get("assistList")||(0,p.fromJS)([]),W=U.getIn(["financialInfo","openBatch"]),K=U.getIn(["financialInfo","openAssist"]),X=U.getIn(["financialInfo","openShelfLife"]),V=U.getIn(["financialInfo","shelfLife"]),Q=U.getIn(["financialInfo","assistClassificationList"])||(0,p.fromJS)([]),q=H.find(function(e){return e.get("batchUuid")===U.get("batchUuid")||e.get("batch")===U.get("batch")})||U||(0,p.fromJS)({}),$=q.get("batch")||U.get("batch")?(q.get("batch")||U.get("batch"))+(X&&q.get("expirationDate")&&"undefined"!==q.get("expirationDate")?"("+q.get("expirationDate")+")":""):void 0;Z=K&&W?(z.some(function(e){return e.get("propertyName")})?z.map(function(e){return e.get("propertyName")}).join():"属性")+" | "+(U.get("batch")?$:"批次"):K||W?K?z.some(function(e){return e.get("propertyName")})?z.map(function(e){return e.get("propertyName")}).join():"属性":U.get("batch")?$:"批次":U.get("code")?(U.get("code")?U.get("code"):"")+" "+(U.get("name")?U.get("name"):""):void 0;var ee={acBusinessIncome:"sale",acBusinessExpense:"purchase"};return g.default.createElement("span",{key:M,className:"inventory-are-for-dom",style:{display:"flex",flexDirection:"column",overflow:(K||W)&&U.get("code")&&a?"visible":"hidden"}},a||!K&&!W?"":g.default.createElement("span",null,U.get("code")+" "+U.get("name")),!K&&!W||a?"":g.default.createElement(E.XfnIcon,{type:"circle-del",className:"inventory-select-circle-del",onClick:function(e){e.preventDefault(),P(v.changeLrAccountCommonString("ori",["carryoverCardList",M],(0,p.fromJS)({}))),P(v.changeLrAccountCommonString("ori",["stockCardList",M],(0,p.fromJS)({})))}}),(K||W)&&a&&U.get("code")?g.default.createElement("div",{style:{position:"relative"}},g.default.createElement(u.default,{value:U.get("code")?(U.get("code")?U.get("code"):"")+" "+(U.get("name")?U.get("name"):""):void 0,onChange:function(){P(v.changeLrAccountCommonString("ori",["carryoverCardList",M],(0,p.fromJS)({}))),P(v.changeLrAccountCommonString("ori",["stockCardList",M],(0,p.fromJS)({})))},onFocus:function(){e.openDrop(M)}}),g.default.createElement(E.XfnIcon,{type:"circle-del",className:"inventory-circle-del",onClick:function(e){e.preventDefault(),P(v.changeLrAccountCommonString("ori",["carryoverCardList",M],(0,p.fromJS)({}))),P(v.changeLrAccountCommonString("ori",["stockCardList",M],(0,p.fromJS)({})))}}),g.default.createElement("div",{className:"inventory-drop-content",style:{display:a?"":"none"},ref:function(t){return e.nameInput=t}},g.default.createElement("div",{style:{display:K?"":"none"}},g.default.createElement("span",null,"属性："),Q.map(function(t,a){return g.default.createElement(l.default,{key:t.get("uuid"),dropdownClassName:"inventory-are-for-dom"+M,value:((z||(0,p.fromJS)([])).find(function(e){return e.get("classificationUuid")===t.get("uuid")})||(0,p.fromJS)({})).get("propertyName")||void 0,dropdownRender:function(a){return g.default.createElement("div",null,a,g.default.createElement(s.default,{style:{margin:"4px 0"}}),g.default.createElement("div",{style:{padding:"4px 8px",cursor:"pointer"},onMouseDown:function(e){return e.preventDefault()},onClick:function(){return e.setState({assistModal:!0,classificationUuid:t.get("uuid")})}},g.default.createElement(c.default,{type:"plus"})," 新增"))},onChange:function(e){var n=e.split(C.TREE_JOIN_STR),r=n[0],i=n[1],o=z.size,l=z.findIndex(function(e){return e.get("classificationUuid")===t.get("uuid")}),u={classificationUuid:t.get("uuid"),classificationName:t.get("name"),propertyUuid:r,propertyName:i};0===o?(P(v.changeLrAccountCommonString("ori",["stockCardList",M,"assistList"],(0,p.fromJS)([u]))),"insert"===Y&&P(v.changeLrAccountCommonString("ori",["carryoverCardList",M,"assistList"],(0,p.fromJS)([u])))):-1===l?(P(v.changeLrAccountCommonString("ori",["stockCardList",M,"assistList",o],(0,p.fromJS)(u))),"insert"===Y&&P(v.changeLrAccountCommonString("ori",["carryoverCardList",M,"assistList",o],(0,p.fromJS)(u)))):(P(v.changeLrAccountCommonString("ori",["stockCardList",M,"assistList",a,"propertyUuid"],r)),"insert"===Y&&P(v.changeLrAccountCommonString("ori",["carryoverCardList",M,"assistList",a,"propertyUuid"],r)),P(v.changeLrAccountCommonString("ori",["stockCardList",M,"assistList",a,"propertyName"],i))),U.getIn(["financialInfo","openSerial"])&&("STATE_YYSR_TS"===G||"STATE_YYZC_GJ"===G?P(v.getSerialList(U,M,G)):(P(v.changeLrAccountCommonString("ori",["stockCardList",M,"quantity"],"")),P(v.changeLrAccountCommonString("ori",["stockCardList",M,"jrOriCardUuid"],"")),P(v.changeLrAccountCommonString("ori",["stockCardList",M,"serialList"],(0,p.fromJS)([]))),P(v.changeLrAccountCommonString("ori",["stockCardList",M,"isModify"],!1))))}},t.get("propertyList").map(function(e){return g.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("name")},e.get("name"))}))})),W?g.default.createElement("div",null,g.default.createElement("span",null,"批次："),g.default.createElement(m.Fragment,null,g.default.createElement(S.default,{showSearch:!0,key:U.get("uuid"),showArrow:!1,placeholder:"请选择/新增批次",dropdownClassName:"inventory-are-for-dom"+M,dropdownRender:function(t){return g.default.createElement("div",null,t,g.default.createElement(s.default,{style:{margin:"4px 0"}}),g.default.createElement("div",{style:{padding:"4px 8px",cursor:"pointer"},onMouseDown:function(e){return e.preventDefault()},onClick:function(){return e.setState({batchModal:!0})}},g.default.createElement(E.XfnIcon,{type:"edit-pen"}),"修改批次信息"))},onDropdownVisibleChange:function(e){e&&P(v.getBatchList(U))},value:$,onChange:function(e){var t=e.split(C.TREE_JOIN_STR),a=t[0],n=t[1]||"",r=t[2];P(v.changeLrAccountCommonString("ori",["stockCardList",M,"batch"],n)),P(v.changeLrAccountCommonString("ori",["stockCardList",M,"batchUuid"],a)),P(v.changeLrAccountCommonString("ori",["stockCardList",M,"expirationDate"],r)),P(v.changeLrAccountCommonString("ori",["carryoverCardList",M,"expirationDate"],r)),P(v.changeLrAccountCommonString("ori",["carryoverCardList",M,"batchUuid"],a)),P(v.changeLrAccountCommonString("ori",["carryoverCardList",M,"batch"],n)),U.getIn(["financialInfo","openSerial"])&&("STATE_YYSR_TS"===G||"STATE_YYZC_GJ"===G?P(v.getSerialList(U,M,G)):(P(v.changeLrAccountCommonString("ori",["stockCardList",M,"quantity"],"")),P(v.changeLrAccountCommonString("ori",["stockCardList",M,"jrOriCardUuid"],"")),P(v.changeLrAccountCommonString("ori",["stockCardList",M,"serialList"],(0,p.fromJS)([]))),P(v.changeLrAccountCommonString("ori",["stockCardList",M,"isModify"],!1))))}},H.filter(function(e){return e.get("canUse")}).map(function(e){return g.default.createElement(Option,{key:e.get("batchUuid"),value:""+e.get("batchUuid")+C.TREE_JOIN_STR+e.get("batch")+C.TREE_JOIN_STR+e.get("expirationDate")},e.get("batch")+(U.getIn(["financialInfo","openShelfLife"])&&e.get("expirationDate")?"("+e.get("expirationDate")+")":""))})),g.default.createElement("span",{className:"add-button",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.setState({batchDrop:!0,batchIndex:M})}},"新增")),g.default.createElement("div",{className:"ls-batch-select-frame",style:{display:f?"":"none"}},g.default.createElement("div",null,g.default.createElement("span",null,g.default.createElement("span",{style:{color:"red"}},"*"),"批次号："),g.default.createElement(u.default,{value:y,className:"inventory-are-for-dom"+M,onChange:function(t){t.preventDefault();/^[0-9a-zA-Z]{0,8}$/.test(t.target.value)?e.setState({batchNumber:t.target.value}):o.default.info("批次只支持输入8位以内的数字或字母")},placeholder:"请输入批次号"})),X?g.default.createElement("div",null,g.default.createElement("span",null,"生产日期："),g.default.createElement(i.default,{placeholder:"请选择生产日期",allowClear:!1,size:"small",dropdownClassName:"inventory-are-for-dom"+M,value:b?(0,h.default)(b):"",onChange:function(t){var a=t.format("YYYY-MM-DD");e.setState({batchDate:a}),!A&&V&&e.setState({expirationDate:e.calculLife(a,V)})}})):"",X?g.default.createElement("div",null,g.default.createElement("span",null,g.default.createElement("span",{style:{color:"red"}},"*"),"截止日期："),g.default.createElement(i.default,{placeholder:"请选择截止日期",allowClear:!1,size:"small",dropdownClassName:"inventory-are-for-dom"+M,value:A?(0,h.default)(A):"",onChange:function(t){var a=t.format("YYYY-MM-DD");e.setState({expirationDate:a})}})):"",X&&b&&A?g.default.createElement("div",null,g.default.createElement("span",null),g.default.createElement("div",null,"("+(this.getCurShelfLife(b,A)?"实际保质期："+this.getCurShelfLife(b,A)+"天":"")+")")):"",g.default.createElement("div",null,g.default.createElement(r.default,{onClick:function(){return e.setState({batchDrop:!1})}},"取消"),g.default.createElement(r.default,{type:"primary",onClick:function(){P(v.insertBatch(y,b,A,U.get("cardUuid"),function(t,a,n){e.setState({batchDrop:!1,batchNumber:"",batchDate:"",expirationDate:""}),P(v.changeLrAccountCommonString("ori",["stockCardList",R,"batch"],t)),P(v.changeLrAccountCommonString("ori",["stockCardList",R,"batchUuid"],a)),P(v.changeLrAccountCommonString("ori",["stockCardList",R,"expirationDate"],n)),P(v.changeLrAccountCommonString("ori",["carryoverCardList",R,"expirationDate"],n)),P(v.changeLrAccountCommonString("ori",["carryoverCardList",R,"batchUuid"],a)),P(v.changeLrAccountCommonString("ori",["carryoverCardList",R,"batch"],t))}))}},"新增")))):""),L?g.default.createElement(n.default,{visible:!0,title:"新增属性",className:"inventory-are-for-dom",onCancel:function(){return e.setState({assistModal:!1})},onOk:function(){var t=Q.findIndex(function(e){return e.get("uuid")===N});P(v.insertAssist(N,I,U.get("cardUuid"),["stockCardList",M,"financialInfo","assistClassificationList",t,"propertyList"],function(){e.setState({assistModal:!1,asssistName:""})}))}},g.default.createElement("div",{style:{display:"flex"}},g.default.createElement("span",{style:{width:"72px",lineHeight:"28px"}},"属性名称："),g.default.createElement(u.default,{value:I,onChange:function(t){t.preventDefault(),e.setState({asssistName:t.target.value})}}))):"",O?g.default.createElement(T.default,{className:"inventory-are-for-dom",visible:!0,onClose:function(){e.setState({batchModal:!1})},onOk:function(t,a,n,r){P(v.modifyBatch(t,a,X?n:"",X?r:"",U.get("cardUuid"),function(){e.setState({batchModal:!1})}))},saveAndNewForbidden:!0,batchList:H,openShelfLife:X,shelfLife:V}):""):g.default.createElement(S.default,{combobox:!0,showSearch:!0,placeholder:"请选择存货",value:Z,onFocus:function(){(W||K)&&e.openDrop(M)},className:K||W?"extra-card":"",dropdownRender:function(e){return g.default.createElement("div",null,e,g.default.createElement(s.default,{style:{margin:"4px 0",display:k.size?"":"none"}}),k.size?g.default.createElement("div",{onMouseDown:function(e){return e.preventDefault()},style:{padding:"8px",cursor:"pointer"},onClick:function(){P(_.beforeRunningAddInventoryCard(B,k,ee[D]))}},g.default.createElement(c.default,{type:"plus"})," 新增存货"):"")},onChange:function(t,a){var n=t.split(C.TREE_JOIN_STR),r=n[0],i=n[1],o=n[2],l=n[3],u=U.get("amount"),c=U.get("warehouseCardUuid"),s=U.get("warehouseCardCode"),f=U.get("warehouseCardName"),m=a.props.financialInfo||(0,p.fromJS)({}),g=m.get("openAssist"),h=m.get("openBatch"),y=j.toJS().map(function(e,t){return t===M?(e.cardUuid=r,e.storeUuid=e.warehouseCardUuid):e.storeUuid=e.warehouseCardUuid,e});P(v.getStockCardPrice(J,y,j.setIn([M,"cardUuid"],r)));var E={cardUuid:r,name:o,code:i,amount:u,isOpenedQuantity:l,warehouseCardUuid:c,warehouseCardCode:s,warehouseCardName:f,financialInfo:m};if(P(v.changeLrAccountCommonString("ori",["carryoverCardList",M],(0,p.fromJS)({cardUuid:r,name:o,code:i,warehouseCardUuid:c,warehouseCardCode:s,warehouseCardName:f,financialInfo:m}))),a.props.priceList&&a.props.priceList.size){var S="",T="";a.props.unit.get("uuid")===a.props.priceList.getIn([0,"unitUuid"])?(T=a.props.unit.get("name"),S=a.props.unit.get("uuid")):a.props.unit.get("unitList").map(function(e){e.get("uuid")===a.props.priceList.getIn([0,"unitUuid"])&&(T=e.get("name"),S=e.get("uuid"))}),P(v.changeLrAccountCommonString("ori",["stockCardList",M],(0,p.fromJS)(d({},E,{price:a.props.priceList.getIn([0,"defaultPrice"]),unitUuid:S,unitName:T}))))}else a.props.unit&&!a.props.unit.get("unitList").size?P(v.changeLrAccountCommonString("ori",["stockCardList",M],(0,p.fromJS)(d({},E,{unitUuid:a.props.unit.get("uuid"),unitName:a.props.unit.get("name")})))):P(v.changeLrAccountCommonString("ori",["stockCardList",M],(0,p.fromJS)(d({},E))));(g||h)&&e.openDrop(M)}},x.map(function(e,t){return g.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("code")+C.TREE_JOIN_STR+e.get("name")+C.TREE_JOIN_STR+e.get("isOpenedQuantity")+C.TREE_JOIN_STR+t,priceList:e.get("unitPriceList"),unit:e.get("unit"),financialInfo:e.get("financialInfo")},e.get("code")+" "+e.get("name"))})))}}]),t}();t.default=N},2585:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=C(a(1267)),r=C(a(129)),i=C(a(100)),o=C(a(14)),l=C(a(32)),u=C(a(47)),c=C(a(171)),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1265),a(128),a(99),a(78),a(51),a(46),a(170);var d=C(a(1)),f=(C(a(0)),a(18)),m=(a(56),p(a(27)),C(a(90)),a(22),C(a(1244)),a(127)),g=p(a(172));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}c.default.TreeNode,u.default.confirm;var y=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={curPage:1,multiModal:!1,curSerialList:n.props.curSerialList||[],serachContent:""},h(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,c=t.close,s=t.closePre,p=t.visible,C=t.serialList,h=t.stockIndex,y=t.onOk,E=t.multiSelectOnok,S=t.item,T=t.taxRate,_=t.selectedList,v=this.state,b=v.curPage,L=v.curSerialList,I=v.serachContent,N=C.filter(function(e){return!I||String(e.serialNumber).indexOf(I)>-1}).filter(function(e,t){return t<20*b&&t>=20*(b-1)}),O=C.filter(function(e){return!I||String(e.serialNumber).indexOf(I)>-1}).length,A=N.every(function(e){return L.some(function(t){return t.serialUuid===e.serialUuid})||_.some(function(t){return t.serialUuid===e.serialUuid})}),R=S.get("assistList")||(0,f.fromJS)([]);return d.default.createElement(u.default,{destroyOnClose:!0,className:"serial-modal lr-serial-modal",width:"480px",visible:p,maskClosable:!1,title:"选择序列号",footer:[d.default.createElement(l.default,{style:L.length?{borderColor:"#fd5458",color:"#fd5458"}:{},disabled:!L.length,onClick:function(){L.length&&u.default.confirm({title:"提示",content:"确认清空当前序列号吗？",onOk:function(){e.setState({curSerialList:[],curPage:1})}})}},"清空"),d.default.createElement(l.default,{onClick:function(){c(),s()}},"取消"),d.default.createElement(l.default,{type:"primary",onClick:function(){if(c(),s(),E)E(L);else{var e=L.filter(function(e){return e.serialNumber});if(a(g.changeLrAccountCommonString("ori",["stockCardList",h,"quantity"],e.length)),a(g.changeLrAccountCommonString("ori",["stockCardList",h,"serialList"],(0,f.fromJS)(e))),S.get("price")>0){var t=(e.length*S.get("price")).toFixed(2);a(g.changeLrAccountCommonString("ori",["stockCardList",h,"amount"],t)),a(g.autoCalculateStockAmount()),T&&a(g.changeAccountTaxRate())}}}},"确定")],onCancel:function(){c(),s()}},d.default.createElement("div",null,d.default.createElement("div",{className:"multi-serial-modal-title"},d.default.createElement("div",null,(S.get("warehouseCardName")?"仓库："+S.get("warehouseCardName")+";":"")+(R.some(function(e){return e.get("propertyName")})?"属性："+R.map(function(e){return e.get("propertyName")}).join():"")+(S.get("batch")?"批次："+S.get("batch"):"")),d.default.createElement("div",null,d.default.createElement(i.default,{value:I,onChange:function(t){e.setState({serachContent:t.target.value,curPage:1})},placeholder:"搜索",suffix:d.default.createElement(o.default,{type:"search"})}))),d.default.createElement("div",{style:{overflow:"hidden"}},d.default.createElement(m.TableAll,{className:"serial-table serial-table-checkbox"},d.default.createElement("div",{className:"table-title-wrap"},d.default.createElement("ul",{className:"serial-table-item serial-table-title table-title",line:2},d.default.createElement("li",{onClick:function(t){t.stopPropagation(),N.forEach(function(e,t){if(A){var a=L.findIndex(function(t){return t.serialNumber===e.serialNumber});L.splice(a,1)}else{if(L.some(function(t){return t.serialNumber===e.serialNumber})||_.some(function(t){return t.serialNumber===e.serialNumber}))return;L.push({serialUuid:e.serialUuid,serialNumber:e.serialNumber})}}),e.setState({curSerialList:L})}},d.default.createElement(r.default,{checked:A})),d.default.createElement("li",null,"序列"),d.default.createElement("li",null,"序列号"))),d.default.createElement(m.TableBody,null,N.map(function(t,a){return d.default.createElement(m.TableItem,{className:"serial-table-item",line:a+1,key:a},d.default.createElement("li",null,d.default.createElement("span",{onClick:function(a){if(a.stopPropagation(),!_.some(function(e){return e.serialUuid===t.serialUuid})){if(L.some(function(e){return e.serialUuid===t.serialUuid})){var n=L.findIndex(function(e){return e.serialUuid===t.serialUuid});L.splice(n,1)}else L.push({serialUuid:t.serialUuid,serialNumber:t.serialNumber});e.setState({curSerialList:L})}},style:{borderRight:0}},d.default.createElement(r.default,{disabled:_.some(function(e){return e.serialUuid===t.serialUuid}),checked:L.some(function(e){return e.serialUuid===t.serialUuid})||_.some(function(e){return e.serialUuid===t.serialUuid})}))),d.default.createElement("li",null,20*(b-1)+a+1),d.default.createElement("li",null,t.serialNumber))})),d.default.createElement("div",{className:"serial-modal-bottom"},d.default.createElement(l.default,{onClick:function(){y(L),c()},type:"primary"},d.default.createElement(o.default,{type:"search"}),"查看已选"),d.default.createElement(m.TablePagination,{size:"small",currentPage:b,pageCount:Math.ceil(O/20),paginationCallBack:function(t){return e.setState({curPage:t})}}))),d.default.createElement("div",{className:"serial-choose"},"选择序列号：",L.map(function(t,a){return d.default.createElement(n.default,{key:a,closable:!0,onClose:function(){L.splice(a,1),e.setState({curSerialList:L})}},t.serialNumber)})),d.default.createElement("div",{style:{marginTop:"10px"}},L.length,"个序列号"))))}}]),t}();t.default=y},2586:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=U(a(47)),l=U(a(61)),u=U(a(14)),c=U(a(89)),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(79),a(78),a(88);var d=U(a(1)),f=U(a(0)),m=a(56),g=a(18);a(1747),a(1583);a(127),P(a(27));var p=U(a(2587)),C=U(a(2588)),h=U(a(2589)),y=U(a(2590)),E=U(a(2591)),S=U(a(2592)),T=U(a(2593)),_=U(a(2595)),v=U(a(2597)),b=U(a(2599)),L=U(a(2600)),I=U(a(2601)),N=U(a(2602)),O=U(a(2607)),A=U(a(2608)),R=U(a(2609)),w=P(a(130));a(52);function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function U(e){return e&&e.__esModule?e:{default:e}}var M=(0,m.connect)(function(e){return e})((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showModal:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this.props,t=(e.allState,e.dispatch),a=e.flags,n=e.paymentType,r=e.SfglTemp,i=e.CommonChargeTemp,s=e.CqzcTemp,f=(e.cardTemp,e.accountList),m=e.disabledBeginDate,P=e.firstDisabledBeginDate,U=e.hideCategoryList,M=e.configPermission,k=e.panes,j=e.homeState,J=e.InternalTransferTemp,D=e.TransferOutTemp,x=e.CostTransferTemp,F=e.StockTemp,H=e.BalanceTemp,B=e.TaxTransferTemp,G=e.StockIntoProjectTemp,Y=e.defaultFlowNumber,Z=e.disabledDate,z=e.insertOrModify,W=e.DepreciationTemp,K=e.InvoicingTemp,X=e.InvoiceAuthTemp,V=e.StockBuildUpTemp,Q=e.ProjectCarryoverTemp,q=e.JzjzsyTemp,$=e.commonCardObj,ee=e.calculateViews,te=e.taxRateTemp,ae=e.memberList,ne=e.thingsList,re=e.runningCategory,ie=e.isCheckOut,oe=e.oriDate,le=e.accountPoundage,ue=e.enableWarehouse,ce=e.needSendRequest,se=e.openQuantity,de=e.batchList,fe=e.serialList,me=(e.URL_POSTFIX,this.state.showModal,null),ge=(0,g.fromJS)({beCertificate:!1});switch(n){case"LB_SFGL":me=d.default.createElement(T.default,{flags:a,SfglTemp:r,dispatch:t,accountList:f,disabledBeginDate:m,firstDisabledBeginDate:P,hideCategoryList:U,configPermission:M,panes:k,homeState:j,insertOrModify:z,calculateViews:ee,memberList:ae,thingsList:ne,paymentType:n,isCheckOut:ie,oriDate:oe,accountPoundage:le,needSendRequest:ce}),ge=r;break;case"LB_GGFYFT":me=d.default.createElement(v.default,{CommonChargeTemp:i,dispatch:t,hideCategoryList:U,disabledBeginDate:m,panes:k,homeState:j,insertOrModify:z,commonCardObj:$,paymentType:n,oriDate:oe,calculateViews:ee}),ge=i;break;case"LB_JZSY":me=d.default.createElement(S.default,{flags:a,CqzcTemp:s,dispatch:t,accountList:f,disabledBeginDate:m,hideCategoryList:U,configPermission:M,insertOrModify:z,panes:k,homeState:j,commonCardObj:$,paymentType:n,oriDate:oe,calculateViews:ee}),ge=s;break;case"LB_JZCB":me=d.default.createElement(_.default,{commonCardObj:$,disabledBeginDate:m,CostTransferTemp:x,calculateViews:ee,dispatch:t,disabledDate:Z,insertOrModify:z,hideCategoryList:U,flags:a,panes:k,homeState:j,runningCategory:re,oriDate:oe,needSendRequest:ce,enableWarehouse:ue,openQuantity:se,batchList:de,serialList:fe}),ge=x;break;case"LB_FPRZ":me=d.default.createElement(C.default,{InvoiceAuthTemp:X,dispatch:t,disabledDate:Z,insertOrModify:z,hideCategoryList:U,panes:k,homeState:j,oriDate:oe,disabledBeginDate:m,calculateViews:ee}),ge=X;break;case"LB_KJFP":me=d.default.createElement(h.default,{InvoicingTemp:K,dispatch:t,disabledDate:Z,taxRateTemp:te,insertOrModify:z,hideCategoryList:U,calculateViews:ee,panes:k,homeState:j,oriDate:oe,disabledBeginDate:m}),ge=K;break;case"LB_ZCWJZZS":me=d.default.createElement(y.default,{TransferOutTemp:D,dispatch:t,disabledDate:Z,insertOrModify:z,hideCategoryList:U,panes:k,homeState:j,oriDate:oe,calculateViews:ee}),ge=D;break;case"LB_ZZ":me=d.default.createElement(p.default,{InternalTransferTemp:J,accountList:f,defaultFlowNumber:Y,dispatch:t,disabledDate:Z,insertOrModify:z,hideCategoryList:U,configPermission:M,isCheckOut:ie,oriDate:oe,accountPoundage:le,calculateViews:ee}),ge=J;break;case"LB_ZJTX":me=d.default.createElement(E.default,{DepreciationTemp:W,defaultFlowNumber:Y,dispatch:t,flags:a,calculateViews:ee,disabledDate:Z,accountList:f,insertOrModify:z,hideCategoryList:U,configPermission:M,commonCardObj:$,oriDate:oe}),ge=W;break;case"LB_CHDB":me=d.default.createElement(b.default,{commonCardObj:$,StockTemp:F,dispatch:t,hideCategoryList:U,homeState:j,insertOrModify:z,paymentType:n,oriDate:oe,disabledDate:Z,calculateViews:ee,enableWarehouse:ue,openQuantity:se,batchList:de,serialList:fe}),ge=F;break;case"LB_CHYE":me=d.default.createElement(L.default,{commonCardObj:$,BalanceTemp:H,dispatch:t,hideCategoryList:U,disabledBeginDate:m,panes:k,homeState:j,insertOrModify:z,paymentType:n,oriDate:oe,disabledDate:Z,calculateViews:ee,enableWarehouse:ue,isOpenQuantity:se,batchList:de,serialList:fe}),ge=H;break;case"LB_JXSEZC":me=d.default.createElement(I.default,{commonCardObj:$,disabledBeginDate:m,TaxTransferTemp:B,calculateViews:ee,dispatch:t,disabledDate:Z,insertOrModify:z,hideCategoryList:U,flags:a,panes:k,homeState:j,runningCategory:re,oriDate:oe,enableWarehouse:ue}),ge=B;break;case"LB_CHZZ":me=d.default.createElement(N.default,{commonCardObj:$,StockBuildUpTemp:V,dispatch:t,hideCategoryList:U,disabledBeginDate:m,panes:k,homeState:j,insertOrModify:z,paymentType:n,oriDate:oe,disabledDate:Z,calculateViews:ee,enableWarehouse:ue,openQuantity:se,batchList:de,serialList:fe}),ge=V;break;case"LB_CHTRXM":me=d.default.createElement(O.default,{commonCardObj:$,disabledBeginDate:m,StockIntoProjectTemp:G,calculateViews:ee,dispatch:t,disabledDate:Z,insertOrModify:z,hideCategoryList:U,flags:a,panes:k,homeState:j,runningCategory:re,oriDate:oe,enableWarehouse:ue,openQuantity:se,batchList:de,serialList:fe}),ge=G;break;case"LB_XMJZ":me=d.default.createElement(A.default,{commonCardObj:$,disabledBeginDate:m,ProjectCarryoverTemp:Q,calculateViews:ee,dispatch:t,disabledDate:Z,insertOrModify:z,hideCategoryList:U,flags:a,panes:k,homeState:j,runningCategory:re,oriDate:oe,enableWarehouse:ue,openQuantity:se,batchList:de,serialList:fe}),ge=Q;break;case"LB_SYJZ":me=d.default.createElement(R.default,{JzjzsyTemp:q,calculateViews:ee,dispatch:t,disabledDate:Z,insertOrModify:z,hideCategoryList:U,oriDate:oe}),ge=q}var pe=ee.get("chooseNumber"),Ce=ee.get("encodeType"),he=ee.get("saveWay"),ye=ee.get("jrIndex");return d.default.createElement("div",{className:"accountConf-modal-list editRunning-CardBody"},d.default.createElement("div",{className:"pcxls-account",style:{display:ge.get("beCertificate")&&"modify"===z?"block":"none"}},"已审核"),me,d.default.createElement(o.default,{visible:"-1"!==pe,title:"选择保存方式",onCancel:function(){t(w.initEncodeType())},onOk:function(){t(w.saveCalculatebusiness(n,he))},okText:"确定",cancelText:"取消"},d.default.createElement("p",{className:"calculate-tips-title"},"流水号：",ye,"号已存在，您可以："),d.default.createElement("div",{className:"save-way-choose",style:{display:"2"===pe?"none":""}},d.default.createElement(c.default,{checked:"1"===Ce,onChange:function(){t(w.changeEditCalculateCommonState("views","encodeType","1"))}},"系统自动编号"),d.default.createElement(l.default,{placement:"top",title:"维持原流水号或自动新增为末尾最新流水编号"},d.default.createElement("span",{className:"question-box"},d.default.createElement(u.default,{type:"question-circle"})))),d.default.createElement("div",{className:"save-way-choose",style:{display:"1"===pe?"none":""}},d.default.createElement(c.default,{checked:"2"===Ce,onChange:function(){t(w.changeEditCalculateCommonState("views","encodeType","2"))}},"插入流水号"),d.default.createElement(l.default,{placement:"top",title:"当前流水号不变，原流水编号将顺次后移"},d.default.createElement("span",{className:"question-box"},d.default.createElement(u.default,{type:"question-circle"}))))))}}]),t}(),r.displayName="CalculateCardbody",r.propTypes={allState:f.default.instanceOf(g.Map),dispatch:f.default.func},n=i))||n;t.default=M},2587:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=w(a(61)),l=w(a(1234)),u=w(a(14)),c=w(a(1256)),s=w(a(100)),d=w(a(37)),f=w(a(45)),m=w(a(1230)),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(79),a(1235),a(78),a(1257),a(99),a(38),a(55),a(1231);var p=w(a(1)),C=a(17),h=w(a(6)),y=a(18),E=a(22),S=(a(127),w(a(483))),T=w(a(1237)),_=R(a(27)),v=w(a(1753)),b=w(a(1296)),L=w(a(1325)),I=a(101),N=R(a(1279)),O=R(a(172)),A=R(a(130));function R(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function w(e){return e&&e.__esModule?e:{default:e}}m.default.MonthPicker;var P=f.default.Option,U=(0,C.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),g(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.InternalTransferTemp,n=(t.defaultFlowNumber,t.dispatch),r=t.disabledDate,i=t.insertOrModify,f=t.hideCategoryList,g=t.configPermission,C=t.accountList,R=t.isCheckOut,w=t.accountPoundage,U=t.calculateViews,M=this.state.showModal,k=this.props.oriDate,j=a.get("oriAbstract"),J=a.get("amount"),D=a.get("jrIndex"),x=a.get("fromAccountName"),F=a.get("toAccountName"),H=a.get("chooseFirstWay"),B=a.get("fromAccountName"),G=a.get("poundage"),Y=G.get("needPoundage"),Z=a.get("needUsedPoundage"),z=a.get("poundageRate"),W=a.get("poundageAmount"),K=0,X=0;H?(K=(0,E.numberCalculate)(J,W),X=J):(K=J,X=(0,E.numberCalculate)(J,W,2,"subtract"));var V=U.get("paymentTypeStr"),Q="InternalTransferTemp";return p.default.createElement("div",{className:"accountConf-modal-list"},"modify"===i?p.default.createElement("div",{className:"edit-running-modal-list-item"},p.default.createElement("label",null,"流水号："),p.default.createElement("div",null,p.default.createElement(T.default,{style:{width:"70px",marginRight:"5px"},value:D,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?n(A.changeEditCalculateCommonState(Q,"jrIndex",e.target.value)):d.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,p.default.createElement("div",{className:"edit-running-modal-list-item"},p.default.createElement("label",null,"日期："),p.default.createElement("div",null,p.default.createElement(m.default,{allowClear:!1,disabledDate:r,value:k?(0,h.default)(k):"",onChange:function(e){var t=e.format("YYYY-MM-DD");n(O.changeLrAccountCommonString("ori","oriDate",t))}}))),p.default.createElement(b.default,{dispatch:n,insertOrModify:i,paymentTypeStr:V,hideCategoryList:f}),p.default.createElement("div",{className:"accountConf-separator"}),p.default.createElement("div",{className:"edit-running-modal-list-item"},p.default.createElement("label",null,"摘要："),p.default.createElement("div",null,p.default.createElement(s.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:j,onChange:function(e){n(A.changeEditCalculateCommonState(Q,"oriAbstract",e.target.value))}}))),p.default.createElement("div",{className:"edit-running-modal-list-item"},p.default.createElement("label",null,"金额："),p.default.createElement("div",null,p.default.createElement(T.default,{value:J,onChange:function(e){(0,I.numberTest)(e,function(e){n(A.changeEditCalculateCommonState(Q,"amount",e));var t=0;if(H){var a=(0,E.numberCalculate)(e,Number(z)/1e3,2,"multiply");t=a>G.get("poundage")&&G.get("poundage")>0?G.get("poundage"):a}else{var r=(0,E.numberCalculate)((0,E.numberCalculate)(e,1+Number(z)/1e3,4,"divide"),Number(z)/1e3,2,"multiply");t=r>G.get("poundage")&&G.get("poundage")>0?G.get("poundage"):r}n(A.changeEditCalculateCommonState(Q,"poundageAmount",t))})}}))),p.default.createElement("div",{className:"edit-running-modal-list-item"},p.default.createElement("label",null,"转出账户："),p.default.createElement("div",{className:"lrls-account-box"},p.default.createElement(S.default,{showSearch:!0,value:x||"",dropdownRender:function(t){return p.default.createElement("div",null,t,p.default.createElement(c.default,{style:{margin:"4px 0"}}),p.default.createElement("div",{style:{padding:"8px",cursor:"pointer"},onMouseDown:function(){g&&(n(N.beforeInsertAccountConf()),e.setState({showModal:!0}))}},p.default.createElement(u.default,{type:"plus"})," 新增账户"))},onSelect:function(e,t){var a=t.props.poundage,r=a.get("poundageRate"),i=0;if(H){var o=(0,E.numberCalculate)(J,Number(r)/1e3,2,"multiply");i=o>a.get("poundage")&&a.get("poundage")>0?a.get("poundage"):o}else{var l=(0,E.numberCalculate)((0,E.numberCalculate)(J,1+Number(r)/1e3,4,"divide"),Number(r)/1e3,2,"multiply");i=l>a.get("poundage")&&a.get("poundage")>0?a.get("poundage"):l}n(A.changeEditCalculateCommonState(Q,"poundageAmount",i)),n(A.changeEditCalculateCommonString("InternalTransfer","poundage",a)),n(A.changeEditCalculateCommonString("InternalTransfer","poundageRate",a.get("poundageRate"))),n(A.changeEditCalculateAccountName("InternalTransfer","fromAccountUuid","fromAccountName",e))}},C.size&&C.getIn([0,"childList"]).map(function(e,t){return p.default.createElement(P,{key:t,value:""+e.get("uuid")+_.TREE_JOIN_STR+e.get("name"),poundage:(0,y.fromJS)({needPoundage:e.get("needPoundage"),poundage:e.get("poundage"),poundageRate:e.get("poundageRate")})},e.get("name"))})))),p.default.createElement("div",{className:"edit-running-modal-list-item"},p.default.createElement("label",null,"转入账户："),p.default.createElement("div",{className:"lrls-account-box"},p.default.createElement(S.default,{showSearch:!0,value:F||"",dropdownRender:function(t){return p.default.createElement("div",null,t,p.default.createElement(c.default,{style:{margin:"4px 0"}}),p.default.createElement("div",{style:{padding:"8px",cursor:"pointer"},onMouseDown:function(){g&&(n(N.beforeInsertAccountConf()),e.setState({showModal:!0}))}},p.default.createElement(u.default,{type:"plus"})," 新增账户"))},onSelect:function(e){n(A.changeEditCalculateAccountName("InternalTransfer","toAccountUuid","toAccountName",e))}},C.size&&C.getIn([0,"childList"]).map(function(e,t){return p.default.createElement(P,{key:t,value:""+e.get("uuid")+_.TREE_JOIN_STR+e.get("name")},e.get("name"))})))),p.default.createElement(v.default,{dispatch:n,accountPoundage:w,someTemp:a,insertOrModify:i,position:"InternalTransfer",chooseFirstWay:H,amount:J,poundageRate:z,otherPage:!0}),Y&&B&&w.get("canUsed")&&"insert"===i&&Z?p.default.createElement("div",{className:"edit-running-modal-list-item edit-calculate-nbzz-amount"},p.default.createElement("label",null),p.default.createElement("div",null,p.default.createElement("p",{className:"nbzz-amount"},p.default.createElement("span",null,p.default.createElement("label",null,"转出金额："),p.default.createElement("span",null,(0,E.formatMoney)(K))),p.default.createElement("span",null,p.default.createElement("label",null,"到账金额："),p.default.createElement("span",null,(0,E.formatMoney)(X))),p.default.createElement("span",null,p.default.createElement("label",null,"手续费："),p.default.createElement("span",null,(0,E.formatMoney)(W)))),p.default.createElement(o.default,{title:"切换手续费计费方式"},p.default.createElement(l.default,{className:"use-unuse-style lend-bg",checked:H,checkedChildren:"",unCheckedChildren:"",style:{width:56},onChange:function(e){var t=0;if(e){var a=(0,E.numberCalculate)(J,Number(z)/1e3,2,"multiply");t=a>G.get("poundage")&&G.get("poundage")>0?G.get("poundage"):a}else{var r=(0,E.numberCalculate)((0,E.numberCalculate)(J,1+Number(z)/1e3,4,"divide"),Number(z)/1e3,2,"multiply");t=r>G.get("poundage")&&G.get("poundage")>0?G.get("poundage"):r}n(A.changeEditCalculateCommonState(Q,"poundageAmount",t)),n(A.changeEditCalculateCommonString("InternalTransfer","chooseFirstWay",e))}})))):null,p.default.createElement(L.default,{dispatch:n,showModal:M,onClose:function(){return e.setState({showModal:!1})},fromPage:"editRunning",isCheckOut:R}),p.default.createElement("div",{className:"accountConf-separator"}))}}]),t}(),r.displayName="Nbzz",n=i))||n;t.default=U},2588:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=L(a(100)),l=L(a(1230)),u=L(a(37)),c=L(a(129)),s=L(a(89)),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(99),a(1231),a(38),a(128),a(88);var f=L(a(1)),m=a(17),g=L(a(6)),p=a(18),C=(b(a(27)),a(22)),h=a(127),y=L(a(1237)),E=L(a(1296)),S=a(101),T=b(a(172)),_=b(a(130)),v=b(a(177));function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function L(e){return e&&e.__esModule?e:{default:e}}var I=s.default.Group,N=(0,m.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),d(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=e.InvoiceAuthTemp.get("uuidList"),a=this.props.InvoiceAuthTemp.get("uuidList");if(t.size!==a.size){var n=0;e.InvoiceAuthTemp.get("invoiceAuthList").forEach(function(a){t.indexOf(a.get("jrJvUuid"))>-1&&("insert"===e.insertOrModify?n+=100*Math.abs(a.get("notHandleAmount")):n=n+100*Math.abs(a.get("notHandleAmount"))+100*Math.abs(a.get("handleAmount")))}),1==t.size&&"modify"===e.insertOrModify||1==t.size&&"insert"===e.insertOrModify?this.props.dispatch(_.changeEditCalculateCommonState("InvoiceAuthTemp","amount",n/100)):0==t.size&&"insert"==e.insertOrModify&&this.props.dispatch(_.changeEditCalculateCommonState("InvoiceAuthTemp","amount",""))}}},{key:"render",value:function(){var e=this,t=this.props,a=t.InvoiceAuthTemp,n=t.dispatch,r=(t.disabledDate,t.insertOrModify),i=(t.allasscategorylist,t.hideCategoryList),d=(t.panes,t.showDrawer,t.calculateViews),m=t.disabledBeginDate,b=a.get("uuidList")||(0,p.fromJS)([]),L=(a.get("authBusinessUuid"),a.get("jrIndex")),N=a.get("billAuthType"),O=this.props.oriDate,A=a.get("oriAbstract"),R=a.get("invoiceAuthList"),w=Number(a.get("amount"))<0?-Number(a.get("amount")):a.get("amount"),P=d.get("paymentTypeStr"),U="InvoiceAuthTemp",M=0,k=0,j=0,J=0,D=0,x="modify"===r,F=function(e,t,a){return t?e&&((0,g.default)(m)>e||e<(0,g.default)(a)):e&&(0,g.default)(m)>e},H=[],B=(0,C.formatDate)().slice(0,10),G=0,Y=!1;R&&R.forEach(function(t){var a=new Date(t.get("oriDate")).getTime();b.indexOf(t.get("jrJvUuid"))>-1&&("insert"===r?M+=100*Math.abs(t.get("notHandleAmount")):M=M+100*Math.abs(t.get("notHandleAmount"))+100*Number(t.get("handleAmount")),k+=t.get("oriAmount"),j=t.get("oriAmount"),J=Math.abs(t.get("notHandleAmount")),D=Math.abs(t.get("handleAmount")),B=G>a?B:t.get("oriDate"),G=new Date(B).getTime(),t.get("beOpened")&&(Y=!0)),H.push(f.default.createElement(h.TableItem,{className:"account-invoice-auth-table-width",key:t.get("jrJvUuid")},f.default.createElement("li",{onClick:function(a){a.stopPropagation(),e.setState({changeAmount:!0}),n(_.selectEditCalculateItem(t.get("jrJvUuid"),U))}},f.default.createElement(c.default,{checked:b.indexOf(t.get("jrJvUuid"))>-1})),f.default.createElement("li",null,t.get("oriDate")),f.default.createElement(h.TableOver,{textAlign:"left",className:"account-flowNumber",onClick:function(e){e.stopPropagation(),n(v.getPreviewRunningBusinessFetch(t,"lrls"))}},f.default.createElement("span",null,t.get("beOpened")?"":t.get("jrIndex")+"号")),f.default.createElement("li",null,f.default.createElement("span",null,t.get("categoryName"))),f.default.createElement("li",null,f.default.createElement("span",null,t.get("oriAbstract"))),f.default.createElement("li",null,f.default.createElement("p",null,t.get("beOpened")?"":(0,C.formatMoney)(t.get("oriAmount"),2,""))),f.default.createElement("li",null,f.default.createElement("p",null,t.get("beOpened")?"":-1===t.get("taxRate")?"**%":(0,C.formatMoney)(t.get("taxRate"),0,"")+"%")),f.default.createElement("li",null,f.default.createElement("p",null,"insert"===r?(0,C.formatMoney)(t.get("notHandleAmount"),2,""):(0,C.formatMoney)(Number(t.get("handleAmount"))+Number(t.get("notHandleAmount")),2,"")))))});var Z=!!b.size&&R.every(function(e,t){return b.indexOf(e.get("jrJvUuid"))>-1}),z="insert"===r?Number(j)*Number(w)/Number(J):Number(j)*Number(w)/Number(J+D);return f.default.createElement("div",{className:"accountConf-modal-list accountConf-modal-list-hidden"},"modify"===r?f.default.createElement("div",{className:"edit-running-modal-list-item"},f.default.createElement("label",null,"流水号："),f.default.createElement("div",null,f.default.createElement(y.default,{style:{width:"70px",marginRight:"5px"},value:L,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?n(_.changeEditCalculateCommonState(U,"jrIndex",e.target.value)):u.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,f.default.createElement("div",{className:"edit-running-modal-list-item"},f.default.createElement("label",null,"日期："),f.default.createElement("div",null,f.default.createElement(l.default,{allowClear:!1,disabledDate:function(e){return x?F(e,x,B):F(e)},value:O?(0,g.default)(O):"",onChange:function(e){var t=e.format("YYYY-MM-DD");"insert"===r?(n(_.getInvoicingList(N,t)),n(T.changeLrAccountCommonString("ori","oriDate",t))):n(T.changeLrAccountCommonString("ori","oriDate",t))}}))),f.default.createElement(E.default,{dispatch:n,insertOrModify:r,paymentTypeStr:P,hideCategoryList:i}),f.default.createElement("div",{className:"edit-running-modal-list-item"},f.default.createElement("label",null),f.default.createElement("div",null,f.default.createElement(I,{value:N,disabled:"modify"===r,onChange:function(e){n(_.changeEditCalculateCommonState(U,"billAuthType",e.target.value)),n(_.changeEditCalculateCommonState(U,"oriState",{BILL_AUTH_TYPE_CG:"STATE_FPRZ_CG",BILL_AUTH_TYPE_TG:"STATE_FPRZ_TG"}[e.target.value])),n(_.changeEditCalculateCommonState(U,"oriAbstract",{BILL_AUTH_TYPE_CG:"增值税专用发票认证",BILL_AUTH_TYPE_TG:"退购红字发票认证"}[e.target.value])),n(_.getInvoicingList(e.target.value,O))}},f.default.createElement(s.default,{key:"a",value:"BILL_AUTH_TYPE_CG"},"采购发票认证"),f.default.createElement(s.default,{key:"b",value:"BILL_AUTH_TYPE_TG"},"退购发票认证")))),f.default.createElement("div",{className:"accountConf-separator"}),f.default.createElement("div",{className:"edit-running-modal-list-item"},f.default.createElement("label",null,"摘要："),f.default.createElement("div",null,f.default.createElement(o.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:A,onChange:function(e){n(_.changeEditCalculateCommonState(U,"oriAbstract",e.target.value))}}))),f.default.createElement("div",{className:"edit-running-modal-list-item"},f.default.createElement("label",null,"BILL_AUTH_TYPE_CG"===N?"认证":"对冲","金额："),f.default.createElement("div",null,f.default.createElement(y.default,{value:b.size>1?M/100:0===b.size?0:w,disabled:b.size>1,onChange:function(e){(0,S.numberTest)(e,function(e){e>M/100?(u.default.info("金额不能大于待开发票税额"),n(_.changeEditCalculateCommonState(U,"amount",""))):n(_.changeEditCalculateCommonState(U,"amount",e))})}}),Y?null:f.default.createElement("span",null,"价税合计：",1==b.size?(0,C.formatMoney)(z):(0,C.formatMoney)(k)))),f.default.createElement("div",{className:"accountConf-separator"}),f.default.createElement("div",{className:"editRunning-detail-title"},f.default.createElement("div",{className:"editRunning-detail-title-top"},"请勾选需要认证的流水发票："),f.default.createElement("div",{className:"editRunning-detail-title-bottom"},f.default.createElement("span",null,"已勾选流水：",b.size,"条"),f.default.createElement("span",null,"待认证税额:",f.default.createElement("span",null,(0,C.formatMoney)(M/100,2,""))))),f.default.createElement(h.TableAll,{className:"editRunning-table"},f.default.createElement(h.TableTitle,{className:"account-invoice-auth-table-width",titleList:["日期","流水号","流水类别","摘要","价税合计","税率","税额"],hasCheckbox:!0,selectAcAll:Z,onClick:function(e){e.stopPropagation(),n(_.selectEditCalculateItemAll(Z,U,"invoiceAuthList"))}}),f.default.createElement(h.TableBody,null,H)))}}]),t}(),r.displayName="Fprz",n=i))||n;t.default=N},2589:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=I(a(61)),l=I(a(1234)),u=I(a(100)),c=I(a(1230)),s=I(a(37)),d=I(a(129)),f=I(a(89)),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(79),a(1235),a(99),a(1231),a(38),a(128),a(88);var g=I(a(1)),p=a(17),C=I(a(6)),h=(a(18),L(a(27)),a(22)),y=a(127),E=I(a(1237)),S=I(a(1296)),T=a(101),_=L(a(172)),v=L(a(177)),b=L(a(130));function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}var N=f.default.Group,O=(0,p.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showSingleJsAmount:0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,g.default.Component),m(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=e.InvoicingTemp.get("uuidList"),a=this.props.InvoicingTemp.get("uuidList");if(t.size!==a.size){var n=0;e.InvoicingTemp.get("invoicingList").forEach(function(a){t.indexOf(a.get("jrJvUuid"))>-1&&("insert"===e.insertOrModify?n+=100*Math.abs(a.get("notHandleAmount")):n=n+100*Math.abs(a.get("notHandleAmount"))+100*Math.abs(a.get("handleAmount")))}),1==t.size&&"modify"===e.insertOrModify||1==t.size&&"insert"===e.insertOrModify?this.props.dispatch(b.changeEditCalculateCommonState("InvoicingTemp","amount",n/100)):0==t.size&&"insert"==e.insertOrModify&&this.props.dispatch(b.changeEditCalculateCommonState("InvoicingTemp","amount",""))}}},{key:"render",value:function(){var e=this,t=this.props,a=t.InvoicingTemp,n=t.dispatch,r=(t.disabledDate,t.insertOrModify),i=t.hideCategoryList,m=(t.panes,t.taxRateTemp),p=t.calculateViews,L=t.disabledBeginDate,I=this.state.showSingleJsAmount;console.log(I);m.get("scale");var O=a.get("uuidList"),A=(a.get("makeOutBusinessUuid"),a.get("jrNumber"),a.get("jrIndex")),R=a.get("billMakeOutType"),w=a.get("isInvoicingAmount"),P=this.props.oriDate,U=a.get("oriAbstract"),M=a.get("invoicingList"),k=Number(a.get("amount"))<0?-Number(a.get("amount")):a.get("amount"),j=p.get("paymentTypeStr"),J="InvoicingTemp",D=0,x=0,F=0,H=0,B=0,G="modify"===r,Y=function(e,t,a){return t?e&&((0,C.default)(L)>e||e<(0,C.default)(a)):e&&(0,C.default)(L)>e},Z=[],z=(0,h.formatDate)().slice(0,10),W=0,K=!1;M&&M.forEach(function(e){var t=new Date(e.get("oriDate")).getTime();O.indexOf(e.get("jrJvUuid"))>-1&&("insert"===r?D+=100*Math.abs(e.get("notHandleAmount")):D=D+100*Math.abs(e.get("notHandleAmount"))+100*Math.abs(e.get("handleAmount")),x+=e.get("oriAmount"),F=e.get("oriAmount"),H=Math.abs(e.get("notHandleAmount")),B=Math.abs(e.get("handleAmount")),z=W>t?z:e.get("oriDate"),W=new Date(z).getTime(),e.get("beOpened")&&(K=!0)),Z.push(g.default.createElement(y.TableItem,{className:"account-invoicing-table-width",key:e.get("jrJvUuid")},g.default.createElement("li",{onClick:function(t){t.stopPropagation(),n(b.selectEditCalculateItem(e.get("jrJvUuid"),J))}},g.default.createElement(d.default,{checked:O.indexOf(e.get("jrJvUuid"))>-1})),g.default.createElement("li",null,e.get("oriDate")),g.default.createElement(y.TableOver,{textAlign:"left",className:"account-flowNumber",onClick:function(t){t.stopPropagation(),n(v.getPreviewRunningBusinessFetch(e,"lrls"))}},g.default.createElement("span",null,e.get("beOpened")?"":e.get("jrIndex")+"号")),g.default.createElement("li",null,g.default.createElement("span",null,e.get("categoryName"))),g.default.createElement("li",null,g.default.createElement("span",null,e.get("oriAbstract"))),g.default.createElement("li",null,g.default.createElement("p",null,e.get("beOpened")?"":(0,h.formatMoney)(e.get("oriAmount"),2,""))),g.default.createElement("li",null,g.default.createElement("p",null,e.get("beOpened")?"":-1===e.get("taxRate")?"**%":(0,h.formatMoney)(e.get("taxRate"),0,"")+"%")),g.default.createElement("li",null,g.default.createElement("p",null,"insert"===r?(0,h.formatMoney)(e.get("notHandleAmount"),2,""):(0,h.formatMoney)(Number(e.get("handleAmount"))+Number(e.get("notHandleAmount")),2,"")))))});var X=!!O.size&&M.every(function(e,t){return O.indexOf(e.get("jrJvUuid"))>-1}),V="insert"===r?Number(F)*Number(k)/Number(H):Number(F)*Number(k)/Number(H+B),Q=O.size>1?x:0===O.size?0:I;return g.default.createElement("div",{className:"accountConf-modal-list accountConf-modal-list-hidden"},"modify"===r?g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,"流水号："),g.default.createElement("div",null,g.default.createElement(E.default,{style:{width:"70px",marginRight:"5px"},value:A,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?n(b.changeEditCalculateCommonState(J,"jrIndex",e.target.value)):s.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,"日期："),g.default.createElement("div",null,g.default.createElement(c.default,{allowClear:!1,disabledDate:function(e){return G?Y(e,G,z):Y(e)},value:P?(0,C.default)(P):"",onChange:function(e){var t=e.format("YYYY-MM-DD");"insert"===r?(n(b.getInvoicingList(R,t)),n(_.changeLrAccountCommonString("ori","oriDate",t))):n(_.changeLrAccountCommonString("ori","oriDate",t))}}))),g.default.createElement(S.default,{dispatch:n,insertOrModify:r,paymentTypeStr:j,hideCategoryList:i}),g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null),g.default.createElement("div",null,g.default.createElement(N,{value:R,disabled:"modify"===r,onChange:function(e){n(b.changeEditCalculateCommonState(J,"billMakeOutType",e.target.value)),n(b.changeEditCalculateCommonState(J,"oriState",{BILL_MAKE_OUT_TYPE_XS:"STATE_KJFP_XS",BILL_MAKE_OUT_TYPE_TS:"STATE_KJFP_TS"}[e.target.value])),n(b.changeEditCalculateCommonState(J,"oriAbstract",{BILL_MAKE_OUT_TYPE_XS:"收入开具发票",BILL_MAKE_OUT_TYPE_TS:"退销开具红字发票"}[e.target.value])),n(b.getInvoicingList(e.target.value,P))}},g.default.createElement(f.default,{key:"a",value:"BILL_MAKE_OUT_TYPE_XS"},"销售开票"),g.default.createElement(f.default,{key:"b",value:"BILL_MAKE_OUT_TYPE_TS"},"退销开票")))),g.default.createElement("div",{className:"accountConf-separator"}),g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,"摘要："),g.default.createElement("div",null,g.default.createElement(u.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:U,onChange:function(e){n(b.changeEditCalculateCommonState(J,"oriAbstract",e.target.value))}}))),g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,w?"开票税额":"价税合计"),g.default.createElement("div",null,w?g.default.createElement(y.XfInput,{autoSelect:!0,disabled:O.size>1,value:O.size>1?D/100:0===O.size?0:k,mode:"amount",placeholder:"",onChange:function(e){(0,T.numberTest)(e,function(e){e>D/100?(s.default.info("金额不能大于待开发票税额"),n(b.changeEditCalculateCommonState(J,"amount",""))):n(b.changeEditCalculateCommonState(J,"amount",e))})}}):g.default.createElement(y.XfInput,{autoSelect:!0,disabled:O.size>1,value:Q,mode:"amount",placeholder:"",onChange:function(t){(0,T.numberTest)(t,function(t){var a=(0,h.numberCalculate)((0,h.numberCalculate)(t,H,2,"multiply"),F,2,"divide");a>D/100?(s.default.info("金额不能大于待处理价税合计"),n(b.changeEditCalculateCommonState(J,"amount","")),e.setState({showSingleJsAmount:""})):(n(b.changeEditCalculateCommonState(J,"amount",a)),e.setState({showSingleJsAmount:t}))})}}),K||!w?null:g.default.createElement("span",null,"价税合计：",1==O.size?(0,h.formatMoney)(V):(0,h.formatMoney)(x)),w?null:g.default.createElement("span",null,"税额：",(0,h.formatMoney)(k))),1===O.size?g.default.createElement(o.default,{title:"切换税额计算方式"},g.default.createElement(l.default,{className:"use-unuse-style lend-bg",checked:w,style:{margin:".1rem 0 0 .2rem"},checkedChildren:"",unCheckedChildren:"",onChange:function(){e.setState({showSingleJsAmount:(0,h.formatMoney)(V)}),n(b.changeEditCalculateCommonState(J,"isInvoicingAmount",!w))}})):null),g.default.createElement("div",{className:"accountConf-separator"}),g.default.createElement("div",{className:"editRunning-detail-title"},g.default.createElement("div",{className:"editRunning-detail-title-top"},"请勾选需要开具发票的流水："),g.default.createElement("div",{className:"editRunning-detail-title-bottom"},g.default.createElement("span",null,"已勾选流水：",O.size,"条"),g.default.createElement("span",null,"待开发票税额:",g.default.createElement("span",null,(0,h.formatMoney)(D/100,2,""))))),g.default.createElement(y.TableAll,{className:"editRunning-table"},g.default.createElement(y.TableTitle,{className:"account-invoicing-table-width",titleList:["日期","流水号","流水类别","摘要","价税合计","税率","税额"],hasCheckbox:!0,selectAcAll:X,onClick:function(e){e.stopPropagation(),n(b.selectEditCalculateItemAll(X,J,"invoicingList"))}}),g.default.createElement(y.TableBody,null,Z)))}}]),t}(),r.displayName="Kjfp",n=i))||n;t.default=O},2590:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=y(a(100)),i=y(a(37)),o=y(a(1230)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(99),a(38),a(1231);var u=y(a(1)),c=a(17),s=y(a(6)),d=(h(a(27)),a(22)),f=a(127),m=(a(18),y(a(1296))),g=h(a(172)),p=h(a(130)),C=h(a(177));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var E=o.default.MonthPicker,S=(0,c.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.TransferOutTemp,a=e.dispatch,n=e.disabledDate,l=e.insertOrModify,c=e.hideCategoryList,h=(e.panes,e.calculateViews),y=(t.get("uuidList"),this.props.oriDate),S=t.get("jrIndex"),T=t.get("oriAbstract"),_=t.get("handleMonth"),v=t.get("transferOutObj"),b=v.get("jrJvVatDtoList"),L=v.get("inputAmount"),I=v.get("inputCount"),N=v.get("outputAmount"),O=v.get("outputCount"),A=h.get("paymentTypeStr");return u.default.createElement("div",{className:"accountConf-modal-list accountConf-modal-list-hidden"},"modify"===l?u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"流水号："),u.default.createElement("div",null,u.default.createElement(NumberInput,{style:{width:"70px",marginRight:"5px"},value:S,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?a(p.changeEditCalculateCommonState("TransferOutTemp","jrIndex",e.target.value)):i.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"日期："),u.default.createElement("div",null,u.default.createElement(o.default,{allowClear:!1,disabledDate:n,value:y?(0,s.default)(y):"",onChange:function(e){var t=e.format("YYYY-MM-DD");a(g.changeLrAccountCommonString("ori","oriDate",t))}}))),u.default.createElement(m.default,{dispatch:a,insertOrModify:l,paymentTypeStr:A,hideCategoryList:c}),u.default.createElement("div",{className:"accountConf-separator"}),u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"摘要："),u.default.createElement("div",null,u.default.createElement(r.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:T,onChange:function(e){a(p.changeEditCalculateCommonState("TransferOutTemp","oriAbstract",e.target.value))}}))),u.default.createElement("div",{className:"accountConf-separator"}),u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",{className:"large-width-label"},"处理税额月份："),u.default.createElement("div",null,u.default.createElement(E,{disabledDate:n,disabled:"modify"===l,value:_?(0,s.default)(_):"",onChange:function(e){var t=e.format("YYYY-MM");a(p.changeEditCalculateCommonState("TransferOutTemp","handleMonth",t)),a(p.getTransferOutList(t))}}))),u.default.createElement("div",{className:"edit-running-modal-list-item"},u.default.createElement("label",null,"未交税额："),u.default.createElement("div",null,(0,d.formatMoney)(N-L,2,""))),u.default.createElement("div",{className:"accountConf-separator"}),u.default.createElement("div",{className:"edit-running-modal-list-item"},"销项税-流水数： ",O,"条； 合计税额： ",(0,d.formatMoney)(N,2,"")),u.default.createElement("div",{className:"edit-running-modal-list-item"},"进项税-流水数： ",I,"条； 合计税额： ",(0,d.formatMoney)(L,2,"")),u.default.createElement(f.TableAll,{className:"lrAccount-table"},u.default.createElement(f.TableTitle,{className:"account-transfer-out-table-width",titleList:["日期","流水号","流水类别","摘要","发票类型","价税合计","税率","税额"],hasCheckbox:!1}),u.default.createElement(f.TableBody,null,b.map(function(e){return u.default.createElement(f.TableItem,{className:"account-transfer-out-table-width",key:e.get("uuid")},u.default.createElement("li",null,e.get("oriDate")),u.default.createElement(f.TableOver,{textAlign:"left",className:"account-flowNumber",onClick:function(t){t.stopPropagation(),a(C.getPreviewRunningBusinessFetch(e,"lrls"))}},u.default.createElement("span",null,e.get("jrIndex")+"号")),u.default.createElement("li",null,u.default.createElement("span",null,e.get("categoryName"))),u.default.createElement("li",null,u.default.createElement("span",null,e.get("oriAbstract"))),u.default.createElement("li",null,u.default.createElement("span",null,"JR_STRONG_STAY_ZCXX"===e.get("pendingStrongType")?"销项税":"进项税")),u.default.createElement("li",null,u.default.createElement("p",null,(0,d.formatMoney)(e.get("oriAmount"),2,""))),u.default.createElement("li",null,u.default.createElement("p",null,(0,d.formatMoney)(e.get("taxRate"),0,"")+"%")),u.default.createElement("li",null,u.default.createElement("p",null,(0,d.formatMoney)(e.get("taxAmount"),2,""))))}))))}}]),t}())||n;t.default=S},2591:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=I(a(100)),l=I(a(61)),u=I(a(1234)),c=I(a(37)),s=I(a(45)),d=I(a(1230)),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(99),a(79),a(1235),a(38),a(55),a(1231);var m=I(a(1)),g=a(17),p=I(a(6)),C=L(a(27)),h=(a(22),a(18)),y=I(a(1237)),E=I(a(1754)),S=I(a(1346)),T=I(a(1296)),_=a(101),v=L(a(172)),b=L(a(130));function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}d.default.MonthPicker;var N=s.default.Option,O=(0,g.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showSingleModal:!1,selectTreeUuid:"all",selectTreeLevel:0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),f(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=(t.flags,t.disabledDate),r=t.insertOrModify,i=t.hideCategoryList,f=(t.configPermission,t.DepreciationTemp),g=(t.defaultFlowNumber,t.calculateViews),L=(t.accountList,t.commonCardObj),I=this.state,O=I.showSingleModal,A=I.selectTreeUuid,R=I.selectTreeLevel,w=this.props.oriDate,P=(f.get("oriState"),f.get("oriAbstract")),U=f.get("amount"),M=f.get("jrIndex"),k=(f.get("fromAccountName"),f.get("toAccountName"),f.get("usedProject")),j=f.get("dealTypeList"),J=f.get("projectCard"),D=f.get("propertyCost"),x=L.get("memberList"),F=L.get("thingsList"),H=L.get("cardPageObj"),B=L.get("selectThingsList")||(0,h.fromJS)([]),G=L.get("selectedKeys"),Y=g.get("dealType"),Z=(g.get("dealCategory"),g.get("projectList")?g.get("projectList"):(0,h.fromJS)([])),z=g.get("projectRange"),W=g.get("beProject"),K=g.get("propertyCostList"),X={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用",XZ_SCCB:"生产成本",XZ_FZSCCB:"辅助生产成本",XZ_ZZFY:"制造费用",XZ_HTCB:"合同成本",XZ_JJFY:"间接费用",XZ_JXZY:"机械作业","":""}[D],V=g.get("paymentTypeStr"),Q="DepreciationTemp";return m.default.createElement("div",{className:"accountConf-modal-list"},"modify"===r?m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"流水号："),m.default.createElement("div",null,m.default.createElement(y.default,{style:{width:"70px",marginRight:"5px"},value:M,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?a(b.changeEditCalculateCommonState(Q,"jrIndex",e.target.value)):c.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"日期："),m.default.createElement("div",null,m.default.createElement(d.default,{allowClear:!1,disabledDate:n,value:w?(0,p.default)(w):"",onChange:function(e){var t=e.format("YYYY-MM-DD");a(v.changeLrAccountCommonString("ori","oriDate",t))}}))),m.default.createElement(T.default,{dispatch:a,insertOrModify:r,paymentTypeStr:V,hideCategoryList:i}),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"处理类别："),m.default.createElement("div",{className:"list-item-box"},m.default.createElement(E.default,{disabled:"modify"===r,treeData:j,value:Y,placeholder:"",parentDisabled:!0,onChange:function(e,t,n){var r=e.split(C.TREE_JOIN_STR),i=r[2].split("+"),o=r[1].split("+"),l="true"===r[4];a(b.changeEditCalculateCommonState("views","dealType",r[0])),a(b.changeEditCalculateCommonState("views","projectRange",i)),a(b.changeEditCalculateCommonState("views","propertyCostList",(0,h.fromJS)(o))),a(b.changeEditCalculateCommonState("views","beProject",l)),a(b.changeEditCalculateCommonState(Q,"projectCard",(0,h.fromJS)({name:"",code:"",cardUuid:"",amount:""}))),a(b.changeEditCalculateCommonState(Q,"propertyCost","")),1===o.length&&a(b.changeEditCalculateCommonState(Q,"propertyCost",o[0])),a(b.changeEditCalculateCommonState(Q,"categoryUuid",r[3])),l&&a(b.getProjectCardList(i,l))}}),Y&&W?m.default.createElement(u.default,{className:"use-unuse-style",style:{marginLeft:".2rem"},checked:k,checkedChildren:"项目",unCheckedChildren:"项目",onChange:function(){a(k?b.changeEditCalculateCommonState(Q,"propertyCost",K.get(0)):b.changeEditCalculateCommonState(Q,"projectCard",(0,h.fromJS)([{name:"",code:"",cardUuid:""}]))),a(b.changeEditCalculateCommonState(Q,"usedProject",!k))}}):"")),K&&K.size>1?m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"费用性质："),m.default.createElement("div",null,m.default.createElement(l.default,{title:{XZ_SCCB:"已选择生产项目",XZ_FZSCCB:'已选择"辅助生产成本"项目',XZ_ZZFY:'已选择"制造费用"项目',XZ_JJFY:'已选择"间接费用"项目',XZ_JXZY:'已选择"机械作业"项目',XZ_HTCB:"已选择施工项目"}[D]||"",placement:"topLeft"},m.default.createElement(s.default,{disabled:"XZ_SCCB"===D||"XZ_FZSCCB"===D||"XZ_ZZFY"===D||"XZ_JJFY"===D||"XZ_JXZY"===D||"XZ_HTCB"===D,value:X,onChange:function(e){a(b.changeEditCalculateCommonState(Q,"propertyCost",e))}},K&&K.size?K.map(function(e,t){var a={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用"}[e];return m.default.createElement(N,{key:t,value:e},a)}):null)))):"",m.default.createElement("div",{className:"calculate-separator"}),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"摘要："),m.default.createElement("div",null,m.default.createElement(o.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:P,onChange:function(e){a(b.changeEditCalculateCommonState(Q,"oriAbstract",e.target.value))}}))),k&&W?m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"项目："),m.default.createElement("div",{className:"chosen-right"},m.default.createElement(s.default,{combobox:!0,showSearch:!0,value:(J&&"COMNCRD"!==J.get("code")&&"ASSIST"!==J.get("code")&&"MAKE"!==J.get("code")&&"INDIRECT"!==J.get("code")&&"MECHANICAL"!==J.get("code")&&J.get("code")?J.get("code"):"")+" "+(J&&J.get("name")?J.get("name"):""),onChange:function(e,t){var n=e.split(C.TREE_JOIN_STR),r=t.props.uuid,i=n[0],o=n[1],l=J.get("amount");switch(a(b.changeEditCalculateCommonState(Q,"projectCard",(0,h.fromJS)({cardUuid:r,name:o,code:i,amount:l}))),i){case"ASSIST":a(b.changeEditCalculateCommonState(Q,"propertyCost","XZ_FZSCCB"));break;case"MAKE":a(b.changeEditCalculateCommonState(Q,"propertyCost","XZ_ZZFY"));break;case"INDIRECT":a(b.changeEditCalculateCommonState(Q,"propertyCost","XZ_JJFY"));break;case"MECHANICAL":a(b.changeEditCalculateCommonState(Q,"propertyCost","XZ_JXZY"));break;default:"XZ_PRODUCE"===t.props.projectProperty?a(b.changeEditCalculateCommonState(Q,"propertyCost","XZ_SCCB")):"XZ_CONSTRUCTION"===t.props.projectProperty?a(b.changeEditCalculateCommonState(Q,"propertyCost","XZ_HTCB")):"XZ_FINANCE"!==D&&"XZ_MANAGE"!==D&&"XZ_SALE"!==D&&D&&a(b.changeEditCalculateCommonState(Q,"propertyCost",K.get(0)))}}},Z.map(function(e,t){return m.default.createElement(N,{key:e.get("uuid"),value:""+e.get("code")+C.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid"),projectProperty:e.get("projectProperty")},("COMNCRD"!==e.get("code")&&"ASSIST"!==e.get("code")&&"MAKE"!==e.get("code")&&"INDIRECT"!==e.get("code")&&"MECHANICAL"!==e.get("code")?e.get("code"):"")+" "+e.get("name"))})),m.default.createElement("div",{className:"chosen-word",onClick:function(){a(b.getProjectAllCardList(z,"showSingleModal",!1,!0,"",!0,!0,!0,!0,1)),e.setState({showSingleModal:!0})}},"选择"))):"",m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"金额："),m.default.createElement("div",null,m.default.createElement(y.default,{value:U,onChange:function(e){(0,_.numberTest)(e,function(e){a(b.changeEditCalculateCommonState(Q,"amount",e))})}}))),m.default.createElement("div",{className:"accountConf-separator"}),m.default.createElement(S.default,{dispatch:a,showSingleModal:O,MemberList:x,selectThingsList:B,thingsList:F,selectedKeys:""===G?["all"+C.TREE_JOIN_STR+"1"]:G,stockCardList:(0,h.fromJS)([J.toJS()]),title:"选择项目",selectFunc:function(t,n){var r=t.code,i=t.name,o=t.projectProperty;switch(a(b.changeEditCalculateCommonState("DepreciationTemp","projectCard",(0,h.fromJS)({cardUuid:n,name:i,code:r,amount:U}))),e.setState({showSingleModal:!1}),r){case"ASSIST":a(b.changeEditCalculateCommonState(Q,"propertyCost","XZ_FZSCCB"));break;case"MAKE":a(b.changeEditCalculateCommonState(Q,"propertyCost","XZ_ZZFY"));break;case"INDIRECT":a(b.changeEditCalculateCommonState(Q,"propertyCost","XZ_JJFY"));break;case"MECHANICAL":a(b.changeEditCalculateCommonState(Q,"propertyCost","XZ_JXZY"));break;default:"XZ_PRODUCE"===o?a(b.changeEditCalculateCommonState(Q,"propertyCost","XZ_SCCB")):"XZ_CONSTRUCTION"===o?a(b.changeEditCalculateCommonState(Q,"propertyCost","XZ_HTCB")):"XZ_FINANCE"!==D&&"XZ_MANAGE"!==D&&"XZ_SALE"!==D&&D&&a(b.changeEditCalculateCommonState(Q,"propertyCost",K.get(0)))}},selectListFunc:function(t,n){a("all"===t?b.getProjectAllCardList(z,"showSingleModal",!1,!0,"",!0,!0,!0,!0,1):b.getProjectSomeCardList(t,n,"",1)),e.setState({selectTreeUuid:t,selectTreeLevel:n})},cancel:function(){e.setState({showSingleModal:!1})},cardPageObj:H,paginationCallBack:function(e){a("all"===A?b.getProjectAllCardList(z,"showSingleModal",!1,!0,"",!0,!0,!0,!0,e):b.getProjectSomeCardList(A,R,"",e))}}))}}]),t}(),r.displayName="CqzcDepreciation",n=i))||n;t.default=O},2592:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=R(a(100)),l=R(a(1234)),u=R(a(1230)),c=R(a(37)),s=R(a(129)),d=R(a(45)),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(99),a(1235),a(1231),a(38),a(128),a(55);var m=R(a(1)),g=a(17),p=A(a(27)),C=a(22),h=a(127),y=a(18),E=R(a(6)),S=R(a(1346)),T=R(a(1296)),_=R(a(1522)),v=R(a(1754)),b=a(101),L=A(a(172)),I=A(a(130)),N=A(a(485)),O=A(a(177));function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function R(e){return e&&e.__esModule?e:{default:e}}var w=d.default.Option,P=(0,g.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showSingleModal:!1,selectTreeUuid:"all",selectTreeLevel:0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),f(t,[{key:"componentDidMount",value:function(){this.props.insertOrModify}},{key:"render",value:function(){var e=this,t=this.props,a=(t.onCancel,t.dispatch),n=(t.showRunningInfo,t.showRunningInfoModal,t.runningInfoModalType,t.modifyRunningModal,t.CqzcTemp),r=t.disabledBeginDate,i=t.flags,f=(t.accountList,t.hideCategoryList),g=(t.configPermission,t.panes,t.commonCardObj),A=t.insertOrModify,R=t.paymentType,P=t.calculateViews,U=this.state,M=U.showSingleModal,k=U.selectTreeUuid,j=U.selectTreeLevel,J=P.get("paymentTypeStr"),D="modify"===A,x=function(e,t,a){return t?e&&((0,E.default)(r)>e||e<(0,E.default)(a)):e&&(0,E.default)(r)>e},F=(i.get("accountType"),n.get("categoryName")),H=n.get("beProject"),B=this.props.oriDate,G=n.get("oriAbstract"),Y=n.get("usedProject"),Z=n.get("categoryUuid"),z=n.get("businessList"),W=n.getIn(["assets","depreciationAmount"]),K=n.get("jrIndex"),X=n.getIn(["assets","originalAssetsAmount"]),V=(n.get("netProfitAmount"),n.get("lossAmount"),n.get("projectCard")?n.get("projectCard"):(0,y.fromJS)([])),Q=n.get("projectRange"),q=n.get("dealTypeList"),$=n.get("projectList"),ee=(n.get("uuidList"),n.get("diffAmount")),te=z.size?z.reduce(function(e,t){return t.get("beSelect")?e+1:e},0):0,ae=z.size?z.reduce(function(e,t){return t.get("beSelect")?e+Number(t.get("cleaningAmount")?t.get("cleaningAmount"):t.get("amount")):e},0):0,ne=z&&z.size&&z.every(function(e){return e.get("beSelect")}),re=g.get("memberList"),ie=g.get("thingsList"),oe=g.get("cardPageObj"),le=g.get("selectThingsList")||(0,y.fromJS)([]),ue=g.get("selectedKeys"),ce=[],se=(0,C.formatDate)().slice(0,10),de=0;return z&&z.size&&z.map(function(e,t){var n=new Date(e.get("oriDate")).getTime();e.get("beSelect")&&(se=de>n?se:e.get("oriDate"),de=new Date(se).getTime()),ce.push(m.default.createElement(h.TableItem,{className:"editRunning-table-jzsy-width",key:e.get("uuid")},m.default.createElement("li",{onClick:function(n){n.stopPropagation(),a(N.changeEditCalculateCommonString("Cqzc",["businessList",t,"beSelect"],!e.get("beSelect"))),a(I.calculateGainForJzsy())}},m.default.createElement(s.default,{checked:e.get("beSelect")})),m.default.createElement("li",null,e.get("oriDate")),m.default.createElement(h.TableOver,{textAlign:"left",className:"account-flowNumber",onClick:function(t){t.stopPropagation(),a(O.getPreviewRunningBusinessFetch(e,"lrls"))}},m.default.createElement("span",null,e.get("jrIndex")+"号")),m.default.createElement("li",null,e.get("categoryName")),m.default.createElement("li",null,e.get("oriAbstract")),m.default.createElement("li",null,m.default.createElement("span",{style:{textAlign:"right"}},(0,C.formatMoney)(Number(e.get("amount")),2,"")))))}),"LB_JZSY"===R?m.default.createElement("div",{className:"accountConf-modal-list accountConf-modal-list-hidden"},"modify"===A?m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"流水号："),m.default.createElement("div",null,m.default.createElement(_.default,{style:{width:"70px",marginRight:"5px"},value:K,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?a(N.changeEditCalculateCommonString("Cqzc","jrIndex",e.target.value)):c.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"日期："),m.default.createElement("div",null,m.default.createElement(u.default,{allowClear:!1,disabledDate:function(e){return D?x(e,D,se):x(e)},value:(0,E.default)(B),onChange:function(e){var t=e.format("YYYY-MM-DD");"modify"===A?a(L.changeLrAccountCommonString("ori","oriDate",t)):(a(L.changeLrAccountCommonString("ori","oriDate",t)),Z&&a(I.getUnprocessedList(t,Z)))}}))),m.default.createElement(T.default,{dispatch:a,insertOrModify:A,paymentTypeStr:J,hideCategoryList:f}),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"处理类别："),m.default.createElement("div",{className:"chosen-right",style:{display:"flex"}},m.default.createElement(v.default,{disabled:"modify"===A,treeData:q,value:F,placeholder:"",parentDisabled:!0,onChange:function(e,t,n){var r=e.split(p.TREE_JOIN_STR),i="true"==r[4];a(I.changeEditCalculateCommonState("CqzcTemp","categoryUuid",r[3])),a(I.changeEditCalculateCommonState("CqzcTemp","categoryName",r[0])),a(I.changeEditCalculateCommonState("CqzcTemp","beProject",i)),a(I.getUnprocessedList(B,r[3]));var o=(0,y.fromJS)([]);!function e(t,a){t.map(function(t){t.get("uuid")===a&&t.get("beProject")?o=t.get("projectRange"):t.get("childList").size&&e(t.get("childList"),a)})}(q.getIn([0,"childList"]),r[3]),o.size?a(I.getJzsyProjectCardList(o)):a(I.changeEditCalculateCommonState("CqzcTemp","beProject",!1))}}),H?m.default.createElement(l.default,{className:"use-unuse-style lrls-jzsy-box",style:{margin:".1rem 0 0 .2rem"},checked:Y,checkedChildren:"项目",unCheckedChildren:"项目",onChange:function(){Y||a(I.changeEditCalculateCommonState("CqzcTemp","projectCard",(0,y.fromJS)([{uuid:"",code:"",name:""}]))),a(I.changeEditCalculateCommonState("CqzcTemp","usedProject",!Y))}}):"")),Y&&H?V.map(function(t,n){return m.default.createElement("div",{key:n,className:"project-content-area",style:V.size>1?{}:{border:"none",marginBottom:"0"}},m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"项目："),m.default.createElement("div",{className:"chosen-right"},m.default.createElement(d.default,{combobox:!0,showSearch:!0,value:("COMNCRD"!==t.get("code")&&t.get("code")?t.get("code"):"")+" "+(t.get("name")?t.get("name"):""),onChange:function(e,t){var n=e.split(p.TREE_JOIN_STR),r=t.props.uuid,i=n[0],o=n[1];a(I.changeEditCalculateCommonState("CqzcTemp","projectCard",(0,y.fromJS)([{cardUuid:r,name:o,code:i}])))}},$&&$.filter(function(e){return"COMNCRD"!==e.get("code")&&"XZ_PRODUCE"!==e.get("projectProperty")&&"XZ_CONSTRUCTION"!==e.get("projectProperty")}).map(function(e,t){return m.default.createElement(w,{key:e.get("uuid"),value:""+e.get("code")+p.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")},("COMNCRD"!==e.get("code")?e.get("code"):"")+" "+e.get("name"))})),m.default.createElement("div",{className:"chosen-word",onClick:function(){a(I.getProjectAllCardList(Q,"showSingleModal",!1,!1,"XZ_LOSS",!0,!0,!0,!0,1)),e.setState({index:n,showSingleModal:!0})}},"选择"))))}):null,m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"摘要："),m.default.createElement("div",null,m.default.createElement(o.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:G,onChange:function(e){a(I.changeEditCalculateCommonState("CqzcTemp","oriAbstract",e.target.value))}}))),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"净"+(ee<0?"收益":"损失")+"金额："),m.default.createElement("div",null,(0,C.formatMoney)(Math.abs(ee)))),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"资产原值："),m.default.createElement("div",null,m.default.createElement(_.default,{value:X,onChange:function(e){(0,b.numberTest)(e,function(e){a(N.changeEditCalculateCommonString("Cqzc",["assets","originalAssetsAmount"],e)),a(I.calculateGainForJzsy())})}}))),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"累计折旧摊销："),m.default.createElement("div",null,m.default.createElement(_.default,{showZero:!0,value:W,onChange:function(e){(0,b.numberTest)(e,function(e){a(N.changeEditCalculateCommonString("Cqzc",["assets","depreciationAmount"],e)),a(I.calculateGainForJzsy())})}}))),m.default.createElement("div",{className:"accountConf-separator"}),m.default.createElement("div",{className:"editRunning-detail-title"},m.default.createElement("div",{className:"editRunning-detail-title-top"},"请勾选需要处理的流水："),m.default.createElement("div",{className:"editRunning-detail-title-bottom"},m.default.createElement("span",null,"已勾选流水：",te,"条"),m.default.createElement("span",null,"处置金额合计：",m.default.createElement("span",null,(0,C.formatMoney)(ae,2,""))))),m.default.createElement(h.TableAll,{className:"editRunning-table"},m.default.createElement(h.TableTitle,{className:"editRunning-table-jzsy-width",titleList:["日期","流水号","流水类别","摘要","金额"],hasCheckbox:!0,selectAcAll:ne,onClick:function(e){e.stopPropagation(),z.every(function(e){return e.get("beSelect")})?z.forEach(function(e,t){return a(N.changeEditCalculateCommonString("Cqzc",["businessList",t,"beSelect"],!1))}):z.forEach(function(e,t){return a(N.changeEditCalculateCommonString("Cqzc",["businessList",t,"beSelect"],!0))}),a(I.calculateGainForJzsy())}}),m.default.createElement(h.TableBody,null,ce)),m.default.createElement(S.default,{dispatch:a,showSingleModal:M,MemberList:re.filter(function(e){return"生产项目"!==e.get("name")&&"施工项目"!==e.get("name")}),thingsList:ie.filter(function(e){return"XZ_PRODUCE"!==e.get("projectProperty")&&"XZ_CONSTRUCTION"!==e.get("projectProperty")&&"COMNCRD"!==e.get("code")}),selectThingsList:le,selectedKeys:""===ue?["all"+p.TREE_JOIN_STR+"1"]:ue,stockCardList:(0,y.fromJS)([V.toJS()]),title:"选择项目",selectFunc:function(t,n){var r=t.code,i=t.name;a(I.changeEditCalculateCommonState("CqzcTemp","projectCard",(0,y.fromJS)([{cardUuid:n,name:i,code:r}]))),e.setState({showSingleModal:!1})},selectListFunc:function(t,n){a("all"===t?I.getProjectAllCardList(Q,"showSingleModal",!1,!1,"XZ_LOSS",!0,!0,!0,!0,1):I.getProjectSomeCardList(t,n,"",1)),e.setState({selectTreeUuid:t,selectTreeLevel:n})},cancel:function(){e.setState({showSingleModal:!1})},cardPageObj:oe,paginationCallBack:function(e){a("all"===k?I.getProjectAllCardList(Q,"showSingleModal",!1,!1,"XZ_LOSS",!0,!0,!0,!0,e):I.getProjectSomeCardList(k,j,"",e))}})):null}}]),t}(),r.displayName="Cqzcjzsy",n=i))||n;t.default=P},2593:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=Z(a(47)),l=Z(a(89)),u=Z(a(14)),c=Z(a(1256)),s=Z(a(1234)),d=Z(a(129)),f=Z(a(61)),m=Z(a(37)),g=Z(a(45)),p=Z(a(70)),C=Z(a(171)),h=Z(a(1230)),y=Z(a(100)),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},S=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(88),a(78),a(1257),a(1235),a(128),a(79),a(38),a(55),a(69),a(170),a(1231),a(99);var T=a(1),_=Z(T),v=a(17),b=a(18),L=Z(a(6)),I=a(22),N=a(127),O=Z(a(90)),A=Y(a(27)),R=a(1310),w=Z(a(2594)),P=Z(a(1520)),U=Z(a(1522)),M=Z(a(1755)),k=Z(a(1296)),j=Z(a(1753)),J=Z(a(1325)),D=Y(a(1279)),x=Y(a(172)),F=Y(a(130)),H=Y(a(485)),B=Y(a(177)),G=a(491);function Y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function Z(e){return e&&e.__esModule?e:{default:e}}function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var W=y.default.Search,K=h.default.RangePicker,X=(C.default.TreeNode,p.default.TabPane,g.default.Option),V=(0,v.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showModal:!1,showDateModal:!1,selectBeginDate:"",selectEndDate:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_.default.Component),S(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.SfglTemp,a=(e.flags,e.dispatch,e.insertOrModify),n=this.props.oriDate,r=(t.get("detail"),"modify"===a);t.get("managerCategoryList");this.props.needSendRequest&&(n&&!r&&this.props.dispatch(F.getContactsCardList(n)),!r&&this.props.dispatch(F.getPayManageList({oriDate:n,categoryUuidList:(0,b.fromJS)([]),cardUuidList:(0,b.fromJS)([]),oriUuid:"",currentCardPage:1})))}},{key:"render",value:function(){var e,t,a=this,n=this.props,r=(n.onCancel,n.dispatch),i=(n.showRunningInfo,n.showRunningInfoModal,n.runningInfoModalType,n.modifyRunningModal,n.SfglTemp),p=n.disabledBeginDate,C=n.firstDisabledBeginDate,S=n.flags,v=n.accountList,Y=n.hideCategoryList,Z=n.configPermission,V=(n.panes,n.memberList),Q=n.thingsList,q=n.insertOrModify,$=n.calculateViews,ee=n.paymentType,te=n.isCheckOut,ae=n.accountPoundage,ne=this.state,re=ne.showModal,ie=ne.showDateModal,oe=ne.selectBeginDate,le=ne.selectEndDate;r(G.editRunningAllActions.changeEditCalculateNeedSendRequest());var ue=$.get("paymentTypeStr"),ce=S.get("selectedKeys"),se=function(e,t,a){return t?e&&((0,L.default)(p)>e||e<(0,L.default)(a)):e&&(0,L.default)(p)>e},de=i.get("oriUuid"),fe=this.props.oriDate,me=i.get("jrIndex"),ge=i.get("oriAbstract"),pe=i.get("beginDate"),Ce=i.get("endDate"),he=(i.get("categoryUuid"),i.get("categoryName"),i.get("categoryUuidList")),ye=(i.get("categoryNameList"),i.get("categoryNameAll")),Ee=i.get("cardUuidList"),Se=(i.get("cardNameList"),i.get("cardNameAll")),Te=(i.get("handleTypeCard"),i.get("handleAmount"),i.get("accountListAmount"),i.get("accountName")),_e=(i.get("amount"),i.get("isModeRunning")),ve=i.get("pageSize"),be=i.get("totalNumber"),Le=$.get("selectList"),Ie=i.get("modifycurrentPage"),Ne=(Ie-1)*ve,Oe=Ie*ve,Ae=(i.get("detail"),"insert"===q?i.get("detail"):i.get("detail").slice(Ne,Oe)),Re=i.get("cardList")?i.get("cardList"):(0,b.fromJS)([]),we=i.get("debitTotal"),Pe=i.get("creditTotal"),Ue=i.get("categoryList"),Me=(i.get("usedCard"),i.get("cardPages")),ke=i.get("currentCardPage"),je=(S.get("issuedate"),"modify"===q),Je=$.get("totalAmount"),De=($.get("indexList"),$.get("selectItem")),xe=i.get("managerCategoryList"),Fe=Number(i.get("handlingAmount"))<0?-Number(i.get("handlingAmount")):i.get("handlingAmount"),He=S.get("showSingleModal"),Be=i.get("runningIndex"),Ge=(i.get("runningState"),i.get("contactsCardRange"),i.get("cardUuid"),i.get("direction"),i.get("flowType"),i.get("moedAmount")),Ye=i.get("beMoed"),Ze=i.get("condition"),ze=i.get("writeOffTypeList"),We=i.get("writeOffType"),Ke=i.get("showDKModal"),Xe=i.get("chooseWriteOffType"),Ve=i.get("unAutomatic"),Qe=i.get("showHXModal"),qe=i.get("oriState"),$e=i.get("oldSelectItem"),et=i.get("usedAccounts"),tt=i.get("accounts"),at=S.get("selectThingsList"),nt=!0;Ae&&Ae.size&&Ae.map(function(e){-1===Le.indexOf(e.get("uuid"))&&(nt=!1)});var rt=[];Re&&Re.size&&Re.forEach(function(e,t){rt.push(_.default.createElement(X,{key:e.get("code"),value:""+e.get("code")+A.TREE_JOIN_STR+e.get("name")+A.TREE_JOIN_STR+e.get("uuid")},e.get("code")+" "+e.get("name")))});var it=[],ot=[],lt=(0,I.formatDate)().slice(0,10),ut=0,ct=!0,st=0,dt=0,ft=0,mt=0,gt=function(e,t,a,n){Math.abs((0,I.numberCalculate)(t,a))>Math.abs(Number(e))?m.default.info("金额不能"+(Number(e)>0?"大于":"小于")+"待处理流水"):n()},pt=function(e,t,a){Math.abs(Number(t))>Math.abs(Number(e))?m.default.info("金额不能"+(Number(e)>0?"大于":"小于")+"待处理流水"):a()};De&&De.size&&De.map(function(e,t){var a=new Date(e.get("oriDate")).getTime();Le.indexOf(e.get("uuid"))>-1&&(lt=ut>a?lt:e.get("oriDate"),ut=new Date(lt).getTime());var n=Le.indexOf(e.get("uuid"))>-1,i=(0,b.fromJS)([]),o=[];xe&&xe.toJS().map(function(t,a){t&&t.uuid===e.get("uuid")&&(o=t.category.childList,i=(0,b.fromJS)(o))});var l=Number(e.get("amount"))<0,u=Number(e.get("amount"))<0;"debit"===e.get("direction")?(st=(0,I.numberCalculate)(st,e.get("amount")),ft=(0,I.numberCalculate)(ft,e.get("handleAmount")),mt=(0,I.numberCalculate)(mt,e.get("moedAmount"))):(dt=(0,I.numberCalculate)(dt,e.get("amount")),ft=(0,I.numberCalculate)(ft,e.get("handleAmount"),2,"subtract"),mt=(0,I.numberCalculate)(mt,e.get("moedAmount"),2,"subtract")),ot.push(_.default.createElement(N.TableItem,{className:!je&&Ye?"running-sfgl-hx-modal-insert":"running-sfgl-hx-modal-modify",key:e.get("uuid"),line:t+1},_.default.createElement("li",null,e.get("oriDate")),_.default.createElement(N.TableOver,{textAlign:"center",className:"account-flowNumber",onClick:function(t){t.stopPropagation(),r(B.getPreviewRunningBusinessFetch(e,"lrls"))}},_.default.createElement("span",null,e.get("jrIndex")?e.get("jrIndex")+"号":"")),_.default.createElement("li",{className:"qichuye"},_.default.createElement("span",{onClick:function(){e.get("beOpened")&&e.get("beCard")&&!xe.getIn([t,"category"])&&r(F.getManagerCategoryList(t,e.get("uuid")))}},e.get("beCard")&&n?_.default.createElement(M.default,{treeData:i,value:e.get("categoryName"),placeholder:"",parentsDisable:!0,treeCheckable:!1,id:"sfgl-select-running",onChange:function(a){r(F.changeBeforeAmount(a,t,e.get("uuid")))}}):_.default.createElement(f.default,{placement:"topLeft",title:e.get("categoryFullName")},e.get("categoryName")))),_.default.createElement("li",{className:"over-dian"},_.default.createElement("span",null,_.default.createElement(f.default,{placement:"topLeft",title:e.get("oriAbstract")},e.get("oriAbstract")))),_.default.createElement("li",null,_.default.createElement("p",null,_.default.createElement(N.Amount,null,"debit"===e.get("direction")?e.get("amount"):"")),_.default.createElement("p",null,_.default.createElement(N.Amount,null,"credit"===e.get("direction")?e.get("amount"):""))),je?_e?_.default.createElement("li",null,_.default.createElement("span",null,_.default.createElement(U.default,{value:e.get("moedAmount"),onChange:function(a){(0,R.numberTest)(a,function(a){pt(e.get("amount"),a,function(){return r(F.changeEditCalculateCommonString("",["views","selectItem",t,"moedAmount"],a))})},l,"金额",u)}}))):_.default.createElement("li",null,_.default.createElement("span",null,_.default.createElement(U.default,{value:e.get("handleAmount"),onChange:function(a){(0,R.numberTest)(a,function(a){pt(e.get("amount"),a,function(){r(F.changeEditCalculateCommonString("",["views","selectItem",t,"handleAmount"],a)),r(F.changeEditCalculateCommonState("SfglTemp","handlingAmount",ft))})},l,"金额",u)}}))):_.default.createElement(T.Fragment,null,_.default.createElement("li",null,_.default.createElement("span",null,_.default.createElement(U.default,{value:e.get("handleAmount"),onChange:function(a){(0,R.numberTest)(a,function(a){gt(e.get("amount"),a,e.get("moedAmount"),function(){return r(F.changeEditCalculateCommonString("",["views","selectItem",t,"handleAmount"],a))})},l,"金额",u)}}))),Ye?_.default.createElement("li",null,_.default.createElement("span",null,_.default.createElement(U.default,{value:e.get("moedAmount"),onChange:function(a){(0,R.numberTest)(a,function(a){gt(e.get("amount"),e.get("handleAmount"),a,function(){return r(F.changeEditCalculateCommonString("",["views","selectItem",t,"moedAmount"],a))})},l,"金额",u)}}))):"")))}),Ae&&Ae.size&&Ae.forEach(function(e,t){var a=Le.indexOf(e.get("uuid"))>-1;!1===e.get("beOpened")&&Le.indexOf(e.get("uuid"))>-1&&(ct=!1);var n=xe.getIn([t,"category"])&&(0,b.fromJS)(xe.getIn([t,"category","childList"]).toJS())||(0,b.fromJS)([]);it.push(_.default.createElement(N.TableItem,{className:"editRunning-table-sfgl-width",key:e.get("uuid"),line:t+1},_.default.createElement("li",{onClick:function(n){n.stopPropagation(),0===Be&&(e.get("beOpened")&&e.get("beCard")&&a&&r(F.changeBeforeAmount(""+A.TREE_JOIN_STR,t,e.get("uuid"))),r(F.accountItemCheckboxCheck(a,e,t)),r(F.accountTotalAmount(!0)))}},_.default.createElement(d.default,{checked:a,disabled:0!==Be})),_.default.createElement("li",null,e.get("oriDate")),_.default.createElement(N.TableOver,{textAlign:"center",className:"account-flowNumber",onClick:function(t){t.stopPropagation(),r(B.getPreviewRunningBusinessFetch(e,"lrls"))}},_.default.createElement("span",null,e.get("jrIndex")?e.get("jrIndex")+"号":"")),_.default.createElement("li",{className:"qichuye"},_.default.createElement("span",{onClick:function(){0===Be&&e.get("beOpened")&&e.get("beCard")&&!xe.getIn([t,"category"])&&r(F.getManagerCategoryList(t,e.get("uuid")))}},e.get("beCard")&&a?_.default.createElement(M.default,{treeData:n,value:e.get("categoryName"),placeholder:"",parentsDisable:!0,treeCheckable:!1,id:"sfgl-select-running",onChange:function(a){r(F.changeBeforeAmount(a,t,e.get("uuid")))}}):_.default.createElement(f.default,{placement:"topLeft",title:e.get("categoryFullName")},e.get("categoryName")))),_.default.createElement("li",{className:"over-dian"},_.default.createElement("span",null,_.default.createElement(f.default,{placement:"topLeft",title:e.get("oriAbstract")},e.get("oriAbstract")))),_.default.createElement("li",{className:"over-dian"},_.default.createElement("span",null,e.get("projectCardCode")?_.default.createElement(f.default,{placement:"topLeft",title:"COMNCRD"!==e.get("projectCardCode")&&"ASSIST"!==e.get("projectCardCode")&&"MAKE"!==e.get("projectCardCode")&&"INDIRECT"!==e.get("projectCardCode")&&"MECHANICAL"!==e.get("projectCardCode")?e.get("projectCardCode")+" "+e.get("projectCardName"):e.get("projectCardName")},"COMNCRD"!==e.get("projectCardCode")&&"ASSIST"!==e.get("projectCardCode")&&"MAKE"!==e.get("projectCardCode")&&"INDIRECT"!==e.get("projectCardCode")&&"MECHANICAL"!==e.get("projectCardCode")?e.get("projectCardCode")+" "+e.get("projectCardName"):e.get("projectCardName")):"")),_.default.createElement("li",null,_.default.createElement("p",null,_.default.createElement(N.Amount,null,"debit"===e.get("direction")?e.get("amount"):"")),_.default.createElement("p",null,_.default.createElement(N.Amount,null,"credit"===e.get("direction")?e.get("amount"):"")))))});var Ct=_.default.createElement("div",{className:"table-bottom-select"},_.default.createElement("p",null,_.default.createElement("span",null,"借方金额合计："),_.default.createElement("span",null,"贷方金额合计：")),_.default.createElement("p",null,_.default.createElement(N.Amount,{showZero:!0},we),_.default.createElement(N.Amount,{showZero:!0},Pe))),ht=je?_e?["日期","流水号","流水类别","摘要","借方金额/贷方金额","抹零金额"]:["日期","流水号","流水类别","摘要","借方金额/贷方金额","核销金额"]:Ye?["日期","流水号","流水类别","摘要","借方金额/贷方金额","核销金额","抹零金额"]:["日期","流水号","流水类别","摘要","借方金额/贷方金额","核销金额"],yt="insert"===q?ke:Ie,Et=tt.reduce(function(e,t){return e+Number(t.get("amount")||0)},0);return"LB_SFGL"===ee?_.default.createElement("div",{className:"accountConf-modal-list accountConf-modal-list-hidden editcate-running-sfgl"},"modify"===q?_.default.createElement("div",{className:"edit-running-modal-list-item"},_.default.createElement("label",null,"流水号："),_.default.createElement("div",null,_.default.createElement(U.default,{style:{width:"70px",marginRight:"5px"},value:me,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?r(F.changeEditCalculateCommonState("SfglTemp","jrIndex",e.target.value)):m.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,_.default.createElement("div",{className:"edit-running-modal-list-item"},_.default.createElement("label",null,"日期："),_.default.createElement("div",null,_.default.createElement(h.default,{allowClear:!1,disabled:0!=Be,disabledDate:function(e){return je&&!ct?se(e,je,lt):ct?(0,L.default)(p)>e:se(e)},value:(0,L.default)(fe),onChange:function(e){var t=e.format("YYYY-MM-DD");r(x.changeLrAccountCommonString("ori","oriDate",t)),"LB_SFGL"===ee&&"modify"===q||(r(F.getContactsCardList(t)),r(F.getPayManageList({oriDate:t,categoryUuidList:he,cardUuidList:Ee,oriUuid:de,currentCardPage:1,condition:"",fromPage:!1,writeOffType:"",beginDate:"",endDate:"",notCheckDate:!0})))}}))),_.default.createElement(k.default,{dispatch:r,insertOrModify:q,paymentTypeStr:ue,hideCategoryList:Y}),_.default.createElement("div",{className:"accountConf-separator"}),_.default.createElement("div",{className:"edit-running-modal-list-item"},_.default.createElement("label",null,"摘要："),_.default.createElement("div",null,_.default.createElement(y.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:ge,onChange:function(e){r(F.changeEditCalculateCommonState("SfglTemp","oriAbstract",e.target.value))}}))),_e?_.default.createElement("div",{className:"edit-running-modal-list-item"},_.default.createElement("label",null,(!Ve&&Je>=0||Ve&&mt>0?"收":"付")+"款抹零："),_.default.createElement("div",null,je&&Ve?_.default.createElement("span",{className:"sfgl-edit-pen",onClick:function(){Le.size?(r(F.changeEditCalculateCommonState("SfglTemp","showHXModal",!0)),r(F.changeEditCalculateCommonState("SfglTemp","oldSelectItem",(0,b.fromJS)(De)))):m.default.info("请勾选待核销流水")}},(0,I.formatMoney)(Ge),_.default.createElement(O.default,{type:"edit-pen"})):_.default.createElement(U.default,{disabled:Ve,value:Ge,onChange:function(e){(0,R.numberTest)(e,function(e){return r(F.changeEditCalculateCommonState("SfglTemp","moedAmount",e))})}})),je?_.default.createElement(f.default,{title:Ve?"勾选流水后,点击金额输入框,逐笔输入核销金额":"勾选流水后,根据流水先后顺序核销"},_.default.createElement(s.default,{className:"use-unuse-style lend-bg",checked:Ve,style:{margin:".1rem 0 0 .2rem"},checkedChildren:"手动核销",unCheckedChildren:"自动核销",onChange:function(){r(F.changeEditCalculateCommonState("SfglTemp","unAutomatic",!Ve))}})):null):_.default.createElement("div",{className:"edit-running-modal-list-item"},_.default.createElement("label",null,(!Ve&&Je>=0||Ve&&ft>0?"收":"付")+"款金额："),_.default.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},1===De.size&&et&&!Ve?_.default.createElement(T.Fragment,null,_.default.createElement("div",{style:{flex:"1"}},(0,I.formatMoney)(Et))):_.default.createElement(T.Fragment,null,je&&Ve?_.default.createElement("span",{className:"sfgl-edit-pen",onClick:function(){Le.size?(r(F.changeEditCalculateCommonState("SfglTemp","showHXModal",!0)),r(F.changeEditCalculateCommonState("SfglTemp","oldSelectItem",(0,b.fromJS)(De)))):m.default.info("请勾选待核销流水")}},(0,I.formatMoney)(Fe),_.default.createElement(O.default,{type:"edit-pen"})):_.default.createElement(U.default,{showZero:!0,disabled:0!=Be||Ve,value:Fe,onChange:function(e){(0,R.numberTest)(e,function(e){return r(F.changeEditCalculateCommonState("SfglTemp","handlingAmount",e))})}}))),je?_.default.createElement(f.default,{title:Ve?"勾选流水后,点击金额输入框,逐笔输入核销金额":"勾选流水后,根据流水先后顺序核销"},_.default.createElement(s.default,{className:"use-unuse-style lend-bg",checked:Ve,style:{margin:".1rem 0 0 .2rem"},checkedChildren:"手动核销",unCheckedChildren:"自动核销",onChange:function(){r(F.changeEditCalculateCommonState("SfglTemp","unAutomatic",!Ve))}})):null,1===De.size?_.default.createElement(f.default,{title:"支持多账户核销单条流水"},_.default.createElement(s.default,{className:"use-unuse-style",style:{marginLeft:".2rem",minWidth:"69px",width:"69px",float:"right"},checked:et,checkedChildren:"多账户",unCheckedChildren:"多账户",onChange:function(e){if(!e&&tt.getIn([0,"accountUuid"])){if("insert"===q){var t=tt.getIn([0,"poundage"]),a=Math.abs(Fe||0)*t.get("poundageRate")/1e3>t.get("poundage")&&t.get("poundage")>0?t.get("poundage"):Math.abs(Fe||0)*t.get("poundageRate")/1e3;r(F.changeEditCalculateCommonString("Sfgl","poundageAmount",a.toFixed(2))),r(F.changeEditCalculateCommonString("Sfgl","poundage",t))}r(F.changeEditCalculateCommonState("SfglTemp","accountUuid",tt.getIn([0,"accountUuid"]))),r(F.changeEditCalculateCommonState("SfglTemp","accountName",tt.getIn([0,"accountName"])))}r(F.changeEditCalculateCommonState("SfglTemp","usedAccounts",e))}})):""),et&&tt.size>1&&1===De.size?_.default.createElement(w.default,{accountList:v,accounts:tt,dispatch:r,isCheckOut:te,accountOnChange:function(e,t){r(F.changeEditCalculateCommonString("Sfgl",["accounts",t],(0,b.fromJS)(e)))},amountOnChange:function(e,t,a){(0,R.numberTest)(e,function(e){if("insert"===q){t.getIn(["poundage","poundage"]),t.getIn(["poundage","poundageRate"]);var n=Math.abs(e||0)*t.getIn(["poundage","poundageRate"])/1e3>t.getIn(["poundage","poundage"])&&-1!==t.getIn(["poundage","poundage"])?t.getIn(["poundage","poundage"]):Math.abs(e||0)*t.getIn(["poundage","poundageRate"])/1e3;r(F.changeEditCalculateCommonString("Sfgl",["accounts",a,"poundageAmount"],(n||0).toFixed(2)))}r(F.changeEditCalculateCommonString("Sfgl",["accounts",a,"amount"],e))})},amountOnFocus:function(e,t,a){var n=Ye?(0,I.numberCalculate)(t,Ge):t;if(!e.get("amount")&&n<Fe)if(Ve){var i=(0,I.decimal)(Number(Fe)-(Number(t)||0));r(F.changeEditCalculateCommonString("Sfgl",["accounts",a,"amount"],i))}else{var o=Ye?(0,I.decimal)(Number(Fe)-(Number(t)||0)-(Number(Ge)||0)):(0,I.decimal)(Number(Fe)-(Number(t)||0));r(F.changeEditCalculateCommonString("Sfgl",["accounts",a,"amount"],o))}},amountOnBlur:function(e){r(F.changeEditCalculateCommonState("SfglTemp","handlingAmount",e))}}):_e?"":_.default.createElement("div",{className:"edit-running-modal-list-item"},_.default.createElement("label",null,"账户："),_.default.createElement("div",{className:"lrls-account-box"},_.default.createElement(g.default,{showSearch:!0,value:Te,dropdownRender:function(e){return _.default.createElement("div",null,e,_.default.createElement(c.default,{style:{margin:"4px 0"}}),_.default.createElement("div",{style:{padding:"8px",cursor:"pointer"},onMouseDown:function(){Z&&(r(D.beforeInsertAccountConf()),a.setState({showModal:!0}))}},_.default.createElement(u.default,{type:"plus"})," 新增账户"))},onSelect:function(e,t){var a=t.props.poundage,n=Math.abs(Fe||0)*a.get("poundageRate")/1e3>a.get("poundage")&&a.get("poundage")>0?a.get("poundage"):Math.abs(Fe||0)*a.get("poundageRate")/1e3;r(F.changeEditCalculateCommonString("Sfgl","poundageAmount",n.toFixed(2))),r(F.changeEditCalculateAccountName("Sfgl","accountUuid","accountName",e)),r(F.changeEditCalculateCommonString("Sfgl","poundage",a))}},v.getIn([0,"childList"]).map(function(e,t){return _.default.createElement(X,{key:t,value:""+e.get("uuid")+A.TREE_JOIN_STR+e.get("name"),poundage:(0,b.fromJS)({needPoundage:e.get("needPoundage"),poundage:e.get("poundage"),poundageRate:e.get("poundageRate")})},e.get("name"))})))),!Ve&&Je>=0||Ve&&ft>0?_.default.createElement(j.default,{dispatch:r,accountPoundage:ae,someTemp:i,insertOrModify:q,accounts:tt,needAccount:et&&1===De.size,position:"Sfgl",otherPage:!0}):"",je?null:_.default.createElement("div",{className:"accountConf-separator"}),je?"":_.default.createElement("div",{className:"edit-running-modal-list-item"},_.default.createElement("span",{style:{marginRight:"10px"}},_.default.createElement(d.default,{checked:Ye,onChange:function(e){if(r(F.changeEditCalculateCommonState("SfglTemp","beMoed",!Ye)),!1===e.target.checked){r(F.changeEditCalculateCommonState("SfglTemp","moedAmount",""));var t=[];De&&De.size&&De.toJS().map(function(e,a){t.push(E({},e,{moedAmount:""}))}),r(F.changeEditCalculateCommonState("views","selectItem",(0,b.fromJS)(t)))}}})),_.default.createElement("label",{className:"large-width-label"},"应"+(Ve?mt>=0?"收":"付":Je>=0?"收":"付")+"抹零")),!je&&Ye?_.default.createElement("div",{className:"edit-running-modal-list-item"},_.default.createElement("label",null,"抹零金额："),_.default.createElement("div",null,_.default.createElement(U.default,{disabled:Ve,value:Ge,onChange:function(e){(0,R.numberTest)(e,function(e){return r(F.changeEditCalculateCommonState("SfglTemp","moedAmount",e))})}}))):"",je?"":_.default.createElement(T.Fragment,null,_.default.createElement("div",{className:"accountConf-separator"}),_.default.createElement("div",{className:"edit-running-modal-list-item"},_.default.createElement("label",null,"核销"+(ft>0?"收款":"付款")+"金额：",Ve?_.default.createElement("span",{className:"sfgl-edit-pen",onClick:function(){Le.size?(r(F.changeEditCalculateCommonState("SfglTemp","showHXModal",!0)),r(F.changeEditCalculateCommonState("SfglTemp","oldSelectItem",(0,b.fromJS)(De)))):m.default.info("请勾选待核销流水")}},De&&De.size?(0,I.numberCalculate)(Math.abs(ft),Math.abs(Ge)):"点击输入",_.default.createElement(O.default,{type:"edit-pen"})):_.default.createElement("span",null,1===De.size&&et?(0,I.numberCalculate)(Et,Ge):(0,I.numberCalculate)(Fe,Ge)," ")," "),_.default.createElement("div",null),_.default.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},_.default.createElement(f.default,{title:Ve?"勾选流水后,点击金额输入框,逐笔输入核销金额":"勾选流水后,根据流水先后顺序核销"},_.default.createElement(s.default,{className:"use-unuse-style lend-bg",checked:Ve,style:{margin:".1rem 0 0 .2rem"},checkedChildren:"手动核销",unCheckedChildren:"自动核销",onChange:function(e){r(F.changeEditCalculateCommonState("SfglTemp","unAutomatic",e)),e&&r(F.changeEditCalculateCommonState("SfglTemp","handlingAmount",ft))}}))))),_.default.createElement("div",{className:"accountConf-separator"}),_.default.createElement("div",{id:"sfgl-select-running"},_.default.createElement("div",{className:"editRunning-detail-title-no-select"},De.size>0?_.default.createElement("div",{className:"editRunning-detail-title-bottom"},_.default.createElement("span",null,"已勾选流水：",De.size,"条"),_.default.createElement("span",null,"待核销"+(Je>=0?"收":"付")+"款金额：",_.default.createElement("span",null,Je?Math.abs(Je).toFixed(2):"0.00"))):_.default.createElement("div",{className:"editRunning-detail-title-top"},"请勾选需要核销的流水：")),_.default.createElement(N.TableAll,{className:"editRunning-table",type:"amountYeb"},"insert"===q?_.default.createElement("div",{className:"sfgl-table-top-select"},_.default.createElement(M.default,(z(e={showSearch:!0,disabled:je,treeData:Ue.getIn([0,"childList"])&&Ue.getIn([0,"childList"]).size?Ue.getIn([0,"childList"]):(0,b.fromJS)([]),value:ye.toJS(),placeholder:"",parentsDisable:!1,treeCheckable:!0,treeCheckStrictly:!0,chooseAll:!0},"placeholder","筛选流水类别..."),z(e,"id","sfgl-select-running"),z(e,"size","small"),z(e,"onChange",function(e){r(F.changeEditCalculateCommonState("SfglTemp","categoryNameAll",(0,b.fromJS)(e)));var t=[],a=[];e&&e.forEach(function(e){var n=e.split(A.TREE_JOIN_STR);n[1]&&(t.push(n[0]),a.push(n[1]))}),r(F.initWriteOffType()),r(F.changeEditCalculateCommonState("SfglTemp","categoryUuidList",(0,b.fromJS)(t))),r(F.changeEditCalculateCommonState("SfglTemp","categoryNameList",(0,b.fromJS)(a))),r(F.getPayManageList({oriDate:fe,categoryUuidList:(0,b.fromJS)(t),cardUuidList:Ee,oriUuid:de,currentCardPage:1,condition:Ze}))}),e)),_.default.createElement(M.default,(z(t={showSearch:!0,disabled:je,size:"small",treeData:Re&&Re.size?Re:(0,b.fromJS)([]),value:Se.toJS(),className:1===Se.size?"table-top-select-long":"table-top-select-short",placeholder:"",parentsDisable:!1,treeCheckable:!0,treeCheckStrictly:!0},"placeholder","筛选往来单位..."),z(t,"id","sfgl-select-running"),z(t,"onChange",function(e){r(F.changeEditCalculateCommonState("SfglTemp","cardNameAll",(0,b.fromJS)(e)));var t=[],a=[];e&&e.forEach(function(e){var n=e.value.split(A.TREE_JOIN_STR);n[1]&&(t.push(n[0]),a.push(n[1]))}),r(F.initWriteOffType()),r(F.changeEditCalculateCommonState("SfglTemp","cardUuidList",(0,b.fromJS)(t))),r(F.changeEditCalculateCommonState("SfglTemp","cardNameList",(0,b.fromJS)(a))),fe&&r(F.getPayManageList({oriDate:fe,categoryUuidList:he,cardUuidList:(0,b.fromJS)(t),oriUuid:de,currentCardPage:1,condition:Ze}))}),t)),_.default.createElement("div",{className:"table-top-write-off"},_.default.createElement(W,{placeholder:"搜索摘要、金额、项目...",value:Ze,onSearch:function(e){r(F.initWriteOffType()),r(F.getPayManageList({oriDate:fe,categoryUuidList:he,cardUuidList:Ee,oriUuid:de,currentCardPage:1,condition:e}))},onChange:function(e){r(F.changeEditCalculateCommonState("SfglTemp","condition",e.target.value))},style:{width:166}}),ze.size?_.default.createElement("div",{className:"one-click-write-off",onClick:function(){r(F.changeEditCalculateCommonState("SfglTemp","showDKModal",!0))}},"代扣代缴一键核销"):null)):null,_.default.createElement("div",{className:"table-title-wrap"},_.default.createElement("ul",{className:"editRunning-table-sfgl-width table-title"},_.default.createElement("li",{key:0,onClick:function(e){e.stopPropagation(),0===Be&&(r(F.manageCheckboxCheckAll(nt,Ae)),r(F.accountTotalAmount(!0)))}},0!==Be?"":_.default.createElement(d.default,{checked:nt})),_.default.createElement("li",{key:"a",onClick:function(){je||a.setState({showDateModal:!0,selectBeginDate:pe,selectEndDate:Ce})}},_.default.createElement("span",null," 日期",je?"":pe?_.default.createElement(O.default,{type:"filter"}):_.default.createElement(O.default,{type:"not-filter"}))),["流水号","流水类别","摘要","项目","借方金额/贷方金额"].map(function(e,t){return _.default.createElement("li",{key:t+1},_.default.createElement("span",null,e))}))),_.default.createElement(N.TableBody,null,it),_.default.createElement(N.TableBottomPage,{otherComp:Ct,total:0===be?1:be,current:yt,onChange:function(e){var t=Xe?We:"";r("insert"===q?F.getPayManageList({oriDate:fe,categoryUuidList:he,cardUuidList:Ee,oriUuid:de,currentCardPage:e,condition:Ze,fromPage:!0,writeOffType:t}):F.changeEditCalculateCommonState("SfglTemp","modifycurrentPage",e))},totalPages:Me,pageSize:ve,showSizeChanger:!0,hideOnSinglePage:!1,onShowSizeChange:function(e){var t=Xe?We:"";r(F.changeEditCalculateCommonState("SfglTemp","pageSize",e)),"insert"===q?r(F.getPayManageList({oriDate:fe,categoryUuidList:he,cardUuidList:Ee,oriUuid:de,currentCardPage:1,condition:Ze,fromPage:!0,writeOffType:t,pageSize:e})):(r(F.changeEditCalculateCommonState("SfglTemp","modifycurrentPage",1)),r(F.changeEditCalculateCommonState("SfglTemp","cardPages",Math.ceil(be/e))))},className:"payment-table-select"}))),_.default.createElement(J.default,{dispatch:r,showModal:re,onClose:function(){return a.setState({showModal:!1})},fromPage:"editRunning",isCheckOut:te}),_.default.createElement(P.default,{dispatch:r,showSingleModal:He,MemberList:V,selectThingsList:at,thingsList:Q,selectedKeys:ce,title:"选择项目",selectFunc:function(e,t,a){r(F.changeEditCalculateCommonState("SfglTemp","cardUuid",a)),r(H.changeEditCalculateCommonString("Sfgl",["usedCard","code"],e)),r(H.changeEditCalculateCommonString("Sfgl",["usedCard","name"],t)),r(F.changeEditCalculateCommonState("SfglTemp","handleTypeCard",!0)),r(x.changeLrAccountCommonString("",["flags","showSingleModal"],!1)),fe&&r(F.getPayManageList({oriDate:fe,categoryUuidList:he,cardUuidList:Ee,oriUuid:de,currentCardPage:ke}))},selectListFunc:function(e,t){r("all"===e?F.getPaymentCardList(fe):F.getPaymentCardTreeList(fe,e,t))}}),_.default.createElement(o.default,{visible:Ke,title:"代扣代缴一键核销",onCancel:function(){r(F.initWriteOffType()),r(F.changeEditCalculateCommonState("SfglTemp","showDKModal",!1))},onOk:function(){r(F.getPayManageList({oriDate:fe,categoryUuidList:(0,b.fromJS)([]),cardUuidList:(0,b.fromJS)([]),oriUuid:"",currentCardPage:1,condition:"",fromPage:"",writeOffType:We})),r(F.changeEditCalculateCommonState("SfglTemp","showDKModal",!1)),r(F.clearFilterCondition())},okText:"确定",cancelText:"取消"},_.default.createElement("p",{className:"calculate-tips-title"},"账套中存在以下代扣代缴未处理："),_.default.createElement("div",{className:"save-way-choose",style:{display:ze.indexOf("JR_TYPE_SHBX_QTYS")>-1?"":"none"}},_.default.createElement(l.default,{checked:"JR_TYPE_SHBX_QTYS"===We,onChange:function(){r(F.changeEditCalculateCommonState("SfglTemp","writeOffType","JR_TYPE_SHBX_QTYS"))}},"社会保险的代扣代缴")),_.default.createElement("div",{className:"save-way-choose",style:{display:ze.indexOf("JR_TYPE_ZFGJJ_QTYS")>-1?"":"none"}},_.default.createElement(l.default,{checked:"JR_TYPE_ZFGJJ_QTYS"===We,onChange:function(){r(F.changeEditCalculateCommonState("SfglTemp","writeOffType","JR_TYPE_ZFGJJ_QTYS"))}},"住房公积金的代扣代缴")),_.default.createElement("div",{className:"save-way-choose",style:{display:ze.indexOf("JR_TYPE_GRSDS")>-1?"":"none"}},_.default.createElement(l.default,{checked:"JR_TYPE_GRSDS"===We,onChange:function(){r(F.changeEditCalculateCommonState("SfglTemp","writeOffType","JR_TYPE_GRSDS"))}},"个人税费的代扣代缴"))),_.default.createElement(o.default,{visible:ie,title:"日期筛选",onCancel:function(){a.setState({showDateModal:!1})},onOk:function(){a.setState({showDateModal:!1});var e=Xe?We:"";r(F.getPayManageList({oriDate:fe,categoryUuidList:he,cardUuidList:Ee,oriUuid:de,currentCardPage:1,condition:Ze,fromPage:!1,writeOffType:e,beginDate:oe,endDate:le,notCheckDate:!0}))},okText:"确定",cancelText:"取消"},_.default.createElement(K,{disabledDate:function(e){return e&&((0,L.default)(C)>e||e>(0,L.default)(fe))},className:"sfgl-more-choose-month",allowClear:!0,value:oe?[(0,L.default)(oe,"YYYY-MM-DD"),(0,L.default)(le,"YYYY-MM-DD")]:[],format:"YYYY-MM-DD",onChange:function(e,t){return(0,I.debounce)(function(){if(t.length>1){var e=t[0],n=t[1];-1===e.indexOf("Invalid")?(n.indexOf("Invalid")>-1&&(n=""),a.setState({selectBeginDate:e,selectEndDate:n})):m.default.info("日期格式错误，请刷新重试")}})()}})),_.default.createElement(o.default,{visible:Qe,className:"running-sfgl-manual",title:"手动核销",width:760,onCancel:function(){r(F.changeEditCalculateCommonState("SfglTemp","showHXModal",!1)),r(F.changeEditCalculateCommonState("views","selectItem",(0,b.fromJS)($e)))},onOk:function(){var e=!0,t="";De&&De.size&&De.map(function(a){if(je){if(Math.abs(Number(a.get("handleAmount")))>Math.abs(Number(a.get("amount")))||Math.abs(Number(a.get("moedAmount")))>Math.abs(Number(a.get("amount"))))return e=!1,void(t=a.get("oriDate")+"记"+a.get("jrIndex")+"号流水金额有误，请重新输入")}else if(Math.abs((0,I.numberCalculate)(a.get("handleAmount"),a.get("moedAmount")))>Math.abs(Number(a.get("amount"))))return e=!1,void(t=a.get("oriDate")+"记"+a.get("jrIndex")+"号流水金额有误，请重新输入")}),e?(r(F.changeEditCalculateCommonState("SfglTemp","showHXModal",!1)),r(F.changeEditCalculateCommonState("SfglTemp","moedAmount",Math.abs(mt))),r(F.changeEditCalculateCommonState("SfglTemp","handlingAmount",Math.abs(ft)))):m.default.info(t)},okText:"确定",cancelText:"取消"},_.default.createElement(N.TableAll,{className:"editRunning-table-sfgl-hx",type:"amountYeb"},_.default.createElement(N.TableTitle,{className:!je&&Ye?"running-sfgl-hx-modal-insert":"running-sfgl-hx-modal-modify",titleList:ht,disabled:0!==Be,hasCheckbox:!1}),_.default.createElement(N.TableBody,null,ot),_.default.createElement("div",{className:"page-bottom-table-select payment-table-select"},_.default.createElement("div",{className:"table-bottom-select"},_.default.createElement("p",null,_.default.createElement("span",null,"借方金额合计："),_.default.createElement("span",null,"贷方金额合计：")),_.default.createElement("p",null,_.default.createElement(N.Amount,{showZero:!0},st),_.default.createElement(N.Amount,{showZero:!0},dt))),_.default.createElement("div",{className:"table-bottom-select"},_.default.createElement("p",null,je&&"STATE_SFGL_ML"===qe?null:_.default.createElement("span",null,"核销"+(ft>0?"收":"付")+"款金额："),je&&"STATE_SFGL"===qe?null:_.default.createElement("span",null,"核销"+(mt>0?"收":"付")+"款抹零：")),_.default.createElement("p",null,je&&"STATE_SFGL_ML"===qe?null:_.default.createElement(N.Amount,{showZero:!0},Math.abs(ft)),je&&"STATE_SFGL"===qe?null:_.default.createElement(N.Amount,{showZero:!0},Math.abs(mt)))))))):null}}]),t}(),r.displayName="Sfgl",n=i))||n;t.default=V},2594:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=S(a(32)),i=S(a(14)),o=S(a(1256)),l=S(a(45)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(51),a(78),a(1257),a(55);var c=S(a(1)),s=a(17),d=a(18),f=(S(a(6)),a(56),S(a(1237))),m=E(a(27)),g=S(a(483)),p=S(a(90)),C=(a(22),a(1310),S(a(1325))),h=E(a(1279)),y=E(a(130));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}var T=l.default.Option,_=(0,s.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.accounts,n=t.accountList,l=t.dispatch,u=t.isCheckOut,s=t.accountOnChange,E=t.amountOnChange,S=t.amountOnFocus,_=this.state.showModal,v=a.reduce(function(e,t){return e+Number(t.get("amount")||0)},0);return c.default.createElement("div",{className:"account-content"},c.default.createElement("div",{className:"account-content-area",style:{marginBottom:"10px"}},c.default.createElement("span",null,"账户"),c.default.createElement("span",null,"金额"),c.default.createElement("span",null)),a.map(function(t,r){return c.default.createElement("div",{key:r,className:"account-content-area",style:a.size>1?{}:{border:"none",marginBottom:"0"}},c.default.createElement("span",null,c.default.createElement(g.default,{showSearch:!0,combobox:!0,placeholder:"请选择账户",value:t.get("accountName")||void 0,dropdownRender:function(t){return c.default.createElement("div",null,t,c.default.createElement(o.default,{style:{margin:"4px 0"}}),c.default.createElement("div",{style:{padding:"8px",cursor:"pointer"},onMouseDown:function(){l(h.beforeInsertAccountConf()),e.setState({showModal:!0})}},c.default.createElement(i.default,{type:"plus"})," 新增账户"))},onChange:function(e,a){var n=e.split(m.TREE_JOIN_STR),i=n[0],o=n[1],l=a.props.poundage,u=l.get("poundage"),c=l.get("poundageRate"),d=(t.get("amount"),{poundageAmount:(Math.abs(t.get("amount")||0)*c/1e3>u&&-1!==u?u:Math.abs(t.get("amount")||0)*c/1e3).toFixed(2),accountUuid:i,accountName:o,poundage:a.props.poundage.toJS()});s(d,r)}},n.getIn([0,"childList"]).map(function(e,t){return c.default.createElement(T,{key:t,value:""+e.get("uuid")+m.TREE_JOIN_STR+e.get("name"),poundage:(0,d.fromJS)({needPoundage:e.get("needPoundage"),poundage:e.get("poundage"),poundageRate:e.get("poundageRate")})},e.get("name"))}))),c.default.createElement("span",null,c.default.createElement(f.default,{value:t.get("amount"),placeholder:"请输入金额",onFocus:function(){S&&S(t,v,r)},onChange:function(e){E(e,t,r)}})),c.default.createElement("span",null,a.size>2?c.default.createElement("span",null,c.default.createElement(p.default,{type:"bigDel",theme:"outlined",onClick:function(){l(y.deleteAccounts(a,r))}})):""))}),c.default.createElement(C.default,{dispatch:l,showModal:_,onClose:function(){return e.setState({showModal:!1})},fromPage:"otherPage",isCheckOut:u}),c.default.createElement("div",{className:"account-button"},c.default.createElement(r.default,{onClick:function(){l(y.addAccounts(a,a.size-1))}},c.default.createElement(p.default,{type:"big-plus"}),"添加账户明细"),c.default.createElement("div",{className:"account-amount",style:{marginBottom:5}},c.default.createElement("label",null,"金额合计："),c.default.createElement("div",null,v.toFixed(2)))))}}]),t}())||n;t.default=_},2595:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=j(a(61)),l=j(a(1234)),u=j(a(1230)),c=j(a(37)),s=j(a(129)),d=j(a(45)),f=j(a(89)),m=j(a(100)),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(79),a(1235),a(1231),a(38),a(128),a(55),a(88),a(99);var p=a(1),C=j(p),h=a(17),y=a(18),E=k(a(27)),S=j(a(1522)),T=(j(a(90)),a(22)),_=a(127),v=j(a(6)),b=j(a(1346)),L=j(a(1296)),I=j(a(1755)),N=j(a(1424)),O=a(101),A=j(a(487)),R=k(a(172)),w=k(a(130)),P=k(a(485)),U=k(a(177)),M=a(491);function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function j(e){return e&&e.__esModule?e:{default:e}}function J(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var D=m.default.Search,x=f.default.Group,F=d.default.Option,H=(0,h.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={index:0,selectTreeUuid:"all",selectTreeLevel:0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,C.default.Component),g(t,[{key:"componentDidMount",value:function(){var e=this.props.CostTransferTemp.get("oriState"),t=this.props.oriDate;this.props.needSendRequest&&"insert"===this.props.insertOrModify&&(this.props.dispatch(w.getCostTransferList(e,t,[],[],[],"",1)),this.props.dispatch(w.getCarryoverCategory(t,e)),this.props.dispatch(M.editRunningAllActions.changeEditCalculateNeedSendRequest()))}},{key:"render",value:function(){var e,t,a,n,r=this,i=this.props,g=i.CostTransferTemp,h=i.dispatch,M=(i.disabledDate,i.insertOrModify),k=i.hideCategoryList,j=i.flags,H=(i.panes,i.calculateViews),B=(i.runningCategory,i.disabledBeginDate),G=i.commonCardObj,Y=i.enableWarehouse,Z=i.openQuantity,z=i.serialList,W=this.state,K=W.selectTreeUuid,X=W.selectTreeLevel,V=(H.get("selectI"),H.get("selectItem")),Q=H.get("selectList"),q=(g.get("uuidList"),g.get("jrIndex")),$=(g.get("categoryUuid"),g.get("oriState")),ee=this.props.oriDate,te=g.get("oriAbstract"),ae=(g.get("carryoverAmount"),g.get("categoryName"),g.get("dealTypeName")),ne=g.get("dealTypeUuid"),re=g.get("carryoverCategory"),ie=g.get("beProject"),oe=g.get("usedProject"),le=g.get("projectCard")?g.get("projectCard"):(0,y.fromJS)([]),ue=g.get("projectList"),ce=g.get("projectRange"),se=g.get("wareHouseCardList"),de=g.get("categoryNameAll"),fe=g.get("dealCategoryType"),me=g.get("oriUuid"),ge=(G.get("modalName"),j.get("currentCardType"),G.get("showSingleModal")),pe=G.get("memberList"),Ce=G.get("thingsList"),he=G.get("selectItem"),ye=G.get("selectList"),Ee=G.get("selectedKeys"),Se=G.get("cardPageObj"),Te=H.get("paymentTypeStr"),_e="CostTransferTemp",ve=(g.get("stockRange"),g.get("stockCardList")),be=(g.get("cardUuid"),g.get("costStockList")),Le=(g.get("stockCardUuidList"),g.get("propertyCostList")),Ie=g.get("propertyCost"),Ne=g.get("cardPages"),Oe=g.get("currentCardPage"),Ae=g.get("modifycurrentPage"),Re=g.get("pageSize"),we=(Ae-1)*Re,Pe=Ae*Re,Ue=(g.get("costTransferList"),"insert"===M?g.get("costTransferList"):g.get("costTransferList").slice(we,Pe)),Me=g.get("categoryUuidList"),ke=g.get("storeUuidList"),je=g.get("condition"),Je=g.get("warehouseOptionList"),De=g.get("wareHouseNameAll"),xe=g.get("stockNameAll"),Fe=g.get("stockUuidList"),He=(g.get("totalNumber"),g.get("selectStockItem")),Be={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用",XZ_HTCB:"合同成本",XZ_JJFY:"间接费用",XZ_JXZY:"机械作业",XZ_SCCB:"生产成本",XZ_FZSCCB:"辅助生产成本",XZ_ZZFY:"制造费用","":""}[Ie],Ge=0;V&&V.forEach(function(e){Ge+=e.get("amount")});var Ye=!0;Ue&&Ue.size&&Ue.map(function(e){-1===Q.indexOf(e.get("jrJvUuid"))&&(Ye=!1)});var Ze=[],ze=[];ve.map(function(e){ze.push(e.get("cardUuid"))});var We=[];be&&be.size&&be.forEach(function(e,t){if("STATE_YYSR_ZJ"===$){var a=e.toJS(),n=a.unit?JSON.stringify(a.unit):JSON.stringify({unitList:[]});Ze.push(C.default.createElement(F,{key:e.get("code"),value:""+e.get("code")+E.TREE_JOIN_STR+e.get("name")+E.TREE_JOIN_STR+e.get("cardUuid")+E.TREE_JOIN_STR+e.get("isOpenedQuantity")+E.TREE_JOIN_STR+e.get("isUniformPrice")+E.TREE_JOIN_STR+n},e.get("code")+" "+e.get("name"))),We.push(e.toJS())}else if(-1===ze.indexOf(e.get("cardUuid"))){var r=e.toJS(),i=r.unit?JSON.stringify(r.unit):JSON.stringify({unitList:[]});Ze.push(C.default.createElement(F,{key:e.get("code"),value:""+e.get("code")+E.TREE_JOIN_STR+e.get("name")+E.TREE_JOIN_STR+e.get("cardUuid")+E.TREE_JOIN_STR+e.get("isOpenedQuantity")+E.TREE_JOIN_STR+e.get("isUniformPrice")+E.TREE_JOIN_STR+i},e.get("code")+" "+e.get("name"))),We.push(e.toJS())}});var Ke=[];!function e(t){return t.map(function(t){if(t.get("childList").size>0)e(t.get("childList"));else{var a=t.toJS(),n=a.propertyCostList?JSON.stringify(a.propertyCostList):JSON.stringify([]);Ke.push({uuid:t.get("uuid"),dealName:t.get("name"),beProject:t.get("beProject"),projectRange:t.get("projectRange"),propertyCostList:n,categoryType:t.get("categoryType")})}})}(re);var Xe="modify"===M,Ve=function(e,t,a){return t?e&&((0,v.default)(B)>e||e<(0,v.default)(a)):e&&(0,v.default)(B)>e},Qe=[],qe=(0,T.formatDate)().slice(0,10),$e=0;V&&V.size&&V.map(function(e){var t=new Date(e.get("oriDate")).getTime();Q.indexOf(e.get("jrJvUuid"))>-1&&(qe=$e>t?qe:e.get("oriDate"),$e=new Date(qe).getTime())}),Ue&&Ue.size&&Ue.forEach(function(e,t){var a=Q.indexOf(e.get("jrJvUuid"))>-1,n="",r=e.get("batch")?e.get("productionDate")?e.get("batch")+"("+e.get("productionDate")+")":e.get("batch"):"";e.get("assistList")&&e.get("assistList").some(function(e){return e.get("propertyName")})&&e.get("batch")?n=e.get("assistList").map(function(e){return e.get("propertyName")}).join()+" | "+r:(e.get("assistList")&&e.get("assistList").some(function(e){return e.get("propertyName")})||e.get("batch"))&&(n=e.get("assistList")&&e.get("assistList").some(function(e){return e.get("propertyName")})?e.get("assistList").map(function(e){return e.get("propertyName")}).join():r),Qe.push(C.default.createElement(_.TableItem,{className:"account-cost-transfer-table-width",key:e.get("jrJvUuid")},C.default.createElement("li",{onClick:function(t){t.stopPropagation(),h(w.selectEditCbjzItem(e,a,ee))}},C.default.createElement(s.default,{checked:a})),C.default.createElement("li",null,e.get("oriDate")),C.default.createElement(_.TableOver,{textAlign:"left",className:"account-flowNumber",onClick:function(t){t.stopPropagation(),h(U.getPreviewRunningBusinessFetch(e,"lrls"))}},C.default.createElement("span",null,e.get("jrIndex")+"号")),C.default.createElement("li",null,C.default.createElement("span",null,e.get("oriAbstract"))),C.default.createElement("li",{className:"cbjz-stock-items"},C.default.createElement("span",null,e.get("stockCardCode")+" "+e.get("stockCardName")),n?C.default.createElement("span",null,n):""),C.default.createElement("li",null,C.default.createElement("p",null,(e.get("storeCardCode")?e.get("storeCardCode"):"")+" "+(e.get("storeCardName")?e.get("storeCardName"):""))),C.default.createElement("li",null,C.default.createElement("p",null,(e.get("quantity")?(0,T.formatFour)(e.get("quantity")):"")+" "+(e.get("unitCardName")?e.get("unitCardName"):""))),C.default.createElement("li",null,C.default.createElement("p",null,(0,T.formatMoney)(e.get("amount"),2,"")))))});var et=0;return C.default.createElement("div",{className:"accountConf-modal-list"},"modify"===M?C.default.createElement("div",{className:"edit-running-modal-list-item"},C.default.createElement("label",null,"流水号："),C.default.createElement("div",null,C.default.createElement(S.default,{style:{width:"70px",marginRight:"5px"},value:q,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?h(P.changeEditCalculateCommonString("CostTransfer","jrIndex",e.target.value)):c.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,C.default.createElement("div",{className:"edit-running-modal-list-item"},C.default.createElement("label",null,"日期："),C.default.createElement("div",null,C.default.createElement(u.default,{allowClear:!1,disabledDate:function(e){return Xe&&"STATE_YYSR_ZJ"!==$?Ve(e,Xe,qe):Ve(e)},value:ee?(0,v.default)(ee):"",onChange:function(e){var t=e.format("YYYY-MM-DD");if("insert"===M){h(R.changeLrAccountCommonString("ori","oriDate",t)),h(w.getCarryoverCategory(t,$));var a="STATE_YYSR_ZJ"===$?ne:"";h(w.getCostCarryoverStockList(t,$,a)),h(w.getCostTransferList($,t,Fe,Me,ke,je,1)),h(P.changeEditCalculateCommonString("CostTransfer","stockCardList",(0,y.fromJS)([{cardUuid:"",name:"",code:"",amount:""}]))),h(P.changeEditCalculateCommonString("CostTransfer","cardUuid","")),h(P.changeEditCalculateCommonString("CostTransfer","costTransferList",(0,y.fromJS)([]))),h(P.changeEditCalculateCommonString("CostTransfer",["stockCardRange","code"],"")),h(P.changeEditCalculateCommonString("CostTransfer",["stockCardRange","name"],""))}else h(R.changeLrAccountCommonString("ori","oriDate",t))}}))),C.default.createElement(L.default,{dispatch:h,insertOrModify:M,paymentTypeStr:Te,hideCategoryList:k}),C.default.createElement("div",{className:"edit-running-modal-list-item"},C.default.createElement("label",null),C.default.createElement("div",null,C.default.createElement(x,{value:$,disabled:"modify"===M,onChange:function(e){h(w.changeEditCalculateCommonState(_e,"oriState",e.target.value)),h(w.changeEditCalculateCommonState(_e,"oriAbstract",{STATE_YYSR_XS:"销售存货结转成本",STATE_YYSR_TS:"销货退回结转成本",STATE_YYSR_ZJ:"直接结转成本"}[e.target.value])),h(w.initCarryoverFromChangeOriState()),h(w.getCarryoverCategory(ee,e.target.value)),"STATE_YYSR_ZJ"!==e.target.value&&h(w.getCostCarryoverStockList(ee,e.target.value,"")),"STATE_YYSR_ZJ"!==e.target.value&&h(w.getCostTransferList(e.target.value,ee,[],[],[],"",1)),"STATE_YYSR_ZJ"===e.target.value&&r.props.dispatch(w.getCanUseWarehouseCardList({temp:"CostTransferTemp"}))}},C.default.createElement(f.default,{key:"a",value:"STATE_YYSR_XS"},"销售成本结转"),C.default.createElement(f.default,{key:"b",value:"STATE_YYSR_TS"},"退销转回成本"),C.default.createElement(f.default,{key:"c",value:"STATE_YYSR_ZJ"},"直接成本结转")))),C.default.createElement("div",{className:"accountConf-separator"}),"STATE_YYSR_ZJ"===$?C.default.createElement("div",{className:"edit-running-modal-list-item"},C.default.createElement("label",null,"处理类别："),C.default.createElement("div",{className:"chosen-right",style:{display:"flex"}},C.default.createElement(d.default,{disabled:"modify"===M,value:ae,onChange:function(e){var t=e.split(E.TREE_JOIN_STR);if(h(w.changeEditCalculateCommonState(_e,"dealTypeName",t[1])),h(w.changeEditCalculateCommonState(_e,"dealTypeUuid",t[0])),h(P.changeEditCalculateCommonString("CostTransfer","stockCardList",(0,y.fromJS)([{}]))),h(P.changeEditCalculateCommonString("CostTransfer","costTransferList",(0,y.fromJS)([]))),"STATE_YYSR_ZJ"===$){h(w.changeEditCalculateCommonState(_e,"dealCategoryType",t[4])),h(w.getCostCarryoverStockList(ee,$,t[0]));var a="true"===t[2],n=JSON.parse(t[3]);h(w.changeEditCalculateCommonState(_e,"beProject",a)),h(w.changeEditCalculateCommonState(_e,"propertyCostList",(0,y.fromJS)(n))),1===n.length&&h(w.changeEditCalculateCommonState(_e,"propertyCost",n[0]));var r=[];if(Ke.map(function(e,a){e.uuid==t[0]&&(r=e.projectRange)}),t[2])if(r.size){t[4];var i="LB_YYSR"!==t[4],o="LB_FYZC"===t[4],l="LB_FYZC"===t[4],u="LB_FYZC"===t[4],c="LB_FYZC"===t[4];h(w.getJzsyProjectCardList(r,_e,i,"",o,l,u,c)),h(w.changeEditCalculateCommonState(_e,"projectCard",(0,y.fromJS)([{uuid:"",code:"",name:""}])))}else h(w.changeEditCalculateCommonState(_e,"beProject",!1))}}},Ke.map(function(e,t){return C.default.createElement(F,{key:t,value:""+e.uuid+E.TREE_JOIN_STR+e.dealName+E.TREE_JOIN_STR+e.beProject+E.TREE_JOIN_STR+e.propertyCostList+E.TREE_JOIN_STR+e.categoryType},e.dealName)})),ie?C.default.createElement(l.default,{className:"use-unuse-style lrls-jzsy-box",style:{margin:".1rem 0 0 .2rem"},checked:oe,checkedChildren:"项目",unCheckedChildren:"项目",onChange:function(){oe||h(w.changeEditCalculateCommonState(_e,"projectCard",(0,y.fromJS)([{uuid:"",code:"",name:""}]))),h(w.changeEditCalculateCommonState(_e,"usedProject",!oe))}}):"")):null,Le&&Le.size>1?C.default.createElement("div",{className:"edit-running-modal-list-item"},C.default.createElement("label",null,"费用性质："),C.default.createElement("div",null,C.default.createElement(o.default,{title:{XZ_HTCB:"已选择施工项目",XZ_JJFY:'已选择"间接费用"项目',XZ_JXZY:'已选择"机械作业"项目',XZ_SCCB:"已选择生产项目",XZ_FZSCCB:'已选择"辅助生产成本"项目',XZ_ZZFY:'已选择"制造费用"项目'}[Ie]||"",placement:"topLeft"},C.default.createElement(d.default,{disabled:"XZ_SCCB"===Ie||"XZ_FZSCCB"===Ie||"XZ_ZZFY"===Ie||"XZ_HTCB"===Ie||"XZ_JJFY"===Ie||"XZ_JXZY"===Ie,value:Be,onChange:function(e){h(w.changeEditCalculateCommonState(_e,"propertyCost",e))}},Le&&Le.size?Le.map(function(e,t){var a={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用"}[e];return C.default.createElement(F,{key:t,value:e},a)}):null)))):"",C.default.createElement("div",{className:"edit-running-modal-list-item"},C.default.createElement("label",null,"摘要："),C.default.createElement("div",null,C.default.createElement(m.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:te,onChange:function(e){h(w.changeEditCalculateCommonState(_e,"oriAbstract",e.target.value))}}))),oe&&ie&&"STATE_YYSR_ZJ"===$?le.map(function(e,t){return C.default.createElement("div",{key:t,className:"project-content-area",style:le.size>1?{}:{border:"none",marginBottom:"0"}},C.default.createElement("div",{className:"edit-running-modal-list-item"},C.default.createElement("label",null,"项目："),C.default.createElement("div",{className:"chosen-right"},C.default.createElement(d.default,{combobox:!0,showSearch:!0,value:("COMNCRD"!==e.get("code")&&"INDIRECT"!==e.get("code")&&"MECHANICAL"!==e.get("code")&&"ASSIST"!==e.get("code")&&"MAKE"!==e.get("code")&&e.get("code")?e.get("code"):"")+" "+(e.get("name")?e.get("name"):""),onChange:function(e,t){var a=e.split(E.TREE_JOIN_STR),n=t.props.uuid,r=a[0],i=a[1];switch(h(w.changeEditCalculateCommonState(_e,"projectCard",(0,y.fromJS)([{cardUuid:n,name:i,code:r}]))),r){case"ASSIST":h(w.changeEditCalculateCommonState(_e,"propertyCost","XZ_FZSCCB"));break;case"MAKE":h(w.changeEditCalculateCommonState(_e,"propertyCost","XZ_ZZFY"));break;case"INDIRECT":h(w.changeEditCalculateCommonState(_e,"propertyCost","XZ_JJFY"));break;case"MECHANICAL":h(w.changeEditCalculateCommonState(_e,"propertyCost","XZ_JXZY"));break;default:"XZ_PRODUCE"===t.props.projectProperty?h(w.changeEditCalculateCommonState(_e,"propertyCost","XZ_SCCB")):"XZ_CONSTRUCTION"===t.props.projectProperty?h(w.changeEditCalculateCommonState(_e,"propertyCost","XZ_HTCB")):h(w.changeEditCalculateCommonState(_e,"propertyCost",""))}}},ue&&("LB_FYZC"!==fe?ue.filter(function(e){return"XZ_PRODUCE"!==e.get("projectProperty")}):ue).map(function(e,t){return C.default.createElement(F,{key:e.get("uuid"),value:""+e.get("code")+E.TREE_JOIN_STR+e.get("name"),projectProperty:e.get("projectProperty"),uuid:e.get("uuid")},"COMNCRD"!==e.get("code")&&"INDIRECT"!==e.get("code")&&"MECHANICAL"!==e.get("code")&&"ASSIST"!==e.get("code")&&"MAKE"!==e.get("code")?e.get("code")+" "+e.get("name"):e.get("name"))})),C.default.createElement("div",{className:"chosen-word",onClick:function(){var e="LB_YYSR"!==fe,a="LB_FYZC"===fe,n="LB_FYZC"===fe,i="LB_FYZC"===fe,o="LB_FYZC"===fe;h(w.getProjectAllCardList(ce,"showSingleModal",!1,e,"",a,n,i,o)),h(w.changeEditCalculateCommonState("commonCardObj","modalName","singleModalProject")),r.setState({index:t})}},"选择"))))}):null,"STATE_YYSR_ZJ"===$?C.default.createElement("div",{className:"accountConf-separator"}):null,"STATE_YYSR_ZJ"===$?C.default.createElement(N.default,{dispatch:h,stockCardList:ve,stockList:(0,y.fromJS)(We),stockRange:[],oriDate:ee,oriUuid:me,MemberList:pe,thingsList:Ce,currentCardType:"stock",selectedKeys:Ee,warehouseList:se,insertOrModify:M,enableWarehouse:Y&&"STATE_YYSR_ZJ"===$,openQuantity:Z,selectList:ye,selectItem:he,stockTitleName:"存货",stockTemplate:"stockCardList",oriStockTemplate:"oriStockCardList",sectionTemp:"CostTransfer",amountDisable:!1,isCardUuid:!0,oriState:$,needTotalAmount:!0,needSpliceChoosedStock:!0,serialList:z,stockCardIdList:"STATE_YYSR_ZJ"===$?"":ze,totalAmountName:"成本合计",notNeedOpenModal:"STATE_YYSR_ZJ"===$&&!ne,notNeedMessage:"请先选择处理类别",notFoundContent:"STATE_YYSR_ZJ"!==$||ne?void 0:"请先选择处理类别",dealTypeUuid:ne,addInBatchesFun:function(){"STATE_YYSR_ZJ"!==$||ne?h(w.getCarryoverStock(ee,$,"showSingleModal",ne,!1,1)):c.default.info("请先选择处理类别")},selectStockFun:function(e,t){h(P.changeEditCalculateCommonString("CostTransfer",["stockCardList",t,"amount"],""))},deleteStockFun:function(e){ve.splice(e,1),h(w.changeStockList(ve,e,"delete"))},callback:function(e){var t=ve.size,a=[];he&&he.size&&he.map(function(e,t){a.push({cardUuid:e.get("uuid"),storeUuid:"",assistList:e.get("assistList"),batchUuid:e.get("batchUuid")})}),he&&he.size&&h(w.getCostTransferPrice(ee,a,t))},selectTreeCallBack:function(e,t){h("all"===e?w.getCarryoverStock(ee,$,"",ne,!0,1):w.getCarryoverStockTypeList(ee,$,e,t,ne,1))},cardPageObj:Se,cardPaginationCallBack:function(e){"all"===K?h(w.getCarryoverStock(ee,$,"",ne,!0,e)):(h(w.getCarryoverStockTypeList(ee,$,K,X,ne,e)),h(w.getStockSomeCardList({uuid:K,level:X,currentPage:e})))}}):C.default.createElement("div",{className:"cbjz-stock-list"},C.default.createElement("div",{className:Z?Y?"cbjz-stock-list-title-warehouse":"cbjz-stock-list-title":Y?"cbjz-stock-list-title-warehouse-no-quantity":"cbjz-stock-list-title-no-quantity"},C.default.createElement("span",null,"存货"),Y?C.default.createElement("span",null,"仓库"):"",Z?C.default.createElement(p.Fragment,null,C.default.createElement("span",null,"数量"),C.default.createElement("span",null,"单价")):"",C.default.createElement("span",null,"金额")),C.default.createElement("div",{className:"cbjz-stock-list-content"},He.size>0?C.default.createElement("ul",{className:Z?Y?"stock-list-content-items-warehouse":"stock-list-content-items":Y?"stock-list-content-items-warehouse-no-quantity":"stock-list-content-items-no-quantity"},He.map(function(e,t){et=(0,T.numberCalculate)(e.get("amount"),et);var a=We.find(function(t){return t.cardUuid===e.get("cardUuid")})||(0,y.fromJS)([]),n="",r=e.get("batch")?e.get("productionDate")?e.get("batch")+"("+e.get("productionDate")+")":e.get("batch"):"";return e.get("assistList")&&e.get("assistList").some(function(e){return e.get("propertyName")})&&e.get("batch")?n=e.get("assistList").map(function(e){return e.get("propertyName")}).join()+" | "+r:(e.get("assistList")&&e.get("assistList").some(function(e){return e.get("propertyName")})||e.get("batch"))&&(n=e.get("assistList")&&e.get("assistList").some(function(e){return e.get("propertyName")})?e.get("assistList").map(function(e){return e.get("propertyName")}).join():r),C.default.createElement(o.default,{title:Z&&e.get("isOpenedQuantity")?C.default.createElement("div",null,C.default.createElement("p",null,"仓库数量：",e.get("referenceQuantity")?(0,T.formatFour)(e.get("referenceQuantity")):0),"STATE_YYSR_XS"===$||"STATE_YYSR_TS"===$?C.default.createElement("p",null,"参考单价：",e.get("unitName")?(0,T.formatFour)(e.get("referencePrice"))+"元 / "+e.get("unitName"):(0,T.formatFour)(e.get("referencePrice"))):C.default.createElement("p",null,e.get("isUniformPrice")&&"STATE_CHDB"===$?"统一":"参考","单价：",a.getIn(["unit","name"])?(0,T.formatFour)(e.get("referencePrice"))+"元 / "+a.getIn(["unit","name"]):(0,T.formatFour)(e.get("referencePrice")))):"",placement:"right"},C.default.createElement("li",{className:e.get("isOpenedQuantity")?Y?"":"items-no-warehouse":Y?"items-warehouse-no-quantity":"items-no-warehouse-no-quantity"},C.default.createElement("span",{className:"cbjz-stock-items"},C.default.createElement("span",null,e.get("code")," ",e.get("name")),n?C.default.createElement("span",null,n):""),Y?C.default.createElement("span",null,(e.get("warehouseCardCode")?e.get("warehouseCardCode"):"")+" "+(e.get("warehouseCardName")?e.get("warehouseCardName"):"")):"",Z?e.get("isOpenedQuantity")?C.default.createElement(p.Fragment,null,C.default.createElement("span",null,(0,T.formatMoney)(e.get("quantity"))+" "+(e.get("unitName")?e.get("unitName"):"")),C.default.createElement("span",null,C.default.createElement(A.default,{placeholder:"请输入单价",value:e.get("price"),onChange:function(a){(0,T.numberFourTest)(a,function(a){h(P.changeEditCalculateCommonString("CostTransfer",["selectStockItem",t,"price"],a)),h(P.changeEditCalculateCommonString("CostTransfer",["selectStockItem",t,"amount"],(0,T.numberCalculate)(a,e.get("quantity"),2,"multiply")))})}}))):C.default.createElement(p.Fragment,null,C.default.createElement("span",null),C.default.createElement("span",null)):null,C.default.createElement("span",null,C.default.createElement(S.default,{placeholder:"请输入金额",value:e.get("amount"),onChange:function(a){(0,O.numberTest)(a,function(a){h(P.changeEditCalculateCommonString("CostTransfer",["selectStockItem",t,"amount"],a)),Z&&e.get("isOpenedQuantity")&&h(P.changeEditCalculateCommonString("CostTransfer",["selectStockItem",t,"price"],(0,T.numberCalculate)(a,e.get("quantity"),2,"divide")))})}}))))})):C.default.createElement("div",{className:"cbjz-stock-list-empty"},C.default.createElement("div",null,C.default.createElement("img",{src:"https://www.xfannix.com/utils/img/icons/emptyStock.png",alt:"无存货"})),C.default.createElement("div",{className:"empty-words"},"请勾选待结转成本的流水"))),C.default.createElement("div",{className:"cbjz-stock-list-bottom"},C.default.createElement("div",null,C.default.createElement("label",null,"成本合计："),C.default.createElement(_.Amount,null,et)))),"STATE_YYSR_ZJ"===$?null:C.default.createElement("div",{className:"editRunning-detail-title-single"},C.default.createElement("div",{className:"editRunning-detail-title-bottom"},C.default.createElement("span",null,"已勾选流水：",Q.size,"条"),C.default.createElement("span",null),C.default.createElement("span",null,"STATE_YYSR_XS"===$?"收入":"退销","金额合计：",C.default.createElement("span",null,(0,T.formatMoney)(Ge,2,""))))),"STATE_YYSR_ZJ"===$?null:C.default.createElement(_.TableAll,{className:"lrAccount-table"},"insert"===M?C.default.createElement("div",{className:"sfgl-table-top-select"},C.default.createElement(I.default,(J(e={showSearch:!0,disabled:Xe,treeData:re&&re.size?re:(0,y.fromJS)([]),value:de.toJS(),placeholder:"",parentsDisable:!1,treeCheckable:!0,treeCheckStrictly:!0},"placeholder","筛选流水类别..."),J(e,"id","sfgl-select-running"),J(e,"size","small"),J(e,"onChange",function(e){h(w.changeEditCalculateCommonState("CostTransferTemp","categoryNameAll",(0,y.fromJS)(e)));var t=[],a=[];e&&e.forEach(function(e){var n=e.value.split(E.TREE_JOIN_STR);n[1]&&(t.push(n[0]),a.push(n[1]))}),h(w.changeEditCalculateCommonState("CostTransferTemp","categoryUuidList",(0,y.fromJS)(t))),h(w.changeEditCalculateCommonState("CostTransferTemp","categoryNameList",(0,y.fromJS)(a))),h(w.getCostTransferList($,ee,Fe,t,ke,je,1))}),e)),C.default.createElement(I.default,(J(t={showSearch:!0,disabled:Xe,treeData:We&&We.length?(0,y.fromJS)(We):(0,y.fromJS)([]),value:xe.toJS(),placeholder:"",parentsDisable:!1,treeCheckable:!0,treeCheckStrictly:!0},"placeholder","筛选存货..."),J(t,"id","sfgl-select-running"),J(t,"size","small"),J(t,"isCardUuid",!0),J(t,"onChange",function(e){h(w.changeEditCalculateCommonState("CostTransferTemp","stockNameAll",(0,y.fromJS)(e)));var t=[],a=[];e&&e.forEach(function(e){var n=e.value.split(E.TREE_JOIN_STR);n[1]&&(t.push(n[0]),a.push(n[2]+" "+n[1]))}),h(w.changeEditCalculateCommonState("CostTransferTemp","stockUuidList",(0,y.fromJS)(t))),h(w.changeEditCalculateCommonState("CostTransferTemp","stockNameList",(0,y.fromJS)(a))),h(w.getCostTransferList($,ee,t,Me,ke,je,1))}),t)),C.default.createElement(I.default,(J(a={showSearch:!0,disabled:Xe,treeData:Je&&Je.size?Je:(0,y.fromJS)([]),value:De.toJS(),placeholder:"",parentsDisable:!1,treeCheckable:!0,chooseAll:!0},"placeholder","筛选仓库..."),J(a,"id","sfgl-select-running"),J(a,"size","small"),J(a,"onChange",function(e){h(w.changeEditCalculateCommonState("CostTransferTemp","wareHouseNameAll",(0,y.fromJS)(e)));var t=[],a=[];e&&e.forEach(function(e){var n=e.split(E.TREE_JOIN_STR);n[1]&&(t.push(n[0]),a.push(n[2]+" "+n[1]))}),h(w.changeEditCalculateCommonState("CostTransferTemp","storeUuidList",(0,y.fromJS)(t))),h(w.changeEditCalculateCommonState("CostTransferTemp","wareHouseNameList",(0,y.fromJS)(a))),h(w.getCostTransferList($,ee,Fe,Me,t,je,1))}),a)),C.default.createElement("div",{className:"table-top-write-off"},C.default.createElement(D,{placeholder:"搜索摘要、金额...",value:je,onSearch:function(e){h(w.getCostTransferList($,ee,Fe,Me,ke,e,1))},onChange:function(e){h(w.changeEditCalculateCommonState(_e,"condition",e.target.value))},style:{width:166}}))):null,C.default.createElement(_.TableTitle,{className:"account-cost-transfer-table-width",titleList:["日期","流水号","摘要","存货","仓库","数量","金额"],hasCheckbox:!0,selectAcAll:Ye,onClick:function(e){e.stopPropagation(),h(w.selectEditCbjzItemAll(Ye,_e,"costTransferList",M))}}),C.default.createElement(_.TableBody,null,Qe),C.default.createElement(_.TableBottomPage,(J(n={total:Ne*Re==0?1:Ne*Re,current:"insert"===M?Oe:Ae,onChange:function(e){h("insert"===M?w.getCostTransferList($,ee,Fe,Me,ke,je,e):w.changeEditCalculateCommonState(_e,"modifycurrentPage",e))},pageList:["20","50","80","100"],hideOnSinglePage:!0,className:"payment-table-select",totalPages:Ne,pageSize:Re,showSizeChanger:!0},"hideOnSinglePage",!1),J(n,"onShowSizeChange",function(e){if(h(w.changeEditCalculateCommonState(_e,"pageSize",e)),"insert"===M)h(w.getCostTransferList($,ee,Fe,Me,ke,je,1));else{var t=g.get("costTransferList").size;h(w.changeEditCalculateCommonState(_e,"modifycurrentPage",1)),h(w.changeEditCalculateCommonState(_e,"cardPages",Math.ceil(t/e)))}}),n))),C.default.createElement(b.default,{dispatch:h,showSingleModal:ge,MemberList:"LB_FYZC"!==fe?pe.filter(function(e){return"生产项目"!==e.get("name")}):pe,thingsList:"LB_FYZC"!==fe?Ce.filter(function(e){return"XZ_PRODUCE"!==e.get("projectProperty")}):Ce,selectedKeys:""===Ee?["all"+E.TREE_JOIN_STR+"1"]:Ee,stockCardList:ve,notNeedProduct:!1,title:"选择项目",cancel:function(){h(w.changeEditCalculateCommonState("commonCardObj","showSingleModal",!1))},selectFunc:function(e,t){var a=e.code,n=e.name,r=e.isOpenedQuantity,i=e.isUniformPrice,o=e.projectProperty,l=e.unit?e.unit:"";switch(a){case"ASSIST":h(w.changeEditCalculateCommonState(_e,"propertyCost","XZ_FZSCCB"));break;case"MAKE":h(w.changeEditCalculateCommonState(_e,"propertyCost","XZ_ZZFY"));break;case"INDIRECT":h(w.changeEditCalculateCommonState(_e,"propertyCost","XZ_JJFY"));break;case"MECHANICAL":h(w.changeEditCalculateCommonState(_e,"propertyCost","XZ_JXZY"));break;default:h("XZ_PRODUCE"===o?w.changeEditCalculateCommonState(_e,"propertyCost","XZ_SCCB"):"XZ_CONSTRUCTION"===o?w.changeEditCalculateCommonState(_e,"propertyCost","XZ_HTCB"):w.changeEditCalculateCommonState(_e,"propertyCost",""))}h(w.changeEditCalculateCommonState(_e,"projectCard",(0,y.fromJS)([{cardUuid:t,name:n,code:a,isOpenedQuantity:r,isUniformPrice:i,allUnit:l}]))),h(w.changeEditCalculateCommonState("commonCardObj","showSingleModal",!1))},selectListFunc:function(e,t){if("all"===e){var a="LB_YYSR"!==fe,n="LB_FYZC"===fe,r="LB_FYZC"===fe,i="LB_FYZC"===fe,o="LB_FYZC"===fe;h(w.getProjectAllCardList(ce,"showSingleModal",!1,a,"",n,r,i,o))}else h(w.getProjectSomeCardList(e,t,"STATE_YYSR_ZJ"))}}))}}]),t}(),r.displayName="Cbjz",n=i))||n;t.default=H},2596:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=v(a(61)),i=v(a(37)),o=v(a(45)),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(79),a(38),a(55);var c=v(a(1)),s=a(17),d=a(18),f=(v(a(1237)),a(127)),m=a(22),g=_(a(27)),p=v(a(90)),C=(a(1310),v(a(1521))),h=v(a(1523)),y=v(a(1756)),E=v(a(1345)),S=_(a(130)),T=_(a(485));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}var b=o.default.Option,L=(0,s.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showSerial:!1,showEditSerial:!1,showAdjustWayModal:!1,curStockItem:[],curStockIndex:-1,adjustWay:""},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.stockCardList,u=t.stockList,s=t.warehouseList,_=t.enableWarehouse,v=(t.openQuantity,t.stockTitleName),L=t.oriState,I=t.oriDate,N=t.oriUuid,O=t.stockTemplate,A=t.sectionTemp,R=t.needHidePrice,w=t.selectStockFun,P=t.deleteStockFun,U=t.needTooltip,M=t.warehouseUuid,k=t.noPrice,j=t.notFoundContent,J=t.showAddCardModal,D=t.insertOrModify,x=t.v,F=t.i,H=t.cardUuidName,B=t.curItem,G=t.className,Y=t.type,Z=t.mergeOpenQuantity,z=t.inOrOut,W=t.assistList,K=t.cardNameString,X=t.NegativeAllowed,V=t.propsSerialList,Q=t.serialList,q=t.selectedList,$=this.state,ee=$.showSerial,te=$.showEditSerial,ae=$.showAdjustWayModal,ne=$.curStockItem,re=$.curStockIndex,ie=$.adjustWay,oe=!1;return oe="modify"===D||("STATE_CHYE_CH"===L||"STATE_CHYE_CK"===L||"STATE_YYSR_ZJ"===L?"add"!==ie:("STATE_CHZZ_ZZCX"!==L||"成品"!==v)&&"STATE_XMJZ_JZRK"!==L&&"STATE_XMJZ_XMJQ"!==L&&"STATE_XMJZ_QRSRCB"!==L),console.log(X),c.default.createElement(r.default,{title:U&&((u.find(function(e){return e.get(H)===x.get("cardUuid")})||(0,d.fromJS)([])).get("isOpenedQuantity")||JSON.parse(x.get("isOpenedQuantity")||!1))?c.default.createElement("div",null,c.default.createElement("p",null,"仓库数量：",x.get("referenceQuantity")?(0,m.formatFour)(x.get("referenceQuantity")):0),"STATE_YYSR_XS"===L||"STATE_YYSR_TS"===L?c.default.createElement("p",null,"参考单价：",x.get("unitName")?(0,m.formatFour)(x.get("referencePrice"))+"元 / "+x.get("unitName"):(0,m.formatFour)(x.get("referencePrice"))):c.default.createElement("p",null,x.get("isUniformPrice")&&"STATE_CHDB"===L?"统一":"参考","单价：",B.getIn(["unit","name"])?(0,m.formatFour)(x.get("referencePrice"))+"元 / "+B.getIn(["unit","name"]):(0,m.formatFour)(x.get("referencePrice")))):"",placement:"right"},c.default.createElement("div",{key:F,className:G},c.default.createElement(h.default,{item:x,index:F,oriDate:I,stockList:u,dispatch:a,stockTitleName:v,notFoundContent:j,stockTemplate:O,sectionTemp:A,needHidePrice:R,selectStockFun:w,oriState:L,warehouseUuid:M,cardUuidName:H,type:Y,isClearSerialList:oe,noPrice:k,showModalFun:J}),_?c.default.createElement("span",{className:"warehouse-select"},c.default.createElement(f.XfnSelect,{placeholder:"请选择",combobox:!0,showSearch:!0,value:x.get("warehouseCardName")&&x.get("warehouseCardUuid")?(x.get("warehouseCardCode")?x.get("warehouseCardCode"):"")+" "+(x.get("warehouseCardName")?x.get("warehouseCardName"):""):void 0,dropdownRender:function(e){return c.default.createElement("div",null,e)},onChange:function(e){var t=e.split(g.TREE_JOIN_STR),n=t[0],r=t[1],i=t[2];x.get("amount");a(S.changeEditCalculateCommonString(A,[O,F,"warehouseCardUuid"],n)),a(S.changeEditCalculateCommonString(A,[O,F,"warehouseCardCode"],r)),a(S.changeEditCalculateCommonString(A,[O,F,"warehouseCardName"],i));var o=!1,l=!1;R&&(o=!0,l="STATE_CHYE_CH"===L||!("true"===x.get("isOpenedQuantity")&&!x.getIn(["unit","unitList"]).size)),x.get("cardUuid")&&a(S.getStockBuildUpPrice(I,[{cardUuid:x.get("cardUuid"),storeUuid:n,assistList:x.get("assistList"),batchUuid:x.get("batchUuid"),noNeedPrice:o,moreUnit:l}],F,A,Y))}},s.map(function(e,t){return c.default.createElement(b,{key:e.get("uuid"),value:""+e.get("uuid")+g.TREE_JOIN_STR+e.get("code")+g.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))}))):"",Z?c.default.createElement("span",null,x.getIn(["financialInfo","openSerial"])?c.default.createElement("span",{onClick:function(){if(e.setState({curStockIndex:F}),"STATE_CHYE_CH"===L||"STATE_CHYE_CK"===L||"STATE_YYSR_ZJ"===L)e.setState({showAdjustWayModal:!0,curStockItem:x.toJS(),curStockIndex:F});else if("STATE_CHZZ_ZZCX"===L&&"成品"===v||"STATE_XMJZ_JZRK"===L||"STATE_XMJZ_XMJQ"===L||"STATE_XMJZ_QRSRCB"===L)"modify"!==D||x.get("isModify")?e.setState({showEditSerial:!0}):a(T.getSerialList(x,F,z,function(t){a(S.changeEditCalculateCommonString(A,[O,F,"serialList"],(0,d.fromJS)(t))),e.setState({showEditSerial:!0})}));else{if(_&&!x.get("warehouseCardUuid"))return void i.default.info("请先填写仓库");if(x.getIn(["financialInfo","openAssist"])&&(W.some(function(e){return!e.get("propertyName")})||x.getIn(["financialInfo","assistClassificationList"]).size!==W.size))return void i.default.info("请先填写辅助属性");if(x.getIn(["financialInfo","openBatch"])&&!x.get("batchUuid"))return void i.default.info("请先填写批次");"modify"!==D||x.get("isModify")?e.setState({showSerial:!0}):a(T.getSerialList(x,F,z,function(t){a(S.changeEditCalculateCommonString(A,[O,F,"serialList"],(0,d.fromJS)(t))),e.setState({showSerial:!0})}))}},className:x.getIn(["financialInfo","openSerial"])?"serial-count":""},Number(x.get("quantity"))?(0,m.formatFour)(Number(x.get("quantity"))):"点击输入",c.default.createElement(p.default,{type:"edit-pen"})):(u.find(function(e){return e.get(H)===x.get(K)})||(0,d.fromJS)([])).get("isOpenedQuantity")||JSON.parse(x.get("isOpenedQuantity")||!1)?"STATE_YYSR_XS"===L||"STATE_YYSR_TS"===L?c.default.createElement("span",null,Number(x.get("quantity"))?(0,m.formatFour)(Number(x.get("quantity"))):0):c.default.createElement(f.XfInput,{mode:"number",tipTit:"数量",negativeAllowed:X,placeholder:"输入数量",value:x.get("quantity"),onChange:function(e){var t=e.target.value;if("STATE_CHYE_CH"===L||"STATE_CHYE_CK"===L||"STATE_YYSR_ZJ"===L){if((0,m.numberCalculate)(t,x.get("amount"),4,"multiply")<0)i.default.info("金额数量必须同正或同负");else if(a(S.changeEditCalculateCommonString(A,[O,F,"quantity"],t)),!k&&x.get("price")>0){var n=(0,m.numberCalculate)(t,x.get("price"),4,"multiply");a(S.changeEditCalculateCommonString(A,[O,F,"amount"],n))}}else if(a(S.changeEditCalculateCommonString(A,[O,F,"quantity"],t)),!k&&x.get("price")>0){var r=(0,m.numberCalculate)(t,x.get("price"),4,"multiply");a(S.changeEditCalculateCommonString(A,[O,F,"amount"],r))}}}):"",(u.find(function(e){return e.get(H)===x.get(K)})||(0,d.fromJS)([])).get("isOpenedQuantity")||JSON.parse(x.get("isOpenedQuantity")||!1)?"STATE_YYSR_XS"===L||"STATE_YYSR_TS"===L?c.default.createElement("span",{style:{display:"flex",alignItems:"center",paddingLeft:"5px"}},"STATE_CHDB"!==L?x.get("unitName")?" "+(x.get("unitName")?x.get("unitName"):""):"":x.getIn(["unit","name"])):c.default.createElement(o.default,{placeholder:"单位",style:{marginLeft:"8px",alignSelf:"flex-end"},dropdownClassName:"auto-width",value:x.get("unitName")&&x.get("unitUuid")?(x.get("unitCode")?x.get("unitCode"):"")+" "+(x.get("unitName")?x.get("unitName"):""):void 0,onChange:function(e){var t=e.split(g.TREE_JOIN_STR),n=t[0],r=t[1],i=JSON.parse(t[2])?JSON.parse(t[2]):1,o=i/(x.get("basicUnitQuantity")?x.get("basicUnitQuantity"):1),l=x.get("price")?(0,m.numberCalculate)(x.get("price"),o,4,"multiply",4):(0,m.numberCalculate)(x.get("referencePrice"),o,4,"multiply",4),u=(0,m.numberCalculate)(x.get("quantity"),l,4,"multiply");a(S.changeEditCalculateCommonString(A,[O,F,"unitUuid"],n)),a(S.changeEditCalculateCommonString(A,[O,F,"unitName"],r)),k||(a(S.changeEditCalculateCommonString(A,[O,F,"basicUnitQuantity"],i)),a(S.changeEditCalculateCommonString(A,[O,F,"amount"],u)),a(S.changeEditCalculateCommonString(A,[O,F,"price"],l)),x.get("cardUuid")&&a(S.getStockBuildUpPrice(I,[{cardUuid:x.get("cardUuid"),storeUuid:"STATE_CHDB"===L?M:x.get("warehouseCardUuid"),assistList:x.get("assistList"),batchUuid:x.get("batchUuid")}],F,A,Y)))}},B.getIn(["unit","uuid"])?c.default.createElement(b,{key:B.getIn(["unit","uuid"]),value:""+B.getIn(["unit","uuid"])+g.TREE_JOIN_STR+B.getIn(["unit","name"])+g.TREE_JOIN_STR+"1"},B.getIn(["unit","name"])):"",(B.getIn(["unit","unitList"])||[]).map(function(e){return c.default.createElement(b,{key:e.get("uuid"),value:""+e.get("uuid")+g.TREE_JOIN_STR+e.get("name")+g.TREE_JOIN_STR+e.get("basicUnitQuantity")},e.get("name"))})):"",ee&&re===F?c.default.createElement(C.default,{visible:!0,dispatch:a,oriUuid:N,serialList:V,curSerialList:Q.toJS(),item:"STATE_CHDB"===L?(0,d.fromJS)(l({},x.toJS(),{warehouseCardUuid:M})):x,onClose:function(){e.setState({showSerial:!1})},selectedList:q,onOK:function(e){var t=e.filter(function(e){return e.serialNumber}),n="STATE_CHYE_CH"===L||"STATE_CHYE_CK"===L||"STATE_YYSR_ZJ"===L?-t.length:t.length;if(a(S.changeEditCalculateCommonString(A,[O,F,"serialList"],(0,d.fromJS)(t))),a(S.changeEditCalculateCommonString(A,[O,F,"quantity"],n)),a(S.changeEditCalculateCommonString(A,[O,F,"isModify"],!0)),!k&&x.get("price")>0){var r=(0,m.numberCalculate)(n,x.get("price"),4,"multiply");a(S.changeEditCalculateCommonString(A,[O,F,"amount"],r))}}}):"",te&&re===F?c.default.createElement(E.default,{visible:!0,dispatch:a,serialList:Q,item:x,onClose:function(){e.setState({showEditSerial:!1})},onOk:function(e){var t=e.filter(function(e){return e.serialNumber});if(a(S.changeEditCalculateCommonString(A,[O,F,"serialList"],(0,d.fromJS)(t))),a(S.changeEditCalculateCommonString(A,[O,F,"quantity"],t.length)),a(S.changeEditCalculateCommonString(A,[O,F,"isModify"],!0)),!k&&x.get("price")>0){var n=(0,m.numberCalculate)(t.length,x.get("price"),4,"multiply");a(S.changeEditCalculateCommonString(A,[O,F,"amount"],n))}}}):""):"STATE_CHDB"===L?c.default.createElement("span",null):"",Z&&!k?c.default.createElement("span",null,(u.find(function(e){return e.get(H)===x.get(K)})||(0,d.fromJS)([])).get("isOpenedQuantity")||JSON.parse(x.get("isOpenedQuantity")||!1)?c.default.createElement(f.XfInput,{mode:"number",tipTit:"单价",placeholder:"请输入单价",value:x.get("price"),onChange:function(e){var t=e.target.value;a(S.changeEditCalculateCommonString(A,[O,F,"price"],t));var n=(0,m.numberCalculate)(t,x.get("quantity"),2,"multiply");a(S.changeEditCalculateCommonString(A,[O,F,"amount"],n))}}):""):"STATE_CHDB"===L?c.default.createElement("span",null):"",c.default.createElement("span",null,c.default.createElement(f.XfInput,{mode:"amount",negativeAllowed:X,placeholder:"请输入金额",value:x.get("amount"),onChange:function(e){var t=e.target.value;if("STATE_CHYE_CH"===L||"STATE_CHYE_CK"===L||"STATE_YYSR_ZJ"===L){if((0,m.numberCalculate)(t,x.get("quantity"),4,"multiply")<0)i.default.info("金额数量必须同正或同负");else if(a(S.changeEditCalculateCommonString(A,[O,F,"amount"],t)),x.get("quantity")>0&&!k){var n=((t||0)/x.get("quantity")).toFixed(4);a(S.changeEditCalculateCommonString(A,[O,F,"price"],n))}}else if(a(S.changeEditCalculateCommonString(A,[O,F,"amount"],t)),x.get("quantity")>0&&!k){var r=((t||0)/x.get("quantity")).toFixed(4);a(S.changeEditCalculateCommonString(A,[O,F,"price"],r))}}})),c.default.createElement("span",null,n.size>1&&"STATE_CHZZ_ZZD"!==L?c.default.createElement(p.default,{type:"bigDel",theme:"outlined",onClick:function(){a(S.deleteStockList(n,F,"delete",A,O)),P&&P(F)}}):"")),c.default.createElement(y.default,{showAdjustWayModal:ae&&re===F,clearSerialList:function(){a(S.changeEditCalculateCommonString(A,[O,re,"serialList"],(0,d.fromJS)([])))},onOk:function(t){if(e.setState({showAdjustWayModal:!1,adjustWay:t}),"add"===t)"modify"!==D||ne.isModify?e.setState({showEditSerial:!0}):a(T.getSerialList((0,d.fromJS)(ne),re,"in",function(t){a(S.changeEditCalculateCommonString(A,[O,re,"serialList"],(0,d.fromJS)(t))),e.setState({showEditSerial:!0})}));else{var n=ne.assistList||[];if(_&&!ne.warehouseCardUuid)return void i.default.info("请先填写仓库");if(ne.openAssist&&(n.some(function(e){return!e.get("propertyName")})||ne.assistClassificationList.length!==n.size))return void i.default.info("请先填写辅助属性");if(ne.openBatch&&!ne.batchUuid)return void i.default.info("请先填写批次");"modify"!==D||ne.isModify?e.setState({showSerial:!0}):a(T.getSerialList((0,d.fromJS)(ne),re,"out",function(t){a(S.changeEditCalculateCommonString(A,[O,re,"serialList"],(0,d.fromJS)(t))),e.setState({showSerial:!0})}))}},onCancel:function(){e.setState({showAdjustWayModal:!1})}}))}}]),t}())||n;t.default=L},2597:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=w(a(129)),l=w(a(32)),u=w(a(100)),c=w(a(1230)),s=w(a(37)),d=w(a(45)),f=w(a(89)),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(128),a(51),a(99),a(1231),a(38),a(55),a(88);var g=w(a(1)),p=a(17),C=a(22),h=w(a(1237)),y=w(a(90)),E=a(127),S=a(18),T=w(a(6)),_=R(a(27)),v=w(a(2598)),b=w(a(1296)),L=w(a(1346)),I=(a(101),R(a(172))),N=R(a(130)),O=R(a(485)),A=R(a(177));function R(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function w(e){return e&&e.__esModule?e:{default:e}}var P=f.default.Group,U=d.default.Option,M=(0,p.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showCommonChargeModal:!1,showSingleModal:!1,selectTreeUuid:"all",selectTreeLevel:0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,g.default.Component),m(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.CommonChargeTemp,r=t.disabledBeginDate,i=t.hideCategoryList,m=(t.panes,t.insertOrModify),p=t.commonCardObj,R=t.paymentType,w=t.calculateViews,M=this.state,k=M.showSingleModal,j=M.selectTreeUuid,J=M.selectTreeLevel,D=w.get("paymentTypeStr"),x="modify"===m,F=p.get("selectItem"),H=p.get("selectI"),B=p.get("selectList"),G=p.get("selectedKeys"),Y=this.props.oriDate,Z=n.get("oriAbstract"),z=(n.get("runningIndex"),n.get("paymentList")),W=n.get("shareTypeList"),K=n.get("projectCardList"),X=n.get("jrIndex"),V=n.get("oriState"),Q=n.get("projectList"),q=(n.get("propertyCost"),n.get("amount")?n.get("amount"):0),$=p.get("memberList"),ee=p.get("thingsList"),te=p.get("cardPageObj"),ae=function(e,t,a){return t?e&&((0,T.default)(r)>e||e<(0,T.default)(a)):e&&(0,T.default)(r)>e},ne=0;return"LB_GGFYFT"===R?g.default.createElement("div",{className:"accountConf-modal-list accountConf-modal-list-hidden"},"modify"===m?g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,"流水号："),g.default.createElement("div",null,g.default.createElement(h.default,{style:{width:"70px",marginRight:"5px"},value:X,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?a(N.changeEditCalculateCommonState("CommonChargeTemp","jrIndex",e.target.value)):s.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,"日期："),g.default.createElement("div",null,g.default.createElement(c.default,{allowClear:!1,disabledDate:function(e){if(x){var t=z.getIn([0,"oriDate"]);return ae(e,x,t)}return ae(e)},value:(0,T.default)(Y),onChange:function(e){var t=e.format("YYYY-MM-DD");a(I.changeLrAccountCommonString("ori","oriDate",t)),!x&&a(N.getProjectShareList(t))}}))),g.default.createElement(b.default,{dispatch:a,insertOrModify:m,paymentTypeStr:D,hideCategoryList:i}),W?g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null),g.default.createElement("div",null,g.default.createElement(P,{value:V,disabled:"modify"===m,onChange:function(e){a(N.changeEditCalculateCommonString("CommonCharge","oriState",e.target.value)),a(N.getProjectShareList(Y,e.target.value)),a(N.changeEditCalculateCommonString("CommonCharge","projectCardList",(0,S.fromJS)([])))}},W.map(function(e,t){return g.default.createElement(f.default,{key:"i",value:e.get("oriState")},e.get("typeName"))})))):null,g.default.createElement("div",{className:"accountConf-separator"}),g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,"摘要："),g.default.createElement("div",null,g.default.createElement(u.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:Z,onChange:function(e){a(O.changeEditCalculateCommonString("CommonCharge","oriAbstract",e.target.value))}}))),g.default.createElement("div",{className:"accountConf-separator"}),K.size?K.map(function(t,n){var r={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用",XZ_FINANCE:"财务费用","":""}[t.get("propertyCost")||""];return ne=(0,C.numberCalculate)(ne,t.get("amount")),g.default.createElement("div",null,g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,"项目："),g.default.createElement("div",{className:"chosen-right"},g.default.createElement(d.default,{combobox:!0,showSearch:!0,value:("COMNCRD"!==t.get("code")&&"ASSIST"!==t.get("code")&&"INDIRECT"!==t.get("code")&&t.get("code")?t.get("code"):"")+" "+(t.get("name")||""),onChange:function(e,r){var i=e.split(_.TREE_JOIN_STR),o=r.props.uuid,l=i[0],u=i[1],c=t.get("amount"),s=t.get("percent");a(N.changeEditCalculateCommonString("CommonCharge",["projectCardList",n],(0,S.fromJS)({cardUuid:o,name:u,code:l,amount:c,percent:s})))}},Q.map(function(e,t){return g.default.createElement(U,{key:e.get("uuid"),value:""+e.get("code")+_.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")},("COMNCRD"!==e.get("code")&&"ASSIST"!==e.get("code")&&"INDIRECT"!==e.get("code")?e.get("code"):"")+" "+e.get("name"))})),g.default.createElement("div",{className:"chosen-word",onClick:function(){a(N.getChargeProjectCard(V,"CommonChargeTemp",1)),a(N.changeEditCalculateCommonState("commonCardObj","selectI",n)),e.setState({showSingleModal:!0})}},"选择")),g.default.createElement("span",{className:"icon-content"},g.default.createElement("span",null,g.default.createElement(y.default,{type:"sob-delete",theme:"outlined",onClick:function(){a(N.changeEditCalculateCommonString("CommonCharge","projectCardList",K.splice(n,1)))}})))),"COMNCRD"===t.get("code")?g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,"费用性质："),g.default.createElement("div",null,g.default.createElement(d.default,{value:r,onChange:function(e){a(N.changeEditCalculateCommonString("CommonCharge",["projectCardList",n,"propertyCost"],e))}},g.default.createElement(U,{key:"a",value:"XZ_SALE"}," 销售费用 "),g.default.createElement(U,{key:"b",value:"XZ_MANAGE"}," 管理费用 "),g.default.createElement(U,{key:"c",value:"XZ_FINANCE"}," 财务费用 ")))):null,g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,"分摊金额:"),g.default.createElement("div",{style:{marginRight:"10px"}},g.default.createElement(E.XfInput,{mode:"amount",negativeAllowed:!0,disabled:0==q,value:t.get("amount")?t.get("amount"):"",onChange:function(e){var t=e.target.value;if(Math.abs(t)>Math.abs(q))s.default.info("金额不能大于待分摊金额");else{var r=(Number(t)/Number(q)*100).toFixed(2);a(O.changeEditCalculateCommonString("CommonCharge",["projectCardList",n,"amount"],t)),a(O.changeEditCalculateCommonString("CommonCharge",["projectCardList",n,"percent"],r))}}})),g.default.createElement("span",{className:"percent-content"},"占比：",g.default.createElement(E.XfInput,{mode:"amount",disabled:0==q,style:{width:"39px",padding:0,marginRight:"19px"},value:t.get("percent")?t.get("percent"):"",onChange:function(e){var t=e.target.value,r=Number(e.target.value)/100;a(O.changeEditCalculateCommonString("CommonCharge",["projectCardList",n,"percent"],t)),a(O.changeEditCalculateCommonString("CommonCharge",["projectCardList",n,"amount"],(Number(q)*r).toFixed(2)))}}),"%")),n+1===K.size?null:g.default.createElement("div",{className:"accountConf-separator"}))}):"",g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null),g.default.createElement("div",{className:"calculate-inventory-button"},g.default.createElement(l.default,{onClick:function(){e.setState({showCommonChargeModal:!0}),a(N.getChargeProjectCard(V))}},g.default.createElement(y.default,{type:"big-plus"}),"  ","添加分摊项目"))),K.size?g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,"合计金额："),g.default.createElement("div",null,(0,C.formatMoney)(ne))):null,g.default.createElement("div",{className:"accountConf-separator"}),g.default.createElement("div",{className:"editRunning-detail-title"},g.default.createElement("div",{className:"editRunning-detail-title-top"},"请勾选需要核账的流水："),g.default.createElement("div",{className:"editRunning-detail-title-bottom"},g.default.createElement("span",null,"已勾选流水：",z?z.reduce(function(e,t){return t.get("beSelect")?e+1:e},0):"","条"),g.default.createElement("span",null,"待分摊金额：",g.default.createElement("span",null,q?Number(q).toFixed(2):"")))),g.default.createElement(E.TableAll,{className:"editRunning-table"},g.default.createElement(E.TableTitle,{className:"editRunning-table-ggfy-width",titleList:["日期","流水号","流水类别","摘要","类型","待处理金额"],selectAcAll:z.every(function(e){return e.get("beSelect")}),hasCheckbox:!0,onClick:function(e){if(e.stopPropagation(),z.every(function(e){return e.get("beSelect")})){var t=z.map(function(e){return e.set("beSelect",!1)});a(O.changeEditCalculateCommonString("CommonCharge","paymentList",t)),a(O.changeEditCalculateCommonString("CommonCharge","amount",0))}else{var n=z.map(function(e){return e.set("beSelect",!0)});a(O.changeEditCalculateCommonString("CommonCharge","paymentList",n)),a(O.changeEditCalculateCommonString("CommonCharge","amount",z.reduce(function(e,t){return e+Number(t.get("notHandleAmount"))},0)))}}}),g.default.createElement(E.TableBody,null,z&&z.size?z.map(function(e,t){return g.default.createElement(E.TableItem,{className:"editRunning-table-ggfy-width common-charge-list",key:e.get("uuid")},g.default.createElement("li",null,g.default.createElement(o.default,{checked:e.get("beSelect"),onClick:function(e){a(O.changeEditCalculateCommonString("CommonCharge",["paymentList",t,"beSelect"],e.target.checked)),a(N.calculateCommonChargeAmount(t,e.target.checked))}})),g.default.createElement("li",null,g.default.createElement("span",null,e.get("oriDate"))),g.default.createElement(E.TableOver,{textAlign:"left",className:"account-flowNumber",onClick:function(t){t.stopPropagation(),a(A.getPreviewRunningBusinessFetch(e,"lrls"))}},g.default.createElement("span",null,e.get("jrIndex")?e.get("jrIndex")+"号":"")),g.default.createElement("li",null,g.default.createElement("span",null,e.get("categoryName"))),g.default.createElement("li",null,g.default.createElement("span",null,e.get("oriAbstract"))),g.default.createElement("li",null,g.default.createElement("span",null,e.get("jrJvTypeName"))),g.default.createElement(E.TableOver,{textAlign:"right"},g.default.createElement("span",{style:{marginRight:"4px"}},(0,C.formatMoney)(e.get("notHandleAmount")))))}):"",g.default.createElement(E.TableItem,{className:"editRunning-table-ggfy-width",key:"total"},g.default.createElement("li",null),g.default.createElement("li",null),g.default.createElement("li",null),g.default.createElement("li",null),g.default.createElement("li",null,"合计"),g.default.createElement("li",null),g.default.createElement(E.TableOver,{textAlign:"right"},g.default.createElement("span",{style:{marginRight:"4px"}},(0,C.formatMoney)(z.reduce(function(e,t){return e+Number(t.get("notHandleAmount"))},0))))))),g.default.createElement(v.default,{showCommonChargeModal:this.state.showCommonChargeModal,MemberList:$,thingsList:ee,dispatch:a,oriDate:Y,selectedKeys:G,selectItem:F,selectList:B,projectCard:K,oriState:V,used:!0,showSelectAll:!0,cancel:function(){e.setState({showCommonChargeModal:!1})},cardPageObj:te}),g.default.createElement(L.default,{dispatch:a,showSingleModal:k,MemberList:$,thingsList:ee,selectedKeys:""===G?["all"+_.TREE_JOIN_STR+"1"]:G,title:"选择项目",selectFunc:function(t,n){var r=t.code,i=t.name,o=t.isOpenedQuantity,l=t.isUniformPrice,u=t.unit?t.unit:"";a(N.changeEditCalculateCommonString("CommonCharge",["projectCardList",H],(0,S.fromJS)({cardUuid:n,name:i,code:r,isOpenedQuantity:o,isUniformPrice:l,allUnit:u}))),e.setState({showSingleModal:!1})},cancel:function(){e.setState({showSingleModal:!1})},selectListFunc:function(t,n){a("all"===t?N.getChargeProjectCard(V,"CommonChargeTemp",1):N.getProjectSomeCardList(t,n,V,1)),e.setState({selectTreeUuid:t,selectTreeLevel:n})},cardPageObj:te,paginationCallBack:function(e){a("all"===j?N.getChargeProjectCard(V,"CommonChargeTemp",e):N.getProjectSomeCardList(j,J,V,e))}})):null}}]),t}(),r.displayName="Ggfyft",n=i))||n;t.default=M},2598:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=y(a(47)),i=y(a(1267)),o=y(a(129)),l=y(a(100)),u=y(a(14)),c=y(a(171)),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(1265),a(128),a(99),a(78),a(170);var d=y(a(1)),f=a(17),m=a(127),g=h(a(27)),p=a(18),C=h(a(130));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S=c.default.TreeNode,T=(0,f.immutableRenderDecorator)(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={inputValue:"",selectTreeUuid:"all",selectTreeLevel:0},E(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.MemberList,s=(t.searchCardContent,t.searchList,t.hasSearchContent,t.thingsList),f=t.selectedKeys,h=t.showCommonChargeModal,y=t.selectItem,E=t.selectList,T=t.cancel,_=t.oriState,v=t.projectCard,b=t.showSelectAll,L=t.cardPageObj,I=this.state,N=I.selectTreeUuid,O=I.selectTreeLevel,A=y&&y.size||0,R=n?function e(t,a,n){return t&&t.map(function(t,r){return t.childList&&t.childList.length?d.default.createElement(S,{key:""+t.uuid+g.TREE_JOIN_STR+t.name+g.TREE_JOIN_STR+n,title:t.name},e(t.childList,a,n+1)):d.default.createElement(S,{key:""+t.uuid+g.TREE_JOIN_STR+t.name+g.TREE_JOIN_STR+n,title:t.name,checkable:!0})})}(n.toJS(),["全部"],1):"",w=(s.map(function(e){return{string:""+e.get("code")+g.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")}}),s.toJS().filter(function(t){return!e.state.inputValue||(t.code.indexOf(e.state.inputValue)>-1||t.name.indexOf(e.state.inputValue)>-1)})),P=w.every(function(e){return E.some(function(t){return t===e.uuid})})&&w.length;return d.default.createElement(r.default,{className:"select-modal",title:"选择项目",visible:h,onCancel:function(){T(),a(C.changeEditCalculateCommonState("commonCardObj","selectedKeys",["all"+g.TREE_JOIN_STR+"1"])),a(C.changeEditCalculateCommonState("commonCardObj","selectList",(0,p.fromJS)([]))),a(C.changeEditCalculateCommonState("commonCardObj","selectItem",(0,p.fromJS)([])))},onOk:function(){T(),a(C.changeCommonChargeProject(v.concat(y))),a(C.changeEditCalculateCommonState("commonCardObj","selectedKeys",["all"+g.TREE_JOIN_STR+"1"])),a(C.changeEditCalculateCommonState("commonCardObj","selectList",(0,p.fromJS)([]))),a(C.changeEditCalculateCommonState("commonCardObj","selectItem",(0,p.fromJS)([])))},width:"800px"},d.default.createElement("div",{className:"lsqc-contacts-card-top"},d.default.createElement("div",{className:"table-tree-container",style:{height:w.length>5?"461px":"286px"}},d.default.createElement(c.default,{defaultExpandAll:!0,onSelect:function(t){if(t[0]){var n=t[0].split(g.TREE_JOIN_STR),r=n[0],i=n[2];a("all"===r?C.getChargeProjectCard(_,"CommonChargeTemp",1):C.getProjectSomeCardList(r,i,_,1)),e.setState({selectTreeUuid:r,selectTreeLevel:i}),a(C.changeEditCalculateCommonState("commonCardObj","selectedKeys",t))}},selectedKeys:f},d.default.createElement(S,{key:"all"+g.TREE_JOIN_STR+"1",title:"全部",checkable:!0}),R)),d.default.createElement(m.TableAll,{className:"contacts-table-right",style:{height:w.length>5?"461px":"286px"}},d.default.createElement("span",{className:"lsqc-serch"},d.default.createElement(u.default,{className:"lsqc-serch-icon",type:"search",onClick:function(){}}),d.default.createElement(l.default,{placeholder:"搜索",className:"lsqc-serch-input",onChange:function(t){e.setState({inputValue:t.target.value})}})),d.default.createElement("div",{className:"table-title-wrap"},d.default.createElement("ul",{className:"table-title table-title-charge"},d.default.createElement("li",{onClick:function(e){e.stopPropagation(),b&&a(C.changeItemCheckboxCheckAll(P,w,s))}},b?d.default.createElement(o.default,{checked:P}):null),d.default.createElement("li",null,d.default.createElement("span",null,"编号")),d.default.createElement("li",null,d.default.createElement("span",null,"名称")))),d.default.createElement(m.TableBody,{style:{height:s&&s.toJS()>5?"374px":"286px"}},s&&s.toJS().map(function(t){var n=E.indexOf(t.uuid)>-1,r=v.some(function(e){return e.get("cardUuid")===t.uuid})&&("STATE_FZSCCB"===_||"STATE_ZZFY"===_)&&"COMNCRD"!==t.code;return(t.code+" "+t.name).indexOf(e.state.inputValue)>-1?d.default.createElement(m.TableItem,{className:"contacts-table-width-charge",key:t.uuid,onClick:function(e){e.stopPropagation()}},d.default.createElement("li",{onClick:function(e){e.stopPropagation(),!r&&a(C.changeItemCheckboxCheck(n,t))}},d.default.createElement(o.default,{disabled:r,checked:n||r})),d.default.createElement("li",null,t.code),d.default.createElement("li",null,t.name)):""})),L?d.default.createElement(m.TablePagination,{className:"editcalculate-card-modal-pagination",currentPage:L.get("currentPage"),pageCount:L.get("pages"),paginationCallBack:function(e){a("all"===N?C.getChargeProjectCard(_,"CommonChargeTemp",e):C.getProjectSomeCardList(N,O,_,e))}}):"")),d.default.createElement("div",{className:"charge-chosen-project"},"选择项目：",y&&y.map(function(e){return d.default.createElement(i.default,{closable:!0,onClose:function(t){t.preventDefault(),a(C.changeItemCheckboxCheck(!0,e))}},e.get("code")," ",e.get("name"))})),d.default.createElement("div",{style:{display:A>0?"":"none",margin:"0 0 10px 20px"}},A,"个项目"))}}]),t}())||n;t.default=T},2599:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=v(a(100)),l=v(a(1230)),u=v(a(37)),c=v(a(45)),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(99),a(1231),a(38),a(55);var d=v(a(1)),f=a(17),m=(a(22),v(a(1237))),g=(v(a(90)),a(18)),p=v(a(6)),C=_(a(27)),h=(a(127),v(a(1346)),v(a(1296))),y=(a(101),v(a(1424))),E=_(a(172)),S=_(a(130)),T=_(a(485));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}var b=c.default.Option,L=(0,f.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={selectTreeUuid:"all",selectTreeLevel:0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.StockTemp,r=t.hideCategoryList,i=t.insertOrModify,s=t.paymentType,f=t.disabledDate,_=t.commonCardObj,v=t.calculateViews,L=(t.enableWarehouse,t.openQuantity),I=t.serialList,N=this.state,O=N.selectTreeUuid,A=N.selectTreeLevel,R=v.get("paymentTypeStr"),w=this.props.oriDate,P=n.get("oriAbstract"),U=n.get("oriUuid"),M=(n.get("runningIndex"),n.get("jrIndex")),k=(n.get("amount")&&n.get("amount"),n.get("stockCardList")),j=n.get("allStockCardList"),J=(n.get("stockCardUuidList"),n.get("wareHouseCardList")),D=(v.get("selectI"),_.get("memberList")),x=_.get("thingsList"),F=_.get("selectItem"),H=_.get("selectList"),B=_.get("selectedKeys"),G=_.get("cardPageObj"),Y=(_.get("modalName"),{}),Z={};n.get("chooseWareHouseCardList").toJS().map(function(e){"WAREHOUSE_STATUS_TO"===e.warehouseStatus?Y=e:Z=e});var z=[],W=[],K=[];k.map(function(e){W.push(e.get("cardUuid")),e.get("isOpenedQuantity")&&K.push({cardUuid:e.get("cardUuid"),storeUuid:Z.cardUuid,assistList:e.get("assistList"),batchUuid:e.get("batchUuid"),isUniformPrice:e.get("isUniformPrice")})});x.size?x.filter(function(e){return-1===W.indexOf(e.get("uuid"))}):(0,g.fromJS)([]);return j&&j.size&&j.forEach(function(e,t){if(-1===W.indexOf(e.get("uuid"))){var a=e.toJS(),n=a.unit?JSON.stringify(a.unit):JSON.stringify({unitList:[]});z.push(d.default.createElement(b,{key:e.get("code"),value:""+e.get("code")+C.TREE_JOIN_STR+e.get("name")+C.TREE_JOIN_STR+e.get("uuid")+C.TREE_JOIN_STR+e.get("isOpenedQuantity")+C.TREE_JOIN_STR+e.get("isUniformPrice")+C.TREE_JOIN_STR+n},e.get("code")+" "+e.get("name")))}}),"LB_CHDB"===s?d.default.createElement("div",{className:"accountConf-modal-list"},"modify"===i?d.default.createElement("div",{className:"edit-running-modal-list-item"},d.default.createElement("label",null,"流水号："),d.default.createElement("div",null,d.default.createElement(m.default,{style:{width:"70px",marginRight:"5px"},value:M,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?a(S.changeEditCalculateCommonState("StockTemp","jrIndex",e.target.value)):u.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,d.default.createElement("div",{className:"edit-running-modal-list-item"},d.default.createElement("label",null,"日期："),d.default.createElement("div",null,d.default.createElement(l.default,{allowClear:!1,disabledDate:f,value:(0,p.default)(w),onChange:function(e){var t=e.format("YYYY-MM-DD");a(E.changeLrAccountCommonString("ori","oriDate",t)),K&&K.length&&a(S.getCostTransferPrice(t,K,0,"Stock"))}}))),d.default.createElement(h.default,{dispatch:a,insertOrModify:i,paymentTypeStr:R,hideCategoryList:r}),d.default.createElement("div",{className:"accountConf-separator"}),d.default.createElement("div",{className:"edit-running-modal-list-item"},d.default.createElement("label",null,"摘要："),d.default.createElement("div",null,d.default.createElement(o.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:P,onChange:function(e){a(T.changeEditCalculateCommonString("Stock","oriAbstract",e.target.value))}}))),d.default.createElement("div",{className:"edit-running-modal-list-item"},d.default.createElement("label",null,"调出仓库："),d.default.createElement(c.default,{combobox:!0,showSearch:!0,value:Z.name,onChange:function(e,t){var n=e.split(C.TREE_JOIN_STR),r=n[0]+" "+n[1],i=t.props.uuid;if(Y.cardUuid===i)return u.default.info("调入与调出不能选择同一仓库");a(S.changeWareHouseCardList("WAREHOUSE_STATUS_FROM",r,i)),a(S.getStockCardList());var o=[];k&&k.map(function(e,t){e.get("isOpenedQuantity")&&o.push({cardUuid:e.get("cardUuid"),storeUuid:i,assistList:e.get("assistList"),batchUuid:e.get("batchUuid"),isUniformPrice:e.get("isUniformPrice")})}),o&&o.length&&a(S.getCostTransferPrice(w,o,0,"Stock"))}},J&&J.map(function(e,t){return d.default.createElement(b,{key:e.get("code"),value:""+e.get("code")+C.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")},e.get("code")+" "+e.get("name"))}))),d.default.createElement("div",{className:"edit-running-modal-list-item"},d.default.createElement("label",null,"调入仓库："),d.default.createElement(c.default,{combobox:!0,showSearch:!0,value:Y.name,onChange:function(e,t){var n=e.split(C.TREE_JOIN_STR),r=n[0]+" "+n[1],i=t.props.uuid;if(Z.cardUuid===i)return u.default.info("调入与调出不能选择同一仓库");a(S.changeWareHouseCardList("WAREHOUSE_STATUS_TO",r,i))}},J&&J.map(function(e,t){return d.default.createElement(b,{key:e.get("code"),value:""+e.get("code")+C.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")},e.get("code")+" "+e.get("name"))}))),d.default.createElement("div",{className:"accountConf-separator"}),d.default.createElement(y.default,{dispatch:a,stockCardList:k,stockList:j,stockRange:[],oriDate:w,oriUuid:U,MemberList:D,thingsList:x,currentCardType:"stock",selectedKeys:B,warehouseList:J,insertOrModify:i,enableWarehouse:!1,oriState:"STATE_CHDB",openQuantity:L,selectList:H,selectItem:F,stockTitleName:"存货",stockTemplate:"stockCardList",sectionTemp:"Stock",amountDisable:!1,isCardUuid:!1,needTotalAmount:!0,notNeedOpenModal:!Z.cardUuid,notNeedMessage:"请选择调出仓库",warehouseUuid:Z.cardUuid,serialList:I,addInBatchesFun:function(){if(!Z.cardUuid)return u.default.info("请选择调出仓库");a(S.getStockCardCategoryAndList({currentPage:1}))},selectStockFun:function(e,t){},deleteStockFun:function(e){},callback:function(e){var t=k.size,n=[];F&&F.size&&F.map(function(e,t){e.get("isOpenedQuantity")&&n.push({cardUuid:e.get("uuid"),storeUuid:Z.cardUuid,assistList:e.get("assistList"),batchUuid:e.get("batchUuid"),isUniformPrice:e.get("isUniformPrice")})}),n&&n.length&&a(S.getCostTransferPrice(w,n,t,"Stock"))},selectTreeCallBack:function(t,n){a("all"===t?T.getStockCardList({currentPage:1}):S.getStockSomeCardList({uuid:t,level:n,currentPage:1})),e.setState({selectTreeUuid:t,selectTreeLevel:n})},cardPageObj:G,cardPaginationCallBack:function(e){a("all"===O?T.getStockCardList({currentPage:e}):S.getStockSomeCardList({uuid:O,level:A,currentPage:e}))}})):null}}]),t}(),r.displayName="Chdb",n=i))||n;t.default=L},2600:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=L(a(100)),l=L(a(1230)),u=L(a(37)),c=L(a(45)),s=L(a(89)),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(99),a(1231),a(38),a(55),a(88);var f=L(a(1)),m=a(17),g=a(22),p=(L(a(90)),a(18)),C=L(a(6)),h=(a(127),b(a(27))),y=(L(a(1477)),L(a(1522))),E=(L(a(1346)),L(a(1296))),S=(a(1310),L(a(1424))),T=b(a(172)),_=b(a(130)),v=b(a(485));function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function L(e){return e&&e.__esModule?e:{default:e}}var I=s.default.Group,N=c.default.Option,O=(0,m.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showCommonChargeModal:!1,showWarehouseModal:!1,showChSingleModal:!1,checkable:!1,isCHSingleModal:!1,selectTreeUuid:"all",selectTreeLevel:0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),d(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.BalanceTemp,r=(t.disabledBeginDate,t.hideCategoryList),i=(t.panes,t.calculateViews),c=t.insertOrModify,d=t.paymentType,m=t.disabledDate,b=t.commonCardObj,L=t.enableWarehouse,O=t.isOpenQuantity,A=(t.batchList,t.serialList),R=this.state,w=(R.showWarehouseModal,R.showStockModal,R.showChSingleModal,R.isCHSingleModal,R.checkable,R.selectTreeUuid),P=R.selectTreeLevel,U=i.get("paymentTypeStr"),M=this.props.oriDate,k=n.get("oriAbstract"),j=n.get("oriState"),J=n.get("oriUuid"),D=(n.get("runningIndex"),n.get("jrIndex")),x=(n.get("amount")&&n.get("amount"),n.get("stockCardList")),F=n.get("allStockCardList"),H=(n.get("stockCardUuidList"),n.get("wareHouseList"),n.get("wareHouseCardList")),B=(n.get("oriStockCardList"),n.get("oriWarehouseCardList"),i.get("selectI"),i.get("showCount"),i.get("warehouseTreeList"),n.get("oriWareHouseList"),n.get("oriStockList"),b.get("showSingleModal"),b.get("memberList")),G=b.get("thingsList"),Y=b.get("selectItem"),Z=b.get("selectList"),z=b.get("selectedKeys"),W=b.get("cardPageObj"),K=(b.get("modalName"),n.get("chooseWareHouseCard"),n.get("chooseStockCard"),0),X=[],V=[],Q=[];x.map(function(e){V.push(e.get("cardUuid")),Q.push({cardUuid:e.get("cardUuid"),storeUuid:e.get("warehouseCardUuid"),assistList:e.get("assistList"),batchUuid:e.get("batchUuid"),isUniformPrice:e.get("isUniformPrice"),index:0}),K=(0,g.numberCalculate)(K,e.get("amount"))});G.size?G.filter(function(e){return-1===V.indexOf(e.get("uuid"))}):(0,p.fromJS)([]);return F&&F.size&&F.forEach(function(e,t){if(-1===V.indexOf(e.get("uuid"))){var a=e.toJS(),n=a.unit?JSON.stringify(a.unit):JSON.stringify({unitList:[]});X.push(f.default.createElement(N,{key:e.get("code"),value:""+e.get("code")+h.TREE_JOIN_STR+e.get("name")+h.TREE_JOIN_STR+e.get("uuid")+h.TREE_JOIN_STR+e.get("isOpenedQuantity")+h.TREE_JOIN_STR+e.get("isUniformPrice")+h.TREE_JOIN_STR+n},e.get("code")+" "+e.get("name")))}}),"LB_CHYE"===d?f.default.createElement("div",{className:"accountConf-modal-list"},"modify"===c?f.default.createElement("div",{className:"edit-running-modal-list-item"},f.default.createElement("label",null,"流水号："),f.default.createElement("div",null,f.default.createElement(y.default,{style:{width:"70px",marginRight:"5px"},value:D,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?a(_.changeEditCalculateCommonState("BalanceTemp","jrIndex",e.target.value)):u.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,f.default.createElement("div",{className:"edit-running-modal-list-item"},f.default.createElement("label",null,"日期："),f.default.createElement("div",null,f.default.createElement(l.default,{allowClear:!1,disabledDate:m,value:(0,C.default)(M),onChange:function(e){var t=e.format("YYYY-MM-DD");a(T.changeLrAccountCommonString("ori","oriDate",t)),Q.length>0&&a(_.getBalanceAdjustPrice(t,Q,"stockCardList","Balance"))}}))),f.default.createElement(E.default,{dispatch:a,insertOrModify:c,paymentTypeStr:U,hideCategoryList:r}),L?f.default.createElement("div",{className:"edit-running-modal-list-item"},f.default.createElement("label",null),f.default.createElement("div",null,f.default.createElement(I,{value:j,disabled:"modify"===c,onChange:function(e){a(v.changeEditCalculateCommonString("Balance","oriState",e.target.value)),a(_.clearBalanceTemp(e.target.value)),"STATE_CHYE_TYDJ"===e.target.value?(a(_.getStockCardList("BalanceTemp",!0,!0)),a(_.getCanUseWarehouseCardList({temp:"BalanceTemp",isUniform:!0}))):(a(_.getStockCardList("BalanceTemp")),a(_.getCanUseWarehouseCardList({temp:"BalanceTemp",isUniform:!1})))}},f.default.createElement(s.default,{key:"a",value:"STATE_CHYE_CK"},"按仓库调整"),f.default.createElement(s.default,{key:"b",value:"STATE_CHYE_CH"},"按存货调整")))):null,f.default.createElement("div",{className:"accountConf-separator"}),f.default.createElement("div",{className:"edit-running-modal-list-item"},f.default.createElement("label",null,"摘要："),f.default.createElement("div",null,f.default.createElement(o.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:k,onChange:function(e){a(v.changeEditCalculateCommonString("Balance","oriAbstract",e.target.value))}}))),f.default.createElement("div",{className:"accountConf-separator"}),f.default.createElement(S.default,{dispatch:a,stockCardList:x,stockList:F,stockRange:[],oriDate:M,oriUuid:J,MemberList:B,thingsList:G,currentCardType:"stock",selectedKeys:z,warehouseList:H,insertOrModify:c,enableWarehouse:L,oriState:j,openQuantity:O,selectList:Z,selectItem:Y,serialList:A,stockTitleName:"存货",stockTemplate:"stockCardList",sectionTemp:"Balance",amountDisable:!1,noPrice:"STATE_CHYE_CH"===j,isCardUuid:!1,needTotalAmount:!1,needHidePrice:"STATE_CHYE_CH"===j,selectStockFun:function(e,t){},deleteStockFun:function(e){},callback:function(e){var t=x.size,n=[];Y&&Y.size&&Y.map(function(e,t){n.push({cardUuid:e.get("uuid"),assistList:e.get("assistList"),batchUuid:e.get("batchUuid"),index:t,isUniformPrice:e.get("isUniformPrice")})}),n&&n.length&&a(_.getCostTransferPrice(M,n,t,"Balance"))},selectTreeCallBack:function(t,n){a("all"===t?v.getStockCardList({currentPage:1}):_.getStockSomeCardList({uuid:t,level:n,currentPage:1})),e.setState({selectTreeUuid:t,selectTreeLevel:n})},cardPageObj:W,cardPaginationCallBack:function(e){a("all"===w?v.getStockCardList({currentPage:e}):_.getStockSomeCardList({uuid:w,level:P,currentPage:e}))}}),f.default.createElement("div",{className:"edit-running-modal-list-item"},f.default.createElement("label",null,"调整净额：",(0,g.formatMoney)(K)))):null}}]),t}(),r.displayName="Chyetz",n=i))||n;t.default=O},2601:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=O(a(100)),l=O(a(1234)),u=O(a(1230)),c=O(a(37)),s=O(a(45)),d=O(a(89)),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(99),a(1235),a(1231),a(38),a(55),a(88);var m=O(a(1)),g=a(17),p=a(18),C=N(a(27)),h=O(a(1237)),y=O(a(90)),E=(O(a(483)),a(22)),S=(a(127),O(a(6))),T=O(a(1346)),_=O(a(1296)),v=a(1310),b=N(a(172)),L=N(a(130)),I=N(a(485));N(a(177));function N(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function O(e){return e&&e.__esModule?e:{default:e}}d.default.Group;var A=s.default.Option,R=(0,g.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={index:0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),f(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.TaxTransferTemp,a=e.dispatch,n=e.disabledDate,r=e.commonCardObj,i=e.insertOrModify,d=e.hideCategoryList,f=e.flags,g=(e.panes,e.calculateViews),N=e.runningCategory,O=e.enableWarehouse,R=e.oriDate,w=t.get("taxTransferList"),P=g.get("selectI"),U=g.get("categoryMessage"),M=t.get("uuidList"),k=t.get("jrIndex"),j=(t.get("categoryUuid"),t.get("oriState")),J=t.get("amount"),D=t.get("oriAbstract"),x=(t.get("carryoverAmount"),t.get("categoryName"),t.get("dealTypeName")),F=t.get("dealTypeUuid"),H=t.get("propertyCarryover"),B=t.get("projectList"),G=t.get("projectCard"),Y=t.get("wareHouseCardList"),Z=g.get("paymentTypeStr"),z="TaxTransferTemp",W=U.get("beProject"),K=U.get("propertyCostList"),X=U.get("projectRange"),V=U.get("categoryType"),Q=t.get("usedProject"),q=r.get("memberList"),$=r.get("thingsList"),ee=(r.get("selectItem"),r.get("selectList"),r.get("selectedKeys")),te=r.get("modalName"),ae=r.get("showSingleModal"),ne=(t.get("stockRange"),t.get("stockCardList")),re=(t.get("cardUuid"),f.get("selectThingsList"),f.get("currentCardType"),t.get("stockCardUuidList")),ie={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用",XZ_FINANCE:"财务费用","":""}[t.get("propertyCost")];w.forEach(function(e){M.indexOf(e.get("jrJvUuid"))>-1&&e.get("amount")});!!M.size&&w.every(function(e,t){return M.indexOf(e.get("jrJvUuid"))>-1});var oe=[],le=[];ne.map(function(e){le.push(e.get("cardUuid"))}),$&&$.size&&$.forEach(function(e,t){oe.push(m.default.createElement(A,{key:e.get("code"),value:""+e.get("code")+C.TREE_JOIN_STR+e.get("name")+C.TREE_JOIN_STR+e.get("uuid")},e.get("code")+" "+e.get("name")))});var ue=[];!function e(t){return t.map(function(t){t.get("childList").size>0?e(t.get("childList")):ue.push({uuid:t.get("uuid"),dealName:t.get("name"),propertyCarryover:t.get("propertyCarryover")})})}(N.getIn([0,"childList"]).filter(function(e){return"LB_YYZC"===e.get("categoryType")||"LB_FYZC"===e.get("categoryType")||"LB_CQZC"===e.get("categoryType")}));var ce=0;return m.default.createElement("div",{className:"accountConf-modal-list accountConf-modal-list-hidden"},"modify"===i&&k?m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"流水号："),m.default.createElement("div",null,m.default.createElement(h.default,{style:{width:"70px",marginRight:"5px"},value:k,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?a(I.changeEditCalculateCommonString("TaxTransfer","jrIndex",e.target.value)):c.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"日期："),m.default.createElement("div",null,m.default.createElement(u.default,{allowClear:!1,disabledDate:n,value:R?(0,S.default)(R):"",onChange:function(e){var t=e.format("YYYY-MM-DD");a(b.changeLrAccountCommonString("ori","oriDate",t)),"insert"===i&&(a(b.getCostStockList(t,j,F)),a(I.changeEditCalculateCommonString("TaxTransfer","stockCardList",(0,p.fromJS)([{cardUuid:"",name:"",code:"",amount:""}]))))}}))),m.default.createElement(_.default,{dispatch:a,insertOrModify:i,paymentTypeStr:Z,hideCategoryList:d}),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"处理类别："),m.default.createElement("div",null,m.default.createElement(s.default,{disabled:"modify"===i,value:x,onChange:function(e){var t=e.split(C.TREE_JOIN_STR);a(L.changeEditCalculateCommonState(z,"dealTypeName",t[1])),a(L.changeEditCalculateCommonState(z,"dealTypeUuid",t[0])),a(L.changeEditCalculateCommonState(z,"propertyCarryover",t[2])),a(L.getCategoryMessage(t[0])),a(I.changeEditCalculateCommonString("TaxTransfer","stockCardList",(0,p.fromJS)([{cardUuid:"",name:"",code:"",amount:""}]))),a(I.changeEditCalculateCommonString("TaxTransfer","taxTransferList",(0,p.fromJS)([])))}},ue.map(function(e,t){return m.default.createElement(A,{key:t,value:""+e.uuid+C.TREE_JOIN_STR+e.dealName+C.TREE_JOIN_STR+e.propertyCarryover},e.dealName)}))),"SX_HW"!==H&&"LB_CQZC"!==V&&(W&&"insert"===i||(G&&G.get("cardUuid")||W)&&"modify"===i)?m.default.createElement(l.default,{className:"use-unuse-style lrls-jzsy-box",style:{margin:".1rem 0 0 .2rem"},checked:Q,checkedChildren:"项目",unCheckedChildren:"项目",onChange:function(){Q||"insert"!==i||a(L.changeEditCalculateCommonState(z,"projectCard",(0,p.fromJS)([{cardUuid:"",code:"",name:""}]))),a(L.changeEditCalculateCommonState(z,"usedProject",!Q))}}):""),K&&K.size>1&&"LB_CQZC"!==V?m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"费用性质："),m.default.createElement("div",null,m.default.createElement(s.default,{value:ie,onChange:function(e){a(L.changeEditCalculateCommonState(z,"propertyCost",e))}},K&&K.size?K.map(function(e,t){var a={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用",XZ_FINANCE:"财务费用"}[e];return m.default.createElement(A,{key:t,value:e},a)}):null))):"",m.default.createElement("div",{className:"accountConf-separator"}),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"摘要："),m.default.createElement("div",null,m.default.createElement(o.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:D,onChange:function(e){a(L.changeEditCalculateCommonState(z,"oriAbstract",e.target.value))}}))),"SX_HW"!==H&&"LB_CQZC"!==V&&Q&&(W&&"insert"===i||(G&&G.get("cardUuid")||W)&&"modify"===i)?m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"项目："),m.default.createElement("div",{className:"chosen-right"},m.default.createElement(s.default,{combobox:!0,showSearch:!0,value:("COMNCRD"!==G.get("code")&&G.get("code")?G.get("code"):"")+" "+(G.get("name")?G.get("name"):""),onChange:function(e,t){var n=e.split(C.TREE_JOIN_STR),r=t.props.uuid,i=n[0],o=n[1];a(L.changeEditCalculateCommonState(z,"projectCard",(0,p.fromJS)({cardUuid:r,name:o,code:i})))}},B&&B.filter(function(e){return"COMNCRD"!==e.get("code")}).map(function(e,t){return m.default.createElement(A,{key:e.get("uuid"),value:""+e.get("code")+C.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")},("COMNCRD"!==e.get("code")?e.get("code"):"")+" "+e.get("name"))})),m.default.createElement("div",{className:"chosen-word",onClick:function(){a(L.changeEditCalculateCommonState("commonCardObj","modalName","singleModalProject")),a(L.getProjectAllCardList(X,"showSingleModal",!1,!0))}},"选择"))):null,"SX_HW"!==H?m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"税额："),m.default.createElement("div",null,m.default.createElement(h.default,{value:J,onChange:function(e){(0,v.numberTest)(e,function(e){a(L.changeEditCalculateCommonState(z,"amount",e))},!0)}}))):null,m.default.createElement("div",{className:"accountConf-separator"}),"SX_HW"===H&&ne&&ne.map(function(e,t){return re&&re.map(function(t,a){t.get("uuid")===e.get("cardUuid")&&(t.get("uuid"),t.get("amount"))}),ce+=Number(e.get("amount")),m.default.createElement("div",{key:t},m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"存货："),m.default.createElement("div",{className:"chosen-right"},m.default.createElement(s.default,{showSearch:!0,combobox:!0,value:(e.get("code")?e.get("code"):"")+" "+(e.get("name")?e.get("name"):""),onChange:function(n){var r=n.split(C.TREE_JOIN_STR),i=r[0],o=r[1],l={cardUuid:r[2],name:o,code:i,amount:e.get("amount"),warehouseCardUuid:e.get("warehouseCardUuid")?e.get("warehouseCardUuid"):"",warehouseCardName:e.get("warehouseCardName")?e.get("warehouseCardName"):"",warehouseCardCode:e.get("warehouseCardCode")?e.get("warehouseCardCode"):""};a(I.changeEditCalculateCommonString("TaxTransfer",["stockCardList",t],(0,p.fromJS)(l)))}},oe),m.default.createElement("div",{className:"chosen-word",onClick:function(){a(L.getStockCategoryList(U.getIn(["acBusinessExpense","stockRange"]),!0)),a(L.changeEditCalculateCommonState("commonCardObj","modalName","singleModalStock")),a(L.changeEditCalculateCommonState("commonCardObj","showSingleModal",!0)),a(L.changeEditCalculateCommonState("views","selectI",t))}},"选择")),m.default.createElement("span",{className:"icon-content"},m.default.createElement("span",{className:"icon-plus-margin"},m.default.createElement(y.default,{type:"simple-plus",theme:"outlined",onClick:function(){a(L.changeJxsStockList(ne,t,"add",F))}})),ne.size>1?m.default.createElement("span",null,m.default.createElement(y.default,{type:"sob-delete",theme:"outlined",onClick:function(){a(L.changeJxsStockList(ne,t,"delete",F))}})):"")),O?m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"仓库："),m.default.createElement(s.default,{value:(e.get("warehouseCardCode")?e.get("warehouseCardCode"):"")+" "+(e.get("warehouseCardName")?e.get("warehouseCardName"):""),onChange:function(e){var n=e.split(C.TREE_JOIN_STR),r=n[1],i=n[0],o=n[2];a(I.changeEditCalculateCommonString("TaxTransfer",["stockCardList",t,"warehouseCardName"],r)),a(I.changeEditCalculateCommonString("TaxTransfer",["stockCardList",t,"warehouseCardCode"],i)),a(I.changeEditCalculateCommonString("TaxTransfer",["stockCardList",t,"warehouseCardUuid"],o))}},Y&&Y.size&&Y.map(function(e,t){return m.default.createElement(A,{key:e.get("code"),value:""+e.get("code")+C.TREE_JOIN_STR+e.get("name")+C.TREE_JOIN_STR+e.get("uuid")},e.get("code")&&"DFTCRD"!==e.get("code")?e.get("code")+" "+e.get("name"):e.get("name"))}))):null,m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"税额："),m.default.createElement("div",null,m.default.createElement(h.default,{value:e.get("amount"),onChange:function(e){(0,v.numberTest)(e,function(e){return a(I.changeEditCalculateCommonString("TaxTransfer",["stockCardList",t,"amount"],e))},!0)}}))))}),"SX_HW"===H?m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"合计税额：",(0,E.formatMoney)(ce))):null,m.default.createElement(T.default,{dispatch:a,showSingleModal:ae,MemberList:q,thingsList:$,selectedKeys:""===ee?["all"+C.TREE_JOIN_STR+"1"]:ee,stockCardList:ne,title:"singleModalStock"===te?"选择存货":"选择项目",selectFunc:function(e,t){var n=e.code,r=e.name;a("singleModalStock"===te?I.changeEditCalculateCommonString("TaxTransfer",["stockCardList",P],(0,p.fromJS)({cardUuid:t,name:r,code:n,amount:""})):L.changeEditCalculateCommonState(z,"projectCard",(0,p.fromJS)({cardUuid:t,name:r,code:n}))),a(L.changeEditCalculateCommonState("commonCardObj","showSingleModal",!1))},cancel:function(){a(L.changeEditCalculateCommonState("commonCardObj","showSingleModal",!1))},selectListFunc:function(e,t){a("singleModalStock"===te?"all"===e?L.getStockCategoryList(U.getIn(["acBusinessExpense","stockRange"]),!0):L.getStockCategoryList(U.getIn(["acBusinessExpense","stockRange"])):"all"===e?L.getProjectAllCardList(X,"showSingleModal",!0,!0):L.getProjectSomeCardList(e,t))}}))}}]),t}(),r.displayName="Jxsezc",n=i))||n;t.default=R},2602:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=R(a(32)),l=R(a(100)),u=R(a(1230)),c=R(a(37)),s=R(a(89)),d=R(a(45)),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(51),a(99),a(1231),a(38),a(88),a(55);var g=R(a(1)),p=a(17),C=a(22),h=R(a(1237)),y=R(a(90)),E=a(18),S=R(a(6)),T=(A(a(27)),a(127),R(a(1477)),R(a(1296))),_=(a(1310),R(a(1424))),v=R(a(1757)),b=R(a(2603)),L=R(a(2606)),I=A(a(172)),N=A(a(130)),O=A(a(485));function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function R(e){return e&&e.__esModule?e:{default:e}}d.default.Option;var w=s.default.Group,P=(0,p.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showSingleInventoryModal:!1,selectTreeUuid:"all",selectTreeLevel:0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,g.default.Component),m(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.StockBuildUpTemp,r=t.hideCategoryList,i=t.insertOrModify,d=t.paymentType,m=t.disabledDate,p=t.commonCardObj,A=t.enableWarehouse,R=t.openQuantity,P=t.calculateViews,U=t.serialList,M=this.state,k=M.showSingleInventoryModal,j=M.selectTreeUuid,J=M.selectTreeLevel,D=P.get("paymentTypeStr"),x=this.props.oriDate,F=n.get("oriAbstract"),H=(n.get("runningIndex"),n.get("jrIndex")),B=n.get("oriState"),G=n.get("amount")?n.get("amount"):0,Y=n.get("stockCardList"),Z=n.get("stockCardOtherList"),z=n.get("oriStockCardList"),W=n.get("oriStockCardOtherList"),K=n.get("allStockCardList"),X=(n.get("stockCardUuidList"),n.get("wareHouseCardList")),V=n.get("assemblySheet"),Q=n.get("allWareHouseCardList"),q=n.get("assemblyNumber"),$=n.get("curItemIsAvailable"),ee=n.get("oriUuid"),te=(P.get("selectI"),p.get("showSingleModal")),ae=p.get("memberList"),ne=p.get("thingsList"),re=p.get("selectItem"),ie=p.get("selectList"),oe=p.get("selectedKeys"),le=p.get("cardPageObj"),ue=p.get("selectThingsList"),ce=(p.get("modalName"),[]),se=[],de=[];Y&&Y.map(function(e){ce.push(e.get("cardUuid")),"STATE_CHZZ_ZZCX"===B&&se.push({cardUuid:e.get("cardUuid"),storeUuid:e.get("warehouseCardUuid"),assistList:e.get("assistList"),batchUuid:e.get("batchUuid"),isUniformPrice:e.get("isUniformPrice"),index:0,noNeedPrice:!1,moreUnit:e.getIn(["unit","unitList"])&&e.getIn(["unit","unitList"]).size})}),Z&&Z.size&&Z.map(function(e){"STATE_CHZZ_ZZCX"===B&&de.push({cardUuid:e.get("cardUuid"),storeUuid:e.get("warehouseCardUuid"),assistList:e.get("assistList"),batchUuid:e.get("batchUuid"),isUniformPrice:e.get("isUniformPrice"),index:0,noNeedPrice:!1,moreUnit:e.getIn(["unit","unitList"])&&e.getIn(["unit","unitList"]).size})}),"STATE_CHZZ_ZZD"===B&&V&&V.size&&V.map(function(e,t){e.get("materialList")&&e.get("materialList").map(function(e,a){se.push({cardUuid:e.get("materialUuid"),storeUuid:e.get("warehouseCardUuid")?e.get("warehouseCardUuid"):"",assistList:e.get("assistList"),batchUuid:e.get("batchUuid"),index:t,materialIndex:a})})});ne.size?ne.filter(function(e){return-1===ce.indexOf(e.get("uuid"))}):(0,E.fromJS)([]);return"LB_CHZZ"===d?g.default.createElement("div",{className:"accountConf-modal-list"},"modify"===i?g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,"流水号："),g.default.createElement("div",null,g.default.createElement(h.default,{style:{width:"70px",marginRight:"5px"},value:H,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?a(N.changeEditCalculateCommonState("StockBuildUpTemp","jrIndex",e.target.value)):c.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,"日期："),g.default.createElement("div",null,g.default.createElement(u.default,{allowClear:!1,disabledDate:m,value:(0,S.default)(x),onChange:function(e){var t=e.format("YYYY-MM-DD");a(I.changeLrAccountCommonString("ori","oriDate",t)),"STATE_CHZZ_ZZCX"===B?se.length+de.length>0&&a(O.getModifyStockPrice(t,se.concat(de),"StockBuildUp","stockCardList","stock")):se.length>0&&a(O.getModifyStockPrice(t,se,"StockBuildUp","stockCardList","Assembly"))}}))),g.default.createElement(T.default,{dispatch:a,insertOrModify:i,paymentTypeStr:D,hideCategoryList:r}),g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null),g.default.createElement("div",null,g.default.createElement(w,{value:B,disabled:"modify"===i,onChange:function(e){a(N.changeEditCalculateCommonString("StockBuildUp","oriState",e.target.value)),a(N.changeEditCalculateCommonString("StockBuildUp","stockCardList",(0,E.fromJS)([{}]))),a(N.changeEditCalculateCommonString("StockBuildUp","stockCardOtherList",(0,E.fromJS)([{}]))),a(N.changeEditCalculateCommonString("StockBuildUp","assemblySheet",(0,E.fromJS)([])))}},g.default.createElement(s.default,{key:"a",value:"STATE_CHZZ_ZZCX"},"组装拆卸"),R?g.default.createElement(s.default,{key:"b",value:"STATE_CHZZ_ZZD"},"组装单组装"):null))),g.default.createElement("div",{className:"accountConf-separator"}),g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("label",null,"摘要："),g.default.createElement("div",null,g.default.createElement(l.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:F,onChange:function(e){a(N.changeEditCalculateCommonString("StockBuildUp","oriAbstract",e.target.value))}}))),"STATE_CHZZ_ZZD"===B&&V.size?g.default.createElement(b.default,{dispatch:a,stockCardList:Z,stockList:K,stockRange:[],amount:G,oriDate:x,oriUuid:ee,oriState:B,amountDisable:!0,assemblyNumber:q,showSingleModal:te,MemberList:ae,selectThingsList:ue,thingsList:ne,carryoverCardList:Q,currentCardType:"stock",warehouseList:X,insertOrModify:i,enableWarehouse:A,openQuantity:R,oriStockTemplate:W,sectionTemp:"StockBuildUp",assemblySheet:V,selectList:ie,selectItem:re,curItemIsAvailable:$,serialList:U,cardPageObj:le}):null,"STATE_CHZZ_ZZCX"===B?g.default.createElement(_.default,{dispatch:a,stockCardList:Y,stockAllLength:(0,C.numberCalculate)(Y.size,Z.size),stockList:K,stockRange:[],amount:G,oriDate:x,oriUuid:ee,oriState:B,showSingleModal:te,MemberList:ae,selectThingsList:ue,thingsList:ne,carryoverCardList:Q,currentCardType:"stock",selectedKeys:oe,warehouseList:X,insertOrModify:i,enableWarehouse:A,openQuantity:R,selectList:ie,selectItem:re,stockTitleName:"物料",needTotalAmount:!0,stockTemplate:"stockCardList",oriStockTemplate:z,sectionTemp:"StockBuildUp",amountDisable:!1,needHidePrice:!1,serialList:U,assemblyNumber:q,selectTreeCallBack:function(t,n){a("all"===t?O.getStockCardList({temp:"StockBuildUpTemp",currentPage:1}):N.getStockSomeCardList({uuid:t,level:n,currentPage:1})),e.setState({selectTreeUuid:t,selectTreeLevel:n})},callback:function(){var e=Y.size,t=[];re&&re.size&&re.map(function(a,n){t.push({cardUuid:a.get("uuid"),storeUuid:"",assistList:a.get("assistList"),batchUuid:a.get("batchUuid"),isUniformPrice:a.get("isUniformPrice"),index:e+n,noNeedPrice:!1,moreUnit:a.getIn(["unit","unitList"])&&a.getIn(["unit","unitList"]).size})}),t.length>0&&a(N.getStockBuildUpPrice(x,t,e,"StockBuildUp","notFinish"))},cardPageObj:le,cardPaginationCallBack:function(e){a("all"===j?O.getStockCardList({temp:"StockBuildUpTemp",currentPage:e}):N.getStockSomeCardList({uuid:j,level:J,currentPage:e}))}}):null,"STATE_CHZZ_ZZCX"===B?g.default.createElement(_.default,{dispatch:a,stockCardList:Z,stockAllLength:(0,C.numberCalculate)(Y.size,Z.size),stockList:K,stockRange:[],amount:G,oriDate:x,oriUuid:ee,oriState:B,amountDisable:!0,assemblyNumber:q,showSingleModal:te,MemberList:ae,selectThingsList:ue,thingsList:ne,carryoverCardList:Q,currentCardType:"stock",selectedKeys:oe,warehouseList:X,insertOrModify:i,enableWarehouse:A,openQuantity:R,selectList:ie,selectItem:re,stockTitleName:"成品",needTotalAmount:!0,stockTemplate:"stockCardOtherList",oriStockCardList:z,sectionTemp:"StockBuildUp",serialList:U,needHidePrice:!1,selectTreeCallBack:function(t,n){a("all"===t?N.getStockCardList("StockBuildUpTemp"):N.getStockSomeCardList({uuid:t,level:n,currentPage:1})),e.setState({selectTreeUuid:t,selectTreeLevel:n})},callback:function(){var e=Z.size,t=[];re&&re.size&&re.map(function(a,n){t.push({cardUuid:a.get("uuid"),storeUuid:"",assistList:a.get("assistList"),batchUuid:a.get("batchUuid"),isUniformPrice:a.get("isUniformPrice"),index:e+n,noNeedPrice:!1,moreUnit:a.getIn(["unit","unitList"])&&a.getIn(["unit","unitList"]).size})}),t.length>0&&a(N.getStockBuildUpPrice(x,t,e,"StockBuildUp","finish"))},cardPageObj:le,cardPaginationCallBack:function(e){a("all"===j?O.getStockCardList({temp:"StockBuildUpTemp",currentPage:e}):N.getStockSomeCardList({uuid:j,level:J,currentPage:e}))}}):null,"STATE_CHZZ_ZZD"===B?g.default.createElement("div",{className:"edit-running-modal-list-item"},g.default.createElement("div",{className:"calculate-inventory-button"},g.default.createElement(o.default,{onClick:function(){e.setState({showSingleInventoryModal:!0}),a(N.getStockBuildUpAssembly("",1,!0,1))}},g.default.createElement(y.default,{type:"big-plus"}),"  添加组装单"),g.default.createElement(o.default,{style:{marginLeft:"10px"},onClick:function(){a(N.changeEditCalculateCommonState("views","showall",!0)),a(N.changeEditCalculateCommonState("views","isAssembly",!0)),a(N.changeEditCalculateCommonState("views","isCount",!1)),a(N.changeEditCalculateCommonState("views","isProduct",!1))}},g.default.createElement(y.default,{type:"upload"}),"  导入组装单"))):null,"STATE_CHZZ_ZZD"===B&&V.size?g.default.createElement(L.default,{assemblySheet:V,enableWarehouse:A}):null,g.default.createElement(v.default,{showCommonChargeModal:k,MemberList:ae,thingsList:ne,dispatch:a,oriState:B,oriUuid:ee,selectedKeys:oe,selectItem:re,selectList:ie,assemblySheet:V,assemblyNumber:q,sectionTemp:"StockBuildUp",serialList:(0,E.fromJS)([]),cancel:function(){e.setState({showSingleInventoryModal:!1})},title:"选择存货",callback:function(t,n){var r=n.toJS(),i=(t.toJS(),t.size),o=[],l=r.length&&r.map(function(e,t){var a=(0,C.numberCalculate)(e.curQuantity,e.quantity,4,"divide",4);return f({},e,{materialList:e.materialList&&e.materialList.length&&e.materialList.map(function(e,n){var r=e.financialInfo.openSerial;return e.cardUuid=e.materialUuid,e.storeUuid=e.warehouseCardUuid?e.warehouseCardUuid:"",e.quantity=r?"":(0,C.numberCalculate)(a,e.quantity,4,"multiply",4),e.parentIndex=t,o.push(e),e})||[]})})||[];o.length>0&&a(N.getStockBuildUpPrice(x,o,i,"StockBuildUp","assemblySheet",l)),e.setState({selectTreeUuid:"all",selectTreeLevel:0})},selectTreeFunc:function(t,n){a("all"===t?N.getStockBuildUpAssembly("",1,!1,1):N.getStockBuildUpAssembly(t,n,!1,1)),e.setState({selectTreeUuid:t,selectTreeLevel:n})},cardPageObj:le,cardPaginationCallBack:function(e){a("all"===j?N.getStockBuildUpAssembly("",1,!1,e):N.getStockBuildUpAssembly(j,J,!1,e))}})):null}}]),t}(),r.displayName="Chzz",n=i))||n;t.default=P},2603:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=v(a(47)),i=v(a(37)),o=v(a(45)),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(38),a(55);var c=v(a(1)),s=a(17),d=a(18),f=(a(56),v(a(6)),v(a(1237)),v(a(483)),a(22)),m=_(a(27)),g=v(a(90)),p=(a(1310),v(a(1374))),C=v(a(1757)),h=v(a(2604)),y=v(a(487)),E=v(a(1521)),S=v(a(1345)),T=(_(a(484)),_(a(130)));_(a(485)),_(a(172));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}var b=o.default.Option,L=(0,s.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showCardModal:!1,warehouseModal:!1,showSingleInventoryModal:!1,warehouseCards:{warehouseCardUuid:"",warehouseCardCode:"",warehouseCardName:""},showModal:!1,assemblyNumberModal:!1,assemblyIndex:0,assemblyNumber:"",assemblyUuid:"",showSerial:!1,showEditSerial:!1,curProductItem:(0,d.fromJS)([]),curMaterialItem:(0,d.fromJS)([]),chooseSerialList:(0,d.fromJS)([]),curIndex:-1,curMaterialIndex:-1,curMaterialPrice:"",selectTreeUuid:"all",selectTreeLevel:0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=(t.stockCardList,t.carryoverCardList),u=t.stockList,s=t.warehouseList,_=(t.stockRange,t.amount,t.taxRate,t.showSingleModal,t.showStockModal,t.selectThingsList,t.selectedKeys),v=(t.categoryTypeObj,t.currentCardType,t.insertOrModify),L=t.enableWarehouse,I=t.openQuantity,N=t.selectList,O=t.selectItem,A=t.oriState,R=t.oriDate,w=(t.oriStockCardList,t.sectionTemp),P=(t.callback,t.amountDisable,t.assemblySheet),U=t.MemberList,M=t.thingsList,k=t.curItemIsAvailable,j=(t.serialList,t.oriUuid),J=t.cardPageObj,D=this.state,x=D.showCardModal,F=D.warehouseModal,H=D.showSingleInventoryModal,B=D.warehouseCards,G=D.assemblyNumberModal,Y=D.assemblyIndex,Z=D.assemblyNumber,z=(D.assemblyUuid,D.showEditSerial),W=D.showSerial,K=D.curProductItem,X=D.curMaterialItem,V=D.curIndex,Q=D.curMaterialIndex,q=D.curMaterialPrice,$=D.chooseSerialList,ee=D.selectTreeUuid,te=D.selectTreeLevel,ae="";ae=L&&I?"assembly-content-area-warehouse":L&&!I?"assembly-content-area-warehouse-no-open":!L&&I?"assembly-content-area":"assembly-content-area-no-open";P.get("materialList"),P.getIn([Y,"curQuantity"]);var ne=[];P.map(function(e,t){e.get("materialList").map(function(e,a){ne.push(l({},e.toJS(),{index:t,i:a}))})});var re=ne.filter(function(e,t){return e.materialUuid===X.get("materialUuid")&&!(e.index===V&&e.i===Q)}).reduce(function(e,t){return e.concat(t.serialList||[])},[]);return c.default.createElement("div",{className:"assembly-content"},c.default.createElement("div",{className:ae+" assembly-content-title",style:{marginBottom:"10px"}},c.default.createElement("span",null,"存货"),L?c.default.createElement("span",null,c.default.createElement("span",{style:{marginRight:"5px"}},"仓库"),c.default.createElement(g.default,{type:"editConfig",onClick:function(){e.setState({warehouseModal:!0})}})):"",I?c.default.createElement("span",null,"数量"):"",I?c.default.createElement("span",null,"单价"):"",c.default.createElement("span",null,"金额"),c.default.createElement("span",null)),P&&P.map(function(t,n){t.get("serialList")||(0,d.fromJS)([]);return c.default.createElement(h.default,{dispatch:a,stockList:u,warehouseList:s,enableWarehouse:L,openQuantity:I,oriDate:R,sectionTemp:w,assemblySheet:P,insertOrModify:v,item:t,index:n,className:ae,assemblyIndex:Y,allMaterialList:(0,d.fromJS)(ne),assemblyOnclick:function(){e.setState({assemblyIndex:n,showSingleInventoryModal:!0})},assemblyNumberOnClick:function(){e.setState({assemblyNumberModal:!0,assemblyIndex:n,assemblyNumber:t.get("curQuantity")})},showModal:function(){e.setState({showCardModal:!0})},assemblySerialOnclick:function(a){e.setState({curIndex:n,curProductItem:t,chooseSerialList:a?(0,d.fromJS)(a):t.get("serialList")||(0,d.fromJS)([]),showEditSerial:!0})},showEditSerialFun:function(t){e.setState({showEditSerial:t})},serialOnClick:function(a,r,i){e.setState({curIndex:n,curProductItem:t,curMaterialItem:a,curMaterialIndex:r,curMaterialPrice:a.get("price"),chooseSerialList:i?(0,d.fromJS)(i):a.get("serialList")||(0,d.fromJS)([]),showSerial:!0})}})}),W?c.default.createElement(E.default,{visible:!0,dispatch:a,serialList:this.props.serialList,curSerialList:$.toJS(),item:(0,d.fromJS)(l({},X.toJS(),{cardUuid:X.get("materialUuid")})),oriUuid:j,selectedList:re,onClose:function(){e.setState({showSerial:!1})},onOK:function(e){var t=e.filter(function(e){return e.serialNumber}),n=(0,f.numberCalculate)(q,t.length,4,"multiply",2),r=K.get("materialList"),i=0,o=r.getIn([Q,"amount"]);r&&r.size&&r.map(function(e){i=(0,f.numberCalculate)(i,e.get("amount"))});var l=(0,f.numberCalculate)((0,f.numberCalculate)(i,o,2,"subtract"),n),u=(0,f.numberCalculate)(l,K.get("curQuantity"),4,"divide",4);a(T.changeEditCalculateCommonString(w,["assemblySheet",V,"materialList",Q,"serialList"],(0,d.fromJS)(t))),a(T.changeEditCalculateCommonString(w,["assemblySheet",V,"materialList",Q,"quantity"],t.length)),a(T.changeEditCalculateCommonString(w,["assemblySheet",V,"materialList",Q,"isModify"],!0)),a(T.changeEditCalculateCommonString(w,["assemblySheet",V,"materialList",Q,"amount"],n)),a(T.changeEditCalculateCommonString(w,["assemblySheet",V,"amount"],l)),a(T.changeEditCalculateCommonString(w,["assemblySheet",V,"price"],u))}}):"",z?c.default.createElement(S.default,{visible:!0,dispatch:a,serialList:$,item:K,onClose:function(){e.setState({showEditSerial:!1})},onOk:function(e){var t=e.filter(function(e){return e.serialNumber}),n=P.getIn([V,"quantity"]),r=(P.getIn([V,"financialInfo","openShelfLife"]),(0,f.numberCalculate)(t.length,n,4,"divide",4));if(k){var i=P.getIn([V,"oriMaterialList"])&&P.getIn([V,"oriMaterialList"]).toJS()||[],o=0,l=[],u=P.toJS();if(u[V].materialList=i.map(function(e,t){e.cardUuid=e.materialUuid,e.storeUuid=e.warehouseCardUuid?e.warehouseCardUuid:"",e.parentIndex=V;var a=e.financialInfo.openSerial;return e.quantity=a?"":(0,f.numberCalculate)(r,e.quantity,4,"multiply",4),l.push(e),o=(0,f.numberCalculate)(o,e.amount),e}),u[V].curQuantity=t.length,u[V].serialList=t,u[V].isModify=!0,l.length>0)a(T.getStockBuildUpPrice(R,l,V,"StockBuildUp","assemblySheet",u,!0));else{var c=(0,f.numberCalculate)(o,t.length,4,"divide",4);a(T.changeEditCalculateCommonString(w,["assemblySheet",V,"amount"],o)),a(T.changeEditCalculateCommonString(w,["assemblySheet",V,"price"],c))}}}}):"",c.default.createElement(r.default,{visible:G,title:"修改组装数量",onCancel:function(){e.setState({assemblyNumberModal:!1,assemblyIndex:0,assemblyUuid:""})},onOk:function(){if(Number(Z)){var t=P.getIn([Y,"quantity"]),n=(P.getIn([Y,"financialInfo","openShelfLife"]),(0,f.numberCalculate)(Z,t,4,"divide",4));if(k){var r=P.getIn([Y,"oriMaterialList"])&&P.getIn([Y,"oriMaterialList"]).toJS()||[],o=0,u=[],c=P.toJS();if(c[Y].materialList=r.map(function(e,t){e.cardUuid=e.materialUuid,e.storeUuid=e.warehouseCardUuid?e.warehouseCardUuid:"",e.parentIndex=Y;var a=e.financialInfo.openSerial;return e.quantity=a?"":(0,f.numberCalculate)(n,e.quantity,4,"multiply",4),u.push(e),o=(0,f.numberCalculate)(o,e.amount),e}),c[Y].curQuantity=Z,u.length>0)a(T.getStockBuildUpPrice(R,u,Y,"StockBuildUp","assemblySheet",c,!0));else{var s=(0,f.numberCalculate)(o,Z,4,"divide",4),m=P.get(Y).toJS(),g=l({},m,{amount:o,price:s});a(T.changeEditCalculateCommonString(w,["assemblySheet",Y],(0,d.fromJS)(g)))}}e.setState({assemblyNumberModal:!1,assemblyIndex:0,assemblyUuid:""})}else i.default.info("请输入勾选组装单的数量")}},c.default.createElement("div",{className:"assembly-number-modal"},c.default.createElement("span",null,"数量："),c.default.createElement("div",{className:"assembly-number-modal-input"},c.default.createElement(y.default,{value:Z,onChange:function(t){(0,f.numberFourTest)(t,function(t){e.setState({assemblyNumber:t})})}})))),c.default.createElement(C.default,{showCommonChargeModal:H,MemberList:U,thingsList:M,dispatch:a,oriState:A,selectedKeys:_,selectItem:O,selectList:N,assemblySheet:P,assemblyNumber:Z,sectionTemp:"StockBuildUp",cancel:function(){e.setState({showSingleInventoryModal:!1})},title:"选择存货",serialList:$,callback:function(e,t){var n,r,i=t.toJS(),o=e.toJS(),u=e.size,c=[],s=i.length&&i.map(function(e,t){var a=(0,f.numberCalculate)(e.curQuantity,e.quantity,4,"divide",4);return l({},e,{materialList:e.materialList&&e.materialList.length&&e.materialList.map(function(e,n){e.cardUuid=e.materialUuid,e.storeUuid=e.warehouseCardUuid?e.warehouseCardUuid:"",e.parentIndex=t;var r=e.financialInfo.openSerial;return e.quantity=r?"":(0,f.numberCalculate)(a,e.quantity,4,"multiply",4),c.push(e),e})||[]})})||[];r=o.fill(s[0],Y,Y+1);var d,m=(d=s,Array.isArray(d)?d:Array.from(d)),g=(m[0],m.slice(1));(n=r).splice.apply(n,[Y+1,0].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(g))),c.length>0&&a(T.getStockBuildUpPrice(R,c,u,"StockBuildUp","assemblySheet",r,!0))},selectTreeFunc:function(e,t){a("all"===e?T.getStockBuildUpAssembly("",1,!1,1):T.getStockBuildUpAssembly(e,t,!1,1))},cardPageObj:J,cardPaginationCallBack:function(e){a("all"===ee?T.getStockBuildUpAssembly("",1,!1,e):T.getStockBuildUpAssembly(ee,te,!1,e))}}),c.default.createElement(p.default,{showModal:x,closeModal:function(){return e.setState({showCardModal:!1})},dispatch:a,enableWarehouse:L,fromPage:"payment"}),c.default.createElement(r.default,{visible:F,title:"批量设置仓库",onCancel:function(){e.setState({warehouseModal:!1})},onOk:function(){var t=B.warehouseCardUuid,r=(B.warehouseCardCode,B.warehouseCardName,n.toJS(),P.toJS()),i=[],o=[];r&&r.length&&r.map(function(e,a){e.amount="",e.materialList&&e.materialList.map(function(e,n){e.cardUuid=e.materialUuid,e.storeUuid=t,e.parentIndex=a,i.push(e),e.materialUuid&&o.push(e.materialUuid)})}),o.length&&a(T.getStockBuildUpPrice(R,i,0,"StockBuildUp","assemblySheet",r,!0,B)),e.setState({warehouseModal:!1,warehouseCards:{}})}},c.default.createElement("div",{style:{display:"flex"}},c.default.createElement("span",{style:{width:"100px",lineHeight:"28px"}},"仓库："),c.default.createElement(o.default,{style:{flex:1},placeholder:"请选择",combobox:!0,showSearch:!0,value:B.warehouseCardUuid?(B.warehouseCardCode||"")+" "+(B.warehouseCardName||""):void 0,onChange:function(t){var a=t.split(m.TREE_JOIN_STR),n=a[0],r=a[1],i=a[2];e.setState({warehouseCards:{warehouseCardUuid:n,warehouseCardCode:r,warehouseCardName:i}})}},s&&s.map(function(e,t){return c.default.createElement(b,{key:e.get("uuid"),value:""+e.get("uuid")+m.TREE_JOIN_STR+e.get("code")+m.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))})))))}}]),t}())||n;t.default=L},2604:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=A(a(47)),i=A(a(32)),o=A(a(1230)),l=A(a(37)),u=A(a(14)),c=A(a(1256)),s=A(a(45)),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(51),a(1231),a(38),a(78),a(1257),a(55);var m=a(1),g=A(m),p=a(17),C=a(18),h=(a(56),A(a(6))),y=A(a(1237)),E=A(a(483)),S=a(22),T=O(a(27)),_=A(a(90)),v=(a(1310),A(a(1523)),A(a(2605))),b=(A(a(487)),A(a(1363))),L=O(a(130)),I=O(a(485)),N=O(a(172));function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}var R=s.default.Option,w=(0,p.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.closeFocus=function(e){for(var t=e.target||e.srcElement,n=1;t.parentNode&&n<20;){if(t.parentNode.className&&"string"==typeof t.parentNode.className&&t.parentNode.className.indexOf("assembly-are-for-dom")>-1)return;t=t.parentNode,n++}a.setState({productFocus:!1,addBatch:!1,assistModal:!1})},a.state={productFocus:!1,chooseIndex:-1,addBatch:!1,batchNumber:"",batchDate:(new S.DateLib).toString(),expirationDate:(new S.DateLib).toString(),assistModal:!1,asssistName:"",classificationUuid:"",assIndex:-1,batchModal:!1,addBatchChange:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,g.default.Component),f(t,[{key:"componentDidMount",value:function(){document.getElementsByTagName("body")[0].addEventListener("click",this.closeFocus)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.item!==e.item||this.props.index!==e.index||this.state!==t}},{key:"componentWillUnmount",value:function(){document.getElementsByTagName("body")[0].removeEventListener("click",this.closeFocus)}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.stockList,f=t.warehouseList,p=t.insertOrModify,O=t.enableWarehouse,A=t.openQuantity,w=t.oriDate,P=t.sectionTemp,U=t.assemblySheet,M=t.allMaterialList,k=t.item,j=t.index,J=t.className,D=t.assemblyOnclick,x=t.assemblyNumberOnClick,F=t.assemblySerialOnclick,H=(t.showModal,t.serialOnClick),B=(t.showEditSerialFun,this.state),G=B.productFocus,Y=B.chooseIndex,Z=B.addBatch,z=B.batchNumber,W=B.batchDate,K=B.expirationDate,X=B.assistModal,V=B.classificationUuid,Q=B.asssistName,q=B.assIndex,$=B.batchModal,ee=B.addBatchChange,te=0,ae="",ne=k.get("assistList")||(0,C.fromJS)([]),re=k.getIn(["financialInfo","openBatch"]),ie=k.getIn(["financialInfo","openAssist"]),oe=k.getIn(["financialInfo","openShelfLife"]),le=k.getIn(["financialInfo","assistClassificationList"])||(0,C.fromJS)([]),ue=(k.get("batchList")||(0,C.fromJS)([])).find(function(e){return e.get("batchUuid")===k.get("batchUuid")||e.get("batch")===k.get("batch")})||(0,C.fromJS)({}),ce=ue.get("batch")||k.get("batch")?(ue.get("batch")||k.get("batch"))+(oe&&ue.get("expirationDate")&&"undefined"!==ue.get("expirationDate")?"("+ue.get("expirationDate")+")":""):void 0;return ae=ie&&re?(ne.some(function(e){return e.get("propertyName")})?ne.map(function(e){return e.get("propertyName")}).join():"属性")+" | "+(k.get("batch")?ce:"批次"):ie||re?ie?ne.some(function(e){return e.get("propertyName")})?ne.map(function(e){return e.get("propertyName")}).join():"属性":k.get("batch")?ce:"批次":k.get("code")?(k.get("code")?k.get("code"):"")+" "+(k.get("name")?k.get("name"):""):void 0,g.default.createElement("div",{key:k.get("productUuid")+"+"+j},g.default.createElement("section",{className:"product-content "},g.default.createElement("div",null,"组装成品(",j+1,")"),g.default.createElement("div",{className:J},g.default.createElement("span",{className:"chzz-assembly-sheet-product assembly-are-for-dom",style:{overflow:(k.getIn(["financialInfo","openAssist"])||k.getIn(["financialInfo","openBatch"]))&&G&&k.get("code")?"visible":"hidden"}},g.default.createElement("span",{onClick:function(e){D(),a(L.getStockBuildUpAssembly("",1,!0,1))}},k.get("code")+" "+k.get("name"),g.default.createElement(_.default,{type:"edit-pen"})),k.getIn(["financialInfo","openAssist"])||k.getIn(["financialInfo","openBatch"])?g.default.createElement("span",{onClick:function(t){e.setState({productFocus:!0,chooseIndex:j})}},ae):null,g.default.createElement("div",{className:"assembly-produce-drop-content",style:{display:G&&Y==j?"":"none"},onClick:function(t){t.stopPropagation(),ee&&e.setState({addBatch:!1,addBatchChange:!1})}},ie?g.default.createElement("div",{style:{display:ie?"":"none"}},g.default.createElement("span",null,"属性:"),le.map(function(t,n){return g.default.createElement(s.default,{key:t.get("uuid"),dropdownClassName:"assembly-are-for-dom"+n,value:((ne||(0,C.fromJS)([])).find(function(e){return e.get("classificationUuid")===t.get("uuid")})||(0,C.fromJS)({})).get("propertyName")||void 0,dropdownRender:function(a){return g.default.createElement("div",null,a,g.default.createElement(c.default,{style:{margin:"4px 0"}}),g.default.createElement("div",{style:{padding:"4px 8px",cursor:"pointer"},onMouseDown:function(e){return e.preventDefault()},onClick:function(){e.setState({assistModal:!0,classificationUuid:t.get("uuid"),assIndex:n})}},g.default.createElement(u.default,{type:"plus"})," 新增"))},onChange:function(e){var r=e.split(T.TREE_JOIN_STR),i=r[0],o=r[1],l=ne.size,u=ne.findIndex(function(e){return e.get("classificationUuid")===t.get("uuid")});0===l?a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"assistList"],(0,C.fromJS)([{classificationUuid:t.get("uuid"),classificationName:t.get("name"),propertyUuid:i,propertyName:o}]))):-1===u?a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"assistList",l],(0,C.fromJS)({classificationUuid:t.get("uuid"),classificationName:t.get("name"),propertyUuid:i,propertyName:o}))):(a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"assistList",n,"propertyUuid"],i)),a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"assistList",n,"propertyName"],o)))}},t.get("propertyList").map(function(e){return g.default.createElement(R,{key:e.get("uuid"),value:""+e.get("uuid")+T.TREE_JOIN_STR+e.get("name")},e.get("name"))}))})):"",re?g.default.createElement("div",{style:{position:"relative"}},g.default.createElement("span",null,"批次:"),g.default.createElement(m.Fragment,null,g.default.createElement(s.default,{showSearch:!0,key:k.get("uuid"),dropdownClassName:"assembly-are-for-dom"+j,dropdownRender:function(t){return g.default.createElement("div",null,t,g.default.createElement(c.default,{style:{margin:"4px 0"}}),g.default.createElement("div",{style:{padding:"4px 8px",cursor:"pointer"},onMouseDown:function(e){return e.preventDefault()},onClick:function(){return e.setState({batchModal:!0})}},g.default.createElement(_.default,{type:"edit-pen"}),"修改批次信息"))},showArrow:!1,placeholder:"请选择/新增批次",onDropdownVisibleChange:function(e){e&&a(I.getStockBatchList({inventoryUuid:k.get("uuid"),sectionTemp:P,stockTemplate:"assemblySheet",index:j}))},value:ce,onChange:function(e,t){var n=e.split(T.TREE_JOIN_STR),r=t.props.batchUuid,i=n[0]||"",o=n[1];a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"batch"],i)),a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"batchUuid"],r)),a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"expirationDate"],o))}},k.get("batchList")&&k.get("batchList").map(function(e){return g.default.createElement(R,{key:e.get("batchUuid"),value:""+e.get("batch")+T.TREE_JOIN_STR+e.get("productionDate"),batchUuid:e.get("batchUuid")},e.get("batch")+(e.get("productionDate")?"("+e.get("productionDate")+")":""))})),g.default.createElement("span",{className:"add-button",onClick:function(t){t.preventDefault(),e.setState({addBatch:!0})}},"新增")),g.default.createElement("div",{className:"ls-batch-select-frame",style:{display:Z?"":"none"},onClick:function(e){e.stopPropagation()}},g.default.createElement("div",null,g.default.createElement("span",null,g.default.createElement("span",{style:{color:"red"}},"*"),"批次号："),g.default.createElement(y.default,{value:z,onChange:function(t){t.preventDefault();/^[0-9a-zA-Z]{0,8}$/.test(t.target.value)?e.setState({batchNumber:t.target.value}):l.default.info("批次只支持输入8位以内的数字或字母")},placeholder:"请输入批次号"})),oe?g.default.createElement("div",null,g.default.createElement("span",null,"截止日期："),g.default.createElement(o.default,{placeholder:"请选择生产日期",allowClear:!1,size:"small",value:(0,h.default)(K),onChange:function(t){var a=t.format("YYYY-MM-DD");e.setState({expirationDate:a})}})):"",oe?g.default.createElement("div",null,g.default.createElement("span",null,"生产日期："),g.default.createElement(o.default,{placeholder:"请选择生产日期",allowClear:!1,size:"small",value:(0,h.default)(W),onChange:function(t){var a=t.format("YYYY-MM-DD");e.setState({batchDate:a})}})):"",g.default.createElement("div",null,g.default.createElement(i.default,{onClick:function(){return e.setState({addBatch:!1})}},"取消"),g.default.createElement(i.default,{type:"primary",onClick:function(){a(N.insertBatch(z,W,K,k.get("cardUuid"),function(t){var n=t.batchUuid,r=t.batch,i=t.expirationDate;a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"batch"],r)),a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"batchUuid"],n)),a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"expirationDate"],i)),e.setState({addBatch:!1,batchNumber:"",batchDate:(new S.DateLib).toString(),expirationDate:(new S.DateLib).toString()})}))}},"新增")))):"")),O?g.default.createElement("span",{className:"warehouse-select"},g.default.createElement(E.default,{placeholder:"请选择",combobox:!0,showSearch:!0,value:k.get("warehouseCardUuid")?(k.get("warehouseCardCode")?k.get("warehouseCardCode"):"")+" "+(k.get("warehouseCardName")?k.get("warehouseCardName"):""):void 0,dropdownRender:function(e){return g.default.createElement("div",null,e)},onChange:function(e){var t=e.split(T.TREE_JOIN_STR),n=t[0],r=t[1],i=t[2],o=(k.get("amount"),U.get(j).toJS()),l=d({},o,{warehouseCardUuid:n,warehouseCardCode:r,warehouseCardName:i});a(L.changeEditCalculateCommonString(P,["assemblySheet",j],(0,C.fromJS)(l)))},style:{color:"#1790ff"}},f.map(function(e,t){return g.default.createElement(R,{key:e.get("uuid"),value:""+e.get("uuid")+T.TREE_JOIN_STR+e.get("code")+T.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))}))):"",g.default.createElement("span",{className:"chzz-assembly-number"},k.getIn(["financialInfo","openSerial"])?g.default.createElement("span",{className:"chzz-assembly-sheet",onClick:function(){"modify"!==p||k.get("isModify")?F():a(I.getSerialList(k,j,"in",function(e){a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"serialList"],(0,C.fromJS)(e))),F(e)}))},style:{color:"#1790ff"}},Number(k.get("curQuantity"))?(0,S.formatFour)(Number(k.get("curQuantity"))):"点击输入",g.default.createElement(_.default,{type:"edit-pen"})):g.default.createElement("span",{className:"chzz-assembly-sheet",onClick:function(){x(),a(L.getAssemblyListByProduct([k.get("productUuid")],j))}},(0,S.formatFour)(k.get("curQuantity")),g.default.createElement(_.default,{type:"edit-pen"})),g.default.createElement("div",null,k.get("unitName")?(k.get("unitCode")?k.get("unitCode"):"")+" "+(k.get("unitName")?k.get("unitName"):""):void 0)),g.default.createElement("span",{className:"chzz-assembly-price"},(0,S.formatFour)(k.get("price"))),g.default.createElement("span",{className:"chzz-assembly-amount"},(0,S.formatMoney)(k.get("amount"))),g.default.createElement("span",null,U&&U.size>1?g.default.createElement(_.default,{type:"smallDel",onClick:function(){a(L.deleteStockList(U,j,"delete","StockBuildUp","assemblySheet"))}}):null)),X?g.default.createElement(r.default,{visible:!0,title:"新增属性",className:"inventory-are-for-dom",onCancel:function(){return e.setState({assistModal:!1})},onOk:function(){a(I.insertAssist({classificationUuid:V,name:Q,inventoryUuid:k.get("cardUuid"),sectionTemp:P,isAssembly:!0,isProduct:!0,index:j,assIndex:q},function(t,n){var r=t.filter(function(e){return e.name===n}),i=ne.size,o=ne.findIndex(function(e){return e.get("classificationUuid")===V}),l=r[0].uuid,u=r[0].name;-1===o?a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"assistList",i],(0,C.fromJS)({classificationUuid:V,propertyUuid:l,propertyName:u}))):(a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"assistList",q,"propertyUuid"],l)),a(L.changeEditCalculateCommonString(P,["assemblySheet",j,"assistList",q,"propertyName"],u))),e.setState({assistModal:!1,asssistName:"",assIndex:-1})}))}},g.default.createElement("div",{style:{display:"flex"}},g.default.createElement("span",{style:{width:"72px",lineHeight:"28px"}},"属性名称："),g.default.createElement(y.default,{value:Q,onChange:function(t){t.preventDefault(),e.setState({asssistName:t.target.value})}}))):"",$?g.default.createElement(b.default,{className:"inventory-are-for-dom",visible:!0,onClose:function(){e.setState({batchModal:!1})},onOk:function(t,n,r,i){a(I.modifyBatch({inventoryUuid:k.get("uuid"),sectionTemp:P,index:j,batch:t,batchUuid:n,productionDate:oe?r:"",expirationDate:oe?i:"",isAssembly:!0,isProduct:!0},function(){e.setState({batchModal:!1})}))},saveAndNewForbidden:!0,batchList:k.get("batchList"),openShelfLife:oe}):""),g.default.createElement("section",{className:"materialList-content"},g.default.createElement("div",null,"物料详情"),k.get("materialList")&&k.get("materialList").map(function(e,t){var r=n.find(function(t){return t.get("uuid")===e.get("materialUuid")})||(0,C.fromJS)([]);te=(0,S.numberCalculate)(te,e.get("amount"));var i=e.get("assistList")||(0,C.fromJS)([]),o=U.getIn([j,"materialList",t]).toJS(),l=U.getIn([j,"materialList",t,"amount"]),u=U.get(j).toJS(),c=U.getIn([j,"materialList",t,"basicUnitQuantity"])?U.getIn([j,"materialList",t,"basicUnitQuantity"]):1,s=(0,S.numberCalculate)(k.get("amount"),l,2,"subtract");return g.default.createElement(v.default,{dispatch:a,oriDate:w,stockList:n,warehouseList:f,sectionTemp:P,enableWarehouse:O,openQuantity:A,assistList:i,allMaterialList:M,allMaterialAmount:s,materialItem:o,oldAmount:l,assemblyOldItem:u,oldBasicUnitQuantity:c,item:k,index:j,v:e,i:t,className:J,serialOnClick:H,curItem:r})})))}}]),t}())||n;t.default=w},2605:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=v(a(61)),i=v(a(37)),o=v(a(45)),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(79),a(38),a(55);var c=v(a(1)),s=a(17),d=a(18),f=(a(56),v(a(6)),v(a(1237))),m=v(a(483)),g=a(22),p=_(a(27)),C=v(a(90)),h=a(1310),y=v(a(1523)),E=v(a(487)),S=_(a(130)),T=_(a(485));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}var b=o.default.Option,L=(0,s.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.v!==e.v||this.props.item.get("materialList").size!==e.item.get("materialList").size||this.props.allMaterialAmount!==e.allMaterialAmount}},{key:"render",value:function(){var e,t=this.props,a=t.dispatch,n=t.oriDate,u=t.stockList,s=t.warehouseList,_=t.sectionTemp,v=t.enableWarehouse,L=t.openQuantity,I=t.assistList,N=(t.allMaterialList,t.allMaterialAmount),O=t.materialItem,A=(t.oldAmount,t.assemblyOldItem,t.oldBasicUnitQuantity),R=t.insertOrModify,w=t.item,P=t.index,U=t.v,M=t.i,k=t.className,j=t.serialOnClick;return c.default.createElement(r.default,{title:JSON.parse(U.get("isOpenQuantity")||!1)?c.default.createElement("div",null,c.default.createElement("p",null,"仓库数量：",U.get("referenceQuantity")?(0,g.formatFour)(U.get("referenceQuantity")):0),Number(U.get("referencePrice"))>0?c.default.createElement("p",null,"参考单价：",(0,g.formatFour)(U.get("referencePrice"))):null):"",placement:"right"},c.default.createElement("div",{key:M,className:k+" material-content-box"},c.default.createElement(y.default,{item:U,index:P,oriDate:n,materIndex:M,stockList:u,dispatch:a,stockTitleName:"存货",stockTemplate:"material",sectionTemp:_,cardUuidName:"uuid",isAssemblySheet:!0,onSelectChange:function(e,t){var r=e.split(p.TREE_JOIN_STR),i=r[0],o=r[1],u=r[2],c=r[3],s=w.get("amount"),f=w.get("warehouseCardUuid"),m=w.get("warehouseCardCode"),g=w.get("warehouseCardName"),C=(w.get("unit"),t.props.financialInfo),h={unit:t.props.unit?t.props.unit.toJS():null,cardUuid:i,materialUuid:i,name:u,code:o,amount:s,isOpenQuantity:c,warehouseCardUuid:f,warehouseCardCode:m,warehouseCardName:g,financialInfo:C};"true"===c&&t.props.unit?a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"materialList",M],(0,d.fromJS)(l({},h,{unitUuid:t.props.unit.get("uuid"),unitName:t.props.unit.get("name")})))):a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"materialList",M],(0,d.fromJS)(l({},h)))),a(S.getStockBuildUpPrice(n,[{cardUuid:i,storeUuid:f,assistList:w.get("assistList"),batchUuid:w.get("batchUuid"),index:P,materialIndex:M}],M,_,"assemblySheet"))}}),v?c.default.createElement("span",{className:"warehouse-select"},c.default.createElement(m.default,{placeholder:"请选择",combobox:!0,showSearch:!0,value:U.get("warehouseCardUuid")?(U.get("warehouseCardCode")?U.get("warehouseCardCode"):"")+" "+(U.get("warehouseCardName")?U.get("warehouseCardName"):""):void 0,dropdownRender:function(e){return c.default.createElement("div",null,e)},onChange:function(e){var t=e.split(p.TREE_JOIN_STR),r=t[0],i=t[1],o=t[2];U.get("amount");a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"materialList",M,"warehouseCardUuid"],r)),a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"materialList",M,"warehouseCardCode"],i)),a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"materialList",M,"warehouseCardName"],o)),U.get("materialUuid")&&a(S.getStockBuildUpPrice(n,[{cardUuid:U.get("materialUuid"),storeUuid:r,assistList:U.get("assistList"),batchUuid:U.get("batchUuid"),index:P,materialIndex:M}],M,_,"assemblySheet"))}},s.map(function(e,t){return c.default.createElement(b,{key:e.get("uuid"),value:""+e.get("uuid")+p.TREE_JOIN_STR+e.get("code")+p.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))}))):"",L?c.default.createElement("span",null,U.getIn(["financialInfo","openSerial"])?c.default.createElement("span",{className:"chzz-assembly-sheet",onClick:function(){!v||U.get("warehouseCardUuid")?!U.getIn(["financialInfo","openAssist"])||!I.some(function(e){return!e.get("propertyName")})&&U.getIn(["financialInfo","assistClassificationList"]).size===I.size?!U.getIn(["financialInfo","openBatch"])||U.get("batchUuid")?"modify"!==R||U.get("isModify")?j(U,M):a(T.getSerialList(U,M,"out",function(e){a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"materialList",M,"serialList"],(0,d.fromJS)(e))),j(U,M,e)})):i.default.info("请先填写批次"):i.default.info("请先填写辅助属性"):i.default.info("请先填写仓库")},style:{color:"#1790ff"}},Number(U.get("quantity"))?(0,g.formatFour)(Number(U.get("quantity"))):"点击输入",c.default.createElement(C.default,{type:"edit-pen"})):JSON.parse(U.get("isOpenQuantity")||!1)?c.default.createElement(E.default,{placeholder:"输入数量",value:U.get("quantity"),onChange:function(e){(0,g.numberFourTest)(e,function(e){if(a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"materialList",M,"quantity"],e)),U.get("price")>0){var t=(0,g.numberCalculate)(e,U.get("price"),2,"multiply"),n=(0,g.numberCalculate)(N,t);a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"materialList",M,"amount"],t)),a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"amount"],n)),a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"price"],(0,g.numberCalculate)(n,w.get("curQuantity"),4,"divide",4)))}})}}):"",JSON.parse(U.get("isOpenQuantity")||!1)?(e=U,c.default.createElement(o.default,{placeholder:"单位",style:{marginLeft:"8px",alignSelf:"flex-end"},dropdownClassName:"auto-width",value:U.get("unitName")?(U.get("unitCode")?U.get("unitCode"):"")+" "+(U.get("unitName")?U.get("unitName"):""):void 0,onChange:function(e){var t=e.split(p.TREE_JOIN_STR),n=t[0],r=t[1],i=JSON.parse(t[2])?JSON.parse(t[2]):1,o=i/A,u=(0,g.numberCalculate)(U.get("price"),o,4,"multiply",4),c=(0,g.numberCalculate)(U.get("quantity"),u,2,"multiply"),s=(0,g.numberCalculate)(N,c);a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"amount"],s)),a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"price"],(0,g.numberCalculate)(s,w.get("curQuantity"),4,"divide",4)));var f=l({},O,{unitUuid:n,unitName:r,basicUnitQuantity:i,price:u,amount:c});a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"materialList",M],(0,d.fromJS)(f)))}},e.getIn(["unit","uuid"])?c.default.createElement(b,{key:e.getIn(["unit","uuid"]),value:""+e.getIn(["unit","uuid"])+p.TREE_JOIN_STR+e.getIn(["unit","name"])+p.TREE_JOIN_STR+"1"},e.getIn(["unit","name"])):"",(e.getIn(["unit","unitList"])||[]).map(function(e){return c.default.createElement(b,{key:e.get("uuid"),value:""+e.get("uuid")+p.TREE_JOIN_STR+e.get("name")+p.TREE_JOIN_STR+e.get("basicUnitQuantity")},e.get("name"))}),(e.get("unitList")||[]).map(function(e){return c.default.createElement(b,{key:e.get("uuid"),value:""+e.get("uuid")+p.TREE_JOIN_STR+e.get("name")+p.TREE_JOIN_STR+e.get("basicUnitQuantity")},e.get("name"))}))):""):"",L?c.default.createElement("span",null,JSON.parse(U.get("isOpenQuantity")||!1)?c.default.createElement(E.default,{placeholder:"请输入单价",value:U.get("price"),onChange:function(e){(0,g.numberFourTest)(e,function(e){if(a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"materialList",M,"price"],e)),U.get("quantity")>0){var t=((e||0)*U.get("quantity")).toFixed(2);a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"materialList",M,"amount"],t));var n=(0,g.numberCalculate)(N,t);a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"amount"],n)),a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"price"],(0,g.numberCalculate)(n,w.get("curQuantity"),4,"divide",4)))}})}}):""):"",c.default.createElement("span",null,c.default.createElement(f.default,{placeholder:"请输入金额",value:U.get("amount"),onChange:function(e){(0,h.numberTest)(e,function(e){a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"materialList",M,"amount"],e));var t=(0,g.numberCalculate)(N,e);if(a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"amount"],t)),U.get("quantity")>0){var n=((e||0)/U.get("quantity")).toFixed(4);a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"materialList",M,"price"],n))}a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"price"],(0,g.numberCalculate)(t,w.get("curQuantity"),4,"divide",4)))})}})),c.default.createElement("span",null,c.default.createElement(C.default,{type:"smallAdd",onClick:function(){a(S.changeMaterialList(P,M,w.get("materialList"),"add"))}}),w.get("materialList")&&w.get("materialList").size>1?c.default.createElement(C.default,{type:"smallDel",onClick:function(){a(S.changeMaterialList(P,M,w.get("materialList"),"delete"));var e=w.getIn(["materialList",M,"amount"]),t=w.get("curQuantity"),n=w.get("amount"),r=(0,g.numberCalculate)(n,e,2,"subtract");a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"amount"],r)),a(S.changeEditCalculateCommonString(_,["assemblySheet",P,"price"],(0,g.numberCalculate)(r,t,2,"divide")))}}):null)))}}]),t}())||n;t.default=L},2606:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=s(a(1)),o=a(17),l=a(18),u=(a(56),a(22)),c=(s(a(90)),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);t.default=e}(a(27)),a(127));function s(e){return e&&e.__esModule?e:{default:e}}var d=(0,o.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.assemblySheet,a=e.enableWarehouse,n=0,r=[],o=[],s=[];t.map(function(e){e.get("materialList").map(function(e){r.push(e.toJS())})}),r.map(function(e,t){var a=e.materialUuid,r=e.warehouseCardUuid,i=e.unitUuid,l=(e.assistList?e.assistList.map(function(e){return e.propertyUuid}).sort():[]).join("_"),c=e.batchUuid;if(n=(0,u.numberCalculate)(n,e.amount),a)if(o.includes(a)){var d=o.findIndex(function(e){return e==a}),f=!1;s[d].forEach(function(t){var a=t.financialInfo&&t.financialInfo.openBatch,n=t.financialInfo&&t.financialInfo.openAssist,o=(t.assistList?t.assistList.map(function(e){return e.propertyUuid}).sort():[]).join("_");if(!(t.warehouseCardUuid!==r||t.unitUuid!==i||a&&t.batchUuid!==c||n&&o!==l)){var s=(0,u.numberCalculate)(t.quantity,e.quantity),d=(0,u.numberCalculate)(t.amount,e.amount);t.quantity=s,t.amount=d,s&&(t.price=(0,u.numberCalculate)(d,s,2,"divide")),f=!0}}),f||s[d].push(e)}else s.push([e]),o.push(a)});var d=[];return s.map(function(e,t){e.sort(function(e,t){return e.warehouseCardCode>t.warehouseCardCode?1:e.warehouseCardCode==t.warehouseCardCode?1:-1}).map(function(e){d.push(e)})}),d.sort(function(e,t){return e.code>t.code?1:-1}),i.default.createElement("div",null,i.default.createElement(c.TableAll,{className:"lrAccount-table"},i.default.createElement("div",{className:"account-zzd-title"},"物料汇总"),i.default.createElement(c.TableTitle,{className:a?"account-zzd-table-width":"account-zzd-table-no-warehouse-width",titleList:a?["","物料","仓库","数量","单位","单价","金额"]:["","物料","数量","单位","单价","金额"]}),i.default.createElement(c.TableBody,{className:"account-zzd-table"},d&&d.map(function(e,t){var n="",r=e.assistList||[],o=e.financialInfo&&e.financialInfo.openBatch,s=e.financialInfo&&e.financialInfo.openAssist,d=e.financialInfo&&e.financialInfo.openShelfLife,f=(e.financialInfo&&e.financialInfo.assistClassificationList,(e.batchList||(0,l.fromJS)([])).find(function(t){return t.batchUuid===e.batchUuid||t.batch===e.batch})||{}),m=f.batch||e.batch?(f.batch||e.batch)+(d&&f.productionDate&&"undefined"!==f.productionDate?"("+f.productionDate+")":e.productionDate&&"undefined"!==e.productionDate?"("+e.productionDate+")":""):void 0;return n=s&&o?(r.some(function(e){return e.propertyName})?r.map(function(e){return e.propertyName}).join():"属性")+" | "+(e.batch?m:"批次"):s||o?s?r.some(function(e){return e.propertyName})?r.map(function(e){return e.propertyName}).join():"属性":e.batch?m:"批次":e.code?(e.code?e.code:"")+" "+(e.name?e.name:""):void 0,i.default.createElement(c.TableItem,{className:a?"account-zzd-table-width":"account-zzd-table-no-warehouse-width",line:t+1},i.default.createElement("li",null,t+1),i.default.createElement("li",null,i.default.createElement("span",null,e.code+" "+e.name),s||o?i.default.createElement("span",null,n):null),a?i.default.createElement(c.TableOver,{textAlign:"left"},e.warehouseCardUuid?(e.warehouseCardCode?e.warehouseCardCode:"")+" "+(e.warehouseCardName?e.warehouseCardName:""):""):null,i.default.createElement("li",null,i.default.createElement("p",null,Number(e.quantity)?(0,u.formatFour)(e.quantity):"")),i.default.createElement("li",null,e.unitName?e.unitName:""),i.default.createElement("li",null,i.default.createElement("p",null,Number(e.price)?(0,u.formatFour)(e.price):"")),i.default.createElement("li",null,i.default.createElement("p",null,(0,u.formatMoney)(e.amount))))})),i.default.createElement("div",{className:"account-zzd-bottom",style:{background:d.size&&d.size%2==0?"#f4f4f4":"#fff"}},"合计：",(0,u.formatMoney)(n))))}}]),t}())||n;t.default=d},2607:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=b(a(1230)),l=b(a(100)),u=b(a(37)),c=b(a(45)),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1231),a(99),a(38),a(55);var d=b(a(1)),f=a(17),m=a(22),g=(b(a(1237)),b(a(90)),a(18)),p=b(a(6)),C=v(a(27)),h=(a(127),b(a(1477)),b(a(1346))),y=b(a(1296)),E=b(a(1424)),S=(a(1310),v(a(172))),T=v(a(130)),_=v(a(485));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}var L=c.default.Option,I=(0,f.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showCommonChargeModal:!1,showSingleModal:!1,selectTreeUuid:"all",selectTreeLevel:0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.StockIntoProjectTemp,r=t.hideCategoryList,i=t.insertOrModify,s=(t.paymentType,t.disabledDate),f=t.commonCardObj,v=t.calculateViews,b=t.enableWarehouse,I=t.openQuantity,N=t.serialList,O=this.state,A=O.showSingleModal,R=O.selectTreeUuid,w=O.selectTreeLevel,P=v.get("paymentTypeStr"),U=this.props.oriDate,M=n.get("oriAbstract"),k=n.get("jrIndex"),j=n.get("amount")?n.get("amount"):0,J=n.get("stockCardList"),D=n.get("allStockCardList"),x=n.get("allWareHouseCardList"),F=(n.get("stockCardUuidList"),n.get("wareHouseCardList")),H=n.get("projectCard"),B=n.get("projectList"),G=(n.get("stockRange"),n.get("categoryTypeObj"),n.get("projectRange"),n.get("oriState")),Y=n.get("oriUuid"),Z=(v.get("selectI"),f.get("memberList")),z=f.get("thingsList"),W=f.get("selectItem"),K=f.get("selectList"),X=f.get("selectedKeys"),V=f.get("cardPageObj"),Q=(f.get("modalName"),0),q=[],$=[];J.map(function(e){q.push(e.get("cardUuid")),Q=(0,m.numberCalculate)(Q,e.get("amount")),$.push({cardUuid:e.get("cardUuid"),storeUuid:e.get("warehouseCardUuid"),assistList:e.get("assistList"),batchUuid:e.get("batchUuid"),isUniformPrice:e.get("isUniformPrice"),index:0,noNeedPrice:!1,moreUnit:e.getIn(["unit","unitList"])&&e.getIn(["unit","unitList"]).size})});z.size?z.filter(function(e){return-1===q.indexOf(e.get("uuid"))}):(0,g.fromJS)([]);return d.default.createElement("div",{className:"accountConf-modal-list"},"modify"===i?d.default.createElement("div",{className:"edit-running-modal-list-item"},d.default.createElement("label",null,"流水号："),d.default.createElement("div",null,d.default.createElement(l.default,{style:{width:"70px",marginRight:"5px"},value:k,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?a(T.changeEditCalculateCommonState("StockIntoProjectTemp","jrIndex",e.target.value)):u.default.info("流水号不能超过6位")}}),"号")):null,d.default.createElement("div",{className:"edit-running-modal-list-item"},d.default.createElement("label",null,"日期："),d.default.createElement("div",null,d.default.createElement(o.default,{allowClear:!1,disabledDate:s,value:(0,p.default)(U),onChange:function(e){var t=e.format("YYYY-MM-DD");a(S.changeLrAccountCommonString("ori","oriDate",t)),$.length>0&&a(T.getStockBuildUpPrice(t,$,0,"StockIntoProject","notFinish"))}}))),d.default.createElement(y.default,{dispatch:a,insertOrModify:i,paymentTypeStr:P,hideCategoryList:r}),d.default.createElement("div",{className:"accountConf-separator"}),d.default.createElement("div",{className:"edit-running-modal-list-item"},d.default.createElement("label",null,"项目："),d.default.createElement("div",{className:"chosen-right"},d.default.createElement(c.default,{combobox:!0,showSearch:!0,value:("COMNCRD"!==H.get("code")&&"ASSIST"!==H.get("code")&&"MAKE"!==H.get("code")&&"INDIRECT"!==H.get("code")&&"MECHANICAL"!==H.get("code")&&H.get("code")?H.get("code"):"")+" "+(H.get("name")?H.get("name"):""),onChange:function(e,t){var n=e.split(C.TREE_JOIN_STR),r=t.props.uuid,i=n[0],o=n[1];a(T.changeEditCalculateCommonState("StockIntoProjectTemp","projectCard",(0,g.fromJS)({cardUuid:r,name:o,code:i})))}},B&&B.filter(function(e){return"COMNCRD"!==e.get("code")}).map(function(e,t){return d.default.createElement(L,{key:e.get("uuid"),value:""+e.get("code")+C.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")},("COMNCRD"!==e.get("code")&&"ASSIST"!==e.get("code")&&"MAKE"!==e.get("code")&&"INDIRECT"!==e.get("code")&&"MECHANICAL"!==e.get("code")?e.get("code"):"")+" "+e.get("name"))})),d.default.createElement("div",{className:"chosen-word",onClick:function(){a(T.getChargeProjectCard("STATE_CHTRXM","StockIntoProjectTemp",1)),e.setState({showSingleModal:!0})}},"选择"))),d.default.createElement("div",{className:"edit-running-modal-list-item"},d.default.createElement("label",null,"摘要："),d.default.createElement("div",null,d.default.createElement(l.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:M,onChange:function(e){a(_.changeEditCalculateCommonString("StockIntoProject","oriAbstract",e.target.value))}}))),d.default.createElement("div",{className:"accountConf-separator"}),d.default.createElement(E.default,{dispatch:a,stockCardList:J,stockList:D,stockRange:[],amount:j,oriDate:U,oriUuid:Y,MemberList:Z,thingsList:z,carryoverCardList:x,currentCardType:"stock",selectedKeys:X,warehouseList:F,insertOrModify:i,enableWarehouse:b,openQuantity:I,selectList:K,selectItem:W,stockTitleName:"存货",stockTemplate:"stockCardList",oriStockTemplate:"oriStockCardList",sectionTemp:"StockIntoProject",amountDisable:!1,isCardUuid:!0,needHidePrice:!1,oriState:G,serialList:N,selectTreeCallBack:function(t,n){a("all"===t?_.getStockCardList({temp:"StockIntoProjectTemp",currentPage:1}):T.getStockSomeCardList({uuid:t,level:n,currentPage:1})),e.setState({selectTreeUuid:t,selectTreeLevel:n})},callback:function(){var e=J.size,t=[];W&&W.size&&W.map(function(a,n){t.push({cardUuid:a.get("uuid"),storeUuid:"",assistList:a.get("assistList"),batchUuid:a.get("batchUuid"),isUniformPrice:a.get("isUniformPrice"),index:e+n,noNeedPrice:!1,moreUnit:a.getIn(["unit","unitList"])&&a.getIn(["unit","unitList"]).size})}),t.length>0&&a(T.getStockBuildUpPrice(U,t,e,"StockIntoProject","notFinish"))},cardPageObj:V,cardPaginationCallBack:function(e){a("all"===R?_.getStockCardList({temp:"StockIntoProjectTemp",currentPage:e}):T.getStockSomeCardList({uuid:R,level:w,currentPage:e}))}}),d.default.createElement("div",{className:"edit-running-modal-list-item"},d.default.createElement("label",null,"合计金额：",(0,m.formatMoney)(Q))),d.default.createElement(h.default,{dispatch:a,showSingleModal:A,MemberList:Z,thingsList:z,selectedKeys:""===X?["all"+C.TREE_JOIN_STR+"1"]:X,title:"选择项目",selectFunc:function(t,n){var r=t.code,i=t.name;a(T.changeEditCalculateCommonState("StockIntoProjectTemp","projectCard",(0,g.fromJS)({cardUuid:n,name:i,code:r}))),e.setState({showSingleModal:!1})},selectListFunc:function(t,n){a("all"===t?T.getChargeProjectCard(G,"StockIntoProjectTemp",1):T.getProjectSomeCardList(t,n,G,1)),e.setState({selectTreeUuid:t,selectTreeLevel:n})},cancel:function(){e.setState({showSingleModal:!1})},cardPageObj:V,paginationCallBack:function(e){a("all"===R?T.getChargeProjectCard(G,"StockIntoProjectTemp",e):T.getProjectSomeCardList(R,w,G,e))}}))}}]),t}(),r.displayName="Chtrxm",n=i))||n;t.default=I},2608:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=R(a(1230)),l=R(a(100)),u=R(a(37)),c=R(a(45)),s=R(a(89)),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1231),a(99),a(38),a(55),a(88);var f=a(1),m=R(f),g=a(17),p=a(22),C=R(a(1237)),h=(R(a(90)),a(18)),y=R(a(6)),E=A(a(27)),S=a(127),T=(R(a(1477)),R(a(1346))),_=R(a(1296)),v=R(a(1424)),b=a(1310),L=A(a(172)),I=A(a(130)),N=A(a(485)),O=A(a(177));function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function R(e){return e&&e.__esModule?e:{default:e}}var w=s.default.Group,P=c.default.Option,U=(0,g.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showCommonChargeModal:!1,showSingleModal:!1,selectTreeUuid:"all",selectTreeLevel:0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),d(t,[{key:"componentDidMount",value:function(){this.props.oriDate}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.ProjectCarryoverTemp,r=t.hideCategoryList,i=t.insertOrModify,d=(t.paymentType,t.disabledDate,t.commonCardObj),g=t.calculateViews,A=t.enableWarehouse,R=t.openQuantity,U=t.disabledBeginDate,M=t.serialList,k=this.state,j=k.showSingleModal,J=k.selectTreeUuid,D=k.selectTreeLevel,x=g.get("paymentTypeStr"),F="ProjectCarryoverTemp",H="modify"===i,B=this.props.oriDate,G=n.get("oriAbstract"),Y=n.get("jrIndex"),Z=n.get("amount")?n.get("amount"):0,z=n.get("receiveAmount"),W=n.get("currentAmount"),K=n.get("stockCardList"),X=n.get("allStockCardList"),V=n.get("allWareHouseCardList"),Q=(n.get("stockCardUuidList"),n.get("wareHouseCardList")),q=n.get("projectCard"),$=n.get("projectList"),ee=(n.get("stockRange"),n.get("categoryTypeObj"),n.get("projectRange"),n.get("oriState")),te=n.get("carryoverList"),ae=n.get("allHappenAmount"),ne=n.get("allStoreAmount"),re=n.get("oriUuid"),ie=n.get("pageSize"),oe=n.get("totalNumber"),le=n.get("modifycurrentPage"),ue=n.get("cardPages"),ce=(le-1)*ie,se=le*ie,de="XZ_CONSTRUCTION"===q.get("projectProperty")?te.slice(ce,se):te,fe=(g.get("selectI"),d.get("memberList")),me=d.get("thingsList"),ge=d.get("selectItem"),pe=d.get("selectList"),Ce=d.get("selectedKeys"),he=d.get("cardPageObj"),ye=(d.get("modalName"),(0,p.formatDate)().slice(0,10)),Ee=0;te&&te.size&&te.forEach(function(e,t){var a=new Date(e.get("oriDate")).getTime();ye=Ee>a?ye:e.get("oriDate"),Ee=new Date(ye).getTime()});var Se=0,Te=[],_e=[],ve=[];K.map(function(e){_e.push(e.get("cardUuid")),Se=(0,p.numberCalculate)(Se,e.get("amount")),e.get("isOpenedQuantity")&&ve.push({cardUuid:e.get("cardUuid"),isUniformPrice:e.get("isUniformPrice"),assistList:e.get("assistList"),batchUuid:e.get("batchUuid")})});me.size?me.filter(function(e){return-1===_e.indexOf(e.get("uuid"))}):(0,h.fromJS)([]);X&&X.size&&X.forEach(function(e,t){if(-1===_e.indexOf(e.get("uuid"))){var a=e.toJS(),n=a.unit?JSON.stringify(a.unit):JSON.stringify({unitList:[]});Te.push(m.default.createElement(P,{key:e.get("code"),value:""+e.get("code")+E.TREE_JOIN_STR+e.get("name")+E.TREE_JOIN_STR+e.get("uuid")+E.TREE_JOIN_STR+e.get("isOpenedQuantity")+E.TREE_JOIN_STR+e.get("isUniformPrice")+E.TREE_JOIN_STR+n},e.get("code")+" "+e.get("name")))}});var be=function(e,t,a){return t?e&&((0,y.default)(U)>e||e<(0,y.default)(a)):e&&(0,y.default)(U)>e},Le=m.default.createElement("div",{className:"table-bottom-select"},m.default.createElement("p",null,m.default.createElement("span",null,"待确认收入净额："),m.default.createElement("span",null,"待确认成本净额：")),m.default.createElement("p",null,m.default.createElement(S.Amount,{showZero:!0},ae),m.default.createElement(S.Amount,{showZero:!0},ne))),Ie="XZ_PRODUCE"===q.get("projectProperty")?["日期","流水号","流水类别","摘要","类型","发生金额","已入库金额"]:["日期","流水号","流水类别","摘要","类型","待确认/已确认收入","待确认/已确认成本"];return m.default.createElement("div",{className:"accountConf-modal-list"},"modify"===i?m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"流水号："),m.default.createElement("div",null,m.default.createElement(l.default,{style:{width:"70px",marginRight:"5px"},value:Y,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?a(I.changeEditCalculateCommonState("ProjectCarryoverTemp","jrIndex",e.target.value)):u.default.info("流水号不能超过6位")}}),"号")):null,m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"日期："),m.default.createElement("div",null,m.default.createElement(o.default,{allowClear:!1,disabledDate:function(e){return H&&"STATE_XMJZ_JZRK"!==ee&&"STATE_XMJZ_QRSRCB"!==ee?be(e,H,ye):be(e)},value:(0,y.default)(B),onChange:function(e){var t=e.format("YYYY-MM-DD");ve&&ve.length&&a(I.getStockBuildUpPrice(t,ve,0,"ProjectCarryover","notFinish")),a(L.changeLrAccountCommonString("ori","oriDate",t)),q.get("cardUuid")&&a(I.getProjectCarryoverList(t,q.get("cardUuid"))),a(I.getProjectCarryoverCard({oriDate:t,categoryUuid:"",level:"",justCard:!0,needLeft:!1}))}}))),m.default.createElement(_.default,{dispatch:a,insertOrModify:i,paymentTypeStr:x,hideCategoryList:r}),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"项目："),m.default.createElement("div",{className:"chosen-right"},m.default.createElement(c.default,{combobox:!0,showSearch:!0,disabled:"modify"===i,value:("COMNCRD"!==q.get("code")&&q.get("code")?q.get("code"):"")+" "+(q.get("name")?q.get("name"):""),onChange:function(e,t){var n=e.split(E.TREE_JOIN_STR),r=t.props.uuid,i=n[0],o=n[1],l=t.props.projectProperty;a(I.changeEditCalculateCommonState(F,"projectCard",(0,h.fromJS)({cardUuid:r,name:o,code:i,projectProperty:l}))),a(I.getProjectCarryoverList(B,r,"",l)),"XZ_PRODUCE"===l?(a(N.changeEditCalculateCommonString("ProjectCarryover","oriState","STATE_XMJZ_JZRK")),a(I.changeEditCalculateCommonState(F,"oriAbstract","结转入库存货")),a(I.changeEditCalculateCommonState(F,"receiveAmount","")),a(I.changeEditCalculateCommonState(F,"currentAmount",""))):(a(N.changeEditCalculateCommonString("ProjectCarryover","oriState","STATE_XMJZ_QRSRCB")),a(I.changeEditCalculateCommonState(F,"oriAbstract","确认收入成本")))}},$&&$.filter(function(e){return"COMNCRD"!==e.get("code")}).map(function(e,t){return m.default.createElement(P,{key:t,value:""+e.get("code")+E.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid"),projectProperty:e.get("projectProperty")},("COMNCRD"!==e.get("code")?e.get("code"):"")+" "+e.get("name"))})),"insert"===i?m.default.createElement("div",{className:"chosen-word",onClick:function(){a(I.getProjectCarryoverCard({oriDate:B,categoryUuid:"",level:"",justCard:!0,needLeft:!0,currentPage:1})),e.setState({showSingleModal:!0})}},"选择"):null)),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null),m.default.createElement("div",null,m.default.createElement(w,{value:ee,disabled:"modify"===i,onChange:function(e){a(N.changeEditCalculateCommonString("ProjectCarryover","oriState",e.target.value)),a(I.changeEditCalculateCommonState(F,"oriAbstract",{STATE_XMJZ_JZRK:"结转入库存货",STATE_XMJZ_XMJQ:"项目结清",STATE_XMJZ_QRSRCB:"确认收入成本"}[e.target.value])),a(N.changeEditCalculateCommonString("ProjectCarryover","stockCardList",(0,h.fromJS)([{}])))}},"XZ_PRODUCE"===q.get("projectProperty")?m.default.createElement(s.default,{key:"a",value:"STATE_XMJZ_JZRK"},"结转入库"):null,"XZ_CONSTRUCTION"===q.get("projectProperty")?m.default.createElement(s.default,{key:"a",value:"STATE_XMJZ_QRSRCB"},"确认收入成本"):null,m.default.createElement(s.default,{key:"b",value:"STATE_XMJZ_XMJQ"},"项目结清")))),m.default.createElement("div",{className:"accountConf-separator"}),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"摘要："),m.default.createElement("div",null,m.default.createElement(l.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:G,onChange:function(e){a(N.changeEditCalculateCommonString("ProjectCarryover","oriAbstract",e.target.value))}}))),"XZ_CONSTRUCTION"===q.get("projectProperty")&&("STATE_XMJZ_QRSRCB"===ee||"STATE_XMJZ_XMJQ"===ee&&Number(ne)!==Number(ae))?m.default.createElement(f.Fragment,null,m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"收入金额："),m.default.createElement("div",null,m.default.createElement(C.default,{value:z,onChange:function(e){(0,b.numberTest)(e,function(e){a(I.changeEditCalculateCommonState(F,"receiveAmount",e))},!0)}}))),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"成本金额："),m.default.createElement("div",null,m.default.createElement(C.default,{value:W,onChange:function(e){(0,b.numberTest)(e,function(e){a(I.changeEditCalculateCommonState(F,"currentAmount",e))},!0)}}))),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"合同毛利：",(0,p.numberCalculate)(z,W,2,"subtract")))):null,("STATE_XMJZ_JZRK"===ee||ae>ne)&&"XZ_CONSTRUCTION"!==q.get("projectProperty")?m.default.createElement(v.default,{dispatch:a,stockCardList:K,stockList:X,stockRange:[],oriState:ee,amount:Z,oriDate:B,oriUuid:re,MemberList:fe,thingsList:me,carryoverCardList:V,currentCardType:"stock",selectedKeys:Ce,warehouseList:Q,insertOrModify:i,enableWarehouse:A,openQuantity:R,selectList:pe,selectItem:ge,stockTitleName:"存货",stockTemplate:"stockCardList",oriStockTemplate:"oriStockCardList",sectionTemp:"ProjectCarryover",amountDisable:!1,isCardUuid:!0,needHidePrice:!1,serialList:M,selectTreeCallBack:function(e,t){a("all"===e?I.getStockCardList("ProjectCarryoverTemp"):I.getStockSomeCardList({uuid:e,level:t}))},callback:function(){var e=K.size,t=[];ge&&ge.size&&ge.map(function(a,n){t.push({cardUuid:a.get("uuid"),storeUuid:"",assistList:a.get("assistList"),batchUuid:a.get("batchUuid"),isUniformPrice:a.get("isUniformPrice"),index:e+n,noNeedPrice:!0,moreUnit:a.getIn(["unit","unitList"])&&a.getIn(["unit","unitList"]).size})}),t.length>0&&a(I.getStockBuildUpPrice(B,t,e,"ProjectCarryover","notFinish"))}}):null,m.default.createElement("div",{className:"accountConf-separator"}),("STATE_XMJZ_JZRK"===ee||ae>ne)&&"XZ_CONSTRUCTION"!==q.get("projectProperty")?m.default.createElement("div",{className:"editRunning-detail-title-single"},m.default.createElement("div",{className:"editRunning-detail-title-bottom"},m.default.createElement("span",null,"入库金额：",Se),m.default.createElement("span",null,"待入库金额：",(0,p.numberCalculate)(ae,ne,2,"subtract")))):null,"XZ_CONSTRUCTION"===q.get("projectProperty")&&("STATE_XMJZ_QRSRCB"===ee||"STATE_XMJZ_XMJQ"===ee&&"insert"===i)?m.default.createElement("div",{className:"editRunning-detail-title-single"},m.default.createElement("div",{className:"editRunning-detail-title-bottom"},m.default.createElement("span",null),m.default.createElement("span",null),m.default.createElement("span",null,"待确认合同毛利：",m.default.createElement("span",null,(0,p.numberCalculate)(ae,ne,2,"subtract"))))):null,m.default.createElement(S.TableAll,{className:"lrAccount-table account-xmjz-table-select"},m.default.createElement(S.TableTitle,{className:"account-xmjz-table-width",titleList:Ie}),m.default.createElement(S.TableBody,null,de&&de.map(function(e,t){return m.default.createElement(S.TableItem,{className:"account-xmjz-table-width"},m.default.createElement("li",null,e.get("oriDate")),m.default.createElement(S.TableOver,{textAlign:"left",className:"account-flowNumber",onClick:function(t){t.stopPropagation(),a(O.getPreviewRunningBusinessFetch(e,"lrls"))}},m.default.createElement("span",null,e.get("jrIndex")?e.get("jrIndex")+"号":"")),m.default.createElement("li",null,e.get("categoryName")),m.default.createElement("li",null,m.default.createElement("span",null,e.get("oriAbstract"))),m.default.createElement("li",null,m.default.createElement("span",null,e.get("jrJvTypeName")?e.get("jrJvTypeName"):"")),"XZ_CONSTRUCTION"===q.get("projectProperty")?m.default.createElement(f.Fragment,null,m.default.createElement("li",null,m.default.createElement("p",{style:{textAlign:"debit"===e.get("direction")?"left":"right",paddingLeft:"4px"}},e.get("happenAmount")?(0,p.formatMoney)(e.get("happenAmount"),2,""):"")),m.default.createElement("li",null,m.default.createElement("p",{style:{textAlign:"debit"===e.get("direction")?"left":"right",paddingLeft:"4px"}},e.get("storeAmount")?(0,p.formatMoney)(e.get("storeAmount"),2,""):""))):m.default.createElement(f.Fragment,null,m.default.createElement("li",null,m.default.createElement("p",null,e.get("happenAmount")?(0,p.formatMoney)(e.get("happenAmount"),2,""):"")),m.default.createElement("li",null,m.default.createElement("p",null,e.get("storeAmount")?(0,p.formatMoney)(e.get("storeAmount"),2,""):""))))}),"XZ_CONSTRUCTION"!==q.get("projectProperty")?m.default.createElement(S.TableItem,{className:"account-xmjz-table-width"},m.default.createElement("li",null),m.default.createElement("li",null),m.default.createElement("li",null),m.default.createElement("li",null),m.default.createElement("li",null,"合计"),m.default.createElement("li",null,m.default.createElement("p",null,ae?(0,p.formatMoney)(ae,2,""):"")),m.default.createElement("li",null,m.default.createElement("p",null,ne?(0,p.formatMoney)(ne,2,""):""))):null),"XZ_CONSTRUCTION"===q.get("projectProperty")?m.default.createElement(S.TableBottomPage,{otherComp:Le,total:0===oe?1:oe,current:le,onChange:function(e){a(I.changeEditCalculateCommonState("ProjectCarryoverTemp","modifycurrentPage",e))},totalPages:ue,pageSize:ie,showSizeChanger:!0,hideOnSinglePage:!1,onShowSizeChange:function(e){a(I.changeEditCalculateCommonState("ProjectCarryoverTemp","pageSize",e)),a(I.changeEditCalculateCommonState("ProjectCarryoverTemp","modifycurrentPage",1)),a(I.changeEditCalculateCommonState("ProjectCarryoverTemp","cardPages",Math.ceil(oe/e)))},className:"payment-table-select"}):null),m.default.createElement(T.default,{dispatch:a,showSingleModal:j,MemberList:fe,thingsList:me,selectedKeys:""===Ce?["all"+E.TREE_JOIN_STR+"1"]:Ce,stockCardList:(0,h.fromJS)([q.toJS()]),title:"选择项目",selectFunc:function(t,n){var r=t.code,i=t.name,o=t.projectProperty;a(I.changeEditCalculateCommonState(F,"projectCard",(0,h.fromJS)({cardUuid:n,name:i,code:r,projectProperty:o}))),a(I.getProjectCarryoverList(B,n)),"XZ_PRODUCE"===o?(a(N.changeEditCalculateCommonString("ProjectCarryover","oriState","STATE_XMJZ_JZRK")),a(I.changeEditCalculateCommonState(F,"oriAbstract","结转入库存货"))):(a(N.changeEditCalculateCommonString("ProjectCarryover","oriState","STATE_XMJZ_QRSRCB")),a(I.changeEditCalculateCommonState(F,"oriAbstract","确认收入成本"))),e.setState({showSingleModal:!1})},selectListFunc:function(t,n){a("all"===t?I.getProjectCarryoverCard({oriDate:B,categoryUuid:"",level:"",justCard:!0,needLeft:!1,currentPage:1}):I.getProjectCarryoverCard({oriDate:B,categoryUuid:t,level:n,justCard:!1,needLeft:!1,currentPage:1})),e.setState({selectTreeUuid:t,selectTreeLevel:n})},cancel:function(){e.setState({showSingleModal:!1})},cardPageObj:he,paginationCallBack:function(e){a("all"===J?I.getProjectCarryoverCard({oriDate:B,categoryUuid:"",level:"",justCard:!0,needLeft:!1,currentPage:e}):I.getProjectCarryoverCard({oriDate:B,categoryUuid:J,level:D,justCard:!1,needLeft:!1,currentPage:e}))}}))}}]),t}(),r.displayName="Xmjz",n=i))||n;t.default=U},2609:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=O(a(100)),l=O(a(37)),u=O(a(89)),c=O(a(45)),s=O(a(1230)),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(99),a(38),a(88),a(55),a(1231);var f=a(1),m=O(f),g=a(17),p=O(a(6)),C=a(18),h=a(22),y=a(127),E=O(a(90)),S=O(a(1237)),T=(N(a(27)),O(a(1296))),_=O(a(1455)),v=O(a(1576)),b=N(a(172)),L=N(a(130)),I=N(a(177));function N(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function O(e){return e&&e.__esModule?e:{default:e}}s.default.MonthPicker,c.default.Option;var A=u.default.Group,R=(0,g.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),d(t,[{key:"render",value:function(){var e=this.props,t=e.JzjzsyTemp,a=e.dispatch,n=e.disabledDate,r=e.insertOrModify,i=e.hideCategoryList,c=(e.accountList,e.isCheckOut,e.calculateViews),d=(this.state.showModal,this.props.oriDate),g=t.get("oriAbstract"),N=t.get("amount"),O=t.get("jrIndex"),R=t.get("oriState"),w=t.get("cardPages"),P=t.get("currentPage"),U=t.get("pageSize"),M=t.get("chooseProjectCard"),k=t.get("curSelectProjectUuid"),j=t.get("projectCardList"),J=t.get("chooseJrCategoryCard"),D=t.get("curSelectJrCategoryUuid"),x=t.get("jrCategoryList"),F=t.get("modalName"),H=t.get("pendingProfitAndLossCarryoverList"),B=M.size!==j.size+1&&M.size?H.filter(function(e){return M.indexOf("空白")>-1?M.indexOf(e.get("projectCardUuid"))>-1||!e.get("projectCardUuid"):M.indexOf(e.get("projectCardUuid"))>-1}):H,G=J.size?B.filter(function(e){return J.indexOf(e.get("categoryUuid"))>-1}):B,Y=(P-1)*U,Z=P*U,z=G.slice(Y,Z),W=0,K=0,X=0;H&&H.map(function(e){W=(0,h.numberCalculate)(W,e.get("amount")),K=(0,h.numberCalculate)(K,e.get("debitAmount")),X=(0,h.numberCalculate)(X,e.get("creditAmount"))});var V={STATE_SYJZ_JZSR:"收入",STATE_SYJZ_JZCBFY:"成本费用",STATE_SYJZ_JZBNLR:"本年利润","":"金额"}[R],Q=c.get("paymentTypeStr"),q="JzjzsyTemp",$="STATE_SYJZ_JZSR"===R||"STATE_SYJZ_JZCBFY"===R?"account-jzjzsy-table-width":"account-jzbnlr-table-width";return m.default.createElement("div",{className:"accountConf-modal-list"},"modify"===r?m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"流水号："),m.default.createElement("div",null,m.default.createElement(S.default,{style:{width:"70px",marginRight:"5px"},value:O,onChange:function(e){/^\d{0,6}$/.test(e.target.value)?a(L.changeEditCalculateCommonState(q,"jrIndex",e.target.value)):l.default.info("流水号不能超过6位")},PointDisabled:!0}),"号")):null,m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"日期："),m.default.createElement("div",null,m.default.createElement(s.default,{allowClear:!1,disabledDate:n,value:d?(0,p.default)(d):"",onChange:function(e){var t=e.format("YYYY-MM-DD");a(b.changeLrAccountCommonString("ori","oriDate",t))}}))),m.default.createElement(T.default,{dispatch:a,insertOrModify:r,paymentTypeStr:Q,hideCategoryList:i}),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null),m.default.createElement("div",null,m.default.createElement(A,{value:R,disabled:"modify"===r},m.default.createElement(u.default,{key:"a",value:"STATE_SYJZ_JZSR"},"结转收入"),m.default.createElement(u.default,{key:"a",value:"STATE_SYJZ_JZCBFY"},"结转成本费用"),m.default.createElement(u.default,{key:"b",value:"STATE_SYJZ_JZBNLR"},"结转本年利润")))),m.default.createElement("div",{className:"accountConf-separator"}),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,"摘要："),m.default.createElement("div",null,m.default.createElement(o.default,{className:"focus-input",onFocus:function(e){document.getElementsByClassName("focus-input")[0].select()},value:g,onChange:function(e){a(L.changeEditCalculateCommonState(q,"oriAbstract",e.target.value))}}))),m.default.createElement("div",{className:"edit-running-modal-list-item"},m.default.createElement("label",null,V,"："),m.default.createElement("div",null,m.default.createElement(S.default,{value:N,disabled:!0}))),m.default.createElement(y.TableAll,{className:"lrAccount-table"},m.default.createElement("div",{className:"table-title-wrap"},m.default.createElement("ul",{className:$?$+" table-title":"table-title"},m.default.createElement("li",null,m.default.createElement("span",null,"日期")),m.default.createElement("li",null,m.default.createElement("span",null,"流水号")),"STATE_SYJZ_JZSR"===R||"STATE_SYJZ_JZCBFY"===R?m.default.createElement(f.Fragment,null,m.default.createElement("li",{className:"position-item",onClick:function(){""===F&&(a(L.changeEditCalculateCommonState(q,"curSelectJrCategoryUuid",J)),a(L.changeEditCalculateCommonState(q,"modalName","流水类别")))}},m.default.createElement("span",null,"流水类别",J.size?m.default.createElement(E.default,{type:"filter"}):m.default.createElement(E.default,{type:"not-filter"})),m.default.createElement(f.Fragment,null,m.default.createElement("div",{className:"common-modal-mask",style:{display:"流水类别"===F?"block":"none"},onClick:function(e){e.stopPropagation(),a(L.changeEditCalculateCommonState(q,"curSelectJrCategoryUuid",(0,C.fromJS)([]))),a(L.changeEditCalculateCommonState(q,"modalName",""))}}),m.default.createElement("div",{className:"position-item-modal"},m.default.createElement(v.default,{modalStyle:{display:"流水类别"===F?"block":"none"},modalName:F,cardList:"流水类别"===F?x:(0,C.fromJS)(),curSelectUuid:"流水类别"===F?D:(0,C.fromJS)([]),dispatch:a,cancel:function(){a(L.changeEditCalculateCommonState(q,"curSelectJrCategoryUuid",(0,C.fromJS)([]))),a(L.changeEditCalculateCommonState(q,"modalName",""))},checkedKeys:D.toJS()||[],onCheck:function(e,t,n){var r=t.checked,i=e.filter(function(e){return"all"!==e});r?i.length!==n.length&&i.length&&"(全选)"!==t.node.props.title?a(L.changeEditCalculateCommonState(q,"curSelectJrCategoryUuid",(0,C.fromJS)(i))):a(L.changeEditCalculateCommonState(q,"curSelectJrCategoryUuid",(0,C.fromJS)(["all"].concat(n)))):i.length===n.length?a(L.changeEditCalculateCommonState(q,"curSelectJrCategoryUuid",(0,C.fromJS)([]))):a(L.changeEditCalculateCommonState(q,"curSelectJrCategoryUuid",(0,C.fromJS)(i)))},onOkCallback:function(){a(L.changeEditCalculateCommonState(q,"chooseJrCategoryCard",D))},allCheckBoxClick:function(e,t){},nameString:"name",uuidString:"uuid"})))),m.default.createElement("li",null,m.default.createElement("span",null,"摘要")),m.default.createElement("li",{className:"position-item"},m.default.createElement("span",null,"类型"))):null,m.default.createElement("li",{className:"position-item",onClick:function(){""===F&&(a(L.changeEditCalculateCommonState(q,"curSelectProjectUuid",M)),a(L.changeEditCalculateCommonState(q,"modalName","项目")))}},m.default.createElement("span",null,"项目",M.size?m.default.createElement(E.default,{type:"filter"}):m.default.createElement(E.default,{type:"not-filter"})),m.default.createElement(f.Fragment,null,m.default.createElement("div",{className:"common-modal-mask",style:{display:"项目"===F?"block":"none"},onClick:function(e){e.stopPropagation(),a(L.changeEditCalculateCommonState(q,"modalName","")),a(L.changeEditCalculateCommonState(q,"curSelectProjectUuid",(0,C.fromJS)([])))}}),m.default.createElement("div",{className:"position-item-modal"},m.default.createElement(_.default,{modalStyle:{display:"项目"===F?"block":"none",right:"12.5%",top:"36px;"},modalName:F,cardList:"项目"===F?j:(0,C.fromJS)(),curSelectUuid:"项目"===F?k:(0,C.fromJS)([]),isCardUuid:!0,dispatch:a,cancel:function(){a(L.changeEditCalculateCommonState(q,"modalName","")),a(L.changeEditCalculateCommonState(q,"curSelectProjectUuid",(0,C.fromJS)([])))},onOkCallback:function(e){a(L.changeEditCalculateCommonState(q,"chooseProjectCard",e));var t=e.size?H.filter(function(t){return e.indexOf(t.get("projectCardUuid"))>-1}):H;a(L.changeEditCalculateCommonState(q,"currentPage",1)),a(L.changeEditCalculateCommonState("JzjzsyTemp","cardPages",Math.ceil(t.size/U)))},singleCheckBoxClick:function(e,t){a(L.changeJzFilterModalCheck(e,t))},allCheckBoxClick:function(e,t){a(L.changeJzFilterModalCheck(e,"",t,!0))}})))),"STATE_SYJZ_JZSR"===R||"STATE_SYJZ_JZCBFY"===R?m.default.createElement("li",null,m.default.createElement("span",null,"发生金额")):m.default.createElement(f.Fragment,null,m.default.createElement("li",null,m.default.createElement("span",null,"借方金额")),m.default.createElement("li",null,m.default.createElement("span",null,"贷方金额"))))),m.default.createElement(y.TableBody,null,z&&z.map(function(e,t){return m.default.createElement(y.TableItem,{className:$},m.default.createElement("li",null,e.get("oriDate")),m.default.createElement(y.TableOver,{textAlign:"left",className:e.get("jrIndex")?"account-flowNumber":"",onClick:function(t){t.stopPropagation(),a(I.getPreviewRunningBusinessFetch(e,"lrls"))}},m.default.createElement("span",null,e.get("jrIndex")?e.get("jrIndex")+"号":"期初余额")),"STATE_SYJZ_JZSR"===R||"STATE_SYJZ_JZCBFY"===R?m.default.createElement(f.Fragment,null,m.default.createElement("li",null,e.get("categoryName")),m.default.createElement("li",null,m.default.createElement("span",null,e.get("oriAbstract"))),m.default.createElement("li",null,m.default.createElement("p",null,e.get("jrJvTypeName")?e.get("jrJvTypeName"):""))):null,m.default.createElement("li",null,m.default.createElement("p",null,(e.get("projectCardCode")?e.get("projectCardCode"):"")+" "+(e.get("projectCardName")?e.get("projectCardName"):""))),"STATE_SYJZ_JZSR"===R||"STATE_SYJZ_JZCBFY"===R?m.default.createElement("li",null,m.default.createElement("p",null,e.get("amount")?(0,h.formatMoney)(e.get("amount"),2,""):"")):m.default.createElement(f.Fragment,null,m.default.createElement("li",null,m.default.createElement("p",null,e.get("debitAmount")?(0,h.formatMoney)(e.get("debitAmount"),2,""):"")),m.default.createElement("li",null,m.default.createElement("p",null,e.get("creditAmount")?(0,h.formatMoney)(e.get("creditAmount"),2,""):""))))}),m.default.createElement(y.TableItem,{className:$},m.default.createElement("li",null),"STATE_SYJZ_JZSR"===R||"STATE_SYJZ_JZCBFY"===R?m.default.createElement(f.Fragment,null,m.default.createElement("li",null),m.default.createElement("li",null)):null,m.default.createElement("li",null,"合计"),"STATE_SYJZ_JZSR"===R||"STATE_SYJZ_JZCBFY"===R?m.default.createElement(f.Fragment,null,m.default.createElement("li",null),m.default.createElement("li",null),m.default.createElement("li",null,m.default.createElement("p",null,W||""))):m.default.createElement(f.Fragment,null,m.default.createElement("li",null),m.default.createElement("li",null,m.default.createElement("p",null,K||"")),m.default.createElement("li",null,m.default.createElement("p",null,X||""))))),m.default.createElement(y.TableBottomPage,{total:0===G.size?1:G.size,current:P,onChange:function(e){a(L.changeEditCalculateCommonState("JzjzsyTemp","currentPage",e))},totalPages:w,pageSize:U,showSizeChanger:!0,hideOnSinglePage:!1,onShowSizeChange:function(e){a(L.changeEditCalculateCommonState("JzjzsyTemp","pageSize",e)),a(L.changeEditCalculateCommonState("JzjzsyTemp","currentPage",1)),a(L.changeEditCalculateCommonState("JzjzsyTemp","cardPages",Math.ceil(H.size/e)))},className:"payment-table-select"})))}}]),t}(),r.displayName="Jzjzsy",n=i))||n;t.default=R},2610:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=y(a(174)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(173);var o=a(1),l=y(o),u=a(17),c=y(a(2611)),s=a(127),d=h(a(27)),f=a(22),m=h(a(172)),g=a(491),p=h(a(130)),C=h(a(485));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var E=(0,u.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.runningCategory,n=e.curCategory,i=e.taxRateTemp,u=e.flags,h=e.hideCategoryList,y=e.disabledChangeCategory,E=e.oriTemp,S=e.pageTab,T=e.paymentType,_=e.paymentTypeStr,v=e.insertOrModify,b=e.configPermission,L=e.newJr,I=e.sfglCategory;i.get("scale"),i.get("payableRate"),i.get("outputRate");return l.default.createElement(o.Fragment,null,l.default.createElement(s.TableTree,{className:"account-tree"},l.default.createElement(r.default,{onClick:function(e){t(g.editRunningAllActions.switchEditRunningSwitchPageTab(e.key)),"payment"===e.key&&t(C.changeEditCalculateCommonString("",["views","paymentTypeStr"],"内部转账"))},selectedKeys:[S],mode:"horizontal"},l.default.createElement(r.default.Item,{key:"business",className:"right-tab"},"外部收支"),l.default.createElement(r.default.Item,{key:"payment",className:"right-tab"},"内部核算")),l.default.createElement("div",{className:"business"===S?"table-right-tree right-tree-padding":"table-right-tree editCalculate-right-tree-padding"},a&&a.size?l.default.createElement(c.default,{pageTab:S,paymentType:T,paymentTypeStr:_,insertOrModify:v,oriTemp:E,flags:u,hideCategoryList:h,category:a,selectedKeys:[n],dispatch:t,configPermission:b,disabledChangeCategory:y,curCategory:n,newJr:L,onSelect:function(e,a,n){if("LB_SFGL"===T&&(t(g.editRunningAllActions.switchEditRunningSwitchPageTab("business")),t(g.editRunningAllActions.changeEditCalculatePaymentType(""))),e[0]){var r=e[0].split(d.TREE_JOIN_STR),i=r[0],o=r[2],l=r[3];"hasChild"!==o&&"canClick"===l?t("insert"===v?m.selectAccountRunningCategory(i):m.selectModifyRunningCategory(i)):"hasChild"!==o&&"canClick"!==l&&(n.indexOf(i)>-1?(n.splice(n.indexOf(i),1),a.setState({expandedKeys:n,autoExpandParent:!1})):(n.push(i),a.setState({expandedKeys:n,autoExpandParent:!1})))}}}):""),"business"===S&&I&&I.get(0)?l.default.createElement("div",{className:"tree-left-sfgl",onClick:function(){return(0,f.debounce)(function(){t(p.justNewCalculatebusiness("LB_SFGL")),t(g.editRunningAllActions.changeEditCalculatePaymentType("LB_SFGL")),t(m.changeLrAccountCommonString("",["flags","paymentUuid"],I.getIn([0,"uuid"]))),t(C.changeEditCalculateCommonString("",["views","paymentTypeStr"],I.getIn([0,"fullCategoryName"])))})()}},l.default.createElement(s.XfnIcon,{type:"double-change",style:{fontSize:"14px"}}),"  收付管理"):null))}}]),t}())||n;t.default=E},2611:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=E(a(14)),i=E(a(61)),o=E(a(100)),l=E(a(171)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(78),a(79),a(99),a(170);var c=E(a(1)),s=a(17),d=a(18),f=a(127),m=y(a(27)),g=y(a(60)),p=a(491),C=(y(a(172)),y(a(130))),h=y(a(485));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}var S=l.default.TreeNode,T=o.default.Search,_=(0,s.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.changeCategoryAllowed=function(t){return"LB_YYSR"===t||"LB_YYZC"===t||"LB_YYWSR"===t||"LB_YYWZC"===t||"LB_ZSKX"===t||"LB_ZFKX"===t||"LB_FYZC"===t&&!e.props.oriTemp.get("canBeModifyCategory")},e.onExpand=function(t){e.setState({expandedKeys:t,autoExpandParent:!1})},e.onChange=function(t,a,n,r){var i=[];a.map(function(e){e.key.indexOf(t)>-1&&i.push(e.value)});var o=i;"business"===r&&e.setState({expandedKeys:o,searchValue:t,autoExpandParent:!0})},e.state={expandedKeys:[],searchValue:"",autoExpandParent:!0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentDidMount",value:function(){if("business"===this.props.pageTab)this.setState({expandedKeys:this.props.category.getIn([0,"childList"]).toJS().filter(function(e){return"LB_YYSR"===e.categoryType||"LB_YYZC"===e.categoryType||"LB_FYZC"===e.categoryType}).map(function(e){return e.uuid})});else{var e=!0===this.props.newJr?this.props.hideCategoryList&&this.props.hideCategoryList.size&&this.props.hideCategoryList.filter(function(e){return e.get("childList")?e.get("childList").filter(function(e){return"LB_ZCWJZZS"!==e.get("categoryType")}):"LB_ZCWJZZS"!==e.get("categoryType")}):this.props.hideCategoryList;this.setState({expandedKeys:e.toJS().map(function(e){return e.uuid})})}}},{key:"componentWillReceiveProps",value:function(e){if("business"===e.pageTab)(!(0,d.is)(e.pageTab,this.props.pageTab)||!(0,d.is)(e.category.getIn([0,"childList"]),this.props.category.getIn([0,"childList"]))&&e.category.getIn([0,"childList"])&&e.category.getIn([0,"childList"]).size)&&this.setState({expandedKeys:e.category.getIn([0,"childList"]).toJS().filter(function(e){return"LB_YYSR"===e.categoryType||"LB_YYZC"===e.categoryType||"LB_FYZC"===e.categoryType}).map(function(e){return e.uuid})});else{var t=!0===e.newJr?e.hideCategoryList&&e.hideCategoryList.size&&e.hideCategoryList.filter(function(e){return e.get("childList")?e.get("childList").filter(function(e){return"LB_ZCWJZZS"!==e.get("categoryType")}):"LB_ZCWJZZS"!==e.get("categoryType")}):e.hideCategoryList,a=!0===this.props.newJr?this.props.hideCategoryList&&this.props.hideCategoryList.size&&this.props.hideCategoryList.filter(function(e){return e.get("childList")?e.get("childList").filter(function(e){return"LB_ZCWJZZS"!==e.get("categoryType")}):"LB_ZCWJZZS"!==e.get("categoryType")}):this.props.hideCategoryList;(!(0,d.is)(e.pageTab,this.props.pageTab)||!(0,d.is)(t,a)&&t&&t.size)&&this.setState({expandedKeys:t.toJS().map(function(e){return e.uuid})})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.pageTab,n=t.paymentType,o=t.paymentTypeStr,u=t.insertOrModify,s=t.category,d=t.onSelect,y=t.selectedKeys,E=t.flags,_=t.dispatch,v=t.hideCategoryList,b=t.disabledChangeCategory,L=(t.oriTemp,t.className,t.curCategory),I=t.configPermission,N=t.newJr,O=this.state,A=O.searchValue,R=O.expandedKeys,w=O.autoExpandParent,P=E.get("specialStateforAssets"),U=[],M=function t(a,n,r,o,l,u){return a.map(function(a,s){var d=(""+a.remark+m.TREE_JOIN_STR+a.name+m.TREE_JOIN_STR+a.oriAbstract).indexOf(A)>-1&&""!=A?c.default.createElement("span",{style:{color:"#f50"}},a.name):c.default.createElement("span",null,a.name);return a.childList.length&&a.canValid?(u.push({key:""+a.remark+m.TREE_JOIN_STR+a.name+m.TREE_JOIN_STR+a.oriAbstract,value:""+a.uuid+m.TREE_JOIN_STR+a.name+m.TREE_JOIN_STR+"hasChild"+m.TREE_JOIN_STR+"'cantClick'"}),c.default.createElement(S,{key:a.uuid,title:c.default.createElement("div",{className:"tree-icon-title"},c.default.createElement("span",null,c.default.createElement(i.default,{placement:"left",title:a.remark||" "},c.default.createElement(f.XfnIcon,{type:"editTip",style:{marginRight:"3px"}}))),d),disabled:1===l&&!a.childList.length&&!a.beSpecial},t(a.childList,n,r,o,l+1,u))):(u.push({key:""+a.remark+m.TREE_JOIN_STR+a.name+m.TREE_JOIN_STR+a.oriAbstract,value:""+a.uuid+m.TREE_JOIN_STR+a.name+m.TREE_JOIN_STR+"hasnoChild"+m.TREE_JOIN_STR+(l>1||a.beSpecial?"canClick":"cantClick")}),a.canValid&&(1!==a.level||a.beSpecial)?c.default.createElement(S,{key:""+a.uuid+m.TREE_JOIN_STR+a.name+m.TREE_JOIN_STR+"hasnoChild"+m.TREE_JOIN_STR+(l>1||a.beSpecial?"canClick":"cantClick"),title:c.default.createElement("div",{className:"tree-icon-title"},c.default.createElement("span",null,c.default.createElement(i.default,{placement:"left",title:a.remark||" "},c.default.createElement(f.XfnIcon,{type:"editTip",style:{marginRight:"3px"}}))),d),checkable:!0,disabled:"modify"===r&&-1===L.indexOf(a.uuid)&&!e.changeCategoryAllowed(a.categoryType)||1===a.level&&!a.childList.length&&!a.beSpecial,className:!a.childList.length&&a.disableList.length?"block-hidden":""}):"")})}(s.getIn([0,"childList"]).toJS(),["全部"],u,P,1,U),k=!0===N?v&&v.size&&v.filter(function(e){return e.get("childList")?e.get("childList").filter(function(e){return"LB_ZCWJZZS"!==e.get("categoryType")}):"LB_ZCWJZZS"!==e.get("categoryType")}):v;return c.default.createElement("div",{className:"business"===a?"editRunning-inner-running":"editCalculate-inner-running"},c.default.createElement("div",{style:{display:"business"===a?"":"none",height:"100%"},className:"editRunning-inner-running-box"},c.default.createElement("div",{className:"tree-title-handle"},c.default.createElement(T,{className:"lrls-search-tree",placeholder:"搜索",onSearch:function(t){return e.onChange(t,U,s.getIn([0,"childList"]).toJS(),a)}}),c.default.createElement(r.default,{type:"setting",className:"lrls-setting-icon",title:"流水设置",style:{color:I?"":"#eee"},onClick:function(){I&&(_(g.addPageTabPane("ConfigPanes","Running","Running","流水设置")),_(g.addHomeTabpane("Config","Running","流水设置")))}})),c.default.createElement("div",{className:"editRunning-inner-running-tree"},c.default.createElement(l.default,{onExpand:this.onExpand,expandedKeys:R,autoExpandParent:w,defaultExpandParent:!0,onSelect:function(t){return d(t,e,R)},selectedKeys:y},M))),c.default.createElement("div",{style:{display:"business"===a?"none":"",height:"100%"},className:"editCalculate-inner-running-box"},c.default.createElement("div",{className:"editCalculate-inner-running-tree"},c.default.createElement(l.default,{onExpand:this.onExpand,expandedKeys:R,autoExpandParent:w,defaultExpandAll:!0,defaultExpandParent:!0,onSelect:function(t){if(t[0]){var a=t[0].split(m.TREE_JOIN_STR);"true"===a[1]?(_(C.justNewCalculatebusiness(a[0])),_(p.editRunningAllActions.changeEditCalculatePaymentType(a[0])),_(h.changeEditCalculateCommonString("",["views","paymentTypeStr"],a[2]))):R.indexOf(a[0])>-1?(R.splice(R.indexOf(a[0]),1),e.setState({expandedKeys:R,autoExpandParent:!1})):(R.push(a[0]),e.setState({expandedKeys:R,autoExpandParent:!1}))}},selectedKeys:[""+n+m.TREE_JOIN_STR+"true"+m.TREE_JOIN_STR+o]},k&&k.size&&function e(t,a,r){return t.map(function(t,i){return t.childList.length?c.default.createElement(S,{key:""+t.uuid,title:t.name,disabled:n!==t.categoryType&&b},e(t.childList,a+1,r)):1!==t.level?c.default.createElement(S,{key:""+t.categoryType+m.TREE_JOIN_STR+"true"+m.TREE_JOIN_STR+t.fullCategoryName,title:t.name,disabled:n!==t.categoryType&&b}):""})}(k.toJS()||[],1,[])))))}}]),t}())||n;t.default=_},2612:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=f(a(1)),u=a(17),c=f(a(2613)),s=f(a(2614)),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(130));function f(e){return e&&e.__esModule?e:{default:e}}var m=(0,u.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.calculateViews,n=e.oriDate,r=e.BalanceTemp,i=e.CostTransferTemp,o=e.insertOrModify,u=e.commonCardObj,f=e.enableWarehouse,m=e.homeState,g=e.paymentType,p=e.oriState,C=e.enclosureCountUser,h=e.serialList;return"STATE_CHYE_CK"===p||"STATE_YYSR_ZJ"===p?l.default.createElement(c.default,{dispatch:t,returnBackFun:function(){t(d.changeEditCalculateCommonState("views","showCount",!1))},calculateViews:a,oriDate:n,dateFromTemp:"STATE_CHYE_CK"===p?r:i,insertOrModify:o,commonCardObj:u,enableWarehouse:f,homeState:m,paymentType:g,tempName:"STATE_CHYE_CK"===p?"Balance":"CostTransfer",needHidePrice:!0,enclosureCountUser:C,serialList:h}):l.default.createElement(s.default,{dispatch:t,returnBackFun:function(){t(d.changeEditCalculateCommonState("views","showCount",!1))},calculateViews:a,oriDate:n,BalanceTemp:r,insertOrModify:o,commonCardObj:u,enableWarehouse:f,homeState:m,paymentType:g,tempName:"Balance",needHidePrice:!0,enclosureCountUser:C,serialList:h})}}]),t}(),r.displayName="pandianjiezhuan",n=i))||n;t.default=m},2613:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=k(a(37)),l=k(a(61)),u=k(a(32)),c=k(a(47)),s=k(a(179)),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(38),a(79),a(51),a(46),a(178);var m=a(1),g=k(m),p=a(17),C=a(18),h=M(a(30)),y=a(127),E=M(a(27)),S=a(22),T=a(31),_=k(a(90)),v=k(a(483)),b=k(a(1758)),L=k(a(1759)),I=k(a(1756)),N=k(a(1523)),O=k(a(487)),A=k(a(1521)),R=k(a(1345)),w=M(a(130)),P=M(a(485)),U=M(a(43));function M(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function k(e){return e&&e.__esModule?e:{default:e}}var j=s.default.TreeNode,J=(0,p.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showWarehouseModal:!1,showStockModal:!1,showSingleModal:!1,checkable:!1,showSerial:!1,showEditSerial:!1,showAdjustWayModal:!1,curStockItem:[],curStockIndex:-1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,g.default.Component),f(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.returnBackFun,r=t.calculateViews,i=t.oriDate,f=t.dateFromTemp,p=t.insertOrModify,M=t.commonCardObj,k=t.enableWarehouse,J=t.homeState,D=t.needHidePrice,x=t.enclosureCountUser,F=t.tempName,H=(t.serialList,this.state),B=H.showWarehouseModal,G=(H.showStockModal,H.showSingleModal,H.checkable),Y=H.showSerial,Z=H.showEditSerial,z=H.showAdjustWayModal,W=H.curStockItem,K=H.curStockIndex,X=r.get("warehouseTreeList"),V=r.get("showCount"),Q=r.get("stockTitleName"),q=(r.get("selectI"),r.get("countInsert")),$=r.get("pdfInsertFirst"),ee=r.get("hasNumber"),te=r.get("singleUrl"),ae=f.get("countStockCardList"),ne=(ae.size,f.get("oriState")),re=(f.get("wareHouseCardList"),f.get("allStockCardList")),ie=f.get("stockCardList"),oe=f.get("chooseWareHouseCard"),le=f.get("chooseStockCard"),ue=f.get("warehouseSelectedKeys"),ce=f.get("countWarehouseList"),se=f.get("wareHouseNoChild"),de=f.get("dealTypeUuid"),fe=M.get("memberList"),me=M.get("thingsList"),ge=M.get("selectItem"),pe=M.get("selectList"),Ce=M.get("selectedKeys"),he=(f.get("wareHouseList"),"STATE_YYSR_ZJ"===ne?"结转":"调整"),ye=J.getIn(["permissionInfo","Report"]),Ee=J.getIn(["views","isPlay"]),Se=J.getIn(["views","URL_POSTFIX"]),Te=k?"STATE_CHYE_CH"===ne?ue.toJS():oe?[""+oe.get("cardUuid")+E.TREE_JOIN_STR+oe.get("name")+E.TREE_JOIN_STR+oe.get("isUniform")]:[]:[],_e=[];ie.map(function(e){return _e.push(e.get("cardUuid"))});me.size?me.filter(function(e){return-1===_e.indexOf(e.get("uuid"))}):(0,C.fromJS)([]);var ve={cardUuid:"",name:"全部",isOpenedQuantity:!1,isUniformPrice:!1},be=[];ae&&ae.map(function(e){be.push(e.get("cardUuid"))});var Le=[],Ie=function e(t,a,n){return t.map(function(t,r){return n===t.uuid&&(Le=t.childList?t.childList:[]),t.childList&&t.childList.length?g.default.createElement(j,{title:t.name,value:""+t.uuid+E.TREE_JOIN_STR+t.code+E.TREE_JOIN_STR+t.name+E.TREE_JOIN_STR+t.isUniform,key:t.uuid},e(t.childList,a+"_"+r,n)):g.default.createElement(j,{title:t.name,value:""+t.uuid+E.TREE_JOIN_STR+t.code+E.TREE_JOIN_STR+t.name+E.TREE_JOIN_STR+t.isUniform+E.TREE_JOIN_STR+!0,key:t.uuid})})},Ne=k?"count-inventory-area-warehouse":"count-inventory-no-warehouse";return g.default.createElement("div",{className:"count-adjustment-mask import-mask",style:{display:V?"block":"none"}},g.default.createElement("div",{className:"count-container"},g.default.createElement("div",{className:"count-inventory"},g.default.createElement("div",{className:"count-inventory-or-warehouse",style:{marginBottom:"10px",justifyContent:k?"":"flex-end"}},k?g.default.createElement(m.Fragment,null,g.default.createElement("span",{style:{display:"flex",width:"65px",alignItems:"center"}},"仓库："),g.default.createElement("span",{className:"count-select-choose"},g.default.createElement(s.default,{className:"",style:{width:"100%"},value:oe?oe.get("name"):"",placeholder:"请选择仓库",dropdownStyle:{maxHeight:400,overflow:"auto"},treeDefaultExpandAll:!0,showArrow:!1,disabled:!q,onChange:function(e){var t=e.split(E.TREE_JOIN_STR),n=t[0],r="ALLCRD"!==t[1]?t[1]+" "+t[2]:t[2],i="true"===t[3],o="true"===t[4];o?Le=[{uuid:n,name:t[2],isUniform:i,code:t[1]}]:Ie(X.toJS(),"",n);var l=[],u=function e(t){return t&&t.map(function(t){t.childList&&t.childList.length?e(t.childList):l.push(t)})};"全部"===t[2]?u(X.toJS()):u(Le),ae&&ae.size>0?c.default.confirm({title:"切换仓库后，列表数据将被清空!",content:"",okText:"确认",cancelText:"取消",onOk:function(){a(P.changeEditCalculateCommonString(F,["chooseWareHouseCard","cardUuid"],n)),a(P.changeEditCalculateCommonString(F,["chooseWareHouseCard","name"],r)),a(P.changeEditCalculateCommonString(F,["chooseWareHouseCard","isUniform"],i)),a(P.changeEditCalculateCommonString(F,"wareHouseNoChild",o)),a(P.changeEditCalculateCommonString(F,"countStockCardList",(0,C.fromJS)([]))),a(P.changeEditCalculateCommonString(F,"countWarehouseList",(0,C.fromJS)(l)))}}):(a(P.changeEditCalculateCommonString(F,["chooseWareHouseCard","cardUuid"],n)),a(P.changeEditCalculateCommonString(F,["chooseWareHouseCard","name"],r)),a(P.changeEditCalculateCommonString(F,["chooseWareHouseCard","isUniform"],i)),a(P.changeEditCalculateCommonString(F,"wareHouseNoChild",o)),a(P.changeEditCalculateCommonString(F,"countWarehouseList",(0,C.fromJS)(l))))}},Ie(X.toJS(),0)),q?g.default.createElement("span",{className:"count-chosen-word",onClick:function(){e.setState({showWarehouseModal:!0}),a(w.getWarehouseCardTree({haveQuantity:!1,inventoryUuid:"",oriDate:i,tempName:F,isNeedHaveQuantity:!1}))}},"选择"):null)):null,g.default.createElement("span",{className:"count-export-btn"},g.default.createElement(_.default,{type:"download"}),"  ",g.default.createElement(y.Export,{type:"",exportButtonName:"盘点导出",isAdmin:ye.getIn(["exportExcel","permission"]),exportDisable:!i||Ee,excelDownloadUrl:T.ROOTPKT+"/data/export/jr/inventory/adjustment?"+Se+"&warehouseUuid="+(oe?oe.get("cardUuid"):"")+"&oriDate="+i,ddExcelCallback:function(e){return a(U.allExportReceiverlist(e,"sendExcelStockAdjustment",{inventoryUuid:le?le.get("cardUuid"):"",warehouseUuid:oe?oe.get("cardUuid"):"",oriDate:i}))},PDFDownloadUrl:T.ROOTPKT+"/pdf/export/jr/inventory/adjustment?"+Se+"&warehouseUuid="+(oe?oe.get("cardUuid"):"")+"&oriDate="+i,ddPDFCallback:function(e){return a(U.allExportReceiverlist(e,"sendPdfStockAdjustment",{inventoryUuid:le?le.get("cardUuid"):"",warehouseUuid:oe?oe.get("cardUuid"):"",oriDate:i}))},onErrorSendMsg:function(e,t,n){a(U.sendMessageToDeveloper({title:"导出发送钉钉文件异常",message:"type:"+e+",valueFirst:"+t+",valueSecond:"+n,remark:"盘点导出"}))}})),g.default.createElement(u.default,{disabled:!q,style:{width:88,marginLeft:10,background:"#5e81d1",color:"#fff",opacity:q?"1":"0.5"},onClick:function(){a(w.changeEditCalculateCommonState("views","showall",!0)),a(w.changeEditCalculateCommonState("views","isCount",!0))}},g.default.createElement(_.default,{type:"upload"}),"  盘点导入")),g.default.createElement("div",{className:"count-inventory-content inventory-content "},g.default.createElement("div",{className:Ne+" count-inventory-area-warehouse-title"},g.default.createElement("span",null,"存货"),k?g.default.createElement("span",null,"仓库"):null,g.default.createElement("span",null,he,"前数量"),g.default.createElement("span",null,"盘点数量"),g.default.createElement("span",null,he,"数量"),g.default.createElement("span",null)),ae&&ae.map(function(t,n){var r=t.get("assistList")||(0,C.fromJS)([]),u=t.get("serialList")||(0,C.fromJS)([]),c=ae.filter(function(e,a){return e.get("cardUuid")===t.get("cardUuid")&&a!==n}).toJS().reduce(function(e,t){return e.concat(t.serialList||[])},[]);return g.default.createElement("div",{className:Ne+"  count-inventory-childList"},q?g.default.createElement(m.Fragment,null,g.default.createElement(N.default,{item:t,index:n,stockCardList:ie,oriDate:i,stockList:re,dispatch:a,type:"count",stockTitleName:Q,stockTemplate:"countStockCardList",sectionTemp:F,needHidePrice:D,oriState:ne,cardUuidName:"uuid",onSelectChange:function(e,r){var o=e.split(E.TREE_JOIN_STR),l=o[0],u=o[1],c=o[2],s="true"===o[3],f="true"===o[4],m=t.get("amount"),g=t.get("warehouseCardUuid"),p=t.get("warehouseCardCode"),h=t.get("warehouseCardName"),y=r.props.unit?r.props.unit.toJS():[],S=r.props.financialInfo,T={cardUuid:l,name:c,code:u,amount:m,isOpenedQuantity:s,isUniformPrice:f,warehouseCardUuid:g,warehouseCardCode:p,warehouseCardName:h,unit:y,unitUuid:y.uuid,unitName:y.name,quantity:"",afterQuantity:"",financialInfo:S};a(w.changeEditCalculateCommonString(F,["countStockCardList",n],(0,C.fromJS)(d({},T))));a(w.getStockBuildUpPrice(i,[{cardUuid:l,storeUuid:g,assistList:t.get("assistList"),batchUuid:t.get("batchUuid"),noNeedPrice:!1,moreUnit:!1}],n,F,"count"))}})):g.default.createElement("span",{className:"count-modify-color"},t.get("code")+" "+t.get("name")),k?q?g.default.createElement("span",{className:"warehouse-select"},g.default.createElement(v.default,{placeholder:"请选择",combobox:!0,showSearch:!0,value:t.get("warehouseCardName")?(t.get("warehouseCardCode")?t.get("warehouseCardCode"):"")+" "+(t.get("warehouseCardName")?t.get("warehouseCardName"):""):void 0,dropdownRender:function(e){return g.default.createElement("div",null,e)},onChange:function(e){var r=e.split(E.TREE_JOIN_STR),o=r[0],l=r[1],u=r[2];t.get("amount");a(w.changeEditCalculateCommonString(F,["countStockCardList",n,"warehouseCardUuid"],o)),a(w.changeEditCalculateCommonString(F,["countStockCardList",n,"warehouseCardCode"],l)),a(w.changeEditCalculateCommonString(F,["countStockCardList",n,"warehouseCardName"],u)),a(w.changeEditCalculateCommonString(F,["countStockCardList",n,"quantity"],"")),a(w.changeEditCalculateCommonString(F,["countStockCardList",n,"afterQuantity"],""));a(w.getStockBuildUpPrice(i,[{cardUuid:t.get("cardUuid"),storeUuid:o,assistList:t.get("assistList"),batchUuid:t.get("batchUuid"),noNeedPrice:!1,moreUnit:!1}],n,F,"count"))}},ce.map(function(e,t){return g.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+E.TREE_JOIN_STR+e.get("code")+E.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))}))):g.default.createElement("span",{className:"count-modify-color"},t.get("warehouseCardCode")?t.get("warehouseCardCode")+" "+t.get("warehouseCardName"):t.get("warehouseCardName")):"",g.default.createElement("span",null,(t.get("referenceQuantity")?(0,S.formatFour)(t.get("referenceQuantity")):"")+" "+(t.get("unitName")?t.get("unitName"):t.getIn(["unit","name"])?t.getIn(["unit","name"]):"")),g.default.createElement("span",null,g.default.createElement(l.default,{title:t.getIn(["financialInfo","openSerial"])?"在调整数量中输入对应序列号":""},g.default.createElement(O.default,{placeholder:"请输入数量",showZero:!0,disabled:!q||t.getIn(["financialInfo","openSerial"]),value:t.get("afterQuantity"),onChange:function(e){(0,S.numberFourTest)(e,function(e){var r=e,i="STATE_YYSR_ZJ"===ne?(0,S.numberCalculate)(t.get("referenceQuantity"),r,4,"subtract",4):(0,S.numberCalculate)(r,t.get("referenceQuantity"),4,"subtract",4),o=(0,S.numberCalculate)(i,t.get("price"),4,"multiply");a(P.changeEditCalculateCommonString(F,["countStockCardList",n,"afterQuantity"],r)),a(P.changeEditCalculateCommonString(F,["countStockCardList",n,"quantity"],i)),a(w.changeEditCalculateCommonString(F,["countStockCardList",n,"amount"],o))},!0)}})),q?g.default.createElement(l.default,{title:"与"+he+"前数量一致"},g.default.createElement(_.default,{type:"count-same",onClick:function(){a(P.changeEditCalculateCommonString(F,["countStockCardList",n,"afterQuantity"],t.get("referenceQuantity"))),a(P.changeEditCalculateCommonString(F,["countStockCardList",n,"quantity"],0))}})):null),g.default.createElement("span",null,t.getIn(["financialInfo","openSerial"])?g.default.createElement("span",{onClick:function(){!k||t.get("warehouseCardUuid")?!t.getIn(["financialInfo","openAssist"])||!r.some(function(e){return!e.get("propertyName")})&&t.getIn(["financialInfo","assistClassificationList"]).size===r.size?!t.getIn(["financialInfo","openBatch"])||t.get("batchUuid")?e.setState({showAdjustWayModal:!0,curStockItem:t.toJS(),curStockIndex:n}):o.default.info("请先填写批次"):o.default.info("请先填写辅助属性"):o.default.info("请先填写仓库")},className:"serial-number-count"},Number(t.get("quantity"))?(0,S.formatFour)(Number(t.get("quantity"))):"点击输入",g.default.createElement(_.default,{type:"edit-pen"})):g.default.createElement(O.default,{placeholder:"请输入数量",showZero:!0,disabled:!q,value:t.get("quantity"),onChange:function(e){(0,S.numberFourTest)(e,function(e){var r=e,i="STATE_YYSR_ZJ"===ne?(0,S.numberCalculate)(t.get("referenceQuantity"),r,4,"subtract",4):(0,S.numberCalculate)(r,t.get("referenceQuantity"),4,"add",4),o=(0,S.numberCalculate)(r,t.get("price"),4,"multiply");a(w.changeEditCalculateCommonString(F,["countStockCardList",n,"amount"],o)),a(P.changeEditCalculateCommonString(F,["countStockCardList",n,"quantity"],r)),a(P.changeEditCalculateCommonString(F,["countStockCardList",n,"afterQuantity"],i))},!0)}})),g.default.createElement("span",null,ae.size>1?g.default.createElement(_.default,{type:"bigDel",theme:"outlined",onClick:function(){a(w.deleteStockList(ae,n,"delete",F,"countStockCardList"))}}):""),Y&&K==n?g.default.createElement(A.default,{visible:!0,dispatch:a,serialList:e.props.serialList,curSerialList:u.toJS(),item:t,onClose:function(){e.setState({showSerial:!1})},selectedList:c,onOK:function(e){var r=e.filter(function(e){return e.serialNumber}),i="STATE_CHYE_CH"===ne||"STATE_CHYE_CK"===ne?-r.length:r.length,o="STATE_YYSR_ZJ"===ne?(0,S.numberCalculate)(t.get("referenceQuantity"),i,4,"subtract",4):(0,S.numberCalculate)(i,t.get("referenceQuantity"),4,"add",4),l=(0,S.numberCalculate)(i,t.get("price"),4,"multiply");a(w.changeEditCalculateCommonString(F,["countStockCardList",n,"amount"],l)),a(P.changeEditCalculateCommonString(F,["countStockCardList",n,"quantity"],i)),a(P.changeEditCalculateCommonString(F,["countStockCardList",n,"afterQuantity"],o)),a(w.changeEditCalculateCommonString(F,["countStockCardList",n,"serialList"],(0,C.fromJS)(r)))}}):"",Z&&K===n?g.default.createElement(R.default,{visible:!0,dispatch:a,serialList:u,item:t,onClose:function(){e.setState({showEditSerial:!1})},onOk:function(e){var r=e.length,i=(0,S.numberCalculate)(r,t.get("price"),4,"multiply"),o="STATE_YYSR_ZJ"===ne?(0,S.numberCalculate)(t.get("referenceQuantity"),r,4,"subtract",4):(0,S.numberCalculate)(r,t.get("referenceQuantity"),4,"add",4);a(w.changeEditCalculateCommonString(F,["countStockCardList",n,"amount"],i)),a(P.changeEditCalculateCommonString(F,["countStockCardList",n,"afterQuantity"],o)),a(w.changeEditCalculateCommonString(F,["countStockCardList",n,"quantity"],r)),a(w.changeEditCalculateCommonString(F,["countStockCardList",n,"serialList"],(0,C.fromJS)(e)))}}):"")}),g.default.createElement("div",{className:"count-inventory-button"},q?g.default.createElement(u.default,{onClick:function(){a(w.deleteStockList(ae,ae.size-1,"add",F,"countStockCardList"))}},g.default.createElement(_.default,{type:"big-plus"}),"添加"+Q+"明细"):null,q?g.default.createElement(u.default,{onClick:function(){e.setState({showStockModal:!0}),a(w.changeEditCalculateCommonState("commonCardObj","selectList",(0,C.fromJS)([]))),a(w.changeEditCalculateCommonState("commonCardObj","selectItem",(0,C.fromJS)([]))),a(w.getStockCardCategoryAndList({isUniform:null,openQuantity:!0,warehouseUuid:oe.get("cardUuid"),oriDate:i,haveQuantity:ee,type:"count"}))}},g.default.createElement(_.default,{type:"editPlus"}),"批量添加存货"):null)),g.default.createElement("div",{className:"count-bottom-btn title-right"},q?null:g.default.createElement(u.default,{key:"print",type:"ghost",size:"large",onClick:function(){te?h.openLink({url:te}):o.default.info("暂无可打印的内容")}},"打印"),q?g.default.createElement(l.default,{title:ae.size?"保存后将生成PDF文件":"请录入盘点数据"},g.default.createElement(u.default,{className:"count-adjustment-mask-btn",disabled:!ae.size,onClick:function(){var e=!0,t="",n=[];if(ae.map(function(a){if(k){if(!a.get("warehouseCardUuid"))return e=!1,void(t="请选择【"+a.get("code")+" "+a.get("name")+"】的仓库");if(n.indexOf(a.get("warehouseCardUuid")+"+"+a.get("cardUuid"))>-1)return e=!1,void(t="【"+a.get("code")+" "+a.get("name")+"】和【"+a.get("warehouseCardName")+"】的"+he+"数据重复 ");n.push(a.get("warehouseCardUuid")+"+"+a.get("cardUuid"))}else{if(n.indexOf(a.get("cardUuid"))>-1)return e=!1,void(t="【"+a.get("code")+" "+a.get("name")+"】的"+he+"数据重复 ");n.push(a.get("cardUuid"))}if(""===a.get("afterQuantity"))return e=!1,void(t="盘点数量未填写完整")}),e){var r=x>8;a(w.saveAdjustmentEnclosure(ae,i,$,r,function(e){c.default.confirm({title:"保存失败",content:"流水附件达到上限9个，无法新增附件，您可通过'打印'保存盘点单",okText:"打印",cancelText:"取消",onOk:function(){h.openLink({url:e})}})})),a(w.changeEditCalculateCommonState("views","countInsert",!1)),a(w.changeEditCalculateCommonState("views","pdfInsertFirst",!1))}else o.default.info(t)}},"保存盘点单")):g.default.createElement(u.default,{className:"count-adjustment-mask-btn",onClick:function(){a(w.changeEditCalculateCommonState("views","countInsert",!0))}},"修改盘点单"),g.default.createElement(u.default,{className:"count-adjustment-mask-btn",onClick:function(){a(P.saveCountList([],ve,!1)),"STATE_YYSR_ZJ"===ne?a(w.getCostCarryoverStockList(i,ne,de)):(a(w.getStockCardList("BalanceTemp")),a(w.getCanUseWarehouseCardList({temp:"BalanceTemp"}))),e.setState({checkable:!1}),n()}},"取消"),g.default.createElement(u.default,{className:"count-adjustment-mask-btn",onClick:function(){var t=[],r=!1,l=!0,u="",s=[];if(ae&&ae.size&&ae.toJS().map(function(e){if(k){if(!e.warehouseCardUuid)return l=!1,void(u="请选择【"+e.code+" "+e.name+"】的仓库");if(s.indexOf(e.warehouseCardUuid+"+"+e.cardUuid)>-1)return l=!1,void(u="【"+e.code+" "+e.name+"】和【"+e.warehouseCardName+"】的"+he+"数据重复 ");s.push(e.warehouseCardUuid+"+"+e.cardUuid)}else{if(s.indexOf(e.cardUuid)>-1)return l=!1,void(u="【"+e.code+" "+e.name+"】的"+he+"数据重复 ");s.push(e.cardUuid)}if(""===e.afterQuantity)return l=!1,void(u="盘点数量未填写完整");Number(e.quantity)?t.push(e):r=!0}),0===t.length&&(t=[{}]),l)if(!$&&q)c.default.confirm({title:"盘点单未保存，是否保存盘点单",content:"",okText:"确认",cancelText:"取消",onCancel:function(){r&&o.default.info(he+"数量为0的存货明细不需要"+he),a(P.saveCountList(t,ve,!0)),"STATE_YYSR_ZJ"===ne?a(w.getCostCarryoverStockList(i,ne,de)):(a(w.getStockCardList("BalanceTemp")),a(w.getCanUseWarehouseCardList({temp:"BalanceTemp"}))),e.setState({checkable:!1}),n()},onOk:function(){a(w.saveAdjustmentEnclosure(ae,i,!1)),r&&o.default.info(he+"数量为0的存货明细不需要"+he),a(P.saveCountList(t,ve,!0)),"STATE_YYSR_ZJ"===ne?a(w.getCostCarryoverStockList(i,ne,de)):(a(w.getStockCardList("BalanceTemp")),a(w.getCanUseWarehouseCardList({temp:"BalanceTemp"}))),e.setState({checkable:!1}),n()}});else{r&&o.default.info(he+"数量为0的存货明细不需要"+he);var d="STATE_YYSR_ZJ"===ne?"CostTransferTemp":"BalanceTemp";a(P.saveCountList(t,ve,!0,d)),"STATE_YYSR_ZJ"===ne?a(w.getCostCarryoverStockList(i,ne,de)):(a(w.getStockCardList("BalanceTemp")),a(w.getCanUseWarehouseCardList({temp:"BalanceTemp"}))),e.setState({checkable:!1}),n()}else o.default.info(u)}},"确定"))),g.default.createElement("div",{className:"count-right"})),g.default.createElement(b.default,{treeList:X,showWarehouseModal:B,onClose:function(){return e.setState({showWarehouseModal:!1})},dispatch:a,selectedKeys:Te,countStockCardList:ae,countstockCardIdList:be,checkable:G,canClick:!0,needTotal:!0,onSelect:function(t,n,r,i,o,l,u){e.setState({checkable:!1});var s=[],d=function e(t){return t&&t.map(function(t){t.childList&&t.childList.length?e(t.childList):s.push(t)})};d("全部"===r?X.toJS():o),ae&&ae.size>0?c.default.confirm({title:"切换仓库后，列表数据将被清空!",content:"",okText:"确认",cancelText:"取消",onOk:function(){a(P.changeEditCalculateCommonString(F,["chooseWareHouseCard","cardUuid"],t)),a(P.changeEditCalculateCommonString(F,["chooseWareHouseCard","name"],n+" "+r)),a(P.changeEditCalculateCommonString(F,["chooseWareHouseCard","isUniform"],i)),a(P.changeEditCalculateCommonString(F,"wareHouseNoChild",u)),a(P.changeEditCalculateCommonString(F,"countStockCardList",(0,C.fromJS)([]))),a(P.changeEditCalculateCommonString(F,"countWarehouseList",(0,C.fromJS)(s)))}}):(a(P.changeEditCalculateCommonString(F,["chooseWareHouseCard","cardUuid"],t)),a(P.changeEditCalculateCommonString(F,["chooseWareHouseCard","name"],n?n+" "+r:r)),a(P.changeEditCalculateCommonString(F,["chooseWareHouseCard","isUniform"],i)),a(P.changeEditCalculateCommonString(F,"wareHouseNoChild",u)),a(P.changeEditCalculateCommonString(F,"countWarehouseList",(0,C.fromJS)(s))))},onCheck:function(){}}),g.default.createElement(L.default,{showCommonChargeModal:this.state.showStockModal,MemberList:fe,thingsList:me,dispatch:a,oriDate:i,oriState:ne,selectedKeys:Ce,selectItem:ge,selectList:pe,stockCard:ae,stockCardIdList:be,showSelectAll:!0,needConcat:!0,temp:F,hasNumber:ee,stockTemplate:"countStockCardList",cancel:function(){e.setState({showStockModal:!1})},getNumberCallback:function(e,t,n){a("all"===t?w.getStockCardCategoryAndList({isUniform:null,openQuantity:!0,warehouseUuid:oe.get("cardUuid"),oriDate:i,haveQuantity:e,type:"count"}):w.getStockSomeCardList({uuid:t,level:n,isUniform:null,openQuantity:!0,warehouseUuid:oe.get("cardUuid"),haveQuantity:e,type:"count"}))},selectTreeFunc:function(e,t){a("all"===e?w.getStockCardCategoryAndList({isUniform:null,openQuantity:!0,warehouseUuid:oe.get("cardUuid"),oriDate:i,haveQuantity:ee,type:"count"}):w.getStockSomeCardList({uuid:e,level:t,isUniform:null,openQuantity:!0,warehouseUuid:oe.get("cardUuid"),haveQuantity:ee,type:"count"}))},callback:function(e){k&&oe.get("cardUuid");var t=[],n=ae.size;e&&e.size&&e.map(function(e,a){e.get("code"),e.get("name");var r=se?oe.get("cardUuid"):e.get("warehouseCardUuid");t.push({cardUuid:e.get("uuid")||e.get("cardUuid"),storeUuid:r,assistList:e.get("assistList"),batchUuid:e.get("batchUuid"),isUniformPrice:e.get("isUniformPrice"),index:n+a})}),t.length>0&&a(w.getBalanceAdjustPrice(i,t,"countStockCardList",F,!0,!0))}}),g.default.createElement(I.default,{showAdjustWayModal:z,clearSerialList:function(){a(w.changeEditCalculateCommonString(F,["countStockCardList",K,"serialList"],(0,C.fromJS)([])))},onOk:function(t){if(e.setState({showAdjustWayModal:!1}),"add"===t)e.setState({showEditSerial:!0});else{var n=W.assistList||[];if(k&&!W.warehouseCardUuid)return void o.default.info("请先填写仓库");if(W.openAssist&&(n.some(function(e){return!e.get("propertyName")})||W.assistClassificationList.length!==n.size))return void o.default.info("请先填写辅助属性");if(W.openBatch&&!W.batchUuid)return void o.default.info("请先填写批次");"modify"===p?a(P.getSerialList(W,K,"out",function(t){a(w.changeEditCalculateCommonString(F,["countStockCardList",K,"serialList"],(0,C.fromJS)(t))),e.setState({showSerial:!0})})):e.setState({showSerial:!0})}},onCancel:function(){e.setState({showAdjustWayModal:!1})}}))}}]),t}(),r.displayName="Chye/Cbjz BalanceAdjustment",n=i))||n;t.default=J},2614:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i,o=j(a(61)),l=j(a(47)),u=j(a(32)),c=j(a(1230)),s=j(a(100)),d=j(a(37)),f=j(a(45)),m=j(a(14)),g=j(a(1256)),p=j(a(179)),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(79),a(46),a(51),a(1231),a(99),a(38),a(55),a(78),a(1257),a(178);var y=a(1),E=j(y),S=a(17),T=a(18),_=j(a(6)),v=k(a(30)),b=a(127),L=k(a(27)),I=a(22),N=(a(31),j(a(90))),O=(j(a(483)),j(a(1758))),A=j(a(1759)),R=j(a(1346)),w=j(a(487)),P=k(a(130)),U=k(a(485)),M=k(a(172));k(a(43));function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function j(e){return e&&e.__esModule?e:{default:e}}var J=p.default.TreeNode,D=(0,S.immutableRenderDecorator)((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.closeFocus=function(t){for(var a=t.target||t.srcElement,n=1;a.parentNode&&n<20;){if(a.parentNode.className&&"string"==typeof a.parentNode.className&&a.parentNode.className.indexOf("uniform-inventory-are-for-dom")>-1)return;a=a.parentNode,n++}e.setState({focus:!1,addBatch:!1,curIndex:-1,assistModal:!1})},e.state={showWarehouseModal:!1,showStockModal:!1,showSingleModal:!1,checkable:!1,unitPriceModal:!1,selectIndex:0,selectValue:"",inventoryUuid:"",batchNumber:"",batchDate:(new I.DateLib).toString(),expirationDate:(new I.DateLib).toString(),focus:!1,addBatch:!1,batchModal:!1,assistModal:!1,asssistName:"",classificationUuid:"",assIndex:-1,curIndex:-1,curAssistClassificationList:(0,T.fromJS)([]),curItemOpenAssist:!1,curItemOpenBatch:!1,curWarehouseCardUuid:"",addBatchChange:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,E.default.Component),h(t,[{key:"componentDidMount",value:function(){document.getElementsByTagName("body")[0].addEventListener("click",this.closeFocus)}},{key:"componentWillUnmount",value:function(){document.getElementsByTagName("body")[0].removeEventListener("click",this.closeFocus)}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.returnBackFun,r=t.calculateViews,i=t.oriDate,p=t.BalanceTemp,h=(t.insertOrModify,t.commonCardObj),S=t.enableWarehouse,k=t.homeState,j=t.enclosureCountUser,D=this.state,x=D.showWarehouseModal,F=(D.showStockModal,D.showSingleModal),H=D.checkable,B=D.unitPriceModal,G=D.selectIndex,Y=D.selectValue,Z=D.inventoryUuid,z=D.batchDate,W=D.expirationDate,K=D.batchNumber,X=D.focus,V=D.addBatch,Q=D.batchModal,q=D.assistModal,$=D.asssistName,ee=D.classificationUuid,te=D.assIndex,ae=D.curIndex,ne=D.curAssistClassificationList,re=D.curItemOpenAssist,ie=D.curItemOpenBatch,oe=(D.curWarehouseCardUuid,D.addBatchChange),le=r.get("showCount"),ue=(r.get("stockTitleName"),r.get("countInsert")),ce=r.get("pdfInsertFirst"),se=(r.get("selectI"),r.get("hasNumber")),de=r.get("singleUrl"),fe=r.get("warehouseTreeList"),me=p.get("countStockCardList"),ge=(me.size,p.get("oriState")),pe=(p.get("wareHouseCardList"),p.get("wareHouseCardList"),p.get("allStockCardList"),p.get("stockCardList")),Ce=p.get("chooseWareHouseCard"),he=(p.get("chooseStockCard"),p.get("oriStockCardList"),p.get("oriWarehouseCardList"),p.get("oldChooseWareHouseCard"),p.get("oldChooseStockCard"),p.get("oriWareHouseList"),p.get("oriStockList"),p.get("warehouseSelectedKeys")),ye=(p.get("countWarehouseList"),h.get("memberList")),Ee=h.get("thingsList"),Se=h.get("selectItem"),Te=h.get("selectList"),_e=h.get("selectedKeys"),ve=(p.get("wareHouseList"),k.getIn(["permissionInfo","Report"]),k.getIn(["views","isPlay"]),k.getIn(["views","URL_POSTFIX"]),S?"STATE_CHYE_CH"===ge?he.toJS():Ce?[""+Ce.get("cardUuid")+L.TREE_JOIN_STR+Ce.get("name")+L.TREE_JOIN_STR+Ce.get("isUniform")]:[]:[]),be=[];pe.map(function(e){return be.push(e.get("cardUuid"))});var Le=Ee.size?Ee.filter(function(e){return-1===be.indexOf(e.get("uuid"))}):(0,T.fromJS)([]),Ie=[],Ne=[];me&&me.map(function(e){Ie.push(e.get("cardUuid")),e.get("isUniformPrice")&&Ne.push(e.get("cardUuid"))});var Oe=function e(t,a,n){return t.map(function(t,r){return n===t.uuid&&(t.childList?t.childList:[]),t.childList&&t.childList.length?E.default.createElement(J,{title:t.name,value:""+t.uuid+L.TREE_JOIN_STR+t.code+L.TREE_JOIN_STR+t.name+L.TREE_JOIN_STR+t.isUniform,key:t.uuid},e(t.childList,a+"_"+r)):E.default.createElement(J,{title:t.name,value:""+t.uuid+L.TREE_JOIN_STR+t.code+L.TREE_JOIN_STR+t.name+L.TREE_JOIN_STR+t.isUniform+L.TREE_JOIN_STR+!0,key:t.uuid})})},Ae=!1;return me&&me.map(function(e,t){Ae=e.getIn(["financialInfo","openAssist"])||e.getIn(["financialInfo","openBatch"])||Ae}),E.default.createElement("div",{className:"count-adjustment-mask import-mask",style:{display:le?"block":"none"}},E.default.createElement("div",{className:"count-container"},E.default.createElement("div",{className:"count-inventory"},E.default.createElement("div",{className:"count-inventory-content",style:{marginTop:"10px"}},E.default.createElement("div",{className:Ae?"count-inventory-area-title-assist":"count-inventory-area-title"},E.default.createElement("span",null,"仓库"),Ae?E.default.createElement("span",null,"属性|批次"):null,E.default.createElement("span",null,"数量"),E.default.createElement("span",null,"调整前单价"),E.default.createElement("span",null,"调整后单价"),E.default.createElement("span",null,"调整金额"),E.default.createElement("span",null)),me&&me.map(function(t,n){var r="",o=t.get("assistList")||(0,T.fromJS)([]),h=t.getIn(["financialInfo","openBatch"]),S=t.getIn(["financialInfo","openAssist"]),v=t.getIn(["financialInfo","openShelfLife"]),O=t.getIn(["financialInfo","assistClassificationList"])||(0,T.fromJS)([]),A=(t.get("batchList")||(0,T.fromJS)([])).find(function(e){return e.get("batchUuid")===t.get("batchUuid")||e.get("batch")===t.get("batch")})||(0,T.fromJS)({}),R=A.get("batch")||t.get("batch")?(A.get("batch")||t.get("batch"))+(v&&A.get("expirationDate")&&"undefined"!==A.get("expirationDate")?"("+A.get("expirationDate")+")":v&&t.get("expirationDate")&&"undefined"!==t.get("expirationDate")?"("+t.get("expirationDate")+")":""):void 0;r=S&&h?(o.some(function(e){return e.get("propertyName")})?o.map(function(e){return e.get("propertyName")}).join():"属性")+" | "+(t.get("batch")?R:"批次"):S||h?S?o.some(function(e){return e.get("propertyName")})?o.map(function(e){return e.get("propertyName")}).join():"属性":t.get("batch")?R:"批次":t.get("code")?(t.get("code")?t.get("code"):"")+" "+(t.get("name")?t.get("name"):""):void 0;var w=0;return E.default.createElement("div",{className:(Ae?"count-inventory-area-stock-assist":"count-inventory-area-stock")+" count-inventory-childList"},E.default.createElement("div",{className:"count-unit-title"},E.default.createElement("span",null,"调整存货(",n+1,")"),E.default.createElement("span",null,"单价仓库"),Ae?E.default.createElement("span",null):null,E.default.createElement("span",null),E.default.createElement("span",null,"统一单价"),E.default.createElement("span",null),E.default.createElement("span",null)),E.default.createElement("div",{className:Ae?"count-unit-stock-assist":"count-unit-stock"},E.default.createElement("span",{className:(Ae?"count-unit-stock-box-assist":"count-unit-stock-box")+" uniform-inventory-are-for-dom"},E.default.createElement("span",{className:(ue?"count-unit-stock-insert":"count-unit-stock-modify")+" ",style:{border:"none"},onClick:function(){ue&&(e.setState({showSingleModal:!0,selectIndex:n}),a(P.getStockCardCategoryAndList({isUniform:null,openQuantity:!0,warehouseUuid:"",oriDate:i,haveQuantity:se,type:"count"})))}},t.get("code")+" "+t.get("name"),ue?E.default.createElement(N.default,{type:"edit-pen"}):null),S||h?E.default.createElement("span",{onClick:function(t){e.setState({focus:!0,curIndex:n})}},r):null,E.default.createElement("div",{className:"assembly-produce-drop-content uniform-adjustment-drop-content",style:{display:X&&ae===n?"":"none"},ref:function(t){return e.nameInput=t},onClick:function(t){t.stopPropagation(),oe&&e.setState({addBatch:!1,addBatchChange:!1})}},S?E.default.createElement("div",null,E.default.createElement("span",null,"属性:"),O.map(function(t,r){return E.default.createElement(f.default,{key:t.get("uuid"),dropdownClassName:"uniform-inventory-are-for-dom"+r,value:((o||(0,T.fromJS)([])).find(function(e){return e.get("classificationUuid")===t.get("uuid")})||(0,T.fromJS)({})).get("propertyName")||void 0,dropdownRender:function(a){return E.default.createElement("div",null,a,E.default.createElement(g.default,{style:{margin:"4px 0"}}),E.default.createElement("div",{style:{padding:"4px 8px",cursor:"pointer"},onMouseDown:function(e){return e.preventDefault()},onClick:function(){return e.setState({assistModal:!0,classificationUuid:t.get("uuid"),assIndex:r})}},E.default.createElement(m.default,{type:"plus"})," 新增"))},onChange:function(e){var l=e.split(L.TREE_JOIN_STR),u=l[0],c=l[1],s=o.size,d=o.findIndex(function(e){return e.get("classificationUuid")===t.get("uuid")}),f=(0,T.fromJS)([]);0===s?(f=(0,T.fromJS)([{classificationUuid:t.get("uuid"),classificationName:t.get("name"),propertyUuid:u,propertyName:c}]),a(P.changeEditCalculateCommonString("Balance",["countStockCardList",n,"assistList"],(0,T.fromJS)(f)))):-1===d?(f=o.concat((0,T.fromJS)([{classificationUuid:t.get("uuid"),classificationName:t.get("name"),propertyUuid:u,propertyName:c}])),a(P.changeEditCalculateCommonString("Balance",["countStockCardList",n,"assistList",s],(0,T.fromJS)({classificationUuid:t.get("uuid"),classificationName:t.get("name"),propertyUuid:u,propertyName:c})))):(f=o.updateIn([r,"propertyUuid"],function(e){return u}).updateIn([r,"propertyName"],function(e){return c}),a(P.changeEditCalculateCommonString("Balance",["countStockCardList",n,"assistList",r,"propertyUuid"],u)),a(P.changeEditCalculateCommonString("Balance",["countStockCardList",n,"assistList",r,"propertyName"],c)));p.getIn(["countStockCardList",n,"assistList"])&&p.getIn(["countStockCardList",n,"assistList"]).toJS();O.size===f.size&&(h&&me.getIn([n,"batch"])||!h)&&me.getIn([n,"warehouseCardUuid"])&&a(P.getBalanceUniformPrice({inventoryUuid:me.getIn([n,"uuid"]),oriDate:i,warehouseUuid:me.getIn([n,"warehouseCardUuid"]),batchUuid:me.getIn([n,"batchUuid"]),assistList:f.toJS(),selectIndex:n,temp:"BalanceTemp",stockCardTemp:"countStockCardList"}))}},E.default.createElement(Option,{key:t.get("uuid"),value:L.TREE_JOIN_STR+"全部"+t.get("name")},"全部"+t.get("name")),t.get("propertyList").map(function(e){return E.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+L.TREE_JOIN_STR+e.get("name")},e.get("name"))}))})):"",h?E.default.createElement("div",{style:{position:"relative"}},E.default.createElement("span",null,"批次:"),E.default.createElement(y.Fragment,null,E.default.createElement(f.default,{showSearch:!0,key:t.get("uuid"),showArrow:!1,placeholder:"请选择/新增批次",dropdownClassName:"uniform-inventory-are-for-dom"+n,dropdownRender:function(t){return E.default.createElement("div",null,t,E.default.createElement(g.default,{style:{margin:"4px 0"}}),E.default.createElement("div",{style:{padding:"4px 8px",cursor:"pointer"},onMouseDown:function(e){return e.preventDefault()},onClick:function(){return e.setState({batchModal:!0})}},E.default.createElement(N.default,{type:"edit-pen"}),"修改批次信息"))},onDropdownVisibleChange:function(e){e&&a(U.getStockBatchList({inventoryUuid:t.get("cardUuid"),sectionTemp:"Balance",stockTemplate:"countStockCardList",index:n}))},value:R,onChange:function(e,t){var r=e.split(L.TREE_JOIN_STR),o=t.props.batchUuid,l=r[0]||"",u=r[1];a(P.changeEditCalculateCommonString("Balance",["countStockCardList",n,"batch"],l)),a(P.changeEditCalculateCommonString("Balance",["countStockCardList",n,"batchUuid"],o)),a(P.changeEditCalculateCommonString("Balance",["countStockCardList",n,"expirationDate"],u)),(S&&me.getIn([n,"assistList"]).size===O.size||!S)&&me.getIn([n,"warehouseCardUuid"])&&a(P.getBalanceUniformPrice({inventoryUuid:me.getIn([n,"uuid"]),oriDate:i,warehouseUuid:me.getIn([n,"warehouseCardUuid"]),batchUuid:o,assistList:me.getIn([n,"assistList"]),selectIndex:n,temp:"BalanceTemp",stockCardTemp:"countStockCardList"}))}},E.default.createElement(Option,{key:"uniformtotal",value:"全部批次"+L.TREE_JOIN_STR,batchUuid:""},"全部批次"),t.get("batchList")&&t.get("batchList").map(function(e){return E.default.createElement(Option,{key:e.get("batchUuid"),value:""+e.get("batch")+L.TREE_JOIN_STR+e.get("expirationDate"),batchUuid:e.get("batchUuid")},e.get("batch")+(v&&e.get("expirationDate")?"("+e.get("expirationDate")+")":""))})),E.default.createElement("span",{className:"add-button",onClick:function(t){t.preventDefault(),e.setState({addBatch:!0})}},"新增")),E.default.createElement("div",{className:"ls-batch-select-frame",style:{display:V?"":"none"},onClick:function(e){e.stopPropagation()}},E.default.createElement("div",null,E.default.createElement("span",null,E.default.createElement("span",{style:{color:"red"}},"*"),"批次号："),E.default.createElement(s.default,{value:K,onChange:function(t){t.preventDefault();/^[0-9a-zA-Z]{0,8}$/.test(t.target.value)?e.setState({batchNumber:t.target.value}):d.default.info("批次只支持输入8位以内的数字或字母")},placeholder:"请输入批次号"})),v?E.default.createElement("div",null,E.default.createElement("span",null,E.default.createElement("span",{style:{color:"red"}},"*"),"截止日期："),E.default.createElement(c.default,{placeholder:"请选择生产日期",allowClear:!1,size:"small",value:(0,_.default)(W),onChange:function(t){var a=t.format("YYYY-MM-DD");e.setState({expirationDate:a})}})):"",v?E.default.createElement("div",null,E.default.createElement("span",null,"生产日期："),E.default.createElement(c.default,{placeholder:"请选择生产日期",allowClear:!1,size:"small",value:(0,_.default)(z),onChange:function(t){var a=t.format("YYYY-MM-DD");e.setState({batchDate:a})}})):"",E.default.createElement("div",null,E.default.createElement(u.default,{onClick:function(){return e.setState({addBatch:!1})}},"取消"),E.default.createElement(u.default,{type:"primary",onClick:function(){a(M.insertBatch(K,z,W,t.get("cardUuid"),function(t){var r=t.batchUuid,o=t.batch,l=t.expirationDate;a(P.changeEditCalculateCommonString("Balance",["countStockCardList",n,"batch"],o)),a(P.changeEditCalculateCommonString("Balance",["countStockCardList",n,"batchUuid"],r)),a(P.changeEditCalculateCommonString("Balance",["countStockCardList",n,"expirationDate"],l)),(S&&me.getIn([n,"assistList"]).size===O.size||!S)&&me.getIn([n,"warehouseCardUuid"])&&a(P.getBalanceUniformPrice({inventoryUuid:me.getIn([n,"uuid"]),oriDate:i,warehouseUuid:me.getIn([n,"warehouseCardUuid"]),batchUuid:r,assistList:me.getIn([n,"assistList"]),selectIndex:n,temp:"BalanceTemp",stockCardTemp:"countStockCardList"})),e.setState({addBatch:!1,batchNumber:"",expirationDate:(new I.DateLib).toString(),batchDate:(new I.DateLib).toString()})}))}},"新增")))):""),q?E.default.createElement(l.default,{visible:!0,title:"新增属性",className:"inventory-are-for-dom",onCancel:function(){return e.setState({assistModal:!1})},onOk:function(){a(U.insertAssist({classificationUuid:ee,name:$,inventoryUuid:t.get("cardUuid"),sectionTemp:"Balance",stockTemplate:"countStockCardList",index:n,assIndex:te},function(t,r){var l=t.filter(function(e){return e.name===r}),u=(o.size,o.findIndex(function(e){return e.get("classificationUuid")===ee})),c=l[0].uuid,s=l[0].name;-1===u?a(P.changeEditCalculateCommonString("Balance",["countStockCardList",n,"assistList"],o.concat((0,T.fromJS)([{classificationUuid:ee,propertyUuid:c,propertyName:s}])))):(a(P.changeEditCalculateCommonString("Balance",["countStockCardList",n,"assistList",te,"propertyUuid"],c)),a(P.changeEditCalculateCommonString("Balance",["countStockCardList",n,"assistList",te,"propertyName"],s)));p.getIn(["countStockCardList",n,"assistList"]).toJS();var d=[];o.map(function(e,t){t===te?d.push(C({},e,{propertyUuid:c,propertyName:s})):d.push(e)}),O.size===d.length&&(h&&me.getIn([n,"batch"])||!h)&&me.getIn([n,"warehouseCardUuid"])&&a(P.getBalanceUniformPrice({inventoryUuid:me.getIn([n,"uuid"]),oriDate:i,warehouseUuid:me.getIn([n,"warehouseCardUuid"]),batchUuid:me.getIn([n,"batchUuid"]),assistList:(0,T.fromJS)(d),selectIndex:n,temp:"BalanceTemp",stockCardTemp:"countStockCardList"})),e.setState({assistModal:!1,asssistName:"",assIndex:-1})}))}},E.default.createElement("div",{style:{display:"flex"}},E.default.createElement("span",{style:{width:"72px",lineHeight:"28px"}},"属性名称："),E.default.createElement(s.default,{value:$,onChange:function(t){t.preventDefault(),e.setState({asssistName:t.target.value})}}))):"",Q?E.default.createElement(BatchModal,{className:"inventory-are-for-dom",visible:!0,onClose:function(){e.setState({batchModal:!1})},onOk:function(r,i,o,l){a(U.modifyBatch({inventoryUuid:t.get("cardUuid"),sectionTemp:"Balance",stockTemplate:"countStockCardList",index:n,batch:r,batchUuid:i,productionDate:v?o:"",expirationDate:v?l:""},function(){e.setState({batchModal:!1})}))},saveAndNewForbidden:!0,batchList:t.get("batchList"),openShelfLife:v}):""),E.default.createElement("span",{className:ue?"count-unit-stock-insert":"count-unit-stock-modify",onClick:function(){ue&&e.setState({showWarehouseModal:!0,checkable:!1,selectIndex:n,inventoryUuid:t.get("cardUuid"),curAssistClassificationList:O,curItemOpenAssist:S,curItemOpenBatch:h,curWarehouseCardUuid:t.get("warehouseCardUuid")})}},t.get("warehouseCardCode")||t.get("warehouseCardName")?(t.get("warehouseCardCode")?t.get("warehouseCardCode"):"")+" "+(t.get("warehouseCardName")?t.get("warehouseCardName"):""):"请选择仓库",ue?E.default.createElement(N.default,{type:"edit-pen"}):null),E.default.createElement("span",{className:ue?"count-unit-stock-insert":"count-unit-stock-modify",onClick:function(){ue&&e.setState({unitPriceModal:!0,selectIndex:n,selectValue:t.get("price")})}},E.default.createElement("span",null,(0,I.formatFour)(t.get("price"))),ue?E.default.createElement(N.default,{type:"edit-pen"}):null),E.default.createElement("span",null,"元/",t.getIn(["unit","name"])),ue?E.default.createElement(N.default,{type:"bigDel",theme:"outlined",onClick:function(){me.size>1?a(P.deleteStockList(me,n,"delete","Balance","countStockCardList")):l.default.confirm({title:"确认",content:"该存货列表将被清空，是否确认删除",okText:"确认",cancelText:"取消",onOk:function(){a(P.deleteStockList(me,n,"delete","Balance","countStockCardList"))}})}}):""),E.default.createElement("div",{className:"count-unit-stock-child"},t.get("childList")&&t.get("childList").size&&t.get("childList").map(function(e){var a=e.get("assistList")&&e.get("assistList").some(function(e){return e.get("propertyName")})?e.get("assistList").map(function(e){return e.get("propertyName")}).join():"",n=e.get("batch")?e.get("batch"):"";return w=(0,I.numberCalculate)(w,e.get("amount")),E.default.createElement("div",{className:"count-unit-list"},E.default.createElement("span",null,e.get("warehouseCode")+" "+e.get("warehouseName")),Ae?S||h?E.default.createElement("span",null,(a||"")+" "+(n&&a?"|"+n:n||"")):E.default.createElement("span",{style:{border:"none"}}):null,E.default.createElement("span",null,e.get("quantity")?(0,I.formatFour)(e.get("quantity")):0),E.default.createElement("span",null,e.get("price")?(0,I.formatFour)(e.get("price")):0),E.default.createElement("span",null,t.get("price")?(0,I.formatFour)(t.get("price")):0),E.default.createElement("span",null,(0,I.formatMoney)(e.get("amount"))),E.default.createElement("span",null))})||"",E.default.createElement("div",{className:"count-unit-stock-total"},E.default.createElement("span",null,"调整金额合计："),E.default.createElement(b.Amount,null,w))))}),E.default.createElement("div",{className:"count-inventory-button"},E.default.createElement(u.default,{onClick:function(){e.setState({showStockModal:!0}),a(P.changeEditCalculateCommonState("commonCardObj","selectList",(0,T.fromJS)([]))),a(P.changeEditCalculateCommonState("commonCardObj","selectItem",(0,T.fromJS)([]))),a(P.getStockCardCategoryAndList({isUniform:null,openQuantity:!0,warehouseUuid:"",oriDate:i,haveQuantity:se,type:"count"}))}},E.default.createElement(N.default,{type:"editPlus"}),"批量添加存货"))),E.default.createElement("div",{className:"count-bottom-btn title-right"},ue?null:E.default.createElement(u.default,{key:"print",type:"ghost",size:"large",onClick:function(){de?v.openLink({url:de}):d.default.info("暂无可打印的内容")}},"打印"),ue?E.default.createElement(o.default,{title:me.size?"保存后将生成PDF文件":"请录入盘点数据"},E.default.createElement(u.default,{disabled:!me.size,className:"count-adjustment-mask-btn",onClick:function(){var e=!0,t="",n=[];if(me&&me.size&&me.toJS().map(function(a,r){if(!a.isUniformPrice&&!a.warehouseCardUuid||!Number(a.price))return e=!1,void(t="调整存货未填写完整信息");if(a.isUniformPrice){if(n.indexOf(a.cardUuid)>-1)return e=!1,void(t="【"+a.code+" "+a.name+"】统一单价的存货不支持重复选择 ");n.push(a.cardUuid)}else{if(n.indexOf(a.warehouseCardUuid+"+"+a.cardUuid)>-1){var i=n.findIndex(function(e){return e===a.get("warehouseCardUuid")+"+"+a.get("cardUuid")});return e=!1,void(t="调整存货("+r+")和调整存货("+i+")的调整数据重复 ")}n.push(a.warehouseCardUuid+"+"+a.cardUuid)}}),e){var r=j>8;a(P.saveAdjustmentEnclosure(me,i,ce,r,function(e){l.default.confirm({title:"保存失败",content:"流水附件达到上限9个，无法新增附件，您可通过'打印'保存盘点单",okText:"打印",cancelText:"取消",onOk:function(){v.openLink({url:e})}})},ge)),a(P.changeEditCalculateCommonState("views","countInsert",!1)),a(P.changeEditCalculateCommonState("views","pdfInsertFirst",!1))}else d.default.info(t)}},"保存盘点单")):E.default.createElement(u.default,{className:"count-adjustment-mask-btn",onClick:function(){a(P.changeEditCalculateCommonState("views","countInsert",!0))}},"修改盘点单"),E.default.createElement(u.default,{className:"count-adjustment-mask-btn",onClick:function(){a(U.saveCountList([],[],!1)),a(P.getCanUseWarehouseCardList({temp:"BalanceTemp",isUniform:!1})),e.setState({checkable:!1}),n()}},"取消"),E.default.createElement(u.default,{className:"count-adjustment-mask-btn",onClick:function(){var t=[],r=!0,i="",o=[];me&&me.size&&me.toJS().map(function(e,a){if(!Number(e.price))return r=!1,void(i="调整存货未填写完整信息");if(e.isUniformPrice){if(o.indexOf(e.cardUuid)>-1)return r=!1,void(i="【"+e.code+" "+e.name+"】统一单价的存货不支持重复选择 ");o.push(e.cardUuid)}else{if(o.indexOf(e.warehouseCardUuid+"+"+e.cardUuid)>-1){var n=o.findIndex(function(t){return t===e.get("warehouseCardUuid")+"+"+e.get("cardUuid")});return r=!1,void(i="调整存货("+a+")和调整存货("+n+")的调整数据重复 ")}o.push(e.warehouseCardUuid+"+"+e.cardUuid)}var l=[];e.childList&&e.childList.map(function(t){0!==Number(t.amount)&&l.push(C({},e,t,{name:e.name,code:e.code,cardUuid:e.cardUuid,warehouseCardCode:t.warehouseCode,warehouseCardName:t.warehouseName,warehouseCardUuid:t.warehouseUuid,price:(0,I.numberCalculate)(e.price,t.price,2,"subtract"),referenceQuantity:t.quantity,amount:t.amount,quantity:"",unitUuid:"",unitName:""}))}),t=t.concat(l)}),r?(a(P.changeEditCalculateCommonState("BalanceTemp","stockCardList",(0,T.fromJS)(t))),a(P.changeEditCalculateCommonState("commonCardObj","selectList",(0,T.fromJS)([]))),a(P.changeEditCalculateCommonState("commonCardObj","selectItem",(0,T.fromJS)([]))),a(P.changeEditCalculateCommonState("BalanceTemp","countStockCardList",(0,T.fromJS)([]))),a(P.getCanUseWarehouseCardList({temp:"BalanceTemp",isUniform:!1})),e.setState({checkable:!1}),n()):d.default.info(i)}},"确定"))),E.default.createElement("div",{className:"count-right"})),E.default.createElement(O.default,{treeList:fe,showWarehouseModal:x,onClose:function(){return e.setState({showWarehouseModal:!1})},dispatch:a,selectedKeys:ve,countStockCardList:me,countstockCardIdList:Ie,checkable:H,canClick:!0,needTotal:!0,onSelect:function(t,n,r,o,l,u){e.setState({checkable:!1}),Oe(l);var c=me.getIn([G,"batchUuid"])||"",s=me.getIn([G,"batch"])||"",d=me.getIn([G,"assistList"])||(0,T.fromJS)([]);(d.size===ne.size&&re||!re)&&(s&&ie||!ie)&&a(P.getBalanceUniformPrice({inventoryUuid:Z,oriDate:i,warehouseUuid:t,batchUuid:c,assistList:d,selectIndex:G,temp:"BalanceTemp",stockCardTemp:"countStockCardList"})),a(P.changeEditCalculateCommonString("Balance",["countStockCardList",G,"price"],u)),a(P.changeEditCalculateCommonString("Balance",["countStockCardList",G,"warehouseCardCode"],n)),a(P.changeEditCalculateCommonString("Balance",["countStockCardList",G,"warehouseCardName"],r)),a(P.changeEditCalculateCommonString("Balance",["countStockCardList",G,"warehouseCardUuid"],t))},onCheck:function(){}}),E.default.createElement(A.default,{showCommonChargeModal:this.state.showStockModal,MemberList:ye,thingsList:Ee,dispatch:a,oriDate:i,oriState:ge,selectedKeys:_e,selectItem:Se,selectList:Te,stockCard:me,stockCardIdList:Ie,showSelectAll:!0,notNeedChangeStockItem:!0,temp:"Balance",hasNumber:se,stockTemplate:"countStockCardList",needConcat:!0,cancel:function(){e.setState({showStockModal:!1})},getNumberCallback:function(e,t,n){a("all"===t?P.getStockCardCategoryAndList({isUniform:null,openQuantity:!0,warehouseUuid:"",oriDate:i,haveQuantity:e,type:"count"}):P.getStockSomeCardList({uuid:t,level:n,isUniform:null,openQuantity:!0,warehouseUuid:"",haveQuantity:e,type:"count"}))},selectTreeFunc:function(e,t){a("all"===e?P.getStockCardCategoryAndList({isUniform:null,openQuantity:!0,warehouseUuid:"",oriDate:i,haveQuantity:se,type:"count"}):P.getStockSomeCardList({uuid:e,level:t,isUniform:null,openQuantity:!0,warehouseUuid:"",haveQuantity:se,type:"count"}))},callback:function(e){S&&Ce.get("cardUuid");var t=[],n=[],r=[],i=(me.size,me.toJS());e&&e.size&&e.map(function(e,a){var o=e.get("code")+" "+e.get("name");if(-1===Ne.indexOf(e.get("uuid"))){e.get("isUniformPrice")&&(n.push(e.get("uuid")),t.push({cardUuid:e.get("uuid"),storeUuid:"",isUniformPrice:e.get("isUniformPrice"),index:a}));var l=e.getIn(["financialInfo","assistClassificationList"])||(0,T.fromJS)([]);l&&l.map(function(e){}),i.push(C({},e.toJS()))}else r.push(o)}),r.length>0&&d.default.info(r+"已在列表中，统一单价的存货不支持重复选择"),a(P.changeSelectStock((0,T.fromJS)(i),"Balance","countStockCardList",!0))}}),E.default.createElement(R.default,{dispatch:a,showSingleModal:F,MemberList:ye,thingsList:Le,selectedKeys:""===_e?["all"+L.TREE_JOIN_STR+"1"]:_e,stockCardList:pe,title:"选择存货",selectFunc:function(t,n){var r=t.code,o=t.code+" "+t.name,l=t.isOpenedQuantity,u=t.isUniformPrice,c=t.unit?t.unit:"",s=(me.get(G).toJS(),me.getIn([G,"cardUuid"])),f=Ne.filter(function(e){return e!==s}),m=C({},t,{cardUuid:n,name:t.name,code:r,isOpenedQuantity:l,isUniformPrice:u,allUnit:c,amount:""}),g=[{cardUuid:n,storeUuid:"",assistList:t.assistList,batchUuid:t.batchUuid,isUniformPrice:u}];u&&f.indexOf(n)>-1?d.default.info(o+"已在列表中，统一单价的存货不支持重复选择"):(a(U.changeEditCalculateCommonString("Balance",["countStockCardList",G],(0,T.fromJS)(m))),u&&a(P.getWarehouseLastStage([n],i,g,"BalanceTemp",G,!0))),e.setState({showSingleModal:!1})},cancel:function(){e.setState({showSingleModal:!1})},selectListFunc:function(e,t){a("all"===e?P.getStockCardList("BalanceTemp",null,null):P.getStockSomeCardList({uuid:e,level:t,isUniform:null,openQuantity:null}))}}),E.default.createElement(l.default,{visible:B,title:"修改统一单价",onCancel:function(){e.setState({unitPriceModal:!1})},onOk:function(){if(Number(Y)>0){a(P.changeEditCalculateCommonString("Balance",["countStockCardList",G,"price"],Y));var t=me.getIn([G,"childList"]);t&&t.size&&t.map(function(e,t){a(P.changeEditCalculateCommonString("Balance",["countStockCardList",G,"childList",t,"afterPrice"],Y));var n=(0,I.numberCalculate)((0,I.numberCalculate)(Y,e.get("quantity"),4,"multiply"),e.get("oldAmount"),4,"subtract");a(P.changeEditCalculateCommonString("Balance",["countStockCardList",G,"childList",t,"amount"],n))}),e.setState({unitPriceModal:!1,selectValue:""})}else d.default.info("统一单价不可为0或负数")}},E.default.createElement("div",{style:{display:"flex"}},E.default.createElement("span",{style:{width:"100px",lineHeight:"28px"}},"单价："),E.default.createElement(w.default,{value:Y,onChange:function(t){(0,I.numberFourTest)(t,function(t){e.setState({selectValue:t})},!0)}}))))}}]),t}(),r.displayName="Chye UniformAdjustment",n=i))||n;t.default=D},2615:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=p(a(14)),i=p(a(47)),o=p(a(132)),l=p(a(182)),u=p(a(32)),c=p(a(37)),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(78),a(46),a(131),a(181),a(51),a(38);var d=p(a(1)),f=a(17),m=g(a(30));a(31),g(a(172));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var C=(0,f.immutableRenderDecorator)(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={inputContent:"",download:!1,currentPage:1,pageSize:50,exportvalue:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"onSubmit",value:function(){var e=this.refs.fileInput.files;if(0!=e.length){if(0==e[0].size)return c.default.warn("此文件已不存在，请重新选择");var t=new FormData,a=e[0];t.append("file",a),this.props.beforCallback(),this.props.onSubmitCallBack(t)}}},{key:"render",value:function(){var e=this,t=this.props,a=(t.tip,t.alertStr),n=(t.message,t.dispatch,t.iframeload),c=void 0===n||n,s=(t.iframeName,t.exportDisable,t.failJsonList,t.beforCallback,t.closeCallback),f=t.showMessageMask,g=(t.successJsonList,t.onClickCallback,t.importLogAction,t.inputLogAction),p=(t.onSubmitCallBack,t.onSubmitInitialCallBack,t.ddImportCallBack,t.totalNumber),C=t.curNumber,h=t.importList,y=t.errorList,E=(t.successSize,t.hrefUrl,t.InitialExporthrefUrl),S=t.downloadUrl,T=t.importKey,_=(t.openQuantity,t.enableWarehouse,t.hrefUrlexport,t.showall),v=t.returnBackFun,b=(t.closeShow,t.importTitle),L=this.state,I=L.inputContent,N=L.download,O=L.currentPage,A=L.pageSize,R=(L.exportvalue,p&&(100*C/p).toFixed(2),h.size+y.size),w=y.concat(h),P=w.slice((O-1)*A,O*A),U=d.default.createElement("div",null,d.default.createElement("div",null,P.map(function(e){return d.default.createElement("div",null,d.default.createElement("span",{className:"import-mask-main-message-item"},e.get("exchange")))})));return d.default.createElement("div",{className:"running-import-mask import-mask",style:{display:_?"block":"none"}},d.default.createElement("div",{className:"import-mask-title"},d.default.createElement("span",null,b||"批量导入存货"),d.default.createElement(u.default,{className:"running-import-mask-btn",onClick:function(){v(),e.setState({inputContent:""})}},"返回")),d.default.createElement("div",{className:"import-mask-main"},d.default.createElement("div",{className:"import-mask-content"},d.default.createElement("div",{style:{display:f?"block":"none"},className:"import-mask-main-message"},d.default.createElement(i.default,{visible:f,title:"导入结果",className:"import-mask-modal",footer:[d.default.createElement(u.default,{type:"primary",onClick:function(){c&&(s(),v(),e.setState({inputContent:""}))}},"完成")],onCancel:function(){c&&s()}},d.default.createElement("div",{className:"running-mask-modal"},d.default.createElement("div",{className:"message-detail-progress"},d.default.createElement(l.default,{percent:c?100:0,size:"small"})),d.default.createElement("div",{className:"import-mask-main-message-btn"},d.default.createElement("div",null,"提示信息共",d.default.createElement("p",null,R),"条，成功导入记录",d.default.createElement("p",null,h.size),"条，错误记录",d.default.createElement("p",null,y.size),"条"),y.size?d.default.createElement("span",{className:"import-mask-main-message-onload-send"},d.default.createElement("span",null,"导入失败汇总.xls"),d.default.createElement("a",{className:"export-download",key:"cancel",disabled:N,href:E+"&importKey="+T+"&needDownload=true",download:"导入失败汇总",onClick:function(){e.setState({download:!0}),setTimeout(function(){return e.setState({download:!1})},15e3)}},"立即下载")):"",d.default.createElement("textarea",{style:{position:"fixed",left:"-1000px"},ref:"copy",value:w.toJS().reduce(function(e,t){return e+(t.exchange+"\n")},"")})),d.default.createElement("div",{className:"import-mask-main-message-detail"},d.default.createElement("div",null,"提示信息："),c?U:""),d.default.createElement("div",{className:"impot-footer"},d.default.createElement(o.default,{current:O,total:R,pageSize:A,size:"small",onChange:function(t){e.setState({currentPage:t})}}),d.default.createElement(u.default,{type:"primary",className:"import-mask-main-message-copy",onClick:function(){c&&(e.refs.copy&&e.refs.copy.select(),document.execCommand("Copy"),m.Alert("已复制好，可贴粘"))}},"复制提示信息"))))),d.default.createElement("div",null,d.default.createElement("div",null,"操作步骤：1.下载模版 > 2.导入Excel > 3.导入完毕"),d.default.createElement("div",{className:"running-onload"},d.default.createElement("a",{href:S,className:"running-download"},d.default.createElement(r.default,{type:"download"}),"下载模版"))),d.default.createElement("div",null,"请选择要导入的Excel文件："),d.default.createElement("div",{style:{margin:"10px 0"}},d.default.createElement("div",{className:"fileexport"},d.default.createElement("span",{className:"filetext"},I),d.default.createElement("span",{className:"filecontent",onClick:function(){return g&&g()}},d.default.createElement("span",{className:"upload-btn-1"},d.default.createElement(r.default,{type:"upload"}),"选择文件"),d.default.createElement("input",{type:"file",className:"fileinput",name:"pic",ref:"fileInput",accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",value:I,onChange:function(t){e.setState({inputContent:t.target.value})}})),d.default.createElement("span",{className:"upload-btn-2",onClick:I?this.onSubmit.bind(this):function(){return m.Alert(a)}},"确定导入")),d.default.createElement("div",null,"温馨提示:"),d.default.createElement("div",{className:"upload-tips"},"1.导入模版后，原添加的存货将被覆盖；"),d.default.createElement("div",{className:"upload-tips"},"2.导入数据上限为180行；超过180行，仅导入前180行内容；"),d.default.createElement("div",{className:"upload-tips"},"3.请下载统一的模版，并按相应的格式在Excel软件中填写业务数据，然后再导入到系统中。")))))}}]),t}())||n;t.default=C}}]);