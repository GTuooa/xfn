(window.webpackJsonp=window.webpackJsonp||[]).push([[55,24],{1192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=p(n(2482)),r=p(n(2503)),i=p(n(2504)),o=p(n(1469)),l=p(n(1470)),u=p(n(1471)),c=p(n(1472)),s=p(n(1291)),d=p(n(2505)),f=p(n(488));function p(e){return e&&e.__esModule?e:{default:e}}var m={searchApprovalState:r.default,editRunningModalState:i.default,inventoryCardState:o.default,relativeCardState:l.default,projectCardState:u.default,projectConfState:c.default,runningPreviewState:s.default,approalCalculateState:d.default,searchRunningAllState:f.default};t.reducer=m,t.view=a.default},1223:function(e,t,n){},1224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=s(n(1)),u=s(n(0)),c=n(17);function s(e){return e&&e.__esModule?e:{default:e}}n(1223);var d=(0,c.immutableRenderDecorator)((i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.className,a=e.onClick;return l.default.createElement("div",{className:"container-wrap container-width-"+t+" "+n,onClick:a},this.props.children)}}]),t}(),r.displayName="ContainerWrap",r.propTypes={type:u.default.string.isRequired,className:u.default.string.isRequired},a=i))||a;t.default=d},1226:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),l=(r=o)&&r.__esModule?r:{default:r},u=n(17);n(1223);var c=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),i(t,[{key:"render",value:function(){return l.default.createElement("div",{className:"flex-title"},this.props.children)}}]),t}())||a;t.default=c},1227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=s(n(176)),i=s(n(174)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(175),n(173);var l=s(n(1)),u=n(17),c=n(127);function s(e){return e&&e.__esModule?e:{default:e}}n(1232);var d=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.pageItem,n=e.onClick,a=l.default.createElement(i.default,null,t.get("pageList").map(function(e,a){return l.default.createElement(i.default.Item,{key:e.get("key")},l.default.createElement("span",{className:"page-switch-item setting-common-ant-dropdown-menu-item",onClick:function(){n(t.get("key"),e.get("name"),e.get("key"))}},e.get("name")))}));return l.default.createElement("div",null,l.default.createElement(r.default,{overlay:a,trigger:["click"]},l.default.createElement("div",{className:"page-switch-button"},l.default.createElement(c.XfnIcon,{type:"Menu"}))))}}]),t}())||a;t.default=d},1232:function(e,t,n){},1237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=s(n(100)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(99);var l=s(n(1)),u=n(17),c=(n(101),n(22));function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=(0,u.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={formate:!0},d(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"render",value:function(){var e=this,t=(this.props.showZero,this.state.formate?this.props.value&&Number(this.props.value)?(0,c.formatMoney)(this.props.value,this.props.PointDisabled?0:2):"":this.props.value);return l.default.createElement(r.default,i({},this.props,{value:t||"",onFocus:function(t){"function"==typeof e.props.onFocus&&e.props.onFocus(t),e.setState({formate:!1},function(){e.nameInput&&e.nameInput.select()})},onBlur:function(t){"function"==typeof e.props.onBlur&&e.props.onBlur(t),e.setState({formate:!0})},ref:function(t){return e.nameInput=t}}))}}]),t}())||a;t.default=f},1241:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleBatch=t.deleteBatch=t.getInitBatchList=t.getBatchList=t.emptyWarehouseListQuantity=t.getSerialList=t.modifyBatch=t.insertBatch=t.insertInventoryBatch=t.deleteAssist=t.modifyAssist=t.insertAssist=t.deleteAssistCategroy=t.modifyAssistCategroy=t.insertAssistCategroy=t.chooseAssitUniform=t.getAssistList=t.getInventorySomeCardList=t.chargeItemCheckboxCheck=t.chargeItemCheckboxCheckAll=t.getInventoryAllCardList=t.getInventorySettingOneCard=t.deleteMaterial=t.addMaterial=t.initInventoryCard=t.deleteunitPrice=t.addUnitPrice=t.getSomeWarehouseTree=t.getWarehouseTree=t.initUnitState=t.deleteUnit=t.addUnit=t.getUnitCardList=t.afterEditInventoryConf=t.deleteInventoryCardList=t.saveInventoryCard=t.changeInventoryCardCategoryType=t.changeInventoryCardCategoryStatus=t.changeInventoryInnerSrting=t.changeInventoryCardNature=t.changeInventoryViewsContent=t.changeInventoryCardViews=t.changeInventoryCardContent=t.beforeInventoryEditCard=t.beforeInventoryAddCard=void 0;var a=g(n(47)),r=g(n(37));n(46),n(38);var i=m(n(1318)),o=g(n(52)),l=n(22),u=n(18),c=m(n(30)),s=m(n(27)),d=m(n(484)),f=m(n(1229)),p=m(n(1307));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}t.beforeInventoryAddCard=function(e,t){return function(n,a){n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getIUManageCardLimitAndAc","GET","",function(a){(0,l.showMessage)(a)&&(0,o.default)("getInitStockCard","GET","",function(e){if((0,l.showMessage)(e)){var r=e.data.code;n({type:i.BEFORE_ADD_INVENTORY_CONF_CARD_INVENTORY,data:a.data,originTags:t,code:r})}}),e(),n({type:i.SWITCH_LOADING_MASK})})}},t.beforeInventoryEditCard=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(c,s){c({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCard","GET","uuid="+e.get("uuid"),function(e){if(c({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)){var d=s().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1;e.data.unitPriceList&&!e.data.unitPriceList.some(function(e){return 1===e.type})&&e.data.unitPriceList.push({type:1}),e.data.unitPriceList&&!e.data.unitPriceList.some(function(e){return 2===e.type})&&e.data.unitPriceList.push({type:2}),e.data.isOpenedQuantity&&c(_()),e.data.financialInfo&&e.data.financialInfo.openBatch&&c(N(e.data.uuid)),"OPEN"!==a&&"INVALID"!==a||(0,o.default)("getInventorySettingCardList","GET","listFrom=&isOpenQuantity=true&isUsed=true",function(e){(0,l.showMessage)(e)&&c(C("stockList",(0,u.fromJS)(e.data.resultList)))}),c({type:i.BEFORE_EDIT_INVENTORY_CONF_CARD,data:e.data,originTags:n,assemblyState:a,fromOpen:r,enableWarehouse:d}),t()}})}};var y=t.changeInventoryCardContent=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CARD_CONTENT,name:e,value:t})}},C=t.changeInventoryCardViews=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_CARD_VIEWS,name:e,value:t})}},h=(t.changeInventoryViewsContent=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_VIEWS_CONTENT,name:e,value:t})}},t.changeInventoryCardNature=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_CARD_NATURE,name:e,value:t})}},t.changeInventoryInnerSrting=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_INNER_STRING,arr:e,value:t})}}),E=(t.changeInventoryCardCategoryStatus=function(e,t){return function(n){(0,o.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+e.get("uuid"),function(a){(0,l.showMessage)(a)&&n({type:i.CHANGE_INVENTORY_CONF_CARD_CATEGORY_STATUS,list:a.data.resultList,item:e,value:t})})}},t.changeInventoryCardCategoryType=function(e,t){return function(n){var a=t.split(s.TREE_JOIN_STR);n({type:i.CHANGE_INVENTORY_CONF_CARD_CATEGORY_TYPE,item:e,uuid:a[0],name:a[1]})}},t.saveInventoryCard=function(e,t,n,a,r){return function(s,d){var f=d().homeState,m=f.get("allPanes"),g=d().inventoryCardState.get("inventoryCardTemp").toJS(),y=f.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1,C=[],h=g.financialInfo||{};y&&(!function e(t){return t.forEach(function(t){if(t.isEnd){var n=void 0;n=h.openAssist||h.openBatch?t.childList.map(function(e){return e.warehouseName=t.warehouseName,e.warehouseUuid=t.warehouseUuid,e.warehouseCode=t.warehouseCode,e}):t,C=C.concat(n)}else e(t.childList)})}(g.openList),g.openList=C);var E=d().inventoryCardState.getIn(["views","insertOrModify"]),_="",S="";m.get("ConfigPanes").find(function(e){return"存货设置"===e.get("title")})&&(_=d().inventoryConfState.getIn(["views","activeTapKeyUuid"]),S=d().inventoryConfState.getIn(["views","selectTypeId"])),"INVALID"===g.assemblyState&&(g.assemblyState="OPEN"),g.assemblySheet&&g.assemblySheet.materialList&&g.assemblySheet.materialList.length&&(g.assemblySheet.materialList=g.assemblySheet.materialList.filter(function(e){return e.materialUuid}));var T=function(){if("insert"===E){(0,o.default)("addInventorySettingCard","POST",JSON.stringify({psiData:g,insertFrom:_,treeFrom:S,needAutoIncrementCode:"insert"!==t,action:{editRunning:"SAVE_JR-QUICK_MANAGER-SAVE_STOCK",payment:"SAVE_JR-QUICK_MANAGER-SAVE_STOCK",inventoryConfig:"MANAGER-STOCK_SETTING-CUD_CARD",searchApproval:"QUERY_PROCESS-QUICK_MANAGER-SAVE_STOCK",searchApprovalHideCategory:"QUERY_PROCESS-QUICK_MANAGER-SAVE_STOCK"}[e]}),function(a){if((0,l.showMessage)(a,"show")&&(s({type:i.SAVE_INVENTORY_CONF_CARD_INVENTORY,flag:t,autoIncrementCode:a.data.autoIncrementCode}),n&&n(),s(v("payment"===e,e)),"inventoryConfig"===e)){var r=d().inventoryConfState.getIn(["views","activeTapKey"]),o=d().inventoryConfState.getIn(["views","activeTapKeyUuid"]),c=(0,u.fromJS)({name:r,uuid:o});s(p.refreshInventoryList(c))}s({type:i.SWITCH_LOADING_MASK})})}else(0,o.default)("editInventorySettingCard","POST",JSON.stringify({psiData:g,modifyFrom:_,treeFrom:S}),function(t){if((0,l.showMessage)(t,"show")&&(s({type:i.SAVE_INVENTORY_CONF_CARD_INVENTORY}),n(),s(v()),"inventoryConfig"===e)){var a=d().inventoryConfState.getIn(["views","activeTapKey"]),r=d().inventoryConfState.getIn(["views","activeTapKeyUuid"]),o=(0,u.fromJS)({name:a,uuid:r});s(p.refreshInventoryList(o))}s({type:i.SWITCH_LOADING_MASK})})};s({type:i.SWITCH_LOADING_MASK}),(0,o.default)("adjustInventorySettingCardTitleSame","POST",JSON.stringify({psiData:{name:g.name,uuid:g.uuid}}),function(e){(0,l.showMessage)(e)?e.data.repeat?(a(),s({type:i.SWITCH_LOADING_MASK}),c.Confirm({message:"卡片名称与【编码："+e.data.card.code+"】卡片重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(s({type:i.SWITCH_LOADING_MASK}),T(),r()):r()},onFail:function(e){return console.log(e)}})):T():s({type:i.SWITCH_LOADING_MASK})})}},t.deleteInventoryCardList=function(){return function(e,t){var n=t().inventoryConfState.getIn(["views","cardSelectList"]);c.Confirm({message:"确定删除卡片？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(0,o.default)("deleteInventoryCheck","POST",JSON.stringify({deleteList:n}),function(t){(0,l.showMessage)(t)&&(t.data.inMaterialList&&t.data.inMaterialList.length?c.Confirm({message:t.data.inMaterialList.map(function(e){return"【"+e.code+"】【"+e.name+"】"}).join("、")+"属于其他存货的组装物料，删除后将导致组装单失效。确认删除吗？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&e(E(n))},onFail:function(e){return console.log(e)}}):e(E(n)))})},onFail:function(e){return console.log(e)}})}},function(e){return function(t,n){var a=n().inventoryConfState.getIn(["views","activeTapKeyUuid"]),u=n().inventoryConfState.getIn(["views","activeTreeKeyUuid"]);t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteInventorySettingCardList","POST",JSON.stringify({deleteList:e,deleteFrom:a,treeFrom:u}),function(e){(0,l.showMessage)(e)&&(t({type:i.DELETE_INVENTORY_CONF_CARD_LIST,list:e.data.resultList,treeList:e.data.typeList}),""===e.data.error?r.default.info("删除成功"):r.default.info(e.data.error),t(v())),t({type:i.SWITCH_LOADING_MASK})})}}),v=t.afterEditInventoryConf=function(e,t){return function(n,a){var r=a().homeState,i=r.get("allPanes");if(!0===r.getIn(["data","userInfo","sobInfo","newJr"]))i.get("SearchPanes").find(function(e){return"查询审批"===e.get("title")})?(n("searchApproval"===t?d.getApprovalStockCardList():d.getApprovalStockCardList([],"hidecategory")),i.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&setTimeout(function(){n(d.getStokcListFromConfig())},800)):i.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&e?n(d.getStokcListFromConfig()):i.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&n(d.getInventoryCardListForchangeConfig());else{var o=a().lrAccountState.get("cardTemp"),l={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[o.get("categoryType")],u=o.getIn([l,"stockRange"]),c=o.get("runningState");u&&u.size&&n(f.getFirstStockCardList(u,c))}}},_=t.getUnitCardList=function(){return function(e){(0,o.default)("getUnitList","GET","inventoryUuid=",function(t){(0,l.showMessage)(t)&&(e(C("standardList",(0,u.fromJS)(t.data.standardList))),e(C("customList",(0,u.fromJS)(t.data.customList))))})}},S=(t.addUnit=function(e,t){return function(n){var a=e.toJS();a.splice(t+1,0,{amount:"",uuid:""}),n(y(["unit","unitList"],(0,u.fromJS)(a)))}},t.deleteUnit=function(e,t){return function(n){var a=e.toJS();a.splice(t,1),n(y(["unit","unitList"],(0,u.fromJS)(a)))}},t.initUnitState=function(){return{type:i.INIT_UNIT_STATE}},t.getWarehouseTree=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("warehouseCardTree","POST",JSON.stringify({uuidList:[]}),function(n){t({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(n)&&(t(C("warehouseList",(0,u.fromJS)(n.data.cardList[0].childList))),e())})}},t.getSomeWarehouseTree=function(e,t){return function(n,a){var r="insert"===a().inventoryCardState.getIn(["views","insertOrModify"])?"":a().inventoryCardState.getIn(["inventoryCardTemp","uuid"]);if(!e.length)return n(y("openList",(0,u.fromJS)([]))),void t();n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getOpenWarehouseCardTree","POST",JSON.stringify({warehouseUuidList:e,inventoryUuid:r}),function(e){n({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(n(y("openList",(0,u.fromJS)(e.data.openList[0].childList?e.data.openList[0].childList:[]))),n(C("selectedKeys",(0,u.fromJS)([]))),t())})}},t.addUnitPrice=function(e,t,n){return function(a){var r=e.toJS();r.splice(t+1,0,{amount:"",uuid:"",type:n}),a(y("unitPriceList",(0,u.fromJS)(r)))}},t.deleteunitPrice=function(e,t){return function(n){var a=e.toJS();a.splice(t,1),n(y("unitPriceList",(0,u.fromJS)(a)))}},t.initInventoryCard=function(){return{type:i.INIT_ADD_INVENTORY_STATE}},t.addMaterial=function(e,t){return function(n){var a=e.toJS();a.splice(t+1,0,{amount:"",uuid:""}),n(h(["assemblySheet","materialList"],(0,u.fromJS)(a)))}},t.deleteMaterial=function(e,t){return function(n){var a=e.toJS();a.splice(t,1),n(h(["assemblySheet","materialList"],(0,u.fromJS)(a)))}},t.getInventorySettingOneCard=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCard","GET","uuid="+e,function(e){if(n({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)){var a=e.data.unit.unitList||[];a.unshift({uuid:e.data.unit.uuid,name:e.data.unit.name}),1===a.length&&(n(h(["assemblySheet","materialList",t,"unitUuid"],a[0].uuid)),n(h(["assemblySheet","materialList",t,"unitName"],a[0].name))),n(h(["assemblySheet","materialList",t,"unitList"],(0,u.fromJS)(a)))}})}},t.getInventoryAllCardList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments[2];return function(a,r){a({type:i.SWITCH_LOADING_MASK});var c=r().homeState.getIn(["data","userInfo","sobInfo","sobId"]);r().editRunningState;n||(0,o.default)("getStockCardList","POST",JSON.stringify({sobId:c,categoryList:[],openQuantity:!0}),function(e){(0,l.showMessage)(e)&&a(C("MemberList",(0,u.fromJS)(e.data.typeList)))}),(0,o.default)("getStockCategoryList","POST",JSON.stringify({sobId:c,categoryList:e,property:0,openQuantity:!0}),function(e){(0,l.showMessage)(e)&&(a(C("thingsList",(0,u.fromJS)(e.data.result))),a(C(t,!0))),a({type:i.SWITCH_LOADING_MASK})})}},t.chargeItemCheckboxCheckAll=function(e,t,n){return function(a){t.map(function(t){var r=n.find(function(e){return e.get("uuid")===t.uuid}).toJS(),i=r.uuid,o=r.code,l=r.name,u=r.unit.unitList||[];u.unshift({uuid:r.unit.uuid,name:r.unit.name}),a(S(e,i,o,l,u))})}},t.chargeItemCheckboxCheck=function(e,t,n,a,r){return{type:i.IVNENTORY_CHARGE_ITEM_CHECKBOX_SELECT,checked:e,uuid:t,name:a,code:n,unitList:r}}),T=(t.getInventorySomeCardList=function(e,t){return function(n,a){var r=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);1==t?(0,o.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:r,categoryUuid:e,listByCategory:!0,subordinateUuid:"",property:0,openQuantity:!0}),function(e){(0,l.showMessage)(e)&&n(C("thingsList",(0,u.fromJS)(e.data.resultList)))}):(0,o.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:r,subordinateUuid:e,listByCategory:!1,categoryUuid:"",property:0,openQuantity:!0}),function(e){(0,l.showMessage)(e)&&n(C("thingsList",(0,u.fromJS)(e.data.resultList)))})}},t.getAssistList=function(e,t){return function(e){(0,o.default)("getInventoryAssistList","GET","inventoryUuid=",function(n){e(C("allAssistClassificationList",(0,u.fromJS)(n.data.assistClassificationList))),t&&t()})}}),N=(t.chooseAssitUniform=function(e,t){return function(n){n({type:i.CHOOSE_ASSIST_UNIFORM,uuidList:e,bool:t})}},t.insertAssistCategroy=function(e,t){return function(n){(0,o.default)("insertAssistCategroy","POST",JSON.stringify({name:e}),function(e){(0,l.showMessage)(e,"show")&&(t&&t(),n(T()))})}},t.modifyAssistCategroy=function(e,t,n){return function(a){(0,o.default)("modifyAssistCategroy","POST",JSON.stringify({name:t,uuid:e}),function(e){(0,l.showMessage)(e,"show")&&(n&&n(),a(T()))})}},t.deleteAssistCategroy=function(e,t){return function(n){(0,o.default)("deleteAssistCategroy","GET","uuid="+e,function(e){(0,l.showMessage)(e,"show")&&(t&&t(),n(T()))})}},t.insertAssist=function(e,t,n){return function(a){(0,o.default)("insertAssist","POST",JSON.stringify({name:t,classificationUuid:e}),function(e){(0,l.showMessage)(e,"show")&&(n&&n(),a(T()))})}},t.modifyAssist=function(e,t,n){return function(a){(0,o.default)("modifyAssist","POST",JSON.stringify({name:n,uuid:e,classificationUuid:t}),function(e){(0,l.showMessage)(e,"show")&&a(T())})}},t.deleteAssist=function(e,t){return function(n){(0,o.default)("deleteAssist","GET","uuid="+e,function(e){(0,l.showMessage)(e,"show")&&(t&&t(),n(T()))})}},t.insertInventoryBatch=function(e,t,n,a,r,i,c,s,d){return function(f,p){(0,o.default)("insertBatch","POST",JSON.stringify({batch:e,productionDate:t,expirationDate:n,inventoryUuid:a,condition:r,orderBy:i,currentPage:c,isAsc:s}),function(e){(0,l.showMessage)(e,"show")&&(d&&d(),f(C("batchList",(0,u.fromJS)(e.data.batchList)||(0,u.fromJS)([]))))})}},t.insertBatch=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments[4],c=arguments[5];return function(s,d){var f=d().inventoryCardState,p=f.getIn(["views","insertOrModify"]),m=f.getIn(["inventoryCardTemp","financialInfo","batchList"])||(0,u.fromJS)([]);"insert"===p&&m.some(function(t){return t.get("batch")===e&&e})?r.default.info("批次号重复"):"insert"===p?(r.default.success("成功"),c&&c(e,n),i&&i(),s(y(["financialInfo","batchList"],m.push((0,u.fromJS)({batch:e,productionDate:t,expirationDate:n,inventoryUuid:a}))))):(0,o.default)("insertBatch","POST",JSON.stringify({batch:e,productionDate:t,expirationDate:n,inventoryUuid:a}),function(e){if((0,l.showMessage)(e,"show")){var t=e.data,n=t.batch,a=t.batchUuid,r=t.expirationDate;c&&c(n,a,r),i&&i(),s(y(["financialInfo","batchList"],(0,u.fromJS)(e.data.batchList)))}})}},t.modifyBatch=function(e,t,n,r,c,s){return function(d,f){(0,o.default)("batchUsedCheck","GET","inventoryUuid="+c+"&batchUuid="+t,function(f){(0,l.showMessage)(f)&&(f.data.used?a.default.confirm({title:"提示",content:"原批次在期初值或流水中已被使用，修改后所有信息将同步修改。确认更改该批次的信息吗？",onOk:function(){d({type:i.SWITCH_LOADING_MASK}),(0,o.default)("modifyBatch","POST",JSON.stringify({batch:e,productionDate:n,inventoryUuid:c,batchUuid:t,expirationDate:r}),function(e){d({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e,"show")&&(s&&s(),d(y(["financialInfo","batchList"],(0,u.fromJS)(e.data.batchList))))})}}):(d({type:i.SWITCH_LOADING_MASK}),(0,o.default)("modifyBatch","POST",JSON.stringify({batch:e,productionDate:n,inventoryUuid:c,batchUuid:t,expirationDate:r}),function(e){d({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e,"show")&&(s&&s(),d(y(["financialInfo","batchList"],(0,u.fromJS)(e.data.batchList))))})))})}},t.getSerialList=function(e,t){return function(e,n){var a=n().inventoryCardState,r=a.getIn(["inventoryCardTemp","uuid"]);a.getIn(["inventoryCardTemp","uuid"]);(0,o.default)("getSerialList","POST",JSON.stringify({inventoryUuid:r,inUuid:t}),function(t){(0,l.showMessage)(t)&&(e(C("serialList",(0,u.fromJS)(t.data)||(0,u.fromJS)([]))),e(C("serialModal",!0)))})}},t.emptyWarehouseListQuantity=function(){return{type:i.EMPTY_WAREHOUSE_LIST_QUANTITY}},t.getBatchList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2],a=arguments[3],r=arguments[4],c=arguments[5];return function(s,d){var f=e||d().inventoryCardState.getIn(["views","batchUuid"]);s({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getBatchList","POST",JSON.stringify({inventoryUuid:f,condition:n,orderBy:a,currentPage:t,isAsc:r}),function(e){s({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(s(C("batchList",(0,u.fromJS)(e.data.batchList)||(0,u.fromJS)([]))),s(C("batchUuid",f)),s(C("batchManageModal",!0)),s(C("shelfLife",e.data.shelfLife)),c&&c())})}},t.getInitBatchList=function(e){return function(t,n){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getBatchList","POST",JSON.stringify({inventoryUuid:e}),function(e){t({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&t(y(["financialInfo","batchList"],(0,u.fromJS)(e.data.batchList)))})}});t.deleteBatch=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments[3],c=arguments[4],s=arguments[5],d=arguments[6];return function(f,p){f({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteBatch","POST",JSON.stringify({inventoryUuid:e,deleteList:t,condition:a,orderBy:c,currentPage:n,isAsc:s}),function(e){f({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&(e.data.usedList&&e.data.usedList.length?r.default.info(e.data.usedList.map(function(e){return"【"+e.batch+"】"}).join("、")+"批次已在期初值或流水中使用，不可删除"):r.default.success("成功"),f(C("batchList",(0,u.fromJS)(e.data.batchList)||(0,u.fromJS)([]))),d&&d())})}},t.toggleBatch=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments[4],u=arguments[5],c=arguments[6],s=arguments[7];return function(d,f){d({type:i.SWITCH_LOADING_MASK}),(0,o.default)("toggleBatch","POST",JSON.stringify({inventoryUuid:e,canUse:n,condition:r,orderBy:u,currentPage:a,isAsc:c,batchUuid:t}),function(e){d({type:i.SWITCH_LOADING_MASK}),(0,l.showMessage)(e)&&s&&s()})}}},1244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={name:"必填",code:"最长20个字符",remark:"选填(最多40个字符)",amount:"必填，请输入金额",selectAc:"选填，请选择科目",upperClass:"选择上级类别",cardCode:"必填，支持数字和大小写英文",specifications:"支持数字字母，不区分大小写，最长20个字符",specificationsTip:"选填，最长20个字符",unit:"必填，支持多单位",barCode:"选填，最长40个字符",companyAddress:"选填，最长40个字符",financeName:"选填，最长20个字符"}},1246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_PZ_BOMB="INIT_PZ_BOMB",t.PZBOMB_REVIEWEDBY_VC="PZBOMB_REVIEWEDBY_VC",t.CANCEL_PZBOMB_REVIEWEDBY_VC="CANCEL_PZBOMB_REVIEWEDBY_VC"},1250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=C(n(14)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78);var u=C(n(1)),c=C(n(0)),s=n(18),d=n(17);n(1258);var f=y(n(30)),p=C(n(1260)),m=C(n(1264)),g=y(n(60));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}var h=(0,d.immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={rotate:0,magnificationRate:1,imgWpercent:0,idx:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"componentDidMount",value:function(){this.props.dispatch(g.setDdConfig())}},{key:"componentWillReceiveProps",value:function(e,t){0==this.props.preview&&1==e.preview&&this.setState({rotate:0,magnificationRate:1,imgWpercent:0,idx:e.page,maxLimit:40,minLimit:40})}},{key:"render",value:function(){var e=this,t=this.props,n=t.preview,a=t.downloadPermission,r=t.previewImgArr,i=t.closePreviewModal,l=t.downloadEnclosure,c=t.dispatch,s=(t.page,t.type,t.uploadKeyJson,this.state),d=s.idx,g=s.rotate,y=s.magnificationRate,C=s.imgWpercent,h=s.maxLimit,E=s.minLimit,v=r.get(d);return u.default.createElement("div",{className:"preview",style:{display:n?"":"none"},onClick:function(e){}},u.default.createElement("div",{className:"nav"},u.default.createElement("button",{onClick:function(){return e.setState({idx:d-1,imgWpercent:0,rotate:0})},disabled:0==d},u.default.createElement(o.default,{type:"left-circle"}),u.default.createElement("div",null,"上一张")),u.default.createElement("button",{disabled:v&&"TRUE"!==v.get("imageOrFile"),onClick:function(){return e.setState({rotate:g+90})}},u.default.createElement(o.default,{type:"reload"}),u.default.createElement("div",null,"旋转")),v&&"application/pdf"===v.get("mimeType")?u.default.createElement("button",{disabled:.5===y,onClick:function(){e.setState({magnificationRate:y-.5})}},u.default.createElement(o.default,{type:"zoom-out"}),u.default.createElement("div",null,"缩小")):u.default.createElement("button",{disabled:-E>=C,onClick:function(){e.setState({imgWpercent:C-10})}},u.default.createElement(o.default,{type:"minus-circle"}),u.default.createElement("div",null,"缩小")),v&&"application/pdf"==v.get("mimeType")?u.default.createElement("button",{disabled:y>=4||"application/pdf"!==v.get("mimeType"),onClick:function(){e.setState({magnificationRate:y+.5})}},u.default.createElement(o.default,{type:"zoom-in"}),u.default.createElement("div",null,"放大")):u.default.createElement("button",{disabled:C>=h,onClick:function(){e.setState({imgWpercent:C+10})}},u.default.createElement(o.default,{type:"plus-circle"}),u.default.createElement("div",null,"放大")),u.default.createElement("button",{disabled:!a},a?u.default.createElement("span",{onClick:function(){return l(r.getIn([d,"signedUrl"]),r.getIn([d,"fileName"]))}},u.default.createElement(o.default,{type:"download"}),u.default.createElement("div",null,"下载")):u.default.createElement("a",null,u.default.createElement(o.default,{type:"download"}),u.default.createElement("div",null,"下载"))),u.default.createElement("button",{disabled:!(v&&"application/pdf"==v.get("mimeType")),onClick:function(){v&&"application/pdf"==v.get("mimeType")&&f.openLink({url:r.getIn([d,"signedUrl"])})}},u.default.createElement(o.default,{type:"printer"}),u.default.createElement("div",null,"打印")),u.default.createElement("button",{onClick:function(){return e.setState({idx:d+1,imgWpercent:0,rotate:0})},disabled:d===r.size-1},u.default.createElement(o.default,{type:"right-circle"}),u.default.createElement("div",null,"下一张"))),v&&"TRUE"===v.get("imageOrFile")&&n?u.default.createElement(m.default,{imgUrl:""+v.get("signedUrl"),imgWpercent:C,rotate:g,preview:n,maxLimit:h,minLimit:E}):"",v&&"application/pdf"===v.get("mimeType")&&n?u.default.createElement(p.default,{pdfUrl:""+v.get("signedUrl"),dispatch:c,magnificationRate:y,preview:n}):"",u.default.createElement("div",{className:"img-box",style:{display:v&&"application/pdf"!==v.get("mimeType")&&"TRUE"!==v.get("imageOrFile")?"":"none"}},u.default.createElement("div",{className:"img-box-contain"},u.default.createElement("div",{className:"img-box-contain-overflow"},u.default.createElement("div",{className:"noSupport"},u.default.createElement(o.default,{type:"file"}),u.default.createElement("p",null,"仅图片及PDF格式支持预览"))))),u.default.createElement("div",{className:"btnBar"},u.default.createElement("div",{className:"title"},"预览"),u.default.createElement("div",{onClick:i,className:"closeBtn"},u.default.createElement(o.default,{type:"close"}))))}}]),t}(),r.displayName="EnclosurePreview",r.propTypes={preview:c.default.bool,downloadPermission:c.default.bool,previewImgArr:c.default.instanceOf(s.List),closePreviewModal:c.default.func,dispatch:c.default.func,page:c.default.number,type:c.default.string},a=i))||a;t.default=h},1256:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(2),i=n.n(r),o=(n(21),n(1599));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};t.default=function(e){return a.createElement(o.a,null,function(t){var n,r=t.getPrefixCls,o=e.prefixCls,s=e.type,d=void 0===s?"horizontal":s,f=e.orientation,p=void 0===f?"center":f,m=e.className,g=e.children,y=e.dashed,C=c(e,["prefixCls","type","orientation","className","children","dashed"]),h=r("divider",o),E=p.length>0?"-".concat(p):p,v=i()(m,h,"".concat(h,"-").concat(d),(u(n={},"".concat(h,"-with-text").concat(E),g),u(n,"".concat(h,"-dashed"),!!y),n));return a.createElement("div",l({className:v},C,{role:"separator"}),g&&a.createElement("span",{className:"".concat(h,"-inner-text")},g))})}},1257:function(e,t,n){"use strict";n.r(t);n(33),n(1360)},1258:function(e,t,n){},1260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=m(n(14)),l=m(n(37)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78),n(38);var c=m(n(1)),s=m(n(0)),d=n(17);n(1261);n(127),p(n(30));var f=p(n(1263));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}var g=(0,d.immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderPdf=function(e){var t=document.getElementById("canvas_wrapper");t.innerHTML="";var a=atob(e),r=window.PDFJS;if(!r)return n.setState({networkFaild:!0}),l.default.info("网路问题导致PDF预览相关文件加载失败",2);if(r.cMapUrl="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.0.288/cmaps/",r.cMapPacked=!0,!r.getDocument)return n.setState({networkFaild:!0}),l.default.info("网路问题导致PDF预览相关文件加载失败",2);var i=r.getDocument({data:a}),o=n;i.promise.then(function(e){var n="";e.numPages;for(var a=0;a<e.numPages;a++)(n=document.createElement("canvas")).id="pdf_canvas_"+a,t.appendChild(n);for(var r=function(t){e.getPage(t+1).then(function(e){var n=e.getViewport(o.props.magnificationRate),a=document.getElementById("pdf_canvas_"+t);a.width=n.width,a.height=n.height;var r=a.getContext("2d");return e.render({canvasContext:r,viewport:n}).promise})},i=0;i<e.numPages;i++)r(i)}).catch(function(e){document.getElementById("canvas_wrapper").innerHTML="",o.setState({broken:!0})})},n.state={base64:"",broken:!1,networkFaild:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch(f.getCxpzUploadEnclosure(this.props.pdfUrl,function(t){t&&(e.setState({base64:t,broken:!1}),e.renderPdf(t))}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.magnificationRate!==e.magnificationRate&&this.renderPdf(this.state.base64),this.props.pdfUrl!==e.pdfUrl&&this.props.dispatch(f.getCxpzUploadEnclosure(e.pdfUrl,function(e){e&&(t.setState({base64:e,broken:!1,networkFaild:!1}),t.renderPdf(e))}))}},{key:"render",value:function(){var e=this.props,t=(e.pdfUrl,e.dispatch,e.magnificationRate,this.state),n=t.broken,a=t.networkFaild;return c.default.createElement("div",{className:"img-box"},c.default.createElement("div",{className:"img-box-contain"},c.default.createElement("div",{className:"pdf-box-contain-overflow"},c.default.createElement("div",{className:"pdf_canvas_main"},c.default.createElement("div",{className:"pdf_canvas_pdf"},c.default.createElement("div",{id:"canvas_wrapper"}))),n?c.default.createElement("div",{className:"noSupport"},c.default.createElement(o.default,{type:"file"}),c.default.createElement("p",null,"PDF文件损坏，无法预览")):"",a?c.default.createElement("div",{className:"noSupport"},c.default.createElement(o.default,{type:"file"}),c.default.createElement("p",null,"网络异常，无法预览")):"")))}}]),t}(),r.displayName="PdfPreview",r.propTypes={pdfUrl:s.default.string,dispatch:s.default.func,magnificationRate:s.default.number},a=i))||a;t.default=g},1261:function(e,t,n){},1263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCxpzUploadEnclosure=void 0;var a,r=n(31),i=(a=r)&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1246)),l=(n(18),n(22));t.getCxpzUploadEnclosure=function(e,t){return function(n){n({type:o.SWITCH_LOADING_MASK}),e.indexOf("xfn-ddy-annex-bucket.oss-accelerate")>0&&(e=e.replace("xfn-ddy-annex-bucket.oss-accelerate","xfn-ddy-annex-bucket.oss-cn-hangzhou-internal")),(0,i.default)("uploadGetEnclosure","POST",JSON.stringify({enclosureUrl:e}),function(e){(0,l.showMessage)(e)?t(e.data.enclosureFile):t(""),n({type:o.SWITCH_LOADING_MASK})})}}},1264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=c(n(1)),u=c(n(0));function c(e){return e&&e.__esModule?e:{default:e}}var s=(0,n(17).immutableRenderDecorator)((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawImgScal=function(e,t,a,r){var i,o,l,u,c,s=t/100,d=a/100,f=r/100;i=n.refs.bargraphCanvas,o=i.getContext("2d"),(l=new Image).onload=function(){!0,p()},l.src=e;var p=function(){-f<=s&&s<=d&&(0===s?(u=l.width>960?960:l.width*Number(1+s),c=l.width>960?960*l.height/l.width:l.height*Number(1+s)):(u=l.width>960?960*Number(1+s):l.width*Number(1+s),c=l.width>960?960*l.height/l.width*Number(1+s):l.height*Number(1+s)),n.setState({imgHeight:c,imgWidth:u}),i.width=u,i.height=c,o.clearRect(0,0,u,c),o.drawImage(l,0,0,l.width,l.height,0,0,u,c))}},n.state={imgHeight:0,imgWidth:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"componentDidMount",value:function(){this.drawImgScal(this.props.imgUrl,this.props.imgWpercent,this.props.maxLimit,this.props.minLimit)}},{key:"componentWillReceiveProps",value:function(e){this.props.imgUrl!==e.imgUrl&&this.drawImgScal(e.imgUrl,e.imgWpercent,this.props.maxLimit,this.props.minLimit),this.props.imgUrl===e.imgUrl&&this.props.imgWpercent!==e.imgWpercent&&this.drawImgScal(this.props.imgUrl,e.imgWpercent,this.props.maxLimit,this.props.minLimit)}},{key:"isVertail",value:function(e){return!(e<90)&&(90===e||e%180!=0)}},{key:"render",value:function(){var e=this.props,t=(e.imgUrl,e.imgWpercent,e.rotate),n=this.state,a=n.imgHeight,r=n.imgWidth,i=0,o=0;return this.isVertail(t)?(a>960&&(i=a-960),r>960&&(o=r-960)):(r>960&&(i=r-960),a>960&&(o=a/2+10)),l.default.createElement("div",{className:"img-box"},l.default.createElement("div",{className:"img-box-contain"},l.default.createElement("div",{className:"img-box-contain-overflow"},l.default.createElement("canvas",{ref:"bargraphCanvas",style:{transform:"rotate("+t+"deg)",marginLeft:i+"px",marginTop:o+"px",display:"block"}}))))}}]),t}(),r.displayName="ImgPreview",r.propTypes={imgUrl:u.default.string,imgWpercent:u.default.number,rotate:u.default.number,maxLimit:u.default.number,minLimit:u.default.number},a=i))||a;t.default=s},1288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=m(n(100)),r=m(n(14)),i=m(n(129)),o=m(n(89)),l=m(n(45)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(99),n(78),n(128),n(88),n(55);var c=m(n(1)),s=(m(n(0)),n(18));n(56);n(1240);var d=p(n(27)),f=(n(22),m(n(1244)),n(127),p(n(1241)));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}function g(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=l.default.Option,h=l.default.OptGroup,E=(o.default.Group,i.default.Group,function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={addUnit:!1,name:"",uuid:"",isStandard:!1},y(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,i=t.selectListOne,o=t.selectListTwo,u=t.onChange,p=t.name,m=t.onSwitch,y=t.style,E=t.disabled,v=t.addUnitdisabled,_=this.state,S=_.addUnit;_.value;return!S||v?c.default.createElement(l.default,{disabled:E,style:y,value:p||"",placeholder:"请选择",dropdownRender:function(t){return c.default.createElement("div",null,t,v?"":c.default.createElement("div",{onMouseDown:function(e){return e.preventDefault()},style:{padding:"8px",cursor:"pointer"},onClick:function(){e.setState({addUnit:!0}),n(f.changeInventoryCardContent("unit",(0,s.fromJS)({})))}},c.default.createElement(r.default,{type:"plus"})," 新增单位"))},onChange:function(e,t){var n=e.split(d.TREE_JOIN_STR),a=n[0],r=n[1],i=n[2],o=n[3],l=n[4],c=n[5];u({uuid:a,name:r,isStandard:i,unitList:o,basicUnitUuid:l,unitQuantity:c},t)}},o.size?c.default.createElement(h,{label:"自定义单位"},o.map(function(e){return c.default.createElement(C,{key:e.get("uuid"),value:""+e.get("uuid")+d.TREE_JOIN_STR+e.get("name")+d.TREE_JOIN_STR+e.get("isStandard")+d.TREE_JOIN_STR+JSON.stringify(e.get("unitList").toJS()),basicStandardUnitQuantityList:[e.get("basicStandardUnitQuantity")].concat(g(e.get("unitList").toJS().map(function(e){return e.basicStandardUnitQuantity}))),basicStandardUnitUuidList:[e.get("basicStandardUnitUuid")].concat(g(e.get("unitList").toJS().map(function(e){return e.basicStandardUnitUuid}))),isCustom:!0},e.get("fullName"))})):"",c.default.createElement(h,{label:"标准单位"},i.map(function(e){return c.default.createElement(C,{key:e.get("uuid"),value:""+e.get("uuid")+d.TREE_JOIN_STR+e.get("name")+d.TREE_JOIN_STR+e.get("isStandard")+d.TREE_JOIN_STR+d.TREE_JOIN_STR+e.get("basicUnitUuid")+d.TREE_JOIN_STR+e.get("basicUnitQuantity")},e.get("name"))}))):c.default.createElement("div",{className:"inventory-xfn-input"},c.default.createElement(a.default,{disabled:E,placeholder:"输入单位",value:p||"",onChange:function(e){u({uuid:"",name:e.target.value,isStandard:!1},{props:{}})}}),E?"":c.default.createElement("span",null,c.default.createElement(r.default,{type:"close",style:{cursor:"pointer"},onClick:function(){e.setState({addUnit:!1}),m()}})))}}]),t}());t.default=E},1291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=arguments[1];return((e={},o(e,i.INIT_YLLS,function(){return l}),o(e,i.GET_PREVIEW_RUNNING_BUSINESS_FETCH,function(){return t=(t=t.setIn(["views","refreshList"],n.refreshList)).set("jrOri",(0,r.fromJS)(n.receivedData.jrOri)).set("category",(0,r.fromJS)(n.receivedData.category)).set("processInfo",n.receivedData.processInfo?(0,r.fromJS)(n.receivedData.processInfo):null).set("lsItemData",(0,r.fromJS)(a({},n.receivedData.category,n.receivedData.jrOri))).set("currentItem",n.currentItem).setIn(["views","fromPage"],n.fromPage).setIn(["views","uuidList"],n.uuidList)}),o(e,i.GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH,function(){return t=t.set("jrOri",(0,r.fromJS)(n.receivedData.jrOri)).set("category",(0,r.fromJS)(n.receivedData.category)).set("processInfo",n.receivedData.processInfo?(0,r.fromJS)(n.receivedData.processInfo):null).set("lsItemData",(0,r.fromJS)(a({},n.receivedData.category,n.receivedData.jrOri))).set("currentItem",n.item)}),o(e,i.GET_PREVIEW_RELATED_RUNNING_BUSINESS_FETCH,function(){return t=t.set("relatedJrOri",(0,r.fromJS)(n.receivedData.jrOri)).set("relatedCategory",(0,r.fromJS)(n.receivedData.category)).set("relatedProcessInfo",n.receivedData.processInfo?(0,r.fromJS)(n.receivedData.processInfo):null).setIn(["relatedJrOri","uuidList"],n.uuidList)}),e)[n.type]||function(){return t})()};var r=n(18),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(493));function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(0,r.fromJS)({views:{fromPage:"",uuidList:[],showMask:!1,refreshList:{}},lsItemData:{},currentItem:{},jrOri:{},category:{},processInfo:null,relatedJrOri:{},relatedCategory:{},relatedProcessInfo:null})},1295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.relativeCardTemp={name:"",code:"",isPayUnit:!0,isReceiveUnit:!0,payableAcName:"应付账款",receivableAcName:"应收账款",advanceAcName:"预收账款",prepaidAcName:"预付账款",payableAcId:"2202",receivableAcId:"1122",advanceAcId:"2203",prepaidAcId:"1123",companyAddress:"",companyTel:"",financeName:"",financeTel:"",remark:"",receivableOpened:"",advanceOpened:"",payableOpened:"",prepaidOpened:"",categoryTypeList:[],enablePrepaidAc:!0,enableAdvanceAc:!0,contacterInfo:!1,isCheckOut:!1},t.relativeHighTypeTemp={name:"",isPayUnit:!1,isReceiveUnit:!1,isAppliedInvoicing:!1,isAppliedLedger:!1,isAppliedWater:!0,advanceAcId:"",advanceAcName:"",payableAcId:"",payableAcName:"",prepaidAcId:"",prepaidAcName:"",receivableAcId:"",receivableAcName:""},t.relativeTypeBtnStatus={isAdd:!1,isDelete:!1,treeUuid:"",treeName:"全部",isUp:!1,isDown:!1,isEdit:!1,parentUuid:""},t.relativeTypeTemp={name:"",remark:"",parentName:"全部",parentUuid:"",currentUnitCtgyUuid:""},t.inventoryHighTypeTemp={name:"",uuid:"",isAppliedSale:!1,isAppliedPurchase:!1,isAppliedProduce:!1,isAppliedWater:!0,isAppliedInvoicing:!1},t.inventoryCardTypeTemp={parentUuid:"",name:"",remark:"",ctgyUuid:"",parentName:"",uuid:""},t.inventoryCardTemp={code:"",name:"",inventoryNature:5,inventoryAcName:"库存商品",inventoryAcId:"1405",opened:"",remark:"",isAppliedSale:!0,isAppliedPurchase:!0,isAppliedProduce:!1,categoryTypeList:[],contacterInfo:!1,isCheckOut:!1,warehouseList:[],isOpenedQuantity:!1,isUniformPrice:!1,unit:{unitList:[]},openedQuantity:"",unitPriceList:[]},t.inventorySettingBtnStatus={isAdd:!1,isDelete:!1,treeUuid:"",treeName:"全部",isUp:!1,isDown:!1,isEdit:!1,parentUuid:""},t.projectHighTypeTemp={name:"",commonFee:!1,uuid:""},t.projectCardTemp={name:"",code:"",selectUuid:"",selectName:"",categoryTypeList:[{ctgyUuid:"",subordinateUuid:""}]},t.projectTypeBtnStatus={isAdd:!1,isDelete:!1,treeUuid:"",treeName:"全部",isUp:!1,isDown:!1,upUuid:"",downUuid:"",isEdit:!1,parentUuid:""},t.projectTypeTemp={name:"",remark:"",parentName:"全部",parentUuid:"",uuid:""}},1302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_PROJECT_CONF="INIT_PROJECT_CONF",t.PROJECT_GET_HTIGH_TYPE="PROJECT_GET_HTIGH_TYPE",t.GET_PROJECT_LIST_AND_TREE="GET_PROJECT_LIST_AND_TREE",t.CHANGE_ACTIVE_PROJECT_HIGH_TYPE="CHANGE_ACTIVE_PROJECT_HIGH_TYPE",t.CHANGE_PEOJECT_CONF_CARD_USED_STATUS="CHANGE_PEOJECT_CONF_CARD_USED_STATUS",t.CHANGE_PEOJECT_CONF_CARD_BOX_STATUS="CHANGE_PEOJECT_CONF_CARD_BOX_STATUS",t.SELECT_PEOJECT_CONF_CARD_ALL="SELECT_PEOJECT_CONF_CARD_ALL",t.DELETE_PROJECT_CONF_CARD="DELETE_PROJECT_CONF_CARD",t.SELECT_PROJECT_CARD_BY_TYPE="SELECT_PROJECT_CARD_BY_TYPE",t.GET_PROJECT_HIGH_TYPE_ONE="GET_PROJECT_HIGH_TYPE_ONE",t.CHANGE_PREJECT_HIGH_TYPE_CONTENT="CHANGE_PREJECT_HIGH_TYPE_CONTENT",t.BEFORE_ADD_PROJECT_CARD="BEFORE_ADD_PROJECT_CARD",t.BEFORE_ADD_PROJECT_CARD_FROM_RUNNING="BEFORE_ADD_PROJECT_CARD_FROM_RUNNING",t.CHANGE_PROJECT_CARD_CONTENT="CHANGE_PROJECT_CARD_CONTENT",t.CHANGE_PROJECT_VIEWS_CONTENT="CHANGE_PROJECT_VIEWS_CONTENT",t.BEFORE_EDIT_PROJECT_CARD="BEFORE_EDIT_PROJECT_CARD",t.CHANGE_PROJECT_CARD_CATEGORY_TYPE="CHANGE_PROJECT_CARD_CATEGORY_TYPE",t.SAVE_PROJECT_CARD="SAVE_PROJECT_CARD",t.NEW_SAVE_PROJECT_CARD="NEW_SAVE_PROJECT_CARD",t.CHANGE_PROJECT_PROPERTY="CHANGE_PROJECT_PROPERTY",t.BEFORE_ADD_PROJECT_CONFIG_CARD_TYPE="BEFORE_ADD_PROJECT_CONFIG_CARD_TYPE",t.BEFORE_INSERT_PROJECT_CONF_CARD_TYPE="BEFORE_INSERT_PROJECT_CONF_CARD_TYPE",t.CHANGE_PROJECT_CONF_CARD_TYPE_CONTENT="CHANGE_PROJECT_CONF_CARD_TYPE_CONTENT",t.SELECT_PROJECT_CONF_CARD_TYPE="SELECT_PROJECT_CONF_CARD_TYPE",t.GET_PROJECT_CONF_TYPE_CONTENT="GET_PROJECT_CONF_TYPE_CONTENT",t.CHANGE_PROJECT_CONF_CARD_TYPE_BOX_STATUS="CHANGE_PROJECT_CONF_CARD_TYPE_BOX_STATUS",t.PROJECT_CONF_TYPE_DELETE_BTN_SHOW="PROJECT_CONF_TYPE_DELETE_BTN_SHOW",t.CONFIRM_DELETE_PROJECT_CONF_TYPE="CONFIRM_DELETE_PROJECT_CONF_TYPE",t.CHANGE_PROJECT_CONF_TYPE_POSITION="CHANGE_PROJECT_CONF_TYPE_POSITION",t.PROJECT_CONF_DELETE_BTN_SHOW="PROJECT_CONF_DELETE_BTN_SHOW",t.CANCLE_PROJECT_CONF_TYPE_BTN="CANCLE_PROJECT_CONF_TYPE_BTN",t.SAVE_PROJECT_CONF_CARD_TYPE="SAVE_PROJECT_CONF_CARD_TYPE",t.ADJUST_PROJECT_CONF_CARD_TYPE_LIST="ADJUST_PROJECT_CONF_CARD_TYPE_LIST"},1307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkUsed=t.downloadBefore=t.regretCode=t.getRegretCategoryTree=t.beforeCloseMaterial=t.changeViews=t.adjustCategoryOrder=t.adjustInventoryCardList=t.adjustAllRelativeCardList=t.switchWarehouse=t.exportToNotification=t.afterChImport=t.getFileUploadInitialFetch=t.getFileUploadFetch=t.closeVcImportContent=t.beforeCHImport=t.cancelDeleteOrAddInventoryType=t.adjustInventoryCardTyepList=t.inventoryDownType=t.inventoryUpType=t.confirmDeleteInventoryType=t.deleteInventoryType=t.changeInventoryCardTypeBoxChecked=t.getInventoryTypeInfo=t.saveInventoryCardType=t.changeInventoryCardTypeSelect=t.changeInventoryCardTypeContent=t.beforeInsertAddInventoryCardType=t.beforeAddInventoryCardType=t.deleteInventoryHighType=t.saveInventoryHighType=t.changeInventoryHighTypeContent=t.beforeAddInventoryHighType=t.changeInventoryModalActiveHighType=t.beforeEditInventoryHighType=t.getInventoryCardListByType=t.selectCardAll=t.changeInventoryCardBoxStatus=t.modifyInventoryAssemblyStatus=t.modifyInventoryCardUsedStatus=t.refreshInventoryList=t.changeInventoryActiveHighType=t.getInventoryConfigInit=void 0;var a=m(n(37)),r=m(n(47));n(38),n(46);var i=p(n(1318)),o=(p(n(43)),m(n(52))),l=p(n(60)),u=p(n(1375)),c=n(22),s=p(n(30)),d=p(n(27)),f=n(18);p(n(1241));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}r.default.confirm;var g=t.getInventoryConfigInit=function(){return function(e,t){e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingCardList","GET","listFrom=&currentPage=1&pageSize="+d.CONFIG_PAGE_SIZE+"&condition=",function(t){(0,c.showMessage)(t)?(0,o.default)("getInventoryHighTypeList","GET","",function(n){(0,c.showMessage)(n)&&e({type:i.GET_INVENTORY_CONFIG_INIT,title:n.data,cardList:t.data.resultList,enableWarehouse:t.data.enableWarehouse,pageCount:t.data.pages}),e({type:i.SWITCH_LOADING_MASK})}):e({type:i.SWITCH_LOADING_MASK})})}},y=(t.changeInventoryActiveHighType=function(e,t){return function(n,a){n(C(e,t))}},t.refreshInventoryList=function(e,t,n){return function(a,r){a(C(e,t,n))}}),C=function(e,t,n){return function(a,r){var l=r().inventoryConfState.get("views"),u=t||l.get("currentPage"),s=void 0===n?l.get("searchContent"):n;a({type:i.SWITCH_LOADING_MASK}),e.get("name")===d.ALL_TAB_NAME_STR?(0,o.default)("getInventorySettingCardList","GET","listFrom=&currentPage="+u+"&pageSize="+d.CONFIG_PAGE_SIZE+"&condition="+s,function(t){(0,c.showMessage)(t)&&a({type:i.CHANGE_ACTIVE_INVENTORY_CONF_HIGH_TYPE,name:e.get("name"),uuid:e.get("uuid"),cardList:t.data.resultList,enableWarehouse:t.data.enableWarehouse,treeList:[],currentPage:u,pageCount:t.data.pages,condition:s}),a({type:i.SWITCH_LOADING_MASK})}):(0,o.default)("getInventorySettingCardList","GET","listFrom="+e.get("uuid")+"&currentPage="+u+"&pageSize="+d.CONFIG_PAGE_SIZE+"&condition="+s,function(t){(0,c.showMessage)(t)?(0,o.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+e.get("uuid"),function(n){(0,c.showMessage)(n)&&a({type:i.CHANGE_ACTIVE_INVENTORY_CONF_HIGH_TYPE,name:e.get("name"),uuid:e.get("uuid"),cardList:t.data.resultList,treeList:n.data.resultList,enableWarehouse:n.data.enableWarehouse,setDefault:!0,currentPage:u,pageCount:t.data.pages,condition:s}),a({type:i.SWITCH_LOADING_MASK})}):a({type:i.SWITCH_LOADING_MASK})})}},h=(t.modifyInventoryCardUsedStatus=function(e,t){return function(n){n({type:i.SWITCH_LOADING_MASK}),(0,o.default)("modifyInventorySettingCardUsedStatus","POST",JSON.stringify({psiData:{uuid:e,used:t}}),function(a){(0,c.showMessage)(a,"show")&&n({type:i.CHANGE_INVENTORY_CONF_CARD_USED_STATUS,list:a.data.resultList,uuid:e,used:t}),n({type:i.SWITCH_LOADING_MASK})})}},t.modifyInventoryAssemblyStatus=function(e,t,n){return function(a){a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("modifyInventoryAssembly"+(t?"Open":"Close"),"GET","productUuid="+e,function(r){(0,c.showMessage)(r,"show")&&(a({type:i.CHANGE_INVENTORY_CONF_ASSEMBLY_STATUS,uuid:e,used:t}),n&&n()),a({type:i.SWITCH_LOADING_MASK})})}}),E=(t.changeInventoryCardBoxStatus=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_CARD_BOX_STATUS,status:e,uuid:t})}},t.selectCardAll=function(e){return function(t){t({type:i.SELECT_INVENTORY_CONF_CARD_ALL,value:e})}},t.getInventoryCardListByType=function(e,t,n,a,r){return function(l,u){l({type:i.SWITCH_LOADING_MASK});var s=u().inventoryConfState.get("views"),f=void 0===r?s.get("searchContent"):r,p=a||s.get("currentPage");(0,o.default)("getInventorySettingCardListByType","GET","ctgyUuid="+e+"&&subordinateUuid="+t+"&currentPage="+p+"&pageSize="+d.CONFIG_PAGE_SIZE+"&condition="+f,function(e){(0,c.showMessage)(e)&&l({type:i.SELECT_INVENTORY_CONF_CARD_BY_TYPE,list:e.data.resultList,uuid:t,name:n,currentPage:p,pageCount:e.data.pages,condition:f}),l({type:i.SWITCH_LOADING_MASK})})}},t.beforeEditInventoryHighType=function(e){return function(t,n){var a=n().inventoryConfState,r=a.getIn(["views","activeTapKey"]),l=a.getIn(["views","activeTapKeyUuid"]),u=a.get("originTags"),s="",f="";1!=u.size&&(r===d.ALL_TAB_NAME_STR?(s=u.getIn([1,"uuid"]),f=u.getIn([1,"name"])):(s=l,f=r)),t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getOneInventorySettingHighType","GET","uuid="+s,function(n){(0,c.showMessage)(n)&&(t({type:i.BEFORE_EDIT_INVENETORY_HIGH_TYPE,receivedData:n.data,activeName:f,activeUuid:s}),e()),t({type:i.SWITCH_LOADING_MASK})})}},t.changeInventoryModalActiveHighType=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getOneInventorySettingHighType","GET","uuid="+e.get("uuid"),function(n){(0,c.showMessage)(n)&&t({type:i.BEFORE_EDIT_INVENETORY_HIGH_TYPE,receivedData:n.data,activeName:e.get("name"),activeUuid:e.get("uuid")}),t({type:i.SWITCH_LOADING_MASK})})}},t.beforeAddInventoryHighType=function(){return{type:i.BEFORE_INSERT_INVENTORY_CONF_HGIH_TYPE}},t.changeInventoryHighTypeContent=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_HIGH_TYPE_CONTENT,name:e,value:t})}},t.saveInventoryHighType=function(){return function(e,t){e({type:i.SWITCH_LOADING_MASK});var n=t().inventoryConfState.get("inventoryHighTypeTemp"),a=n.get("uuid")?"modify":"insert";(0,o.default)("insertInventoryHighType","POST",JSON.stringify({psiData:n}),function(t){(0,c.showMessage)(t,"show")&&0===t.code&&e({type:i.AFTER_SAVE_INVENTORYSETTING_CONTENT,title:t.data,insertOrModify:a})}),e({type:i.SWITCH_LOADING_MASK})}},t.deleteInventoryHighType=function(e){return function(t,n){var a=n().inventoryConfState,r=a.getIn(["views","activeInventoryTypeUuid"]),l=a.getIn(["views","activeTapKeyUuid"]);t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteInventorySettingHighType","POST",JSON.stringify({ctgyUuid:r}),function(n){(0,c.showMessage)(n,"show")?r==l?(0,o.default)("getInventorySettingCardList","GET","listFrom=",function(e){(0,c.showMessage)(n)&&t({type:i.DELETE_CURRENT_INVENTORY_CONF_HGIH_TYPE,title:n.data.resultList,name:d.ALL_TAB_NAME_STR,uuid:"",cardList:e.data.resultList,treeList:[]}),t({type:i.SWITCH_LOADING_MASK})}):(t({type:i.DELETE_INVENTORY_CONF_HGIH_TYPE,title:n.data.resultList}),t({type:i.SWITCH_LOADING_MASK})):t({type:i.SWITCH_LOADING_MASK}),e()})}},t.beforeAddInventoryCardType=function(){return function(e){e({type:i.BEFORE_ADD_INVENTORY_CONF_CARD_TYPE})}},t.beforeInsertAddInventoryCardType=function(){return function(e){e({type:i.BEFORE_INSERT_INVENTORY_CONF_CARD_TYPE})}},t.changeInventoryCardTypeContent=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONF_CARD_TYPE_CONTENT,name:e,value:t})}},t.changeInventoryCardTypeSelect=function(e){return function(t){var n=e.split(d.TREE_JOIN_STR),a=n[1],r=n[0];t({type:i.SELECT_INVENTORY_CONF_CARD_TYPE,parentName:a,parentUuid:r})}},t.saveInventoryCardType=function(e,t,n){return function(a,r){var l=r().inventoryConfState.get("inventoryCardTypeTemp").toJS();l.ctgyUuid=r().inventoryConfState.getIn(["views","activeTapKeyUuid"]);var u=function(){(0,o.default)("addInventorySettingCardType","POST",JSON.stringify({psiData:l}),function(t){(0,c.showMessage)(t,"show")&&a({type:i.SAVE_INVENTORY_CONF_CARD_TYPE,typeTree:t.data.resultList,uuid:l.uuid,btnFlag:e,typeInfo:t.data.info}),a({type:i.SWITCH_LOADING_MASK})})};a({type:i.SWITCH_LOADING_MASK}),(0,o.default)("adjustInventorySettingTypeTitleSame","POST",JSON.stringify({psiData:{parentUuid:l.parentUuid,name:l.name,uuid:l.uuid}}),function(e){(0,c.showMessage)(e)?e.data.repeat?(t(),a({type:i.SWITCH_LOADING_MASK}),s.Confirm({message:"卡片名称与【编码："+e.data.card.code+"】卡片重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(a({type:i.SWITCH_LOADING_MASK}),u(),n()):n()},onFail:function(e){return console.log(e)}})):u():a({type:i.SWITCH_LOADING_MASK})})}},t.getInventoryTypeInfo=function(e){return function(t,n){var a=n().inventoryConfState.getIn(["typeTree","0","uuid"])===e;a?t({type:i.GET_INVENTORY_CONF_TYPE_CONTENT,uuid:e,data:{},isAll:a}):(t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCardType","GET","uuid="+e,function(n){(0,c.showMessage)(n)&&t({type:i.GET_INVENTORY_CONF_TYPE_CONTENT,uuid:e,data:n.data,isAll:a}),t({type:i.SWITCH_LOADING_MASK})}))}},t.changeInventoryCardTypeBoxChecked=function(e){return function(t){t({type:i.CHANGE_INVENTORY_CONF_CARD_TYPE_BOX_STATUS,list:e})}},t.deleteInventoryType=function(){return function(e,t){e({type:i.INVENTORY_CONF_TYPE_DELETE_BTN_SHOW})}},t.confirmDeleteInventoryType=function(){return function(e,t){var n=t().inventoryConfState.getIn(["views","typeTreeSelectList"]);if(0!==n.size){var r=t().inventoryConfState.getIn(["views","activeTapKeyUuid"]);e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("deleteInventorySettingOneCardType","POST",JSON.stringify({ctgyUuid:r,deleteList:n}),function(t){(0,c.showMessage)(t,"show")&&e({type:i.CONFIRM_DELETE_INVENTORY_CONF_TYPE,data:t.data.resultList}),e({type:i.SWITCH_LOADING_MASK})})}else a.default.info("请选择要删除的类别")}},t.inventoryUpType=function(){return function(e,t){e({type:i.SWITCH_LOADING_MASK});var n=t().inventoryConfState.getIn(["inventorySettingBtnStatus","treeUuid"]),a=t().inventoryConfState.getIn(["inventorySettingBtnStatus","upUuid"]),r=t().inventoryConfState.getIn(["views","activeTapKeyUuid"]);(0,o.default)("swapInventorySettingTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:n,swappedSubordinateUuid:a,categoryUuid:r}}),function(t){(0,c.showMessage)(t)&&e({type:i.CHANGE_INVENTORY_CONF_TYPE_POSITION,list:t.data.resultList}),e({type:i.SWITCH_LOADING_MASK})})}},t.inventoryDownType=function(){return function(e,t){e({type:i.SWITCH_LOADING_MASK});var n=t().inventoryConfState.getIn(["inventorySettingBtnStatus","treeUuid"]),a=t().inventoryConfState.getIn(["inventorySettingBtnStatus","downUuid"]),r=t().inventoryConfState.getIn(["views","activeTapKeyUuid"]);(0,o.default)("swapInventorySettingTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:n,swappedSubordinateUuid:a,categoryUuid:r}}),function(t){(0,c.showMessage)(t)&&e({type:i.CHANGE_INVENTORY_CONF_TYPE_POSITION,list:t.data.resultList}),e({type:i.SWITCH_LOADING_MASK})})}},t.adjustInventoryCardTyepList=function(e,t,n){return function(a,r){a({type:i.SWITCH_LOADING_MASK});var l=r().inventoryConfState.getIn(["views","cardSelectList"]).toJS();l.map(function(t,n){t.subordinateName=e});var u=t,s=r().inventoryConfState.getIn(["views","activeTapKeyUuid"]),d=r().inventoryConfState.getIn(["views","activeTreeKeyUuid"]);(0,o.default)("adjustInventorySettingCardTypeList","POST",JSON.stringify({cardList:l,subordinateUuid:u,adjustFrom:s,treeFrom:d}),function(e){(0,c.showMessage)(e)&&(a({type:i.ADJUST_INVENTORY_CONF_CARD_TYPE_LIST,list:e.data.resultList}),n()),a({type:i.SWITCH_LOADING_MASK})})}},t.cancelDeleteOrAddInventoryType=function(){return function(e,t){if(t().inventoryConfState.getIn(["inventorySettingBtnStatus","isAdd"])){var n=t().inventoryConfState.getIn(["inventorySettingBtnStatus","treeUuid"]);n===t().inventoryConfState.getIn(["typeTree",0,"uuid"])?e({type:i.CANCLE_INVENTORY_CONF_TYPE_BTN,data:{}}):(e({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCardType","GET","uuid="+n,function(t){(0,c.showMessage)(t)&&e({type:i.CANCLE_INVENTORY_CONF_TYPE_BTN,data:t.data}),e({type:i.SWITCH_LOADING_MASK})}))}else e({type:i.CANCLE_INVENTORY_CONF_TYPE_BTN,data:{}})}},t.beforeCHImport=function(){return{type:i.BEFORE_CH_IMPORT}},t.closeVcImportContent=function(){return{type:i.CLOSE_CH_IMPORT_CONTENT}}),v=(t.getFileUploadFetch=function(e){return function(t){(0,o.default)("chUpload","UPLOAD",e,function(e){if((0,c.showMessage)(e)){if(e.data){t({type:i.CHANGE_CH_IMPORT_NUM,name:"totalNumber",value:e.data.pages}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"importKey",value:e.data.importKey}),t({type:i.CHANGE_CH_IMPORT_STATUS,value:!0});!function n(a){a<=e.data.pages&&setTimeout(function(){(0,o.default)("chImport","POST",JSON.stringify({importKey:e.data.importKey,current:a}),function(l){(0,c.showMessage)(l)?a<e.data.pages?n(a+1):(t({type:i.CHANGE_CH_IMPORT_STATUS,value:!1}),(0,o.default)("chImportError","GET","importKey="+e.data.importKey+"&needDownload=false",function(e){t(v(e))})):(r.default.error({title:"异常提示",content:"请求异常，请稍后重试"}),t(E()))}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"curNumber",value:a})},500)}(1)}}else t(E())})}},t.getFileUploadInitialFetch=function(e){return function(t){(0,o.default)("chUploadInitial","UPLOAD",e,function(e){if((0,c.showMessage)(e)){if(e.data){t({type:i.CHANGE_CH_IMPORT_NUM,name:"totalNumber",value:e.data.pages}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"importKey",value:e.data.importKey}),t({type:i.CHANGE_CH_IMPORT_STATUS,value:!0});!function n(a){a<=e.data.pages&&setTimeout(function(){(0,o.default)("chImportInitial","POST",JSON.stringify({importKey:e.data.importKey,current:a}),function(l){(0,c.showMessage)(l)?a<e.data.pages?n(a+1):(t({type:i.CHANGE_CH_IMPORT_STATUS,value:!1}),(0,o.default)("chImportErrorInitial","GET","importKey="+e.data.importKey+"&needDownload=false",function(e){t(v(e))})):(r.default.error({title:"异常提示",content:"请求异常，请稍后重试"}),t(E()))}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"curNumber",value:a})},500)}(1)}}else t(E())})}},t.afterChImport=function(e){return function(t){t({type:i.AFTER_CH_IMPORT,receivedData:e})}}),_=(t.exportToNotification=function(e,t){return function(e){(0,o.default)(t,"GET","",function(e){(0,c.showMessage)(e,"show")})}},t.switchWarehouse=function(e){return function(t,n){e?s.Confirm({message:"“仓库管理”启用后不允许勾除，请谨慎操作。",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(e){if(1===e.buttonIndex){var r=n().inventoryConfState.get("views"),s=r.get("activeTapKey"),d=r.get("activeTapKeyUuid"),p=(0,f.fromJS)({name:s,uuid:d});t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("enableWarehouse","GET","",function(e){t({type:i.SWITCH_LOADING_MASK}),(0,c.showMessage)(e)&&(a.default.info("启用仓库成功！"),t(y(p)),t(u.getWarehouseTree()),t(l.getDbListFetch()))})}}}):(0,o.default)("disableWarehouse","GET","needCheck=true",function(e){(0,c.showMessage)(e)&&(e.data.canDisable?s.Confirm({message:"关闭仓库管理，将同步删除仓库。确定删除并关闭吗？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(e){if(1===e.buttonIndex){var r=n().inventoryConfState.get("views"),u=r.get("activeTapKey"),s=r.get("activeTapKeyUuid"),d=(0,f.fromJS)({name:u,uuid:s});t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("disableWarehouse","GET","needCheck=false",function(e){t({type:i.SWITCH_LOADING_MASK}),(0,c.showMessage)(e)&&(a.default.info("关闭仓库成功！"),t(y(d)),t(l.getDbListFetch()))})}}}):s.Confirm({message:"关闭仓库失败！有历史存货流水或存货期初值关联仓库。",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(){}}))})}},t.adjustAllRelativeCardList=function(e){return function(t){e()}},t.adjustInventoryCardList=function(e,t){return function(n){(0,o.default)("relativeInventoryTags","POST",JSON.stringify(e),function(e){(0,c.showMessage)(e)&&(t(),n(g()))})}},t.adjustCategoryOrder=function(e){return function(t){(0,o.default)("adjustCategoryOrder","POST",JSON.stringify(e),function(e){if((0,c.showMessage)(e)){var n=[{name:"全部",uuid:""}].concat(e.data.resultList);t({type:i.ADJUST_CATEGORY_ORDER_INVENTORY,payload:n})}})}},t.changeViews=function(e,t){return{type:i.CHANGE_CH_IMPORT_NUM,name:e,value:t}});t.beforeCloseMaterial=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("getInventorySettingOneCard","GET","uuid="+e.get("uuid"),function(n){(0,c.showMessage)(n)&&(n.data.assemblySheet&&n.data.assemblySheet.materialList?(t(_("materialModal",!0)),t(_("activeUuid",e.get("uuid")))):t(h(e.get("uuid"),!1)),t({type:i.SWITCH_LOADING_MASK}))})}},t.getRegretCategoryTree=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2];return function(a,r){a({type:i.SWITCH_LOADING_MASK}),e.get("parentUuid")?(0,o.default)("getInventorySettingCardListByType","GET","ctgyUuid="+e.get("parentUuid")+"&&subordinateUuid="+e.get("uuid")+"&currentPage="+t+"&pageSize="+d.CONFIG_PAGE_SIZE,function(e){a({type:i.SWITCH_LOADING_MASK}),(0,c.showMessage)(e)&&(a({type:i.CHANGE_CH_IMPORT_NUM,name:"cardList",value:(0,f.fromJS)(e.data.resultList)}),a({type:i.CHANGE_CH_IMPORT_NUM,name:"regretPages",value:e.data.pages}),n&&n())}):((0,o.default)("getInventorySettingCardList","GET","listFrom="+e.get("uuid")+"&currentPage="+t+"&pageSize="+d.CONFIG_PAGE_SIZE,function(e){(0,c.showMessage)(e)&&(a({type:i.SWITCH_LOADING_MASK}),a({type:i.CHANGE_CH_IMPORT_NUM,name:"cardList",value:(0,f.fromJS)(e.data.resultList)}),a({type:i.CHANGE_CH_IMPORT_NUM,name:"regretPages",value:e.data.pages}),n&&n())}),e.get("uuid")&&(0,o.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+e.get("uuid"),function(e){(0,c.showMessage)(e)&&a({type:i.CHANGE_CH_IMPORT_NUM,name:"cardTypeList",value:(0,f.fromJS)(e.data.resultList)})}))}},t.regretCode=function(e){return function(t){t({type:i.SWITCH_LOADING_MASK}),(0,o.default)("regretCode","POST",JSON.stringify({regretType:"CODE_INVENTORY",cardList:e.map(function(e){return{cardUuid:e.uuid,newCode:e.newCode}}),action:"MANAGER-STOCK_SETTING-REGRET_MODEL"}),function(n){if((0,c.showMessage)(n)){var r=n.data.key;if(r)var l=new Date,u=setInterval(function(){(0,o.default)("regretResult","GET","key="+n.data.key,function(n){if((0,c.showMessage)(n)){var o=new Date;n.data.index==e.length&&n.data.regretCardDto&&n.data.regretCardDto.cardList.length==e.length?(clearInterval(u),t({type:i.CHANGE_CH_IMPORT_NUM,name:"regretResultList",value:(0,f.fromJS)(n.data.regretCardDto.cardList)}),t({type:i.SWITCH_LOADING_MASK})):n.data.index==e.length&&!n.data.regretCardDto&&o-l>3e4&&(clearInterval(u),t({type:i.SWITCH_LOADING_MASK}),a.default.info("系统出错，请重试")),t({type:i.CHANGE_CH_IMPORT_NUM,name:"regretResultIndex",value:n.data.index}),t({type:i.CHANGE_CH_IMPORT_NUM,name:"regretResultKey",value:r})}else clearInterval(u),t({type:i.SWITCH_LOADING_MASK})})},500)}else t({type:i.SWITCH_LOADING_MASK})})}},t.downloadBefore=function(e){return function(t){(0,o.default)("regretCardConfirm","POST",JSON.stringify({cardList:e.map(function(e){return{cardUuid:e.uuid,cardName:e.name,oldCode:e.code,newCode:e.newCode}})}),function(e){if((0,c.showMessage)(e)){t({type:i.CHANGE_CH_IMPORT_NUM,name:"regretResultKey",value:e.data.key});var n=document.getElementsByClassName("regret-download-click")[0];setTimeout(function(){return n.click()},100)}})}},t.checkUsed=function(e){return function(t){(0,o.default)("checkCardUsed","POST",JSON.stringify({cardUuidList:e.map(function(e){return e.uuid}),cardType:"CARD4PERSON"}),function(e){t({type:i.CHANGE_CH_IMPORT_NUM,name:"usedCardList",value:(0,f.fromJS)(e.data.usedCard)})})}}},1317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkUsed=t.downloadBefore=t.regretCode=t.getRegretCategoryTree=t.cancelInsertOrDeleteProjectType=t.adjustProjectCardTyepList=t.projectDownType=t.projectUpType=t.confirmDeleteProjectType=t.deleteProjectType=t.changeProjectCardTypeBoxChecked=t.switchProjectType=t.saveProjectCardType=t.changeProjectCardTypeSelect=t.changeProjectCardTypeContent=t.beforeInsertProjectConfCardType=t.beforeAddProjectCardType=t.saveProjectHighType=t.changePrejectHighTypeContent=t.getProjectHighTypeOne=t.getProjectCardListByType=t.selectProjectCardAll=t.changeProjectCardBoxStatus=t.modifyProjectCardUsedStatus=t.refreshProjectList=t.changeProjectActiveHighType=t.getProjectConfigInit=void 0;var a=p(n(37)),r=p(n(47)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(38),n(46);var o=f(n(1302)),l=(f(n(43)),p(n(52))),u=n(22),c=f(n(30)),s=f(n(27)),d=n(18);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}r.default.confirm,t.getProjectConfigInit=function(){return function(e,t){e({type:o.SWITCH_LOADING_MASK}),(0,l.default)("getProjectConfigHighType","GET","",function(t){(0,u.showMessage)(t)&&e({type:o.PROJECT_GET_HTIGH_TYPE,list:t.data})});t().projectConfState.getIn(["views","activeTapKeyUuid"]),t().projectConfState.get("treeSelectUuid");(0,l.default)("getProjectListAndTree","GET","listFrom=&currentPage=1&pageSize="+s.CONFIG_PAGE_SIZE+"&condition=",function(t){e({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(t)&&e({type:o.GET_PROJECT_LIST_AND_TREE,cardList:t.data.resultList,treeList:t.data.typeList,pageCount:t.data.pages})})}},t.changeProjectActiveHighType=function(e){return function(t,n){t({type:o.SWITCH_LOADING_MASK});var a=e.get("name"),r=e.get("uuid");(0,l.default)("getProjectListAndTree","GET","listFrom="+r+"&currentPage=1&pageSize="+s.CONFIG_PAGE_SIZE+"&condition=",function(e){(0,u.showMessage)(e)&&t({type:o.CHANGE_ACTIVE_PROJECT_HIGH_TYPE,cardList:e.data.resultList,treeList:e.data.typeList,name:a,uuid:r,pageCount:e.data.pages}),t({type:o.SWITCH_LOADING_MASK})})}},t.refreshProjectList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2];return function(e,a){e({type:o.SWITCH_LOADING_MASK});var r=a().projectConfState.get("views"),i=void 0===n?r.get("searchContent"):n,c=a().projectConfState.getIn(["views","activeTapKeyUuid"]);a().projectConfState.getIn(["views","selectTypeId"]);(0,l.default)("getProjectListAndTree","GET","listFrom="+c+"&condition="+i+"&pageSize="+s.CONFIG_PAGE_SIZE+"&currentPage="+t,function(a){e({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(a)&&e({type:o.GET_PROJECT_LIST_AND_TREE,cardList:a.data.resultList,treeList:a.data.typeList,isFresh:!0,currentPage:t,searchContent:n,pageCount:a.data.pages})})}},t.modifyProjectCardUsedStatus=function(e,t){return function(n){n({type:o.SWITCH_LOADING_MASK}),(0,l.default)("changeProjectCardUsedStatus","POST",JSON.stringify({psiData:{uuid:e,used:t}}),function(a){(0,u.showMessage)(a,"show")&&n({type:o.CHANGE_PEOJECT_CONF_CARD_USED_STATUS,list:a.data.resultList,uuid:e,used:t}),n({type:o.SWITCH_LOADING_MASK})})}},t.changeProjectCardBoxStatus=function(e,t){return function(n){n({type:o.CHANGE_PEOJECT_CONF_CARD_BOX_STATUS,status:e,uuid:t})}},t.selectProjectCardAll=function(e){return function(t){t({type:o.SELECT_PEOJECT_CONF_CARD_ALL,value:e})}},t.getProjectCardListByType=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments[4];return function(i,c){i({type:o.SWITCH_LOADING_MASK});var d=c().projectConfState.get("views"),f=void 0===r?d.get("searchContent"):r;(0,l.default)("getProjectCardByType","GET","ctgyUuid="+e+"&&subordinateUuid="+t+"&condition="+f+"&pageSize="+s.CONFIG_PAGE_SIZE+"&currentPage="+a,function(l){(0,u.showMessage)(l)&&i({type:o.SELECT_PROJECT_CARD_BY_TYPE,list:l.data.resultList,uuid:t,name:n,parentUuid:e,currentPage:a,searchContent:r,pageCount:l.data.pages}),i({type:o.SWITCH_LOADING_MASK})})}},t.getProjectHighTypeOne=function(e,t){return function(n){n({type:o.SWITCH_LOADING_MASK});var a=e.uuid,r=e.name;(0,l.default)("getProjectConfigHighTypeOne","GET","uuid="+a,function(e){(0,u.showMessage)(e)&&(n({type:o.GET_PROJECT_HIGH_TYPE_ONE,data:e.data,name:r,uuid:a}),t&&t()),n({type:o.SWITCH_LOADING_MASK})})}},t.changePrejectHighTypeContent=function(e,t){return function(n){n({type:o.CHANGE_PREJECT_HIGH_TYPE_CONTENT,name:e,value:t})}},t.saveProjectHighType=function(e){return function(t,n){t({type:o.SWITCH_LOADING_MASK});var a=n().projectConfState.get("projectHighTypeTemp").toJS(),r=a.commonFee,c=a.beMake,s=a.beAssist,d=a.beIndirect,f=a.beMechanical,p=a.assistOpen,m=a.makeOpen,g=a.indirectOpen,y=a.mechanicalOpen,C=(a.saveProjectHighType,{"生产项目":{beMake:c,beAssist:s,makeOpen:m,assistOpen:p},"施工项目":{beIndirect:d,beMechanical:f,indirectOpen:g,mechanicalOpen:y},"损益项目":{commonFee:r}}[a.name]);(0,l.default)("modifyProjectConfigHighType","POST",JSON.stringify({psiData:i({},C,{name:a.name,uuid:a.uuid})}),function(n){(0,u.showMessage)(n,"show")&&e(),t({type:o.SWITCH_LOADING_MASK})})}},t.beforeAddProjectCardType=function(){return function(e){e({type:o.BEFORE_ADD_PROJECT_CONFIG_CARD_TYPE})}},t.beforeInsertProjectConfCardType=function(){return function(e){e({type:o.BEFORE_INSERT_PROJECT_CONF_CARD_TYPE})}},t.changeProjectCardTypeContent=function(e,t){return function(n){n({type:o.CHANGE_PROJECT_CONF_CARD_TYPE_CONTENT,name:e,value:t})}},t.changeProjectCardTypeSelect=function(e){return function(t){var n=e.split(s.TREE_JOIN_STR),a=n[1],r=n[0];t({type:o.SELECT_PROJECT_CONF_CARD_TYPE,parentName:a,parentUuid:r})}},t.saveProjectCardType=function(e,t,n){return function(a,r){var i=r().projectConfState.get("projectTypeTemp").toJS();i.ctgyUuid=r().projectConfState.getIn(["views","activeTapKeyUuid"]);var s=function(){(0,l.default)("insertProjectTreeOne","POST",JSON.stringify({psiData:i}),function(t){(0,u.showMessage)(t,"show")&&a({type:o.SAVE_PROJECT_CONF_CARD_TYPE,typeTree:t.data.resultList,uuid:i.uuid,btnFlag:e,typeInfo:t.data.info}),a({type:o.SWITCH_LOADING_MASK})})};a({type:o.SWITCH_LOADING_MASK}),(0,l.default)("adjustProjectTypeNameSame","POST",JSON.stringify({psiData:{parentUuid:i.parentUuid,name:i.name,uuid:i.uuid}}),function(e){(0,u.showMessage)(e)?e.data.repeat?(t(),a({type:o.SWITCH_LOADING_MASK}),c.Confirm({message:"卡片类别名称与已有卡片类别名称重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(a({type:o.SWITCH_LOADING_MASK}),s(),n()):n()},onFail:function(e){return console.log(e)}})):s():a({type:o.SWITCH_LOADING_MASK})})}},t.switchProjectType=function(e){return function(t,n){var a=n().projectConfState.getIn(["typeTree","0","uuid"])===e;a?t({type:o.GET_PROJECT_CONF_TYPE_CONTENT,uuid:e,data:{},isAll:a}):(t({type:o.SWITCH_LOADING_MASK}),(0,l.default)("getProjectTreeOne","GET","uuid="+e,function(n){(0,u.showMessage)(n)&&t({type:o.GET_PROJECT_CONF_TYPE_CONTENT,uuid:e,data:n.data,isAll:a}),t({type:o.SWITCH_LOADING_MASK})}))}},t.changeProjectCardTypeBoxChecked=function(e){return function(t){t({type:o.CHANGE_PROJECT_CONF_CARD_TYPE_BOX_STATUS,list:e})}},t.deleteProjectType=function(){return function(e,t){e({type:o.PROJECT_CONF_TYPE_DELETE_BTN_SHOW})}},t.confirmDeleteProjectType=function(){return function(e,t){var n=t().projectConfState.getIn(["views","typeTreeSelectList"]);if(0!==n.size){var r=t().projectConfState.getIn(["views","activeTapKeyUuid"]);e({type:o.SWITCH_LOADING_MASK}),(0,l.default)("deleteProjectType","POST",JSON.stringify({ctgyUuid:r,deleteList:n}),function(t){(0,u.showMessage)(t,"show")&&e({type:o.CONFIRM_DELETE_PROJECT_CONF_TYPE,data:t.data.resultList}),e({type:o.SWITCH_LOADING_MASK})})}else a.default.info("请选择要删除的类别")}},t.projectUpType=function(){return function(e,t){e({type:o.SWITCH_LOADING_MASK});var n=t().projectConfState.getIn(["projectTypeBtnStatus","treeUuid"]),a=t().projectConfState.getIn(["projectTypeBtnStatus","upUuid"]),r=t().projectConfState.getIn(["views","activeTapKeyUuid"]);(0,l.default)("swapProjectTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:n,swappedSubordinateUuid:a,categoryUuid:r}}),function(t){(0,u.showMessage)(t)&&e({type:o.CHANGE_PROJECT_CONF_TYPE_POSITION,list:t.data.resultList,selectedSubordinateUuid:n}),e({type:o.SWITCH_LOADING_MASK})})}},t.projectDownType=function(){return function(e,t){e({type:o.SWITCH_LOADING_MASK});var n=t().projectConfState.getIn(["projectTypeBtnStatus","treeUuid"]),a=t().projectConfState.getIn(["projectTypeBtnStatus","downUuid"]),r=t().projectConfState.getIn(["views","activeTapKeyUuid"]);(0,l.default)("swapProjectTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:n,swappedSubordinateUuid:a,categoryUuid:r}}),function(t){(0,u.showMessage)(t)&&e({type:o.CHANGE_PROJECT_CONF_TYPE_POSITION,list:t.data.resultList,selectedSubordinateUuid:n}),e({type:o.SWITCH_LOADING_MASK})})}},t.adjustProjectCardTyepList=function(e,t,n){return function(a,r){a({type:o.SWITCH_LOADING_MASK});var i=r().projectConfState.getIn(["views","cardSelectList"]).toJS();i.map(function(t,n){t.subordinateName=e});var c=t,s=r().projectConfState.getIn(["views","activeTapKeyUuid"]),d=r().projectConfState.getIn(["views","activeTreeKeyUuid"]);(0,l.default)("adjustProjectCardType","POST",JSON.stringify({cardList:i,subordinateUuid:c,adjustFrom:s,treeFrom:d}),function(e){(0,u.showMessage)(e)&&(a({type:o.ADJUST_PROJECT_CONF_CARD_TYPE_LIST,list:e.data.resultList}),n()),a({type:o.SWITCH_LOADING_MASK})})}},t.cancelInsertOrDeleteProjectType=function(){return function(e,t){if(t().projectConfState.getIn(["projectTypeBtnStatus","isAdd"])){var n=t().projectConfState.getIn(["projectTypeBtnStatus","treeUuid"]);n===t().projectConfState.getIn(["typeTree",0,"uuid"])?e({type:o.CANCLE_PROJECT_CONF_TYPE_BTN,data:{}}):(e({type:o.SWITCH_LOADING_MASK}),(0,l.default)("getProjectTreeOne","GET","uuid="+n,function(t){(0,u.showMessage)(t)&&e({type:o.CANCLE_PROJECT_CONF_TYPE_BTN,data:t.data}),e({type:o.SWITCH_LOADING_MASK})}))}else e({type:o.CANCLE_PROJECT_CONF_TYPE_BTN,data:{}})}},t.getRegretCategoryTree=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2];return function(a,r){a({type:o.SWITCH_LOADING_MASK}),e.get("parentUuid")?(0,l.default)("getProjectCardByType","GET","ctgyUuid="+e.get("parentUuid")+"&&subordinateUuid="+e.get("uuid")+"&currentPage="+t+"&pageSize="+s.CONFIG_PAGE_SIZE,function(e){a({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)&&(a({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"cardList",value:(0,d.fromJS)(e.data.resultList)}),a({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretPages",value:e.data.pages}),n&&n())}):(0,l.default)("getProjectListAndTree","GET","listFrom="+e.get("uuid")+"&currentPage="+t+"&pageSize="+s.CONFIG_PAGE_SIZE,function(e){(0,u.showMessage)(e)&&(a({type:o.SWITCH_LOADING_MASK}),a({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"cardList",value:(0,d.fromJS)(e.data.resultList)}),a({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretPages",value:e.data.pages}),a({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"cardTypeList",value:(0,d.fromJS)(e.data.typeList)}),n&&n())})}},t.regretCode=function(e){return function(t){t({type:o.SWITCH_LOADING_MASK}),(0,l.default)("regretCode","POST",JSON.stringify({regretType:"CODE_PROJECT",cardList:e.map(function(e){return{cardUuid:e.uuid,newCode:e.newCode}}),action:"MANAGER-PROJECT_SETTING-REGRET_MODEL"}),function(n){if((0,u.showMessage)(n)){var r=n.data.key;if(r)var i=new Date,c=setInterval(function(){(0,l.default)("regretResult","GET","key="+n.data.key,function(n){if((0,u.showMessage)(n)){var l=new Date;n.data.index==e.length&&n.data.regretCardDto&&n.data.regretCardDto.cardList.length==e.length?(clearInterval(c),t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretResultList",value:(0,d.fromJS)(n.data.regretCardDto.cardList)}),t({type:o.SWITCH_LOADING_MASK})):n.data.index==e.length&&!n.data.regretCardDto&&l-i>3e4&&(clearInterval(c),t({type:o.SWITCH_LOADING_MASK}),a.default.info("系统出错，请重试")),t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretResultIndex",value:n.data.index}),t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretResultKey",value:r})}else clearInterval(c),t({type:o.SWITCH_LOADING_MASK})})},500)}else t({type:o.SWITCH_LOADING_MASK})})}},t.downloadBefore=function(e){return function(t){(0,l.default)("regretCardConfirm","POST",JSON.stringify({cardList:e.map(function(e){return{cardUuid:e.uuid,cardName:e.name,oldCode:e.code,newCode:e.newCode}})}),function(e){if((0,u.showMessage)(e)){t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"regretResultKey",value:e.data.key});var n=document.getElementsByClassName("regret-download-click")[0];setTimeout(function(){return n.click()},100)}})}},t.checkUsed=function(e){return function(t){(0,l.default)("checkCardUsed","POST",JSON.stringify({cardUuidList:e.map(function(e){return e.uuid}),cardType:"CARD4PERSON"}),function(e){t({type:o.CHANGE_PROJECT_VIEWS_CONTENT,name:"usedCardList",value:(0,d.fromJS)(e.data.usedCard)})})}}},1318:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_INVENTORY_CONF="INIT_INVENTORY_CONF",t.CHANGE_ACTIVE_INVENTORY_CONF_HIGH_TYPE="CHANGE_ACTIVE_INVENTORY_CONF_HIGH_TYPE",t.CHANGE_INVENTORY_CONF_CARD_USED_STATUS="CHANGE_INVENTORY_CONF_CARD_USED_STATUS",t.SELECT_INVENTORY_CONF_CARD_ALL="SELECT_INVENTORY_CONF_CARD_ALL",t.CHANGE_INVENTORY_CONF_CARD_BOX_STATUS="CHANGE_INVENTORY_CONF_CARD_BOX_STATUS",t.DELETE_INVENTORY_CONF_CARD_LIST="DELETE_INVENTORY_CONF_CARD_LIST",t.SELECT_INVENTORY_CONF_CARD_BY_TYPE="SELECT_INVENTORY_CONF_CARD_BY_TYPE",t.GET_INVENTORY_CONFIG_INIT="GET_INVENTORY_CONFIG_INIT",t.BEFORE_EDIT_INVENETORY_HIGH_TYPE="BEFORE_EDIT_INVENETORY_HIGH_TYPE",t.BEFORE_INSERT_INVENTORY_CONF_HGIH_TYPE="BEFORE_INSERT_INVENTORY_CONF_HGIH_TYPE",t.CHANGE_INVENTORY_CONF_HIGH_TYPE_CONTENT="CHANGE_INVENTORY_CONF_HIGH_TYPE_CONTENT",t.AFTER_SAVE_INVENTORYSETTING_CONTENT="AFTER_SAVE_INVENTORYSETTING_CONTENT",t.DELETE_INVENTORY_CONF_HGIH_TYPE="DELETE_INVENTORY_CONF_HGIH_TYPE",t.DELETE_CURRENT_INVENTORY_CONF_HGIH_TYPE="DELETE_CURRENT_INVENTORY_CONF_HGIH_TYPE",t.GET_INVENTORY_CONF_HIGH_TYPE_LIST="GET_INVENTORY_CONF_HIGH_TYPE_LIST",t.CHANGE_INVENTORY_CONF_ASSEMBLY_STATUS="CHANGE_INVENTORY_CONF_ASSEMBLY_STATUS",t.BEFORE_ADD_INVENTORY_CONF_CARD_INVENTORY="BEFORE_ADD_INVENTORY_CONF_CARD_INVENTORY",t.INIT_ADD_INVENTORY_STATE="INIT_ADD_INVENTORY_STATE",t.BEFORE_ADD_INVENTORY_CONF_CARD_RUNNING="BEFORE_ADD_INVENTORY_CONF_CARD_RUNNING",t.EMPTY_WAREHOUSE_LIST_QUANTITY="EMPTY_WAREHOUSE_LIST_QUANTITY",t.CHANGE_INVENTORY_CONF_CARD_CONTENT="CHANGE_INVENTORY_CONF_CARD_CONTENT",t.CHANGE_INVENTORY_CARD_CONTENT="CHANGE_INVENTORY_CARD_CONTENT",t.CHANGE_INVENTORY_CONF_CARD_VIEWS="CHANGE_INVENTORY_CONF_CARD_VIEWS",t.CHANGE_INVENTORY_CONF_VIEWS_CONTENT="CHANGE_INVENTORY_CONF_VIEWS_CONTENT",t.CHANGE_INVENTORY_CONF_CARD_NATURE="CHANGE_INVENTORY_CONF_CARD_NATURE",t.CHANGE_INVENTORY_CONF_CARD_CATEGORY_STATUS="CHANGE_INVENTORY_CONF_CARD_CATEGORY_STATUS",t.CHANGE_INVENTORY_CONF_CARD_CATEGORY_TYPE="CHANGE_INVENTORY_CONF_CARD_CATEGORY_TYPE",t.CHANGE_INVENTORY_CONF_INNER_STRING="CHANGE_INVENTORY_CONF_INNER_STRING",t.IVNENTORY_CHARGE_ITEM_CHECKBOX_SELECT="IVNENTORY_CHARGE_ITEM_CHECKBOX_SELECT",t.SAVE_INVENTORY_CONF_CARD_INVENTORY="SAVE_INVENTORY_CONF_CARD_INVENTORY",t.BEFORE_EDIT_INVENTORY_CONF_CARD="BEFORE_EDIT_INVENTORY_CONF_CARD",t.BEFORE_ADD_INVENTORY_CONF_CARD_TYPE="BEFORE_ADD_INVENTORY_CONF_CARD_TYPE",t.BEFORE_INSERT_INVENTORY_CONF_CARD_TYPE="BEFORE_INSERT_INVENTORY_CONF_CARD_TYPE",t.CHANGE_INVENTORY_CONF_CARD_TYPE_CONTENT="CHANGE_INVENTORY_CONF_CARD_TYPE_CONTENT",t.SELECT_INVENTORY_CONF_CARD_TYPE="SELECT_INVENTORY_CONF_CARD_TYPE",t.GET_INVENTORY_CONF_TYPE_CONTENT="GET_INVENTORY_CONF_TYPE_CONTENT",t.CHANGE_INVENTORY_CONF_CARD_TYPE_BOX_STATUS="CHANGE_INVENTORY_CONF_CARD_TYPE_BOX_STATUS",t.INVENTORY_CONF_TYPE_DELETE_BTN_SHOW="INVENTORY_CONF_TYPE_DELETE_BTN_SHOW",t.CONFIRM_DELETE_INVENTORY_CONF_TYPE="CONFIRM_DELETE_INVENTORY_CONF_TYPE",t.CHANGE_INVENTORY_CONF_TYPE_POSITION="CHANGE_INVENTORY_CONF_TYPE_POSITION",t.CANCLE_INVENTORY_CONF_TYPE_BTN="CANCLE_INVENTORY_CONF_TYPE_BTN",t.SAVE_INVENTORY_CONF_CARD_TYPE="SAVE_INVENTORY_CONF_CARD_TYPE",t.ADJUST_INVENTORY_CONF_CARD_TYPE_LIST="ADJUST_INVENTORY_CONF_CARD_TYPE_LIST",t.INIT_UNIT_STATE="INIT_UNIT_STATE",t.BEFORE_CH_IMPORT="BEFORE_CH_IMPORT",t.CLOSE_CH_IMPORT_CONTENT="CLOSE_CH_IMPORT_CONTENT",t.CHANGE_CH_IMPORT_STATUS="CHANGE_CH_IMPORT_STATUS",t.CHANGE_CH_IMPORT_NUM="CHANGE_CH_IMPORT_NUM",t.AFTER_CH_IMPORT="AFTER_CH_IMPORT",t.ADJUST_CATEGORY_ORDER_INVENTORY="ADJUST_CATEGORY_ORDER_INVENTORY",t.CHOOSE_ASSIST_UNIFORM="CHOOSE_ASSIST_UNIFORM"},1326:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=h(n(47)),i=h(n(14)),o=h(n(37)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(78),n(38);var u=n(1),c=h(u),s=n(18),d=n(17),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(30)),p=(n(22),n(31)),m=h(n(1415)),g=h(n(1327)),y=n(43),C=n(104);function h(e){return e&&e.__esModule?e:{default:e}}var E=(0,d.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.setUploadParam=function(t,n,a){var r=e.props.uploadKeyJson.get("dir");""!=n&&(e.get_suffix(n),r=e.calculateObjectName(n,r));var i={key:r,policy:e.props.uploadKeyJson.get("policy"),OSSAccessKeyId:e.props.uploadKeyJson.get("accessKeyId"),success_action_status:"200",callback:e.props.uploadKeyJson.get("callback"),signature:e.props.uploadKeyJson.get("signature")};t.setOption({url:e.props.uploadKeyJson.get("host"),multipart_params:i}),t.start()},e.callback=function(e,t,n){e.removeFile(t),e.addFile(n)},e.reUploadFile=function(e,t,n){e.removeFile(t.id),e.addFile(n.getNative())},e.get_suffix=function(e){var t=e.lastIndexOf("."),n="";return-1!=t&&(n=e.substring(t)),n},e.calculateObjectName=function(e,t){return t+(new Date).getTime()+"/"+e},e.checkEnclosureExist=function(t){for(var n=e.props.enclosureList?e.props.enclosureList:(0,s.fromJS)([]),a=!1,r=0;r<n.size;r++)if(n.getIn([r,"fileName"])==t.name){a=!0;break}return a},e.dataURLtoBlob=function(e){for(var t=e.split(","),n=(t[0].match(/:(.*?);/)[1],atob(t[1])),a=n.length,r=new Uint8Array(a);a--;)r[a]=n.charCodeAt(a);return new Blob([r],{type:"image/jpeg"})},e.state={uploadingModal:!1,errMessage:"",secondUpload:!1,isClipBoardUpload:!1,compressFileLength:0,clipUploadFile:function(){}},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),l(t,[{key:"componentDidMount",value:function(){var e=this,t=new m.default.Uploader({browse_button:void 0===e.props.id?"browse":e.props.id,drop_element:"drag-area",multi_selection:!0,url:p.ROOTPKT+"/aliyun/oss/callback",filters:{max_file_size:"10mb",prevent_duplicates:!1}});t.init();var n=0,a=0;t.bind("FilesAdded",function(t,a){if(void 0!==e.props.uploadKeyJson.get("checkMoreFj")&&!1===e.props.uploadKeyJson.get("checkMoreFj"))return a.forEach(function(e,n){t.removeFile(e.id)}),void e.setState({uploadingModal:!0,errMessage:"贵公司的附件容量已用完"});if(a.length>0){if(e.state.secondUpload)return e.setUploadParam(t,a[0].name,""),void(1==e.state.compressFileLength?e.setState({secondUpload:!1,compressFileLength:0}):e.setState({compressFileLength:e.state.compressFileLength-1}));if(e.props.dispatch((0,y.switchLoadingMask)()),a.length>9||a.length+e.props.enclosureList.size>9)return o.default.error("最多上传9个附件",3),a.forEach(function(e,n){t.removeFile(e.id)}),void e.props.dispatch((0,y.switchLoadingMask)());for(var r=!1,i=!0,l=!1,u=0;u<a.length;u++){var c=a[u],s=c.name;if(s.indexOf("@")>-1){e.setState({uploadingModal:!0,errMessage:"文件名中不允许包含@符号"}),i=!1,a.forEach(function(e,n){t.removeFile(e.id)}),e.props.dispatch((0,y.switchLoadingMask)());break}if(s.length>40){e.setState({uploadingModal:!0,errMessage:"文件名称不能超过40字符"}),i=!1,a.forEach(function(e,n){t.removeFile(e.id)}),e.props.dispatch((0,y.switchLoadingMask)());break}if(e.checkEnclosureExist(a[u])){e.setState({uploadingModal:!0,errMessage:"文件名已存在"}),i=!1,a.forEach(function(e,n){t.removeFile(e.id)}),e.props.dispatch((0,y.switchLoadingMask)());break}"image"==c.type.substr(0,5)&&c.size>204800&&(l=!0)}if(i){if(n=a.length,e.state.isClipBoardUpload)return void e.setUploadParam(t,"",!1);if(l)e.props.dispatch((0,y.switchLoadingMask)()),f.Confirm({message:"请选择是否原图上传",title:"提示",buttonLabels:["压缩上传","原图上传"],onSuccess:function(n){e.props.dispatch((0,y.switchLoadingMask)()),r=1!==n.buttonIndex;for(var i=function(n){var i=new FileReader,l=new Image,u=document.createElement("canvas"),c=u.getContext("2d");if("image"==a[n].type.substr(0,5)){var s=a[n].getNative();i.readAsDataURL(s),i.onload=function(e){l.src=e.target.result},l.onload=function(){var i=a[n];if(i.size>204800)if(r)try{var s=l.width,d=l.height,f=1*s,p=1*d;u.width=f,u.height=p,c.clearRect(0,0,f,p),c.drawImage(l,0,0,f,p);var m=u.toDataURL("image/jpeg",.3),g=e.dataURLtoBlob(m);g.name=i.name,i.size<g.size?i.size<=2097152?n+1===a.length&&e.setUploadParam(t,"",!1):((0,o.default)("压缩上传失败，仅可上传原图"),a.length):g.size<=2097152?(e.callback(t,i.id,g),e.setState({compressFileLength:e.state.compressFileLength+1,secondUpload:!0}),n+1===a.length&&e.setUploadParam(t,"",!1)):((0,o.default)("压缩上传失败，仅可上传原图"),a.length)}catch(t){a.length,e.setState({uploadingModal:!0,errMessage:"图片压缩异常，不支持该图片压缩"})}else n+1===a.length&&e.setUploadParam(t,"",!1);else n+1===a.length&&e.setUploadParam(t,"",!1)}}else n+1===a.length&&e.setUploadParam(t,"",!1)},l=0;l<a.length;l++)i(l)}});else for(var d=0;d<a.length;d++)d+1===a.length&&e.setUploadParam(t,"",!1)}}}),t.bind("FileUploaded",function(t,r,i){t.removeFile(r.id),a+=1,200==i.status?e.props.uploadEnclosureList([r.name,r,JSON.parse(i.response),a===n]):203==i.status?o.default.info("上传到OSS成功，但是oss访问用户设置的上传回调服务器失败，失败原因是:"+i.response):o.default.info(i.response),a===n&&(a=0,n=0,t.files.forEach(function(e){t.removeFile(e.id)}))}),t.bind("BeforeUpload",function(t,n){e.setUploadParam(t,n.name,!0)}),t.bind("Error",function(t,r){-600==r.code?o.default.info("文件最大不能超过10M"):-601==r.code?o.default.info("不能上传所选择的文件类型"):-602==r.code?o.default.info("这个文件已经上传过一遍了"):(0===r.status?f.Alert("服务器正忙，请稍后再试","确定"):f.Alert("上传出错:"+r.response,"确定"),(0,C.xfnFetchErrorToDeveloper)({title:"上传出错",message:r.status+"-"+r.code+"-"+r.message+"-"+r.requestId+"-"+JSON.stringify(r.file),remark:"附件"},{msgTextSend:p.ROOT+"/msg/text/send"}),(a+=1)===n&&(a=0,n=0,t.files.forEach(function(e){t.removeFile(e.id)}),e.props.dispatch((0,y.switchLoadingMask)())))}),this.clipUploadFile=function(e){t.addFile(e)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.formPage,a=(t.dispatch,t.enclosureList,t.uploadEnclosureList,t.style),o=(t.uploadKeyJson,t.getUploadTokenFetch),l=this.state,s=l.uploadingModal,d=l.errMessage;l.secondUpload,l.isClipBoardUpload;return c.default.createElement(u.Fragment,null,c.default.createElement("div",{className:"enclosure-item enclosure-add-file",style:a,id:"drag-area"},c.default.createElement("a",{className:"enclosure-item-input",id:void 0===this.props.id?"browse":this.props.id,onClick:function(){o(),e.setState({secondUpload:!1,isClipBoardUpload:!1})}}),c.default.createElement(i.default,{type:"plus"}),c.default.createElement(r.default,{title:"上传失败",visible:s,onOk:function(){return e.setState({uploadingModal:!1})},onCancel:function(){return e.setState({uploadingModal:!1})}},c.default.createElement("p",null,d))),c.default.createElement(g.default,{getUploadTokenFetch:o,clipUploadFile:function(t){e.setState({secondUpload:!1,isClipBoardUpload:!0}),e.clipUploadFile(t)},formPage:n}))}}]),t}())||a;t.default=E},1327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=s(n(37)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(38);var o=s(n(1)),l=(n(18),n(17)),u=n(22),c=s(n(1328));function s(e){return e&&e.__esModule?e:{default:e}}var d=(0,l.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.get_suffix=function(e){var t=e.lastIndexOf("."),n="";return-1!=t&&(n=e.substring(t)),n},e.state={clipBoardModalShow:!1,clipBoardFile:"",clipBoardBlob:"",isCustomName:!1,fileName:"",widthHeigthRate:1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"componentDidMount",value:function(){var e=this;document.getElementById(this.props.formPage?this.props.formPage:"clipBoard").addEventListener("paste",function(t){var n=event.clipboardData&&event.clipboardData.items,a=null;if(n&&n.length)for(var i=0;i<n.length;i++)if(-1!==n[i].type.indexOf("image")){a=n[i].getAsFile();break}if(a){console.log("file",a),e.props.getUploadTokenFetch();var o=new FileReader,l=new Image;o.readAsDataURL(a);var u=e;o.onload=function(e){l.src=e.target.result,l.onload=function(){var t=l.width,n=l.height;u.setState({clipBoardFile:a,clipBoardModalShow:!0,clipBoardBlob:e.target.result,widthHeigthRate:t/n})}}}else r.default.info("没有可粘贴的图片")})}},{key:"render",value:function(){var e=this,t=this.props,n=t.formPage,a=(t.dispatch,t.enclosureList,t.uploadEnclosureList,t.style),i=(t.uploadKeyJson,t.getUploadTokenFetch,t.clipUploadFile),l=this.state,s=l.clipBoardModalShow,d=l.clipBoardFile,f=l.clipBoardBlob,p=l.isCustomName,m=l.customName,g=l.widthHeigthRate;return o.default.createElement("div",{className:"enclosure-clipboard-add-file",style:a,id:"drag-area"},o.default.createElement("input",{id:n||"clipBoard",value:"",className:"enclosure-clipboard-add-btn"}),o.default.createElement("div",{className:"enclosure-clipboard-add-fake-btn"},o.default.createElement("p",null,"在此区域内点击右键"),o.default.createElement("p",{className:"enclosure-clipboard-add-fake-btn-text"},"“粘贴”剪贴板中的图片")),o.default.createElement(c.default,{clipBoardModalShow:s,clipBoardFile:d,clipBoardBlob:f,widthHeigthRate:g,onCancel:function(){return e.setState({clipBoardModalShow:!1,isCustomName:!1,customName:""})},onOK:function(){var t="";if(p){if(!m)return r.default.info("请输入自定义名称");if(m.indexOf("@")>-1)return r.default.info("文件名中不允许包含@符号");if(m.length>40)return r.default.info("文件名称不能超过40字符");t=m+".jpg"}else t="粘贴图片"+(new u.DateLib).getFullDate()+".jpg";var n=new File([d],t,{type:d.type});i(n),e.setState({clipBoardModalShow:!1,isCustomName:!1,customName:""})},isCustomName:p,customName:m,changeIsCustomName:function(){e.setState({isCustomName:!p})},changeCustomName:function(t){e.setState({customName:t.target.value})}}))}}]),t}())||a;t.default=d},1328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=s(n(47)),i=s(n(129)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(128);var l=s(n(1)),u=(n(18),n(17)),c=n(127);function s(e){return e&&e.__esModule?e:{default:e}}var d=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.clipBoardModalShow,n=(e.clipBoardFile,e.clipBoardBlob),a=e.onOK,o=e.onCancel,u=e.isCustomName,s=e.customName,d=e.changeIsCustomName,f=e.changeCustomName,p=e.widthHeigthRate;return console.log("widthHeigthRate",p),l.default.createElement(r.default,{title:"上传附件",maskClosable:!1,visible:t,onOk:a,onCancel:o},l.default.createElement("div",{className:"clip-board-preview-img",style:p>=1?{maxHeight:"500px"}:{height:"500px"}},l.default.createElement("img",{id:"clipBoardImg",src:n,style:p>=1?{width:"100%"}:{height:"100%"}})),l.default.createElement("div",{className:"clip-board-preview-name"},l.default.createElement(i.default,{checked:u,onChange:d})," ",l.default.createElement("span",null,"自定义名称"),l.default.createElement(c.XfInput,{className:"clip-board-preview-name-input",style:{display:u?"":"none"},value:s,onChange:f})))}}]),t}())||a;t.default=d},1344:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_RELATIVE_CONF="INIT_RELATIVE_CONF",t.GET_RELATIVE_CONF_INIT="GET_RELATIVE_CONF_INIT",t.CHANGE_ACTIVE_RELATIVE_CONF_HIGH_TYPE="CHANGE_ACTIVE_RELATIVE_CONF_HIGH_TYPE",t.CHANGE_RELATIVE_CARD_USED_STATUS="CHANGE_RELATIVE_CARD_USED_STATUS",t.SELECT_RELATIVE_CARD_ALL="SELECT_RELATIVE_CARD_ALL",t.CHANGE_RELATIVE_CARD_BOX_STATUS="CHANGE_RELATIVE_CARD_BOX_STATUS",t.DELETE_RELATIVE_CARD_LIST="DELETE_RELATIVE_CARD_LIST",t.SELECT_RELATIVE_CARD_BY_TYPE="SELECT_RELATIVE_CARD_BY_TYPE",t.BEFORE_EDIT_RELATIVE_HIGH_TYPE="BEFORE_EDIT_RELATIVE_HIGH_TYPE",t.BEFORE_INSERT_RELATIVE_HGIH_TYPE="BEFORE_INSERT_RELATIVE_HGIH_TYPE",t.CHANGE_RELATIVE_HIGH_TYPE_CONTENT="CHANGE_RELATIVE_HIGH_TYPE_CONTENT",t.AFTER_SAVE_RELATIVE_HIGH_TYPE="AFTER_SAVE_RELATIVE_HIGH_TYPE",t.DELETE_CURRENT_RELATIVE_HGIH_TYPE="DELETE_CURRENT_RELATIVE_HGIH_TYPE",t.DELETE_RELATIVE_HGIH_TYPE="DELETE_RELATIVE_HGIH_TYPE",t.BEFORE_ADD_RELATIVE_CARD="BEFORE_ADD_RELATIVE_CARD",t.BEFORE_ADD_RELATIVE_CARD_FROM_RUNNING="BEFORE_ADD_RELATIVE_CARD_FROM_RUNNING",t.BEFORE_EDIT_RELATIVE_CARD="BEFORE_EDIT_RELATIVE_CARD",t.CHANGE_RELATIVE_CARD_CONTENT="CHANGE_RELATIVE_CARD_CONTENT",t.CHANGE_RELATIVE_VIEWS_CONTENT="CHANGE_RELATIVE_VIEWS_CONTENT",t.CHANGE_RELATIVE_CARD_CATEGORY_STATUS="CHANGE_RELATIVE_CARD_CATEGORY_STATUS",t.CHANGE_RELATIVE_CARD_CATEGORY_TYPE="CHANGE_RELATIVE_CARD_CATEGORY_TYPE",t.SAVE_RELATIVE_CARD="SAVE_RELATIVE_CARD",t.BEFORE_ADD_RELATIVE_CARD_TYPE="BEFORE_ADD_RELATIVE_CARD_TYPE",t.BEFORE_INSERT_RELATIVE_CARD_TYPE="BEFORE_INSERT_RELATIVE_CARD_TYPE",t.CHANGE_RELATIVE_TYPE_CONTENT="CHANGE_RELATIVE_TYPE_CONTENT",t.SELECT_RELATIVE_TYPE_PARENT="SELECT_RELATIVE_TYPE_PARENT",t.GET_RELATIVE_TYPE_CONTENT="GET_RELATIVE_TYPE_CONTENT",t.CHANGE_RELATIVE_TYPE_BOX_STATUS="CHANGE_RELATIVE_TYPE_BOX_STATUS",t.RELATIVE_TYPE_DELETE_BTN_SHOW="RELATIVE_TYPE_DELETE_BTN_SHOW",t.CONFIRM_DELETE_RELATIVE_TYPE="CONFIRM_DELETE_RELATIVE_TYPE",t.CHANGE_RELATIVE_TYPE_POSITION="CHANGE_RELATIVE_TYPE_POSITION",t.CANCLE_RELATIVE_TYPE_BTN="CANCLE_RELATIVE_TYPE_BTN",t.SAVE_RELATIVE_CARD_TYPE="SAVE_RELATIVE_CARD_TYPE",t.ADJUST_RELATIVE_CONF_CARD_TYPE_LIST="ADJUST_RELATIVE_CONF_CARD_TYPE_LIST",t.BEFORE_WL_IMPORT="BEFORE_WL_IMPORT",t.CLOSE_WL_IMPORT_CONTENT="CLOSE_WL_IMPORT_CONTENT",t.AFTER_WL_IMPORT="AFTER_WL_IMPORT",t.CHANGE_WL_IMPORT_NUM="CHANGE_WL_IMPORT_NUM",t.CHANGE_WL_IMPORT_STATUS="CHANGE_WL_IMPORT_STATUS",t.ADJUST_CATEGORY_ORDER_RELATIVE="ADJUST_CATEGORY_ORDER_RELATIVE"},1345:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=g(n(14)),r=g(n(100)),i=g(n(32)),o=g(n(37)),l=g(n(47)),u=g(n(171)),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78),n(99),n(51),n(38),n(46),n(170);var d=g(n(1));g(n(0)),n(18),n(56);n(1240);m(n(27));var f=g(n(90)),p=(n(22),g(n(1244)),g(n(1288)),n(127));m(n(1241));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}u.default.TreeNode;var C=l.default.confirm,h=new RegExp("^[^一-龥]{0,16}$"),E=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={curSerialList:a.props.serialList.toJS()||[],preWords:"",openNumber:"",increase:"",addNumber:"",curPage:1,sortIndex:1},a.matchMath=function(e){return e.match(/\d+$/)?e.match(/\d+$/)[0]:""},y(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=(t.assistModal,t.allAssistClassificationList,t.assistClassificationList,t.onClose),u=t.visible,s=t.onOk,m=t.fromPage,g=this.state,y=g.curSerialList,E=g.curPage,v=g.preWords,_=g.addNumber,S=g.openNumber,T=g.increase,N=g.sortIndex,I=Math.ceil((y.length||1)/20),b=y.filter(function(e,t){return t<20*E&&t>=20*(E-1)});return d.default.createElement(l.default,{destroyOnClose:!0,className:"serial-modal",width:"480px",visible:u,maskClosable:!1,title:"序列号录入",footer:[d.default.createElement(i.default,{style:y.length?{borderColor:"#fd5458",color:"#fd5458"}:{},disabled:!y.length,onClick:function(){y.some(function(e){return e.serialUuid&&!e.canModify})?o.default.info("存在序列号已出库，不允许清空"):y.length&&l.default.confirm({title:"提示",content:"确认清空当前序列号吗？",onOk:function(){e.setState({curSerialList:[],curPage:1})}})}},"清空"),d.default.createElement(i.default,{onClick:n},"取消"),d.default.createElement(i.default,{type:"primary",onClick:function(){var t=[],a=y.map(function(e){return c({},e,{serialNumber:(e.serialNumber||"").trim()})});if(a.forEach(function(e,n){(e.serialNumber||"").length>16&&t.push(n+1)}),a.length>1e3)o.default.info("序列号数量不能超过1000个！");else if(a.some(function(e){return!e.serialNumber}))o.default.info("序列号不能为空！");else if(t.length){var r=t;o.default.info("序号"+r.join("、")+"的序列号不可超过16字符")}else if("inventory"===m&&y.length>1e3)o.default.info("序列号不能超过1000个");else{if("inventory"!==m&&y.length>100)o.default.info("序列号不能超过100个");else{var i=[],l=[];if(a.map(function(e,t){var n=e.serialNumber,a=y.findIndex(function(e,a){return n===e.serialNumber&&t<a});a>-1&&(i.push(t+1),l=l.concat([a+1,t+1]))}),i.length){var u=Array.from(new Set(l)).sort(function(e,t){return e-t}).join("、");return void C({title:"提示",okText:"自动去重",cancelText:"取消",content:"序号"+u+"序列号重复！",onOk:function(){var t=a.filter(function(e,t){return!i.some(function(e){return e===t+1})});e.setState({curSerialList:t})}})}}s(a),n()}}},"确定")],onCancel:n},d.default.createElement("div",null,d.default.createElement("div",{className:"serial-condition"},d.default.createElement("div",null,d.default.createElement("span",null,"前缀："),d.default.createElement(r.default,{onChange:function(t){h.test(t.target.value)?e.setState({preWords:t.target.value}):o.default.info("前缀仅支持16位数字、字母和符号")},value:v})),d.default.createElement("div",null,d.default.createElement("span",null,"起始号："),d.default.createElement(p.NumberInput,{type:"roundNumber",onChange:function(t){e.setState({openNumber:t})},value:S}))),d.default.createElement("div",{className:"serial-condition"},d.default.createElement("div",null,d.default.createElement("span",null,"递增量："),d.default.createElement(p.NumberInput,{type:"roundNumber",onChange:function(t){e.setState({increase:t})},value:T})),d.default.createElement("div",{className:"special"},d.default.createElement("span",null,"个数："),d.default.createElement(p.NumberInput,{type:"roundNumber",onChange:function(t){t<=1e3?e.setState({addNumber:t}):o.default.info("个数不可大于1000")},value:_}),d.default.createElement(i.default,{type:"primary",disabled:!S||!T||!_,onClick:function(){for(var t=v||"",n=[{serialNumber:(t+S).trim()}],a=1;a<Number(_);a++){for(var r=Number(S),i=S.length,l=String(r).length,u=i-l,c=String(r+Number(T)*a),s=u-c.length+l,d="",f=1;f<=s;f++)d+="0";n.push({serialNumber:(t+d+c).trim()})}y.concat(n).some(function(e){return e.serialNumber&&e.serialNumber.length>16})?o.default.info("序列号不可超过16个字符"):e.setState({curSerialList:y.concat(n)})}},"新增"))),d.default.createElement("div",{style:{overflow:"hidden"}},d.default.createElement(p.TableAll,{className:"serial-table"},d.default.createElement("div",{className:"table-title-wrap"},d.default.createElement("ul",{className:"serial-table-item serial-table-title table-title",line:2},d.default.createElement("li",null,"操作"),d.default.createElement("li",null,"序列"),d.default.createElement("li",null,"序列号",d.default.createElement("span",{className:"icon-sort",onClick:function(){e.setState({curSerialList:y.sort(function(e,t){return e.serialNumber>t.serialNumber?N:-N}),sortIndex:-N})}})))),d.default.createElement(p.TableBody,null,(b.length?b:[{}]).map(function(t,n){return d.default.createElement(p.TableItem,{className:"serial-table-item",line:n+1,key:n},d.default.createElement("li",null,d.default.createElement("span",null,d.default.createElement(f.default,{type:"big-plus",onClick:function(){0===y.length?e.setState({curSerialList:[{},{}]}):(y.splice(20*(E-1)+n+1,0,{}),e.setState({curSerialList:y}))}})),d.default.createElement("span",null,d.default.createElement(a.default,{type:"close",onClick:function(){!t.serialUuid||t.canModify?0===y.length?e.setState({curSerialList:[]}):(y.splice(20*(E-1)+n,1),e.setState({curSerialList:y,curPage:(0===b.length||1===b.length)&&I>1?E-1:E})):o.default.info("该序列号已出库,无法删除")}}))),d.default.createElement("li",null,20*(E-1)+n+1),d.default.createElement("li",null,d.default.createElement(r.default,{value:t.serialNumber,onChange:function(t){h.test(t.target.value)?y.length?(y[20*(E-1)+n].serialNumber=t.target.value,e.setState({curSerialList:y})):e.setState({curSerialList:[{serialNumber:t.target.value}]}):o.default.info("序列号仅支持数字、字母和符号")}})))})),d.default.createElement(p.TablePagination,{size:"small",currentPage:E,pageCount:I,paginationCallBack:function(t){return e.setState({curPage:t})}})))))}}]),t}();t.default=E},1360:function(e,t,n){},1362:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=m(n(47)),r=m(n(1230)),i=m(n(100)),o=m(n(37)),l=m(n(32)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(1231),n(99),n(38),n(51);var c=m(n(1));m(n(0)),n(18),n(56);n(1240);p(n(27));var s=m(n(6)),d=n(22),f=(n(127),m(n(487)),p(n(1241)));m(n(1237));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={batchNumber:"",batchDate:"",value:"",expirationDate:""},a.getCurShelfLife=function(e,t){var n=Date.parse(e),a=Date.parse(t);return a>n?Math.floor((a-n)/864e5):null},a.calculLife=function(e,t){var n=Date.parse(e),a=new Date(n+24*t*3600*1e3);return new d.DateLib(a).toString()},a.initState=function(){a.setState({batchDate:"",batchNumber:"",expirationDate:""})},g(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,n=t.batchDate,u=t.batchNumber,d=t.expirationDate,p=this.props,m=p.dispatch,g=p.uuid,y=(p.onChange,p.close),C=p.visible,h=p.openShelfLife,E=p.onOk,v=p.shelfLife,_=p.callBack;return c.default.createElement(a.default,{title:"新增批次",visible:C,onCancel:y,footer:[c.default.createElement(l.default,{onClick:y},"取消"),c.default.createElement(l.default,{onClick:function(){E?E(u,n,d,y,_):m(f.insertBatch(u,h?n:"",h?d:"",g,y,_))}},"保存"),c.default.createElement(l.default,{type:"primary",onClick:function(){E?E(u,n,d,e.initState):m(f.insertBatch(u,h?n:"",h?d:"",g,e.initState))}},"保存并新增")]},c.default.createElement("div",{className:"batch-select-frame"},c.default.createElement("div",null,c.default.createElement("span",null,c.default.createElement("span",{style:{color:"red"}},"*"),"批次号："),c.default.createElement(i.default,{value:u,onChange:function(t){t.preventDefault();/^[0-9a-zA-Z]{0,20}$/.test(t.target.value)?e.setState({batchNumber:t.target.value}):o.default.info("批次只支持输入20位以内的数字或字母")},placeholder:"请输入批次号"})),h?c.default.createElement("div",null,c.default.createElement("span",null,"生产日期："),c.default.createElement(r.default,{placeholder:"请选择生产日期",allowClear:!1,size:"small",value:n?(0,s.default)(n):"",onChange:function(t){var n=t.format("YYYY-MM-DD");e.setState({batchDate:n}),!d&&v&&e.setState({expirationDate:e.calculLife(n,v)})}})):"",h?c.default.createElement("div",null,c.default.createElement("span",null,c.default.createElement("span",{style:{color:"red"}},"*"),"截止日期："),c.default.createElement(r.default,{placeholder:"请选择截止日期",allowClear:!1,size:"small",value:d?(0,s.default)(d):"",onChange:function(t){var n=t.format("YYYY-MM-DD");e.setState({expirationDate:n})}})):"",h&&(v||n&&d)?c.default.createElement("div",null,c.default.createElement("span",null),c.default.createElement("div",null,"("+(v?"默认保质期："+v+"天 ":"")+(this.getCurShelfLife(n,d)?"实际保质期："+this.getCurShelfLife(n,d)+"天":"")+")")):""))}}]),t}();t.default=y},1363:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=C(n(1230)),r=C(n(100)),i=C(n(37)),o=C(n(32)),l=C(n(45)),u=C(n(47)),c=C(n(171)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1231),n(99),n(38),n(51),n(55),n(46),n(170);var d=C(n(1));C(n(0)),n(18),n(56);n(1240);var f=y(n(27)),p=(C(n(90)),n(22)),m=C(n(6)),g=(C(n(1244)),n(127));y(n(1241));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}c.default.TreeNode,u.default.confirm;var E=l.default.Option,v=(l.default.OptGroup,function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={modifyBatch:"",modifyBatchDate:"",modifyBatchUuid:"",modifyExpirationDate:""},a.emptyState=function(){a.setState({modifyBatchUuid:"",batch:"",modifyBatch:"",modifyBatchDate:"",modifyExpirationDate:""})},a.calculLife=function(e,t){var n=Date.parse(e),a=new Date(n+24*t*3600*1e3);return new p.DateLib(a).toString()},a.getCurShelfLife=function(e,t){var n=Date.parse(e),a=Date.parse(t);return a>n?Math.floor((a-n)/864e5):null},h(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"componentDidMount",value:function(){if(this.props.modifyBatchUuid){var e=this.props,t=e.modifyBatchUuid,n=e.batch,a=e.modifyBatchDate;this.setState({modifyBatchUuid:t,batch:n,modifyBatch:n,modifyBatchDate:a})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,l=t.onClose,c=t.onOk,s=t.onOkAndNew,y=t.batchList,C=t.openShelfLife,h=t.insertOrModify,v=void 0===h?"modify":h,_=t.saveAndNewForbidden,S=t.className,T=t.shelfLife,N=this.state,I=N.modifyBatch,b=N.modifyBatchUuid,O=this.state.modifyBatchDate&&"undefined"!==this.state.modifyBatchDate?this.state.modifyBatchDate:(new p.DateLib).toString(),A=this.state.modifyExpirationDate&&"undefined"!==this.state.modifyExpirationDate?this.state.modifyExpirationDate:"";return d.default.createElement(u.default,{className:S,visible:n,okText:"保存",footer:[d.default.createElement(o.default,{onClick:l},"取消"),d.default.createElement(o.default,{type:"primary",onClick:function(){c(I,b,O,A),e.emptyState()}},"保存"),_?"":d.default.createElement(o.default,{type:"primary",onClick:function(){s(I,b,O,A),e.emptyState()}},"保存并继续")],title:"修改批次信息",onCancel:l},d.default.createElement("div",{className:"batch-modal"},d.default.createElement("div",null,d.default.createElement("span",null,"原批次："),d.default.createElement("div",null,d.default.createElement(g.XfnSelect,{dropdownClassName:"inventory-are-for-dom",className:"batch-select",showSearch:!0,placeholder:"请选择批次号",value:this.state.batch,onChange:function(t){var n=t.split(f.TREE_JOIN_STR),a=n[0],r=n[1],i=n[2],o=n[3];e.setState({modifyBatchUuid:r,batch:a,modifyBatch:a,modifyBatchDate:i,modifyExpirationDate:o})}},y.map(function(e){return d.default.createElement(E,{key:"insert"===v?e.get("batch"):""+e.get("batchUuid"),value:""+e.get("batch")+f.TREE_JOIN_STR+e.get("batchUuid")+f.TREE_JOIN_STR+e.get("productionDate")+f.TREE_JOIN_STR+e.get("expirationDate")},""+e.get("batch"))})))),d.default.createElement("div",{className:"jxc-config-title",style:{marginBottom:0,paddingBottom:"10px"}},"修改后信息"),d.default.createElement("div",null,d.default.createElement("span",null,"批次号："),d.default.createElement("div",null,d.default.createElement(r.default,{value:I,placeholder:"请输入批次号",onChange:function(t){t.preventDefault();/^[0-9a-zA-Z]{0,20}$/.test(t.target.value)?e.setState({modifyBatch:t.target.value}):i.default.info("批次只支持输入20位以内的数字或字母")}}))),C?d.default.createElement("div",null,d.default.createElement("span",null,"生产日期："),d.default.createElement("div",null,d.default.createElement(a.default,{allowClear:!1,dropdownClassName:"inventory-are-for-dom",value:O?(0,m.default)(O):"",onChange:function(t){var n=t.format("YYYY-MM-DD");e.setState({modifyBatchDate:n}),!A&&T&&e.setState({modifyExpirationDate:e.calculLife(n,T)})}}))):"",C?d.default.createElement("div",null,d.default.createElement("span",null,d.default.createElement("span",{style:{color:"red"}},"*"),"截止日期"),d.default.createElement("div",null,d.default.createElement(a.default,{allowClear:!1,dropdownClassName:"inventory-are-for-dom",value:A?(0,m.default)(A):"",onChange:function(t){var n=t.format("YYYY-MM-DD");e.setState({modifyExpirationDate:n})}}))):"",C&&(T||O&&A)?d.default.createElement("div",null,d.default.createElement("span",null),d.default.createElement("div",null,"("+(T?"默认保质期："+T+"天 ":"")+(this.getCurShelfLife(O,A)?"实际保质期："+this.getCurShelfLife(O,A)+"天":"")+")")):""))}}]),t}());t.default=v},1374:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=k(n(47)),l=k(n(1267)),u=k(n(32)),c=k(n(14)),s=k(n(37)),d=k(n(129)),f=k(n(89)),p=k(n(45)),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(1265),n(51),n(78),n(38),n(128),n(88),n(55);var g=k(n(1)),y=(k(n(0)),n(18)),C=n(56);n(1418);var h=D(n(27)),E=n(22),v=k(n(1244)),_=n(127),S=k(n(1288)),T=k(n(483)),N=k(n(1463)),I=k(n(1464)),b=k(n(1465)),O=k(n(1466)),A=k(n(1467)),R=k(n(1468)),L=k(n(1345)),P=k(n(1363)),w=k(n(90)),M=D(n(1241));function D(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function k(e){return e&&e.__esModule?e:{default:e}}function j(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=p.default.Option,x=p.default.OptGroup,H=f.default.Group,G=(d.default.Group,(0,C.connect)(function(e){return e})((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={confirmModal:!1,showAddModal:!1,showMultiUnit:!1,showWarehouseModal:!1,page:"basic",showCheckModal:!1,assistModal:!1,modifyBatchUuid:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,g.default.Component),m(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.inventoryCardState,n=e.dispatch,a=t.getIn(["inventoryCardTemp","assemblyState"]),r=t.getIn(["inventoryCardTemp","assemblySheet","unitUuid"]),i=t.getIn(["inventoryCardTemp","unit","unitList"]),o=t.getIn(["views","fromOpen"]),l=t.getIn(["inventoryCardTemp","unit"]);"OPEN"===a&&o&&this.setState({page:"other"}),"OPEN"!==a||i.size||r||(n(M.changeInventoryInnerSrting(["assemblySheet","unitUuid"],l.get("uuid"))),n(M.changeInventoryInnerSrting(["assemblySheet","unitName"],l.get("name"))))}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.inventoryCardState!==e.inventoryCardState||this.props.showModal!==e.showModal||this.props.homeState!==e.homeState||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.showModal,r=t.inventoryCardState,i=t.homeState,m=t.enableWarehouse,C=t.Psi,D=t.cardList,k=void 0===D?(0,y.fromJS)([]):D,G=t.originTags,Y=t.fromPage,F=t.isJz,B=function(){e.props.closeModal(),e.setState({page:"basic"})},V=this.state,K=V.confirmModal,W=V.showAddModal,z=(V.showMultiUnit,V.showWarehouseModal),Q=V.page,Z=V.showCheckModal,X=V.assistModal,q=(V.modifyBatchUuid,i.getIn(["permissionInfo","Config"]).getIn(["edit","permission"])),$=i.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("QUANTITY")>-1,ee=i.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("ASSIST")>-1,te=i.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("BATCH")>-1,ne=i.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("SERIAL")>-1,ae=i.getIn(["data","userInfo","sobInfo","newJr"]),re=r.getIn(["views","standardList"]),ie=r.getIn(["views","customList"]),oe=r.getIn(["views","stockList"]),le=r.getIn(["views","serialModal"]),ue=r.getIn(["views","serialPlaceArr"]),ce=r.getIn(["views","serialList"]),se=r.getIn(["views","warehouseList"]),de=r.getIn(["views","selectedKeys"]),fe=r.getIn(["views","materialSelectedKeys"]),pe=r.getIn(["views","MemberList"]),me=r.getIn(["views","thingsList"]),ge=r.getIn(["views","showStockModal"]),ye=r.getIn(["views","selectList"]),Ce=r.getIn(["views","selectItem"]),he=r.getIn(["views","batchModal"]),Ee=r.getIn(["views","allAssistClassificationList"]),ve="inventoryConfig"!==Y;ve&&(q=i.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]));var _e=r.get("tags").filter(function(e){return"全部"!==e.get("name")}),Se=r.getIn(["views","insertOrModify"]),Te="insert"===Se?"新增存货卡片":"修改存货卡片",Ne=r.get("inventoryCardTemp"),Ie=Ne.get("code"),be=Ne.get("name"),Oe=Ne.get("uuid"),Ae=Ne.get("warehousePriceMode"),Re=Ne.get("inventoryNature"),Le=Ne.get("isOpenedQuantity"),Pe=Ne.get("financialInfo")||(0,y.fromJS)({}),we=Ne.getIn(["financialInfo","openAssist"]),Me=Ne.getIn(["financialInfo","openBatch"]),De=Ne.getIn(["financialInfo","openShelfLife"]),ke=Ne.getIn(["financialInfo","shelfLife"]),je=Ne.getIn(["financialInfo","batchList"])||(0,y.fromJS)([]),Ue=Ne.getIn(["financialInfo","openSerial"]),Je=(Ne.getIn(["financialInfo","serialList"])||(0,y.fromJS)([]),Ne.getIn(["financialInfo","assistClassificationList"])||(0,y.fromJS)([])),xe=Ne.getIn(["financialInfo","isBatchUniform"]),He=Je.every(function(e){return e.get("isUniform")}),Ge=Ne.get("unit")||(0,y.fromJS)({}),Ye=Ne.get("CurUnit")||(0,y.fromJS)({}),Fe=Ge.get("unitList")||(0,y.fromJS)([]),Be=Ne.get("openedQuantity"),Ve=Ne.get("unitPriceList"),Ke=Ne.get("opened"),We=Ne.get("remark"),ze=Ne.get("openList"),Qe=(Ne.get("isAppliedSale"),Ne.get("isAppliedPurchase"),Ne.get("isAppliedProduce"),Ne.get("categoryTypeList")),Ze=(Ne.get("contacterInfo"),Ne.get("isCheckOut")),Xe=Ne.get("assemblySheet")||(0,y.fromJS)({}),qe=Ne.get("assemblyState"),$e=Xe.get("materialList")||(0,y.fromJS)([]),et=Ne.getIn(["defaultAc","inventoryGoodsAcId"]),tt=Ne.getIn(["defaultAc","inventoryGoodsAcName"]),nt=Ne.getIn(["defaultAc","inventoryMaterialAcId"]),at=Ne.getIn(["defaultAc","inventoryMaterialAcName"]),rt=function(){return e.setState({confirmModal:!0})},it=function(){return e.setState({confirmModal:!1})},ot=function(t,a){var r=[{type:"stockName",value:be},{type:"code",value:Ie},{type:"remark",value:We}];E.jxcConfigCheck.beforeSaveCheck(r,function(){return function(t,a){if(""!==Re){var r=!0;if(_e.map(function(e,t){e.get("checked")&&(r=!1)}),r)s.default.info("所属分类必选一项");else{var i=!1;Qe.map(function(e,t){""!==e.get("ctgyUuid")&&""!==e.get("subordinateUuid")||(i=!0)}),i?s.default.info("类别需要填写完整"):(Ve.filter(function(e){return e.get("name")===Ge.get("name")&&1==e.get("type")}).size>1||Ve.filter(function(e){return e.get("name")===Ge.get("name")&&2==e.get("type")}).size>1||Fe.some(function(e){return Ve.filter(function(t){return t.get("name")===e.get("name")&&1==t.get("type")}).size>1})||Fe.some(function(e){return Ve.filter(function(t){return t.get("name")===e.get("name")&&1==t.get("type")}).size>1}))&&Le?s.default.info("同一个单位，默认采购价和默认销售价只能有一个"):Le&&(Ge.get("name")&&Ge.get("name").length>6||Fe.some(function(e){return e.get("name")&&e.get("name").length>6}))?s.default.info("单位名称不可大于6个字符"):"OPEN"!==qe&&"INVALID"!==qe||Le?$e.some(function(e){return e.get("materialUuid")})&&Xe.get("unitUuid")&&Xe.get("unitUuid")!==Ge.get("uuid")&&Fe.every(function(e){return e.get("uuid")!==Xe.get("unitUuid")})?s.default.info("组装单设置中，请重新选择成品的单位"):Le&&Me&&"boolean"!=typeof xe?s.default.info("请选择单价模式"):n(M.saveInventoryCard(Y,t,a,rt,it,ve)):e.setState({showCheckModal:!0})}}else s.default.info("存货性质必选")}(t,a)})},lt=void 0,ut=void 0,ct=void 0;return"modify"===Se&&k.size&&(ct=k.findIndex(function(e){return e.get("code")===Ie}),lt=ct-1,ut=ct+1),g.default.createElement(o.default,{className:"inventory-addCard-modal",width:"800px",visible:a,maskClosable:!1,title:Te,onCancel:function(){return B()},footer:[g.default.createElement(u.default,{style:{float:"left",display:"insert"==Se?"none":""},disabled:0===k.findIndex(function(e){return e.get("code")===Ie}),onClick:function(){n(M.beforeInventoryEditCard(k.get(lt),function(){},G,k.getIn([lt,"assemblyState"])))}},g.default.createElement(c.default,{type:"caret-left"})),g.default.createElement(u.default,{style:{float:"left",display:"insert"==Se?"none":""},disabled:k.findIndex(function(e){return e.get("code")===Ie})===k.size-1||!k.size,onClick:function(){n(M.beforeInventoryEditCard(k.get(ut),function(){},G,k.getIn([ut,"assemblyState"])))}},g.default.createElement(c.default,{type:"caret-right"})),g.default.createElement(u.default,{key:"cancel",type:"ghost",onClick:function(){return B()}},"取 消"),g.default.createElement(u.default,{key:"ok",type:ve?"primary":"modify"==Se?"primary":"ghost",disabled:!q,onClick:function(){ot("insert",B)}},"保 存"),g.default.createElement(u.default,{key:"addAndNew",type:"primary",disabled:!q,style:ve?{display:"none"}:{display:"modify"==Se?"none":"inline-block"},onClick:function(){ot("insertAndNew")}},"保存并新增")]},g.default.createElement("div",{className:"jxc-config-card-modal-wrap"},g.default.createElement("div",{className:"jxc-config-inventory-title",style:{display:"OPEN"!==qe&&"INVALID"!==qe||!C?"none":""}},g.default.createElement("span",{className:"basic"===Q?"active":"",onClick:function(){e.setState({page:"basic"})}},"基础设置"),g.default.createElement("span",{className:"basic"===Q?"":"active",onClick:function(){e.setState({page:"other"})}},"组装单设置")),g.default.createElement("div",{style:{display:"other"!==Q||["CLOSE","DISABLE"].includes(qe)?"none":"",marginTop:10}},g.default.createElement("div",{className:"inventory-content"},g.default.createElement("div",{className:"inventory-content-detail"},g.default.createElement("span",null,"投入物料"),g.default.createElement("span",null,"数量"),g.default.createElement("span",null,"单位")),$e.map(function(e,t){return g.default.createElement("div",{className:"inventory-content-detail",key:t},g.default.createElement("span",null,g.default.createElement(T.default,{combobox:!0,showSearch:!0,value:(e.get("code")||"")+" "+(e.get("name")||""),onChange:function(e,a){var r=e.split(h.TREE_JOIN_STR),i=r[0],o=r[1],l=r[2];n(M.changeInventoryInnerSrting(["assemblySheet","materialList",t],(0,y.fromJS)({materialUuid:i,code:o,name:l}))),n(M.getInventorySettingOneCard(i,t))}},oe.filter(function(e){return e.get("code")!==Ie}).map(function(e,t){return g.default.createElement(J,{key:e.get("uuid"),value:""+e.get("uuid")+h.TREE_JOIN_STR+e.get("code")+h.TREE_JOIN_STR+e.get("name")+h.TREE_JOIN_STR+e.get("isOpenedQuantity")+h.TREE_JOIN_STR+t,priceList:e.get("unitPriceList"),unit:e.get("unit")},e.get("code")+" "+e.get("name"))}))),g.default.createElement("span",null,g.default.createElement(_.XfInput,{mode:"number",tipTit:"数量",placeholder:"输入数量",value:e.get("quantity"),onChange:function(e){var a=e.target.value;n(M.changeInventoryInnerSrting(["assemblySheet","materialList",t,"quantity"],a))}})),g.default.createElement("span",null,g.default.createElement(T.default,{placeholder:"单位",combobox:!0,showSearch:!0,dropdownClassName:"auto-width",value:e.get("unitName")?""+e.get("unitName"):void 0,onChange:function(e){var a=e.split(h.TREE_JOIN_STR),r=a[0],i=a[1];n(M.changeInventoryInnerSrting(["assemblySheet","materialList",t,"unitUuid"],r)),n(M.changeInventoryInnerSrting(["assemblySheet","materialList",t,"unitName"],i))}},(e.get("unitList")||[]).map(function(e,t){return g.default.createElement(J,{key:e.get("uuid"),value:""+e.get("uuid")+h.TREE_JOIN_STR+e.get("name")},""+e.get("name"))}))),g.default.createElement("span",null,g.default.createElement(w.default,{type:"bigDel",theme:"outlined",onClick:function(){1===$e.size?n(M.changeInventoryInnerSrting(["assemblySheet","materialList",0],(0,y.fromJS)({}))):n(M.deleteMaterial($e,t))}})))}),g.default.createElement("div",{className:"inventory-button"},g.default.createElement(u.default,{onClick:function(){n(M.addMaterial($e,$e.size-1))}},g.default.createElement(w.default,{type:"big-plus"}),"添加存货明细"),g.default.createElement(u.default,{onClick:function(){n(M.getInventoryAllCardList([],"showStockModal"))}},g.default.createElement(w.default,{type:"editPlus"}),"批量添加存货"))),g.default.createElement("div",{className:"inventory-content"},g.default.createElement("div",{className:"inventory-content-detail"},g.default.createElement("span",null,"组装成品"),g.default.createElement("span",null,"数量"),g.default.createElement("span",null,"单位")),g.default.createElement("div",{className:"inventory-content-detail"},g.default.createElement("span",{style:{borderBottom:"1px solid #d9d9d9",color:"#ccc"}},(Ie||"")+" "+(be||"")),g.default.createElement("span",null,g.default.createElement(_.XfInput,{mode:"number",tipTit:"数量",placeholder:"输入数量",value:Xe.get("quantity"),onChange:function(e){var t=e.target.value;n(M.changeInventoryInnerSrting(["assemblySheet","quantity"],t))}})),g.default.createElement("span",null,g.default.createElement(p.default,{placeholder:"单位",combobox:!0,showSearch:!0,dropdownClassName:"auto-width",value:Xe.get("unitName")?""+Xe.get("unitName"):void 0,onChange:function(e){var t=e.split(h.TREE_JOIN_STR),a=t[0],r=t[1];n(M.changeInventoryInnerSrting(["assemblySheet","unitUuid"],a)),n(M.changeInventoryInnerSrting(["assemblySheet","unitName"],r))}},g.default.createElement(J,{key:Ge.get("uuid"),value:""+Ge.get("uuid")+h.TREE_JOIN_STR+Ge.get("name")},""+Ge.get("name")),Fe.map(function(e,t){return g.default.createElement(J,{key:e.get("uuid"),value:""+e.get("uuid")+h.TREE_JOIN_STR+e.get("name")},""+e.get("name"))})))))),g.default.createElement("div",{style:{display:"basic"===Q||["CLOSE","DISABLE"].includes(qe)?"":"none"}},g.default.createElement("div",{className:"flex-row"},g.default.createElement("div",{className:"flex-row-item"},g.default.createElement("label",{className:"flex-row-label"},"编码："),g.default.createElement("div",{className:"flex-row-input"},g.default.createElement(_.XfInput,{style:{width:"100%"},placeholder:"必填，支持数字和大小写英文，最长16个字符",value:Ie,onChange:function(e){return E.jxcConfigCheck.inputCheck("stockCode",e.target.value,function(){return n(M.changeInventoryCardContent("code",e.target.value))})}}))),g.default.createElement("div",{className:"flex-row-item"},g.default.createElement("label",{className:"flex-row-label"},"名称："),g.default.createElement("div",{className:"flex-row-input"},g.default.createElement(_.XfInput,{style:{width:"100%"},placeholder:"必填",value:be,onChange:function(e){return n(M.changeInventoryCardContent("name",e.target.value))}})))),g.default.createElement("div",{className:"flex-row"},g.default.createElement("div",{className:"flex-row-item"},g.default.createElement("label",{className:"flex-row-label"},"存货性质："),g.default.createElement("div",{className:"flex-row-input"},g.default.createElement(H,{onChange:function(e){n(M.changeInventoryCardNature("inventoryNature",e.target.value)),6===e.target.value?(n(M.changeInventoryCardNature("inventoryAcId",nt)),n(M.changeInventoryCardNature("inventoryAcName",at))):(n(M.changeInventoryCardNature("inventoryAcId",et)),n(M.changeInventoryCardNature("inventoryAcName",tt)))},value:Re},g.default.createElement(f.default,{key:"a",value:5},"库存商品"),g.default.createElement(f.default,{key:"b",value:6},"原材料"))))),g.default.createElement("div",{className:"jxc-config-card-modal-row",style:{marginTop:"10px"}},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"所属分类："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},_e.map(function(e,t){return g.default.createElement("label",{key:t},g.default.createElement(d.default,{checked:e.get("checked"),onChange:function(t){return n(M.changeInventoryCardCategoryStatus(e,t.target.checked))}}),g.default.createElement("span",null,e.get("name")))})))),g.default.createElement("div",{className:"category-box"},_e.map(function(e,t){return e.get("checked")?g.default.createElement("div",{className:"jxc-config-card-modal-row select-row-with-two",key:e.get("name")},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},e.get("name"),"类别："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(_.UpperClassSelect,{className:"jxc-config-modal-select",placeholder:"",treeData:e.get("tree")?e.get("tree"):[],treeDefaultExpandAll:!0,isLastSelect:!0,disabledParent:!0,value:e.get("selectUuid")?[e.get("selectName")]:[""],onSelect:function(t){n(M.changeInventoryCardCategoryType(e,t))}})))):null})),g.default.createElement("div",{className:"jxc-config-card-modal-row",style:ve?{display:"none"}:{clear:"both"}},g.default.createElement("div",{className:"jxc-config-card-modal-item"},g.default.createElement("label",{className:"jxc-config-card-modal-label"},"备注："),g.default.createElement("div",{className:"jxc-config-card-modal-input"},g.default.createElement(_.XfInput,{placeholder:v.default.remark,value:We,onChange:function(e){return n(M.changeInventoryCardContent("remark",e.target.value))}})))),ve&&$||!ve?g.default.createElement("div",{className:"jxc-config-title",style:{marginBottom:0,paddingBottom:"10px"}},"财务信息"):"",g.default.createElement("div",{className:"flex-row",style:{lineHeight:"28px"}},ae&&$?g.default.createElement("div",{className:"flex-row-item"},$?g.default.createElement("div",null,g.default.createElement(d.default,{style:{marginRight:"6px"},checked:Le,onChange:function(e){n(M.changeInventoryCardContent("isOpenedQuantity",!Le)),Le?(n(M.changeInventoryCardContent("warehousePriceMode","T")),n(M.changeInventoryCardContent(["financialInfo","openAssist"],!1)),n(M.changeInventoryCardContent(["financialInfo","openBatch"],!1)),n(M.changeInventoryCardContent(["financialInfo","openSerial"],!1))):(n(M.changeInventoryCardContent("warehousePriceMode","U")),n(M.getUnitCardList()))}}),"启用数量核算"):"",Le&&ne?g.default.createElement("div",null,g.default.createElement(d.default,{style:{marginRight:"6px"},checked:Ue,onChange:function(e){n(M.changeInventoryCardContent(["financialInfo","openSerial"],!Ue)),Ue||n(M.emptyWarehouseListQuantity())}}),"启用序列号管理"):"",g.default.createElement("div",{style:{visibility:"hidden"}},g.default.createElement(d.default,{style:{marginRight:"6px"},checked:Ue,onChange:function(e){n(M.changeInventoryCardContent(["financialInfo","openSerial"],!Ue))}}),"允许负库存")):"",Le?g.default.createElement("div",{className:"flex-row-item"},g.default.createElement("label",{className:"flex-row-label"},"计量单位："),g.default.createElement("div",{className:"flex-row-input"},g.default.createElement(S.default,{Type:"select",dispatch:n,disabled:"modify"===Se&&Ye.get("name"),selectListOne:re,selectListTwo:ie,onChange:function(e,t){var a=e.uuid,r=e.name,i=e.isStandard,o=e.unitList,l=e.unitQuantity,u=e.basicUnitUuid;o="undefined"!=o&&o?JSON.parse(o):[];var c=t.props,s=c.isCustom,d=c.basicStandardUnitQuantityList,f=c.basicStandardUnitUuidList;s&&f.length&&(u=f[0],l=d[0],f.length>=2&&f.slice(1).forEach(function(e,t){o[t].basicUnitUuid=e,o[t].unitQuantity=d[t+1],e===f[0]&&(o[t].disabled=!0)})),n(M.changeInventoryCardContent("unit",(0,y.fromJS)({uuid:a,name:r,isStandard:i,unitList:o,unitQuantity:l,basicUnitUuid:u})))},onSwitch:function(){n(M.initUnitState())},name:(Ge.get("name")||"")+(Fe.size?"("+Ge.get("name")+Fe.toJS().reduce(function(e,t){return e+":"+(t.name||"")},""):"")+(Fe.size?Fe.toJS().reduce(function(e,t){return e+":"+(t.basicUnitQuantity||"")},"=1")+")":"")}),g.default.createElement(u.default,{className:"ant-btn-primary",style:{width:"55px",marginLeft:"10px",lineHeight:"28px"},onClick:function(){e.setState({showAddModal:!0});var t=Ge.toJS();t.basicStandardUnitQuantity&&(t.unitQuantity=t.basicStandardUnitQuantity,t.basicUnitUuid=t.basicStandardUnitUuid),t.unitList&&t.unitList.length&&t.unitList.forEach(function(e,n){t.unitList[n].unitQuantity=e.basicStandardUnitQuantity,t.unitList[n].basicUnitUuid=e.basicStandardUnitUuid,e.basicStandardUnitUuid===t.basicStandardUnitUuid&&(t.unitList[n].disabled=!0)}),n(M.changeInventoryCardContent("unit",(0,y.fromJS)(t)))}},"modify"===Se&&Ye.get("name")?"修改":"多单位"))):""),m&&ae?g.default.createElement("div",{className:"flex-row"},g.default.createElement("div",{className:"flex-row-item"},g.default.createElement(d.default,{style:{marginRight:"6px"},checked:!0,onClick:function(){s.default.info("账套已启用仓库核算")}}),"启用仓库核算"),m&&Le?g.default.createElement("div",{className:"flex-row-item"},g.default.createElement("label",{className:"flex-row-label"},"单价模式"),g.default.createElement("div",{className:"flex-row-input-nomal"},g.default.createElement(p.default,{onChange:function(e){n(M.changeInventoryCardContent("warehousePriceMode",e))},value:Ae},g.default.createElement(J,{key:"1",value:"U"},"按全部仓库统一单价"),g.default.createElement(J,{key:"2",value:"T"},"按一级仓库不同单价"),g.default.createElement(J,{key:"3",value:"E"},"按不同仓库不同单价")))):""):"",g.default.createElement("div",{className:"flex-row"},Le&&ae&&ee?g.default.createElement("div",{className:"flex-row-item"},g.default.createElement(d.default,{style:{marginRight:"6px"},checked:we,onChange:function(e){n(M.changeInventoryCardContent(["financialInfo","openAssist"],!we))}}),"启用辅助属性 ",we?g.default.createElement("span",{className:"assist-update",onClick:function(){n(M.getAssistList("",function(){e.setState({assistModal:!0})}))}},"编辑属性"):""):"",we&&Le?g.default.createElement("div",{className:"flex-row-item"},g.default.createElement("label",{className:"flex-row-label"},"单价模式"),g.default.createElement("div",{className:"flex-row-input-nomal"},g.default.createElement(p.default,{onChange:function(e){!0!==e[e.length-1]?n(M.chooseAssitUniform(e.filter(function(e){return!0!==e}),!1)):n(M.chooseAssitUniform(Je.map(function(e){return e.get("uuid")}),!0))},value:He?[!0]:Je.filter(function(e){return!e.get("isUniform")}).map(function(e){return e.get("uuid")}).toJS(),mode:"multiple"},g.default.createElement(J,{key:"1",value:!0},"按全部属性统一单价"),g.default.createElement(x,{label:"按不同属性不同单价"},Je.map(function(e){return g.default.createElement(J,{key:e.get("uuid"),value:e.get("uuid")},"不同",e.get("name"),"不同单价")}))))):""),we&&Le?g.default.createElement("div",{className:"assist-content"},Je.size?Je.map(function(e){return g.default.createElement("div",{className:"assist-item"},g.default.createElement("span",null,e.get("name"),"："),e.get("propertyList").map(function(e){return g.default.createElement(l.default,{key:e.get("uuid")},e.get("name"))}))}):g.default.createElement("div",{className:"assist-item img-kongtaitu"},g.default.createElement("div",{className:""}),g.default.createElement("div",null,"暂无属性分类，请点击“编辑属性”新增分类"))):"",g.default.createElement("div",{className:"flex-row"},Le&&ae&&te?g.default.createElement("div",{className:"flex-row-item"},g.default.createElement("div",null,g.default.createElement(d.default,{style:{marginRight:"6px"},checked:Me,onChange:function(e){n(M.changeInventoryCardContent(["financialInfo","openBatch"],!Me)),Me&&n(M.changeInventoryCardContent(["financialInfo","openShelfLife"],!1))}}),"启用批次管理"),Me?g.default.createElement("div",null,g.default.createElement(d.default,{style:{marginRight:"6px"},checked:De,onChange:function(e){je.size?s.default.info("请删除原有批次"):n(M.changeInventoryCardContent(["financialInfo","openShelfLife"],!De))}}),"启用保质期管理"):g.default.createElement("div",null),De?g.default.createElement("div",null,g.default.createElement(_.XfInput,{tipTit:"保质期",mode:"integer",style:{width:"107px"},placeholder:"请输入保质期天数",value:ke,onChange:function(e){var t=e.target.value;n(M.changeInventoryCardContent(["financialInfo","shelfLife"],t))},disabled:Ze})):g.default.createElement("div",null)):"",Me&&Le?g.default.createElement("div",{className:"flex-row-item"},g.default.createElement("label",{className:"flex-row-label"},"单价模式"),g.default.createElement("div",{className:"flex-row-input-nomal"},g.default.createElement(p.default,{onChange:function(e){n(M.changeInventoryCardContent(["financialInfo","isBatchUniform"],e))},value:xe},g.default.createElement(J,{key:"1",value:!0},"按全部批次统一单价"),g.default.createElement(J,{key:"2",value:!1},"按不同批次不同单价")))):""),g.default.createElement("div",{className:"flex-row",style:ve&&!Fe.size||m&&!Le?{display:"none"}:{}},m||Me||we||Ue?"":g.default.createElement("div",{className:"flex-row-item"},g.default.createElement("label",{className:"flex-row-label"},"期初余额："),g.default.createElement("div",{className:"flex-row-input"},m?g.default.createElement(_.XfInput,U({disabled:F,mode:"number",negativeAllowed:!0,style:{width:"250px"},placeholder:(Le&&"U"===Ae?"必填":"选填")+"，请输入金额",value:Ke,onChange:function(e){var t=e.target.value;n(M.changeInventoryCardContent("opened",t))}},"disabled",Ze)):g.default.createElement(_.XfInput,U({disabled:F,negativeAllowed:!0,mode:"amount",style:{width:"250px"},placeholder:"选填，请输入金额",value:Ke,onChange:function(e){var t=e.target.value;n(M.changeInventoryCardContent("opened",t))}},"disabled",Ze)))),!Le||m||Me||we||Ue?"":g.default.createElement("div",{className:"flex-row-item"},g.default.createElement("label",{className:"flex-row-label"},"期初数量："),g.default.createElement("div",{className:"flex-row-input"},g.default.createElement(_.XfInput,{mode:"number",tipTit:"数量",negativeAllowed:!0,placeholder:"选填，请输入数量",value:Be,onChange:function(e){var t=e.target.value;n(M.changeInventoryCardContent("openedQuantity",t))},disabled:Ze}),g.default.createElement("span",{style:{marginLeft:"10px"}},Ge.get("name"))))),m||Me||we||Ue?g.default.createElement("div",{style:{display:"flex",marginTop:"10px"}},m?g.default.createElement(b.default,{dispatch:n,warehousePriceMode:Ae,isOpenedQuantity:Le,enableWarehouse:m,treeList:ze,unit:Ge,isCheckOut:Ze,assistClassificationList:Je,batchList:je,uuid:Oe,financialInfo:Pe,showWarehouseModal:function(){return e.setState({showWarehouseModal:!0})}}):g.default.createElement(O.default,{dispatch:n,warehousePriceMode:Ae,isOpenedQuantity:Le,enableWarehouse:m,treeList:ze,unit:Ge,isCheckOut:Ze,assistClassificationList:Je,batchList:je,uuid:Oe,financialInfo:Pe,insertOrModify:Se,showWarehouseModal:function(){return e.setState({showWarehouseModal:!0})}})):"",Le?g.default.createElement("div",null,g.default.createElement("div",{className:"flex-row"},Ve.map(function(e,t){return 1===e.get("type")?g.default.createElement("div",{className:"flex-row-item"},g.default.createElement("label",{className:"flex-row-label"},{1:"默认采购价：",2:"默认销售价："}[e.get("type")]),g.default.createElement("div",{className:"flex-row-input",style:{display:"flex"}},g.default.createElement(_.XfInput,{mode:"number",style:{width:"140px"},placeholder:"选填，请输入金额",value:e.get("defaultPrice"),onChange:function(e){var a=e.target.value;n(M.changeInventoryCardContent(["unitPriceList",t,"defaultPrice"],a))}}),Fe.size?g.default.createElement("div",null,g.default.createElement("span",{style:{margin:"0 4px 0 2px"}},"元/"),g.default.createElement(p.default,{style:{width:"78px"},onChange:function(e){var a=e.split(h.TREE_JOIN_STR),r=a[0],i=a[1];a[2];n(M.changeInventoryCardContent(["unitPriceList",t,"unitUuid"],r)),n(M.changeInventoryCardContent(["unitPriceList",t,"name"],i))},value:e.get("name")},g.default.createElement(J,{key:Ge.get("uuid"),value:""+Ge.get("uuid")+h.TREE_JOIN_STR+Ge.get("name")+h.TREE_JOIN_STR+Ge.get("isStandard")},Ge.get("name")),Fe.map(function(e){return g.default.createElement(J,{key:e.get("uuid"),value:""+e.get("uuid")+h.TREE_JOIN_STR+e.get("name")+h.TREE_JOIN_STR+e.get("isStandard")},e.get("name"))}))):Ge.get("name")?g.default.createElement("span",{style:{marginLeft:"5px"}},"元/"+Ge.get("name")):"",Fe.size?g.default.createElement("div",{className:"pre-content"},g.default.createElement(_.XfnIcon,{type:"bigPlus",style:1===Ve.filter(function(t){return t.get("type")===e.get("type")}).size?{lineHeight:"28px",fontSize:"15px"}:{},onClick:function(){n(M.addUnitPrice(Ve,t,e.get("type")))}}),Ve.filter(function(t){return t.get("type")===e.get("type")}).size>1?g.default.createElement(_.XfnIcon,{type:"bigDel",onClick:function(){n(M.deleteunitPrice(Ve,t))}}):""):"")):""})),g.default.createElement("div",{className:"flex-row"},Ve.map(function(e,t){return 2===e.get("type")?g.default.createElement("div",{className:"flex-row-item"},g.default.createElement("label",{className:"flex-row-label"},{1:"默认采购价：",2:"默认销售价："}[e.get("type")]),g.default.createElement("div",{className:"flex-row-input",style:{display:"flex"}},g.default.createElement(_.XfInput,{mode:"number",tipTit:"数量",style:{width:"140px"},placeholder:"选填，请输入金额",value:e.get("defaultPrice"),onChange:function(e){var a=e.target.value;n(M.changeInventoryCardContent(["unitPriceList",t,"defaultPrice"],a))}}),Fe.size?g.default.createElement("div",null,g.default.createElement("span",{style:{margin:"0 4px 0 2px"}},"元/"),g.default.createElement(p.default,{style:{width:"78px"},onChange:function(e){var a=e.split(h.TREE_JOIN_STR),r=a[0],i=a[1];a[2];n(M.changeInventoryCardContent(["unitPriceList",t,"unitUuid"],r)),n(M.changeInventoryCardContent(["unitPriceList",t,"name"],i))},value:e.get("name")},g.default.createElement(J,{key:Ge.get("uuid"),value:""+Ge.get("uuid")+h.TREE_JOIN_STR+Ge.get("name")+h.TREE_JOIN_STR+Ge.get("isStandard")},Ge.get("name")),Fe.map(function(e){return g.default.createElement(J,{key:e.get("uuid"),value:""+e.get("uuid")+h.TREE_JOIN_STR+e.get("name")+h.TREE_JOIN_STR+e.get("isStandard")},e.get("name"))}))):Ge.get("name")?g.default.createElement("span",{style:{marginLeft:"5px"}},"元/"+Ge.get("name")):"",Fe.size?g.default.createElement("div",{className:"pre-content"},g.default.createElement(_.XfnIcon,{type:"bigPlus",style:1===Ve.filter(function(t){return t.get("type")===e.get("type")}).size?{lineHeight:"28px",fontSize:"15px"}:{},onClick:function(){n(M.addUnitPrice(Ve,t,e.get("type")))}}),Ve.filter(function(t){return t.get("type")===e.get("type")}).size>1?g.default.createElement(_.XfnIcon,{type:"bigDel",onClick:function(){n(M.deleteunitPrice(Ve,t))}}):""):"")):""}))):"",g.default.createElement("div",{className:"modalBomb",style:{display:K?"":"none"}}))),W?g.default.createElement(N.default,{dispatch:n,inventoryCardState:r,enableWarehouse:m,showAddModal:W,insertOrModify:"modify"===Se&&Ye.get("name")?"modify":"insert",closeAddModal:function(){return e.setState({showAddModal:!1})}}):"",g.default.createElement(I.default,{treeList:se,inventoryCardState:r,showWarehouseModal:z,onClose:function(){return e.setState({showWarehouseModal:!1})},dispatch:n,selectedKeys:de}),g.default.createElement(A.default,{MemberList:pe,thingsList:me,dispatch:n,showModal:ge,selectList:ye,selectItem:Ce,materialSelectedKeys:fe,materialList:$e,code:Ie}),X?g.default.createElement(R.default,{onClose:function(){return e.setState({assistModal:!1})},dispatch:n,assistModal:X,uuid:Ne.get("uuid"),allAssistClassificationList:Ee,assistClassificationList:Je}):"",g.default.createElement(o.default,{visible:Z,title:"关闭数量核算",onOk:function(){n(M.saveInventoryCard(Y,"modify",B,rt,it,ve)),e.setState({showCheckModal:!1})},onCancel:function(){return e.setState({showCheckModal:!1})}},g.default.createElement("span",null,"关闭数量核算，不可使用组装功能，组装单设置内容将被置空")),g.default.createElement(P.default,{visible:he,onClose:function(){n(M.changeInventoryCardViews("batchModal",!1))},onOk:function(t,a,r,i){if("insert"===Se){var o=je.findIndex(function(t){return t.get("batch")===e.state.batch});n(M.changeInventoryCardContent(["financialInfo","batchList",o,"batch"],t)),n(M.changeInventoryCardContent(["financialInfo","batchList",o,"productionDate"],De?r:"")),n(M.changeInventoryCardViews("batchModal",!1))}else n(M.modifyBatch(t,a,De?r:"",i,Oe,function(){n(M.changeInventoryCardViews("batchModal",!1))}))},onOkAndNew:function(t,a,r,i){if("insert"===Se){var o=je.findIndex(function(t){return t.get("batch")===e.state.batch});n(M.changeInventoryCardContent(["financialInfo","batchList",o,"batch"],t)),n(M.changeInventoryCardContent(["financialInfo","batchList",o,"productionDate"],De?r:"")),e.setState({modifyBatch:"",modifyBatchDate:(new E.DateLib).toString(),modifyBatchUuid:"",batch:""})}else n(M.modifyBatch(t,a,De?r:"",i,Oe,function(){e.setState({modifyBatch:"",modifyBatchDate:(new E.DateLib).toString(),modifyBatchUuid:"",batch:""})}))},batchList:je,openShelfLife:De,shelfLife:ke,insertOrModify:Se}),le?g.default.createElement(L.default,{fromPage:"inventory",visible:le,serialList:ce,onClose:function(){return n(M.changeInventoryCardViews("serialModal",!1))},onOk:function(e){n(M.changeInventoryCardContent([].concat(j(ue),["serialList"]),(0,y.fromJS)(e))),n(M.changeInventoryCardContent([].concat(j(ue),["isModify"]),!0)),n(M.changeInventoryCardContent([].concat(j(ue),["openedQuantity"]),e.length))}}):"")}}]),t}(),r.displayName="InventoryConfAddCardModal",a=i))||a);t.default=G},1376:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=c(n(14)),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78);var i=c(n(1));c(n(0)),n(18),n(56);n(1240);u(n(27));var o=n(22),l=n(127);c(n(487)),u(n(1241)),c(n(1237));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.showChild,r=(e.hideChildList,e.warehousePriceMode,e.isOpenedQuantity),u=(e.enableWarehouse,e.unit),c=e.hideChildFunc,s=e.showChildFunc,d=e.line,f=e.level,p=(e.isCheckOut,e.dispatch,e.index,e.openAssist),m=e.openBatch,g=0,y=0;!function e(t){return t.map(function(t){t.get("childList")&&t.get("childList").size&&!t.get("isEnd")?e(t.get("childList")):p||m?(g+=t.get("childList").reduce(function(e,t){return e+(Number(t.get("openedAmount"))||0)},0),y+=t.get("childList").reduce(function(e,t){return e+(Number(t.get("openedQuantity"))||0)},0)):(g+=Number(t.get("openedAmount"))||0,y+=Number(t.get("openedQuantity"))||0)})}(t.get("childList"));var C=5+7*(f-1)+"px";return i.default.createElement(l.TableItem,{key:t.get("warehouseUuid"),line:d},i.default.createElement("li",{className:"inventory-code",style:{paddingLeft:C}},t.get("warehouseCode")),i.default.createElement("li",{className:"inventory-name"},i.default.createElement("span",null,t.get("warehouseName")),i.default.createElement(a.default,{type:n?"up":"down",onClick:function(){n?c():s()}})),r?i.default.createElement("li",{className:"force-centet"},i.default.createElement("span",{className:"input-quantity"},(0,o.formatFour)(y)),i.default.createElement("span",null,u.get("name"))):"",i.default.createElement("li",{className:"force-centet"},i.default.createElement("span",{className:"input-amount"},(0,o.formatMoney)(g)),i.default.createElement("span",null,"元")))}}]),t}();t.default=s},1397:function(e,t,n){},1403:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adjustAllRelativeCardList=t.afterEditRelativeConf=t.deleteRelativeCardList=t.saveRelativeCard=t.changeRelativeCardCategoryType=t.changeRelativeCardCategoryStatus=t.changeRelativeViewsContent=t.changeRelativeCardContent=t.beforeRelativeEditCard=t.beforeRelativeAddCard=void 0;var a=m(n(37));n(38);var r=p(n(1344)),i=m(n(52)),o=n(22),l=n(18),u=p(n(30)),c=p(n(27)),s=p(n(484)),d=p(n(172)),f=p(n(1229));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}t.beforeRelativeAddCard=function(e,t){return function(n,a){n({type:r.SWITCH_LOADING_MASK}),(0,i.default)("getIUManageCardLimitAndAc","GET","",function(a){if((0,o.showMessage)(a)){var l=void 0;(0,i.default)("getInitRelaCard","GET","",function(e){(0,o.showMessage)(e)&&(l=e.data.code,n({type:r.BEFORE_ADD_RELATIVE_CARD,data:a.data,originTags:t,code:l}))})}e(),n({type:r.SWITCH_LOADING_MASK})})}},t.beforeRelativeEditCard=function(e,t,n){return function(a){a({type:r.SWITCH_LOADING_MASK}),(0,i.default)("getIUManageOneCardInfo","GET","uuid="+e.get("uuid"),function(e){a({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(e)&&(a({type:r.BEFORE_EDIT_RELATIVE_CARD,data:e.data,originTags:n}),t())})}},t.changeRelativeCardContent=function(e,t){return function(n){n({type:r.CHANGE_RELATIVE_CARD_CONTENT,name:e,value:t})}},t.changeRelativeViewsContent=function(e,t){return function(n){n({type:r.CHANGE_RELATIVE_VIEWS_CONTENT,name:e,value:t})}},t.changeRelativeCardCategoryStatus=function(e,t){return function(n){(0,i.default)("getIUManageTreeByType","GET","ctgyUuid="+e.get("uuid"),function(a){(0,o.showMessage)(a)&&n({type:r.CHANGE_RELATIVE_CARD_CATEGORY_STATUS,list:a.data.resultList,item:e,value:t})})}},t.changeRelativeCardCategoryType=function(e,t){return function(n){var a=t.split(c.TREE_JOIN_STR);n({type:r.CHANGE_RELATIVE_CARD_CATEGORY_TYPE,item:e,uuid:a[0],name:a[1]})}},t.saveRelativeCard=function(e,t,n,a,c){return function(s,f){var p=f().homeState.get("allPanes"),m=f().relativeCardState.get("relativeCardTemp").toJS(),y=f().relativeCardState.getIn(["views","insertOrModify"]),C=f().relativeCardState.getIn(["views","range"]),h="",E="";p.get("ConfigPanes").find(function(e){return"往来设置"===e.get("title")})&&(h=f().relativeConfState.getIn(["views","activeTapKeyUuid"]),E=f().relativeConfState.getIn(["views","selectTypeId"]));var v=function(){if("insert"===y){(0,i.default)("saveIUManageCard","POST",JSON.stringify({psiData:m,insertFrom:h,treeFrom:E,needAutoIncrementCode:"insert"!==t,action:{editRunning:"SAVE_JR-QUICK_MANAGER-SAVE_CONTACT",relativeConfig:"MANAGER-CONTACT_SETTING-CUD_CONTACT_CARD",searchApproval:"QUERY_PROCESS-QUICK_MANAGER-SAVE_CONTACT"}[e]}),function(a){if((0,o.showMessage)(a,"show")&&(s({type:r.SAVE_RELATIVE_CARD,list:a.data.resultList,flag:t,autoIncrementCode:a.data.autoIncrementCode}),n&&n(),s(g(e)),"editRunning"===e&&C.some(function(e){return m.categoryTypeList.some(function(t){return t.ctgyUuid===e})}))){var i=a.data.resultList.find(function(e){return e.code===m.code});if(i){var u=i.uuid;s(d.changeLrAccountCommonString("ori","currentCardList",(0,l.fromJS)([{code:m.code,name:m.name,cardUuid:u}])))}}s({type:r.SWITCH_LOADING_MASK})})}else(0,i.default)("editIUManageCard","POST",JSON.stringify({psiData:m,modifyFrom:h,treeFrom:E}),function(a){if((0,o.showMessage)(a,"show")&&(s({type:r.SAVE_RELATIVE_CARD,list:a.data.resultList,flag:t,autoIncrementCode:a.data.autoIncrementCode}),n(),s(g()),"editRunning"===e&&C.some(function(e){return m.categoryTypeList.some(function(t){return t.ctgyUuid===e})}))){var i=a.data.resultList.find(function(e){return e.code===m.code});if(i){var u=i.uuid;s(d.changeLrAccountCommonString("ori","currentCardList",(0,l.fromJS)([{code:m.code,name:m.name,cardUuid:u}])))}}s({type:r.SWITCH_LOADING_MASK})})};s({type:r.SWITCH_LOADING_MASK}),(0,i.default)("adjustIUmanageCardTitleSame","POST",JSON.stringify({psiData:{name:m.name,uuid:m.uuid}}),function(e){(0,o.showMessage)(e)?e.data.repeat?(a(),s({type:r.SWITCH_LOADING_MASK}),u.Confirm({message:"卡片名称与【编码："+e.data.card.code+"】卡片重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(s({type:r.SWITCH_LOADING_MASK}),v(),c()):c()},onFail:function(e){return console.log(e)}})):v():s({type:r.SWITCH_LOADING_MASK})})}},t.deleteRelativeCardList=function(){return function(e,t){var n=t().relativeConfState.getIn(["views","activeTapKeyUuid"]),l=t().relativeConfState.getIn(["views","activeTreeKeyUuid"]),c=t().relativeConfState.getIn(["views","cardSelectList"]);u.Confirm({message:"确定删除卡片？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(e({type:r.SWITCH_LOADING_MASK}),(0,i.default)("deleteIUManageListCard","POST",JSON.stringify({deleteList:c,deleteFrom:n,treeFrom:l}),function(t){(0,o.showMessage)(t)&&(e({type:r.DELETE_RELATIVE_CARD_LIST,list:t.data.resultList,treeList:t.data.typeList}),""===t.data.error?a.default.info("删除成功"):a.default.info(t.data.error),e(g())),e({type:r.SWITCH_LOADING_MASK})}))},onFail:function(e){return console.log(e)}})}};var g=t.afterEditRelativeConf=function(e){return function(t,n){var a=n().homeState,r=a.get("allPanes");if(!0===a.getIn(["data","userInfo","sobInfo","newJr"]))"searchApproval"===e?(t(s.getApprovalRelativeCardList()),r.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&setTimeout(function(){t(s.getRelativeCardListForchangeConfig())},800)):r.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&t(s.getRelativeCardListForchangeConfig());else{var i=n().lrAccountState.get("cardTemp"),o={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"}[i.get("categoryType")],l=i.getIn([o,"contactsRange"]),u=i.get("runningState");l&&l.size&&t(f.getFirstContactsCardList(l,u))}}};t.adjustAllRelativeCardList=function(e){return function(t){e()}}},1404:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEditProjectConf=t.deleteProjectCardList=t.saveProjectCard=t.changeProjectCardCategoryType=t.changeProjectViewsContent=t.changeProjectCardContent=t.beforeEditProjectCard=t.changeProjectPropertyState=t.beforeProjectAddCard=void 0;var a=m(n(37));n(38);var r=p(n(1302)),i=m(n(52)),o=n(22),l=n(18),u=p(n(30)),c=p(n(27)),s=p(n(172)),d=p(n(484)),f=p(n(1317));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}t.beforeProjectAddCard=function(e,t,n,a){return function(t,n){var l="",u=u||n().projectConfState.get("originTags"),c=u.findIndex(function(e){return"损益项目"===e.get("name")});n().projectConfState.getIn(["views","activeKey"]);t({type:r.SWITCH_LOADING_MASK}),(0,i.default)("getDefaultProjectCode","GET","",function(n){(0,o.showMessage)(n)&&(l=n.data.code,(0,i.default)("getProjectTree","GET","uuid="+u.getIn([c,"uuid"]),function(n){(0,o.showMessage)(n)&&(t({type:r.BEFORE_ADD_PROJECT_CARD,data:n.data.resultList,code:l,noFresh:a}),e&&e())}))}),t({type:r.SWITCH_LOADING_MASK})}},t.changeProjectPropertyState=function(e,t){return function(n,a){var l=l||a().projectConfState.get("originTags"),u=l.findIndex(function(e){return e.get("name")===t});n({type:r.SWITCH_LOADING_MASK}),(0,i.default)("getProjectTree","GET","uuid="+l.getIn([u,"uuid"]),function(a){n({type:r.SWITCH_LOADING_MASK}),(0,o.showMessage)(a)&&n({type:r.CHANGE_PROJECT_PROPERTY,data:a.data.resultList,projectProperty:e,projectPropertyName:t})})}},t.beforeEditProjectCard=function(e,t,n){return function(a){a({type:r.SWITCH_LOADING_MASK}),(0,i.default)("getProjectCardOne","GET","uuid="+e.get("uuid"),function(e){(0,o.showMessage)(e)&&(a({type:r.BEFORE_EDIT_PROJECT_CARD,data:e.data,originTags:n}),t(),a({type:r.SWITCH_LOADING_MASK}))})}},t.changeProjectCardContent=function(e,t){return function(n){n({type:r.CHANGE_PROJECT_CARD_CONTENT,name:e,value:t})}},t.changeProjectViewsContent=function(e,t){return function(n){n({type:r.CHANGE_PROJECT_VIEWS_CONTENT,name:e,value:t})}},t.changeProjectCardCategoryType=function(e){return function(t){var n=e.split(c.TREE_JOIN_STR);t({type:r.CHANGE_PROJECT_CARD_CATEGORY_TYPE,uuid:n[0],name:n[1]})}},t.saveProjectCard=function(e,t,n,a,c){return function(d,p){var m,y=p().homeState.get("allPanes"),C=p().projectCardState.get("projectCardTemp").toJS(),h=p().projectCardState.getIn(["views","insertOrModify"]),E=p().projectConfState.getIn(["views","activeTapKey"]),v=p().projectCardState.getIn(["projectCardTemp","projectPropertyName"]),_=p().projectConfState.get("originTags"),S=_.findIndex(function(e){return e.get("name")===v}),T=(_.findIndex(function(e){return e.get("name")===E}),""),N="";y.get("ConfigPanes").find(function(e){return"项目设置"===e.get("title")})&&(T=p().projectConfState.getIn(["views","activeTapKeyUuid"]),N=p().projectConfState.getIn(["views","selectTypeId"])),m=[{ctgyUuid:_.getIn([S,"uuid"]),subordinateUuid:C.selectUuid}],C.categoryTypeList=m;var I=function(){if("insert"===h){(0,i.default)("insertProjectCard","POST",JSON.stringify({psiData:C,insertFrom:T,treeFrom:N,needAutoIncrementCode:"insert"!==t,action:{editRunning:"SAVE_JR-QUICK_MANAGER-SAVE_PROJECT",projectConfig:"MANAGER-PROJECT_SETTING-CUD_CARD",searchApproval:"QUERY_PROCESS-QUICK_MANAGER-SAVE_PROJECT"}[e]}),function(a){if((0,o.showMessage)(a,"show")&&(d(f.refreshProjectList((0,l.fromJS)({name:E,uuid:T}))),d({type:r.NEW_SAVE_PROJECT_CARD,flag:t,code:a.data.autoIncrementCode}),"insert"===t&&n(),d(g(e)),"editRunning"===e)){var i=p().editRunningState.getIn(["oriTemp","newProjectRange"])||(0,l.fromJS)([]),u=[];switch(p().editRunningState.getIn(["oriTemp","categoryType"])||(0,l.fromJS)([])){case"LB_CQZC":u=a.data.resultList.filter(function(e){return"XZ_PRODUCE"!==e.projectProperty});break;default:u=a.data.resultList}var c=u.filter(function(e){return i.some(function(t){return t.get("name")===e.projectPropertyName})}).find(function(e){return e.code===C.code});c&&d(s.changeLrAccountCommonString("ori","projectCardList",(0,l.fromJS)([{code:C.code,name:C.name,cardUuid:c.uuid,projectProperty:c.projectProperty}])))}d({type:r.SWITCH_LOADING_MASK})})}else(0,i.default)("editProjectCard","POST",JSON.stringify({psiData:C,modifyFrom:T,treeFrom:N}),function(e){(0,o.showMessage)(e,"show")&&(d(f.refreshProjectList((0,l.fromJS)({name:E,uuid:T}))),n(),d(g())),d({type:r.SWITCH_LOADING_MASK})})};d({type:r.SWITCH_LOADING_MASK}),(0,i.default)("adjustProjectCardNameSame","POST",JSON.stringify({psiData:{name:C.name,uuid:C.uuid}}),function(e){(0,o.showMessage)(e)?e.data.repeat?(a(),d({type:r.SWITCH_LOADING_MASK}),u.Confirm({message:"卡片名称与【编码："+e.data.card.code+"】卡片重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex?(d({type:r.SWITCH_LOADING_MASK}),I(),c()):c()},onFail:function(e){return console.log(e)}})):I():d({type:r.SWITCH_LOADING_MASK})})}},t.deleteProjectCardList=function(){return function(e,t){var n=t().projectConfState.getIn(["views","activeTapKeyUuid"]),l=t().projectConfState.getIn(["views","activeTreeKeyUuid"]),c=t().projectConfState.getIn(["views","cardSelectList"]);u.Confirm({message:"确定删除卡片？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(t){1===t.buttonIndex&&(e({type:r.SWITCH_LOADING_MASK}),(0,i.default)("deleteProjectCard","POST",JSON.stringify({deleteList:c,deleteFrom:n,treeFrom:l}),function(t){(0,o.showMessage)(t)&&(e({type:r.DELETE_PROJECT_CONF_CARD,list:t.data.resultList,treeList:t.data.typeList}),""===t.data.error?a.default.info("删除成功"):a.default.info(t.data.error),e(g())),e({type:r.SWITCH_LOADING_MASK})}))},onFail:function(e){return console.log(e)}})}};var g=t.afterEditProjectConf=function(e){return function(t,n){var a=n().homeState,r=a.get("allPanes");a.getIn(["data","userInfo","sobInfo","newJr"]);"searchApproval"===e?(t(d.getApprovalProjectCardList()),r.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&setTimeout(function(){t(d.getProjectCardListForchangeConfig())},800)):r.get("EditPanes").find(function(e){return"录入流水"===e.get("title")})&&t(d.getProjectCardListForchangeConfig())}}},1418:function(e,t,n){},1453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=m(n(47)),i=m(n(14)),o=m(n(37)),l=m(n(89)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(78),n(38),n(88);var c=m(n(1)),s=(n(18),n(17));n(1397);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(30));var d=n(22),f=m(n(1326)),p=m(n(1250));function m(e){return e&&e.__esModule?e:{default:e}}var g=l.default.Group,y=(0,s.immutableRenderDecorator)(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={tagModal:!1,tagValue:"无标签",currentIdx:"",preview:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.dispatch,u=t.permission,s=t.closed,m=t.reviewed,y=t.enclosureList,C=t.label,h=t.enCanUse,E=t.checkMoreFj,v=t.getLabelFetch,_=t.deleteUploadImgUrl,S=t.changeTagName,T=t.uploadEnclosureList,N=t.downloadEnclosure,I=t.type,b=t.uploadKeyJson,O=t.getUploadTokenFetch,A=t.id,R=this.state,L=R.tagValue,P=R.currentIdx,w=R.preview,M=R.tagModal,D=R.page,k=y&&y.filter(function(e){return"TRUE"===e.get("imageOrFile")||"application/pdf"===e.get("mimeType")}),j=!1;!u||s||m||(j=!0);var U=!0;!s&&!m||y.size||(U=!1);return c.default.createElement("div",{className:n,style:{display:U&&h?"":"none"}},c.default.createElement("span",{className:"enclosure-wrap-title",style:{display:j&&y.size<9&&(E?"":"none")}},"附件(最多上传九个)"),c.default.createElement("div",{className:"cxls-enclosure-list-wrap"},(y||[]).map(function(t,n){return c.default.createElement("div",{className:"enclosure-item",key:n},c.default.createElement("div",{className:"enclosure-item-icon",onClick:function(){if("TRUE"===t.get("imageOrFile")||"application/pdf"==t.get("mimeType")){var n=0;k.forEach(function(e,a){t.get("enclosurePath")!==e.get("enclosurePath")||(n=a)}),e.setState({preview:!0,page:n})}else o.default.warn("仅图片及PDF格式支持预览")}},c.default.createElement("img",{src:(0,d.showImg)(t.get("imageOrFile"),t.get("fileName"))})),c.default.createElement("div",{className:"enclosure-item-detail"},c.default.createElement("p",{className:"enclosure-item-filename"},t.get("fileName")),c.default.createElement("span",{className:"enclosure-item-tip"},t.get("size")>=1024?(t.get("size")/1024).toFixed(2)+"M":t.get("size")+"kb"),c.default.createElement("a",{className:"enclosure-item-tip",onClick:function(){return N(t.get("signedUrl"),t.get("fileName"))},href:"javascript:void(0);",style:{display:u?"":"none"}},c.default.createElement(i.default,{type:"download"})),c.default.createElement("span",{className:"enclosure-tag",style:{display:j?"":"none"},onClick:function(){e.setState({currentIdx:n,tagValue:t.get("label"),tagModal:!0}),v()}},"无标签"===t.get("label")?"添加标签":t.get("label"))),c.default.createElement("div",{className:"icon-close",style:{display:j?"":"none"},onClick:function(){_(n)}},c.default.createElement(i.default,{type:"close"})))}),c.default.createElement(f.default,{style:{display:j&&y.size<9&&E?"":"none"},dispatch:a,enclosureList:y,uploadEnclosureList:T,uploadKeyJson:b,getUploadTokenFetch:O,id:A,formPage:"searchRunning"})),c.default.createElement(r.default,{title:"添加标签",visible:M,onOk:function(){S(P,L),e.setState({tagModal:!1})},onCancel:function(){return e.setState({tagModal:!1})}},c.default.createElement(g,{onChange:function(t){return e.setState({tagValue:t.target.value})},value:L},C.map(function(e,t){return c.default.createElement(l.default,{className:"enclosure-radio",key:t,value:e},"无标签"===e?"取消标签":e)}))),c.default.createElement(p.default,{page:D,dispatch:a,preview:w,downloadPermission:u,previewImgArr:k,downloadEnclosure:N,closePreviewModal:function(){return e.setState({preview:!1})},type:I,uploadKeyJson:b}))}}]),t}())||a;t.default=y},1460:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=_(n(47)),l=_(n(100)),u=_(n(32)),c=_(n(14)),s=_(n(37)),d=_(n(129)),f=_(n(45)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(99),n(51),n(78),n(38),n(128),n(55);var m=_(n(1)),g=(_(n(0)),n(18)),y=n(56);n(1240);var C=n(22),h=_(n(1244)),E=n(127),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1403));function _(e){return e&&e.__esModule?e:{default:e}}f.default.Option,d.default.Group;var S=(0,y.connect)(function(e){return e})((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={confirmModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),p(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.relativeCardState!==e.relativeCardState||this.props.showModal!==e.showModal||this.props.homeState!==e.homeState||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.showModal,r=t.closeModal,i=t.relativeCardState,f=t.homeState,p=t.fromPage,y=t.cardList,_=void 0===y?(0,g.fromJS)([]):y,S=t.originTags,T=this.state.confirmModal,N=f.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]),I=i.get("tags").filter(function(e){return"全部"!==e.get("name")}),b=i.get("relativeCardTemp"),O=i.getIn(["views","insertOrModify"]),A="relativeConfig"!==p;A&&(N=f.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]));var R="insert"===O?"新增往来单位":"修改往来单位",L=b.get("code"),P=b.get("name"),w=b.get("isPayUnit"),M=b.get("isReceiveUnit"),D=b.get("companyAddress"),k=b.get("companyTel"),j=b.get("financeName"),U=b.get("financeTel"),J=b.get("remark"),x=b.get("receivableOpened"),H=b.get("advanceOpened"),G=b.get("payableOpened"),Y=b.get("prepaidOpened"),F=b.get("categoryTypeList"),B=(b.get("enablePrepaidAc"),b.get("enableAdvanceAc"),b.get("contacterInfo")),V=b.get("isCheckOut"),K=function(t,a){var r=[{type:"stockName",value:P},{type:"code",value:L},{type:"remark",value:J},{type:"companyAddress",value:D},{type:"financeName",value:j}];C.jxcConfigCheck.beforeSaveCheck(r,function(){return function(){if(w||M){var r=0;if(I.map(function(e,t){e.get("checked")&&r++}),0!==r)if(F.size>0){var i=!0;F.map(function(e,t){void 0!==e.get("subordinateUuid")&&""!==e.get("subordinateUuid")||(i=!1)}),i?n(v.saveRelativeCard(p,t,a,function(){return e.setState({confirmModal:!0})},function(){return e.setState({confirmModal:!1})})):s.default.info("请选择所属分类子级类别")}else s.default.info("请选择所属分类子级类别");else s.default.info("所属分类必选一项")}else s.default.info("往来关系必选一项")}()})},W=void 0,z=void 0,Q=void 0;return"modify"===O&&_.size&&(Q=_.findIndex(function(e){return e.get("code")===L}),W=Q-1,z=Q+1),m.default.createElement(o.default,{width:"820px",visible:a,maskClosable:!1,title:R,onCancel:function(){return r()},footer:[m.default.createElement(u.default,{style:{float:"left",display:"insert"==O?"none":""},disabled:0===_.findIndex(function(e){return e.get("code")===L}),onClick:function(){n(v.beforeRelativeEditCard(_.get(W),function(){},S))}},m.default.createElement(c.default,{type:"caret-left"})),m.default.createElement(u.default,{style:{float:"left",display:"insert"==O?"none":""},disabled:_.findIndex(function(e){return e.get("code")===L})===_.size-1||!_.size,onClick:function(){n(v.beforeRelativeEditCard(_.get(z),function(){},S))}},m.default.createElement(c.default,{type:"caret-right"})),m.default.createElement(u.default,{key:"cancel",type:"ghost",onClick:function(){return r()}},"取 消"),m.default.createElement(u.default,{key:"ok",type:A?"primary":"modify"==O?"primary":"ghost",disabled:!N,onClick:function(){K("insert",r)}},"保 存"),m.default.createElement(u.default,{key:"addAndNew",type:"primary",disabled:!N,style:A?{display:"none"}:{display:"insert"==O?"inline-block":"none"},onClick:function(){K("insertAndNew")}},"保存并新增")]},m.default.createElement("div",{className:"jxc-config-card-modal-wrap"},m.default.createElement("div",{className:"jxc-config-card-modal-row"},m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},"编码："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},m.default.createElement(l.default,{placeholder:h.default.cardCode,value:L,onChange:function(e){return C.jxcConfigCheck.inputCheck("cardCode",e.target.value,function(){return n(v.changeRelativeCardContent("code",e.target.value))})},onFocus:function(e){return e.target.select()}}))),m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},"名称："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},m.default.createElement(l.default,{placeholder:h.default.name,value:P,onChange:function(e){return n(v.changeRelativeCardContent("name",e.target.value))},onFocus:function(e){return e.target.select()}})))),m.default.createElement("div",{className:"jxc-config-card-modal-row"},m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},"所属分类："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},I.map(function(e,t){return m.default.createElement("label",{key:t,className:"checkbox-box"},m.default.createElement(d.default,{checked:e.get("checked"),onChange:function(t){return n(v.changeRelativeCardCategoryStatus(e,t.target.checked))}}),m.default.createElement("span",null,e.get("name")))})))),m.default.createElement("div",{className:"category-box"},I.map(function(e,t){return e.get("checked")?m.default.createElement("div",{className:"jxc-config-card-modal-row select-row-with-two",key:t},m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},e.get("name"),"类别："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},m.default.createElement(E.UpperClassSelect,{className:"jxc-config-modal-select",placeholder:"",treeData:e.get("tree")?e.get("tree"):[],treeDefaultExpandAll:!0,isLastSelect:!0,disabledParent:!0,value:e.get("selectUuid")?[e.get("selectName")]:[""],onSelect:function(t){n(v.changeRelativeCardCategoryType(e,t))}})))):null})),m.default.createElement("div",{className:"jxc-config-card-modal-row",style:{clear:"both"}},m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},"备注："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},m.default.createElement(l.default,{placeholder:h.default.remark,value:J,onChange:function(e){return n(v.changeRelativeCardContent("remark",e.target.value))},onFocus:function(e){return e.target.select()}})))),m.default.createElement("div",{className:"jxc-config-title",style:{display:w||M?"":"none"}},"财务信息"),m.default.createElement("div",{className:"jxc-config-card-modal-row",style:{display:M?"":"none"}},m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},"应收期初值："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},m.default.createElement(E.NumberInput,{type:"amount",placeholder:"(选填)",value:x,onChange:function(e){return n(v.changeRelativeCardContent("receivableOpened",e))},onFocus:function(e){return e.target.select()},disabled:V}))),m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},"预收期初值："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},m.default.createElement(E.NumberInput,{type:"amount",placeholder:"(选填)",value:H,onChange:function(e){return n(v.changeRelativeCardContent("advanceOpened",e))},onFocus:function(e){return e.target.select()},disabled:V})))),m.default.createElement("div",{className:"jxc-config-card-modal-row",style:{display:w?"":"none"}},m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},"应付期初值："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},m.default.createElement(E.NumberInput,{type:"amount",placeholder:"(选填)",value:G,onChange:function(e){return n(v.changeRelativeCardContent("payableOpened",e))},onFocus:function(e){return e.target.select()},disabled:V}))),m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},"预付期初值："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},m.default.createElement(E.NumberInput,{type:"amount",placeholder:"(选填)",value:Y,onChange:function(e){return n(v.changeRelativeCardContent("prepaidOpened",e))},onFocus:function(e){return e.target.select()},disabled:V})))),m.default.createElement("div",{className:"jxc-config-title"},m.default.createElement("label",null,m.default.createElement(d.default,{checked:B,onChange:function(e){return n(v.changeRelativeCardContent("contacterInfo",e.target.checked))}}),"  联系信息")),B?m.default.createElement("div",null,m.default.createElement("div",{className:"jxc-config-card-modal-row"},m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},"单位地址："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},m.default.createElement(l.default,{placeholder:h.default.companyAddress,value:D,onChange:function(e){return n(v.changeRelativeCardContent("companyAddress",e.target.value))},onFocus:function(e){return e.target.select()}}))),m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},"单位电话："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},m.default.createElement(l.default,{placeholder:"(选填)",value:k,onChange:function(e){return C.jxcConfigCheck.inputCheck("tel",e.target.value,function(){return n(v.changeRelativeCardContent("companyTel",e.target.value))})},onFocus:function(e){return e.target.select()}})))),m.default.createElement("div",{className:"jxc-config-card-modal-row"},m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},"财务联系人："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},m.default.createElement(l.default,{placeholder:h.default.financeName,value:j,onChange:function(e){return n(v.changeRelativeCardContent("financeName",e.target.value))},onFocus:function(e){return e.target.select()}}))),m.default.createElement("div",{className:"jxc-config-card-modal-item"},m.default.createElement("label",{className:"jxc-config-card-modal-label"},"联系电话："),m.default.createElement("div",{className:"jxc-config-card-modal-input"},m.default.createElement(l.default,{placeholder:"(选填)",value:U,onChange:function(e){return C.jxcConfigCheck.inputCheck("tel",e.target.value,function(){return n(v.changeRelativeCardContent("financeTel",e.target.value))})},onFocus:function(e){return e.target.select()}}))))):null,m.default.createElement("div",{className:"modalBomb",style:{display:T?"":"none"}})))}}]),t}(),r.displayName="RelativeConfAddCardModal",a=i))||a;t.default=S},1461:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=I(n(47)),l=I(n(61)),u=I(n(100)),c=I(n(32)),s=I(n(14)),d=I(n(37)),f=I(n(89)),p=I(n(129)),m=I(n(45)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(79),n(99),n(51),n(78),n(38),n(88),n(128),n(55);var y=I(n(1)),C=(I(n(0)),n(18)),h=n(56);n(1240);var E=N(n(27)),v=n(22),_=I(n(1244)),S=n(127),T=N(n(1404));function N(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}m.default.Option,p.default.Group;var b=f.default.Group,O=(0,h.connect)(function(e){return e})((i=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={confirmModal:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,y.default.Component),g(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.projectCardState!==e.projectCardState||this.props.showModal!==e.showModal||this.props.homeState!==e.homeState||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.showModal,r=t.closeModal,i=t.projectCardState,p=t.homeState,m=t.originTags,g=t.fromPage,h=t.cardList,N=void 0===h?(0,C.fromJS)([]):h,I=t.allState,O=(this.state.confirmModal,!!I.getIn(["period","closedyear"])),A=p.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]),R=i.get("typeTree"),L=i.getIn(["views","insertOrModify"]),P="projectConfig"!==g;P&&(A=p.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]));var w="insert"===L?"新增项目":"修改项目",M=i.get("projectCardTemp"),D=M.get("code"),k=M.get("name"),j=M.get("selectUuid"),U=M.get("selectName"),J=M.get("projectProperty"),x=M.get("projectPropertyName"),H=M.get("basicProductOpen"),G=M.get("contractCostOpen"),Y=M.get("contractProfitOpen"),F=M.get("engineeringSettlementOpen"),B=p.getIn(["data","userInfo","sobInfo","moduleInfo"]),V=B.indexOf("SCXM")>-1,K=B.indexOf("SGXM")>-1,W=function(t){var a=[{type:"stockName",value:k},{type:"code",value:D}];if(""!==j){v.jxcConfigCheck.beforeSaveCheck(a,function(){return function(t){n(T.saveProjectCard(g,t,r,function(){return e.setState({confirmModal:!0})},function(){return e.setState({confirmModal:!1})}))}(t)})}else d.default.info("请选择类别！")},z=void 0,Q=void 0,Z=void 0;return"modify"===L&&N.size&&(Z=N.findIndex(function(e){return e.get("code")===D}),z=Z-1,Q=Z+1),y.default.createElement(o.default,{width:"820px",visible:a,maskClosable:!1,title:w,onCancel:function(){return r()},footer:[y.default.createElement(c.default,{style:{float:"left",display:"insert"==L?"none":""},disabled:0===N.findIndex(function(e){return e.get("code")===D}),onClick:function(){n(T.beforeEditProjectCard(N.get(z),function(){},m))}},y.default.createElement(s.default,{type:"caret-left"})),y.default.createElement(c.default,{style:{float:"left",display:"insert"==L?"none":""},disabled:N.findIndex(function(e){return e.get("code")===D})===N.size-1||!N.size,onClick:function(){n(T.beforeEditProjectCard(N.get(Q),function(){},m))}},y.default.createElement(s.default,{type:"caret-right"})),y.default.createElement(c.default,{key:"cancel",type:"ghost",onClick:function(){return r()}},"取 消"),y.default.createElement(c.default,{key:"ok",type:P?"primary":"modify"==L?"primary":"ghost",disabled:!A,onClick:function(){W("insert")}},"保 存"),y.default.createElement(c.default,{key:"addAndNew",type:"primary",disabled:!A,style:{display:"insert"!=L||P?"none":"inline-block"},onClick:function(){W("insertAndNew")}},"保存并新增")]},y.default.createElement("div",{className:"jxc-config-card-modal-wrap"},y.default.createElement("div",{className:"jxc-config-card-modal-row"},y.default.createElement("div",{className:"jxc-config-card-modal-item"},y.default.createElement("label",{className:"jxc-config-card-modal-label"},"编码："),y.default.createElement("div",{className:"jxc-config-card-modal-input"},y.default.createElement(u.default,{placeholder:_.default.cardCode,value:D,onChange:function(e){return v.jxcConfigCheck.inputCheck("cardCode",e.target.value,function(){return n(T.changeProjectCardContent("code",e.target.value))})},onFocus:function(e){return e.target.select()}}))),y.default.createElement("div",{className:"jxc-config-card-modal-item"},y.default.createElement("label",{className:"jxc-config-card-modal-label"},"名称："),y.default.createElement("div",{className:"jxc-config-card-modal-input"},y.default.createElement(u.default,{placeholder:_.default.name,value:k,onChange:function(e){return n(T.changeProjectCardContent("name",e.target.value))},onFocus:function(e){return e.target.select()}})))),y.default.createElement("div",{className:"jxc-config-card-modal-row"},y.default.createElement("div",{className:"jxc-config-card-modal-item"},y.default.createElement("label",{className:"jxc-config-card-modal-label"},"项目性质："),y.default.createElement("div",{className:"jxc-config-card-modal-input",style:{maxWidth:"800px"}},y.default.createElement(b,{onChange:function(e){var t=e.target.value.split(E.TREE_JOIN_STR),a=t[0],r=t[1];n(T.changeProjectPropertyState(a,r))},value:""+J+E.TREE_JOIN_STR+x},y.default.createElement(f.default,{value:"XZ_LOSS"+E.TREE_JOIN_STR+"损益项目"},"损益项目"),V?y.default.createElement(f.default,{value:"XZ_PRODUCE"+E.TREE_JOIN_STR+"生产项目"},"生产项目"):"",K?y.default.createElement(f.default,{value:"XZ_CONSTRUCTION"+E.TREE_JOIN_STR+"施工项目"},"施工项目"):"")))),y.default.createElement("div",{className:"jxc-config-card-modal-row"},y.default.createElement("div",{className:"jxc-config-card-modal-item"},y.default.createElement("label",{className:"jxc-config-card-modal-label"},"类别："),y.default.createElement("div",{className:"jxc-config-card-modal-input"},y.default.createElement(S.UpperClassSelect,{className:"jxc-config-modal-select",placeholder:"",treeData:R||[],treeDefaultExpandAll:!0,isLastSelect:!0,disabledParent:!0,value:j?[U]:[""],onSelect:function(e){n(T.changeProjectCardCategoryType(e))}}))),y.default.createElement("div",null)),"XZ_PRODUCE"===J||"XZ_CONSTRUCTION"===J?y.default.createElement("div",{className:"jxc-config-title",style:{marginBottom:"10px"}},"期初信息"):"",y.default.createElement("div",{className:"jxc-config-card-modal-row"},"XZ_PRODUCE"===J?y.default.createElement("div",{className:"jxc-config-card-modal-item"},y.default.createElement("label",{className:"jxc-config-card-modal-label"},"基本生产成本："),y.default.createElement("div",{className:"jxc-config-card-modal-input"},y.default.createElement(l.default,{title:O?"已结账，无法修改期初值":""},y.default.createElement(S.XfInput,{negativeAllowed:!0,mode:"amount",placeholder:"请输入金额",disabled:O,value:H,onChange:function(e){var t=e.target.value;n(T.changeProjectCardContent("basicProductOpen",t))}})))):"","XZ_CONSTRUCTION"===J?y.default.createElement("div",{className:"jxc-config-card-modal-item"},y.default.createElement("label",{className:"jxc-config-card-modal-label"},"合同成本："),y.default.createElement("div",{className:"jxc-config-card-modal-input"},y.default.createElement(l.default,{title:O?"已结账，无法修改期初值":""},y.default.createElement(S.XfInput,{negativeAllowed:!0,mode:"amount",placeholder:"请输入金额",disabled:O,value:G,onChange:function(e){var t=e.target.value;n(T.changeProjectCardContent("contractCostOpen",t))}})))):"","XZ_CONSTRUCTION"===J?y.default.createElement("div",{className:"jxc-config-card-modal-item"},y.default.createElement("label",{className:"jxc-config-card-modal-label"},"合同毛利："),y.default.createElement("div",{className:"jxc-config-card-modal-input"},y.default.createElement(l.default,{title:O?"已结账，无法修改期初值":""},y.default.createElement(S.XfInput,{negativeAllowed:!0,mode:"amount",placeholder:"请输入金额",disabled:O,value:Y,onChange:function(e){var t=e.target.value;n(T.changeProjectCardContent("contractProfitOpen",t))}})))):""),"XZ_CONSTRUCTION"===J?y.default.createElement("div",{className:"jxc-config-card-modal-row"},y.default.createElement("div",{className:"jxc-config-card-modal-item"},y.default.createElement("label",{className:"jxc-config-card-modal-label"},"工程结算："),y.default.createElement("div",{className:"jxc-config-card-modal-input"},y.default.createElement(l.default,{title:O?"已结账，无法修改期初值":""},y.default.createElement(S.XfInput,{negativeAllowed:!0,mode:"amount",placeholder:"请输入金额",disabled:O,value:F,onChange:function(e){var t=e.target.value;n(T.changeProjectCardContent("engineeringSettlementOpen",t))}}))))):""))}}]),t}(),r.displayName="ProjectConfAddCardModal",a=i))||a;t.default=O},1463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=v(n(47)),i=v(n(61)),o=v(n(14)),l=v(n(1234)),u=v(n(37)),c=v(n(129)),s=v(n(89)),d=v(n(45)),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(79),n(78),n(1235),n(38),n(128),n(88),n(55);var p=v(n(1)),m=(v(n(0)),n(18)),g=n(56);n(1240);E(n(27)),n(22),v(n(1244));var y=v(n(1288)),C=n(127),h=E(n(1241));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}d.default.Option,d.default.OptGroup,s.default.Group,c.default.Group;var S=(0,g.connect)(function(e){return e})(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={unitList:(a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"])&&a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"]).size?a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"]):(0,m.fromJS)([{amount:"",uuid:""}])).toJS(),uuid:a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","uuid"]),name:a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","name"]),isStandard:a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","isStandard"]),basicUnitUuid:a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","basicUnitUuid"]),unitQuantity:a.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitQuantity"]),basicUnitQuantity:"",canEdit:!0,relateBoth:"",allowSave:!1,changeUnit:!1,oldUnit:(0,m.fromJS)({})},_(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),f(t,[{key:"initState",value:function(){this.setState({unitList:[{amount:"",uuid:""}],uuid:"",name:"",isStandard:!1,basicUnitUuid:"",unitQuantity:"",basicUnitQuantity:"",canEdit:!0,relateBoth:"",allowSave:!1,changeUnit:!1,oldUnit:(0,m.fromJS)({})})}},{key:"beforeSaveCheck",value:function(){var e=this.props,t=e.inventoryCardState,n=e.insertOrModify,a=this.state,r=a.unitList,i=a.name,o=a.oldUnit,l=(a.uuid,a.unitQuantity),c=a.basicUnitQuantity,s=a.isStandard,d=a.basicUnitUuid,f=t.getIn(["views","standardList"]);if(!i)return u.default.info("基本单位必填"),!1;if(r.some(function(e){return e.basicUnitQuantity<=1}))return u.default.info("多单位关系必须大于1"),!1;if(r.some(function(e){return!e.basicUnitQuantity||!e.name}))return u.default.info("多单位填写完整"),!1;if(r.some(function(e){return r.filter(function(t){return t.name===e.name}).length>1})||r.filter(function(e){return e.name===i}).length>0)return u.default.info("同一存货的单位组中，不支持两个单位名称相同"),!1;if(r.some(function(e){return r.filter(function(t){return t.basicUnitQuantity==e.basicUnitQuantity}).length>1}))return u.default.info("同一存货的单位组中，不支持与基本单位重复数量比的多单位"),!1;if("modify"===n&&JSON.parse(s||"false")&&JSON.parse(o.get("isStandard")||"false")){var p=f.find(function(e){return e.get("uuid")===o.get("uuid")}).get("basicUnitQuantity")||0;if(Number(c||0).toFixed(4)!==(Number(p)/Number(l||0)).toFixed(4)&&d===o.get("basicUnitUuid"))return u.default.info("新旧基本单位关系错误"),!1}return r.every(function(e,t){return r.every(function(n,a){var r=(Number(e.unitQuantity||0)/Number(n.unitQuantity||0)).toFixed(4),i=(Number(e.basicUnitQuantity||0)/Number(n.basicUnitQuantity||0)).toFixed(4);return!e.basicUnitUuid||e.basicUnitUuid!==n.basicUnitUuid||t===a||r===i||(u.default.info("多单位"+(t+1)+"和多单位"+(a+1)+"关系错误"),!1)})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.inventoryCardState,s=(t.homeState,t.enableWarehouse,t.showAddModal),d=t.closeAddModal,f=t.insertOrModify,g=this.state,E=g.unitList,v=g.uuid,_=g.name,S=g.isStandard,T=g.canEdit,N=g.allowSave,I=g.oldUnit,b=g.basicUnitQuantity,O=g.changeUnit,A=g.basicUnitUuid,R=g.unitQuantity,L=(a.getIn(["views","fromPage"]),a.getIn(["views","standardList"])),P=a.getIn(["views","customList"]),w=a.get("inventoryCardTemp"),M=(w.get("inventoryNature"),w.get("isOpenedQuantity"),w.get("unitPriceList")),D=w.get("unit")||(0,m.fromJS)({});w.get("CurUnit")||(0,m.fromJS)({});return p.default.createElement(r.default,{destroyOnClose:!0,className:"add-unit "+(N||"modify"!==f?"":"add-unit-disabled"),width:"500px",visible:s,maskClosable:!1,title:("insert"===f?"新增":"修改")+"单位",okText:"保存",onCancel:function(){d(),e.initState()},onOk:function(){if((N||"modify"!==f)&&e.beforeSaveCheck()){d(),e.initState();var t=M.toJS().filter(function(e){return _===e.name||E.some(function(t){return t.name===e.name})});t.some(function(e){return 1===e.type})||(t=t.concat([{type:1}])),t.some(function(e){return 2===e.type})||(t=t.concat([{type:2}])),n(h.changeInventoryCardContent("unitPriceList",(0,m.fromJS)(t))),n(h.changeInventoryCardContent("unit",(0,m.fromJS)({uuid:v,name:_,isStandard:S,basicUnitQuantity:b,unitList:E,changeUnit:O,basicUnitUuid:A,unitQuantity:R})))}}},p.default.createElement("div",null,p.default.createElement("div",{className:"modal-flex"},T?p.default.createElement("div",{className:"modal-item"},p.default.createElement("label",null,"基本单位："),p.default.createElement("div",{className:"modal-input"},p.default.createElement(y.default,{style:{width:"calc(100% - 75px)"},disabled:T&&"modify"===f,selectListOne:L,selectListTwo:P.filter(function(e){return!(e.get("unitList")&&e.get("unitList").size)}),onChange:function(t){var n=t.uuid,a=t.name,r=t.isStandard,i=t.basicUnitUuid,o=t.unitQuantity;if(e.setState({uuid:n,name:a,isStandard:r,basicUnitUuid:i,unitQuantity:o,unitList:E.map(function(e){return e.disabled=!1,e})}),"true"==String(r)){var l=E.map(function(e){return e.name="",e.basicUnitQuantity="",e});e.setState({unitList:l})}},onSwitch:function(){e.setState({uuid:"",name:"",isStandard:!1})},name:"modify"===f?D.get("name"):_}),"modify"===f?p.default.createElement(C.XfnIcon,{type:"config-edit",onClick:function(){e.setState({canEdit:!1,oldUnit:D,name:"",changeUnit:!0,unitList:(e.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"])&&e.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"]).size?e.props.inventoryCardState.getIn(["inventoryCardTemp","unit","unitList"]):(0,m.fromJS)([])).toJS()})}}):"")):p.default.createElement("div",{style:{flex:1}},p.default.createElement("div",{className:"modal-flex"},p.default.createElement("span",{className:"modal-item"},"原基本单位"),p.default.createElement("span",{className:"modal-item"},"新基本单位"),p.default.createElement("span",{className:"modal-item"},"数量关系"),p.default.createElement("span",{style:{maxWidth:"70px"}})),p.default.createElement("div",{className:"modal-flex"},p.default.createElement("div",{className:"modal-input-content"},p.default.createElement("span",null,I.get("name"),"  =  "),p.default.createElement(y.default,{disabled:T&&"modify"===f,selectListOne:L,selectListTwo:P.filter(function(e){return!(e.get("unitList")&&e.get("unitList").size)}),onChange:function(t){var n=t.uuid,a=t.name,r=t.isStandard,i=t.basicUnitUuid,o=t.unitQuantity;if(e.setState({uuid:n,name:a,isStandard:r,basicUnitUuid:i,unitQuantity:o,unitList:E.map(function(e){return e.disabled=!1,e})}),"false"!=r){var l=E.map(function(e){return e.name="",e.basicUnitQuantity="",e});e.setState({unitList:l})}},onSwitch:function(){e.setState({uuid:"",name:"",isStandard:!1})},name:_}),"  *  ",p.default.createElement(C.NumberInput,{type:"count4",placeholder:"请输入数量值",value:b,onChange:function(t){e.setState({basicUnitQuantity:t})}}),p.default.createElement(l.default,{className:"use-unuse-style",style:{marginLeft:".4rem"},checked:E.length,checkedChildren:"多单位",unCheckedChildren:"多单位",onChange:function(){e.setState({unitList:E.length?[]:[{}]})}}))))),E.length?p.default.createElement("div",{className:"multi-unit-content"},E.map(function(t,n){return p.default.createElement("div",{className:"multi-unit"},p.default.createElement("span",null,"多单位",n+1,"："),p.default.createElement(y.default,{selectListOne:L,selectListTwo:P.filter(function(e){return!(e.get("unitList")&&e.get("unitList").size)}),onChange:function(a){var r=a.uuid,i=a.name,o=a.isStandard,l=a.basicUnitUuid,c=a.unitQuantity,s=E;if("true"==o&&l==e.state.basicUnitUuid){var d=Number(e.state.unitQuantity||0),f=Number(c||0);d<f?(s[n]={uuid:r,name:i,isStandard:o,basicUnitQuantity:parseInt(f/d),disabled:!0,unitQuantity:c},e.setState({unitList:s})):u.default.info("数量关系必须大于1")}else s[n]={uuid:r,name:i,isStandard:o,basicUnitUuid:l,unitQuantity:c,basicUnitQuantity:t.basicUnitQuantity},e.setState({unitList:s})},onSwitch:function(){var t=E;t[n]={uuid:"",name:"",isStandard:!1},e.setState({unitList:t})},name:t.fullName||t.name}),p.default.createElement("span",null," =  ",_,"  *   "),p.default.createElement(C.NumberInput,{type:"count",placeholder:"请输入数量值",value:t.basicUnitQuantity,disabled:t.disabled,onChange:function(t){var a=E;a[n].basicUnitQuantity=t,e.setState({unitList:a})}}),E.length>1||"modify"===f?p.default.createElement(C.XfnIcon,{type:"bigDel",onClick:function(){E.splice(n,1),e.setState({unitList:E})}}):"")})):"",E.length||"modify"===f&&T?p.default.createElement("div",{style:{marginBottom:"10px"}},p.default.createElement(i.default,{title:E.length>=2?"单位组最多3级单位":""},p.default.createElement("span",{style:{cursor:"pointer",color:E.length>=2?"#ccc":"#1eb6f8"},onClick:function(){E.length>=2||(E.push({amount:"",uuid:""}),e.setState({unitList:E}))}},p.default.createElement(o.default,{type:"plus"}),"增加单位"))):"","modify"===f?p.default.createElement("div",null,p.default.createElement(c.default,{onChange:function(t){e.setState({allowSave:t.target.checked})}},"所有历史单据中，该商品的单位将统一转换为基本单位")):""))}}]),t}())||a;t.default=S},1464:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=d(n(47)),r=d(n(171)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(170);var o=d(n(1)),l=(d(n(0)),n(18));n(56);n(1240);var u=s(n(27)),c=(n(22),d(n(1244)),d(n(1288)),n(127),s(n(1241)));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=r.default.TreeNode,m=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={showMultiUnit:!1},f(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.showWarehouseModal,i=e.onClose,s=e.treeList,d=e.selectedKeys;this.state.showMultiUnit;return o.default.createElement(a.default,{destroyOnClose:!0,className:"add-unit",width:"500px",visible:n,maskClosable:!1,title:"选择仓库",onCancel:function(){i(),t(c.changeInventoryCardViews("selectedKeys",(0,l.fromJS)([])))},onOk:function(){t(c.getSomeWarehouseTree(d.toJS(),function(){i()}))}},o.default.createElement(r.default,{checkable:!0,defaultExpandAll:!0,checkedKeys:d.toJS(),selectedKeys:[],onCheck:function(e,n){t(c.changeInventoryCardViews("selectedKeys",(0,l.fromJS)(e)))},onSelect:function(){return""}},s.size?function e(t,n){return t.map(function(t){return t.get("childList")&&t.get("childList").size?o.default.createElement(p,{title:t.get("name"),key:""+t.get("uuid")},e(t.get("childList"),n+u.TREE_JOIN_STR+t.get("uuid"))):o.default.createElement(p,{title:t.get("name"),key:""+t.get("uuid")})})}(s,""):[]))}}]),t}();t.default=m},1465:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=E(n(37)),r=E(n(1256)),i=E(n(14)),o=E(n(171)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(38),n(1257),n(78),n(170);var u=n(1),c=E(u),s=(E(n(0)),n(18));n(56);n(1240);var d=h(n(27)),f=n(22),p=(E(n(1244)),n(127)),m=E(n(487)),g=E(n(1376)),y=E(n(1362)),C=h(n(1241));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function v(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o.default.TreeNode;var S=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={showMultiUnit:!1,hideChildList:[],newBatchNumber:"",newBatchDate:"",placeArr:[]},_(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,o=t.warehousePriceMode,l=t.isOpenedQuantity,h=t.enableWarehouse,E=t.treeList,_=t.showWarehouseModal,S=t.isCheckOut,T=t.assistClassificationList,N=t.batchList,I=t.uuid,b=t.financialInfo,O=this.props.unit||(0,s.fromJS)({}),A=(b.get("serialList")||(0,s.fromJS)([]),b.get("openAssist")),R=b.get("openSerial"),L=b.get("openBatch"),P=b.get("openShelfLife"),w=b.get("shelfLife"),M=this.state,D=(M.showMultiUnit,M.hideChildList),k=M.placeArr,j=M.index,U=M.batchIndex,J=1,x=0,H=0;!function e(t){return t.map(function(t){t.get("childList")&&t.get("childList").size&&!t.get("isEnd")?e(t.get("childList")):(A||L)&&l?(x+=t.get("childList").reduce(function(e,t){return e+(Number(t.get("openedAmount"))||0)},0),H+=t.get("childList").reduce(function(e,t){return e+(Number(t.get("openedQuantity"))||0)},0)):(x+=Number(t.get("openedAmount"))||0,H+=Number(t.get("openedQuantity"))||0)})}(E);var G="";return l&&h?G="quantity-warehouse-table":!l&&h&&(G="warehouse-table"),c.default.createElement(p.TableAll,{className:"inventory-table-width "+G},c.default.createElement(p.TableBody,null,c.default.createElement(p.TableItem,{line:2},c.default.createElement("li",null,"仓库编码"),c.default.createElement("li",{key:"1",onClick:function(){if(S)a.default.info("已结账，不允许修改期初值");else if(n(C.getWarehouseTree(_)),E.size){var e=[];!function t(n){return n.map(function(n){n.get("childList")&&n.get("childList").size?t(n.get("childList")):e.push(n.get("warehouseUuid"))})}(E),n(C.changeInventoryCardViews("selectedKeys",(0,s.fromJS)(e)))}}},"仓库",c.default.createElement(p.XfnIcon,{type:"config-edit"})),l?c.default.createElement("li",null,"期初数量"):"",c.default.createElement("li",null,"期初余额")),function t(a,y,E,_){return a.map(function(E,b){var w=b>0?a.getIn([b-1,"childList"]).size%2==0?w+b:w+b+1:w+b;if(!E.get("childList")||!E.get("childList").size||E.get("isEnd")){J++,E.getIn(["childList",0,"assistList"])||(0,s.fromJS)([]);var M=E.get("childList")||(0,s.fromJS)([]),k=(L||A)&&l?M.reduce(function(e,t){return e+(Number(t.get("openedQuantity"))||0)},0):E.get("openedQuantity"),j=(L||A)&&l?M.reduce(function(e,t){return e+(Number(t.get("openedAmount"))||0)},0):E.get("openedAmount"),U=5+7*(_-1)+"px";return c.default.createElement("div",{className:"item-content"},c.default.createElement(p.TableItem,{key:E.get("warehouseUuid"),line:w},c.default.createElement("li",{className:"inventory-code",style:{paddingLeft:U}},E.get("warehouseCode")),c.default.createElement("li",{className:"inventory-name"},c.default.createElement("span",null,E.get("warehouseName")),(A||L)&&l?c.default.createElement(i.default,{type:"plus",onClick:function(){var e=(E.get("childList")||(0,s.fromJS)([])).push((0,s.fromJS)({openedQuantity:"",openedAmount:""}));n(C.changeInventoryCardContent(["openList"].concat(v(y),[b,"childList"]),e))}}):""),l?A||L?M.size?c.default.createElement("li",{className:"force-centet"},c.default.createElement("span",{className:"input-quantity"},(0,f.formatFour)(k)),c.default.createElement("span",null,O.get("name"))):c.default.createElement("li",null):c.default.createElement("li",{className:"force-centet"},R?c.default.createElement("div",{className:"serial-box",onClick:function(){n(C.changeInventoryCardViews("serialPlaceArr",(0,s.fromJS)(["openList"].concat(v(y),[b])))),E.get("openUuid")&&!E.get("isModify")?n(C.getSerialList(I,E.get("openUuid"))):(n(C.changeInventoryCardViews("serialList",E.get("serialList")||(0,s.fromJS)([]))),n(C.changeInventoryCardViews("serialModal",!0)))}},E.get("openedQuantity")>0?(0,f.formatFour)(E.get("openedQuantity")):"点击输入",c.default.createElement(p.XfnIcon,{type:"edit-pen"})):c.default.createElement(m.default,{className:"input-quantity",type:"regAmount",disabled:S,placeholder:"必填，请输入数量",value:k,onChange:function(e){(0,f.numberFourTest)(e,function(e){n(C.changeInventoryCardContent(["openList"].concat(v(y),[b,"openedQuantity"]),e))},!0)}}),c.default.createElement("span",null,O.get("name"))):"",(A||L)&&l?c.default.createElement("li",{className:"force-centet"},c.default.createElement("span",{className:"input-amount"},(0,f.formatMoney)(j)),c.default.createElement("span",null,"元")):c.default.createElement("li",{className:"force-centet"},c.default.createElement(p.NumberInput,{type:"regAmount",className:"input-amount",disabled:S,placeholder:"必填，请输入金额",value:E.get("openedAmount"),onChange:function(e){n(C.changeInventoryCardContent(["openList"].concat(v(y),[b,"openedAmount"]),e))}}),c.default.createElement("span",null,"元"))),M.size&&l&&(A||L)?M.map(function(t,a){var o=N.find(function(e){return e.get("batchUuid")===t.get("batchUuid")&&t.get("batchUuid")||e.get("batch")===t.get("batch")});return c.default.createElement(p.TableItem,{className:"detail-item",line:w},c.default.createElement("li",null),c.default.createElement("li",{className:"inventory-select"},A&&T.map(function(e){return c.default.createElement(u.Fragment,null,c.default.createElement(p.XfnSelect,{showSearch:!0,className:"assist-select",placeholder:e.get("name"),value:((t.get("assistList")||(0,s.fromJS)([])).find(function(t){return t.get("classificationUuid")===e.get("uuid")})||(0,s.fromJS)({})).get("propertyName")||void 0,onChange:function(r){var i=r.split(d.TREE_JOIN_STR),o=i[0],l=i[1],u=t.get("assistList")||(0,s.fromJS)([]),c=u.size,f=u.findIndex(function(t){return t.get("classificationUuid")===e.get("uuid")});0===c?n(C.changeInventoryCardContent(["openList"].concat(v(y),[b,"childList",a,"assistList"]),(0,s.fromJS)([{classificationUuid:e.get("uuid"),classificationName:e.get("name"),propertyUuid:o,propertyName:l}]))):-1===f?n(C.changeInventoryCardContent(["openList"].concat(v(y),[b,"childList",a,"assistList",c]),(0,s.fromJS)({classificationUuid:e.get("uuid"),classificationName:e.get("name"),propertyUuid:o,propertyName:l}))):(n(C.changeInventoryCardContent(["openList"].concat(v(y),[b,"childList",a,"assistList",f,"propertyUuid"]),o)),n(C.changeInventoryCardContent(["openList"].concat(v(y),[b,"childList",a,"assistList",f,"propertyName"]),l)))}},e.get("propertyList").map(function(e){return c.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+d.TREE_JOIN_STR+e.get("name")},e.get("name"))})))}),L?c.default.createElement(u.Fragment,null,c.default.createElement("div",{className:"batch-content"},c.default.createElement(p.XfnSelect,{showSearch:!0,className:"batch-select input"+a,placeholder:"请选择/新增批次",value:o?o.get("batch")+(P&&o.get("expirationDate")?"("+o.get("expirationDate")+")":""):void 0,showArrow:!1,dropdownRender:function(e){return c.default.createElement("div",{onMouseDown:function(e){return e.preventDefault()},className:"edit-box"},e,c.default.createElement(r.default,{style:{margin:"4px 0"}}),c.default.createElement("div",{className:"edit-area",onClick:function(){n(C.changeInventoryCardViews("batchModal",!0))}},c.default.createElement(p.XfnIcon,{type:"edit-pen"}),"修改批次信息"))},onChange:function(t){var r=t.split(d.TREE_JOIN_STR),i=r[0],o=r[1],l=r[2];E.getIn(["childList",0,"assistList"]),e.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},"value"+a,!1)),n(C.changeInventoryCardContent(["openList"].concat(v(y),[b,"childList",a,"batch"]),i)),n(C.changeInventoryCardContent(["openList"].concat(v(y),[b,"childList",a,"batchUuid"]),o)),n(C.changeInventoryCardContent(["openList"].concat(v(y),[b,"childList",a,"expirationDate"]),l))}},N.map(function(e){return c.default.createElement(Option,{key:e.get("batch"),value:""+e.get("batch")+d.TREE_JOIN_STR+(e.get("batchUuid")||"")+d.TREE_JOIN_STR+e.get("expirationDate")},e.get("batch")+(P&&e.get("expirationDate")?"("+e.get("expirationDate")+")":""))})),c.default.createElement("span",{className:"add-button",onClick:function(){e.setState({batchDrop:!0,batchIndex:a,index:b,placeArr:y})}},"新增"))):"",c.default.createElement("div",{className:"close-button"},c.default.createElement(i.default,{type:"close",onClick:function(){n(C.changeInventoryCardContent(["openList"].concat(v(y),[b,"childList"]),M.splice(M.size-1,1)))}}))),l?c.default.createElement("li",{className:"force-centet"},R?c.default.createElement("div",{className:"serial-box",onClick:function(){n(C.changeInventoryCardViews("serialPlaceArr",(0,s.fromJS)(["openList"].concat(v(y),[b,"childList",a])))),t.get("openUuid")&&!t.get("isModify")?n(C.getSerialList(I,t.get("openUuid"))):(n(C.changeInventoryCardViews("serialList",t.get("serialList")||(0,s.fromJS)([]))),n(C.changeInventoryCardViews("serialModal",!0)))}},t.get("openedQuantity")>0?(0,f.formatFour)(t.get("openedQuantity")):"点击输入",c.default.createElement(p.XfnIcon,{type:"edit-pen"})):c.default.createElement(m.default,{className:"input-quantity",type:"regAmount",disabled:S,placeholder:"必填，请输入数量",value:t.get("openedQuantity"),onChange:function(e){(0,f.numberFourTest)(e,function(e){n(C.changeInventoryCardContent(["openList"].concat(v(y),[b,"childList",a,"openedQuantity"]),e))},!0)}}),c.default.createElement("span",null,O.get("name"))):"",c.default.createElement("li",{className:"force-centet"},c.default.createElement(p.NumberInput,{type:"regAmount",className:"input-amount",disabled:S,placeholder:"必填，请输入金额",value:t.get("openedAmount"),onChange:function(e){n(C.changeInventoryCardContent(["openList"].concat(v(y),[b,"childList",a,"openedAmount"]),e))}}),c.default.createElement("span",null,"元")))}):"")}J++;var x=-1==D.indexOf(E.get("warehouseUuid"));return c.default.createElement("div",{className:"item-content"},c.default.createElement(g.default,{item:E,showChild:x,hideChildList:D,warehousePriceMode:o,isOpenedQuantity:l,enableWarehouse:h,unit:O,showChildFunc:function(){return e.setState({hideChildList:D.filter(function(e){return e!=E.get("warehouseUuid")})})},hideChildFunc:function(){return e.setState({hideChildList:[].concat(v(D),[E.get("warehouseUuid")])})},line:w,level:_,isCheckOut:S,dispatch:n,index:b,openAssist:A,openBatch:L}),x?t(E.get("childList"),[].concat(v(y),[b,"childList"]),0,_+1):[])})}(E,[],0,1),c.default.createElement(p.TableItem,{key:"2",line:J,className:"no-border-bottom"},c.default.createElement("li",null),c.default.createElement("li",null,"合计"),l?c.default.createElement("li",{className:"force-centet"},c.default.createElement("span",{className:"input-quantity"},(0,f.formatFour)(H)),c.default.createElement("span",null,O.get("name"))):"",c.default.createElement("li",{className:"force-centet"},c.default.createElement("span",{className:"input-amount"},(0,f.formatMoney)(x)),c.default.createElement("span",null,"元"))),this.state.batchDrop?c.default.createElement(y.default,{shelfLife:w,visible:this.state.batchDrop,index:this.state.batchIndex||0,dispatch:n,uuid:I,openShelfLife:P,callBack:function(e,t,a){n(C.changeInventoryCardContent(["openList"].concat(v(k),[j,"childList",U,"batch"]),e)),n(C.changeInventoryCardContent(["openList"].concat(v(k),[j,"childList",U,"batchUuid"]),t)),n(C.changeInventoryCardContent(["openList"].concat(v(k),[j,"childList",U,"expirationDate"]),a))},close:function(){return e.setState({batchDrop:!1})}}):""))}}]),t}();t.default=S},1466:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=C(n(1256)),r=C(n(45)),i=C(n(14)),o=C(n(171)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1257),n(55),n(78),n(170);var u=C(n(1)),c=(C(n(0)),n(18));n(56);n(1240);var s=y(n(27)),d=n(22),f=(C(n(1244)),n(127)),p=C(n(487)),m=(C(n(1376)),C(n(1362))),g=y(n(1241));C(n(1237));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o.default.TreeNode;var E=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={showMultiUnit:!1,hideChildList:[],newBatchNumber:"",newBatchDate:"",x:"0px",y:"0px"},h(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,o=(t.warehousePriceMode,t.isOpenedQuantity),l=(t.enableWarehouse,t.treeList),y=(t.showWarehouseModal,t.isCheckOut),C=t.assistClassificationList,h=t.batchList,E=t.uuid,v=t.financialInfo,_=t.insertOrModify,S=this.props.unit||(0,c.fromJS)({}),T=(v.get("serialList")||(0,c.fromJS)([]),v.get("openAssist")),N=v.get("openBatch"),I=v.get("openSerial"),b=v.get("openShelfLife"),O=v.get("shelfLife"),A=this.state,R=(A.showMultiUnit,A.hideChildList,A.batchIndex),L=0,P=0;l.map(function(e){P+=Number(e.get("openedQuantity"))||0,L+=Number(e.get("openedAmount"))||0});var w=l.size?l:(0,c.fromJS)([{}]),M="";return M=o&&T&&N?"quantity-assist-batch-table":o&&(T||N)?"quantity-assist-or-batch-table":"quantity-table",u.default.createElement(f.TableAll,{className:"inventory-table-width "+M,style:{display:o?"":"none"}},u.default.createElement(f.TableBody,null,u.default.createElement(f.TableItem,{line:2},T||N?u.default.createElement("li",null,"操作"):"",T?u.default.createElement("li",null,"属性"):"",N?u.default.createElement("li",null,"批次"):"",u.default.createElement("li",null,"期初数量"),u.default.createElement("li",null,"期初余额")),u.default.createElement("div",{className:"item-content"},w.map(function(t,o){var m=o+1;t.getIn(["childList",0,"assistList"])||(0,c.fromJS)([]),t.get("childList")||(0,c.fromJS)([{}]);return u.default.createElement(f.TableItem,{className:"detail-item",line:m},T||N?u.default.createElement("li",{className:"choose-li"},u.default.createElement("span",null,u.default.createElement(i.default,{type:"plus",onClick:function(){l.size?n(g.changeInventoryCardContent("openList",l.push((0,c.fromJS)({})))):n(g.changeInventoryCardContent("openList",l.concat((0,c.fromJS)([{},{}]))))}})),u.default.createElement("span",null,u.default.createElement(i.default,{type:"close",onClick:function(){l.size?n(g.changeInventoryCardContent("openList",l.splice(o,1))):n(g.changeInventoryCardContent("openList",(0,c.fromJS)([{}])))}}))):"",T?u.default.createElement("li",null,C.map(function(e){return u.default.createElement("div",{className:"batch-content",style:{maxWidth:"calc("+100/C.size+"% - 6px)"}},u.default.createElement(r.default,{className:"assist-select",placeholder:e.get("name"),value:((t.get("assistList")||(0,c.fromJS)([])).find(function(t){return t.get("classificationUuid")===e.get("uuid")})||(0,c.fromJS)({})).get("propertyName")||void 0,onChange:function(a){var r=a.split(s.TREE_JOIN_STR),i=r[0],l=r[1],u=t.get("assistList")||(0,c.fromJS)([]),d=u.size,f=u.findIndex(function(t){return t.get("classificationUuid")===e.get("uuid")});0===d?n(g.changeInventoryCardContent(["openList",o,"assistList"],(0,c.fromJS)([{classificationUuid:e.get("uuid"),classificationName:e.get("name"),propertyUuid:i,propertyName:l}]))):-1===f?n(g.changeInventoryCardContent(["openList",o,"assistList",d],(0,c.fromJS)({classificationUuid:e.get("uuid"),classificationName:e.get("name"),propertyUuid:i,propertyName:l}))):(n(g.changeInventoryCardContent(["openList",o,"assistList",f,"propertyUuid"],i)),n(g.changeInventoryCardContent(["openList",o,"assistList",f,"propertyName"],l)))}},e.get("propertyList").map(function(e){return u.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+s.TREE_JOIN_STR+e.get("name")},e.get("name"))})))})):"",N?u.default.createElement("li",null,u.default.createElement("div",{className:"batch-content"},u.default.createElement(f.XfnSelect,{className:"batch-select input"+o,placeholder:"请选择/新增批次",value:t.get("batch")?t.get("batch")+(b&&t.get("expirationDate")?"("+t.get("expirationDate")+")":""):void 0,showArrow:!1,showSearch:!0,dropdownRender:function(e){return u.default.createElement("div",{onMouseDown:function(e){return e.preventDefault()},className:"edit-box"},e,u.default.createElement(a.default,{style:{margin:"4px 0"}}),u.default.createElement("div",{className:"edit-area",onClick:function(){n(g.changeInventoryCardViews("batchModal",!0))}},u.default.createElement(f.XfnIcon,{type:"edit-pen"}),"修改批次信息"))},onChange:function(a){var r=a.split(s.TREE_JOIN_STR),i=r[0],l=r[1]||"",u=r[2];t.getIn(["childList",0,"assistList"]);e.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},"value"+o,!1)),n(g.changeInventoryCardContent(["openList",o,"batch"],i)),n(g.changeInventoryCardContent(["openList",o,"batchUuid"],"insert"===_?"":l)),n(g.changeInventoryCardContent(["openList",o,"expirationDate"],u))}},h.map(function(e){return u.default.createElement(Option,{key:e.get("batch"),value:""+e.get("batch")+s.TREE_JOIN_STR+(e.get("batchUuid")||"")+s.TREE_JOIN_STR+e.get("expirationDate")},e.get("batch")+(b&&e.get("expirationDate")?"("+e.get("expirationDate")+")":""))})),u.default.createElement("span",{className:"add-button",onClick:function(){e.setState({batchDrop:!0,batchIndex:o})}},"新增"))):"",u.default.createElement("li",{className:"force-centet"},I?u.default.createElement("div",{className:"serial-box",onClick:function(){n(g.changeInventoryCardViews("serialPlaceArr",(0,c.fromJS)(["openList",o]))),t.get("openUuid")&&!t.get("isModify")?n(g.getSerialList(E,t.get("openUuid"))):(n(g.changeInventoryCardViews("serialList",t.get("serialList")||(0,c.fromJS)([]))),n(g.changeInventoryCardViews("serialModal",!0)))}},t.get("openedQuantity")>0?(0,d.formatFour)(t.get("openedQuantity")):"点击输入",u.default.createElement(f.XfnIcon,{type:"edit-pen"})):u.default.createElement(p.default,{className:"input-quantity",type:"regAmount",disabled:y,placeholder:"必填，请输入数量",value:t.get("openedQuantity"),onChange:function(e){(0,d.numberFourTest)(e,function(e){n(g.changeInventoryCardContent(["openList",o,"openedQuantity"],e))})}}),u.default.createElement("span",{className:"unit"},S.get("name"))),u.default.createElement("li",{className:"force-centet"},u.default.createElement(f.NumberInput,{className:"input-amount",type:"regAmount",disabled:y,placeholder:"必填，请输入金额",value:t.get("openedAmount"),onChange:function(e){n(g.changeInventoryCardContent(["openList",o,"openedAmount"],e))}}),u.default.createElement("span",{className:"unit"},"元")))})),T||N?u.default.createElement(f.TableItem,{key:"2",line:l.size+1,className:"no-border-bottom"},T?u.default.createElement("li",null):"",N?u.default.createElement("li",null):"",u.default.createElement("li",null,"合计"),u.default.createElement("li",{className:"force-centet"},u.default.createElement("span",{className:"input-quantity"},(0,d.formatFour)(P)),u.default.createElement("span",null,S.get("name"))),u.default.createElement("li",{className:"force-centet"},u.default.createElement("span",{className:"input-amount"},(0,d.formatMoney)(L)),u.default.createElement("span",null,"元"))):"",this.state.batchDrop?u.default.createElement(m.default,{visible:this.state.batchDrop,index:R||0,dispatch:n,uuid:E,shelfLife:O,openShelfLife:b,close:function(){return e.setState({batchDrop:!1})},callBack:function(e,t,a){n(g.changeInventoryCardContent(["openList",R,"batch"],e)),n(g.changeInventoryCardContent(["openList",R,"batchUuid"],t)),n(g.changeInventoryCardContent(["openList",R,"expirationDate"],a))}}):""))}}]),t}();t.default=E},1467:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=h(n(47)),i=h(n(1267)),o=h(n(129)),l=h(n(100)),u=h(n(14)),c=h(n(171)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(1265),n(128),n(99),n(78),n(170);var d=h(n(1)),f=n(17),p=n(127),m=C(n(27)),g=n(18),y=C(n(1241));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=c.default.TreeNode,_=(0,f.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={inputValue:""},a.closeModal=function(){a.props.dispatch(y.changeInventoryCardViews("showStockModal",!1)),a.props.dispatch(y.changeInventoryCardViews("materialSelectedKeys","")),a.props.dispatch(y.changeInventoryCardViews("selectList",(0,g.fromJS)([]))),a.props.dispatch(y.changeInventoryCardViews("selectItem",(0,g.fromJS)([])))},E(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.MemberList,s=(t.searchCardContent,t.searchList,t.hasSearchContent,t.thingsList),f=t.materialSelectedKeys,C=t.showModal,h=t.selectItem,E=t.selectList,_=(t.cancel,t.materialList),S=(t.categoryList,t.code),T=h&&h.size||0,N=a?function e(t,n,a){return t&&t.map(function(t,r){return t.childList&&t.childList.length?d.default.createElement(v,{key:""+t.uuid+m.TREE_JOIN_STR+t.name+m.TREE_JOIN_STR+a,title:t.name},e(t.childList,n,a+1)):d.default.createElement(v,{key:""+t.uuid+m.TREE_JOIN_STR+t.name+m.TREE_JOIN_STR+a,title:t.name,checkable:!0})})}(a.toJS(),["全部"],1):"",I=(s.map(function(e){return{string:""+e.get("code")+m.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")}}),s.toJS().filter(function(t){return!e.state.inputValue||(t.code.indexOf(e.state.inputValue)>-1||t.name.indexOf(e.state.inputValue)>-1)}).filter(function(e){return e.code!==S})),b=I.every(function(e){return E.some(function(t){return t===e.uuid})})&&I.length;return d.default.createElement(r.default,{className:"select-modal",title:"选择存货",visible:C,onCancel:function(){e.closeModal()},onOk:function(){var t=_.toJS(),a=h.toJS().map(function(e){return e.materialUuid=e.uuid,1===e.unitList.length&&(e.unitUuid=e.unitList[0].uuid,e.unitName=e.unitList[0].name),e});e.closeModal(),n(y.changeInventoryInnerSrting(["assemblySheet","materialList"],(0,g.fromJS)(t.concat(a))))},width:"800px"},d.default.createElement("div",{className:"lsqc-contacts-card-top"},d.default.createElement("div",{className:"table-tree-container",style:{height:I.length>5?"461px":"249px"}},d.default.createElement(c.default,{defaultExpandAll:!0,onSelect:function(e){if(e[0]){var t=e[0].split(m.TREE_JOIN_STR),a=t[0],r=t[1],i=t[2];"all"===a?(n(y.changeInventoryCardViews("materialSelectedKeys","all")),n(y.getInventoryAllCardList([],"showStockModal"))):(n(y.changeInventoryCardViews("materialSelectedKeys",""+a+m.TREE_JOIN_STR+r+m.TREE_JOIN_STR+i)),n(y.getInventorySomeCardList(a,i)))}},selectedKeys:[f||"all"]},d.default.createElement(v,{key:"all",title:"全部",checkable:!0}),N)),d.default.createElement(p.TableAll,{className:"contacts-table-right",style:{height:I.length>5?"461px":"249px"}},d.default.createElement("span",{className:"lsqc-serch"},d.default.createElement(u.default,{className:"lsqc-serch-icon",type:"search",onClick:function(){}}),d.default.createElement(l.default,{placeholder:"搜索",className:"lsqc-serch-input",style:{paddingLeft:10},onChange:function(t){e.setState({inputValue:t.target.value})}})),d.default.createElement("div",{className:"table-title-wrap"},d.default.createElement("ul",{className:"table-title table-title-charge"},d.default.createElement("li",{onClick:function(e){e.stopPropagation(),n(y.chargeItemCheckboxCheckAll(b,I,s))}},d.default.createElement(o.default,{checked:b})),d.default.createElement("li",null,d.default.createElement("span",null,"编号")),d.default.createElement("li",null,d.default.createElement("span",null,"名称")))),d.default.createElement(p.TableBody,null,I&&I.map(function(t){var a=E.indexOf(t.uuid)>-1;return(t.code+" "+t.name).indexOf(e.state.inputValue)>-1?d.default.createElement(p.TableItem,{className:"contacts-table-width-charge",key:t.uuid,onClick:function(e){e.stopPropagation()}},d.default.createElement("li",{onClick:function(e){e.stopPropagation();var r=t.unit.unitList||[];r.unshift({uuid:t.unit.uuid,name:t.unit.name}),n(y.chargeItemCheckboxCheck(a,t.uuid,t.code,t.name,r))}},d.default.createElement(o.default,{checked:a})),d.default.createElement("li",null,t.code),d.default.createElement("li",null,t.name)):""})))),d.default.createElement("div",{className:"charge-chosen-project"},"选择存货：",h&&h.map(function(e){return d.default.createElement(i.default,{closable:!0,onClose:function(){n(y.chargeItemCheckboxCheck(!0,e.get("uuid")))}},e.get("code")," ",e.get("name"))})),d.default.createElement("div",{style:{display:T>0?"":"none",margin:"0 0 10px 20px"}},T,"个存货"))}}]),t}())||a;t.default=_},1468:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=g(n(47)),r=g(n(100)),i=g(n(32)),o=g(n(129)),l=g(n(171)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(99),n(51),n(128),n(170);var c=g(n(1)),s=(g(n(0)),n(18));n(56);n(1240);m(n(27));var d=g(n(90)),f=(n(22),g(n(1244)),g(n(1288)),n(127)),p=m(n(1241));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}l.default.TreeNode;var C=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={addAssistCategroy:!1,activeUuid:"",activeType:"",newAssistClassificationList:a.props.assistClassificationList},a.emptySelect=function(){a.setState({activeType:"",activeUuid:""})},a.afterAdd=function(){a.setState({activeType:"",activeUuid:"plus"})},y(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"componentDidMount",value:function(){this.props.dispatch(p.getAssistList(this.props.uuid))}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,l=t.assistModal,u=t.allAssistClassificationList,m=(t.assistClassificationList,t.onClose),g=this.state,y=g.addAssistCategroy,C=g.activeUuid,h=g.activeType,E=g.title,v=g.classificationUuid,_=g.newAssistClassificationList,S=u.findIndex(function(e){return e.get("uuid")===v});return c.default.createElement(a.default,{destroyOnClose:!0,className:"add-unit",width:"800px",visible:l,maskClosable:!1,title:"辅助属性",onCancel:function(){m(),n(p.changeInventoryCardViews("selectedKeys",(0,s.fromJS)([])))},onOk:function(){n(p.changeInventoryInnerSrting(["financialInfo","assistClassificationList"],_)),m()}},c.default.createElement("div",null,c.default.createElement("div",{style:{color:"#999"}}," *请勾选属性，最多支持3个属性分类"),c.default.createElement("div",null,c.default.createElement(f.TableAll,{className:"assist-table"},c.default.createElement(f.TableBody,null,u.size?u.map(function(t,n){return c.default.createElement(f.TableItem,null,c.default.createElement("li",null,t.get("name")),c.default.createElement("li",null,t.get("propertyList").map(function(n){return c.default.createElement("span",null,c.default.createElement(o.default,{disabled:_.size>=3&&_.every(function(e){return e.get("name")!==t.get("name")}),checked:_.some(function(e){return e.get("propertyList").find(function(e){return e.get("uuid")===n.get("uuid")})}),onClick:function(a){var r=_.findIndex(function(e){return e.get("uuid")===t.get("uuid")}),i=_,o=(0,s.fromJS)([]);a.target.checked?(-1===r&&(i=_.push(t.set("propertyList",(0,s.fromJS)([])).set("isUniform",!0))),o=i.updateIn([r,"propertyList"],function(e){return e.push(n)})):o=a.target.checked||1!==i.getIn([r,"propertyList"]).size?i.updateIn([r,"propertyList"],function(e){return e.splice(e.findIndex(function(e){return e.get("uuid")===n.get("uuid")}),1)}):i.delete(r),e.setState({newAssistClassificationList:o})}},n.get("name")))}),c.default.createElement("span",{className:"assist-add",onClick:function(){e.setState({addAssistCategroy:!0,title:"属性管理："+t.get("name"),classificationUuid:t.get("uuid"),activeUuid:"plus",activeType:""})}},c.default.createElement(d.default,{type:"big-plus"}))))}):c.default.createElement(f.TableItem,null,c.default.createElement("div",{className:"assist-item img-kongtaitu",style:{borderBottom:0}},c.default.createElement("div",null),c.default.createElement("div",null,"暂无属性分类，请新增属性分类"))))),c.default.createElement("span",{onClick:function(){return e.setState({addAssistCategroy:!0,activeUuid:"plus",activeType:"",title:"属性分类"})}},c.default.createElement(i.default,{type:"primary",style:{background:"#5e81d1",marginTop:"12px",borderColor:"#5e81d1"}},c.default.createElement(d.default,{type:"big-plus"}),"新增属性分类")))),c.default.createElement(a.default,{visible:y,title:E,onCancel:function(){return e.setState({addAssistCategroy:!1})},footer:[c.default.createElement(i.default,{onClick:function(){e.setState({addAssistCategroy:!1})}},"取消"),c.default.createElement(i.default,{disabled:!C||"plus"===C,onClick:function(){n("属性分类"===E?p.deleteAssistCategroy(C,e.emptySelect):p.deleteAssist(C,e.emptySelect))}},"删除"),c.default.createElement(i.default,{type:"primary",disabled:!C,onClick:function(){n("属性分类"===E?"plus"===C?p.insertAssistCategroy(h,e.afterAdd):p.modifyAssistCategroy(C,h):"plus"===C?p.insertAssist(v,h,e.afterAdd):p.modifyAssist(C,v,h))}},"保存")]},c.default.createElement("div",null,c.default.createElement(f.Tab,{addButton:!0,tabList:"属性分类"===E?u.toJS().map(function(e){return{key:e.uuid,value:e.name}}):(u.getIn([S,"propertyList"])||(0,s.fromJS)([])).toJS().map(function(e){return{key:e.uuid,value:e.name}}),activeKey:C,addKey:"plus",addFunc:function(){e.setState({activeUuid:"plus",activeType:""})},tabFunc:function(t){e.setState({activeUuid:t.key,activeType:t.value})}}),c.default.createElement("div",{style:{display:"flex"}},c.default.createElement("span",{style:{width:"72px"}},"分类名称："),c.default.createElement(r.default,{value:h,onChange:function(t){e.setState({activeType:t.target.value})}})))))}}]),t}();t.default=C},1469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments[1];return((e={},l(e,i.INIT_ADD_INVENTORY_STATE,function(){return t.set("inventoryCardTemp",(0,r.fromJS)(c.get("inventoryCardTemp")))}),l(e,i.BEFORE_ADD_INVENTORY_CONF_CARD_INVENTORY,function(){return t=t.set("tags",n.originTags).setIn(["views","insertOrModify"],"insert").set("inventoryCardTemp",c.get("inventoryCardTemp")).setIn(["inventoryCardTemp","isCheckOut"],n.data.isCheckOut).setIn(["inventoryCardTemp","defaultAc"],(0,r.fromJS)(n.data.defaultAc)).setIn(["inventoryCardTemp","code"],(0,r.fromJS)(n.code)).setIn(["inventoryCardTemp","acId"],(0,r.fromJS)(n.code))}),l(e,i.BEFORE_ADD_INVENTORY_CONF_CARD_RUNNING,function(){return t=t.set("inventoryCardTemp",(0,r.fromJS)(c.get("inventoryCardTemp"))).set("tags",n.originTags).setIn(["views","insertOrModify"],"insert").setIn(["inventoryCardTemp","code"],n.receivedData.code).setIn(["views","fromPage"],"otherPage").setIn(["inventoryCardTemp","defaultAc"],(0,r.fromJS)(n.receivedData.defaultAc))}),l(e,i.BEFORE_EDIT_INVENTORY_CONF_CARD,function(){var e=n.data.openList,a=e&&e.length&&e[0].childList&&e[0].childList.length?e[0].childList:[];return t=t.set("inventoryCardTemp",(0,r.fromJS)(n.data)).setIn(["views","insertOrModify"],"modify").setIn(["views","fromPage"],"inventory").setIn(["views","fromOpen"],n.fromOpen).set("tags",(0,r.fromJS)(n.originTags)).setIn(["inventoryCardTemp","openList"],(0,r.fromJS)(n.enableWarehouse?a:e)).setIn(["inventoryCardTemp","assemblyState"],n.assemblyState),n.data.isOpenedQuantity&&(t=t.setIn(["inventoryCardTemp","CurUnit"],(0,r.fromJS)(n.data.unit))),"OPEN"!==n.assemblyState||n.data.assemblySheet?"OPEN"===n.assemblyState&&n.data.assemblySheet&&!n.data.assemblySheet.materialList&&(t=t.setIn(["inventoryCardTemp","assemblySheet","materialList"],(0,r.fromJS)([{}]))):t=t.setIn(["inventoryCardTemp","assemblySheet"],(0,r.fromJS)({materialList:[{}]})),n.data.categoryTypeList.map(function(e,n){t.get("tags").map(function(n,a){e.ctgyUuid!==n.get("uuid")||(t=t.setIn(["tags",a,"checked"],!0).setIn(["tags",a,"selectUuid"],e.subordinateUuid).setIn(["tags",a,"selectName"],e.subordinateName).setIn(["tags",a,"tree"],(0,r.fromJS)(e.options)))})}),t}),l(e,i.CHANGE_INVENTORY_CARD_CONTENT,function(){return t="object"===a(n.name)?t.setIn(["inventoryCardTemp"].concat(u(n.name)),n.value):t.setIn(["inventoryCardTemp",n.name],n.value)}),l(e,i.CHANGE_INVENTORY_CONF_CARD_VIEWS,function(){return t=t.setIn(["views",n.name],n.value)}),l(e,i.CHANGE_INVENTORY_CONF_CARD_NATURE,function(){return t=t.setIn(["inventoryCardTemp",n.name],n.value)}),l(e,i.CHANGE_INVENTORY_CONF_INNER_STRING,function(){return t=t.setIn(["inventoryCardTemp"].concat(u(n.arr)),n.value)}),l(e,i.CHANGE_INVENTORY_CONF_CARD_CATEGORY_STATUS,function(){var e="";if(t.get("tags").find(function(a,i){if(a.get("uuid")===n.item.get("uuid"))return t=t.setIn(["tags",i,"checked"],n.value).setIn(["tags",i,"tree"],(0,r.fromJS)(n.list)),a.get("selectUuid")&&(e=a.get("selectUuid")),void(n.value&&0===n.list[0].childList.length&&(t=t.setIn(["tags",i,"selectUuid"],n.list[0].uuid).setIn(["tags",i,"selectName"],n.list[0].name),e=n.list[0].uuid))}),n.value){var a=(0,r.fromJS)({ctgyUuid:n.item.get("uuid"),subordinateUuid:e}),i=t.getIn(["inventoryCardTemp","categoryTypeList"]).push(a);t=t.setIn(["inventoryCardTemp","categoryTypeList"],i)}else{var o=t.getIn(["inventoryCardTemp","categoryTypeList"]).findIndex(function(e,t){return e.get("ctgyUuid")===n.item.get("uuid")}),l=t.getIn(["inventoryCardTemp","categoryTypeList"]).delete(o);t=t.setIn(["inventoryCardTemp","categoryTypeList"],l)}return t}),l(e,i.CHANGE_INVENTORY_CONF_CARD_CATEGORY_TYPE,function(){return t.get("tags").map(function(e,a){e.get("uuid")!==n.item.get("uuid")||(t=t.setIn(["tags",a,"selectUuid"],n.uuid).setIn(["tags",a,"selectName"],n.name))}),t.getIn(["inventoryCardTemp","categoryTypeList"]).map(function(e,a){e.get("ctgyUuid")===n.item.get("uuid")&&(t=t.setIn(["inventoryCardTemp","categoryTypeList",a,"subordinateUuid"],n.uuid))}),t}),l(e,i.SAVE_INVENTORY_CONF_CARD_INVENTORY,function(){if("insertAndNew"===n.flag){t.getIn(["inventoryCardTemp","defaultAc"]);t=t.set("inventoryCardTemp",c.get("inventoryCardTemp")).setIn(["inventoryCardTemp","defaultAc"],t.getIn(["inventoryCardTemp","defaultAc"])).setIn(["inventoryCardTemp","categoryTypeList"],t.getIn(["inventoryCardTemp","categoryTypeList"])).setIn(["inventoryCardTemp","code"],n.autoIncrementCode)}return t}),l(e,i.SAVE_INVENTORY_CONF_CARD_RUNNING,function(){return"insertAndNew"===n.flag&&(t=t.setIn(["inventoryCardTemp","name"],"").setIn(["inventoryCardTemp","code"],n.autoIncrementCode)),t}),l(e,i.IVNENTORY_CHARGE_ITEM_CHECKBOX_SELECT,function(){var e=t.getIn(["views","selectList"]),a=t.getIn(["views","selectItem"]),i=n.uuid,o=n.name,l=n.code,u=n.unitList;if(!n.checked&&-1===e.findIndex(function(e){return e===n.uuid})){var c=e.push(n.uuid),s=a.push((0,r.fromJS)({uuid:i,name:o,code:l,unitList:u}));return t.setIn(["views","selectList"],c).setIn(["views","selectItem"],(0,r.fromJS)(s))}if(n.checked){var d=e.splice(e.findIndex(function(e){return e===n.uuid}),1),f=a.splice(e.findIndex(function(e){return e===n.uuid}),1);return t.setIn(["views","selectList"],d).setIn(["views","selectItem"],(0,r.fromJS)(f))}return t}),l(e,i.CHOOSE_ASSIST_UNIFORM,function(){var e=t.getIn(["inventoryCardTemp","financialInfo","assistClassificationList"])||(0,r.fromJS)([]),a=e.map(function(e){return e=n.uuidList.some(function(t){return t===e.get("uuid")})?e.set("isUniform",n.bool):e.set("isUniform",!n.bool)});return t.setIn(["inventoryCardTemp","financialInfo","assistClassificationList"],a)}),l(e,i.EMPTY_WAREHOUSE_LIST_QUANTITY,function(){var e=t.getIn(["inventoryCardTemp","openList"])||(0,r.fromJS)([]),n=function e(t){return t.map(function(t){return t.get("childList")&&t.get("childList").size?t.set("childList",e(t.get("childList"))):t.set("openedQuantity",0)})}(e);return t.setIn(["inventoryCardTemp","openList"],n)}),e)[n.type]||function(){return t})()};var r=n(18),i=o(n(1318));o(n(27)),n(1295);function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=(0,r.fromJS)({views:{insertOrModify:"insert",fromPage:"inventory",standardList:[],customList:[],warehouseList:[],selectedKeys:[],stockList:[],selectList:[],selectItem:[],MemberList:[],thingsList:[],allAssistClassificationList:[],materialSelectedKeys:"all",serialPlaceArr:[],serialList:[],batchList:[]},tags:[],inventoryCardTemp:{code:"",name:"",inventoryNature:5,inventoryAcId:"1405",inventoryAcName:"库存商品",opened:"",remark:"",isAppliedSale:!1,isAppliedPurchase:!1,isAppliedProduce:!1,categoryTypeList:[],contacterInfo:!1,isCheckOut:!1,warehouseList:[],openList:[],isOpenedQuantity:!1,isUniformPrice:!0,unit:{name:"",isStandard:!1,uuid:"",unitList:[]},CurUnit:{},openedQuantity:"",unitPriceList:[{type:1},{type:2}],financialInfo:{assistClassificationList:[],batchList:[]}}})},1470:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments[1];return((e={},l(e,r.BEFORE_ADD_RELATIVE_CARD,function(){return t=t.set("relativeCardTemp",(0,a.fromJS)(i.relativeCardTemp)).set("tags",n.originTags).setIn(["views","insertOrModify"],"insert").setIn(["views","fromPage"],"relative").setIn(["relativeCardTemp","isCheckOut"],n.data.isCheckOut).setIn(["relativeCardTemp","code"],n.code)}),l(e,r.BEFORE_ADD_RELATIVE_CARD_FROM_RUNNING,function(){return t=t.set("relativeCardTemp",(0,a.fromJS)(i.relativeCardTemp)).set("tags",n.originTags).setIn(["views","insertOrModify"],"insert").setIn(["views","fromPage"],"otherPage").setIn(["views","fromPosition"],n.fromPosition).setIn(["relativeCardTemp","isCheckOut"],n.isCheckOut).setIn(["relativeCardTemp","code"],n.receivedData.code).setIn(["views","range"],n.range)}),l(e,r.BEFORE_EDIT_RELATIVE_CARD,function(){return t=t.set("relativeCardTemp",(0,a.fromJS)(n.data)).setIn(["views","insertOrModify"],"modify").setIn(["views","fromPage"],"relative").set("tags",(0,a.fromJS)(n.originTags)),n.data.categoryTypeList.map(function(e,n){t.get("tags").map(function(n,r){e.ctgyUuid!==n.get("uuid")||(t=t.setIn(["tags",r,"checked"],!0).setIn(["tags",r,"selectUuid"],e.subordinateUuid).setIn(["tags",r,"selectName"],e.subordinateName).setIn(["tags",r,"tree"],(0,a.fromJS)(e.options)))})}),t}),l(e,r.CHANGE_RELATIVE_CARD_CONTENT,function(){return t=t.setIn(["relativeCardTemp",n.name],n.value)}),l(e,r.CHANGE_RELATIVE_CARD_CATEGORY_STATUS,function(){var e="";if(t.get("tags").find(function(r,i){if(r.get("uuid")===n.item.get("uuid"))return t=t.setIn(["tags",i,"checked"],n.value).setIn(["tags",i,"tree"],(0,a.fromJS)(n.list)),r.get("selectUuid")&&(e=r.get("selectUuid")),void(n.value&&0===n.list[0].childList.length&&(t=t.setIn(["tags",i,"selectUuid"],n.list[0].uuid).setIn(["tags",i,"selectName"],n.list[0].name),e=n.list[0].uuid))}),n.value){var r=(0,a.fromJS)({ctgyUuid:n.item.get("uuid"),subordinateUuid:e}),i=t.getIn(["relativeCardTemp","categoryTypeList"]).push(r);t=t.setIn(["relativeCardTemp","categoryTypeList"],i)}else{var o=t.getIn(["relativeCardTemp","categoryTypeList"]).findIndex(function(e,t){return e.get("ctgyUuid")===n.item.get("uuid")}),l=t.getIn(["relativeCardTemp","categoryTypeList"]).delete(o);t=t.setIn(["relativeCardTemp","categoryTypeList"],l)}return t}),l(e,r.CHANGE_RELATIVE_CARD_CATEGORY_TYPE,function(){return t.get("tags").map(function(e,a){e.get("uuid")!==n.item.get("uuid")||(t=t.setIn(["tags",a,"selectUuid"],n.uuid).setIn(["tags",a,"selectName"],n.name))}),t.getIn(["relativeCardTemp","categoryTypeList"]).map(function(e,a){e.get("ctgyUuid")===n.item.get("uuid")&&(t=t.setIn(["relativeCardTemp","categoryTypeList",a,"subordinateUuid"],n.uuid))}),t}),l(e,r.SAVE_RELATIVE_CARD,function(){return"insertAndNew"===n.flag&&(t=t.setIn(["relativeCardTemp","name"],"").setIn(["relativeCardTemp","code"],n.autoIncrementCode).setIn(["relativeCardTemp","companyAddress"],"").setIn(["relativeCardTemp","companyTel"],"").setIn(["relativeCardTemp","financeName"],"").setIn(["relativeCardTemp","financeTel"],"").setIn(["relativeCardTemp","receivableOpened"],"").setIn(["relativeCardTemp","advanceOpened"],"").setIn(["relativeCardTemp","payableOpened"],"").setIn(["relativeCardTemp","prepaidOpened"],"")),t}),e)[n.type]||function(){return t})()};var a=n(18),r=o(n(1344)),i=(o(n(27)),n(1295));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=(0,a.fromJS)({views:{insertOrModify:"insert",fromPage:"relative"},tags:[],relativeCardTemp:{name:"",code:"",isPayUnit:!1,isReceiveUnit:!1,payableAcName:"应付账款",receivableAcName:"应收账款",advanceAcName:"预收账款",prepaidAcName:"预付账款",payableAcId:"2202",receivableAcId:"1122",advanceAcId:"2203",prepaidAcId:"1123",companyAddress:"",companyTel:"",financeName:"",financeTel:"",remark:"",receivableOpened:"",advanceOpened:"",payableOpened:"",prepaidOpened:"",categoryTypeList:[],insertFrom:"",enablePrepaidAc:!1,enableAdvanceAc:!1,contacterInfo:!1,isCheckOut:!1}})},1471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments[1];return((e={},l(e,r.BEFORE_ADD_PROJECT_CARD,function(){return n.noFresh||(t=t.set("projectCardTemp",(0,a.fromJS)(u.get("projectCardTemp"))).setIn(["views","insertOrModify"],"insert")),n.noCode||(t=t.setIn(["projectCardTemp","code"],n.code)),t=t.set("typeTree",(0,a.fromJS)(n.data)).setIn(["views","fromPage"],"project"),n.data[0].childList.length<=0?t=t.setIn(["projectCardTemp","selectUuid"],n.data[0].uuid).setIn(["projectCardTemp","selectName"],n.data[0].name):n.noFresh&&(t=t.setIn(["projectCardTemp","selectUuid"],"").setIn(["projectCardTemp","selectName"],"")),t}),l(e,r.CHANGE_PROJECT_PROPERTY,function(){return(t=n.data[0].childList.length<=0?t.setIn(["projectCardTemp","selectUuid"],n.data[0].uuid).setIn(["projectCardTemp","selectName"],n.data[0].name):t.setIn(["projectCardTemp","selectUuid"],"").setIn(["projectCardTemp","selectName"],"")).set("typeTree",(0,a.fromJS)(n.data)).setIn(["projectCardTemp","projectPropertyName"],n.projectPropertyName).setIn(["projectCardTemp","projectProperty"],n.projectProperty)}),l(e,r.BEFORE_ADD_PROJECT_CARD_FROM_RUNNING,function(){return t=t.set("projectCardTemp",(0,a.fromJS)(i.projectCardTemp)).setIn(["projectCardTemp","code"],n.code).set("typeTree",(0,a.fromJS)(n.receivedData)).setIn(["views","insertOrModify"],"insert").setIn(["views","fromPage"],"otherPage").setIn(["views","fromPosition"],n.fromPosition).setIn(["projectCardTemp","categoryTypeList",0,"ctgyUuid"],n.ctgyUuid).setIn(["projectCardTemp","projectProperty"],"XZ_LOSS").setIn(["projectCardTemp","projectPropertyName"],"损益项目"),n.receivedData[0].childList.length<=0&&(t=t.setIn(["projectCardTemp","selectUuid"],n.receivedData[0].uuid).setIn(["projectCardTemp","selectName"],n.receivedData[0].name)),t}),l(e,r.BEFORE_EDIT_PROJECT_CARD,function(){return t=t.set("projectCardTemp",(0,a.fromJS)(n.data)).setIn(["views","insertOrModify"],"modify").setIn(["views","fromPage"],"project").set("projectCardTemp",(0,a.fromJS)(n.data)).set("typeTree",(0,a.fromJS)(n.data.categoryTypeList[0].options)).setIn(["projectCardTemp","selectUuid"],n.data.categoryTypeList[0].subordinateUuid).setIn(["projectCardTemp","selectName"],n.data.categoryTypeList[0].subordinateName).setIn(["projectCardTemp","projectPropertyName"],{XZ_LOSS:"损益项目",XZ_PRODUCE:"生产项目",XZ_CONSTRUCTION:"施工项目"}[n.data.projectProperty])}),l(e,r.CHANGE_PROJECT_CARD_CONTENT,function(){return t=t.setIn(["projectCardTemp",n.name],n.value)}),l(e,r.CHANGE_PROJECT_CARD_CATEGORY_TYPE,function(){return t=t.setIn(["projectCardTemp","selectUuid"],n.uuid).setIn(["projectCardTemp","selectName"],n.name)}),l(e,r.SAVE_PROJECT_CARD,function(){return"insertAndNew"===n.flag&&(t=t.setIn(["projectCardTemp","name"],"").setIn(["projectCardTemp","code"],n.code)),t}),l(e,r.NEW_SAVE_PROJECT_CARD,function(){return"insertAndNew"===n.flag&&(t=t.setIn(["projectCardTemp","name"],"").setIn(["projectCardTemp","basicProductOpen"],"").setIn(["projectCardTemp","contractCostOpen"],"").setIn(["projectCardTemp","engineeringSettlementOpen"],"").setIn(["projectCardTemp","contractProfitOpen"],"").setIn(["projectCardTemp","code"],n.code)),t}),e)[n.type]||function(){return t})()};var a=n(18),r=o(n(1302)),i=(o(n(27)),n(1295));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=(0,a.fromJS)({views:{insertOrModify:"insert",fromPage:"project"},typeTree:[],projectCardTemp:{name:"",code:"",selectUuid:"",selectName:"",categoryTypeList:[{ctgyUuid:"",subordinateUuid:""}],projectProperty:"XZ_LOSS",projectPropertyName:"损益项目"}})},1472:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments[1];return((e={},u(e,r.INIT_PROJECT_CONF,function(){return c}),u(e,r.PROJECT_GET_HTIGH_TYPE,function(){return n.list.unshift({uuid:"",name:"全部"}),t=t.set("originTags",(0,a.fromJS)(n.list)).set("views",c.get("views"))}),u(e,r.GET_PROJECT_LIST_AND_TREE,function(){if(t=t.set("cardList",(0,a.fromJS)(n.cardList)).set("typeTree",(0,a.fromJS)(n.treeList)),!0===n.isFresh){var e=t.get("typeTree");t=t.setIn(["views","selectTypeId"],e.getIn([0,"uuid"])).setIn(["views","selectTypeName"],e.getIn([0,"name"]))}return t.set("parentUuid","").setIn(["views","currentPage"],n.currentPage||1).setIn(["views","pageCount"],n.pageCount||1).setIn(["views","searchContent"],n.condition||"")}),u(e,r.CHANGE_ACTIVE_PROJECT_HIGH_TYPE,function(){return t=t.setIn(["views","activeProjectType"],n.name).setIn(["views","activeProjectTypeUuid"],n.uuid).setIn(["views","activeTapKey"],n.name).setIn(["views","activeTapKeyUuid"],n.uuid).setIn(["views","selectTypeId"],"").setIn(["views","selectTypeName"],"").setIn(["views","cardSelectList"],(0,a.fromJS)([])).set("cardList",(0,a.fromJS)(n.cardList)).set("typeTree",(0,a.fromJS)(n.treeList)),n.name!==i.ALL_TAB_NAME_STR&&(t=t.setIn(["views","selectTypeId"],n.treeList[0].uuid).setIn(["views","selectTypeName"],n.treeList[0].name)),t}),u(e,r.CHANGE_PEOJECT_CONF_CARD_USED_STATUS,function(){return t.get("cardList").map(function(e,a){e.get("uuid")===n.uuid&&(t=t.setIn(["cardList",a,"used"],n.used))}),t}),u(e,r.CHANGE_PEOJECT_CONF_CARD_BOX_STATUS,function(){var e=t.get("cardList"),r=t.getIn(["views","cardSelectList"]);return e.find(function(e,a){e.get("uuid")===n.uuid&&(t=t.setIn(["cardList",a,"checked"],n.status))}),n.status?t=t.setIn(["views","cardSelectList"],t.getIn(["views","cardSelectList"]).push((0,a.fromJS)({uuid:n.uuid}))):r.forEach(function(e,a){e.get("uuid")===n.uuid&&(t=t.setIn(["views","cardSelectList"],t.getIn(["views","cardSelectList"]).delete(a)))}),t}),u(e,r.SELECT_PEOJECT_CONF_CARD_ALL,function(){return n.value?(t=t.setIn(["views","cardSelectList"],(0,a.fromJS)([]))).get("cardList").map(function(e,n){t=t.setIn(["cardList",n,"checked"],!1)}):t.get("cardList").map(function(e,n){t=(t=t.setIn(["views","cardSelectList"],t.getIn(["views","cardSelectList"]).push((0,a.fromJS)({uuid:e.get("uuid")})))).setIn(["cardList",n,"checked"],!0)}),t}),u(e,r.DELETE_PROJECT_CONF_CARD,function(){return t=t.set("cardList",(0,a.fromJS)(n.list)).setIn(["views","cardSelectList"],(0,a.fromJS)([])).set("typeTree",(0,a.fromJS)(n.treeList))}),u(e,r.SELECT_PROJECT_CARD_BY_TYPE,function(){return t=t.setIn(["views","selectTypeId"],n.uuid).setIn(["views","parentUuid"],n.parentUuid).setIn(["views","selectTypeName"],n.name).set("cardList",(0,a.fromJS)(n.list)).setIn(["views","currentPage"],n.currentPage||1).setIn(["views","pageCount"],n.pageCount||1).setIn(["views","searchContent"],n.condition||"")}),u(e,r.GET_PROJECT_HIGH_TYPE_ONE,function(){return t=t.set("projectHighTypeTemp",(0,a.fromJS)(n.data)).setIn(["views","activeProjectType"],n.name).setIn(["views","activeProjectTypeUuid"],n.uuid)}),u(e,r.CHANGE_PREJECT_HIGH_TYPE_CONTENT,function(){return t=t.setIn(["projectHighTypeTemp",n.name],n.value)}),u(e,r.SAVE_PROJECT_CARD,function(){return t=t.set("cardList",(0,a.fromJS)(n.cardlist)).set("typeTree",(0,a.fromJS)(n.treeList))}),u(e,r.BEFORE_ADD_PROJECT_CONFIG_CARD_TYPE,function(){var e=t.get("typeTree").toJS();return function e(t){return t.map(function(t){t.checked=!1,t.childList.length&&e(t.childList)})}(e),t=t.set("typeTree",(0,a.fromJS)(e)).set("projectTypeBtnStatus",(0,a.fromJS)(o.projectTypeBtnStatus)).setIn(["views","typeTreeSelectList"],(0,a.fromJS)([])).setIn(["projectTypeBtnStatus","treeUuid"],t.getIn(["typeTree",0,"uuid"])).setIn(["projectTypeTemp","parentUuid"],t.getIn(["typeTree",0,"uuid"]))}),u(e,r.BEFORE_INSERT_PROJECT_CONF_CARD_TYPE,function(){return t=t.set("projectTypeTemp",(0,a.fromJS)(o.projectTypeTemp)).setIn(["projectTypeTemp","parentUuid"],t.getIn(["projectTypeBtnStatus","treeUuid"])).setIn(["projectTypeTemp","parentName"],t.getIn(["projectTypeBtnStatus","treeName"])).setIn(["projectTypeBtnStatus","isAdd"],!0)}),u(e,r.CHANGE_PROJECT_CONF_CARD_TYPE_CONTENT,function(){return t=t.setIn(["projectTypeTemp",n.name],n.value)}),u(e,r.SELECT_PROJECT_CONF_CARD_TYPE,function(){return t=t.setIn(["projectTypeTemp","parentName"],n.parentName).setIn(["projectTypeTemp","parentUuid"],n.parentUuid)}),u(e,r.GET_PROJECT_CONF_TYPE_CONTENT,function(){return t=t.set("projectTypeTemp",(0,a.fromJS)(n.data)).setIn(["projectTypeBtnStatus","isAdd"],!1),n.isAll?t=t.setIn(["projectTypeBtnStatus","isEdit"],!1).setIn(["projectTypeBtnStatus","treeUuid"],n.uuid).setIn(["projectTypeBtnStatus","treeName"],t.getIn(["typeTree",0,"name"])).setIn(["projectTypeBtnStatus","isUp"],!1).setIn(["projectTypeBtnStatus","isDown"],!1):(t=t.setIn(["projectTypeBtnStatus","isEdit"],!0),t=s(t,n.uuid)),t}),u(e,r.CHANGE_PROJECT_CONF_CARD_TYPE_BOX_STATUS,function(){return t=t.setIn(["views","typeTreeSelectList"],(0,a.fromJS)(n.list))}),u(e,r.PROJECT_CONF_DELETE_BTN_SHOW,function(){return t=t.setIn(["projectTypeBtnStatus","isDelete"],!0)}),u(e,r.CONFIRM_DELETE_PROJECT_CONF_TYPE,function(){var e=(t=t.set("typeTree",(0,a.fromJS)(n.data))).getIn(["projectTypeBtnStatus","treeUuid"]),r=!1;return function t(n){return n.map(function(n){n.uuid===e&&(r=!0),n.childList.length>0&&t(n.childList)})}(n.data),t=(t=r?s(t,e):t.set("projectTypeBtnStatus",(0,a.fromJS)(o.projectTypeBtnStatus)).setIn(["projectTypeBtnStatus","treeUuid"],n.data[0].uuid)).setIn(["projectTypeBtnStatus","isDelete"],!1).setIn(["views","typeTreeSelectList"],(0,a.fromJS)([]))}),u(e,r.CHANGE_PROJECT_CONF_TYPE_POSITION,function(){t=t.set("typeTree",(0,a.fromJS)(n.list));var e=void 0;!function t(a){return a.map(function(a){a.uuid!==n.selectedSubordinateUuid?t(a.childList):e=a})}(n.list);var r=t.getIn(["projectTypeBtnStatus","treeUuid"]);return(t=s(t,r)).set("projectTypeTemp",(0,a.fromJS)(e))}),u(e,r.CANCLE_PROJECT_CONF_TYPE_BTN,function(){return t=t.setIn(["projectTypeBtnStatus","isAdd"],!1).setIn(["projectTypeBtnStatus","isDelete"],!1).set("projectTypeTemp",(0,a.fromJS)(n.data)).setIn(["views","typeTreeSelectList"],(0,a.fromJS)([]))}),u(e,r.PROJECT_CONF_TYPE_DELETE_BTN_SHOW,function(){return t=t.setIn(["projectTypeBtnStatus","isDelete"],!0)}),u(e,r.SAVE_PROJECT_CONF_CARD_TYPE,function(){return t=t.set("typeTree",(0,a.fromJS)(n.typeTree)),"new"!=n.btnFlag?t=s(t,n.uuid):(t=t.set("projectTypeTemp",(0,a.fromJS)(n.typeInfo)).setIn(["projectTypeBtnStatus","treeUuid"],n.typeInfo.uuid).setIn(["projectTypeBtnStatus","isAdd"],!1).setIn(["projectTypeBtnStatus","isEdit"],!0),t=s(t,n.typeInfo.uuid)),t}),u(e,r.ADJUST_PROJECT_CONF_CARD_TYPE_LIST,function(){return t=t.set("cardList",(0,a.fromJS)(n.list)).setIn(["views","cardSelectList"],(0,a.fromJS)([]))}),u(e,r.CHANGE_PROJECT_VIEWS_CONTENT,function(){return t=t.setIn(["views",n.name],n.value)}),e)[n.type]||function(){return t})()};var a=n(18),r=l(n(1302)),i=l(n(27)),o=n(1295);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=(0,a.fromJS)({views:{activeTapKey:"全部",activeTapKeyUuid:"",activeProjectType:"",activeProjectTypeUuid:"",activeTreeKeyUuid:"",typeTreeSelectList:[],cardSelectList:[],selectTypeId:"",selectTypeName:"",searchContent:"",regretResultList:[],regretResultIndex:0,usedCardList:[],cardTypeList:[],cardList:[],categoryList:[]},originTags:[],cardList:[],typeTree:[],projectHighTypeTemp:{name:"",commonFee:!1,uuid:""},projectTypeTemp:{name:"",remark:"",parentName:"全部",parentUuid:"",uuid:""},projectTypeBtnStatus:{isAdd:!1,isDelete:!1,treeUuid:"",treeName:"全部",isUp:!1,isDown:!1,upUuid:"",downUuid:"",isEdit:!1,parentUuid:""}});var s=function(e,t){var n=e.get("typeTree").toJS();if(t!=n[0].uuid){var a="",r=[],i="",o="";!function e(n){return n.map(function(n,r){n.uuid===t&&(a=n.name,i=r,o=n.parentUuid),n.childList.length>0&&e(n.childList)})}(n),e=e.setIn(["projectTypeBtnStatus","treeUuid"],t).setIn(["projectTypeBtnStatus","treeName"],a).setIn(["projectTypeBtnStatus","parentUuid"],o||"");!function e(t){return t.map(function(t,n){t.uuid===o&&(r=t.childList),t.childList.length>0&&e(t.childList)})}(n);var l=Number(i)-1,u=Number(i)+1;e=0===i||"未分类"===a?e.setIn(["projectTypeBtnStatus","isUp"],!1).setIn(["projectTypeBtnStatus","upUuid"],""):e.setIn(["projectTypeBtnStatus","isUp"],!0).setIn(["projectTypeBtnStatus","upUuid"],r[l].uuid),e=i===r.length-1||"未分类"===r[u].name?e.setIn(["projectTypeBtnStatus","isDown"],!1).setIn(["projectTypeBtnStatus","downUuid"],""):e.setIn(["projectTypeBtnStatus","isDown"],!0).setIn(["projectTypeBtnStatus","downUuid"],r[u].uuid)}return e}},1516:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.searchTypeStr=[{value:"PROCESS_SEARCH_TITLE",key:"审批标题"},{value:"PROCESS_SEARCH_SPONSOR",key:"发起人"},{value:"PROCESS_SEARCH_DETAIL_TYPE",key:"明细类型"},{value:"PROCESS_SEARCH_AMOUNT",key:"金额"}],t.searchNameStr={PROCESS_SEARCH_TITLE:"审批标题",PROCESS_SEARCH_SPONSOR:"发起人",PROCESS_SEARCH_DETAIL_TYPE:"明细类型",PROCESS_SEARCH_AMOUNT:"金额"},t.accountingNameStr={ALL:"全部",NONE:"待记账",ACCOUNTING:"已挂账",PAYING:"已付款",INCOME:"已收款",BOOKING:"已核记",DISUSE:"已作废"},t.dateTypeStr=[{value:"DATE_TYPE_ACCOUNTING",key:"记账日期"},{value:"DATE_TYPE_DETAIL",key:"明细日期"},{value:"DATE_TYPE_START",key:"提交日期"},{value:"DATE_TYPE_END",key:"完成日期"}],t.dateNameStr={DATE_TYPE_ACCOUNTING:"记账日期",DATE_TYPE_DETAIL:"明细日期",DATE_TYPE_START:"提交日期",DATE_TYPE_END:"完成日期"},t.accountingTypeStr=[{value:"ALL",key:"全部"},{value:"NONE",key:"待记账"},{value:"ACCOUNTING",key:"已挂账"},{value:"PAYING",key:"已付款"},{value:"INCOME",key:"已收款"},{value:"BOOKING",key:"已核记"},{value:"DISUSE",key:"已作废"}],t.showAccountState={PROCESS_PAYING:"已付",PROCESS_ACCOUNTING:"挂账",PROCESS_DISUSE:"作废",PROCESS_INCOME:"已收",PROCESS_BOOK_KEEPING:"核记"},t.showToolTipAccountState={PROCESS_PAYING:"付款",PROCESS_ACCOUNTING:"挂账",PROCESS_BOOK_KEEPING:"核记",PROCESS_DISUSE:"作废",PROCESS_INCOME:"收款"},t.suitTypeList=["销售存货套件","采购存货套件","内部转账","存货调拨套件"]},1583:function(e,t,n){},1740:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=_(n(61)),i=_(n(37)),o=_(n(1234)),l=_(n(129)),u=_(n(45)),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(79),n(38),n(1235),n(128),n(55);var s=_(n(1)),d=n(56),f=n(18),p=n(101),m=n(22),g=_(n(1237)),y=v(n(27)),C=_(n(483)),h=n(489),E=v(n(486));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}var S=u.default.Option,T=(0,d.connect)(function(e){return e})(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),c(t,[{key:"componentDidMount",value:function(){var e=this.props.allState.get("accountPoundage").get("categoryUuid");e&&this.props.dispatch(E.getSearchApprovalAccountRunningCate(e))}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.dispatch,a=e.allState,u=e.receiveTotalMoney,c=e.editRunningModalState,d=e.approalCalculateState,v=e.poundage,_=e.poundageAmount,T=e.needUsedPoundage,N=e.handlingFeeType,I=d.get("poundageCurrentCardList"),b=d.get("poundageProjectCardList"),O=a.get("accountPoundage"),A=c.get("projectCardList"),R=c.get("contactCardList"),L=d.getIn(["views","accountProjectRange"]),P=d.getIn(["views","accountContactsRange"]),w=0,M=0;return"核记"===t&&("INCLUDE"===N?(w=(0,m.numberCalculate)(u,_),M=u):(w=u,M=(0,m.numberCalculate)(u,_,2,"subtract"))),s.default.createElement("div",null,s.default.createElement("div",{className:"approval-running-card-input-wrap"},s.default.createElement("span",null,s.default.createElement(l.default,{checked:T,onClick:function(){n(E.changeSearchRunningCalculateCommonString("needUsedPoundage",!T))}}," 账户手续费"),O.get("poundageNeedCurrent")&&T?s.default.createElement(o.default,{className:"use-unuse-style edit-running-switch",checked:I.size,checkedChildren:"往来",unCheckedChildren:"往来",onChange:function(){I.size?n(E.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,f.fromJS)([]))):(n(E.getApprovalRelativeCardList(P)),n(E.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,f.fromJS)([{}]))))}}):"",O.get("poundageNeedProject")&&T?s.default.createElement(o.default,{className:"use-unuse-style edit-running-switch",checked:b.size,checkedChildren:"项目",unCheckedChildren:"项目",style:{marginLeft:"10px"},onChange:function(){b.size?n(E.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,f.fromJS)([]))):(n(E.getApprovalProjectCardList(L)),n(E.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,f.fromJS)([{}]))))}}):"")),I.size&&T?s.default.createElement("div",{className:"approval-running-card-input-wrap"},s.default.createElement("span",{className:"approval-running-card-input-tip"},"往来单位："),s.default.createElement("span",{className:"approval-running-card-input"},s.default.createElement(C.default,{combobox:!0,showSearch:!0,value:(I&&I.getIn([0,"code"])?I.getIn([0,"code"]):"")+" "+(I&&I.getIn([0,"name"])?I.getIn([0,"name"]):""),onChange:function(e){var t=e.split(y.TREE_JOIN_STR),a=t[0],r=t[1],i=t[2];n(E.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,f.fromJS)([{cardUuid:a,name:i,code:r}])))}},R.map(function(e,t){return s.default.createElement(S,{key:e.get("uuid"),value:""+e.get("uuid")+y.TREE_JOIN_STR+e.get("code")+y.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))})))):"",b.size&&T?s.default.createElement("div",{className:"approval-running-card-input-wrap"},s.default.createElement("span",{className:"approval-running-card-input-tip"},"项目："),s.default.createElement("span",{className:"approval-running-card-input"},s.default.createElement(C.default,{combobox:!0,showSearch:!0,value:b&&b.getIn([0,"code"])?-1===h.systemProJectCodeCommon.indexOf(b.getIn([0,"code"]))?b.getIn([0,"code"])+" "+b.getIn([0,"name"]):""+b.getIn([0,"name"]):"",onChange:function(e){var t=e.split(y.TREE_JOIN_STR),a=t[0],r=t[1],i=t[2];n(E.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,f.fromJS)([{cardUuid:a,name:i,code:r}])))}},A.map(function(e,t){return s.default.createElement(S,{key:t,value:""+e.get("uuid")+y.TREE_JOIN_STR+e.get("code")+y.TREE_JOIN_STR+e.get("name")},(-1===h.systemProJectCodeCommon.indexOf(e.get("code"))?e.get("code"):"")+" "+e.get("name"))})))):"",T?s.default.createElement("div",null,s.default.createElement("div",{className:"approval-running-card-input-wrap",style:{display:"核记"===t?"none":""}},s.default.createElement("span",{className:"approval-running-card-input-tip"},"收款金额："),s.default.createElement("span",{className:"approval-running-card-input"},u)),s.default.createElement("div",{className:"approval-running-card-input-wrap"},s.default.createElement("span",{className:"approval-running-card-input-tip"},"手续费："),s.default.createElement("span",{className:"approval-running-card-input"},s.default.createElement(g.default,{value:_,onChange:function(e){(0,p.numberTest)(e,function(e){if(v&&v.get("poundage")>0&&Number(e)>v.get("poundage"))return i.default.info("输入金额不可大于手续费上限");n(E.changeSearchRunningCalculateCommonString(["account","poundageAmount"],e))})}}))),s.default.createElement("div",{className:"approval-running-card-input-wrap",style:{display:"核记"===t?"":"none"}},s.default.createElement("span",{className:"approval-running-card-input-tip"}),s.default.createElement("span",{className:"approval-running-card-text"},"转出金额:"+(0,m.formatMoney)(w)+"  到账金额:"+(0,m.formatMoney)(M)+"  手续费："+(0,m.formatMoney)(_)),s.default.createElement(r.default,{title:"切换手续费计费方式"},s.default.createElement(o.default,{className:"use-unuse-style edit-running-switch lend-bg",checked:"INCLUDE"===N,checkedChildren:"",unCheckedChildren:"",onChange:function(){var e="INCLUDE"===N?"EXCLUDE":"INCLUDE",t=0;if("INCLUDE"===e){var a=(0,m.numberCalculate)(u,Number(v.get("poundageRate"))/1e3,2,"multiply");t=a>v.get("poundage")&&v.get("poundage")>0?v.get("poundage"):a}else{var r=(0,m.numberCalculate)((0,m.numberCalculate)(u,1+Number(v.get("poundageRate"))/1e3,4,"divide"),Number(v.get("poundageRate"))/1e3,2,"multiply");t=r>v.get("poundage")&&v.get("poundage")>0?v.get("poundage"):r}n(E.changeSearchRunningCalculateCommonString(["account","poundageAmount"],t)),n(E.changeSearchRunningCalculateCommonString("handlingFeeType",e))}})))):null)}}]),t}())||a;t.default=T},1741:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=h(n(14)),i=h(n(61)),o=h(n(129)),l=h(n(32)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78),n(79),n(128),n(51);var c=h(n(1)),s=n(17),d=n(127),f=C(n(30)),p=n(1516),m=C(n(486)),g=C(n(177)),y=n(18);function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var E=(0,s.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){console.log("Item");var e=this.props,t=e.dispatch,n=e.className,a=e.line,u=e.item,s=e.openEditRunningModal,C=e.addCheckDetailItem,h=e.deleteCheckDetailItem,E=e.selectList,v=e.parent,_=e.editLrAccountPermission,S=e.uuidList,T=e.clearSelectList,N=u.get("detailList"),I=N.map(function(e){return e.get("id")}),b=I.every(function(e){return E.indexOf(e)>-1}),O=function(e){var n="0",a="0",r="0",i="0",o=[],s={JR_HANDLE_NO:"1",JR_HANDLE_HALF:"2",JR_HANDLE_ALL:"3"},d=e.get("jrState"),f=e.get("jrCategoryType");return"LB_YYSR"!==f&&"LB_YYWSR"!==f||(e.get("jrAmount")>0?n=s[d]:e.get("jrAmount")<0&&(r=s[d])),"LB_YYZC"!==f&&"LB_YYWZC"!==f&&"LB_FYZC"!==f||(e.get("jrAmount")>0?a=s[d]:e.get("jrAmount")<0&&(r=s[d])),"LB_XCZC"===f&&(i=s[d]),[{key:"receive",value:n},{key:"pay",value:a},{key:"shouldReturn",value:r},{key:"makeOut",value:"0"},{key:"auth",value:"0"},{key:"carryover",value:"0"},{key:"grant",value:i},{key:"defray",value:"0"},{key:"takeBack",value:"0"},{key:"back",value:"0"}].forEach(function(n){!function(e,n,a,r){var i={shouldReturn:"核销",pay:"核销",receive:"核销",makeOut:"开票",auth:"认证",carryover:"结转",grant:"核销",defray:"核销",takeBack:"核销",back:"核销"},o={shouldReturn:"退款",pay:"付款",receive:"收款",makeOut:"开票",auth:"认证",carryover:"结转",grant:r.get("jrAmount")<0?"收款":"发放",defray:r.get("notHandleAmount")<0?"收款":"缴纳",takeBack:"收回",back:"退还"};switch(e){case"1":n.push(c.default.createElement("div",{key:"a1"+a,className:"search-approval-table-line"},c.default.createElement("span",{className:"search-approval-table-frist-child"},"未"+i[a]),c.default.createElement(l.default,{type:"ghost",disabled:!_,onClick:function(){switch(a){case"shouldReturn":t(m.getBusinessManagerModal(u,r,function(){v.setState({manageModal:!0})},"STATE_YYZC_TG"===r.get("oriState")?"debit":"credit","shouldReturn"));break;case"pay":t(m.getBusinessManagerModal(u,r,function(){v.setState({manageModal:!0})},"credit","pay"));break;case"receive":t(m.getBusinessManagerModal(u,r,function(){v.setState({manageModal:!0})},"debit","receive"));break;case"makeOut":t(m.getBusinessInvioceModal(u,r,function(){v.setState({invioceModal:!0})}));break;case"auth":t(m.getBusinessDefineModal(u,r,function(){v.setState({defineModal:!0})}));break;case"carryover":t(m.getBusinessJzsyModal(u,r,function(){v.setState({jzsyModal:!0})}));break;case"grant":t(m.getBusinessGrantModal(u,r,function(){v.setState({grantModal:!0})}));break;case"defray":t(m.getBusinessDefrayModal(u,r,function(){v.setState({defrayModal:!0})}));break;case"takeBack":t(m.getBusinessTakeBackModal(u,r,function(){v.setState({takeBackModal:!0})}));break;case"back":t(m.getBusinessBackModal(u,r,function(){v.setState({backModal:!0})}))}}},o[a])));break;case"2":n.push(c.default.createElement("div",{key:"a2"+a,className:"search-approval-table-line"},c.default.createElement("span",{className:"search-approval-table-frist-child"},"部分核销"),c.default.createElement(l.default,{type:"ghost",disabled:!_,onClick:function(){switch(a){case"shouldReturn":t(m.getBusinessManagerModal(u,r,function(){v.setState({manageModal:!0})},"STATE_YYZC_TG"===r.get("oriState")?"debit":"credit","shouldReturn"));break;case"pay":t(m.getBusinessManagerModal(u,r,function(){v.setState({manageModal:!0})},"credit","pay"));break;case"receive":t(m.getBusinessManagerModal(u,r,function(){v.setState({manageModal:!0})},"debit","receive"));break;case"makeOut":t(m.getBusinessInvioceModal(u,r,function(){v.setState({invioceModal:!0})}));break;case"auth":t(m.getBusinessDefineModal(u,r,function(){v.setState({defineModal:!0})}));break;case"carryover":t(m.getBusinessJzsyModal(u,r,function(){v.setState({jzsyModal:!0})}));break;case"grant":t(m.getBusinessGrantModal(u,r,function(){v.setState({grantModal:!0})}));break;case"defray":t(m.getBusinessDefrayModal(u,r,function(){v.setState({defrayModal:!0})}));break;case"takeBack":t(m.getBusinessTakeBackModal(u,r,function(){v.setState({takeBackModal:!0})}));break;case"back":t(m.getBusinessBackModal(u,r,function(){v.setState({backModal:!0})}))}}},o[a])));break;case"3":n.push(c.default.createElement("div",{key:"a3"+a,className:"search-approval-table-line"},c.default.createElement("span",{className:"search-approval-table-frist-child"},"shouldReturn"===a||"pay"===a||"receive"===a?"全部核销":"已"+i[a])))}}(n.value,o,n.key,e)}),{elementList:o}};return c.default.createElement(d.CxpzTableItem,{className:n,line:a},c.default.createElement("li",{onClick:function(){b?h(I.toJS()):C(I.toJS())}},c.default.createElement(o.default,{checked:b})),c.default.createElement(d.TableOver,{textAlign:"left"},u.get("createTime").substr(0,10)),c.default.createElement(d.TableOver,{textAlign:"left"},u.get("finishTime").substr(0,10)),c.default.createElement("li",null,c.default.createElement("span",{className:"table-item-line-mutil-line"},c.default.createElement(i.default,{placement:"top",title:c.default.createElement("div",{className:"table-item-line-tooltip"},c.default.createElement("div",null,u.get("processTitle")),c.default.createElement("div",null,"(单号:"+u.get("processBusinessCode")+")"))},c.default.createElement("p",{className:"table-item-line-click",onClick:function(){f.openSlidePanel("https://aflow.dingtalk.com/dingtalk/pc/query/pchomepage.htm?corpid="+sessionStorage.getItem("corpId")+"#/approval?procInstId="+u.get("processInstanceId"),"查看审批")}},u.get("processTitle"))))),c.default.createElement("li",null,N.map(function(e,t){return c.default.createElement("p",{className:"table-item-line",key:t,onClick:function(){E.indexOf(e.get("id"))>-1?h([e.get("id")]):C([e.get("id")])}},c.default.createElement(o.default,{checked:E.indexOf(e.get("id"))>-1}))})),c.default.createElement("li",null,N.map(function(e,n){return c.default.createElement("p",{className:"table-item-line table-item-line-click",key:n,onClick:function(){t(m.getApprovalProcessDetailInfo(e.get("id"),function(){return s()}))}},e.get("detailType"))})),c.default.createElement("li",null,N.map(function(e,t){return c.default.createElement("p",{className:"table-item-line",key:t},e.get("jrDate").substr(0,10))})),c.default.createElement("li",null,N.map(function(e,t){return c.default.createElement("p",{className:"table-item-line-amonut",key:t},c.default.createElement(d.Amount,{className:"table-item-line-amonut",showZero:!0},e.get("jrAmount")))})),c.default.createElement("li",null,N.map(function(e,n){return c.default.createElement("p",{className:"table-item-line search-approval-table-line",key:n},c.default.createElement("span",{className:"search-approval-table-frist-child"},p.showAccountState[e.get("dealState")]?p.showAccountState[e.get("dealState")]:""),e.get("dealState")?c.default.createElement("span",{className:"table-item-line-click",onClick:function(n){_&&t(m.cancelApprovalProcessDetailInfo([e.get("id")],function(){return T()}))}},c.default.createElement(i.default,{placement:"top",title:"反"+p.showToolTipAccountState[e.get("dealState")]},c.default.createElement(r.default,{type:"rollback",style:{color:_?"#333":"#ccc"}}))):"")})),c.default.createElement("li",null,N.map(function(e,n){return c.default.createElement("p",{className:"table-item-line search-approval-table-line",key:n},e.get("jrIndex")?c.default.createElement("span",{className:"search-approval-table-frist-child"},e.get("oriDate")):null,e.get("jrIndex")?c.default.createElement("span",{className:"table-item-line-click",onClick:function(n){n.stopPropagation(),t(g.getPreviewRunningBusinessFetch((0,y.fromJS)({oriUuid:e.get("jrOriUuid")}),"approval",S,function(){t(m.getApprovalProcessList({refresh:!0}))}))}},e.get("jrIndex")+" 号"):"")})),c.default.createElement("li",null,N.map(function(e,t){return c.default.createElement("p",{className:"table-item-line",key:t},O(e).elementList)})),c.default.createElement("li",null,N.map(function(e,t){return c.default.createElement("p",{className:"table-item-line",key:t},e.get("operateUserName"))})))}}]),t}())||a;t.default=E},1742:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=u(n(129)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(128);var o=u(n(1)),l=n(17);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(486));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,l.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=(e.dispatch,e.className),n=e.selectAll,a=e.onClick,i=e.sortByBeginDateCallBack,l=e.sortByEndDateCallBack,u=e.sortByDealtypeCallBack;return o.default.createElement("div",{className:"table-title-wrap"},o.default.createElement("ul",{className:t+" table-title"},o.default.createElement("li",{onClick:a},o.default.createElement(r.default,{checked:n})),o.default.createElement("li",{className:"cxpz-cur",onClick:function(){i()}},"提交日期",o.default.createElement("span",{className:"cxpz-sort-icon"})),o.default.createElement("li",{className:"cxpz-cur",onClick:function(){l()}},"完成日期",o.default.createElement("span",{className:"cxpz-sort-icon"})),o.default.createElement("li",null,"审批标题"),o.default.createElement("li",null,"操作"),o.default.createElement("li",null,"明细类型"),o.default.createElement("li",null,"明细日期"),o.default.createElement("li",null,"明细金额"),o.default.createElement("li",{className:"cxpz-cur",onClick:function(){u()}},"记账状态",o.default.createElement("span",{className:"cxpz-sort-icon"})),o.default.createElement("li",null,"记账流水"),o.default.createElement("li",null,"流水状态"),o.default.createElement("li",null,"记账员")))}}]),t}())||a;t.default=c},2482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=S(n(1)),u=S(n(0)),c=n(56),s=n(18);n(2483);var d=S(n(1224)),f=(_(n(27)),n(482),n(489)),p=S(n(2485)),m=S(n(2486)),g=S(n(2489)),y=S(n(2500)),C=S(n(2502)),h=_(n(60)),E=_(n(486)),v=_(n(177));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}var T=(0,c.connect)(function(e){return e})((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showEditRunningModal:!1,selectList:[],showPayModal:!1,showAccountModal:!1,showReceiveModal:!1,showBookKeepingModal:!1,receiveType:"modal",receiveMoney:0,receiveAccountUuid:"",confirmAccountingApprovalDetail:null,confirmReceiveApprovalDetail:null,confirmPayApprovalDetail:null,confirmBookKeepingApprovalDetail:null,deleteModalShow:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"componentDidMount",value:function(){this.props.dispatch(E.getApprovalProcessList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:"DATE_TYPE_END",beginDate:null,endDate:null,accountingType:"ALL",isAsc:!1,orderField:"ORDER_DATE_END"},1)),this.props.dispatch(h.setDdConfig())}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.allState!==e.allState||this.props.homeState!==e.homeState||this.props.searchApprovalState!==e.searchApprovalState||this.state!==t}},{key:"componentWillReceiveProps",value:function(e){this.props.homeState.get("homeActiveKey")===e.homeState.get("homeActiveKey")&&this.props.homeState.get("pageActive")===e.homeState.get("pageActive")||!0!==this.props.allState.getIn(["views","searchRunningPreviewVisibility"])||this.props.dispatch(v.closePreviewRunning()),(0,s.is)(this.props.searchApprovalState.get("approvalList"),e.searchApprovalState.get("approvalList"))||this.setState({selectList:[]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.allState,a=t.dispatch,r=t.searchApprovalState,i=t.homeState,o=this.state,u=o.showEditRunningModal,c=o.selectList,s=o.showPayModal,h=o.showAccountModal,_=o.showReceiveModal,S=o.showBookKeepingModal,T=o.confirmAccountingApprovalDetail,N=o.confirmReceiveApprovalDetail,I=o.confirmPayApprovalDetail,b=o.confirmBookKeepingApprovalDetail,O=o.receiveType,A=(o.receiveMoney,o.receiveAccountUuid),R=o.deleteModalShow,L=i.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]),P=(i.getIn(["data","userInfo"]).getIn(["pageController","QUERY_PROCESS","preDetailList"]),i.get("pageList")),w=i.getIn(["views","isSpread"]),M=r.getIn(["views","searchType"]),D=r.getIn(["views","accountingType"]),k=r.getIn(["views","beginDate"]),j=r.getIn(["views","dateType"]),U=r.getIn(["views","endDate"]),J=r.getIn(["views","searchContent"]),x=r.getIn(["views","orderField"]),H=r.getIn(["views","sortByBeginDate"]),G=r.getIn(["views","sortByEndDate"]),Y=r.getIn(["views","sortByDealtype"]),F=r.get("approvalList"),B=r.get("currentPage"),V=r.get("pageCount"),K=r.get("canDeleteIdList"),W=n.getIn(["views","searchRunningPreviewVisibility"]),z=!1,Q=!1,Z=!1,X=!1,q=!1,$=!1,ee=0;return c.length&&F.forEach(function(e){e.get("detailList").forEach(function(e){c.indexOf(e.get("id"))>-1&&(e.get("dealState")||(q=!0,f.hideCategoryCanSelect.indexOf(e.get("jrCategoryType"))>-1?Q=!0:(z=!0,f.receiptList.indexOf(e.get("jrCategoryType"))>-1?(e.get("jrAmount")>0?(X=!0,ee+=e.get("jrAmount")):e.get("jrAmount")<0&&(Z=!0),e.getIn(["account","accountUuid"])&&($=!0)):e.get("jrAmount")>0?Z=!0:e.get("jrAmount")<0&&(X=!0,ee-=e.get("jrAmount")))))})}),l.default.createElement(d.default,{type:"search-three",className:"search-approval",onClick:function(){W&&a(v.closePreviewRunning())}},l.default.createElement(p.default,{pageList:P,isSpread:w,dispatch:a,receiveTotalMoney:ee,selectList:c,clearSelectList:function(){return e.setState({selectList:[]})},searchType:M,beginDate:k,dateType:j,endDate:U,accountingType:D,searchContent:J,editLrAccountPermission:L,sortByBeginDate:H,sortByEndDate:G,orderField:x,approvalList:F,onShowPayModal:function(){return e.setState({showPayModal:!0})},onShowAccountModal:function(){return e.setState({showAccountModal:!0})},onShowReceiveModal:function(){return e.setState({showReceiveModal:!0})},onShowBookKeepingModal:function(){return e.setState({showBookKeepingModal:!0})},canAccount:z,canPay:Z,canReceive:X,canDisuse:q,canBookkeeping:Q,setConfirmAccountingApprovalDetail:function(t){return e.setState({confirmAccountingApprovalDetail:t})},setConfirmReceiveApprovalDetail:function(t){return e.setState({confirmReceiveApprovalDetail:t})},setConfirmPayApprovalDetail:function(t){return e.setState({confirmPayApprovalDetail:t})},setBookKeepingApprovalDetail:function(t){return e.setState({confirmBookKeepingApprovalDetail:t})},openDeleteModal:function(){return e.setState({deleteModalShow:!0})}}),l.default.createElement(m.default,{approvalList:F,dispatch:a,openEditRunningModal:function(){return e.setState({showEditRunningModal:!0})},addCheckDetailItem:function(t){var n=Array.from(new Set(c.concat(t)));e.setState({selectList:n})},deleteCheckDetailItem:function(t){var n=c.filter(function(e){return-1===t.indexOf(e)});e.setState({selectList:n})},selectList:c,setSelectList:function(t){return e.setState({selectList:t})},editLrAccountPermission:L,currentPage:B,pageCount:V,paginationCallBack:function(e){a(E.getApprovalProcessList({searchType:M,searchContent:J,dateType:j,beginDate:k,endDate:U,accountingType:D,orderField:x,isAsc:""},e))},sortByBeginDateCallBack:function(){a(E.getApprovalProcessList({searchType:M,searchContent:J,dateType:j,beginDate:k,endDate:U,accountingType:D,orderField:"ORDER_DATE_START",isAsc:!H},1))},sortByEndDateCallBack:function(){a(E.getApprovalProcessList({searchType:M,searchContent:J,dateType:j,beginDate:k,endDate:U,accountingType:D,orderField:"ORDER_DATE_END",isAsc:!G},1))},sortByDealtypeCallBack:function(){a(E.getApprovalProcessList({searchType:M,searchContent:J,dateType:j,beginDate:k,endDate:U,accountingType:D,orderField:"ORDER_DEAl_TYPE",isAsc:!Y},1))},clearSelectList:function(){return e.setState({selectList:[]})},sortByBeginDate:H,sortByEndDate:G,sortByDealtype:Y}),u?l.default.createElement(g.default,{onShowPayModal:function(){return e.setState({showPayModal:!0})},onShowAccountModal:function(){return e.setState({showAccountModal:!0})},onShowReceiveModal:function(){return e.setState({showReceiveModal:!0})},onShowBookKeepingModal:function(){return e.setState({showBookKeepingModal:!0})},onCancel:function(){e.setState({showEditRunningModal:!1}),a(E.clearSearchApprovalTemp())},setSelectList:function(t){return e.setState({selectList:t})},setConfirmAccountingApprovalDetail:function(t){return e.setState({confirmAccountingApprovalDetail:t})},setConfirmReceiveApprovalDetail:function(t){return e.setState({confirmReceiveApprovalDetail:t})},setConfirmPayApprovalDetail:function(t){return e.setState({confirmPayApprovalDetail:t})},setBookKeepingApprovalDetail:function(t){return e.setState({confirmBookKeepingApprovalDetail:t})},setReceiveMoney:function(t,n){e.setState({receiveType:"modal",receiveMoney:t,receiveAccountUuid:n})},cancelSetReceiveMoney:function(){e.setState({receiveType:"",receiveMoney:0,receiveAccountUuid:""})}}):null,l.default.createElement(y.default,{showPayModal:s,showAccountModal:h,showReceiveModal:_,showBookKeepingModal:S,selectList:c,canSetAccount:$,receiveTotalMoney:ee,callBack:function(){return e.setState({selectList:[]})},cancelShowPayModal:function(){return e.setState({showPayModal:!1})},cancelShowAccountModal:function(){return e.setState({showAccountModal:!1})},cancelShowReceiveModal:function(){return e.setState({showReceiveModal:!1})},cancelShowBookKeepingModal:function(){return e.setState({showBookKeepingModal:!1})},confirmAccountingApprovalDetail:function(e,t){return T(e,t)},confirmReceiveApprovalDetail:function(e,t){return N(e,t)},confirmPayApprovalDetail:function(e,t){return I(e,t)},confirmBookKeepingApprovalDetail:function(e,t){return b(e,t)},receiveType:O,editLrAccountPermission:L,receiveAccountUuid:A,cancelSetReceiveMoney:function(){e.setState({receiveType:"",receiveMoney:0,receiveAccountUuid:""})}}),R?l.default.createElement(C.default,{onCloseModal:function(){return e.setState({deleteModalShow:!1})},canDeleteIdList:K,clearSelectList:function(){return e.setState({selectList:[]})},approvalList:F,editLrAccountPermission:L,dispatch:a}):null)}}]),t}(),r.displayName="SearchApproval",r.propTypes={allState:u.default.instanceOf(s.Map),dispatch:u.default.func},a=i))||a;t.default=T},2483:function(e,t,n){},2485:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=v(n(32)),i=v(n(14)),o=v(n(100)),l=v(n(45)),u=v(n(1230)),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(51),n(78),n(99),n(55),n(1231);var s=v(n(1)),d=n(17),f=v(n(6)),p=(n(127),n(22),n(18),E(n(30)),E(n(27)),v(n(1227))),m=v(n(1226)),g=(v(n(483)),v(n(1740)),n(1516)),y=E(n(60)),C=E(n(43)),h=(E(n(103)),E(n(486)));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}function _(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var S=u.default.RangePicker,T=(l.default.Option,(0,d.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),c(t,[{key:"render",value:function(){var e=this.props,t=e.pageList,n=e.isSpread,a=e.dispatch,u=e.receiveTotalMoney,c=e.selectList,d=e.clearSelectList,E=e.searchType,v=e.searchContent,T=e.beginDate,N=e.dateType,I=e.endDate,b=e.accountingType,O=e.editLrAccountPermission,A=e.orderField,R=e.approvalList,L=e.onShowPayModal,P=e.onShowAccountModal,w=e.onShowReceiveModal,M=e.onShowBookKeepingModal,D=e.canAccount,k=e.canPay,j=e.canReceive,U=e.canDisuse,J=e.canBookkeeping,x=e.setConfirmAccountingApprovalDetail,H=e.setConfirmReceiveApprovalDetail,G=e.setConfirmPayApprovalDetail,Y=e.setBookKeepingApprovalDetail,F=e.openDeleteModal;return s.default.createElement(m.default,null,s.default.createElement("div",{className:"flex-title-left"},n||t.getIn(["Search","pageList"]).size<=1?"":s.default.createElement(p.default,{pageItem:t.get("Search"),onClick:function(e,t,n){a(y.addPageTabPane("SearchPanes",n,n,t)),a(y.addHomeTabpane(e,n,t))}}),s.default.createElement("span",{className:"search-approval-time-picker"},s.default.createElement(l.default,{style:{width:80},className:"search-approval-time-picker-select",defaultValue:"流水类别",value:g.dateNameStr[N],onSelect:function(e){return a(h.getApprovalProcessList({searchType:E,searchContent:v,dateType:e,beginDate:T,endDate:I,accountingType:b,orderField:A,isAsc:""},1))}},g.dateTypeStr.map(function(e,t){return s.default.createElement(l.default.Option,{key:e.key,value:e.value},e.key)})),s.default.createElement(S,{className:"search-approval-time-picker-range-picker",value:T?[(0,f.default)(T,"YYYY-MM-DD"),(0,f.default)(I,"YYYY-MM-DD")]:[],format:"YYYY-MM-DD",allowClear:!1,onChange:function(e,t){t.length>1&&a(h.getApprovalProcessList({searchType:E,searchContent:v,dateType:N,beginDate:t[0],endDate:t[1],accountingType:b,orderField:A,isAsc:""},1))}})),s.default.createElement("span",{className:"search-approval-cxls-select"},s.default.createElement(l.default,{style:{width:80},className:"cxls-type-choose",defaultValue:"全部",value:g.accountingNameStr[b],onSelect:function(e){return a(h.getApprovalProcessList({searchType:E,searchContent:v,dateType:N,beginDate:T,endDate:I,accountingType:e,orderField:A,isAsc:""},1))}},g.accountingTypeStr.map(function(e,t){return s.default.createElement(l.default.Option,{key:e.key,value:e.value},e.key)}))),s.default.createElement("span",{className:"search-approval-serch"},s.default.createElement(l.default,{style:{width:80},className:"search-approval-serch-choose",defaultValue:"流水类别",value:g.searchNameStr[E],onSelect:function(e){return a(h.changeSearchApprovalCommonString("searchType",e))}},g.searchTypeStr.map(function(e,t){return s.default.createElement(l.default.Option,{key:e.key,value:e.value},e.key)})),s.default.createElement(o.default,{placeholder:"搜索流水",className:"search-approval-serch-input",value:v,onChange:function(e){return a(h.changeSearchApprovalCommonString("searchContent",e.target.value))},onPressEnter:function(e){a(h.getApprovalProcessList({searchType:E,searchContent:e.target.value,dateType:N,beginDate:T,endDate:I,accountingType:b,orderField:A,isAsc:""},1))}}),v?s.default.createElement(i.default,{className:"search-approval-serch-icon-close",type:"close-circle",theme:"filled",onClick:function(){a(h.changeSearchApprovalCommonString("searchContent","")),a(h.getApprovalProcessList({searchType:E,searchContent:"",dateType:N,beginDate:T,endDate:I,accountingType:b,orderField:A,isAsc:""},1))}}):null,s.default.createElement("span",{className:"search-approval-serch-icon-separation"}),s.default.createElement(i.default,{className:"search-approval-serch-icon-search",type:"search",onClick:function(){a(h.getApprovalProcessList({searchType:E,searchContent:v,dateType:N,beginDate:T,endDate:I,accountingType:b,orderField:A,isAsc:""},1))}}))),s.default.createElement("div",{className:"flex-title-right"},s.default.createElement(r.default,{type:"ghost",className:"title-right",disabled:!O||!J,onClick:function(){M(),Y(function(e,t){a(h.bookKeepingApprovalProcessDetailInfo.apply(h,[c].concat(_(e),[function(){t(),d()}])))})}},"核记"),s.default.createElement(r.default,{type:"ghost",className:"title-right",disabled:!D||!O,onClick:function(){P(),x(function(e,t){a(h.accountingApprovalProcessDetailInfo.apply(h,[c].concat(_(e),[function(){t(),d()}])))})}},"挂账"),s.default.createElement(r.default,{type:"ghost",className:"title-right",disabled:!k||!O,onClick:function(){L(),G(function(e,t){a(h.payingApprovalProcessDetailInfo.apply(h,[c].concat(_(e),[function(){t(),d()}])))})}},"付款"),s.default.createElement(r.default,{type:"ghost",className:"title-right",disabled:!j||!O,onClick:function(){w(),a(h.changeSearchRunningCalculateCommonString("receiveTotalMoney",u)),H(function(e,t){a(h.receiveApprovalProcessDetailInfo.apply(h,[c].concat(_(e),[function(){t(),d()}])))})}},"收款"),s.default.createElement(r.default,{type:"ghost",className:"title-right",disabled:!U||!O,onClick:function(){a(h.disuseApprovalProcessDetailInfo(c,function(){d()}))}},"作废"),s.default.createElement(r.default,{type:"ghost",className:"title-right",disabled:!R.size||!O,onClick:function(){a(h.getApprovalProcessCanDeleteList(R.map(function(e){return e.get("id")}),function(){return F()}))}},"删除"),s.default.createElement(r.default,{type:"ghost",className:"title-right",onClick:function(){a(h.getApprovalProcessList({refresh:!0})),a(C.freshSearchPage("查询审批"))}},"刷新")))}}]),t}())||a);t.default=T},2486:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=m(n(1)),o=n(17),l=n(18),u=n(22),c=n(127),s=m(n(1741)),d=m(n(1742)),f=m(n(2487)),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(486));function m(e){return e&&e.__esModule?e:{default:e}}var g=(0,o.immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initModal=function(e){var t,a,r;n.setState((r=!1,(a=e)in(t={})?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t)),n.props.dispatch(p.changeSearchRunningCalculateCommonString("modalTemp",(0,l.fromJS)({oriDate:(0,u.formatDate)().substr(0,10)})))},n.state={manageModal:!1,carryoverModal:!1,invioceModal:!1,defineModal:!1,jzsyModal:!1,grantModal:!1,backModal:!1,takeBackModal:!1,defrayModal:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.paginationCallBack,a=t.dispatch,r=t.approvalList,o=t.openEditRunningModal,u=t.addCheckDetailItem,p=t.deleteCheckDetailItem,m=t.selectList,g=t.setSelectList,y=t.editLrAccountPermission,C=t.currentPage,h=t.pageCount,E=t.clearSelectList,v=t.sortByBeginDateCallBack,_=t.sortByEndDateCallBack,S=t.sortByDealtypeCallBack,T=this.state,N=T.manageModal,I=T.carryoverModal,b=T.invioceModal,O=T.defineModal,A=T.jzsyModal,R=T.grantModal,L=T.backModal,P=T.takeBackModal,w=T.defrayModal,M=(0,l.fromJS)([]),D=0;r.map(function(e,t){e.get("detailList").forEach(function(e){if(D+=1,e.get("jrOriUuid")){var t=e.set("oriUuid",e.get("jrOriUuid"));M=M.push(t)}})});var k=D===m.length;return i.default.createElement(c.TableWrap,{notPosition:!0},i.default.createElement(c.TableAll,null,i.default.createElement(d.default,{className:"search-approval-table-width search-approval-table-title-justify",selectAll:k&&r.size,onClick:function(){if(r.size)if(k)g([]);else{var e=[];r.map(function(t,n){t.get("detailList").forEach(function(t){e.push(t.get("id"))})}),g(e)}},sortByBeginDateCallBack:v,sortByEndDateCallBack:_,sortByDealtypeCallBack:S}),i.default.createElement(c.TableBody,null,r&&r.map(function(t,n){return i.default.createElement(s.default,{className:"search-approval-table-width search-approval-table-style",line:n+1,item:t,dispatch:a,openEditRunningModal:o,addCheckDetailItem:u,deleteCheckDetailItem:p,selectList:m,parent:e,editLrAccountPermission:y,uuidList:M,clearSelectList:E})})),i.default.createElement(c.TablePagination,{currentPage:C,pageCount:h,paginationCallBack:function(e){return n(e)}})),i.default.createElement(f.default,{manageModal:N,carryoverModal:I,invioceModal:b,defineModal:O,jzsyModal:A,grantModal:R,backModal:L,takeBackModal:P,defrayModal:w,parent:this,initModal:function(t){return e.initModal(t)}}))}}]),t}())||a;t.default=g},2487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=T(n(45)),i=T(n(47)),o=T(n(100)),l=T(n(1230)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(55),n(46),n(99),n(1231);var c=T(n(1)),s=n(56),d=n(18),f=(T(n(1741)),T(n(1742)),n(127),T(n(1237))),p=n(101),m=T(n(6)),g=S(n(27)),y=(n(22),n(482)),C=T(n(1453)),h=T(n(2488)),E=n(488),v=n(43),_=S(n(486));function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=(0,s.connect)(function(e){return e})(a=function(e){function t(){return N(this,t),I(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.manageModal,n=e.grantModal,a=(e.defrayModal,e.takeBackModal,e.backModal,e.jzsyModal,e.invioceModal,e.defineModal,e.allState),r=e.homeState,u=e.searchRunningAllState,s=e.parent,d=e.approalCalculateState,g=e.dispatch,S=e.initModal,T=e.editRunningModalState,N=d.get("runningFlowTemp"),I=d.get("views"),b=N.get("categoryType"),O=d.get("modalTemp"),R=(O.get("stockCardList"),y.categoryTypeAll[b]),L=N.getIn(["currentCardList",0]),P=(N.get("oriDate"),N.get("magenerType")),w=(N.get("propertyPay"),a.get("accountList")),M=a.get("accountPoundage"),D=r.getIn(["data","userInfo","sobInfo","moduleInfo"]),k=u.get("enclosureList"),j=u.get("label"),U=r.getIn(["permissionInfo","LrAccount"]),J=!D||D.indexOf("ENCLOSURE_RUN")>-1,x="TRUE"===r.getIn(["data","userInfo","checkMoreFj"]),H=a.get("uploadKeyJson"),G=T.get("projectCardList"),Y=T.get("contactCardList"),F=void 0,B=void 0,V=void 0,K=null;return t?(B=("debit"===P?"收款":"付款")+"核销",F=function(){S("manageModal")},V=function(){g(_.insertRunningManagerModal(function(){return s.setState({manageModal:!1})},R))},K=c.default.createElement("div",{className:"manager-content"},L?c.default.createElement("div",null,c.default.createElement("label",null,"往来单位："),(L&&L.get("code"))+" "+(L&&L.get("name"))):"",c.default.createElement("div",{className:"manager-item"},c.default.createElement("label",null,"日期："),c.default.createElement(l.default,{allowClear:!1,disabledDate:function(e){return(0,m.default)(O.getIn(["pendingManageDto","pendingManageList",0,"oriDate"]))>e},value:O.get("oriDate")?(0,m.default)(O.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");g(_.changeSearchRunningCalculateCommonString(["modalTemp","oriDate"],t))}})),c.default.createElement("div",{className:"manager-item"},c.default.createElement("label",null,"摘要："),c.default.createElement(o.default,{onFocus:function(e){return e.target.select()},value:O.get("oriAbstract"),onChange:function(e){g(_.changeSearchRunningCalculateCommonString(["modalTemp","oriAbstract"],e.target.value))}})),c.default.createElement("div",{className:"manager-item"},c.default.createElement("label",null,("debit"===P?"收款":"付款")+"金额："),c.default.createElement(f.default,{value:O.get("amount"),onChange:function(e){(0,p.numberTest)(e,function(e){g(_.changeSearchRunningCalculateCommonString(["modalTemp","amount"],e))})}})),c.default.createElement(A,{modalTemp:O,dispatch:g,accountList:w}),"debit"===P?c.default.createElement(h.default,{dispatch:g,accountPoundage:M,modalTemp:O,flags:I,projectCardList:G,contactCardList:Y}):"")):n&&(B="debit"===P?"收款核销":"付款核销",F=function(){S("grantModal")},V=function(){g(_.insertCommonModal(function(){return s.setState({grantModal:!1})},R,"","insertJrPayment"))},K=c.default.createElement("div",{className:"manager-content"},L?c.default.createElement("div",null,c.default.createElement("label",null,"往来单位："),(L&&L.get("code"))+" "+(L&&L.get("name"))):"",c.default.createElement("div",{className:"manager-item"},c.default.createElement("label",null,"日期："),c.default.createElement(l.default,{allowClear:!1,disabledDate:function(e){return(0,m.default)(O.getIn(["pendingManageDto","pendingManageList",0,"oriDate"]))>e},value:O.get("oriDate")?(0,m.default)(O.get("oriDate")):"",onChange:function(e){var t=e.format("YYYY-MM-DD");g(_.changeSearchRunningCalculateCommonString(["modalTemp","oriDate"],t))}})),c.default.createElement("div",{className:"manager-item"},c.default.createElement("label",null,"摘要："),c.default.createElement(o.default,{onFocus:function(e){return e.target.select()},value:O.get("oriAbstract"),onChange:function(e){g(_.changeSearchRunningCalculateCommonString(["modalTemp","oriAbstract"],e.target.value))}})),c.default.createElement("div",{className:"manager-item"},c.default.createElement("label",null,"debit"===P?"收款金额：":"付款金额："),c.default.createElement(f.default,{value:O.get("amount"),onChange:function(e){(0,p.numberTest)(e,function(e){g(_.changeSearchRunningCalculateCommonString(["modalTemp","amount"],e)),g(_.changeSearchRunningCalculateCommonString(["modalTemp","payment","actualAmount"],e))})}})),c.default.createElement(A,{modalTemp:O,dispatch:g,accountList:w}),"debit"===P?c.default.createElement(h.default,{dispatch:g,accountPoundage:M,modalTemp:O,flags:I,projectCardList:G,contactCardList:Y}):"")),t||n?c.default.createElement(i.default,{visible:!0,onCancel:F,className:"single-manager",title:B,okText:"保存",onOk:V},K,c.default.createElement(C.default,{type:"ls",className:"cxls-enclosure-wrap",dispatch:g,permission:U.getIn(["edit","permission"]),enclosureList:k,label:j,closed:!1,reviewed:!1,enCanUse:J,checkMoreFj:x,getUploadTokenFetch:function(){return g(E.searchRunningAllActions.getUploadTokenFetch())},getLabelFetch:function(){return g(E.searchRunningAllActions.getRunningLabelFetch())},deleteUploadImgUrl:function(e){return g(E.searchRunningAllActions.deleteRunningEnclosureUrl(e))},changeTagName:function(e,t){return g(E.searchRunningAllActions.changeRunningTagName(e,t))},downloadEnclosure:function(e,t){return g((0,v.allDownloadEnclosure)(e,t))},uploadEnclosureList:function(e){g(E.searchRunningAllActions.uploadFiles.apply(E.searchRunningAllActions,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)))},uploadKeyJson:H})):null}}]),t}())||a;t.default=O;var A=function(e){function t(){return N(this,t),I(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.modalTemp,n=e.dispatch,a=e.accountList,i=this.props.amount||t.get("amount");return c.default.createElement("div",{className:"manager-item"},c.default.createElement("label",null,"账户："),c.default.createElement(r.default,{value:t.getIn(["accounts",0,"accountName"]),onChange:function(e,t){var a=e.split(g.TREE_JOIN_STR)[0],r=e.split(g.TREE_JOIN_STR)[1],o=t.props.poundage,l=o.get("poundage"),u=o.get("poundageRate"),c=Math.abs(i||0)*u/1e3>l&&l>0?l:Math.abs(i||0)*u/1e3;n(_.changeSearchRunningCalculateCommonString(["modalTemp","accounts"],(0,d.fromJS)([{accountName:r,accountUuid:a,poundage:o}]))),n(_.changeSearchRunningCalculateCommonString(["modalTemp","accounts",0,"poundageAmount"],c.toFixed(2)))}},a&&a.getIn([0,"childList"])&&a.getIn([0,"childList"]).map(function(e,t){return c.default.createElement(Option,{key:t,value:""+e.get("uuid")+g.TREE_JOIN_STR+e.get("name"),poundage:(0,d.fromJS)({needPoundage:e.get("needPoundage"),poundage:e.get("poundage"),poundageRate:e.get("poundageRate")})},e.get("name"))})))}}]),t}()},2488:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=h(n(1234)),i=h(n(129)),o=h(n(45)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1235),n(128),n(55);var u=h(n(1)),c=n(17),s=n(18),d=(h(n(6)),n(56),n(22)),f=h(n(1237)),p=C(n(27)),m=h(n(483)),g=n(489),y=C(n(486));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var E=o.default.Option,v=(0,c.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"componentDidMount",value:function(){var e=this.props.accountPoundage.get("categoryUuid"),t=this.props.accountPoundage.get("canUsed");e&&t&&this.props.dispatch(y.getSearchApprovalAccountRunningCate(e))}},{key:"componentWillReceiveProps",value:function(e){var t=e.modalTemp.get("amount");if(e.modalTemp.get("accounts")){var n=e.modalTemp.get("accounts"),a=n.getIn([0,"poundage","poundage"]);if(t!==this.props.modalTemp.get("amount")){var r=Math.abs(t||0)*n.getIn([0,"poundage","poundageRate"])/1e3>a&&a>0?a:Math.abs(t||0)*n.getIn([0,"poundage","poundageRate"])/1e3;this.props.dispatch(y.changeSearchRunningCalculateCommonString(["modalTemp","accounts",0,"poundageAmount"],(r||0).toFixed(2)))}}}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.accountPoundage,a=e.flags,o=e.modalTemp,l=e.projectCardList,c=e.contactCardList,C=o.get("poundageCurrentCardList")||(0,s.fromJS)([]),h=o.get("poundageProjectCardList")||(0,s.fromJS)([]),v=o.get("needUsedPoundage"),_=a.get("accountProjectRange"),S=a.get("accountContactsRange"),T=o.getIn(["accounts",0,"poundageAmount"]),N=o.getIn(["accounts",0,"accountUuid"]),I=(o.getIn(["accounts",0,"poundage"])||(0,s.fromJS)({})).get("needPoundage"),b=n.get("canUsed");return u.default.createElement("div",{style:{display:I&&N&&b?"":"none"}},u.default.createElement("div",{style:{marginBottom:"10px"}},u.default.createElement("span",null,u.default.createElement(i.default,{style:{width:"auto",fontSize:"12px"},checked:v,onChange:function(e){t(y.changeSearchRunningCalculateCommonString(["modalTemp","needUsedPoundage"],!v))}},"账户手续费")),n.get("poundageNeedCurrent")&&v?u.default.createElement(r.default,{className:"use-unuse-style edit-running-switch",checked:C.size,checkedChildren:"往来",unCheckedChildren:"往来",onChange:function(){C.size?t(y.changeSearchRunningCalculateCommonString(["modalTemp","poundageCurrentCardList"],(0,s.fromJS)([]))):t(y.changeSearchRunningCalculateCommonString(["modalTemp","poundageCurrentCardList"],(0,s.fromJS)([{}])))}}):"",n.get("poundageNeedProject")&&v?u.default.createElement(r.default,{className:"use-unuse-style edit-running-switch",checked:h.size,checkedChildren:"项目",unCheckedChildren:"项目",style:{marginLeft:"10px"},onChange:function(){h.size?t(y.changeSearchRunningCalculateCommonString(["modalTemp","poundageProjectCardList"],(0,s.fromJS)([]))):t(y.changeSearchRunningCalculateCommonString(["modalTemp","poundageProjectCardList"],(0,s.fromJS)([{}])))}}):""),C.size&&v?u.default.createElement("div",{className:"manager-item"},u.default.createElement("label",null,"往来单位："),u.default.createElement(m.default,{combobox:!0,showSearch:!0,onDropdownVisibleChange:function(e){e&&t(y.getApprovalRelativeCardList(S))},value:(C&&C.getIn([0,"code"])?C.getIn([0,"code"]):"")+" "+(C&&C.getIn([0,"name"])?C.getIn([0,"name"]):""),onChange:function(e){var n=e.split(p.TREE_JOIN_STR),a=n[0],r=n[1],i=n[2];t(y.changeSearchRunningCalculateCommonString(["modalTemp","poundageCurrentCardList",0],(0,s.fromJS)({cardUuid:a,name:i,code:r})))}},c.map(function(e,t){return u.default.createElement(E,{key:e.get("uuid"),value:""+e.get("uuid")+p.TREE_JOIN_STR+e.get("code")+p.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))}))):"",h.size&&v?u.default.createElement("div",{className:"manager-item"},u.default.createElement("label",null,"项目："),u.default.createElement(m.default,{combobox:!0,showSearch:!0,value:h&&h.getIn([0,"code"])?-1===g.systemProJectCodeCommon.indexOf(h.getIn([0,"code"]))?h.getIn([0,"code"])+" "+h.getIn([0,"name"]):""+h.getIn([0,"name"]):"",onDropdownVisibleChange:function(e){e&&t(y.getApprovalProjectCardList(_))},onChange:function(e){var n=e.split(p.TREE_JOIN_STR),a=n[0],r=n[1],i=n[2];t(y.changeSearchRunningCalculateCommonString(["modalTemp","poundageProjectCardList",0],(0,s.fromJS)({cardUuid:a,name:i,code:r})))}},l.map(function(e,t){return u.default.createElement(E,{key:t,value:""+e.get("uuid")+p.TREE_JOIN_STR+e.get("code")+p.TREE_JOIN_STR+e.get("name")},(-1===g.systemProJectCodeCommon.indexOf(e.get("code"))?e.get("code"):"")+" "+e.get("name"))}))):"",v?u.default.createElement("div",{style:{display:"flex"},className:"manager-item"},u.default.createElement("label",null,"支出金额："),u.default.createElement(f.default,{placeholder:"",value:T,onChange:function(e){(0,d.numberTest)(e,function(e){t(y.changeSearchRunningCalculateCommonString(["modalTemp","accounts",0,"poundageAmount"],e))})}})):"")}}]),t}())||a;t.default=v},2489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i,o=b(n(47)),l=b(n(61)),u=b(n(32)),c=b(n(14)),s=b(n(1230)),d=b(n(45)),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(79),n(51),n(78),n(1231),n(55);var p=b(n(1)),m=n(56),g=n(18),y=b(n(6)),C=I(n(27)),h=n(489),E=n(22),v=n(1516),_=b(n(2490)),S=b(n(2496)),T=I(n(486)),N=n(101);function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}function O(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var A=(0,m.connect)(function(e){return e})((i=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=n.props.editRunningModalState.get("editRunningModalTemp"),r=n.props.editRunningModalState.get("categoryData"),i=(a.get("jrCategoryType")?(0,N.getCategorynameByType)(a.get("jrCategoryType")):{categoryTypeObj:""}).categoryTypeObj;return n.state={showCardModal:!1,showContact:i&&r.getIn([i,"contactsManagement"])||a.get("beContact"),showProject:r.get("beProject")||a.get("beProject"),currentbillType:a.getIn(["billList",0,"billType"])},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),f(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.editRunningModalState!==e.editRunningModalState||this.props.allState!==e.allState||this.state!==t}},{key:"componentWillReceiveProps",value:function(e){if(this.props.editRunningModalState.getIn(["editRunningModalTemp","jrCategoryUuid"])!==e.editRunningModalState.getIn(["editRunningModalTemp","jrCategoryUuid"])){var t=e.editRunningModalState.get("editRunningModalTemp"),n=e.editRunningModalState.get("categoryData"),a=(t.get("jrCategoryType")?(0,N.getCategorynameByType)(t.get("jrCategoryType")):{categoryTypeObj:""}).categoryTypeObj;this.setState({showContact:a&&n.getIn([a,"contactsManagement"])||t.get("beContact"),showProject:n.get("beProject")||t.get("beProject")})}}},{key:"render",value:function(){console.log("EditRunningModal");var e=this.props,t=e.editRunningModalState,n=e.onCancel,a=e.allState,r=e.homeState,i=e.dispatch,f=e.onShowPayModal,m=e.onShowAccountModal,I=e.onShowReceiveModal,b=e.onShowBookKeepingModal,A=(e.setSelectList,e.setReceiveMoney,e.setConfirmAccountingApprovalDetail),R=e.setConfirmReceiveApprovalDetail,L=e.setConfirmPayApprovalDetail,P=e.setBookKeepingApprovalDetail,w=this.state,M=w.showContact,D=w.showProject,k=w.currentbillType,j=r.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]),U=t.get("editRunningModalTemp"),J=t.get("categoryData"),x=t.get("datailList"),H=a.get("runningCategory"),G=a.get("accountList"),Y=a.get("taxRate"),F=U.get("jrDate"),B=U.get("id"),V=U.get("jrCategoryType"),K=U.get("detailType"),W=U.get("jrAmount"),z=U.get("dealState"),Q=U.get("account"),Z=U.get("outputAccount"),X=U.get("canChoseDetailList"),q=(V?(0,N.getCategorynameByType)(V):{categoryTypeObj:""}).categoryTypeObj,$=!!q&&J.getIn([q,"beManagemented"]),ee=!!q&&J.getIn([q,"beZeroInventory"]),te=r.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1,ne=r.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("QUANTITY")>-1,ae=x.findIndex(function(e){return e.get("id")===B}),re=!1;"LB_XCZC"===V?"SX_FLF"===J.get("propertyPay")?re=J.getIn([q,"beWelfare"]):"SX_QTXC"===J.get("propertyPay")&&(re=J.getIn([q,"beAccrued"])):re=$;return p.default.createElement(o.default,{visible:!0,maskClosable:!1,width:"800px",title:"调整",onCancel:function(){n()},footer:null,bodyStyle:{padding:0}},p.default.createElement("div",{className:"approval-running-modal-wrap"},p.default.createElement("div",{className:"approval-running-base-config-wrap"},p.default.createElement("div",{className:"approval-running-card-input-wrap"},p.default.createElement("span",{className:"approval-running-card-input-tip"},"明细类型："),p.default.createElement("span",{className:"approval-running-card-input"},p.default.createElement(d.default,{value:K||"",style:{width:"100%"},disabled:v.suitTypeList.indexOf(K)>-1,onChange:function(e){var t=e.split(C.TREE_JOIN_STR);i(T.changeApprovalProcessDetailInfoCommonString("detailId",t[0])),i(T.changeApprovalProcessDetailInfoCommonString("detailType",t[1]))}},X&&X.toJS().map(function(e,t){return p.default.createElement(d.default.Option,{value:""+e.id+C.TREE_JOIN_STR+e.label,key:t},""+e.label)})))),p.default.createElement("div",{className:"approval-running-card-input-wrap"},p.default.createElement("span",{className:"approval-running-card-input-tip"},"明细日期："),p.default.createElement("span",{className:"approval-running-card-input"},p.default.createElement(s.default,{format:"YYYY-MM-DD",value:F?(0,y.default)(F,"YYYY-MM-DD"):"",onChange:function(e,t){i(T.changeApprovalProcessDetailInfoCommonString("jrDate",t))}}))),["内部转账","存货调拨套件"].indexOf(K)>-1?p.default.createElement(S.default,{dispatch:i,editRunningModalState:t,accountList:G,enableWarehouse:!1,warehouseCanUse:te,openQuantity:ne}):p.default.createElement(_.default,{dispatch:i,editRunningModalState:t,taxRate:Y,runningCategory:H,accountList:G,enableWarehouse:te,openQuantity:ne,currentbillType:k,showProject:D,showContact:M}))),p.default.createElement("div",{className:"approval-running-modal-btn-wrap"},p.default.createElement("div",{className:"approval-running-modal-btn-left"},p.default.createElement(u.default,{type:"ghost",className:"",disabled:0===ae,onClick:function(){return(0,E.debounce)(function(){i(T.getApprovalProcessDetailInfo(x.getIn([ae-1,"id"]),function(){},"switch"))})()}},p.default.createElement(c.default,{type:"caret-left"})),p.default.createElement(u.default,{type:"ghost",className:"",disabled:ae===x.size-1,onClick:function(){return(0,E.debounce)(function(){i(T.getApprovalProcessDetailInfo(x.getIn([ae+1,"id"]),function(){},"switch"))})()}},p.default.createElement(c.default,{type:"caret-right"})),p.default.createElement(l.default,{placement:"top",title:"挂账"!==v.showToolTipAccountState[z]||"JR_HANDLE_HALF"!=x.getIn([ae,"jrState"])&&"JR_HANDLE_ALL"!=x.getIn([ae,"jrState"])?"":"有关联的核销流水，无法反挂账"},p.default.createElement(u.default,{type:"ghost",disabled:!j||"挂账"===v.showToolTipAccountState[z]&&("JR_HANDLE_HALF"==x.getIn([ae,"jrState"])||"JR_HANDLE_ALL"==x.getIn([ae,"jrState"])),style:{display:z?"":"none"},onClick:function(){return(0,E.debounce)(function(){i(T.cancelApprovalProcessDetailInfo([B],function(){i(T.getApprovalProcessDetailInfo(B,function(){},"switch"))}))})()}},"反"+v.showToolTipAccountState[z])),p.default.createElement(u.default,{type:"ghost",className:"",disabled:!j,style:{display:!z&&h.hideCategoryCanSelect.indexOf(V)>-1?"":"none"},onClick:function(){if(b(),Z&&Z.size&&Z.get("accountUuid")){var e=a.get("accountList"),t=(e.size?e.getIn([0,"childList"]):(0,g.fromJS)([])).find(function(e){return e.get("uuid")===Z.get("accountUuid")});if(t){var n={needPoundage:t.get("needPoundage"),poundage:t.get("poundage"),poundageRate:t.get("poundageRate")},r=n.poundage,o=n.poundageRate,l=W>0?W:-W,u=Math.abs(l||0)*o/1e3>r&&r>0?r:Math.abs(l||0)*o/1e3;i(T.changeSearchRunningCalculateCommonString("account",(0,g.fromJS)({accountName:Z.get("accountName"),accountUuid:Z.get("accountUuid"),poundage:n,poundageAmount:(u||0).toFixed(2)}))),i(T.changeSearchRunningCalculateCommonString("formPos","modal")),n.needPoundage||(i(T.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,g.fromJS)([]))),i(T.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,g.fromJS)([]))))}}i(T.changeSearchRunningCalculateCommonString("receiveTotalMoney",W>0?W:-W)),P(function(e,t){i(T.modifyApprovalProcessDetailInfo(U,function(){i(T.bookKeepingApprovalProcessDetailInfo.apply(T,[[B]].concat(O(e),[function(){t(),i(T.getApprovalProcessDetailInfo(B,function(){},"switch"))}])))}))})}},"核记"),p.default.createElement(u.default,{type:"ghost",className:"",disabled:!j,style:{display:!z&&re?"":"none"},onClick:function(){m(),W>0&&ee&&(i(T.changeSearchRunningCalculateCommonString("beZeroInventory",ee)),i(T.changeSearchRunningCalculateCommonString("propertyCost","")),i(T.changeSearchRunningCalculateCommonString("propertyCostList",(0,g.fromJS)([])))),A(function(e,t){i(T.modifyApprovalProcessDetailInfo(U,function(){i(T.accountingApprovalProcessDetailInfo.apply(T,[[B]].concat(O(e),[function(){t(),i(T.getApprovalProcessDetailInfo(B,function(){},"switch"))}])))}))})}},"挂账"),p.default.createElement(u.default,{type:"ghost",className:"",disabled:!j,style:{display:h.hideCategoryCanSelect.indexOf(V)>-1?"none":!z&&(-1===h.receiptList.indexOf(V)&&W>0||h.receiptList.indexOf(V)>-1&&W<0)?"":"none"},onClick:function(){if(f(),W>0&&ee&&i(T.changeSearchRunningCalculateCommonString("beZeroInventory",ee)),Q&&Q.size&&Q.get("accountUuid")){var e=a.get("accountList");(e.size?e.getIn([0,"childList"]):(0,g.fromJS)([])).find(function(e){return e.get("uuid")===Q.get("accountUuid")})&&i(T.changeSearchRunningCalculateCommonString("account",(0,g.fromJS)({accountName:Q.get("accountName"),accountUuid:Q.get("accountUuid")})))}L(function(e,t){i(T.modifyApprovalProcessDetailInfo(U,function(){i(T.payingApprovalProcessDetailInfo.apply(T,[[B]].concat(O(e),[function(){t(),i(T.getApprovalProcessDetailInfo(B,function(){},"switch"))}])))}))})}},"付款"),p.default.createElement(u.default,{type:"ghost",className:"",disabled:!j,style:{display:h.hideCategoryCanSelect.indexOf(V)>-1?"none":!z&&(-1===h.receiptList.indexOf(V)&&W<0||h.receiptList.indexOf(V)>-1&&W>0)?"":"none"},onClick:function(){if(I(),Q&&Q.size&&Q.get("accountUuid")){var e=a.get("accountList"),t=(e.size?e.getIn([0,"childList"]):(0,g.fromJS)([])).find(function(e){return e.get("uuid")===Q.get("accountUuid")});if(t){var n={needPoundage:t.get("needPoundage"),poundage:t.get("poundage"),poundageRate:t.get("poundageRate")},r=n.poundage,o=n.poundageRate,l=W>0?W:-W,u=Math.abs(l||0)*o/1e3>r&&r>0?r:Math.abs(l||0)*o/1e3;i(T.changeSearchRunningCalculateCommonString("account",(0,g.fromJS)({accountName:Q.get("accountName"),accountUuid:Q.get("accountUuid"),poundage:n,poundageAmount:(u||0).toFixed(2)}))),i(T.changeSearchRunningCalculateCommonString("formPos","modal")),n.needPoundage||(i(T.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,g.fromJS)([]))),i(T.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,g.fromJS)([]))))}}i(T.changeSearchRunningCalculateCommonString("receiveTotalMoney",W>0?W:-W)),R(function(e,t){i(T.modifyApprovalProcessDetailInfo(U,function(){i(T.receiveApprovalProcessDetailInfo.apply(T,[[B]].concat(O(e),[function(){t(),i(T.getApprovalProcessDetailInfo(B,function(){},"switch"))}])))}))})}},"收款"),p.default.createElement(u.default,{type:"ghost",className:"",disabled:!j,style:{display:z?"none":""},onClick:function(){return(0,E.debounce)(function(){i(T.disuseApprovalProcessDetailInfo([B],function(){i(T.getApprovalProcessDetailInfo(B,function(){},"switch"))}))})()}},"作废")),p.default.createElement("div",{className:"approval-running-modal-btn-right"},p.default.createElement(u.default,{key:"cancel",type:"ghost",onClick:function(){n()}},"取 消"),p.default.createElement(l.default,{placement:"top",title:z?("PROCESS_DISUSE"===z?"该明细已作废":"已生成流水")+"，无法继续调整":""},p.default.createElement(u.default,{key:"save",type:"primary",disabled:!j||!!z,onClick:function(){i(T.modifyApprovalProcessDetailInfo(U,function(){return n()}))}},"保 存")))))}}]),t}(),r.displayName="EditRunningModal",a=i))||a;t.default=A},2490:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=T(n(61)),i=T(n(179)),o=T(n(14)),l=T(n(45)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(79),n(178),n(78),n(55);var c=T(n(1)),s=n(17),d=n(18),f=S(n(27)),p=n(489),m=n(127),g=n(22),y=T(n(2491)),C=T(n(2492)),h=T(n(2493)),E=T(n(2494)),v=S(n(486)),_=n(101);function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}var N=(0,s.immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showCardModal:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.editRunningModalState,a=e.taxRate,u=e.runningCategory,s=e.accountList,S=e.enableWarehouse,T=e.openQuantity,N=e.currentbillType,I=e.showProject,b=e.showContact,O=n.get("editRunningModalTemp"),A=n.get("categoryData"),R=n.get("datailList"),L=(O.get("jrDate"),O.get("id")),P=O.get("beContact"),w=O.get("beProject"),M=O.get("jrCategoryUuid"),D=O.get("categoryName"),k=O.get("jrCategoryType"),j=O.get("contactList"),U=O.get("detailType"),J=O.get("jrAbstract"),x=O.get("jrAmount"),H=O.get("jrCostType"),G=O.get("projectList"),Y=O.get("billList"),F=(O.get("dealState"),O.get("account")),B=O.get("stockList"),V=(O.get("canChoseDetailList"),(k?(0,_.getCategorynameByType)(k):{categoryTypeObj:""}).categoryTypeObj),K=k?p.receiptList.indexOf(k)>-1?"RECEIPT":"PAYMENT":"",W=A.get("propertyCarryover"),z="销售存货套件"===U||"采购存货套件"===U,Q=(0,p.getSelectJrCategoryList)(u,null,!0,K,z),Z=Y.getIn([0,"taxRate"]),X=A.get("propertyCostList"),q=n.get("projectCardList"),$=n.get("contactCardList"),ee=n.get("invetoryCardList"),te=n.get("warehouseCardList"),ne=A.get("beProject"),ae=!!V&&A.getIn([V,"contactsManagement"]),re=!!V&&A.getIn([V,"beManagemented"]),ie=A.get("projectRange"),oe=V?A.getIn([V,"contactsRange"]):(0,d.fromJS)([]),le=V?A.getIn([V,"stockRange"]):(0,d.fromJS)([]),ue=(!!V&&A.getIn([V,"beZeroInventory"]),s.size?s.getIn([0,"childList"]):(0,d.fromJS)([])),ce=n.getIn(["views","showStockModal"]),se=n.get("MemberList"),de=n.get("selectThingsList"),fe=n.get("thingsList"),pe=n.get("selectedKeys"),me=n.get("selectList"),ge=n.get("selectItem"),ye={GLFY:"管理费用",XSFY:"销售费用",XZ_MANAGE:"管理费用",XZ_SALE:"销售费用",FZSCCB:"辅助生产成本",ZZFY:"制造费用",SCCB:"生产成本",JJFY:"间接费用",JXZY:"机械作业",HTCB:"合同成本"};R.findIndex(function(e){return e.get("id")===L});"LB_XCZC"===k&&("SX_FLF"===A.get("propertyPay")?A.getIn([V,"beWelfare"]):"SX_QTXC"===A.get("propertyPay")&&A.getIn([V,"beAccrued"]));var Ce={FZSCCB:"已选择“辅助生产成本”项目",ZZFY:"已选择“制造费用”项目",SCCB:"已选择生产项目",JJFY:"已选择“间接费用”项目",JXZY:"已选择“机械作业”项目",HTCB:"已选择施工项目"};return c.default.createElement("div",null,"销售存货套件"===U||"采购存货套件"===U?null:c.default.createElement("div",{className:"approval-running-card-input-wrap"},c.default.createElement("span",{className:"approval-running-card-input-tip"},"明细金额："),c.default.createElement("span",{className:"approval-running-card-input"},c.default.createElement(m.XfInput,{value:x,mode:"amount",placeholder:"",negativeAllowed:"LB_YYWSR"!==k&&"LB_YYWZC"!==k,onChange:function(e){t(v.changeApprovalProcessDetailInfoCommonString("jrAmount",e.target.value))}}))),"RECEIPT"===K?c.default.createElement("div",{className:"approval-running-card-input-wrap"},c.default.createElement("span",{className:"approval-running-card-input-tip"},"明细账户："),c.default.createElement("span",{className:"approval-running-card-input approval-running-card-input-clear"},c.default.createElement(l.default,{value:F&&F.size?""+F.get("accountName"):"",style:{width:"100%"},onChange:function(e){var n=e.split(f.TREE_JOIN_STR);t(v.changeApprovalProcessDetailInfoCommonString("account",(0,d.fromJS)({accountName:n[1],accountUuid:n[0]})))}},ue&&ue.toJS().map(function(e,t){return c.default.createElement(l.default.Option,{value:""+e.uuid+f.TREE_JOIN_STR+e.name,key:t},""+e.name)})),c.default.createElement(o.default,{className:"search-approval-modal-clear-icon",style:{display:F&&F.size?"":"none"},type:"close-circle",theme:"filled",onClick:function(){t(v.changeApprovalProcessDetailInfoCommonString("account",null))}}))):null,c.default.createElement("div",{className:"approval-running-card-break"}),c.default.createElement("div",{className:"approval-running-card-input-wrap"},c.default.createElement("span",{className:"approval-running-card-input-tip"},"流水类别："),c.default.createElement("span",{className:"approval-running-card-input"},c.default.createElement(i.default,{value:A.get("canUse")?M?M+f.TREE_JOIN_STR+k+f.TREE_JOIN_STR+D:"":D||"",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:Q,placeholder:"必填，请选择流水类别",treeDefaultExpandAll:!0,onChange:function(e){var n=e.split(f.TREE_JOIN_STR);M!==n[0]&&t(v.changeApprovalProcessDetailInfoCategory(n[0],n[1],n[2],O))}}))),X.size>1?c.default.createElement("div",{className:"approval-running-card-input-wrap"},c.default.createElement("span",{className:"approval-running-card-input-tip"},"费用性质："),c.default.createElement("span",{className:"approval-running-card-input"},c.default.createElement(r.default,{placement:"topLeft",title:Ce[H]?Ce[H]:""},c.default.createElement(l.default,{value:H?ye[H]:"",disabled:Ce[H],style:{width:"100%"},onChange:function(e){t(v.changeApprovalProcessDetailInfoCommonString("jrCostType",{XZ_MANAGE:"GLFY",XZ_SALE:"XSFY"}[e]))}},X&&X.toJS().map(function(e){return c.default.createElement(l.default.Option,{value:""+e},""+ye[e])}))))):null,c.default.createElement("div",{className:"approval-running-card-input-wrap"},c.default.createElement("span",{className:"approval-running-card-input-tip"},"摘要："),c.default.createElement("span",{className:"approval-running-card-input"},c.default.createElement(m.XfInput,{value:J,placeholder:"",onChange:function(e){t(v.changeApprovalProcessDetailInfoCommonString("jrAbstract",e.target.value))}}))),b?c.default.createElement(C.default,{contactList:j,dispatch:t,contactCardList:$,contactsRange:oe,beContact:P,contactsManagement:ae}):null,I?c.default.createElement(h.default,{projectList:G,dispatch:t,projectCardList:q,projectRange:ie,beProject:w,openProject:ne,oriTemp:(0,d.fromJS)({categoryType:k,handleType:"",oriState:"LB_FYZC"===k?"STATE_FY":"",propertyCarryover:W}),jrCostType:H,propertyCostList:X}):null,"销售存货套件"===U||"采购存货套件"===U?c.default.createElement(E.default,{dispatch:t,stockCardList:B,stockList:ee,warehouseList:te,stockRange:le,taxRate:Z,showStockModal:ce,enableWarehouse:S,openQuantity:T,selectList:me,selectItem:ge,MemberList:se,selectThingsList:de,thingsList:fe,selectedKeys:pe}):null,"销售存货套件"===U||"采购存货套件"===U?c.default.createElement("div",{className:"approval-running-inventory-amont"},"合计金额： ",(0,g.formatMoney)(x)):null,c.default.createElement("div",{className:"approval-running-card-break"}),["LB_YYSR","LB_YYZC","LB_FYZC","LB_YYWSR","LB_YYWZC"].indexOf(k)>-1?c.default.createElement(y.default,{billList:Y,taxRateConf:a,direction:{LB_YYSR:"debit",LB_YYZC:"credit",LB_FYZC:"credit",LB_YYWSR:"debit",LB_YYWZC:"credit"}[k],handleType:"",dispatch:t,amount:x,categoryType:k,currentbillType:N}):null)}}]),t}())||a;t.default=N},2491:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=g(n(37)),i=g(n(1234)),o=g(n(45)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(38),n(1235),n(55);var u=g(n(1)),c=n(17),s=n(18),d=(m(n(30)),m(n(27)),n(101),n(22)),f=n(127),p=m(n(486));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var y=(0,c.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.amount,n=this.props.amount,a=e.billList.getIn([0,"taxRate"]);t!==n&&"-1"!=a&&Math.abs(a)>0&&this.props.dispatch(p.searchApprovalChangeRunningTaxRate(a,t))}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.billList,a=e.taxRateConf,l=e.handleType,c=e.direction,m=e.amount,g=e.categoryType,y=e.currentbillType,C=a.get("scale"),h=(a.get("rateOptionList")||(0,s.fromJS)([])).toJS().map(function(e){return{key:e+"%",value:e}});h.push({value:"-1",key:"**%"});var E=n.get(0),v=E?E.get("billState"):"",_=E?E.get("billType"):"",S=(E&&E.get("billUuid"),E?E.get("tax"):""),T=E?E.get("taxRate"):"",N="debit"===c&&"JR_HANDLE_GJ"!==l?[{value:"发票",key:"bill_common"},{value:"其他票据",key:"bill_other"}]:[{value:"增值税专用发票",key:"bill_special"},{value:"其他票据",key:"bill_other"}],I={bill_common:"发票",bill_special:"增值税专用发票",bill_other:"其他票据"};return u.default.createElement("div",null,"small"==C&&"credit"!==c&&"JR_HANDLE_GJ"!==l||"general"==C||"bill_special"===_||"bill_common"===_||"bill_common"===y||"bill_special"===y?u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",{className:"approval-running-card-input-tip"},"票据类型："),u.default.createElement("span",{className:"approval-running-card-input"},u.default.createElement(o.default,{value:I[_]?I[_]:"",onChange:function(e){t(p.changeApprovalProcessDetailInfoBillCommonString("billType",e)),"small"===C?"JR_HANDLE_GJ"!==l&&"debit"===c&&"bill_other"!==e&&t(p.searchApproalBillchange("bill_states_make_out")):"general"===C&&("LB_CQZC"===g?"JR_HANDLE_GJ"===l&&"bill_other"!==e?t(p.searchApproalBillchange("bill_states_auth")):"JR_HANDLE_CZ"===l&&"bill_other"!==e&&t(p.searchApproalBillchange("bill_states_make_out")):"debit"===c&&"bill_other"!==e?t(p.searchApproalBillchange("bill_states_make_out")):"bill_other"!==e&&t(p.searchApproalBillchange("bill_states_auth")))}},N.map(function(e,t){return u.default.createElement(Option,{key:t,value:e.key},e.value)})))):null,"bill_common"===_||"bill_special"===_?u.default.createElement("div",null,u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",{className:"approval-running-card-input-tip"},"税率："),u.default.createElement("span",{className:"approval-running-card-input"},u.default.createElement(o.default,{disabled:!1,value:-1==T?"**%":T?T+"%":"",onChange:function(e){t(p.searchApprovalChangeRunningTaxRate(e))}},h.map(function(e,t){return u.default.createElement(o.default.Option,{key:t,value:e.value},e.key)}))),u.default.createElement(i.default,{className:"use-unuse-style",style:{marginLeft:"10px"},checked:"bill_states_make_out"===v||"bill_states_auth"===v,onChange:function(){"small"===C?"debit"===c&&"bill_other"!==_?t("bill_states_make_out"===v?p.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_not_make_out"):p.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_make_out")):"bill_states_auth"===v?t(p.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_not_auth")):"bill_states_not_auth"===v&&t(p.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_auth")):"JR_HANDLE_GJ"===l?t("bill_states_auth"===v?p.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_not_auth"):p.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_auth")):"debit"===c?"bill_other"!==_&&t("bill_states_make_out"===v?p.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_not_make_out"):p.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_make_out")):"bill_other"!==_&&t("bill_states_auth"===v?p.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_not_auth"):p.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_auth"))},checkedChildren:"debit"===c&&"JR_HANDLE_GJ"!==l?"已开票":"已认证",unCheckedChildren:"debit"===c&&"JR_HANDLE_GJ"!==l?"未开票":"未认证",disabled:!1})),-1==T?u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",{className:"approval-running-card-input-tip"},"税额："),u.default.createElement("span",{className:"approval-running-card-input"},u.default.createElement(f.XfInput,{mode:"amount",value:S,negativeAllowed:"LB_YYWSR"!==g&&"LB_YYWZC"!==g,onChange:function(e){var n=e.target.value;Math.abs(n)>Math.abs(m)?r.default.info("税额有误，不允许大于价税合计"):t(p.changeApprovalProcessDetailInfoBillCommonString("tax",n))}}))):u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",{className:"approval-running-card-input-tip"}),u.default.createElement("span",{className:"approval-running-card-input"},u.default.createElement("span",{className:"approval-running-card-input-text"},"价税合计："),u.default.createElement("span",{className:"approval-running-card-input-text"},(0,d.formatMoney)(m)),u.default.createElement("span",{className:"approval-running-card-input-text"},"税额："),u.default.createElement("span",{className:"approval-running-card-input-text"},S?(0,d.formatMoney)(S):"")))):null)}}]),t}())||a;t.default=y},2492:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=C(n(1234)),i=C(n(45)),o=C(n(14)),l=C(n(1256)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1235),n(55),n(78),n(1257);var c=C(n(1)),s=n(17),d=n(18),f=C(n(1460)),p=y(n(27)),m=y(n(486)),g=y(n(484));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}var h=(0,s.immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showCardModal:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.contactList,a=t.dispatch,u=t.contactCardList,s=t.contactsRange,y=t.beContact,C=t.contactsManagement,h=this.state.showCardModal;return c.default.createElement("div",{className:"approval-running-card-input-wrap"},c.default.createElement("span",{className:"approval-running-card-input-tip"},"往来单位："),c.default.createElement("span",{className:"approval-running-card-input"},c.default.createElement(i.default,{showSearch:!0,value:y&&n.size?n.getIn([0,"code"])+" "+n.getIn([0,"name"]):"",style:{width:"100%"},placeholder:"",disabled:!y,dropdownRender:function(t){return c.default.createElement("div",null,t,c.default.createElement(l.default,{style:{margin:"4px 0"}}),c.default.createElement("div",{style:C?{padding:"8px",cursor:"pointer"}:{padding:"8px",cursor:"not-allowed"},onMouseDown:function(){if(C){a(g.beforeRunningAddRelativeCard(function(){e.setState({showCardModal:!0})},s,"lrls"))}}},c.default.createElement(o.default,{type:"plus"})," 新增往来单位"))},onChange:function(e){var t=e.split(p.TREE_JOIN_STR);a(m.changeApprovalProcessDetailInfoCommonString("contactList",(0,d.fromJS)([{uuid:t[0],code:t[1],type:"WLDW",name:t[2]}])))}},u&&u.toJS().map(function(e,t){return c.default.createElement(i.default.Option,{value:""+e.uuid+p.TREE_JOIN_STR+e.code+p.TREE_JOIN_STR+e.name,key:t},e.code+" "+e.name)}))),c.default.createElement(r.default,{className:"use-unuse-style",style:{marginLeft:"10px"},checked:y,checkedChildren:"往来",unCheckedChildren:"往来",onChange:function(){a(m.changeApprovalProcessDetailInfoCommonString("beContact",!y))}}),c.default.createElement(f.default,{showModal:h,closeModal:function(){return e.setState({showCardModal:!1})},dispatch:a,fromPage:"searchApproval"}))}}]),t}())||a;t.default=h},2493:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=v(n(1234)),i=v(n(45)),o=v(n(14)),l=v(n(1256)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1235),n(55),n(78),n(1257);var c=v(n(1)),s=n(17),d=n(18),f=v(n(483)),p=v(n(1461)),m=E(n(27)),g=n(101),y=n(489),C=E(n(486)),h=E(n(484));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}var _=(0,s.immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showCardModal:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.projectList,a=t.dispatch,u=t.projectCardList,s=t.projectRange,E=t.beProject,v=t.openProject,_=t.oriTemp,S=t.jrCostType,T=t.propertyCostList,N=this.state.showCardModal;return c.default.createElement("div",{className:"approval-running-card-input-wrap"},c.default.createElement("span",{className:"approval-running-card-input-tip"},"项目："),c.default.createElement("span",{className:"approval-running-card-input"},c.default.createElement(f.default,{showSearch:!0,value:E&&n.size?-1===y.systemProJectCodeCommon.indexOf(n.getIn([0,"code"]))?n.getIn([0,"code"])+" "+n.getIn([0,"name"]):""+n.getIn([0,"name"]):"",style:{width:"100%"},disabled:!E,dropdownRender:function(t){return c.default.createElement("div",null,t,c.default.createElement(l.default,{style:{margin:"4px 0"}}),c.default.createElement("div",{style:v?{padding:"8px",cursor:"pointer"}:{padding:"8px",cursor:"not-allowed"},onMouseDown:function(){if(v){a(h.beforeRunningAddProjectCard(function(){e.setState({showCardModal:!0})},s,"searchApproval"))}}},c.default.createElement(o.default,{type:"plus"})," 新增项目"))},onChange:function(e,t){var n=e.split(m.TREE_JOIN_STR),r=n[1];a(C.changeApprovalProcessDetailInfoCommonString("projectList",(0,d.fromJS)([{uuid:n[0],code:r,type:"XM",name:n[2]}])));var i=t.props.projectProperty;if("XZ_PRODUCE"===i)a("ASSIST"===r?C.changeApprovalProcessDetailInfoCommonString("jrCostType","FZSCCB"):"MAKE"===r?C.changeApprovalProcessDetailInfoCommonString("jrCostType","ZZFY"):C.changeApprovalProcessDetailInfoCommonString("jrCostType","SCCB"));else if("XZ_CONSTRUCTION"===i)a("INDIRECT"===r?C.changeApprovalProcessDetailInfoCommonString("jrCostType","JJFY"):"MECHANICAL"===r?C.changeApprovalProcessDetailInfoCommonString("jrCostType","JXZY"):C.changeApprovalProcessDetailInfoCommonString("jrCostType","HTCB"));else if("GLFY"!==S||"XSFY"!==S||"CWFY"!==S)if(T.size){a(C.changeApprovalProcessDetailInfoCommonString("jrCostType",{XZ_MANAGE:"GLFY",XZ_SALE:"XSFY",XZ_FINANCE:"CWFY"}[T.get(0)]))}else a(C.changeApprovalProcessDetailInfoCommonString("jrCostType",""))}},u&&(0,g.CommonProjectTest)(_,u).toJS().map(function(e,t){return c.default.createElement(i.default.Option,{value:""+e.uuid+m.TREE_JOIN_STR+e.code+m.TREE_JOIN_STR+e.name,key:t,projectProperty:e.projectProperty},-1===y.systemProJectCodeCommon.indexOf(e.code)?e.code+" "+e.name:""+e.name)}))),c.default.createElement(r.default,{className:"use-unuse-style",style:{marginLeft:"10px"},checked:E,checkedChildren:"项目",unCheckedChildren:"项目",onChange:function(){if(v){if(a(C.changeApprovalProcessDetailInfoCommonString("beProject",!E)),0==!E&&(a(C.changeApprovalProcessDetailInfoCommonString("projectList",(0,d.fromJS)([]))),"GLFY"!==S||"XSFY"!==S||"CWFY"!==S))if(T.size){a(C.changeApprovalProcessDetailInfoCommonString("jrCostType",{XZ_MANAGE:"GLFY",XZ_SALE:"XSFY",XZ_FINANCE:"CWFY"}[T.get(0)]))}else a(C.changeApprovalProcessDetailInfoCommonString("jrCostType",""))}else a(C.changeApprovalProcessDetailInfoCommonString("beProject",!E))}}),c.default.createElement(p.default,{showModal:N,closeModal:function(){return e.setState({showCardModal:!1})},dispatch:a,fromPage:"searchApproval"}))}}]),t}())||a;t.default=_},2494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=S(n(47)),i=S(n(32)),o=S(n(45)),l=S(n(14)),u=S(n(1256)),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(51),n(55),n(78),n(1257);var d=S(n(1)),f=n(17),p=n(18),m=S(n(90)),g=n(127),y=_(n(27)),C=S(n(1374)),h=S(n(2495)),E=_(n(484)),v=_(n(486));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}var T=(0,f.immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showCardModal:!1,warehouseModal:!1,warehouseCards:{warehouseCardUuid:"",warehouseCardCode:"",warehouseCardName:""}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.stockCardList,s=t.stockList,f=t.warehouseList,_=(t.oriState,t.stockRange),S=(t.amount,t.taxRate),T=(t.showSingleModal,t.showStockModal),N=t.MemberList,I=t.selectThingsList,b=t.thingsList,O=t.selectedKeys,A=t.categoryTypeObj,R=(t.currentCardType,t.insertOrModify,t.enableWarehouse),L=t.openQuantity,P=t.selectList,w=t.selectItem,M=(t.jrAmount,this.state),D=M.showCardModal,k=M.warehouseModal,j=M.warehouseCards,U={acBusinessIncome:"sale",acBusinessExpense:"purchase"},J="";return J=R&&L?"inventory-content-area-warehouse":R&&!L?"inventory-content-area-warehouse-no-open":!R&&L?"inventory-content-area":"inventory-content-area-no-open",d.default.createElement("div",{className:"inventory-content"},d.default.createElement("div",{className:J,style:{marginBottom:"10px"}},d.default.createElement("span",null,"存货"),R?d.default.createElement("span",null,d.default.createElement("span",{style:{marginRight:"5px"}},"仓库"),d.default.createElement(m.default,{type:"editConfig",onClick:function(){e.setState({warehouseModal:!0})}})):"",L?d.default.createElement("span",null,"数量"):"",L?d.default.createElement("span",null,"单价"):"",d.default.createElement("span",null,"金额"),d.default.createElement("span",null)),a.map(function(t,r){return d.default.createElement("div",{key:r,className:J},d.default.createElement("span",null,d.default.createElement(g.XfnSelect,{combobox:!0,showSearch:!0,placeholder:"请选择存货",value:t.get("stockCode")?(t.get("stockCode")?t.get("stockCode"):"")+" "+(t.get("stockName")?t.get("stockName"):""):void 0,dropdownRender:function(t){return d.default.createElement("div",null,t,d.default.createElement(u.default,{style:{margin:"4px 0",display:_.size?"":"none"}}),_.size?d.default.createElement("div",{style:{padding:"8px",cursor:"pointer"},onMouseDown:function(){n(E.beforeRunningAddInventoryCard(function(){e.setState({showCardModal:!0})},_,U[A]))}},d.default.createElement(l.default,{type:"plus"})," 新增存货"):"")},onChange:function(e,a){var i=e.split(y.TREE_JOIN_STR),o=i[0],l=i[1],u=i[2],s=i[3],d={stockUuid:o,stockName:u,stockCode:l,amount:t.get("amount"),isOpenedQuantity:s,depotUuid:t.get("depotUuid"),depotCode:t.get("depotCode"),depotName:t.get("depotName")};if(a.props.priceList&&a.props.priceList.size){var f="",m="";a.props.unit.get("uuid")===a.props.priceList.getIn([0,"unitUuid"])?(m=a.props.unit.get("name"),f=a.props.unit.get("uuid")):a.props.unit.get("unitList").map(function(e){e.get("uuid")===a.props.priceList.getIn([0,"unitUuid"])&&(m=e.get("name"),f=e.get("uuid"))}),n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r],(0,p.fromJS)(c({},d,{unitPrice:a.props.priceList.getIn([0,"defaultPrice"]),unitUuid:f,unitName:m}))))}else a.props.unit&&!a.props.unit.get("unitList").size?n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r],(0,p.fromJS)(c({},d,{unitUuid:a.props.unit.get("uuid"),unitName:a.props.unit.get("name")})))):n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r],(0,p.fromJS)(c({},d))))}},s.map(function(e,t){return d.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+y.TREE_JOIN_STR+e.get("code")+y.TREE_JOIN_STR+e.get("name")+y.TREE_JOIN_STR+e.get("isOpenedQuantity")+y.TREE_JOIN_STR+t,priceList:e.get("unitPriceList"),unit:e.get("unit")},e.get("code")+" "+e.get("name"))}))),R?d.default.createElement("span",{className:"warehouse-select"},d.default.createElement(g.XfnSelect,{placeholder:"请选择",combobox:!0,showSearch:!0,value:t.get("depotName")?(t.get("depotCode")?t.get("depotCode"):"")+" "+(t.get("depotName")?t.get("depotName"):""):void 0,dropdownRender:function(e){return d.default.createElement("div",null,e)},onChange:function(e){var a=e.split(y.TREE_JOIN_STR),i=a[0],o=a[1],l=a[2];t.get("amount");n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"depotUuid"],i)),n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"depotCode"],o)),n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"depotName"],l))}},f.map(function(e,t){return d.default.createElement(o.default.Option,{key:e.get("uuid"),value:""+e.get("uuid")+y.TREE_JOIN_STR+e.get("code")+y.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))}))):"",L?d.default.createElement("span",null,(s.find(function(e){return e.get("uuid")===t.get("stockUuid")})||(0,p.fromJS)([])).get("isOpenedQuantity")||JSON.parse(t.get("isOpenedQuantity")||!1)?d.default.createElement(g.XfInput,{mode:"number",tipTit:"数量",placeholder:"输入数量",value:t.get("number"),negativeAllowed:!0,onChange:function(e){var a=e.target.value;if(n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"number"],a)),t.get("unitPrice")>0){var i=((a||0)*t.get("unitPrice")).toFixed(2);n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"amount"],i)),n(v.autoCalculateStockAmount()),S&&n(v.searchApprovalChangeRunningTaxRate(S))}}}):"",(s.find(function(e){return e.get("uuid")===t.get("stockUuid")})||(0,p.fromJS)([])).get("isOpenedQuantity")||JSON.parse(t.get("isOpenedQuantity")||!1)?(i=s.find(function(e){return e.get("uuid")===t.get("stockUuid")})||(0,p.fromJS)([]),d.default.createElement(o.default,{placeholder:"单位",style:{marginLeft:"8px",alignSelf:"flex-end"},dropdownClassName:"auto-width",value:t.get("unitName")?(t.get("unitCode")?t.get("unitCode"):"")+" "+(t.get("unitName")?t.get("unitName"):""):void 0,onChange:function(e){var a=e.split(y.TREE_JOIN_STR),o=a[0],l=a[1];n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"unitUuid"],o)),n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"unitName"],l));var u=((i.get("unitPriceList")||[]).find(function(e){return e.get("unitUuid")===o})||(0,p.fromJS)({})).get("defaultPrice")||0;if(u&&n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"unitPrice"],u)),u&&""!==t.get("number")){var c=((t.get("number")||0)*u).toFixed(2);n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"amount"],c)),n(v.autoCalculateStockAmount()),S&&n(v.searchApprovalChangeRunningTaxRate(S))}}},i.getIn(["unit","uuid"])?d.default.createElement(Option,{key:i.getIn(["unit","uuid"]),value:""+i.getIn(["unit","uuid"])+y.TREE_JOIN_STR+i.getIn(["unit","name"])},i.getIn(["unit","name"])):"",(i.getIn(["unit","unitList"])||[]).map(function(e){return d.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+y.TREE_JOIN_STR+e.get("name")},e.get("name"))}))):""):"",L?d.default.createElement("span",null,(s.find(function(e){return e.get("uuid")===t.get("stockUuid")})||(0,p.fromJS)([])).get("isOpenedQuantity")||JSON.parse(t.get("isOpenedQuantity")||!1)?d.default.createElement(g.XfInput,{mode:"number",tipTit:"单价",placeholder:"请输入单价",value:t.get("unitPrice"),onChange:function(e){var a=e.target.value;if(n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"unitPrice"],a)),""!==t.get("number")){var i=((a||0)*t.get("number")).toFixed(2);n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"amount"],i)),n(v.autoCalculateStockAmount()),S&&n(v.searchApprovalChangeRunningTaxRate(S))}}}):""):"",d.default.createElement("span",null,d.default.createElement(g.XfInput,{mode:"amount",negativeAllowed:!0,placeholder:"请输入金额",value:t.get("amount"),onChange:function(e){var a=e.target.value;if(n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"amount"],a)),n(v.autoCalculateStockAmount()),S&&n(v.searchApprovalChangeRunningTaxRate(S)),a>0&&t.get("number")<0||a<0&&t.get("number")>0){var i=((a||0)/-t.get("number")).toFixed(4);n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"number"],-t.get("number"))),n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"unitPrice"],i))}else if(t.get("number")>0||t.get("number")<0){var o=((a||0)/t.get("number")).toFixed(4);n(v.changeSearchApprovalString("editRunningModalTemp",["stockList",r,"unitPrice"],o))}}})),d.default.createElement("span",null,a.size>1?d.default.createElement(m.default,{type:"bigDel",theme:"outlined",onClick:function(){n(v.deleteSearchApprovalStock(a,r,S))}}):""));var i}),d.default.createElement("div",{className:"inventory-button"},d.default.createElement(i.default,{onClick:function(){n(v.addSearchApprovalStock(a,a.size-1))}},d.default.createElement(m.default,{type:"big-plus"}),"添加存货明细"),d.default.createElement(i.default,{onClick:function(){n(v.getInventoryAllCardList(_,"showStockModal"))}},d.default.createElement(m.default,{type:"editPlus"}),"批量添加存货")),d.default.createElement(C.default,{showModal:D,closeModal:function(){return e.setState({showCardModal:!1})},dispatch:n,enableWarehouse:R,fromPage:"searchApproval"}),d.default.createElement(h.default,{MemberList:N,selectThingsList:I,thingsList:b,dispatch:n,showModal:T,selectList:P,categoryList:_,selectItem:w,stockCardList:a,selectedKeys:O}),d.default.createElement(r.default,{visible:k,title:"批量设置仓库",onCancel:function(){e.setState({warehouseModal:!1})},onOk:function(){var t=j.warehouseCardUuid,r=j.warehouseCardCode,i=j.warehouseCardName,o=a.toJS();n(v.changeSearchApprovalString("editRunningModalTemp","stockList",(0,p.fromJS)(o.map(function(e){return e.depotUuid=t,e.depotCode=r,e.depotName=i,e})))),e.setState({warehouseModal:!1,warehouseCards:{}})}},d.default.createElement("div",{style:{display:"flex"}},d.default.createElement("span",{style:{width:"100px",lineHeight:"28px"}},"仓库："),d.default.createElement(o.default,{style:{flex:1},placeholder:"请选择",combobox:!0,showSearch:!0,value:j.warehouseCardUuid?(j.warehouseCardCode||"")+" "+(j.warehouseCardName||""):void 0,onChange:function(t){var n=t.split(y.TREE_JOIN_STR),a=n[0],r=n[1],i=n[2];e.setState({warehouseCards:{warehouseCardUuid:a,warehouseCardCode:r,warehouseCardName:i}})}},f.map(function(e,t){return d.default.createElement(Option,{key:e.get("uuid"),value:""+e.get("uuid")+y.TREE_JOIN_STR+e.get("code")+y.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))})))))}}]),t}())||a;t.default=T},2495:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=h(n(47)),i=h(n(1267)),o=h(n(129)),l=h(n(100)),u=h(n(14)),c=h(n(171)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(1265),n(128),n(99),n(78),n(170);var d=h(n(1)),f=n(17),p=n(127),m=C(n(27)),g=n(18),y=C(n(486));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=c.default.TreeNode,_=(0,f.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={inputValue:""},E(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.MemberList,s=(t.searchList,t.hasSearchContent,t.thingsList),f=t.selectedKeys,C=t.showModal,h=t.selectItem,E=t.selectList,_=t.stockCardList,S=t.categoryList,T=h&&h.size||0,N=a?function e(t,n,a){return t&&t.map(function(t,r){return t.childList&&t.childList.length?d.default.createElement(v,{key:""+t.uuid+m.TREE_JOIN_STR+t.name+m.TREE_JOIN_STR+a,title:t.name},e(t.childList,n,a+1)):d.default.createElement(v,{key:""+t.uuid+m.TREE_JOIN_STR+t.name+m.TREE_JOIN_STR+a,title:t.name,checkable:!0})})}(a.toJS(),["全部"],1):"",I=s.toJS().filter(function(t){return!e.state.inputValue||(t.code.indexOf(e.state.inputValue)>-1||t.name.indexOf(e.state.inputValue)>-1)}),b=I.every(function(e){return E.some(function(t){return t===e.uuid})})&&I.length;return d.default.createElement(r.default,{className:"select-modal",title:"选择存货",visible:C,onCancel:function(){n(y.changeSearchRunningCalculateCommonString(["views","showStockModal"],!1)),n(y.changeSearchRunningCalculateCommonString("selectedKeys","")),n(y.changeSearchRunningCalculateCommonString("selectList",(0,g.fromJS)([]))),n(y.changeSearchRunningCalculateCommonString("selectItem",(0,g.fromJS)([])))},onOk:function(){n(y.changeSearchRunningCalculateCommonString(["views","showStockModal"],!1)),n(y.changeSearchApprovalCommonChargeInvnetory(_,h)),n(y.changeSearchRunningCalculateCommonString("selectedKeys","")),n(y.changeSearchRunningCalculateCommonString("selectList",(0,g.fromJS)([]))),n(y.changeSearchRunningCalculateCommonString("selectItem",(0,g.fromJS)([])))},width:"800px"},d.default.createElement("div",{className:"lsqc-contacts-card-top"},d.default.createElement("div",{className:"table-tree-container",style:{height:I.length>5?"461px":"249px"}},d.default.createElement(c.default,{defaultExpandAll:!0,onSelect:function(e){if(e[0]){var t=e[0].split(m.TREE_JOIN_STR),a=t[0],r=t[1],i=t[2];"all"===a?(n(y.changeSearchRunningCalculateCommonString("selectedKeys","all"+m.TREE_JOIN_STR+"1")),n(y.getInventoryAllCardList(S,"showStockModal"))):(n(y.changeSearchRunningCalculateCommonString("selectedKeys",""+a+m.TREE_JOIN_STR+r+m.TREE_JOIN_STR+i)),n(y.getInventorySomeCardList(a,i)))}},selectedKeys:[f||"all"+m.TREE_JOIN_STR+"1"]},d.default.createElement(v,{key:"all"+m.TREE_JOIN_STR+"1",title:"全部",checkable:!0}),N)),d.default.createElement(p.TableAll,{className:"contacts-table-right",style:{height:I.length>5?"461px":"249px"}},d.default.createElement("span",{className:"lsqc-serch"},d.default.createElement(u.default,{className:"lsqc-serch-icon",type:"search"}),d.default.createElement(l.default,{placeholder:"搜索",className:"lsqc-serch-input",style:{paddingLeft:10},onChange:function(t){e.setState({inputValue:t.target.value})}})),d.default.createElement("div",{className:"table-title-wrap"},d.default.createElement("ul",{className:"table-title table-title-charge"},d.default.createElement("li",{onClick:function(e){e.stopPropagation(),n(y.chargeSearchApprovalItemCheckboxCheckAll(b,I,s))}},d.default.createElement(o.default,{checked:b})),d.default.createElement("li",null,d.default.createElement("span",null,"编号")),d.default.createElement("li",null,d.default.createElement("span",null,"名称")))),d.default.createElement(p.TableBody,{style:{height:s&&s.toJS()>5?"374px":"249px"}},s&&s.toJS().map(function(t){var a=E.indexOf(t.uuid)>-1;return(t.code+" "+t.name).indexOf(e.state.inputValue)>-1?d.default.createElement(p.TableItem,{className:"contacts-table-width-charge",key:t.uuid,onClick:function(e){e.stopPropagation()}},d.default.createElement("li",{onClick:function(e){e.stopPropagation(),n(y.chargeSearchApprovalItemCheckboxCheck(a,t.uuid,t.code,t.name,t.isOpenQuantity,t.unitPriceList,t.unit))}},d.default.createElement(o.default,{checked:a})),d.default.createElement("li",null,t.code),d.default.createElement("li",null,t.name)):""})))),d.default.createElement("div",{className:"charge-chosen-project"},"选择存货：",h&&h.map(function(e){return d.default.createElement(i.default,{closable:!0,onClose:function(t){t.preventDefault(),n(y.chargeSearchApprovalItemCheckboxCheck(!0,e.get("uuid")))}},e.get("code")," ",e.get("name"))})),d.default.createElement("div",{style:{display:T>0?"":"none",margin:"0 0 10px 20px"}},T,"个存货"))}}]),t}())||a;t.default=_},2496:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=y(n(37)),i=y(n(14)),o=y(n(45)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(38),n(78),n(55);var u=y(n(1)),c=n(17),s=n(18),d=n(127),f=g(n(27)),p=y(n(2497)),m=g(n(486));n(101);function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=(0,c.immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showCardModal:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"render",value:function(){var e,t=this.props,n=t.dispatch,a=t.editRunningModalState,l=t.accountList,c=t.enableWarehouse,g=t.warehouseCanUse,y=t.openQuantity,h=a.get("editRunningModalTemp"),E=h.get("jrCategoryType"),v=h.get("jrAmount"),_=h.get("jrDate"),S=h.get("inputAccount"),T=h.get("outputAccount"),N=h.get("jrAbstract"),I=l.size?l.getIn([0,"childList"]):(0,s.fromJS)([]),b=h.get("billList"),O=h.get("stockList"),A=a.get("invetoryCardList"),R=a.get("warehouseCardList"),L=(b.getIn([0,"taxRate"]),a.get("selectList")),P=h.get("inputDepot"),w=h.get("outputDepot"),M=a.getIn(["views","showStockModal"]),D=a.get("MemberList"),k=a.get("selectThingsList"),j=a.get("thingsList"),U=a.get("selectedKeys"),J=a.get("selectItem");return u.default.createElement("div",null,"LB_ZZ"===E?u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",{className:"approval-running-card-input-tip"},"明细金额："),u.default.createElement("span",{className:"approval-running-card-input"},u.default.createElement(d.XfInput,{autoSelect:!0,disabled:!1,value:v,mode:"amount",placeholder:"",negativeAllowed:"LB_ZZ"!==E,onChange:function(e){n(m.changeApprovalProcessDetailInfoCommonString("jrAmount",e.target.value))}}))):null,u.default.createElement("div",{className:"approval-running-card-break"}),u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",{className:"approval-running-card-input-tip"},"摘要："),u.default.createElement("span",{className:"approval-running-card-input"},u.default.createElement(d.XfInput,{value:N,placeholder:"",onChange:function(e){n(m.changeApprovalProcessDetailInfoCommonString("jrAbstract",e.target.value))}}))),"LB_ZZ"===E?u.default.createElement("div",null,u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",{className:"approval-running-card-input-tip"},"转出账户："),u.default.createElement("span",{className:"approval-running-card-input approval-running-card-input-clear"},u.default.createElement(o.default,{value:T&&T.size?""+T.get("accountName"):"",style:{width:"100%"},onChange:function(e){var t=e.split(f.TREE_JOIN_STR);n(m.changeApprovalProcessDetailInfoCommonString("outputAccount",(0,s.fromJS)({accountName:t[1],accountUuid:t[0]})))}},I&&I.toJS().map(function(e,t){return u.default.createElement(o.default.Option,{value:""+e.uuid+f.TREE_JOIN_STR+e.name,key:t},""+e.name)})),u.default.createElement(i.default,{className:"search-approval-modal-clear-icon",style:{display:T&&T.size?"":"none"},type:"close-circle",theme:"filled",onClick:function(){n(m.changeApprovalProcessDetailInfoCommonString("outputAccount",null))}}))),u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",{className:"approval-running-card-input-tip"},"转入账户："),u.default.createElement("span",{className:"approval-running-card-input approval-running-card-input-clear"},u.default.createElement(o.default,{value:S&&S.size?""+S.get("accountName"):"",style:{width:"100%"},onChange:function(e){var t=e.split(f.TREE_JOIN_STR);n(m.changeApprovalProcessDetailInfoCommonString("inputAccount",(0,s.fromJS)({accountName:t[1],accountUuid:t[0]})))}},I&&I.toJS().map(function(e,t){return u.default.createElement(o.default.Option,{value:""+e.uuid+f.TREE_JOIN_STR+e.name,key:t},""+e.name)})),u.default.createElement(i.default,{className:"search-approval-modal-clear-icon",style:{display:S&&S.size?"":"none"},type:"close-circle",theme:"filled",onClick:function(){n(m.changeApprovalProcessDetailInfoCommonString("inputAccount",null))}})))):null,"LB_CHDB"===E?u.default.createElement("div",null,u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",{className:"approval-running-card-input-tip"},"调出仓库："),u.default.createElement("span",{className:"approval-running-card-input approval-running-card-input-clear"},u.default.createElement(o.default,{combobox:!0,showSearch:!0,value:w.get("name")?w.get("code")+" "+w.get("name"):"",onChange:function(e,t){var a=e.split(f.TREE_JOIN_STR),i=t.props.uuid;if(P.get("uuid")===i)return r.default.info("调入与调出不能选择同一仓库");n(m.changeApprovalProcessDetailInfoCommonString("outputDepot",(0,s.fromJS)({code:a[0],name:a[1],type:"",uuid:i})));var o=[];O&&O.map(function(e,t){e.get("isOpenedQuantity")&&o.push({cardUuid:e.get("cardUuid"),storeUuid:i,isUniformPrice:e.get("isUniformPrice")})}),console.log("selectUuidList",o.toJS())}},R&&R.map(function(e,t){return u.default.createElement(Option,{key:e.get("code"),value:""+e.get("code")+f.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")},e.get("code")+" "+e.get("name"))})))),u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",{className:"approval-running-card-input-tip"},"调入仓库："),u.default.createElement("span",{className:"approval-running-card-input approval-running-card-input-clear"},u.default.createElement(o.default,{combobox:!0,showSearch:!0,value:P.get("name")?P.get("code")+" "+P.get("name"):"",onChange:function(e,t){var a=e.split(f.TREE_JOIN_STR),i=t.props.uuid;if(w.get("uuid")===i)return r.default.info("调入与调出不能选择同一仓库");n(m.changeApprovalProcessDetailInfoCommonString("inputDepot",(0,s.fromJS)({code:a[0],name:a[1],type:"",uuid:i})))}},R&&R.map(function(e,t){return u.default.createElement(Option,{key:e.get("code"),value:""+e.get("code")+f.TREE_JOIN_STR+e.get("name"),uuid:e.get("uuid")},e.get("code")+" "+e.get("name"))}))))):null,"LB_CHDB"===E?u.default.createElement("div",{className:"approval-running-card-break approval-running-card-break-margin"}):null,"LB_CHDB"===E?u.default.createElement(p.default,(C(e={dispatch:n,fromPage:"processCHDB",stockCardList:O,stockList:A,stockRange:[],oriDate:_,MemberList:D,thingsList:j,selectThingsList:k,currentCardType:"stock",selectedKeys:U,warehouseList:R,showStockModal:M,insertOrModify:"modify",enableWarehouse:c,warehouseCanUse:g,oriState:"STATE_CHDB",openQuantity:y,selectList:L,selectItem:J,stockTitleName:"存货",stockTemplate:"stockCardList",sectionTemp:"Stock",amountDisable:!1,isCardUuid:!1,needTotalAmount:!0,notNeedOpenModal:!w.get("uuid")},"notNeedOpenModal",!1),C(e,"notNeedMessage","请选择调出仓库"),C(e,"warehouseUuid",w.get("uuid")),C(e,"addInBatchesFun",function(){if(!w.get("uuid"))return r.default.info("请选择调出仓库");n(editCalculateActions.getStockCardCategoryAndList())}),C(e,"selectStockFun",function(e,t){}),C(e,"deleteStockFun",function(e){}),C(e,"callback",function(e){var t=O.size,a=[];J&&J.size&&J.map(function(e,t){e.get("isOpenedQuantity")&&a.push({cardUuid:e.get("uuid"),storeUuid:w.get("uuid"),isUniformPrice:e.get("isUniformPrice")})}),a&&a.length&&n(m.getSearchApprovalCostTransferPrice(_,a,t,"Stock"))}),C(e,"selectTreeCallBack",function(e,t){n("all"===e?m.getInventoryAllCardList([],"hidecategory"):m.getInventorySomeCardList(e,t))}),e)):null)}}]),t}())||a;t.default=h},2497:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=v(n(47)),i=v(n(32)),o=v(n(37)),l=v(n(45)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(51),n(38),n(55);var c=v(n(1)),s=n(17),d=n(18);n(1583);var f=n(22),p=E(n(27)),m=v(n(90)),g=v(n(2498)),y=v(n(2499)),C=v(n(1374)),h=E(n(486));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}var _=l.default.Option,S=(0,s.immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showCardModal:!1,warehouseModal:!1,warehouseCards:{warehouseCardUuid:"",warehouseCardCode:"",warehouseCardName:""},showModal:!1,showInventoryModal:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.stockCardList,u=(t.carryoverCardList,t.stockList),s=t.warehouseList,E=t.stockRange,v=(t.amount,t.taxRate,t.showStockModal),S=t.MemberList,T=t.thingsList,N=(t.selectThingsList,t.selectedKeys),I=t.categoryTypeObj,b=(t.currentCardType,t.insertOrModify),O=t.enableWarehouse,A=t.warehouseCanUse,R=t.openQuantity,L=t.selectList,P=t.selectItem,w=t.stockTitleName,M=t.oriState,D=t.oriDate,k=t.stockTemplate,j=t.sectionTemp,U=t.callback,J=t.selectTreeCallBack,x=(t.amountDisable,t.isCardUuid),H=t.needTotalAmount,G=t.assemblyNumber,Y=t.needHidePrice,F=(t.addInBatchesFun,t.selectStockFun),B=t.deleteStockFun,V=t.notNeedOpenModal,K=t.notNeedMessage,W=t.warehouseUuid,z=t.totalAmountName,Q=(t.dealTypeUuid,t.needSpliceChoosedStock),Z=t.stockCardIdList,X=t.noPrice,q=t.notFoundContent,$=this.state,ee=$.showCardModal,te=$.warehouseModal,ne=$.warehouseCards,ae=($.showInventoryModal,"");ae=O&&R?X?"inventory-content-area-warehouse-no-price":"inventory-content-area-warehouse":O&&!R?"inventory-content-area-warehouse-no-open":!O&&R?"inventory-content-area":"inventory-content-area-no-open";var re=0;return a.map(function(e,t){re=(0,f.numberCalculate)(re,e.get("amount"))}),c.default.createElement("div",{className:"calculate-inventory-content"},c.default.createElement("div",{className:ae,style:{marginBottom:"10px"}},c.default.createElement("span",null,w),O?c.default.createElement("span",null,c.default.createElement("span",{style:{marginRight:"5px"}},"仓库"),c.default.createElement(m.default,{type:"editConfig",onClick:function(){e.setState({warehouseModal:!0})}})):"",R?c.default.createElement("span",null,"数量"):"",R&&!X?c.default.createElement("span",null,"单价"):"",c.default.createElement("span",null,"金额"),c.default.createElement("span",null)),c.default.createElement(y.default,{dispatch:n,stockCardList:a,stockList:u,warehouseList:s,stockRange:E,categoryTypeObj:I,enableWarehouse:O,openQuantity:R,stockTitleName:w,oriState:M,oriDate:D,stockTemplate:k,sectionTemp:j,isCardUuid:x,assemblyNumber:G,needHidePrice:Y,selectStockFun:F,deleteStockFun:B,needTooltip:R,warehouseUuid:W,noPrice:X,notFoundContent:q,showAddCardModal:function(){e.setState({showCardModal:!0})}}),"STATE_CHZZ_ZZD"===M?null:c.default.createElement("div",{className:"inventory-button chzz-inventory-button"},c.default.createElement(i.default,{onClick:function(){V?o.default.info(K):n(h.addSearchApprovalStock(a,a.size-1))}},c.default.createElement(m.default,{type:"big-plus"}),"添加"+w+"明细"),c.default.createElement(i.default,{onClick:function(){V||e.setState({showInventoryModal:!0}),n(h.getInventoryAllCardList([],"hidecategory"))}},c.default.createElement(m.default,{type:"editPlus"}),"批量添加"+w),"STATE_CHYE_CK"!==M&&"STATE_YYSR_ZJ"!==M||!R||"insert"!==b?null:c.default.createElement(i.default,{onClick:function(){if(!V&&"STATE_YYSR_ZJ"===M||"STATE_CHYE_CK"===M){n(editCalculateActions.changeEditCalculateCommonState("views","showCount",!0)),O&&n(editCalculateActions.getWarehouseCardTree({haveQuantity:!1,inventoryUuid:"",oriDate:D,tempName:"STATE_CHYE_CK"===M?"Balance":"CostTransfer",isNeedHaveQuantity:!1}));var e="STATE_CHYE_CK"===M?"BalanceTemp":"CostTransferTemp";n(editCalculateActions.getStockCardList(e,null,!0))}else o.default.info("请先选择处理类别")},style:{marginRight:"10px",width:88}},c.default.createElement(m.default,{type:"count-inventory"}),"  ","STATE_CHYE_CK"===M?"盘点调整":"盘点结转"),"STATE_CHYE_CH"===M&&R&&O&&"insert"===b?c.default.createElement(i.default,{onClick:function(){n(editCalculateActions.changeEditCalculateCommonState("views","showCount",!0)),n(editCalculateActions.getWarehouseCardTree({haveQuantity:!1,inventoryUuid:"",oriDate:D,tempName:"Balance",isNeedHaveQuantity:!1})),n(editCalculateActions.getStockCardList("BalanceTemp",null,!0))},style:{marginRight:"10px",width:113}},c.default.createElement(m.default,{type:"count-inventory"}),"  调整统一单价"):null,H?c.default.createElement("span",{className:"chzz-inventory-total"},z||"合计","：",(0,f.formatMoney)(re)):null),c.default.createElement(C.default,{showModal:ee,closeModal:function(){return e.setState({showCardModal:!1})},dispatch:n,enableWarehouse:A,fromPage:"searchApprovalHideCategory"}),c.default.createElement(g.default,{showCommonChargeModal:v,MemberList:S,thingsList:T,dispatch:n,oriState:M,selectedKeys:N,selectItem:P,selectList:L,stockCard:a,temp:j,showSelectAll:!0,stockTemplate:k,cancel:function(){e.setState({showStockModal:!1})},selectTreeFunc:J,callback:U,needSpliceChoosedStock:Q,stockCardIdList:Z}),c.default.createElement(r.default,{visible:te,title:"批量设置仓库",onCancel:function(){e.setState({warehouseModal:!1})},onOk:function(){var t=ne.warehouseCardUuid,r=ne.warehouseCardCode,i=ne.warehouseCardName,o=a.toJS();n(editCalculateActions.changeEditCalculateCommonString(j,k,(0,d.fromJS)(o.map(function(e){return e.warehouseCardUuid=t,e.warehouseCardCode=r,e.warehouseCardName=i,e}))));var l=[],u=[];o&&o.map(function(e){l.push({cardUuid:e.cardUuid?e.cardUuid:"",storeUuid:t}),e.cardUuid&&u.push(e.cardUuid)}),u.length&&"STATE_YYSR_XS"!==M&&"STATE_YYSR_TS"!==M&&n(editCalculateActions.getStockBuildUpPrice(D,l,0,j,"notFinish")),e.setState({warehouseModal:!1,warehouseCards:{}})}},c.default.createElement("div",{style:{display:"flex"}},c.default.createElement("span",{style:{width:"100px",lineHeight:"28px"}},"仓库："),c.default.createElement(l.default,{style:{flex:1},placeholder:"请选择",combobox:!0,showSearch:!0,value:ne.warehouseCardUuid?(ne.warehouseCardCode||"")+" "+(ne.warehouseCardName||""):void 0,onChange:function(t){var n=t.split(p.TREE_JOIN_STR),a=n[0],r=n[1],i=n[2];e.setState({warehouseCards:{warehouseCardUuid:a,warehouseCardCode:r,warehouseCardName:i}})}},s&&s.map(function(e,t){return c.default.createElement(_,{key:e.get("uuid"),value:""+e.get("uuid")+p.TREE_JOIN_STR+e.get("code")+p.TREE_JOIN_STR+e.get("name")},e.get("code")+" "+e.get("name"))})))))}}]),t}())||a;t.default=S},2498:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=h(n(47)),i=h(n(1267)),o=h(n(129)),l=h(n(100)),u=h(n(14)),c=h(n(171)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(1265),n(128),n(99),n(78),n(170);var d=h(n(1)),f=n(17),p=n(127),m=C(n(27)),g=n(18),y=C(n(486));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=c.default.TreeNode,_=(0,f.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={inputValue:""},E(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.MemberList,s=t.thingsList,f=t.selectedKeys,C=t.showCommonChargeModal,h=t.selectItem,E=t.selectList,_=(t.cancel,t.callback),S=t.stockCard,T=t.temp,N=t.oriState,I=t.selectTreeFunc,b=t.showSelectAll,O=t.stockTemplate,A=t.stockCardIdList,R=h&&h.size||0,L=a?function e(t,n,a){return t&&t.map(function(t,r){return t.childList&&t.childList.length?d.default.createElement(v,{key:""+t.uuid+m.TREE_JOIN_STR+t.name+m.TREE_JOIN_STR+a,title:t.name},e(t.childList,n,a+1)):d.default.createElement(v,{key:""+t.uuid+m.TREE_JOIN_STR+t.name+m.TREE_JOIN_STR+a,title:t.name,checkable:!0})})}(a.toJS(),["全部"],1):"",P=s.toJS().filter(function(t){return!e.state.inputValue||(t.code.indexOf(e.state.inputValue)>-1||t.name.indexOf(e.state.inputValue)>-1)}),w="CostTransfer"===T?"cardUuid":"uuid",M="CostTransfer"===T&&A?P.filter(function(e){return A.indexOf(e[w])}):P,D=M.every(function(e){return E.some(function(t){return t===e[w]})})&&(M.length||P.length);return d.default.createElement(r.default,{className:"select-modal",title:"选择存货",visible:C,onCancel:function(){n(y.changeSearchRunningCalculateCommonString(["views","showStockModal"],!1)),n(y.changeSearchRunningCalculateCommonString("selectedKeys",["all"+m.TREE_JOIN_STR+"1"])),n(y.changeSearchRunningCalculateCommonString("selectList",(0,g.fromJS)([]))),n(y.changeSearchRunningCalculateCommonString("selectItem",(0,g.fromJS)([])))},onOk:function(){h.size&&n(y.changeSelectStock(S.concat(h),T,O)),_(),n(y.changeSearchRunningCalculateCommonString(["views","showStockModal"],!1)),n(y.changeSearchRunningCalculateCommonString("selectedKeys",["all"+m.TREE_JOIN_STR+"1"])),n(y.changeSearchRunningCalculateCommonString("selectList",(0,g.fromJS)([]))),n(y.changeSearchRunningCalculateCommonString("selectItem",(0,g.fromJS)([])))},width:"800px"},d.default.createElement("div",{className:"lsqc-contacts-card-top"},d.default.createElement("div",{className:"table-tree-container",style:{height:P.length>5?"461px":"249px"}},d.default.createElement(c.default,{defaultExpandAll:!0,onSelect:function(e){if(e[0]){var t=e[0].split(m.TREE_JOIN_STR),a=t[0],r=t[2];I(a,r),n(y.changeSearchRunningCalculateCommonString("selectedKeys",e))}},selectedKeys:f},d.default.createElement(v,{key:"all"+m.TREE_JOIN_STR+"1",title:"全部",checkable:!0}),L)),d.default.createElement(p.TableAll,{className:"contacts-table-right",style:{height:P.length>5?"461px":"249px"}},d.default.createElement("span",{className:"lsqc-serch"},d.default.createElement(u.default,{className:"lsqc-serch-icon",type:"search",onClick:function(){}}),d.default.createElement(l.default,{placeholder:"搜索",className:"lsqc-serch-input",onChange:function(t){e.setState({inputValue:t.target.value})}})),d.default.createElement("div",{className:"table-title-wrap"},d.default.createElement("ul",{className:"table-title table-title-charge"},d.default.createElement("li",{onClick:function(e){e.stopPropagation();var t="CostTransfer"===T,a="CostTransfer"===T&&A?P.filter(function(e){return A.indexOf(e[w])}):P;b&&n(y.changeSearchApprovalhideCategoryItemCheckboxCheckAll(D,a,s,!1,t))}},b?d.default.createElement(o.default,{disabled:A&&A.length===P.length,checked:D}):null),d.default.createElement("li",null,d.default.createElement("span",null,"编号")),d.default.createElement("li",null,d.default.createElement("span",null,"名称")))),d.default.createElement(p.TableBody,null,s&&s.toJS().map(function(t){var a="Stock"===T||"Balance"===T||"StockBuildUp"===T||"StockIntoProject"===T||"ProjectCarryover"===T?t.uuid:t.cardUuid,r=E.indexOf(a)>-1,i="STATE_YYSR_ZJ"!==N&&"StockBuildUp"!==T&&"StockIntoProject"!==T&&"ProjectCarryover"!==T&&"Balance"!==T&&"Stock"!==T&&S.some(function(e){return e.get("cardUuid")===a}),l=t.code+" "+t.name;return l.indexOf(e.state.inputValue)>-1||l.indexOf(e.state.inputValue.toUpperCase())>-1||l.indexOf(e.state.inputValue.toLowerCase())>-1?d.default.createElement(p.TableItem,{className:"contacts-table-width-charge",key:a},d.default.createElement("li",{onClick:function(e){e.stopPropagation(),!i&&n(y.changeSearchApprovalhideCategoryItemCheckboxCheck(r,t))}},d.default.createElement(o.default,{disabled:i,checked:r||i})),d.default.createElement("li",null,t.code),d.default.createElement("li",null,t.name)):""})))),d.default.createElement("div",{style:{margin:"0 0 10px 20px"}},"选择存货：",h&&h.map(function(e){return d.default.createElement(i.default,{closable:!0,onClose:function(t){t.preventDefault(),n(y.chargeSearchApprovalItemCheckboxCheck(!0,e.get("uuid")))}},e.get("code")," ",e.get("name"))})),d.default.createElement("div",{style:{display:R>0?"":"none",margin:"0 0 10px 20px"}},R,"个存货"))}}]),t}())||a;t.default=_},2499:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=S(n(61)),i=S(n(37)),o=S(n(1256)),l=S(n(14)),u=S(n(45)),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(79),n(38),n(1257),n(78),n(55);var d=S(n(1)),f=n(17),p=n(18),m=S(n(483)),g=n(22),y=_(n(27)),C=S(n(90)),h=n(127),E=_(n(484)),v=_(n(486));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}var T=u.default.Option,N=(0,f.immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showCardModal:!1,warehouseModal:!1,warehouseCards:{warehouseCardUuid:"",warehouseCardCode:"",warehouseCardName:""},showModal:!1,showInventoryModal:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.stockCardList,a=e.stockList,s=(e.warehouseList,e.stockRange,e.categoryTypeObj,e.enableWarehouse),f=e.openQuantity,_=e.stockTitleName,S=e.oriState,N=e.oriDate,I=(e.stockTemplate,e.sectionTemp),b=e.isCardUuid,O=(e.assemblyNumber,e.needHidePrice,e.selectStockFun),A=(e.deleteStockFun,e.needTooltip),R=(e.changeTotalAmount,e.warehouseUuid),L=e.noPrice,P=e.notFoundContent,w=e.showAddCardModal,M=b?"cardUuid":"uuid",D="STATE_CHZZ_ZZD"===S?"物料"===_?"materialUuid":"productUuid":"cardUuid",k=!1;"STATE_CHYE_CH"!==S&&"STATE_CHYE_CK"!==S&&"STATE_YYSR_ZJ"!==S||(k=!0);var j="物料"===_||"存货"===_?"notFinish":"finish";return d.default.createElement("div",null,n.map(function(e,b){var U=a.find(function(t){return t.get(M)===e.get("stockUuid")})||(0,p.fromJS)([]),J="STATE_CHDB"===S?new Boolean(e.get("isOpenQuantity")):f,x="";return x=s&&J?L?"inventory-content-area-warehouse-no-price":"inventory-content-area-warehouse":s&&!J?"inventory-content-area-warehouse-no-open":!s&&J?"inventory-content-area":"inventory-content-area-no-open",d.default.createElement(r.default,{title:A&&((a.find(function(t){return t.get(M)===e.get(D)})||(0,p.fromJS)([])).get("isOpenedQuantity")||JSON.parse(e.get("isOpenedQuantity")||!1))?d.default.createElement("div",null,d.default.createElement("p",null,"仓库数量：",e.get("referenceQuantity")?(0,g.formatFour)(e.get("referenceQuantity")):0),"STATE_YYSR_XS"===S||"STATE_YYSR_TS"===S?d.default.createElement("p",null,"参考单价：",e.get("unitName")?(0,g.formatFour)(e.get("referencePrice"))+"元 / "+e.get("unitName"):(0,g.formatFour)(e.get("referencePrice"))):d.default.createElement("p",null,e.get("isUniformPrice")&&"STATE_CHDB"===S?"统一":"参考","单价：",U.getIn(["unit","name"])?(0,g.formatFour)(e.get("referencePrice"))+"元 / "+U.getIn(["unit","name"]):(0,g.formatFour)(e.get("referencePrice")))):"",placement:"right"},d.default.createElement("div",{key:b,className:x},d.default.createElement("span",null,d.default.createElement(m.default,{combobox:!0,showSearch:!0,placeholder:"请选择"+_,value:e.get("stockCode")?(e.get("stockCode")?e.get("stockCode"):"")+" "+(e.get("stockName")?e.get("stockName"):""):void 0,notFoundContent:P?d.default.createElement("span",null,d.default.createElement(l.default,{type:"info-circle",theme:"filled",style:{color:"#1890ff"}})," ",P):void 0,dropdownRender:function(e){return d.default.createElement("div",null,e,d.default.createElement(o.default,{style:{margin:"4px 0"}}),d.default.createElement("div",{style:{padding:"8px",cursor:"pointer"},onMouseDown:function(){t(E.beforeRunningAddInventoryCard(w))}},d.default.createElement(l.default,{type:"plus"})," 新增存货"))},onChange:function(n,a){var r=n.split(y.TREE_JOIN_STR),i=r[0],o=r[1],l=r[2],u="true"===r[3],s="true"===r[4],d=e.get("amount"),f=e.get("depotUuid"),m={stockUuid:i,stockName:l,stockCode:o,amount:d,isOpenedQuantity:u,isUniformPrice:s,depotUuid:f,depotCode:e.get("depotCode"),depotName:e.get("depotName")};if(a.props.priceList&&a.props.priceList.size){var g="",C="";a.props.unit.get("uuid")===a.props.priceList.getIn([0,"unitUuid"])?(C=a.props.unit.get("name"),g=a.props.unit.get("uuid")):a.props.unit.get("unitList").map(function(e){e.get("uuid")===a.props.priceList.getIn([0,"unitUuid"])&&(C=e.get("name"),g=e.get("uuid"))}),t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b],(0,p.fromJS)(c({},m,{unitPrice:a.props.priceList.getIn([0,"defaultPrice"]),unitUuid:g,unitName:C}))))}else a.props.unit&&!a.props.unit.get("unitList").size?t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b],(0,p.fromJS)(c({},m,{unitUuid:a.props.unit.get("uuid"),unitName:a.props.unit.get("name")})))):t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b],(0,p.fromJS)(c({},m))));O&&O(i,b),"STATE_YYSR_XS"!==S&&"STATE_YYSR_TS"!==S&&t(v.getApprovalStockBuildUpPrice(N,[{cardUuid:i,storeUuid:"STATE_CHDB"===S?R:f,noNeedPrice:!1,moreUnit:!1}],b,I,j))}},a.map(function(e,t){return d.default.createElement(T,{key:e.get(M),value:""+e.get(M)+y.TREE_JOIN_STR+e.get("code")+y.TREE_JOIN_STR+e.get("name")+y.TREE_JOIN_STR+e.get("isOpenedQuantity")+y.TREE_JOIN_STR+e.get("isUniformPrice"),unit:e.get("unit")},e.get("code")+" "+e.get("name"))}))),J?d.default.createElement("span",null,(a.find(function(t){return t.get(M)===e.get(D)})||(0,p.fromJS)([])).get("isOpenedQuantity")||JSON.parse(e.get("isOpenedQuantity")||!1)?"STATE_YYSR_XS"===S||"STATE_YYSR_TS"===S?d.default.createElement("span",null,Number(e.get("number"))?(0,g.formatFour)(Number(e.get("number"))):0):d.default.createElement(h.XfInput,{mode:"number",tipTit:"数量",negativeAllowed:k,placeholder:"输入数量",value:e.get("number"),onChange:function(n){var a=n.target.value;if("STATE_CHYE_CH"===S||"STATE_CHYE_CK"===S||"STATE_YYSR_ZJ"===S);else if(t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b,"number"],a)),!L&&e.get("unitPrice")>0){var r=(0,g.numberCalculate)(a,e.get("unitPrice"),4,"multiply");t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b,"amount"],r))}}}):"",(a.find(function(t){return t.get(M)===e.get("stockUuid")})||(0,p.fromJS)([])).get("isOpenedQuantity")||JSON.parse(e.get("isOpenedQuantity")||!1)?"STATE_YYSR_XS"===S||"STATE_YYSR_TS"===S?d.default.createElement("span",{style:{display:"flex",alignItems:"center",paddingLeft:"5px"}},"STATE_CHDB"!==S?e.get("unitName")?" "+(e.get("unitName")?e.get("unitName"):""):"":e.getIn(["unit","name"])):d.default.createElement(u.default,{placeholder:"单位",style:{marginLeft:"8px",alignSelf:"flex-end"},dropdownClassName:"auto-width",value:e.get("unitName")&&e.get("unitUuid")?(e.get("unitCode")?e.get("unitCode"):"")+" "+(e.get("unitName")?e.get("unitName"):""):void 0,onChange:function(n){var a=n.split(y.TREE_JOIN_STR),r=a[0],i=a[1],o=JSON.parse(a[2])?JSON.parse(a[2]):1,l=o/(e.get("basicUnitQuantity")?e.get("basicUnitQuantity"):1),u=e.get("unitPrice")?(0,g.numberCalculate)(e.get("unitPrice"),l,4,"multiply",4):(0,g.numberCalculate)(e.get("referencePrice"),l,4,"multiply",4),c=(0,g.numberCalculate)(e.get("number"),u,4,"multiply");t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b,"unitUuid"],r)),t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b,"unitName"],i)),L||(t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b,"basicUnitQuantity"],o)),t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b,"amount"],c)),t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b,"unitPrice"],u)),e.get("stockUuid")&&t(v.getApprovalStockBuildUpPrice(N,[{cardUuid:e.get("stockUuid"),storeUuid:"STATE_CHDB"===S?R:e.get("warehouseCardUuid")}],b,I,j)))}},U.getIn(["unit","uuid"])?d.default.createElement(T,{key:U.getIn(["unit","uuid"]),value:""+U.getIn(["unit","uuid"])+y.TREE_JOIN_STR+U.getIn(["unit","name"])+y.TREE_JOIN_STR+"1"},U.getIn(["unit","name"])):"",(U.getIn(["unit","unitList"])||[]).map(function(e){return d.default.createElement(T,{key:e.get("uuid"),value:""+e.get("uuid")+y.TREE_JOIN_STR+e.get("name")+y.TREE_JOIN_STR+e.get("basicUnitQuantity")},e.get("name"))})):""):"",J&&!L?d.default.createElement("span",null,(a.find(function(t){return t.get(M)===e.get("stockUuid")})||(0,p.fromJS)([])).get("isOpenedQuantity")||JSON.parse(e.get("isOpenedQuantity")||!1)?d.default.createElement(h.XfInput,{mode:"number",tipTit:"单价",placeholder:"请输入单价",value:e.get("unitPrice"),onChange:function(n){var a=n.target.value;t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b,"unitPrice"],a));var r=(0,g.numberCalculate)(a,e.get("number"),2,"multiply");t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b,"amount"],r))}}):""):"",d.default.createElement("span",null,d.default.createElement(h.XfInput,{mode:"amount",negativeAllowed:k,placeholder:"请输入金额",value:e.get("amount"),onChange:function(n){var a=n.target.value;if("STATE_CHYE_CH"===S||"STATE_CHYE_CK"===S||"STATE_YYSR_ZJ"===S){if((0,g.numberCalculate)(a,e.get("number"),4,"multiply")<0)i.default.info("金额数量必须同正或同负");else if(t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b,"amount"],a)),e.get("number")>0&&!L){var r=((a||0)/e.get("number")).toFixed(4);t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b,"unitPrice"],r))}}else if(t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b,"amount"],a)),e.get("number")>0&&!L){var o=((a||0)/e.get("number")).toFixed(4);t(v.changeSearchApprovalString("editRunningModalTemp",["stockList",b,"unitPrice"],o))}}})),d.default.createElement("span",null,n.size>1&&"STATE_CHZZ_ZZD"!==S?d.default.createElement(C.default,{type:"bigDel",theme:"outlined",onClick:function(){t(v.deleteSearchApprovalStock(n,b))}}):"")))}))}}]),t}())||a;t.default=N},2500:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=N(n(129)),i=N(n(61)),o=N(n(14)),l=N(n(47)),u=N(n(1230)),c=N(n(37)),s=N(n(32)),d=N(n(45)),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(128),n(79),n(78),n(46),n(1231),n(38),n(51),n(55);var p=N(n(1)),m=n(56),g=N(n(6)),y=n(18),C=T(n(27)),h=n(22),E=N(n(483)),v=N(n(1740)),_=N(n(2501)),S=T(n(486));function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function N(e){return e&&e.__esModule?e:{default:e}}var I=d.default.Option,b=(0,m.connect)(function(e){return e})(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),f(t,[{key:"render",value:function(){var e=this.props,t=e.showAccountModal,n=e.showReceiveModal,a=e.showPayModal,d=e.showBookKeepingModal,f=e.cancelShowPayModal,m=e.cancelShowAccountModal,T=e.cancelShowReceiveModal,N=e.cancelShowBookKeepingModal,b=(e.selectList,e.dispatch),O=e.allState,A=e.canSetAccount,R=e.confirmAccountingApprovalDetail,L=e.confirmReceiveApprovalDetail,P=e.confirmPayApprovalDetail,w=e.confirmBookKeepingApprovalDetail,M=e.cancelSetReceiveMoney,D=e.approalCalculateState,k=e.editLrAccountPermission,j=D.get("formPos"),U=D.get("accountDate"),J=D.get("account"),x=D.get("receiveTotalMoney"),H=D.get("setAccount"),G=D.get("needUsedPoundage"),Y=D.get("beZeroInventory"),F=D.get("beCarryoverOut"),B=D.get("carryoverCategoryList"),V=D.get("carryoverCategoryItem"),K=D.get("usedCarryoverProject"),W=D.get("carryoverProjectCardList"),z=D.get("carryoverProjectList"),Q=D.get("propertyCost"),Z=D.get("propertyCostList"),X=D.get("handlingFeeType"),q=[];!function e(t){return t.map(function(t){t.get("childList").size>0?e(t.get("childList")):q.push(t.toJS())})}(B);var $=O.get("accountList"),ee=$.size?$.getIn([0,"childList"]):(0,y.fromJS)([]);return p.default.createElement("div",null,a?p.default.createElement(l.default,{ref:"modal",visible:!0,title:"填写付款信息",onCancel:function(){b(S.changeSearchRunningCalculateCommonString("accountDate",(0,h.formatDate)().substr(0,10))),b(S.changeSearchRunningCalculateCommonString("account",null)),b(S.changeSearchRunningCalculateCommonString("beZeroInventory",!1)),b(S.changeSearchRunningCalculateCommonString("beCarryoverOut",!1)),b(S.changeSearchRunningCalculateCommonString("carryoverCategoryItem",null)),b(S.changeSearchRunningCalculateCommonString("usedCarryoverProject",!1)),b(S.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,y.fromJS)([]))),b(S.changeSearchRunningCalculateCommonString("propertyCost","")),b(S.changeSearchRunningCalculateCommonString("propertyCostList",(0,y.fromJS)([]))),f()},footer:[p.default.createElement(s.default,{key:"back",type:"ghost",size:"large",onClick:function(){b(S.changeSearchRunningCalculateCommonString("accountDate",(0,h.formatDate)().substr(0,10))),b(S.changeSearchRunningCalculateCommonString("account",null)),b(S.changeSearchRunningCalculateCommonString("beZeroInventory",!1)),b(S.changeSearchRunningCalculateCommonString("beCarryoverOut",!1)),b(S.changeSearchRunningCalculateCommonString("carryoverCategoryItem",null)),b(S.changeSearchRunningCalculateCommonString("usedCarryoverProject",!1)),b(S.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,y.fromJS)([]))),b(S.changeSearchRunningCalculateCommonString("propertyCost","")),b(S.changeSearchRunningCalculateCommonString("propertyCostList",(0,y.fromJS)([]))),f()}},"取消"),p.default.createElement(s.default,{key:"submit",type:"primary",size:"large",disabled:!k,onClick:function(){return J&&J.get("accountUuid")?U?!F||V&&V.size&&V.getIn([0,"relationCategoryUuid"])?Z.size&&!Q?c.default.info("请选择费用性质"):!K||W&&W.size&&W.getIn([0,"cardUuid"])?void P([J,U,F,V,W,Q],function(){b(S.changeSearchRunningCalculateCommonString("accountDate",(0,h.formatDate)().substr(0,10))),b(S.changeSearchRunningCalculateCommonString("account",null)),b(S.changeSearchRunningCalculateCommonString("beZeroInventory",!1)),b(S.changeSearchRunningCalculateCommonString("beCarryoverOut",!1)),b(S.changeSearchRunningCalculateCommonString("carryoverCategoryItem",null)),b(S.changeSearchRunningCalculateCommonString("usedCarryoverProject",!1)),b(S.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,y.fromJS)([]))),b(S.changeSearchRunningCalculateCommonString("propertyCost","")),b(S.changeSearchRunningCalculateCommonString("propertyCostList",(0,y.fromJS)([]))),f()}):c.default.info("请选择项目"):c.default.info("请选择处理类别"):c.default.info("请选择付款日期"):c.default.info("请选择账户")}},"确定")]},p.default.createElement("div",{className:"approval-running-modal-wrap"},p.default.createElement("div",{className:"approval-running-base-config-wrap"},p.default.createElement("div",{className:"approval-running-card-input-wrap"},p.default.createElement("span",{className:"approval-running-card-input-tip"},"日期："),p.default.createElement("span",{className:"approval-running-card-input"},p.default.createElement(u.default,{format:"YYYY-MM-DD",value:U?(0,g.default)(U,"YYYY-MM-DD"):"",onChange:function(e,t){b(S.changeSearchRunningCalculateCommonString("accountDate",t))}}))),p.default.createElement("div",{className:"approval-running-card-input-wrap"},p.default.createElement("span",{className:"approval-running-card-input-tip"},"账户："),p.default.createElement("span",{className:"approval-running-card-input"},p.default.createElement(E.default,{showSearch:!0,value:J?""+J.get("accountName"):"",onSelect:function(e,t){var n=e.split(C.TREE_JOIN_STR);t.props.poundage;b(S.changeSearchRunningCalculateCommonString("account",(0,y.fromJS)({accountUuid:n[0],accountName:n[1]})))}},ee&&ee.map(function(e,t){return p.default.createElement(I,{key:t,value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("name"),poundage:(0,y.fromJS)({needPoundage:e.get("needPoundage"),poundage:e.get("poundage"),poundageRate:e.get("poundageRate")})},e.get("name"))})))),Y?p.default.createElement(_.default,{oriDate:U,dispatch:b,beCarryoverOut:F,carryoverCategory:q,carryoverCategoryItem:V,usedCarryoverProject:K,carryoverProjectCardList:W,carryoverProjectList:z,propertyCost:Q,propertyCostList:Z}):null))):null,n?p.default.createElement(l.default,{ref:"modal2",visible:!0,title:"填写收款信息",onCancel:function(){b(S.changeSearchRunningCalculateCommonString("formPos","")),b(S.changeSearchRunningCalculateCommonString("accountDate",(0,h.formatDate)().substr(0,10))),b(S.changeSearchRunningCalculateCommonString("account",null)),b(S.changeSearchRunningCalculateCommonString("needUsedPoundage",!1)),b(S.changeSearchRunningCalculateCommonString("setAccount",!1)),b(S.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,y.fromJS)([]))),b(S.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,y.fromJS)([]))),T(),M()},footer:[p.default.createElement(s.default,{key:"back",type:"ghost",size:"large",onClick:function(){b(S.changeSearchRunningCalculateCommonString("formPos","")),b(S.changeSearchRunningCalculateCommonString("accountDate",(0,h.formatDate)().substr(0,10))),b(S.changeSearchRunningCalculateCommonString("account",null)),b(S.changeSearchRunningCalculateCommonString("needUsedPoundage",!1)),b(S.changeSearchRunningCalculateCommonString("setAccount",!1)),b(S.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,y.fromJS)([]))),b(S.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,y.fromJS)([]))),T(),M()}},"取消"),p.default.createElement(s.default,{key:"submit",type:"primary",size:"large",disabled:!k,onClick:function(){if(!J||!J.get("accountUuid"))return c.default.info("请选择账户");if(!U)return c.default.info("请选择收款日期");var e=D.get("poundageCurrentCardList"),t=D.get("poundageProjectCardList");return e.size&&!e.getIn([0,"cardUuid"])?c.default.info("请选择往来单位"):t.size&&!t.getIn([0,"cardUuid"])?c.default.info("请选择项目"):void L([U,"modal"===j||H,G,J,x],function(){b(S.changeSearchRunningCalculateCommonString("formPos","")),b(S.changeSearchRunningCalculateCommonString("accountDate",(0,h.formatDate)().substr(0,10))),b(S.changeSearchRunningCalculateCommonString("account",null)),b(S.changeSearchRunningCalculateCommonString("needUsedPoundage",!1)),b(S.changeSearchRunningCalculateCommonString("setAccount",!1)),b(S.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,y.fromJS)([]))),b(S.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,y.fromJS)([]))),T(),M()})}},"确定")]},p.default.createElement("div",{className:"approval-running-modal-wrap"},p.default.createElement("div",{className:"approval-running-base-config-wrap"},p.default.createElement("div",{className:"approval-running-card-input-wrap"},p.default.createElement("span",{className:"approval-running-card-input-tip"},"日期："),p.default.createElement("span",{className:"approval-running-card-input"},p.default.createElement(u.default,{format:"YYYY-MM-DD",value:U?(0,g.default)(U,"YYYY-MM-DD"):"",onChange:function(e,t){b(S.changeSearchRunningCalculateCommonString("accountDate",t))}}))),p.default.createElement("div",{className:"approval-running-card-input-wrap"},p.default.createElement("span",{className:"approval-running-card-input-tip"},"账户："),p.default.createElement("span",{className:"approval-running-card-input"},p.default.createElement(E.default,{showSearch:!0,value:J?""+J.get("accountName"):"",onSelect:function(e,t){var n=e.split(C.TREE_JOIN_STR),a=t.props.poundage,r=a.get("poundage"),i=a.get("poundageRate"),o=x,l=Math.abs(o||0)*i/1e3>r&&r>0?r:Math.abs(o||0)*i/1e3;b(S.changeSearchRunningCalculateCommonString("account",(0,y.fromJS)({accountUuid:n[0],accountName:n[1],poundage:a.toJS(),poundageAmount:(l||0).toFixed(2)}))),a.get("needPoundage")||(b(S.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,y.fromJS)([]))),b(S.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,y.fromJS)([]))))}},ee&&ee.map(function(e,t){return p.default.createElement(I,{key:t,value:""+e.get("uuid")+C.TREE_JOIN_STR+e.get("name"),poundage:(0,y.fromJS)({needPoundage:e.get("needPoundage"),poundage:e.get("poundage"),poundageRate:e.get("poundageRate")})},e.get("name"))})))),p.default.createElement("div",null,p.default.createElement("span",{style:{display:A&&"modal"!==j?"":"none"}},p.default.createElement(r.default,{checked:H,onClick:function(){b(S.changeSearchRunningCalculateCommonString("setAccount",!H))}}," 批量设置“明细账户”",p.default.createElement(i.default,{placement:"bottom",title:"不勾选，已选择账户的明细保留原“明细账户”"},p.default.createElement(o.default,{type:"question-circle"}))))),J&&J.getIn(["poundage","needPoundage"])&&x>0?p.default.createElement(v.default,{needUsedPoundage:G,receiveTotalMoney:x,poundageAmount:J.get("poundageAmount")}):null))):null,t?p.default.createElement(l.default,{ref:"modal3",visible:!0,title:"填写挂账信息",onCancel:function(){b(S.changeSearchRunningCalculateCommonString("accountDate",(0,h.formatDate)().substr(0,10))),b(S.changeSearchRunningCalculateCommonString("beZeroInventory",!1)),b(S.changeSearchRunningCalculateCommonString("beCarryoverOut",!1)),b(S.changeSearchRunningCalculateCommonString("carryoverCategoryItem",null)),b(S.changeSearchRunningCalculateCommonString("usedCarryoverProject",!1)),b(S.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,y.fromJS)([]))),m()},footer:[p.default.createElement(s.default,{key:"back",type:"ghost",size:"large",onClick:function(){b(S.changeSearchRunningCalculateCommonString("accountDate",(0,h.formatDate)().substr(0,10))),b(S.changeSearchRunningCalculateCommonString("beZeroInventory",!1)),b(S.changeSearchRunningCalculateCommonString("beCarryoverOut",!1)),b(S.changeSearchRunningCalculateCommonString("carryoverCategoryItem",null)),b(S.changeSearchRunningCalculateCommonString("usedCarryoverProject",!1)),b(S.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,y.fromJS)([]))),m()}},"取消"),p.default.createElement(s.default,{key:"submit",type:"primary",size:"large",disabled:!k,onClick:function(){return U?!F||V&&V.size&&V.getIn([0,"relationCategoryUuid"])?Z.size&&!Q?c.default.info("请选择费用性质"):!K||W&&W.size&&W.getIn([0,"cardUuid"])?void R([U,F,V,W,Q],function(){b(S.changeSearchRunningCalculateCommonString("accountDate",(0,h.formatDate)().substr(0,10))),b(S.changeSearchRunningCalculateCommonString("beZeroInventory",!1)),b(S.changeSearchRunningCalculateCommonString("beCarryoverOut",!1)),b(S.changeSearchRunningCalculateCommonString("carryoverCategoryItem",null)),b(S.changeSearchRunningCalculateCommonString("usedCarryoverProject",!1)),b(S.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,y.fromJS)([]))),m()}):c.default.info("请选择项目"):c.default.info("请选择处理类别"):c.default.info("请选择挂账日期")}},"确定")]},p.default.createElement("div",{className:"approval-running-modal-wrap"},p.default.createElement("div",{className:"approval-running-base-config-wrap"},p.default.createElement("div",{className:"approval-running-card-input-wrap"},p.default.createElement("span",{className:"approval-running-card-input-tip"},"日期："),p.default.createElement("span",{className:"approval-running-card-input"},p.default.createElement(u.default,{format:"YYYY-MM-DD",value:U?(0,g.default)(U,"YYYY-MM-DD"):"",onChange:function(e,t){b(S.changeSearchRunningCalculateCommonString("accountDate",t))}}))),Y?p.default.createElement(_.default,{oriDate:U,dispatch:b,beCarryoverOut:F,carryoverCategory:q,carryoverCategoryItem:V,usedCarryoverProject:K,carryoverProjectCardList:W,carryoverProjectList:z,propertyCost:Q,propertyCostList:Z}):null))):null,d?p.default.createElement(l.default,{ref:"modal4",visible:!0,title:"填写核记信息",onCancel:function(){b(S.changeSearchRunningCalculateCommonString("formPos","")),b(S.changeSearchRunningCalculateCommonString("accountDate",(0,h.formatDate)().substr(0,10))),b(S.changeSearchRunningCalculateCommonString("account",null)),b(S.changeSearchRunningCalculateCommonString("needUsedPoundage",!1)),b(S.changeSearchRunningCalculateCommonString("handlingFeeType","INCLUDE")),b(S.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,y.fromJS)([]))),b(S.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,y.fromJS)([]))),N()},footer:[p.default.createElement(s.default,{key:"back",type:"ghost",size:"large",onClick:function(){b(S.changeSearchRunningCalculateCommonString("formPos","")),b(S.changeSearchRunningCalculateCommonString("accountDate",(0,h.formatDate)().substr(0,10))),b(S.changeSearchRunningCalculateCommonString("account",null)),b(S.changeSearchRunningCalculateCommonString("needUsedPoundage",!1)),b(S.changeSearchRunningCalculateCommonString("handlingFeeType","INCLUDE")),b(S.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,y.fromJS)([]))),b(S.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,y.fromJS)([]))),N()}},"取消"),p.default.createElement(s.default,{key:"submit",type:"primary",size:"large",disabled:!k,onClick:function(){w([U],function(){b(S.changeSearchRunningCalculateCommonString("formPos","")),b(S.changeSearchRunningCalculateCommonString("accountDate",(0,h.formatDate)().substr(0,10))),b(S.changeSearchRunningCalculateCommonString("account",null)),b(S.changeSearchRunningCalculateCommonString("needUsedPoundage",!1)),b(S.changeSearchRunningCalculateCommonString("handlingFeeType","INCLUDE")),b(S.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,y.fromJS)([]))),b(S.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,y.fromJS)([]))),N()})}},"确定")]},p.default.createElement("div",{className:"approval-running-modal-wrap"},p.default.createElement("div",{className:"approval-running-base-config-wrap"},p.default.createElement("div",{className:"approval-running-card-input-wrap"},p.default.createElement("span",{className:"approval-running-card-input-tip"},"日期："),p.default.createElement("span",{className:"approval-running-card-input"},p.default.createElement(u.default,{format:"YYYY-MM-DD",value:U?(0,g.default)(U,"YYYY-MM-DD"):"",onChange:function(e,t){b(S.changeSearchRunningCalculateCommonString("accountDate",t))}}))),J&&J.getIn(["poundage","needPoundage"])&&x>0?p.default.createElement(v.default,{type:"核记",needUsedPoundage:G,receiveTotalMoney:x,poundageAmount:J.get("poundageAmount"),handlingFeeType:X,poundage:J.get("poundage")}):null))):null)}}]),t}())||a;t.default=b},2501:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=C(n(1234)),i=C(n(45)),o=C(n(129)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1235),n(55),n(128);var u=C(n(1)),c=n(17),s=n(18),d=C(n(483)),f=n(101),p=n(489),m=y(n(27)),g=y(n(486));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}var h=(0,c.immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={oriTemp:(0,s.fromJS)({})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.oriDate,a=t.beCarryoverOut,l=t.dispatch,c=t.carryoverCategory,y=t.carryoverCategoryItem,C=t.usedCarryoverProject,h=t.carryoverProjectCardList,E=t.carryoverProjectList,v=t.propertyCost,_=t.propertyCostList,S=this.state.oriTemp,T=function(){"XZ_MANAGE"!==v&&"XZ_SALE"!==v&&"XZ_FINANCE"!==v&&(_.size?l(g.changeSearchRunningCalculateCommonString("propertyCost",_.get(0))):l(g.changeSearchRunningCalculateCommonString("propertyCost","")))};return u.default.createElement("div",null,u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",null,u.default.createElement(o.default,{checked:a,onChange:function(e){l(g.changeSearchRunningCalculateCommonString("beCarryoverOut",!a)),l(g.getSearchApprovalCarryoverCategory(n)),a&&(l(g.changeSearchRunningCalculateCommonString("carryoverCategoryItem",null)),l(g.changeSearchRunningCalculateCommonString("usedCarryoverProject",!1)),l(g.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,s.fromJS)([]))))}}," 直接成本结转"))),a?u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",{className:"approval-running-card-input-tip"},"处理类别："),u.default.createElement("span",{className:"approval-running-card-input"},u.default.createElement(i.default,{value:y&&y.size?y.getIn([0,"relationCategoryName"]):"",onChange:function(t,n){var a=t.split(m.TREE_JOIN_STR),r="true"===a[2];l(g.changeSearchRunningCalculateCommonString("carryoverCategoryItem",(0,s.fromJS)([{relationCategoryUuid:a[0],relationCategoryName:a[1],relationBeProject:r}])));var i=n.props.projectRange,o=n.props.propertyCostList;l(g.changeSearchRunningCalculateCommonString("propertyCostList",(0,s.fromJS)(o))),1===o.length&&l(g.changeSearchRunningCalculateCommonString("propertyCost",o[0])),r?l(g.getSearchApprovalCarrayProjectCardList(i)):(l(g.changeSearchRunningCalculateCommonString("usedCarryoverProject",!1)),l(g.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,s.fromJS)([])))),e.setState({oriTemp:(0,s.fromJS)({categoryType:n.props.categoryType})})}},c.map(function(e,t){return u.default.createElement(i.default.Option,{key:t,value:""+e.uuid+m.TREE_JOIN_STR+e.name+m.TREE_JOIN_STR+e.beProject,projectRange:e.projectRange,propertyCostList:e.propertyCostList,categoryType:e.categoryType,propertyCarryover:e.propertyCarryover},e.name)})))):null,a&&_.size>1?u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",{className:"approval-running-card-input-tip"},"费用性质："),u.default.createElement("span",{className:"approval-running-card-input"},u.default.createElement(i.default,{value:p.propertyCostNameJson[v],disabled:"XZ_MANAGE"!==v&&"XZ_SALE"!==v&&"XZ_FINANCE"!==v&&""!==v,onChange:function(e){l(g.changeSearchRunningCalculateCommonString("propertyCost",e))}},_.map(function(e,t){return u.default.createElement(i.default.Option,{key:t,value:e},p.propertyCostNameJson[e])})))):null,y&&y.size&&y.getIn([0,"relationBeProject"])?u.default.createElement("div",{className:"approval-running-card-input-wrap"},u.default.createElement("span",{className:"approval-running-card-input-tip"},"项目："),u.default.createElement("span",{className:"approval-running-card-input"},u.default.createElement(d.default,{combobox:!0,showSearch:!0,disabled:!C,value:h&&h.size&&h.getIn([0,"code"])?""+(-1===p.systemProJectCodeCommon.indexOf(h.getIn([0,"code"]))?h.getIn([0,"code"])+" "+h.getIn([0,"name"]):h.getIn([0,"name"])):"",onChange:function(e,t){var n=e.split(m.TREE_JOIN_STR),a=n[0],r=n[1],i=n[2];l(g.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,s.fromJS)([{cardUuid:a,name:i,code:r}])));var o=t.props.projectProperty;"XZ_CONSTRUCTION"===o?l("INDIRECT"===r?g.changeSearchRunningCalculateCommonString("propertyCost","XZ_JJFY"):"MECHANICAL"===r?g.changeSearchRunningCalculateCommonString("propertyCost","XZ_JXZY"):g.changeSearchRunningCalculateCommonString("propertyCost","XZ_HTCB")):"XZ_PRODUCE"===o?l("ASSIST"===r?g.changeSearchRunningCalculateCommonString("propertyCost","XZ_FZSCCB"):"MAKE"===r?g.changeSearchRunningCalculateCommonString("propertyCost","XZ_ZZFY"):g.changeSearchRunningCalculateCommonString("propertyCost","XZ_SCCB")):T()}},E&&(0,f.CommonProjectTest)(S,E).map(function(e,t){return u.default.createElement(d.default.Option,{key:t,value:""+e.get("uuid")+m.TREE_JOIN_STR+e.get("code")+m.TREE_JOIN_STR+e.get("name"),projectProperty:e.get("projectProperty")},-1===p.systemProJectCodeCommon.indexOf(e.get("code"))?e.get("code")+" "+e.get("name"):""+e.get("name"))})),u.default.createElement(r.default,{className:"use-unuse-style lrls-jzsy-box",style:{margin:".1rem 0 0 .2rem"},checked:C,checkedChildren:"项目",unCheckedChildren:"项目",onChange:function(){C?(l(g.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,s.fromJS)([{}]))),T()):l(g.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,s.fromJS)([]))),l(g.changeSearchRunningCalculateCommonString("usedCarryoverProject",!C))}}))):null)}}]),t}())||a;t.default=h},2502:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=E(n(47)),i=E(n(14)),o=E(n(61)),l=E(n(129)),u=E(n(37)),c=E(n(32)),s=E(n(171)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(78),n(79),n(128),n(38),n(51),n(170);var f=E(n(1)),p=n(17),m=(n(18),n(127)),g=(h(n(27)),h(n(30))),y=n(1516),C=h(n(486));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}s.default.TreeNode;var v=(0,p.immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectList:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),d(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onCloseModal,a=t.canDeleteIdList,s=t.clearSelectList,d=t.approvalList,p=t.editLrAccountPermission,h=t.dispatch,E=this.state.selectList,v=["PROCESS_PAYING","PROCESS_ACCOUNTING","PROCESS_INCOME","PROCESS_BOOK_KEEPING"],_=d.filter(function(e){return a.indexOf(e.get("id"))>-1}),S=!!a.size&&_.every(function(e){return!e.get("detailList").every(function(e){return-1===v.indexOf(e.get("dealState"))})||E.indexOf(e.get("id"))>-1});return f.default.createElement(r.default,{title:"删除审批",visible:!0,width:"600px",maskClosable:!1,onCancel:function(){n()},footer:[f.default.createElement(c.default,{type:"ghost",onClick:function(){n()}},"取消"),f.default.createElement(c.default,{type:"primary",onClick:function(){E.length?h(C.deleteApprovalProcess(E,function(){e.setState({selectList:[]})})):u.default.info("请选择要删除的审批")}},"确定")]},f.default.createElement("div",{className:"search-approval-delete-modal-wrap"},f.default.createElement("ul",{className:"uses-tip"},f.default.createElement("li",null,"为了保证您的数据安全，仅当审批在钉钉管理后台被删除，且审批的“记账状态”为空，才可在小番内删除记录，",f.default.createElement("span",{className:"search-approval-delete-modal-guid-text",onClick:function(){g.openLink({url:"https://h5.dingtalk.com/group-live-share/index.htm?encCid=0c4dfbc084b288589cd227ac22aedd01&liveUuid=0ab574fb-853d-4ce7-9b0f-c7e4aabd75dd"})}},"点击查看操作视频"),"；"),f.default.createElement("li",null,"审批删除以后，无法恢复，请谨慎操作；")),f.default.createElement("div",null,"可删除的审批列表"),f.default.createElement(m.JxcTableAll,null,f.default.createElement(m.TableTitle,{className:"search-approval-delete-table-width",titleList:["提交日期","完成日期","审批名称","明细类型","记账状态"],hasCheckbox:!0,disabled:!a.size,selectAcAll:S,onClick:function(){if(S)e.setState({selectList:[]});else{var t=[];_.forEach(function(e){e.get("detailList").every(function(e){return-1===v.indexOf(e.get("dealState"))})&&t.push(e.get("id"))}),e.setState({selectList:t})}}}),f.default.createElement(m.TableBody,null,a.size?_.map(function(t,n){return f.default.createElement(m.CxpzTableItem,{className:"search-approval-delete-table-width",key:n},f.default.createElement("li",null,f.default.createElement(l.default,{checked:E.indexOf(t.get("id"))>-1,disabled:t.get("detailList").some(function(e){return v.indexOf(e.get("dealState"))>-1}),onClick:function(){if(E.indexOf(t.get("id"))>-1){var n=E.filter(function(e){return e!==t.get("id")});e.setState({selectList:n})}else E.push(t.get("id")),e.setState({selectList:E})}})),f.default.createElement("li",null,t.get("createTime").substr(0,10)),f.default.createElement("li",null,t.get("finishTime").substr(0,10)),f.default.createElement("li",null,f.default.createElement("span",{className:"table-item-line-mutil-line"},f.default.createElement(o.default,{placement:"top",title:f.default.createElement("div",{className:"table-item-line-tooltip"},f.default.createElement("div",null,t.get("processTitle")),f.default.createElement("div",null,"(单号:"+t.get("processBusinessCode")+")"))},f.default.createElement("p",{className:"table-item-line-click"},t.get("processTitle"))))),f.default.createElement("li",null,t.get("detailList").map(function(e,t){return f.default.createElement("p",{className:"table-item-line search-approval-table-line",key:t},e.get("detailType"))})),f.default.createElement("li",null,t.get("detailList").map(function(e,t){return f.default.createElement("p",{className:"table-item-line search-approval-table-line",key:t},f.default.createElement("span",{className:"search-approval-table-frist-child"},y.showAccountState[e.get("dealState")]?y.showAccountState[e.get("dealState")]:""),e.get("dealState")?f.default.createElement("span",{className:"table-item-line-click",onClick:function(t){p&&h(C.cancelApprovalProcessDetailInfo([e.get("id")],function(){return s()}))}},f.default.createElement(o.default,{placement:"top",title:"反"+y.showToolTipAccountState[e.get("dealState")]},f.default.createElement(i.default,{type:"rollback",style:{color:p?"#333":"#ccc"}}))):"")})))}):f.default.createElement(m.TableItem,{className:"search-approval-delete-table-width"},f.default.createElement("li",null),f.default.createElement("li",null),f.default.createElement("li",null),f.default.createElement("li",null),f.default.createElement("li",null),f.default.createElement("li",null))))))}}]),t}())||a;t.default=v},2503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=arguments[1];return((e={},o(e,r.INIT_SEARCH_APPROVAL,function(){return l}),o(e,r.AFTER_GET_APPROVAL_PROCESSLIST,function(){return t=t.set("approvalList",(0,a.fromJS)(n.receivedData.processList)).set("currentPage",n.receivedData.currentPage).set("pageCount",n.receivedData.pageCount),!0!==n.param.refresh&&(t=t.setIn(["views","searchType"],n.param.searchType).setIn(["views","searchContent"],n.param.searchContent).setIn(["views","accountingType"],n.param.accountingType).setIn(["views","dateType"],n.param.dateType).setIn(["views","beginDate"],n.receivedData.beginDate).setIn(["views","endDate"],n.receivedData.endDate).setIn(["views","orderField"],n.param.orderField).updateIn(["views","sortByBeginDate"],function(e){return"ORDER_DATE_START"===n.param.orderField?n.param.isAsc:e}).updateIn(["views","sortByEndDate"],function(e){return"ORDER_DATE_END"===n.param.orderField?n.param.isAsc:e}).updateIn(["views","sortByDealtype"],function(e){return"ORDER_DEAl_TYPE"===n.param.orderField?n.param.isAsc:e})),t}),o(e,r.CHANGE_SEARCH_APPROVAL_COMMON_STRING,function(){return t=t.setIn(["views",n.place],n.value)}),o(e,r.GET_APPROVAL_PROCESS_CAN_DELETE_LIST,function(){return t=t.set("canDeleteIdList",(0,a.fromJS)(n.receivedData))}),e)[n.type]||function(){return t})()};var a=n(18),r=i(n(502));i(n(27));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(0,a.fromJS)({views:{searchType:"PROCESS_SEARCH_TITLE",searchContent:"",accountingType:"ALL",dateType:"DATE_TYPE_END",beginDate:"",endDate:"",orderField:"ORDER_DATE_END",sortByBeginDate:!1,sortByEndDate:!1,sortByDealtype:!1},approvalList:[],currentPage:1,pageCount:1,canDeleteIdList:[]})},2504:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments[1];return((e={},l(e,i.CLEAR_SEARCH_APPROVAL_TEMP,function(){return u}),l(e,i.GET_APPROVAL_PROCESS_DETAIL_INFO,function(){return t=t.set("editRunningModalTemp",(0,r.fromJS)(n.receivedData)).set("categoryData",(0,r.fromJS)(n.categoryData)),n.datailList.length&&(t=t.set("datailList",(0,r.fromJS)(n.datailList))),t}),l(e,i.CHANGE_APPROVAL_PROCESS_DETAIL_INFO_CATEGORY,function(){return t=t.set("editRunningModalTemp",n.editRunningModalTemp).set("categoryData",(0,r.fromJS)(n.categoryData))}),l(e,i.CHANGE_APPROVAL_PROCESS_DETAIL_INFO_COMMON_STRING,function(){return t=t.setIn(["editRunningModalTemp",n.place],n.value)}),l(e,i.CHANGE_APPROVAL_PROCESS_DETAIL_INFO_BILL_COMMON_STRING,function(){return t=t.setIn(["editRunningModalTemp","billList",0,n.place],n.value)}),l(e,i.SEARCH_APPROVAL_GET_APPROVAL_PROJECT_CARD_LIST,function(){return t=t.set("projectCardList",(0,r.fromJS)(n.receivedData))}),l(e,i.SEARCH_APPROVAL_GET_APPROVAL_CONTACT_CARD_LIST,function(){return t=t.set("contactCardList",(0,r.fromJS)(n.receivedData))}),l(e,i.SEARCH_APPROVAL_GET_APPROVAL_STOCK_CARD_LIST,function(){return t=t.set("invetoryCardList",(0,r.fromJS)(n.receivedData))}),l(e,i.SEARCH_APPROVAL_GET_APPROVAL_WAREHOUSE_CARD_LIST,function(){return t=t.set("warehouseCardList",(0,r.fromJS)(n.receivedData))}),l(e,i.SEARCH_APPROVAL_CHANGE_RUNNING_TAX_RATE,function(){var e=n.amount||t.getIn(["editRunningModalTemp","jrAmount"])||0;return"-1"==n.value?t.setIn(["editRunningModalTemp","billList",0,"tax"],"").setIn(["editRunningModalTemp","billList",0,"taxRate"],n.value):(console.log("sddf",(Number(e)/(1+Number(n.value)/100)*Number(n.value)/100).toFixed(2)),t.setIn(["editRunningModalTemp","billList",0,"tax"],(Number(e)/(1+Number(n.value)/100)*Number(n.value)/100).toFixed(2)).setIn(["editRunningModalTemp","billList",0,"taxRate"],n.value))}),l(e,i.CHANGE_SEARCH_APPROAL_EDIT_BILL_STATES,function(){return t.setIn(["editRunningModalTemp","billList",0,"billState"],n.billState).setIn(["editRunningModalTemp","billList",0,"tax"],n.tax).setIn(["editRunningModalTemp","billList",0,"taxRate"],n.taxRate)}),l(e,i.CHANGE_SEARCH_APPROVAL_STRING,function(){return n.placeArr&&(t=t.setIn(n.placeArr,n.value)),n.place&&(t=t.set(n.place,n.value)),t}),l(e,i.CHANGE_SEARCH_RUNNING_CALCULATE_COMMON_STRING,function(){return n.placeArr&&(t=t.setIn(n.placeArr,n.value)),n.place&&(t=t.set(n.place,n.value)),t}),l(e,i.CHARGE_SEARCH_APPROVAL_ITEM_CHECKBOX_CHECK,function(){var e=t.get("selectList"),a=t.get("selectItem"),i=n.uuid,o=n.name,l=n.code,u=n.isOpenQuantity,c=n.unit,s=n.unitPriceList;if(!n.checked&&-1===e.findIndex(function(e){return e===n.uuid})){var d=e.push(n.uuid),f=a.push((0,r.fromJS)({uuid:i,name:o,code:l,isOpenQuantity:u,unit:c,unitPriceList:s}));return t.set("selectList",d).set("selectItem",(0,r.fromJS)(f))}if(n.checked){var p=e.splice(e.findIndex(function(e){return e===n.uuid}),1),m=a.splice(e.findIndex(function(e){return e===n.uuid}),1);return t.set("selectList",p).set("selectItem",(0,r.fromJS)(m))}return t}),l(e,i.CHANGE_SEARCH_APPROVAL_HIDE_CATEGORY_ITEM_CHECKBOX_CHECK,function(){var e=t.get("selectList"),i=t.get("selectItem"),o=n.item,l=n.isAssembly?o.productUuid:o.cardUuid?o.cardUuid:o.uuid;if(!n.checked&&-1===e.findIndex(function(e){return e===l})){var u=o.materialList?o.materialList:[],c=u.map(function(e){var t=1;return e.unitList&&e.unitList.map(function(n){n.uuid===e.unitUuid&&(t=n.basicUnitQuantity?n.basicUnitQuantity:1)}),a({},e,{basicUnitQuantity:t})}),s=e.push(l),d=i.push((0,r.fromJS)(a({},o,{index:n.index,uuid:l,allUnit:o.unit?o.unit:"",unitUuid:o.unitUuid?o.unitUuid:o.unit?o.unit.unitList.length?"":o.unit.uuid?o.unit.uuid:"":"",unitName:o.unitName?o.unitName:o.unit?o.unit.unitList.length?"":o.unit.name?o.unit.name:"":"",materialList:c,oriMaterialList:c||[],quantity:o.quantity?o.quantity:"",afterQuantity:o.afterQuantity?o.afterQuantity:""})));return t.set("selectList",s).set("selectItem",(0,r.fromJS)(d))}if(n.checked){var f=e.splice(e.findIndex(function(e){return e===l}),1),p=i.splice(e.findIndex(function(e){return e===l}),1);return t.set("selectList",f).set("selectItem",(0,r.fromJS)(p))}return t}),l(e,i.CHANGE_SEARCH_APPROVAL_HIDE_CATEGORY_ITEM_CHECKBOX_CHECK_ALL,function(){if(n.checked)return t.set("selectList",(0,r.fromJS)([])).set("selectItem",(0,r.fromJS)([]));var e=(0,r.fromJS)([]),i=(0,r.fromJS)([]);return n.allList&&n.allList.forEach(function(t){var o=t,l=n.isAssembly?o.productUuid:o.cardUuid?o.cardUuid:o.uuid,u=o.materialList?o.materialList:[],c=u.map(function(e){var t=1;return e.unitList&&e.unitList.map(function(n){n.uuid===e.unitUuid&&(t=n.basicUnitQuantity?n.basicUnitQuantity:1)}),a({},e,{basicUnitQuantity:t})});e=e.push(l),i=i.push((0,r.fromJS)(a({},o,{index:n.index,uuid:l,allUnit:o.unit?o.unit:"",unitUuid:o.unitUuid?o.unitUuid:o.unit?o.unit.unitList.length?"":o.unit.uuid?o.unit.uuid:"":"",unitName:o.unitName?o.unitName:o.unit?o.unit.unitList.length?"":o.unit.name?o.unit.name:"":"",materialList:c,oriMaterialList:c||[],quantity:o.quantity?o.quantity:"",afterQuantity:o.afterQuantity?o.afterQuantity:""})))}),t.set("selectList",e).set("selectItem",(0,r.fromJS)(i))}),e)[n.type]||function(){return t})()};var r=n(18),i=o(n(502));o(n(27));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=(0,r.fromJS)({views:{showStockModal:!1},editRunningModalTemp:{carryoverCardList:[{}]},categoryData:{},projectCardList:[],contactCardList:[],invetoryCardList:[],warehouseCardList:[],MemberList:[],selectThingsList:[],thingsList:[],selectedKeys:"",selectList:[],selectItem:[],datailList:[]})},2505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments[1];return((e={},l(e,r.BEFORE_INSERT_APPROVAL_CALCULATE,function(){return t=t.set("runningFlowTemp",n.runningFlowTemp).set("modalTemp",n.modalTemp)}),l(e,r.CHANGE_SEARCH_RUNNING_CALCULATE_COMMON_STRING,function(){return n.placeArr&&(t=t.setIn(n.placeArr,n.value)),n.place&&(t=t.set(n.place,n.value)),t}),e)[n.type]||function(){return t})()};var a=n(18),r=o(n(502)),i=(o(n(27)),n(22));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=(0,a.fromJS)({runningFlowTemp:{oriDate:(0,i.formatDate)().substr(0,10)},modalTemp:{oriDate:(0,i.formatDate)().substr(0,10)},views:{accountProjectRange:[],accountContactsRange:[],accountContactsRangeList:[],accountProjectList:[]},poundageCurrentCardList:[],poundageProjectCardList:[],formPos:"",accountDate:(0,i.formatDate)().substr(0,10),account:null,setAccount:!1,needUsedPoundage:!1,receiveTotalMoney:0,beZeroInventory:!1,beCarryoverOut:!1,propertyCost:"",propertyCostList:[],carryoverCategoryList:[],carryoverCategoryItem:null,usedCarryoverProject:!1,carryoverProjectCardList:[],carryoverProjectList:[],handlingFeeType:"INCLUDE"})}}]);