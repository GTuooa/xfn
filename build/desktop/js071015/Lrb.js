(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{1145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=r(n(1781));function r(e){return e&&e.__esModule?e:{default:e}}var l={lrbState:r(n(1688)).default};t.reducer=l,t.view=a.default},1227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=c(n(176)),l=c(n(174)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(175),n(173);var u=c(n(1)),i=n(17),s=n(127);function c(e){return e&&e.__esModule?e:{default:e}}n(1232);var f=(0,i.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.pageItem,n=e.onClick,a=u.default.createElement(l.default,null,t.get("pageList").map(function(e,a){return u.default.createElement(l.default.Item,{key:e.get("key")},u.default.createElement("span",{className:"page-switch-item setting-common-ant-dropdown-menu-item",onClick:function(){n(t.get("key"),e.get("name"),e.get("key"))}},e.get("name")))}));return u.default.createElement("div",null,u.default.createElement(r.default,{overlay:a,trigger:["click"]},u.default.createElement("div",{className:"page-switch-button"},u.default.createElement(s.XfnIcon,{type:"Menu"}))))}}]),t}())||a;t.default=f},1232:function(e,t,n){},1234:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return O});var a=n(1),r=n(5),l=n(1251),o=n.n(l),u=n(2),i=n.n(u),s=n(24),c=n(180),f=n(14),d=(n(21),n(1599)),m=n(20);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=y(this,v(t).call(this,e))).saveSwitch=function(e){n.rcSwitch=e},n.renderSwitch=function(e){var t,r=e.getPrefixCls,l=n.props,u=l.prefixCls,d=l.size,m=l.loading,p=l.className,g=void 0===p?"":p,y=l.disabled,v=r("switch",u),E=i()(g,(b(t={},"".concat(v,"-small"),"small"===d),b(t,"".concat(v,"-loading"),m),t)),O=m?a.createElement(f.default,{type:"loading",className:"".concat(v,"-loading-icon")}):null;return a.createElement(c.a,{insertExtraNode:!0},a.createElement(o.a,h({},Object(s.a)(n.props,["loading"]),{prefixCls:v,className:E,disabled:y||m,ref:n.saveSwitch,loadingIcon:O})))},Object(m.a)("checked"in e||!("value"in e),"Switch","`value` is not validate prop, do you mean `checked`?"),n}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,a["Component"]),n=t,(r=[{key:"focus",value:function(){this.rcSwitch.focus()}},{key:"blur",value:function(){this.rcSwitch.blur()}},{key:"render",value:function(){return a.createElement(d.a,null,this.renderSwitch)}}])&&g(n.prototype,r),l&&g(n,l),t}();O.__ANT_SWITCH=!0,O.propTypes={prefixCls:r.string,size:r.oneOf(["small","default","large"]),className:r.string}},1235:function(e,t,n){"use strict";n.r(t);n(33),n(1253)},1237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=c(n(100)),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(99);var u=c(n(1)),i=n(17),s=(n(101),n(22));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=(0,i.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return n=a=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={formate:!0},f(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),o(t,[{key:"render",value:function(){var e=this,t=(this.props.showZero,this.state.formate?this.props.value&&Number(this.props.value)?(0,s.formatMoney)(this.props.value,this.props.PointDisabled?0:2):"":this.props.value);return u.default.createElement(r.default,l({},this.props,{value:t||"",onFocus:function(t){"function"==typeof e.props.onFocus&&e.props.onFocus(t),e.setState({formate:!1},function(){e.nameInput&&e.nameInput.select()})},onBlur:function(t){"function"==typeof e.props.onBlur&&e.props.onBlur(t),e.setState({formate:!0})},ref:function(t){return e.nameInput=t}}))}}]),t}())||a;t.default=d},1251:function(e,t,n){e.exports=n(1252)},1252:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(0),o=n.n(l),u=n(15);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=n(2),b=function(e){function t(e){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=f(t).call(this,e),p(m(m(n=!r||"object"!=typeof r&&"function"!=typeof r?m(a):r)),"handleClick",function(e){var t=n.state.checked,a=n.props.onClick,r=!t;n.setChecked(r,e),a&&a(r,e)}),p(m(m(n)),"handleKeyDown",function(e){37===e.keyCode?n.setChecked(!1,e):39===e.keyCode&&n.setChecked(!0,e)}),p(m(m(n)),"handleMouseUp",function(e){var t=n.props.onMouseUp;n.node&&n.node.blur(),t&&t(e)}),p(m(m(n)),"saveNode",function(e){n.node=e});var l=!1;return l="checked"in e?!!e.checked:!!e.defaultChecked,n.state={checked:l},n}var n,l,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,a["Component"]),n=t,o=[{key:"getDerivedStateFromProps",value:function(e){var t={},n=e.checked;return"checked"in e&&(t.checked=!!n),t}}],(l=[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoFocus,n=e.disabled;t&&!n&&this.focus()}},{key:"setChecked",value:function(e,t){var n=this.props,a=n.disabled,r=n.onChange;a||("checked"in this.props||this.setState({checked:e}),r&&r(e,t))}},{key:"focus",value:function(){this.node.focus()}},{key:"blur",value:function(){this.node.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.className,a=t.prefixCls,l=t.disabled,o=t.loadingIcon,u=t.checkedChildren,c=t.unCheckedChildren,f=s(t,["className","prefixCls","disabled","loadingIcon","checkedChildren","unCheckedChildren"]),d=this.state.checked,m=h((p(e={},n,!!n),p(e,a,!0),p(e,"".concat(a,"-checked"),d),p(e,"".concat(a,"-disabled"),l),e));return r.a.createElement("button",i({},f,{type:"button",role:"switch","aria-checked":d,disabled:l,className:m,ref:this.saveNode,onKeyDown:this.handleKeyDown,onClick:this.handleClick,onMouseUp:this.handleMouseUp}),o,r.a.createElement("span",{className:"".concat(a,"-inner")},d?u:c))}}])&&c(n.prototype,l),o&&c(n,o),t}();b.propTypes={className:o.a.string,prefixCls:o.a.string,disabled:o.a.bool,checkedChildren:o.a.any,unCheckedChildren:o.a.any,onChange:o.a.func,onMouseUp:o.a.func,onClick:o.a.func,tabIndex:o.a.number,checked:o.a.bool,defaultChecked:o.a.bool,autoFocus:o.a.bool,loadingIcon:o.a.node},b.defaultProps={prefixCls:"rc-switch",checkedChildren:null,unCheckedChildren:null,className:"",defaultChecked:!1},Object(u.polyfill)(b),t.default=b},1253:function(e,t,n){},1528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),u=(r=o)&&r.__esModule?r:{default:r},i=(n(18),n(17)),s=n(127);var c={first:[1,23,32,34],second:[2,21,24,26,33],third:[3,11,14,18],fourth:[4,12,15,19,20,22,25,27],fifth:[5,6,7,8,9,10,13,16,17,28,29,30,31]},f=(0,i.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.lrItem,n=e.className,a=e.idx,r="",l=!0,o=!1,i=void 0;try{for(var f,d=Object.keys(c)[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var m=f.value;if(c[m].indexOf(t.get("lineindex"))>-1){r=m;break}}}catch(e){o=!0,i=e}finally{try{!l&&d.return&&d.return()}finally{if(o)throw i}}return u.default.createElement(s.TableItem,{className:n,line:a+1},u.default.createElement("li",null,u.default.createElement("span",{className:r?"lrb-text-index-"+r:""},t.get("linename")?t.get("linename").replace(/\./g,"、").replace(/:/g,"："):"")),u.default.createElement("li",null,t.get("lineindex")),u.default.createElement("li",null,u.default.createElement(s.Amount,null,t.get("yearaccumulation"))),u.default.createElement("li",null,u.default.createElement(s.Amount,null,t.get("monthaccumulation"))))}}]),t}())||a;t.default=f},1529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=f(n(14)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(78);var o=f(n(1)),u=(n(18),n(17)),i=n(127),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1319)),c=n(22);function f(e){return e&&e.__esModule?e:{default:e}}var d=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),l(t,[{key:"amountTextAlign",value:function(e){switch(e){case 0:case 1:return"right";case 2:return"center";default:return"left"}}},{key:"renderDifference",value:function(e,t){return e>0?o.default.createElement("span",{style:{color:"#ff8348"}},"amountDifference"===t?"+"+(0,c.formatMoney)(e):"+"+(0,c.formatMoney)(e)+"%",o.default.createElement(r.default,{type:"arrow-up",style:{display:"amountDifference"===t?"none":""}})):0===e?o.default.createElement("span",null,"amountDifference"===t?""+e:e+"%",o.default.createElement("span",{style:{color:"rgb(255,131,72)"}},"-")):e<0?o.default.createElement("span",{style:{color:"#5e81d1"}},"amountDifference"===t?""+(0,c.formatMoney)(e):(0,c.formatMoney)(e)+"%",o.default.createElement(r.default,{type:"arrow-down",style:{display:"amountDifference"===t?"none":""}})):void 0}},{key:"render",value:function(){var e=this,t=this.props,n=t.lrItem,a=t.className,r=t.idx,l=t.showChildProfitList,u=t.dispatch,f=t.proportionDifference;t.selfListData;return function t(n,d,m){var p=0;switch(f){case"shareDifference":p=100*n.get("shareDifference");break;case"amountDifference":p=n.get("amountDifference");break;case"increaseDecreasePercent":p=100*n.get("increaseDecreasePercent");break;default:p=100*n.get("shareDifference")}if(n.get("childProfit")&&n.get("childProfit").size){var h=l.indexOf(n.get("lineindex"))>-1||l.indexOf(n.get("acId"))>-1,b=e.amountTextAlign(d);return o.default.createElement("div",{key:m},o.default.createElement(i.TableItem,{className:a,line:r+1},o.default.createElement(i.ItemTriangle,{textAlign:"left",isLink:!1,showTriangle:!0,showchilditem:h,onClick:function(e){e.stopPropagation();var t=n.get("lineindex")?n.get("lineindex"):n.get("acId");u(s.upDateChlidProfitList(t))}},o.default.createElement("span",{style:{paddingLeft:0===d?"0px":24*d+"px"}},n.get("linename"))),o.default.createElement("li",null,o.default.createElement("div",{className:"lrb-item"},o.default.createElement(i.Amount,{className:"align-"+b},n.get("yearaccumulation")),o.default.createElement("span",{className:"align-"+b},(0,c.formatMoney)(100*n.get("shareOfYear"))+"%"))),o.default.createElement("li",null,o.default.createElement("div",{className:"lrb-item"},o.default.createElement(i.Amount,{className:"align-"+b},n.get("monthaccumulation")),o.default.createElement("span",null,(0,c.formatMoney)(100*n.get("shareOfMonth"))+"%"))),o.default.createElement("li",{className:"last-item"},e.renderDifference(p,f))),h&&n.get("childProfit").map(function(e,n){return t(e,d+1,m+"_"+n)}))}var g=e.amountTextAlign(d);return o.default.createElement(i.TableItem,{className:a,line:r+1,key:m},o.default.createElement(i.TableOver,{textAlign:"left",isLink:!1},o.default.createElement("span",{style:{paddingLeft:0===d?"0px":24*d+"px"}},n.get("linename"))),o.default.createElement("li",null,o.default.createElement("div",{className:"lrb-item"},o.default.createElement(i.Amount,{className:"align-"+g},n.get("yearaccumulation")),o.default.createElement("span",null,(0,c.formatMoney)(100*n.get("shareOfYear"))+"%"))),o.default.createElement("li",null,o.default.createElement("div",{className:"lrb-item"},o.default.createElement(i.Amount,{className:"align-"+g},n.get("monthaccumulation")),o.default.createElement("span",null,(0,c.formatMoney)(100*n.get("shareOfMonth"))+"%"))),o.default.createElement("li",{className:"last-item"},e.renderDifference(p,f)))}(n,0,r)}}]),t}())||a;t.default=d},1606:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=w(n(32)),l=w(n(100)),o=w(n(37)),u=w(n(1230)),i=w(n(89)),s=w(n(129)),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(51),n(99),n(38),n(1231),n(88),n(128);var f=w(n(1)),d=(n(18),n(17)),m=w(n(90)),p=w(n(1528)),h=n(127),b=w(n(1237)),g=w(n(1529)),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1319)),v=n(22),E=(w(n(6)),w(n(1786))),O=w(n(1787));function w(e){return e&&e.__esModule?e:{default:e}}s.default.Group,i.default.Group,u.default.RangePicker;var M=(0,d.immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showAll:!1,dateModal:!1,canDateConfirm:!0,extraModal:!0,calculShowAll:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),c(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.incomestatement,a=t.ifSelfMadeProfitList,u=t.selfMadeProfitList,i=t.showChildProfitList,s=t.dispatch,c=t.proportionDifference,d=t.lrbState,w=t.issues,M=this.state,k=M.showAll,_=M.dateModal,P=(M.extraModal,M.calculShowAll),S="";switch(c){case"shareDifference":S="占比差值";break;case"amountDifference":S="金额差值";break;case"increaseDecreasePercent":S="涨跌幅"}var C=d.get("issuedate"),N=d.get("endissuedate"),x=d.get("referChooseValue"),j=d.get("selfListData"),T=d.get("curReferValue"),I=d.get("referBegin"),L=d.get("referEnd"),R=d.get("extraMessage"),D=(d.get("extraMessageList"),d.get("detailList")),A=d.get("haveSwitchList"),F=d.get("cannotTestList"),B=d.get("cannotChecked"),z=d.get("amountInput"),Y=d.get("calculatePage"),U=d.get("calculType"),J=d.get("incomeTotal"),V=d.get("profit")||{},X=w.toJS().reverse(),G=C.substr(0,4),H=(C.substr(6,2),X.reduce(function(e,t){return t.substr(0,4)===G&&t.substr(6,2)<e?t.substr(6,2):e},"12")),K=X.reduce(function(e,t){return t.substr(0,4)===G&&t.substr(6,2)>e?t.substr(6,2):e},"01"),$=I===L?I.substr(0,4)+"-"+I.substr(4,2):I.substr(0,4)+"-"+I.substr(4,2)+"~"+L.substr(0,4)+"-"+L.substr(4,2),W={"本年累计":"本年累计数据","按账期选择":I.substr(0,4)+"年第"+I.substr(4,2)+"期"}[T]||$+"数据";return Y?f.default.createElement("div",{className:"calcul-page"},f.default.createElement("div",{className:"calcul-title"},f.default.createElement("div",{className:"calcul-type"},f.default.createElement(h.Tab,{radius:!0,tabList:[{key:"利润",value:"测利润"},{key:"盈亏",value:"测盈亏"}],activeKey:U,tabFunc:function(e){"利润"===e.key?(s(y.changeLrbString("calculType","利润")),s(y.changeLrbString("amountInput",Math.abs(z)))):s(y.changeLrbString("calculType","盈亏"))}})),f.default.createElement("div",null,f.default.createElement("span",null,"若营业","利润"===U?"收入":"利润","为："),f.default.createElement(b.default,{value:z,onChange:function(e){var t=e.target.value;/^(\-|\+)?\d*\.?\d{0,2}$/g.test(t)&&("利润"===U?"-"===t?o.default.info("“营业收入”不可输入为负数"):t>1e7?o.default.info("金额不可超过千万位"):s(y.changeLrbString("amountInput",t)):Math.abs(t)>1e7?o.default.info("金额不可超过千万位"):s(y.changeLrbString("amountInput",t)))}})),f.default.createElement("div",null,f.default.createElement("span",null,"则营业","利润"!==U?"收入":"利润","为："),f.default.createElement(l.default,{disabled:!0,value:"待测算"})),f.default.createElement(r.default,{type:"primary",onClick:function(){if("利润"===U)Number(z)<0?o.default.info("请输入有效的营业收入金额"):(s(y.startMeasure(U)),s(y.showMeasureResult(!0)));else if(Number(z)>0){var e=0;D.filter(function(e){return e.get("testAmount")}).map(function(t){e+=Number(t.get("testShareOfMonth"))}),e>100?o.default.info("支出占收入比大于1，与营业利润金额矛盾，请重新设置"):(s(y.startMeasure(U)),s(y.showMeasureResult(!0)))}else s(y.startMeasure(U)),s(y.showMeasureResult(!0))}},"测算")),f.default.createElement(h.TableWrap,{notPosition:!0},f.default.createElement(h.TableAll,null,f.default.createElement("div",{className:"table-title-wrap"},f.default.createElement("ul",{className:"table-title lrb-calcul-table calcul-table-width"},f.default.createElement("li",null),f.default.createElement("li",null,"项目",f.default.createElement(m.default,{size:"14",type:P?"tableGather":"tableExpand",style:{margin:"auto 5px",color:"#B9B9B9"},onClick:function(){e.setState({calculShowAll:!P},function(){s(y.handleItemShowAll(D,!P))})}})),f.default.createElement("li",null,f.default.createElement("div",null,f.default.createElement("span",null,"本期数据")),f.default.createElement("div",null,f.default.createElement("span",null,"本期金额"),f.default.createElement("span",null,"营收占比"))),f.default.createElement("li",null,"金额/占比"),f.default.createElement("li",null,"预设数据")),f.default.createElement(h.TableBody,null,f.default.createElement(h.TableItem,{className:"calcul-table-width",line:1},f.default.createElement("li",null),f.default.createElement(h.TableOver,{textAlign:"left",isLink:!1},"营业收入"),f.default.createElement("li",null,f.default.createElement("div",{className:"lrb-item"},f.default.createElement(h.Amount,{className:"align-right"},J.get("monthaccumulation")),f.default.createElement("span",{className:"align-right"},(0,v.formatMoney)(100*J.get("shareOfMonth"))+"%"))),f.default.createElement("li",null),f.default.createElement("li",null)),(D||[]).map(function(e,t){return f.default.createElement(O.default,{lrItem:e,className:"calcul-table-width",key:t,idx:t,showChildProfitList:i,dispatch:s,proportionDifference:c,haveSwitchList:A,cannotTestList:F,cannotChecked:B})}),f.default.createElement(h.TableItem,{className:"calcul-table-width",line:D.size},f.default.createElement("li",null),f.default.createElement(h.TableOver,{textAlign:"left",isLink:!1},"营业利润"),f.default.createElement("li",null,f.default.createElement("div",{className:"lrb-item"},f.default.createElement(h.Amount,{className:"align-right"},V.monthaccumulation),f.default.createElement("span",{className:"align-right"},(0,v.formatMoney)(100*V.shareOfMonth)+"%"))),f.default.createElement("li",null),f.default.createElement("li",null))))))):f.default.createElement(h.TableWrap,{notPosition:!0},a?f.default.createElement(h.TableAll,null,f.default.createElement("div",{className:"table-title-wrap"},f.default.createElement("ul",{className:"table-title self-lrb-table lrb-table-width"},f.default.createElement("li",null,f.default.createElement("span",null,"项目"),f.default.createElement(m.default,{size:"14",type:k?"tableGather":"tableExpand",style:{margin:"auto 5px",color:"#B9B9B9"},onClick:function(){e.setState({showAll:!k},function(){s(y.expandTable(e.state.showAll))})}}),f.default.createElement(r.default,{type:"primary",onClick:function(){s(y.getMeasureInitData(C,N))}},"测算一下")),f.default.createElement("li",null,f.default.createElement("div",null,f.default.createElement("span",null,W,f.default.createElement(m.default,{type:"dateTwo",style:{lineHeight:"24px",color:"#5e81d1"},onClick:function(){e.setState({dateModal:!0}),s(y.changeLrbString("referChooseValue",T))}}))),f.default.createElement("div",null,f.default.createElement("span",null,"参考金额"),f.default.createElement("span",null,"营收占比"))),f.default.createElement("li",null,f.default.createElement("div",null,f.default.createElement("span",null,"本期数据")),f.default.createElement("div",null,f.default.createElement("span",null,"本期金额"),f.default.createElement("span",null,"营收占比"))),f.default.createElement("li",null,f.default.createElement("span",null,S,f.default.createElement(m.default,{type:"switch",style:{color:"#b9b9b9"},onClick:function(){var e="";"shareDifference"===c?e="amountDifference":"amountDifference"===c?e="increaseDecreasePercent":"increaseDecreasePercent"===c&&(e="shareDifference"),s(y.changeDifferType(e))}}))))),f.default.createElement(h.TableBody,null,(u||[]).map(function(e,t){return f.default.createElement(g.default,{lrItem:e,className:"lrb-table-width",key:t,idx:t,showChildProfitList:i,dispatch:s,selfListData:j,proportionDifference:c})}),f.default.createElement(h.TableItem,{line:u.size+1},R.map(function(e){return f.default.createElement("span",{style:{margin:"0 10px 0 5px"}},e.get("extraName")+"："+(0,v.formatMoney)(e.get("extraValue"))+" "+e.get("unit"))})))):f.default.createElement(h.TableAll,null,f.default.createElement(h.TableTitle,{className:"bb-table-width self-bb-table",titleList:["项目","行次","本年累计金额","本期金额"]}),f.default.createElement(h.TableBody,null,(n||[]).map(function(e,t){return f.default.createElement(p.default,{lrItem:e,className:"bb-table-width",key:t,idx:t})}))),_?f.default.createElement(E.default,{dateModal:_,dispatch:s,issuedate:C,endissuedate:N,startMonth:H,finalMonth:K,year:G,referChooseValue:x,issues:w,referBegin:I,referEnd:L,onCancel:function(){return e.setState({dateModal:!1})}}):"")}}]),t}())||a;t.default=M},1607:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=i(n(47)),l=i(n(32)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(51);var u=i(n(1));n(18);function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,n(17).immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.lrbRuleModal,n=e.onCancel,a=e.onClick;return u.default.createElement(r.default,{okText:"保存",visible:t,maskClosable:!1,title:"利润表取值规则",onCancel:n,footer:[u.default.createElement(l.default,{key:"cancel",type:"ghost",onClick:a},"关 闭")]},u.default.createElement("ul",{className:"uses-tip lrb-ruler-wrap"},u.default.createElement("li",{className:"uses-tip-dark"},"1、营业税金及附加下的其中内的”消费税“取数540301，”城市维护建设税“取数540302，”资源税“取数540310，“土地增值税”取数540305，“城镇土地使用税、房产税、车船税、印花税”取数540306+540307+540308+540309，“教育费附加、矿产资源补偿费、排污费”取数540303+540304+540311+540312；"),u.default.createElement("li",{className:"uses-tip-dark"},"2、销售费用取数5601，销售费用下的其中内的”商品维修费“取数560107，”广告费和业务宣传费“560115；"),u.default.createElement("li",{className:"uses-tip-dark"},"3、管理费用取数5602，管理费用下的其中内的”开办费“取数560221，”研究费用“取数560222，”业务招待费“取数560214；"),u.default.createElement("li",{className:"uses-tip-dark"},"4、财务费用取数5603，财务费用下的其中内的”利息费用“取数560301；"),u.default.createElement("li",{className:"uses-tip-dark"},"5、营业外收入取数5301，营业外收入下的其中内的”政府补助“取数530107；"),u.default.createElement("li",{className:"uses-tip-dark"},"6、营业外支出取数5711，营业外支出下的其中内的”坏账损失“取数571103，“无法收回的长期债券投资损失”取数571104，“无法收回的长期股权投资损失”取数571105，“自然灾害等不可抗力因素造成的损失”取数571106，”税收滞纳金“取数571107；"),u.default.createElement("li",{className:"uses-tip-dark"},"7、所得税费用取数5801。"),u.default.createElement("div",{className:"uses-tip-dark-blod"},"如您创建账套的模板为”小企业账套（推荐）“，建议对上述科目编码及名称不做修改（添加子科目或辅助核算不受影响）；如确实无需使用，也可删除，但新增其他自定义科目时请避免使用上述代码。"),u.default.createElement("div",{className:"uses-tip-dark-blod"},"如创建的模板是空账套，建议按上述科目编码按需要创建相应的科目，如涉及凭证导入，也需相应调整导入凭证涉及上述科目对应的科目编码。")))}}]),t}())||a;t.default=s},1608:function(e,t,n){},1781:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=P(n(37)),l=P(n(129)),o=P(n(45)),u=P(n(32)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(38),n(128),n(55),n(51);var s=n(1),c=P(s),f=(n(18),n(56)),d=_(n(1319)),m=_(n(43)),p=_(n(60)),h=P(n(1227)),b=n(127),g=n(31),y=P(n(1606)),v=P(n(1607)),E=P(n(1224)),O=P(n(1226));n(1608);P(n(90));var w=P(n(1789)),M=P(n(1790)),k=n(22);function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function P(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=(0,f.connect)(function(e){return e})(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return n=a=S(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={extraModal:!1},S(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),i(t,[{key:"componentDidMount",value:function(){this.props.dispatch(d.getinitincomestatement())}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.allState!=e.allState||this.props.lrbState!=e.lrbState||this.props.homeState!=e.homeState||this.state!==t}},{key:"render",value:function(){var e=this,t=this.props,n=t.lrbState,a=t.dispatch,i=t.allState,f=t.homeState,_=this.state.extraModal,P=f.getIn(["data","userInfo","pageController","REPORT","preDetailList","PROFIT_REPORT","detailList"]),S=f.getIn(["permissionInfo","Report"]),C=n.get("incomestatement"),N=n.get("issuedate"),x=n.get("lrbRuleModal"),j=f.getIn(["data","userInfo"]).get("sobInfo"),T=f.getIn(["data","userInfo","sobInfo","newJr"]),I=!!j&&(j.get("moduleInfo").indexOf("RUNNING")>-1&&T),L=I?n.get("issues"):i.get("issues"),R=i.getIn(["period","firstyear"]),D=i.getIn(["period","firstmonth"]),A=n.get("selectAssId"),F=n.get("assSelectableList"),B=F.size?F.getIn([A,"assid"]):"",z=n.get("endissuedate"),Y=n.get("chooseperiods"),U=L.findIndex(function(e){return e===N}),J=N.substr(0,4),V=L.slice(0,U).filter(function(e){return 0===e.indexOf(J)}),X=""+N.substr(0,4)+N.substr(6,2),G=""+z.substr(0,4)+z.substr(6,2),H=N.substr(0,4)+"-"+N.substr(6,2),K=(z&&(z.substr(0,4),z.substr(6,2)),R!=N.substr(0,4)),$=(n.get("showInitLrb"),f.get("pageList")),W=f.getIn(["views","isSpread"]),q=f.getIn(["views","URL_POSTFIX"]),Z=f.getIn(["views","isPlay"]),Q=n.get("selfMadeProfitList"),ee=n.get("ifSelfMadeProfitList"),te=n.get("showChildProfitList"),ne=n.get("proportionDifference"),ae=(n.get("ifSelfTypeList"),n.get("referBegin")),re=n.get("referEnd"),le=le?ae.substr(0,4)+"-"+ae.substr(4,2):"",oe=re?re.substr(0,4)+"-"+re.substr(4,2):le,ue=n.get("extraMessageList"),ie=n.get("calculatePage"),se=(n.get("measureIssuedate"),n.get("showResult"));switch(ne){case"shareDifference":"占比差值";break;case"amountDifference":"金额差值";break;case"increaseDecreasePercent":"涨跌幅"}var ce=void 0;return ce=ee?I?g.ROOTJR+"/jr/excel/export/xfn/profit?"+q+"&begin="+N.substr(0,4)+"-"+N.substr(6,2)+"&end="+z.substr(0,4)+"-"+z.substr(6,2)+"&referBegin="+(ae?ae.substr(0,4)+"-"+ae.substr(4,2):"")+"&referEnd="+(re?re.substr(0,4)+"-"+re.substr(4,2):""):g.ROOT+"/excel/export/customize/incomestatement?"+q+"&begin="+N.substr(0,4)+N.substr(6,2)+"&end="+z.substr(0,4)+z.substr(6,2):I?g.ROOTJR+"/jr/excel/export/profit?"+q+"&begin="+N.substr(0,4)+"-"+N.substr(6,2)+"&end="+z.substr(0,4)+"-"+z.substr(6,2):0===F.size?g.ROOT+"/excel/export?"+q+"&export=incomestatement&year="+(N?X:"")+"&month="+(z?G:"")+"&action=REPORT-PROFIT_REPORT-EXPORT_EXCEL":g.ROOT+"/excel/export/AMB?"+q+"&export=incomestatement&begin="+(N?X:"")+"&end="+(z?G:""),se?c.default.createElement(M.default,null):c.default.createElement(E.default,{type:"report-lrb",className:"lrb"},c.default.createElement(O.default,null,ie?c.default.createElement(s.Fragment,null,c.default.createElement("div",{className:"flex-title-left"},W||$.getIn(["Report","pageList"]).size<=1?"":c.default.createElement(h.default,{pageItem:$.get("Report"),onClick:function(e,t,n){a(p.addPageTabPane("ReportPanes",n,n,t)),a(p.addHomeTabpane(e,n,t))}})),c.default.createElement("div",{className:"flex-title-right"},c.default.createElement(u.default,{className:"title-right refresh-btn",onClick:function(){a(d.changeLrbString("calculatePage",!1))}},"取消"))):c.default.createElement(s.Fragment,null,c.default.createElement("div",{className:"flex-title-left"},W||$.getIn(["Report","pageList"]).size<=1?"":c.default.createElement(h.default,{pageItem:$.get("Report"),onClick:function(e,t,n){a(p.addPageTabPane("ReportPanes",n,n,t)),a(p.addHomeTabpane(e,n,t))}}),c.default.createElement(o.default,{className:"title-date",value:N,onChange:function(e){a(ee?d.getinitincomestatement(e,e):d.getIncomeStatementFetch(e,e,A))}},L.map(function(e,t){return c.default.createElement(o.default.Option,{key:t,value:e},e)})),c.default.createElement("span",{className:"title-checkboxtext",onClick:function(){return(0,k.debounce)(function(){ee?a(Y?d.getinitincomestatement(N,N):d.getinitincomestatement(N,z)):Y&&z!==N&&a(d.getIncomeStatementFetch(N,N,A)),a(d.changeLrbChooseMorePeriods())})()}},c.default.createElement(l.default,{className:"title-checkbox",checked:Y}),c.default.createElement("span",null,"至")),c.default.createElement(o.default,{disabled:!Y,className:"title-date",value:z===N?"":z,onChange:function(e){a(ee?d.getinitincomestatement(N,e):d.getIncomeStatementFetch(N,e,A))}},V.map(function(e,t){return c.default.createElement(o.default.Option,{key:t,value:e},e)})),c.default.createElement(o.default,{style:{display:F.size?"":"none"},className:["title-date","lrb-title-date",F.getIn([A,"disableTime"])?"fzhs-item-disable":""].join(" "),value:F.getIn([A,"assname"]),onChange:function(e){return a(d.getIncomeStatementFetch(N,z,e.get("key"),e.get("assid"),e.get("asscategory"),ee))}},F.map(function(e,t){return c.default.createElement(o.default.Option,{key:t,value:e,className:e.get("disableTime")?"fzhs-item-disable":""},e.get("assname"))})),c.default.createElement("div",{className:"list-type-btn-Container"},c.default.createElement(b.Tab,{radius:!0,tabList:[{key:1,value:"小番报表"},{key:0,value:"小企业报表"}],activeKey:ee?1:0,tabFunc:function(t){t.key?(e.props.dispatch(d.getinitincomestatement(N,z)),e.props.dispatch(d.changeListType())):(e.props.dispatch(d.getIncomeStatementFetch(N,z,A)),e.props.dispatch(d.changeListType()))}})),!ee&&!I&&c.default.createElement("span",{className:"title-lrb-rule",onClick:function(){return a(d.changeLrbRuleModal())}},"利润表取值规则"),c.default.createElement(v.default,{lrbRuleModal:x,onCancel:function(){return a(d.changeLrbRuleModal())},onClick:function(){return a(d.changeLrbRuleModal())}})),c.default.createElement("div",{className:"flex-title-right"},ee?c.default.createElement(u.default,{className:"title-right refresh-btn",type:"ghost",onClick:function(){a(d.getExtraInformationList(function(){return e.setState({extraModal:!0})}))}},"设置"):"",c.default.createElement("span",{className:"title-right title-dropdown"},c.default.createElement(b.Export,{isAdmin:S.getIn(["exportExcel","permission"]),type:ee?"first":"",exportDisable:ee?!N||Z||!S.getIn(["exportExcel","permission"]):!N||Z,excelDownloadUrl:ce,ddExcelCallback:function(e){(0,k.judgePermission)(P.get("EXPORT_EXCEL")).disabled?r.default.info("当前角色无该请求权限"):ee?a(I?m.allExportReceiverlist(e,"excelXfnProfit",{begin:N.substr(0,4)+"-"+N.substr(6,2),end:z.substr(0,4)+"-"+z.substr(6,2),referBegin:le,referEnd:oe}):m.allExportReceiverlist(e,"excelXiaoFanLrb",{begin:""+N.substr(0,4)+N.substr(6,2),end:""+z.substr(0,4)+z.substr(6,2)})):I?a(m.allExportReceiverlist(e,"excelJrProfit",{begin:N.substr(0,4)+"-"+N.substr(6,2),end:z.substr(0,4)+"-"+z.substr(6,2),referBegin:le,referEnd:oe})):0===F.size?a(m.allExportReceiverlist(e,"excelsend",{year:X,month:G,exportModel:"incomestatement",action:"REPORT-PROFIT_REPORT-EXPORT_EXCEL"})):a(m.allExportReceiverlist(e,"lrbambexcelsend",{begin:X,end:G,export:"incomestatement"}))},PDFDownloadUrl:I?g.ROOTJR+"/jr/pdf/export/profit?"+q+"&begin="+N.substr(0,4)+"-"+N.substr(6,2)+"&end="+z.substr(0,4)+"-"+z.substr(6,2):N===z?g.ROOT+"/pdf/exportincome?"+q+"&year="+(N?N.substr(0,4):"")+"&month="+(N?N.substr(6,2):"")+"&assid="+(B||"")+"&asscategory="+(B?encodeURI(encodeURI(F.getIn([A,"asscategory"]))):encodeURI(encodeURI(""))):g.ROOT+"/pdf/exportincomequarter?"+q+"&begin="+X+"&end="+G+"&assid="+(B||"")+"&asscategory="+(B?encodeURI(encodeURI(F.getIn([A,"asscategory"]))):encodeURI(encodeURI(""))),ddPDFCallback:function(e){(0,k.judgePermission)(P.get("EXPORT_PDF")).disabled?r.default.info("当前角色无该请求权限"):a(I?m.allExportReceiverlist(e,"pdfJrProfit",{begin:N.substr(0,4)+"-"+N.substr(6,2),end:z.substr(0,4)+"-"+z.substr(6,2)}):N===z?m.allExportReceiverlist(e,"pdflrbexport",{year:N.substr(0,4),month:N.substr(6,2),assid:B||"",asscategory:B?F.getIn([A,"asscategory"]):""}):m.allExportReceiverlist(e,"pdflrbincomepdfquarter",{begin:X,end:G,assid:B||"",asscategory:B?F.getIn([A,"asscategory"]):""}))},onErrorSendMsg:function(e,t,n){a(m.sendMessageToDeveloper({title:"导出发送钉钉文件异常",message:"type:"+e+",valueFirst:"+t+",valueSecond:"+n,remark:"利润表"}))}},F.size?"PDF导出方式时，导出的内容为当前页面的显示阿米巴模式数据":"")),c.default.createElement(u.default,{disabled:(0,k.judgePermission)(P.get("ADJUST")).disabled,style:{display:"01"===D||K||ee?"none":""},className:"title-right refresh-btn",type:"ghost",onClick:function(){a(d.getInitIncomeStatementFetch(R,D)),a(p.addPageTabPane("ReportPanes","InitLrb","InitLrb","利润表调整")),a(p.addHomeTabpane("Report","InitLrb","利润表调整"))}},"调整"),c.default.createElement(u.default,{className:"title-right refresh-btn",type:"ghost",onClick:function(){return(0,k.debounce)(function(){ee?(a(d.getInitListFetch(N,z,ae,re)),a(m.freshReportPage("利润表"))):(a(d.getPeriodAndIncomeStatementFetch(N,z,A)),a(m.freshReportPage("利润表")))})()}},"刷新")))),c.default.createElement(y.default,{incomestatement:C,selfMadeProfitList:Q,ifSelfMadeProfitList:ee,showChildProfitList:te,dispatch:a,proportionDifference:ne,lrbState:n,issues:L}),_?c.default.createElement(w.default,{extraModal:_,dispatch:a,extraMessageList:ue,onCancel:function(){return e.setState({extraModal:!1})},refreshFunc:function(){a(d.getInitListFetch(N,z,ae,re))}}):"")}}]),t}())||a;t.default=C},1786:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=y(n(47)),l=y(n(14)),o=y(n(45)),u=y(n(100)),i=y(n(37)),s=y(n(1230)),c=y(n(89)),f=y(n(129)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(78),n(55),n(99),n(38),n(1231),n(88),n(128);var m=y(n(1)),p=(n(18),n(17)),h=(y(n(90)),y(n(1528)),n(127),y(n(1529)),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1319))),b=n(22),g=y(n(6));function y(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}f.default.Group;var E=c.default.Group,O=s.default.RangePicker,w=(0,p.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return n=a=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={begin:a.props.referBegin,end:a.props.referEnd,confirm:!0},v(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),d(t,[{key:"render",value:function(){var e,t=this,n=this.props,a=n.dateModal,s=n.dispatch,f=n.issuedate,d=n.endissuedate,p=n.startMonth,y=n.year,v=n.finalMonth,w=n.referChooseValue,M=n.issues,k=n.onCancel,_=this.state,P=_.begin,S=_.end,C=_.confirm,N=M.get(0)||"",x=M.get(M.size-1)||"",j=function(e,t,n){var a="",r="";return n?1==t?(r=12,a=Number(e)-1):(r=Number(t)-1,a=Number(e)):(r=Number(t),a=Number(e)),{openedyear:a,openedmonth:r}},T=j(x.substr(0,4),x.substr(6,2)).openedyear,I=j(x.substr(0,4),x.substr(6,2)).openedmonth,L=j(N.substr(0,4),N.substr(6,2)).openedyear,R=j(N.substr(0,4),N.substr(6,2)).openedmonth;e=new Date(T,I,1),new Date(L,R,1);var D=P===S?P.substr(0,4)+"-"+P.substr(4,2):P.substr(0,4)+"-"+P.substr(4,2)+"~"+(S||P).substr(0,4)+"-"+(S||P).substr(4,2);return m.default.createElement(r.default,{width:480,visible:a,title:"选择参考账期",onCancel:k,className:"date-modal",maskClosable:!1,onOk:function(){if(C){var e=P.substr(0,4),t=P.substr(4,2),n=S.substr(0,4),a=S.substr(4,2);if("按账期区间选择"===w){if(e!==n)return void i.default.info("所选区间不可跨年");if(e<T||e==T&&t<I||n>L||n==L&&a>R)return void i.default.info("所选区间有误")}s(h.changeLrbString("curReferValue",w)),s(h.getInitListFetch(f,d,P,S)),k()}},okType:C?"primary":"disabled"},m.default.createElement("div",null,m.default.createElement(E,{className:"date-radio-group",value:w,onChange:function(e){var n=e.target.value,a=f.substr(0,4),r=f.substr(6,2),l=M.toJS().reverse(),o=""+(Number(a)-1)+r,u=""+(Number(d.substr(0,4))-1)+d.substr(6,2),c=Number(a)-1+"年第"+r+"期",m=Number(d.substr(0,4))-1+"年第"+d.substr(6,2)+"期",b=l.findIndex(function(e){return e===f});switch(s(h.changeReferChooseValue(n)),t.setState({confirm:!0}),n){case"本年累计":t.setState({begin:""+a+p,end:""+a+r});break;case"上个月":if(0===b)i.default.info("不在有效账期区间内"),t.setState({confirm:!1});else{var g=l[b-1];t.setState({begin:""+g.substr(0,4)+g.substr(6,2),end:""+g.substr(0,4)+g.substr(6,2)})}break;case"上年同期":l.some(function(e){return e===c})&&l.some(function(e){return e===m})?t.setState({begin:""+o,end:""+u}):(i.default.info("不在有效账期区间内"),t.setState({confirm:!1}));break;case"过去三个月":if(b<=3)i.default.info("不在有效账期区间内"),t.setState({confirm:!1});else{var y=l[b-3],v=l[b-1];t.setState({begin:""+y.substr(0,4)+y.substr(6,2),end:""+v.substr(0,4)+v.substr(6,2)})}break;case"过去半年":if(b<=6)i.default.info("不在有效账期区间内"),t.setState({confirm:!1});else{var E=l[b-6],O=l[b-1];t.setState({begin:""+E.substr(0,4)+E.substr(6,2),end:""+O.substr(0,4)+O.substr(6,2)})}}}},m.default.createElement(c.default,{value:"本年累计"},"本年累计"),m.default.createElement(c.default,{value:"上个月"},"上个月"),m.default.createElement(c.default,{value:"上年同期"},"上年同期")),m.default.createElement(u.default,{disabled:!0,style:{display:"block"},value:"本年累计"===w?y+"-"+p+"~"+y+"-"+v:D}),m.default.createElement("div",{style:{margin:"10px 0"}},m.default.createElement(c.default,{checked:"按账期选择"===w,value:"按账期选择",onClick:function(){t.setState({confirm:!0,begin:""+y+p,end:""+y+p}),s(h.changeReferChooseValue("按账期选择"))}},"按账期选择")),m.default.createElement(o.default,{disabled:"按账期选择"!==w,className:"date-choose",value:"按账期选择"===w&&P?P.substr(0,4)+"年第"+P.substr(4,2)+"期":"",onChange:function(e){t.setState({begin:""+e.substr(0,4)+e.substr(6,2),end:""+e.substr(0,4)+e.substr(6,2)})}},M.map(function(e,t){return m.default.createElement(o.default.Option,{key:t,value:e},e)})),m.default.createElement("div",{style:{margin:"10px 0"}},m.default.createElement(c.default,{checked:"按账期区间选择"===w,value:"按账期区间选择",onClick:function(){t.setState({confirm:!0}),s(h.changeReferChooseValue("按账期区间选择"))}},"按账期区间选择")),m.default.createElement(O,{mode:["month","month"],disabled:"按账期区间选择"!==w,disabledDate:function(t){return t&&(0,g.default)(e)>t},allowClear:!1,className:"title-more-choose-month",value:"按账期区间选择"===w&&P?[(0,g.default)(P,"YYYY-MM"),(0,g.default)(S,"YYYY-MM")]:[],format:"YYYY-MM",onPanelChange:function(e,n){return(0,b.debounce)(function(){var n=e[0].format("YYYY-MM").replace("-",""),a=e[1].format("YYYY-MM").replace("-","");-1===n.indexOf("Invalid")?(a.indexOf("Invalid")>-1&&(a=""),s(h.changeReferChooseValue("按账期区间选择")),t.setState({begin:n,end:a})):i.default.info("日期格式错误，请刷新重试")})()},suffixIcon:m.default.createElement(l.default,{type:"down"})})))}}]),t}())||a;t.default=w},1787:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=h(n(37)),l=h(n(1234)),o=h(n(129)),u=h(n(14)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(38),n(1235),n(128),n(78);var s=h(n(1)),c=(n(18),n(17)),f=n(127),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1319)),m=n(22),p=h(n(1237));function h(e){return e&&e.__esModule?e:{default:e}}var b=(0,c.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),i(t,[{key:"amountTextAlign",value:function(e){switch(e){case 0:case 1:return"right";case 2:return"center";default:return"left"}}},{key:"renderDifference",value:function(e,t){return e>0?s.default.createElement("span",{style:{color:"#ff8348"}},"amountDifference"===t?"+"+(0,m.formatMoney)(e):"+"+e+"%",s.default.createElement(u.default,{type:"arrow-up",style:{display:"amountDifference"===t?"none":""}})):0===e?s.default.createElement("span",null,"amountDifference"===t?""+e:e+"%",s.default.createElement("span",{style:{color:"rgb(255,131,72)"}},"-")):e<0?s.default.createElement("span",{style:{color:"#5e81d1"}},"amountDifference"===t?""+(0,m.formatMoney)(e):e+"%",s.default.createElement(u.default,{type:"arrow-down",style:{display:"amountDifference"===t?"none":""}})):void 0}},{key:"render",value:function(){var e=this.props,t=e.lrItem,n=e.className,a=e.idx,u=(e.showChildProfitList,e.dispatch),i=(e.proportionDifference,e.haveSwitchList,e.cannotTestList,e.cannotChecked),c=this.amountTextAlign(0);return function e(t,h,b){var g=t.get("linename"),y=t.get("checked"),v=t.get("showChild"),E=t.get("lineindex")?t.get("lineindex"):t.get("acId");return t.get("childProfit")&&t.get("childProfit").size?s.default.createElement("div",{key:a},s.default.createElement(f.TableItem,{className:n,line:a},s.default.createElement("li",null,i.includes(g)?"":s.default.createElement(o.default,{checked:y,onClick:function(){u(d.handleItemChecked(E,y))}})),s.default.createElement(f.ItemTriangle,{textAlign:"left",isLink:!1,showTriangle:!0,showchilditem:v,onClick:function(e){e.stopPropagation(),u(v?d.changeThisItemChecked(E,!1):d.handleItemChecked(E,!1)),u(d.handleItemShow(E,""+g,!v))}},s.default.createElement("span",{style:{paddingLeft:0===h?"0px":24*h+"px"}},g)),s.default.createElement("li",null,s.default.createElement("div",{className:"lrb-item"},s.default.createElement(f.Amount,{className:"align-"+c},t.get("monthaccumulation")),s.default.createElement("span",{className:"align-"+c},(0,m.formatMoney)(100*t.get("shareOfMonth"))+"%"))),s.default.createElement("li",null,i.includes(g)?"":s.default.createElement(l.default,{checked:t.get("testAmount"),checkedChildren:"占比",unCheckedChildren:"金额",onClick:function(){u(d.changeSwitchType(g))}})),s.default.createElement("li",null,v?s.default.createElement("span",null,t.get("testAmount")?(0,m.formatMoney)(t.get("testShareOfMonth"))+"%":t.get("testMonthaccumulation")):s.default.createElement("div",{style:{display:i.includes(g)?"none":""}},t.get("testAmount")?s.default.createElement("div",null,s.default.createElement(p.default,{className:"lrb-percent",disabled:!y,value:t.get("testShareOfMonth"),onChange:function(e){var t=e.target.value;/^\d*\.?\d{0,2}$/g.test(t)&&(Number(t)<=100?u(d.changeTestShareOfMonth(t,E)):r.default.info("小于100的数字"))}}),s.default.createElement("span",null,"%")):s.default.createElement(p.default,{value:t.get("testMonthaccumulation"),disabled:!y,onChange:function(e){var t=e.target.value;/^\d*\.?\d{0,2}$/g.test(t)&&Number(t)<1e7&&u(d.changeTestMonthaccumulation(t,E))}})))),v&&t.get("childProfit").map(function(t){return e(t,h+1,b)})):s.default.createElement("div",{key:a},s.default.createElement(f.TableItem,{className:n,line:a},s.default.createElement("li",null,i.includes(g)?"":s.default.createElement(o.default,{checked:y,onClick:function(){u(d.handleItemChecked(E,y))}})),s.default.createElement(f.TableOver,{textAlign:"left",isLink:!1},s.default.createElement("span",{style:{paddingLeft:0===h?"0px":24*h+"px"}},g)),s.default.createElement("li",null,s.default.createElement("div",{className:"lrb-item"},s.default.createElement(f.Amount,{className:"align-"+c},t.get("monthaccumulation")),s.default.createElement("span",{className:"align-"+c},(0,m.formatMoney)(100*t.get("shareOfMonth"))+"%"))),s.default.createElement("li",null,i.includes(g)||0!==h?"":s.default.createElement(l.default,{checked:t.get("testAmount"),checkedChildren:"占比",unCheckedChildren:"金额",onClick:function(){u(d.changeSwitchType(g))}})),s.default.createElement("li",null,s.default.createElement("div",{style:{display:i.includes(g)?"none":""}},t.get("testAmount")?s.default.createElement("div",null,s.default.createElement(p.default,{className:"lrb-percent",disabled:!y,value:t.get("testShareOfMonth"),onChange:function(e){var t=e.target.value;/^\d*\.?\d{0,2}$/g.test(t)&&(Number(t)<=100?u(d.changeTestShareOfMonth(t,E)):r.default.info("小于100的数字"))}}),s.default.createElement("span",null,"%")):s.default.createElement(p.default,{value:t.get("testMonthaccumulation"),disabled:!y,onChange:function(e){var t=e.target.value;/^\d*\.?\d{0,2}$/g.test(t)&&Number(t)<1e7&&u(d.changeTestMonthaccumulation(t,E))}})))))}(t,0,a)}}]),t}())||a;t.default=b},1789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=v(n(47)),l=v(n(32)),o=v(n(45)),u=v(n(100)),i=v(n(37)),s=v(n(1230)),c=v(n(89)),f=v(n(129)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(46),n(51),n(55),n(99),n(38),n(1231),n(88),n(128);var m=v(n(1)),p=n(18),h=n(17),b=v(n(90)),g=(v(n(1528)),n(127),v(n(1529)),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1319))),y=(n(22),v(n(6)),v(n(1237)));function v(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}f.default.Group,c.default.Group,s.default.RangePicker;var O=(0,h.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return n=a=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={curMessage:a.props.extraMessage},a.testCount=function(e,t){var n=a.props,r=n.extraMessageList,l=n.dispatch;if(Number(e)<1e7){var o=r.findIndex(function(e){return"人均营收"===e.get("name")}),u=r.setIn([o,"denominatorValue"],e);l(g.changeLrbString("extraMessageList",u))}else i.default.info("运算项分母不可超过1000万",1)},a.checkItem=function(e){var t=a.props;t.extraMessageList,t.dispatch},a.saveCheck=function(e){return e.map(function(t){return t.get("needConfirm")&&e.size>1?(i.default.info("请确认新增明细"),!1):t.get("name")?t.get("name")&&t.get("name").length>6?(i.default.info("名称长度不能超过6位"),!1):t.get("denominatorValue")||!t.get("enable")&&!t.get("needConfirm")?t.get("denominatorName")?t.get("denominatorName")&&t.get("denominatorName").length>6?(i.default.info("单位长度不能超过6位"),!1):0!==t.get("denominatorValue")||(i.default.info("运算项分母不能为0"),!1):(i.default.info("单位不能为空"),!1):(i.default.info("运算项分母不能为空"),!1):(i.default.info("名称不能为空"),!1)}).every(function(e){return e})},E(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),d(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.extraModal,a=t.onCancel,s=t.extraMessageList,c=t.dispatch,d=t.refreshFunc,h=(this.state.curMessage,[{key:"营业收入",value:1},{key:"营业利润",value:5},{key:"营业净利润",value:9},{key:"营业成本",value:2}]);return m.default.createElement(r.default,{visible:n,width:480,onCancel:a,title:"设置附加信息",okText:"保存",onOk:function(){e.saveCheck(s)&&c(g.setExtraMessageList(s.toJS(),function(){d(),a()}))}},m.default.createElement("div",{className:"extra-content"},m.default.createElement("div",null,m.default.createElement("span",null),m.default.createElement("span",null,"名称"),m.default.createElement("span",null,"运算项分子"),m.default.createElement("span",null,"运算项分母"),m.default.createElement("span",null,"单位"),m.default.createElement("span",null)),s.map(function(t,n){return m.default.createElement("div",{key:n},m.default.createElement("span",null,t.get("needConfirm")?"":m.default.createElement(f.default,{checked:t.get("enable"),onChange:function(e){c(g.changeLrbString("extraMessageList",s.setIn([n,"enable"],e.target.checked)))}})),m.default.createElement("span",null,n>2?m.default.createElement(u.default,{value:t.get("name"),placeholder:"请数量名称",onChange:function(e){var t=e.target.value,a=s.setIn([n,"name"],t);c(g.changeLrbString("extraMessageList",a))}}):t.get("name")),m.default.createElement("span",null,n>2?m.default.createElement(o.default,{value:(h.find(function(e){return e.value===t.get("numerator")})||{}).key,onChange:function(e){var t=s.setIn([n,"numerator"],e);c(g.changeLrbString("extraMessageList",t))}},h.map(function(e){return m.default.createElement(Option,{value:e.value},e.key)})):(h.find(function(e){return e.value===t.get("numerator")})||{}).key),m.default.createElement("span",null,m.default.createElement(y.default,{value:t.get("denominatorValue"),placeholder:{0:"请输入人数",1:"请输入人数",2:"请输入面积"}[n]||"请输入分母",onChange:function(e){var t=e.target.value;if(Number(t)<1e7){var a=s.setIn([n,"denominatorValue"],t);c(g.changeLrbString("extraMessageList",a))}else i.default.info("运算项分母不可超过1000万")}})),m.default.createElement("span",null,n>2?m.default.createElement(u.default,{placeholder:"请输入单位",value:t.get("denominatorName"),onChange:function(e){var t=e.target.value,a=s.setIn([n,"denominatorName"],t);c(g.changeLrbString("extraMessageList",a))}}):t.get("denominatorName")),n>2?m.default.createElement("span",null,t.get("needConfirm")?m.default.createElement(b.default,{type:"circle-confirm",style:{color:"#1eb6f8"},onClick:function(){e.saveCheck((0,p.fromJS)([t]))&&c(g.changeLrbString("extraMessageList",s.setIn([n,"needConfirm"],!1)))}}):"",m.default.createElement(b.default,{type:"circle-del",style:{color:"#f5222d"},onClick:function(){c(g.deleteExtraMessage([t.get("id")],function(){c(g.changeLrbString("extraMessageList",s.splice(n,1)))}))}})):m.default.createElement("span",null))}),m.default.createElement("div",null,m.default.createElement(l.default,{onClick:function(){c(g.changeLrbString("extraMessageList",s.push((0,p.fromJS)({needConfirm:!0,numerator:1}))))}},m.default.createElement(b.default,{type:"big-plus"}),"添加附加信息"))))}}]),t}())||a;t.default=O},1790:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=v(n(32)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(51);var o=v(n(1)),u=n(18),i=n(56),s=(v(n(1367)),y(n(1319))),c=(y(n(43)),y(n(60))),f=v(n(1227)),d=n(127),m=n(22),p=(n(31),v(n(1606)),v(n(1607)),v(n(1224))),h=v(n(1226));n(1608);v(n(90));var b=v(n(2098)),g=v(n(2099));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O=(0,i.connect)(function(e){return e})(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return n=a=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.getColor=function(e,t){if("营业收入"===e.substr(-4,4))return"rgb(255,131,72)";if("营业成本"===e.substr(-4,4))return"rgb(92,167,242)";if("营业税金"===e.substr(-4,4))return"rgb(2,129,255)";if("营业费用"===e)return"rgb(2,93,255)";if("营业利润"===e){if(t>0)return"rgb(255,181,73)";if(0===t)return"#FFF";if(t<0)return"rgb(17,195,224)"}},E(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),l(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.allState!=e.allState||this.props.lrbState!=e.lrbState||this.props.homeState!=e.homeState||this.state!==t}},{key:"render",value:function(){var e=this.props,t=e.lrbState,n=e.dispatch,a=e.allState,l=e.homeState,i=(l.getIn(["permissionInfo","Report"]),l.getIn(["permissionInfo","Config"]),t.get("incomestatement"),t.get("issuedate")),y=(t.get("lrbRuleModal"),a.get("issues")),v=a.getIn(["period","firstyear"]),E=(a.getIn(["period","firstmonth"]),t.get("selectAssId")),O=t.get("assSelectableList"),w=(O.size&&O.getIn([E,"assid"]),t.get("endissuedate")),M=(t.get("chooseperiods"),y.findIndex(function(e){return e===i})),k=i.substr(0,4),_=(y.slice(0,M).filter(function(e){return 0===e.indexOf(k)}),i.substr(0,4),i.substr(6,2),w.substr(0,4),w.substr(6,2),i.substr(0,4),t.get("showInitLrb"),l.get("pageList")),P=l.getIn(["views","isSpread"]),S=(l.getIn(["views","URL_POSTFIX"]),l.getIn(["views","isPlay"]),t.get("selfMadeProfitList"),t.get("ifSelfMadeProfitList"),t.get("showChildProfitList"),t.get("proportionDifference"),t.get("ifSelfTypeList"),t.get("referBegin"),t.get("referEnd"),t.get("extraMessageList"),t.get("calculatePage"),t.get("measureIssuedate"),t.get("profitResult")),C=t.get("ProfitAndLossResult"),N=t.get("incomeTotal").toJS(),x=t.get("resultList"),j=t.get("calculType"),T=t.get("resultListShowChildList"),I=t.get("profit")||(0,u.fromJS)({});N.monthaccumulation=C,x.forEach(function(e){e.childProfit&&e.childProfit.length>0&&(e.childProfit=e.childProfit.filter(function(e){return!0===e.checked}))});var L="";return S>0?(L="profitP","income"):S<0?(L="profitD","income"):(L="profit0","income0"),o.default.createElement(p.default,{type:"report-lrb",className:"calcul-result"},o.default.createElement(h.default,null,o.default.createElement("div",{className:"flex-title-left"},P||_.getIn(["Report","pageList"]).size<=1?"":o.default.createElement(f.default,{pageItem:_.get("Report"),onClick:function(e,t,a){n(c.addPageTabPane("ReportPanes",a,a,t)),n(c.addHomeTabpane(e,a,t))}}),o.default.createElement("span",{style:{lineHeight:"28px"}},"测算结果")),o.default.createElement("div",{className:"flex-title-right"},o.default.createElement(r.default,{onClick:function(){n(s.changeLrbString("showResult",!1))}},"修改"))),o.default.createElement("div",{className:"calculate-pic"},o.default.createElement("div",{className:0===S?"income0":"income"},o.default.createElement("div",null,"若营业收入为"),o.default.createElement("div",null,"¥ ",(0,m.formatMoney)(C))),o.default.createElement("div",{className:L},o.default.createElement("div",null,"则营业利润为"),o.default.createElement("div",null,"¥ ",(0,m.formatMoney)(S))),o.default.createElement("div",null,o.default.createElement("div",{className:"char-title"},"测算损益图"),o.default.createElement(b.default,{resultList:x,profitResult:S,ProfitAndLossResult:C,incomeTotal:N,profit:I}))),o.default.createElement(d.TableWrap,{notPosition:!0},o.default.createElement(d.TableAll,null,o.default.createElement(g.default,{resultList:x,calculType:j,profitResult:S,ProfitAndLossResult:C,incomeTotal:N,profit:I,dispatch:n,resultListShowChildList:T}))))}}]),t}())||a;t.default=O},2098:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=s(n(1)),o=n(17),u=s(n(1367)),i=n(22);function s(e){return e&&e.__esModule?e:{default:e}}var c=(0,o.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"getColor",value:function(e,t,n){switch(e.substr(-4,4)){case"营业收入":return 0!==n?"#ff8348":"rgb(255,131,72)";case"营业成本":return"#5ca7f2";case"营业税金":return"rgb(2,129,255)";case"营业费用":return"rgb(2,93,255)";case"营业利润":if(t>0)return"#ffb549";if(0===t)return"#FFF";if(t<0)return"#11c3e0"}}},{key:"render",value:function(){var e=this,t=this.props,n=t.resultList,a=t.ProfitAndLossResult,r=t.profitResult,o=t.incomeTotal;t.profit;o.monthaccumulation=a,n.forEach(function(e){e.childProfit&&e.childProfit.length>0&&(e.childProfit=e.childProfit.filter(function(e){return!0===e.checked}))});var s={linename:"营业利润",testShareOfMonth:0===r?0:r/a*100,testMonthaccumulation:r},c={normal:{color:"transparent"}},f={linename:"营业费用",testShareOfMonth:"0",testMonthaccumulation:0};n.map(function(e){!0===e.testAmount?e.testMonthaccumulation=""+a*Number(e.testShareOfMonth)/100:e.testShareOfMonth=""+Number(e.testMonthaccumulation)/a*100});var d=[],m=[];n.map(function(e,t){["管理费用","销售费用","财务费用"].includes(e.linename)?m.push(e):d.push(e)}),m.map(function(e){var t=Number(f.testMonthaccumulation)+Number(e.testMonthaccumulation);f.testMonthaccumulation=Number(t);var n=Number(f.testShareOfMonth)+Number(e.testShareOfMonth);f.testShareOfMonth=Number(n)});var p=[],h=[];[o].concat(d).concat([f]).map(function(t){var n={value:"0"===t.testMonthaccumulation?0:t.testMonthaccumulation?Number(t.testMonthaccumulation).toFixed():t.monthaccumulation,name:t.linename.substr(-4,4)+"    "+("营业收入"===t.linename.substr(-4,4)?"100.00%":0===t.testShareOfMonth?"0.00%":Number(t.testShareOfMonth)===1/0||Number(t.testShareOfMonth)===-1/0||isNaN(Number(t.testShareOfMonth))?"无效值":t.testShareOfMonth?(0,i.formatMoney)(t.testShareOfMonth)+"%":(0,i.formatMoney)(100*t.shareOfMonth)+"%"),itemStyle:{normal:{color:e.getColor(t.linename,Number(t.testShareOfMonth),r)}}};p.push(n),h.push(t.linename.substr(-4,4)+"    "+("营业收入"===t.linename.substr(-4,4)?"100.00%":0===t.testShareOfMonth?"0.00%":Number(t.testShareOfMonth)===1/0||Number(t.testShareOfMonth)===-1/0||isNaN(Number(t.testShareOfMonth))?"无效值":t.testShareOfMonth?(0,i.formatMoney)(t.testShareOfMonth)+"%":(0,i.formatMoney)(100*t.shareOfMonth)+"%"))}),h.push(s.linename+"    "+(0===s.testShareOfMonth?"0":Number(s.testShareOfMonth)===1/0||Number(s.testShareOfMonth)===-1/0||isNaN(Number(s.testShareOfMonth))?"无效值":(0,i.formatMoney)(s.testShareOfMonth)+"%"));var b=a;n.map(function(e){b+=Number(e.testMonthaccumulation)});var g={legend:{orient:"vertical",left:"55%",data:h,icon:"circle",top:"middle",selectedMode:!1},series:[{name:"利润",type:"pie",minAngle:1,center:["25%","50%"],radius:["0%","55%"],label:{normal:{show:!1}},labelLine:{normal:{show:!1}},data:[{value:(Math.abs(b)-Math.abs(r))/2,name:" ",itemStyle:c},{value:Math.abs(r),name:s.linename+"    "+(0===s.testShareOfMonth?"0":Number(s.testShareOfMonth)===1/0||Number(s.testShareOfMonth)===-1/0||isNaN(Number(s.testShareOfMonth))?"无效值":(0,i.formatMoney)(s.testShareOfMonth)+"%"),itemStyle:{normal:{color:0===r?"#FFF":r>0?"rgb(255,181,73)":"rgb(17,195,224)"}}},{value:(Math.abs(b)-Math.abs(r))/2,name:" ",itemStyle:c}]},{minAngle:1,label:{normal:{show:!1}},name:"比例",type:"pie",center:["25%","50%"],radius:["55%","74%"],data:p.reverse()}]};return l.default.createElement(u.default,{className:"measure-pie-char",option:g,height:"auto"})}}]),t}())||a;t.default=c},2099:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=f(n(1)),o=(n(18),n(17)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1319)),i=n(127),s=f(n(2100)),c=f(n(90));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=(0,o.immutableRenderDecorator)(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return n=a=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={showAll:!1},d(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.resultList,a=t.ProfitAndLossResult,r=t.profitResult,o=t.incomeTotal,f=t.profit,d=t.dispatch,m=t.resultListShowChildList,p=(t.calculType,this.state.showAll);o.childProfit=[],o.monthaccumulation=a,o.shareOfMonth=1,f.childProfit=[];var h={linename:"营业利润",testShareOfMonth:0===r?0:r/a*100,testMonthaccumulation:""+r,childProfit:[]},b={linename:"减：营业费用",testShareOfMonth:0,testMonthaccumulation:"0",childProfit:[]};n.map(function(e){!0===e.testAmount?e.testMonthaccumulation=""+a*Number(e.testShareOfMonth)/100:e.testShareOfMonth=""+Number(e.testMonthaccumulation)/a*100,e.childProfit.length>0&&e.childProfit.map(function(e){!0===e.testAmount?e.testMonthaccumulation=""+a*Number(e.testShareOfMonth)/100:e.testShareOfMonth=""+Number(e.testMonthaccumulation)/a*100})});var g=[];n.map(function(e,t){if(["管理费用","销售费用","财务费用"].includes(e.linename)){b.childProfit.push(e);var n=Number(b.testShareOfMonth)+Number(e.testShareOfMonth);b.testShareOfMonth=Number(n),b.testMonthaccumulation=Number(e.testMonthaccumulation)+Number(b.testMonthaccumulation)}else g.push(e)});var y=[o].concat(g).concat([b]).concat([h]);return l.default.createElement("div",{className:"table-title-wrap"},l.default.createElement("ul",{className:"table-title calculate-result-table calculate-result-width"},l.default.createElement("li",null,"项目",l.default.createElement(c.default,{size:"14",type:p?"tableGather":"tableExpand",style:{margin:"auto 5px",color:"#B9B9B9"},onClick:function(){e.setState({showAll:!p,a:1},function(){d(u.handleMeasureResultListShowChildAll(y,e.state.showAll))})}})),l.default.createElement("li",null,l.default.createElement("div",null,l.default.createElement("span",null,"测算数据")),l.default.createElement("div",null,l.default.createElement("span",null,"测算金额"),l.default.createElement("span",null,"测算占比")))),l.default.createElement(i.TableBody,null,y.length>0&&y.map(function(e,t){return l.default.createElement(s.default,{className:"calculate-result-width",data:e,key:t,dispatch:d,index:t,resultListShowChildList:m})})))}}]),t}())||a;t.default=m},2100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),u=(r=o)&&r.__esModule?r:{default:r},i=(n(18),n(17)),s=n(127),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1319)),f=n(22);var d=(0,i.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.index,a=e.resultListShowChildList,r=e.dispatch,l=e.className;return function e(t,n,o){var i=t.linename,d=a.includes(""+i),m=""+("营业收入"===t.linename.substr(-4,4)?0===t.monthaccumulation?"0":t.monthaccumulation:0===Number(t.testMonthaccumulation)?"0":Number(t.testMonthaccumulation)),p=("营业收入"===t.linename.substr(-4,4)?0===t.shareOfMonth?"0.00%":(0,f.formatMoney)(100*t.shareOfMonth)+"%":Number(t.testShareOfMonth)===1/0||Number(t.testShareOfMonth)===-1/0||isNaN(t.testShareOfMonth)?"无效值":(0,f.formatMoney)(t.testShareOfMonth)+"%")+"\n            ";return t.childProfit&&t.childProfit.length>0?u.default.createElement("div",null,u.default.createElement(s.TableItem,{className:l,line:o+1},u.default.createElement(s.ItemTriangle,{textAlign:"left",isLink:!1,showTriangle:!0,showchilditem:d,onClick:function(e){e.stopPropagation(),r(c.handleMeasureResultListShowChild(""+i,!d))}},u.default.createElement("span",{style:{paddingLeft:0===n?"0px":24*n+"px"}},i.replace(/\./g,"、").replace(/:/g,"："))),u.default.createElement("li",null,u.default.createElement("div",{className:"lrb-item"},u.default.createElement("span",null,(0,f.formatMoney)(m)),u.default.createElement("span",null,p)))),d&&t.childProfit.map(function(t,a){return e(t,n+1,o)})):u.default.createElement(s.TableItem,{className:l,line:o+1},u.default.createElement(s.TableOver,{textAlign:"left",isLink:!1},u.default.createElement("span",{style:{paddingLeft:0===n?"0px":24*n+"px"}},i.replace(/\./g,"、").replace(/:/g,"："))),u.default.createElement("li",null,u.default.createElement("div",null,u.default.createElement("span",null,(0,f.formatMoney)(m)),u.default.createElement("span",null,p))))}(t,0,n)}}]),t}())||a;t.default=d}}]);