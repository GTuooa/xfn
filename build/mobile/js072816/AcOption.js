(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1018:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a,c=n(2497),l=(a=c)&&a.__esModule?a:{default:a};t.reducer={},t.view=l.default},1463:function(e,t,n){},2497:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,c,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=(c=r)&&c.__esModule?c:{default:c},i=n(9),u=n(31),f=g(n(1212)),s=g(n(1076));n(1463);var m=n(16),d=g(n(10)),p=g(n(25));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}m.Form.Label,m.Form.Control;var h=m.Form.Item,E=(0,u.connect)(function(e){return e})(a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={prevAcunit:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),l(t,[{key:"componentDidMount",value:function(){"modify"===this.props.acconfigState.get("acConfigMode")?d.setTitle({title:"编辑科目"}):"insert"===this.props.acconfigState.get("acConfigMode")&&d.setTitle({title:"新增科目"}),d.setRight({show:!1}),this.setState({prevAcunit:this.props.acconfigState.getIn(["ac","acunit"])})}},{key:"render",value:function(){var e=this.props,t=e.allState,n=e.acconfigState,a=e.dispatch,c=e.history,l=e.homeState,r=this.state.prevAcunit,u=l.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]),g=n.get("ac"),E=t.get("acTags"),N=g.get("acid").charAt(0),y=E.getIn([N&&N-1,"sub"])||(0,i.fromJS)([]),b=t.get("aclist"),_=n.get("fromfirts"),v=n.get("acConfigMode"),A=(g.get("acid").length,0===y.size?(0,i.fromJS)([]):y.map(function(e){return{value:""+e,key:""+e}})),C=b.some(function(e){return!e.get("acid").indexOf(g.get("acid"))&&e.get("acid")!==g.get("acid")})||!!g.get("asscategorylist").size||!!g.get("upperid"),w=l.getIn(["data","userInfo","sobInfo","moduleInfo"]),I=!!w&&w.indexOf("NUMBER")>-1;return o.default.createElement(m.Container,{className:"ac-option"},o.default.createElement(m.ScrollView,{flex:"1",uniqueKey:"ac-config-option-scroll",savePosition:!0},o.default.createElement(m.Form,null,o.default.createElement(h,{label:"科目编码：",className:"form-offset-up"},o.default.createElement(m.TextInput,{textAlign:"right",value:g.get("acid"),placeholder:_?"填写数字 (限4个数字)":"填写数字 (限6/8/10个数字)",onChange:function(e){return a(f.changeAcId(e,t.get("aclist").toSeq()))}})," ",o.default.createElement(m.Icon,{type:"arrow-right",className:"ac-option-icon",size:"14"})),o.default.createElement("ul",{className:"form-tip"},o.default.createElement("li",{className:"form-tip-item"},"科目编码支持最长四级，一级科目必须以1/2/3/4/5开头且长度分别为4/6/8/10位数字；")),o.default.createElement(h,{label:"科目名称：",className:"form-offset-up"},o.default.createElement(m.TextInput,{textAlign:"right",value:g.get("acname"),placeholder:"包含中文最长"+p.AC_CHINESE_NAME_LENGTH+"个字符，否则最长"+p.AC_NAME_LENGTH+"个",onChange:function(e){return a(f.changeAcName(e))}})," ",o.default.createElement(m.Icon,{type:"arrow-right",className:"ac-option-icon",size:"14"})),o.default.createElement(h,{label:"上级科目：",className:"form-offset-up form-offset-margin"},o.default.createElement(m.TextInput,{textAlign:"right",className:"form-input",value:g.get("upperid")?g.get("upperinfo"):"无",disabled:!0})),o.default.createElement(h,{label:"余额方向：",className:"form-offset-up form-offset-margin"},o.default.createElement(m.SwitchText,{checked:"debit"===g.get("direction"),checkedChildren:"借",unCheckedChildren:"贷",onChange:function(){return a(f.changeJvDirection())}})),o.default.createElement("div",{className:"form-select"},o.default.createElement("label",{className:"form-select-text"+(""===g.get("acid")?"-disabled":"")},"科目类别："),C?o.default.createElement("div",{className:"form-select-just-show"},o.default.createElement("span",null,g.get("category"))):g.get("acid")?o.default.createElement(m.SinglePicker,{className:"form-select-show-select",district:A,onOk:function(e){return a(f.changeCategory(e.value))}},o.default.createElement("div",{className:"form-select-show"},o.default.createElement("span",null,g.get("category")?g.get("category"):"请选择"))):""),o.default.createElement("ul",{className:"form-tip"},o.default.createElement("li",{className:"form-tip-item"},"科目类别已根据国家小企业会计准则预置；"),o.default.createElement("li",{className:"form-tip-item"},"新增子科目时，子科目将自动继承上级科目的余额方向、类别；")),I?o.default.createElement(h,{label:"数量核算：",className:"form-offset-up form-amount form-offset-border"},o.default.createElement(m.Switch,{checked:"1"===g.get("acunitOpen"),onClick:function(){a(f.changeAcAmountStateText(v,r))}})):"",I?o.default.createElement(h,{label:"计算单位：",className:"form-offset-up",style:{display:"1"===g.get("acunitOpen")?"":"none"}},"1"===g.get("acunitOpen")&&""==r?o.default.createElement(m.TextInput,{textAlign:"right",className:"form-input",value:g.get("acunit"),placeholder:"请输入单位名称",onChange:function(e){return a(f.changeAcconfigAcunit(e))}}):"",o.default.createElement("span",{style:{display:"1"===g.get("acunitOpen")&&""==r?"":"none"}}," ",o.default.createElement(m.Icon,{type:"arrow-right",className:"ac-option-icon",size:"14"})),o.default.createElement("span",{className:"acunitOpen-modify",style:{display:"1"===g.get("acunitOpen")&&r?"":"none"},onClick:function(){c.push("/config/modifyunit")}},o.default.createElement("span",null,g.get("acunit"))," ",o.default.createElement(m.Icon,{type:"arrow-right",className:"ac-option-icon",size:"14"}))):"")),o.default.createElement(m.Row,null,o.default.createElement(m.ButtonGroup,{type:"ghost",height:50},o.default.createElement(m.Button,{onClick:function(){return a(f.cancelEnterAcFetch(c))}},o.default.createElement(m.Icon,{type:"cancel"}),"取消"),o.default.createElement(m.Button,{disabled:!u,onClick:function(){if("1"==g.get("acunitOpen")&&!g.get("acunit"))return d.Alert("请输入计量单位");if(g.get("acunit").length>p.AC_UNIT_LENGTH)return d.Alert("计算单位位数不能超过"+p.AC_UNIT_LENGTH+"位");var e=p.AC_CHINESE_NAME_LENGTH;if(/[\u4e00-\u9fa5]/g.test(g.get("acname"))||/[\u3002\uff1b\uff0c\uff1a\u201c\u201d\uff08\uff09\u3001\uff1f\u300a\u300b]/g.test(g.get("acname"))||(e=p.AC_NAME_LENGTH),g.get("acname").length>e)return d.Alert("科目名称包含中文及中文标点字符，长度不能超过"+p.AC_CHINESE_NAME_LENGTH+"位；否则，长度不能超过"+p.AC_NAME_LENGTH+"位");a(s.enterAcFetch(_,c))}},o.default.createElement(m.Icon,{type:"save"}),"保存"))))}}]),t}())||a;t.default=E}}]);