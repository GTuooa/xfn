(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1068:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateStockBatch=t.changeInventoryData=t.editInventoryBatch=t.beforAddAccontfromEditRunning=t.getPrejectCardListForchangeConfig=t.getRelativeCardListForchangeConfig=t.getInventoryCardListForchangeConfig=t.beforeAddProjectCardFromEditRunning=t.beforeAddInventoryCardFromEditRunning=t.beforeAddManageTypeCardFromEditRunning=void 0;var r=a(9),n=d(a(1396)),o=a(13),i=u(a(124)),s=(u(a(24)),a(1060)),c=a(1080);d(a(10)),d(a(25));function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.beforeAddManageTypeCardFromEditRunning=function(e,t,a){return function(e,s){var c=[new Promise(function(e){(0,i.default)("getIUManageListTitle","GET","",function(t){(0,o.showMessage)(t)&&e(t.data)})}),new Promise(function(e){(0,i.default)("getIUManageCardLimitAndAc","GET","",function(t){(0,o.showMessage)(t)&&e(t.data.isCheckOut)})}),new Promise(function(e){(0,i.default)("getInitRelaCard","GET","",function(t){(0,o.showMessage)(t)&&e(t.data)})})];Promise.all(c).then(function(o){var i=o[0],s=o[1],c=o[2];c.isCheckOut=s,i.unshift({name:"全部",uuid:""}),e({type:n.BEFORE_ADD_MANAGE_TYPE_CARD_FROM_EDIT_RUNNING,receivedData:c,originTags:(0,r.fromJS)(i),otherPageName:a||"editRunning"}),t.push("/config/relative/relativeCardInsert")})}},t.beforeAddInventoryCardFromEditRunning=function(e,t,a){return function(s,c){(0,i.default)("getInventoryHighTypeList","GET","",function(c){(0,o.showMessage)(c)&&(0,i.default)("getInitStockCard","GET","",function(i){if((0,o.showMessage)(i)){var u=c.data.filter(function(t){return e.indexOf(t.uuid)>-1});u=u.length?u:c.data,s({type:n.BEFORE_ADD_INVENTORY_CARD_FROM_EDIT_RUNNING,receivedData:i.data,originTags:(0,r.fromJS)(u),otherPageName:a||"editRunning"}),t.push("/config/inventory/inventoryInsert")}})}),c().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE")&&(0,i.default)("getWarehouseTree","POST",JSON.stringify({uuidList:[],inventoryUuid:""}),function(e){(0,o.showMessage)(e)&&s({type:n.GET_INVENTORY_WAREHOUSE_TREE,data:e.data.cardList,checkedWarehouse:!1})}),(0,i.default)("inventoryAssistList","GET","",function(e){(0,o.showMessage)(e)&&s({type:n.CHANGE_INVENTORY_DATA,dataType:"assistClassificationList",value:(0,r.fromJS)(e.data.assistClassificationList),short:!0})})}},t.beforeAddProjectCardFromEditRunning=function(e,t,a){return function(r,s){t=t||s().editRunningState.getIn(["oriTemp","projectRange"]);var c=[function(){return new Promise(function(e){(0,i.default)("getProjectConfigHighType","GET","",function(t){(0,o.showMessage)(t)&&e(t.data)})})},function(){return new Promise(function(e){(0,i.default)("getProjectCardCode","GET","",function(t){(0,o.showMessage)(t)&&e(t.data.code)})})},function(){return new Promise(function(e){(0,i.default)("getProjectTree","GET","uuid="+t.get(0),function(t){(0,o.showMessage)(t)&&e(t.data)})})}].map(function(e){return e()});Promise.all(c).then(function(o){var i=o[0],s=o[1],c=o[2];r({type:n.BEFORE_ADD_PROJECT_CARD_FROM_EDIT_RUNNING,receivedData:c.resultList,ctgyUuid:t.get(0),code:s,highTypeList:i,otherPageName:a||"editRunning"}),e.push("/config/project/projectCard")})}},t.getInventoryCardListForchangeConfig=function(){return function(e,t){var a=t().inventoryConfState.getIn(["views","otherPageName"]);if("editRunning"==a){if("LB_CHZZ"==t().editRunningState.getIn(["oriTemp","categoryType"]))return void e((0,s.getStockListByCategory)({top:!0,uuid:""},"stockRange"));e((0,s.getCardList)("stockRange"))}else"searchApproval"==a&&e((0,c.getStockAllCardList)(null,"project",""))}},t.getRelativeCardListForchangeConfig=function(){return function(e,t){var a=t().relativeConfState.getIn(["views","otherPageName"]);"editRunning"==a?e((0,s.getCardList)("contactsRange")):"searchApproval"==a&&e((0,c.getRelativeAllCardList)(null,"contact",""))}},t.getPrejectCardListForchangeConfig=function(){return function(e,t){var a=t().projectConfState.getIn(["views","otherPageName"]);if("editRunning"==a){var r=t().editRunningState.getIn(["oriTemp","projectRange"]);e((0,s.getProjectCardList)(r))}else"searchApproval"==a&&e((0,c.getProjectAllCardList)(null,"stock",""))}},t.beforAddAccontfromEditRunning=function(e,t){return{type:n.BEFOR_ADD_ACCONT_FROM_EDIT_RUNNING,dataType:e,value:t}},t.editInventoryBatch=function(t,a,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return function(i,s){var c={batchType:t,inventoryUuid:a,openShelfLife:n,shelfLife:o,editPage:"editRunning"};if("MODIFY-MODIFY"==t){var u=s().editRunningState.getIn(["cardAllList","batchList"]);c.batchList=u}i(_("batch",(0,r.fromJS)(c),!0)),e.routerHistory.push("/config/inventory/batchSet")}};var _=t.changeInventoryData=function(e,t,a){return{type:n.CHANGE_INVENTORY_DATA,dataType:e,value:t,short:a}};t.updateStockBatch=function(e){return{type:n.RUNNING_UPDATE_STOCK_BATCH,batch:(0,r.fromJS)(e)}}}).call(this,a(21))},1080:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSearchApprovalChdbPriceAll=t.getSearchApprovalChdbPrice=t.getSearchApprovalAccountRunningCate=t.changeSearchApprovalCommonChargeInvnetory=t.chargeSearchApprovalItemCheckboxCheckAll=t.chargeSearchApprovalItemCheckboxCheck=t.getInventorySomeCardList=t.getInventoryAllCardList=t.addSearchApprovalCarrayover=t.addSearchApprovalStock=t.deleteSearchApprovalCarrayover=t.deleteSearchApprovalStock=t.autoCalculateStockAmount=t.clearSearchApprovalTemp=t.searchApproalBillchange=t.insertCommonModal=t.getBusinessGrantModal=t.getBusinessManagerModal=t.searchApprovalChangeRunningTaxRate=t.changeApprovalProcessDetailInfoCommonString=t.modifyApprovalProcessDetailInfo=t.getStockSomeCardList=t.getStockAllCardList=t.getProjectSomeCardList=t.getProjectAllCardList=t.getRelativeSomeCardList=t.getRelativeAllCardList=t.changeApprovalProcessDetailInfoCategory=t.getSearchApprovalCarrayProjectCardList=t.getSearchApprovalCarryoverCategory=t.getApprovalRelativeCardList=t.getApprovalProjectCardList=t.getApprovalProcessDetailInfo=t.beforeEditApprovalProcessDetailInfo=t.bookKeepingApprovalProcessDetailInfo=t.receiveApprovalProcessDetailInfo=t.payingApprovalProcessDetailInfo=t.accountingApprovalProcessDetailInfo=t.cancelApprovalProcessDetailInfo=t.disuseApprovalProcessDetailInfo=t.getSearchRunningJrCategoryDate=t.getApprovalProcessModelList=t.getApprovalProcessDetailList=t.getApprovalProcessList=t.changeApprovalProcessDetailInfoBillCommonString=t.changeSearchApprovalString=t.changeSearchRunningCalculateCommonString=t.changeSearchApprovalCommonString=t.initSearchApproval=void 0;var r,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=A(a(1356)),i=a(124),s=(r=i)&&r.__esModule?r:{default:r},c=a(9),u=a(13),d=A(a(10)),_=A(a(25)),g=a(1218);function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.initSearchApproval=function(){return{type:o.INIT_SEARCH_APPROVAL}},t.changeSearchApprovalCommonString=function(e,t){return{type:o.CHANGE_SEARCH_APPROVAL_COMMON_STRING,place:e,value:t}};var l=t.changeSearchRunningCalculateCommonString=function(e,t){return function(a){a("string"==typeof e?{type:o.CHANGE_SEARCH_RUNNING_CALCULATE_COMMON_STRING,place:e,value:t}:{type:o.CHANGE_SEARCH_RUNNING_CALCULATE_COMMON_STRING,placeArr:e,value:t})}},E=t.changeSearchApprovalString=function(e,t,a){return function(r){if(e){var n="string"==typeof t?[""+e,t]:[""+e].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(t));r({type:o.CHANGE_SEARCH_APPROVAL_STRING,tab:e,placeArr:n,value:a})}else r({type:o.CHANGE_SEARCH_APPROVAL_STRING,tab:e,place:t,value:a})}},T=(t.changeApprovalProcessDetailInfoBillCommonString=function(e,t){return{type:o.CHANGE_APPROVAL_PROCESS_DETAIL_INFO_BILL_COMMON_STRING,place:e,value:t}},t.getApprovalProcessList=function(e,t,a,r){return function(i,c){d.toast.loading(_.LOADING_TIP_TEXT,0);var g=c().searchApprovalState;!0===e.refresh&&(e.searchType=g.getIn(["views","searchType"]),e.searchContent=g.getIn(["views","searchContent"]),e.dateType=g.getIn(["views","dateType"]),e.beginDate=g.getIn(["views","beginDate"]),e.endDate=g.getIn(["views","endDate"]),e.processCode=g.getIn(["views","processCode"])),delete e.refresh;var A=t||g.getIn(["views","currentPage"]);(0,s.default)("getApprovalProcessList","POST",JSON.stringify(n({currentPage:1,pageSize:A*_.SEARCH_APPROVAL_PAGE},e,{isAsc:!1,orderField:"ORDER_DATE_END"})),function(t){d.toast.hide(),(0,u.showMessage)(t)&&(i({type:o.AFTER_GET_APPROVAL_PROCESSLIST,receivedData:t.data,param:e,currentPage:A}),a&&a()),r&&r()})}}),C=t.getApprovalProcessDetailList=function(e,t,a,r){return function(i,c){d.toast.loading(_.LOADING_TIP_TEXT,0);var g=c().searchApprovalState;!0===e.refresh&&(e.searchType=g.getIn(["views","searchType"]),e.searchContent=g.getIn(["views","searchContent"]),e.dateType=g.getIn(["views","dateType"]),e.beginDate=g.getIn(["views","beginDate"]),e.endDate=g.getIn(["views","endDate"]),e.accountingType=g.getIn(["views","accountingType"])),delete e.refresh;var A=t||g.getIn(["views","currentPage"]);(0,s.default)("getapprovalprocessdetaillist","POST",JSON.stringify(n({currentPage:1,pageSize:A*_.SEARCH_APPROVAL_PAGE},e,{isAsc:!1,orderField:"ORDER_DATE_END"})),function(t){d.toast.hide(),(0,u.showMessage)(t)&&(i({type:o.AFTER_GET_APPROVAL_PROCESSLIST_DETAILLIST,receivedData:t.data,param:e,currentPage:A}),a&&a()),r&&r()})}},f=(t.getApprovalProcessModelList=function(e){return function(t,a){a().searchApprovalState;(0,s.default)("getapprovalprocessmodellist","POST",JSON.stringify(n({},e)),function(e){(0,u.showMessage)(e)&&t({type:o.AFTER_GET_APPROVAL_PROCESS_MODEL_LIST,receivedData:e.data})})}},t.getSearchRunningJrCategoryDate=function(e,t,a){return function(r,n){(0,s.default)("getapprovalprocessdetailinfo","GET","detailInfoId="+t,function(t){(0,u.showMessage)(t)&&(0,s.default)("getApprovalCategoryList","GET","uuid="+e,function(e){if(0===e.code){var n=e.data,i=(n.categoryType?(0,g.getCategorynameByType)(n.categoryType):{categoryTypeObj:""}).categoryTypeObj,s=!!i&&n[i].beZeroInventory;r({type:o.GET_APPROVAL_PROCESS_DETAIL_INFO,receivedData:t.data,categoryData:n,datailList:[]}),t.data.jrAmount>0&&r(l("beZeroInventory",s)),a&&a()}else 70001===e.code?d.toast.info("原关联流水类别已被删除"):(0,u.showMessage)(e)})})}},t.disuseApprovalProcessDetailInfo=function(e,t){return function(a,r){if(!e.length)return d.toast.info("请选择流水");d.toast.loading(_.LOADING_TIP_TEXT,0),(0,s.default)("disuseapprovalprocessdetailinfo","POST",JSON.stringify({detailList:e}),function(e){if(0===e.code){e.data.length?d.Alert(e.data.join(";")):d.toast.info("操作成功");var n=r().searchApprovalState.getIn(["views","currentPageType"]);"ApprovalAll"===n?a(T({refresh:!0})):"Detail"===n&&a(C({refresh:!0})),t()}else(0,u.showMessage)(e)})}},t.cancelApprovalProcessDetailInfo=function(e,t){return function(a,r){if(!e.length)return d.toast.info("请选择流水");d.toast.loading(_.LOADING_TIP_TEXT,0),(0,s.default)("cancelapprovalprocessdetailinfo","POST",JSON.stringify({detailList:e}),function(e){if(d.toast.hide(),0===e.code){e.data.length?d.Alert(e.data.join(";")):d.toast.info("操作成功");var n=r().searchApprovalState.getIn(["views","currentPageType"]);"ApprovalAll"===n?a(T({refresh:!0})):"Detail"===n&&a(C({refresh:!0})),t()}else(0,u.showMessage)(e)})}},t.accountingApprovalProcessDetailInfo=function(e,t,a,r,n,o,i){return function(c,g){if(!e.size)return d.toast.info("请选择流水");if(!t)return d.toast.info("请选择挂账日期");if(a&&!(r&&r.size&&r.getIn([0,"relationCategoryUuid"])))return d.toast.info("请选择处理类别");var A=g().approalAccountState;return A.get("propertyCostList").size&&!o?d.toast.info("请选择费用性质"):!A.get("usedCarryoverProject")||n&&n.size&&n.getIn([0,"cardUuid"])?(d.toast.loading(_.LOADING_TIP_TEXT,0),void(0,s.default)("accountingapprovalprocessdetailinfo","POST",JSON.stringify({detailList:e,date:t,beCarryover:a,propertyCost:o,relationCategoryUuid:a?r.getIn([0,"relationCategoryUuid"]):"",carryoverProjectCardList:n}),function(e){if(d.toast.hide(),(0,u.showMessage)(e)){e.data.length&&d.Alert(e.data.join(";")),i();var t=g().searchApprovalState.getIn(["views","currentPageType"]);"ApprovalAll"===t?c(T({refresh:!0})):"Detail"===t&&c(C({refresh:!0}))}})):d.toast.info("请选择项目")}},t.payingApprovalProcessDetailInfo=function(e,t,a,r,n,o,i,c){return function(g,A){if(!e.size)return d.toast.info("请选择流水");if(!t||!t.get("accountUuid"))return d.toast.info("请选择账户");if(!a)return d.toast.info("请选择付款日期");if(r&&!(n&&n.size&&n.getIn([0,"relationCategoryUuid"])))return d.toast.info("请选择处理类别");var l=A().approalAccountState;return l.get("propertyCostList").size&&!i?d.toast.info("请选择费用性质"):!l.get("usedCarryoverProject")||o&&o.size&&o.getIn([0,"cardUuid"])?(d.toast.loading(_.LOADING_TIP_TEXT,0),void(0,s.default)("payingapprovalprocessdetailinfo","POST",JSON.stringify({account:t,detailList:e,date:a,beCarryover:r,propertyCost:i,relationCategoryUuid:r?n.getIn([0,"relationCategoryUuid"]):"",carryoverProjectCardList:o}),function(e){if(d.toast.hide(),(0,u.showMessage)(e)){e.data.length&&d.Alert(e.data.join(";")),c();var t=A().searchApprovalState.getIn(["views","currentPageType"]);"ApprovalAll"===t?g(T({refresh:!0})):"Detail"===t&&g(C({refresh:!0}))}})):d.toast.info("请选择项目")}},t.receiveApprovalProcessDetailInfo=function(e,t,a,r,n,o,i){return function(c,u){if(!n||!n.get("accountUuid"))return d.toast.info("请选择账户");if(!e.size)return d.toast.info("请选择流水");if(!t)return d.toast.info("请选择收款日期");var g=u().approalAccountState,A=g.get("poundageCurrentCardList"),l=g.get("poundageProjectCardList");return A.size&&!A.getIn([0,"cardUuid"])?d.toast.info("请选择往来单位"):l.size&&!l.getIn([0,"cardUuid"])?d.toast.info("请选择项目"):(d.toast.loading(_.LOADING_TIP_TEXT,0),void(0,s.default)("receiveapprovalprocessdetailinfo","POST",JSON.stringify({account:n,poundageCurrentCardList:A,poundageProjectCardList:l,detailList:e,date:t,beCover:a,amount:o,needUsedPoundage:r}),function(e){if(d.toast.hide(),0===e.code){e.data.length&&d.Alert(e.data.join(";")),i();var t=u().searchApprovalState.getIn(["views","currentPageType"]);"ApprovalAll"===t?c(T({refresh:!0})):"Detail"===t&&c(C({refresh:!0}))}}))}},t.bookKeepingApprovalProcessDetailInfo=function(e,t,a){return function(r,n){if(!e.size)return d.toast.info("请选择流水");if(!t)return d.toast.info("请选择收款日期");var o=n().approalAccountState,i=o.get("poundageCurrentCardList"),c=o.get("poundageProjectCardList"),u=o.get("handlingFeeType"),g=o.get("needUsedPoundage"),A=o.get("account");return i.size&&!i.getIn([0,"cardUuid"])?d.toast.info("请选择往来单位"):c.size&&!c.getIn([0,"cardUuid"])?d.toast.info("请选择项目"):(d.toast.loading(_.LOADING_TIP_TEXT,0),void(0,s.default)("bookkeepingapprovalprocessdetailinfo","POST",JSON.stringify({account:A,poundageCurrentCardList:i,poundageProjectCardList:c,detailList:e,date:t,needUsedPoundage:g,handlingFeeType:u}),function(e){if(d.toast.hide(),0===e.code){e.data.length&&d.Alert(e.data.join(";")),a();var t=n().searchApprovalState.getIn(["views","currentPageType"]);"ApprovalAll"===t?r(T({refresh:!0})):"Detail"===t&&r(C({refresh:!0}))}}))}},t.beforeEditApprovalProcessDetailInfo=function(e,t,a){return function(a,r){d.toast.loading(_.LOADING_TIP_TEXT,0),(0,s.default)("getapprovalprocessdetailinfo","GET","detailInfoId="+e,function(e){(0,u.showMessage)(e)?(0,s.default)("getApprovalCategoryList","GET","uuid="+e.data.jrCategoryUuid,function(r){var n=[];if(0===r.code){var i=r.data;if("预付账款"!==e.data.detailType&&"预收账款"!==e.data.detailType||-1!==i.propertyList.indexOf("GXZT_DJGL")||(e.data.jrCategoryUuid="",e.data.categoryName="",d.toast.info("关联的流水类别已停用预收/付")),a({type:o.GET_APPROVAL_PROCESS_DETAIL_INFO,receivedData:e.data,categoryData:i,datailList:n}),g.hideCategoryCanSelect.indexOf(e.data.jrCategoryType)>-1)"LB_CHDB"===i.categoryType&&a(S([],"hidecategory","",function(){}));else{var s=(e.data.jrCategoryType?(0,g.getCategorynameByType)(e.data.jrCategoryType):{categoryTypeObj:""}).categoryTypeObj;if(i.beProject){var c=i.projectRange;a(p(c,"project","",function(){}))}if(i[s].contactsManagement){var _=i[s].contactsRange;a(f(_,"contact","",function(){}))}if(!("SX_HW"!==i.propertyCarryover&&"SX_HW_FW"!==i.propertyCarryover||"销售存货套件"!==e.data.detailType&&"采购存货套件"!==e.data.detailType)){var A=i[s].stockRange;a(S(A,"stock","",function(){}))}!1===i.canUse&&d.toast.info("关联的流水类别已被停用")}t&&t()}else if(70001===r.code){e.data.jrCategoryUuid="",e.data.categoryName="",e.data.beContact=!1,e.data.beProject=!1,e.data.contactList=[],e.data.projectList=[];var l={propertyCostList:[],beProject:!1,allProjectRange:[]};l[(e.data.jrCategoryType?(0,g.getCategorynameByType)(e.data.jrCategoryType):{categoryTypeObj:""}).categoryTypeObj]={allContactsRange:[],canManagement:!1,allStockRange:[],stockRange:[],contactsManagement:!1,contactsRange:[]},a({type:o.GET_APPROVAL_PROCESS_DETAIL_INFO,receivedData:e.data,categoryData:l,datailList:n}),t&&t(),d.toast.info("原关联流水类别已被删除，请重新选择类别")}else(0,u.showMessage)(e);t&&t()}):d.toast.hide()})}},t.getApprovalProcessDetailInfo=function(e,t,a){return function(r,n){d.toast.loading(_.LOADING_TIP_TEXT,0),(0,s.default)("getapprovalprocessdetailinfo","GET","detailInfoId="+e,function(e){(0,u.showMessage)(e)?(0,s.default)("getApprovalCategoryList","GET","uuid="+e.data.jrCategoryUuid,function(i){var s=[];if("switch"!==a){var c=n().searchApprovalState,_=c.getIn(["views","currentPageType"]);"ApprovalAll"===_?c.get("approvalList").forEach(function(e){return e.get("detailList").forEach(function(e){return s.push(e)})}):"Detail"===_&&(s=c.get("detailList").toJS())}if(0===i.code)r({type:o.GET_APPROVAL_PROCESS_PREVIEW_DETAIL_INFO,receivedData:e.data,categoryData:i.data,datailList:s}),t(),"PROCESS_DISUSE"!==e.data.dealState&&!1===i.data.canUse&&d.toast.info("关联的流水类别已被停用");else if(70001===i.code){e.data.jrCategoryType="",e.data.jrCategoryUuid="",e.data.categoryName="",e.data.beContact=!1,e.data.beProject=!1,e.data.contactList=[],e.data.projectList=[];var A={propertyCostList:[],beProject:!1,allProjectRange:[]};A[(e.data.jrCategoryType?(0,g.getCategorynameByType)(e.data.jrCategoryType):{categoryTypeObj:""}).categoryTypeObj]={allContactsRange:[],canManagement:!1,allStockRange:[],stockRange:[],contactsManagement:!1,contactsRange:[]},r({type:o.GET_APPROVAL_PROCESS_PREVIEW_DETAIL_INFO,receivedData:e.data,categoryData:A,datailList:s}),t(),"PROCESS_DISUSE"!==e.data.dealState&&d.toast.info("原关联流水类别已被删除")}else(0,u.showMessage)(e)}):d.toast.hide()})}},t.getApprovalProjectCardList=function(e){return function(t,a){var r=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);e||(e=a().editRunningModalState.getIn(["categoryData","projectRange"])),(0,s.default)("getProjectCardList","POST",JSON.stringify({sobId:r,categoryList:e,needCommonCard:!0,needAssist:!0,needMake:!0,needIndirect:!0,needMechanical:!0}),function(e){(0,u.showMessage)(e)&&t(l("poundageProjectList",(0,c.fromJS)(e.data.result)))})}},t.getApprovalRelativeCardList=function(e){return function(t,a){var r=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);if(!e){var n=a().editRunningModalState.getIn(["categoryData","categoryType"]),o=(0,g.getCategorynameByType)(n).categoryTypeObj;e=a().editRunningModalState.getIn(["categoryData",o,"contactsRange"])}(0,s.default)("getCurrentCardList","POST",JSON.stringify({sobId:r,categoryList:e,property:"NEEDPAY"}),function(e){(0,u.showMessage)(e)&&t(l("poundageCurrentList",(0,c.fromJS)(e.data.result)))})}},t.getSearchApprovalCarryoverCategory=function(e){return function(t,a){d.toast.loading(_.LOADING_TIP_TEXT,0),(0,s.default)("getCostCategory","POST",JSON.stringify({oriDate:e,oriState:"STATE_YYSR_ZJ"}),function(e){(0,u.showMessage)(e)&&t(l("carryoverCategoryList",(0,c.fromJS)(e.data.categoryList))),d.toast.hide()})}},t.getSearchApprovalCarrayProjectCardList=function(e,t){return function(t,a){var r=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);d.toast.loading(_.LOADING_TIP_TEXT,0),(0,s.default)("getProjectCardList","POST",JSON.stringify({sobId:r,categoryList:e,needCommonCard:!0,needAssist:!0,needMake:!0,needIndirect:!0,needMechanical:!0}),function(e){if(d.toast.hide(),(0,u.showMessage)(e)){var r=a().editRunningModalState.getIn(["editRunningModalTemp","projectList"]);if(r.size>0){var n=e.data.result.find(function(e){return e.uuid===r.getIn([0,"uuid"])});if(n){"XZ_CONSTRUCTION"===n.projectProperty?"INDIRECT"===n.code?t(l("propertyCost","XZ_JJFY")):"MECHANICAL"===n.code?t(l("propertyCost","XZ_JXZY")):t(l("propertyCost","XZ_HTCB")):"XZ_PRODUCE"===n.projectProperty&&("ASSIST"===n.code?t(l("propertyCost","XZ_FZSCCB")):"MAKE"===n.code?t(l("propertyCost","XZ_ZZFY")):t(l("propertyCost","XZ_SCCB")));var o=r.getIn([0,"uuid"]),i=r.getIn([0,"name"]),s=r.getIn([0,"code"]);t(l("carryoverProjectCardList",(0,c.fromJS)([{cardUuid:o,name:i,code:s}]))),t(l("usedCarryoverProject",!0))}}else t(l("usedCarryoverProject",!1)),t(l("carryoverProjectCardList",(0,c.fromJS)([{}])));t(l("carryoverProjectList",(0,c.fromJS)(e.data.result)))}})}},t.changeApprovalProcessDetailInfoCategory=function(e,t,a,r){return function(n,i){d.toast.loading(_.LOADING_TIP_TEXT,0),(0,s.default)("getApprovalCategoryList","GET","uuid="+e,function(i){if(d.toast.hide(),(0,u.showMessage)(i)){var s=i.data,_=(0,g.getCategorynameByType)(t).categoryTypeObj;r=r.set("jrCategoryUuid",e).set("jrCategoryType",t).set("categoryName",a);var A=s.propertyCostList;if("XSFY"!==r.get("jrCostType")&&"GLFY"!==r.get("jrCostType")&&"CWFY"!==r.get("jrCostType")&&""!==r.get("jrCostType")||(A.length>0?1===A.length?"XZ_MANAGE"===A[0]?r=r.set("jrCostType","GLFY"):"XZ_SALE"===A[0]?r=r.set("jrCostType","XSFY"):"XZ_FINANCE"===A[0]&&(r=r.set("jrCostType","CWFY")):2===A.length&&"CWFY"===r.get("jrCostType")&&(r=r.set("jrCostType","XSFY")):r=r.set("jrCostType","")),s[_].contactsManagement){var l=s[_].contactsRange;n(f(l,"contact","",function(){}))}else r=r.set("beContact",!1).set("contactList",(0,c.fromJS)([]));if(s.beProject){var E=s.projectRange;n(p(E,"project","",function(){}))}else r=r.set("beProject",!1).set("projectList",(0,c.fromJS)([])).set("jrCostType","");if("SX_HW"!==s.propertyCarryover&&"SX_HW_FW"!==s.propertyCarryover||"销售存货套件"!==r.get("detailType")&&"采购存货套件"!==r.get("detailType"))r=r.set("stockList",(0,c.fromJS)([]));else{var T=s[_].stockRange;n(S(T,"stock","",function(){}))}n({type:o.CHANGE_APPROVAL_PROCESS_DETAIL_INFO_CATEGORY,editRunningModalTemp:r,categoryData:s})}})}},t.getRelativeAllCardList=function(e,t,a,r){return function(t,n){var o=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);if(!e){var i=n().editRunningModalState.get("editRunningModalTemp"),A=n().editRunningModalState.get("categoryData"),l=i.get("jrCategoryType"),T=(0,g.getCategorynameByType)(l).categoryTypeObj;e=A.getIn([T,"contactsRange"])}a||(0,s.default)("getCurrentTree","POST",JSON.stringify({sobId:o,categoryList:e}),function(e){(0,u.showMessage)(e)&&t(E("","contactSourceCategoryList",(0,c.fromJS)(e.data.typeList)))});d.toast.loading(_.LOADING_TIP_TEXT,0),(0,s.default)("getCurrentCardList","POST",JSON.stringify({sobId:o,categoryList:e,property:"NEEDPAY"}),function(e){d.toast.hide(),(0,u.showMessage)(e)&&(t(E("","contactSourceCardList",(0,c.fromJS)(e.data.result))),t(E("","allContactList",(0,c.fromJS)(e.data.result))),r&&r())})}}),p=(t.getRelativeSomeCardList=function(e,t){return function(a,r){var n=r().homeState.getIn(["data","userInfo","sobInfo","sobId"]);1==t?(0,s.default)("getCurrentListByCategory","POST",JSON.stringify({sobId:n,categoryUuid:e,listByCategory:!0,property:"NEEDPAY",subordinateUuid:""}),function(e){(0,u.showMessage)(e)&&a(E("","contactSourceCardList",(0,c.fromJS)(e.data.resultList)))}):(0,s.default)("getCurrentListByCategory","POST",JSON.stringify({sobId:n,subordinateUuid:e,property:"NEEDPAY",listByCategory:!1,categoryUuid:""}),function(e){(0,u.showMessage)(e)&&a(E("","contactSourceCardList",(0,c.fromJS)(e.data.resultList)))})}},t.getProjectAllCardList=function(e,t,a,r){return function(t,n){d.toast.loading(_.LOADING_TIP_TEXT,0);var o=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);if(!e){var i=n().editRunningModalState.get("categoryData");e=i.get("projectRange")}a||(0,s.default)("getProjectTreeList","POST",JSON.stringify({sobId:o,categoryList:e}),function(e){(0,u.showMessage)(e)&&t(E("","projectSourceCategoryList",(0,c.fromJS)(e.data.typeList)))}),(0,s.default)("getProjectCardList","POST",JSON.stringify({sobId:o,categoryList:e,needCommonCard:!0,needAssist:!0,needMake:!0,needIndirect:!0,needMechanical:!0}),function(e){d.toast.hide(),(0,u.showMessage)(e)&&(t(E("","projectSourceCardList",(0,c.fromJS)(e.data.result))),t(E("","allProjectList",(0,c.fromJS)(e.data.result))),r&&r())})}}),S=(t.getProjectSomeCardList=function(e,t){return function(a,r){var n=r().homeState.getIn(["data","userInfo","sobInfo","sobId"]);1==t?(0,s.default)("getProjectSubordinateCardList","POST",JSON.stringify({sobId:n,categoryUuid:e,listByCategory:!0,subordinateUuid:""}),function(e){(0,u.showMessage)(e)&&a(E("","projectSourceCardList",(0,c.fromJS)(e.data.resultList)))}):(0,s.default)("getProjectSubordinateCardList","POST",JSON.stringify({sobId:n,subordinateUuid:e,listByCategory:!1,categoryUuid:e}),function(e){(0,u.showMessage)(e)&&a(E("","projectSourceCardList",(0,c.fromJS)(e.data.resultList)))})}},t.getStockAllCardList=function(e,t,a,r){return function(n,i){var A=i().homeState.getIn(["data","userInfo","sobInfo","sobId"]);if(!e){var l=i().editRunningModalState.get("editRunningModalTemp"),T=i().editRunningModalState.get("categoryData"),C=l.get("jrCategoryType"),f=(0,g.getCategorynameByType)(C).categoryTypeObj;e=T.getIn([f,"stockRange"])}a||((0,s.default)("getStockCategoryTree","POST",JSON.stringify({sobId:A,categoryList:e}),function(e){(0,u.showMessage)(e)&&n(E("","invetorySourceCategoryList",(0,c.fromJS)(e.data.typeList)))}),i().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1&&(0,s.default)("getWarehouseList","GET","",function(e){(0,u.showMessage)(e)&&n({type:o.SEARCH_APPROVAL_GET_APPROVAL_WAREHOUSE_CARD_LIST,receivedData:e.data.cardList})}));d.toast.loading(_.LOADING_TIP_TEXT,0);var p="hidecategory"==t?{sobId:A,isUniform:null,openQuantity:!1,property:"0",categoryList:[]}:{sobId:A,categoryList:e,property:"5"};(0,s.default)("getStockCardList","POST",JSON.stringify(p),function(e){(0,u.showMessage)(e)&&(n(E("","invetorySourceCardList",(0,c.fromJS)(e.data.result))),n(E("","allInvetoryList",(0,c.fromJS)(e.data.result))),r&&r()),d.toast.hide()})}}),L=(t.getStockSomeCardList=function(e,t){return function(a,r){var n=r().homeState.getIn(["data","userInfo","sobInfo","sobId"]);1==t?(0,s.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:n,categoryUuid:e,listByCategory:!0,subordinateUuid:"",property:"5"}),function(e){(0,u.showMessage)(e)&&a(E("","invetorySourceCardList",(0,c.fromJS)(e.data.resultList)))}):(0,s.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:n,subordinateUuid:e,listByCategory:!1,categoryUuid:"",property:"5"}),function(e){(0,u.showMessage)(e)&&a(E("","invetorySourceCardList",(0,c.fromJS)(e.data.resultList)))})}},t.modifyApprovalProcessDetailInfo=function(e,t){return function(a,r){if(""===e.get("jrCategoryUuid"))return d.toast.info("流水类别必选");if(""===e.get("jrAmount"))return d.toast.info("金额必填");if(["LB_ZZ"].indexOf(e.get("jrCategoryType"))>-1&&e.get("jrAmount")<0)return d.toast.info("金额仅支持输入正数");if("bill_other"!==e.getIn(["billList",0,"billType"])&&""==e.getIn(["billList",0,"tax"]))return d.toast.info("税额必填");var n=(e=e.update("stockList",function(e){return e.filter(function(e){return e.get("stockUuid")})})).get("stockList");return r().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1&&n.some(function(e){return!e.get("depotUuid")})&&"LB_CHDB"!==e.get("jrCategoryType")?d.toast.info("仓库必选"):g.hideCategoryCanSelect.indexOf(e.get("jrCategoryType"))>-1&&n.some(function(e){return!e.get("amount")})?d.toast.info("存货金额必填"):(0==e.get("beProject")&&(e=e.set("projectList",(0,c.fromJS)([]))),0==e.get("beContact")&&(e=e.set("contactList",(0,c.fromJS)([]))),d.toast.loading(_.LOADING_TIP_TEXT,0),void(0,s.default)("modifyapprovalprocessdetailinfo","POST",JSON.stringify(e),function(e){d.toast.hide(),(0,u.showMessage)(e)&&(a(T({refresh:!0})),t())}))}},t.changeApprovalProcessDetailInfoCommonString=function(e,t){return{type:o.CHANGE_APPROVAL_PROCESS_DETAIL_INFO_COMMON_STRING,place:e,value:t}}),I=t.searchApprovalChangeRunningTaxRate=function(e,t){return{type:o.SEARCH_APPROVAL_CHANGE_RUNNING_TAX_RATE,value:e,amount:t}},R=(t.getBusinessManagerModal=function(e,t,a,r){return function(i,d){i({type:o.SWITCH_LOADING_MASK});var _=d().allState.get("hideCategoryList");if(!_.size)return message.info("设置数据未加载完全，请刷新");var g=_.find(function(e){return"LB_SFGL"===e.get("categoryType")}).get("uuid"),A=t.get("jrJvUuid"),l=t.get("jrOriUuid"),E=e.get("jrCategoryUuid"),T=t.get("oriDate")?t.get("oriDate").substr(0,10):"";(0,s.default)("getJrOri","GET","oriUuid="+l,function(e){if(i({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(e)){var t=e.data.jrOri,s=t.notHandleAmount,d=t.oriState;r=s<0?"debit"===r?"credit":"debit":"credit"===r&&"STATE_YYZC_TG"!==d&&"STATE_YYZC_DJ"!==d&&"STATE_FY_DJ"!==d&&"STATE_SF_YJZZS"!==d?"credit":"debit";var _=(0,c.fromJS)(n({},e.data.jrOri,e.data.category)).set("magenerType",r),l=(0,c.fromJS)({oriDate:(0,u.formatDate)().substr(0,10)}).set("pendingManageDto",(0,c.fromJS)({categoryUuid:E,pendingManageList:[{uuid:A,beOpened:!1,oriDate:T}]})).set("amount",Math.abs(e.data.jrOri.notHandleAmount)).set("oriAbstract","核销账款").set("beOpened",!1).set("categoryUuid",g);i({type:o.BEFORE_INSERT_APPROVAL_CALCULATE,runningFlowTemp:_,modalTemp:l}),a()}})}},t.getBusinessGrantModal=function(e,t,a,r){return function(r,i){r({type:o.SWITCH_LOADING_MASK});var d=t.get("jrOriUuid");(0,s.default)("getJrOri","GET","oriUuid="+d,function(i){if(r({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(i)){var s=n({},i.data.jrOri,i.data.category),d=(t.get("jrAmount")-(t.get("tax")||0)).toFixed(2),_=s.notHandleAmount<0?"debit":"credit";s.magenerType=_;var g=(0,c.fromJS)(s),A=(0,c.fromJS)({oriDate:(0,u.formatDate)().substr(0,10),oriState:"STATE_XC_FF",categoryUuid:s.categoryUuid,oriAbstract:{SX_GZXJ:"发放工资薪金",SX_FLF:"支付"+s.categoryName,SX_QTXC:"发放"+s.categoryName}[s.propertyPay],amount:Math.abs(s.notHandleAmount),payment:{actualAmount:Math.abs(s.notHandleAmount)},pendingStrongList:[{jrJvUuid:t.get("jrJvUuid"),jrIndex:s.jrIndex,oriDate:e.get("oriDate"),beSelect:!0,amount:d}]}),l=(0,u.formatDate)().substr(0,10);s.oriDate>l&&(A=A.set("oriDate",s.oriDate)),r({type:o.BEFORE_INSERT_APPROVAL_CALCULATE,runningFlowTemp:g,modalTemp:A}),a()}})}},t.insertCommonModal=function(e,t,a,r){return function(t,a){var i=a().approalCalculateState,d=(i.get("runningFlowTemp"),i.get("modalTemp").toJS());if(d.oriAbstract.length>45)message.info("摘要不得大于45个字");else{var _=a().searchRunningAllState.get("enclosureList");t({type:o.SWITCH_LOADING_MASK}),(0,s.default)(r,"POST",JSON.stringify(n({},d,{enclosureList:_})),function(a){t({type:o.SWITCH_LOADING_MASK}),(0,u.showMessage)(a,"show")&&(e(),t(l("modalTemp",(0,c.fromJS)({oriDate:(0,u.formatDate)().substr(0,10)}))),t(T({refresh:!0})))})}}},t.searchApproalBillchange=function(e){return function(t,a){var r=a().editRunningModalState,n=a().allState.get("taxRate"),i=n.get("outputRate"),s=n.get("payableRate"),c=n.get("scale"),u=r.getIn(["editRunningModalTemp","jrAmount"])||0,d=void 0;d="general"===c?i:s;var _=(Number(u)/(1+Number(d)/100)*Number(d)/100).toFixed(2);t({type:o.CHANGE_SEARCH_APPROAL_EDIT_BILL_STATES,billState:e,taxRate:d,tax:_})}},t.clearSearchApprovalTemp=function(){return{type:o.CLEAR_SEARCH_APPROVAL_TEMP}},t.autoCalculateStockAmount=function(){return function(e,t){var a=t().editRunningModalState.getIn(["editRunningModalTemp","stockList"]).reduce(function(e,t){return(100*e+100*(t.get("amount")&&"."!==t.get("amount")?Number(t.get("amount")):0))/100},0);e(E("editRunningModalTemp","jrAmount",a.toFixed(2)))}}),y=(t.deleteSearchApprovalStock=function(e,t,a){return function(r){var n=e.toJS();n.splice(t,1),r(E("editRunningModalTemp","stockList",(0,c.fromJS)(n))),r(R()),a&&r(I(a))}},t.deleteSearchApprovalCarrayover=function(e,t){return function(a){var r=e.toJS();r.splice(t,1),a(E("editRunningModalTemp","carryoverCardList",(0,c.fromJS)(r)))}},t.addSearchApprovalStock=function(e,t){return function(a){var r=e.toJS();r.splice(t+1,0,{amount:"",stockUuid:""}),a(E("editRunningModalTemp","stockList",(0,c.fromJS)(r)))}},t.addSearchApprovalCarrayover=function(e,t){return function(a){var r=e.toJS();r.push({amount:"",stockUuid:"",index:t}),a(E("editRunningModalTemp","carryoverCardList",(0,c.fromJS)(r)))}},t.getInventoryAllCardList=function(e,t,a){return function(r,n){r({type:o.SWITCH_LOADING_MASK});var i=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);a||(0,s.default)("getStockCardList","POST",JSON.stringify({sobId:i,categoryList:e}),function(e){(0,u.showMessage)(e)&&r(l("MemberList",(0,c.fromJS)(e.data.typeList)))}),(0,s.default)("getStockCategoryList","POST",JSON.stringify({sobId:i,categoryList:e,property:"5"}),function(e){(0,u.showMessage)(e)&&(r(l("selectThingsList",(0,c.fromJS)(e.data.result))),r(l("thingsList",(0,c.fromJS)(e.data.result))),r(l(["views",t],!0))),r({type:o.SWITCH_LOADING_MASK})})}},t.getInventorySomeCardList=function(e,t){return function(a,r){var n=r().homeState.getIn(["data","userInfo","sobInfo","sobId"]);1==t?(0,s.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:n,categoryUuid:e,listByCategory:!0,subordinateUuid:"",property:"5"}),function(e){(0,u.showMessage)(e)&&(a(l("thingsList",(0,c.fromJS)(e.data.resultList))),a(l("selectThingsList",(0,c.fromJS)(e.data.resultList))))}):(0,s.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:n,subordinateUuid:e,listByCategory:!1,categoryUuid:"",property:"5"}),function(e){(0,u.showMessage)(e)&&(a(l("thingsList",(0,c.fromJS)(e.data.resultList))),a(l("selectThingsList",(0,c.fromJS)(e.data.resultList))))})}},t.chargeSearchApprovalItemCheckboxCheck=function(e,t,a,r,n){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{unitList:[]};return{type:o.CHARGE_SEARCH_APPROVAL_ITEM_CHECKBOX_CHECK,checked:e,uuid:t,name:r,code:a,isOpenQuantity:n,unitPriceList:i,unit:s}});t.chargeSearchApprovalItemCheckboxCheckAll=function(e,t,a){return function(r){t.map(function(t){var n=a.find(function(e){return e.get("uuid")===t.uuid}).toJS(),o=n.uuid,i=n.code,s=n.name,c=n.isOpenQuantity,u=n.unitPriceList,d=n.unit;r(y(e,o,i,s,c,u,d))})}},t.changeSearchApprovalCommonChargeInvnetory=function(e,t){return function(a,r){var n=t;n=n.map(function(e,t){if(e.stockUuid=e.uuid,e.stockCode=e.code,e.stockName=e.cardName,e.unitPriceList&&e.unitPriceList.length){var a="",r="";e.unit.uuid===e.unitPriceList[0].unitUuid?(r=e.unit.name,a=e.unit.uuid):e.unit.unitList.map(function(t){t.uuid===e.unitPriceList[0].unitUuid&&(r=t.cardName,a=t.uuid)}),Object.assign(e,{unitPrice:e.unitPriceList[0].defaultPrice,unitUuid:a,unitName:r})}else e.unit&&!e.unit.unitList.length&&Object.assign(e,{unitUuid:e.unit.uuid,unitName:e.unit.name});return e}),a(E("editRunningModalTemp","stockList",e.concat((0,c.fromJS)(n))))}},t.getSearchApprovalAccountRunningCate=function(e){return function(t,a){(0,s.default)("getRunningDetail","GET","uuid="+e,function(e){if((0,u.showMessage)(e)){var a=e.data.result.projectRange,r=e.data.result.acCost.contactsRange;t(l("accountProjectRange",(0,c.fromJS)(a))),t(l("accountContactsRange",(0,c.fromJS)(r)))}})}},t.getSearchApprovalChdbPrice=function(e,t){return function(a,r){var n=r().editRunningModalState,o=n.getIn(["editRunningModalTemp","jrDate"]),i=n.getIn(["editRunningModalTemp","outputDepot","uuid"]),_=[];t.forEach(function(e,t){var a=e.uuid;_.push({cardUuid:a,storeUuid:i})}),d.toast.loading("加载中...",0),(0,s.default)("getChdbPrice","POST",JSON.stringify({oriDate:o,stockPriceList:_}),function(r){if(d.toast.hide(),(0,u.showMessage)(r)){0==r.data[0].price||(0,u.decimal)(r.data[0].price,4);var o=n.getIn(["editRunningModalTemp","stockList"]).toJS(),i=t.length;o.forEach(function(t,a){if(a>=e&&a<=e+i-1){var n=a-e,o=0==r.data[n].price?"":r.data[n].price;t.unitPrice=o,t.amount=""}}),a(L("stockList",(0,c.fromJS)(o)))}})}},t.getSearchApprovalChdbPriceAll=function(e,t){return function(a,r){var n=r().editRunningModalState.getIn(["editRunningModalTemp","stockList"]);if(t){var o=[];n.forEach(function(e,a){e.get("isOpenedQuantity")&&e.get("stockUuid")&&o.push({storeUuid:t,cardUuid:e.get("stockUuid")})}),0!=o.length&&(d.toast.loading("加载中...",0),(0,s.default)("getChdbPrice","POST",JSON.stringify({oriDate:e,stockPriceList:o}),function(e){if(d.toast.hide(),(0,u.showMessage)(e)){var t=n.toJS();t.forEach(function(t,a){var r=!0,n=!1,o=void 0;try{for(var i,s=e.data[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;if(t.cardUuid==c.cardUuid){var d=0==c.price?"":(0,u.decimal)(c.price,4),_="",g=t.quantity;d&&g&&(_=(0,u.decimal)(Number(d)*Number(g))),t.price=d,t.unitPrice=d,t.amount=_;break}}}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}}),a(L("stockList",(0,c.fromJS)(t)))}}))}}}},1218:function(e,t,a){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.formatCommonCardList=t.formatWarehouseCardList=t.getSelectJrCategoryChildList=t.componentName=t.getSelectJrCategoryList=t.formDiyList=t.hideCategoryCanSelect=t.systemProJectCodeCommon=t.receiptList=t.propertyCostNameJson=t.numberTest=t.regNegative=t.reg=void 0,t.getCategorynameByType=function(e){var t=void 0,a=void 0,r="debit",n=!1,o=!1;return({LB_YYSR:function(){t="营业收入",a="acBusinessIncome"},LB_YYZC:function(){t="营业支出",a="acBusinessExpense",r="credit"},LB_YYWSR:function(){t="营业外收入",a="acBusinessOutIncome",n=!0,r="debit"},LB_YYWZC:function(){t="营业外支出",a="acBusinessOutExpense",r="credit",n=!0,r="credit"},LB_JK:function(){t="借款",a="acLoan",o=!0},LB_TZ:function(){t="投资",a="acInvest",o=!0},LB_ZB:function(){t="资本",a="acCapital",o=!0},LB_CQZC:function(){t="长期资产",a="acAssets",r="debit"},LB_FYZC:function(){t="费用支出",a="acCost",r="credit"},LB_ZSKX:function(){t="暂收款项",a="acTemporaryReceipt",n=!0},LB_ZFKX:function(){t="暂付款项",a="acTemporaryPay",n=!0},LB_XCZC:function(){t="薪酬支出",a="acPayment",r="credit",o=!0},LB_SFZC:function(){t="税费支出",a="acTax",r="credit",o=!0}}[e]||function(){return""})(),{propertyShow:t,categoryTypeObj:a,direction:r,showInvoice:!1,isShowAbout:n,specialState:o}};var n=i(a(25)),o=(a(9),i(a(10)));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=t.reg=/^\d{0,14}(\.\d{0,2})?$/,u=t.regNegative=/^-{0,1}\d{0,14}(\.\d{0,2})?$/,d=(t.numberTest=function(e,t,a){void 0!==e&&(0===(e=(e=e.indexOf("。")>-1?e.replace("。","."):e).replace(/,/g,"")).indexOf("0")&&"0"!=e&&e>=1&&(e=e.substr(1)),0!==e.indexOf("-")||a?(a?u.test(e):c.test(e))?t(e):o.toast.info("金额只能输入小于14位数两位小数的数字"):o.toast.info("金额仅支持输入正数"))},s(r={TextField:"单行输入框",TextareaField:"多行输入框",MoneyField:"金额",NumberField:"数字输入框",DDDateField:"日期",DDDateRangeField:"日期区间",TableField:"明细",DDSelectField:"单选框"},"NumberField","数字输入框"),s(r,"DDMultiSelectField","多选框"),s(r,"DDPhotoField","图片"),s(r,"DDAttachment","附件"),s(r,"InnerContactField","联系人"),s(r,"RelateField","关联审批单"),r);t.propertyCostNameJson={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用",XZ_FINANCE:"财务费用",XZ_SCCB:"生产成本",XZ_FZSCCB:"辅助生产成本",XZ_ZZFY:"制造费用",XZ_HTCB:"合同成本",XZ_JJFY:"间接费用",XZ_JXZY:"机械作业"},t.receiptList=["LB_YYSR","LB_YYWSR","LB_ZSKX"],t.systemProJectCodeCommon=["COMNCRD","ASSIST","MAKE","INDIRECT","MECHANICAL"],t.hideCategoryCanSelect=["LB_ZZ","LB_CHDB"];t.formDiyList=[{componentId:"TextField-ZJ7A8B4F",componentType:"TextField",label:"单行输入框",placeHolder:"请输入",required:!1,print:!0,orderValue:0,canDelete:!1,canModify:!1},{componentId:"TextareaField-ZJ266CC0",componentType:"TextareaField",label:"多行输入框",placeHolder:"请输入",required:!1,print:!0,orderValue:1,canDelete:!1,canModify:!1},{componentId:"MoneyField-ZJ8BB160",componentType:"MoneyField",label:"金额（元）",placeHolder:"请输入金额",required:!1,print:!0,orderValue:2,canDelete:!1,canModify:!1,jrComponentType:"",upper:!0},{componentId:"NumberField-ZJ00C292",componentType:"NumberField",label:"数字输入框",placeHolder:"请输入数字",required:!1,print:!0,orderValue:3,canDelete:!1,canModify:!1,unit:""},{componentId:"DDSelectField-ZJ8336F7",componentType:"DDSelectField",label:"单选框",placeHolder:"请选择",required:!1,print:!0,orderValue:5,canDelete:!1,canModify:!1,jrComponentType:"",options:!0,selectValueList:["","",""]},{componentId:"DDMultiSelectField-ZJFC8D72",componentType:"DDMultiSelectField",label:"多选框",placeHolder:"请选择",required:!1,print:!0,orderValue:6,canDelete:!1,canModify:!1,options:!0,selectValueList:["","",""]},{componentId:"DDDateField-ZJ6A1E0B",componentType:"DDDateField",label:"日期",placeHolder:"请选择",required:!1,print:!0,orderValue:7,canDelete:!1,canModify:!1,jrComponentType:"",unit:"小时",dateFormat:"yyyy-MM-dd hh:mm"},{componentId:"DDDateRangeField-ZJC5DC4E",componentType:"DDDateRangeField",label:"",placeHolder:"请选择",required:!1,print:!0,orderValue:8,canDelete:!1,canModify:!1,dateRangeLabelFirst:"开始时间",dateRangeLabelLast:"结束时间",unit:"小时",dateFormat:"yyyy-MM-dd hh:mm"},{componentId:"DDPhotoField-ZJFA1A3A",componentType:"DDPhotoField",label:"图片",placeHolder:"",required:!1,print:!0,orderValue:10,canDelete:!1,canModify:!1},{componentId:"DDAttachment-ZJ1C8978",componentType:"DDAttachment",label:"附件",placeHolder:"",required:!1,print:!0,orderValue:11,canDelete:!1,canModify:!1},{componentId:"InnerContactField-ZJ6A8FA0",componentType:"InnerContactField",label:"联系人",placeHolder:"请选择",required:!1,print:!0,orderValue:12,canDelete:!1,canModify:!1,choice:!1,jrComponentType:""}],t.getSelectJrCategoryList=function(e,t,a,r){if(e&&e.getIn([0,"childList"]).size>0){var n=["LB_YYSR","LB_YYZC","LB_FYZC","LB_XCZC","LB_YYWSR","LB_YYWZC","LB_ZSKX","LB_ZFKX"];"RECEIPT"===r.payOrReceive?(n=["LB_YYSR","LB_YYWSR"],r.isStock&&(n=["LB_YYSR"]),"LB_ZSKX"===r.jrCategoryType&&(n=["LB_ZSKX"]),r.isDJ&&(n=["LB_YYSR"])):"PAYMENT"===r.payOrReceive&&(n=["LB_YYZC","LB_FYZC","LB_XCZC","LB_YYWZC"],r.isStock&&(n=["LB_YYZC"]),"LB_ZFKX"===r.jrCategoryType&&(n=["LB_ZFKX"]),r.isDJ&&(n=["LB_YYZC","LB_FYZC"]));var o=e.getIn([0,"childList"]).filter(function(e){return n.indexOf(e.get("categoryType"))>-1}),i=o.findIndex(function(e){return"LB_YYSR"===e.get("categoryType")});i>-1&&r.payOrReceive&&(o=r.isStock?o.updateIn([i,"childList"],function(e){return e.filter(function(e){return"SX_HW"==e.get("propertyCarryover")||"SX_HW_FW"==e.get("propertyCarryover")})}):r.isDJ?o.updateIn([i,"childList"],function(e){return e.filter(function(e){return e.get("propertyList").indexOf("GXZT_DJGL")>-1})}):o.updateIn([i,"childList"],function(e){return e.filter(function(e){return"SX_FW"==e.get("propertyCarryover")||"SX_HW_FW"==e.get("propertyCarryover")})}));var s=o.findIndex(function(e){return"LB_YYZC"===e.get("categoryType")});s>-1&&r.payOrReceive&&(o=r.isStock?o.updateIn([s,"childList"],function(e){return e.filter(function(e){return"SX_HW"==e.get("propertyCarryover")})}):r.isDJ?o.updateIn([s,"childList"],function(e){return e.filter(function(e){return e.get("propertyList").indexOf("GXZT_DJGL")>-1})}):o.updateIn([s,"childList"],function(e){return e.filter(function(e){return"SX_FW"==e.get("propertyCarryover")})}));var c=o.findIndex(function(e){return"LB_XCZC"===e.get("categoryType")});c>-1&&(o=o.updateIn([c,"childList"],function(e){return e.filter(function(e){return"SX_FLF"==e.get("propertyPay")||"SX_QTXC"==e.get("propertyPay")})}));var u=o.findIndex(function(e){return"LB_FYZC"===e.get("categoryType")});return u>-1&&r.payOrReceive&&r.isDJ&&(o=o.updateIn([u,"childList"],function(e){return e.filter(function(e){return e.get("propertyList").indexOf("GXZT_DJGL")>-1})})),o.toJS()}return[]},t.componentName=d,t.getSelectJrCategoryChildList=function(e,t,a){if(t&&t.getIn([0,"childList"]).size>0&&e){var r=["LB_YYSR","LB_YYZC","LB_FYZC","LB_XCZC","LB_YYWSR","LB_YYWZC"],o=t.getIn([0,"childList"]).filter(function(e){return r.indexOf(e.get("categoryType"))>-1}),i=o.findIndex(function(e){return"LB_FYZC"===e.get("categoryType")});if(i>-1){var s=o.getIn([i,"childList"]).find(function(e){return"XZ_FINANCE"===e.getIn(["propertyCostList",0])});s&&(o=o.update(function(e){return e.set(e.size,s)}).updateIn([i,"childList"],function(e){return e.filter(function(e){return"XZ_FINANCE"!==e.getIn(["propertyCostList",0])})}))}var c=o.findIndex(function(e){return"LB_XCZC"===e.get("categoryType")});c>-1&&(o=o.updateIn([c,"childList"],function(e){return e.filter(function(e){return"SX_FLF"==e.get("propertyPay")||"SX_QTXC"==e.get("propertyPay")})}));var u=[];!function t(a){for(var r=0;r<a.length;r++){var n=a[r].childList;if(a[r].uuid===e){u=a[r].childList;break}n&&n.length&&t(a[r].childList)}}(o.toJS());var d=[];return function e(t,a){return t.forEach(function(t){var r=t.childList;r&&r.length?e(r,a?a+"_"+t.name:t.name):d.push(t.uuid+n.APPROVAL_JOIN_STR+""+(a?a+"_"+t.name:t.name))})}(u,""),d}return[]},t.formatWarehouseCardList=function(e){if(e.size&&e.getIn([0,"childList"]).size>0)return function e(t,a){return t.map(function(t){var r=t.childList;return r&&r.length?{title:t.code+n.APPROVAL_JOIN_STR+t.name,value:t.uuid+n.TREE_JOIN_STR+t.code+n.TREE_JOIN_STR+""+(a?a+"_"+t.name:t.name),key:t.uuid,children:e(r,a?a+"_"+t.name:t.name)}:{title:t.code+n.APPROVAL_JOIN_STR+t.name,value:t.uuid+n.TREE_JOIN_STR+t.code+n.TREE_JOIN_STR+""+(a?a+"_"+t.name:t.name),disabled:!1,key:t.uuid}})}(e.getIn([0,"childList"]).toJS(),"");return[]},t.formatCommonCardList=function(e){return e.toJS().map(function(e){return{title:e.code+n.APPROVAL_JOIN_STR+e.name,value:e.uuid+n.TREE_JOIN_STR+e.code+n.TREE_JOIN_STR+e.name,disabled:!1,key:e.uuid}})}},1300:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_RELATIVE_CONF="INIT_RELATIVE_CONF",t.CHANGE_RELATIVE_CONTENT="CHANGE_RELATIVE_CONTENT",t.CHANGE_RELATIVE_CONTENT_AC="CHANGE_RELATIVE_CONTENT_AC",t.GET_RELATIVE_CARD="GET_RELATIVE_CARD",t.BEFORE_ADD_NEW_MANAGE_TYPE="BEFORE_ADD_NEW_MANAGE_TYPE",t.GET_RELATIVE_LIST_TITLE="GET_RELATIVE_LIST_TITLE",t.GET_RELATIVE_LIST_BY_TYPE="GET_RELATIVE_LIST_BY_TYPE",t.CHANGE_RELATIVE_TYPE_BOX_CHECKED="CHANGE_RELATIVE_TYPE_BOX_CHECKED",t.GET_RELATIVE_TYPE_CONTENT="GET_RELATIVE_TYPE_CONTENT",t.CHANGE_RELATIVE_TYPE_CONTENT="CHANGE_RELATIVE_TYPE_CONTENT",t.CHANGE_RELATIVE_TYPE_SELECT="CHANGE_RELATIVE_TYPE_SELECT",t.IUMANGE_TYPE_DELETE_BTN_SHOW="IUMANGE_TYPE_DELETE_BTN_SHOW",t.SAVE_RELATIVE_TYPE="SAVE_RELATIVE_TYPE",t.INSERT_RELATIVE_TYPE="INSERT_RELATIVE_TYPE",t.EDIT_RELATIVE_TYPE="EDIT_RELATIVE_TYPE",t.CANCLE_RELATIVE_TYPE_BTN="CANCLE_RELATIVE_TYPE_BTN",t.CHANGE_RELATIVE_TYPE_POSITION="CHANGE_RELATIVE_TYPE_POSITION",t.ADJUST_RELATIVE_CARD_TYPE_LIST="ADJUST_RELATIVE_CARD_TYPE_LIST",t.CHANGE_RELATIVE_CARD_CONTENT="CHANGE_RELATIVE_CARD_CONTENT",t.BEFORE_ADD_MANAGE_TYPE_CARD="BEFORE_ADD_MANAGE_TYPE_CARD",t.CHANGE_MANAGE_CARD_RELATION="CHANGE_MANAGE_CARD_RELATION",t.CHANGE_MANAGE_CARD_RELATION_TYPE="CHANGE_MANAGE_CARD_RELATION_TYPE",t.CHANGE_RELATIVE_CARD_AC="CHANGE_RELATIVE_CARD_AC",t.CHANGE_RELATIVE_UNDEFINE_CARD_AC="CHANGE_RELATIVE_UNDEFINE_CARD_AC",t.SAVE_RELATIVE_TYPE_CARD="SAVE_RELATIVE_TYPE_CARD",t.DELETE_RELATIVE_TYPE="DELETE_RELATIVE_TYPE",t.CONFIRM_DELETE_RELATIVE_TYPE="CONFIRM_DELETE_RELATIVE_TYPE",t.DELETE_RELATIVE_LIST_CARD="DELETE_RELATIVE_LIST_CARD",t.CHECK_RELATIVE_LIST_CARD_BOX="CHECK_RELATIVE_LIST_CARD_BOX",t.SELECT_RELATIVE_CARD_ALL="SELECT_RELATIVE_CARD_ALL",t.GET_RELATIVE_LIST_BY_SON_TYPE="GET_RELATIVE_LIST_BY_SON_TYPE",t.SWITCH_CARD_STATUS="SWITCH_CARD_STATUS",t.RELATIVE_CONFIG_ADD_CARD_SHOW_MODAL="RELATIVE_CONFIG_ADD_CARD_SHOW_MODAL",t.CHANGE_RELATIVE_CONF_CARD_SELECT_LIST="CHANGE_RELATIVE_CONF_CARD_SELECT_LIST",t.CHANGE_RELATIVE_CONF_HIGHT_TYPE_BOX_STATUS="CHANGE_RELATIVE_CONF_HIGHT_TYPE_BOX_STATUS",t.DELETE_RELATIVE_CONF_HGIH_TYPE="DELETE_RELATIVE_CONF_HGIH_TYPE",t.CHANGE_RELATIVE_DATA="CHANGE_RELATIVE_DATA",t.BEFORE_ADD_MANAGE_TYPE_CARD_FROM_EDIT_RUNNING="BEFORE_ADD_MANAGE_TYPE_CARD_FROM_EDIT_RUNNING"},1301:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_PROJECT="INIT_PROJECT",t.INIT_PROJECT_DATA="INIT_PROJECT_DATA",t.PROJECT_HIGH_TYPE="PROJECT_HIGH_TYPE",t.CHANGE_PROJECT_DATA="CHANGE_PROJECT_DATA",t.GET_PROJECT_LIST_AND_TREE="GET_PROJECT_LIST_AND_TREE",t.CHANGE_PROJECT_TOP_DATA="CHANGE_PROJECT_TOP_DATA",t.CHECKED_PROJECT_CATEGORY="CHECKED_PROJECT_CATEGORY",t.GET_PROJECT_CARD_ONE="GET_PROJECT_CARD_ONE",t.UNCHECKED_PROJECT="UNCHECKED_PROJECT",t.AFTER_SUCCESS_EDIT_PROJECT_CARD="AFTER_SUCCESS_EDIT_PROJECT_CARD",t.BEFORE_ADD_PROJECT_CARD_FROM_EDIT_RUNNING="BEFORE_ADD_PROJECT_CARD_FROM_EDIT_RUNNING",t.BEFORE_ADD_PROJECT_CARD_GET_CODE="BEFORE_ADD_PROJECT_CARD_GET_CODE"},1356:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SWITCH_LOADING_MASK="SWITCH_LOADING_MASK",t.INIT_SEARCH_APPROVAL="INIT_SEARCH_APPROVAL",t.AFTER_GET_APPROVAL_PROCESSLIST="AFTER_GET_APPROVAL_PROCESSLIST",t.AFTER_GET_APPROVAL_PROCESSLIST_DETAILLIST="AFTER_GET_APPROVAL_PROCESSLIST_DETAILLIST",t.GET_APPROVAL_PROCESS_DETAIL_INFO="GET_APPROVAL_PROCESS_DETAIL_INFO",t.GET_APPROVAL_PROCESS_PREVIEW_DETAIL_INFO="GET_APPROVAL_PROCESS_PREVIEW_DETAIL_INFO",t.AFTER_GET_APPROVAL_PROCESS_MODEL_LIST="AFTER_GET_APPROVAL_PROCESS_MODEL_LIST",t.CHANGE_APPROVAL_PROCESS_DETAIL_INFO_COMMON_STRING="CHANGE_APPROVAL_PROCESS_DETAIL_INFO_COMMON_STRING",t.SEARCH_APPROVAL_GET_APPROVAL_PROJECT_CARD_LIST="SEARCH_APPROVAL_GET_APPROVAL_PROJECT_CARD_LIST",t.SEARCH_APPROVAL_GET_APPROVAL_CONTACT_CARD_LIST="SEARCH_APPROVAL_GET_APPROVAL_CONTACT_CARD_LIST",t.CHANGE_APPROVAL_PROCESS_DETAIL_INFO_CATEGORY="CHANGE_APPROVAL_PROCESS_DETAIL_INFO_CATEGORY",t.CHANGE_APPROVAL_PROCESS_DETAIL_INFO_BILL_COMMON_STRING="CHANGE_APPROVAL_PROCESS_DETAIL_INFO_BILL_COMMON_STRING",t.SEARCH_APPROVAL_CHANGE_RUNNING_TAX_RATE="SEARCH_APPROVAL_CHANGE_RUNNING_TAX_RATE",t.CHANGE_SEARCH_RUNNING_CALCULATE_COMMON_STRING="CHANGE_SEARCH_RUNNING_CALCULATE_COMMON_STRING",t.CHANGE_SEARCH_APPROVAL_COMMON_STRING="CHANGE_SEARCH_APPROVAL_COMMON_STRING",t.CHANGE_SEARCH_APPROAL_EDIT_BILL_STATES="CHANGE_SEARCH_APPROAL_EDIT_BILL_STATES",t.CLEAR_SEARCH_APPROVAL_TEMP="CLEAR_SEARCH_APPROVAL_TEMP",t.CHARGE_SEARCH_APPROVAL_ITEM_CHECKBOX_CHECK="CHARGE_SEARCH_APPROVAL_ITEM_CHECKBOX_CHECK",t.CHANGE_SEARCH_APPROVAL_SHOW_CHILD_LIST="CHANGE_SEARCH_APPROVAL_SHOW_CHILD_LIST",t.BEFORE_INSERT_APPROVAL_CALCULATE="BEFORE_INSERT_APPROVAL_CALCULATE",t.BEFORE_ADD_INVENTORY_CONF_CARD_RUNNING="BEFORE_ADD_INVENTORY_CONF_CARD_RUNNING",t.BEFORE_ADD_RELATIVE_CARD_FROM_RUNNING="BEFORE_ADD_RELATIVE_CARD_FROM_RUNNING",t.SEARCH_APPROVAL_GET_APPROVAL_STOCK_CARD_LIST="SEARCH_APPROVAL_GET_APPROVAL_STOCK_CARD_LIST",t.SEARCH_APPROVAL_GET_APPROVAL_WAREHOUSE_CARD_LIST="SEARCH_APPROVAL_GET_APPROVAL_WAREHOUSE_CARD_LIST",t.CHANGE_SEARCH_APPROVAL_STRING="CHANGE_SEARCH_APPROVAL_STRING"}}]);