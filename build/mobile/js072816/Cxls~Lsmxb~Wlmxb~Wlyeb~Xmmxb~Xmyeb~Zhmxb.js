(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1067:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.yllsActions=e.ActionTypes=void 0,e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},g(t,S.GET_YLLS_SINGLE_ACCOUNT,function(){var t=sessionStorage.getItem("ylPage");return e.set("data",(0,s.fromJS)(a.receivedData)).setIn([t+"Data","selectedIndex"],a.selectedIndex).setIn([t+"Data","idx"],a.idx)}),g(t,S.GET_YLLS_PREAMOUNT,function(){return e.setIn(["preData","preAmount"],a.data.preAmount).setIn(["preData","receiveAmount"],a.data.amount)}),g(t,S.GET_YLLS_UNTREATEDAMOUNT,function(){var t=0,n=0;return({accumulationAmount:function(){t=a.receivedData[a.amountType]+e.getIn(["data","acPayment","personAccumulationAmount"]),e=e.setIn(["data","accumulationAmount"],t)},socialSecurityAmount:function(){n=a.receivedData[a.amountType]+e.getIn(["data","acPayment","personSocialSecurityAmount"]),e=e.setIn(["data","socialSecurityAmount"],n)}}[a.amountType]||function(){return null})(),e}),t)[a.type]||function(){return e})()};var n,s=a(9),i=a(182),r=(n=i)&&n.__esModule?n:{default:n},u=d(a(25)),o=a(13),c=d(a(10));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function g(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var T=(0,s.fromJS)({data:{categoryType:""},preData:{preAmount:0,receiveAmount:0},cxlsData:{selectedIndex:"0",idx:0},lsmxbData:{selectedIndex:"0",idx:0},zhmxbData:{selectedIndex:"0",idx:0},wlmxbData:{selectedIndex:"0",idx:0}});var L={getYllsSingleAccount:function(t,e,a,n,s){return function(i){c.toast.loading("加载中...",0),(0,r.default)("getRunningBusiness","GET","uuid="+a,function(a){c.toast.hide(),(0,o.showMessage)(a)&&(i({type:S.GET_YLLS_SINGLE_ACCOUNT,receivedData:a.data.result,selectedIndex:e,idx:n}),s&&t.push("/ylls"))})}},getXczcAccumulationAmount:function(){return function(t,e){var a=e().yllsState,n=a.getIn(["data","categoryUuid"]),s=a.getIn(["data","runningDate"]);c.toast.loading(u.LOADING_TIP_TEXT,0),(0,r.default)("getPaymentInfo","POST",JSON.stringify({categoryUuid:n,runningDate:s,acType:"AC_GJJ",accumulationAcId:"",accumulationAssId1:"",accumulationCategory1:"",accumulationAssId2:"",accumulationCategory2:""}),function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:S.GET_YLLS_UNTREATEDAMOUNT,receivedData:e.data.result,amountType:"accumulationAmount"})})}},getXczcSocialSecurityAmount:function(){return function(t,e){var a=e().yllsState,n=a.getIn(["data","categoryUuid"]),s=a.getIn(["data","runningDate"]);(0,r.default)("getPaymentInfo","POST",JSON.stringify({categoryUuid:n,runningDate:s,acType:"AC_SB",socialSecurityAcId:"",socialSecurityAssId1:"",socialSecurityCategory1:"",socialSecurityAssId2:"",socialSecurityCategory2:""}),function(e){(0,o.showMessage)(e)&&t({type:S.GET_YLLS_UNTREATEDAMOUNT,receivedData:e.data.result,amountType:"socialSecurityAmount"})})}}},S=e.ActionTypes={GET_YLLS_SINGLE_ACCOUNT:"GET_YLLS_SINGLE_ACCOUNT",GET_YLLS_PREAMOUNT:"GET_YLLS_PREAMOUNT",GET_YLLS_UNTREATEDAMOUNT:"GET_YLLS_UNTREATEDAMOUNT"};e.yllsActions=L},1074:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cxAccountActions=e.ActionTypes=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},f(t,C.INIT_CXLS,function(){return _}),f(t,C.GETPERIOD_AND_BUSINESSLIST,function(){var t=a.receivedData.periodDtoJson,n=(Number(t.firstyear),Number(t.lastyear),Number(t.firstmonth),Number(t.lastmonth),Number(t.openedyear)),i=Number(t.openedmonth),r=i<10?"0"+i:i,u=[];return a.receivedData.result.childList.forEach(function(t,e){u.push({idx:e,uuid:t.uuid})}),e.set("period",(0,s.fromJS)(a.period)).setIn(["views","year"],n).setIn(["views","month"],r).setIn(["views","issues"],(0,s.fromJS)(a.issues)).setIn(["views","pageCount"],a.receivedData.pageCount).setIn(["views","currentRouter"],"CXLS").set("dataList",(0,s.fromJS)(a.receivedData.result.childList)).set("ylDataList",(0,s.fromJS)(u))}),f(t,C.GET_BUSINESSLIST,function(){if(a.shouldConcat){var t=e.get("dataList").toJS(),n=t.concat(a.receivedData.result.childList),i=[];n.forEach(function(t,e){i.push({idx:e,uuid:t.uuid})}),e=e.set("dataList",(0,s.fromJS)(n)).set("ylDataList",(0,s.fromJS)(i))}else{var r=[];a.receivedData.result.childList.forEach(function(t,e){r.push({idx:e,uuid:t.uuid})}),e=e.set("dataList",(0,s.fromJS)(a.receivedData.result.childList)).set("ylDataList",(0,s.fromJS)(r))}return e.setIn(["views","currentPage"],a.currentPage).setIn(["views","pageCount"],a.receivedData.pageCount)}),f(t,C.CXACCOUNT_SELECT_LSALL,function(){switch(a.selectedIndex){case"CXLS":e=e.update("dataList",function(t){return t.map(function(t){return t.set("selected",a.value)})});break;case"CX_HSGL":e=e.updateIn(["hsgl","dataList"],function(t){return t.map(function(t){return t.set("selected",a.value)})})}return e}),f(t,C.CXACCOUNT_SELECT_LS,function(){return e.updateIn(["dataList",a.idx,"selected"],function(t){return!t})}),f(t,C.GET_CXLS_RUNNING_ACCOUNT,function(){var t=[];return a.receivedData.resultList[0]&&a.receivedData.resultList[0].childList.forEach(function(e){t.push({key:e.name,value:""+e.uuid+u.TREE_JOIN_STR+e.name})}),e.set("accountList",(0,s.fromJS)(t))}),f(t,C.CHANGE_CXLS_DATA,function(){return e.setIn(a.dataType,a.value)}),f(t,C.GET_CXLS_SINGLE,function(){var t=a.receivedData.categoryType,n=l[t];switch(a.toRouter){case"SFGL":var i=a.receivedData.usedCard,r=a.receivedData.runningDate?a.receivedData.runningDate:"",u=Math.abs(a.receivedData.notHandleAmount),o=a.receivedData.runningAbstract?a.receivedData.runningAbstract:"";e=e.setIn(["data","amount"],u).setIn(["data","notHandleAmount"],u).setIn(["data","runningAbstract"],o).setIn(["data","uuidList"],(0,s.fromJS)([{uuid:a.uuid,assType:a.receivedData.assType}])).setIn(["data","runningDate"],r).setIn(["data","contactsCardRange"],(0,s.fromJS)(i)).setIn(["data","cardUuid"],i.uuid).setIn(["data","amountTitle"],a.amountTitle);break;case"JZCB":var c=[],d=[],g=[],T=a.receivedData.childList;T.length>1?T.forEach(function(t){var e=t.acBusinessIncome.stockCardList[0];t.canBeCarryover&&!t.beCarryover&&(g.push(t.uuid),c.push(e),d.push({uuid:e.uuid,amount:""}),e.amount=t.amount)}):(g.push(a.receivedData.uuid),c=a.receivedData[n].stockCardList,d.push({uuid:c[0].uuid,amount:""})),e=e.setIn(["data","runningAbstract"],a.receivedData.runningAbstract).setIn(["data","categoryUuid"],a.receivedData.categoryUuid).setIn(["data","uuidList"],(0,s.fromJS)(g)).setIn(["data","runningDate"],a.receivedData.runningDate).setIn(["data","runningState"],a.receivedData.runningState).setIn(["data","stockCardList"],(0,s.fromJS)(c)).setIn(["data","cardList"],(0,s.fromJS)(d));break;case"KJFP":var L=a.receivedData.runningState,S="BILL_MAKE_OUT_TYPE_XS";"STATE_YYSR_TS"==L&&(S="BILL_MAKE_OUT_TYPE_TS"),e=e.setIn(["data","runningAbstract"],a.receivedData.runningAbstract).setIn(["data","categoryUuid"],a.receivedData.categoryUuid).setIn(["data","uuidList"],(0,s.fromJS)([a.receivedData.uuid])).setIn(["data","runningDate"],a.receivedData.runningDate).setIn(["data","billMakeOutType"],S);break;case"FPRZ":var f=a.receivedData.runningState,_="BILL_AUTH_TYPE_CG";"STATE_YYZC_TG"==f&&(_="BILL_AUTH_TYPE_TG"),e=e.setIn(["data","runningAbstract"],a.receivedData.runningAbstract).setIn(["data","categoryUuid"],a.receivedData.categoryUuid).setIn(["data","uuidList"],(0,s.fromJS)([a.receivedData.uuid])).setIn(["data","runningDate"],a.receivedData.runningDate).setIn(["data","billAuthType"],_).setIn(["data","authBusinessUuid"],"");break;case"JZSY":var I=Number(a.receivedData.amount)-Number(a.receivedData.tax);e=e.setIn(["data","runningAbstract"],"处置损益").setIn(["data","categoryUuid"],a.receivedData.categoryUuid).setIn(["data","categoryName"],a.receivedData.categoryName).setIn(["data","businessList"],(0,s.fromJS)([a.receivedData])).setIn(["data","businessList",0,"beSelect"],!0).setIn(["data","runningDate"],a.receivedData.runningDate).setIn(["data","amount"],I).setIn(["data","acAssets","originalAssetsAmount"],"").setIn(["data","acAssets","depreciationAmount"],"").setIn(["data","beProject"],a.receivedData.beProject).setIn(["data","usedProject"],a.receivedData.beProject).setIn(["data","projectRange"],a.receivedData.projectRange).setIn(["data","projectCard"],(0,s.fromJS)([{amount:""}]));break;default:console.log("获取单条数据失败")}return e.setIn(["views","currentRouter"],a.toRouter).setIn(["views","fromRouter"],a.fromRouter)}),f(t,C.CXLS_CXHSGL_ALLBATCH,function(){var t=e.getIn(["hsgl","dataList"]);switch(a.fromRouter){case"CX_SFGL":var n=e.getIn(["hsgl","contactsCard"]),i=new o.DateLib(new Date).valueOf(),r=[],u=0,c="收款金额";t.forEach(function(t){if(t.get("selected")){r.push({uuid:t.get("uuid"),assType:t.get("assType")});var e=t.get("flowType"),a=t.get("direction"),n=Number(t.get("notHandleAmount")),s=t.get("runningState");"STATE_YYSR_TS"!==s&&"STATE_YYZC_TG"!==s||(n=-Math.abs(n)),"FLOW_INADVANCE"==e?"credit"==a?u+=n:u-=n:"credit"==a?u-=n:u+=n}}),u<0&&(c="付款金额"),e=e.setIn(["data","amount"],Math.abs(u)).setIn(["data","runningAbstract"],"").setIn(["data","uuidList"],(0,s.fromJS)(r)).setIn(["data","runningDate"],i).setIn(["data","contactsCardRange"],n).setIn(["data","cardUuid"],n.get("uuid")).setIn(["data","amountTitle"],c).setIn(["views","currentRouter"],"SFGL").setIn(["views","selectedIndex"],"CX_SFGL");break;case"CX_JZCB":var d=[],g=0;t.forEach(function(t){t.get("selected")&&(d.push(t.get("uuid")),g+=Number(t.get("amount")))});var T=e.getIn(["hsgl","stockCard"]).set("amount",g),L=[{uuid:T.get("uuid"),amount:""}];e=e.setIn(["data","runningAbstract"],"").setIn(["data","categoryUuid"],"").setIn(["data","uuidList"],(0,s.fromJS)(d)).setIn(["data","runningState"],e.getIn(["hsgl","runningState"])).setIn(["data","stockCardList"],(0,s.fromJS)([T])).setIn(["data","cardList"],(0,s.fromJS)(L)).setIn(["views","currentRouter"],"JZCB").setIn(["views","selectedIndex"],"CX_JZCB");break;case"CX_KJFP":var S=[];t.forEach(function(t){t.get("selected")&&S.push(t.get("uuid"))}),e=e.setIn(["data","runningAbstract"],"").setIn(["data","categoryUuid"],"").setIn(["data","uuidList"],(0,s.fromJS)(S)).setIn(["data","billMakeOutType"],e.getIn(["hsgl","billMakeOutType"])).setIn(["views","currentRouter"],"KJFP").setIn(["views","selectedIndex"],"CX_KJFP");break;case"CX_FPRZ":var f=[];t.forEach(function(t){t.get("selected")&&f.push(t.get("uuid"))}),e=e.setIn(["data","runningAbstract"],"").setIn(["data","categoryUuid"],"").setIn(["data","uuidList"],(0,s.fromJS)(f)).setIn(["data","billAuthType"],e.getIn(["hsgl","billAuthType"])).setIn(["data","authBusinessUuid"],"").setIn(["views","currentRouter"],"FPRZ").setIn(["views","selectedIndex"],"CX_FPRZ");break;default:console.log("一键数据失败")}return e.setIn(["views","fromRouter"],"CX_HSGL")}),f(t,C.GET_CXLS_HSGL_CARDLIST,function(){var t=[],n=[],i="stockCardList"==a.cardType?"全部存货":"全部往来单位";return a.data.forEach(function(e){t.push({key:e.code+" "+e.name,value:""+e.uuid+u.TREE_JOIN_STR+e.code+u.TREE_JOIN_STR+e.name}),n.push(e.code+" "+e.name)}),t.unshift({key:i,value:""+u.TREE_JOIN_STR+u.TREE_JOIN_STR+i}),n.unshift(i),e.setIn(["hsgl",a.cardType],(0,s.fromJS)(t)).setIn(["hsgl","cardNameList"],(0,s.fromJS)(n))}),f(t,C.CHANGE_CXLS_CARD,function(){var t=a.value.split(u.TREE_JOIN_STR),n={};return n.uuid=t[0],n.code=t[1],n.name=t[2],e.setIn(["hsgl",a.dataType],(0,s.fromJS)(n))}),f(t,C.CXHSGL_TO_YLDATA,function(){var t=[],n=e.getIn(["hsgl","dataList"]);return n.forEach(function(e,n){switch(a.fromRouter){case"CX_SFGL":e.get("beOpened")||t.push({idx:n,uuid:e.get("uuid")});break;case"CX_JZCB":t.push({idx:n,uuid:e.get("parentUuid")?e.get("parentUuid"):e.get("uuid")});break;case"CX_KJFP":case"CX_FPRZ":t.push({idx:n,uuid:e.get("parentUuid")});break;default:console.log("生成预览流水数据失败")}}),e.set("ylDataList",(0,s.fromJS)(t))}),f(t,C.CXLS_SFGL_CATEGORYLIST,function(){var t=e.getIn(["categoryList","assTypeList"]).toJS(),n=[];return t.push({assType:a.assType,uuid:a.uuid}),a.data.forEach(function(t){n.push({key:""+t.name,value:""+t.uuid+u.TREE_JOIN_STR+t.name})}),e.setIn(["categoryList",a.assType],(0,s.fromJS)(n)).setIn(["categoryList","assTypeList"],(0,s.fromJS)(t))}),f(t,C.CHANGE_CXLS_SFGL_CATEGORY,function(){var t=a.value.split(u.TREE_JOIN_STR),n=(e.getIn(["data","uuidList"]),e.getIn(["categoryList","assTypeList",a.idx,"uuid"]));return e.setIn(["categoryList","assTypeList",a.idx,"name"],t[1]).setIn(["categoryList","assTypeList",a.idx,"categoryUuid"],t[0]).updateIn(["data","uuidList"],function(e){return e.map(function(e){return e.get("uuid")==n&&(e=e.set("categoryUuid",t[0]).set("beOpened",!0)),e})})}),f(t,C.CXLS_GET_PROJECT_CARDLIST,function(){var t=[];return a.receivedData.forEach(function(e,a){t.push({key:e.code+" "+e.name,value:""+e.uuid+u.TREE_JOIN_STR+e.code+u.TREE_JOIN_STR+e.name})}),e.set("projectCardList",(0,s.fromJS)(t))}),t)[a.type]||function(){return e})()};var s=a(9),i=S(a(182)),r=S(a(24)),u=L(a(25)),o=a(13),c=L(a(10)),d=a(1072),g=L(a(184)),T=L(a(181));function L(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function S(t){return t&&t.__esModule?t:{default:t}}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"},_=(0,s.fromJS)({views:{accountUuid:"",accountName:"全部",currentPage:1,pageCount:1,year:"",month:"",issues:[{value:"2018-01",key:""}],isLoading:!1,currentRouter:"CXLS",fromRouter:"",selectedIndex:"CXLS",isAccount:!1},period:{closedmonth:"",closedyear:"",firstmonth:"",firstyear:"",lastmonth:"",lastyear:""},dataList:[],ylDataList:[],accountList:[],data:{amount:"",runningAbstract:"",runningDate:"",cardUuid:"",accountUuid:""},categoryList:{assTypeList:[],AC_AR:[],AC_PP:[],AC_ADV:[],AC_AP:[]},hsgl:{activeTab:0,categoryList:[{key:"收付管理"}],contactsCardList:[{key:"全部往来单位",value:""+u.TREE_JOIN_STR+u.TREE_JOIN_STR+"全部往来单位"}],stockCardList:[{key:"全部存货",value:""+u.TREE_JOIN_STR+u.TREE_JOIN_STR+"全部存货"}],contactsCard:{uuid:"",code:"",name:"全部往来单位"},stockCard:{uuid:"",code:"",name:"全部存货"},cardNameList:[],isCheck:!1,billMakeOutType:"",billAuthType:"",runningState:"",dataList:[]},projectCardList:[]});var I={getPeriodAndBusinessList:function(){return function(t){c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("getRunningBusinessList","POST",JSON.stringify({accountUuid:"",currentPage:1,getPeriod:"true",month:"",pageSize:20,year:""}),function(e){if((0,o.showMessage)(e)){c.toast.hide();var a=e.data.periodDtoJson?t(T.everyTableGetIssuedate(e.data.periodDtoJson)):[];t({type:C.GETPERIOD_AND_BUSINESSLIST,receivedData:e.data,issues:a})}})}},getBusinessList:function(t,e,a){return function(n,s){var r=s().cxAccountState.get("views"),d=r.get("year"),g=r.get("month"),T=r.get("isAccount"),L=r.get("accountUuid");!e&&c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("getRunningBusinessList","POST",JSON.stringify({isAccount:T,accountUuid:L,currentPage:t,getPeriod:"true",month:g,pageSize:20,year:d}),function(s){!e&&c.toast.hide(),(0,o.showMessage)(s)&&(e&&a.setState({isLoading:!1}),T&&s.data.result.msg.length&&c.toast.info(s.data.result.msg),n({type:C.GET_BUSINESSLIST,receivedData:s.data,currentPage:t,shouldConcat:e}))})}},selectLsAll:function(t,e){return{type:C.CXACCOUNT_SELECT_LSALL,selectedIndex:t,value:e}},selectLs:function(t,e){return{type:C.CXACCOUNT_SELECT_LS,selectedIndex:t,idx:e}},deleteLs:function(t,e){return function(a){c.Confirm({message:"确定删除吗",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(n){if(1===n.buttonIndex){var s=t.filter(function(t){return t.get("selected")}).map(function(t){return t.get("uuid")});c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("deleteRunningbusiness","POST",JSON.stringify({deleteList:s}),function(t){if((0,o.showMessage)(t)){if(t.data.errorList.length){var n=t.data.errorList.reduce(function(t,e){return t+","+e});c.Alert(n)}a(I.recapture(e))}})}},onFail:function(t){return alert(t)}})}},recapture:function(t){return function(e){switch(t){case"CXLS":e(I.getBusinessList(1,!1));break;case"CX_SFGL":e(I.getManageList());break;case"CX_KJFP":e(I.getKjfpList());break;case"CX_FPRZ":e(I.getFprzList());break;case"CX_JZCB":e(I.getFirstStockCardList()),e(I.getJzcbList());break;default:console.log("重新获取数据失败")}}},getRunningAccount:function(){return function(t){(0,i.default)("getRunningAccount","GET","",function(e){(0,o.showMessage)(e)&&t({type:C.GET_CXLS_RUNNING_ACCOUNT,receivedData:e.data})})}},getCxlsSingle:function(t,e,a,n){return function(s){c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("getRunningBusiness","GET","uuid="+t,function(i){c.toast.hide(),(0,o.showMessage)(i)&&s({type:C.GET_CXLS_SINGLE,receivedData:i.data.result,fromRouter:e,toRouter:a,amountTitle:n,uuid:t})})}},changeCxlsData:function(t,e){return{type:C.CHANGE_CXLS_DATA,dataType:t,value:e}},saveSfgl:function(){return function(t,e){var a=e().cxAccountState,r=a.get("data").toJS(),d=r.amount,g=r.notHandleAmount,T=a.getIn(["categoryList","assTypeList"]);return""==r.accountUuid?c.toast.info("请选择账户"):""==r.runningAbstract?c.toast.info("请填写摘要"):r.runningAbstract.length>u.RUNNING_ABSTRACT_LENGTH?c.toast.info("摘要长度不能超过"+u.RUNNING_ABSTRACT_LENGTH+"个字符"):d<=0?c.toast.info("请填写金额"):d>g?c.toast.info("收付款金额大于实际发生金额"):T.size&&T.some(function(t){return!t.get("categoryUuid")})?c.toast.info("请选择所有的期初类别"):(c.toast.loading(u.LOADING_TIP_TEXT,0),void(0,i.default)("insertRunningpayment","POST",JSON.stringify(n({},r)),function(e){if(c.toast.hide(),(0,o.showMessage)(e)){c.toast.success("保存成功",2);var n=a.getIn(["views","fromRouter"]);t(I.changeCxlsData(["views","currentRouter"],n)),t(I.changeCxlsData(["categoryList","assTypeList"],(0,s.fromJS)([]))),"CXLS"==n&&t(I.getBusinessList(1,!1))}}))}},saveJzcb:function(){return function(t,e){var a=e().cxAccountState,s=a.get("data").toJS(),r=s.cardList,d=s.uuidList,g=[],T=[];return r.forEach(function(t,e){t.amount>0&&(g.push(t),T.push(d[e]))}),""==s.runningAbstract?c.toast.info("请填写摘要"):s.runningAbstract.length>u.RUNNING_ABSTRACT_LENGTH?c.toast.info("摘要长度不能超过"+u.RUNNING_ABSTRACT_LENGTH+"个字符"):0==T.length?c.toast.info("请填写成本金额"):(c.toast.loading(u.LOADING_TIP_TEXT,0),void(0,i.default)("insertCarryoverItem","POST",JSON.stringify(n({},s,{cardList:g,uuidList:T})),function(e){if(c.toast.hide(),(0,o.showMessage)(e)){var n=a.getIn(["views","fromRouter"]);t(I.changeCxlsData(["views","currentRouter"],n)),"CXLS"==n&&t(I.getBusinessList(1,!1))}}))}},saveKjfp:function(){return function(t,e){var a=e().cxAccountState,s=a.get("data").toJS();return""==s.runningAbstract?c.toast.info("请填写摘要"):s.runningAbstract.length>u.RUNNING_ABSTRACT_LENGTH?c.toast.info("摘要长度不能超过"+u.RUNNING_ABSTRACT_LENGTH+"个字符"):(c.toast.loading(u.LOADING_TIP_TEXT,0),void(0,i.default)("insertBusinessMakeoutItem","POST",JSON.stringify(n({},s)),function(e){if(c.toast.hide(),(0,o.showMessage)(e)){var n=a.getIn(["views","fromRouter"]);t(I.changeCxlsData(["views","currentRouter"],n)),"CXLS"==n&&t(I.getBusinessList(1,!1))}}))}},saveFprz:function(){return function(t,e){var a=e().cxAccountState,s=a.get("data").toJS();return""==s.runningAbstract?c.toast.info("请填写摘要"):s.runningAbstract.length>u.RUNNING_ABSTRACT_LENGTH?c.toast.info("摘要长度不能超过"+u.RUNNING_ABSTRACT_LENGTH+"个字符"):(c.toast.loading(u.LOADING_TIP_TEXT,0),void(0,i.default)("insertBusinessAuthItem","POST",JSON.stringify(n({},s)),function(e){if(c.toast.hide(),(0,o.showMessage)(e)){var n=a.getIn(["views","fromRouter"]);t(I.changeCxlsData(["views","currentRouter"],n)),"CXLS"==n&&t(I.getBusinessList(1,!1))}}))}},saveJzsy:function(){return function(t,e){var a=e().cxAccountState,s=a.get("data").toJS(),r=s.usedProject,o=s.projectCard;if(r&&!o.every(function(t){return t.uuid}))return c.toast.info("有未选择的项目卡片");if(""==s.runningAbstract)return c.toast.info("请填写摘要");if(s.runningAbstract.length>u.RUNNING_ABSTRACT_LENGTH)return c.toast.info("摘要长度不能超过"+u.RUNNING_ABSTRACT_LENGTH+"个字符");var d=s.acAssets.originalAssetsAmount,g=s.acAssets.depreciationAmount;return d<=0?c.toast.info("请填写资产原值"):g<=0?c.toast.info("请填写累计折旧"):Number(g)>Number(d)?c.toast.info("折旧额不能大于原值"):(c.toast.loading(u.LOADING_TIP_TEXT,0),void(0,i.default)("insertJzsy","POST",JSON.stringify(n({},s,{enclosureList:[]})),function(e){if(c.toast.hide(),0!==e.code)c.toast.fail(e.code+" "+e.message);else{var n=a.getIn(["views","fromRouter"]);t(I.changeCxlsData(["views","currentRouter"],n)),"CXLS"==n&&t(I.getBusinessList(1,!1))}}))}},insertRunningBusinessVc:function(t){return function(e,a){c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("insertRunningBusinessVc","POST",JSON.stringify({uuidList:[t]}),function(t){if(c.toast.hide(),(0,o.showMessage)(t)){if(t.data.result.length){var n=t.data.result.reduce(function(t,e){return t+","+e});return void c.Alert(n)}var s=a().cxAccountState.getIn(["views","selectedIndex"]);e(I.recapture(s))}})}},deleteRunningBusinessVc:function(t,e,a){return function(n,s){c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("deletevc","POST",JSON.stringify({year:t,month:e,vcindexlist:a}),function(t){if(c.toast.hide(),(0,o.showMessage)(t)){var e=s().cxAccountState.getIn(["views","selectedIndex"]);n(I.recapture(e))}})}},getBusinessManagerCardList:function(){return function(t){(0,i.default)("getBusinessManagerCardList","POST",JSON.stringify({}),function(e){(0,o.showMessage)(e)&&(t({type:C.GET_CXLS_HSGL_CARDLIST,data:e.data.cardList,cardType:"contactsCardList"}),t(I.changeCxlsData(["hsgl","categoryList"],(0,s.fromJS)(e.data.categoryList))))})}},changeCxlsCard:function(t,e){return{type:C.CHANGE_CXLS_CARD,dataType:t,value:e}},getManageList:function(){return function(t,e){var a=e().cxAccountState.get("hsgl"),n=a.getIn(["contactsCard","uuid"]),r=a.get("isCheck");c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("getManageList","POST",JSON.stringify({cardUuid:n,isCheck:""!=n&&r}),function(e){c.toast.hide(),(0,o.showMessage)(e)&&t(I.changeCxlsData(["hsgl","dataList"],(0,s.fromJS)(e.data.result.childList)))})}},getKjfpList:function(){return function(t,e){var a=e().cxAccountState.get("hsgl").get("billMakeOutType");c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("getBusinessMakeoutList","POST",JSON.stringify({billMakeOutType:a,categoryUuid:"",runningDate:"",searchContent:"",searchType:""}),function(e){c.toast.hide(),(0,o.showMessage)(e)&&t(I.changeCxlsData(["hsgl","dataList"],(0,s.fromJS)(e.data.result)))})}},getFprzList:function(){return function(t,e){var a=e().cxAccountState.get("hsgl").get("billAuthType");c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("getBusinessAuthList","POST",JSON.stringify({billAuthType:a,categoryUuid:"",runningDate:"",searchContent:"",searchType:""}),function(e){c.toast.hide(),(0,o.showMessage)(e)&&t(I.changeCxlsData(["hsgl","dataList"],(0,s.fromJS)(e.data.result)))})}},getFirstStockCardList:function(){return function(t,e){var a=e().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,i.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:a,property:"",listByCategory:"true",categoryUuid:"",subordinateUuid:""}),function(e){(0,o.showMessage)(e)&&t({type:C.GET_CXLS_HSGL_CARDLIST,data:e.data.resultList,cardType:"stockCardList"})})}},getJzcbList:function(){return function(t,e){var a=e().cxAccountState.get("hsgl"),n=a.getIn(["stockCard","uuid"]),r=a.get("runningState");c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("getCarryoverList","POST",JSON.stringify({runningDate:"",runningState:r,cardUuid:n,categoryUuid:"",searchContent:"",searchType:""}),function(e){c.toast.hide(),(0,o.showMessage)(e)&&t(I.changeCxlsData(["hsgl","dataList"],(0,s.fromJS)(e.data.result)))})}},getVcFetch:function(t,e){return function(a){c.toast.loading(u.LOADING_TIP_TEXT,0),(0,r.default)("getvc","POST",JSON.stringify({vcindex:t.get("vcIndex"),year:t.get("year"),month:t.get("month")}),function(t){c.toast.hide(),(0,o.showMessage)(t)&&(e.push("/lrpz"),a((0,d.pushVouhcerToLrpzReducer)(t.data)),sessionStorage.setItem("from-cxls",!0),a(g.setCkpzIsShow(!0)))})}},cxhsglAllBatch:function(t){return{type:C.CXLS_CXHSGL_ALLBATCH,fromRouter:t}},hsglToYlData:function(t){return{type:C.CXHSGL_TO_YLDATA,fromRouter:t}},getSfglCategoryList:function(t,e){return function(a){(0,i.default)("getManagerCategoryList","POST",JSON.stringify({assType:t}),function(n){(0,o.showMessage)(n)&&a({type:C.CXLS_SFGL_CATEGORYLIST,data:n.data,assType:t,uuid:e})})}},changeSfglCategory:function(t,e){return{type:C.CHANGE_CXLS_SFGL_CATEGORY,idx:e,value:t}},getProjectCardList:function(t){return function(e,a){var n=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("getProjectCardList","POST",JSON.stringify({sobId:n,categoryList:t,needCommonCard:!1}),function(t){c.toast.hide(),(0,o.showMessage)(t)&&e({type:C.CXLS_GET_PROJECT_CARDLIST,receivedData:t.data.result})})}}},C=e.ActionTypes={GETPERIOD_AND_BUSINESSLIST:"GETPERIOD_AND_BUSINESSLIST",CXACCOUNT_SELECT_LSALL:"CXACCOUNT_SELECT_LSALL",CXACCOUNT_SELECT_LS:"CXACCOUNT_SELECT_LS",GET_BUSINESSLIST:"GET_BUSINESSLIST",GET_CXLS_RUNNING_ACCOUNT:"GET_CXLS_RUNNING_ACCOUNT",CHANGE_CXLS_DATA:"CHANGE_CXLS_DATA",GET_CXLS_SINGLE:"GET_CXLS_SINGLE",GET_CXLS_HSGL_CARDLIST:"GET_CXLS_HSGL_CARDLIST",CHANGE_CXLS_CARD:"CHANGE_CXLS_CARD",CXLS_CXHSGL_ALLBATCH:"CXLS_CXHSGL_ALLBATCH",CXHSGL_TO_YLDATA:"CXHSGL_TO_YLDATA",INIT_CXLS:"INIT_CXLS",CXLS_SFGL_CATEGORYLIST:"CXLS_SFGL_CATEGORYLIST",CHANGE_CXLS_SFGL_CATEGORY:"CHANGE_CXLS_SFGL_CATEGORY",CXLS_GET_PROJECT_CARDLIST:"CXLS_GET_PROJECT_CARDLIST"};e.cxAccountActions=I}}]);