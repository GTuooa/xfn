(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{1009:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var o=a(n(2459));function a(e){return e&&e.__esModule?e:{default:e}}var l={sobConfigState:a(n(200)).default};t.reducer=l,t.view=o.default},1628:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unselectSobAll=t.selectSobAll=t.selectSob=t.cancelEnterSobFetch=t.deleteSobFetch=t.enterSobFetch=void 0;var o,a=d(n(81)),l=n(24),u=(o=l)&&o.__esModule?o:{default:o},i=n(48),r=d(n(10)),s=n(13),c=d(n(80)),p=d(n(25));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.enterSobFetch=function(e){return function(t,n){var o=n().sobConfigState,l=o.get("sobSelectedIndex"),r=o.get("sob");return r.get("sobname")?r.get("sobname").length>p.SOB_NAME_LENGTH?(0,s.showMessage)("","","","账套名称长度不能超过20个"):r.get("firstyear")?(t({type:a.SWITCH_LOADING_MASK}),void{modify:function(){(0,u.default)("modifysob","POST",JSON.stringify(r),function(n){t({type:a.SWITCH_LOADING_MASK}),(0,s.showMessage)(n,"show")&&(t(m(n,r,l)),t(i.homeActions.getDbListFetch("",e)),e.goBack())})},insert:function(){(0,u.default)("insertsob","POST",JSON.stringify(r),function(n){t({type:a.SWITCH_LOADING_MASK}),(0,s.showMessage)(n,"show")&&(t(f(n,r)),t(i.homeActions.getDbListFetch("",e)),e.goBack())})}}[o.get("sobConfigMode")]()):(0,s.showMessage)("","","","起始账期未输入"):(0,s.showMessage)("","","","账套名称内容未输入")}};var f=function(e,t){return{type:a.INSERT_SOB,receivedData:e,sob:t}},m=function(e,t,n){return{type:a.MODIFY_SOB,receivedData:e,sob:t,idx:n}},g=(t.deleteSobFetch=function(e){return function(t,n){r.Confirm({message:"确定删除？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(o){var l=n().allState.get("soblist").toSeq().filter(function(e){return e.get("selected")}).map(function(e){return e.get("sobid")});1===o.buttonIndex&&(0,u.default)("deletesob","POST",JSON.stringify({sobidlist:l}),function(n){(0,s.showMessage)(n)&&(t(i.homeActions.getDbListFetch("",e)),t({type:a.DELETE_SOB_FETCH,receivedData:n}),t(g()),t(c.hideAllSobCheckbox()))})},onFail:function(e){return alert(e)}})}},t.cancelEnterSobFetch=function(){return{type:a.CANCEL_ENTER_SOB_FETCH}},t.selectSob=function(e){return{type:a.SELECT_SOB,idx:e}},t.selectSobAll=function(){return{type:a.SELECT_SOB_ALL}},t.unselectSobAll=function(){return{type:a.UNSELECT_SOB_ALL}})},2459:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=c(n(0)),l=(n(31),n(9),n(16)),u=n(125),i=c(n(2460)),r=c(n(2464)),s=c(n(2467));function c(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),o(t,[{key:"render",value:function(){return a.default.createElement(l.Container,{className:"project-config"},a.default.createElement(u.Route,{path:"/config/sob/index",component:i.default}),a.default.createElement(u.Route,{path:"/config/sob/option",component:r.default}),a.default.createElement(u.Route,{path:"/config/sob/copymodule",component:s.default}))}}]),t}();t.default=p},2460:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=f(n(0)),u=(n(9),n(31)),i=n(16);n(2461);var r=f(n(2463)),s=d(n(10)),c=d(n(80)),p=n(48);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}var m=(0,u.connect)(function(e){return e})(o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),a(t,[{key:"componentDidMount",value:function(){s.setTitle({title:"账套编辑"}),s.setIcon({showIcon:!1}),s.setRight({show:!1}),this.props.dispatch(p.homeActions.setDdConfig())}},{key:"render",value:function(){var e=this.props,t=e.homeState,n=e.dispatch,o=e.sobConfigState,a=e.history,u=o.get("sobList").map(function(e,t){return e.set("key",t)}),s=o.get("allCheckboxDisplay"),p=o.get("toolBarDisplayIndex"),d=(o.get("xuanzeboxDisplay"),t.getIn(["data","userInfo","username"])),f=t.getIn(["data","userInfo"]),m=f.get("isAdmin"),g=f.get("isDdAdmin"),b=f.get("isDdPriAdmin"),I=f.get("isFinance"),S=t.getIn(["data","userInfo","moduleInfo"]),O=!!S&&!(!S.get("GL")||!0!==S.get("GL"));return l.default.createElement(i.Container,{className:"sob-config"},l.default.createElement(i.ScrollView,{flex:"1"},u.map(function(e,t){return l.default.createElement(r.default,{allCheckboxDisplay:s,key:t,sob:e,idx:t,username:d,dispatch:n,history:a,isEnd:t==u.size-1,isAdmin:m})}),l.default.createElement("div",{className:"sob-config-tip-text"},"仅账套管理员可编辑账套")),l.default.createElement(i.ButtonGroup,{type:"ghost",height:50,style:{display:1===p?"":"none"}},l.default.createElement(i.Button,{disabled:!O&&(m||g||b||I),onClick:function(){return n(c.beforeInsertOrModifySob("",a))}},l.default.createElement(i.Icon,{type:"add-plus"}),l.default.createElement("span",null,"新增"))))}}]),t}())||o;t.default=m},2461:function(e,t,n){},2463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(0),i=(a=u)&&a.__esModule?a:{default:a},r=(n(9),n(22)),s=(p(n(1628)),p(n(80))),c=n(16);function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var d=(0,r.immutableRenderDecorator)(o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=(e.idx,e.allCheckboxDisplay),n=e.sob,o=e.username,a=e.dispatch,l=e.isEnd,u=e.history,r=e.isAdmin,p=n.get("adminlist").some(function(e){return e.get("name")===o});return i.default.createElement("div",{className:"sob-item-wrap"},i.default.createElement("div",{className:"sob-item",style:{borderBottom:l?"0":""},onClick:function(){(p||r)&&a(s.beforeInsertOrModifySob(n.get("sobid"),u))}},i.default.createElement(c.Checkbox,{className:"checkbox",style:{display:t?"inline-block":"none"},checked:n.get("selected")}),i.default.createElement("div",{className:"sob-info"},i.default.createElement("p",{className:"sob-info-sobname"},n.get("sobname"))),i.default.createElement(c.Icon,{className:"icon",type:"arrow-right"})))}}]),t}())||o;t.default=d},2464:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=b(n(0)),u=(n(9),n(31)),i=n(24),r=g(n(25)),s=n(16),c=b(n(126)),p=g(n(10)),d=n(13);n(2465);var f=n(48),m=g(n(80));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}s.Form.Label,s.Form.Control,s.Form.Item;var I=["01","02","03","04","05","06","07","08","09","10","11","12"],S=(0,u.connect)(function(e){return e})(o=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),o=t.props.sobConfigState.get("tempSob"),a=o.get("sobid"),l=o.get("moduleInfo"),u=l.get("RUNNING"),i=!1,r=!1,s=!1,c=!1,p=!1,d=!1,f=!1,m=!1,g=!1;return a&&(u&&u.get("beOpen")?(i=!!l.get("SCXM")&&l.getIn(["SCXM","beOpen"]),r=!!l.get("SGXM")&&l.getIn(["SGXM","beOpen"]),s=!!l.get("QUANTITY")&&l.getIn(["QUANTITY","beOpen"]),c=!!l.get("WAREHOUSE")&&l.getIn(["WAREHOUSE","beOpen"]),p=!!l.get("PROCESS")&&l.getIn(["PROCESS","beOpen"]),m=!!l.get("SERIAL")&&l.getIn(["SERIAL","beOpen"]),f=!!l.get("ASSIST")&&l.getIn(["ASSIST","beOpen"]),g=!!l.get("BATCH")&&l.getIn(["BATCH","beOpen"])):d=!!l.get("AMB")&&l.getIn(["AMB","beOpen"])),t.state={showRoleList:!1,gettedIdentifyingCodeList:!1,oldScxmBeOpen:i,oldSgxmBeOpen:r,oldQuantityBeOpen:s,oldWarehouseBeOpen:c,oldProcessBeOpen:p,oldAmbBeOpen:d,oldAssistBeOpen:f,oldSerialBeOpen:m,oldBatchBeOpen:g},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,l.default.Component),a(n,[{key:"componentDidMount",value:function(){"insert"===this.props.sobConfigState.get("sobConfigMode")?p.setTitle({title:"新增账套"}):"modify"===this.props.sobConfigState.get("sobConfigMode")&&p.setTitle({title:"编辑账套"}),p.setRight({show:!1}),this.props.dispatch(f.homeActions.setDdConfig())}},{key:"render",value:function(){var t=this,n=this.props,o=n.sobConfigState,a=n.allState,u=n.dispatch,f=n.homeState,g=n.history,b=this.state,S=b.showRoleList,O=b.gettedIdentifyingCodeList,E=b.oldScxmBeOpen,C=b.oldSgxmBeOpen,N=b.oldQuantityBeOpen,h=b.oldWarehouseBeOpen,T=b.oldProcessBeOpen,y=b.oldAmbBeOpen,M=b.oldAssistBeOpen,A=b.oldSerialBeOpen,v=b.oldBatchBeOpen,_=(o.get("sobConfigMode"),o.get("sobSelectedIndex"),a.get("currencyModelList")),R=o.get("tempSob"),P=R.get("template")||"0",w=R.get("sobname"),k=R.get("sobid"),B=R.get("firstyear"),L=R.get("firstmonth"),Y=R.get("moduleInfo"),U=Y.get("RUNNING"),G=Y.get("GL"),x=Y.get("CURRENCY"),H=(R.get("adminlist"),R.get("observerlist"),R.get("operatorlist"),R.get("vcObserverList"),R.get("cashierList"),R.get("flowObserverList"),R.get("reviewList"),R.get("vcReviewList"),R.get("flowReviewList"),R.get("jrModelList")),j=R.get("sobModel"),X=R.get("currency"),D=R.get("customizeList"),J=R.get("moduleMap"),W=R.get("accountModelList"),Q=f.getIn(["data","userInfo","isAdmin"]),F=f.getIn(["data","userInfo","isFinance"]),V=f.getIn(["data","userInfo","isDdAdmin"]),z=f.getIn(["data","userInfo","isDdPriAdmin"]),q=f.getIn(["data","userInfo","emplID"]),K=(a.get("isloading"),[]);W.forEach(function(e){K.push({key:e.get("modelName"),value:e.get("modelNumber")})});var Z=R.get("periodStartMonth"),$=[];I.forEach(function(e){$.push({key:"每年"+Number(e)+"月起始",value:e})});var ee=[];H.forEach(function(e){if(e.get("modelId"))ee.push({key:e.get("modelId"),label:e.get("modelName"),childList:[]});else{var t=[];D.forEach(function(e){return t.push({key:e.get("sobId"),label:e.get("sobName"),childList:[]})}),ee.push({key:e.get("modelId"),label:e.get("modelName"),childList:t})}}),ee.push({key:"识别码复制",label:"识别码复制",childList:[]});var te=["3"],ne=[];k?ne=["4","5"]:W.forEach(function(e){ne.push(e.get("modelNumber"))});var oe=R.get("smartRoleInfo"),ae=R.get("accountingRoleInfo"),le=te.indexOf(P)>-1?"SMART":"ACCOUNTING",ue="SMART"===le?oe:ae,ie="SMART"===le?"smartRoleInfo":"accountingRoleInfo",re=function(e){if(!k)return!!Y.getIn([e,"beOverdue"])||!(!j||!0!==j.get("newJr"))&&(!(!J||!J.get(e))&&J.getIn([e,"beOpen"]));if(Y.getIn([e,"beOverdue"])){if("SCXM"==e)return!E;if("SGXM"==e)return!C;if("QUANTITY"==e)return!N;if("ASSIST"==e)return!M;if("SERIAL"==e)return!A;if("BATCH"==e)return!v;if("WAREHOUSE"==e)return!h;if("PROCESS"==e)return!T}},se=[],ce=[],pe=[];te.indexOf(P)>-1?(Y.get("RUNNING_GL")&&Y.getIn(["RUNNING_GL","beOpen"])&&(se.push(Y.getIn(["RUNNING_GL","moduleName"])),pe.push(Y.getIn(["RUNNING_GL","moduleCode"]))),Y.get("RUNNING_GL")&&ce.push({key:Y.getIn(["RUNNING_GL","moduleName"]),value:Y.getIn(["RUNNING_GL","moduleCode"])}),Y.get("PROCESS")&&Y.getIn(["PROCESS","beOpen"])&&(se.push(Y.getIn(["PROCESS","moduleName"])),pe.push(Y.getIn(["PROCESS","moduleCode"]))),Y.get("PROCESS")&&ce.push({key:Y.getIn(["PROCESS","moduleName"]),value:Y.getIn(["PROCESS","moduleCode"]),disabled:re("PROCESS")}),Y.get("PROJECT")&&Y.getIn(["PROJECT","beOpen"])&&(se.push(Y.getIn(["PROJECT","moduleName"])),pe.push(Y.getIn(["PROJECT","moduleCode"]))),Y.get("PROJECT")&&ce.push({key:Y.getIn(["PROJECT","moduleName"]),value:Y.getIn(["PROJECT","moduleCode"]),disabled:!k&&(!j||!0!==j.get("newJr")||!(!J||!J.get("PROJECT"))&&J.getIn(["PROJECT","beOpen"]))}),Y.get("SCXM")&&Y.getIn(["SCXM","beOpen"])&&(se.push(Y.getIn(["SCXM","moduleName"])),pe.push(Y.getIn(["SCXM","moduleCode"]))),Y.get("SCXM")&&ce.push({key:Y.getIn(["SCXM","moduleName"]),value:Y.getIn(["SCXM","moduleCode"]),disabled:re("SCXM")}),Y.get("SGXM")&&Y.getIn(["SGXM","beOpen"])&&(se.push(Y.getIn(["SGXM","moduleName"])),pe.push(Y.getIn(["SGXM","moduleCode"]))),Y.get("SGXM")&&ce.push({key:Y.getIn(["SGXM","moduleName"]),value:Y.getIn(["SGXM","moduleCode"]),disabled:re("SGXM")}),Y.get("INVENTORY")&&Y.getIn(["INVENTORY","beOpen"])&&(se.push(Y.getIn(["INVENTORY","moduleName"])),pe.push(Y.getIn(["INVENTORY","moduleCode"]))),Y.get("INVENTORY")&&ce.push({key:Y.getIn(["INVENTORY","moduleName"]),value:Y.getIn(["INVENTORY","moduleCode"]),disabled:!k&&(!j||!0!==j.get("newJr")||!(!J||!J.get("INVENTORY"))&&J.getIn(["INVENTORY","beOpen"]))}),Y.get("WAREHOUSE")&&Y.getIn(["WAREHOUSE","beOpen"])&&(se.push(Y.getIn(["WAREHOUSE","moduleName"])),pe.push(Y.getIn(["WAREHOUSE","moduleCode"]))),Y.get("WAREHOUSE")&&ce.push({key:Y.getIn(["WAREHOUSE","moduleName"]),value:Y.getIn(["WAREHOUSE","moduleCode"]),disabled:re("WAREHOUSE")}),Y.get("QUANTITY")&&Y.getIn(["QUANTITY","beOpen"])&&(se.push(Y.getIn(["QUANTITY","moduleName"])),pe.push(Y.getIn(["QUANTITY","moduleCode"]))),Y.get("QUANTITY")&&ce.push({key:Y.getIn(["QUANTITY","moduleName"]),value:Y.getIn(["QUANTITY","moduleCode"]),disabled:re("QUANTITY")}),Y.get("ASSIST")&&Y.getIn(["ASSIST","beOpen"])&&(se.push(Y.getIn(["ASSIST","moduleName"])),pe.push(Y.getIn(["ASSIST","moduleCode"]))),Y.get("ASSIST")&&ce.push({key:Y.getIn(["ASSIST","moduleName"]),value:Y.getIn(["ASSIST","moduleCode"]),disabled:re("ASSIST")}),Y.get("SERIAL")&&Y.getIn(["SERIAL","beOpen"])&&(se.push(Y.getIn(["SERIAL","moduleName"])),pe.push(Y.getIn(["SERIAL","moduleCode"]))),Y.get("SERIAL")&&ce.push({key:Y.getIn(["SERIAL","moduleName"]),value:Y.getIn(["SERIAL","moduleCode"]),disabled:re("SERIAL")}),Y.get("BATCH")&&Y.getIn(["BATCH","beOpen"])&&(se.push(Y.getIn(["BATCH","moduleName"])),pe.push(Y.getIn(["BATCH","moduleCode"]))),Y.get("BATCH")&&ce.push({key:Y.getIn(["BATCH","moduleName"]),value:Y.getIn(["BATCH","moduleCode"]),disabled:re("BATCH")})):(Y.get("ASSETS")&&Y.getIn(["ASSETS","beOpen"])&&(se.push(Y.getIn(["ASSETS","moduleName"])),pe.push(Y.getIn(["ASSETS","moduleCode"]))),Y.get("ASSETS")&&ce.push({key:Y.getIn(["ASSETS","moduleName"]),value:Y.getIn(["ASSETS","moduleCode"])}),Y.get("CURRENCY")&&Y.getIn(["CURRENCY","beOpen"])&&(se.push(Y.getIn(["CURRENCY","moduleName"])),pe.push(Y.getIn(["CURRENCY","moduleCode"]))),Y.get("CURRENCY")&&ce.push({key:Y.getIn(["CURRENCY","moduleName"]),value:Y.getIn(["CURRENCY","moduleCode"])}),Y.get("ASS")&&Y.getIn(["ASS","beOpen"])&&(se.push(Y.getIn(["ASS","moduleName"])),pe.push(Y.getIn(["ASS","moduleCode"]))),Y.get("ASS")&&ce.push({key:Y.getIn(["ASS","moduleName"]),value:Y.getIn(["ASS","moduleCode"])}),Y.get("AMB")&&Y.getIn(["AMB","beOpen"])&&(se.push(Y.getIn(["AMB","moduleName"])),pe.push(Y.getIn(["AMB","moduleCode"]))),Y.get("AMB")&&ce.push({key:Y.getIn(["AMB","moduleName"]),value:Y.getIn(["AMB","moduleCode"]),disabled:k?!!Y.getIn(["AMB","beOverdue"])&&!y:!!Y.getIn(["AMB","beOverdue"])}),Y.get("NUMBER")&&Y.getIn(["NUMBER","beOpen"])&&(se.push(Y.getIn(["NUMBER","moduleName"])),pe.push(Y.getIn(["NUMBER","moduleCode"]))),Y.get("NUMBER")&&ce.push({key:Y.getIn(["NUMBER","moduleName"]),value:Y.getIn(["NUMBER","moduleCode"])}));f.getIn(["views","isPlay"]);var de=[];_.forEach(function(e){de.push({key:e.get("name"),value:e.get("fcNumber")})});var fe={display:k?"":S?"":"none"};return l.default.createElement(s.Container,{className:"sob-option"},l.default.createElement(s.ScrollView,{flex:"1"},l.default.createElement("ul",{className:"sob-option-sob-type"},(k?te.indexOf(P)>-1:U)?l.default.createElement("li",{className:te.indexOf(P)>-1?"sob-option-sob-type-current":"",onClick:function(){-1===te.indexOf(P)&&u(m.changeSobTemplate("3"))}},"智能版"):"",(k?ne.indexOf(P)>-1:G)?l.default.createElement("li",{className:ne.indexOf(P)>-1?"sob-option-sob-type-current":"",onClick:function(){-1===ne.indexOf(P)&&u(m.changeSobTemplate(ne[0]))}},"会计版"):""),te.indexOf(P)>-1?l.default.createElement("div",{className:"sob-option-title-tip"},l.default.createElement("p",null,"专为0基础财务打造，老板、出纳均可使用。"),l.default.createElement("p",null,"场景化录入流水，精准输出专业报表")):l.default.createElement("div",{className:"sob-option-title-tip"},l.default.createElement("p",null,"专为财务老鸟打造，专业凭证录入模式，"),l.default.createElement("p",null,"支持选配辅助核算、外币、资产等模板。")),l.default.createElement("ul",{className:"sob-option-input-wrap"},l.default.createElement("li",{className:"sob-option-input"},l.default.createElement("span",{className:"sob-option-input-lable"},l.default.createElement("span",{className:"sob-option-input-label sob-option-input-label-main"},"账套名称"),l.default.createElement("span",{style:{color:"#d10000"}},"*")),l.default.createElement(s.TextInput,{className:"sob-option-input-input",value:w,placeholder:"请输入账套名称",onChange:function(e){return u(m.changeSobName(e))}}),l.default.createElement(s.Icon,{className:"icon",type:"arrow-right",size:"12"})),l.default.createElement("li",{className:"sob-option-input sob-option-input-month"},l.default.createElement("span",{className:"sob-option-input-lable"},l.default.createElement("span",{className:"sob-option-input-label sob-option-input-label-main"},"起始账期"),l.default.createElement("span",{style:{color:"#d10000"}},"*")),l.default.createElement(s.MonthPicker,{format:"YYYY_MM",onChange:function(e){var t=new d.DateLib(e);u(m.changeSobFirstYearMonth(t.getYear(),t.getMonth()))}},l.default.createElement("div",{className:B?"sob-option-month-picker-wrap":"sob-option-month-picker-wrap sob-option-month-picker-wrap-placeholder"},B?B+"年"+L+"月":"请选择日期")),l.default.createElement(s.Icon,{className:"icon",type:"arrow-right",size:"12"})),ne.indexOf(P)>-1&&!k?l.default.createElement("li",{className:"sob-option-input"},l.default.createElement("span",{className:"sob-option-input-lable"},l.default.createElement("span",{className:"sob-option-input-label sob-option-input-label-main"},"账套模版"),l.default.createElement("span",{style:{color:"#d10000"}},"*")),l.default.createElement(s.SinglePicker,{className:"sob-option-input-singlepicker",district:K,onOk:function(e){var t=W.find(function(t){return t.get("modelNumber")===e.value});u(m.changeZNSobModel(t)),u(m.changeSobTemplate(e.value))}},l.default.createElement("span",{className:"sob-option-input-singlepicker-inner"},K.find(function(e){return e.value===P}).key)),l.default.createElement(s.Icon,{className:"icon",type:"arrow-right",size:"12"})):"",te.indexOf(P)>-1&&!k?l.default.createElement("li",{className:"sob-option-input"},l.default.createElement("span",{className:"sob-option-input-lable"},l.default.createElement("span",{className:"sob-option-input-label sob-option-input-label-main"},"账套模版"),l.default.createElement("span",{style:{color:"#d10000"}},"*")),l.default.createElement(c.default,{className:"sob-option-input-singlepicker",parentDisabled:!0,onChange:function(e){if("识别码复制"===e.key)return O||(t.setState({gettedIdentifyingCodeList:!0}),u(m.getIdentifyingCodeList())),u(m.initIdentifyingCodeTemp()),void g.push("/config/sob/copymodule");if(H.find(function(t){return t.get("modelId")===e.key})){var n=H.find(function(t){return t.get("modelId")===e.key});if(u(m.changeZNSobModel(n)),!0===n.get("newJr"))n.getIn(["moduleMap","INVENTORY"])&&(Y=Y.setIn(["INVENTORY","beOpen"],n.getIn(["moduleMap","INVENTORY","beOpen"]))),n.getIn(["moduleMap","PROJECT"])&&(Y=Y.setIn(["PROJECT","beOpen"],n.getIn(["moduleMap","PROJECT","beOpen"]))),n.getIn(["moduleMap","QUANTITY"])&&!Y.getIn(["QUANTITY","beOverdue"])&&(Y=Y.setIn(["QUANTITY","beOpen"],n.getIn(["moduleMap","QUANTITY","beOpen"]))),n.getIn(["moduleMap","ASSIST"])&&!Y.getIn(["ASSIST","beOverdue"])&&(Y=Y.setIn(["ASSIST","beOpen"],n.getIn(["moduleMap","ASSIST","beOpen"]))),n.getIn(["moduleMap","SERIAL"])&&!Y.getIn(["SERIAL","beOverdue"])&&(Y=Y.setIn(["SERIAL","beOpen"],n.getIn(["moduleMap","SERIAL","beOpen"]))),n.getIn(["moduleMap","BATCH"])&&!Y.getIn(["BATCH","beOverdue"])&&(Y=Y.setIn(["BATCH","beOpen"],n.getIn(["moduleMap","BATCH","beOpen"]))),n.getIn(["moduleMap","WAREHOUSE"])&&!Y.getIn(["WAREHOUSE","beOverdue"])&&(Y=Y.setIn(["WAREHOUSE","beOpen"],n.getIn(["moduleMap","WAREHOUSE","beOpen"]))),n.getIn(["moduleMap","SCXM"])&&!Y.getIn(["SCXM","beOverdue"])&&(Y=Y.setIn(["SCXM","beOpen"],n.getIn(["moduleMap","SCXM","beOpen"]))),n.getIn(["moduleMap","SGXM"])&&!Y.getIn(["SGXM","beOverdue"])&&(Y=Y.setIn(["SGXM","beOpen"],n.getIn(["moduleMap","SGXM","beOpen"]))),u(m.sobOptionChangeContent("moduleInfo",Y)),u(m.sobOptionChangeContent("moduleMap",n.get("moduleMap")));else{var o=Y.setIn(["INVENTORY","beOpen"],!0).setIn(["PROJECT","beOpen"],!0);u(m.sobOptionChangeContent("moduleInfo",o)),u(m.sobOptionChangeContent("moduleMap",o))}}else{var a=D.find(function(t){return t.get("sobId")===e.key});u(m.setSobChangeCopyModuleItem(a,e.key,!1)),g.push("/config/sob/copymodule")}},district:ee},l.default.createElement("span",{className:j?"sob-option-input-single-inner":"sob-option-input-single-inner sob-option-month-picker-wrap-placeholder"},j?!0===j.get("customize")?j.get("sobName")+" (起始账期:"+j.get("firstYear")+"年"+j.get("firstMonth")+"月)":j.get("modelName")?j.get("modelName"):j.get("sobName"):"请选择")),l.default.createElement(s.Icon,{className:"icon",type:"arrow-right",size:"12"})):"",ne.indexOf(P)>-1?l.default.createElement("li",{className:"sob-option-input"},l.default.createElement("span",{className:"sob-option-input-lable"},l.default.createElement("span",{className:"sob-option-input-label sob-option-input-label-main"},"会计年度"),l.default.createElement("span",{style:{color:"#d10000"}},"*")),l.default.createElement(s.Single,{className:"sob-option-input-singlepicker",district:$,onOk:function(e){return u(m.sobOptionChangeContent("periodStartMonth",e.value))}},l.default.createElement("span",{className:"sob-option-input-single-inner"},$.find(function(e){return e.value===Z}).key)),l.default.createElement(s.Icon,{className:"icon",type:"arrow-right",size:"12"})):"",ne.indexOf(P)>-1&&x&&x.get("beOpen")?l.default.createElement("li",{className:"sob-option-input"},l.default.createElement("span",{className:"sob-option-input-lable"},l.default.createElement("span",{className:"sob-option-input-label sob-option-input-label-main"},"本位币"),l.default.createElement("span",{style:{color:"#d10000"}},"*")),l.default.createElement(s.Single,{className:"sob-option-input-singlepicker",district:de,value:X?_.find(function(e){return e.get("fcNumber")==X})?_.find(function(e){return e.get("fcNumber")==X}).get("name"):"":"人民币",onOk:function(e){u(m.changeSobCurrencyModel(e.value))}},l.default.createElement("span",{className:"sob-option-input-single-inner"},X?_.find(function(e){return e.get("fcNumber")==X})?_.find(function(e){return e.get("fcNumber")==X}).get("name"):"":"人民币")),l.default.createElement(s.Icon,{className:"icon",type:"arrow-right",size:"12"})):"",l.default.createElement(s.Multiple,{district:ce,value:pe,title:"功能模块",onOk:function(e){var t=e.map(function(e){return e.value});u(m.sobOptionChangeFunMultipleModuel(t,ce))}},l.default.createElement("li",{className:"sob-option-input"},l.default.createElement("span",{className:"sob-option-input-lable"},l.default.createElement("span",{className:"sob-option-input-label sob-option-input-label-main"},"功能模块")),l.default.createElement("div",{className:"sob-option-input-fun"},l.default.createElement("span",{className:"sob-option-input-fun-detail"},se.map(function(e,t){return l.default.createElement("span",{key:t},se.length-1==t?e:e+"、")})),l.default.createElement(s.Icon,{className:"icon",type:"arrow-right",size:"12"})))),l.default.createElement("li",{className:"sob-option-input",style:{background:S?"#fbfbfb":"#fff"},onClick:function(){return t.setState({showRoleList:!S})}},l.default.createElement("span",{className:"sob-option-input-lable"},l.default.createElement("span",{className:"sob-option-input-label sob-option-input-label-main"},"角色权限")),l.default.createElement("div",{className:"sob-option-input-fun"}),l.default.createElement(s.Icon,{type:"arrow-down",size:"12"})),ue.map(function(t,n){return l.default.createElement("li",{className:"sob-option-input",style:fe},l.default.createElement("span",{className:"sob-option-input-lable"},l.default.createElement("span",{className:"sob-option-input-label"},"  - ",t.get("roleName"))),l.default.createElement("div",{className:"sob-option-input-fun",onClick:function(){!function(t,n,o){if(!e.isplayground){var a="";i.ROOTURL.indexOf("mtst.xfannix.com")>-1?a=r.APPID_TEST:i.ROOTURL.indexOf("mpre.xfannix.com")>-1?a=r.APPID_PREF:i.ROOTURL.indexOf("mobile.xfannix.com")>-1&&(a=r.APPID_FORM),p.complexPicker({title:n,corpId:sessionStorage.getItem("corpId"),multiple:!0,limitTips:"超出了",maxUsers:1e3,pickedUsers:t.map(function(e){return e.get("emplId")}).toJS(),pickedDepartments:[],disabledUsers:[],disabledDepartments:[],requiredUsers:[],requiredDepartments:[],appId:a,permissionType:"xxx",responseUserOnly:!0,startWithDepartmentId:0,onSuccess:function(e){e=e.users.map(function(e){return e.emplId=e.emplId.toString(),e}),o(e)},onFail:function(e){}})}}(t.get("userList"),"选择"+t.get("roleName"),function(e){u(m.changeSobPermissionList(ie,n,e))})}},l.default.createElement("div",{className:"sob-option-input-fun-role"},t.get("userList").size?l.default.createElement("span",{className:"sob-option-input-fun-role-list"},l.default.createElement("span",null,t.get("userList").map(function(e){return e.get("name")}).join("、"))):l.default.createElement("span",{className:"sob-option-input-fun-role-placeholder"})),l.default.createElement(s.Icon,{className:"icon",type:"arrow-right",size:"12"})))}))),l.default.createElement(s.ButtonGroup,{type:"ghost",height:50},l.default.createElement(s.Button,{onClick:function(){return g.goBack()}},l.default.createElement(s.Icon,{type:"cancel"}),"取消"),l.default.createElement(s.Button,{onClick:function(){if(""!==w){var e=30;if(/[\u4e00-\u9fa5]/g.test(w)||/[\u3002\uff1b\uff0c\uff1a\u201c\u201d\uff08\uff09\u3001\uff1f\u300a\u300b]/g.test(w)||(e=60),w.length>e)p.toast.info("账套名称包含中文及中文标点字符，长度不能超过30位；否则，长度不能超过60位");else if(""!==B)if(R.get("sobid")){if(o.get("sobList").filter(function(e){return e.get("sobid")===R.get("sobid")}).get(0).get("adminlist").find(function(e){return e.get("emplId")===q})||"TRUE"===Q){var t=te.indexOf(P)>-1&&Y.get("WAREHOUSE")&&!Y.getIn(["WAREHOUSE","beOpen"])&&h;u(m.sobOptionSave(g,t))}else p.Alert("您没有权限")}else{if(te.indexOf(P)>-1&&(!j||!j.get("modelId")))return void p.toast.info("账套模版不可为空");"TRUE"===Q||"TRUE"===F||"TRUE"===V||"TRUE"===z?u(m.sobOptionSave(g)):p.Alert("您没有权限")}else p.toast.info("起始账期不可为空")}else p.toast.info("账套名称不可为空")}},l.default.createElement(s.Icon,{type:"save"}),"保存")))}}]),n}())||o;t.default=S}).call(this,n(21))},2465:function(e,t,n){},2467:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(0),i=(a=u)&&a.__esModule?a:{default:a},r=(n(9),n(31)),s=(p(n(1628)),p(n(80))),c=n(16);function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var d=(0,r.connect)(function(e){return e})(o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={identifyingCode:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.sobConfigState,o=t.dispatch,a=t.history,l=this.state.identifyingCode,u=n.get("currentCopySobId"),r=n.get("isIdentifyingCode"),p=n.get("copyModuleMapItem"),d=n.get("identifyingCodeList"),f=n.get("tempSob"),m=f.get("moduleInfo"),g=f.get("customizeList"),b=f.get("jrModelList"),I=n.get("copyModuleIsNewJr"),S=["COPY_BASIS_SETTING","COPY_PRODUCTION_SETTING","COPY_CONSTRUCTION_SETTING","COPY_DEPOT_SETTING","COPY_QUANTITY_SETTING",,"COPY_ASSIST_SETTING","COPY_SERIAL_SETTING","COPY_BATCH_SETTING","COPY_BALANCE_SETTING"];return i.default.createElement(c.Container,{className:"sob-option"},i.default.createElement(c.ScrollView,{flex:"1"},r?i.default.createElement("div",{className:"sob-option-copy-input"},i.default.createElement(c.TextInput,{placeholder:"请输入识别码",value:l,onChange:function(t){e.setState({identifyingCode:t});var n=d.find(function(e){return e.get("copyCode")===t});n&&o(s.setSobChangeCopyModuleItem(n,"",!0))}})):null,r&&l?i.default.createElement("div",{className:"sob-option-choosen-right-or-not"},d.find(function(e){return e.get("copyCode")===l})?i.default.createElement("span",{style:{color:"green"}},"识别码正确，请选择需复制的内容"):i.default.createElement("span",{style:{color:"red"}},"识别码错误，请核对后再输入")):"",i.default.createElement("div",{className:"sob-option-choosen-tip",style:{display:r?l&&d.find(function(e){return e.get("copyCode")===l})?"":"none":""}},"选择需要复制的内容"),i.default.createElement("ul",{className:"sob-option-choosen-copy-list",style:{display:r?l&&d.find(function(e){return e.get("copyCode")===l})?"":"none":""}},S.map(function(e,t){if(p.get(e)){var n="COPY_BALANCE_SETTING"===e?p.getIn([e,"canModify"])&&S.every(function(e){return!p.get(e)||"COPY_BALANCE_SETTING"===e||p.getIn([e,"beOpen"])}):p.getIn([e,"canModify"]),a=!1;return"COPY_ASSIST_SETTING"!==e&&"COPY_SERIAL_SETTING"!==e&&"COPY_BATCH_SETTING"!==e||p.getIn(["COPY_QUANTITY_SETTING","beOpen"])||(a=!0),i.default.createElement("li",{key:t,className:"sob-option-choosen-copy-item",onClick:function(){I&&n&&!a&&(o(s.sobChangeCopyModuleItem(p.getIn([e,"moduleCode"]),!p.getIn([e,"beOpen"]))),!1==!p.getIn([e,"beOpen"])&&"COPY_BALANCE_SETTING"!==e&&o(s.sobChangeCopyModuleItem(p.getIn(["COPY_BALANCE_SETTING","moduleCode"]),!1)),"COPY_QUANTITY_SETTING"===e&&!1==!p.getIn([e,"beOpen"])&&(p.get("COPY_ASSIST_SETTING")&&o(s.sobChangeCopyModuleItem(p.getIn(["COPY_ASSIST_SETTING","moduleCode"]),!1)),p.get("COPY_SERIAL_SETTING")&&o(s.sobChangeCopyModuleItem(p.getIn(["COPY_SERIAL_SETTING","moduleCode"]),!1)),p.get("COPY_BATCH_SETTING")&&o(s.sobChangeCopyModuleItem(p.getIn(["COPY_BATCH_SETTING","moduleCode"]),!1))))}},i.default.createElement("span",{className:"sob-option-choosen-copy-item-text"},p.getIn([e,"moduleName"])),i.default.createElement(c.Checkbox,{disabled:!I||!n||a,checked:p.getIn([e,"beOpen"])}))}return null}),["COPY_PROCESS_SETTING"].map(function(e,t){if(p.get(e)){var n=p.getIn([e,"canModify"]);return i.default.createElement("li",{key:t,className:"sob-option-choosen-copy-item",onClick:function(){I&&n&&o(s.sobChangeCopyModuleItem(p.getIn([e,"moduleCode"]),!p.getIn([e,"beOpen"])))}},i.default.createElement("span",{className:"sob-option-choosen-copy-item-text"},p.getIn([e,"moduleName"])),i.default.createElement(c.Checkbox,{disabled:!I||!n,checked:p.getIn([e,"beOpen"])}))}return null}))),i.default.createElement(c.ButtonGroup,{type:"ghost",height:50},i.default.createElement(c.Button,{onClick:function(){a.goBack()}},i.default.createElement(c.Icon,{type:"cancel"}),i.default.createElement("span",null,"取消")),i.default.createElement(c.Button,{onClick:function(){var e=void 0;if(r){var t=d.find(function(e){return e.get("copyCode")===l});e=t.set("modelId",t.get("sobId")).set("copyModuleMap",p)}else{var n=g.find(function(e){return e.get("sobId")===u});e=(e=b.find(function(e){return!0===e.get("customize")})).merge(n).set("modelId",n.get("sobId")).set("copyModuleMap",p)}if(o(s.changeZNSobModel(e)),!0===e.get("newJr")){var i=e.get("moduleMap");e.getIn(["moduleMap","PROCESS"])&&!m.getIn(["PROCESS","beOverdue"])&&(m=m.set("PROCESS",e.getIn(["moduleMap","PROCESS"])),i=i.setIn(["PROCESS","beOpen"],e.getIn(["copyModuleMap","COPY_PROCESS_SETTING","beOpen"]))),e.getIn(["moduleMap","INVENTORY"])&&(m=m.set("INVENTORY",e.getIn(["moduleMap","INVENTORY"]))),e.getIn(["moduleMap","PROJECT"])&&(m=m.set("PROJECT",e.getIn(["moduleMap","PROJECT"]))),e.getIn(["moduleMap","QUANTITY"])&&!m.getIn(["QUANTITY","beOverdue"])&&(m=m.set("QUANTITY",e.getIn(["moduleMap","QUANTITY"])),i=i.setIn(["QUANTITY","beOpen"],e.getIn(["copyModuleMap","COPY_QUANTITY_SETTING","beOpen"]))),e.getIn(["moduleMap","ASSIST"])&&!m.getIn(["ASSIST","beOverdue"])&&(m=m.setIn(["ASSIST","beOpen"],e.getIn(["moduleMap","ASSIST","beOpen"])),i=i.setIn(["ASSIST","beOpen"],e.getIn(["copyModuleMap","COPY_ASSIST_SETTING","beOpen"]))),e.getIn(["moduleMap","SERIAL"])&&!m.getIn(["SERIAL","beOverdue"])&&(m=m.setIn(["SERIAL","beOpen"],e.getIn(["moduleMap","SERIAL","beOpen"])),i=i.setIn(["SERIAL","beOpen"],e.getIn(["copyModuleMap","COPY_SERIAL_SETTING","beOpen"]))),e.getIn(["moduleMap","BATCH"])&&!m.getIn(["BATCH","beOverdue"])&&(m=m.setIn(["BATCH","beOpen"],e.getIn(["moduleMap","BATCH","beOpen"])),i=i.setIn(["BATCH","beOpen"],e.getIn(["copyModuleMap","COPY_BATCH_SETTING","beOpen"]))),e.getIn(["moduleMap","WAREHOUSE"])&&!m.getIn(["WAREHOUSE","beOverdue"])&&(m=m.set("WAREHOUSE",e.getIn(["moduleMap","WAREHOUSE"])),i=i.setIn(["WAREHOUSE","beOpen"],e.getIn(["copyModuleMap","COPY_DEPOT_SETTING","beOpen"]))),e.getIn(["moduleMap","SCXM"])&&!m.getIn(["SCXM","beOverdue"])&&(m=m.set("SCXM",e.getIn(["moduleMap","SCXM"])),i=i.setIn(["SCXM","beOpen"],e.getIn(["copyModuleMap","COPY_PRODUCTION_SETTING","beOpen"]))),e.getIn(["moduleMap","SGXM"])&&!m.getIn(["SGXM","beOverdue"])&&(m=m.set("SGXM",e.getIn(["moduleMap","SGXM"])),i=i.setIn(["SGXM","beOpen"],e.getIn(["copyModuleMap","COPY_CONSTRUCTION_SETTING","beOpen"]))),o(s.sobOptionChangeContent("moduleInfo",m)),o(s.sobOptionChangeContent("moduleMap",i))}else{var c=m.setIn(["INVENTORY","beOpen"],!0).setIn(["PROJECT","beOpen"],!0);o(s.sobOptionChangeContent("moduleInfo",c)),o(s.sobOptionChangeContent("moduleMap",c))}a.goBack()}},i.default.createElement(c.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||o;t.default=d}}]);