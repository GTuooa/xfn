(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{1325:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_CURRENCY_MXB="INIT_CURRENCY_MXB",t.GET_CURRENCY_MXB_ACLIST="GET_CURRENCY_MXB_ACLIST",t.GET_CURRENCY_DETAIL_FETCH="GET_CURRENCY_DETAIL_FETCH",t.CHANGE_CUR_MXB_BEGIN_DATE="CHANGE_CUR_MXB_BEGIN_DATE",t.CHANGE_CURRENCY_CURRENTPAGE="CHANGE_CURRENCY_CURRENTPAGE",t.GET_CURRENCY_MXB_ACNAME="GET_CURRENCY_MXB_ACNAME"},1384:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeCurrencyCurrentPage=t.changeCurMxbBeginDate=t.getVcFetch=t.getCurrencyDetailListFetch=t.getCurrencyMxbAcListFetch=void 0;var a,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=n(13),u=n(24),o=(a=u)&&a.__esModule?a:{default:a},i=m(n(1325)),s=m(n(184)),l=n(1072),f=m(n(10)),d=m(n(25));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.getCurrencyMxbAcListFetch=function(e,t,n,a,r){return function(u){var s=""+t.substr(0,4)+t.substr(5,2),l=n?""+n.substr(0,4)+n.substr(5,2):s;f.toast.loading(d.LOADING_TIP_TEXT,0),(0,o.default)("getFCDetailAc","POST",JSON.stringify({begin:s,end:l}),function(o){(0,c.showMessage)(o)&&(f.toast.hide(),u({type:i.GET_CURRENCY_MXB_ACLIST,receivedData:o.data}),u({type:i.GET_CURRENCY_MXB_ACNAME,acid:a,acName:r}),u(g(t,n,e,a,r)))})}};var g=t.getCurrencyDetailListFetch=function(e,t,n,a,r,u,s){return function(r){var l=""+e.substr(0,4)+e.substr(5,2),m=t?""+t.substr(0,4)+t.substr(5,2):l;f.toast.loading(d.LOADING_TIP_TEXT,0),(0,o.default)("getFCDetail","POST",JSON.stringify({begin:l,end:m,fcNumber:n,acid:a||"",asscategory:u||"",assid:s||""}),function(u){(0,c.showMessage)(u)&&(f.toast.hide(),r({type:i.GET_CURRENCY_DETAIL_FETCH,receivedData:u.data,issuedate:e,endissuedate:t,fcNumber:n,acid:a||""}))})}};t.getVcFetch=function(e,t,n,a){return function(u){var i=(0,c.jsonifyDate)(e);f.toast.loading(d.LOADING_TIP_TEXT,0),(0,o.default)("getvc","POST",JSON.stringify(r({},i,{vcindex:t})),function(e){(0,c.showMessage)(e)&&(f.toast.hide(),sessionStorage.setItem("lrpzHandleMode","modify"),u((0,l.pushVouhcerToLrpzReducer)(e.data)),sessionStorage.setItem("router-from","currencymxb"),n.push("/lrpz"),u(s.setVcList(a)),u(s.setCkpzIsShow(!0)))})}},t.changeCurMxbBeginDate=function(e,t){return{type:i.CHANGE_CUR_MXB_BEGIN_DATE,begin:e,bool:t}},t.changeCurrencyCurrentPage=function(e){return{type:i.CHANGE_CURRENCY_CURRENTPAGE,currentPage:e}}},1432:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments[1];return((e={},c(e,r.INIT_CURRENCY_MXB,function(){return u}),c(e,r.GET_CURRENCY_MXB_ACLIST,function(){return t.set("currencyAcList",(0,a.fromJS)(n.receivedData))}),c(e,r.GET_CURRENCY_DETAIL_FETCH,function(){return t.set("currencyDetailList",(0,a.fromJS)(n.receivedData)).set("issuedate",n.issuedate).set("currentFcNumber",n.fcNumber).set("currentAcId",n.acid).set("endissuedate",n.endissuedate).set("currentPage",1)}),c(e,r.GET_CURRENCY_MXB_ACNAME,function(){return t.set("acid",n.acid).set("acName",n.acName)}),c(e,r.CHANGE_CUR_MXB_BEGIN_DATE,function(){return t=n.bool?t.set("endissuedate",n.begin):t.set("issuedate",n.begin)}),c(e,r.CHANGE_CURRENCY_CURRENTPAGE,function(){return t=t.set("currentPage",n.currentPage)}),e)[n.type]||function(){return t})()};var a=n(9),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1325));function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=(0,a.fromJS)({issuedate:"",endissuedate:"",currentFcNumber:"",currentPage:1,currentAcId:"",acid:"",acName:"",currencyAcList:[],currencyDetailList:{acid:"",name:"",number:"",direction:"",debit:"",credit:"",fcDebit:"",fcCredit:"",openingBalance:"",closingBalance:"",fcOpeningBalance:"",fcClosingBalance:"",jvList:[]}})},2385:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=p(n(0)),u=n(31),o=n(9),i=E(n(10)),s=n(123),l=n(16);n(2386),n(1620);var f=p(n(2388)),d=E(n(25)),m=E(n(1384)),g=E(n(181));E(n(1076));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var b=(0,u.connect)(function(e){return e})(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollerHeight=0,n.state={showAcInfo:e.currencyMxbState.get("acid")+":"+e.currencyMxbState.get("acName"),showAc:"全部"},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),r(t,[{key:"componentDidMount",value:function(){if(i.setTitle({title:"外币明细表"}),i.setIcon({showIcon:!1}),"currencyYeb"===sessionStorage.getItem("previousPage")&&sessionStorage.removeItem("previousPage"),"cxpz"===sessionStorage.getItem("prevPage")){sessionStorage.removeItem("prevPage");var e=this.props,t=e.dispatch,n=e.currencyMxbState;e.history;t(m.getCurrencyDetailListFetch(n.get("issuedate"),n.get("endissuedate"),n.get("currentFcNumber")))}var a=document.getElementsByClassName("scroll-view")[0];this.scrollerHeight=parseFloat(window.getComputedStyle(a).height)}},{key:"componentWillReceiveProps",value:function(e){e.currencyMxbState.get("acid")!==this.props.currencyMxbState.get("acid")&&this.setState({showAcInfo:e.currencyMxbState.get("acid")+":"+e.currencyMxbState.get("acName")})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.allState,r=t.currencyMxbState,u=t.history,E=this.state,p=E.showAcInfo,b=E.showAc;i.setTitle({title:"外币明细表"});var _=a.get("issues"),C=r.get("issuedate"),v=r.get("endissuedate"),y=_.findIndex(function(e){return e.get("value")===C}),N=_.slice(0,y),h=r.get("currencyDetailList"),T=h?h.get("jvList"):(0,o.fromJS)([]),A=r.get("currencyAcList"),M=r.get("currentFcNumber"),w=r.get("currentAcId"),x=A&&A.find(function(e){return e.get("fcNumber")==M}),O=x?x.get("acList"):(0,o.fromJS)([]),P=r.get("currentPage"),R=(r.get("acid"),r.get("acName")),S=O.map(function(e){return{key:""+e.get("acid")+d.EMPTY_CONNECT+e.get("acname"),value:""+e.get("acid")+d.EMPTY_CONNECT+e.get("acname")}}),I=A.map(function(e){return{key:""+e.get("fcNumber")+d.EMPTY_CONNECT+e.get("name"),value:""+e.get("fcNumber")+d.EMPTY_CONNECT+e.get("name")}}),D=""+C.substr(0,4)+C.substr(5,2),L=v?""+v.substr(0,4)+v.substr(5,2):D;return n(g.navigationSetMenu("lrb",function(){return function(e){return e(g.allExportDo("pdfFcSub",{begin:D,end:L,number:M,acid:w||"",assid:"",asscategory:""}))}},function(){return function(e){return e(g.allExportDo("excelFcSubOne",{begin:D,end:L,number:M,acid:w||"",assid:"",asscategory:""}))}})),c.default.createElement(l.Container,{className:"kmyeb amountmxb currencymxb"},c.default.createElement(s.TopMonthPicker,{issuedate:C,source:_,callback:function(e){return n(m.getCurrencyDetailListFetch(e,v,M))},onOk:function(e){return n(m.getCurrencyDetailListFetch(e.value,v,M))},showSwitch:!0,endissuedate:v,nextperiods:N,onBeginOk:function(e){n(m.getCurrencyDetailListFetch(e.value,"",M))},onEndOk:function(e){n(m.getCurrencyDetailListFetch(C,e.value,M))},changeEndToBegin:function(){n(m.getCurrencyDetailListFetch(C,"",M))}}),c.default.createElement(l.Row,{className:"amountmxb-title"},c.default.createElement("div",{className:"amountmxb-title-acinfo"},c.default.createElement("span",{className:"amountmxb-title-ac"},h.get("number")+"_"+h.get("name")),c.default.createElement("div",{style:{flex:1,textAlign:"right"}},c.default.createElement(l.SinglePicker,{district:I.toJS(),value:"",onOk:function(e){var t=e.value.split(d.EMPTY_CONNECT)[0];n(m.getCurrencyDetailListFetch(C,v,t))}},c.default.createElement(l.Icon,{type:"triangle"})))),R?c.default.createElement(l.SinglePicker,{district:S.toJS(),value:"",onOk:function(t){var a=t.value.split(d.EMPTY_CONNECT)[0];e.setState({showAcInfo:t.value.replace(d.EMPTY_CONNECT,"：")}),n(m.getCurrencyDetailListFetch(C,v,M,a))}},c.default.createElement("div",{className:"amountmxb-title-assinfo"},c.default.createElement("span",null,c.default.createElement("span",null,O.size?p:"无"),O.size?c.default.createElement(l.Icon,{type:"arrow-down"}):""))):c.default.createElement(l.SinglePicker,{district:S.toJS(),value:"",onOk:function(t){var a=t.value.split(d.EMPTY_CONNECT)[0];e.setState({showAc:t.value.replace(d.EMPTY_CONNECT,"：")}),n(m.getCurrencyDetailListFetch(C,v,M,a))}},c.default.createElement("div",{className:"amountmxb-title-assinfo"},c.default.createElement("span",null,c.default.createElement("span",null,b),O.size?c.default.createElement(l.Icon,{type:"arrow-down"}):"")))),c.default.createElement(l.Row,{className:"amountmxb-main-top"},c.default.createElement("span",{className:"amountmxb-main-amount-odd"},"期初",c.default.createElement("span",{className:"amountmxb-main-amount-odd-direction"},"(借方)")),c.default.createElement("span",{className:"amountmxb-main-amount"},c.default.createElement(l.Amount,{showZero:!0},h.get("openingBalance")),c.default.createElement(l.Amount,{className:"mxb-amount-color",showZero:!0},h.get("fcOpeningBalance")))),c.default.createElement(l.ScrollView,{flex:"1",uniqueKey:"currencymxb-scroll",savePosition:!0,onScroll:function(t){t.target.scrollTop+e.scrollerHeight+100>=P*d.MXB_LOAD_SIZE*78&&P<T.size/d.MXB_LOAD_SIZE&&n(m.changeCurrencyCurrentPage(P+1))}},c.default.createElement("ul",{className:"amountmxb-main-list"},T.slice(0,P*d.MXB_LOAD_SIZE).map(function(e,t){return c.default.createElement(f.default,{key:t,idx:t,item:e,dispatch:n,issuedate:C,history:u,jvList:T})}))),c.default.createElement(l.Row,{className:"amountmxb-main-top"},c.default.createElement("span",{className:"amountmxb-main-amount-odd"},"期末",c.default.createElement("span",{className:"amountmxb-main-amount-odd-direction"},"(借方)")),c.default.createElement("span",{className:"amountmxb-main-amount"},c.default.createElement(l.Amount,{showZero:!0},h.get("closingBalance")),c.default.createElement(l.Amount,{className:"mxb-amount-color",showZero:!0},h.get("fcClosingBalance")))))}}]),t}())||a;t.default=b},2386:function(e,t,n){},2388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),o=(r=u)&&r.__esModule?r:{default:r},i=(n(9),n(22)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1384)),l=n(16);var f=(0,i.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),c(t,[{key:"render",value:function(){var e=this.props,t=(e.key,e.idx,e.item),n=e.dispatch,a=(e.issuedate,e.history),r=e.jvList,c=t.get("vcdate").replace(/-/g,".");return o.default.createElement("div",{className:"amountmxb-jv",onClick:function(){return n(s.getVcFetch(t.get("vcdate").slice(0,7),t.get("vcindex"),a,r))}},o.default.createElement("div",{className:"amountmxb-jv-title"},o.default.createElement("span",{className:"amountmxb-jv-abstract"},c+"-"+t.get("jvabstract"))),o.default.createElement("div",{className:"amountmxb-jv-content"},o.default.createElement("span",{className:"mxb-vcindex"},"记 ",t.get("vcindex")," 号"),o.default.createElement(l.Amount,{className:"mxb-amount",showZero:!0},t.get("jvamount")),o.default.createElement(l.Amount,{className:"mxb-amount-right",showZero:!0},t.get("balance"))),o.default.createElement("div",{className:"amountmxb-jv-content"},o.default.createElement("span",{className:"mxb-jvdirection"},"debit"==t.get("jvdirection")?"借":"贷"),o.default.createElement("span",{className:"mxb-amount mxb-amount-color"},o.default.createElement(l.Amount,{showZero:!0},t.get("standardAmount"))," *",o.default.createElement(l.Amount,{showZero:!0},t.get("exchange"))),o.default.createElement("span",{className:"mxb-amount mxb-amount-color"},o.default.createElement(l.Amount,{showZero:!0},t.get("fcBalance")))))}}]),t}())||a;t.default=f},993:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=u(n(2385)),r=u(n(1432)),c=u(n(1214));function u(e){return e&&e.__esModule?e:{default:e}}var o={currencyMxbState:r.default,lrpzState:c.default};t.reducer=o,t.view=a.default}}]);