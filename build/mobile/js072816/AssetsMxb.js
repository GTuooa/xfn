(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{1326:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_ASSETSYEB="INIT_ASSETSYEB",t.GET_ASSETS_DETAILFETCH="GET_ASSETS_DETAILFETCH",t.TOGGLELOWERDETAILASSETS="TOGGLELOWERDETAILASSETS",t.GET_DETAIL_LIST_SINGLE="GET_DETAIL_LIST_SINGLE",t.CHANGE_ASSETS_MXB_CURRENTPAGE="CHANGE_ASSETS_MXB_CURRENTPAGE"},1385:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeAssetsMxbCurrentPage=t.getDetailListSingle=t.toggleLowerDetailAssets=t.getAssetsDetailFetch=t.getPeriodAndAssetsDetailFetch=t.AllZcyebFetch=void 0;var s,n=a(13),i=a(24),r=(s=i)&&s.__esModule?s:{default:s},c=d(a(181)),o=d(a(1326)),u=d(a(10)),l=d(a(25));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.AllZcyebFetch=function(e,t){return function(a){a(_(e,t,"true"))}};var _=t.getPeriodAndAssetsDetailFetch=function(e,t,a){return function(s){var i=e?""+e.substr(0,4)+e.substr(5,2):"",o=t?""+t.substr(0,4)+t.substr(5,2):i;u.toast.loading(l.LOADING_TIP_TEXT,0),(0,r.default)("getassetsdetailmore","POST",JSON.stringify({begin:i,end:o,getPeriod:a}),function(t){if((0,n.showMessage)(t)){u.toast.hide();var a=s(c.everyTableGetPeriod(t)),i=e||a;s(f(t.data.mainData.detailList,i,""))}})}},f=(t.getAssetsDetailFetch=function(e,t){return function(a){var s=e?""+e.substr(0,4)+e.substr(5,2):"",i=t?""+t.substr(0,4)+t.substr(5,2):s;u.toast.loading(l.LOADING_TIP_TEXT,0),(0,r.default)("getassetsdetailmore","POST",JSON.stringify({begin:s,end:i}),function(s){(0,n.showMessage)(s)&&(u.toast.hide(),a(f(s.data.mainData.detailList,e,t)))})}},function(e,t,a){return function(s){s({type:o.GET_ASSETS_DETAILFETCH,receivedData:e,issuedate:t,endissuedate:a})}});t.toggleLowerDetailAssets=function(e){return{type:o.TOGGLELOWERDETAILASSETS,serialNumber:e}},t.getDetailListSingle=function(e,t,a,s,i){return function(c){var d=s?""+s.substr(0,4)+s.substr(5,2):"",_=i?""+i.substr(0,4)+i.substr(5,2):d;u.toast.loading(l.LOADING_TIP_TEXT,0),(0,r.default)("getMxList","POST",JSON.stringify({begin:d,end:_,serialNumber:e}),function(r){(0,n.showMessage)(r)&&c({type:o.GET_DETAIL_LIST_SINGLE,serialNumber:e,serialName:t,prePage:a,issuedate:s,endissuedate:i,receivedData:r.data.mainData})})}},t.changeAssetsMxbCurrentPage=function(e){return{type:o.CHANGE_ASSETS_MXB_CURRENTPAGE,currentPage:e}}},1433:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,a=arguments[1];return((e={},i(e,n.INIT_ASSETSYEB,function(){return r}),i(e,n.GET_ASSETS_DETAILFETCH,function(){return t.set("detailassetslist",(0,s.fromJS)(a.receivedData)).set("issuedate",a.issuedate).set("endissuedate",a.endissuedate).set("showedLowerAssdetalList",(0,s.fromJS)([]))}),i(e,n.TOGGLELOWERDETAILASSETS,function(){var e=t.get("showedLowerAssdetalList");return e.indexOf(a.serialNumber)>-1?t.update("showedLowerAssdetalList",function(e){return e.map(function(e){return e.indexOf(a.serialNumber)>-1?"":e}).filter(function(e){return!!e})}):t.update("showedLowerAssdetalList",function(e){return e.push(a.serialNumber)})}),i(e,n.GET_DETAIL_LIST_SINGLE,function(){var e=a.serialNumber,n=a.serialName;return 1===e.length?t=t.setIn(["assetsClass","serialNumber"],a.serialNumber).setIn(["assetsClass","serialName"],n).setIn(["classification","serialNumber"],"").setIn(["classification","serialName"],""):3===e.length?t="index"===a.prePage?t.setIn(["assetsClass","serialNumber"],a.receivedData.cardList[0].assetsNumber).setIn(["assetsClass","serialName"],a.receivedData.cardList[0].assetsName).setIn(["classification","serialNumber"],a.serialNumber).setIn(["classification","serialName"],n):t.setIn(["classification","serialNumber"],a.serialNumber).setIn(["classification","serialName"],n):"全部"===e&&(t=t.setIn(["classification","serialNumber"],"").setIn(["classification","serialName"],"")),t=t.set("detailMx",(0,s.fromJS)(a.receivedData)).set("issuedate",a.issuedate).set("endissuedate",a.endissuedate).set("currentPage",1)}),i(e,n.CHANGE_ASSETS_MXB_CURRENTPAGE,function(){return t=t.set("currentPage",a.currentPage)}),e)[a.type]||function(){return t})()};var s=a(9),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1326));function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var r=(0,s.fromJS)({issuedate:"",endissuedate:"",currentPage:1,showedLowerAssdetalList:[],detailassetslist:[{alreadyTime:0,cardValue:0,currentDepreciation:0,serialName:"",serialNumber:"",termDepreciation:0,totalTime:0,upperNumber:""}],assetsClass:{serialName:"",serialNumber:""},classification:{serialName:"",serialNumber:""},detailMxList:{1:[],2:[],3:[],4:[],5:[]},detailMx:{}})},1443:function(e,t,a){},1445:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=handleAssets;var _immutable=__webpack_require__(9),_ActionTypes=__webpack_require__(1442),ActionTypes=_interopRequireWildcard(_ActionTypes),_thirdParty=__webpack_require__(10),thirdParty=_interopRequireWildcard(_thirdParty);function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var assetsState=(0,_immutable.fromJS)({currentassetsindex:1,showSelectlabel:!1,assetsConfigMode:"insert",assetsCardMode:"insert",showCardDetail:!0,allModifyButtonDisplay:!1,showedLowerAssetsIdList:[],assetsCheckboxDisplay:!1,selectLabeListAllDisplay:!1,selectLabeList:[],periodIssuedate:"",tabSelectedIndex:0,selectAcIndex:"",classificationOrCard:"",assetslist:[],classification:{serialNumber:"",serialName:"",upperAssetsName:"",upperAssetsNumber:"",depreciationMethod:"平均年限法",totalMonth:"",salvage:"",assetsAcId:"",assetsAcName:"",assetsAcAssList:[],debitId:"",debitName:"",debitAssList:[],creditId:"",creditName:"",creditAssList:[],remark:""},card:{serialNumber:"",oldSerialNumber:"",cardNumber:"",cardName:"",assetsName:"",assetsNumber:"",classificationName:"",classificationNumber:"",label:[],startTime:"",inputPeriod:"",depreciationMethod:"平均年限法",totalMonth:"",debitId:"",debitName:"",debitAssList:[],creditId:"",creditName:"",creditAssList:[],cardValue:"",salvage:"",residualValue:"",monthlyDepreciation:"",alreadyDepreciationTime:"",sumDepreciation:"",earlyNetWorth:"",status:"0",currentCardTime:"",remark:""},cardDetailList:{1:[],2:[],3:[],4:[],5:[]}});function handleAssets(){var _ActionTypes$INIT_ASS,state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:assetsState,action=arguments[1];return((_ActionTypes$INIT_ASS={},_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.INIT_ASSETS,function(){return assetsState}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.INIT_ASSETS_STATUS,function(){return state.set("allModifyButtonDisplay",!1)}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.INIT_ASSETS_CARD,function(){return state.set("card",assetsState.get("card"))}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.INIT_ASSETS_CLASSIFICATION,function(){return state.set("classification",assetsState.get("classification"))}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.GET_LABEL_LIST,function(){return state.set("selectLabeList",(0,_immutable.fromJS)(action.receivedData.data))}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.GET_ASSESTS_LIST_FETCH,function(){var e={1:[],2:[],3:[],4:[],5:[]};return state=state.set("assetslist",(0,_immutable.fromJS)(action.receivedData)),action.receivedData&&(0,_immutable.fromJS)(action.receivedData).forEach(function(t,a){7===t.get("serialNumber").length&&e[t.get("serialNumber").substr(0,1)].push(t.get("serialNumber")),state=state.setIn(["assetslist",a,"idx"],a).setIn(["assetslist",a,"checked"],!1)}),state.set("cardDetailList",(0,_immutable.fromJS)(e))}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.SHOW_ALL_MODIFY_BUTTON,function(){return state.update("allModifyButtonDisplay",function(e){return!e}).update("showedLowerAssetsIdList",function(e){return e.merge(["1","2","3","4","5"])})}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.TOGGLE_LOWER_ASSETS,function(){return state.get("showedLowerAssetsIdList").indexOf(action.id)>-1?state.update("showedLowerAssetsIdList",function(e){return e.map(function(e){return e.indexOf(action.id)>-1?"":e}).filter(function(e){return!!e})}):state.update("showedLowerAssetsIdList",function(e){return e.push(action.id)})}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_SALVAGE,function(){return/^[0-9\.]*$/g.test(action.value)||""===action.value?action.value>100?state:state.updateIn(["classification","salvage"],function(e){return action.value}):state}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_DEFAULT_USE_MONTH,function(){return(/^[0-9]*$/g.test(action.value)||""===action.value)&&(state=state.updateIn(["classification","totalMonth"],function(e){return action.value})),state}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_SERIAL_NAME,function(){return state.updateIn(["classification","serialName"],function(e){return action.name})}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_CLASSIFICATION_ID,function(){var id=action.id,upperAssetsNumber=action.upperAssetsNumber,re=eval("/^"+upperAssetsNumber+"[0-9]*$/g");return re.test(id)&&id.length<4&&(state=state.updateIn(["classification","serialNumber"],function(e){return id})),state}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_REMARK,function(){return state.updateIn(["classification","remark"],function(e){return action.remark})}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.BEFORE_INSERT_CLASSIFICATION,function(){return state.set("classification",(0,_immutable.fromJS)(action.receivedData)).set("assetsConfigMode","insert").set("currentassetsindex",action.currentassetsindex).setIn(["classification","serialNumber"],action.newassetsId).setIn(["classification","upperAssetsNumber"],action.currentassetsindex).setIn(["classification","upperAssetsName"],action.upperAssetsName).setIn(["classification","remark"],"").setIn(["classification","serialName"],"")}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.ASSETS_SELECT_AC,function(){var e=action.selectAcIndex,t=action.classificationOrCard;state=state.setIn([t,e+"Id"],action.acid).setIn([t,e+"Name"],action.acname);var a=action.asscategorylist;return a.size?state.setIn([t,e+"AssList"],(0,_immutable.fromJS)(a.map(function(e){return(0,_immutable.fromJS)({assCategory:e})}))):state.updateIn([t,e+"AssList"],function(e){return e.clear()})}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.GET_CLASSIFICATION_FETCH,function(){return state.set("assetsConfigMode","modify").set("classification",(0,_immutable.fromJS)(action.receivedData.data))}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.ENTER_ASSETS_ASSLIST,function(){var e=action.value.split("_");return state.setIn(["classification","assetsAcAssList",0,"assId"],e[0]).setIn(["classification","assetsAcAssList",0,"assName"],e[1])}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.AFTER_ENTER_CLASSIFICATION,function(){return state.set("allModifyButtonDisplay",!1).set("assetsConfigMode","insert")}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.ENTER_CLASSIFICATION_OR_CARD_ASSLIST,function(){var e=action.value.split("_"),t=action.classificationOrCard,a=action.strAsslist;return state.setIn([t,a,action.idx,"assId"],e[0]).setIn([t,a,action.idx,"assName"],e[1])}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.SELECT_ASSETS_ITEM,function(){return state.updateIn(["assetslist",action.idx,"checked"],function(e){return!e})}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_ASSETS_CHECKBOX,function(){return 0===state.get("showedLowerAssetsIdList").size&&(state=state.update("showedLowerAssetsIdList",function(e){return e.merge(["1","2","3","4","5"])})),state.update("assetsCheckboxDisplay",function(e){return!e})}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CANCEL_ASSETS_CHECKBOX,function(){return!1===action.bool?state.set("assetslist",state.get("assetslist").map(function(e){return e.set("checked",!1)})).update("assetsCheckboxDisplay",function(e){return!1}):state.set("assetslist",state.get("assetslist").map(function(e){return e.set("checked",!1)})).update("assetsCheckboxDisplay",function(e){return!e})}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.SELECT_ALL_ASSETS_CHECKBOX,function(){return state.set("assetslist",state.get("assetslist").map(function(e){return e.set("checked",!state.get("assetslist").every(function(e){return e.get("checked")}))}))}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_TAB_INDEX_ASSETSCONFIG,function(){return state.set("tabSelectedIndex",action.idx)}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.ASSETS_TO_AC,function(){return state.set("selectAcIndex",action.selectAcIndex).set("classificationOrCard",action.classificationOrCard)}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.GET_ASSETS_CARD_FETCH,function(){return state.set("assetsCardMode","detail").set("card",(0,_immutable.fromJS)(action.receivedData.data)).setIn(["card","oldSerialNumber"],action.oldSerialNumber).setIn(["card","oldCardNumber"],action.receivedData.data.cardNumber)}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_CARD_PERIOD,function(){return state.set("periodIssuedate",action.cardInputPeriod)}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.GET_CARDNUMBER_FETCH,function(){return state.set("card",assetsState.get("card")).setIn(["card","inputPeriod"],state.get("periodIssuedate")).setIn(["card","currentCardTime"],state.get("periodIssuedate")).setIn(["card","cardNumber"],action.receivedData.data).set("assetsCardMode","insert")}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_CARD_NAME,function(){return state.setIn(["card","cardName"],action.name)}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_CARD_NUNBER,function(){return state.setIn(["card","cardNumber"],action.value)}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CARD_AFTER_GET_CLASSIFICATION,function(){return state.setIn(["card","depreciationMethod"],action.receivedData.data.depreciationMethod).setIn(["card","debitId"],action.receivedData.data.debitId).setIn(["card","debitName"],action.receivedData.data.debitName).setIn(["card","debitAssList"],(0,_immutable.fromJS)(action.receivedData.data.debitAssList)).setIn(["card","creditId"],action.receivedData.data.creditId).setIn(["card","creditName"],action.receivedData.data.creditName).setIn(["card","creditAssList"],(0,_immutable.fromJS)(action.receivedData.data.creditAssList)).setIn(["card","totalMonth"],action.receivedData.data.totalMonth?action.receivedData.data.totalMonth:"").setIn(["card","salvage"],action.receivedData.data.salvage?action.receivedData.data.salvage:"")}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_CARD_REMARK,function(){return state.setIn(["card","remark"],action.remark)}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_CARD_SALVAGE,function(){return/^[0-9\.]*$/g.test(action.salvage)||""===action.salvage?action.salvage>100?state:state.updateIn(["card","salvage"],function(e){return action.salvage}):state}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_CARD_ORIGINAL_VALUE,function(){return/^\d*\.?\d{0,2}$/g.test(action.cardValue)||""===action.cardValue?state.updateIn(["card","cardValue"],function(e){return action.cardValue}):state}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_USE_MONTH,function(){return/^[0-9]{1,3}$/g.test(action.monthValue)||""===action.monthValue?state.updateIn(["card","totalMonth"],function(e){return action.monthValue}):state}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_START_USE_TIME,function(){var e=action.value.substr(0,4),t=action.value.substr(5,2),a=e+"/"+t+"/"+action.value.substr(8,2),s=action.issuedate.substr(0,4),n=action.issuedate.substr(6,2);return e>s||e===s&&t>n?thirdParty.Alert("日期不合法，不能超过录入日期"):state=state.setIn(["card","startTime"],a),state}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_CARD_ASSETS_NAME,function(){var e=action.value.split("_");return state.setIn(["card","assetsNumber"],e[0]).setIn(["card","assetsName"],e[1]).setIn(["card","classificationNumber"],"").setIn(["card","classificationName"],"").setIn(["card","serialNumber"],e[0]+"00")}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_CARD_CLASSIFICATION_NAME,function(){var e=action.value.split("_");return state.setIn(["card","classificationNumber"],e[0]).setIn(["card","classificationName"],e[1]).setIn(["card","serialNumber"],""+e[0])}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.BEFORE_ENTER_CARD,function(){return state.setIn(["card","residualValue"],action.residualValue).setIn(["card","monthlyDepreciation"],action.monthlyDepreciation).setIn(["card","alreadyDepreciationTime"],action.alreadyDepreciationTime).setIn(["card","sumDepreciation"],action.sumDepreciation).setIn(["card","earlyNetWorth"],action.earlyNetWorth).updateIn(["card","label"],function(e){return e.filter(function(e){return""!==e||" "!==e})})}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.BEFORE_MOFIFY_CARD,function(){return state.set("assetsCardMode","modify")}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_DETAIL_CARD,function(){return state.set("assetsCardMode","detail")}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_CARD_STATUS,function(){return"0"===action.status?state=state.setIn(["card","clearCardMonth"],"0").setIn(["card","clearCardYear"],"0"):"1"===action.status&&(state=state.setIn(["card","clearCardMonth"],action.openedmonth).setIn(["card","clearCardYear"],action.openedyear)),state.setIn(["card","status"],action.status)}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_SELECTLABEL_STATUS,function(){return state.set("showSelectlabel",action.status)}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_SELECT_LABELIST_ALL_DISPLAY,function(){return state.update("selectLabeListAllDisplay",function(e){return!e})}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_LABELINPUT,function(){""===action.labelList.get(0)&&(state=state.updateIn(["card","label"],function(e){return e.clear()}));var e=action.value.split(" ");return e.length>=4?(e.pop(),state):state.updateIn(["card","label"],function(t){return(0,_immutable.fromJS)(e)})}),_defineProperty(_ActionTypes$INIT_ASS,ActionTypes.CHANGE_LABEL_FROM_SELECT,function(){return""===action.labelList.get(0)&&(state=state.updateIn(["card","label"],function(e){return e.clear()})),action.labelList.size<4?action.labelList.indexOf(action.value)>-1?state.updateIn(["card","label"],function(e){return e.filter(function(e){return e!==action.value})}):action.labelList.size<3?state.updateIn(["card","label"],function(e){return e.push(action.value)}):state:state}),_ActionTypes$INIT_ASS)[action.type]||function(){return state})()}},2378:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,n,i=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),r=a(0),c=(n=r)&&n.__esModule?n:{default:n},o=a(31),u=a(9),l=S(a(1385)),d=a(16),_=S(a(10)),f=S(a(1249)),A=a(123),m=S(a(25));a(2379),a(1443);var p=S(a(181));function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var I=(0,o.connect)(function(e){return e})(s=function(e){function t(){var e,a,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return a=s=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),s.scrollerHeight=0,T(s,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),i(t,[{key:"componentDidMount",value:function(){_.setTitle({title:"资产明细表"}),_.setIcon({showIcon:!1});var e=document.getElementsByClassName("scroll-view")[0];this.scrollerHeight=parseFloat(window.getComputedStyle(e).height)}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,s=t.allState,n=t.assetsYebState,i=t.history,r=s.get("issues"),o=n.get("issuedate"),_=n.get("endissuedate"),S=r.findIndex(function(e){return e.get("value")===o}),T=r.slice(0,S),I=n.get("detailMx"),N=I.get("cardList")?I.get("cardList"):(0,u.fromJS)([]),y=n.get("detailassetslist"),b=y?y.toJS():[],E=n.get("assetsClass"),g=n.get("classification"),v=E.get("serialNumber"),L=E.get("serialName"),C=v+"_"+L,h=(g.get("serialNumber"),n.get("currentPage")),D=y.filter(function(e){return 1===e.get("serialNumber").length}).map(function(e){return{value:e.get("serialNumber")+"_"+e.get("serialName"),key:e.get("serialNumber")+"_"+e.get("serialName")}}),P=y.filter(function(e){return 0===e.get("serialNumber").indexOf(v.substr(0,1))&&3===e.get("serialNumber").length}).map(function(e){return{value:e.get("serialNumber")+"_"+e.get("serialName"),key:e.get("serialNumber")+"_"+e.get("serialName")}}).push({value:"全部_",key:"全部"}),O=_||o;return a(p.navigationSetMenu("lrb",function(){return function(e){return e(p.allExportDo("pdfAssertSub",{begin:""+o.substr(0,4)+o.substr(5,2),end:""+O.substr(0,4)+O.substr(5,2)}))}},function(){return function(e){return e(p.allExportDo("excelAssertSub",{begin:""+o.substr(0,4)+o.substr(5,2),end:""+O.substr(0,4)+O.substr(5,2)}))}})),c.default.createElement(d.Container,{className:"mxb"},c.default.createElement(A.TopMonthPicker,{issuedate:o,source:r,callback:function(e){g.get("serialNumber")?a(l.getDetailListSingle(g.get("serialNumber"),g.get("serialName"),"",e,_)):a(l.getDetailListSingle(v,L,"",e,_))},onOk:function(e){g.get("serialNumber")?a(l.getDetailListSingle(g.get("serialNumber"),g.get("serialName"),"",e.value,_)):a(l.getDetailListSingle(v,L,"",e.value,_))},showSwitch:!0,endissuedate:_,nextperiods:T,onBeginOk:function(e){g.get("serialNumber")?a(l.getDetailListSingle(g.get("serialNumber"),g.get("serialName"),"",e.value,_)):a(l.getDetailListSingle(v,L,"",e.value,_))},onEndOk:function(e){g.get("serialNumber")?a(l.getDetailListSingle(g.get("serialNumber"),g.get("serialName"),"",o,e.value)):a(l.getDetailListSingle(v,L,"",o,e.value))},changeEndToBegin:function(){g.get("serialNumber")?a(l.getDetailListSingle(g.get("serialNumber"),g.get("serialName"),"",o,"")):a(l.getDetailListSingle(v,L,"",o,""))}}),c.default.createElement(d.Row,{className:"mxb-title"},c.default.createElement(d.SinglePicker,{district:D,value:C,onOk:function(e){var t=e.value.split("_")[0],s=e.value.split("_")[1];a(l.getDetailListSingle(t,s,"",o,_))}},c.default.createElement("div",{className:"mxb-title-acinfo"},c.default.createElement("span",{className:"mxb-title-ac"},C),c.default.createElement(d.Icon,{className:"mxb-title-icon",type:"triangle"}))),c.default.createElement("div",{className:"mxb-title-assinfo"},c.default.createElement(d.SinglePicker,{className:"info-select assets-info-select",district:P.toJS(),value:g.get("serialNumber")?g.get("serialNumber")+"_":"全部_",onOk:function(e){var t=e.value.split("_")[0],s=e.value.split("_")[1];"全部"===t&&(t=v,s=L),a(l.getDetailListSingle(t,s,"",o,_))}},c.default.createElement("span",null,g.get("serialNumber")?g.get("serialNumber")+"_"+g.get("serialName"):"全部")))),c.default.createElement(d.Row,{className:"assetsmx-title assetsmx-title-self"},c.default.createElement("div",{className:"assetsmx-title-item"},"资产原值"),c.default.createElement("div",{className:"assetsmx-title-item"},"已用/总期"),c.default.createElement("div",{className:"assetsmx-title-item"},"本期(折/摊)"),c.default.createElement("div",{className:"assetsmx-title-item"},"期末净值")),c.default.createElement(d.ScrollView,{flex:"1",uniqueKey:"mxb-scroll",savePosition:!0,onScroll:function(t){t.target.scrollTop+e.scrollerHeight+100>=h*m.MXB_LOAD_SIZE*55&&h<N.size/m.MXB_LOAD_SIZE&&a(l.changeAssetsMxbCurrentPage(h+1))}},c.default.createElement("ul",{className:"mxb-main-list assets-main-list"},N.slice(0,h*m.MXB_LOAD_SIZE).map(function(e,t){return c.default.createElement("div",{className:"mxb-jv",key:t,onClick:function(){a(f.getAssetsCardFetch(e.get("cardNumber"),e.get("serialNumber"),i)),a(f.changeCardDetailList(b))}},c.default.createElement("div",{className:"mxb-jv-title"},c.default.createElement("span",{className:"mxb-jv-abstract mxb-amont-underline"},""+e.get("serialNumber")+e.get("cardNumber")+"_"+e.get("cardName"))),c.default.createElement("div",{className:"mxb-jv-content assetsmx-jv-content"},c.default.createElement(d.Amount,{className:"mxb-amont"},e.get("cardValue")),c.default.createElement("span",{className:"mxb-amont"},e.get("alreadyTime")+"/"+e.get("totalMonth")),c.default.createElement(d.Amount,{className:"mxb-amont",showZero:!0},e.get("currentDepreciation")),c.default.createElement(d.Amount,{className:"mxb-amont",showZero:!0},e.get("endNetWorth"))))}),N.size?"":c.default.createElement("div",{className:"mxb-no-vc"},"暂无凭证"))),c.default.createElement(d.Row,{className:"assetsmx-title assetsmx-botton assetsmx-title-self"},c.default.createElement("div",{className:"assetsmx-title-item"},c.default.createElement(d.Amount,null,I.get("cardValue"))),c.default.createElement("div",{className:"assetsmx-title-item"},"--"),c.default.createElement("div",{className:"assetsmx-title-item"},c.default.createElement(d.Amount,null,I.get("currentDepreciation"))),c.default.createElement("div",{className:"assetsmx-title-item"},c.default.createElement(d.Amount,null,I.get("endNetWorth")))))}}]),t}())||s;t.default=I},2379:function(e,t,a){},991:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var s=r(a(2378)),n=r(a(1433)),i=r(a(1445));function r(e){return e&&e.__esModule?e:{default:e}}var c={assetsYebState:n.default,assetsState:i.default};t.reducer=c,t.view=s.default}}]);