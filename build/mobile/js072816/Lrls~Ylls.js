(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1067:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.yllsActions=e.ActionTypes=void 0,e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},_(t,f.GET_YLLS_SINGLE_ACCOUNT,function(){var t=sessionStorage.getItem("ylPage");return e.set("data",(0,r.fromJS)(n.receivedData)).setIn([t+"Data","selectedIndex"],n.selectedIndex).setIn([t+"Data","idx"],n.idx)}),_(t,f.GET_YLLS_PREAMOUNT,function(){return e.setIn(["preData","preAmount"],n.data.preAmount).setIn(["preData","receiveAmount"],n.data.amount)}),_(t,f.GET_YLLS_UNTREATEDAMOUNT,function(){var t=0,a=0;return({accumulationAmount:function(){t=n.receivedData[n.amountType]+e.getIn(["data","acPayment","personAccumulationAmount"]),e=e.setIn(["data","accumulationAmount"],t)},socialSecurityAmount:function(){a=n.receivedData[n.amountType]+e.getIn(["data","acPayment","personSocialSecurityAmount"]),e=e.setIn(["data","socialSecurityAmount"],a)}}[n.amountType]||function(){return null})(),e}),t)[n.type]||function(){return e})()};var a,r=n(9),u=n(182),i=(a=u)&&a.__esModule?a:{default:a},o=d(n(25)),c=n(13),s=d(n(10));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,r.fromJS)({data:{categoryType:""},preData:{preAmount:0,receiveAmount:0},cxlsData:{selectedIndex:"0",idx:0},lsmxbData:{selectedIndex:"0",idx:0},zhmxbData:{selectedIndex:"0",idx:0},wlmxbData:{selectedIndex:"0",idx:0}});var A={getYllsSingleAccount:function(t,e,n,a,r){return function(u){s.toast.loading("加载中...",0),(0,i.default)("getRunningBusiness","GET","uuid="+n,function(n){s.toast.hide(),(0,c.showMessage)(n)&&(u({type:f.GET_YLLS_SINGLE_ACCOUNT,receivedData:n.data.result,selectedIndex:e,idx:a}),r&&t.push("/ylls"))})}},getXczcAccumulationAmount:function(){return function(t,e){var n=e().yllsState,a=n.getIn(["data","categoryUuid"]),r=n.getIn(["data","runningDate"]);s.toast.loading(o.LOADING_TIP_TEXT,0),(0,i.default)("getPaymentInfo","POST",JSON.stringify({categoryUuid:a,runningDate:r,acType:"AC_GJJ",accumulationAcId:"",accumulationAssId1:"",accumulationCategory1:"",accumulationAssId2:"",accumulationCategory2:""}),function(e){s.toast.hide(),(0,c.showMessage)(e)&&t({type:f.GET_YLLS_UNTREATEDAMOUNT,receivedData:e.data.result,amountType:"accumulationAmount"})})}},getXczcSocialSecurityAmount:function(){return function(t,e){var n=e().yllsState,a=n.getIn(["data","categoryUuid"]),r=n.getIn(["data","runningDate"]);(0,i.default)("getPaymentInfo","POST",JSON.stringify({categoryUuid:a,runningDate:r,acType:"AC_SB",socialSecurityAcId:"",socialSecurityAssId1:"",socialSecurityCategory1:"",socialSecurityAssId2:"",socialSecurityCategory2:""}),function(e){(0,c.showMessage)(e)&&t({type:f.GET_YLLS_UNTREATEDAMOUNT,receivedData:e.data.result,amountType:"socialSecurityAmount"})})}}},f=e.ActionTypes={GET_YLLS_SINGLE_ACCOUNT:"GET_YLLS_SINGLE_ACCOUNT",GET_YLLS_PREAMOUNT:"GET_YLLS_PREAMOUNT",GET_YLLS_UNTREATEDAMOUNT:"GET_YLLS_UNTREATEDAMOUNT"};e.yllsActions=A},1224:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xczcAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},f(t,l.GET_LB_XCZC_CARD_DETAIL,function(){var t=n.value.split(c.TREE_JOIN_STR),e=n.data.get("amount"),a="",r=n.receivedData.propertyCostList;1==r.length&&(a=r[0]);var i="",o="",s=n.receivedData.propertyPay,d=n.receivedData.acPayment.beAccrued;return"SX_FLF"===s&&(i="STATE_XC_YF",o="福利费支出"),d||"SX_GZXJ"!==s&&"SX_QTXC"!==s||(i="STATE_XC_FF",o=(0,T.abstractFun)(i,(0,u.fromJS)(n.receivedData))),d||"SX_SHBX"!==s&&"SX_ZFGJJ"!==s||(i="STATE_XC_JN",o=(0,T.abstractFun)(i,(0,u.fromJS)(n.receivedData))),g.mergeIn(["data"],(0,u.fromJS)(n.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","accountName"],n.data.get("accountName")).setIn(["data","accountUuid"],n.data.get("accountUuid")).setIn(["data","runningState"],i).setIn(["data","amount"],e).setIn(["data","propertyCost"],a).setIn(["data","runningAbstract"],o).setIn(["views","insertOrModify"],"insert")}),f(t,l.GET_LB_XCZC_FROM_YLLS,function(){var t=0,a=n.state.getIn(["data","paymentList"]).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=n,e.set("notHandleAmount",n)})});return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data")).setIn(["data","paymentList"],a).setIn(["data","jtAmount"],t)}),f(t,l.CHANGE_XCZC_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),f(t,l.CHANGE_XCZC_RUNNING_STATE,function(){return e.setIn(["data","runningState"],n.key)}),f(t,l.CHANGE_XCZC_ASSLIST,function(){var t=n.value.split(c.TREE_JOIN_STR),a={};return a.assId=t[0],a.assName=t[1],a.assCategory=t[2],e.setIn(["data","acPayment",n.acType,n.idx],(0,u.fromJS)(a))}),f(t,l.CHANGE_XCZC_ACCOUNT,function(){var t=n.value.split(c.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),f(t,l.XCZC_PERSON_AMOUNT,function(){return e.setIn(["data","acPayment",n.personType],n.value)}),f(t,l.XCZC_CALCULATE_AMOUNT,function(){var t=e.getIn(["data","acPayment","companyAccumulationAmount"]),a=e.getIn(["data","acPayment","personAccumulationAmount"]),r=e.getIn(["data","acPayment","companySocialSecurityAmount"]),u=e.getIn(["data","acPayment","personSocialSecurityAmount"]),i=e.getIn(["data","acPayment","incomeTaxAmount"]),o=e.getIn(["data","amount"]),c=void 0;switch(n.propertyPay){case"SX_GZXJ":c=(0,s.decimal)(Number(o)-Number(a)-Number(u)-Number(i));break;case"SX_ZFGJJ":c=(0,s.decimal)(Number(a)+Number(t));break;case"SX_SHBX":c=(0,s.decimal)(Number(r)+Number(u));break;default:c=0}return e.setIn(["data","acPayment","actualAmount"],c)}),f(t,l.XCZC_CLEAR_ACLIST,function(){switch(n.acType){case"fundList":e=e.setIn(["data","acPayment","fundList"],(0,u.fromJS)([])).setIn(["data","acPayment","personAccumulationAmount"],0);break;case"socialSecurityList":e=e.setIn(["data","acPayment","socialSecurityList"],(0,u.fromJS)([])).setIn(["data","acPayment","personSocialSecurityAmount"],0);break;case"incomeTaxList":e=e.setIn(["data","acPayment","incomeTaxList"],(0,u.fromJS)([])).setIn(["data","acPayment","incomeTaxAmount"],0);break;default:console.log("清空"+n.acTyp+"失败")}return e}),f(t,l.AFTER_XCZC_SAVE,function(){return n.saveAndNew?e=g:(n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber)),e}),f(t,l.GET_XCZC_UNTREATEDAMOUNT,function(){return e.setIn(["data",n.amountType],n.receivedData[n.amountType])}),f(t,l.GET_XCZC_PAYMENTLIST,function(){return e.setIn(["data","paymentList"],(0,u.fromJS)(n.receivedData)).setIn(["data","jtAmount"],0)}),f(t,l.PAYMENTLIST_BESELECT,function(){return e.setIn(["data","paymentList",n.idx,"beSelect"],n.value)}),f(t,l.PAYMENTLIST_BEALLCHECK,function(){return e=n.value?e.updateIn(["data","paymentList"],function(t){return t.map(function(t){return t.set("beSelect",!0)})}):e.updateIn(["data","paymentList"],function(t){return t.map(function(t){return t.set("beSelect",!1)})})}),f(t,l.GET_YL_XCZCSTATE,function(){var t=0,a=(0,u.fromJS)(n.receivedData.paymentList).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=n,e.set("notHandleAmount",n)})});return e.setIn(["views","insertOrModify"],"modify").set("data",(0,u.fromJS)(n.receivedData)).setIn(["data","paymentList"],a).setIn(["data","jtAmount"],t)}),f(t,l.XCZC_SAVE_AND_NEW,function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),i="",o=n.receivedData.propertyCostList;1==o.length&&(i=o[0]);var c="",s="",d=n.receivedData.propertyPay,_=n.receivedData.acPayment.beAccrued;return"SX_FLF"===d&&(c="STATE_XC_YF",s="福利费支出"),_||"SX_GZXJ"!==d&&"SX_QTXC"!==d||(c="STATE_XC_FF",s=(0,T.abstractFun)(c,(0,u.fromJS)(n.receivedData))),_||"SX_SHBX"!==d&&"SX_ZFGJJ"!==d||(c="STATE_XC_JN",s=(0,T.abstractFun)(c,(0,u.fromJS)(n.receivedData))),g.mergeIn(["data"],(0,u.fromJS)(n.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","runningState"],c).setIn(["data","propertyCost"],i).setIn(["data","runningAbstract"],s)}),t)[n.type]||function(){return e})()};var r,u=n(9),i=n(182),o=(r=i)&&r.__esModule?r:{default:r},c=A(n(25)),s=n(13),d=A(n(10)),_=n(1058),T=n(1061);function A(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=(0,u.fromJS)({views:{insertOrModify:"insert",fromYl:!1},data:{categoryType:"",categoryUuid:"",categoryName:"请选择类别",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:0,runningState:"",propertyList:[],propertyCost:"",propertyCostList:[],accountName:"",accountUuid:"",accumulationAmount:0,socialSecurityAmount:0,paymentList:[],jtAmount:0,acPayment:{saleAc:[],saleList:[],manageAc:[],manageList:[],accruedAc:[],accruedList:[],fundAc:[],fundList:[],socialSecurityAc:[],socialSecurityList:[],incomeTaxAc:[],incomeTaxList:[],welfareAc:[],welfareList:[],beAccrued:!1,beWithholding:!1,beWelfare:!1,actualAmount:0,companyAccumulationAmount:0,personAccumulationAmount:0,companySocialSecurityAmount:0,personSocialSecurityAmount:0,incomeTaxAmount:0}}});var E={changeXczcData:function(t,e){return{type:l.CHANGE_XCZC_DATA,dataType:t,value:e}},changeXczcRunningState:function(t,e){return{type:l.CHANGE_XCZC_RUNNING_STATE,propertyPay:t,key:e}},changeXczcAssList:function(t,e,n){return{type:l.CHANGE_XCZC_ASSLIST,value:e,idx:t,acType:n}},changeXczcAccount:function(t){return{type:l.CHANGE_XCZC_ACCOUNT,value:t}},xczcPersonAmount:function(t,e){return{type:l.XCZC_PERSON_AMOUNT,personType:t,value:e}},autoCalculateAmount:function(t){return{type:l.XCZC_CALCULATE_AMOUNT,propertyPay:t}},xczcClearAcList:function(t){return{type:l.XCZC_CLEAR_ACLIST,acType:t}},getXczcAccumulationAmount:function(){return function(t,e){var n=e().xczcAccountState,a=n.getIn(["data","acPayment"]),r=a.get("fundAc"),u=(r.size&&r.getIn([0,"assCategoryList"]),a.get("fundList"),n.getIn(["data","categoryUuid"])),i=n.getIn(["data","runningDate"]),_=r.getIn([0,"acId"]);d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getPaymentInfo","POST",JSON.stringify({categoryUuid:u,runningDate:i,acType:"AC_GJJ",accumulationAcId:_,accumulationAssId1:"",accumulationCategory1:"",accumulationAssId2:"",accumulationCategory2:""}),function(e){d.toast.hide(),(0,s.showMessage)(e)&&t({type:l.GET_XCZC_UNTREATEDAMOUNT,receivedData:e.data.result,amountType:"accumulationAmount"})})}},getXczcSocialSecurityAmount:function(){return function(t,e){var n=e().xczcAccountState,a=n.getIn(["data","acPayment"]),r=a.get("socialSecurityAc"),u=(r.size&&r.getIn([0,"assCategoryList"]),a.get("socialSecurityList"),n.getIn(["data","categoryUuid"])),i=n.getIn(["data","runningDate"]),_=r.getIn([0,"acId"]);d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getPaymentInfo","POST",JSON.stringify({categoryUuid:u,runningDate:i,acType:"AC_SB",socialSecurityAcId:_,socialSecurityAssId1:"",socialSecurityCategory1:"",socialSecurityAssId2:"",socialSecurityCategory2:""}),function(e){d.toast.hide(),(0,s.showMessage)(e)&&t({type:l.GET_XCZC_UNTREATEDAMOUNT,receivedData:e.data.result,amountType:"socialSecurityAmount"})})}},getXczcPaymentList:function(){return function(t,e){var n=e().xczcAccountState,a=n.getIn(["data","acPayment"]),r=a.get("accruedAc"),u=(r.size&&r.getIn([0,"assCategoryList"]),a.get("accruedList"),n.getIn(["data","categoryUuid"])),i=n.getIn(["data","runningDate"]),_=r.getIn([0,"acId"]);d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:u,runningDate:i,acId:_,assId1:"",assCategory1:"",assId2:"",assCategory2:""}),function(e){d.toast.hide(),(0,s.showMessage)(e)&&t({type:l.GET_XCZC_PAYMENTLIST,receivedData:e.data.resultList})})}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,i=r.get("enclosureList").toJS(),T=r.get("needDeleteUrl").toJS(),A=i.concat(T),f=n().xczcAccountState,g=f.get("data").toJS(),l=g.acPayment.beAccrued,S=g.runningState,m=g.propertyCost;if(""==g.runningAbstract)return d.toast.info("请填写摘要");if(g.runningAbstract.length>c.RUNNING_ABSTRACT_LENGTH)return d.toast.info("摘要长度不能超过"+c.RUNNING_ABSTRACT_LENGTH+"个字符");if(""==S)return d.toast.info("请选择流水状态");var y=g.propertyPay,I=(g.acPayment.beWithholding,g.amount),N=g.accountUuid;switch(y){case"SX_GZXJ":if("STATE_XC_JT"==S&&""==m)return d.toast.info("请选择费用性质");if("STATE_XC_FF"==S&&!l&&""==m)return d.toast.info("请选择费用性质");if(I<=0)return d.toast.info("请填写金额");if("STATE_XC_FF"==S&&""==N)return d.toast.info("请选择账户");break;case"SX_SHBX":if("STATE_XC_JT"==S&&""==m)return d.toast.info("请选择费用性质");if("STATE_XC_JN"==S&&!l&&""==m)return d.toast.info("请选择费用性质");if("STATE_XC_JT"==S&&I<=0)return d.toast.info("请填写金额");if("STATE_XC_JN"==S&&""==N)return d.toast.info("请选择账户");break;case"SX_ZFGJJ":if("STATE_XC_JT"==S&&""==m)return d.toast.info("请选择费用性质");if("STATE_XC_JN"==S&&!l&&""==m)return d.toast.info("请选择费用性质");if(!l&&I<=0)return d.toast.info("请填写金额");if("STATE_XC_JN"==S&&""==N)return d.toast.info("请选择账户");break;case"SX_FLF":if(""==m)return d.toast.info("请选择费用性质");if(I<=0)return d.toast.info("请填写金额");if(""==N)return d.toast.info("请选择账户");break;case"SX_QTXC":if("STATE_XC_JT"==S&&""==m)return d.toast.info("请选择费用性质");if("STATE_XC_FF"==S&&!l&&""==m)return d.toast.info("请选择费用性质");if(I<=0)return d.toast.info("请填写金额");if("STATE_XC_FF"==S&&""==N)return d.toast.info("请选择账户");break;default:console.log("校验薪酬支出出错")}var v=n().homeAccountState.get("project").toJS(),L=v.usedProject,C=v.projectCard,p=!1;if(("STATE_XC_JT"==S||!l&&"STATE_XC_JN"==S||"STATE_XC_YF"==S)&&(p=!0),L&&p){var Z=[],D=!1;if(!C.every(function(t){return Z.push(t.uuid),t.amount<=0&&(D=!0),t.uuid}))return d.toast.info("有未选择的项目卡片");if(D)return d.toast.info("项目卡片有未填写的金额");if([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(Z))).length<Z.length)return d.toast.info("有重复的项目卡片")}var G=!1;!l||"STATE_XC_JN"!=S&&"STATE_XC_FF"!=S||(G=!0);var O="modifyRunningbusiness",X="insert"===f.getIn(["views","insertOrModify"]);X&&(delete g.uuid,delete g.parentUuid,O="insertPayment"),d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)(O,"POST",JSON.stringify(a({},g,{usedProject:L,projectCard:C,enclosureList:A})),function(n){if(d.toast.hide(),(0,s.showMessage)(n))if(d.toast.success("保存成功",2),t){var a=g.categoryUuid;e(E.getCardDetail(a)),e(_.homeAccountActions.changeLrlsData(["project","projectCard"],(0,u.fromJS)([{amount:""}]))),e(_.homeAccountActions.changeLrlsEnclosureList())}else{if(G){var r=X?n.data.uuid:g.uuid;e(E.getYlXczcState(r))}e(E.afterXczcSave(n.data,t,X))}})}},paymentListBeSelect:function(t,e){return{type:l.PAYMENTLIST_BESELECT,value:e,idx:t}},paymentListBeAllCheck:function(t){return{type:l.PAYMENTLIST_BEALLCHECK,value:t}},afterXczcSave:function(t,e,n){return{type:l.AFTER_XCZC_SAVE,data:t,saveAndNew:e,isInsert:n}},getYlXczcState:function(t){return function(e){d.toast.loading("加载中...",0),(0,o.default)("getRunningBusiness","GET","uuid="+t,function(t){if(d.toast.hide(),(0,s.showMessage)(t)){e({type:l.GET_YL_XCZCSTATE,receivedData:t.data.result});var n=t.data.result.acPayment.beWithholding,a=t.data.result.acPayment.beWithholdSocial;n&&e(E.getXczcAccumulationAmount()),a&&e(E.getXczcSocialSecurityAmount())}})}},getCardDetail:function(t){return function(e){d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getRunningDetail","GET","uuid="+t,function(t){if(d.toast.hide(),(0,s.showMessage)(t)){var n=t.data.result;delete n.parentUuid,e({type:l.XCZC_SAVE_AND_NEW,receivedData:n})}})}}},l=e.ActionTypes={GET_LB_XCZC_CARD_DETAIL:"GET_LB_XCZC_CARD_DETAIL",GET_LB_XCZC_FROM_YLLS:"GET_LB_XCZC_FROM_YLLS",CHANGE_XCZC_DATA:"CHANGE_XCZC_DATA",CHANGE_XCZC_RUNNING_STATE:"CHANGE_XCZC_RUNNING_STATE",CHANGE_XCZC_ASSLIST:"CHANGE_XCZC_ASSLIST",CHANGE_XCZC_ACCOUNT:"CHANGE_XCZC_ACCOUNT",XCZC_PERSON_AMOUNT:"XCZC_PERSON_AMOUNT",XCZC_CALCULATE_AMOUNT:"XCZC_CALCULATE_AMOUNT",AFTER_XCZC_SAVE:"AFTER_XCZC_SAVE",XCZC_CLEAR_ACLIST:"XCZC_CLEAR_ACLIST",GET_XCZC_UNTREATEDAMOUNT:"GET_XCZC_UNTREATEDAMOUNT",GET_XCZC_PAYMENTLIST:"GET_XCZC_PAYMENTLIST",PAYMENTLIST_BESELECT:"PAYMENTLIST_BESELECT",PAYMENTLIST_BEALLCHECK:"PAYMENTLIST_BEALLCHECK",GET_YL_XCZCSTATE:"GET_YL_XCZCSTATE",XCZC_SAVE_AND_NEW:"XCZC_SAVE_AND_NEW"};e.xczcAccountActions=E},1349:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zskxAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},A(t,E.GET_LB_ZSKX_CARD_DETAIL,function(){var t=n.value.split(c.TREE_JOIN_STR),e=n.data.get("amount");return f.mergeIn(["data"],(0,u.fromJS)(n.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","runningAbstract"],"暂收款").setIn(["data","accountName"],n.data.get("accountName")).setIn(["data","accountUuid"],n.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")}),A(t,E.GET_LB_ZSKX_FROM_YLLS,function(){var t=0,a=n.state.getIn(["data","paymentList"]).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=n,e.set("notHandleAmount",n)})});return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data")).setIn(["data","paymentList"],a).setIn(["data","jtAmount"],t)}),A(t,E.CHANGE_ZSKX_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),A(t,E.CHANGE_ZSKX_ACCOUNT,function(){var t=n.value.split(c.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),A(t,E.GET_ZSKX_PAYMENTLIST,function(){return e.setIn(["data","paymentList"],(0,u.fromJS)(n.receivedData)).setIn(["data","jtAmount"],0)}),A(t,E.ZSKX_PAYMENTLIST_BESELECT,function(){return e.setIn(["data","paymentList",n.idx,"beSelect"],n.value)}),A(t,E.AFTER_ZSKX_SAVE,function(){return n.saveAndNew?e=f:(n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber)),e}),A(t,E.GET_YL_ZSKXSTATE,function(){var t=0,a=(0,u.fromJS)(n.receivedData.paymentList).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=n,e.set("notHandleAmount",n)})});return e.setIn(["views","insertOrModify"],"modify").set("data",(0,u.fromJS)(n.receivedData)).setIn(["data","paymentList"],a).setIn(["data","jtAmount"],t)}),A(t,E.ZSKX_SAVE_AND_NEW,function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return f.mergeIn(["data"],(0,u.fromJS)(n.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],"暂收款")}),t)[n.type]||function(){return e})()};var r,u=n(9),i=n(182),o=(r=i)&&r.__esModule?r:{default:r},c=T(n(25)),s=n(13),d=T(n(10)),_=n(1058);function T(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=(0,u.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"",categoryUuid:"",categoryName:"请选择类别",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_ZS_SQ",accountName:"",accountUuid:"",paymentList:[],jtAmount:0}});var g={changeZskxData:function(t,e){return{type:E.CHANGE_ZSKX_DATA,dataType:t,value:e}},changeAccount:function(t){return{type:E.CHANGE_ZSKX_ACCOUNT,value:t}},getZskxPaymentList:function(){return function(t,e){var n=e().zskxAccountState,a=n.getIn(["data","categoryUuid"]),r=n.getIn(["data","runningDate"]);d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:a,runningDate:r,acId:"",assId1:"",assCategory1:"",assId2:"",assCategory2:""}),function(e){d.toast.hide(),(0,s.showMessage)(e)&&t({type:E.GET_ZSKX_PAYMENTLIST,receivedData:e.data.resultList})})}},paymentListBeSelect:function(t,e){return{type:E.ZSKX_PAYMENTLIST_BESELECT,value:e,idx:t}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,i=r.get("enclosureList").toJS(),s=r.get("needDeleteUrl").toJS(),T=i.concat(s),A=n().zskxAccountState,f=A.get("data").toJS(),E=f.runningState;if(f.amount<=0)return d.toast.info("请填写金额");if(""==f.runningAbstract)return d.toast.info("请填写摘要");if(f.runningAbstract.length>c.RUNNING_ABSTRACT_LENGTH)return d.toast.info("摘要长度不能超过"+c.RUNNING_ABSTRACT_LENGTH+"个字符");if(""==f.accountUuid)return d.toast.info("请选择账户");if("STATE_ZS_TH"==E&&!f.paymentList.some(function(t){return t.beSelect}))return d.toast.info("请选择需要处理的流水");var l=n().homeAccountState.get("project").toJS(),S=l.usedProject,m=l.projectCard;if(S&&"STATE_ZS_SQ"==E){var y=[],I=!1;if(!m.every(function(t){return y.push(t.uuid),t.amount<=0&&(I=!0),t.uuid}))return d.toast.info("有未选择的项目卡片");if(I)return d.toast.info("项目卡片有未填写的金额");if([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(y))).length<y.length)return d.toast.info("有重复的项目卡片")}var N="modifyRunningbusiness",v="insert"===A.getIn(["views","insertOrModify"]);v&&(delete f.uuid,delete f.parentUuid,N="insertTemporaryReceipt"),d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)(N,"POST",JSON.stringify(a({},f,{usedProject:S,projectCard:m,enclosureList:T})),function(n){if(d.toast.hide(),0!==n.code)d.toast.fail(n.code+" "+n.message);else if(d.toast.success("保存成功",2),t){var a=f.categoryUuid;e(g.getCardDetail(a)),e(_.homeAccountActions.changeLrlsData(["project","projectCard"],(0,u.fromJS)([{amount:""}]))),e(_.homeAccountActions.changeLrlsEnclosureList())}else{if("STATE_ZS_TH"===E){var r=v?n.data.uuid:f.uuid;e(g.getYlZskxState(r))}e(g.afterZskxSave(n.data,t,v))}})}},afterZskxSave:function(t,e,n){return{type:E.AFTER_ZSKX_SAVE,data:t,saveAndNew:e,isInsert:n}},getYlZskxState:function(t){return function(e){d.toast.loading("加载中...",0),(0,o.default)("getRunningBusiness","GET","uuid="+t,function(t){d.toast.hide(),(0,s.showMessage)(t)&&e({type:E.GET_YL_ZSKXSTATE,receivedData:t.data.result})})}},getCardDetail:function(t){return function(e){d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getRunningDetail","GET","uuid="+t,function(t){if(d.toast.hide(),(0,s.showMessage)(t)){var n=t.data.result;delete n.parentUuid,e({type:E.ZSKX_SAVE_AND_NEW,receivedData:n})}})}}},E=e.ActionTypes={GET_LB_ZSKX_CARD_DETAIL:"GET_LB_ZSKX_CARD_DETAIL",GET_LB_ZSKX_FROM_YLLS:"GET_LB_ZSKX_FROM_YLLS",CHANGE_ZSKX_DATA:"CHANGE_ZSKX_DATA",CHANGE_ZSKX_ACCOUNT:"CHANGE_ZSKX_ACCOUNT",AFTER_ZSKX_SAVE:"AFTER_ZSKX_SAVE",ZSKX_SAVE_AND_NEW:"ZSKX_SAVE_AND_NEW",ZSKX_PAYMENTLIST_BESELECT:"ZSKX_PAYMENTLIST_BESELECT",GET_ZSKX_PAYMENTLIST:"GET_ZSKX_PAYMENTLIST",GET_YL_ZSKXSTATE:"GET_YL_ZSKXSTATE"};e.zskxAccountActions=g},1350:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zfkxAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},A(t,E.GET_LB_ZFKX_CARD_DETAIL,function(){var t=n.value.split(c.TREE_JOIN_STR),e=n.data.get("amount");return f.mergeIn(["data"],(0,u.fromJS)(n.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","runningAbstract"],"暂付款").setIn(["data","accountName"],n.data.get("accountName")).setIn(["data","accountUuid"],n.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")}),A(t,E.GET_LB_ZFKX_FROM_YLLS,function(){var t=0,a=n.state.getIn(["data","paymentList"]).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=n,e.set("notHandleAmount",n)})});return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data")).setIn(["data","paymentList"],a).setIn(["data","jtAmount"],t)}),A(t,E.CHANGE_ZFKX_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),A(t,E.CHANGE_ZFKX_ACCOUNT,function(){var t=n.value.split(c.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),A(t,E.GET_ZFKX_PAYMENTLIST,function(){return e.setIn(["data","paymentList"],(0,u.fromJS)(n.receivedData)).setIn(["data","jtAmount"],0)}),A(t,E.ZFKX_PAYMENTLIST_BESELECT,function(){return e.setIn(["data","paymentList",n.idx,"beSelect"],n.value)}),A(t,E.AFTER_ZFKX_SAVE,function(){return n.saveAndNew?e=f:(n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber)),e}),A(t,E.GET_YL_ZFKXSTATE,function(){var t=0,a=(0,u.fromJS)(n.receivedData.paymentList).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=n,e.set("notHandleAmount",n)})});return e.setIn(["views","insertOrModify"],"modify").set("data",(0,u.fromJS)(n.receivedData)).setIn(["data","paymentList"],a).setIn(["data","jtAmount"],t)}),A(t,E.ZFKX_SAVE_AND_NEW,function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return f.mergeIn(["data"],(0,u.fromJS)(n.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],"暂付款")}),t)[n.type]||function(){return e})()};var r,u=n(9),i=n(182),o=(r=i)&&r.__esModule?r:{default:r},c=T(n(25)),s=n(13),d=T(n(10)),_=n(1058);function T(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=(0,u.fromJS)({views:{insertOrModify:"insert",fromYl:!0},data:{categoryType:"",categoryUuid:"",categoryName:"请选择类别",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_ZF_FC",accountName:"",accountUuid:"",paymentList:[],jtAmount:0}});var g={changeZfkxData:function(t,e){return{type:E.CHANGE_ZFKX_DATA,dataType:t,value:e}},changeAccount:function(t){return{type:E.CHANGE_ZFKX_ACCOUNT,value:t}},getZfkxPaymentList:function(){return function(t,e){var n=e().zfkxAccountState,a=n.getIn(["data","categoryUuid"]),r=n.getIn(["data","runningDate"]);d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:a,runningDate:r,acId:"",assId1:"",assCategory1:"",assId2:"",assCategory2:""}),function(e){d.toast.hide(),(0,s.showMessage)(e)&&t({type:E.GET_ZFKX_PAYMENTLIST,receivedData:e.data.resultList})})}},paymentListBeSelect:function(t,e){return{type:E.ZFKX_PAYMENTLIST_BESELECT,value:e,idx:t}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,i=r.get("enclosureList").toJS(),s=r.get("needDeleteUrl").toJS(),T=i.concat(s),A=n().zfkxAccountState,f=A.get("data").toJS(),E=f.runningState;if(f.amount<=0)return d.toast.info("请填写金额");if(""==f.runningAbstract)return d.toast.info("请填写摘要");if(f.runningAbstract.length>c.RUNNING_ABSTRACT_LENGTH)return d.toast.info("摘要长度不能超过"+c.RUNNING_ABSTRACT_LENGTH+"个字符");if(""==f.accountUuid)return d.toast.info("请选择账户");if("STATE_ZF_SH"==E&&!f.paymentList.some(function(t){return t.beSelect}))return d.toast.info("请选择需要处理的流水");var l=n().homeAccountState.get("project").toJS(),S=l.usedProject,m=l.projectCard;if(S&&"STATE_ZF_FC"==E){var y=[],I=!1;if(!m.every(function(t){return y.push(t.uuid),t.amount<=0&&(I=!0),t.uuid}))return d.toast.info("有未选择的项目卡片");if(I)return d.toast.info("项目卡片有未填写的金额");if([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(y))).length<y.length)return d.toast.info("有重复的项目卡片")}var N="modifyRunningbusiness",v="insert"===A.getIn(["views","insertOrModify"]);v&&(delete f.uuid,delete f.parentUuid,N="insertTemporaryPay"),d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)(N,"POST",JSON.stringify(a({},f,{usedProject:S,projectCard:m,enclosureList:T})),function(n){if(d.toast.hide(),0!==n.code)d.toast.fail(n.code+" "+n.message);else if(d.toast.success("保存成功",2),t){var a=f.categoryUuid;e(g.getCardDetail(a)),e(_.homeAccountActions.changeLrlsData(["project","projectCard"],(0,u.fromJS)([{amount:""}]))),e(_.homeAccountActions.changeLrlsEnclosureList())}else{if("STATE_ZF_SH"===E){var r=v?n.data.uuid:f.uuid;e(g.getYlZfkxState(r))}e(g.afterZfkxSave(n.data,t,v))}})}},afterZfkxSave:function(t,e,n){return{type:E.AFTER_ZFKX_SAVE,data:t,saveAndNew:e,isInsert:n}},getYlZfkxState:function(t){return function(e){d.toast.loading("加载中...",0),(0,o.default)("getRunningBusiness","GET","uuid="+t,function(t){d.toast.hide(),(0,s.showMessage)(t)&&e({type:E.GET_YL_ZFKXSTATE,receivedData:t.data.result})})}},getCardDetail:function(t){return function(e){d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getRunningDetail","GET","uuid="+t,function(t){if(d.toast.hide(),(0,s.showMessage)(t)){var n=t.data.result;delete n.parentUuid,e({type:E.ZFKX_SAVE_AND_NEW,receivedData:n})}})}}},E=e.ActionTypes={GET_LB_ZFKX_CARD_DETAIL:"GET_LB_ZFKX_CARD_DETAIL",GET_LB_ZFKX_FROM_YLLS:"GET_LB_ZFKX_FROM_YLLS",CHANGE_ZFKX_DATA:"CHANGE_ZFKX_DATA",CHANGE_ZFKX_ACCOUNT:"CHANGE_ZFKX_ACCOUNT",AFTER_ZFKX_SAVE:"AFTER_ZFKX_SAVE",ZFKX_SAVE_AND_NEW:"ZFKX_SAVE_AND_NEW",ZFKX_PAYMENTLIST_BESELECT:"ZFKX_PAYMENTLIST_BESELECT",GET_ZFKX_PAYMENTLIST:"GET_ZFKX_PAYMENTLIST",GET_YL_ZFKXSTATE:"GET_YL_ZFKXSTATE"};e.zfkxAccountActions=g},1351:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.jkAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},A(t,E.GET_LB_JK_CARD_DETAIL,function(){var t=n.value.split(c.TREE_JOIN_STR),e=n.data.get("amount");return f.mergeIn(["data"],(0,u.fromJS)(n.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","runningAbstract"],"收到借款").setIn(["data","accountName"],n.data.get("accountName")).setIn(["data","accountUuid"],n.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")}),A(t,E.GET_LB_JK_FROM_YLLS,function(){var t=0,a=n.state.getIn(["data","paymentList"]).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=n,e.set("notHandleAmount",n)})});return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data")).setIn(["data","paymentList"],a).setIn(["data","jtAmount"],t)}),A(t,E.CHANGE_JK_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),A(t,E.CHANGE_JK_ACCOUNT,function(){var t=n.value.split(c.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),A(t,E.CHANGE_JK_PROPERTY_COST,function(){var t="",a="";return{XZ_QDJK:function(){t="STATE_JK_YS",a="收到借款"},XZ_CHLX:function(){t="STATE_JK_ZFLX",a="支付借款利息"},XZ_CHBJ:function(){t="STATE_JK_YF",a="偿还本金支出"}}[n.value](),e.setIn(["data","propertyCost"],n.value).setIn(["data","runningState"],t).setIn(["data","runningAbstract"],a)}),A(t,E.GET_JK_PAYMENTLIST,function(){return e.setIn(["data","paymentList"],(0,u.fromJS)(n.receivedData)).setIn(["data","jtAmount"],0)}),A(t,E.JK_PAYMENTLIST_BESELECT,function(){return e.setIn(["data","paymentList",n.idx,"beSelect"],n.value)}),A(t,E.AFTER_JK_SAVE,function(){return n.saveAndNew?e=f:(n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber)),e}),A(t,E.GET_YL_JKSTATE,function(){var t=0,a=(0,u.fromJS)(n.receivedData.paymentList).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=n,e.set("notHandleAmount",n)})});return e.setIn(["views","insertOrModify"],"modify").set("data",(0,u.fromJS)(n.receivedData)).setIn(["data","paymentList"],a).setIn(["data","jtAmount"],t)}),A(t,E.JK_SAVE_AND_NEW,function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return f.mergeIn(["data"],(0,u.fromJS)(n.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],"收到借款")}),t)[n.type]||function(){return e})()};var r,u=n(9),i=n(182),o=(r=i)&&r.__esModule?r:{default:r},c=T(n(25)),s=n(13),d=T(n(10)),_=n(1058);function T(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=(0,u.fromJS)({views:{insertOrModify:"insert",fromYl:!1},data:{categoryType:"",categoryUuid:"",categoryName:"请选择类别",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",propertyCost:"XZ_QDJK",runningState:"STATE_JK_YS",accountName:"",accountUuid:"",paymentList:[],jtAmount:0,acLoan:{beAccrued:!1}}});var g={changeJkData:function(t,e){return{type:E.CHANGE_JK_DATA,dataType:t,value:e}},changeAccount:function(t){return{type:E.CHANGE_JK_ACCOUNT,value:t}},changePropertyCost:function(t){return{type:E.CHANGE_JK_PROPERTY_COST,value:t}},getJkPaymentList:function(){return function(t,e){var n=e().jkAccountState,a=n.getIn(["data","categoryUuid"]),r=n.getIn(["data","runningDate"]);d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:a,runningDate:r,acId:"",assId1:"",assCategory1:"",assId2:"",assCategory2:""}),function(e){d.toast.hide(),(0,s.showMessage)(e)&&t({type:E.GET_JK_PAYMENTLIST,receivedData:e.data.resultList})})}},paymentListBeSelect:function(t,e){return{type:E.JK_PAYMENTLIST_BESELECT,value:e,idx:t}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,i=r.get("enclosureList").toJS(),s=r.get("needDeleteUrl").toJS(),T=i.concat(s),A=n().jkAccountState,f=A.get("data").toJS(),E=f.runningState,l=f.acLoan.beAccrued;if(f.amount<=0)return d.toast.info("请填写金额");if(""==f.runningAbstract)return d.toast.info("请填写摘要");if(f.runningAbstract.length>c.RUNNING_ABSTRACT_LENGTH)return d.toast.info("摘要长度不能超过"+c.RUNNING_ABSTRACT_LENGTH+"个字符");if("STATE_JK_JTLX"!=E&&""==f.accountUuid)return d.toast.info("请选择账户");var S=n().homeAccountState.get("project").toJS(),m=S.usedProject,y=S.projectCard;if(m&&("STATE_JK_JTLX"==E||!l&&"STATE_JK_ZFLX"==E)){var I=[],N=!1;if(!y.every(function(t){return I.push(t.uuid),t.amount<=0&&(N=!0),t.uuid}))return d.toast.info("有未选择的项目卡片");if(N)return d.toast.info("项目卡片有未填写的金额");if([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(I))).length<I.length)return d.toast.info("有重复的项目卡片")}var v="modifyRunningbusiness",L="insert"===A.getIn(["views","insertOrModify"]);L&&(delete f.uuid,delete f.parentUuid,v="insertLoan"),d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)(v,"POST",JSON.stringify(a({},f,{usedProject:m,projectCard:y,enclosureList:T})),function(n){if(d.toast.hide(),0!==n.code)d.toast.fail(n.code+" "+n.message);else if(d.toast.success("保存成功",2),t){var a=f.categoryUuid;e(g.getCardDetail(a)),e(_.homeAccountActions.changeLrlsData(["project","projectCard"],(0,u.fromJS)([{amount:""}]))),e(_.homeAccountActions.changeLrlsEnclosureList())}else{if(l&&"STATE_JK_ZFLX"===E){var r=L?n.data.uuid:f.uuid;e(g.getYlJkState(r))}e(g.afterJkSave(n.data,t,L))}})}},afterJkSave:function(t,e,n){return{type:E.AFTER_JK_SAVE,data:t,saveAndNew:e,isInsert:n}},getYlJkState:function(t){return function(e){d.toast.loading("加载中...",0),(0,o.default)("getRunningBusiness","GET","uuid="+t,function(t){d.toast.hide(),(0,s.showMessage)(t)&&e({type:E.GET_YL_JKSTATE,receivedData:t.data.result})})}},getCardDetail:function(t){return function(e){d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getRunningDetail","GET","uuid="+t,function(t){if(d.toast.hide(),(0,s.showMessage)(t)){var n=t.data.result;delete n.parentUuid,e({type:E.JK_SAVE_AND_NEW,receivedData:n})}})}}},E=e.ActionTypes={GET_LB_JK_CARD_DETAIL:"GET_LB_JK_CARD_DETAIL",GET_LB_JK_FROM_YLLS:"GET_LB_JK_FROM_YLLS",CHANGE_JK_DATA:"CHANGE_JK_DATA",CHANGE_JK_ACCOUNT:"CHANGE_JK_ACCOUNT",AFTER_JK_SAVE:"AFTER_JK_SAVE",JK_SAVE_AND_NEW:"JK_SAVE_AND_NEW",JK_PAYMENTLIST_BESELECT:"JK_PAYMENTLIST_BESELECT",GET_JK_PAYMENTLIST:"GET_JK_PAYMENTLIST",GET_YL_JKSTATE:"GET_YL_JKSTATE",CHANGE_JK_PROPERTY_COST:"CHANGE_JK_PROPERTY_COST"};e.jkAccountActions=g},1352:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tzAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},A(t,E.GET_LB_TZ_CARD_DETAIL,function(){var t=n.value.split(c.TREE_JOIN_STR),e=n.data.get("amount");return f.mergeIn(["data"],(0,u.fromJS)(n.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","runningAbstract"],"对外投资支出").setIn(["data","accountName"],n.data.get("accountName")).setIn(["data","accountUuid"],n.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")}),A(t,E.GET_LB_TZ_FROM_YLLS,function(){var t=0,a=n.state.getIn(["data","paymentList"]).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=n,e.set("notHandleAmount",n)})});return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data")).setIn(["data","paymentList"],a).setIn(["data","jtAmount"],t)}),A(t,E.CHANGE_TZ_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),A(t,E.CHANGE_TZ_ACCOUNT,function(){var t=n.value.split(c.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),A(t,E.CHANGE_TZ_PROPERTY_COST,function(){var t="",a="",r=e.getIn(["data","propertyInvest"]);return{XZ_DWTZ:function(){t="STATE_TZ_YF",a="对外投资支出"},XZ_QDSY:function(){t="SX_ZQ"==r?"STATE_TZ_SRLX":"STATE_TZ_SRGL",a="收到投资收益"},XZ_SHTZ:function(){t="STATE_TZ_YS",a="收回投资款"}}[n.value](),e.setIn(["data","propertyCost"],n.value).setIn(["data","runningState"],t).setIn(["data","runningAbstract"],a)}),A(t,E.GET_TZ_PAYMENTLIST,function(){return e.setIn(["data","paymentList"],(0,u.fromJS)(n.receivedData)).setIn(["data","jtAmount"],0)}),A(t,E.TZ_PAYMENTLIST_BESELECT,function(){return e.setIn(["data","paymentList",n.idx,"beSelect"],n.value)}),A(t,E.AFTER_TZ_SAVE,function(){return n.saveAndNew?e=f:(n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber)),e}),A(t,E.GET_YL_TZSTATE,function(){var t=0,a=(0,u.fromJS)(n.receivedData.paymentList).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=n,e.set("notHandleAmount",n)})});return e.setIn(["views","insertOrModify"],"modify").set("data",(0,u.fromJS)(n.receivedData)).setIn(["data","paymentList"],a).setIn(["data","jtAmount"],t)}),A(t,E.TZ_SAVE_AND_NEW,function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return f.mergeIn(["data"],(0,u.fromJS)(n.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],"对外投资支出")}),t)[n.type]||function(){return e})()};var r,u=n(9),i=n(182),o=(r=i)&&r.__esModule?r:{default:r},c=T(n(25)),s=n(13),d=T(n(10)),_=n(1058);function T(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=(0,u.fromJS)({views:{insertOrModify:"insert",fromYl:!1},data:{categoryType:"",categoryUuid:"",categoryName:"请选择类别",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",propertyCost:"XZ_DWTZ",runningState:"STATE_TZ_YF",propertyInvest:"",accountName:"",accountUuid:"",paymentList:[],jtAmount:0,acInvest:{beAccrued:!1}}});var g={changeTzData:function(t,e){return{type:E.CHANGE_TZ_DATA,dataType:t,value:e}},changeAccount:function(t){return{type:E.CHANGE_TZ_ACCOUNT,value:t}},changePropertyCost:function(t){return{type:E.CHANGE_TZ_PROPERTY_COST,value:t}},getTzPaymentList:function(){return function(t,e){var n=e().tzAccountState,a=n.getIn(["data","categoryUuid"]),r=n.getIn(["data","runningDate"]);d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:a,runningDate:r,acId:"",assId1:"",assCategory1:"",assId2:"",assCategory2:""}),function(e){d.toast.hide(),(0,s.showMessage)(e)&&t({type:E.GET_TZ_PAYMENTLIST,receivedData:e.data.resultList})})}},paymentListBeSelect:function(t,e){return{type:E.TZ_PAYMENTLIST_BESELECT,value:e,idx:t}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,u=r.get("enclosureList").toJS(),i=r.get("needDeleteUrl").toJS(),s=u.concat(i),T=n().tzAccountState,A=T.get("data").toJS(),f=A.runningState,E=A.acInvest.beAccrued;if(A.amount<=0)return d.toast.info("请填写金额");if(""==A.runningAbstract)return d.toast.info("请填写摘要");if(A.runningAbstract.length>c.RUNNING_ABSTRACT_LENGTH)return d.toast.info("摘要长度不能超过"+c.RUNNING_ABSTRACT_LENGTH+"个字符");if("STATE_TZ_JTGL"!=f&&"STATE_TZ_JTLX"!=f&&""==A.accountUuid)return d.toast.info("请选择账户");var l=n().homeAccountState.get("project").toJS(),S=l.usedProject,m=l.projectCard;if(S&&("STATE_TZ_JTGL"==f||"STATE_TZ_JTLX"==f||!E&&("STATE_TZ_SRGL"==f||"STATE_TZ_SRLX"==f))){var y=[],I=!1;if(!m.every(function(t){return y.push(t.uuid),t.amount<=0&&(I=!0),t.uuid}))return d.toast.info("有未选择的项目卡片");if(I)return d.toast.info("项目卡片有未填写的金额");if([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(y))).length<y.length)return d.toast.info("有重复的项目卡片")}var N="modifyRunningbusiness",v="insert"===T.getIn(["views","insertOrModify"]);v&&(delete A.uuid,delete A.parentUuid,N="insertAssets"),d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)(N,"POST",JSON.stringify(a({},A,{usedProject:S,projectCard:m,enclosureList:s})),function(n){if(d.toast.hide(),0!==n.code)d.toast.fail(n.code+" "+n.message);else if(d.toast.success("保存成功",2),t){var a=A.categoryUuid;e(g.getCardDetail(a)),e(_.homeAccountActions.changeLrlsEnclosureList())}else{if(E&&"STATE_TZ_SRGL"===f){var r=v?n.data.uuid:A.uuid;e(g.getYlTzState(r))}e(g.afterTzSave(n.data,t,v))}})}},afterTzSave:function(t,e,n){return{type:E.AFTER_TZ_SAVE,data:t,saveAndNew:e,isInsert:n}},getYlTzState:function(t){return function(e){d.toast.loading("加载中...",0),(0,o.default)("getRunningBusiness","GET","uuid="+t,function(t){d.toast.hide(),(0,s.showMessage)(t)&&e({type:E.GET_YL_TZSTATE,receivedData:t.data.result})})}},getCardDetail:function(t){return function(e){d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getRunningDetail","GET","uuid="+t,function(t){if(d.toast.hide(),(0,s.showMessage)(t)){var n=t.data.result;delete n.parentUuid,e({type:E.TZ_SAVE_AND_NEW,receivedData:n})}})}}},E=e.ActionTypes={GET_LB_TZ_CARD_DETAIL:"GET_LB_TZ_CARD_DETAIL",GET_LB_TZ_FROM_YLLS:"GET_LB_TZ_FROM_YLLS",CHANGE_TZ_DATA:"CHANGE_TZ_DATA",CHANGE_TZ_ACCOUNT:"CHANGE_TZ_ACCOUNT",AFTER_TZ_SAVE:"AFTER_TZ_SAVE",TZ_SAVE_AND_NEW:"TZ_SAVE_AND_NEW",TZ_PAYMENTLIST_BESELECT:"TZ_PAYMENTLIST_BESELECT",GET_TZ_PAYMENTLIST:"GET_TZ_PAYMENTLIST",GET_YL_TZSTATE:"GET_YL_TZSTATE",CHANGE_TZ_PROPERTY_COST:"CHANGE_TZ_PROPERTY_COST"};e.tzAccountActions=g},1353:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zbAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},A(t,E.GET_LB_ZB_CARD_DETAIL,function(){var t=n.value.split(c.TREE_JOIN_STR),e=n.data.get("amount");return f.mergeIn(["data"],(0,u.fromJS)(n.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","runningAbstract"],"增加注册资本").setIn(["data","accountName"],n.data.get("accountName")).setIn(["data","accountUuid"],n.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")}),A(t,E.GET_LB_ZB_FROM_YLLS,function(){var t=0,a=n.state.getIn(["data","paymentList"]).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=n,e.set("notHandleAmount",n)})});return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data")).setIn(["data","paymentList"],a).setIn(["data","jtAmount"],t)}),A(t,E.CHANGE_ZB_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),A(t,E.CHANGE_ZB_ACCOUNT,function(){var t=n.value.split(c.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),A(t,E.CHANGE_ZB_PROPERTY_COST,function(){var t="",a="";return{XZ_ZZ:function(){t="STATE_ZB_ZZ",a="增加注册资本"},XZ_LRFP:function(){t="STATE_ZB_ZFLR",a="支付分配利润"},XZ_JZ:function(){t="STATE_ZB_JZ",a="减少注册资本"}}[n.value](),e.setIn(["data","propertyCost"],n.value).setIn(["data","runningState"],t).setIn(["data","runningAbstract"],a)}),A(t,E.GET_ZB_PAYMENTLIST,function(){return e.setIn(["data","paymentList"],(0,u.fromJS)(n.receivedData)).setIn(["data","jtAmount"],0)}),A(t,E.ZB_PAYMENTLIST_BESELECT,function(){return e.setIn(["data","paymentList",n.idx,"beSelect"],n.value)}),A(t,E.AFTER_ZB_SAVE,function(){return n.saveAndNew?e=f:(n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber)),e}),A(t,E.GET_YL_ZBSTATE,function(){var t=0,a=(0,u.fromJS)(n.receivedData.paymentList).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=n,e.set("notHandleAmount",n)})});return e.setIn(["views","insertOrModify"],"modify").set("data",(0,u.fromJS)(n.receivedData)).setIn(["data","paymentList"],a).setIn(["data","jtAmount"],t)}),A(t,E.ZB_SAVE_AND_NEW,function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return f.mergeIn(["data"],(0,u.fromJS)(n.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],"增加注册资本")}),t)[n.type]||function(){return e})()};var r,u=n(9),i=n(182),o=(r=i)&&r.__esModule?r:{default:r},c=T(n(25)),s=n(13),d=T(n(10)),_=n(1058);function T(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=(0,u.fromJS)({views:{insertOrModify:"insert",fromYl:!0},data:{categoryType:"",categoryUuid:"",categoryName:"请选择类别",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",propertyCost:"XZ_ZZ",runningState:"STATE_ZB_ZZ",accountName:"",accountUuid:"",paymentList:[],jtAmount:0,acCapital:{beAccrued:!1}}});var g={changeZbData:function(t,e){return{type:E.CHANGE_ZB_DATA,dataType:t,value:e}},changeAccount:function(t){return{type:E.CHANGE_ZB_ACCOUNT,value:t}},changePropertyCost:function(t){return{type:E.CHANGE_ZB_PROPERTY_COST,value:t}},getZbPaymentList:function(){return function(t,e){var n=e().zbAccountState,a=n.getIn(["data","categoryUuid"]),r=n.getIn(["data","runningDate"]);d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:a,runningDate:r,acId:"",assId1:"",assCategory1:"",assId2:"",assCategory2:""}),function(e){d.toast.hide(),(0,s.showMessage)(e)&&t({type:E.GET_ZB_PAYMENTLIST,receivedData:e.data.resultList})})}},paymentListBeSelect:function(t,e){return{type:E.ZB_PAYMENTLIST_BESELECT,value:e,idx:t}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,u=r.get("enclosureList").toJS(),i=r.get("needDeleteUrl").toJS(),s=u.concat(i),T=n().zbAccountState,A=T.get("data").toJS(),f=A.runningState,E=A.acCapital.beAccrued;if(A.amount<=0)return d.toast.info("请填写金额");if(""==A.runningAbstract)return d.toast.info("请填写摘要");if(A.runningAbstract.length>c.RUNNING_ABSTRACT_LENGTH)return d.toast.info("摘要长度不能超过"+c.RUNNING_ABSTRACT_LENGTH+"个字符");if("STATE_ZB_LRFP"!=f&&""==A.accountUuid)return d.toast.info("请选择账户");if(E&&"STATE_ZB_ZFLR"==f&&!A.paymentList.some(function(t){return t.beSelect}))return d.toast.info("请选择需要处理的流水");var l="modifyRunningbusiness",S="insert"===T.getIn(["views","insertOrModify"]);S&&(delete A.uuid,delete A.parentUuid,l="insertCapital"),d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)(l,"POST",JSON.stringify(a({},A,{enclosureList:s})),function(n){if(d.toast.hide(),0!==n.code)d.toast.fail(n.code+" "+n.message);else if(d.toast.success("保存成功",2),t){var a=A.categoryUuid;e(g.getCardDetail(a)),e(_.homeAccountActions.changeLrlsEnclosureList())}else{if(E&&"STATE_ZB_ZFLR"===f){var r=S?n.data.uuid:A.uuid;e(g.getYlZbState(r))}e(g.afterZbSave(n.data,t,S))}})}},afterZbSave:function(t,e,n){return{type:E.AFTER_ZB_SAVE,data:t,saveAndNew:e,isInsert:n}},getYlZbState:function(t){return function(e){d.toast.loading("加载中...",0),(0,o.default)("getRunningBusiness","GET","uuid="+t,function(t){d.toast.hide(),(0,s.showMessage)(t)&&e({type:E.GET_YL_ZBSTATE,receivedData:t.data.result})})}},getCardDetail:function(t){return function(e){d.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getRunningDetail","GET","uuid="+t,function(t){if(d.toast.hide(),(0,s.showMessage)(t)){var n=t.data.result;delete n.parentUuid,e({type:E.ZB_SAVE_AND_NEW,receivedData:n})}})}}},E=e.ActionTypes={GET_LB_ZB_CARD_DETAIL:"GET_LB_ZB_CARD_DETAIL",GET_LB_ZB_FROM_YLLS:"GET_LB_ZB_FROM_YLLS",CHANGE_ZB_DATA:"CHANGE_ZB_DATA",CHANGE_ZB_ACCOUNT:"CHANGE_ZB_ACCOUNT",AFTER_ZB_SAVE:"AFTER_ZB_SAVE",ZB_SAVE_AND_NEW:"ZB_SAVE_AND_NEW",ZB_PAYMENTLIST_BESELECT:"ZB_PAYMENTLIST_BESELECT",GET_ZB_PAYMENTLIST:"GET_ZB_PAYMENTLIST",GET_YL_ZBSTATE:"GET_YL_ZBSTATE",CHANGE_ZB_PROPERTY_COST:"CHANGE_ZB_PROPERTY_COST"};e.zbAccountActions=g},1395:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nbzzAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},A(t,g.GET_LB_ZZ_CARD_DETAIL,function(){var t=n.value.split(c.TREE_JOIN_STR);return f.setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","amount"],n.data.get("amount")).setIn(["views","insertOrModify"],"insert")}),A(t,g.GET_LB_ZZ_FROM_YLLS,function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data")).setIn(["data","fromAccountName"],n.state.getIn(["data","childList",0,"accountName"])).setIn(["data","fromAccountUuid"],n.state.getIn(["data","childList",0,"accountUuid"])).setIn(["data","toAccountName"],n.state.getIn(["data","childList",1,"accountName"])).setIn(["data","toAccountUuid"],n.state.getIn(["data","childList",1,"accountUuid"]))}),A(t,g.CHANGE_NBZZ_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),A(t,g.CHANGE_NBZZ_ACCOUNT,function(){var t=n.value.split(c.TREE_JOIN_STR);return e="fromAccount"===n.accountType?e.setIn(["data","fromAccountName"],t[1]).setIn(["data","fromAccountUuid"],t[0]):e.setIn(["data","toAccountName"],t[1]).setIn(["data","toAccountUuid"],t[0])}),A(t,g.AFTER_NBZZ_SAVE,function(){if(n.saveAndNew){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);e=f.setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r)}else n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber);return e}),A(t,g.GET_YL_NBZZSTATE,function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["data","uuid"],n.receivedData.uuid).setIn(["data","flowNumber"],n.receivedData.flowNumber).setIn(["data","categoryUuid"],n.receivedData.categoryUuid).setIn(["data","runningDate"],n.receivedData.runningDate).setIn(["data","runningAbstract"],n.receivedData.runningAbstract).setIn(["data","amount"],n.receivedData.amount).setIn(["data","fromAccountUuid"],n.receivedData.childList[0].accountUuid).setIn(["data","fromAccountName"],n.receivedData.childList[0].accountName).setIn(["data","toAccountUuid"],n.receivedData.childList[1].accountUuid).setIn(["data","toAccountName"],n.receivedData.childList[1].accountName)}),t)[n.type]||function(){return e})()};var r,u=n(9),i=n(182),o=(r=i)&&r.__esModule?r:{default:r},c=T(n(25)),s=n(13),d=(T(n(1064)),n(1058)),_=T(n(10));function T(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=(0,u.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_ZZ",categoryName:"内部转账",categoryUuid:"",amount:"",runningDate:"",runningAbstract:"内部转账",runningState:"STATE_ZZ",fromAccountName:"",fromAccountUuid:"",toAccountName:"",toAccountUuid:"",flowNumber:"",uuid:""}});var g=e.ActionTypes={GET_LB_ZZ_CARD_DETAIL:"GET_LB_ZZ_CARD_DETAIL",GET_LB_ZZ_FROM_YLLS:"GET_LB_ZZ_FROM_YLLS",CHANGE_NBZZ_DATA:"CHANGE_NBZZ_DATA",CHANGE_NBZZ_ACCOUNT:"CHANGE_NBZZ_ACCOUNT",AFTER_NBZZ_SAVE:"AFTER_NBZZ_SAVE",GET_YL_NBZZSTATE:"GET_YL_NBZZSTATE"},E={changeNbzzData:function(t,e){return{type:g.CHANGE_NBZZ_DATA,dataType:t,value:e}},changeNbzzAccount:function(t,e){return{type:g.CHANGE_NBZZ_ACCOUNT,accountType:t,value:e}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,u=r.get("enclosureList").toJS(),i=r.get("needDeleteUrl").toJS(),s=u.concat(i),T=n().nbzzAccountState,A=T.get("data").toJS();if(""==A.runningAbstract)return _.toast.info("请填写摘要");if(A.runningAbstract.length>c.RUNNING_ABSTRACT_LENGTH)return _.toast.info("摘要长度不能超过"+c.RUNNING_ABSTRACT_LENGTH+"个字符");if(A.amount<=0)return _.toast.info("请填写金额");if(""==A.fromAccountUuid)return _.toast.info("请选择转出账户");if(""==A.toAccountUuid)return _.toast.info("请选择转入账户");if(A.toAccountUuid==A.fromAccountUuid)return _.toast.info("转出账户和转入账户不能相同");var f="insert"===T.getIn(["views","insertOrModify"]),g=f?"insertVirement":"modifyRunningbusiness";_.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)(g,"POST",JSON.stringify(a({},A,{accountChildList:[],enclosureList:s})),function(n){_.toast.hide(),0!==n.code?_.toast.fail(n.code+" "+n.message):(_.toast.success("保存成功",2),t?(e(E.afterNbzzSave(t,f,n.data)),e(d.homeAccountActions.changeLrlsEnclosureList())):e(E.afterNbzzSave(t,f,n.data)))})}},getYlNbzzState:function(t){return function(e){_.toast.loading("加载中...",0),(0,o.default)("getRunningBusiness","GET","uuid="+t,function(t){_.toast.hide(),(0,s.showMessage)(t)&&e({type:g.GET_YL_NBZZSTATE,receivedData:t.data.result})})}},afterNbzzSave:function(t,e,n){return{type:g.AFTER_NBZZ_SAVE,data:n,isInsert:e,saveAndNew:t}}};e.nbzzAccountActions=E}}]);