(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{1008:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=c(n(2458));function c(e){return e&&e.__esModule?e:{default:e}}var o={acconfigState:c(n(1331)).default};t.reducer=o,t.view=a.default},1210:function(e,t,n){},1277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,c,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),r=(c=i)&&c.__esModule?c:{default:c},s=(n(9),n(22));n(1210);var u=(0,s.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.tabSelectedIndex,n=e.acTags,a=(e.dispatch,e.callback);return r.default.createElement("div",{className:"tab-title"},n.map(function(e,n){return r.default.createElement("span",{className:["tab-title-item",t===n?"selected":""].join(" "),onClick:function(){return a(n)},key:n},e.get("category"))}))}}]),t}())||a;t.default=u},1330:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,c,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),r=(c=i)&&c.__esModule?c:{default:c},s=(n(9),n(22));n(1210);var u=f(n(1212)),l=f(n(1076)),d=n(16);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var p={4:"#fff",6:"#D1C0A5",8:"#7E6B5A",10:"#59493f"},y=(0,s.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.hasSub,a=e.isExpanded,c=e.ac,o=e.currTabAcList,i=e.idx,s=e.selectable,f=e.allAcCheckBoxDisplay,y=e.allAcModifyButtonDisplay,A=e.dispatch,_=e.uppername,I=e.isEnd,C=e.history,g=(c.get("acid").length-4)/200*10+"rem",m={width:g,background:p[c.get("acid").length]};return r.default.createElement("div",{className:"ac-item-wrap",style:t},r.default.createElement("div",{className:c.get("asscategorylist").size?"ac-ass-item":"ac-item",style:{borderBottom:I?"0":""}},r.default.createElement(d.Checkbox,{className:"checkbox",style:{display:f?"":"none"},checked:c.get("selected"),disabled:!s,checkedColor:"#fb6",onClick:function(e){s&&A(l.selectAc(c.get("idx")))}}),r.default.createElement(d.Icon,{style:{display:y?"":"none"},type:"add-plus-fill",color:10===c.get("acid").length?"#ccc":"#38ADFF",size:"18",onClick:function(e){10!==c.get("acid").length&&A(u.beforeInsertAc(c,o,"",C))}}),r.default.createElement("div",{className:"ac-article"},r.default.createElement("span",{className:"ac-article-acid-acname"},"0rem"==g?"":r.default.createElement("span",{className:c.get("asscategorylist").size?"ac-flag ac-info-has-ass-flags":"ac-flag",style:m}),r.default.createElement("span",{className:c.get("asscategorylist").size?"ac-info ac-info-has-ass ac-underline":"ac-info ac-underline",onClick:function(e){A(f&&s?l.selectAc(c.get("idx")):u.beforeModifyAc(c,i,_,C))}},c.get("acid")+c.get("acname"))),0==c.get("asscategorylist").size?"":r.default.createElement("p",{className:"ac-ass"},"辅助核算: ",c.get("asscategorylist").reduce(function(e,t){return e+"/"+t}))),r.default.createElement("div",{className:"ac-other",onClick:function(){n&&A(u.toggleLowerAc(c.get("acid")))}},r.default.createElement("span",{className:"ac-direction"},"debit"==c.get("direction")?"借":"贷","方"),r.default.createElement(d.Icon,{type:"arrow-down",style:{display:n&&"displaynone"!==a?"":"none",transform:a?"rotate(180deg)":""}}))))}}]),t}())||a;t.default=y},1331:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=handleAcConfig;var _immutable=__webpack_require__(9),_ActionTypes=__webpack_require__(1357),ActionTypes=_interopRequireWildcard(_ActionTypes);function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var acconfigState=(0,_immutable.fromJS)({selectedAcAll:!1,showedLowerAcIdList:[],allAcModifyButtonDisplay:!1,allAcCheckBoxDisplay:!1,toolBarDisplayIndex:1,tabSelectedIndex:0,acConfigMode:"",fromfirts:!1,showReverseModal:!1,reverseSeved:!1,ac:{oldacid:"",acid:"",acname:"",category:"",upperinfo:"无",upperid:"",direction:"debit",asscategorylist:[],upperAcunit:"0",acunitOpen:"0",acunit:"",conversion:"1"},showInfoAffirmStatus:!1,reverseTitleName:["修改科目等级","修改科目编码"],type:"class",reverseTitleIndex:0,selectAcId:"",isSelect:!1,reverseAc:{acid:"",acname:"",categoryList:[],acCount:0,openingbalance:0,category:"",direction:"",upAcName:"",upperId:"",acunitOpen:"",cardNum:"",hasChildren:"0"},NewAcReverseId:"",NewAcReverseName:"",idNewAcReverseId:"",canChangeClassId:""});function handleAcConfig(){var _ActionTypes$INIT_ACC,state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:acconfigState,action=arguments[1];return((_ActionTypes$INIT_ACC={},_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.INIT_ACCONFIG,function(){return acconfigState}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CANCEL_ENTER_AC_FETCH,function(){return action.history.goBack(),state}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.TOGGLE_LOWER_AC,function(){return state.get("showedLowerAcIdList").indexOf(action.acid)>-1?state.update("showedLowerAcIdList",function(e){return e.map(function(e){return e.indexOf(action.acid)>-1?"":e}).filter(function(e){return!!e})}):state.update("showedLowerAcIdList",function(e){return e.push(action.acid)})}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.BEFORE_MODIFY_AC,function(){setTimeout(function(){return action.history.push("/config/option/ac")},0);var e=action.uppername;return state.set("ac",action.ac).setIn(["ac","oldacid"],action.ac.get("acid")).set("acSelectedIndex",action.idx).set("acConfigMode","modify").setIn(["ac","conversion"],"1").setIn(["ac","oldAcunit"],action.ac.get("acunit")).setIn(["ac","upperinfo"],e?action.ac.get("upperid")+" "+e:"无")}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.BEFORE_INSERT_AC,function(){setTimeout(function(){return action.history.push("/config/option/ac")},0);action.uppername;var e=void 0;if(action.ac){var t=action.ac.get("acid"),n=t+"01";action.currTabAcList.forEach(function(e){e.get("acid")===n&&(n=(Number(n)+1).toString())}),e=action.ac.set("acid",n).set("upperid",t).set("acname","").set("upperinfo",t+" "+action.ac.get("acname"))}else e=acconfigState.get("ac");return state.set("ac",e).set("acConfigMode","insert").set("fromfirts","first"===action.first)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CHANGE_ACID,function(){if(!/^\d*$/.test(action.acid))return state;var e=action.acid.length;if(e>4&&e%2==0){var t=action.acid.substr(0,e-2),n=action.aclistSeq.find(function(e){return e.get("acid")==t});state=state.update("ac",function(e){return e.set("upperid",n?t:"").set("upperinfo",n?n.get("acid")+" "+n.get("acname"):"无").set("category",n?n.get("category"):"").set("direction",n?n.get("direction"):"debit")})}else e<=4&&(state=state.update("ac",function(e){return e.set("upperid","")}));return state.update("ac",function(e){return e.set("acid",action.acid)})}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CHANGE_TAB_INDEX_ACCONFIG,function(){return state.set("tabSelectedIndex",action.idx)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.SHOW_ALL_AC_MODIFY_BUTTON,function(){return state.set("toolBarDisplayIndex",3).set("allAcModifyButtonDisplay",!0)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.HIDE_ALL_AC_MODIFY_BUTTON,function(){return state.set("toolBarDisplayIndex",1).set("allAcModifyButtonDisplay",!1)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.SHOW_ALL_AC_CHECKBOX,function(){return state.set("toolBarDisplayIndex",2).set("allAcCheckBoxDisplay",!0)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.HIDE_ALL_AC_CHECKBOX,function(){return state.set("toolBarDisplayIndex",1).set("allAcCheckBoxDisplay",!1)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CHANGE_ACNAME,function(){return state=state.setIn(["ac","acname"],action.acname)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CHANGE_CATEGORY,function(){return state.setIn(["ac","category"],action.category)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CHANGE_DIRECTION,function(){return state.updateIn(["ac","direction"],function(e){return"debit"===e?"credit":"debit"})}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CREATE_NEW_AC_ID,function(){var id=action.id,upperid=action.upperid,re=eval("/^[0-9]*$/g");return re.test(id)&&id.length<3&&(state=state.set("NewAcReverseId",id)),state}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CHANGE_AC_SHOW_REVERSE_MODAL,function(){return state.set("showReverseModal",action.bool)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CHANGE_AC_REVERSESEVED,function(){return state.set("reverseSeved",action.bool)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CHANGE_AC_AMOUNT_TEXT,function(){return"0"==state.getIn(["ac","acunitOpen"])?state=state.setIn(["ac","acunitOpen"],"1"):(state=state.setIn(["ac","acunitOpen"],"0"),"insert"!=action.acConfigMode&&""!=action.prevAcunit||(state=state.setIn(["ac","acunit"],""))),state.setIn(["ac","upperAcunit"],"").setIn(["ac","conversion"],"1")}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CHANGE_AC_ACCONFIG_ACUNIT,function(){return state.setIn(["ac","acunit"],action.acunit)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CHANGE_UNIT_TEXT,function(){return console.log(action.unit),state.setIn(["ac","acunit"],action.unit).setIn(["ac","conversion"],action.conversion?action.conversion:"1")}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CHANGE_REVERSE_TIT,function(){return state.set("reverseTitleIndex",action.idx).set("type",0===action.idx?"class":"id").set("reverseAc",acconfigState.get("reverseAc")).set("isSelect",!1).set("NewAcReverseId","").set("NewAcReverseName","").set("idNewAcReverseId","")}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CANCEL_REVERSE,function(){return state=state.set("reverseAc",acconfigState.get("reverseAc")).set("isSelect",!1).set("NewAcReverseId","").set("NewAcReverseName","").set("canChangeClassId",""),action.history.goBack(),state}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.SELECT_AC_REVERSE,function(){return state.set("selectAcId",action.acId)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.GET_REPORT_REVERSE_AC,function(){return state=state.set("reverseAc",(0,_immutable.fromJS)(action.receivedData)).set("NewAcReverseId","01").set("NewAcReverseName","").set("idNewAcReverseId","").set("canChangeClassId",""),action.history.goBack(),state}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CREATE_NEW_AC_NAME,function(){return state.set("NewAcReverseName",action.acname)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.IS_CLEAR_AC_REVERSE_INFO,function(){return action.bool||(state=state.set("reverseAc",acconfigState.get("reverseAc")).set("isSelect",!1).set("NewAcReverseId","").set("NewAcReverseName","").set("idNewAcReverseId","").set("canChangeClassId","")),state.set("isSelect",action.bool)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CHANGE_ID_NEWACREVERSEID,function(){return state.set("idNewAcReverseId",action.id).set("canChangeClassId","")}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.CHANGE_CANCHANGECLASSID,function(){return state.set("canChangeClassId",action.canChangeClassId)}),_defineProperty(_ActionTypes$INIT_ACC,ActionTypes.SHOW_INFO_AFFIRM,function(){return state.set("showInfoAffirmStatus",action.bool)}),_ActionTypes$INIT_ACC)[action.type]||function(){return state})()}},2458:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=A(n(0)),i=(n(9),n(31));n(1210);var r=n(16),s=y(n(1076)),u=y(n(181)),l=y(n(1212)),d=A(n(1330)),f=A(n(1277)),p=y(n(10));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}var _=(0,i.connect)(function(e){return e})(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),c(t,[{key:"componentDidMount",value:function(){p.setTitle({title:"科目设置"}),p.setIcon({showIcon:!1}),p.setRight({show:!1}),"qcye"!==sessionStorage.getItem("preverPage")?this.props.dispatch(s.getAcListandAsslistFetch()):sessionStorage.removeItem("preverPage")}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.acconfigState,a=e.history,c=e.allState,i=e.homeState,y=i.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]),A=c.get("aclist").toSeq(),_=n.get("tabSelectedIndex"),I=n.get("allAcCheckBoxDisplay"),C=n.get("allAcModifyButtonDisplay"),g=n.get("toolBarDisplayIndex"),m=n.get("showedLowerAcIdList"),E=i.getIn(["data","userInfo","sobInfo","moduleInfo"]),T=!!E&&E.indexOf("NUMBER")>-1,h=c.getIn(["systemInfo","unitDecimalCount"]),b=c.get("aclist").some(function(e){return e.get("selected")}),v=c.get("acTags"),N=v.getIn([_,"sub"]),w=A.map(function(e,t){return e.set("idx",t)}).filter(function(e){return N.indexOf(e.get("category"))>-1}).map(function(e){var t=e.get("acid"),n=A.getIn([e.get("idx")+1,"upperid"]);return e.set("hasSub",!!n&&n===t)});return t(u.navigationSetMenu("config","",function(){return function(e){return e(u.allExportDo("excelsend",{year:0,month:0,exportModel:"ac",action:"MANAGER-AC_SETTING-EXPORT_AC"}))}})),o.default.createElement(r.Container,{className:"ac-config"},o.default.createElement(f.default,{tabSelectedIndex:_,dispatch:t,acTags:v,callback:function(e){return t(l.changeTabIndexAcConfig(e))}}),o.default.createElement("div",{className:"btn",style:{display:C?"":"none"},onClick:function(){return t(l.beforeInsertAc("","","first",a))}},o.default.createElement(r.Icon,{type:"add",color:"#7E6B5B",size:"14"}),o.default.createElement("span",null,"增加一级科目")),o.default.createElement(r.ScrollView,{flex:"1",uniqueKey:"ac-config-scroll",savePosition:!0,className:"ac-list"},w.map(function(e,n){var c=e.get("upperid"),i=c?"#FEF3E3":"#fff",r=!c||m.indexOf(c)>-1?"":"none",s=m.indexOf(e.get("acid"))>-1,u=c?w.find(function(e){return e.get("acid")===c}).get("acname"):"";return o.default.createElement(d.default,{hasSub:e.get("hasSub"),isExpanded:s,style:{backgroundColor:i,display:r},key:e.get("acid"),idx:e.get("idx"),ac:e,selectable:!0,allAcCheckBoxDisplay:I,allAcModifyButtonDisplay:C,currTabAcList:w,dispatch:t,uppername:u,isEnd:n===w.size-1,history:a})})),o.default.createElement(r.Row,null,o.default.createElement(r.ButtonGroup,{height:50,style:{display:1===g?"":"none"}},o.default.createElement(r.Button,{disabled:!y,onClick:function(){return t(l.showAllAcModifyButton())}},o.default.createElement(r.Icon,{type:"add-plus"}),o.default.createElement("span",null,"新增")),o.default.createElement(r.Button,{disabled:!y,onClick:function(){return t(l.showAllAcCheckBox())}},o.default.createElement(r.Icon,{type:"select",size:"15"}),o.default.createElement("span",null,"选择")),o.default.createElement(r.Button,{disabled:!y,onClick:function(){y?p.actionSheet({title:"选择",cancelButton:"取消",otherButtons:T?["期初值","反悔模式","计算单位设置"]:["期初值","反悔模式"],onSuccess:function(e){-1!=e.buttonIndex&&(0==e.buttonIndex?a.push("/config/qcye"):1==e.buttonIndex?a.push("/reverse/reverseac"):2==e.buttonIndex&&p.actionSheet({title:"数量值支持小数点后保留位数,当前为:"+h,cancelButton:"取消",otherButtons:["0","1","2","3","4"],onSuccess:function(e){e.buttonIndex>-1&&e.buttonIndex.toString()!==h?t(u.changeSystemunitDecimalCount(e.buttonIndex.toString())):p.toast.info("小数点后保留位数未改变")}}))},onFail:function(e){}}):(sessionStorage.setItem("preverPage","qcye"),a.push("/config/qcye"))}},o.default.createElement(r.Icon,{type:y?"more":"initial-value"}),o.default.createElement("span",null,y?"更多":"期初值"))),o.default.createElement(r.ButtonGroup,{height:50,style:{display:2===g?"":"none"}},o.default.createElement(r.Button,{onClick:function(){return t(s.selectAcAll(N))}},o.default.createElement(r.Icon,{type:"choose"}),o.default.createElement("span",null,"全选")),o.default.createElement(r.Button,{onClick:function(){return t(s.unselectAcAll())&t(l.hideAllAcCheckBox())}},o.default.createElement(r.Icon,{type:"cancel"}),o.default.createElement("span",null,"取消")),o.default.createElement(r.Button,{disabled:!b,onClick:function(){return t(s.deleteAcFetch())}},o.default.createElement(r.Icon,{type:"delete"}),o.default.createElement("span",null,"删除"))),o.default.createElement(r.ButtonGroup,{height:50,style:{display:3===g?"":"none"}},o.default.createElement(r.Button,{onClick:function(){return t(l.hideAllAcModifyButton())}},o.default.createElement(r.Icon,{type:"cancel"}),o.default.createElement("span",null,"取消")))))}}]),t}())||a;t.default=_}}]);