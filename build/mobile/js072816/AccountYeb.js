(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{1329:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_ACCOUNT_MXB="INIT_ACCOUNT_MXB",t.GET_ACCOUNT_DETAIL_CATEGORY_DETAIL="GET_ACCOUNT_DETAIL_CATEGORY_DETAIL",t.GET_ACCOUNT_DETAIL_LIST="GET_ACCOUNT_DETAIL_LIST",t.CHANGE_ACCOUNT_DETAIL_COMMON_STRING="CHANGE_ACCOUNT_DETAIL_COMMON_STRING",t.CHANGE_ACCOUNT_MXB_CHOOSE_VALUE="CHANGE_ACCOUNT_MXB_CHOOSE_VALUE",t.CHANGE_ACCOUNT_MXB_ACCOUNT_TYPE="CHANGE_ACCOUNT_MXB_ACCOUNT_TYPE"},1438:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeAccountMxbAccountType=t.changeAccountMxbChooseValue=t.changeAccountDetailCommonString=t.getDetailList=t.getAccountMxbBalanceListFromSwitchPeriodOrAccount=t.getDetailsCategoryInfo=t.getBusinessDetail=void 0;var n,o=l(a(1329)),r=a(124),i=(n=r)&&n.__esModule?n:{default:n},u=a(13),c=l(a(10)),s=l(a(25)),d=l(a(181));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.getBusinessDetail=function(e,t,a,n){return function(r,l){c.toast.loading(s.LOADING_TIP_TEXT,0);var p=l().accountMxbState.getIn(["views","accountDetailType"]),_=t.get("uuid"),T=""+t.get("uuid")+s.TREE_JOIN_STR+t.get("name");(0,i.default)("getAccountReportDetail","POST",JSON.stringify({begin:a,end:n,typeUuid:"",accountUuid:_,accountType:"",accountDetailType:p,needPeriod:"true",currentPage:1,pageSize:s.ZHMX_LIMIE_LENGTH}),function(i){if(c.toast.hide(),(0,u.showMessage)(i)){r(f(a,n,T));var s=i.data.periodDtoJson?r(d.everyTableGetIssuedate(i.data.periodDtoJson)):[];r({type:o.GET_ACCOUNT_DETAIL_LIST,receivedData:i.data,period:i.data.periodDtoJson,issues:s,issuedate:a,endissuedate:n,accountUuid:_,categoryName:"全部",accountName:t.get("name"),currentPage:1,pageCount:i.data.pages,needPeriod:"true"}),e.push("accountmxb")}})}};var f=t.getDetailsCategoryInfo=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(r){var c=a?"全部"===a?"全部":a.split(s.TREE_JOIN_STR)[1]:"全部",d=a?"全部"===a?"":a.split(s.TREE_JOIN_STR)[0]:"";(0,i.default)("getAccountReportCategory","POST",JSON.stringify({begin:e,end:t,accountUuid:d,accountType:n}),function(e){(0,u.showMessage)(e)&&r({type:o.GET_ACCOUNT_DETAIL_CATEGORY_DETAIL,accountCategory:e.data.accountCategory,otherCategory:e.data.otherCategory,otherType:e.data.otherType,accountList:e.data.accountList,accountTypeList:e.data.accountTypeList,accountName:c,accountUuid:d})})}};t.getAccountMxbBalanceListFromSwitchPeriodOrAccount=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments[3],r=(arguments[4],arguments[5]),l=arguments[6];return function(f,p){c.toast.loading(s.LOADING_TIP_TEXT,0),(0,i.default)("getAccountReportCategory","POST",JSON.stringify({begin:e,end:t,accountUuid:n,accountType:l}),function(_){if((0,u.showMessage)(_)){var T="全部",g="";_.data.accountList&&_.data.accountList.map(function(e){e.uuid===n&&(!0,T=e.name,g=e.uuid)}),f({type:o.GET_ACCOUNT_DETAIL_CATEGORY_DETAIL,accountCategory:_.data.accountCategory,otherCategory:_.data.otherCategory,otherType:_.data.otherType,accountList:_.data.accountList,accountTypeList:_.data.accountTypeList,accountName:T,accountUuid:g});var y=p().accountMxbState.getIn(["views","categoryUuid"]),C=(p().accountMxbState.getIn(["views","categoryName"]),""),h="全部";if(y){var v=!1;!function e(t){return t.forEach(function(t){t.uuid===y&&(v=!0,h=t.name),t.childList&&t.childList.length&&e(t.childList)})}({ACCOUNT_CATEGORY:_.data.accountCategory,OTHER_CATEGORY:_.data.otherCategory,OTHER_TYPE:_.data.otherType}[r].childList),v&&(C=y)}(0,i.default)("getAccountReportDetail","POST",JSON.stringify({begin:e,end:t,accountUuid:g,accountType:l,accountDetailType:r,typeUuid:C,currentPage:1,pageSize:s.ZHMX_LIMIE_LENGTH,needPeriod:a}),function(a){if((0,u.showMessage)(a)){var n=a.data.periodDtoJson?f(d.everyTableGetIssuedate(a.data.periodDtoJson)):[];f({type:o.GET_ACCOUNT_DETAIL_LIST,receivedData:a.data,period:a.data.periodDtoJson,issues:n,issuedate:e,endissuedate:t,currentPage:1,categoryName:h,categoryUuid:C,pageCount:a.data.pages,accountUuid:g})}c.toast.hide()})}else c.toast.hide()})}},t.getDetailList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments[3],r=arguments[4],l=arguments[5],f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,p=arguments[7],_=arguments[8],T=arguments[9];return function(g,y){!_&&c.toast.loading("加载中...",0);var C=y().accountMxbState.getIn(["views","accountType"]);(0,i.default)("getAccountReportDetail","POST",JSON.stringify({begin:e||"",end:t||"",needPeriod:a,accountUuid:n,accountType:C,accountDetailType:r,typeUuid:l,currentPage:f,pageSize:s.ZHMX_LIMIE_LENGTH}),function(r){if(!_&&c.toast.hide(),(0,u.showMessage)(r)){_&&T.setState({isLoading:!1});var i=r.data.periodDtoJson?g(d.everyTableGetIssuedate(r.data.periodDtoJson)):[];g({type:o.GET_ACCOUNT_DETAIL_LIST,receivedData:r.data,period:r.data.periodDtoJson,issues:i,issuedate:e,endissuedate:t,currentPage:f,categorValue:"",pageCount:r.data.pages,accountUuid:n,needPeriod:a,shouldConcat:p})}})}},t.changeAccountDetailCommonString=function(e,t,a){return function(n){n({type:o.CHANGE_ACCOUNT_DETAIL_COMMON_STRING,parent:e,position:t,value:a})}},t.changeAccountMxbChooseValue=function(e){return{type:o.CHANGE_ACCOUNT_MXB_CHOOSE_VALUE,value:e}},t.changeAccountMxbAccountType=function(e){return{type:o.CHANGE_ACCOUNT_MXB_ACCOUNT_TYPE,value:e}}},1439:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=arguments[1];return((e={},r(e,o.INIT_ACCOUNT_MXB,function(){return i}),r(e,o.GET_ACCOUNT_DETAIL_CATEGORY_DETAIL,function(){var e=[{uuid:a.accountCategory.uuid,name:a.accountCategory.name,childList:[]}];e.push.apply(e,function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(a.accountCategory.childList));var o=[{key:"",label:"全部",childList:[]}],r={cash:"现金",general:"一般户",basic:"基本户",Alipay:"支付宝",WeChat:"微信",other:"其它",spare:"备用金"};return a.accountTypeList&&a.accountTypeList.length&&a.accountTypeList.map(function(e){o.push({key:e,label:r[e],childList:[]})}),t.setIn(["category","accountCategory"],(0,n.fromJS)(e)).setIn(["category","accountList"],(0,n.fromJS)(a.accountList.length>0?a.accountList:[{childList:[]}])).setIn(["category","accountTypeList"],(0,n.fromJS)(o)).setIn(["views","accountUuid"],(0,n.fromJS)(a.accountUuid)).setIn(["views","accountName"],(0,n.fromJS)(a.accountName))}),r(e,o.GET_ACCOUNT_DETAIL_LIST,function(){if("true"===a.needPeriod){a.period;t=t.set("period",(0,n.fromJS)(a.period)).set("issues",(0,n.fromJS)(a.issues))}var e=[];if(a.shouldConcat){var o=t.get("detailsTemp").toJS();e=o.concat(a.receivedData.detailList)}else e=a.receivedData.detailList;return a.categoryName&&(t=t.setIn(["views","categoryName"],a.categoryName).setIn(["views","categoryUuid"],a.categoryUuid)),a.accountName&&(t=t.setIn(["views","accountName"],a.accountName)),t.set("detailsTemp",(0,n.fromJS)(e)).set("QcData",(0,n.fromJS)(a.receivedData.beginDetail)).set("QmData",(0,n.fromJS)(a.receivedData.totalDetail)).set("currentPage",a.currentPage).set("pageCount",a.pageCount).setIn(["views","issuedate"],(0,n.fromJS)(a.issuedate)).setIn(["views","endissuedate"],(0,n.fromJS)(a.endissuedate)).setIn(["views","accountUuid"],(0,n.fromJS)(a.accountUuid))}),r(e,o.CHANGE_ACCOUNT_DETAIL_COMMON_STRING,function(){return t.setIn([a.parent,a.position],a.value)}),r(e,o.CHANGE_ACCOUNT_MXB_CHOOSE_VALUE,function(){return t=t.setIn(["views","chooseValue"],a.value)}),r(e,o.CHANGE_ACCOUNT_MXB_ACCOUNT_TYPE,function(){return t.setIn(["views","accountType"],a.value)}),e)[a.type]||function(){return t})()};var n=a(9),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1329));function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=(0,n.fromJS)({views:{issuedate:"",endissuedate:"",accountUuid:"",accountName:"",categoryUuid:"",categoryName:"请选择类别",accountDetailType:"ACCOUNT_CATEGORY",accountDetailName:"账户流水",needPeriod:"",QcqmDirection:"",chooseValue:"ISSUE",accountType:""},category:{accountCategory:[{childList:[]}],otherCategory:[{childList:[]}],otherType:[{childList:[]}],accountList:[{childList:[]}],accountTypeList:[]},QcData:[],QmData:[],issues:[],detailsTemp:[]})},1616:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_ACCOUNT_YEB="INIT_ACCOUNT_YEB",t.GET_ACCOUNT_BALANCE_LIST="GET_ACCOUNT_BALANCE_LIST",t.CHANGE_ACCOUNT_YEB_CHOOSE_VALUE="CHANGE_ACCOUNT_YEB_CHOOSE_VALUE"},2363:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o,r,i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=C(a(0)),c=C(a(2)),s=a(31),d=a(9);a(2364);var l=y(a(10)),f=(y(a(25)),a(16)),p=a(123),_=C(a(2366)),T=y(a(2367)),g=y(a(181));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}var h=(0,s.connect)(function(e){return e})((r=o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showModal:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),i(t,[{key:"componentDidMount",value:function(){l.setTitle({title:"账户余额表"}),l.setIcon({showIcon:!1}),this.props.homeState.getIn(["permissionInfo","Report","exportExcel","permission"])||l.setRight({show:!1}),"home"===sessionStorage.getItem("prevPage")&&(sessionStorage.removeItem("prevPage"),this.props.dispatch(T.initState()),this.props.dispatch(T.getPeriodAndBalanceList("","","true")))}},{key:"render",value:function(){var e=this.props,t=(e.allState,e.dispatch),a=e.accountYebState,n=e.history,o=(this.state.showModal,a.get("balanceTemp")),r=a.get("issuedate"),i=a.get("endissuedate"),c=a.getIn(["views","chooseValue"]),s=a.get("issues"),d=s.findIndex(function(e){return e.get("value")===r}),l=s.slice(0,d),y=r,C=i||y;return t(g.navigationSetMenu("config","",function(){return function(e){return e(g.allExportDo("sendAccountExcelbalance",{begin:y,end:C}))}})),u.default.createElement(f.Container,{className:"account-yeb"},u.default.createElement(p.MutiPeriodMoreSelect,{start:r,issues:s,end:i,nextperiods:l,chooseValue:c,onBeginOk:function(e){t(T.getPeriodAndBalanceList(e,""))},onEndOk:function(e,a){t(T.getPeriodAndBalanceList(e,a))},changeChooseValue:function(e){return t(T.changeAccountYebChooseValue(e))}}),u.default.createElement(f.Row,{className:"ba-title"},u.default.createElement("div",{className:"ba-title-item"},"期初余额"),u.default.createElement("div",{className:"ba-title-item"},"本期收款"),u.default.createElement("div",{className:"ba-title-item"},"本期付款"),u.default.createElement("div",{className:"ba-title-item"},"期末余额")),u.default.createElement(f.ScrollView,{flex:"1",uniqueKey:"accountyeb-scroll",savePosition:!0},u.default.createElement("div",{className:"ba-list"},o.map(function(e,a){return u.default.createElement("div",{key:a},u.default.createElement(_.default,{className:"balance-running-tabel-width",item:e,history:n,dispatch:t,issuedate:r,endissuedate:i,chooseValue:c}))}))))}}]),t}(),o.displayName="AccountYeb",o.propTypes={allState:c.default.instanceOf(d.Map),dispatch:c.default.func},n=r))||n;t.default=h},2364:function(e,t,a){},2366:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(0),u=(o=i)&&o.__esModule?o:{default:o},c=(a(9),a(22)),s=a(16),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1438));var l=(0,c.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.dispatch,n=e.className,o=e.issuedate,r=e.endissuedate,i=e.history,c=e.chooseValue;return u.default.createElement("div",{className:"ba "+n},u.default.createElement("div",null,u.default.createElement("span",{className:"name",onClick:function(e){sessionStorage.setItem("fromPage","zhyeb"),a(d.getBusinessDetail(i,t,o,r)),a(d.changeAccountMxbChooseValue(c))}},u.default.createElement("span",{className:"name-name"},t.get("name"))),u.default.createElement("span",{className:"zhye-category-type"},{cash:"现金",general:"一般户",basic:"基本户",Alipay:"支付宝",WeChat:"微信",other:"其它",spare:"备用金"}[t.get("type")],u.default.createElement("span",{className:"account-type-icon"}))),u.default.createElement("div",{className:"ba-info"},u.default.createElement(s.Amount,{showZero:!0},t.get("openDebit")),u.default.createElement(s.Amount,{showZero:!0},t.get("currentDebit")),u.default.createElement(s.Amount,{showZero:!0},t.get("currentCredit")),u.default.createElement(s.Amount,{showZero:!0},t.get("closeDebit"))))}}]),t}())||n;t.default=l},2367:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initState=t.changeAccountYebChooseValue=t.getPeriodAndBalanceList=void 0;var n,o=l(a(1616)),r=a(124),i=(n=r)&&n.__esModule?n:{default:n},u=a(13),c=l(a(10)),s=l(a(25)),d=l(a(181));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.getPeriodAndBalanceList=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(n,r){c.toast.loading(s.LOADING_TIP_TEXT,0),(0,i.default)("getAccountReportBalance","POST",JSON.stringify({begin:e||"",end:t||"",needPeriod:a}),function(r){if(c.toast.hide(),(0,u.showMessage)(r)){var i=e;if(a){var s=n(d.reportGetIssuedateAndFreshPeriod(r));i=e||s}var l=r.data.periodDtoJson?n(d.everyTableGetIssuedate(r.data.periodDtoJson)):[];n({type:o.GET_ACCOUNT_BALANCE_LIST,receivedData:r.data.accountBalanceList,period:r.data.periodDtoJson,issuedate:i,endissuedate:t,getPeriod:a,issues:l})}})}},t.changeAccountYebChooseValue=function(e){return{type:o.CHANGE_ACCOUNT_YEB_CHOOSE_VALUE,value:e}},t.initState=function(){return{type:o.INIT_ACCOUNT_YEB}}},2368:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=arguments[1];return((e={},r(e,o.INIT_ACCOUNT_YEB,function(){return i}),r(e,o.GET_ACCOUNT_BALANCE_LIST,function(){if("true"===a.getPeriod){a.period;t=t.set("period",(0,n.fromJS)(a.period)).set("issues",(0,n.fromJS)(a.issues))}var e=[];return a.receivedData.forEach(function(t){return e.push(t.categoryUuid)}),t.set("balanceTemp",(0,n.fromJS)(a.receivedData)).set("issuedate",(0,n.fromJS)(a.issuedate)).set("endissuedate",(0,n.fromJS)(a.endissuedate))}),r(e,o.CHANGE_ACCOUNT_YEB_CHOOSE_VALUE,function(){return t=t.setIn(["views","chooseValue"],a.value)}),e)[a.type]||function(){return t})()};var n=a(9),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1616));function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=(0,n.fromJS)({views:{chooseValue:"ISSUE"},issues:[{value:"",key:""}],issuedate:"",endissuedate:"",balanceTemp:[]})},988:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var n=i(a(2363)),o=i(a(2368)),r=i(a(1439));function i(e){return e&&e.__esModule?e:{default:e}}var u={accountYebState:o.default,accountMxbState:r.default};t.reducer=u,t.view=n.default}}]);