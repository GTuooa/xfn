(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1060:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSerialListChecked=e.getSerialListIn=e.getBatchList=e.addInventoryAssist=e.chzzAssemblyList=e.getChzzZzdPrice=e.getChzzZzdListPrice=e.getChzzPrice=e.getChzzListPrice=e.getProjectListByCategory=e.getProjectTreeList=e.getCurrentListByCategory=e.getCurrentTree=e.getStockListByCategory=e.getCostStockCategory=e.getPoundageProjectList=e.getPoundageCurrentList=e.getPoundageCategory=e.changeHandleCategory=e.getJxsezcCategory=e.getChyePrice=e.getChdbPriceAll=e.getChdbPrice=e.getWarehouseCardList=e.accountMoreCard=e.changeTagName=e.getLabelFetch=e.changeLrlsEnclosureList=e.deleteUploadFJUrl=e.uploadFiles=e.getUploadGetTokenFetch=e.fromYlToLr=e.getXmjzProjectList=e.getProjectShareType=e.getGgfyftList=e.getGgfyftProjectList=e.autoCalculate=e.changeGgfyftProjectCard=e.setJzcbPrice=e.getJzcbListPrice=e.getJzcbPrice=e.filterJzcbList=e.getJzcbList=e.getCostStockByCategory=e.getJzcbWarehouseList=e.getJzcbCategoryList=e.getJzcbCardList=e.getSfglQcCategoryList=e.getSfglList=e.getSfglCategoryList=e.getSfglCardList=e.getWjzzsList=e.zjtxSelectCategory=e.autoJzsyAmount=e.getJzsyList=e.getCqzcCategoryList=e.getFprzList=e.getKjfpList=e.toManageType=e.getYysrYyzcAmount=e.getXczcPaymentList=e.getPaymentInfo=e.xczcCalculateAmount=e.getSfzcNotHandleAmount=e.getSfzcTransferAmount=e.getSfzcNotPayList=e.getSfzcZzsList=e.changeYysrStockCard=e.autoCqzcCzAmount=e.changeCurrentCardList=e.getCardList=e.changeTaxRate=e.changeLrlsAmount=e.getXmjzList=e.getZbPendingStrongList=e.getTzPendingStrongList=e.getJkPendingStrongList=e.changeHandleType=e.getOriRunning=e.changeHomeAccountOriDate=e.clearCardTemp=e.getProjectCardList=e.changeProjectCard=e.pendingStrongListBeSelect=e.getZskxPaymentList=e.changeLrlsOriState=e.saveEditRunning=e.changeLrlsAccount=e.getCardDetail=e.changeLrlsData=e.accountSaveAndNew=void 0;var r=a(9),i=_(a(124)),n=_(a(24)),o=a(13),s=a(1397),u=g(a(1396)),c=g(a(10)),d=g(a(25)),T=g(a(183));function g(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function _(t){return t&&t.__esModule?t:{default:t}}e.accountSaveAndNew=function(){return function(t,e){var a=e().allState.get("period"),r=a.get("openedyear"),i=a.get("openedmonth"),n="";if(r){var s=new Date(r,i,0),c=new Date,d=(new Date).getFullYear(),T=(new Date).getMonth()+1;n=s<c?c:Number(r)==Number(d)&&Number(i)==Number(T)?c:new Date(r,Number(i)-1,1)}else n=new Date;n=new o.DateLib(n).toString(),t({type:u.RUNNING_ACCOUNT_SAVE_AND_NEW,date:n})}};var S=e.changeLrlsData=function(t,e,a){return{type:u.RUNNING_CHANGE_LRLS_DATA,dataType:t,value:e,set:a}},p=(e.getCardDetail=function(t,e){return function(a,n){var c=n().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE");(0,i.default)("getRunningDetail","GET","uuid="+t,function(t){if((0,o.showMessage)(t)){var i=t.data.result;delete i.parentUuid,a({type:u.RUNNING_GET_HOMEACCOUNT_CARD_DETAIL,receivedData:i,isModify:e,isOpenedWarehouse:c}),(0,s.getCard)((0,r.fromJS)(i),a)}})}},e.changeLrlsAccount=function(t,e){return{type:u.RUNNING_CHANGE_LRLS_ACCOUNT,value:t,accountStatus:e}},e.saveEditRunning=function(t,e){return function(a,r){var i=r().editRunningState,n=r().allState.getIn(["taxRate","scale"]),o=r().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE");(0,s.save)(a,i,n,t,o,e)}},e.changeLrlsOriState=function(t){return function(e,a){e(f()),e(S(["oriTemp","oriState"],t));var r=a().editRunningState;(0,s.oriStateFunc)(e,r)}},e.getZskxPaymentList=function(){return function(t,e){var a=e().editRunningState.getIn(["oriTemp","oriDate"]),r=e().editRunningState.getIn(["oriTemp","categoryUuid"]),n=[];e().editRunningState.getIn(["oriTemp","currentCardList"]).toJS().forEach(function(t){n.push(t.uuid)}),n.includes("")&&(n=[]),c.toast.loading("加载中...",0),(0,i.default)("getManageList","POST",JSON.stringify({oriDate:a,categoryUuidList:[r],cardUuidList:n,oriUuid:"",currentPage:""}),function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_JRLIST,receivedData:e.data.pendingManageList})})}},e.pendingStrongListBeSelect=function(t,e){return{type:u.RUNNING_PENDINGSTRONGLIST_BESELECT,value:e,idx:t}},e.changeProjectCard=function(t,e,a){return{type:u.RUNNING_CHANGE_PROJECT_CARD,dataType:t,value:e,idx:a}},e.getProjectCardList=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"projectList";return function(a,r){var n=r().homeState.getIn(["data","userInfo","sobInfo","sobId"]);c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("getProjectCardList","POST",JSON.stringify({sobId:n,categoryList:t,needCommonCard:!0,needAssist:!0,needMake:!0,needIndirect:!0,needMechanical:!0}),function(t){c.toast.hide(),(0,o.showMessage)(t)&&a({type:u.RUNNING_GET_PROJECT_CARDLIST,receivedData:t.data.result,cardType:e})})}}),f=e.clearCardTemp=function(){return{type:u.RUNNING_CLEAR_CARDTEMP}},C=(e.changeHomeAccountOriDate=function(t,e){return function(a,r){if(a(S(["oriTemp","oriDate"],t)),!e){var i=r().editRunningState;(0,s.oriDateFunc)(a,i)}}},e.getOriRunning=function(t,e,a){return function(n,c){(0,i.default)("getRunningBusiness","GET","oriUuid="+t,function(t){if((0,o.showMessage)(t,"","","",!0)){n({type:u.RUNNING_ORIRUNNING,receivedData:t.data,ylType:a});var i=c().editRunningState,d=i.getIn(["oriTemp","propertyTax"]),T=i.getIn(["oriTemp","oriState"]);"SX_ZZS"==d&&"STATE_SF_JN"==T&&n(y()),"STATE_YYSR_ZJ"==T&&(n(A()),n(E("",!0)),n(Z()),"COPY"==a&&n(N()),t.data.jrOri.beProject&&(n(p(t.data.jrOri.projectRange)),n(v()))),e&&((0,s.getCard)((0,r.fromJS)(t.data.category),n,!0,a),"STATE_CHYE_TYDJ"==T&&n(b("STATE_CHYE_TYDJ")),"STATE_CQZC_ZJTX"==T&&"COPY"==a&&n(h("LB_ZJTX"))),!e&&["STATE_XMJZ_JZRK","STATE_XMJZ_QRSRCB"].includes(T)&&n(L())}})}}),L=(e.changeHandleType=function(t){return function(e,a){e(f()),e({type:u.RUNNING_HANDLETYPE,value:t});var r=a().editRunningState;(0,s.handleTypeFunc)(e,r)}},e.getJkPendingStrongList=function(){return function(t,e){var a=e().editRunningState,r=a.getIn(["oriTemp","categoryType"]),n=a.getIn(["oriTemp","oriState"]);if(a.getIn(["oriTemp",T.categoryTypeObj[r],"beAccrued"])&&"STATE_JK_ZFLX"==n){var s=a.getIn(["oriTemp","categoryUuid"]),g=a.getIn(["oriTemp","oriDate"]),_="";if(a.getIn(["oriTemp","usedCurrent"])){var S=a.getIn(["oriTemp","currentCardList",0,"cardUuid"]);_=S||""}c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("getJkPendingStrongList","GET","categoryUuid="+s+"&oriDate="+g+"&currentCardUuid="+_,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_JRLIST,receivedData:e.data.jrList})})}}},e.getTzPendingStrongList=function(){return function(t,e){var a=e().editRunningState,r=a.getIn(["oriTemp","categoryType"]),n=a.getIn(["oriTemp","oriState"]);if(a.getIn(["oriTemp",T.categoryTypeObj[r],"beAccrued"])&&["STATE_TZ_SRGL","STATE_TZ_SRLX"].includes(n)){var s=a.getIn(["oriTemp","categoryUuid"]),g=a.getIn(["oriTemp","oriDate"]),_="";if(a.getIn(["oriTemp","usedCurrent"])){var S=a.getIn(["oriTemp","currentCardList",0,"cardUuid"]);_=S||""}c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("getTzPendingStrongList","GET","categoryUuid="+s+"&oriDate="+g+"&currentCardUuid="+_,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_JRLIST,receivedData:e.data.jrList})})}}},e.getZbPendingStrongList=function(){return function(t,e){var a=e().editRunningState,r=a.getIn(["oriTemp","categoryType"]),n=a.getIn(["oriTemp","oriState"]);if(a.getIn(["oriTemp",T.categoryTypeObj[r],"beAccrued"])&&"STATE_ZB_ZFLR"==n){var s=a.getIn(["oriTemp","categoryUuid"]),g=a.getIn(["oriTemp","oriDate"]),_="";if(a.getIn(["oriTemp","usedCurrent"])){var S=a.getIn(["oriTemp","currentCardList",0,"cardUuid"]);_=S||""}c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("getZbPendingStrongList","GET","categoryUuid="+s+"&oriDate="+g+"&currentCardUuid="+_,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_JRLIST,receivedData:e.data.jrList})})}}},e.getXmjzList=function(t){return function(e,a){var r=a().editRunningState,n=r.getIn(["oriTemp","oriDate"]),s=r.getIn(["oriTemp","oriState"]),c=r.getIn(["oriTemp","projectCardList"]),d=r.getIn(["oriTemp","oriUuid"]);if(!t||"STATE_XMJZ_XMJQ"!=s){var T="";if(c){var g=c.getIn([0,"cardUuid"]);T=g||"",c.getIn([0,"projectProperty"])}(0,i.default)("getXmjzList","GET","oriDate="+n+"&projectUuid="+T+"&oriUuid="+(d||""),function(t){if((0,o.showMessage)(t)){e({type:u.RUNNING_GET_JRLIST,receivedData:t.data.carryoverList});var a=(0,o.decimal)(t.data.allHappenAmount-t.data.allStoreAmount);e(S(["oriTemp","jrAmount"],a))}})}}}),m=(e.changeLrlsAmount=function(t){return{type:u.RUNNING_LRLS_AMOUNT,value:t}},e.changeTaxRate=function(t){return{type:u.RUNNING_TAXRATE,value:t}},e.getCardList=function(t,e){return function(a,r){var n=r().homeState.getIn(["data","userInfo","sobInfo","sobId"]),s=r().editRunningState,c=s.getIn(["oriTemp","categoryType"]),d=s.getIn(["oriTemp","oriState"]),g=s.getIn(["oriTemp",T.categoryTypeObj[c],t]);e&&(g=e);var _="",S="stockRange"==t?"getStockCardList":"getCurrentCardList";switch(c){case"LB_YYSR":_="STATE_YYSR_DJ"===d?"stockRange"==t?"4":"PREIN":"stockRange"==t?"4":"NEEDIN";break;case"LB_YYZC":_="STATE_YYZC_DJ"===d?"stockRange"==t?"5":"PREPAY":"stockRange"==t?"5":"NEEDPAY";break;case"LB_YYWSR":_="NEEDIN";break;case"LB_YYWZC":_="NEEDPAY";break;case"LB_CQZC":_="JR_HANDLE_GJ"===s.getIn(["oriTemp","handleType"])?"NEEDPAY":"NEEDIN";break;case"LB_FYZC":_="STATE_FY_DJ"==s.getIn(["oriTemp","oriState"])?"PREPAY":"NEEDPAY";break;case"LB_ZSKX":if(_="NEEDIN","STATE_ZS_TH"==d)return;break;case"LB_ZFKX":if(_="NEEDPAY","STATE_ZF_SH"==d)return;break;case"LB_CHDB":case"LB_CHYE":case"LB_CHTRXM":case"LB_XMJZ":g=[],_="0";break;case"LB_JXSEZC":g=s.getIn(["oriTemp","stockRange"]),_="5"}e&&(t="commonCardList"),(0,i.default)(S,"POST",JSON.stringify({sobId:n,property:_,categoryList:g,isUniform:"STATE_CHYE_TYDJ"==d||null,openQuantity:"STATE_CHYE_TYDJ"==d||null}),function(e){(0,o.showMessage)(e)&&a({type:u.RUNNING_GET_CARDLIST,data:e.data.result,cardType:t})})}}),l=(e.changeCurrentCardList=function(t,e){return{type:u.RUNNING_CHANGE_CURRENT_CARDLIST,value:t,cardType:e}},e.autoCqzcCzAmount=function(){return{type:u.RUNNING_AUTO_CQZC_CZAMOUNT}},e.changeYysrStockCard=function(t,e,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YYSZ",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"stockCardList";return{type:u.RUNNING_CHANGE_YYSR_STOCKCARD,dataType:t,value:e,idx:a,categoryType:r,cardType:i}}),y=e.getSfzcZzsList=function(){return function(t,e){var a=e().editRunningState,r=a.getIn(["oriTemp","oriDate"]),n="modify"===a.getIn(["views","insertOrModify"])?a.getIn(["oriTemp","oriUuid"]):"";c.toast.loading("加载中...",0),(0,i.default)("getSfzcZzsList","GET","oriDate="+r+"&oriUuid="+n,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t(S(["oriTemp","deductedAmount"],e.data.notHandleAmount))})}},h=(e.getSfzcNotPayList=function(){return function(t,e){var a=e().editRunningState.getIn(["oriTemp","oriDate"]),r=e().editRunningState.getIn(["oriTemp","categoryUuid"]);c.toast.loading("加载中...",0),(0,i.default)("getSfzcNotPayList","GET","oriDate="+a+"&categoryUuid="+r,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_JRLIST,receivedData:e.data.jrList})})}},e.getSfzcTransferAmount=function(){return function(t,e){var a=e().editRunningState.getIn(["oriTemp","oriDate"]);c.toast.loading("加载中...",0),(0,i.default)("getSfzcTransferAmount","GET","oriDate="+a,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t(S(["oriTemp","transferAmount"],e.data.amount))})}},e.getSfzcNotHandleAmount=function(){return function(t,e){var a=e().editRunningState.getIn(["oriTemp","oriDate"]),r=e().editRunningState.getIn(["oriTemp","categoryUuid"]);c.toast.loading("加载中...",0),(0,i.default)("getSfzcNotHandleAmount","GET","oriDate="+a+"&categoryUuid="+r,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t(S(["oriTemp","payableAmount"],e.data.payableAmount))})}},e.xczcCalculateAmount=function(t){return{type:u.RUNNING_XCZC_CALCULATE_AMOUNT,propertyPay:t}},e.getPaymentInfo=function(){return function(t,e){var a=e().editRunningState.getIn(["oriTemp","oriDate"]),r=e().editRunningState.getIn(["oriTemp","categoryUuid"]);c.toast.loading("加载中...",0),(0,i.default)("getPaymentInfo","GET","oriDate="+a+"&categoryUuid="+r,function(e){c.toast.hide(),(0,o.showMessage)(e)&&(t(S(["oriTemp","accumulationAmount"],e.data.accumulationAmount)),t(S(["oriTemp","socialSecurityAmount"],e.data.socialSecurityAmount)))})}},e.getXczcPaymentList=function(){return function(t,e){var a=e().editRunningState.getIn(["oriTemp","oriDate"]),r=e().editRunningState.getIn(["oriTemp","categoryUuid"]);c.toast.loading("加载中...",0),(0,i.default)("getXczcPaymentList","GET","oriDate="+a+"&categoryUuid="+r,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_JRLIST,receivedData:e.data.jrList})})}},e.getYysrYyzcAmount=function(){return function(t,e){var a=e().editRunningState.get("oriTemp"),r=a.get("oriDate"),n=a.get("categoryUuid"),s=a.get("oriState"),u=a.getIn(["currentCardList",0,"cardUuid"]),T=a.get("usedCurrent")&&u?u:"";["STATE_FY_DJ","STATE_YYSR_DJ","STATE_YYZC_DJ"].includes(s)||(c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("getRunningAccountInfo","GET","oriDate="+r+"&categoryUuid="+n+"&oriState="+s+"&cardUuid="+T,function(e){c.toast.hide(),(0,o.showMessage)(e)&&(t(S(["oriTemp","payableAmount"],e.data.payableAmount)),t(S(["oriTemp","preAmount"],e.data.preAmount)),t(S(["oriTemp","offsetAmount"],"")))}))}},e.toManageType=function(t){return function(e,a){var i=a().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE");e({type:u.RUNNING_GET_HOMEACCOUNT_CARD_DETAIL,receivedData:t,isOpenedWarehouse:i}),(0,s.getCard)((0,r.fromJS)(t),e)}},e.getKjfpList=function(){return function(t,e){var a=e().editRunningState.getIn(["oriTemp","oriDate"]),r=e().editRunningState.getIn(["oriTemp","billType"]);c.toast.loading("加载中...",0),(0,i.default)("getBusinessMakeoutList","GET","oriDate="+a+"&billType="+r,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_JRLIST,receivedData:e.data.result})})}},e.getFprzList=function(){return function(t,e){var a=e().editRunningState.getIn(["oriTemp","oriDate"]),r=e().editRunningState.getIn(["oriTemp","billType"]);c.toast.loading("加载中...",0),(0,i.default)("getBusinessAuthList","GET","oriDate="+a+"&billType="+r,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_JRLIST,receivedData:e.data.result})})}},e.getCqzcCategoryList=function(t){return function(e){c.toast.loading("加载中...",0),(0,i.default)("getCategoryList","POST",JSON.stringify({type:t}),function(t){c.toast.hide(),(0,o.showMessage)(t)&&e({type:u.RUNNING_GET_CQZC_CATEGORY,receivedData:t.data.result[0].childList})})}}),A=(e.getJzsyList=function(){return function(t,e){var a=e().editRunningState.getIn(["oriTemp","oriDate"]),r=e().editRunningState.getIn(["oriTemp","relationCategoryUuid"]);c.toast.loading("加载中...",0),(0,i.default)("getJzsyList","GET","oriDate="+a+"&categoryUuid="+r,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_JRLIST,receivedData:e.data.jrList})})}},e.autoJzsyAmount=function(){return{type:u.RUNNING_AUTO_JZSY_AMOUNT}},e.zjtxSelectCategory=function(t){return{type:u.RUNNING_ZJTX_SELECT_CATEGORY,data:t}},e.getWjzzsList=function(t){return function(e){c.toast.loading("加载中...",0),(0,i.default)("getBusinessTurnoutList","GET","oriDate="+t,function(t){c.toast.hide(),(0,o.showMessage)(t)&&e({type:u.RUNNING_GET_JRLIST,receivedData:t.data.jrJvVatDtoList})})}},e.getSfglCardList=function(){return function(t,e){var a=e().editRunningState.get("oriTemp"),r=a.get("oriDate"),n=a.get("categoryUuid"),s=a.get("categoryType"),c="oriDate="+r;["LB_ZSKX","LB_ZFKX"].includes(s)&&(c="oriDate="+r+"&categoryUuid="+n),(0,i.default)("getSfglCardList","GET",""+c,function(e){(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_CARDLIST,data:e.data.cardList,cardType:"contactsRange"})})}},e.getSfglCategoryList=function(){return function(t,e){var a=e().editRunningState.getIn(["oriTemp","oriDate"]);c.toast.loading("加载中...",0),(0,i.default)("getSfglCategoryList","GET","oriDate="+a,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_SFGL_CATEGORYLIST,data:e.data.category})})}},e.getSfglList=function(){return function(t,e){var a=e().editRunningState.getIn(["oriTemp","oriDate"]),r=e().editRunningState.getIn(["oriTemp","pendingManageDto","categoryUuid"]).toJS(),n=e().editRunningState.getIn(["oriTemp","currentCardList"]).toJS(),s=[],d=[];r.forEach(function(t){s.push(t.uuid)}),n.forEach(function(t){d.push(t.uuid)}),s.includes("")&&(s=[]),d.includes("")&&(d=[]),c.toast.loading("加载中...",0),(0,i.default)("getManageList","POST",JSON.stringify({oriDate:a,categoryUuidList:s,cardUuidList:d,oriUuid:"",currentPage:""}),function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_JRLIST,receivedData:e.data.pendingManageList})})}},e.getSfglQcCategoryList=function(t,e){return function(a){c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("getManagerCategoryList","GET","uuid="+e,function(e){c.toast.hide(),(0,o.showMessage)(e)&&a(S(["oriTemp","pendingStrongList",t,"categoryList"],(0,r.fromJS)(e.data.category.childList)))})}},e.getJzcbCardList=function(){return function(t,e){var a=e().editRunningState,r=a.getIn(["oriTemp","oriDate"]),n=a.getIn(["oriTemp","oriState"]),s=a.getIn(["oriTemp","relationCategoryUuid"]);s&&(c.toast.loading("加载中...",0),(0,i.default)("getCostStock","GET","categoryUuid="+s+"&oriDate="+r+"&oriState="+n,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_CARDLIST,cardType:"carryoverStockRange",data:e.data.cardList})}))}}),N=e.getJzcbCategoryList=function(t){return function(e,a){var r=a().editRunningState,n=r.getIn(["oriTemp","oriDate"]),s=r.getIn(["oriTemp","oriState"]),c=[];r.getIn(["oriTemp","stockCardList"]).map(function(t){t.get("cardUuid")&&c.push(t.get("cardUuid"))}),"STATE_YYSR_ZJ"===s||t||(c=[]),(0,i.default)("getCostCategory","POST",JSON.stringify({oriDate:n,oriState:s,cardUuidList:c}),function(t){(0,o.showMessage)(t)&&e({type:u.RUNNING_GET_JZCB_CATEGORYLIST,data:t.data.categoryList})})}},E=(e.getJzcbWarehouseList=function(){return function(t,e){var a=e().editRunningState;if(e().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE")){var n=a.getIn(["oriTemp","oriDate"]),s=a.getIn(["oriTemp","oriState"]);(0,i.default)("getCostWarehouse","POST",JSON.stringify({oriDate:n,oriState:s,cardUuidList:[]}),function(e){if((0,o.showMessage)(e)){var a=[];e.data.warehouseList.map(function(t){t.key=t.code+" "+t.name,t.value=t.uuid,a.push(t)}),t(S(["cardAllList","warehouseList"],(0,r.fromJS)(a)))}})}}},e.getCostStockByCategory=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"carryoverStockRange";return function(r,n){var s=n().editRunningState,d=s.getIn(["oriTemp","oriDate"]),T=s.getIn(["oriTemp","oriState"]),g=s.getIn(["oriTemp","relationCategoryUuid"]);("STATE_YYSR_ZJ"!=T||g)&&(c.toast.loading("加载中...",0),(0,i.default)("getCostStockByCategory","POST",JSON.stringify({oriDate:d,oriState:T,categoryUuid:g,cardCategoryUuid:e?t:"",subordinateUuid:e?"":t}),function(t){(0,o.showMessage)(t)&&r({type:u.RUNNING_GET_CARDLIST,cardType:a,data:t.data.result})}))}}),I=(e.getJzcbList=function(t){return function(e,a){var n=a().editRunningState,s=n.get("oriTemp"),d=s.get("oriDate"),T=s.get("oriState"),g=s.get("relationCategoryUuid")?s.get("relationCategoryUuid"):[],_=n.getIn(["cardAllList","stockCardList"]),p=n.getIn(["cardAllList","warehouseCardList"]),f=[];_.map(function(t){t.get("cardUuid")&&f.push(t.get("cardUuid"))});var C=[];t&&s.get("pendingStrongList").map(function(t){t.get("beSelect")&&C.push(t.get("jrJvUuid"))}),c.toast.loading("加载中...",0),(0,i.default)("getCarryoverList","POST",JSON.stringify({oriDate:d,oriState:T,cardUuidList:f,categoryUuidList:g.map(function(t){return t.get("uuid")}),storeUuidList:p.map(function(t){return t.get("uuid")})}),function(a){if(c.toast.hide(),(0,o.showMessage)(a)){var i=a.data.carryoverList,n=0;t&&i.map(function(t){C.includes(t.jrJvUuid)&&(t.beSelect=!0,n+=Math.abs(t.amount))}),e({type:u.RUNNING_GET_JRLIST,receivedData:i}),t?(e(S(["oriTemp","jrAmount"],(0,o.decimal)(n))),e(I())):e(S(["oriTemp","stockCardList"],(0,r.fromJS)([])))}})}},e.filterJzcbList=function(){return{type:u.RUNNING_FILTER_JZCBLIST}},e.getJzcbPrice=function(t){return function(e,a){var n=a().editRunningState,s=n.getIn(["oriTemp","oriDate"]),u=n.getIn(["oriTemp","stockCardList",t,"warehouseCardUuid"]),d=n.getIn(["oriTemp","stockCardList",t]),T=d.get("cardUuid");T&&(c.toast.loading("加载中...",0),(0,i.default)("getChdbPrice","POST",JSON.stringify({oriDate:s,stockPriceList:[{cardUuid:T,storeUuid:u}]}),function(a){if(c.toast.hide(),(0,o.showMessage)(a)){var i=0==a.data[0].price?"":a.data[0].price,n=i>0?i:"",s="";if(d.get("isOpenedQuantity")){var u=d.get("basicUnitQuantity")?d.get("basicUnitQuantity"):1;n=(0,o.decimal)(i*u,4),d.get("quantity")&&(s=(0,o.decimal)(n*d.get("quantity")))}var T=d.toJS();T.price=n,T.unitPrice=i,T.amount=s,e(S(["oriTemp","stockCardList",t],(0,r.fromJS)(T)))}}))}},e.getJzcbListPrice=function(t,e){return function(a,n){var s=n().editRunningState,u=s.getIn(["oriTemp","oriDate"]),d=s.getIn(["oriTemp","stockCardList",t,"warehouseCardUuid"]),T=(s.getIn(["oriTemp","stockCardList",t,"cardUuid"]),[]);e.forEach(function(t,e){var a=t.cardUuid,r="";0==e&&d&&(r=d),T.push({cardUuid:a,storeUuid:r,name:t.oriName})}),c.toast.loading("加载中...",0),(0,i.default)("getChdbPrice","POST",JSON.stringify({oriDate:u,stockPriceList:T}),function(i){if(c.toast.hide(),(0,o.showMessage)(i)){var n=s.getIn(["oriTemp","stockCardList"]).toJS(),u=e.length;n.forEach(function(e,a){if(a>=t&&a<=t+u-1){var r=a-t,n=i.data[r].price<=0?"":i.data[r].price;e.price=n,e.unitPrice=i.data[r].price,e.amount=""}}),a(S(["oriTemp","stockCardList"],(0,r.fromJS)(n)))}})}},e.setJzcbPrice=function(){return function(t,e){t({type:u.RUNNING_SET_JZCB_PRICE});var a=e().editRunningState,n=a.getIn(["oriTemp","oriDate"]),s=[];a.getIn(["oriTemp","stockCardList"]).forEach(function(t,e){s.push({cardUuid:t.get("cardUuid"),storeUuid:""})}),c.toast.loading("加载中...",0),(0,i.default)("getChdbPrice","POST",JSON.stringify({oriDate:n,stockPriceList:s}),function(e){if(c.toast.hide(),(0,o.showMessage)(e)){var i=a.getIn(["oriTemp","stockCardList"]).toJS();i.forEach(function(t,a){var r=0==e.data[a].price?"":e.data[a].price;t.unitPrice=r}),t(S(["oriTemp","stockCardList"],(0,r.fromJS)(i)))}})}}),b=(e.changeGgfyftProjectCard=function(t,e,a){return{type:u.RUNNING_CHANGE_GGFYFT_PROJECT_CARD,dataType:t,value:e,idx:a}},e.autoCalculate=function(){return{type:u.RUNNING_GGFYFT_AUTO_CALCULATE}},e.getGgfyftProjectList=function(){return function(t,e){var a=e().editRunningState,r=a.getIn(["oriTemp","categoryType"]),n=a.getIn(["oriTemp","oriState"]),s="listFrom=&treeFrom=";["LB_CHTRXM","LB_XMJZ"].includes(r)&&(s="listFrom=&treeFrom=&notProjectProperty=XZ_LOSS&needCommon=false&needAssist=true&needMake=true&needIndirect=true&needMechanical=true&used=true"),"LB_GGFYFT"==r&&(s={STATE_GGFYFT:"listFrom=&treeFrom=&projectProperty=XZ_LOSS&needCommon=false&needAssist=false&needMake=false&needIndirect=false&needMechanical=false&needEmptyCard=true&used=true",STATE_FZSCCB:"listFrom=&treeFrom=&projectProperty=XZ_PRODUCE&needCommon=true&needAssist=false&needMake=false&needIndirect=false&needMechanical=false&used=true",STATE_ZZFY:"listFrom=&treeFrom=&projectProperty=XZ_PRODUCE&needCommon=true&needAssist=true&needMake=false&needIndirect=false&needMechanical=false&used=true",STATE_JJFY:"listFrom=&treeFrom=&projectProperty=XZ_CONSTRUCTION&needCommon=true&needAssist=false&needMake=false&needIndirect=false&needMechanical=false&used=true",STATE_JXZY:"listFrom=&treeFrom=&projectProperty=XZ_CONSTRUCTION&needCommon=true&needAssist=false&needMake=false&needIndirect=true&needMechanical=false&used=true"}[n]),c.toast.loading("加载中...",0),(0,i.default)("getProjectListAndTree","GET",s,function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_PROJECT_CARDLIST,receivedData:e.data.resultList,cardType:"projectList"})})}},e.getGgfyftList=function(){return function(t,e){var a=e().editRunningState,r=a.getIn(["oriTemp","oriDate"]),n=a.getIn(["oriTemp","oriState"]),s="STATE_GGFYFT"===n?a.getIn(["oriTemp","shareType"]):0;(0,i.default)("getProjectShareList","GET","oriDate="+r+"&oriState="+n+"&shareType="+s+"&pageSize=",function(e){(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_JRLIST,receivedData:e.data.shareList})})}},e.getProjectShareType=function(){return function(t){(0,i.default)("getProjectShareType","GET","",function(e){(0,o.showMessage)(e)&&t(S(["cardAllList","projectShareType"],(0,r.fromJS)(e.data.typeList)))})}},e.getXmjzProjectList=function(){return function(t,e){var a=e().editRunningState.getIn(["oriTemp","oriDate"]);c.toast.loading("加载中...",0),(0,i.default)("getXmjzProjectList","GET","oriDate="+a+"&currentPage=0&pageSize=200",function(e){c.toast.hide(),(0,o.showMessage)(e)&&t({type:u.RUNNING_GET_PROJECT_CARDLIST,receivedData:e.data.resultList,cardType:"projectList"})})}},e.fromYlToLr=function(t){return function(e,a){var r=a().runningPreviewState.getIn(["jrOri","oriUuid"]);e(C(r,!0,t))}},e.getUploadGetTokenFetch=function(){return function(t,e){var a=e().allState.get("expire"),r=Date.parse(new Date)/1e3;console.log(a,r,a<r+300),a<r+300&&(0,n.default)("aliyunOssPolicy","GET","",function(e){t({type:u.AFTER_GET_UPLOAD_SIGNATURE,receivedData:e.data,code:e.code})})}},e.uploadFiles=function(t,e,a,r){return function(e,n){var o=[];o.push({fileName:a,enclosurePath:t.data.enclosurePath,size:(t.data.size/1024).toFixed(2),imageOrFile:t.data.mimeType.toString().toUpperCase().indexOf("IMAGE")>-1?"TRUE":"FALSE",label:"无标签",beDelete:!1,mimeType:t.data.mimeType}),(0,i.default)("insertEnclosure","POST",JSON.stringify({enclosureList:o}),function(t){0===t.code&&e({type:u.CHANGE_EDIT_RUNNING_ENCLOSURE_LIST,imgArr:t.data.enclosureList,isLast:r}),r&&c.toast.hide()})}},e.deleteUploadFJUrl=function(t,e,a){return function(e){e({type:u.DELETE_EDIT_RUNNING_UPLOAD_FJ_URL,index:t})}},e.changeLrlsEnclosureList=function(){return{type:u.EDIT_RUNNING_INIT_FJ_LIST}},e.getLabelFetch=function(){return function(t){(0,i.default)("getLsLabel","POST","",function(e){(0,o.showMessage)(e,"","","",!0)&&t({type:u.EDIT_RUNNING_GET_LS_LABEL_FETCH,receivedData:e})})}},e.changeTagName=function(t,e){return function(a){a({type:u.CHANGE_EDIT_RUNNING_TAG_NAME,index:t,value:e})}},e.accountMoreCard=function(t,e,a){return{type:u.RUNNING_ACCOUNT_MORE_CARD,dataType:t,value:e,idx:a}},e.getWarehouseCardList=function(t){return function(e,a){a().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE")&&(0,i.default)("getWarehouseList","GET","isUniform="+("STATE_CHYE_TYDJ"==t||""),function(a){(0,o.showMessage)(a,"","","",!0)&&e({type:u.RUNNING_GET_WAREHOUSE,receivedData:a.data.cardList,oriState:t})})}}),U=(e.getChdbPrice=function(t,e){return function(a,n){var s=n().editRunningState,u=s.getIn(["oriTemp","oriDate"]),d=s.getIn(["oriTemp","warehouseCardList",0,"cardUuid"]),T=[];e.forEach(function(t,e){var a=t.uuid;T.push({cardUuid:a,storeUuid:d})}),c.toast.loading("加载中...",0),(0,i.default)("getChdbPrice","POST",JSON.stringify({oriDate:u,stockPriceList:T}),function(i){if(c.toast.hide(),(0,o.showMessage)(i)){0==i.data[0].price||(0,o.decimal)(i.data[0].price,4);var n=s.getIn(["oriTemp","stockCardList"]).toJS(),u=e.length;n.forEach(function(e,a){if(a>=t&&a<=t+u-1){var r=a-t,n=i.data[r].price<=0?"":i.data[r].price;e.price=n,e.unitPrice=i.data[r].price,e.amount=""}}),a(S(["oriTemp","stockCardList"],(0,r.fromJS)(n)))}})}},e.getChdbPriceAll=function(){return function(t,e){var a=e().editRunningState,n=a.getIn(["oriTemp","oriDate"]),s=a.getIn(["oriTemp","warehouseCardList",0,"cardUuid"]),u=a.getIn(["oriTemp","stockCardList"]);if(s){var d=[];u.forEach(function(t,e){t.get("isOpenedQuantity")&&t.get("cardUuid")&&d.push({storeUuid:s,cardUuid:t.get("cardUuid")})}),0!=d.length&&(c.toast.loading("加载中...",0),(0,i.default)("getChdbPrice","POST",JSON.stringify({oriDate:n,stockPriceList:d}),function(e){if(c.toast.hide(),(0,o.showMessage)(e)){var a=u.toJS();a.forEach(function(t,a){!!t.financialInfo&&t.financialInfo.openSerial&&(t.serialList=[],t.quantity="");var r=!0,i=!1,n=void 0;try{for(var s,u=e.data[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;if(t.cardUuid==c.cardUuid){var d=c.price<=0?"":(0,o.decimal)(c.price,4),T="",g=t.quantity;d&&g&&(T=(0,o.decimal)(Number(d)*Number(g))),t.price=d,t.unitPrice=(0,o.decimal)(c.price,4),t.amount=T;break}}}catch(t){i=!0,n=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw n}}}),t(S(["oriTemp","stockCardList"],(0,r.fromJS)(a)))}}))}}},e.getChyePrice=function(t,e,a){return function(n,s){var u=s().editRunningState,d=u.getIn(["oriTemp","oriDate"]),T=(u.getIn(["oriTemp","oriState"]),u.getIn(["oriTemp","stockCardList",e])),g=T.get("cardUuid"),_=(T.get("isUniformPrice"),T.get("isOpenedQuantity"),[]);"stock"==a?t.forEach(function(t,e){var a=t.uuid,r="";0==e&&(r=T.get("warehouseCardUuid")),_.push({cardUuid:a,storeUuid:r})}):_=[{cardUuid:g,storeUuid:T.get("warehouseCardUuid")}],c.toast.loading("加载中...",0),(0,i.default)("getChdbPrice","POST",JSON.stringify({oriDate:d,stockPriceList:_}),function(i){if(c.toast.hide(),(0,o.showMessage)(i)){var s=u.getIn(["oriTemp","stockCardList"]).toJS(),d=t.length;s.forEach(function(t,r){if(r>=e&&r<=e+d-1){var n=r-e,s=0==i.data[n].price?"":(0,o.decimal)(i.data[n].price,4);if(t.unitPrice=s,t.price=s<=0?"":s,"stock"!=a){var u=T.get("quantity"),c=T.get("basicUnitQuantity")?T.get("basicUnitQuantity"):1;T.getIn(["financialInfo","openSerial"])&&(t.serialList=[],t.quantity="",u=""),t.price=(0,o.decimal)(s*c,4),u&&(t.amount=(0,o.decimal)(t.price*u))}}}),n(S(["oriTemp","stockCardList"],(0,r.fromJS)(s)))}})}},e.getJxsezcCategory=function(){return function(t,e){var a=e().allState.get("oriCategory").toJS(),r=[],i=!0,n=!1,o=void 0;try{for(var s,c=a[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var d=s.value;["LB_YYZC","LB_FYZC","LB_CQZC"].includes(d.categoryType)&&r.push(d)}}catch(t){n=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(n)throw o}}t({type:u.RUNNING_GET_JZCB_CATEGORYLIST,data:r})}},e.changeHandleCategory=function(t){return function(e,a){a().homeState.getIn(["data","userInfo","sobInfo","enableWarehouse"]);(0,i.default)("getRunningDetail","GET","uuid="+t.uuid,function(t){if((0,o.showMessage)(t)){var a=t.data.result;a.beProject&&"SX_HW"!=a.propertyCarryover&&"LB_CQZC"!=a.categoryType&&e(p(t.data.result.projectRange)),"SX_HW"==a.propertyCarryover&&(e(S(["oriTemp","stockRange"],a.acBusinessExpense.stockRange)),e(m("stockRange")),e(Z())),e({type:u.RUNNING_CHANGE_HANDLECATEGORY,data:a})}})}},e.getPoundageCategory=function(t,e,a){return function(n){(0,i.default)("getRunningDetail","GET","uuid="+t,function(t){if((0,o.showMessage)(t)){var i=t.data.result;e&&i.acCost.contactsManagement&&(n(U(i.acCost.contactsRange)),n(S("poundageCurrentRange",(0,r.fromJS)(i.acCost.contactsRange),!0))),a&&i.beProject&&(n(R(i.projectRange)),n(S("poundageProjectRange",(0,r.fromJS)(i.projectRange),!0)))}})}},e.getPoundageCurrentList=function(t){return function(e,a){var r=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,i.default)("getCurrentCardList","POST",JSON.stringify({sobId:r,property:"NEEDPAY",categoryList:t}),function(t){(0,o.showMessage)(t)&&e({type:u.RUNNING_GET_CARDLIST,data:t.data.result,cardType:"poundageCurrent"})})}}),R=e.getPoundageProjectList=function(t){return function(e,a){var r=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,i.default)("getProjectCardList","POST",JSON.stringify({sobId:r,categoryList:t,needCommonCard:!0,needAssist:!0,needMake:!0,needIndirect:!0,needMechanical:!0}),function(t){c.toast.hide(),(0,o.showMessage)(t)&&e({type:u.RUNNING_GET_PROJECT_CARDLIST,receivedData:t.data.result,cardType:"poundageProjectList"})})}},Z=e.getCostStockCategory=function(){return function(t,e){var a=e().editRunningState,n="";if("LB_JZCB"==a.getIn(["oriTemp","categoryType"])){var s=a.getIn(["oriTemp","oriDate"]),u=a.getIn(["oriTemp","oriState"]),c=a.getIn(["oriTemp","relationCategoryUuid"]),d=a.getIn(["oriTemp","oriUuid"]);if(n="oriDate="+s+"&oriState="+u+"&oriUuid="+(d=d||""),"STATE_YYSR_ZJ"==u){if(!c)return;n="oriDate="+s+"&oriState="+u+"&oriUuid="+d+"&categoryUuid="+c}}(0,i.default)("getCostStockCategory","GET",n,function(e){(0,o.showMessage)(e)&&t(S("stockCategoryList",(0,r.fromJS)(e.data.typeList),!0))})}},v=(e.getStockListByCategory=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"commonCardList";return function(a,r){var n=r().homeState.getIn(["data","userInfo","sobInfo","sobId"]),s=r().editRunningState.getIn(["oriTemp","oriState"]);c.toast.loading("加载中...",0),(0,i.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:n,property:"0",listByCategory:t.top?"true":"false",categoryUuid:t.uuid,subordinateUuid:t.uuid,isUniform:"STATE_CHYE_TYDJ"==s||null,openQuantity:"STATE_CHYE_TYDJ"==s||null}),function(t){c.toast.hide(),(0,o.showMessage)(t)&&a({type:u.RUNNING_GET_CARDLIST,data:t.data.resultList,cardType:e})})}},e.getCurrentTree=function(){return function(t,e){var a=e().editRunningState,n=a.getIn(["oriTemp","categoryType"]),s=e().homeState.getIn(["data","userInfo","sobInfo","sobId"]),u=a.getIn(["oriTemp",T.categoryTypeObj[n],"contactsRange"]);(0,i.default)("getCurrentTree","POST",JSON.stringify({sobId:s,categoryList:u}),function(e){(0,o.showMessage)(e)&&t(S("currentCategoryList",(0,r.fromJS)(e.data.typeList),!0))})}},e.getCurrentListByCategory=function(t){return function(e,a){var r=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,i.default)("getCurrentListByCategory","POST",JSON.stringify({sobId:r,property:"",used:!0,listByCategory:!!t.top,categoryUuid:t.uuid,subordinateUuid:t.uuid}),function(t){(0,o.showMessage)(t)&&e({type:u.RUNNING_GET_CARDLIST,data:t.data.resultList,cardType:"commonCurrentList"})})}},e.getProjectTreeList=function(){return function(t,e){var a=e().editRunningState,n=e().homeState.getIn(["data","userInfo","sobInfo","sobId"]),s=a.getIn(["oriTemp","categoryType"]),u=a.getIn(["oriTemp","oriState"]),c=void 0,d=void 0;"LB_CHTRXM"==s&&(d="XZ_LOSS"),"LB_GGFYFT"==s&&(c={STATE_GGFYFT:"XZ_LOSS",STATE_FZSCCB:"XZ_PRODUCE",STATE_ZZFY:"XZ_PRODUCE",STATE_JJFY:"XZ_CONSTRUCTION",STATE_JXZY:"XZ_CONSTRUCTION"}[u]),"LB_XMJZ"!=s?(0,i.default)("getProjectAllCardList","POST",JSON.stringify({sobId:n,projectProperty:c,notProjectProperty:d}),function(e){(0,o.showMessage)(e)&&t(S("projectCategoryList",(0,r.fromJS)(e.data.typeList),!0))}):(0,i.default)("xmjzProjectTree","GET","",function(e){(0,o.showMessage)(e)&&t(S("projectCategoryList",(0,r.fromJS)(e.data.typeList),!0))})}}),J=(e.getProjectListByCategory=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"commonProjectList";return function(a,r){var n=r().homeState.getIn(["data","userInfo","sobInfo","sobId"]),s=r().editRunningState,c=s.getIn(["oriTemp","categoryType"]);if("LB_XMJZ"!=c)(0,i.default)("getProjectSubordinateCardList","POST",JSON.stringify({sobId:n,listByCategory:!!t.top,categoryUuid:t.uuid,subordinateUuid:t.uuid,projectProperty:"LB_CHTRXM"==c?"XZ_PRODUCE":void 0}),function(t){(0,o.showMessage)(t)&&a({type:u.RUNNING_GET_PROJECT_CARDLIST,receivedData:t.data.resultList,cardType:e})});else{var d=s.getIn(["oriTemp","oriDate"]);(0,i.default)("xmjzProjectListByCategory","POST",JSON.stringify({oriDate:d,cardCategoryUuid:t.top?t.uuid:"",subordinateUuid:t.top?"":t.uuid}),function(t){(0,o.showMessage)(t)&&a({type:u.RUNNING_GET_PROJECT_CARDLIST,receivedData:t.data.result,cardType:e})})}}},e.getChzzListPrice=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"stockCardList";return function(n,s){var u=s().editRunningState,d=u.getIn(["oriTemp","oriDate"]),T=u.getIn(["oriTemp",a,t,"warehouseCardUuid"]),g=[];e.forEach(function(t,e){var a=t.uuid,r="";0==e&&T&&(r=T),g.push({cardUuid:a,storeUuid:r,name:t.oriName})}),c.toast.loading("加载中...",0),(0,i.default)("getChdbPrice","POST",JSON.stringify({oriDate:d,stockPriceList:g}),function(i){if(c.toast.hide(),(0,o.showMessage)(i)){var s=u.getIn(["oriTemp",a]).toJS(),d=e.length;s.forEach(function(e,a){if(a>=t&&a<=t+d-1){var r=a-t,n=i.data[r].price<=0?"":i.data[r].price;e.price=n,e.unitPrice=i.data[r].price,e.amount=""}}),n(S(["oriTemp",a],(0,r.fromJS)(s)))}})}},e.getChzzPrice=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stockCardList";return function(a,n){var s=n().editRunningState,u=s.getIn(["oriTemp","oriDate"]),d=s.getIn(["oriTemp",e,t,"warehouseCardUuid"]),T=s.getIn(["oriTemp",e,t]),g=T.get("cardUuid");g&&(c.toast.loading("加载中...",0),(0,i.default)("getChdbPrice","POST",JSON.stringify({oriDate:u,stockPriceList:[{cardUuid:g,storeUuid:d}]}),function(i){if(c.toast.hide(),(0,o.showMessage)(i)){var n=0==i.data[0].price?"":i.data[0].price,s=n<=0?"":n,u="";if(T.get("isOpenedQuantity")){var d=T.get("basicUnitQuantity")?T.get("basicUnitQuantity"):1;s=(0,o.decimal)(n*d,4),T.get("quantity")&&(u=(0,o.decimal)(s*T.get("quantity")))}var g=T.toJS();g.price=s,g.unitPrice=n,g.amount=u,a(S(["oriTemp",e,t],(0,r.fromJS)(g)))}}))}},e.getChzzZzdListPrice=function(t){return function(e,a){var n=a().editRunningState,s=n.getIn(["oriTemp","oriDate"]),u=[];n.getIn(["oriTemp","stockCardList",t,"childCardList"]).forEach(function(t,e){var a=t.get("cardUuid");u.push({cardUuid:a,storeUuid:""})}),c.toast.loading("加载中...",0),(0,i.default)("getChdbPrice","POST",JSON.stringify({oriDate:s,stockPriceList:u}),function(a){if(c.toast.hide(),(0,o.showMessage)(a)){var i=n.getIn(["oriTemp","stockCardList",t]).toJS();i.childCardList.forEach(function(t,e){var r=a.data[e].price<=0?"":a.data[e].price,i=t.basicUnitQuantity?t.basicUnitQuantity:1,n=(0,o.decimal)(Number(t.quantity)*Number(r)*Number(i));t.price=r,t.unitPrice=a.data[e].price,t.amount=n||""}),e(S(["oriTemp","stockCardList",t],(0,r.fromJS)(i)))}})}},e.getChzzZzdPrice=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stockCardList";return function(a,n){var s=n().editRunningState,u=s.getIn(["oriTemp","oriDate"]),d=s.getIn(["oriTemp",e,t[0],"childCardList",t[1],"warehouseCardUuid"]),T=s.getIn(["oriTemp",e,t[0],"childCardList",t[1]]),g=T.get("cardUuid");g&&(c.toast.loading("加载中...",0),(0,i.default)("getChdbPrice","POST",JSON.stringify({oriDate:u,stockPriceList:[{cardUuid:g,storeUuid:d}]}),function(i){if(c.toast.hide(),(0,o.showMessage)(i)){var n=0==i.data[0].price?"":i.data[0].price,s=n,u="";if(T.get("isOpenedQuantity")){var d=T.get("basicUnitQuantity")?T.get("basicUnitQuantity"):1;s=(0,o.decimal)(n*d,4),T.get("quantity")&&(u=(0,o.decimal)(s*T.get("quantity")))}var g=T.toJS();g.price=s,g.unitPrice=n,g.amount=u,a(S(["oriTemp",e,t[0],"childCardList",t[1]],(0,r.fromJS)(g)))}}))}},e.chzzAssemblyList=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"commonAssemblyList";return function(a){(0,i.default)("chzzAssemblyList","GET","listByCategory="+!!t.top+"&categoryUuid="+t.uuid+"&currentPage=0&pageSize=200",function(t){if((0,o.showMessage)(t)){var i=[];t.data.resultList.forEach(function(t){t.oriName=t.name,t.name=t.code+" "+t.name,t.uuid=t.productUuid,i.push(t)}),a(S(["cardAllList",e],(0,r.fromJS)(i)))}})}});e.addInventoryAssist=function(t,e,a){return function(n,s){c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("assistPropertyInsert","POST",JSON.stringify(t),function(i){if(c.toast.hide(),(0,o.showMessage)(i)&&0==i.code){if(n(l("addAssist",(0,r.fromJS)({cardData:t,propertyList:i.data}),"",void 0,e)),"STATE_CHZZ_ZZD"==a)return n(J({top:!0,uuid:""},"assemblyList"));n(m("stockRange"))}})}},e.getBatchList=function(t,e){return function(a,n){c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("getBatchList","POST",JSON.stringify({inventoryUuid:t,canUse:!0}),function(t){if(c.toast.hide(),(0,o.showMessage)(t)&&0===t.code){var i=[],n=t.data.openShelfLife;t.data.batchList.forEach(function(t){var e=t.batch,a=t.expirationDate?t.expirationDate:"",r=n&&a?e+"("+a+")":e;t.key=r,t.value=e,i.push(t)}),a(S(["cardAllList","batchList"],(0,r.fromJS)(i))),e&&e()}})}},e.getSerialListIn=function(t,e){return function(a,n){var s=n().editRunningState,u=s.getIn(["oriTemp","oriDate"]),T=s.getIn(["oriTemp","jrIndex"]),g=s.getIn(["oriTemp","oriState"]);t.oriDate=["STATE_YYSR_ZJ"].includes(g)?void 0:u,t.jrIndex=T||void 0,c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("getSerialListIn","POST",JSON.stringify(t),function(t){if(c.toast.hide(),(0,o.showMessage)(t)&&0===t.code){var i=[];t.data.forEach(function(t){t.key=t.serialNumber,t.value=t.serialUuid,i.push(t)}),a(S(["cardAllList","serialList"],(0,r.fromJS)(i))),e&&e()}})}},e.getSerialListChecked=function(t,e){return function(a,n){(0,i.default)("getSerialList","POST",JSON.stringify(t),function(t){(0,o.showMessage)(t)&&0===t.code&&e((0,r.fromJS)(t.data))})}}},1354:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.abstractFunc=function(t,e){e.get("propertyCarryover");var a=e.get("categoryName")?e.get("categoryName"):e.get("name"),r=e.get("propertyPay"),i=e.get("propertyTax");return{STATE_YYSR_DJ:"收到预收款",STATE_YYSR_XS:a,STATE_YYSR_TS:a,STATE_YYZC_DJ:"支付预付款",STATE_YYZC_GJ:a,STATE_YYZC_TG:a,STATE_FY_DJ:"支付预付款",STATE_FY:a+"支出",STATE_XC_JT:"计提"+{SX_GZXJ:"工资薪金",SX_SHBX:"社会保险'公司'部分",SX_ZFGJJ:"住房公积金'公司'部分",SX_FLF:"福利费",SX_QTXC:a}[r],STATE_XC_FF:("SX_FLF"==r?"支付":"发放")+{SX_GZXJ:"工资薪金",SX_QTXC:a,SX_FLF:"福利费"}[r],STATE_XC_JN:"缴纳"+{SX_SHBX:"社会保险",SX_ZFGJJ:"住房公积金"}[r],STATE_XC_YF:"福利费支出",STATE_SF_YJZZS:"预缴增值税",STATE_SF_JN:""+{SX_QYSDS:"缴纳企业所得税",SX_GRSF:"代缴个人税费",SX_QTSF:"缴纳"+a,SX_ZZS:"缴纳增值税"}[i],STATE_SF_JT:"计提"+{SX_QYSDS:"企业所得税",SX_GRSF:"个人税费",SX_QTSF:""+a,SX_ZZS:"增值税"}[i],STATE_SF_ZCWJZZS:"转出未交增值税",STATE_YYWSR:a,STATE_YYWZC:a,STATE_ZS_SQ:"暂收款",STATE_ZS_TH:"暂收款退还",STATE_ZF_FC:"暂付款",STATE_ZF_SH:"暂付款收回",STATE_CQZC_WF:"购进资产支出",STATE_CQZC_YF:"购进资产支出",STATE_CQZC_WS:"处置资产收入",STATE_CQZC_YS:"处置资产收入",STATE_JK_YS:"收到借款",STATE_JK_JTLX:"计提借款利息",STATE_JK_ZFLX:"支付借款利息",STATE_JK_YF:"偿还本金支出",STATE_TZ_YF:"对外投资支出",STATE_TZ_SRGL:"收到投资收益",STATE_TZ_JTGL:"计提投资收益",STATE_TZ_JTLX:"计提投资收益",STATE_TZ_SRLX:"收到投资收益",STATE_TZ_WS:"收回投资款",STATE_TZ_YS:"收回投资款",STATE_ZB_ZZ:"取得货币资本",STATE_ZB_ZFLR:"支付分配利润",STATE_ZB_LRFP:"计提分配利润",STATE_ZB_JZ:"减少注册资本",STATE_ZB_ZBYJ:"资本溢价",STATE_ZZ:"内部转账",STATE_KJFP_XS:"收入开具发票",STATE_KJFP_TS:"退销开具红字发票",STATE_FPRZ_CG:"增值税专用发票认证",STATE_FPRZ_TG:"退购发票认证",STATE_CQZC_JZSY:"长期资产处置损益",STATE_CQZC_ZJTX:"长期资产折旧摊销",STATE_ZCWJZZS:"转出未交增值税",STATE_SFGL:"核销账款",STATE_GGFYFT:"公共费用分摊",STATE_FZSCCB:"项目分摊",STATE_ZZFY:"项目分摊",STATE_JJFY:"项目分摊",STATE_JXZY:"项目分摊",STATE_CHDB:"存货调拨",STATE_CHYE_CK:"存货余额调整",STATE_CHYE_CH:"存货余额调整",STATE_CHYE_TYDJ:"存货余额调整",STATE_CHYE:"存货余额调整",STATE_JXSEZC_FS:"进项税额转出",STATE_JXSEZC_TFS:"进项税额转出",STATE_CHZZ_ZZCX:"存货组装拆卸",STATE_CHZZ_ZZD:"组装单组装",STATE_CHYE_ZZD:"组装单组装",STATE_CHTRXM:"存货投入使用",STATE_XMJZ_JZRK:"结转入库存货",STATE_XMJZ_XMJQ:"项目结清",STATE_XMJZ_QRSRCB:"确认收入成本"}[t]}},1355:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.showProject=function(t){var e=t.get("categoryType"),a=t.get("oriState"),r=!1;switch(e){case"LB_YYSR":case"LB_YYZC":case"LB_FYZC":r=!0;break;case"LB_CQZC":var i=t.get("newProjectRange")?t.get("newProjectRange"):[];i.map(function(t){"损益项目"==t.get("name")&&(r=!0)});break;case"LB_SFZC":var n=t.get("propertyTax"),o=t.getIn(["acTax","beAccrued"]);"SX_QTSF"!=n&&"SX_QYSDS"!=n||o&&"STATE_SF_JN"==a||(r=!0),"STATE_SF_SFJM"==a&&(r=!1);break;case"LB_XCZC":var s=t.get("propertyPay"),u=t.getIn(["acPayment","beAccrued"]);(({SX_GZXJ:function(){u&&"STATE_XC_FF"==a||(r=!0),"STATE_XC_DK"==a&&(r=!1)},SX_SHBX:function(){u&&"STATE_XC_JN"==a||(r=!0),"STATE_XC_DJ"==a&&(r=!1)},SX_ZFGJJ:function(){u&&"STATE_XC_JN"==a||(r=!0),"STATE_XC_DJ"==a&&(r=!1)},SX_FLF:function(){var e=t.getIn(["acPayment","beWelfare"]);e&&"STATE_XC_FF"==a||(r=!0)},SX_QTXC:function(){u&&"STATE_XC_FF"==a||(r=!0)}})[s]||function(){return null})();break;case"LB_YYWSR":case"LB_YYWZC":r=!0;break;case"LB_ZSKX":"STATE_ZS_SQ"===a&&(r=!0);break;case"LB_ZFKX":"STATE_ZF_FC"===a&&(r=!0);break;case"LB_JK":var c=t.getIn(["acLoan","beAccrued"]);("STATE_JK_JTLX"==a||!c&&"STATE_JK_ZFLX"==a)&&(r=!0);break;case"LB_TZ":var d=t.getIn(["acInvest","beAccrued"]);"STATE_TZ_JTGL"!=a&&"STATE_TZ_JTLX"!=a&&(d||"STATE_TZ_SRGL"!=a&&"STATE_TZ_SRLX"!=a)||(r=!0);break;case"LB_JZSY":case"LB_ZJTX":r=!0;break;case"LB_JZCB":"STATE_YYSR_ZJ"==a&&(r=!0);break;case"LB_JXSEZC":case"LB_CHTRXM":case"LB_XMJZ":r=!0}return r}},1396:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.RUNNING_INIT_FJ_LIST="RUNNING_INIT_FJ_LIST",e.RUNNING_GET_LS_LABEL_FETCH="RUNNING_GET_LS_LABEL_FETCH",e.RUNNING_ACCOUNT_SAVE_AND_NEW="RUNNING_ACCOUNT_SAVE_AND_NEW",e.RUNNING_CHANGE_LRLS_DATA="RUNNING_CHANGE_LRLS_DATA",e.RUNNING_GET_HOMEACCOUNT_CARD_DETAIL="RUNNING_GET_HOMEACCOUNT_CARD_DETAIL",e.RUNNING_CHANGE_LRLS_ACCOUNT="RUNNING_CHANGE_LRLS_ACCOUNT",e.RUNNING_GET_JRLIST="RUNNING_GET_JRLIST",e.RUNNING_PENDINGSTRONGLIST_BESELECT="RUNNING_PENDINGSTRONGLIST_BESELECT",e.RUNNING_CHANGE_PROJECT_CARD="RUNNING_CHANGE_PROJECT_CARD",e.RUNNING_GET_PROJECT_CARDLIST="RUNNING_GET_PROJECT_CARDLIST",e.RUNNING_CLEAR_CARDTEMP="RUNNING_CLEAR_CARDTEMP",e.RUNNING_ORIRUNNING="RUNNING_ORIRUNNING",e.RUNNING_HANDLETYPE="RUNNING_HANDLETYPE",e.RUNNING_LRLS_AMOUNT="RUNNING_LRLS_AMOUNT",e.RUNNING_TAXRATE="RUNNING_TAXRATE",e.RUNNING_GET_CARDLIST="RUNNING_GET_CARDLIST",e.RUNNING_CHANGE_CURRENT_CARDLIST="RUNNING_CHANGE_CURRENT_CARDLIST",e.RUNNING_AUTO_CQZC_CZAMOUNT="RUNNING_AUTO_CQZC_CZAMOUNT",e.RUNNING_CHANGE_YYSR_STOCKCARD="RUNNING_CHANGE_YYSR_STOCKCARD",e.RUNNING_XCZC_CALCULATE_AMOUNT="RUNNING_XCZC_CALCULATE_AMOUNT",e.RUNNING_GET_CQZC_CATEGORY="RUNNING_GET_CQZC_CATEGORY",e.RUNNING_AUTO_JZSY_AMOUNT="RUNNING_AUTO_JZSY_AMOUNT",e.RUNNING_ZJTX_SELECT_CATEGORY="RUNNING_ZJTX_SELECT_CATEGORY",e.RUNNING_GET_SFGL_CATEGORYLIST="RUNNING_GET_SFGL_CATEGORYLIST",e.RUNNING_GET_JZCB_CATEGORYLIST="RUNNING_GET_JZCB_CATEGORYLIST",e.RUNNING_CHANGE_GGFYFT_PROJECT_CARD="RUNNING_CHANGE_GGFYFT_PROJECT_CARD",e.RUNNING_GGFYFT_AUTO_CALCULATE="RUNNING_GGFYFT_AUTO_CALCULATE",e.RUNNING_FILTER_JZCBLIST="RUNNING_FILTER_JZCBLIST",e.RUNNING_GET_WAREHOUSE="RUNNING_GET_WAREHOUSE",e.RUNNING_ACCOUNT_MORE_CARD="RUNNING_ACCOUNT_MORE_CARD",e.RUNNING_CHANGE_HANDLECATEGORY="RUNNING_CHANGE_HANDLECATEGORY",e.RUNNING_SET_JZCB_PRICE="RUNNING_SET_JZCB_PRICE",e.CHANGE_EDIT_RUNNING_ENCLOSURE_LIST="CHANGE_EDIT_RUNNING_ENCLOSURE_LIST",e.DELETE_EDIT_RUNNING_UPLOAD_FJ_URL="DELETE_EDIT_RUNNING_UPLOAD_FJ_URL",e.EDIT_RUNNING_INIT_FJ_LIST="EDIT_RUNNING_INIT_FJ_LIST",e.EDIT_RUNNING_GET_LS_LABEL_FETCH="EDIT_RUNNING_GET_LS_LABEL_FETCH",e.CHANGE_EDIT_RUNNING_TAG_NAME="CHANGE_EDIT_RUNNING_TAG_NAME",e.AFTER_GET_UPLOAD_SIGNATURE="AFTER_GET_UPLOAD_SIGNATURE",e.BEFORE_ADD_MANAGE_TYPE_CARD_FROM_EDIT_RUNNING="BEFORE_ADD_MANAGE_TYPE_CARD_FROM_EDIT_RUNNING",e.BEFORE_ADD_INVENTORY_CARD_FROM_EDIT_RUNNING="BEFORE_ADD_INVENTORY_CARD_FROM_EDIT_RUNNING",e.BEFOR_ADD_ACCONT_FROM_EDIT_RUNNING="BEFOR_ADD_ACCONT_FROM_EDIT_RUNNING",e.BEFORE_ADD_PROJECT_CARD_FROM_EDIT_RUNNING="BEFORE_ADD_PROJECT_CARD_FROM_EDIT_RUNNING",e.BEFORE_ADD_PROJECT_CARD_GET_CODE="BEFORE_ADD_PROJECT_CARD_GET_CODE",e.GET_INVENTORY_WAREHOUSE_TREE="GET_INVENTORY_WAREHOUSE_TREE",e.CHANGE_INVENTORY_DATA="CHANGE_INVENTORY_DATA",e.RUNNING_UPDATE_STOCK_BATCH="RUNNING_UPDATE_STOCK_BATCH"},1397:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.changeStockCard=e.handleTypeFunc=e.abstractFunc=e.oriStateFunc=e.oriDateFunc=e.showProject=e.setDefault=e.getCard=e.save=void 0;var r=a(1712),i=a(1716),n=a(1717),o=a(1355),s=a(1718),u=a(1719),c=a(1354),d=a(1720),T=a(1721);e.save=r.save,e.getCard=i.getCard,e.setDefault=n.setDefault,e.showProject=o.showProject,e.oriDateFunc=s.oriDateFunc,e.oriStateFunc=u.oriStateFunc,e.abstractFunc=c.abstractFunc,e.handleTypeFunc=d.handleTypeFunc,e.changeStockCard=T.changeStockCard},1712:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};e.save=function(t,e,a,i,s,_){var S=e.get("oriTemp").toJS(),p=S.categoryType,f=S.oriState,C="insert"===e.getIn(["views","insertOrModify"]),L="COPY"===e.getIn(["views","ylType"]),m=C||L?g.urlInsert[p]:g.urlModify[p],l=e.get("enclosureList").toJS(),y={};for(var h in c.editRunningTemp[p][f])y[h]=S[h];var A=(0,d.check)(e.get("oriTemp"),y,a,C,L,s);if(A.length)return n.toast.info(A[0]);if(!C&&!L&&(y.oriUuid=S.oriUuid,y.jrUuid=S.jrUuid,y.jrIndex=S.jrIndex,y.encodeType=S.encodeType,""==S.jrIndex||S.jrIndex.length>6))return n.toast.info("流水号不能为空且不能超过6位");n.toast.loading(o.LOADING_TIP_TEXT,0),(0,u.default)(m,"POST",JSON.stringify(r({},y,{projectCardList:y.usedProject?y.projectCardList:void 0,enclosureList:l})),function(e){if(n.toast.hide(),0!==e.code)n.toast.fail(e.code+" "+e.message);else{if(!C&&e.data.encodeType){var a=[{key:"1",value:"系统自动编号"},{key:"2",value:"插入流水号"}];return"1"==e.data.encodeType&&(a=[{key:"1",value:"系统自动编号"}]),"2"==e.data.encodeType&&(a=[{key:"2",value:"插入流水号"}]),void _("2"==e.data.encodeType?"2":"1",a)}if(e.data.jrIndexList?n.toast.success("已生成如下流水：记 "+e.data.jrIndex+" 号"+e.data.jrIndexList.map(function(t,e){return"、记 "+t+" 号"}),2):C&&e.data.jrIndex?n.toast.success("已生成如下流水：记 "+e.data.jrIndex+" 号",2):n.toast.success("保存成功",2),i)t(T.getCardDetail(S.categoryUuid)),t(T.changeLrlsEnclosureList());else{var r=C||L?e.data.oriUuid:y.oriUuid;t(T.getOriRunning(r))}}})};a(9);var i,n=_(a(10)),o=_(a(25)),s=a(124),u=(i=s)&&i.__esModule?i:{default:i},c=a(1713),d=a(1714),T=_(a(1060)),g=_(a(183));function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}},1713:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.editRunningTemp={LB_YYSR:{STATE_YYSR_DJ:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:"",usedAccounts:!1,usedProject:!1,projectCardList:[]},STATE_YYSR_XS:{oriDate:"",categoryUuid:"",oriState:"",amount:"",currentAmount:"",offsetAmount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:"",usedProject:!1,projectCardList:[],beCarryover:!1,carryoverCardList:[],stockCardList:[],billList:[],usedStock:!1,usedAccounts:!1},STATE_YYSR_TS:{oriDate:"",categoryUuid:"",oriState:"",amount:"",currentAmount:"",offsetAmount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:"",usedProject:!1,projectCardList:[],beCarryover:!1,carryoverCardList:[],stockCardList:[],billList:[],usedStock:!1,usedAccounts:!1}},LB_YYZC:{STATE_YYZC_DJ:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:"",usedProject:!1,projectCardList:[],usedAccounts:!1},STATE_YYZC_GJ:{oriDate:"",categoryUuid:"",oriState:"",amount:"",currentAmount:"",offsetAmount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:"",usedProject:!1,projectCardList:[],stockCardList:[],billList:[],beCarryover:!1,relationCategoryUuid:"",propertyCost:"",usedCarryoverProject:!1,carryoverProjectCardList:[],carryoverCardList:[],usedAccounts:!1},STATE_YYZC_TG:{oriDate:"",categoryUuid:"",oriState:"",amount:"",currentAmount:"",offsetAmount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:"",usedProject:!1,projectCardList:[],stockCardList:[],billList:[]}},LB_FYZC:{STATE_FY_DJ:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:"",usedProject:!1,projectCardList:[],usedAccounts:!1},STATE_FY:{oriDate:"",categoryUuid:"",oriState:"",amount:"",currentAmount:"",offsetAmount:"",oriAbstract:"",propertyCost:"",accounts:[],currentCardList:[],usedCurrent:"",billList:[],usedProject:"",projectCardList:[],usedAccounts:!1}},LB_SFZC:{STATE_SF_YJZZS:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[]},STATE_SF_JN:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",beReduceTax:!1,reduceAmount:"",offsetAmount:"",accounts:[],pendingStrongList:[],usedProject:!1,projectCardList:[]},STATE_SF_JT:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",usedProject:!1,projectCardList:[]},STATE_SF_SFJM:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",pendingStrongList:[]},STATE_SF_ZCWJZZS:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:""}},LB_XCZC:{STATE_XC_JT:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[],usedProject:!1,projectCardList:[],propertyCost:""},STATE_XC_JN:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[],propertyCost:"",payment:{},pendingStrongList:[],usedProject:!1,projectCardList:[]},STATE_XC_FF:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[],propertyCost:"",payment:{},pendingStrongList:[],usedProject:!1,projectCardList:[]},STATE_XC_DK:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[],propertyCost:"",payment:{},pendingStrongList:[],usedProject:!1,projectCardList:[]},STATE_XC_DJ:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[],propertyCost:"",payment:{},pendingStrongList:[],usedProject:!1,projectCardList:[]}},LB_CQZC:{STATE_CQZC_YF:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",currentAmount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:"",billList:[],usedProject:!1,projectCardList:[]},STATE_CQZC_YS:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",currentAmount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:"",billList:[],beCleaning:!1,assets:{originalAssetsAmount:"",depreciationAmount:"",cleaningAmount:""},usedProject:"",projectCardList:[]}},LB_YYWSR:{STATE_YYWSR:{oriDate:"",categoryUuid:"",oriState:"",amount:"",currentAmount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:"",usedProject:"",projectCardList:[],billList:[]}},LB_YYWZC:{STATE_YYWZC:{oriDate:"",categoryUuid:"",oriState:"",amount:"",currentAmount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:"",usedProject:"",projectCardList:[],billList:[]}},LB_ZSKX:{STATE_ZS_SQ:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[{accountUuid:"",accountName:"",amount:""}],usedProject:!1,projectCardList:[{cardUuid:"",amount:""}],currentCardList:[],usedCurrent:!1},STATE_ZS_TH:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[{accountUuid:"",accountName:"",amount:""}],pendingStrongList:[]}},LB_ZFKX:{STATE_ZF_FC:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[{accountUuid:"",accountName:"",amount:""}],usedProject:!1,projectCardList:[{cardUuid:"",amount:""}],currentCardList:[],usedCurrent:!1},STATE_ZF_SH:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[{accountUuid:"",accountName:"",amount:""}],pendingStrongList:[]}},LB_JK:{STATE_JK_YS:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",accounts:[{accountUuid:"",accountName:"",amount:""}],currentCardList:[],usedCurrent:!1},STATE_JK_YF:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",accounts:[{accountUuid:"",accountName:"",amount:""}],currentCardList:[],usedCurrent:!1},STATE_JK_JTLX:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",accounts:[{accountUuid:"",accountName:"",amount:""}],usedProject:"",projectCardList:[],currentCardList:[],usedCurrent:!1},STATE_JK_ZFLX:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",accounts:[{accountUuid:"",accountName:"",amount:""}],pendingStrongList:[],usedProject:!1,projectCardList:[],currentCardList:[],usedCurrent:!1}},LB_TZ:{STATE_TZ_YF:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",accounts:[{accountUuid:"",accountName:"",amount:""}],currentCardList:[],usedCurrent:!1},STATE_TZ_JTGL:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",usedProject:!1,projectCardList:[],currentCardList:[],usedCurrent:!1},STATE_TZ_JTLX:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",usedProject:!1,projectCardList:[],currentCardList:[],usedCurrent:!1},STATE_TZ_SRGL:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",accounts:[{accountUuid:"",accountName:"",amount:""}],pendingStrongList:[],usedProject:!1,projectCardList:[],currentCardList:[],usedCurrent:!1},STATE_TZ_SRLX:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",accounts:[{accountUuid:"",accountName:"",amount:""}],pendingStrongList:[],usedProject:!1,projectCardList:[],currentCardList:[],usedCurrent:!1},STATE_TZ_YS:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",accounts:[{accountUuid:"",accountName:"",amount:""}],currentCardList:[],usedCurrent:!1}},LB_ZB:{STATE_ZB_ZZ:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:!1},STATE_ZB_LRFP:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",currentCardList:[],usedCurrent:!1},STATE_ZB_ZFLR:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",accounts:[],pendingStrongList:[],currentCardList:[],usedCurrent:!1},STATE_ZB_JZ:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:!1},STATE_ZB_ZBYJ:{oriDate:"",categoryUuid:"",handleType:"",oriState:"",amount:"",oriAbstract:"",accounts:[],currentCardList:[],usedCurrent:!1}},LB_ZZ:{STATE_ZZ:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",accounts:[]}},LB_KJFP:{STATE_KJFP_XS:{oriDate:"",categoryUuid:"",oriState:"",billType:"",amount:"",oriAbstract:"",pendingStrongList:[]},STATE_KJFP_TS:{oriDate:"",categoryUuid:"",oriState:"",billType:"",amount:"",oriAbstract:"",pendingStrongList:[]}},LB_FPRZ:{STATE_FPRZ_CG:{oriDate:"",categoryUuid:"",oriState:"",billType:"",amount:"",oriAbstract:"",pendingStrongList:[]},STATE_FPRZ_TG:{oriDate:"",categoryUuid:"",oriState:"",billType:"",amount:"",oriAbstract:"",pendingStrongList:[]}},LB_JZSY:{STATE_CQZC_JZSY:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",pendingStrongList:[],assets:{},usedProject:!1,projectCardList:[]}},LB_ZJTX:{STATE_CQZC_ZJTX:{oriDate:"",categoryUuid:"",oriState:"",amount:"",oriAbstract:"",propertyCost:"",usedProject:!1,projectCardList:[]}},LB_ZCWJZZS:{STATE_ZCWJZZS:{oriDate:"",categoryUuid:"",oriState:"",oriAbstract:"",handleMonth:""}},LB_SFGL:{STATE_SFGL:{oriDate:"",oriState:"",categoryUuid:"",oriAbstract:"",amount:"",moedAmount:"",pendingManageDto:{},accounts:[],currentCardList:[],usedAccounts:!1},STATE_SFGL_ML:{oriDate:"",oriState:"",categoryUuid:"",oriAbstract:"",amount:"",pendingManageDto:{},currentCardList:[]}},LB_JZCB:{STATE_YYSR_XS:{oriDate:"",oriState:"",categoryUuid:"",oriAbstract:"",stockCardList:[]},STATE_YYSR_TS:{oriDate:"",oriState:"",categoryUuid:"",oriAbstract:"",stockCardList:[]},STATE_YYSR_ZJ:{oriDate:"",oriState:"",categoryUuid:"",oriAbstract:"",stockCardList:[],usedProject:!1,projectCardList:[],propertyCost:""}},LB_GGFYFT:{STATE_GGFYFT:{oriDate:"",oriState:"",oriAbstract:"",projectCardList:[],usedProject:"",pendingStrongList:[],shareType:""},STATE_FZSCCB:{oriDate:"",oriState:"",oriAbstract:"",projectCardList:[],usedProject:"",pendingStrongList:[]},STATE_ZZFY:{oriDate:"",oriState:"",oriAbstract:"",projectCardList:[],usedProject:"",pendingStrongList:[]},STATE_JJFY:{oriDate:"",oriState:"",oriAbstract:"",projectCardList:[],usedProject:"",pendingStrongList:[]},STATE_JXZY:{oriDate:"",oriState:"",oriAbstract:"",projectCardList:[],usedProject:"",pendingStrongList:[]}},LB_CHDB:{STATE_CHDB:{categoryUuid:"",oriDate:"",oriState:"",oriAbstract:"",warehouseCardList:[],stockCardList:[]}},LB_CHYE:{STATE_CHYE:{categoryUuid:"",oriDate:"",oriState:"",oriAbstract:"",stockCardList:[]},STATE_CHYE_CK:{categoryUuid:"",oriDate:"",oriState:"",oriAbstract:"",stockCardList:[]},STATE_CHYE_CH:{categoryUuid:"",oriDate:"",oriState:"",oriAbstract:"",stockCardList:[]}},LB_JXSEZC:{STATE_JXSEZC_FS:{categoryUuid:"",relationCategoryUuid:"",oriDate:"",oriState:"",oriAbstract:"",usedStock:"",stockCardList:[],amount:"",usedProject:"",projectCardList:[],propertyCost:""}},LB_CHZZ:{STATE_CHZZ_ZZCX:{categoryUuid:"",oriDate:"",oriState:"",oriAbstract:"",stockCardList:[],stockCardOtherList:[]},STATE_CHZZ_ZZD:{categoryUuid:"",oriDate:"",oriState:"",oriAbstract:"",stockCardList:[]}},LB_CHTRXM:{STATE_CHTRXM:{categoryUuid:"",oriDate:"",oriState:"",oriAbstract:"",usedProject:"",projectCardList:[],stockCardList:[]}},LB_XMJZ:{STATE_XMJZ_JZRK:{categoryUuid:"",oriDate:"",oriState:"",oriAbstract:"",usedProject:"",projectCardList:[],stockCardList:[]},STATE_XMJZ_XMJQ:{categoryUuid:"",oriDate:"",oriState:"",oriAbstract:"",usedProject:"",projectCardList:[],stockCardList:[],amount:"",currentAmount:""},STATE_XMJZ_QRSRCB:{categoryUuid:"",oriDate:"",oriState:"",oriAbstract:"",usedProject:"",projectCardList:[],amount:"",currentAmount:""}}}},1714:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.check=function(t,e,a,r,s,c){var d=[],T=t.get("categoryType"),g=t.get("oriState"),_=t.getIn([n.categoryTypeObj[T],"beManagemented"]),S=t.getIn([n.categoryTypeObj[T],"beAccrued"]);""==e.oriAbstract&&d.push("请填写摘要");e.oriAbstract.length>i.RUNNING_ABSTRACT_LENGTH&&d.push("摘要长度不能超过"+i.RUNNING_ABSTRACT_LENGTH+"个字符");var p="LB_GGFYFT"==T||e.usedProject,f=e.projectCardList,C=!1;if(p){var L=[],m=f.every(function(t){return L.push(t.cardUuid),t.amount<=0&&!0,"COMNCRD"!=t.code||t.propertyCost||(C=!0),t.cardUuid});m||d.push("有未选择的项目卡片")}var l=e.usedCurrent;l&&!t.getIn(["currentCardList",0,"cardUuid"])&&d.push("请选择往来单位");function y(){e.stockCardList.forEach(function(t,e){var a=!1,r=!1;if(t.cardUuid){t.amount<=0&&(r=!0),!t.isOpenedQuantity&&r&&d.push("存货明细"+(e+1)+"未填写金额"),t.isOpenedQuantity&&(t.quantity<=0?a=!0:t.unitUuid||d.push("存货明细"+(e+1)+"未选择单位"),a&&r&&d.push("存货明细"+(e+1)+"数量和金额不能同时为空")),c&&""==t.warehouseCardUuid&&d.push("存货明细"+(e+1)+"未选择仓库"),t.financialInfo=t.financialInfo?t.financialInfo:{};var i=t.financialInfo.openAssist,n=t.financialInfo.openBatch,o=t.financialInfo.openShelfLife,s=t.financialInfo.openSerial,u=t.assistList?t.assistList:[];if(i){var T=t.financialInfo.assistClassificationList.length;T!=u.length&&d.push("存货明细"+(e+1)+"属性未选择完整")}n&&(t.batch||d.push("存货明细"+(e+1)+"批次未选择"),o&&!t.expirationDate&&d.push("存货明细"+(e+1)+"批次未选择截止日期")),s&&a&&d.push("存货明细"+(e+1)+"未选择序列号")}})}var h=!1,A=!1,N=0,E=t.get("usedAccounts"),I=t.get("accounts").toJS();if(E){var b=[],U=I.every(function(t){return b.push(t.accountUuid),t.amount<=0&&(A=!0),N+=Number(t.amount),t.accountUuid});U||d.push("有未选择的账户"),A&&d.push("账户有未填写的金额");var R=[].concat(function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(new Set(b)));R.length<b.length&&d.push("有重复的账户"),R.length>32&&d.push("多账户不可超过32个账户")}var Z=!1,v=[],J=[];if(r){var D=t.get("accounts").some(function(t){return t.getIn(["poundage","needPoundage"])});D&&t.get("needUsedPoundage")&&(Z=!0,v=t.get("poundageCurrentCardList").toJS(),J=t.get("poundageProjectCardList").toJS())}switch(e.needUsedPoundage=Z,e.poundageCurrentCardList=v,e.poundageProjectCardList=J,T){case"LB_YYSR":var P=t.get("propertyCarryover");h=!_;var G=Number(e.offsetAmount),Y=Math.abs(Number(e.preAmount)),O=Math.abs(Number(e.payableAmount));if(_&&("STATE_YYSR_DJ"==g||e.currentAmount>0)&&(h=!0),0==Math.abs(Number(e.amount))&&d.push("请填写金额"),r&&"STATE_YYSR_XS"==g&&G>Y&&d.push("预收抵扣金额不可大于预收款"),r&&"STATE_YYSR_TS"==g&&G>O&&d.push("预付抵扣金额不可大于应收款"),r&&G>e.amount&&d.push("预收(付)抵扣不可大于总金额"),r&&Number(e.currentAmount)+Number(e.offsetAmount)>e.amount&&d.push("本次收(付)款金额+预收(付)抵扣不可大于总金额"),"STATE_YYSR_DJ"==g||"SX_HW"!=P&&!t.get("usedStock")||y(),e.stockCardList&&e.stockCardList.forEach(function(t,a){t.cardUuid||e.stockCardList.splice(a,1)}),r&&e.carryoverCardList){var k=[];e.carryoverCardList.forEach(function(t,a){var r=t.cardUuid,i=t.warehouseCardUuid?t.warehouseCardUuid:"",n=t.batch?t.batch:"",o=t.assistList?t.assistList.map(function(t){return t.propertyUuid}).sort():[],s=r+"_"+i+"_"+n+"_"+o.join("_");k.includes(s)?e.carryoverCardList.splice(a,1):k.push(s)})}r||(e.carryoverCardList=[]),E?(h=!1,"STATE_YYSR_DJ"==g&&(0,o.decimal)(N)!=(0,o.decimal)(e.amount)&&d.push("多账户金额必须与总金额相等"),"STATE_YYSR_XS"==g&&(0,o.decimal)(N)>(0,o.decimal)(e.amount)&&d.push("多账户金额不可大于总金额")):e.accounts=e.accounts.slice(0,1),"SX_HW_FW"!=P||t.get("usedStock")||(e.stockCardList=[],e.carryoverCardList=[]);break;case"LB_YYZC":var F="SX_HW"===t.get("propertyCarryover");h=!_;var B=Number(e.offsetAmount),X=Math.abs(Number(e.preAmount)),j=Math.abs(Number(e.payableAmount));if(_&&("STATE_YYZC_DJ"==g||e.currentAmount>0)&&(h=!0),0==Math.abs(Number(e.amount))&&d.push("请填写金额"),r&&"STATE_YYZC_GJ"==g&&B>X&&d.push("预付抵扣金额不可大于预付款"),r&&"STATE_YYZC_TG"==g&&B>j&&d.push("应付抵扣金额不可大于应付款"),r&&B>e.amount&&d.push("预收(付)抵扣不可大于总金额"),r&&Number(e.currentAmount)+Number(e.offsetAmount)>e.amount&&d.push("本次收(付)款金额+预收(付)抵扣不可大于总金额"),"STATE_YYZC_DJ"!=g&&F&&(y(),e.usedStock=!0),e.stockCardList&&e.stockCardList.forEach(function(t,a){t.cardUuid||e.stockCardList.splice(a,1)}),r&&e.beCarryover){t.get("relationCategoryUuid")||d.push("请选择处理类别");var M=[],w=[],H=[];e.carryoverCardList.forEach(function(t,a){var r=t.cardUuid;if(M.includes(r)&&!H.includes(r)&&H.push(r),M.includes(r)||(M.push(r),w.push([])),!c&&H.includes(r)&&e.carryoverCardList.splice(a,1),c){var i=M.findIndex(function(t){return t==r});w[i].includes(t.warehouseCardUuid)?e.carryoverCardList.splice(a,1):w[i].push(t.warehouseCardUuid)}})}E?(h=!1,"STATE_YYZC_DJ"==g&&(0,o.decimal)(N)!=(0,o.decimal)(e.amount)&&d.push("多账户金额必须与总金额相等"),"STATE_YYZC_GJ"==g&&(0,o.decimal)(N)>(0,o.decimal)(e.amount)&&d.push("多账户金额不可大于总金额")):e.accounts=e.accounts.slice(0,1);break;case"LB_FYZC":0==Math.abs(Number(e.amount))&&d.push("请填写金额"),"STATE_FY_DJ"!=g&&""==e.propertyCost&&d.push("请选择费用性质"),h=!_,_&&("STATE_FY_DJ"!=g&&0==e.currentAmount||(h=!0)),E?(h=!1,"STATE_FY_DJ"==g&&(0,o.decimal)(N)!=(0,o.decimal)(e.amount)&&d.push("多账户金额必须与总金额相等"),"STATE_FY"==g&&(0,o.decimal)(N)>(0,o.decimal)(e.amount)&&d.push("多账户金额不可大于总金额")):e.accounts=e.accounts.slice(0,1);var z=Number(e.offsetAmount),Q=Math.abs(Number(e.preAmount)),x=Math.abs(Number(e.payableAmount));r&&"STATE_FY"==g&&z>Q&&d.push("预付抵扣金额不可大于预付款"),r&&"STATE_FY"==g&&z>x&&d.push("应付抵扣金额不可大于应付款"),r&&z>Math.abs(e.amount)&&d.push("预(应)付抵扣不可大于总金额"),r&&Number(e.currentAmount)+Number(e.offsetAmount)>Math.abs(e.amount)&&d.push("本次收(付)款金额+预(应)付抵扣不可大于总金额");break;case"LB_XCZC":var W=!1;if(["STATE_XC_FF","STATE_XC_JN","STATE_XC_DK","STATE_XC_DJ"].includes(g)){var K=[];e.pendingStrongList.map(function(t){t.beSelect&&(W=!0,K.push(t))}),e.pendingStrongList=K}switch(W&&["STATE_XC_FF","STATE_XC_JN"].includes(g)||""!=e.propertyCost||d.push("请选择费用性质"),t.get("propertyPay")){case"SX_GZXJ":if("STATE_XC_FF"==g){h=!0;var q=t.getIn(["payment","actualAmount"]);S&&0==q&&(h=!1)}break;case"SX_SHBX":case"SX_ZFGJJ":if("STATE_XC_JT"==g&&0==Math.abs(Number(e.amount))&&d.push("请填写金额"),"STATE_XC_JN"==g){if(h=!0,"SX_SHBX"==t.get("propertyPay")&&r&&S){e.amount=t.getIn(["payment","companySocialSecurityAmount"]);var V=t.getIn(["acPayment","beWithholdSocial"]);V||(e.payment=void 0)}if("SX_ZFGJJ"==t.get("propertyPay")&&r&&S){e.amount=t.getIn(["payment","companyAccumulationAmount"]);var $=t.getIn(["acPayment","beWithholding"]);$||(e.payment=void 0)}}break;case"SX_FLF":case"SX_QTXC":h="STATE_XC_FF"==g,0==Math.abs(Number(e.amount))&&d.push("请填写金额");break;default:console.log("校验薪酬支出出错")}break;case"LB_SFZC":var tt=t.get("propertyTax");if("STATE_SF_JN"==g||"STATE_SF_SFJM"==g){var et=[];e.pendingStrongList.map(function(t){t.beSelect&&et.push(t)}),e.pendingStrongList=et}switch(tt){case"SX_ZZS":if("STATE_SF_YJZZS"==g&&(h=!0,0==Math.abs(Number(e.amount))&&d.push("请填写金额")),"STATE_SF_ZCWJZZS"==g&&0==Math.abs(Number(e.amount))&&d.push("请填写金额"),"STATE_SF_JN"==g){var at=t.get("amount"),rt=Number(t.get("offsetAmount")),it=Number(t.get("deductedAmount")),nt=Number(t.get("reduceAmount")),ot=Number(t.get("jrAmount")),st=Number(rt)+Number(at)+Number(nt);0==e.pendingStrongList.length&&d.push("请选择需要处理的流水"),Math.abs(Number(e.amount))>0&&(h=!0),0==st&&d.push("请填写金额"),rt>it&&d.push("预交抵扣金额不能大于待抵扣金额"),st>ot&&d.push("处理税费总额不可大于待核销金额")}"STATE_SF_SFJM"==g&&(0==e.pendingStrongList.length&&d.push("请选择需要处理的流水"),0==Math.abs(Number(e.amount))&&d.push("请填写金额"));break;case"SX_QTSF":case"SX_QYSDS":if("STATE_SF_JT"==g&&0==Math.abs(Number(e.amount))&&d.push("请填写金额"),"STATE_SF_JN"==g){var ut=Number(t.get("reduceAmount")),ct=Number(t.get("amount")),dt=Number(t.get("jrAmount")),Tt=ct+ut;ut>0&&S&&0==e.pendingStrongList.length&&d.push("请选择需要处理的流水"),e.pendingStrongList.length&&S&&Tt>dt&&d.push("核销金额不可大于待支付金额"),0==Tt&&d.push("请填写金额"),ct>0&&(h=!0)}"STATE_SF_SFJM"==g&&(0==e.pendingStrongList.length&&d.push("请选择需要处理的流水"),0==Math.abs(Number(e.amount))&&d.push("请填写金额"));break;case"SX_GRSF":h=!0,0==Math.abs(Number(e.amount))&&d.push("请填写金额");break;default:console.log("校验税费支出出错")}break;case"LB_CQZC":0==Math.abs(Number(e.amount))&&d.push("请填写金额");var gt=t.get("currentAmount");if((Number(gt)>0||!_)&&(h=!0),!r){var _t=t.get("isFullPayment");h=!(!_t&&_)}if(e.beCleaning){var St=e.assets.originalAssetsAmount,pt=e.assets.depreciationAmount;St<=0&&d.push("请填写资产原值"),Number(pt)>Number(St)&&d.push("折旧额不能大于原值"),e.projectCardList[0].amount=e.assets.cleaningAmount}break;case"LB_YYWSR":case"LB_YYWZC":0==Math.abs(Number(e.amount))&&d.push("请填写金额");var ft=t.get("currentAmount");(Number(ft)>0||!_&&Number(e.amount)>0)&&(h=!0);break;case"LB_ZSKX":if(h=!0,0==Math.abs(Number(e.amount))&&d.push("请填写金额"),"STATE_ZS_TH"==g){var Ct=[];e.pendingStrongList.map(function(t){t.beSelect&&Ct.push({beSelect:!0,jrJvUuid:t.jrJvUuid,balanceUuid:t.balanceUuid})}),e.pendingStrongList=Ct,0==Ct.length&&d.push("请选择需要处理的流水"),e.amount>t.get("jrAmount")&&d.push("金额不能大于所有未处理金额")}break;case"LB_ZFKX":if(h=!0,0==Math.abs(Number(e.amount))&&d.push("请填写金额"),"STATE_ZF_SH"==g){var Lt=[];e.pendingStrongList.map(function(t){t.beSelect&&Lt.push(t)}),e.pendingStrongList=Lt,0==Lt.length&&d.push("请选择需要处理的流水"),e.amount>t.get("jrAmount")&&d.push("金额不能大于所有未处理金额")}break;case"LB_JK":if(e.amount<=0&&d.push("请填写金额"),"STATE_JK_JTLX"!=g&&(h=!0),S&&"STATE_JK_ZFLX"==g){var mt=[];p||l||e.pendingStrongList.map(function(t){t.beSelect&&mt.push(t)}),mt.length&&e.amount>t.get("jrAmount")&&d.push("金额不能大于所有未处理金额"),e.pendingStrongList=mt}break;case"LB_TZ":if(e.amount<=0&&d.push("请填写金额"),"STATE_TZ_JTGL"!=g&&"STATE_TZ_JTLX"!=g&&(h=!0),S&&("STATE_TZ_SRGL"==g||"STATE_TZ_SRLX"==g)){var lt=[];p||l||e.pendingStrongList.map(function(t){t.beSelect&&lt.push(t)}),lt.length&&e.amount>t.get("jrAmount")&&d.push("金额不能大于所有未处理金额"),e.pendingStrongList=lt}break;case"LB_ZB":if(e.amount<=0&&d.push("请填写金额"),"STATE_ZB_LRFP"!=g&&(h=!0),S&&"STATE_ZB_ZFLR"==g){var yt=[];p||l||e.pendingStrongList.map(function(t){t.beSelect&&yt.push(t)}),yt.length&&e.amount>t.get("jrAmount")&&d.push("金额不能大于所有未处理金额"),e.pendingStrongList=yt}break;case"LB_ZZ":var ht=t.getIn(["accounts",0,"accountUuid"]),At=t.getIn(["accounts",1,"accountUuid"]);if(e.amount<=0&&d.push("请填写金额"),ht||d.push("请选择转出账户"),At||d.push("请选择转入账户"),ht==At&&d.push("转出账户和转入账户不能相同"),r&&Z&&t.get("includesPoundage")){var Nt=t.getIn(["accounts",0,"poundageAmount"]);e.amount=(0,o.decimal)(Number(e.amount)-Number(Nt))}break;case"LB_SFGL":var Et=t.get("amount"),It=t.get("moedAmount")?Number(t.get("moedAmount")):0,bt=(Number(t.get("jrAmount")),t.getIn(["pendingManageDto","isManualWriteOff"])),Ut=[],Rt=!1,Zt=0,vt=0;if(t.get("pendingStrongList").toJS().map(function(t){if(t.beSelect){var e={uuid:t.uuid,handleAmount:t.handleAmount,moedAmount:t.moedAmount};t.beOpened&&(e.beOpened=!0,e.categoryUuid=t.categoryUuid,t.beCard&&!t.categoryUuid&&(Rt=!0)),Ut.push(e);var a=Number(t.handleAmount)?Number(t.handleAmount):0,r=Number(t.moedAmount)?Number(t.moedAmount):0;"debit"==t.direction?(Zt+=Number(a),vt+=Number(r)):(Zt-=Number(a),vt-=Number(r))}}),Rt&&d.push("请选择需要核算的流水的类别"),0==Ut.length&&d.push("请选择需要处理的流水"),Et>0&&"STATE_SFGL"==g&&!E&&(h=!0),bt&&r){var Jt=(0,o.decimal)(Math.abs(Et)+Math.abs(It)),Dt=(0,o.decimal)(Math.abs(Zt)+Math.abs(vt));E&&(0,o.decimal)(N)!=Jt&&d.push("账户金额与收付款金额不相等"),Jt!=Dt&&d.push("核销金额与手动核销页面金额不一致")}if(bt&&!r){var Pt=(0,o.decimal)(Math.abs(Et));Zt=(0,o.decimal)(Math.abs(Zt)),vt=(0,o.decimal)(Math.abs(vt)),"STATE_SFGL"==g&&Pt!=Zt&&d.push("收付款金额与手动核销页面核销收付款金额不一致"),"STATE_SFGL_ML"==g&&Pt!=vt&&d.push("收付抹零金额与手动核销页面核销抹零金额不一致")}E?h=!1:"STATE_SFGL"==g&&(e.accounts=e.accounts.slice(0,1)),e.pendingManageDto.pendingManageList=Ut,e.pendingManageDto.isManualWriteOff=bt,e.amount=Math.abs(Et),e.moedAmount=Math.abs(It);break;case"LB_JZCB":var Gt=t.get("relationCategoryUuid"),Yt="STATE_YYSR_ZJ"==g;Yt&&!Gt&&d.push("请选择处理类别");var Ot=[],kt=[],Ft=t.get("stockCardList").toJS(),Bt=Ft.every(function(t,e){if(Ot.push(t.cardUuid),t.amount=Number(t.amount),Yt&&t.isOpenedQuantity){0==t.amount&&0==t.quantity&&d.push("存货明细"+(e+1)+"数量和金额不能同时为0"),0!=t.amount&&0!=t.quantity&&t.amount*t.quantity<0&&d.push("存货明细"+(e+1)+"数量和金额应该同正负"),0==t.quantity||t.unitUuid||d.push("存货明细"+(e+1)+"未选择单位"),t.financialInfo=t.financialInfo?t.financialInfo:{};var a=t.financialInfo.openAssist,r=t.financialInfo.openBatch,i=t.financialInfo.openShelfLife,n=t.financialInfo.openSerial,o=t.assistList?t.assistList:[];if(a){var s=t.financialInfo.assistClassificationList.length;s!=o.length&&d.push("存货明细"+(e+1)+"属性未选择完整")}r&&(t.batch||d.push("存货明细"+(e+1)+"批次未选择"),i&&!t.expirationDate&&d.push("存货明细"+(e+1)+"批次未选择截止日期")),n&&t.quantity<=0&&d.push("存货明细"+(e+1)+"未选择序列号")}return c&&""==t.warehouseCardUuid&&d.push("存货明细"+(e+1)+"未选择仓库"),t.cardUuid});Bt||d.push("有未选择的存货卡片"),Yt&&Ft.length>160&&d.push("存货行次不可超过160行"),!Yt&&Ft.length>80&&d.push("存货行次不可超过80行"),t.get("pendingStrongList").forEach(function(t){t.get("beSelect")&&kt.push(t.get("jrJvUuid"))}),"STATE_YYSR_ZJ"!=g&&0==kt.length&&d.push("请选择需要处理的流水"),"STATE_YYSR_ZJ"==g&&p&&(e.projectCard=e.projectCardList[0]),Yt&&(e.categoryUuid=Gt),e.jrJvUuidList=kt,e.stockCardList=Ft;break;case"LB_FPRZ":var Xt=[];e.pendingStrongList.map(function(t){t.beSelect&&Xt.push(t)}),0==Xt.length&&d.push("请选择需要处理的流水"),e.amount<=0&&d.push("请填写金额"),e.amount>t.get("jrAmount")&&d.push("金额不能大于待认证税额"),"STATE_FPRZ_TG"==g&&(e.amount=-Math.abs(e.amount)),e.pendingStrongList=Xt;break;case"LB_KJFP":var jt=[];e.pendingStrongList.map(function(t){t.beSelect&&jt.push(t)}),0==jt.length&&d.push("请选择需要处理的流水"),e.amount<=0&&d.push("请填写金额"),e.amount>t.get("jrAmount")&&d.push("金额不能大于待开票税额"),"STATE_KJFP_TS"==g&&(e.amount=-Math.abs(e.amount)),e.pendingStrongList=jt;break;case"LB_ZCWJZZS":var Mt=0,wt=0;t.get("pendingStrongList").forEach(function(t){"JR_STRONG_STAY_ZCXX"===t.get("pendingStrongType")?Mt+=t.get("taxAmount"):wt+=t.get("taxAmount")}),0==t.get("pendingStrongList").size&&d.push("没有需要转出的流水"),wt>Mt&&d.push("进项税额大于销项税额，无需转出未交增值税");break;case"LB_JZSY":var Ht=[],zt=t.get("assets"),Qt=zt.get("originalAssetsAmount"),xt=zt.get("depreciationAmount");e.pendingStrongList.map(function(t){t.beSelect&&Ht.push(t)}),""==t.get("relationCategoryUuid")&&d.push("请选择处理类别"),0==Ht.length&&d.push("请选择需要处理的流水"),Qt<=0&&d.push("请填写资产原值"),Number(xt)>Number(Qt)&&d.push("累计折旧余额不能大于资产原值"),e.pendingStrongList=Ht,e.categoryUuid=t.get("relationCategoryUuid");break;case"LB_ZJTX":""==t.get("relationCategoryUuid")&&d.push("请选择处理类别"),""==t.get("propertyCost")&&d.push("请选择费用性质"),0==Math.abs(Number(e.amount))&&d.push("请填写金额"),e.categoryUuid=t.get("relationCategoryUuid");break;case"LB_GGFYFT":C&&d.push("损益公共费用项目卡片未选择费用性质");var Wt=0;f.map(function(t){Wt+=Number(t.amount)}),Wt!=t.get("jrAmount")&&d.push("分摊金额合计不等于待分摊金额");var Kt=[],qt=[];e.pendingStrongList.map(function(t){t.beSelect&&(t.beOpened?qt.push(t.balanceUuid):Kt.push(t.jrJvUuid))}),0==Kt.length&&0==qt.length&&d.push("请选择需要处理的流水"),Kt.length+qt.length+f.length>160&&d.push("分摊项目和待处理流水的合计不可超过160行"),e.jrJvUuidList=Kt,e.balanceUuidList=qt,e.usedProject=!0;break;case"LB_CHDB":var Vt=t.getIn(["warehouseCardList",0,"cardUuid"]),$t=t.getIn(["warehouseCardList",1,"cardUuid"]),te=[],ee=!1,ae=0,re=!1,ie=!1,ne=t.get("stockCardList").toJS();ne.every(function(t,e){te.push(t.cardUuid),t.isOpenedQuantity?(t.quantity<=0&&(ee=!0),t.isUniformPrice||(t.amount<=0&&(re=!0),t.price<=0&&(ie=!0))):t.amount<=0&&(re=!0),t.financialInfo=t.financialInfo?t.financialInfo:{};var a=t.financialInfo.openAssist,r=t.financialInfo.openBatch,i=t.financialInfo.openShelfLife,n=t.financialInfo.openSerial,o=t.assistList?t.assistList:[];if(a){var s=t.financialInfo.assistClassificationList.length;s!=o.length&&d.push("存货明细"+(e+1)+"属性未选择完整")}return r&&(t.batch||d.push("存货明细"+(e+1)+"批次未选择"),i&&!t.expirationDate&&d.push("存货明细"+(e+1)+"批次未选择截止日期")),n&&ee&&d.push("存货明细"+(e+1)+"未选择序列号"),ae+=Number(t.amount),t.cardUuid});Vt||d.push("请选择调出仓库"),$t||d.push("请选择调入仓库"),Vt==$t&&d.push("调出仓库和调入仓库不能相同"),ee&&d.push("存货明细有未填写的数量"),ie&&d.push("存货明细的单价必填且需大于0"),re&&d.push("存货明细的金额必填且需大于0"),ne.length>80&&d.push("存货行次不可超过80行"),e.amount=ae;break;case"LB_CHYE":switch(g){case"STATE_CHYE":e.jrState="";break;case"STATE_CHYE_CK":e.jrState="STATE_CHYE_CK";break;case"STATE_CHYE_CH":e.jrState="STATE_CHYE_CH"}var oe=t.get("stockCardList").toJS();oe[0].isUniformPrice;oe.forEach(function(t,e){var a=!1,r=!1,i=!1;if(t.cardUuid){var n=t.isOpenedQuantity;n?(0==t.amount&&0==t.quantity&&(r=!0),0!=t.amount&&0!=t.quantity&&t.amount*t.quantity<0&&(i=!0)):0==t.amount&&(a=!0),a&&d.push("存货明细"+(e+1)+"的调整金额不能为0"),r&&d.push("存货明细"+(e+1)+"数量或金额至少一项不为0"),i&&d.push("存货明细"+(e+1)+"数量和金额应该同正负"),t.financialInfo=t.financialInfo?t.financialInfo:{};var o=t.financialInfo.openAssist,s=t.financialInfo.openBatch,u=t.financialInfo.openShelfLife,c=(t.financialInfo.openSerial,t.assistList?t.assistList:[]);if(o){var T=t.financialInfo.assistClassificationList.length;T!=c.length&&d.push("存货明细"+(e+1)+"属性未选择完整")}s&&(t.batch||d.push("存货明细"+(e+1)+"批次未选择"),u&&!t.expirationDate&&d.push("存货明细"+(e+1)+"批次未选择截止日期"))}else d.push("存货明细"+(e+1)+"未选择卡片")}),oe.length>160&&d.push("存货行次不可超过160行");break;case"LB_JXSEZC":var se=t.get("relationCategoryUuid");se||d.push("请选择处理类别");var ue=t.get("usedStock");if(ue){var ce=t.get("stockCardList").toJS(),de=!1,Te=!1,ge=0,_e=ce.every(function(t,e){return 0==t.amount&&(Te=!0),c&&""==t.warehouseCardUuid&&(de=!0),ge+=Number(t.amount),t.cardUuid});_e||d.push("有未选择的存货卡片"),Te&&d.push("有未填写的税额"),de&&d.push("存货明细有未选择的仓库"),ce.length>160&&d.push("存货行次不可超过160行"),e.amount=(0,o.decimal)(ge)}else e.stockCardList=[];0==Math.abs(Number(e.amount))&&d.push("请填写税额");break;case"LB_CHZZ":if("STATE_CHZZ_ZZCX"==g){var Se=0,pe=0;e.stockCardList.forEach(function(t,a){var r=t.amount?Number(t.amount):0;if(Se+=Number(r),!t.cardUuid)return e.stockCardList.splice(a,1),!1;t.amount<=0&&d.push("物料明细"+(a+1)+"未填写金额"),t.isOpenedQuantity&&(t.quantity<=0?d.push("物料明细"+(a+1)+"未填写数量"):t.unitUuid||d.push("物料明细"+(a+1)+"未选择单位")),c&&""==t.warehouseCardUuid&&d.push("物料明细"+(a+1)+"未选择仓库"),t.financialInfo=t.financialInfo?t.financialInfo:{};var i=t.financialInfo.openAssist,n=t.financialInfo.openBatch,o=t.financialInfo.openShelfLife,s=(t.financialInfo.openSerial,t.assistList?t.assistList:[]);if(i){var u=t.financialInfo.assistClassificationList.length;u!=s.length&&d.push("物料明细"+(a+1)+"属性未选择完整")}n&&(t.batch||d.push("物料明细"+(a+1)+"批次未选择"),o&&!t.expirationDate&&d.push("物料明细"+(a+1)+"批次未选择截止日期"))}),e.stockCardOtherList.forEach(function(t,a){var r=t.amount?Number(t.amount):0;if(pe+=Number(r),!t.cardUuid)return e.stockCardOtherList.splice(a,1),!1;t.amount<=0&&d.push("成品明细"+(a+1)+"未填写金额"),t.isOpenedQuantity&&(t.quantity<=0?d.push("成品明细"+(a+1)+"未填写数量"):t.unitUuid||d.push("成品明细"+(a+1)+"未选择单位")),c&&""==t.warehouseCardUuid&&d.push("成品明细"+(a+1)+"未选择仓库"),t.financialInfo=t.financialInfo?t.financialInfo:{};var i=t.financialInfo.openAssist,n=t.financialInfo.openBatch,o=t.financialInfo.openShelfLife,s=(t.financialInfo.openSerial,t.assistList?t.assistList:[]);if(i){var u=t.financialInfo.assistClassificationList.length;u!=s.length&&d.push("成品明细"+(a+1)+"属性未选择完整")}n&&(t.batch||d.push("成品明细"+(a+1)+"批次未选择"),o&&!t.expirationDate&&d.push("成品明细"+(a+1)+"批次未选择截止日期"))}),(0,o.decimal)(Se)!=(0,o.decimal)(pe)&&d.push("物料和成品的合计金额必须相等"),(0,o.decimal)(e.stockCardList.length+e.stockCardOtherList.length)>160&&d.push("成品和物料的存货合计不可超过160行")}if("STATE_CHZZ_ZZD"==g){var fe=0;e.stockCardList.forEach(function(t,a){if(t.cardUuid){fe++;var r=0;t.isOpenedQuantity&&(t.quantity<=0?d.push("组装成品"+(a+1)+"未填写数量"):t.unitUuid||d.push("组装成品"+(a+1)+"未选择单位")),c&&""==t.warehouseCardUuid&&d.push("组装成品"+(a+1)+"未选择仓库"),t.financialInfo=t.financialInfo?t.financialInfo:{};var i=t.financialInfo.openAssist,n=t.financialInfo.openBatch,o=t.financialInfo.openShelfLife,s=(t.financialInfo.openSerial,t.assistList?t.assistList:[]);if(i){var u=t.financialInfo.assistClassificationList.length;u!=s.length&&d.push("组装成品"+(a+1)+"属性未选择完整")}n&&(t.batch||d.push("组装成品"+(a+1)+"批次未选择"),o&&!t.expirationDate&&d.push("组装成品"+(a+1)+"批次未选择截止日期")),t.childCardList.forEach(function(t,a){if(t.cardUuid){t.isOpenedQuantity&&(t.quantity<=0?d.push("物料明细"+(a+1)+"未填写数量"):t.unitUuid||d.push("物料明细"+(a+1)+"未选择单位")),c&&""==t.warehouseCardUuid&&d.push("物料明细"+(a+1)+"未选择仓库"),t.amount<=0&&d.push("物料明细"+(a+1)+"未填写金额"),r+=Number(t.amount),t.financialInfo=t.financialInfo?t.financialInfo:{};var i=t.financialInfo.openAssist,n=t.financialInfo.openBatch,o=t.financialInfo.openShelfLife,s=(t.financialInfo.openSerial,t.assistList?t.assistList:[]);if(i){var u=t.financialInfo.assistClassificationList.length;u!=s.length&&d.push("物料明细"+(a+1)+"属性未选择完整")}n&&(t.batch||d.push("物料明细"+(a+1)+"批次未选择"),o&&!t.expirationDate&&d.push("物料明细"+(a+1)+"批次未选择截止日期"))}else e.stockCardList.childCardList.splice(a,1)}),e.stockCardList[a].amount=r}else e.stockCardList.splice(a,1)}),fe+(0,u.default)(e.stockCardList)>160&&d.push("成品和物料汇总的合计不可超过160行")}break;case"LB_CHTRXM":e.stockCardList.forEach(function(t,a){t.amount&&Number(t.amount);if(!t.cardUuid)return e.stockCardList.splice(a,1),!1;t.amount<=0&&d.push("存货明细"+(a+1)+"未填写金额"),t.isOpenedQuantity&&(t.quantity<=0||t.unitUuid||d.push("存货明细"+(a+1)+"未选择单位")),c&&""==t.warehouseCardUuid&&d.push("存货明细"+(a+1)+"未选择仓库"),t.financialInfo=t.financialInfo?t.financialInfo:{};var r=t.financialInfo.openAssist,i=t.financialInfo.openBatch,n=t.financialInfo.openShelfLife,o=t.financialInfo.openSerial,s=t.assistList?t.assistList:[];if(r){var u=t.financialInfo.assistClassificationList.length;u!=s.length&&d.push("存货明细"+(a+1)+"属性未选择完整")}i&&(t.batch||d.push("存货明细"+(a+1)+"批次未选择"),n&&!t.expirationDate&&d.push("存货明细"+(a+1)+"批次未选择截止日期")),o&&t.quantity<=0&&d.push("存货明细"+(a+1)+"未选择序列号")}),e.stockCardList.length>160&&d.push("存货行次不可超过160行");break;case"LB_XMJZ":var Ce=!0,Le=f[0].projectProperty,me=Number(e.amount),le=Number(e.currentAmount);if("STATE_XMJZ_XMJQ"==g)if("XZ_CONSTRUCTION"==Le){var ye=Number(t.get("jrAmount"));r&&0!=ye&&(0,o.decimal)(me-le)!=(0,o.decimal)(ye)&&d.push("合同毛利不等于待确认合同毛利，无法结清"),r||(e.amount="",e.currentAmount="")}else Number(t.get("jrAmount"))<=0&&(Ce=!1,e.stockCardList=[],Number(t.get("jrAmount"))<0&&d.push("项目发生金额小于已入库金额"));"XZ_CONSTRUCTION"==Le&&(Ce=!1,e.stockCardList=[]),Ce&&e.stockCardList.forEach(function(t,a){t.amount&&Number(t.amount);if(!t.cardUuid)return e.stockCardList.splice(a,1),!1;t.amount<=0&&d.push("存货明细"+(a+1)+"未填写金额"),t.isOpenedQuantity&&(t.quantity<=0||t.unitUuid||d.push("存货明细"+(a+1)+"未选择单位")),c&&""==t.warehouseCardUuid&&d.push("存货明细"+(a+1)+"未选择仓库"),t.financialInfo=t.financialInfo?t.financialInfo:{};var r=t.financialInfo.openAssist,i=t.financialInfo.openBatch,n=t.financialInfo.openShelfLife,o=t.financialInfo.openSerial,s=t.assistList?t.assistList:[];if(r){var u=t.financialInfo.assistClassificationList.length;u!=s.length&&d.push("存货明细"+(a+1)+"属性未选择完整")}i&&(t.batch||d.push("存货明细"+(a+1)+"批次未选择"),n&&!t.expirationDate&&d.push("存货明细"+(a+1)+"批次未选择截止日期")),o&&t.quantity<=0&&d.push("存货明细"+(a+1)+"未选择序列号")}),Ce&&e.stockCardList.length>160&&d.push("存货行次不可超过160行");var he=[],Ae=[];"STATE_XMJZ_XMJQ"==g&&(t.get("pendingStrongList").forEach(function(t){t.get("beOpened")?Ae.push(t.get("balanceUuid")):he.push(t.get("jrJvUuid"))}),e.jrJvUuidList=he,e.balanceUuidList=Ae),"STATE_XMJZ_QRSRCB"==g&&0==me&&0==le&&d.push("收入金额和成本金额至少填写一项")}h&&!t.getIn(["accounts",0,"accountUuid"])&&d.push("请选择账户");!E&&!h&&e.accounts&&e.accounts.length&&""==e.accounts[0].accountUuid&&(e.accounts=[]);if(e.billList&&-1==e.billList[0].taxRate){var Ne=e.billList[0].tax;0==Math.abs(Number(Ne))&&d.push("请填写税额"),Math.abs(Number(Ne))>Math.abs(Number(e.amount))&&d.push("税额不能大于价税合计"),e.amount*Ne<0&&d.push("税额和金额必须同正负")}return d};var r,i=c(a(25)),n=c(a(183)),o=a(13),s=a(1715),u=(r=s)&&r.__esModule?r:{default:r};function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}},1715:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=[],a=[],r=[];t.map(function(t){t.childCardList.map(function(t){e.push(t)})}),e.map(function(t,e){var i=t.cardUuid,n=t.warehouseCardUuid?t.warehouseCardUuid:"",o=t.unitUuid?t.unitUuid:"",s=t.batch?t.batch:"",u=t.warehouseCardCode;t.unitUuid=o,t.warehouseCardUuid=n,t.warehouseCardCode=u||"";var c=t.assistList?t.assistList.map(function(t){return t.propertyUuid}).sort():[],d=i+"_"+n+"_"+o+"_"+s+"_"+c.join("_");if(t.allPropertyStr=d,i)if(a.includes(i)){var T=a.findIndex(function(t){return t==i}),g=!1;r[T].forEach(function(t){t.allPropertyStr==d&&(g=!0)}),g||r[T].push(t)}else r.push([t]),a.push(i)});var i=[];return r.map(function(t,e){t.map(function(t){i.push(t)})}),i.length}},1716:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCard=function(t,e,a,s){var u=t.get("categoryType"),c=!!["SX_HW","SX_HW_FW"].includes(t.get("propertyCarryover")),d=t.getIn([n.categoryTypeObj[u],"beManagemented"]),T=t.getIn([n.categoryTypeObj[u],"beAccrued"]),g=t.getIn([n.categoryTypeObj[u],"contactsManagement"]);if(t.get("beProject")){var _=t.get("projectRange");e(i.getProjectCardList(_)),e(i.getProjectTreeList())}else a&&e(i.changeLrlsData("projectList",(0,r.fromJS)([]),!0));g&&(e(i.getCardList("contactsRange")),e(i.getCurrentTree()),a||e(i.changeLrlsData(["oriTemp","usedCurrent"],!0)));!g&&a&&e(i.changeLrlsData("currentList",(0,r.fromJS)([]),!0));switch(u){case"LB_YYSR":case"LB_YYZC":c&&(e(i.getCardList("stockRange")),e(i.getCostStockCategory())),!a&&d&&e(i.getYysrYyzcAmount());break;case"LB_FYZC":!a&&d&&e(i.getYysrYyzcAmount());break;case"LB_SFZC":if(a)break;var S=t.get("propertyTax");"SX_ZZS"==S&&(e(i.getSfzcZzsList()),e(i.getSfzcNotPayList())),!T||"SX_QTSF"!=S&&"SX_QYSDS"!=S||e(i.getSfzcNotPayList()),"SX_GRSF"==S&&e(i.getSfzcNotHandleAmount());break;case"LB_XCZC":var p=t.get("propertyPay"),f=t.getIn([n.categoryTypeObj[u],"beWelfare"]);if("SX_GZXJ"==p&&T){if(a&&"MODIFY"==s)break;e(i.getPaymentInfo()),e(i.getSfzcNotHandleAmount())}if(["SX_SHBX","SX_ZFGJJ"].includes(p)){if(a&&"MODIFY"==s)break;e(i.getPaymentInfo())}if(T||f){if(a&&"MODIFY"==s)break;e(i.getXczcPaymentList())}break;case"LB_JK":a&&"COPY"==s&&e(i.getJkPendingStrongList());break;case"LB_TZ":a&&"COPY"==s&&e(i.getTzPendingStrongList());break;case"LB_ZB":a&&"COPY"==s&&e(i.getZbPendingStrongList());break;case"LB_SFGL":if(a)break;e(i.getSfglCardList()),e(i.getSfglCategoryList()),e(i.getSfglList());break;case"LB_JZCB":if(a)break;e(i.getJzcbList()),e(i.getJzcbCategoryList()),e(i.getCostStockCategory()),e(i.getCostStockByCategory("",!0)),e(i.getJzcbWarehouseList());break;case"LB_ZCWJZZS":if(a)break;var C=(new o.DateLib).valueOf().slice(0,7);e(i.changeLrlsData(["oriTemp","handleMonth"],C)),e(i.getWjzzsList(C));break;case"LB_GGFYFT":if(e(i.getGgfyftProjectList()),e(i.getProjectTreeList()),e(i.getProjectShareType()),a)break;e(i.getGgfyftList());break;case"LB_FPRZ":if(a)break;e(i.getFprzList());break;case"LB_KJFP":if(a)break;e(i.getKjfpList());break;case"LB_JZSY":if(a)break;e(i.getCqzcCategoryList("LB_JZSY"));break;case"LB_ZJTX":if(a)break;e(i.getCqzcCategoryList("LB_ZJTX"));break;case"LB_CHDB":case"LB_CHYE":e(i.getCardList("stockRange")),e(i.getCostStockCategory());break;case"LB_JXSEZC":if(a){c&&(e(i.getCardList("stockRange")),e(i.getCostStockCategory()));break}e(i.getJxsezcCategory());break;case"LB_CHZZ":e(i.getCostStockCategory()),e(i.getStockListByCategory({top:!0,uuid:""},"stockRange"));break;case"LB_CHTRXM":e(i.getProjectTreeList()),e(i.getGgfyftProjectList()),e(i.getCardList("stockRange")),e(i.getCostStockCategory());break;case"LB_XMJZ":e(i.getProjectTreeList()),e(i.getXmjzProjectList()),e(i.getCardList("stockRange")),e(i.getCostStockCategory()),a&&e(i.getXmjzList(!0));break;default:console.log("无需获取卡片")}};var r=a(9),i=s(a(1060)),n=s(a(183)),o=a(13);function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}},1717:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setDefault=function(t,e){var a=t.get("oriTemp"),o=a.get("categoryType"),s=a.get("beProject"),u="",c=a.get("runningAbstract");switch(o){case"LB_YYSR":u="STATE_YYSR_XS","SX_HW_FW"==a.get("propertyCarryover")&&a.getIn(["acBusinessIncome","stockRange"]).size&&(t=t.setIn(["oriTemp","usedStock"],!0));break;case"LB_YYZC":u="STATE_YYZC_GJ";break;case"LB_FYZC":u="STATE_FY";var d="",T=a.get("propertyCostList");1==T.size&&(d=T.get(0)),t=t.setIn(["oriTemp","propertyCost"],d);break;case"LB_XCZC":var g=a.get("propertyPay");u="STATE_XC_FF","SX_SHBX"!==g&&"SX_ZFGJJ"!==g||(u="STATE_XC_JN");var _="",S=a.get("propertyCostList");1==S.size&&(_=S.get(0)),t=t.setIn(["oriTemp","propertyCost"],_);break;case"LB_SFZC":u="STATE_SF_JN";break;case"LB_CQZC":u="STATE_CQZC_YF",t=t.setIn(["oriTemp","handleType"],"JR_HANDLE_GJ");break;case"LB_YYWSR":u="STATE_YYWSR";break;case"LB_YYWZC":u="STATE_YYWZC";break;case"LB_ZSKX":u="STATE_ZS_SQ";break;case"LB_ZFKX":u="STATE_ZF_FC";break;case"LB_JK":u="STATE_JK_YS",t=t.setIn(["oriTemp","handleType"],"JR_HANDLE_QDJK");break;case"LB_TZ":u="STATE_TZ_YF",t=t.setIn(["oriTemp","handleType"],"JR_HANDLE_DWTZ");break;case"LB_ZB":u="STATE_ZB_ZZ",t=t.setIn(["oriTemp","handleType"],"JR_HANDLE_ZZ");break;case"LB_ZZ":u="STATE_ZZ";break;case"LB_KJFP":u="STATE_KJFP_XS",t=t.setIn(["oriTemp","billType"],"BILL_MAKE_OUT_TYPE_XS");break;case"LB_FPRZ":u="STATE_FPRZ_CG",t=t.setIn(["oriTemp","billType"],"BILL_AUTH_TYPE_CG");break;case"LB_JZSY":u="STATE_CQZC_JZSY";break;case"LB_ZJTX":u="STATE_CQZC_ZJTX";break;case"LB_ZCWJZZS":u="STATE_ZCWJZZS";break;case"LB_SFGL":u="STATE_SFGL";break;case"LB_JZCB":u="STATE_YYSR_XS",t=t.setIn(["oriTemp","stockCardList"],(0,r.fromJS)([]));break;case"LB_GGFYFT":u="STATE_GGFYFT";break;case"LB_CHDB":u="STATE_CHDB";break;case"LB_CHYE":u=e?"STATE_CHYE_CK":"STATE_CHYE";break;case"LB_JXSEZC":u="STATE_JXSEZC_FS";break;case"LB_CHZZ":u="STATE_CHZZ_ZZCX";break;case"LB_CHTRXM":u="STATE_CHTRXM",s=!0,t=t.setIn(["oriTemp","beProject"],!0);break;case"LB_XMJZ":u="STATE_XMJZ_JZRK",s=!0,t=t.setIn(["oriTemp","beProject"],!0);break;default:console.log("设置初始值")}u&&(c=(0,i.abstractFunc)(u,a));"LB_JZCB"==o&&(c="销售存货结转成本");return(t=t.setIn(["oriTemp","oriState"],u).setIn(["oriTemp","oriAbstract"],c)).setIn(["oriTemp","usedProject"],!!s&&(0,n.showProject)(t.get("oriTemp")))};var r=a(9),i=a(1354),n=a(1355)},1718:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.oriDateFunc=function(t,e){var a=e.get("oriTemp"),o=e.getIn(["oriTemp","categoryType"]),s=e.getIn(["oriTemp","oriState"]),u=(e.getIn(["oriTemp","oriDate"]),a.getIn([n.categoryTypeObj[o],"beAccrued"])),c=a.getIn([n.categoryTypeObj[o],"beManagemented"]);switch(o){case"LB_ZSKX":"STATE_ZS_TH"===s&&t(i.getZskxPaymentList());break;case"LB_ZFKX":"STATE_ZF_SH"===s&&t(i.getZskxPaymentList());break;case"LB_JK":u&&"STATE_JK_ZFLX"===s&&t(i.getJkPendingStrongList());break;case"LB_TZ":!u||"STATE_TZ_SRGL"!==s&&"STATE_TZ_SRLX"!==s||t(i.getTzPendingStrongList());break;case"LB_ZB":u&&"STATE_ZB_ZFLR"===s&&t(i.getZbPendingStrongList());break;case"LB_SFZC":var d=a.get("propertyTax");"SX_ZZS"==d&&"STATE_SF_JN"==s&&t(i.getSfzcZzsList()),!u||"SX_QTSF"!=d&&"SX_QYSDS"!=d||"STATE_SF_JN"!=s||t(i.getSfzcNotPayList()),"STATE_SF_ZCWJZZS"==s&&t(i.getSfzcTransferAmount());break;case"LB_XCZC":var T=a.get("propertyPay");"STATE_XC_JN"!=s&&"STATE_XC_FF"!=s||!u||t(i.getXczcPaymentList()),"SX_GZXJ"==T&&u&&"STATE_XC_FF"==s&&(t(i.getPaymentInfo()),t(i.getSfzcNotHandleAmount())),["SX_SHBX","SX_ZFGJJ"].includes(T)&&u&&"STATE_XC_JN"==s&&t(i.getPaymentInfo());break;case"LB_YYSR":"STATE_YYSR_DJ"!=s&&c&&t(i.getYysrYyzcAmount());break;case"LB_YYZC":"STATE_YYZC_DJ"!=s&&c&&t(i.getYysrYyzcAmount());break;case"LB_FYZC":"STATE_FY_DJ"!=s&&c&&t(i.getYysrYyzcAmount());break;case"LB_KJFP":t(i.getKjfpList());break;case"LB_FPRZ":t(i.getFprzList());break;case"LB_JZSY":t(i.getJzsyList());break;case"LB_JZCB":"STATE_YYSR_ZJ"==s?t(i.getJzcbCategoryList()):(t(i.changeLrlsData(["cardAllList","stockCardList"],(0,r.fromJS)([]))),t(i.changeLrlsData(["cardAllList","warehouseCardList"],(0,r.fromJS)([]))),t(i.changeLrlsData(["oriTemp","relationCategoryUuid"],"")),t(i.getJzcbList(!0)),t(i.getCostStockByCategory("",!0)),t(i.getJzcbWarehouseList()),t(i.getCostStockCategory()),t(i.getJzcbCategoryList()));break;case"LB_GGFYFT":t(i.getGgfyftList());break;case"LB_SFGL":t(i.getSfglCardList()),t(i.getSfglCategoryList());break;case"LB_XMJZ":t(i.getXmjzList())}};var r=a(9),i=o(a(1060)),n=o(a(183));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}},1719:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.oriStateFunc=function(t,e){var a=e.get("oriTemp"),u=e.getIn(["oriTemp","categoryType"]),c=e.getIn(["oriTemp","oriState"]),d=(e.getIn(["oriTemp","oriDate"]),a.getIn([i.categoryTypeObj[u],"beAccrued"])),T=a.getIn([i.categoryTypeObj[u],"contactsManagement"]),g=a.getIn([i.categoryTypeObj[u],"beManagemented"]);e.getIn(["oriTemp","beProject"])&&t(n.changeLrlsData(["oriTemp","usedProject"],(0,s.showProject)(a)));t(n.changeLrlsData(["oriTemp","oriAbstract"],(0,o.abstractFunc)(c,e.get("oriTemp")))),T&&(t(n.getCardList("contactsRange")),t(n.changeLrlsData(["oriTemp","usedCurrent"],!0)));switch(u){case"LB_ZSKX":"STATE_ZS_TH"===c&&(t(n.getZskxPaymentList()),t(n.getSfglCardList()));break;case"LB_ZFKX":"STATE_ZF_SH"===c&&(t(n.getZskxPaymentList()),t(n.getSfglCardList()));break;case"LB_JK":d&&"STATE_JK_ZFLX"===c&&(t(n.changeLrlsData(["oriTemp","usedCurrent"],!1)),t(n.getJkPendingStrongList()));break;case"LB_TZ":!d||"STATE_TZ_SRGL"!==c&&"STATE_TZ_SRLX"!==c||(t(n.changeLrlsData(["oriTemp","usedCurrent"],!1)),t(n.getTzPendingStrongList()));break;case"LB_ZB":d&&"STATE_ZB_ZFLR"===c&&(t(n.changeLrlsData(["oriTemp","usedCurrent"],!1)),t(n.getZbPendingStrongList()));break;case"LB_YYSR":g&&t(n.getYysrYyzcAmount());var _=a.get("propertyCarryover");"SX_HW_FW"==_&&a.getIn(["acBusinessIncome","stockRange"]).size&&["STATE_YYSR_XS","STATE_YYSR_TS"].includes(c)&&t(n.changeLrlsData(["oriTemp","usedStock"],!0));break;case"LB_YYZC":case"LB_FYZC":g&&t(n.getYysrYyzcAmount());break;case"LB_SFZC":var S=a.get("propertyTax");"SX_ZZS"==S&&"STATE_SF_JN"==c&&(t(n.getSfzcZzsList()),t(n.getSfzcNotPayList())),!d||"SX_QTSF"!=S&&"SX_QYSDS"!=S||"STATE_SF_JN"!=c||t(n.getSfzcNotPayList()),"STATE_SF_ZCWJZZS"==c&&t(n.getSfzcTransferAmount());break;case"LB_XCZC":var p=a.get("propertyPay"),f=a.getIn([i.categoryTypeObj[u],"beWelfare"]);"STATE_XC_JN"!=c&&"STATE_XC_FF"!=c||!d&&!f||t(n.getXczcPaymentList()),"SX_GZXJ"==p&&d&&"STATE_XC_FF"==c&&(t(n.getPaymentInfo()),t(n.getSfzcNotHandleAmount())),["SX_SHBX","SX_ZFGJJ"].includes(p)&&d&&"STATE_XC_JN"==c&&t(n.getPaymentInfo());break;case"LB_KJFP":var C="STATE_KJFP_XS"==c?"BILL_MAKE_OUT_TYPE_XS":"BILL_MAKE_OUT_TYPE_TS";t(n.changeLrlsData(["oriTemp","billType"],C)),t(n.getKjfpList());break;case"LB_FPRZ":var L="STATE_FPRZ_CG"==c?"BILL_AUTH_TYPE_CG":"BILL_AUTH_TYPE_TG";t(n.changeLrlsData(["oriTemp","billType"],L)),t(n.getFprzList());break;case"LB_JZCB":var m={STATE_YYSR_XS:"销售存货结转成本",STATE_YYSR_TS:"销货退回结转成本",STATE_YYSR_ZJ:"直接结转成本"}[c];t(n.changeLrlsData(["oriTemp","oriAbstract"],m)),t(n.getJzcbCategoryList()),"STATE_YYSR_ZJ"!=c&&(t(n.changeLrlsData(["cardAllList","stockCardList"],(0,r.fromJS)([]))),t(n.changeLrlsData(["cardAllList","warehouseCardList"],(0,r.fromJS)([]))),t(n.changeLrlsData(["oriTemp","relationCategoryUuid"],"")),t(n.changeLrlsData(["oriTemp","stockCardList"],(0,r.fromJS)([]))),t(n.getJzcbList()),t(n.getCostStockByCategory("",!0)),t(n.getCostStockCategory()),t(n.getJzcbWarehouseList()));break;case"LB_CHYE":t(n.getCardList("stockRange")),"STATE_CHYE_CH"==c&&t(n.changeLrlsData(["oriTemp","warehouseCardList"],(0,r.fromJS)([{}]))),"STATE_CHYE_TYDJ"==c&&t(n.getWarehouseCardList("STATE_CHYE_TYDJ"));break;case"LB_CHZZ":"STATE_CHZZ_ZZD"==c&&t(n.changeLrlsData(["oriTemp","stockCardList"],(0,r.fromJS)([])));break;case"LB_GGFYFT":t(n.getGgfyftProjectList()),t(n.getProjectTreeList()),t(n.getGgfyftList());break;case"LB_XMJZ":"STATE_XMJZ_QRSRCB"==c?(t(n.changeLrlsData(["oriTemp","amount"],"")),t(n.changeLrlsData(["oriTemp","currentAmount"],""))):t(n.changeLrlsData(["oriTemp","stockCardList"],(0,r.fromJS)([{amount:""}])))}};var r=a(9),i=u(a(183)),n=u(a(1060)),o=a(1354),s=a(1355);function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}},1720:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleTypeFunc=function(t,e){var a=e.get("oriTemp"),s=e.getIn(["oriTemp","categoryType"]),u=e.getIn(["oriTemp","oriState"]),c=(e.getIn(["oriTemp","oriDate"]),a.get("handleType")),d=a.getIn([r.categoryTypeObj[s],"beAccrued"]);e.getIn(["oriTemp","beProject"])&&t(i.changeLrlsData(["oriTemp","usedProject"],(0,o.showProject)(a)));t(i.changeLrlsData(["oriTemp","oriAbstract"],(0,n.abstractFunc)(u,e.get("oriTemp")))),a.getIn([r.categoryTypeObj[s],"contactsManagement"])&&t(i.changeLrlsData(["oriTemp","usedCurrent"],!0));switch(s){case"LB_JK":d&&"JR_HANDLE_CHLX"===c&&(t(i.getJkPendingStrongList()),t(i.changeLrlsData(["oriTemp","usedCurrent"],!1)));break;case"LB_TZ":d&&"JR_HANDLE_QDSY"===c&&(t(i.getTzPendingStrongList()),t(i.changeLrlsData(["oriTemp","usedCurrent"],!1)));break;case"LB_ZB":d&&"JR_HANDLE_LRFP"===c&&(t(i.getZbPendingStrongList()),t(i.changeLrlsData(["oriTemp","usedCurrent"],!1)));break;case"LB_CQZC":var T=a.getIn([r.categoryTypeObj[s],"contactsManagement"]);T&&(t(i.getCardList("contactsRange")),t(i.changeLrlsData(["oriTemp","usedCurrent"],!0)))}};a(9);var r=s(a(183)),i=s(a(1060)),n=a(1354),o=a(1355);function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}},1721:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.changeStockCard=function(t,e){var a=e.cardType;switch(e.dataType){case"card":e.value;var n=t.getIn(["oriTemp",a,e.idx,"amount"]);if("YYSZ"==e.categoryType){var o=t.getIn(["oriTemp",a,e.idx]),s=t.getIn(["oriTemp","categoryType"]),u=[],c=[];e.value.map(function(t,e){var a="",r="",i="",n="",d="",T="";if(o&&0==e&&(a=o.get("warehouseCardName"),r=o.get("warehouseCardUuid"),i=o.get("warehouseCardCode")),t.isOpenedQuantity&&(0==t.unit.unitList.length&&(n=t.unit.name,d=t.unit.uuid,t.unitPriceList&&t.unitPriceList.forEach(function(t){t.unitUuid==d&&("LB_YYSR"==s&&"2"==t.type&&(T=Number(t.defaultPrice)),"LB_YYZC"==s&&"1"==t.type&&(T=Number(t.defaultPrice)))})),t.unit.unitList.length>0&&t.unitPriceList)){var g="",_=!0,S=!1,p=void 0;try{for(var f,C=t.unitPriceList[Symbol.iterator]();!(_=(f=C.next()).done);_=!0){var L=f.value;if("LB_YYSR"==s&&"2"==L.type){T=Number(L.defaultPrice),g=L.unitUuid;break}if("LB_YYZC"==s&&"1"==L.type){T=Number(L.defaultPrice),g=L.unitUuid;break}}}catch(t){S=!0,p=t}finally{try{!_&&C.return&&C.return()}finally{if(S)throw p}}g&&(t.unit.unitList.push({name:t.unit.name,uuid:t.unit.uuid}),t.unit.unitList.forEach(function(t){t.uuid==g&&(n=t.name,d=t.uuid)}))}u.push({cardUuid:t.uuid,code:t.code,name:t.oriName,isOpenedQuantity:t.isOpenedQuantity,unitName:n,unitUuid:d,warehouseCardName:a||"",warehouseCardUuid:r||"",warehouseCardCode:i||"",price:T,quantity:"",amount:"",financialInfo:t.financialInfo?t.financialInfo:{},assistList:[],batch:"",batchUuid:"",expirationDate:""}),c.push({cardUuid:t.uuid,code:t.code,name:t.oriName,amount:"",warehouseCardUuid:r||""})});var d=t.getIn(["oriTemp",a]).toJS(),T=t.getIn(["oriTemp","carryoverCardList"]).toJS();d.splice.apply(d,[e.idx,1].concat(u)),T.splice.apply(T,[e.idx,1].concat(c)),t=t.setIn(["oriTemp",a],(0,r.fromJS)(d)).setIn(["oriTemp","carryoverCardList"],(0,r.fromJS)(T))}if("JZCB"==e.categoryType){var g="STATE_YYSR_ZJ"==t.getIn(["oriTemp","oriState"]),_=t.getIn(["oriTemp",a,e.idx]),S=[];e.value.map(function(t,e){if(g){var a="",r="",i="",o="",s="",u="";_&&0==e&&(a=_.get("warehouseCardName"),r=_.get("warehouseCardUuid"),i=_.get("warehouseCardCode"),u=_.get("uniformUuid")),t.isOpenedQuantity&&t.unit&&(o=t.unit.name,s=t.unit.uuid),S.push({cardUuid:t.cardUuid,code:t.code,name:t.oriName,isOpenedQuantity:t.isOpenedQuantity,isUniformPrice:t.isUniformPrice,unitName:o,unitUuid:s,basicUnitQuantity:1,warehouseCardName:a||"",warehouseCardUuid:r||"",warehouseCardCode:i||"",uniformUuid:u||"",price:"",quantity:"",amount:"",financialInfo:t.financialInfo?t.financialInfo:{},assistList:[],batch:"",batchUuid:"",expirationDate:""})}else S.push({cardUuid:t.cardUuid,code:t.code,name:t.oriName,isOpenedQuantity:t.isOpenedQuantity,isUniformPrice:t.isUniformPrice,amount:n})});var p=t.getIn(["oriTemp",a]).toJS();p.splice.apply(p,[e.idx,1].concat(S)),t=t.setIn(["oriTemp",a],(0,r.fromJS)(p))}if("CHDB"==e.categoryType){var f=[];e.value.map(function(t,e){var a="",r="";t.isOpenedQuantity&&(r=t.unit.uuid,a=t.unit.name),f.push({cardUuid:t.uuid,code:t.code,name:t.oriName,isOpenedQuantity:t.isOpenedQuantity,isUniformPrice:t.isUniformPrice,unitName:a,unitUuid:r,basicUnitQuantity:1,price:"",unitPrice:"",quantity:"",amount:"",financialInfo:t.financialInfo?t.financialInfo:{},assistList:[],batch:"",batchUuid:"",expirationDate:""})});var C=t.getIn(["oriTemp",a]).toJS();C.splice.apply(C,[e.idx,1].concat(f)),t=t.setIn(["oriTemp",a],(0,r.fromJS)(C))}if("CHYE"==e.categoryType){var L=[],m=t.getIn(["oriTemp",a]).toJS(),l=t.getIn(["oriTemp",a,e.idx]);e.value.map(function(t,e){var a="",r="",i="",n="",o="";l&&0==e&&(i=l.get("warehouseCardName"),n=l.get("warehouseCardUuid"),o=l.get("warehouseCardCode")),t.isOpenedQuantity&&(r=t.unit.uuid,a=t.unit.name),L.push({cardUuid:t.uuid,code:t.code,name:t.oriName,isOpenedQuantity:t.isOpenedQuantity,isUniformPrice:t.isUniformPrice,amount:"",price:"",quantity:"",unitUuid:r,unitName:a,warehouseCardName:i,warehouseCardUuid:n,warehouseCardCode:o,financialInfo:t.financialInfo?t.financialInfo:{},assistList:[],batch:"",batchUuid:"",expirationDate:""})}),m.splice.apply(m,[e.idx,1].concat(L)),t=t.setIn(["oriTemp",a],(0,r.fromJS)(m))}if("JXSEZC"==e.categoryType){var y=[],h=t.getIn(["oriTemp",a]).toJS();e.value.map(function(t,e){y.push({cardUuid:t.uuid,code:t.code,name:t.oriName,amount:""})}),h.splice.apply(h,[e.idx,1].concat(y)),t=t.setIn(["oriTemp",a],(0,r.fromJS)(h))}if("CHZZ"==e.categoryType){var A=t.getIn(["oriTemp",a,e.idx]),N=[];e.value.map(function(t,e){var a="",r="",i="",n="",o="";A&&0==e&&(a=A.get("warehouseCardName"),r=A.get("warehouseCardUuid"),i=A.get("warehouseCardCode")),t.isOpenedQuantity&&(o=t.unit.uuid,n=t.unit.name),N.push({cardUuid:t.uuid,code:t.code,name:t.oriName,isOpenedQuantity:t.isOpenedQuantity,unitName:n,unitUuid:o,basicUnitQuantity:1,warehouseCardName:a||"",warehouseCardUuid:r||"",warehouseCardCode:i||"",price:"",quantity:"",amount:"",financialInfo:t.financialInfo?t.financialInfo:{},assistList:[],batch:"",batchUuid:"",expirationDate:""})});var E=t.getIn(["oriTemp",a]).toJS();E.splice.apply(E,[e.idx,1].concat(N)),t=t.setIn(["oriTemp",a],(0,r.fromJS)(E))}if("CHZZ_ZZD"==e.categoryType){var I=[];e.value.map(function(t,e){var a=[];t.materialList.forEach(function(t){a.push({cardUuid:t.materialUuid,code:t.code,name:t.name,isOpenedQuantity:t.isOpenQuantity,unitName:t.unitName,unitUuid:t.unitUuid,warehouseCardName:"",warehouseCardUuid:"",warehouseCardCode:"",price:"",quantity:"",amount:"",oriQuantity:t.quantity,financialInfo:t.financialInfo?t.financialInfo:{},assistList:[],batch:"",batchUuid:"",expirationDate:""})}),I.push({cardUuid:t.uuid,code:t.code,name:t.oriName,isOpenedQuantity:!0,unitName:t.unitName,unitUuid:t.unitUuid,warehouseCardName:"",warehouseCardUuid:"",warehouseCardCode:"",price:"",quantity:"",amount:"",oriQuantity:t.quantity,childCardList:a,financialInfo:t.financialInfo?t.financialInfo:{},assistList:[],batch:"",batchUuid:"",expirationDate:""})});var b=t.getIn(["oriTemp",a]).toJS();b.splice.apply(b,[e.idx,1].concat(I)),t=t.setIn(["oriTemp",a],(0,r.fromJS)(b))}if("CHZZ_ZZD_CHILD"==e.categoryType){var U=[];e.value.map(function(t,e){var a="",r="";t.isOpenedQuantity&&(r=t.unit.uuid,a=t.unit.name),U.push({cardUuid:t.uuid,code:t.code,name:t.oriName,isOpenedQuantity:t.isOpenedQuantity,unitName:a,unitUuid:r,warehouseCardName:"",warehouseCardUuid:"",warehouseCardCode:"",price:"",quantity:"",amount:"",financialInfo:t.financialInfo?t.financialInfo:{},assistList:[],batch:"",batchUuid:"",expirationDate:""})});var R=t.getIn(["oriTemp","stockCardList",e.idx[0],"childCardList"]).toJS();R.splice.apply(R,[e.idx[1],1].concat(U)),t=t.setIn(["oriTemp","stockCardList",e.idx[0],"childCardList"],(0,r.fromJS)(R))}if("CHTRXM"==e.categoryType){var Z=[];e.value.map(function(t,e){var a="",r="";t.isOpenedQuantity&&t.unit&&(a=t.unit.name,r=t.unit.uuid),Z.push({cardUuid:t.uuid,code:t.code,name:t.oriName,isOpenedQuantity:t.isOpenedQuantity,unitName:a,unitUuid:r,basicUnitQuantity:1,warehouseCardName:"",warehouseCardUuid:"",warehouseCardCode:"",price:"",quantity:"",amount:"",financialInfo:t.financialInfo?t.financialInfo:{},assistList:[],batch:"",batchUuid:"",expirationDate:""})});var v=t.getIn(["oriTemp",a]).toJS();v.splice.apply(v,[e.idx,1].concat(Z)),t=t.setIn(["oriTemp",a],(0,r.fromJS)(v))}if("XMJZ"==e.categoryType){var J=[];e.value.map(function(t,e){var a="",r="";t.isOpenedQuantity&&t.unit&&(a=t.unit.name,r=t.unit.uuid),J.push({cardUuid:t.uuid,code:t.code,name:t.oriName,isOpenedQuantity:t.isOpenedQuantity,unitName:a,unitUuid:r,basicUnitQuantity:1,warehouseCardName:"",warehouseCardUuid:"",warehouseCardCode:"",price:"",quantity:"",amount:"",financialInfo:t.financialInfo?t.financialInfo:{},assistList:[],batch:"",batchUuid:"",expirationDate:""})});var D=t.getIn(["oriTemp",a]).toJS();D.splice.apply(D,[e.idx,1].concat(J)),t=t.setIn(["oriTemp",a],(0,r.fromJS)(D))}break;case"warehouse":t=t.setIn(["oriTemp",a,e.idx,"warehouseCardUuid"],e.value.uuid).setIn(["oriTemp",a,e.idx,"uniformUuid"],e.value.uniformUuid).setIn(["oriTemp",a,e.idx,"warehouseCardCode"],e.value.code).setIn(["oriTemp",a,e.idx,"warehouseCardName"],e.value.name),"YYSZ"==e.categoryType&&(t=t.setIn(["oriTemp","carryoverCardList",e.idx,"warehouseCardUuid"],e.value.uuid));break;case"unit":var P=e.value.basicUnitQuantity?e.value.basicUnitQuantity:1;t=t.setIn(["oriTemp",a,e.idx,"unitUuid"],e.value.value).setIn(["oriTemp",a,e.idx,"unitName"],e.value.key).setIn(["oriTemp",a,e.idx,"basicUnitQuantity"],P);break;case"quantity":case"price":case"amount":case"afterQuantity":case"afterAmount":case"afterPrice":case"assistList":case"serialList":t=t.setIn(["oriTemp",a,e.idx,e.dataType],e.value),"YYSZ"==e.categoryType&&["assistList"].includes(e.dataType)&&(t=t.setIn(["oriTemp","carryoverCardList",e.idx,e.dataType],e.value));break;case"add":t=t.setIn(["oriTemp",a,e.idx],(0,r.fromJS)({amount:""})),"YYSZ"==e.categoryType&&(t=t.setIn(["oriTemp","carryoverCardList",e.idx],(0,r.fromJS)({amount:""})));break;case"delete":t=t.deleteIn(["oriTemp",a,e.idx]),"YYSZ"==e.categoryType&&(t=t.deleteIn(["oriTemp","carryoverCardList",e.idx]));break;case"carryoverCardList":t=t.setIn(["oriTemp","carryoverCardList",e.idx,"amount"],e.value);break;case"delete_zzd_child":t=t.deleteIn(["oriTemp",a,e.idx[0],"childCardList",e.idx[1]]);break;case"warehouse_zzd_child":t=t.setIn(["oriTemp",a,e.idx[0],"childCardList",e.idx[1],"warehouseCardUuid"],e.value.uuid).setIn(["oriTemp",a,e.idx[0],"childCardList",e.idx[1],"warehouseCardCode"],e.value.code).setIn(["oriTemp",a,e.idx[0],"childCardList",e.idx[1],"warehouseCardName"],e.value.name);break;case"bitch_zzd_child":t=t.mergeIn(["oriTemp",a,e.idx[0],"childCardList",e.idx[1]],e.value);break;case"quantity_zzd":var G=function(){var a=t.getIn(["cardAllList","assemblyList"]).toJS(),n=t.getIn(["oriTemp","stockCardList",e.idx]).toJS(),o=[],s=function(t){if(t.uuid==n.cardUuid)return t.materialList.forEach(function(a){var r=1;a.unitList.map(function(t){a.unitUuid==t.uuid&&(r=t.basicUnitQuantity)});var n=(0,i.decimal)(Number(e.value)*(Number(a.quantity)/Number(t.quantity)));a.financialInfo&&a.financialInfo.openSerial&&(n=""),o.push({cardUuid:a.materialUuid,code:a.code,name:a.name,isOpenedQuantity:a.isOpenQuantity,unitName:a.unitName,unitUuid:a.unitUuid,basicUnitQuantity:r,warehouseCardName:"",warehouseCardUuid:"",warehouseCardCode:"",price:"",quantity:n,amount:"",financialInfo:a.financialInfo?a.financialInfo:{},assistList:[],batch:"",batchUuid:"",expirationDate:""})}),"break"},u=!0,c=!1,d=void 0;try{for(var T,g=a[Symbol.iterator]();!(u=(T=g.next()).done);u=!0){var _=T.value,S=s(_);if("break"===S)break}}catch(t){c=!0,d=t}finally{try{!u&&g.return&&g.return()}finally{if(c)throw d}}return n.quantity=e.value,n.childCardList=o,t=t.setIn(["oriTemp","stockCardList",e.idx],(0,r.fromJS)(n)),"break"}();if("break"===G)break;case"bitch":t=t.mergeIn(["oriTemp",a,e.idx],e.value),"YYSZ"==e.categoryType&&(t=t.mergeIn(["oriTemp","carryoverCardList",e.idx],e.value));break;case"addAssist":var Y=e.value.getIn(["cardData","inventoryUuid"]),O=e.value.getIn(["cardData","classificationUuid"]),k=e.value.get("propertyList");if("CHZZ_ZZD_CHILD"==a){t=t.updateIn(["oriTemp","stockCardList"],function(t){return t.map(function(t){return t.get("cardUuid")==Y&&t.getIn(["financialInfo","assistClassificationList"]).map(function(e,a){e.get("uuid")==O&&(t=t.updateIn(["financialInfo","assistClassificationList",a,"propertyList"],function(t){return k}))}),t=t.update("childCardList",function(t){return t.map(function(t,e){return t.get("cardUuid")==Y&&t.getIn(["financialInfo","assistClassificationList"]).map(function(e,a){e.get("uuid")==O&&(t=t.setIn(["financialInfo","assistClassificationList",a,"propertyList"],k))}),t})})})});break}t=t.updateIn(["oriTemp",a],function(t){return t.map(function(t){return t.get("cardUuid")==Y&&t.getIn(["financialInfo","assistClassificationList"]).map(function(e,a){e.get("uuid")==O&&(t=t.updateIn(["financialInfo","assistClassificationList",a,"propertyList"],function(t){return k}))}),t})})}return t};var r=a(9),i=a(13)}}]);