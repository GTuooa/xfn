(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{2282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=m(n(0)),i=(n(9),n(31)),l=n(16),u=d(n(10)),s=(d(n(181)),d(n(1284))),c=m(n(2283)),f=m(n(2285));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}n(2289),n(1245);var h=(0,i.connect)(function(e){return e})(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){u.setTitle({title:"测算一下"}),u.setIcon({showIcon:!1}),u.setRight({show:!1}),sessionStorage.setItem("prevPage","measure");var e=this.props.lrbState.get("issuedate"),t=this.props.lrbState.get("endissuedate");this.props.dispatch(s.getMeasureInitData(e,t))}},{key:"render",value:function(){var e=this.props,t=e.measureState,n=(e.allState,e.dispatch),a=e.history,r=t.get("showResult"),i=t.get("incomeTotal"),u=t.get("profit"),s=t.get("detailList").toJS(),d=t.get("amountInput"),m=t.get("checkedList"),h=t.get("showChildList"),p=t.get("cannotChecked"),b=t.get("haveSwitchList"),v=t.get("testProfit"),y=t.get("cannotTestList"),E=t.get("profitResult"),S=t.get("ProfitAndLossResult"),O=t.get("resultList"),w=t.get("resultListShowChildList");return o.default.createElement(l.Container,null,!r&&o.default.createElement(c.default,{dispatch:n,incomeTotal:i,profit:u,detailList:s,amountInput:d,checkedList:m,showChildList:h,cannotChecked:p,haveSwitchList:b,cannotTestList:y,testProfit:v,history:a}),r&&o.default.createElement(f.default,{dispatch:n,testProfit:v,profitResult:E,ProfitAndLossResult:S,resultList:O,incomeTotal:i,profit:u,resultListShowChildList:w}))}}]),t}())||a;t.default=h},2283:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=m(n(0)),i=n(22),l=n(16),u=n(13),s=d(n(10)),c=m(n(2284)),f=d(n(1284));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}var h=(0,i.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){s.setTitle({title:"测算一下"}),s.setIcon({showIcon:!1}),s.setRight({show:!1})}},{key:"render",value:function(){var e=this.props,t=(e.className,e.incomeTotal),n=e.dispatch,a=e.profit,r=void 0===a?{}:a,i=e.detailList,d=e.amountInput,m=e.checkedList,h=e.showChildList,p=e.cannotChecked,b=e.haveSwitchList,v=e.history,y=e.cannotTestList,E=e.testProfit;return o.default.createElement(l.Container,{className:"measure"},o.default.createElement("div",{className:"top-test-switch"},o.default.createElement("div",{className:"income"},o.default.createElement("div",null,"若"+(E?"营业收入":"营业利润")+"为"),o.default.createElement("div",{style:{width:"1.5rem",margin:"-4px auto 0"}},o.default.createElement("span",{style:{fontSize:"0.15rem",fontWeight:"normal",color:"rgb(34,34,34)"}},"¥"),o.default.createElement(l.TextListInput,{className:"amountInput",value:""+d,onChange:function(e){/^(\-|\+)?\d*\.?\d{0,2}$/g.test(e)&&("-"===e?n(f.changeAmountInput("-")):Number(e)>-1e7&&Number(e)<1e7&&n(f.changeAmountInput(e)))}}))),o.default.createElement("div",{className:"center",onClick:function(){n(f.changeMeasureTestType())}},o.default.createElement("div",null,E?"测利润":"测盈亏"),o.default.createElement("div",{style:{height:"5px",width:".4rem",marginTop:"-0.26rem",paddingLeft:".12rem"}},o.default.createElement(l.Icon,{type:"turn-left",style:{fontSize:".5rem"}})),o.default.createElement("div",{style:{height:".11rem",color:"rgb(153,153,153)",marginTop:".25rem"}},"|")),o.default.createElement("div",{className:"profit"},o.default.createElement("div",null,"则"+(E?"营业利润":"营业收入")+"为"),o.default.createElement("div",{style:{margin:"0 auto "}},o.default.createElement("span",{style:{fontSize:"0.15rem",fontWeight:"normal",color:"rgb(153,153,153)"}},"¥")," ？"))),o.default.createElement(l.Row,{className:"sheet-line title"},o.default.createElement("div",{className:"shareOfMonth"},"本期金额"),o.default.createElement("div",{className:"shareDifference"},"营收占比"),o.default.createElement("div",{className:"amountOrProportion"},"金额/占比"),o.default.createElement("div",{className:"itemTobetested"},"预设数据")),o.default.createElement(l.ScrollView,{flex:"1"},o.default.createElement("div",{className:"banner"},o.default.createElement("div",{className:"banner-title"},"营业收入"),o.default.createElement("div",{className:"banner-amount"},o.default.createElement("div",null,o.default.createElement(l.Amount,null,t.monthaccumulation)),o.default.createElement("div",null,(0,u.decimal)(100*t.shareOfMonth,2,!0)+"%"),o.default.createElement("div",null),o.default.createElement("div",null))),o.default.createElement("div",{className:"measure-item"},i.length>0&&i.map(function(e,t){return o.default.createElement(c.default,{key:t+"_"+e.linename,item:e,index:t,checkedList:m,dispatch:n,showChildList:h,cannotChecked:p,haveSwitchList:b,cannotTestList:y})})),o.default.createElement("div",{className:"banner"},o.default.createElement("div",{className:"banner-title"},"营业利润"),o.default.createElement("div",{className:"banner-amount"},o.default.createElement("div",null,o.default.createElement(l.Amount,null,r.monthaccumulation)),o.default.createElement("div",null,(0,u.decimal)(100*r.shareOfMonth,2,!0)+"%"),o.default.createElement("div",null),o.default.createElement("div",null)))),o.default.createElement(l.ButtonGroup,null,o.default.createElement(l.Button,{onClick:function(){if(!0===E)Number(d)<0?s.toast.info("请输入有效的营业收入金额",1):(n(f.startMeasure()),n(f.showMeasureResult(!0)));else if(Number(d)>0){var e=0;i.filter(function(e){return!0===e.testAmount}).map(function(t){e+=Number(t.testShareOfMonth)}),e>100?s.toast.info("支出占收入比大于1，与营业利润金额矛盾，请重新设置",1):(n(f.startMeasure()),n(f.showMeasureResult(!0)))}else n(f.startMeasure()),n(f.showMeasureResult(!0))}},o.default.createElement(l.Icon,{type:"test",size:"15"}),"测算"),o.default.createElement(l.Button,{onClick:function(){v.goBack()}},o.default.createElement(l.Icon,{type:"cancel",size:"15"}),"取消")))}}]),t}())||a;t.default=h},2284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),l=(r=i)&&r.__esModule?r:{default:r},u=n(22),s=n(16),c=n(13),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1284));var d=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=(e.index,e.className,e.checkedList,e.dispatch),a=(e.showChildList,e.cannotChecked),r=e.haveSwitchList,o=e.cannotTestList;return function e(t,i,u,d){var m={background:{0:"#fff",1:"#D1C0A5",2:"#7E6B5A",3:"#59493f"}[i],width:i/10+"rem",marginLeft:".05rem"},h=t.lineindex?t.lineindex:t.acId,p=t.showChild;return t.childProfit&&t.childProfit.length>0?l.default.createElement("div",null,l.default.createElement("div",{className:"measure-item-title",style:{fontWeight:0===i?"bold":""}},l.default.createElement("div",{className:"measure-item-title-checkbox",onClick:function(){a.includes(t.linename)||n(f.handleItemChecked(h,t.checked))}},!a.includes(t.linename)&&l.default.createElement(s.Checkbox,{checked:t.checked})),l.default.createElement("div",{className:"measure-item-title-title",onClick:function(){a.includes(t.linename)||n(f.handleItemChecked(h,t.checked))}},0==i?"":l.default.createElement("span",{className:"ba-flag",style:m}),l.default.createElement("span",{style:{paddingLeft:".05rem"}},t.linename)),l.default.createElement("div",{className:"measure-item-title-arror",onClick:function(){n(p?f.changeThisItemChecked(h,!1):f.handleItemChecked(h,!1)),n(f.handleItemShow(h,""+t.linename))}},l.default.createElement(s.Icon,{type:p?"arrow-up":"arrow-down",style:{marginTop:"0.07rem",marginRight:".1rem"}}))),l.default.createElement("div",{className:"measure-item-contant",style:{fontWeight:0===i?"bold":""}},l.default.createElement("div",{className:"measure-item-contant-amount",onClick:function(){a.includes(t.linename)||n(f.handleItemChecked(h,t.checked))}},l.default.createElement(s.Amount,{showZero:!0},t.monthaccumulation)),l.default.createElement("div",{className:"measure-item-contant-precent",onClick:function(){a.includes(t.linename)||n(f.handleItemChecked(h,t.checked))}},(0,c.decimal)(100*t.shareOfMonth,2,!0)+"%"),l.default.createElement("div",{className:"measure-item-contant-switch"},r.includes(t.linename)&&l.default.createElement(s.SwitchText,{className:"noTextSwitchShort",checkedChildren:"占比",unCheckedChildren:"金额",checked:t.testAmount,onChange:function(){n(f.changeSwitchType(t.linename))}})),o.includes(t.linename)?l.default.createElement("div",{className:"measure-item-contant-input"}):l.default.createElement("div",{className:"measure-item-contant-input"},l.default.createElement("div",{className:"input-border",style:{display:t.testAmount?"":"none"}},l.default.createElement(s.TextListInput,{value:t.testShareOfMonth,disabled:p||!t.checked,onChange:function(e){/^\d*\.?\d{0,2}$/g.test(e)&&Number(e)<100&&n(f.changeTestShareOfMonth(e,h))}}),l.default.createElement("span",null,"%")),l.default.createElement("div",{className:"input-border",style:{display:t.testAmount?"none":""}},l.default.createElement(s.TextListInput,{value:t.testMonthaccumulation,disabled:p||!t.checked,onChange:function(e){/^\d*\.?\d{0,2}$/g.test(e)&&Number(e)<1e7&&n(f.changeTestMonthaccumulation(e,h))}})))),p&&t.childProfit.map(function(n,a){return e(n,i+1,0,t.testAmount)})):l.default.createElement("div",null,l.default.createElement("div",{className:"measure-item-title",style:{fontWeight:0===i?"bold":""}},l.default.createElement("div",{className:"measure-item-title-checkbox",onClick:function(){a.includes(t.linename)||n(f.handleItemChecked(h,t.checked))}},!a.includes(t.linename)&&l.default.createElement(s.Checkbox,{checked:t.checked})),l.default.createElement("div",{className:"measure-item-title-title",onClick:function(){a.includes(t.linename)||n(f.handleItemChecked(h,t.checked))}},0==i?"":l.default.createElement("span",{className:"ba-flag",style:m}),l.default.createElement("span",{style:{paddingLeft:".05rem"}},t.linename)),l.default.createElement("div",{className:"measure-item-title-arror"})),l.default.createElement("div",{className:"measure-item-contant",style:{fontWeight:0===i?"bold":""}},l.default.createElement("div",{className:"measure-item-contant-amount",onClick:function(){a.includes(t.linename)||n(f.handleItemChecked(h,t.checked))}},l.default.createElement(s.Amount,{showZero:!0},t.monthaccumulation)),l.default.createElement("div",{className:"measure-item-contant-precent",onClick:function(){a.includes(t.linename)||n(f.handleItemChecked(h,t.checked))}},(0,c.decimal)(100*t.shareOfMonth,2,!0)+"%"),l.default.createElement("div",{className:"measure-item-contant-switch"},r.includes(t.linename)&&l.default.createElement(s.SwitchText,{className:"noTextSwitchShort",checkedChildren:"占比",unCheckedChildren:"金额",checked:t.testAmount,onChange:function(){n(f.changeSwitchType(t.linename))}})),o.includes(t.linename)?l.default.createElement("div",{className:"measure-item-contant-input"}):l.default.createElement("div",{className:"measure-item-contant-input"},l.default.createElement("div",{className:"input-border",style:{display:t.testAmount?"":"none"}},l.default.createElement(s.TextListInput,{value:t.testShareOfMonth,disabled:!t.checked,onChange:function(e){/^\d*\.?\d{0,2}$/g.test(e)&&Number(e)<100&&n(f.changeTestShareOfMonth(e,h))}}),l.default.createElement("span",null,"%")),l.default.createElement("div",{className:"input-border",style:{display:t.testAmount?"none":""}},l.default.createElement(s.TextListInput,{value:t.testMonthaccumulation,disabled:!t.checked,onChange:function(e){/^\d*\.?\d{0,2}$/g.test(e)&&Number(e)<1e7&&n(f.changeTestMonthaccumulation(e,h))}})))))}(t,0,0,t.testAmount)}}]),t}())||a;t.default=d},2285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=m(n(0)),i=n(22),l=n(16),u=m(n(2286)),s=m(n(2287)),c=d(n(1284)),f=d(n(10));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}var h=(0,i.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){f.setTitle({title:"测算结果"}),f.setIcon({showIcon:!1}),f.setRight({show:!1})}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.testProfit,a=e.profitResult,r=e.ProfitAndLossResult,i=e.resultList,f=e.incomeTotal,d=e.profit,m=e.resultListShowChildList,h="";return 0===a?h="profit0":a>0?h="profit":a<0&&(h="loss"),o.default.createElement(l.Container,{className:"measure"},o.default.createElement("div",{className:"result-banner"},o.default.createElement("div",{className:"result-banner-left "+(0===a?"breakeven":"income")},o.default.createElement("div",{style:{marginLeft:".25rem",marginTop:".2rem",fontSize:".13rem"}},"若营业收入为"),o.default.createElement("div",{style:{marginLeft:".25rem",fontSize:".16rem",fontWeight:"bold"}},"¥ ",r.toFixed(2))),o.default.createElement("div",{className:"result-banner-right "+h},o.default.createElement("div",{style:{marginLeft:".25rem",marginTop:".2rem",fontSize:".13rem"}},"则营业利润为"),o.default.createElement("div",{style:{marginLeft:".25rem",fontSize:".16rem",fontWeight:"bold"}},"¥ ",a.toFixed(2)))),o.default.createElement(l.ScrollView,{flex:"1"},o.default.createElement(u.default,{resultList:i,profitResult:a,ProfitAndLossResult:r,incomeTotal:f,profit:d}),o.default.createElement(s.default,{resultList:i,testProfit:n,profitResult:a,ProfitAndLossResult:r,incomeTotal:f,profit:d,dispatch:t,resultListShowChildList:m})),o.default.createElement(l.ButtonGroup,null,o.default.createElement(l.Button,{onClick:function(){t(c.showMeasureResult(!1)),t(c.clearMeasureResultShowChildList())}},o.default.createElement(l.Icon,{type:"adjustment",size:"15"}),"修改")))}}]),t}())||a;t.default=h},2286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=s(n(0)),i=n(22),l=s(n(1264)),u=n(13);function s(e){return e&&e.__esModule?e:{default:e}}var c=(0,i.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"getColor",value:function(e,t){if("营业收入"===e.substr(-4,4))return"rgb(255,131,72)";if("营业成本"===e.substr(-4,4))return"rgb(92,167,242)";if("营业税金"===e.substr(-4,4))return"rgb(2,129,255)";if("营业费用"===e)return"rgb(2,93,255)";if("营业利润"===e){if(t>0)return"rgb(255,181,73)";if(0===t)return"#FFF";if(t<0)return"rgb(17,195,224)"}}},{key:"render",value:function(){var e=this,t=this.props,n=t.resultList,a=t.ProfitAndLossResult,r=t.profitResult,i=(t.incomeTotal,t.profit,{linename:"营业收入",monthaccumulation:a});n.forEach(function(e){e.childProfit&&e.childProfit.length>0&&(e.childProfit=e.childProfit.filter(function(e){return!0===e.checked}))});var s={linename:"营业利润",testShareOfMonth:0===r?0:r/a*100,testMonthaccumulation:r},c={normal:{color:"transparent"}},f={linename:"营业费用",testShareOfMonth:"0",testMonthaccumulation:0};n.map(function(e){!0===e.testAmount?e.testMonthaccumulation=""+a*Number(e.testShareOfMonth)/100:e.testShareOfMonth=""+Number(e.testMonthaccumulation)/a*100});var d=[],m=[];n.map(function(e,t){["管理费用","销售费用","财务费用"].includes(e.linename)?m.push(e):d.push(e)}),m.map(function(e){var t=Number(f.testMonthaccumulation)+Number(e.testMonthaccumulation);f.testMonthaccumulation=Number(t);var n=Number(f.testShareOfMonth)+Number(e.testShareOfMonth);f.testShareOfMonth=Number(n)});var h=[],p=[];[i].concat(d).concat([f]).map(function(t){var n={value:"0"===t.testMonthaccumulation?0:t.testMonthaccumulation?Number(t.testMonthaccumulation).toFixed():t.monthaccumulation,name:t.linename.substr(-4,4)+"    "+("营业收入"===t.linename.substr(-4,4)?"100.00%":0===t.testShareOfMonth?0:Number(t.testShareOfMonth)===1/0||Number(t.testShareOfMonth)===-1/0||isNaN(Number(t.testShareOfMonth))?"无效值":t.testShareOfMonth?Number(t.testShareOfMonth).toFixed(2)+"%":(0,u.decimal)(100*t.shareOfMonth,2,!0)+"%"),itemStyle:{normal:{color:e.getColor(t.linename,Number(t.testShareOfMonth))}}};h.push(n),p.push(t.linename.substr(-4,4)+"    "+("营业收入"===t.linename.substr(-4,4)?"100.00%":0===t.testShareOfMonth?"0":Number(t.testShareOfMonth)===1/0||Number(t.testShareOfMonth)===-1/0||isNaN(Number(t.testShareOfMonth))?"无效值":t.testShareOfMonth?Number(t.testShareOfMonth).toFixed(2)+"%":(0,u.decimal)(100*t.shareOfMonth,2,!0)+"%"))}),p.push(s.linename+"    "+(0===s.testShareOfMonth?"0":Number(s.testShareOfMonth)===1/0||Number(s.testShareOfMonth)===-1/0||isNaN(Number(s.testShareOfMonth))?"无效值":s.testShareOfMonth.toFixed(2)+"%"));var b=a;n.map(function(e){b+=Number(e.testMonthaccumulation)});var v={title:{text:"测算损益图",textStyle:{color:"rgb(34,34,34)",fontSize:"14px"},left:"55%",top:"10px"},legend:{orient:"vertical",left:"55%",data:p,icon:"circle",top:"middle",selectedMode:!1},series:[{name:"利润",type:"pie",silent:!0,minAngle:1,center:["25%","50%"],radius:["0%","45%"],label:{normal:{show:!1}},labelLine:{normal:{show:!1}},data:[{value:(Math.abs(b)-Math.abs(r))/2,name:" ",itemStyle:c},{value:Math.abs(r),name:s.linename+"    "+(0===s.testShareOfMonth?"0":Number(s.testShareOfMonth)===1/0||Number(s.testShareOfMonth)===-1/0||isNaN(Number(s.testShareOfMonth))?"无效值":s.testShareOfMonth.toFixed()+"%"),itemStyle:{normal:{color:0===r?"#FFF":r>0?"rgb(255,181,73)":"rgb(17,195,224)"}}},{value:(Math.abs(b)-Math.abs(r))/2,name:" ",itemStyle:c}]},{minAngle:1,label:{normal:{show:!1}},silent:!0,name:"比例",type:"pie",center:["25%","50%"],radius:["45%","75%"],data:h.reverse()}]};return o.default.createElement(l.default,{className:"measure-pie-char",option:v})}}]),t}())||a;t.default=c},2287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=u(n(0)),i=n(22),l=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1361)),n(16),u(n(2288)));function u(e){return e&&e.__esModule?e:{default:e}}var s=(0,i.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.resultList,n=e.ProfitAndLossResult,a=e.profitResult,r=(e.incomeTotal,e.profit),i=void 0===r?{}:r,u=e.dispatch,s=e.resultListShowChildList,c=(e.testProfit,{linename:"营业收入",monthaccumulation:n,shareOfMonth:1,childProfit:[]});i.childProfit=[];var f={linename:"营业利润",testShareOfMonth:0===a?0:a/n*100,testMonthaccumulation:""+a,childProfit:[]},d={linename:"减：营业费用",testShareOfMonth:0,testMonthaccumulation:"0",childProfit:[]};t.map(function(e){!0===e.testAmount?e.testMonthaccumulation=""+n*Number(e.testShareOfMonth)/100:e.testShareOfMonth=""+Number(e.testMonthaccumulation)/n*100,e.childProfit.length>0&&e.childProfit.map(function(e){!0===e.testAmount?e.testMonthaccumulation=""+n*Number(e.testShareOfMonth)/100:e.testShareOfMonth=""+Number(e.testMonthaccumulation)/n*100})});var m=[];t.map(function(e,t){if(["管理费用","销售费用","财务费用"].includes(e.linename)){d.childProfit.push(e);var n=Number(d.testShareOfMonth)+Number(e.testShareOfMonth);d.testShareOfMonth=Number(n),d.testMonthaccumulation=Number(e.testMonthaccumulation)+Number(d.testMonthaccumulation)}else m.push(e)});var h=[c].concat(m).concat([d]).concat([f]);return o.default.createElement("div",{className:"measure-result-list"},h.length>0&&h.map(function(e,t){return o.default.createElement(l.default,{className:"measure-result-list",data:e,key:t,dispatch:u,index:t,resultListShowChildList:s})}))}}]),t}())||a;t.default=s},2288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),l=(r=i)&&r.__esModule?r:{default:r},u=n(22),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1284)),c=n(16),f=n(13);var d=(0,u.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.index,a=e.resultListShowChildList,r=e.dispatch;return function e(t,n,o){var i=a.includes(""+t.linename);return t.childProfit&&t.childProfit.length>0?l.default.createElement("div",null,l.default.createElement("div",{className:"measure-result-list-item",style:{fontWeight:0==n?"bold":""}},l.default.createElement("div",{className:"linename"},l.default.createElement("span",{style:{paddingLeft:14*n+"px"}},t.linename)),l.default.createElement("div",{className:"icon",onClick:function(){r(s.handleMeasureResultListShowChild(""+t.linename))}},l.default.createElement(c.Icon,{type:i?"arrow-up":"arrow-down"})),l.default.createElement("div",{className:"amount"},""+("营业收入"===t.linename.substr(-4,4)?0===t.monthaccumulation?"0.00":t.monthaccumulation.toFixed(2):0===Number(t.testMonthaccumulation)?"0.00":Number(t.testMonthaccumulation).toFixed(2))),l.default.createElement("div",{className:"precent"},("营业收入"===t.linename.substr(-4,4)?0===t.shareOfMonth?"0.00%":(0,f.decimal)(100*t.shareOfMonth,2,!0)+"%":Number(t.testShareOfMonth)===1/0||Number(t.testShareOfMonth)===-1/0||isNaN(t.testShareOfMonth)?"无效值":Number(t.testShareOfMonth).toFixed(2)+"%")+"\n                                ")),i&&t.childProfit.map(function(t,a){return e(t,n+1,o+1)})):l.default.createElement("div",{className:"measure-result-list-item",style:{fontWeight:0==n?"bold":""}},l.default.createElement("div",{className:"linename"},l.default.createElement("span",{style:{paddingLeft:14*n+"px"}},t.linename)),l.default.createElement("div",{className:"icon"}),l.default.createElement("div",{className:"amount"},""+("营业收入"===t.linename.substr(-4,4)?0===t.monthaccumulation?"0.00":t.monthaccumulation.toFixed(2):0===Number(t.testMonthaccumulation)?"0.00":Number(t.testMonthaccumulation).toFixed(2))),l.default.createElement("div",{className:"precent"},("营业收入"===t.linename.substr(-4,4)?0===t.shareOfMonth?"0.00%":(0,f.decimal)(100*t.shareOfMonth,2,!0)+"%":Number(t.testShareOfMonth)===1/0||Number(t.testShareOfMonth)===-1/0||isNaN(t.testShareOfMonth)?"无效值":Number(t.testShareOfMonth).toFixed(2)+"%")+"\n                            "))}(t,0,n)}}]),t}())||a;t.default=d},2289:function(e,t,n){},2291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,n=arguments[1];return((e={},o(e,r.INIT_MEASURE,function(){return i}),o(e,r.SET_MEASURE_INIT_DATE,function(){return t.set("issuedate",n.issuedate).set("endissuedate",n.endissuedate)}),o(e,r.SET_MEASURE_INIT_DATA,function(){return t.set("incomeTotal",n.incomeTotal).set("profit",n.profit).set("detailList",(0,a.fromJS)(n.detailList)).set("checkedList",(0,a.fromJS)(n.checkedList)).set("showChildList",(0,a.fromJS)(n.showChildList)).set("resultShowChild",(0,a.fromJS)([]))}),o(e,r.CHANGE_AMOUNT_INPUT,function(){return t.set("amountInput",n.value)}),o(e,r.HANDLE_SHOW_CHILD_LIST,function(){var e=n.uniqueId,r=t.get("showChildList").toJS(),o=void 0;if(r.includes(e)){var i=r.findIndex(function(t,n){return t==e});r.splice(i,1),o=r}else o=r.concat(e);return t.set("showChildList",(0,a.fromJS)(o))}),o(e,r.HANDLE_CHECKED_LIST,function(){var e=n.uniqueId,r=t.get("checkedList").toJS(),o=void 0;if(r.includes(e)){var i=r.findIndex(function(t,n){return t==e});r.splice(i,1),o=r}else o=r.concat(e);return t.set("checkedList",(0,a.fromJS)(o))}),o(e,r.CHANGE_MEASURE_TEST_TYPE,function(){return t.update("testProfit",function(e){return!e})}),o(e,r.UPDATE_MEASURE_DETAIL_LIST,function(){return t.set("detailList",(0,a.fromJS)(n.detailList))}),o(e,r.SHOW_MEASURE_RESULT,function(){var e=t.get("resultShowChild").toJS();return(e.includes("销售费用")||e.includes("管理费用")||e.includes("财务费用"))&&e.push("营业费用"),t.set("showResult",n.bool).set("resultListShowChildList",(0,a.fromJS)(e))}),o(e,r.SET_MEASURE_RESULT,function(){return t.set("profitResult",n.profitResult).set("ProfitAndLossResult",n.ProfitAndLossResult).set("resultList",n.resultList)}),o(e,r.HANDLE_MEASURE_RESULT_LIST_SHOW_CHILD,function(){var e=n.id,r=t.get("resultListShowChildList").toJS(),o=void 0;if(r.includes(e)){var i=r.findIndex(function(t,n){return t===e});r.splice(i,1),o=r}else o=r.concat(e);return t.set("resultListShowChildList",(0,a.fromJS)(o))}),o(e,r.CLEAR_MEASURE_RESULT_SHOW_CHILD_LIST,function(){return t.set("resultListShowChildList",(0,a.fromJS)([]))}),o(e,r.SET_RESULT_SHOW_CHILD_LIST,function(){var e=n.resultShowChildItem,r=t.get("resultShowChild").toJS(),o=void 0;if(r.includes(e)){var i=r.findIndex(function(t,n){return t===e});r.splice(i,1),o=r}else o=r.concat(e);return t.set("resultShowChild",(0,a.fromJS)(o))}),e)[n.type]||function(){return t})()};var a=n(9),r=(n(13),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1495)));function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=(0,a.fromJS)({issuedate:"",endissuedate:"",showResult:!1,incomeTotal:[],profit:[],detailList:[],amountInput:"0",checkedList:[],showChildList:[],testProfit:!1,cannotChecked:["减：营业费用"],haveSwitchList:["减：营业成本","减：营业税金","销售费用","管理费用","财务费用"],cannotTestList:["减：营业费用"],profitResult:0,ProfitAndLossResult:0,resultList:[],resultListShowChildList:[],resultShowChild:[]})},974:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=i(n(2282)),r=i(n(2291)),o=i(n(1496));function i(e){return e&&e.__esModule?e:{default:e}}var l={measureState:r.default,lrbState:o.default};t.reducer=l,t.view=a.default}}]);