(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1025:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var r,c=n(2511),a=(r=c)&&r.__esModule?r:{default:r};t.reducer={},t.view=a.default},1294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeRelatedAcListFetch=t.changeTabIndexCurrency=t.deleteCurrencyFetch=t.saveCurrencyFetch=t.cancelSaveCurrency=t.changeExchange=t.changeFcNumber=t.modifyCurrency=t.insertCurrency=t.selectAllCurrencyCheckBox=t.selectCurrencyItem=t.hideAllCurrencyCheckBox=t.showAllCurrencyCheckBox=t.getModelFCListFetch=t.getFCRelateAcListFetch=t.getFCListFetch=void 0;var r,c=n(13),a=n(24),u=(r=a)&&r.__esModule?r:{default:r},o=f(n(1076)),i=f(n(1295)),l=f(n(25)),C=f(n(10));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=t.getFCListFetch=function(){return function(e){(0,u.default)("getFCList","GET","",function(t){(0,c.showMessage)(t)&&e({type:i.GET_FC_LIST_FETCH,receivedData:t.data})})}},E=t.getFCRelateAcListFetch=function(){return function(e){C.toast.loading(l.LOADING_TIP_TEXT,0),(0,u.default)("getFCRelateAcList","GET","",function(t){(0,c.showMessage)(t)&&(C.toast.hide(),e({type:i.GET_FC_RELATE_AC_LIST_FETCH,receivedData:t.data}))})}},_=(t.getModelFCListFetch=function(){return function(e){(0,u.default)("getModelFCList","GET","",function(t){(0,c.showMessage)(t)&&e({type:i.GET_MODEL_FC_LIST_FETCH,receivedData:t.data})})}},t.showAllCurrencyCheckBox=function(){return{type:i.SHOW_ALL_CURRENCY_CHECKBOX}},t.hideAllCurrencyCheckBox=function(){return{type:i.HIDE_ALL_CURRENCY_CHECKBOX}});t.selectCurrencyItem=function(e){return{type:i.SELECT_CURRENCY_ITEM,idx:e}},t.selectAllCurrencyCheckBox=function(){return{type:i.SELECT_ALL_CURRENCY_CHECKBOX}},t.insertCurrency=function(){return{type:i.INSERT_CURRENCY}},t.modifyCurrency=function(e,t){return{type:i.MODIFY_CURRENCY,fcNumber:e,exchange:t}},t.changeFcNumber=function(e,t){return{type:i.CHANGE_FC_NUMBER,fcNumber:e,name:t}},t.changeExchange=function(e){return{type:i.CHANGE_EXCHANGE,value:e}},t.cancelSaveCurrency=function(){return{type:i.CANCEL_SAVE_CURRENCY}},t.saveCurrencyFetch=function(e,t,n){return function(r){var a=e.get("exchange").toString().split("."),o=[];if(e.get("fcNumber")||o.push("币别不能为空"),e.get("exchange")?Number(e.get("exchange"))<=0?o.push("汇率不能小于等于0"):a[1]&&a[1].length>l.FC_EXCHANGE_DECIMAL_LENGTH&&o.push("汇率只支持小数点后四位"):o.push("汇率不能为空"),o.length)return C.Alert(o.reduce(function(e,t){return e+","+t}));C.toast.loading(l.LOADING_TIP_TEXT,0),{modify:function(){(0,u.default)("modifyFC","POST",JSON.stringify({fcNumber:e.get("fcNumber"),exchange:e.get("exchange")}),function(e){(0,c.showMessage)(e)&&(C.toast.hide(),n.goBack())})},insert:function(){(0,u.default)("insertFC","POST",JSON.stringify({fcNumber:e.get("fcNumber"),name:e.get("name"),exchange:e.get("exchange")}),function(e){(0,c.showMessage)(e)&&(C.toast.hide(),n.goBack())})}}[t]()}},t.deleteCurrencyFetch=function(e){return function(t){var n=e.filter(function(e){return"1"!=e.get("standard")}).filter(function(e){return e.get("selected")}).map(function(e,t){return e.get("fcNumber")});C.Confirm({message:"确定删除该币别吗？删除后可在“添加币别”中重新添加",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(e){1===e.buttonIndex&&(C.toast.loading(l.LOADING_TIP_TEXT,0),(0,u.default)("deleteFC","POST",JSON.stringify({numberList:n}),function(e){(0,c.showMessage)(e)&&(C.toast.hide(),e.data&&e.data.length&&C.Alert(e.data[0].message),t(s()),t(_()))}))}})}},t.changeTabIndexCurrency=function(e){return{type:i.CHANGE_TAB_INDEX_CURRENCY,idx:e}},t.changeRelatedAcListFetch=function(e){return function(t,n){var r=n().allState.get("aclist").toSeq().filter(function(e){return e.get("selected")}).map(function(e){return e.get("acid")});C.toast.loading(l.LOADING_TIP_TEXT,0),(0,u.default)("relateFCList","POST",JSON.stringify({list:r}),function(n){if((0,c.showMessage)(n)){if(C.toast.hide(),t(o.getAcListFetch()),t(E()),n.data&&n.data.length)if(n.data.length>1){var r=n.data.map(function(e){return e.message}).reduce(function(e,t){return e+","+t});C.Alert(r)}else C.Alert(n.data[0].message);e.goBack()}})}}},1295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_CURRENCY="INIT_CURRENCY",t.GET_FC_LIST_FETCH="GET_FC_LIST_FETCH",t.GET_FC_RELATE_AC_LIST_FETCH="GET_FC_RELATE_AC_LIST_FETCH",t.GET_MODEL_FC_LIST_FETCH="GET_MODEL_FC_LIST_FETCH",t.SHOW_ALL_CURRENCY_CHECKBOX="SHOW_ALL_CURRENCY_CHECKBOX",t.HIDE_ALL_CURRENCY_CHECKBOX="HIDE_ALL_CURRENCY_CHECKBOX",t.SELECT_CURRENCY_ITEM="SELECT_CURRENCY_ITEM",t.SELECT_ALL_CURRENCY_CHECKBOX="SELECT_ALL_CURRENCY_CHECKBOX",t.MODIFY_CURRENCY="MODIFY_CURRENCY",t.CHANGE_FC_NUMBER="CHANGE_FC_NUMBER",t.CHANGE_EXCHANGE="CHANGE_EXCHANGE",t.INSERT_CURRENCY="INSERT_CURRENCY",t.CANCEL_SAVE_CURRENCY="CANCEL_SAVE_CURRENCY",t.CHANGE_TAB_INDEX_CURRENCY="CHANGE_TAB_INDEX_CURRENCY"},2511:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,c,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),o=(c=u)&&c.__esModule?c:{default:c},i=n(31),l=n(16),C=E(n(1294)),f=E(n(10)),s=E(n(25));function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var _=l.Form.Item,d=(0,i.connect)(function(e){return e})(r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showFcNumber:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.currencyState,r=(t.allState,t.history),c=t.dispatch;this.state.showFcNumber;f.setRight({show:!1});var a=n.get("handleCurrency"),u=n.get("currency"),i=n.get("currencyModelList");"insert"===a?f.setTitle({title:"添加币别"}):"modify"===a&&f.setTitle({title:"编辑币别："+u.get("fcNumber")});var E=i.map(function(e,t){return{key:""+e.get("fcNumber")+s.EMPTY_CONNECT+e.get("name"),value:""+e.get("fcNumber")+s.EMPTY_CONNECT+e.get("name")}});return o.default.createElement(l.Container,{className:"currency-option"},o.default.createElement(l.ScrollView,{flex:"1"},o.default.createElement(l.Form,null,o.default.createElement(_,{label:"币别：",className:"form-offset-up",style:{display:"insert"===a?"":"none"}},o.default.createElement(l.SinglePicker,{district:E,onOk:function(t){e.setState({showFcNumber:t.value});var n=t.value.split(s.EMPTY_CONNECT),r=n[0],a=n[1];c(C.changeFcNumber(r,a))}},o.default.createElement("span",null,o.default.createElement("span",{style:{color:u.get("fcNumber")?"":"#999"}},u.get("fcNumber")?u.get("fcNumber"):"请选择币别")," ",o.default.createElement(l.Icon,{type:"arrow-right",className:"input-icon-arrow-right"})))),o.default.createElement(_,{label:"汇率：",className:"form-offset-up  form-offset-margin"},o.default.createElement(l.TextInput,{textAlign:"right",value:u.get("exchange"),placeholder:"请输入汇率(最多支持小数点后四位)",onChange:function(e){return c(C.changeExchange(e))}})," ",o.default.createElement(l.Icon,{type:"arrow-right",className:"input-icon-arrow-right"})))),o.default.createElement(l.ButtonGroup,{type:"ghost",height:50},o.default.createElement(l.Button,{onClick:function(){return c(r.goBack()&&C.cancelSaveCurrency())}},o.default.createElement(l.Icon,{type:"cancel"}),o.default.createElement("span",null,"取消")),o.default.createElement(l.Button,{onClick:function(){return c(C.saveCurrencyFetch(u,a,r))}},o.default.createElement(l.Icon,{type:"save"}),o.default.createElement("span",null,"保存"))))}}]),t}())||r;t.default=d}}]);