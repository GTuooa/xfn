(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{1064:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.taxRateList=[{key:"2%",value:2},{key:"3%",value:3},{key:"4%",value:4},{key:"5%",value:5},{key:"6%",value:6},{key:"9%",value:9},{key:"10%",value:10},{key:"11%",value:11},{key:"12%",value:12},{key:"13%",value:13},{key:"16%",value:16},{key:"17%",value:17}],t.smallTaxRateList=[{key:"2%",value:2},{key:"3%",value:3},{key:"5%",value:5}],t.runningType={LX_SR:"收入",LX_ZC:"支出",LX_JZCB:"结转成本",LX_CBTH:"成本退回",LX_ZZS_YKP:"已开发票",LX_ZZS_WKP:"未开发票",LX_ZZS_YRZ:"已认证发票",LX_ZZS_WRZ:"未认证发票",LX_TSSF_YKP:"已开发票",LX_TSSF_WKP:"未开发票",LX_TGSF_YRZ:"已认证发票",LX_TGSF_WRZ:"未认证发票",LX_YYSR:"营业收入",LX_PP:"预收款",LX_ZZS:"增值税",LX_YYTS:"退售",LX_TSSF:"退售税费",LX_ARHX:"应收核销",LX_PPHX:"预收核销",LX_TSHX:"退售核销",LX_YYZC:"营业支出",LX_AP:"预付款",LX_ADV:"应付款",LX_YYTG:"退购",LX_TGSF:"退购税费",LX_APHX:"应付核销",LX_ADVHX:"预付核销",LX_TGHX:"退购核销",LX_FYZC:"费用支出",LX_JTGZXJ:"计提工资",LX_GZXJZC:"工资支出",LX_DKGJJ:"代扣公积金",LX_DKSHBX:"代扣社保",LX_DKSDS:"代扣所得税",LX_JTSB:"计提社保",LX_SBZC:"社保支出",LX_DJSB:"代缴社保",LX_JTGJJ:"计提公积金",LX_GJJZC:"公积金支出",LX_DJGJJ:"代缴公积金",LX_FLFZC:"福利费支出",LX_JTQTXC:"计提其他薪酬",LX_QTXC:"其他薪酬支出",LX_YJSF:"预交税费",LX_ZZSZC:"增值税支出",LX_YJDK:"预交抵扣",LX_ZCSDS:"转出所得税",LX_SDSZC:"所得税支出",LX_JTSF:"计提税费",LX_QTSFZC:"其他税费支出",LX_YYWSR:"营业外收入",LX_YYWZC:"营业外支出",LX_ZSKX:"暂收款项",LX_ZSHX:"暂收核销",LX_ZFKX:"暂付款项",LX_ZFHX:"暂付核销",LX_ZCGJ:"资产购进",LX_ZCCZ:"资产处置",LX_JZSY:"处置损益",LX_QDJK:"取得借款",LX_CHLX:"偿还利息",LX_CHBJ:"偿还本金",LX_DWTZ:"对外投资",LX_QDSY:"取得收益",LX_SHTZ:"收回投资",LX_ZZ:"增资",LX_LRFP:"利润分配",LX_JZ:"减资",LX_JZSY_SY:"结转收益",LX_JZSY_SS:"结转损失",LX_JZSY_ZCYZ:"资产原值",LX_JZSY_ZJTX:"累计折旧摊销",LX_JZSY_SJGZ:"升级改造",LX_JZSY_QLSR:"清理收入",LX_FPRZ_CG:"采购发票认证",LX_FPRZ_TG:"退购发票认证",LX_KJFP_XS:"销售开票",LX_KJFP_TS:"退售开票",LX_ZCWJZZS:"转出未交税费",LX_ZFLR:"支付利润",LX_TZ_JTGL:"计提股利",LX_TZ_SRGL:"收入股利",LX_TZ_JTLX:"计提利息",LX_TZ_SRLX:"收入利息",LX_JK_JTLX:"计提利息",LX_JK_ZFLX:"支付利息",LX_NBZZ:"内部转账",LX_NBZR:"内部转账-转入",LX_NBZC:"内部转账-转出",LX_GRSFZC:"个人税费支出",LX_XMGGFYFT:"费用分摊",LX_ZJTX:"折旧摊销"}},1219:function(e,t,a){e.exports=a(1257)},1257:function(e,t,a){var n=function(){return this}()||Function("return this")(),l=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,r=l&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=a(1258),l)n.regeneratorRuntime=r;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},1258:function(e,t){!function(t){"use strict";var a,n=Object.prototype,l=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag",u="object"==typeof e,s=t.regeneratorRuntime;if(s)u&&(e.exports=s);else{(s=t.regeneratorRuntime=u?e.exports:{}).wrap=b;var d="suspendedStart",m="suspendedYield",f="executing",p="completed",g={},y={};y[o]=function(){return this};var h=Object.getPrototypeOf,E=h&&h(h(O([])));E&&E!==n&&l.call(E,o)&&(y=E);var v=C.prototype=S.prototype=Object.create(y);T.prototype=v.constructor=C,C.constructor=T,C[c]=T.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===T||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(v),e},s.awrap=function(e){return{__await:e}},L(N.prototype),N.prototype[i]=function(){return this},s.AsyncIterator=N,s.async=function(e,t,a,n){var l=new N(b(e,t,a,n));return s.isGeneratorFunction(t)?l:l.next().then(function(e){return e.done?e.value:l.next()})},L(v),v[c]="Generator",v[o]=function(){return this},v.toString=function(){return"[object Generator]"},s.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},s.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=a)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,l){return i.type="throw",i.arg=e,t.next=n,l&&(t.method="next",t.arg=a),!!l}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=l.call(o,"catchLoc"),u=l.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),A(a),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;A(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=a),g}}}function b(e,t,a,n){var l=t&&t.prototype instanceof S?t:S,r=Object.create(l.prototype),o=new k(n||[]);return r._invoke=function(e,t,a){var n=d;return function(l,r){if(n===f)throw new Error("Generator is already running");if(n===p){if("throw"===l)throw r;return j()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=w(o,a);if(i){if(i===g)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===d)throw n=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=f;var c=_(e,t,a);if("normal"===c.type){if(n=a.done?p:m,c.arg===g)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(n=p,a.method="throw",a.arg=c.arg)}}}(e,a,o),r}function _(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}function S(){}function T(){}function C(){}function L(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function N(e){var t;this._invoke=function(a,n){function r(){return new Promise(function(t,r){!function t(a,n,r,o){var i=_(e[a],e,n);if("throw"!==i.type){var c=i.arg,u=c.value;return u&&"object"==typeof u&&l.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):Promise.resolve(u).then(function(e){c.value=e,r(c)},o)}o(i.arg)}(a,n,t,r)})}return t=t?t.then(r,r):r()}}function w(e,t){var n=e.iterator[t.method];if(n===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=a,w(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var l=_(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,g;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=a),t.delegate=null,g):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(l.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=a,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:a,done:!0}}}(function(){return this}()||Function("return this")())},1259:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments[1];return((e={},u(e,o.INIT_RELATIVE_CONF,function(){return s}),u(e,o.CHANGE_RELATIVE_CONTENT,function(){return t=t.setIn(["relativeHighTypeTemp",a.name],a.value)}),u(e,o.CHANGE_RELATIVE_DATA,function(){return a.short?t.set(a.dataType,a.value):t.setIn(a.dataType,a.value)}),u(e,o.GET_RELATIVE_LIST_TITLE,function(){return a.title.unshift({name:"全部",uuid:""}),t=t.set("tags",(0,l.fromJS)(a.title)).set("originTags",(0,l.fromJS)(a.title))}),u(e,o.GET_RELATIVE_LIST_BY_TYPE,function(){return t=t.set("relativeCardList",(0,l.fromJS)(a.list)).set("treeList",(0,l.fromJS)(a.tree)).set("relativeSelectList",(0,l.fromJS)([])).mergeIn(["views"],(0,l.fromJS)({activeTapKey:a.name,activeTapKeyUuid:a.uuid,sonUuid:"",sonName:"全部",treeSelect:s.getIn(["views","treeSelect"])}))}),u(e,o.BEFORE_ADD_MANAGE_TYPE_CARD,function(){if(t=t.set("tags",t.get("originTags")),"modify"===a.insertOrModify){for(var e=t.get("tags").toJS(),n=a.data.categoryTypeList,r=0;r<n.length;r++)for(var o=0;o<e.length;o++)if(n[r].ctgyUuid===e[o].uuid){e[o].checked=!0,e[o].selectUuid=n[r].subordinateUuid,e[o].selectName=n[r].subordinateName,e[o].tree=n[r].options;break}t=(t=(t=t.set("tags",(0,l.fromJS)(e))).set("relativeCardTemp",(0,l.fromJS)(a.data))).setIn(["relativeCardTemp","insertOrModify"],"modify"),0===a.data.payableOpened&&(t=t.setIn(["relativeCardTemp","payableOpened"],"")),0===a.data.receivableOpened&&(t=t.setIn(["relativeCardTemp","receivableOpened"],"")),0===a.data.prepaidOpened&&(t=t.setIn(["relativeCardTemp","prepaidOpened"],"")),0===a.data.advanceOpened&&(t=t.setIn(["relativeCardTemp","advanceOpened"],""))}else t=t.set("relativeCardTemp",(0,l.fromJS)(i.relativeCardTemp)).setIn(["relativeCardTemp","insertOrModify"],"insert").setIn(["relativeCardTemp","isCheckOut"],a.data.isCheckOut).setIn(["relativeCardTemp","advanceAcId"],a.data.defaultAc.advanceAcId).setIn(["relativeCardTemp","advanceAcName"],a.data.defaultAc.advanceAcName).setIn(["relativeCardTemp","receivableAcId"],a.data.defaultAc.receivableAcId).setIn(["relativeCardTemp","receivableAcName"],a.data.defaultAc.receivableAcName).setIn(["relativeCardTemp","payableAcId"],a.data.defaultAc.payableAcId).setIn(["relativeCardTemp","payableAcName"],a.data.defaultAc.payableAcName).setIn(["relativeCardTemp","prepaidAcId"],a.data.defaultAc.prepaidAcId).setIn(["relativeCardTemp","prepaidAcName"],a.data.defaultAc.prepaidAcName);return t=t.setIn(["views","fromPage"],a.fromPage||"relative")}),u(e,o.BEFORE_ADD_MANAGE_TYPE_CARD_FROM_EDIT_RUNNING,function(){return t=t.set("relativeCardTemp",(0,l.fromJS)(i.relativeCardTemp)).setIn(["relativeCardTemp","insertOrModify"],"insert").setIn(["relativeCardTemp","isCheckOut"],a.receivedData.isCheckOut).set("tags",a.originTags).setIn(["views","fromPage"],a.otherPageName).setIn(["views","otherPageName"],a.otherPageName).setIn(["relativeCardTemp","code"],a.receivedData.code)}),u(e,o.CHANGE_RELATIVE_CARD_CONTENT,function(){if(t=t.setIn(["relativeCardTemp",a.name],a.value),"isPayUnit"===a.name&&!a.value){var e=(t=t.setIn(["relativeCardTemp","enablePrepaidAc"],!1)).getIn(["relativeCardTemp","isReceiveUnit"]);e?t.get("tags").map(function(e,a){if(!e.get("isReceiveUnit")){var n=(t=t.setIn(["tags",a,"checked"],!1)).getIn(["relativeCardTemp","categoryTypeList"]).findIndex(function(t,a){return t.get("ctgyUuid")===e.get("uuid")});n>-1&&(t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(n)))}}):(t.get("tags").map(function(e,a){t=t.setIn(["tags",a,"checked"],!1)}),t=t.setIn(["relativeCardTemp","categoryTypeList"],(0,l.fromJS)([])))}if("isReceiveUnit"===a.name&&!a.value){var n=(t=t.setIn(["relativeCardTemp","enableAdvanceAc"],!1)).getIn(["relativeCardTemp","isPayUnit"]);n?t.get("tags").map(function(e,a){if(!e.get("isPayUnit")){var n=(t=t.setIn(["tags",a,"checked"],!1)).getIn(["relativeCardTemp","categoryTypeList"]).findIndex(function(t,a){return t.get("ctgyUuid")===e.get("uuid")});n>-1&&(t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(n)))}}):(t.get("tags").map(function(e,a){t=t.setIn(["tags",a,"checked"],!1)}),t=t.setIn(["relativeCardTemp","categoryTypeList"],(0,l.fromJS)([])))}return t}),u(e,o.CHANGE_MANAGE_CARD_RELATION,function(){var e=t.get("tags"),n="";if(e.find(function(t,r){t.get("uuid")===a.tag.get("uuid")&&(e=e.setIn([r,"checked"],a.checked),t.get("selectUuid")&&(n=t.get("selectUuid")),a.checked&&(e=e.setIn([r,"tree"],(0,l.fromJS)(a.tree)),0===a.tree[0].childList.length&&(e=e.setIn([r,"selectUuid"],a.tree[0].uuid).setIn([r,"selectName"],a.tree[0].name),n=a.tree[0].uuid)))}),a.checked){var r=t.getIn(["relativeCardTemp","categoryTypeList"]).toJS();r.push({ctgyUuid:a.tag.get("uuid"),subordinateUuid:n}),t=t.setIn(["relativeCardTemp","categoryTypeList"],(0,l.fromJS)(r))}else{var o=t.getIn(["relativeCardTemp","categoryTypeList"]).findIndex(function(e,t){return e.get("ctgyUuid")===a.tag.get("uuid")});t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(o))}return t=t.set("tags",e)}),u(e,o.RELATIVE_CONFIG_ADD_CARD_SHOW_MODAL,function(){return t.get("tags").map(function(e,n){e.get("uuid")===a.uuid&&(t=t.set("typeTree",t.getIn(["tags",n,"tree"])).set("typeSelect",t.getIn(["tags",n])))}),t}),u(e,o.CHANGE_MANAGE_CARD_RELATION_TYPE,function(){var e=t.get("typeSelect");return t.getIn(["relativeCardTemp","categoryTypeList"]).map(function(n,l){n.get("ctgyUuid")===e.get("uuid")&&(t=t.setIn(["relativeCardTemp","categoryTypeList",l,"subordinateUuid"],a.uuid))}),t.get("tags").map(function(n,l){n.get("uuid")===e.get("uuid")&&(t=t.setIn(["tags",l,"selectUuid"],a.uuid).setIn(["tags",l,"selectName"],a.name))}),t}),u(e,o.CHANGE_RELATIVE_CARD_AC,function(){var e=t.getIn(["views","acId"]),n=t.getIn(["views","acName"]);return t=t.setIn(["relativeCardTemp",e],a.uuid).setIn(["relativeCardTemp",n],a.name)}),u(e,o.SAVE_RELATIVE_TYPE_CARD,function(){return t=t.set("relativeCardList",(0,l.fromJS)(a.list)).set("treeList",(0,l.fromJS)(a.treeList)),"insertAndNew"===a.flag&&(t=t.setIn(["relativeCardTemp","code"],a.code).setIn(["relativeCardTemp","name"],"").setIn(["relativeCardTemp","companyAddress"],"").setIn(["relativeCardTemp","companyTel"],"").setIn(["relativeCardTemp","financeName"],"").setIn(["relativeCardTemp","financeTel"],"").setIn(["relativeCardTemp","receivableOpened"],"").setIn(["relativeCardTemp","advanceOpened"],"").setIn(["relativeCardTemp","payableOpened"],"").setIn(["relativeCardTemp","prepaidOpened"],"")),t}),u(e,o.CHANGE_RELATIVE_CONF_CARD_SELECT_LIST,function(){if("relativeCard"==a.clearType&&(t=t.set("relativeCardSelectList",(0,l.fromJS)([])).update("relativeCardList",function(e){return e.map(function(e){return e.set("checked",!1)})})),"relativeHighType"==a.clearType&&(t=t.set("cardHighTypeSelectList",(0,l.fromJS)([])).update("tags",function(e){return e.map(function(e){return e.set("checked",!1)})})),"relativeTree"==a.clearType){var e=t.getIn(["relativeHighTypeTemp","treeList"]).toJS();!function e(t){return t.map(function(t,a){t.checked=!1,t.childList.length>0&&e(t.childList)})}(e),t=t.set("treeList",(0,l.fromJS)(e)).set("relativeTreeSelectList",(0,l.fromJS)([]))}return t}),u(e,o.CHECK_RELATIVE_LIST_CARD_BOX,function(){var e=t.get("relativeCardList"),n=t.get("relativeCardSelectList").toJS();return e.find(function(e,n){e.get("uuid")===a.uuid&&(t=t.setIn(["relativeCardList",n,"checked"],a.checked))}),a.checked?(n.push({uuid:a.uuid}),t=t.set("relativeCardSelectList",(0,l.fromJS)(n))):n.find(function(e,n){e.uuid===a.uuid&&(t=t.deleteIn(["relativeCardSelectList",n]))}),t}),u(e,o.DELETE_RELATIVE_LIST_CARD,function(){return t=t.set("relativeCardList",(0,l.fromJS)(a.data)).set("relativeCardSelectList",(0,l.fromJS)([])).set("treeList",(0,l.fromJS)(a.treeList))}),u(e,o.GET_RELATIVE_LIST_BY_SON_TYPE,function(){return t=t.set("relativeCardList",(0,l.fromJS)(a.data)).set("relativeCardSelectList",(0,l.fromJS)([])).setIn(["views","sonUuid"],a.sonUuid).setIn(["views","sonName"],a.sonName)}),u(e,o.BEFORE_ADD_NEW_MANAGE_TYPE,function(){return t=t.set("relativeHighTypeTemp",(0,l.fromJS)(i.relativeHighTypeTemp))}),u(e,o.CHANGE_RELATIVE_CONTENT,function(){return t=t.setIn(["relativeHighTypeTemp",a.name],a.value)}),u(e,o.GET_RELATIVE_CARD,function(){return t=t.set("relativeHighTypeTemp",(0,l.fromJS)(a.data))}),u(e,o.CHANGE_RELATIVE_CONF_HIGHT_TYPE_BOX_STATUS,function(){var e=t.get("tags"),n=t.get("cardHighTypeSelectList").toJS();return e.map(function(e,n){e.get("uuid")===a.uuid&&(t=t.setIn(["tags",n,"checked"],a.status))}),a.status?(n.push({uuid:a.uuid}),t=t.set("cardHighTypeSelectList",(0,l.fromJS)(n))):n.find(function(e,n){e.uuid===a.uuid&&(t=t.deleteIn(["cardHighTypeSelectList",n]))}),t}),u(e,o.DELETE_RELATIVE_CONF_HGIH_TYPE,function(){a.title.unshift({name:"全部",uuid:""});var e=t.getIn(["views","activeTapKeyUuid"]),n=a.title.map(function(e){return e.uuid});return n.includes(e)||(t=t.setIn(["views","activeTapKeyUuid"],"").setIn(["views","activeTapKey"],"全部").setIn(["views","treeSelect"],s.getIn(["views","treeSelect"]))),t=t.set("tags",(0,l.fromJS)(a.title)).set("originTags",(0,l.fromJS)(a.title))}),u(e,o.INSERT_RELATIVE_TYPE,function(){return t=t.setIn(["relativeTypeTemp","name"],"").setIn(["relativeTypeTemp","uuid"],"").setIn(["relativeTypeTemp","parentUuid"],a.uuid).setIn(["relativeTypeTemp","parentName"],a.name)}),u(e,o.CHANGE_RELATIVE_TYPE_CONTENT,function(){return t=t.setIn(["relativeTypeTemp",a.name],a.value)}),u(e,o.CHANGE_RELATIVE_TYPE_SELECT,function(){return t=t.setIn(["relativeTypeTemp","parentUuid"],a.parentUuid).setIn(["relativeTypeTemp","parentName"],a.parentName)}),u(e,o.SAVE_RELATIVE_TYPE,function(){return t=t.set("relativeCardList",(0,l.fromJS)(a.list)).setIn(["views","activeTapKey"],a.name).setIn(["views","activeTapKeyUuid"],a.activeTapKeyUuid).set("treeList",(0,l.fromJS)(a.tree))}),u(e,o.GET_RELATIVE_TYPE_CONTENT,function(){return t=t.set("relativeTypeTemp",(0,l.fromJS)(a.data))}),u(e,o.CHANGE_RELATIVE_TYPE_BOX_CHECKED,function(){var e=t.getIn(["relativeHighTypeTemp","treeList"]).toJS();return function e(t,n){return t.map(function(t,l){var r=n;(t.uuid==a.uuid||n)&&(t.checked=a.value,r=!0),t.childList.length>0&&e(t.childList,r)})}(e,!1),t.setIn(["relativeHighTypeTemp","treeList"],(0,l.fromJS)(e))}),u(e,o.SWITCH_CARD_STATUS,function(){return t=t.setIn(["relativeCardTemp","used"],a.used)}),e)[a.type]||function(){return t})()};var n,l=a(9),r=a(182),o=((n=r)&&n.__esModule,c(a(25)),a(13),c(a(10)),c(a(1300))),i=a(1243);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s=(0,l.fromJS)({views:{acName:"",acId:"",relation:"",anotherTabName:"全部",activeTapKey:"全部",activeTapKeyUuid:"",sonUuid:"",sonName:"全部",insertOrModify:"insert",fromPage:"relative",otherPageName:"",treeSelect:{treeTwoList:[],treeThreeList:[],selectUuid:["","",""],selectName:"",selectEndUuid:""}},tags:[],originTags:[],relativeHighTypeTemp:i.relativeHighTypeTemp,relativeTypeTemp:i.relativeTypeTemp,relativeCardTemp:i.relativeCardTemp,relativeCardSelectList:[],relativeCardList:[],treeList:[],relativeTreeSelectList:[],typeTree:[],typeSelect:"",cardHighTypeSelectList:[]})},1260:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((e={},r(e,l.INIT_PROJECT,function(){return o}),r(e,l.INIT_PROJECT_DATA,function(){return t.set(a.dataType,o.get(a.dataType)).setIn(["views","fromPage"],a.fromPage||"project")}),r(e,l.PROJECT_HIGH_TYPE,function(){var e=a.list;return e.unshift({name:"全部",uuid:""}),t.set("highTypeList",(0,n.fromJS)(e)).setIn(["views","ctgyUuid"],e[1].uuid)}),r(e,l.CHANGE_PROJECT_DATA,function(){return t.setIn(a.dataType,a.value)}),r(e,l.CHANGE_PROJECT_TOP_DATA,function(){return t.set(a.dataType,a.value)}),r(e,l.AFTER_SUCCESS_EDIT_PROJECT_CARD,function(){return t.set("cardList",(0,n.fromJS)(a.receivedData))}),r(e,l.GET_PROJECT_LIST_AND_TREE,function(){var e=a.data.typeList.length?a.data.typeList[0].uuid:"";return t.set("cardList",(0,n.fromJS)(a.data.resultList)).set("treeList",(0,n.fromJS)(a.data.typeList)).mergeIn(["views"],(0,n.fromJS)({treeUuid:e,treeName:"全部",treeSelect:o.getIn(["views","treeSelect"])}))}),r(e,l.CHECKED_PROJECT_CATEGORY,function(){var e=t.getIn(["highTypeData","treeList"]).toJS();return function e(t,n){return t.map(function(t,l){var r=n;(t.uuid==a.uuid||n)&&(t.checked=a.value,r=!0),t.childList.length>0&&e(t.childList,r)})}(e,!1),t.setIn(["highTypeData","treeList"],(0,n.fromJS)(e))}),r(e,l.GET_PROJECT_CARD_ONE,function(){var e=a.data.categoryTypeList[0].subordinateName,l=a.data.categoryTypeList[0].subordinateUuid;return t.mergeIn(["data","psiData"],(0,n.fromJS)(a.data)).setIn(["views","insertOrModify"],"modify").setIn(["data","psiData","selectName"],e).setIn(["data","psiData","selectUuid"],l).setIn(["data","psiData","typeList"],(0,n.fromJS)(a.data.categoryTypeList[0].options)).setIn(["views","fromPage"],"project").set("treeList",(0,n.fromJS)(a.data.categoryTypeList[0].options))}),r(e,l.UNCHECKED_PROJECT,function(){if("card"==a.dataType){t.get("cardList");t=t.update("cardList",function(e){return e.map(function(e){return e.set("checked",!1)})})}else{var e=t.get("treeList").toJS();!function e(t){return t.map(function(t,a){t.checked=!1,t.childList.length>0&&e(t.childList)})}(e),t=t.set("treeList",(0,n.fromJS)(e))}return t}),r(e,l.BEFORE_ADD_PROJECT_CARD_FROM_EDIT_RUNNING,function(){return t=t.set("data",o.get("data")).set("treeList",(0,n.fromJS)(a.receivedData)).setIn(["views","insertOrModify"],"insert").setIn(["views","fromPage"],a.otherPageName).setIn(["views","otherPageName"],a.otherPageName).setIn(["views","ctgyUuid"],a.ctgyUuid).set("highTypeList",(0,n.fromJS)(a.highTypeList)).setIn(["data","psiData","code"],a.code).setIn(["data","psiData","categoryTypeList",0],(0,n.fromJS)({ctgyUuid:a.ctgyUuid,subordinateUuid:""})),a.receivedData[0].childList.length<=0&&(t=t.setIn(["data","psiData","selectUuid"],a.receivedData[0].uuid).setIn(["data","psiData","selectName"],a.receivedData[0].name).setIn(["data","psiData","categoryTypeList",0,"subordinateUuid"],a.receivedData[0].uuid)),a.highTypeList.map(function(e){e.uuid==a.ctgyUuid&&"生产项目"==e.name&&(t=t.setIn(["data","psiData","projectProperty"],"XZ_PRODUCE"))}),t}),r(e,l.BEFORE_ADD_PROJECT_CARD_GET_CODE,function(){return t.setIn(["data","psiData","code"],a.value)}),e)[a.type]||function(){return t})()};var n=a(9),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1301));function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=(0,n.fromJS)({views:{currentType:"",currentTypeName:"全部",ctgyUuid:"",treeName:"全部",treeUuid:"",highTypeIdx:0,insertOrModify:"insert",fromPage:"project",otherPageName:"",treeSelect:{treeTwoList:[],treeThreeList:[],selectUuid:["","",""],selectName:"",selectEndUuid:""}},data:{psiData:{code:"",name:"",selectName:"",selectUuid:"",categoryTypeList:[],typeList:[],used:!0,uuid:"",projectProperty:"XZ_LOSS",basicProductOpen:"",contractCostOpen:"",contractProfitOpen:"",engineeringSettlementOpen:""}},highTypeList:[],cardList:[],treeList:[],highTypeData:{commonFee:!1,name:"",uuid:"",beAssist:!1,beMake:!0,treeList:[]},deleteList:[],treeData:{name:"",parentName:"",parentUuid:"",uuid:""}})},1261:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountConfigActions=t.ActionTypes=void 0,t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((e={},m(e,p.INIT_ACCOUNT_SETTING,f),m(e,p.ACCOUNT_SETTING_POUNDAGE,function(){if("insert"==a.flags)return t.set("poundageData",f.get("poundageData"));var e=a.data,n=t.getIn(["poundageData","flags"]),l=!1,r=!1;return"modify"==a.flags&&(n="modify",e.beProject&&(r=t.getIn(["poundageData","poundageNeedProject"])),e.acCost.contactsManagement&&(l=t.getIn(["poundageData","poundageNeedCurrent"]))),t.setIn(["poundageData","categoryUuid"],e.uuid).setIn(["poundageData","categoryName"],e.name).setIn(["poundageData","beProject"],e.beProject).setIn(["poundageData","contactsManagement"],e.acCost.contactsManagement).setIn(["poundageData","poundageNeedCurrent"],l).setIn(["poundageData","poundageNeedProject"],r).setIn(["poundageData","flags"],n)}),m(e,p.CHANGE_ACCOUNT_SETTING_DATA,function(){return"insert"==a.value&&(t=t.set("data",f.get("data")).setIn(["views","fromPage"],"account")),t.setIn(a.dataType,a.value)}),m(e,p.BEFOR_ADD_ACCONT_FROM_EDIT_RUNNING,function(){return"insert"==a.value&&(t=t.set("data",f.get("data")).setIn(["views","fromPage"],"editRunning")),t.setIn(a.dataType,a.value)}),m(e,p.ACCOUNT_SETTING_MIDIFY,function(){return t.set("data",a.item).setIn(["views","flags"],"modify").setIn(["views","fromPage"],"account")}),e)[a.type]||function(){return t})()};var n,l=a(9),r=a(124),o=(n=r)&&n.__esModule?n:{default:n},i=d(a(25)),c=a(13),u=(d(a(1064)),d(a(10))),s=d(a(185));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f=(0,l.fromJS)({views:{flags:"insert",fromPage:"account"},data:{beginAmount:"",openingName:"",name:"",openingBank:"",accountNumber:"",openInfo:!1,type:"general",uuid:"",acFullName:"",acId:"",assCategoryList:[],canUse:!0,needPoundage:!1,poundage:"",poundageRate:""},poundageData:{flags:"insert",categoryUuid:"",categoryName:"请选择处理类别",beProject:!1,contactsManagement:!1,poundageNeedCurrent:!1,poundageNeedProject:!1},regret:{regretList:[]}});var p=t.ActionTypes={ACCOUNT_SETTING_POUNDAGE:"ACCOUNT_SETTING_POUNDAGE",CHANGE_ACCOUNT_SETTING_DATA:"CHANGE_ACCOUNT_SETTING_DATA",BEFOR_ADD_ACCONT_FROM_EDIT_RUNNING:"BEFOR_ADD_ACCONT_FROM_EDIT_RUNNING",ACCOUNT_SETTING_MIDIFY:"ACCOUNT_SETTING_MIDIFY",INIT_ACCOUNT_SETTING:"INIT_ACCOUNT_SETTING"},g=t.accountConfigActions={getCardDetail:function(e,t){return function(a,n){u.toast.loading(i.LOADING_TIP_TEXT,0),(0,o.default)("getRunningDetail","GET","uuid="+e,function(e){u.toast.hide(),(0,c.showMessage)(e)&&a({type:p.ACCOUNT_SETTING_POUNDAGE,data:e.data.result,flags:t})})}},accountSettingMidify:function(e){return{type:p.ACCOUNT_SETTING_MIDIFY,item:e}},changeAccountSettingData:function(e,t){return{type:p.CHANGE_ACCOUNT_SETTING_DATA,dataType:e,value:t}},saveAccountPoundage:function(e){return function(t,a){var n=a().accountConfigState,l=n.getIn(["poundageData","flags"]),r=n.getIn(["poundageData","categoryUuid"]),s=n.getIn(["poundageData","poundageNeedCurrent"]),d=n.getIn(["poundageData","poundageNeedProject"]);u.toast.loading(i.LOADING_TIP_TEXT,0),(0,o.default)(l+"AccountPoundage","POST",JSON.stringify({categoryUuid:r,poundageNeedCurrent:s,poundageNeedProject:d}),function(t){u.toast.hide(),(0,c.showMessage)(t,"show")&&e.goBack()})}},getAccountPoundage:function(){return function(e){(0,o.default)("getAccountPoundage","GET","",function(t){(0,c.showMessage)(t)&&(t.data.canUsed&&t.data.uuid?(e(g.changeAccountSettingData(["poundageData","poundageNeedProject"],t.data.poundageNeedProject)),e(g.changeAccountSettingData(["poundageData","poundageNeedCurrent"],t.data.poundageNeedCurrent)),e(g.getCardDetail(t.data.categoryUuid,"modify"))):e({type:p.ACCOUNT_SETTING_POUNDAGE,flags:"insert"}),!t.data.canUsed&&t.data.uuid&&(u.Alert("处理类别失效，请重新选择"),e(g.changeAccountSettingData(["poundageData","flags"],"modify"))))})}},getRegretList:function(){return function(e){u.toast.loading(i.LOADING_TIP_TEXT,0),(0,o.default)("getAccountRegretList","GET","",function(t){u.toast.hide(),(0,c.showMessage)(t)&&(t.data.accountRegretList.forEach(function(e){e.key=e.name,e.value=e.uuid}),e(g.changeAccountSettingData(["regret","regretList"],(0,l.fromJS)(t.data.accountRegretList))))})}},accountRegret:function(e,t){return function(a){u.toast.loading(i.LOADING_TIP_TEXT,0),(0,o.default)("accountRegret","POST",JSON.stringify(e),function(e){u.toast.hide(),(0,c.showMessage)(e,"show")&&(t.goBack(),a(s.getRunningAccount()))})}}}},1304:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=p(o),c=(a(9),p(a(2))),u=a(16),s=f(a(25)),d=f(a(1060)),m=f(a(1068));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var g=(l=n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.accountList,n=e.accounts,l=e.accountStatus,r=this.context.router,o=a.toJS(),c=n.getIn([0,"accountUuid"]),f=n.getIn([0,"accountName"]);return"ACCOUNT_STATUS_TO"==l&&(c=n.getIn([1,"accountUuid"]),f=n.getIn([1,"accountName"])),i.default.createElement(u.Single,{className:"lrls-single",district:o,value:""+c+s.TREE_JOIN_STR+f,icon:{type:"account-add",onClick:function(){t(m.beforAddAccontfromEditRunning(["views","flags"],"insert")),r.history.push("/config/account/card/edit")}},onOk:function(e){t(d.changeLrlsAccount(e,l))}},i.default.createElement(u.Row,{style:{color:f?"":"#999"},className:"lrls-account lrls-type"},i.default.createElement("span",{className:"overElli"},f||"点击选择账户"),i.default.createElement(u.Icon,{type:"triangle"})))}}]),t}(),n.contextTypes={router:c.default.object},l);t.default=g},1483:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=(a(9),a(16)),c=a(13),u=m(a(25)),s=m(a(1060)),d=m(a(1068));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.history,n=e.accountList,l=e.accounts,r=e.beManagemented,m=e.oriState,f=e.isManualWriteOff,p=e.sfglAmount,g=function(e){r&&["STATE_YYSR_XS","STATE_YYSR_TS"].includes(m)&&t(s.changeLrlsData(["oriTemp","currentAmount"],e)),"STATE_SFGL"!=m||f||t(s.changeLrlsData(["oriTemp","amount"],e))},y=l.size>2,h=0;return l.forEach(function(e){return h+=Number(e.get("amount"))}),o.default.createElement(i.Row,{className:"lrls-card"},l.map(function(e,l){var r=e.get("accountUuid"),E=e.get("accountName");return o.default.createElement("div",{key:l,style:{paddingBottom:"10px"}},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},o.default.createElement("span",null,"账户(",l+1,")"),o.default.createElement("span",{className:"lrls-blue",style:{display:y?"":"none"},onClick:function(){t(s.accountMoreCard("delete","",l)),g(h-Number(e.get("amount")))}},"删除")),o.default.createElement(i.Row,{className:"lrls-more-card lrls-margin-top"},o.default.createElement("label",null,"金额:"),o.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:e.get("amount"),onChange:function(a){t(s.accountMoreCard("amount",a,l));var n=h-Number(e.get("amount"))+Number(a);g((0,c.decimal)(n))},onFocus:function(){if("STATE_SFGL"==m&&0==Number(e.get("amount"))){var a=(0,c.decimal)(p-h);a>0&&(t(s.accountMoreCard("amount",a,l)),f||g((0,c.decimal)(p)))}}})),o.default.createElement("div",{className:"lrls-more-card lrls-margin-top"},o.default.createElement("label",null,"账户:"),o.default.createElement(i.Single,{className:"lrls-single",district:n.toJS(),value:r?""+r+u.TREE_JOIN_STR+E:"",onOk:function(e){t(s.accountMoreCard("card",e,l))},icon:{type:"account-add",onClick:function(){t(d.beforAddAccontfromEditRunning(["views","flags"],"insert")),a.push("/config/account/card/edit")}}},o.default.createElement(i.Row,{className:"lrls-category lrls-padding"},r?o.default.createElement("span",null," ",E," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择账户卡片"),o.default.createElement(i.Icon,{type:"triangle"})))))}),o.default.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold"}},o.default.createElement("div",null,"总金额：",o.default.createElement(i.Amount,{showZero:!0},(0,c.decimal)(h))),o.default.createElement("div",{className:"lrls-stock-bottom"},o.default.createElement("div",{className:l.size>31?"lrls-placeholder":"lrls-blue",onClick:function(){l.size>31||t(s.accountMoreCard("add","",l.size))}},"+添加账户明细"))))}}]),t}();t.default=f},1484:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(16),c=a(13),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(10));function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}a(1797);var d=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.scrollView="",n.state={checkedList:[]},s(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),l(t,[{key:"componentDidMount",value:function(){this.scrollView=document.getElementsByClassName("scroll-view")[0]}},{key:"componentWillReceiveProps",value:function(e){e.assistVisible&&this.setState({checkedList:e.oriAssistList}),e.assistVisible&&this.scrollView&&(this.scrollView.style["overflow-y"]="hidden"),!e.assistVisible&&this.scrollView&&(this.scrollView.style["overflow-y"]="auto")}},{key:"render",value:function(){var e=this,t=this.props,a=t.assistVisible,n=t.assistClassificationList,l=t.onOk,r=t.addClick,s=t.onCancel,d=this.state.checkedList,m=[];return o.default.createElement("div",{className:"edit-assist xfn-multiple "+(a?"xfn-multiple-animate":"xfn-multiple-none-animate"),onClick:function(){return s()}},o.default.createElement("div",{className:"xfn-multiple-popup "+(a?"xfn-multiple-popup-animate":"xfn-multiple-popup-none-animate"),style:{minHeight:"75%"},onClick:function(e){return e.stopPropagation()}},o.default.createElement("div",{className:"xfn-multiple-title"},o.default.createElement("div",null,o.default.createElement("span",null,"请选择属性"))),o.default.createElement("ul",{style:{padding:"0 .1rem"}},n.map(function(t,a){var n=t.get("inventoryUuid"),l=t.get("uuid"),s=t.get("name");return m.push(l),o.default.createElement("div",{key:l,className:"margin-top"},o.default.createElement("div",null,s),o.default.createElement("div",{className:"padding-top"},t.get("propertyList").map(function(t){var a=t.get("uuid"),n=t.get("name"),r=d.findIndex(function(e){return e.propertyUuid==a}),i="assist-button",c=!1;return r>-1&&(c=!0,i="assist-button assist-select"),o.default.createElement("span",{className:i,key:a,onClick:function(){if(c)d.splice(r,1);else{var t=d.findIndex(function(e){return e.classificationUuid==l});t>-1&&d.splice(t,1),d.push({propertyUuid:a,propertyName:n,classificationUuid:l,classificationName:s})}e.setState({checkedList:d})}},n)}),o.default.createElement("span",{className:"assist-button assist-add",key:"add",onClick:function(){u.Prompt({title:"新增"+s,message:"请输入属性名称:",buttonLabels:["取消","确认"],onSuccess:function(e){if(1===e.buttonIndex){var t=[{type:"topestName",value:e.value}];c.configCheck.beforeSaveCheck(t,function(){r({inventoryUuid:n,classificationUuid:l,name:e.value})})}}})}},o.default.createElement(i.Icon,{type:"add"})," 新增")))})),o.default.createElement("div",{className:"xfn-multiple-select"},o.default.createElement("span",{className:"overElli"},d.reduce(function(e,t){return e+(e?";":"")+t.propertyName},"")),o.default.createElement("span",{className:"xfn-multiple-button",onClick:function(){var t=d.map(function(e){return e.classificationUuid});if(m.length!=t.length)return u.toast.info("请选择完整的属性");l(d),e.setState({checkedList:[]})}},"确定"))))}}]),t}();t.default=d},1738:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=d(a(0)),r=a(16),o=a(125),i=d(a(1739)),c=d(a(1789)),u=d(a(1790)),s=d(a(1801));function d(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),n(t,[{key:"render",value:function(){return l.default.createElement(r.Container,null,l.default.createElement(o.Route,{path:"/editrunning/index",component:i.default}),l.default.createElement(o.Route,{path:"/editrunning/sfgl",component:c.default}),l.default.createElement(o.Route,{path:"/editrunning/stock",component:u.default}),l.default.createElement(o.Route,{path:"/editrunning/poundage",component:s.default}))}}]),t}();t.default=m},1739:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=T(a(0)),o=a(31),i=a(9),c=a(16),u=a(1740),s=T(a(190)),d=T(a(1770)),m=T(a(1786));a(1787);var f=a(13),p=a(123),g=S(a(10)),y=S(a(25)),h=S(a(183)),E=S(a(1060)),v=S(a(185)),b=a(1397),_=a(48);function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var L=(0,o.connect)(function(e){return e})(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={codeRepeatModal:!1,autoEncode:"",encodeList:[]},C(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),l(t,[{key:"componentDidMount",value:function(){g.setTitle({title:"录入流水"}),g.setIcon({showIcon:!1}),g.setRight({show:!1}),this.props.dispatch(_.homeActions.setDdConfig()),sessionStorage.removeItem("routerPage");var e=document.getElementsByClassName("scroll-view")[0];var t=(0,f.throttle)(function(e){e.target.scrollHeight<=e.target.clientHeight&&(e.target.scrollTop=0)});e.addEventListener("scroll",function(e){t(e)},!1);var a=sessionStorage.getItem("ylToLr");if(["MODIFY","COPY"].includes(a)){sessionStorage.removeItem("ylToLr"),sessionStorage.setItem("prevPage","editrunning"),this.props.dispatch(E.fromYlToLr(a));var n=this.props.homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]),l=!n||n.indexOf("ENCLOSURE_RUN")>-1,r="TRUE"===this.props.homeState.getIn(["data","userInfo","checkMoreFj"]);return l&&r&&this.props.dispatch(E.getLabelFetch()),void(n.includes("WAREHOUSE")&&this.props.dispatch(E.getWarehouseCardList()))}var o=sessionStorage.getItem("prevPage");if(["home","searchrunning","runningpreview"].includes(o)){sessionStorage.removeItem("prevPage"),this.props.dispatch(E.accountSaveAndNew()),this.props.dispatch(v.getRunningSettingInfo()),this.props.dispatch(E.changeLrlsEnclosureList());var i=this.props.homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]),c=!i||i.indexOf("ENCLOSURE_RUN")>-1,u="TRUE"===this.props.homeState.getIn(["data","userInfo","checkMoreFj"]);c&&u&&this.props.dispatch(E.getLabelFetch()),i.includes("WAREHOUSE")&&this.props.dispatch(E.getWarehouseCardList())}}},{key:"componentDidUpdate",value:function(e){if(this.props.editRunningState.getIn(["oriTemp","oriState"])!=e.editRunningState.getIn(["oriTemp","oriState"])){var t=document.getElementsByName("running-textarea")[0];t.focus(),t.blur()}}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.history,l=t.editRunningState,o=t.homeState,v=t.allState,_=this.state,S=_.codeRepeatModal,T=_.autoEncode,C=_.encodeList,L=o.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]),N=v.get("oriCategory"),w=v.get("accountList"),I=[];w.size&&w.getIn([0,"childList"]).forEach(function(e,t){var a=e.toJS();a.key=a.name,a.value=""+a.uuid+y.TREE_JOIN_STR+a.name,I.push(a)});var A=(0,i.fromJS)(I),k=l.getIn(["views","insertOrModify"]),O="COPY"==l.getIn(["views","ylType"]),j="modify"===k,R=l.getIn(["views","showJrPage"]),P=l.get("commonCardList").toJS(),J=l.get("commonCurrentList").toJS(),D=l.get("cardAllList"),Z=l.get("oriTemp"),x=Z.get("oriDate"),U=Z.get("jrIndex"),M=Z.get("oriState"),B=Z.get("categoryType"),X=Z.get("categoryUuid"),Y=Z.get("categoryName"),F=Z.get("oriAbstract"),H=Z.get("amount"),G=Z.get("accounts"),z=Z.get("jrAmount"),V=Z.get("propertyCarryover"),q="SX_HW"==V,W=Z.get("handleType"),Q=Z.get("usedAccounts"),K=Z.getIn([h.categoryTypeObj[B],"beAccrued"]),$=Z.getIn([h.categoryTypeObj[B],"beWelfare"]),ee=Z.get("propertyTax"),te=Z.get("propertyPay"),ae=Z.get("beProject"),ne=Z.get("usedProject"),le=l.get("projectCategoryList"),re=l.get("commonProjectList"),oe=Z.get("projectRange")?Z.get("projectRange"):(0,i.fromJS)([]),ie=Z.get("projectCardList")?Z.get("projectCardList"):(0,i.fromJS)([]),ce=l.get("projectList")?l.get("projectList"):(0,i.fromJS)([]),ue=!!ae&&(0,b.showProject)(Z);j&&Z.get("oriUsedProject")&&(ue=!0,"LB_JZCB"==B&&["STATE_YYSR_XS","STATE_YYSR_TS"].includes(M)&&(ue=!1),["LB_GGFYFT","LB_SFGL"].includes(B)&&(ue=!1));var se=Z.get("usedCurrent"),de=l.get("currentList")?l.get("currentList"):(0,i.fromJS)([]),me=Z.getIn([h.categoryTypeObj[B],"beManagemented"]),fe=Z.getIn([h.categoryTypeObj[B],"contactsRange"]),pe=(Z.getIn([h.categoryTypeObj[B],"allContactsRange"]),l.get("currentCategoryList")),ge=Z.get("currentCardList")?Z.get("currentCardList"):(0,i.fromJS)([]),ye=Z.getIn([h.categoryTypeObj[B],"contactsManagement"]),he=Z.get("oriUsedCurrent");j&&he&&(ye=!0);var Ee=v.getIn(["taxRate","scale"]),ve=v.getIn(["taxRate","payableRate"]),be=v.getIn(["taxRate","outputRate"]),_e=v.getIn(["taxRate","rateOptionList"]),Se=Z.get("billList"),Te=Z.get("billStrongList")?Z.get("billStrongList"):(0,i.fromJS)([]),Ce=Z.get("beCleaning"),Le=Z.get("assets"),Ne=Z.get("carryoverStrongList")?Z.get("carryoverStrongList"):(0,i.fromJS)([]),we=Z.get("propertyCostList"),Ie=Z.get("propertyCost"),Ae=l.get("stockList"),ke=Z.get("stockCardList"),Oe=Z.get("stockCardOtherList"),je=Z.getIn([h.categoryTypeObj[B],"stockRange"]),Re=(Z.getIn([h.categoryTypeObj[B],"allStockRange"]),l.get("stockCategoryList")),Pe=!(!q&&"SX_HW_FW"!=V||!["STATE_YYSR_XS","STATE_YYSR_TS","STATE_YYZC_GJ","STATE_YYZC_TG"].includes(M)),Je=Z.get("usedStock"),De=o.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE"),Ze="STATE_CHYE_TYDJ"==M?l.get("warehouseListTydj"):l.get("warehouseList"),xe=o.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("QUANTITY"),Ue=Z.get("beCarryover"),Me=Z.get("carryoverCardList"),Be=Z.get("stockStrongList")?Z.get("stockStrongList"):(0,i.fromJS)([]),Xe=l.get("categoryList"),Ye=Z.get("uuid"),Fe=Z.get("name");"LB_SFGL"==B&&(Ye=Z.getIn(["pendingManageDto","categoryUuid"]),Fe=Z.getIn(["pendingManageDto","categoryName"])),["LB_JZCB","LB_JXSEZC","LB_JZSY","LB_ZJTX"].includes(B)&&(Ye=Z.get("relationCategoryUuid"),Fe=Z.get("relationCategoryName"));var He=Z.get("pendingStrongList")?Z.get("pendingStrongList"):(0,i.fromJS)([]),Ge=Z.get("strongList")?Z.get("strongList"):(0,i.fromJS)([]),ze=He.some(function(e){return e.get("beSelect")}),Ve=(0,m.default)(B,M,K,ee,te,$,ne,se),qe=0,We=0,Qe=0,Ke=0;"LB_ZCWJZZS"==B&&He.size&&He.forEach(function(e){"JR_STRONG_STAY_ZCXX"===e.get("pendingStrongType")?(qe++,Qe+=e.get("taxAmount")):(We++,Ke+=e.get("taxAmount"))});var $e=o.getIn(["data","userInfo","sobInfo","moduleInfo"]),et=!$e||$e.indexOf("ENCLOSURE_RUN")>-1,tt="TRUE"===o.getIn(["data","userInfo","checkMoreFj"]),at=l.get("label"),nt=l.get("enclosureList"),lt=v.get("uploadKeyJson"),rt=[];nt.map(function(e){"TRUE"===e.get("imageOrFile")&&rt.push(e.get("signedUrl"))});var ot=function(t,a){e.setState({codeRepeatModal:!0,autoEncode:t,encodeList:a})},it=v.get("accountPoundage"),ct=l.get("poundageCurrentList"),ut=l.get("poundageProjectList"),st=l.get("poundageCurrentRange").toJS(),dt=l.get("poundageProjectRange").toJS(),mt=Z.getIn([h.categoryTypeObj[B],"beZeroInventory"]),ft=Z.get("usedCarryoverProject"),pt=Z.get("carryoverProjectCardList");return r.default.createElement(c.Container,{className:"edit-running"},r.default.createElement(p.TopDatePicker,{value:x,onChange:function(e){a(E.changeHomeAccountOriDate(new f.DateLib(e).valueOf(),j))},callback:function(e){a(E.changeHomeAccountOriDate(e,j))}}),r.default.createElement(c.ScrollView,{flex:"1"},j&&!O?r.default.createElement(c.Row,{className:"lrls-row lrls-more-card"},r.default.createElement("label",null,"流水号："),r.default.createElement(c.XfInput.BorderInputItem,{placeholder:"填写流水号",value:U,onChange:function(e){(/^\d*$/g.test(e)||""==e)&&a(E.changeLrlsData(["oriTemp","jrIndex"],e))}}),r.default.createElement("span",{className:"lrls-margin-left"},"号")):null,r.default.createElement("div",{className:"lrls-card"},r.default.createElement(u.CategoryCom,{scale:Ee,isModify:j,disabled:j&&!Z.get("canBeModifyCategory"),dispatch:a,lastCategory:N,categoryUuid:X,categoryName:Y,categoryType:B,isOpenedWarehouse:De,openQuantity:xe}),r.default.createElement(u.HandleType,{disabled:j,dispatch:a,categoryType:B,handleType:W}),r.default.createElement(u.HandleCategory,{disabled:j,dispatch:a,categoryType:B,categoryList:Xe,beProject:ae,uuid:Ye,name:Fe}),r.default.createElement(u.PropertyCostCom,{dispatch:a,categoryType:B,oriState:M,propertyCostList:we,propertyCost:Ie,hasSelect:ze}),"LB_XMJZ"==B?r.default.createElement(u.SingleProjectCom,{usedProject:ne,projectCardList:ie,projectList:ce,dispatch:a,categoryType:B,oriState:M,propertyPay:te,history:n,projectRange:oe,projectCategoryList:le,commonProjectList:re,propertyCarryover:V,propertyCostList:we,isModify:j,handleType:W,showXmjz:!0}):null,r.default.createElement(u.RadioCom,{isModify:j,dispatch:a,oriTemp:Z,isOpenedWarehouse:De,openQuantity:xe,projectShareType:D.get("projectShareType"),isCopy:O})),r.default.createElement(c.Row,{className:"lrls-card"},r.default.createElement("div",{className:"lrls-bottom",style:{display:"STATE_YYSR_ZJ"==M?"":"none"}},r.default.createElement(u.HandleCategory,{disabled:j,dispatch:a,categoryType:B,categoryList:Xe,beProject:ae,uuid:Ye,name:Fe,showJzcb:!0,oriState:M})),r.default.createElement(u.PropertyCostCom,{dispatch:a,categoryType:B,oriState:M,propertyCostList:we,propertyCost:Ie,hasSelect:ze,isHandleCategory:!0}),r.default.createElement("div",{className:"lrls-line"},r.default.createElement("label",null,"摘要："),r.default.createElement(c.TextareaItem,{name:"running-textarea",placeholder:"摘要填写",value:F,onChange:function(e){a(E.changeLrlsData(["oriTemp","oriAbstract"],e))},onFocus:function(){var e=document.getElementsByName("running-textarea")[0];e.setSelectionRange&&e.setSelectionRange(F.length,F.length)}}))),ye?r.default.createElement(u.CurrentCom,{history:n,dispatch:a,currentList:de,currentCardList:ge,contactsRange:fe,categoryType:B,oriState:M,isModify:j,strongListSize:Ge.size,stockStrongListSize:Be.size,usedCurrent:se,beAccrued:K,oriUsedCurrent:he,allContactsRange:pe,commonCurrentList:J,isCopy:O}):null,ue?r.default.createElement(u.SingleProjectCom,{usedProject:ne,projectCardList:ie,projectList:ce,dispatch:a,categoryType:B,oriState:M,propertyPay:te,history:n,projectRange:oe,projectCategoryList:le,commonProjectList:re,propertyCarryover:V,propertyCostList:we,isModify:j,handleType:W,relationCategoryType:Z.get("relationCategoryType")}):null,Pe?r.default.createElement(u.StockCom,{dispatch:a,stockList:Ae,stockCardList:ke,stockRange:je,history:n,categoryType:B,cardDisabled:j&&Ue,propertyCarryover:V,usedStock:Je,isOpenedWarehouse:De,warehouseList:Ze,allStockRange:Re,commonCardList:P}):null,r.default.createElement(u.AmountCom,{history:n,isModify:j,dispatch:a,oriTemp:Z,accountList:A,accounts:G,pendingStrongList:He,stockList:Ae,stockCardList:ke,projectCardList:ie,projectList:ce,hasSelect:ze,isOpenedWarehouse:De,warehouseList:Ze,stockCategoryList:Re,commonCardList:P,stockCardOtherList:Oe,projectCategoryList:le,commonProjectList:re,cardAllList:D}),Q&&["LB_YYSR","LB_YYZC","LB_FYZC"].includes(B)?r.default.createElement(u.AccountMoreCom,{dispatch:a,history:n,accountList:A,accounts:G,beManagemented:me,oriState:M}):null,!j&&it.get("uuid")&&it.get("canUsed")?r.default.createElement(u.Poundage,{dispatch:a,oriTemp:Z,accounts:G,accountPoundage:it,poundageCurrentList:ct,poundageProjectList:ut,contactsRange:fe?fe.toJS():[],poundageCurrentRange:st,poundageProjectRange:dt,beManagemented:me,usedProject:ne,usedCurrent:se,categoryType:B,history:n}):null,"isEnable"!=Ee||j?r.default.createElement(u.BillCom,{dispatch:a,categoryType:B,oriState:M,billList:Se,amount:H,scale:Ee,payableRate:ve,outputRate:be,billStrongList:Te,isModify:j,oriBillType:Z.get("oriBillType"),rateOptionList:_e}):null,j||"JR_HANDLE_CZ"!=W?null:r.default.createElement(u.CleanCom,{dispatch:a,amount:H,beCleaning:Ce,assets:Le,beProject:ae,usedProject:ne,projectCardList:ie,projectList:ce}),j&&Ne.size?r.default.createElement(c.Row,{className:"lrls-row"},"结转流水：",Ne.getIn([0,"oriDate"])+" "+Ne.getIn([0,"jrIndex"]),"号"):null,j&&Be.size?r.default.createElement(c.Row,{className:"lrls-row"},"结转成本流水：",Be.getIn([0,"oriDate"])+" "+Be.getIn([0,"jrIndex"]),"号"):null,!q&&!Je||"STATE_YYSR_XS"!=M&&"STATE_YYSR_TS"!=M||j?null:r.default.createElement(u.CarryoverCom,{dispatch:a,stockCardList:ke,carryoverCardList:Me,beCarryover:Ue,isOpenedWarehouse:De,isCopy:O}),mt&&q&&"STATE_YYZC_GJ"==M&&!j?r.default.createElement(u.CarryoverYyzc,{dispatch:a,beCarryover:Ue,categoryList:Xe,usedCarryoverProject:ft,carryoverProjectCardList:pt,relationCategoryUuid:Z.get("relationCategoryUuid"),relationCategoryName:Z.get("relationCategoryName"),relationObj:Z.get("relationObj").toJS(),carryoverProject:l.get("carryoverProject"),propertyCost:Ie,usedProject:ne,projectCardList:ie,projectRange:oe}):null,r.default.createElement(u.HxCom,{categoryType:B,oriState:M,pendingStrongList:He,jrAmount:z,beAccrued:K||$,propertyTax:ee,propertyPay:te,strongList:Ge,dispatch:a,projectProperty:ie.getIn([0,"projectProperty"]),isCopy:O}),r.default.createElement(c.Row,{className:"lrls-card lrls-type",style:{display:ze||!He.size&&"STATE_GGFYFT"!==M||!Ve.showJr?"none":""}},r.default.createElement("span",null,"关联核销"),r.default.createElement("span",{className:"lrls-placeholder",onClick:function(){a(E.changeLrlsData(["views","showJrPage"],!0))}},"选择核销流水 ",r.default.createElement(c.Icon,{type:"arrow-right"}))),r.default.createElement(c.Row,{className:"ylls-card yysr-carryover lrls-button-wrap",style:{display:"LB_ZCWJZZS"==B&&He.size?"":"none"}},r.default.createElement("div",null,r.default.createElement("div",null,"销项税-流水数：",qe,"条；合计税额：",r.default.createElement(c.Amount,{showZero:!0},Qe)),r.default.createElement("div",null,"进项税-流水数：",We,"条；合计税额：",r.default.createElement(c.Amount,{showZero:!0},Ke))),r.default.createElement(c.Row,null,r.default.createElement("span",{className:"lrls-button",onClick:function(){a(E.changeLrlsData(["views","showJrPage"],!0))}},"查看"))),r.default.createElement(s.default,{formPage:"EditRunning",className:"",dispatch:a,enCanUse:et,editPermission:L,enclosureList:nt,showPzfj:!1,checkMoreFj:tt,label:at.toJS(),previewImageList:rt,showckpz:!1,uploadFiles:function(e){a(E.uploadFiles.apply(E,function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(e)))},getUploadGetTokenFetch:function(){a(E.getUploadGetTokenFetch())},getLabelFetch:function(){return a(E.getLabelFetch())},deleteUploadImgUrl:function(e){return a(E.deleteUploadFJUrl(e))},changeTagName:function(e,t){return a(E.changeTagName(e,t))},uploadKeyJson:lt,history:n})),R?r.default.createElement(d.default,{categoryType:B,isModify:j}):null,r.default.createElement(c.PopUp,{title:"流水号："+U+"号已存在，您可以：",onCancel:function(){return e.setState({autoEncode:"true",codeRepeatModal:!1})},visible:S,footerVisible:!1,footer:[r.default.createElement("span",{key:"cancel",onClick:function(){return e.setState({autoEncode:"true",codeRepeatModal:!1})}},"取消"),r.default.createElement("span",{key:"sure",onClick:function(){e.setState({codeRepeatModal:!1}),a(E.changeLrlsData(["oriTemp","encodeType"],T)),a(E.saveEditRunning(!1))}},"确定")]},r.default.createElement("div",{className:"code-repeat-select"},r.default.createElement(c.Radio,{list:C,value:T,onChange:function(t){e.setState({autoEncode:t})}}))),r.default.createElement(c.ButtonGroup,{style:{borderTop:"1px solid #D8D8D8"}},r.default.createElement(c.Button,{disabled:!L,onClick:function(){"LB_HOME"!=B?a(E.saveEditRunning(!1,ot)):g.Alert("请选择类别")}},r.default.createElement(c.Icon,{type:"save"}),r.default.createElement("span",null,"保存")),r.default.createElement(c.Button,{disabled:!L,onClick:function(){"LB_HOME"!=B?a(E.saveEditRunning(!0,ot)):g.Alert("请选择类别")}},r.default.createElement(c.Icon,{type:"new"}),r.default.createElement("span",null,"保存并新增"))))}}]),t}())||n;t.default=L},1740:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CarryoverYyzc=t.Poundage=t.AccountMoreCom=t.CurrentCom=t.SingleProjectCom=t.StockCom=t.CarryoverCom=t.PropertyCostCom=t.HandleCategory=t.HandleType=t.HxCom=t.CleanCom=t.BillCom=t.AmountCom=t.CategoryCom=t.RadioCom=t.Account=void 0;var n=b(a(1304)),l=b(a(1741)),r=b(a(1742)),o=b(a(1743)),i=b(a(1758)),c=b(a(1759)),u=b(a(1760)),s=b(a(1761)),d=b(a(1762)),m=b(a(1763)),f=b(a(1764)),p=b(a(1765)),g=b(a(1766)),y=b(a(1767)),h=b(a(1483)),E=b(a(1768)),v=b(a(1769));function b(e){return e&&e.__esModule?e:{default:e}}t.Account=n.default,t.RadioCom=l.default,t.CategoryCom=r.default,t.AmountCom=o.default,t.BillCom=i.default,t.CleanCom=c.default,t.HxCom=u.default,t.HandleType=s.default,t.HandleCategory=d.default,t.PropertyCostCom=m.default,t.CarryoverCom=f.default,t.StockCom=p.default,t.SingleProjectCom=g.default,t.CurrentCom=y.default,t.AccountMoreCom=h.default,t.Poundage=E.default,t.CarryoverYyzc=v.default},1741:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=d(a(183)),s=d(a(1060));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.isModify,a=e.dispatch,n=e.oriTemp,l=e.isOpenedWarehouse,r=e.openQuantity,d=e.projectShareType,m=e.isCopy,f=n.get("oriState"),p=n.get("categoryType"),g=n.getIn([u.categoryTypeObj[p],"beAccrued"]),y=t&&!n.get("canBeModifyCategory");m&&(y=!1);var h=[],E=[],v=!1;switch(p){case"LB_ZSKX":v=!0,h=[{key:"STATE_ZS_SQ",value:"收取"},{key:"STATE_ZS_TH",value:"退还"}];break;case"LB_ZFKX":v=!0,h=[{key:"STATE_ZF_FC",value:"付出"},{key:"STATE_ZF_SH",value:"收回"}];break;case"LB_JK":"JR_HANDLE_CHLX"===n.get("handleType")&&(v=!0,h=[{key:"STATE_JK_JTLX",value:"计提利息",disabled:!g,message:"流水设置中未启用"},{key:"STATE_JK_ZFLX",value:"支付利息"}]);break;case"LB_TZ":var b=n.get("handleType"),_=n.get("propertyInvest");"JR_HANDLE_QDSY"===b&&(v=!0,h=[{key:"STATE_TZ_JTGL",value:"计提股利",disabled:!g,message:"流水设置中未启用"},{key:"STATE_TZ_SRGL",value:"收入股利"}],"SX_ZQ"==_&&(h=[{key:"STATE_TZ_JTLX",value:"计提利息",disabled:!g,message:"流水设置中未启用"},{key:"STATE_TZ_SRLX",value:"收入利息"}]));break;case"LB_ZB":"JR_HANDLE_LRFP"===n.get("handleType")&&(v=!0,h=[{key:"STATE_ZB_LRFP",value:"利润分配",disabled:!g,message:"流水设置中未启用"},{key:"STATE_ZB_ZFLR",value:"支付利润"}]);break;case"LB_YYSR":v=!0;var S=n.getIn([u.categoryTypeObj[p],"beDeposited"]),T=n.getIn([u.categoryTypeObj[p],"beSellOff"]);h=[{key:"STATE_YYSR_DJ",value:"预收",disabled:!S,message:"流水设置中未启用"},{key:"STATE_YYSR_XS",value:"销售"},{key:"STATE_YYSR_TS",value:"退销",disabled:!T,message:"流水设置中未启用"}];break;case"LB_YYZC":v=!0;var C=n.getIn([u.categoryTypeObj[p],"beDeposited"]),L=n.getIn([u.categoryTypeObj[p],"beSellOff"]);h=[{key:"STATE_YYZC_DJ",value:"预付",disabled:!C,message:"流水设置中未启用"},{key:"STATE_YYZC_GJ",value:"购进"},{key:"STATE_YYZC_TG",value:"退购",disabled:!L,message:"流水设置中未启用"}];break;case"LB_FYZC":v=!0;var N=n.getIn([u.categoryTypeObj[p],"beDeposited"]),w=n.getIn([u.categoryTypeObj[p],"beManagemented"]);h=[{key:"STATE_FY_DJ",value:"预付",disabled:!w||!N,message:"流水设置中未启用"},{key:"STATE_FY",value:"发生"}];break;case"LB_SFZC":v=!0;var I=n.get("propertyTax"),A=n.get("acTax").get("beInAdvance");(({SX_ZZS:function(){h=[{key:"STATE_SF_YJZZS",value:"预缴",disabled:!A,message:"流水设置中未启用"},{key:"STATE_SF_ZCWJZZS",value:"转出未交"},{key:"STATE_SF_JN",value:"缴纳"}]},SX_GRSF:function(){v=!1,h=[{key:"STATE_SF_JN",value:"缴纳"}]},SX_QTSF:function(){h=[{key:"STATE_SF_JT",value:"计提",disabled:!g,message:"流水设置中未启用"},{key:"STATE_SF_JN",value:"缴纳"}]},SX_QYSDS:function(){h=[{key:"STATE_SF_JT",value:"计提",disabled:!g,message:"流水设置中未启用"},{key:"STATE_SF_JN",value:"缴纳"}]}})[I]||function(){return null})(),"STATE_SF_SFJM"==f&&(h=[{key:"STATE_SF_SFJM",value:"减免"}]);break;case"LB_XCZC":v=!0,({SX_GZXJ:function(){h=[{key:"STATE_XC_JT",value:"计提",disabled:!g,message:"流水设置中未启用"},{key:"STATE_XC_FF",value:"发放"}],"STATE_XC_DK"==f&&(h=[{key:"STATE_XC_DK",value:"代扣"}])},SX_SHBX:function(){h=[{key:"STATE_XC_JT",value:"计提",disabled:!g,message:"流水设置中未启用"},{key:"STATE_XC_JN",value:"缴纳"}],"STATE_XC_DJ"==f&&(h=[{key:"STATE_XC_DJ",value:"代缴"}])},SX_ZFGJJ:function(){h=[{key:"STATE_XC_JT",value:"计提",disabled:!g,message:"流水设置中未启用"},{key:"STATE_XC_JN",value:"缴纳"}],"STATE_XC_DJ"==f&&(h=[{key:"STATE_XC_DJ",value:"代缴"}])},SX_FLF:function(){var e=n.getIn([u.categoryTypeObj[p],"beWelfare"]);h=[{key:"STATE_XC_JT",value:"计提",disabled:!e,message:"流水设置中未启用"},{key:"STATE_XC_FF",value:"支付"}]},SX_QTXC:function(){h=[{key:"STATE_XC_JT",value:"计提",disabled:!g,message:"流水设置中未启用"},{key:"STATE_XC_FF",value:"发放"}]}}[n.get("propertyPay")]||function(){return null})();break;case"LB_KJFP":v=!0,h=[{key:"STATE_KJFP_XS",value:"销售开票"},{key:"STATE_KJFP_TS",value:"退售开票"}];break;case"LB_FPRZ":v=!0,h=[{key:"STATE_FPRZ_CG",value:"采购发票认证"},{key:"STATE_FPRZ_TG",value:"退购发票认证"}];break;case"LB_JZCB":v=!0,h=[{key:"STATE_YYSR_XS",value:"销售结转"},{key:"STATE_YYSR_TS",value:"退销转回"},{key:"STATE_YYSR_ZJ",value:"直接结转"}];break;case"LB_CHYE":v=l,h=[{key:"STATE_CHYE_CK",value:"按仓库"},{key:"STATE_CHYE_CH",value:"按存货"}];break;case"LB_CHZZ":v=!0,h=[{key:"STATE_CHZZ_ZZCX",value:"组装拆卸"}],r&&h.push({key:"STATE_CHZZ_ZZD",value:"组装单组装"});break;case"LB_GGFYFT":v=!0,d.map(function(e){var t=e.get("oriState"),a=e.get("typeName");"STATE_FZSCCB"==t&&(a="辅助成本"),"STATE_GGFYFT"==t&&(a="损益项目"),h.push({key:t,value:a})}),h.length>3&&(E=h.splice(3,2));break;case"LB_XMJZ":v=!0;var k=n.getIn(["projectCardList",0,"projectProperty"]);h=[{key:"STATE_XMJZ_JZRK",value:"结转入库"},{key:"STATE_XMJZ_XMJQ",value:"项目结清"}],"XZ_CONSTRUCTION"==k&&(h=[{key:"STATE_XMJZ_QRSRCB",value:"确认收入成本"},{key:"STATE_XMJZ_XMJQ",value:"项目结清"}])}var O=function(e){if(e!=f){if(m)return a(s.changeLrlsOriState(e));if(t){var l=n.getIn([u.categoryTypeObj[p],"contactsManagement"]);a(s.changeLrlsData(["oriTemp","oriState"],e)),a(s.changeLrlsData(["oriTemp","currentCardList"],(0,i.fromJS)([])));var r=n.get("billList");return r&&0==r.size&&a(s.changeLrlsData(["oriTemp","billList"],(0,i.fromJS)([{billType:"bill_other",billState:"",taxRate:"",tax:""}]))),void(l&&a(s.getCardList("contactsRange")))}a(s.changeLrlsOriState(e))}};return v?o.default.createElement("div",null,o.default.createElement(c.Radio,{disabled:y,list:h,value:f,onChange:function(e){O(e)}}),E.length?o.default.createElement(c.Radio,{className:"radio-list-double",disabled:y,list:E,value:f,onChange:function(e){O(e)}}):null):null}}]),t}();t.default=m},1742:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),r=u(l),o=(a(9),u(a(2)),a(16)),i=(c(a(25)),c(a(1060)));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={visible:!1},s(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),n(t,[{key:"componentDidMount",value:function(){var e=sessionStorage.getItem("prevPage");["home","searchrunning","runningpreview"].includes(e)&&this.setState({visible:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.disabled,n=t.isModify,l=t.lastCategory,c=t.categoryUuid,u=t.categoryName,s=t.dispatch,d=t.scale,m=(t.categoryType,t.isOpenedWarehouse),f=t.openQuantity,p=this.state.visible,g=l.toJS();return g.map(function(e){"内部核算"==e.uuid&&(e.childList=e.childList.filter(function(e){var t=!0;return"LB_ZCWJZZS"==e.categoryType&&(t=!1),"small"==d&&"LB_FPRZ"==e.categoryType&&(t=!1),"isEnable"==d&&["LB_FPRZ","LB_KJFP"].includes(e.categoryType)&&(t=!1),"LB_CHDB"==e.categoryType&&(t=m),"LB_CHYE"==e.categoryType&&(t=f||m),"LB_SFGL"==e.categoryType&&(t=!1),["small","isEnable"].includes(d)&&"LB_JXSEZC"==e.categoryType&&(t=!1),t}))}),n&&!a&&(g=g.filter(function(e){return"LB_FYZC"==e.categoryType})),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(g),r.default.createElement(o.Row,{className:"lrls-type"},r.default.createElement("label",null,"流水类别:"),r.default.createElement(o.ChosenPicker,{visible:p,disabled:a,district:g,value:c,onChange:function(t){if(n||s(i.changeLrlsEnclosureList()),t.canShow){var a=t.uuid;s(i.getCardDetail(a,n))}else s(i.toManageType(t));e.setState({visible:!1})},onCancel:function(){e.setState({visible:!1})}},r.default.createElement(o.Row,null,r.default.createElement("span",{style:{color:"请选择类别"==u?"#ccc":""}},u),r.default.createElement(o.Icon,{type:"triangle",style:{color:a?"#ccc":""}}))))}}]),t}();t.default=d},1743:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),r=N(l),o=a(9),i=a(16),c=N(a(1304)),u=N(a(1744)),s=N(a(1745)),d=N(a(1746)),m=N(a(1747)),f=N(a(1748)),p=N(a(1749)),g=N(a(1750)),y=N(a(1751)),h=N(a(1753)),E=N(a(1754)),v=N(a(1755)),b=N(a(1756)),_=N(a(1757)),S=a(13),T=(L(a(25)),L(a(10)),L(a(183))),C=L(a(1060));function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function N(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),n(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.oriTemp,n=e.accountList,l=e.accounts,L=e.isModify,N=e.pendingStrongList,w=e.stockList,I=e.stockCardList,A=e.projectCardList,k=e.projectList,O=e.hasSelect,j=e.history,R=e.isOpenedWarehouse,P=e.warehouseList,J=e.stockCategoryList,D=e.commonCardList,Z=e.stockCardOtherList,x=e.projectCategoryList,U=e.commonProjectList,M=e.cardAllList,B=a.get("categoryType"),X=(a.get("beProject"),a.get("usedProject"),a.get("oriState")),Y=a.get("amount"),F=a.getIn([T.categoryTypeObj[B],"beManagemented"]),H=a.get("isFullPayment"),G="SX_HW"==a.get("propertyCarryover"),z=null;switch(B){case"LB_YYSR":var V=a.get("currentAmount"),q=a.get("preAmount"),W=a.get("payableAmount"),Q=a.get("offsetAmount"),K=(a.get("stockStrongList")?a.get("stockStrongList"):(0,o.fromJS)([]),a.get("usedAccounts")),$=!1,ee=!1,te="总金额:",ae=!1,ne=!0;(({STATE_YYSR_DJ:function(){ee=!0,te="预收金额:"},STATE_YYSR_XS:function(){ee=!F,H&&L&&(ee=!0),!H&&L&&(ne=!1),$=!(!((ae=q>0&&!K)||F&&!K)||L)},STATE_YYSR_TS:function(){ee=!F,H&&L&&(ee=!0),$=!(!((ae=(W&&!K)>0)||F&&!K)||L),ne=!1}})[X]||function(){return null})(),z=r.default.createElement("div",{className:"lrls-card",style:{display:"",marginBottom:K?"0":"",paddingBottom:K?"0":""}},r.default.createElement(i.Row,{style:{display:""},className:"yysr-amount"},r.default.createElement("label",null,te),(G||a.get("usedStock"))&&"STATE_YYSR_DJ"!=X?r.default.createElement(i.Amount,{showZero:!0},Y):r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:Y,onChange:function(e){/^\d*\.?\d{0,2}$/g.test(e)&&t("STATE_YYSR_DJ"==X?C.changeLrlsData(["oriTemp","amount"],e):C.changeLrlsAmount(e))}}),r.default.createElement("label",{className:"accountSwitch",style:{display:ne?"":"none"}},r.default.createElement(i.SwitchText,{checked:K,checkedChildren:"多账户",unCheckedChildren:"多账户",className:"threeTextSwitch",onChange:function(){t(C.changeLrlsData(["oriTemp","usedAccounts"],!K)),K||(1==l.size&&t(C.accountMoreCard("add","",1)),t(C.changeLrlsData(["oriTemp","offsetAmount"],"")))}}))),r.default.createElement(i.Row,{className:"yysr-amount lrls-margin-top",style:{display:!K&&ee?"":"none"}},r.default.createElement("label",null,"账户："),r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l})),$?r.default.createElement("div",{className:ae||!K?"lrls-margin-top":""},r.default.createElement(i.Row,{className:"lrls-more-card",style:{display:"none"}},r.default.createElement("span",null,"多账户"),r.default.createElement("div",{className:"accountSwitch"},r.default.createElement(i.SwitchText,{checked:K,checkedChildren:"多账户",unCheckedChildren:"多账户",className:"threeTextSwitch",onChange:function(){t(C.changeLrlsData(["oriTemp","usedAccounts"],!K)),K||(1==l.size&&t(C.accountMoreCard("add","",1)),t(C.changeLrlsData(["oriTemp","offsetAmount"],"")))}}))),r.default.createElement(i.Row,{style:{display:ae?"":"none"},className:""},r.default.createElement("div",{style:{paddingLeft:".6rem"},className:"lrls-placeholder"},r.default.createElement("span",{style:{marginRight:".2rem"}},"预收款: ",r.default.createElement(i.Amount,{showZero:!0},q)),r.default.createElement("span",null,"应收款: ",r.default.createElement(i.Amount,{showZero:!0},W))),r.default.createElement(i.Row,{className:"yysr-amount lrls-margin-top"},r.default.createElement("label",null,"STATE_YYSR_XS"==X?"预收抵扣:":"应收抵扣:"),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:Q,onChange:function(e){t(C.changeLrlsData(["oriTemp","offsetAmount"],e))}}))),r.default.createElement(i.Row,{className:ae||!K?"yysr-amount lrls-margin-top":"yysr-amount",style:{display:K?"none":""}},r.default.createElement("label",null,"STATE_YYSR_XS"==X?"本次收款:":"本次付款:"),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:V,onChange:function(e){t(C.changeLrlsData(["oriTemp","currentAmount"],e))},onFocus:function(){var e=Y-Q;t(C.changeLrlsData(["oriTemp","currentAmount"],e>0?e:""))}}),V>0?r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l}):null)):null);break;case"LB_YYZC":var le=a.get("currentAmount"),re=a.get("preAmount"),oe=a.get("payableAmount"),ie=a.get("offsetAmount"),ce=a.get("usedAccounts"),ue=!1,se=!1,de="总金额:",me=!1,fe=!0;(({STATE_YYZC_DJ:function(){se=!0,de="预付金额:"},STATE_YYZC_GJ:function(){se=!F,H&&L&&(se=!0),!H&&L&&(fe=!1),ue=!(!((me=re>0&&!ce)||F&&!ce)||L)},STATE_YYZC_TG:function(){se=!F,H&&L&&(se=!0),ue=!(!F||L),me=oe>0,fe=!1}})[X]||function(){return null})(),z=r.default.createElement("div",{className:"lrls-card",style:{display:"",marginBottom:ce?"0":"",paddingBottom:ce?"0":""}},r.default.createElement(i.Row,{className:"yysr-amount",style:{display:""}},r.default.createElement("label",null,de),G&&"STATE_YYZC_DJ"!=X?r.default.createElement(i.Amount,{showZero:!0},Y):r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:Y,onChange:function(e){t("STATE_YYSR_DJ"==X?C.changeLrlsData(["oriTemp","amount"],e):C.changeLrlsAmount(e))}}),r.default.createElement("label",{className:"accountSwitch",style:{display:fe?"":"none"}},r.default.createElement(i.SwitchText,{checked:ce,checkedChildren:"多账户",unCheckedChildren:"多账户",className:"threeTextSwitch",onChange:function(){t(C.changeLrlsData(["oriTemp","usedAccounts"],!ce)),ce||(1==l.size&&t(C.accountMoreCard("add","",1)),t(C.changeLrlsData(["oriTemp","offsetAmount"],"")))}}))),r.default.createElement(i.Row,{className:"yysr-amount lrls-margin-top",style:{display:!ce&&se?"":"none"}},r.default.createElement("label",null,"账户："),r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l})),ue?r.default.createElement("div",{className:me||!ce?"lrls-margin-top":""},r.default.createElement(i.Row,{className:"lrls-more-card",style:{display:"none"}},r.default.createElement("span",null,"多账户"),r.default.createElement("div",{className:"accountSwitch"},r.default.createElement(i.SwitchText,{checked:ce,checkedChildren:"多账户",unCheckedChildren:"多账户",className:"threeTextSwitch",onChange:function(){t(C.changeLrlsData(["oriTemp","usedAccounts"],!ce)),ce||(1==l.size&&t(C.accountMoreCard("add","",1)),t(C.changeLrlsData(["oriTemp","offsetAmount"],"")))}}))),r.default.createElement(i.Row,{style:{display:me?"":"none"},className:""},r.default.createElement("div",{style:{paddingLeft:".6rem"},className:"lrls-placeholder"},r.default.createElement("span",{style:{marginRight:".2rem"}},"预付款: ",r.default.createElement(i.Amount,{showZero:!0},re)),r.default.createElement("span",null,"应付款: ",r.default.createElement(i.Amount,{showZero:!0},oe))),r.default.createElement(i.Row,{className:"yysr-amount margin-top-bot"},r.default.createElement("label",null,"STATE_YYZC_TG"==X?"应付抵扣:":"预付抵扣:"),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:ie,onChange:function(e){t(C.changeLrlsData(["oriTemp","offsetAmount"],e))}}))),r.default.createElement(i.Row,{className:me||!ce?"yysr-amount lrls-margin-top":"yysr-amount",style:{display:ce?"none":""}},r.default.createElement("label",null,"STATE_YYZC_TG"==X?"本次收款:":"本次付款:"),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:le,onChange:function(e){t(C.changeLrlsData(["oriTemp","currentAmount"],e))},onFocus:function(){var e=Y-ie;t(C.changeLrlsData(["oriTemp","currentAmount"],e>0?e:""))}}),le>0?r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l}):null)):null);break;case"LB_FYZC":var pe=a.get("currentAmount"),ge=a.get("preAmount"),ye=a.get("payableAmount"),he=a.get("offsetAmount"),Ee=a.get("usedAccounts"),ve=!0,be=!1;"STATE_FY_DJ"==X&&(be=!0),"STATE_FY"==X&&(be=!F,H&&L&&(be=!0),!H&&L&&(ve=!1)),Number(Y)>=0||(ve=!1);var _e=!("STATE_FY"!=X||!F||Ee||L),Se=!1,Te="";Y>=0&&ge>0&&(Se=!0,Te="预付抵扣:"),Y<0&&ye>0&&(Se=!0,Te="应付抵扣:"),z=r.default.createElement("div",{className:"lrls-card",style:{marginBottom:Ee?"0":"",paddingBottom:Ee?"0":""}},r.default.createElement(i.Row,{className:"yysr-amount"},r.default.createElement("label",null,"STATE_FY_DJ"==X?"预付金额:":"金额: "),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:"STATE_FY_DJ"!=X,placeholder:"填写金额",value:Y,onChange:function(e){var a=/^[-\d]\d*\.?\d{0,2}$/g;"STATE_FY_DJ"==X&&(a=/^\d*\.?\d{0,2}$/g),(a.test(e)||""==e)&&("STATE_FY_DJ"==X?t(C.changeLrlsData(["oriTemp","amount"],e)):(t(C.changeLrlsAmount(e)),Number(e)>=0||t(C.changeLrlsData(["oriTemp","usedAccounts"],!1))))}}),r.default.createElement("label",{className:"accountSwitch",style:{display:ve?"":"none"}},r.default.createElement(i.SwitchText,{checked:Ee,checkedChildren:"多账户",unCheckedChildren:"多账户",className:"threeTextSwitch",onChange:function(){t(C.changeLrlsData(["oriTemp","usedAccounts"],!Ee)),Ee||(1==l.size&&t(C.accountMoreCard("add","",1)),t(C.changeLrlsData(["oriTemp","offsetAmount"],"")))}}))),r.default.createElement(i.Row,{className:"yysr-amount lrls-margin-top",style:{display:!Ee&&be?"":"none"}},r.default.createElement("label",null,"账户："),r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l})),r.default.createElement(i.Row,{className:!be||!Se&&Ee?"":"lrls-margin-top",style:{display:_e?"":"none"}},r.default.createElement(i.Row,{style:{display:Se?"":"none"}},r.default.createElement("div",{style:{paddingLeft:".6rem"},className:"lrls-placeholder"},r.default.createElement("span",{style:{marginRight:".2rem"}},"预付款: ",r.default.createElement(i.Amount,{showZero:!0},ge)),r.default.createElement("span",null,"应付款: ",r.default.createElement(i.Amount,{showZero:!0},ye))),r.default.createElement(i.Row,{className:"yysr-amount margin-top-bot"},r.default.createElement("label",null,Te),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:he,onChange:function(e){t(C.changeLrlsData(["oriTemp","offsetAmount"],e))}}))),r.default.createElement(i.Row,{className:Se||!Ee?"yysr-amount lrls-margin-top":"yysr-amount",style:{display:Ee?"none":""}},r.default.createElement("label",null,Y<0?"本次收款":"本次付款",": "),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:pe,onChange:function(e){t(C.changeLrlsData(["oriTemp","currentAmount"],e))},onFocus:function(){var e=Math.abs(Y)-he;t(C.changeLrlsData(["oriTemp","currentAmount"],e>0?e:""))}}),pe>0?r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l}):null)));break;case"LB_XCZC":z=r.default.createElement(u.default,{isModify:L,dispatch:t,oriTemp:a,accountList:n,accounts:l});break;case"LB_SFZC":z=r.default.createElement(s.default,{isModify:L,dispatch:t,oriTemp:a,accountList:n,accounts:l});break;case"LB_CQZC":var Ce=a.get("beCleaning"),Le=a.get("handleType"),Ne=a.get("currentAmount"),we=Number(Ne)>0||!F;L&&(we=!(!H&&F));var Ie="";Ie="JR_HANDLE_GJ"==Le?Y>=0?"本次付款：":"本次收款：":Y>=0?"本次收款：":"本次付款：",z=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(i.Row,{className:"yysr-amount"},r.default.createElement("label",null,"金额："),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"填写金额",value:Y,onChange:function(e){(/^[-\d]\d*\.?\d{0,2}$/g.test(e)||""==e)&&(t(C.changeLrlsAmount(e)),!L&&F&&"-"!=e&&t(C.changeLrlsData(["oriTemp","currentAmount"],Math.abs(e)))),Ce&&t(C.autoCqzcCzAmount())}})),r.default.createElement(i.Row,{className:"yysr-amount lrls-margin-top",style:{display:!L&&F?"":"none"}},r.default.createElement("label",null,Ie),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:Ne,onChange:function(e){t(C.changeLrlsData(["oriTemp","currentAmount"],e))}})),r.default.createElement(i.Row,{className:"yysr-amount lrls-margin-top",style:{display:we?"":"none"}},r.default.createElement("label",null,"账户："),r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l})));break;case"LB_YYWSR":case"LB_YYWZC":var Ae=a.get("currentAmount"),ke=Number(Ae)>0||!F&&Number(Y)>0;L&&(ke=!!(H||!F&&Number(Y)>0)),z=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(i.Row,{className:"yysr-amount"},r.default.createElement("label",null,"金额："),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:Y,onChange:function(e){t(C.changeLrlsData(["oriTemp","amount"],e)),!L&&F&&t(C.changeLrlsData(["oriTemp","currentAmount"],e))}})),r.default.createElement(i.Row,{className:"yysr-amount lrls-margin-top",style:{display:!L&&F?"":"none"}},r.default.createElement("label",null,"LB_YYWSR"==B?"本次收款：":"本次付款："),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:Ae,onChange:function(e){t(C.changeLrlsData(["oriTemp","currentAmount"],e))},onFocus:function(){t(C.changeLrlsData(["oriTemp","currentAmount"],Y))}})),r.default.createElement(i.Row,{className:"yysr-amount lrls-margin-top",style:{display:ke?"":"none"}},r.default.createElement("label",null,"账户："),r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l})));break;case"LB_ZSKX":case"LB_ZFKX":z=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(i.Row,{className:"yysr-amount"},r.default.createElement("label",null,"金额:"),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:Y,onChange:function(e){t(C.changeLrlsData(["oriTemp","amount"],e))}}),r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l})));break;case"LB_JK":z=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(i.Row,{className:"yysr-amount"},r.default.createElement("label",null,"金额："),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:Y,onChange:function(e){t(C.changeLrlsData(["oriTemp","amount"],e))}}),"STATE_JK_JTLX"!=X?r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l}):null));break;case"LB_TZ":var Oe="STATE_TZ_JTGL"!=X&&"STATE_TZ_JTLX"!=X;z=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(i.Row,{className:"yysr-amount"},r.default.createElement("label",null,"金额："),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:Y,onChange:function(e){t(C.changeLrlsData(["oriTemp","amount"],e))}}),Oe?r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l}):null));break;case"LB_ZB":z=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(i.Row,{className:"yysr-amount"},r.default.createElement("label",null,"金额："),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:Y,onChange:function(e){t(C.changeLrlsData(["oriTemp","amount"],e))}}),"STATE_ZB_LRFP"!=X?r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l}):null));break;case"LB_ZZ":z=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(i.Row,{className:"yysr-amount"},r.default.createElement("label",null," 金额: "),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:Y,onChange:function(e){t(C.changeLrlsData(["oriTemp","amount"],e))}})),r.default.createElement(i.Row,{className:"yysr-amount lrls-home-account margin-top-bot"},r.default.createElement("label",null," 转出账户: "),r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l,accountStatus:"ACCOUNT_STATUS_FROM"})),r.default.createElement(i.Row,{className:"yysr-amount lrls-home-account"},r.default.createElement("label",null," 转入账户: "),r.default.createElement(c.default,{dispatch:t,accountList:n,accounts:l,accountStatus:"ACCOUNT_STATUS_TO"})));break;case"LB_SFGL":z=r.default.createElement(b.default,{dispatch:t,history:j,oriTemp:a,isModify:L,accounts:l,accountList:n,pendingStrongList:N});break;case"LB_JZCB":var je=a.get("relationCategoryUuid");z=r.default.createElement(d.default,{history:j,dispatch:t,oriState:X,stockCardList:I,stockList:w,isModify:L,isOpenedWarehouse:R,stockCategoryList:J,commonCardList:D,relationCategoryUuid:je});break;case"LB_ZCWJZZS":var Re=a.get("handleMonth"),Pe=0,Je=0;N.forEach(function(e){"JR_STRONG_STAY_ZCXX"===e.get("pendingStrongType")?(0,Pe+=e.get("taxAmount")):(0,Je+=e.get("taxAmount"))}),z=r.default.createElement("div",{className:"lrls-card"},r.default.createElement("div",{className:"lrls-more-card lrls-jzsy"},r.default.createElement("label",null,"处理税额月份:"),r.default.createElement("div",{className:"antd-single-picker"},r.default.createElement(i.MonthPicker,{disabled:L,value:Re,format:"YYYY_MM",maxDate:new Date,onChange:function(e){var a=new S.DateLib(e).valueOf().slice(0,7);t(C.changeLrlsData(["oriTemp","handleMonth"],a)),t(C.getWjzzsList(a))}},r.default.createElement(i.Row,{className:"lrls-padding lrls-category"},Re?r.default.createElement("span",null," ",Re," "):r.default.createElement("span",{className:"lrls-placeholder"},"点击选择处理税额月份"),r.default.createElement(i.Icon,{type:"triangle"}))))),r.default.createElement("div",{className:"lrls-more-card lrls-margin-top"},r.default.createElement("span",null,"未交税额："),r.default.createElement(i.Amount,{showZero:!0},Number(Pe)-Number(Je))));break;case"LB_JZSY":var De=a.get("assets"),Ze=De.get("originalAssetsAmount"),xe=De.get("depreciationAmount");z=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(i.Row,null,r.default.createElement("label",{style:{marginRight:".15rem"}},Y>=0?"净收益金额：":"净损失金额："),r.default.createElement(i.Amount,{showZero:!0},Math.abs(Y))),r.default.createElement(i.Row,{className:"yysr-amount margin-top-bot lrls-jzsy"},r.default.createElement("label",null,"资产原值:"),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"请填写资产原值",value:Ze,onChange:function(e){t(C.changeLrlsData(["oriTemp","assets","originalAssetsAmount"],e)),t(C.autoJzsyAmount())}})),r.default.createElement(i.Row,{className:"yysr-amount lrls-jzsy"},r.default.createElement("label",null,"累计折旧余额:"),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"请填写累计折旧余额",value:xe,onChange:function(e){t(C.changeLrlsData(["oriTemp","assets","depreciationAmount"],e)),t(C.autoJzsyAmount())}})));break;case"LB_ZJTX":z=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(i.Row,{className:"yysr-amount"},r.default.createElement("label",null,"金额:"),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:Y,onChange:function(e){t(C.changeLrlsData(["oriTemp","amount"],e))}})));break;case"LB_GGFYFT":z=r.default.createElement(h.default,{projectCardList:A,projectList:k,dispatch:t,oriState:X,hasSelect:O,projectCategoryList:x,commonProjectList:U});break;case"LB_KJFP":var Ue=a.get("jrTaxAmount"),Me=a.get("jrAmount"),Be=a.get("inputTax"),Xe=a.get("taxTotal");z=r.default.createElement(_.default,{dispatch:t,jrTaxAmount:Ue,jrAmount:Me,amount:Y,pendingStrongList:N,isModify:L,inputTax:Be,taxTotal:Xe});break;case"LB_FPRZ":var Ye=a.get("jrTaxAmount"),Fe=a.get("jrAmount"),He=[],Ge=!0;N.map(function(e){e.get("beSelect")&&(He.push("1"),e.get("beOpened")&&(Ge=!1))});var ze=He.length>1,Ve=Ye;ze||(Ve=Ye*Y/Fe),z=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(i.Row,{className:"yysr-amount"},r.default.createElement("label",null,"金额："),r.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",disabled:ze,placeholder:"填写金额",value:Y,onChange:function(e){t(C.changeLrlsData(["oriTemp","amount"],e))}})),r.default.createElement("div",{className:"lrls-placeholder lrls-margin-top",style:{paddingLeft:".6rem",display:Ge?"":"none"}},r.default.createElement("span",{style:{marginRight:".2rem"}},"价税合计: ",r.default.createElement(i.Amount,{showZero:!0},Ve))));break;case"LB_CHDB":var qe=a.get("warehouseCardList");z=r.default.createElement(m.default,{dispatch:t,history:j,stockCardList:I,stockList:w,isModify:L,warehouseList:P,warehouseCardList:qe,stockCategoryList:J,commonCardList:D});break;case"LB_CHYE":z=r.default.createElement(f.default,{dispatch:t,history:j,stockCardList:I,stockList:w,isModify:L,oriState:X,isOpenedWarehouse:R,warehouseList:P,stockCategoryList:J,commonCardList:D});break;case"LB_JXSEZC":a.get("warehouseCardList");var We=a.get("usedStock"),Qe=a.get("stockRange");z=r.default.createElement(p.default,{dispatch:t,stockCardList:I,stockList:w,isModify:L,warehouseList:P,usedStock:We,amount:Y,isOpenedWarehouse:R,stockRange:Qe,stockCategoryList:J,commonCardList:D});break;case"LB_CHZZ":"STATE_CHZZ_ZZCX"==X&&(z=r.default.createElement(g.default,{history:j,dispatch:t,oriState:X,stockCardList:I,stockCardOtherList:Z,stockList:w,isOpenedWarehouse:R,stockCategoryList:J,commonCardList:D})),"STATE_CHZZ_ZZD"==X&&(z=r.default.createElement(y.default,{history:j,dispatch:t,stockCardList:I,isOpenedWarehouse:R,stockCategoryList:J,cardAllList:M}));break;case"LB_CHTRXM":z=r.default.createElement(E.default,{dispatch:t,stockCardList:I,stockList:w,history:j,isOpenedWarehouse:R,stockCategoryList:J,commonCardList:D});break;case"LB_XMJZ":var Ke=a.get("currentAmount");z=r.default.createElement(v.default,{dispatch:t,stockCardList:I,stockList:w,isModify:L,isOpenedWarehouse:R,history:j,stockCategoryList:J,commonCardList:D,jrAmount:a.get("jrAmount"),oriState:X,amount:Y,currentAmount:Ke,projectProperty:A.getIn([0,"projectProperty"])})}return z}}]),t}();t.default=w},1744:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),r=m(l),o=(a(9),a(16)),i=m(a(1304)),c=a(13),u=d(a(183)),s=d(a(1060));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={bePersonAccumulation:!1,bePersonSocialSecurity:!1,beIncomeTax:!1},f(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),n(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.oriTemp,l=t.accountList,d=t.accounts,m=t.isModify,f=this.state,p=f.bePersonAccumulation,g=f.bePersonSocialSecurity,y=f.beIncomeTax,h=n.get("categoryType"),E=n.get("oriState"),v=(n.get("usedProject"),n.get("propertyPay")),b=n.get("pendingStrongList").filter(function(e){return e.get("beSelect")}),_=n.getIn([u.categoryTypeObj[h],"beAccrued"]),S=n.getIn(["acPayment","beWithholding"]),T=n.getIn(["acPayment","beWithholdSocial"]),C=n.getIn(["acPayment","beWithholdTax"]),L=n.get("amount"),N=n.get("payment"),w=n.getIn(["payment","actualAmount"]),I=N.get("personAccumulationAmount"),A=n.get("accumulationAmount"),k=N.get("personSocialSecurityAmount"),O=n.get("socialSecurityAmount"),j=N.get("incomeTaxAmount"),R=n.get("payableAmount"),P=N.get("companySocialSecurityAmount"),J=N.get("companyAccumulationAmount"),D=n.get("jrAmount"),Z=/^[-\d]\d*\.?\d{0,2}$/g,x=null;return({SX_GZXJ:function(){var t=null,u=null,f=null,h="金额",N=!1,P=null,J=null;(({STATE_XC_JT:function(){h="金额",P=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,"金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:h,value:L,onChange:function(e){a(s.changeLrlsData(["oriTemp","amount"],e))}})))},STATE_XC_FF:function(){h=_?"工资薪金":"金额",N=!!_,!!_,_?(P=m?r.default.createElement("div",{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount lrls-home-account"},r.default.createElement("label",null,D>=0?"付款金额：":"收款金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"填写金额",value:L,onChange:function(e){a(s.changeLrlsData(["oriTemp","amount"],e))}}),r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d}))):r.default.createElement("div",{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount lrls-home-account"},r.default.createElement("label",null,D>=0?"付款金额：":"收款金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"填写金额",value:w,onChange:function(e){if(0==b.size){if(Z.test(e)||""==e){if(a(s.changeLrlsData(["oriTemp","payment","actualAmount"],e)),"-"==e)return;a(s.xczcCalculateAmount(v))}}else/^\d*\.?\d{0,2}$/g.test(e)&&(a(s.changeLrlsData(["oriTemp","payment","actualAmount"],e)),a(s.xczcCalculateAmount(v)))},onFocus:function(){if(D){var e=D-I-k-j;a(s.changeLrlsData(["oriTemp","payment","actualAmount"],Math.abs((0,c.decimal)(e)))),a(s.xczcCalculateAmount(v))}}}),r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d}))),t=!m&&S?r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"lrls-more-card"},r.default.createElement("span",null,"代扣个人公积金"),r.default.createElement("div",{className:"noTextSwitch"},r.default.createElement(o.Switch,{checked:p||I,onClick:function(){p?(e.setState({bePersonAccumulation:!1}),a(s.changeLrlsData(["oriTemp","payment","personAccumulationAmount"],"")),a(s.xczcCalculateAmount(v))):e.setState({bePersonAccumulation:!0})}}))),r.default.createElement("div",{style:{display:p||I?"":"none"}},r.default.createElement(o.Row,{className:"yysr-amount lrls-margin-top"},r.default.createElement("label",null,"金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写个人部分金额",value:I,onChange:function(e){a(s.changeLrlsData(["oriTemp","payment","personAccumulationAmount"],e)),a(s.xczcCalculateAmount(v))}})),r.default.createElement("div",{style:{paddingLeft:".6rem",display:A>0?"":"none"},className:"lrls-placeholder lrls-margin-top"},"未处理金额: ",r.default.createElement(o.Amount,{showZero:!0},A)))):null,u=!m&&T?r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"lrls-more-card"},r.default.createElement("span",null,"代扣个人社保"),r.default.createElement("div",{className:"noTextSwitch"},r.default.createElement(o.Switch,{checked:g||k,onClick:function(){g?(e.setState({bePersonSocialSecurity:!1}),a(s.changeLrlsData(["oriTemp","payment","personSocialSecurityAmount"],"")),a(s.xczcCalculateAmount(v))):e.setState({bePersonSocialSecurity:!0})}}))),r.default.createElement("div",{style:{display:g||k?"":"none"}},r.default.createElement(o.Row,{className:"yysr-amount lrls-margin-top"},r.default.createElement("label",null,"金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写个人部分金额",value:k,onChange:function(e){a(s.changeLrlsData(["oriTemp","payment","personSocialSecurityAmount"],e)),a(s.xczcCalculateAmount(v))}})),r.default.createElement("div",{className:"lrls-placeholder lrls-margin-top",style:{paddingLeft:".6rem",display:O>0?"":"none"}},"未处理金额: ",r.default.createElement(o.Amount,{showZero:!0},O)))):null,f=!m&&C?r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"lrls-more-card"},r.default.createElement("span",null,"代扣个人所得税"),r.default.createElement("div",{className:"noTextSwitch"},r.default.createElement(o.Switch,{checked:y,onClick:function(){y?(e.setState({beIncomeTax:!1}),a(s.changeLrlsData(["oriTemp","payment","incomeTaxAmount"],"")),a(s.xczcCalculateAmount(v))):e.setState({beIncomeTax:!0})}}))),r.default.createElement("div",{style:{display:y||j?"":"none"}},r.default.createElement(o.Row,{className:"yysr-amount lrls-margin-top"},r.default.createElement("label",null,"金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写个人部分金额",value:j,onChange:function(e){a(s.changeLrlsData(["oriTemp","payment","incomeTaxAmount"],e)),a(s.xczcCalculateAmount(v))}})),r.default.createElement("div",{className:"lrls-placeholder lrls-margin-top",style:{paddingLeft:".6rem",display:R>0?"":"none"}},"未处理金额: ",r.default.createElement(o.Amount,{showZero:!0},R)))):null,J=r.default.createElement(o.Row,{className:"lrls-card",style:{display:(I||k||j)&&w?"":"none"}},r.default.createElement(o.Row,{className:"yysr-amount lrls-home-account"},r.default.createElement("label",null,"工资薪金："),r.default.createElement(o.Amount,{showZero:!0,className:"amount"},L)))):P=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null," 金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:h,value:L,onChange:function(e){a(s.changeLrlsData(["oriTemp","amount"],e)),"-"!=e&&N&&a(s.xczcCalculateAmount(v))}}),r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d})))},STATE_XC_DK:function(){var l=(0,c.decimal)(Number(I)+Number(k)+Number(j)),i=n.get("hxAccumulationAmount"),d=n.get("hxSocialSecurityAmount"),m=n.get("personTaxAmount");J=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount lrls-home-account"},r.default.createElement("label",null,"代扣合计："),r.default.createElement(o.Amount,{showZero:!0,className:"amount"},l))),t=S?r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"lrls-more-card"},r.default.createElement("span",null,"代扣个人公积金"),r.default.createElement("div",{className:"noTextSwitch"},r.default.createElement(o.Switch,{checked:p||I,onClick:function(){e.setState({bePersonAccumulation:!p}),p&&a(s.changeLrlsData(["oriTemp","payment","personAccumulationAmount"],""))}}))),p||I?r.default.createElement(o.Row,{className:"yysr-amount lrls-margin-top"},r.default.createElement("label",null,"金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写个人部分金额",value:I,onChange:function(e){a(s.changeLrlsData(["oriTemp","payment","personAccumulationAmount"],e))}})):null,i?r.default.createElement(o.Row,{className:"lrls-margin-top lrls-placeholder"},"其中公积金代缴抵扣：",r.default.createElement(o.Amount,null,i)):null):null,u=T?r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"lrls-more-card"},r.default.createElement("span",null,"代扣个人社保"),r.default.createElement("div",{className:"noTextSwitch"},r.default.createElement(o.Switch,{checked:g||k,onClick:function(){e.setState({bePersonSocialSecurity:!g}),g&&a(s.changeLrlsData(["oriTemp","payment","personSocialSecurityAmount"],""))}}))),g||k?r.default.createElement(o.Row,{className:"yysr-amount lrls-margin-top"},r.default.createElement("label",null,"金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写个人部分金额",value:k,onChange:function(e){a(s.changeLrlsData(["oriTemp","payment","personSocialSecurityAmount"],e))}})):null,d?r.default.createElement(o.Row,{className:"lrls-margin-top lrls-placeholder"},"其中社保代缴抵扣：",r.default.createElement(o.Amount,null,d)):null):null,f=C?r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"lrls-more-card"},r.default.createElement("span",null,"代扣个人所得税"),r.default.createElement("div",{className:"noTextSwitch"},r.default.createElement(o.Switch,{checked:y||j,onClick:function(){e.setState({beIncomeTax:!y}),y&&a(s.changeLrlsData(["oriTemp","payment","incomeTaxAmount"],""))}}))),y||j?r.default.createElement(o.Row,{className:"yysr-amount lrls-margin-top"},r.default.createElement("label",null,"金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写个人部分金额",value:j,onChange:function(e){a(s.changeLrlsData(["oriTemp","payment","incomeTaxAmount"],e))}})):null,m?r.default.createElement(o.Row,{className:"lrls-margin-top lrls-placeholder"},"其中个税代缴抵扣：",r.default.createElement(o.Amount,null,m)):null):null}})[E]||function(){return null})(),x=r.default.createElement("div",null,t,u,f,P,J)},SX_SHBX:function(){var t="金额",c=null,u=null,f=null;(({STATE_XC_JT:function(){t="金额(公司部分)",c=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null," 金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:t,value:L,onChange:function(e){a(s.changeLrlsData(["oriTemp","amount"],e))}})))},STATE_XC_JN:function(){_||T?(c=m?r.default.createElement("div",{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount lrls-home-account"},r.default.createElement("label",null,D>=0?"付款金额：":"收款金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"填写金额",value:L,onChange:function(e){a(s.changeLrlsData(["oriTemp","amount"],e))}}),r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d}))):r.default.createElement("div",{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount lrls-home-account"},r.default.createElement("label",null,"社保金额: "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"填写金额",value:P,onChange:function(e){if(0==b.size){if(Z.test(e)||""==e){if(a(s.changeLrlsData(["oriTemp","payment","companySocialSecurityAmount"],e)),"-"==e)return;a(s.xczcCalculateAmount(v))}}else/^\d*\.?\d{0,2}$/g.test(e)&&(a(s.changeLrlsData(["oriTemp","payment","companySocialSecurityAmount"],e)),a(s.xczcCalculateAmount(v)))}}),T?null:r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d}))),u=!m&&T?r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"lrls-more-card"},r.default.createElement("span",null,"代缴个人社保"),r.default.createElement("div",{className:"noTextSwitch"},r.default.createElement(o.Switch,{checked:g||k,color:"#FF8348",onClick:function(){e.setState({bePersonSocialSecurity:!g}),g&&(a(s.changeLrlsData(["oriTemp","payment","personSocialSecurityAmount"],0)),a(s.xczcCalculateAmount(v)))}}))),r.default.createElement("div",{style:{display:g||k?"":"none"}},r.default.createElement(o.Row,{className:"yysr-amount lrls-margin-top"},r.default.createElement("label",null,"金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写个人部分金额",value:k,onChange:function(e){a(s.changeLrlsData(["oriTemp","payment","personSocialSecurityAmount"],e)),a(s.xczcCalculateAmount(v))}})),r.default.createElement("div",{className:"lrls-placeholder lrls-margin-top",style:{paddingLeft:".6rem",display:O>0?"":"none"}},"未处理金额: ",r.default.createElement(o.Amount,{showZero:!0},O)))):null,f=r.default.createElement("div",{className:"lrls-card",style:{display:!T||m?"none":""}},r.default.createElement(o.Row,{className:"yysr-amount lrls-home-account"},r.default.createElement("label",null,w<0?"收款金额：":"付款金额："),r.default.createElement(o.Amount,{showZero:!0,className:"amount"},Math.abs(w)),r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d})))):c=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,"金额:"),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:t,value:L,onChange:function(e){a(s.changeLrlsData(["oriTemp","amount"],e))}}),r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d})))},STATE_XC_DJ:function(){var e=n.get("hxSocialSecurityAmount");u=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,"代缴金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写个人部分金额",value:k,onChange:function(e){a(s.changeLrlsData(["oriTemp","payment","personSocialSecurityAmount"],e))}}),r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d})),e?r.default.createElement(o.Row,{className:"lrls-margin-top lrls-placeholder"},"其中社保代扣抵扣：",r.default.createElement(o.Amount,null,e)):null)}})[E]||function(){return null})(),x=r.default.createElement("div",null,c,u,f)},SX_ZFGJJ:function(){var t="金额",c=null,u=null,f=null;(({STATE_XC_JT:function(){t="金额(公司部分)",c=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,"金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:t,value:L,onChange:function(e){a(s.changeLrlsData(["oriTemp","amount"],e))}})))},STATE_XC_JN:function(){_||S?(c=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,"公积金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"填写金额",value:J,onChange:function(e){if(0==b.size){if(Z.test(e)||""==e){if(a(s.changeLrlsData(["oriTemp","payment","companyAccumulationAmount"],e)),"-"==e)return;a(s.xczcCalculateAmount(v))}}else/^\d*\.?\d{0,2}$/g.test(e)&&(a(s.changeLrlsData(["oriTemp","payment","companyAccumulationAmount"],e)),a(s.xczcCalculateAmount(v)))}}),S?null:r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d}))),m&&(c=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount lrls-home-account"},r.default.createElement("label",null,D>=0?"付款金额：":"收款金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"填写金额",value:L,onChange:function(e){a(s.changeLrlsData(["oriTemp","amount"],e))}}),r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d})))),f=r.default.createElement("div",{className:"lrls-card",style:{display:!S||m?"none":""}},r.default.createElement(o.Row,{className:"yysr-amount lrls-home-account"},r.default.createElement("label",null,w<0?"收款金额：":"付款金额: "),r.default.createElement(o.Amount,{showZero:!0,className:"amount"},Math.abs(w)),r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d}))),u=!m&&S?r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"lrls-more-card"},r.default.createElement("span",null,"代缴个人公积金"),r.default.createElement("div",{className:"noTextSwitch"},r.default.createElement(o.Switch,{checked:p||I,onClick:function(){e.setState({bePersonAccumulation:!p}),p&&(a(s.changeLrlsData(["oriTemp","payment","personAccumulationAmount"],"")),a(s.xczcCalculateAmount(v)))}}))),r.default.createElement("div",{style:{display:p||I?"":"none"}},r.default.createElement(o.Row,{className:"yysr-amount lrls-margin-top"},r.default.createElement("label",null,"金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写个人部分金额",value:I,onChange:function(e){a(s.changeLrlsData(["oriTemp","payment","personAccumulationAmount"],e)),a(s.xczcCalculateAmount(v))}})),r.default.createElement("div",{style:{paddingLeft:".6rem",display:A>0?"":"none"},className:"lrls-placeholder lrls-margin-top"},"未处理金额: ",r.default.createElement(o.Amount,{showZero:!0},A)))):null):c=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,"金额:"),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:t,value:L,onChange:function(e){a(s.changeLrlsData(["oriTemp","amount"],e))}}),r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d})))},STATE_XC_DJ:function(){var e=n.get("hxAccumulationAmount");u=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,"代缴金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写个人部分金额",value:I,onChange:function(e){a(s.changeLrlsData(["oriTemp","payment","personAccumulationAmount"],e))}}),r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d})),e?r.default.createElement(o.Row,{className:"lrls-margin-top lrls-placeholder"},"其中公积金代扣抵扣：",r.default.createElement(o.Amount,null,e)):null)}})[E]||function(){return null})(),x=r.default.createElement("div",null,c,u,f)},SX_FLF:function(){var e="STATE_XC_FF"==E;x=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,D>=0?"付款金额：":"收款金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"填写金额",value:L,onChange:function(e){a(s.changeLrlsData(["oriTemp","amount"],e))}}),e?r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d}):null))},SX_QTXC:function(){var e="STATE_XC_FF"==E;x=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,D>=0?"付款金额：":"收款金额："),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"填写金额",value:L,onChange:function(e){a(s.changeLrlsData(["oriTemp","amount"],e))}}),e?r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:d}):null))}}[v]||function(){return null})(),x}}]),t}();t.default=p},1745:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),r=d(l),o=(a(9),a(16)),i=d(a(1304)),c=a(13),u=(s(a(183)),s(a(1060)));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={beOffsetAmount:!1},m(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),n(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.oriTemp,l=t.accountList,s=t.accounts,d=t.isModify,m=this.state.beOffsetAmount,f=n.get("oriState"),p=n.get("propertyTax"),g=n.get("acTax"),y=g.get("beInAdvance"),h=g.get("beReduce"),E=n.get("beReduceTax"),v=n.get("reduceAmount"),b=n.get("amount"),_=(n.get("usedProject"),null);return({SX_ZZS:function(){var t=n.get("amount"),p=n.get("offsetAmount"),g=n.get("deductedAmount"),b=(n.get("jrAmount"),Number(p)+Number(t)+Number(v)),S=null,T=null,C=null,L=null;(({STATE_SF_JN:function(){S=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,"支付金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:t,onChange:function(e){a(u.changeLrlsData(["oriTemp","amount"],e))}}),t>0?r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:s}):null)),C=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement("div",null,"处理税费：",r.default.createElement(o.Amount,{showZero:!0},(0,c.decimal)(b)))),y&&g>0&&(T=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"lrls-more-card"},r.default.createElement("span",null,"预交抵扣"),r.default.createElement("span",{className:"noTextSwitch"},r.default.createElement(o.Switch,{checked:m||p,onClick:function(){m?(e.setState({beOffsetAmount:!1}),a(u.changeLrlsData(["oriTemp","offsetAmount"],0))):e.setState({beOffsetAmount:!0})}}))),m||p?r.default.createElement(o.Row,{className:"lrls-padding-top"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,"金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:p,onChange:function(e){a(u.changeLrlsData(["oriTemp","offsetAmount"],e))}})),r.default.createElement(o.Row,{className:"lrls-padding-top lrls-placeholder"},r.default.createElement("span",null,"待抵扣金额： ",r.default.createElement(o.Amount,{showZero:!0},g)))):null)),!d&&h&&(L=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"lrls-more-card"},r.default.createElement("span",null,"税费减免"),r.default.createElement("span",{className:"noTextSwitch"},r.default.createElement(o.Switch,{checked:E,onClick:function(){E?(a(u.changeLrlsData(["oriTemp","beReduceTax"],!1)),a(u.changeLrlsData(["oriTemp","reduceAmount"],""))):a(u.changeLrlsData(["oriTemp","beReduceTax"],!0))}}))),E?r.default.createElement(o.Row,{className:"yysr-amount lrls-padding-top"},r.default.createElement("label",null,"金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:v,onChange:function(e){a(u.changeLrlsData(["oriTemp","reduceAmount"],e))}})):null))},STATE_SF_YJZZS:function(){S=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null," 金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:t,onChange:function(e){a(u.changeLrlsData(["oriTemp","amount"],e))}}),t>0?r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:s}):null))},STATE_SF_ZCWJZZS:function(){var e=n.get("transferAmount")?n.get("transferAmount"):"";S=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null," 金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:t,onChange:function(e){a(u.changeLrlsData(["oriTemp","amount"],e))}})),r.default.createElement(o.Row,{className:"lrls-padding-top lrls-placeholder",style:{paddingLeft:".6rem",display:d?"none":""}},r.default.createElement("span",null,"待转增值税： ",r.default.createElement(o.Amount,{showZero:!0},e))))}})[f]||function(){return null})(),_=r.default.createElement("div",null,C,S,T,L)},SX_GRSF:function(){var e=n.get("payableAmount");_=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null," 金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:b,onChange:function(e){a(u.changeLrlsData(["oriTemp","amount"],e))}}),b>0?r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:s}):null),r.default.createElement("div",{className:"lrls-placeholder lrls-margin-top",style:{paddingLeft:".6rem",display:e>0?"":"none"}},r.default.createElement("span",{style:{marginRight:".2rem"}},"未处理金额: ",r.default.createElement(o.Amount,{showZero:!0},e))))},SX_QTSF:function(){var e=!1,t=null,n=null;(({STATE_SF_JT:function(){e=!1},STATE_SF_JN:function(){e=!0,!d&&h&&(t=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"lrls-more-card"},r.default.createElement("span",null,"税费减免"),r.default.createElement("span",{className:"noTextSwitch"},r.default.createElement(o.Switch,{checked:E,onClick:function(){E?(a(u.changeLrlsData(["oriTemp","beReduceTax"],!1)),a(u.changeLrlsData(["oriTemp","reduceAmount"],""))):a(u.changeLrlsData(["oriTemp","beReduceTax"],!0))}}))),E?r.default.createElement(o.Row,{className:"yysr-amount lrls-padding-top"},r.default.createElement("label",null,"金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:v,onChange:function(e){a(u.changeLrlsData(["oriTemp","reduceAmount"],e))}})):null)),n=r.default.createElement(o.Row,{className:"lrls-card",style:{display:v?"":"none"}},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,"核销金额："),r.default.createElement(o.Amount,{showZero:!0,className:"amount"},Number(b)+Number(v))))}})[f]||function(){return null})(),_=r.default.createElement("div",null,r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null," 金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:b,onChange:function(e){a(u.changeLrlsData(["oriTemp","amount"],e))}}),b>0&&e?r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:s}):null)),t,n)},SX_QYSDS:function(){var e=!1,t=null,n=null;(({STATE_SF_JT:function(){e=!1},STATE_SF_JN:function(){e=!0,!d&&h&&(t=r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"lrls-more-card"},r.default.createElement("span",null,"税费减免"),r.default.createElement("span",{className:"noTextSwitch"},r.default.createElement(o.Switch,{checked:E,onClick:function(){E?(a(u.changeLrlsData(["oriTemp","beReduceTax"],!1)),a(u.changeLrlsData(["oriTemp","reduceAmount"],""))):a(u.changeLrlsData(["oriTemp","beReduceTax"],!0))}}))),E?r.default.createElement(o.Row,{className:"yysr-amount lrls-padding-top"},r.default.createElement("label",null,"金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:v,onChange:function(e){a(u.changeLrlsData(["oriTemp","reduceAmount"],e))}})):null)),n=r.default.createElement(o.Row,{className:"lrls-card",style:{display:v?"":"none"}},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,"核销金额："),r.default.createElement(o.Amount,{showZero:!0,className:"amount"},Number(b)+Number(v))))}})[f]||function(){return null})(),_=r.default.createElement("div",null,r.default.createElement(o.Row,{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null," 金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:b,onChange:function(e){a(u.changeLrlsData(["oriTemp","amount"],e))}}),b>0&&e?r.default.createElement(i.default,{dispatch:a,accountList:l,accounts:s}):null)),t,n)}}[p]||function(){return null})(),"STATE_SF_SFJM"==f&&(_=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(o.Row,{className:"yysr-amount"},r.default.createElement("label",null,"减免金额： "),r.default.createElement(o.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:b,onChange:function(e){a(u.changeLrlsData(["oriTemp","amount"],e))}})))),_}}]),t}();t.default=f},1746:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=(a(13),d(a(25)),d(a(10))),s=d(a(1060));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f={decimalZero:!1,decimalPlaces:4},p=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},m(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"componentWillReceiveProps",value:function(e){this.props.oriState!=e.oriState&&this.setState({categoryValue:"ALL",isAll:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.oriState,l=t.stockCardList,r=t.stockList,d=t.isModify,m=t.isOpenedWarehouse,p=t.stockCategoryList,g=t.commonCardList,y=t.relationCategoryUuid,h=t.history,E=this.state,v=E.isAll,b=E.visible,_=E.idx,S=E.categoryValue,T=1==l.size,C=function(e,t,n){return a(s.changeYysrStockCard(e,t,n,"JZCB"))},L=l.map(function(e){return e.get("cardUuid")}),N=(r.filter(function(e){return!L.includes(e.get("cardUuid"))}),"STATE_YYSR_ZJ"==n),w=[{uuid:"ALL",name:"全部",top:!0,childList:[]}];p.map(function(e){w.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(w),d&&!N&&(w=[{key:"ALL",label:"全部",top:!0,childList:[]}]);var I=v?r.toJS():g;return I.map(function(e){e.name=e.key,e.uuid=e.cardUuid,["STATE_YYSR_XS","STATE_YYSR_TS"].includes(n)&&L.includes(e.cardUuid)&&(e.disabled=!0)}),o.default.createElement("div",{className:l.size?"lrls-card":""},o.default.createElement(c.ChosenPicker,{visible:b,type:"card",multiSelect:!0,title:"请选择存货",district:w,cardList:I,value:S,onChange:function(t){e.setState({categoryValue:t.key}),"ALL"!=t.key?(e.setState({isAll:!1}),a(s.getCostStockByCategory(t.key,t.top,"commonCardJzcbList"))):e.setState({isAll:!0})},onOk:function(e){0!=e.length&&(C("card",e,_),"STATE_YYSR_ZJ"==n&&a(s.getJzcbListPrice(_,e)),d&&a(s.filterJzcbList()))},onCancel:function(){e.setState({visible:!1})}},o.default.createElement("span",null)),l.map(function(e,t){var n=e.get("cardUuid"),l=e.get("warehouseCardUuid"),r=e.get("warehouseCardCode"),d=e.get("warehouseCardName"),p=e.get("isOpenedQuantity"),g=e.get("quantity")?Number(e.get("quantity")):0,E=e.get("price")?Number(e.get("price")):0,v=e.get("amount")?Number(e.get("amount")):0,b=e.get("unitName")?e.get("unitName"):"",_=e.getIn(["financialInfo","openAssist"]),S=e.getIn(["financialInfo","openSerial"]),L=e.getIn(["financialInfo","openBatch"]),w=(e.getIn(["financialInfo","openShelfLife"]),(e.get("assistList")?e.get("assistList"):(0,i.fromJS)([])).reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},"")),I=e.get("batch")?e.get("batch"):"",A=e.get("expirationDate")?e.get("expirationDate"):"",k=A?I+"("+A+")":I;return o.default.createElement("div",{key:t,className:"lrls-bottom-line lrls-card-bottom"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},o.default.createElement("span",null,"存货明细(",t+1,")"),o.default.createElement("span",{className:"lrls-blue",style:{display:T||!N?"none":""},onClick:function(){C("delete","",t)}},"删除")),o.default.createElement("div",{className:"lrls-more-card",onClick:function(){if(N&&!y)return u.toast.info("请先选择处理类别",2);a(s.changeLrlsData(["views","idx"],t)),h.push("/editrunning/stock")}},o.default.createElement("div",{className:"lrls-single"},o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"存货:"),o.default.createElement("span",{className:n?"":"lrls-placeholder"},n?e.get("code")+" "+e.get("name"):" 未选择")),o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right",style:{display:m?"":"none"}},o.default.createElement("span",null,"仓库:"),o.default.createElement("span",{className:l?"":"lrls-placeholder"},l?r+" "+d:" 未选择"))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom",style:{display:_||L?"":"none"}},_?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"属性:"),o.default.createElement("span",{className:w?"":"lrls-placeholder"},w||" 未选择")):null,L?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"批次:"),o.default.createElement("span",{className:k?"":"lrls-placeholder"},k||" 未选择")):null),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{style:{display:p?"":"none"},className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",{className:N&&S?"sn":""},"数量:"),o.default.createElement(c.Amount,f,g),o.default.createElement("span",null,b)),o.default.createElement("div",{style:{display:p?"":"none"},className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"单价:"),o.default.createElement(c.Amount,f,E)),o.default.createElement("div",{className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",null,"金额:"),o.default.createElement(c.Amount,null,v)))),o.default.createElement(c.Icon,{type:"arrow-right"})))}),o.default.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold",display:N?"":"none"}},o.default.createElement("div",null),o.default.createElement("div",{className:"lrls-blue",onClick:function(){if(!y)return u.toast.info("请先选择处理类别",2);e.setState({visible:!0,idx:l.size})}},"+添加存货明细")))}}]),t}();t.default=p},1747:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=(a(13),s(a(25)),s(a(10)),s(a(1060)));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m={decimalZero:!1,decimalPlaces:4},f=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={isAll:!0,visible:!1,idx:-1,cardType:"stockCardList",categoryValue:"ALL"},d(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.history,l=t.stockCardList,r=t.stockList,s=t.warehouseCardList,d=t.warehouseList,f=t.stockCategoryList,p=t.commonCardList,g=this.state,y=g.isAll,h=g.visible,E=g.idx,v=g.cardType,b=g.categoryValue,_=1==l.size,S=function(e,t,n){return a(u.changeYysrStockCard(e,t,n,"CHDB"))},T=(l.map(function(e){return e.get("cardUuid")}),s.get(0)),C=s.get(1),L=[{uuid:"ALL",name:"全部",top:!0,childList:[]}];f.map(function(e){L.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(L);var N=y?r.toJS():p;return N.map(function(e){e.name=e.key}),o.default.createElement("div",null,o.default.createElement("div",{className:"lrls-card"},o.default.createElement("div",{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"调出仓库:"),o.default.createElement(c.Single,{className:"lrls-single",district:d.toJS(),value:T.get("cardUuid"),onOk:function(e){a(u.changeLrlsData(["oriTemp","warehouseCardList",0,"cardUuid"],e.uuid)),a(u.changeLrlsData(["oriTemp","warehouseCardList",0,"code"],e.code)),a(u.changeLrlsData(["oriTemp","warehouseCardList",0,"name"],e.name)),a(u.getChdbPriceAll())}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},T.get("cardUuid")?o.default.createElement("span",null," ",T.get("code")+" "+T.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择调出仓库"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card"},o.default.createElement("label",null,"调入仓库:"),o.default.createElement(c.Single,{className:"lrls-single",district:d.toJS(),value:C.get("cardUuid"),onOk:function(e){a(u.changeLrlsData(["oriTemp","warehouseCardList",1,"cardUuid"],e.uuid)),a(u.changeLrlsData(["oriTemp","warehouseCardList",1,"code"],e.code)),a(u.changeLrlsData(["oriTemp","warehouseCardList",1,"name"],e.name))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},C.get("cardUuid")?o.default.createElement("span",null," ",C.get("code")+" "+C.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择调入仓库"),o.default.createElement(c.Icon,{type:"triangle"}))))),o.default.createElement("div",{className:"lrls-card"},o.default.createElement(c.ChosenPicker,{visible:h,type:"card",multiSelect:!0,title:"请选择存货",district:L,cardList:N,value:b,onChange:function(t){e.setState({categoryValue:t.key}),"ALL"!=t.key?(e.setState({isAll:!1}),a(u.getStockListByCategory(t))):e.setState({isAll:!0})},onOk:function(e){e.length&&(S("card",e,E),a(u.getChdbPrice(E,e,v)))},onCancel:function(){e.setState({visible:!1})}},o.default.createElement("span",null)),l.map(function(e,t){var l=e.get("isOpenedQuantity"),r=e.get("cardUuid"),s=(e.get("isUniformPrice"),e.get("quantity")?Number(e.get("quantity")):0),d=e.get("price")?Number(e.get("price")):0,f=e.get("amount")?Number(e.get("amount")):0,p=e.getIn(["financialInfo","openAssist"]),g=e.getIn(["financialInfo","openSerial"]),y=e.getIn(["financialInfo","openBatch"]),h=(e.getIn(["financialInfo","openShelfLife"]),(e.get("assistList")?e.get("assistList"):(0,i.fromJS)([])).reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},"")),E=e.get("batch")?e.get("batch"):"",v=e.get("expirationDate")?e.get("expirationDate"):"",b=v?E+"("+v+")":E;return o.default.createElement("div",{key:t,className:"lrls-bottom-line lrls-card-bottom"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},o.default.createElement("span",null,"存货明细(",t+1,")"),o.default.createElement("span",{className:"lrls-blue",style:{display:_?"none":""},onClick:function(){S("delete","",t)}},"删除")),o.default.createElement("div",{className:"lrls-more-card",onClick:function(){a(u.changeLrlsData(["views","idx"],t)),n.push("/editrunning/stock")}},o.default.createElement("div",{className:"lrls-single"},o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"存货:"),o.default.createElement("span",{className:r?"":"lrls-placeholder"},r?e.get("code")+" "+e.get("name"):" 未选择"))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom",style:{display:p||y?"":"none"}},p?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"属性:"),o.default.createElement("span",{className:h?"":"lrls-placeholder"},h||" 未选择")):null,y?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"批次:"),o.default.createElement("span",{className:b?"":"lrls-placeholder"},b||" 未选择")):null),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{style:{display:l?"":"none"},className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",{className:g?"sn":""},"数量:"),o.default.createElement(c.Amount,m,s),o.default.createElement("span",null,e.get("unitUuid")?e.get("unitName"):null)),o.default.createElement("div",{style:{display:l?"":"none"},className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"单价:"),o.default.createElement(c.Amount,m,d)),o.default.createElement("div",{className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",null,"金额:"),o.default.createElement(c.Amount,null,f)))),o.default.createElement(c.Icon,{type:"arrow-right"})))}),o.default.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold"}},o.default.createElement("div",null),o.default.createElement("div",{className:"lrls-blue",onClick:function(){e.setState({visible:!0,idx:l.size,cardType:"stockCardList"})}},"+添加存货明细"))))}}]),t}();t.default=f},1748:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=(a(13),s(a(25)),s(a(10)),s(a(1060)));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m={decimalZero:!1,decimalPlaces:4},f=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},d(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"componentWillReceiveProps",value:function(e){this.props.oriState!=e.oriState&&this.setState({categoryValue:"ALL",isAll:!0,visible:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.stockCardList,l=t.stockList,r=t.oriState,s=t.isOpenedWarehouse,d=(t.warehouseList,t.stockCategoryList),f=t.commonCardList,p=t.history,g=this.state,y=g.isAll,h=g.visible,E=g.idx,v=g.categoryValue,b=function(e,t,n){a(u.changeYysrStockCard(e,t,n,"CHYE"))},_=(n.map(function(e){return e.get("cardUuid")}),n.get(0)?n.get(0):(0,i.fromJS)({}),1==n.size),S=[{uuid:"ALL",name:"全部",top:!0,childList:[]}];d.map(function(e){S.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(S);var T=y?l.toJS():f;T.map(function(e){e.name=e.key});var C=0;return o.default.createElement("div",null,o.default.createElement("div",{className:"lrls-card"},o.default.createElement(c.ChosenPicker,{visible:h,type:"card",multiSelect:!0,title:"请选择存货",district:S,cardList:T,value:v,onChange:function(t){e.setState({categoryValue:t.key}),"ALL"!=t.key?(e.setState({isAll:!1}),a(u.getStockListByCategory(t))):e.setState({isAll:!0})},onOk:function(e){e.length&&(b("card",e,E),a(u.getChyePrice(e,E,"stock")))},onCancel:function(){e.setState({visible:!1})}},o.default.createElement("span",null)),n.map(function(e,t){var n=e.get("cardUuid"),l=e.get("isOpenedQuantity"),d=e.get("unitName")?e.get("unitName"):null,f=e.get("quantity")?Number(e.get("quantity")):0,g=e.get("price")?Number(e.get("price")):0,y=e.get("amount")?Number(e.get("amount")):0,h=e.get("warehouseCardUuid"),E=e.get("warehouseCardCode"),v=e.get("warehouseCardName");C+=Number(y);var S=e.getIn(["financialInfo","openAssist"]),T=e.getIn(["financialInfo","openSerial"]),L=e.getIn(["financialInfo","openBatch"]),N=(e.getIn(["financialInfo","openShelfLife"]),(e.get("assistList")?e.get("assistList"):(0,i.fromJS)([])).reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},"")),w=e.get("batch")?e.get("batch"):"",I=e.get("expirationDate")?e.get("expirationDate"):"",A=I?w+"("+I+")":w;return o.default.createElement("div",{key:t,className:"lrls-bottom-line lrls-card-bottom"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},o.default.createElement("span",null,"存货明细(",t+1,")"),o.default.createElement("span",{className:"lrls-blue",style:{display:_?"none":""},onClick:function(){b("delete","",t)}},"删除")),o.default.createElement("div",{className:"lrls-more-card",onClick:function(){a(u.changeLrlsData(["views","idx"],t)),p.push("/editrunning/stock")}},o.default.createElement("div",{className:"lrls-single"},o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"存货:"),o.default.createElement("span",{className:n?"":"lrls-placeholder"},n?e.get("code")+" "+e.get("name"):" 未选择")),o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right",style:{display:s?"":"none"}},o.default.createElement("span",null,"仓库:"),o.default.createElement("span",{className:h?"":"lrls-placeholder"},h?E+" "+v:" 未选择"))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom",style:{display:S||L?"":"none"}},S?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"属性:"),o.default.createElement("span",{className:N?"":"lrls-placeholder"},N||" 未选择")):null,L?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"批次:"),o.default.createElement("span",{className:A?"":"lrls-placeholder"},A||" 未选择")):null),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{style:{display:l?"":"none"},className:"STATE_CHYE_CH"!=r?"lrls-padding-right lrls-one-third":"lrls-padding-right lrls-single"},o.default.createElement("span",{className:T?"sn":""},"数量:"),o.default.createElement(c.Amount,m,f),o.default.createElement("span",null," ",d)),o.default.createElement("div",{style:{display:l&&"STATE_CHYE_CH"!=r?"":"none"},className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"单价:"),o.default.createElement(c.Amount,m,g)),o.default.createElement("div",{className:"STATE_CHYE_CH"!=r?"lrls-padding-right lrls-one-third":"lrls-padding-right lrls-single"},o.default.createElement("span",null,"金额:"),o.default.createElement(c.Amount,null,y)))),o.default.createElement(c.Icon,{type:"arrow-right"})))}),o.default.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold"}},o.default.createElement("div",null,"调整净额：",o.default.createElement(c.Amount,{showZero:!0},C)),o.default.createElement("div",{className:"lrls-blue",onClick:function(){e.setState({visible:!0,idx:n.size})}},"+添加存货明细"))))}}]),t}();t.default=f},1749:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=(a(9),a(16)),c=a(13),u=(s(a(25)),s(a(10)),s(a(1060)));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},d(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.stockCardList,l=t.stockList,r=(t.isModify,t.warehouseList),s=t.usedStock,d=t.isOpenedWarehouse,m=t.amount,f=t.stockRange,p=t.stockCategoryList,g=t.commonCardList,y=this.state,h=y.isAll,E=y.visible,v=y.idx,b=y.categoryValue,_=1==n.size,S=function(e,t,n){return a(u.changeYysrStockCard(e,t,n,"JXSEZC"))},T=0,C=[{uuid:"ALL",name:"全部",top:!0,childList:[]}];p.map(function(e){f.includes(e.get("uuid"))&&C.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(C);var L=h?l.toJS():g;return L.map(function(e){e.name=e.key}),o.default.createElement("div",null,o.default.createElement("div",{className:"lrls-card"},o.default.createElement(i.Row,{className:"yysr-amount",style:{display:s?"none":""}},o.default.createElement("label",null,"税额："),o.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"填写金额",value:m,onChange:function(e){a(u.changeLrlsData(["oriTemp","amount"],e))}})),s?o.default.createElement(i.ChosenPicker,{visible:E,type:"card",multiSelect:!0,title:"请选择存货",district:C,cardList:L,value:b,onChange:function(t){e.setState({categoryValue:t.key}),"ALL"!=t.key?(e.setState({isAll:!1}),a(u.getStockListByCategory(t))):e.setState({isAll:!0})},onOk:function(e){e.length&&S("card",e,v)},onCancel:function(){e.setState({visible:!1})}},o.default.createElement("span",null)):null,s&&n.map(function(t,a){var n=t.get("amount")?Number(t.get("amount")):0;return T+=n,o.default.createElement("div",{key:a,style:{paddingBottom:_?"0":"10px"}},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},o.default.createElement("span",null,"存货明细(",a+1,")"),o.default.createElement("span",{className:"lrls-blue",style:{display:_?"none":""},onClick:function(){S("delete","",a)}},"删除")),o.default.createElement("div",{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"存货:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){e.setState({visible:!0,idx:a})}},o.default.createElement(i.Row,{className:"lrls-category lrls-padding"},t.get("cardUuid")?o.default.createElement("span",null," ",t.get("code")+" "+t.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),o.default.createElement(i.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:d?"":"none"}},o.default.createElement("label",null,"仓库:"),o.default.createElement(i.Single,{className:"lrls-single",district:r.toJS(),value:t.get("warehouseCardUuid"),onOk:function(e){S("warehouse",e,a)}},o.default.createElement(i.Row,{className:"lrls-category lrls-padding"},t.get("warehouseCardUuid")?o.default.createElement("span",null," ",t.get("warehouseCardCode")+" "+t.get("warehouseCardName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择仓库卡片"),o.default.createElement(i.Icon,{type:"triangle"})))),o.default.createElement(i.Row,{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"税额："),o.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"填写税额",value:t.get("amount"),onChange:function(e){S("amount",e,a)}})))}),o.default.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold",display:s?"":"none"}},n.size>1?o.default.createElement("div",null,"总税额：",o.default.createElement(i.Amount,{showZero:!0},(0,c.decimal)(T))):o.default.createElement("div",null),o.default.createElement("div",{className:"lrls-blue",onClick:function(){e.setState({visible:!0,idx:n.size})}},"+添加存货明细"))))}}]),t}();t.default=m},1750:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=a(13),s=(m(a(25)),m(a(10)),m(a(1060))),d=m(a(1068));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p={decimalZero:!1,decimalPlaces:4},g=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={isAll:!0,visible:!1,idx:-1,cardType:"stockCardList",categoryValue:"ALL"},f(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=(t.oriState,t.stockCardList),l=t.stockList,r=t.isOpenedWarehouse,m=t.stockCategoryList,f=t.commonCardList,g=t.stockCardOtherList,y=t.history,h=this.state,E=h.isAll,v=h.visible,b=h.idx,_=h.cardType,S=h.categoryValue,T=1==n.size,C=1==g.size,L=function(e,t,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"stockCardList";a(s.changeYysrStockCard(e,t,n,"CHZZ",l))},N=n.map(function(e){return e.get("cardUuid")}),w=g.map(function(e){return e.get("cardUuid")}),I=[{uuid:"ALL",name:"全部",top:!0,childList:[]}];m.map(function(e){I.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(I);var A=E?l.toJS():f;A.map(function(e){e.name=e.key,"stockCardList"==_&&w.includes(e.uuid)&&(e.disabled=!0),"stockCardOtherList"==_&&N.includes(e.uuid)&&(e.disabled=!0)});var k=0,O=0;return o.default.createElement("div",null,o.default.createElement(c.ChosenPicker,{visible:v,type:"card",multiSelect:!0,title:"请选择存货",icon:{type:"inventory-add",onClick:function(){a(d.beforeAddInventoryCardFromEditRunning([],y))}},district:I,cardList:A,value:S,onChange:function(t){e.setState({categoryValue:t.key}),"ALL"!=t.key?(e.setState({isAll:!1}),a(s.getStockListByCategory(t))):e.setState({isAll:!0})},onOk:function(e){e.length&&(L("card",e,b,_),a(s.getChzzListPrice(b,e,_)))},onCancel:function(){e.setState({visible:!1})}},o.default.createElement("span",null)),o.default.createElement("div",{className:"lrls-card"},n.map(function(e,t){var n=e.get("isOpenedQuantity"),l=e.get("cardUuid"),u=e.get("warehouseCardUuid"),d=e.get("warehouseCardCode"),m=e.get("warehouseCardName"),f=e.get("unitName")?e.get("unitName"):null,g=e.get("quantity")?Number(e.get("quantity")):0,h=e.get("price")?Number(e.get("price")):0,E=e.get("amount")?Number(e.get("amount")):0;k+=Number(E);var v=e.getIn(["financialInfo","openAssist"]),b=e.getIn(["financialInfo","openSerial"]),_=e.getIn(["financialInfo","openBatch"]),S=(e.getIn(["financialInfo","openShelfLife"]),(e.get("assistList")?e.get("assistList"):(0,i.fromJS)([])).reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},"")),C=e.get("batch")?e.get("batch"):"",N=e.get("expirationDate")?e.get("expirationDate"):"",w=N?C+"("+N+")":C;return o.default.createElement("div",{key:t,className:"lrls-bottom-line lrls-card-bottom"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},o.default.createElement("span",null,"存货明细(",t+1,")"),o.default.createElement("span",{className:"lrls-blue",style:{display:T?"none":""},onClick:function(){L("delete","",t)}},"删除")),o.default.createElement("div",{className:"lrls-more-card",onClick:function(){a(s.changeLrlsData(["views","idx"],t)),a(s.changeLrlsData(["views","cardType"],"stockCardList")),y.push("/editrunning/stock")}},o.default.createElement("div",{className:"lrls-single"},o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"存货:"),o.default.createElement("span",{className:l?"":"lrls-placeholder"},l?e.get("code")+" "+e.get("name"):" 未选择")),o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right",style:{display:r?"":"none"}},o.default.createElement("span",null,"仓库:"),o.default.createElement("span",{className:u?"":"lrls-placeholder"},u?d+" "+m:" 未选择"))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom",style:{display:v||_?"":"none"}},v?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"属性:"),o.default.createElement("span",{className:S?"":"lrls-placeholder"},S||" 未选择")):null,_?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"批次:"),o.default.createElement("span",{className:w?"":"lrls-placeholder"},w||" 未选择")):null),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{style:{display:n?"":"none"},className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",{className:b?"sn":""},"数量:"),o.default.createElement(c.Amount,p,g),o.default.createElement("span",null,f)),o.default.createElement("div",{style:{display:n?"":"none"},className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"单价:"),o.default.createElement(c.Amount,p,h)),o.default.createElement("div",{className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",null,"金额:"),o.default.createElement(c.Amount,null,E)))),o.default.createElement(c.Icon,{type:"arrow-right"})))}),o.default.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold"}},o.default.createElement("div",null,"总金额：",o.default.createElement(c.Amount,{showZero:!0},(0,u.decimal)(k))),o.default.createElement("div",{className:"lrls-blue",onClick:function(){e.setState({visible:!0,idx:n.size,cardType:"stockCardList"})}},"+添加物料明细"))),o.default.createElement("div",{className:"lrls-card"},g.map(function(e,t){var n=e.get("isOpenedQuantity"),l=e.get("cardUuid"),u=e.get("warehouseCardUuid"),d=e.get("warehouseCardCode"),m=e.get("warehouseCardName"),f=e.get("unitName")?e.get("unitName"):null,g=e.get("quantity")?Number(e.get("quantity")):0,h=e.get("price")?Number(e.get("price")):0,E=e.get("amount")?Number(e.get("amount")):0;O+=Number(E);var v=e.getIn(["financialInfo","openAssist"]),b=e.getIn(["financialInfo","openSerial"]),_=e.getIn(["financialInfo","openBatch"]),S=(e.getIn(["financialInfo","openShelfLife"]),(e.get("assistList")?e.get("assistList"):(0,i.fromJS)([])).reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},"")),T=e.get("batch")?e.get("batch"):"",N=e.get("expirationDate")?e.get("expirationDate"):"",w=N?T+"("+N+")":T;return o.default.createElement("div",{key:t,className:"lrls-bottom-line lrls-card-bottom"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},o.default.createElement("span",null,"成品明细(",t+1,")"),o.default.createElement("span",{className:"lrls-blue",style:{display:C?"none":""},onClick:function(){L("delete","",t,"stockCardOtherList")}},"删除")),o.default.createElement("div",{className:"lrls-more-card",onClick:function(){a(s.changeLrlsData(["views","idx"],t)),a(s.changeLrlsData(["views","cardType"],"stockCardOtherList")),y.push("/editrunning/stock")}},o.default.createElement("div",{className:"lrls-single"},o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"存货:"),o.default.createElement("span",{className:l?"":"lrls-placeholder"},l?e.get("code")+" "+e.get("name"):" 未选择")),o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right",style:{display:r?"":"none"}},o.default.createElement("span",null,"仓库:"),o.default.createElement("span",{className:u?"":"lrls-placeholder"},u?d+" "+m:" 未选择"))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom",style:{display:v||_?"":"none"}},v?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"属性:"),o.default.createElement("span",{className:S?"":"lrls-placeholder"},S||" 未选择")):null,_?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"批次:"),o.default.createElement("span",{className:w?"":"lrls-placeholder"},w||" 未选择")):null),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{style:{display:n?"":"none"},className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",{className:b?"sn":""},"数量:"),o.default.createElement(c.Amount,p,g),o.default.createElement("span",null,f)),o.default.createElement("div",{style:{display:n?"":"none"},className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"单价:"),o.default.createElement(c.Amount,p,h)),o.default.createElement("div",{className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",null,"金额:"),o.default.createElement(c.Amount,null,E)))),o.default.createElement(c.Icon,{type:"arrow-right"})))}),o.default.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold"}},o.default.createElement("div",null,"总金额：",o.default.createElement(c.Amount,{showZero:!0},(0,u.decimal)(O))),o.default.createElement("div",{className:"lrls-blue",onClick:function(){e.setState({visible:!0,idx:n.size,cardType:"stockCardOtherList"})}},"+添加成品明细"))))}}]),t}();t.default=g},1751:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=p(r),i=a(9),c=a(16),u=a(13),s=p(a(1752)),d=(f(a(25)),f(a(10)),f(a(1060))),m=f(a(1068));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y={decimalZero:!1,decimalPlaces:4},h=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={assemblyCategoryValue:"ALL",assemblyVisible:!1,assemblyIdx:-1,showList:!0},g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"componentDidMount",value:function(){var e=sessionStorage.getItem("routerPage");["routerStock"].includes(e)||this.props.dispatch(d.chzzAssemblyList({top:!0,uuid:""},"assemblyList"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,l=t.stockCardList,r=t.isOpenedWarehouse,f=t.stockCategoryList,p=t.cardAllList,g=t.history,h=this.state,E=h.assemblyVisible,v=h.assemblyCategoryValue,b=h.assemblyIdx,_=h.showList,S=(l.size,function(e,t,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"CHZZ_ZZD";"CHZZ_ZZD_CHILD"==l&&["quantity","price","amount","unitUuid","unitName"].includes(e)?a(d.changeLrlsData(["oriTemp","stockCardList",n[0],"childCardList",n[1],e],t)):a(d.changeYysrStockCard(e,t,n,l,"stockCardList"))}),T=[{uuid:"ALL",name:"全部",top:!0,childList:[]}];f.map(function(e){T.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(T);var C=p.get("assemblyList").toJS(),L=p.get("commonAssemblyList").toJS(),N="ALL"==v?C:L,w=0,I=(0,s.default)(l.toJS());return o.default.createElement("div",null,o.default.createElement(c.ChosenPicker,{visible:E,type:"card",multiSelect:!0,title:"请选择成品",icon:{type:"inventory-add",onClick:function(){a(m.beforeAddInventoryCardFromEditRunning([],g))}},district:T,cardList:N,value:v,onChange:function(t){e.setState({assemblyCategoryValue:t.key}),"ALL"!=t.key&&a(d.chzzAssemblyList(t))},onOk:function(e){e.length&&S("card",e,b)},onCancel:function(){e.setState({assemblyVisible:!1})}},o.default.createElement("span",null)),o.default.createElement("div",null,l.map(function(e,t){var n=e.get("isOpenedQuantity"),l=e.get("cardUuid"),u=e.get("warehouseCardUuid"),s=e.get("warehouseCardCode"),m=e.get("warehouseCardName"),f=e.get("unitName")?e.get("unitName"):null,p=e.get("quantity")?Number(e.get("quantity")):0,h=e.get("childCardList").size,E=e.getIn(["financialInfo","openAssist"]),v=e.getIn(["financialInfo","openSerial"]),b=e.getIn(["financialInfo","openBatch"]),_=(e.getIn(["financialInfo","openShelfLife"]),(e.get("assistList")?e.get("assistList"):(0,i.fromJS)([])).reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},"")),T=e.get("batch")?e.get("batch"):"",C=e.get("expirationDate")?e.get("expirationDate"):"",L=C?T+"("+C+")":T,N=0,I=0;return e.get("childCardList").map(function(e){N+=Number(e.get("amount"))}),p&&(I=Number(N)/Number(p)),w+=Number(N),o.default.createElement("div",{className:"lrls-card",key:t,style:{paddingBottom:0}},o.default.createElement("div",{className:"lrls-more-card lrls-bottom lrls-bottom-line"},o.default.createElement("span",{className:"lrls-bottom"},"组装单(",t+1,")"),o.default.createElement("span",{className:"lrls-blue lrls-bottom",onClick:function(){S("delete","",t)}},"删除")),o.default.createElement("div",{className:"lrls-more-card lrls-bottom lrls-bottom-line",onClick:function(){a(d.changeLrlsData(["views","idx"],t)),g.push("/editrunning/stock")}},o.default.createElement("div",{className:"lrls-single"},o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"存货:"),o.default.createElement("span",{className:l?"":"lrls-placeholder"},l?e.get("code")+" "+e.get("name"):" 未选择")),o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right",style:{display:r?"":"none"}},o.default.createElement("span",null,"仓库:"),o.default.createElement("span",{className:u?"":"lrls-placeholder"},u?s+" "+m:" 未选择"))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom",style:{display:E||b?"":"none"}},E?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"属性:"),o.default.createElement("span",{className:_?"":"lrls-placeholder"},_||" 未选择")):null,b?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"批次:"),o.default.createElement("span",{className:L?"":"lrls-placeholder"},L||" 未选择")):null),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{style:{display:n?"":"none"},className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",{className:v?"sn":""},"数量:"),o.default.createElement(c.Amount,y,p),o.default.createElement("span",null,f)),o.default.createElement("div",{style:{display:n?"":"none"},className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"单价:"),o.default.createElement(c.Amount,y,I)),o.default.createElement("div",{className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",null,"金额:"),o.default.createElement(c.Amount,null,N)))),o.default.createElement(c.Icon,{type:"arrow-right"})),o.default.createElement("div",null,e.get("childCardList").map(function(e,n){var l=e.get("isOpenedQuantity"),u=e.get("cardUuid"),s=e.get("warehouseCardUuid"),m=e.get("warehouseCardCode"),f=e.get("warehouseCardName"),p=e.get("unitName")?e.get("unitName"):null,E=e.get("quantity")?Number(e.get("quantity")):"",v=e.get("price")?Number(e.get("price")):"",b=e.get("amount")?Number(e.get("amount")):"",_="lrls-bottom-line lrls-card-bottom";n+1==h&&(_="");var S=e.getIn(["financialInfo","openAssist"]),T=e.getIn(["financialInfo","openSerial"]),C=e.getIn(["financialInfo","openBatch"]),L=(e.getIn(["financialInfo","openShelfLife"]),(e.get("assistList")?e.get("assistList"):(0,i.fromJS)([])).reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},"")),N=e.get("batch")?e.get("batch"):"",w=e.get("expirationDate")?e.get("expirationDate"):"",I=w?N+"("+w+")":N;return o.default.createElement("div",{key:n,className:_},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},o.default.createElement("span",null,"物料明细(",n+1,")")),o.default.createElement("div",{className:"lrls-more-card",onClick:function(){a(d.changeLrlsData(["views","idx"],t)),g.push("/editrunning/stock")}},o.default.createElement("div",{className:"lrls-single"},o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"存货:"),o.default.createElement("span",{className:u?"":"lrls-placeholder"},u?e.get("code")+" "+e.get("name"):" 未选择")),o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right",style:{display:r?"":"none"}},o.default.createElement("span",null,"仓库:"),o.default.createElement("span",{className:s?"":"lrls-placeholder"},s?m+" "+f:" 未选择"))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom",style:{display:S||C?"":"none"}},S?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"属性:"),o.default.createElement("span",{className:L?"":"lrls-placeholder"},L||" 未选择")):null,C?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"批次:"),o.default.createElement("span",{className:I?"":"lrls-placeholder"},I||" 未选择")):null),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{style:{display:l?"":"none"},className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",{className:T?"sn":""},"数量:"),o.default.createElement(c.Amount,y,E),o.default.createElement("span",null,p)),o.default.createElement("div",{style:{display:l?"":"none"},className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"单价:"),o.default.createElement(c.Amount,y,v)),o.default.createElement("div",{className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",null,"金额:"),o.default.createElement(c.Amount,null,b))))))})))})),o.default.createElement("div",{className:"lrls-card"},o.default.createElement("div",{className:"lrls-more-card"},o.default.createElement("span",null,"添加组装单"),o.default.createElement("span",{className:"lrls-placeholder",onClick:function(){e.setState({assemblyVisible:!0,assemblyIdx:l.size})}},"点击添加组装单 ",o.default.createElement(c.Icon,{type:"arrow-right"})))),o.default.createElement(c.Row,{className:"jr-card lrls-card-bottom",style:{display:l.size?"":"none"}},o.default.createElement("div",{className:"lrls-more-card lrls-card-bottom lrls-padding-top",onClick:function(){return e.setState({showList:!_})}},o.default.createElement("div",null,"物料汇总合计：",o.default.createElement(c.Amount,{showZero:!0},(0,u.decimal)(w))),o.default.createElement("div",null,_?"收起":"展开",o.default.createElement(c.Icon,{style:_?{transform:"rotate(180deg)"}:"",type:"arrow-down"}))),o.default.createElement("div",{style:{display:_?"":"none"}},I.map(function(e,t){var a=(0,i.fromJS)(e),l=a.getIn(["financialInfo","openAssist"]),u=a.getIn(["financialInfo","openBatch"]),s=(a.getIn(["financialInfo","openShelfLife"]),(a.get("assistList")?a.get("assistList"):(0,i.fromJS)([])).reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},"")),d=a.get("batch")?a.get("batch"):"",m=a.get("expirationDate")?a.get("expirationDate"):"",f=m?d+"("+m+")":d;return o.default.createElement("div",{key:t,className:"dashed-line"},o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",null,e.code+" "+e.name),o.default.createElement("div",{style:{display:e.isOpenedQuantity?"":"none"}},o.default.createElement(c.Amount,n({showZero:!0},y),e.quantity),e.unitName,"*",o.default.createElement(c.Amount,n({showZero:!0},y),e.price))),o.default.createElement("div",{className:"jr-item",style:{display:l||u?"":"none"}},l?o.default.createElement("div",null,"属性:",s):null,u?o.default.createElement("div",null,"批次:",f):null),o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",null,r?"仓库："+e.warehouseCardCode+" "+e.warehouseCardName:null),o.default.createElement("div",null,o.default.createElement(c.Amount,{className:"hx-bold"},e.amount))))}))))}}]),t}();t.default=h},1752:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],a=[],l=[];e.map(function(e){e.childCardList.map(function(e){t.push(e)})}),t.map(function(e,t){var r=e.cardUuid,o=e.warehouseCardUuid?e.warehouseCardUuid:"",i=e.unitUuid?e.unitUuid:"",c=e.batch?e.batch:"",u=e.warehouseCardCode;e.unitUuid=i,e.warehouseCardUuid=o,e.warehouseCardCode=u||"";var s=e.assistList?e.assistList.map(function(e){return e.propertyUuid}).sort():[],d=r+"_"+o+"_"+i+"_"+c+"_"+s.join("_");if(e.allPropertyStr=d,r)if(a.includes(r)){var m=a.findIndex(function(e){return e==r}),f=!1;l[m].forEach(function(t){if(t.allPropertyStr==d){var a=(0,n.decimal)(Number(t.quantity)+Number(e.quantity)),l=(0,n.decimal)(Number(t.amount)+Number(e.amount));t.quantity=a,t.amount=l,a&&(t.price=(0,n.decimal)(Number(l)/Number(a))),f=!0}}),f||l[m].push(e)}else l.push([e]),a.push(r)});var r=[];return l.map(function(e,t){e.sort(function(e,t){return e.warehouseCardCode>t.warehouseCardCode?-1:(e.warehouseCardCode,t.warehouseCardCode,1)}).map(function(e){r.push(e)})}),r.sort(function(e,t){return e.code>t.code?1:-1}),r};var n=a(13)},1753:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=(a(9),a(16)),c=(u(a(25)),u(a(1060)));u(a(1068));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},s(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=(t.oriState,t.projectCategoryList),l=t.projectList,r=t.commonProjectList,u=t.projectCardList,s=t.hasSelect,d=this.state,m=d.isAll,f=d.visible,p=d.idx,g=d.categoryValue,y=[];n&&n.map(function(e){y.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(y),y.unshift({key:"ALL",label:"全部",childList:[]});var h=m?l.toJS():r.toJS(),E=u.map(function(e){return e.get("cardUuid")});h.map(function(e){e.name=e.key,E.includes(e.uuid)&&"COMNCRD"!=e.code&&(e.disabled=!0)});var v=1==u.size,b=function(e,t,n){return a(c.changeGgfyftProjectCard(e,t,n))};return o.default.createElement("div",{className:"lrls-card"},o.default.createElement(i.ChosenPicker,{className:"lrls-single",type:"card",visible:f,multiSelect:!0,title:"请选择项目",district:y,cardList:h,value:g,onChange:function(t){e.setState({categoryValue:t.key}),"ALL"!=t.key?(e.setState({isAll:!1}),a(c.getProjectListByCategory(t))):e.setState({isAll:!0})},onOk:function(e){0!=e.length&&b("card",e,p)},onCancel:function(){e.setState({visible:!1})}},o.default.createElement("span",null)),u.map(function(t,a){var n=t.get("code"),l=t.get("name"),r=t.get("propertyCost"),c=n+" "+l;["COMNCRD","ASSIST","MAKE","INDIRECT","MECHANICAL"].includes(n)&&(c={COMNCRD:"损益公共项目",ASSIST:"辅助生产成本",MAKE:"制造费用",INDIRECT:"间接费用",MECHANICAL:"机械作业"}[n]);var u="请选择费用性质";return r&&(u={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用",XZ_FINANCE:"财务费用"}[r]),o.default.createElement("div",{key:a,style:{paddingBottom:v?"0":"10px"}},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},o.default.createElement("span",null,"项目(",a+1,")"),o.default.createElement("span",{className:"lrls-blue",style:{display:v?"none":""},onClick:function(){b("delete","",a)}},"删除")),o.default.createElement("div",{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"项目:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){e.setState({visible:!0,idx:a,isAll:!0})}},o.default.createElement(i.Row,{className:"lrls-category lrls-padding"},t.get("cardUuid")?o.default.createElement("span",null,c):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择项目"),o.default.createElement(i.Icon,{type:"triangle"})))),o.default.createElement(i.Row,{className:"lrls-more-card lrls-bottom",style:{display:"COMNCRD"==n?"":"none"}},o.default.createElement("label",null,"费用性质: "),o.default.createElement(i.Single,{className:"lrls-single",district:[{key:"销售费用",value:"XZ_SALE"},{key:"管理费用",value:"XZ_MANAGE"},{key:"财务费用",value:"XZ_FINANCE"}],value:r,onOk:function(e){b("propertyCost",e.value,a)}},o.default.createElement(i.Row,{className:"lrls-padding lrls-category"},o.default.createElement("span",{className:["请选择费用性质"].includes(u)?"lrls-placeholder":""},u),o.default.createElement(i.Icon,{type:"triangle"})))),o.default.createElement(i.Row,{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"分摊金额："),o.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,disabled:!s,placeholder:"填写分摊金额",value:t.get("amount"),onChange:function(e){b("amount",e,a)}})),o.default.createElement(i.Row,{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"分摊占比："),o.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",disabled:!s,placeholder:"填写占比率",value:t.get("percent"),onChange:function(e){b("percent",e,a)}}),o.default.createElement("span",{className:"lrls-margin-left"},"%")))}),o.default.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold"}},o.default.createElement("div",null),o.default.createElement("div",{className:"lrls-blue",onClick:function(){e.setState({visible:!0,idx:u.size,isAll:!0})}},"+添加项目")))}}]),t}();t.default=d},1754:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=(a(13),s(a(25)),s(a(10)),s(a(1060)));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m={decimalZero:!1,decimalPlaces:4},f=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},d(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.history,l=t.stockCardList,r=t.stockList,s=t.isOpenedWarehouse,d=t.stockCategoryList,f=t.commonCardList,p=this.state,g=p.isAll,y=p.visible,h=p.idx,E=p.categoryValue,v=1==l.size,b=function(e,t,n){return a(u.changeYysrStockCard(e,t,n,"CHTRXM"))},_=[{uuid:"ALL",name:"全部",top:!0,childList:[]}];d.map(function(e){_.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(_);var S=g?r.toJS():f;return S.map(function(e){e.name=e.key}),o.default.createElement("div",{className:"lrls-card"},o.default.createElement(c.ChosenPicker,{visible:y,type:"card",multiSelect:!0,title:"请选择存货",district:_,cardList:S,value:E,onChange:function(t){e.setState({categoryValue:t.key}),"ALL"!=t.key?(e.setState({isAll:!1}),a(u.getStockListByCategory(t))):e.setState({isAll:!0})},onOk:function(e){0!=e.length&&(b("card",e,h),a(u.getChzzListPrice(h,e)))},onCancel:function(){e.setState({visible:!1})}},o.default.createElement("span",null)),l.map(function(e,t){var l=e.get("cardUuid"),r=e.get("warehouseCardUuid"),d=e.get("warehouseCardCode"),f=e.get("warehouseCardName"),p=e.get("isOpenedQuantity"),g=e.get("quantity")?Number(e.get("quantity")):0,y=e.get("price")?Number(e.get("price")):0,h=e.get("amount")?Number(e.get("amount")):0,E=e.get("unitName")?e.get("unitName"):null,_=e.getIn(["financialInfo","openAssist"]),S=e.getIn(["financialInfo","openSerial"]),T=e.getIn(["financialInfo","openBatch"]),C=(e.getIn(["financialInfo","openShelfLife"]),(e.get("assistList")?e.get("assistList"):(0,i.fromJS)([])).reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},"")),L=e.get("batch")?e.get("batch"):"",N=e.get("expirationDate")?e.get("expirationDate"):"",w=N?L+"("+N+")":L;return o.default.createElement("div",{key:t,className:"lrls-bottom-line lrls-card-bottom"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},o.default.createElement("span",null,"存货明细(",t+1,")"),o.default.createElement("span",{className:"lrls-blue",style:{display:v?"none":""},onClick:function(){b("delete","",t)}},"删除")),o.default.createElement("div",{className:"lrls-more-card",onClick:function(){a(u.changeLrlsData(["views","idx"],t)),n.push("/editrunning/stock")}},o.default.createElement("div",{className:"lrls-single"},o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"存货:"),o.default.createElement("span",{className:l?"":"lrls-placeholder"},l?e.get("code")+" "+e.get("name"):" 未选择")),o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right",style:{display:s?"":"none"}},o.default.createElement("span",null,"仓库:"),o.default.createElement("span",{className:r?"":"lrls-placeholder"},r?d+" "+f:" 未选择"))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom",style:{display:_||T?"":"none"}},_?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"属性:"),o.default.createElement("span",{className:C?"":"lrls-placeholder"},C||" 未选择")):null,T?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"批次:"),o.default.createElement("span",{className:w?"":"lrls-placeholder"},w||" 未选择")):null),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{style:{display:p?"":"none"},className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",{className:S?"sn":""},"数量:"),o.default.createElement(c.Amount,m,g),o.default.createElement("span",null,E)),o.default.createElement("div",{style:{display:p?"":"none"},className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"单价:"),o.default.createElement(c.Amount,m,y)),o.default.createElement("div",{className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",null,"金额:"),o.default.createElement(c.Amount,null,h)))),o.default.createElement(c.Icon,{type:"arrow-right"})))}),o.default.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold"}},o.default.createElement("div",null),o.default.createElement("div",{className:"lrls-blue",onClick:function(){e.setState({visible:!0,idx:l.size})}},"+添加存货明细")))}}]),t}();t.default=f},1755:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=a(13),s=(m(a(25)),m(a(10)),m(a(1060))),d=m(a(1068));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={isAll:!0,visible:!1,idx:-1,cardType:"stockCardList",categoryValue:"ALL"},f(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.oriState,l=t.stockCardList,r=t.stockList,m=t.isModify,f=t.isOpenedWarehouse,p=t.stockCategoryList,g=t.commonCardList,y=t.jrAmount,h=t.amount,E=t.currentAmount,v=t.history,b=t.projectProperty,_=this.state,S=_.isAll,T=_.visible,C=_.idx,L=_.cardType,N=_.categoryValue,w=1==l.size,I=function(e,t,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"stockCardList";a(s.changeYysrStockCard(e,t,n,"XMJZ",l))},A=(l.map(function(e){return e.get("cardUuid")}),[{uuid:"ALL",name:"全部",top:!0,childList:[]}]);p.map(function(e){A.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(A);var k=S?r.toJS():g;k.map(function(e){e.name=e.key});var O=0,j=!0,R=!1;return"STATE_XMJZ_XMJQ"==n&&y<=0&&(j=!1),"XZ_CONSTRUCTION"==b&&(j=!1,R=!0,"STATE_XMJZ_XMJQ"==n&&0==y&&(R=!1),"STATE_XMJZ_XMJQ"==n&&m&&(R=!1)),o.default.createElement("div",null,o.default.createElement("div",{style:{display:j?"":"none"}},o.default.createElement(c.ChosenPicker,{visible:T,type:"card",multiSelect:!0,title:"请选择存货",icon:{type:"inventory-add",onClick:function(){a(d.beforeAddInventoryCardFromEditRunning([],v))}},district:A,cardList:k,value:N,onChange:function(t){e.setState({categoryValue:t.key}),"ALL"!=t.key?(e.setState({isAll:!1}),a(s.getStockListByCategory(t))):e.setState({isAll:!0})},onOk:function(e){e.length&&(I("card",e,C,L),a(s.getChzzListPrice(C,e,L)))},onCancel:function(){e.setState({visible:!1})}},o.default.createElement("span",null)),o.default.createElement("div",{className:"lrls-card"},l.map(function(e,t){var n=e.get("isOpenedQuantity"),l=e.get("cardUuid"),r=e.get("quantity")?Number(e.get("quantity")):0,u=e.get("price")?Number(e.get("price")):0,d=e.get("amount")?Number(e.get("amount")):0,m=(e.get("unitUuid"),e.get("warehouseCardUuid")),p=e.get("warehouseCardCode"),g=e.get("warehouseCardName"),y=e.get("unitName")?e.get("unitName"):null;O+=Number(d);var h=e.getIn(["financialInfo","openAssist"]),E=e.getIn(["financialInfo","openSerial"]),b=e.getIn(["financialInfo","openBatch"]),_=(e.getIn(["financialInfo","openShelfLife"]),(e.get("assistList")?e.get("assistList"):(0,i.fromJS)([])).reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},"")),S=e.get("batch")?e.get("batch"):"",T=e.get("expirationDate")?e.get("expirationDate"):"",C=T?S+"("+T+")":S;return o.default.createElement("div",{key:t,className:"lrls-bottom-line lrls-card-bottom"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},o.default.createElement("span",null,"存货明细(",t+1,")"),o.default.createElement("span",{className:"lrls-blue",style:{display:w?"none":""},onClick:function(){I("delete","",t)}},"删除")),o.default.createElement("div",{className:"lrls-more-card",onClick:function(){a(s.changeLrlsData(["views","idx"],t)),v.push("/editrunning/stock")}},o.default.createElement("div",{className:"lrls-single"},o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"存货:"),o.default.createElement("span",{className:l?"":"lrls-placeholder"},l?e.get("code")+" "+e.get("name"):" 未选择")),o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right",style:{display:f?"":"none"}},o.default.createElement("span",null,"仓库:"),o.default.createElement("span",{className:m?"":"lrls-placeholder"},m?p+" "+g:" 未选择"))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom",style:{display:h||b?"":"none"}},h?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"属性:"),o.default.createElement("span",{className:_?"":"lrls-placeholder"},_||" 未选择")):null,b?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"批次:"),o.default.createElement("span",{className:C?"":"lrls-placeholder"},C||" 未选择")):null),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{style:{display:n?"":"none"},className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",{className:E?"sn":""},"数量:"),o.default.createElement(c.Amount,null,r),o.default.createElement("span",null,y)),o.default.createElement("div",{style:{display:n?"":"none"},className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"单价:"),o.default.createElement(c.Amount,null,u)),o.default.createElement("div",{className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",null,"金额:"),o.default.createElement(c.Amount,null,d)))),o.default.createElement(c.Icon,{type:"arrow-right"})))}),o.default.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold"}},o.default.createElement("div",null,"入库金额：",o.default.createElement(c.Amount,{showZero:!0},(0,u.decimal)(O))),o.default.createElement("div",{className:"lrls-blue",onClick:function(){e.setState({visible:!0,idx:l.size,cardType:"stockCardList"})}},"+添加存货明细")))),o.default.createElement("div",{className:"lrls-card",style:{display:R?"":"none"}},o.default.createElement(c.Row,{className:"yysr-amount"},o.default.createElement("label",null,"收入金额:"),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"收入金额",value:h,onChange:function(e){a(s.changeLrlsData(["oriTemp","amount"],e))}})),o.default.createElement(c.Row,{className:"yysr-amount lrls-margin-top"},o.default.createElement("label",null,"成本金额:"),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"成本金额",value:E,onChange:function(e){a(s.changeLrlsData(["oriTemp","currentAmount"],e))}})),o.default.createElement(c.Row,{className:"yysr-amount lrls-margin-top"},o.default.createElement("label",null,"合同毛利:"),o.default.createElement(c.Amount,{showZero:!0},(0,u.decimal)(h-E)))))}}]),t}();t.default=p},1756:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),r=f(l),o=a(9),i=f(a(1304)),c=f(a(1483)),u=a(16),s=a(13),d=(m(a(25)),m(a(10)),m(a(1060)));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),n(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.history,n=e.oriTemp,l=e.isModify,m=e.accounts,f=e.accountList,p=e.pendingStrongList,g=n.get("jrAmount"),y=n.get("oriState"),h=g<0?-g:g,E=n.get("amount"),v=n.get("moedAmount"),b=n.get("beMoed"),_=n.getIn(["pendingManageDto","isManualWriteOff"]),S=g>=0?"收款金额":"付款金额",T=g>=0?"应收抹零":"应付抹零";if(_){var C=n.get("allHandleAmount");T=v>=0?"应收抹零":"应付抹零",S=C>=0?"收款金额":"付款金额"}var L=(0,s.decimal)(Math.abs(E)+Math.abs(v)),N=0!=E,w=n.get("usedAccounts"),I=1==p.filter(function(e){return e.get("beSelect")}).size;w&&(N=!1);var A=null;return l||(A=r.default.createElement("div",null,r.default.createElement("div",{className:"lrls-card"},r.default.createElement(u.Row,{className:"yysr-amount"},r.default.createElement("label",null,S,":"),r.default.createElement(u.XfInput.BorderInputItem,{mode:"amount",disabled:_||!_&&w,value:E,onChange:function(e){t(d.changeLrlsData(["oriTemp","amount"],e))},onClick:function(){_&&a.push("/editrunning/sfgl")}}),I?r.default.createElement("label",{className:"accountSwitch"},r.default.createElement(u.SwitchText,{checked:w,checkedChildren:"多账户",unCheckedChildren:"多账户",className:"threeTextSwitch",onChange:function(){t(d.changeLrlsData(["oriTemp","usedAccounts"],!w)),w?_||t(d.changeLrlsData(["oriTemp","amount"],h)):1==m.size&&t(d.accountMoreCard("add","",1))}})):null),N?r.default.createElement(u.Row,{className:"yysr-amount lrls-margin-top"},r.default.createElement("label",null,"账户:"),r.default.createElement(i.default,{dispatch:t,accountList:f,accounts:m})):null),w?r.default.createElement(c.default,{dispatch:t,history:a,accountList:f,accounts:m,beManagemented:!1,oriState:y,isManualWriteOff:_,sfglAmount:_?E:(0,s.decimal)(h-v)}):null,r.default.createElement(u.Row,{className:"lrls-card"},r.default.createElement(u.Row,{className:"lrls-more-card"},r.default.createElement("span",null,T),r.default.createElement("span",{className:"noTextSwitch"},r.default.createElement(u.Switch,{checked:b,onClick:function(){t(d.changeLrlsData(["oriTemp","beMoed"],!b)),b&&t(d.changeLrlsData(["oriTemp","moedAmount"],""));var e=p.toJS();e.forEach(function(e){e.moedAmount=""}),t(d.changeLrlsData(["oriTemp","pendingStrongList"],(0,o.fromJS)(e)))}}))),b?r.default.createElement(u.Row,{className:"lrls-padding-top"},r.default.createElement(u.Row,{className:"yysr-amount"},r.default.createElement("label",null,"抹零金额： "),r.default.createElement(u.XfInput.BorderInputItem,{mode:"amount",disabled:_,value:v,onChange:function(e){t(d.changeLrlsData(["oriTemp","moedAmount"],e))},onClick:function(){_&&a.push("/editrunning/sfgl")}}))):null),r.default.createElement(u.Row,{className:"lrls-card"},r.default.createElement(u.Row,{className:"lrls-more-card"},r.default.createElement("div",null,r.default.createElement("span",null,"核销金额："),r.default.createElement("span",{className:_?"text-decoration":"",onClick:function(){_&&a.push("/editrunning/sfgl")}},L?r.default.createElement(u.Amount,null,L):_?"点击输入":null,_?r.default.createElement(u.Icon,{type:"edit"}):null)),r.default.createElement(u.SwitchText,{checked:_,checkedChildren:"手动核销",unCheckedChildren:"自动核销",className:"fourTextSwitch",onChange:function(){t(d.changeLrlsData(["oriTemp","pendingManageDto","isManualWriteOff"],!_));var e=p.toJS(),a=0,n=0;e.forEach(function(e){if(e.moedAmount=e.moedAmount?e.moedAmount:"",e.handleAmount=e.handleAmount?e.handleAmount:e.amount,!_&&e.beSelect){var t=Number(e.handleAmount),l=Number(e.moedAmount);"debit"==e.direction?(a+=Number(t),n+=Number(l)):(a-=Number(t),n-=Number(l))}}),t(d.changeLrlsData(["oriTemp","pendingStrongList"],(0,o.fromJS)(e))),_?t(d.changeLrlsData(["oriTemp","moedAmount"],(0,s.decimal)(n))):(t(d.changeLrlsData(["oriTemp","amount"],(0,s.decimal)(Math.abs(a)))),t(d.changeLrlsData(["oriTemp","allHandleAmount"],a)),t(d.changeLrlsData(["oriTemp","moedAmount"],(0,s.decimal)(n))))}}))))),l&&("STATE_SFGL"==y&&(A=r.default.createElement("div",null,r.default.createElement("div",{className:"lrls-card"},r.default.createElement(u.Row,{className:"yysr-amount"},r.default.createElement("label",null,S,":"),_?r.default.createElement("span",{className:"text-decoration",onClick:function(){return a.push("/editrunning/sfgl")}},r.default.createElement(u.Amount,null,E),r.default.createElement(u.Icon,{type:"edit"})):r.default.createElement(u.XfInput.BorderInputItem,{mode:"amount",disabled:w,value:E,onChange:function(e){t(d.changeLrlsData(["oriTemp","amount"],e))}}),r.default.createElement("ul",null,r.default.createElement(u.SwitchText,{checked:_,checkedChildren:"手动核销",unCheckedChildren:"自动核销",className:"fourTextSwitch",onChange:function(){t(d.changeLrlsData(["oriTemp","pendingManageDto","isManualWriteOff"],!_))}})),I?r.default.createElement("label",{className:"accountSwitch"},r.default.createElement(u.SwitchText,{checked:w,checkedChildren:"多账户",unCheckedChildren:"多账户",className:"threeTextSwitch",onChange:function(){t(d.changeLrlsData(["oriTemp","usedAccounts"],!w)),w?_||t(d.changeLrlsData(["oriTemp","amount"],h)):1==m.size&&t(d.accountMoreCard("add","",1))}})):null),N?r.default.createElement(u.Row,{className:"yysr-amount lrls-margin-top"},r.default.createElement("label",null,"账户:"),r.default.createElement(i.default,{dispatch:t,accountList:f,accounts:m})):null),w?r.default.createElement(c.default,{dispatch:t,history:a,accountList:f,accounts:m,beManagemented:!1,oriState:y,isManualWriteOff:_,sfglAmount:_?E:(0,s.decimal)(h-v)}):null)),"STATE_SFGL_ML"==y&&(A=r.default.createElement("div",{className:"lrls-card"},r.default.createElement(u.Row,{className:"lrls-more-card"},_?null:r.default.createElement("label",null,T,":"),_?r.default.createElement("div",null,r.default.createElement("span",{className:"title-left"},T,":"),r.default.createElement("span",{className:"text-decoration",onClick:function(){return a.push("/editrunning/sfgl")}},r.default.createElement(u.Amount,null,E),r.default.createElement(u.Icon,{type:"edit"}))):r.default.createElement(u.XfInput.BorderInputItem,{mode:"amount",value:E,onChange:function(e){t(d.changeLrlsData(["oriTemp","amount"],e))}}),r.default.createElement(u.SwitchText,{checked:_,checkedChildren:"手动核销",unCheckedChildren:"自动核销",className:"fourTextSwitch",onChange:function(){t(d.changeLrlsData(["oriTemp","pendingManageDto","isManualWriteOff"],!_))}}))))),A}}]),t}();t.default=p},1757:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=(a(9),a(16)),c=a(13),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1060));var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.jrTaxAmount,n=e.jrAmount,l=e.amount,r=e.pendingStrongList,s=e.isModify,d=e.inputTax,m=e.taxTotal,f=[],p=!0;r.map(function(e){e.get("beSelect")&&(f.push("1"),e.get("beOpened")&&(p=!1))});var g=f.length>1,y=1==f.length,h=a;return g||(h=a*l/n),o.default.createElement("div",{className:"lrls-card"},o.default.createElement(i.Row,{className:"lrls-more-card"},o.default.createElement("label",null,d?"开票税额":"价税合计",":"),o.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",disabled:g,placeholder:"填写金额",value:d?l:m,onChange:function(e){if(d)t(u.changeLrlsData(["oriTemp","amount"],e));else{var l=(0,c.decimal)(e*n/a);t(u.changeLrlsData(["oriTemp","amount"],l)),t(u.changeLrlsData(["oriTemp","taxTotal"],e))}}}),o.default.createElement("span",{className:"noTextSwitch",style:{marginLeft:"6px",display:!s&&y?"":"none"}},o.default.createElement(i.SwitchText,{checked:d,checkedChildren:"",unCheckedChildren:"",onChange:function(){t(u.changeLrlsData(["oriTemp","inputTax"],!d)),t(u.changeLrlsData(["oriTemp","amount"],n)),d&&t(u.changeLrlsData(["oriTemp","taxTotal"],a))}}))),o.default.createElement("div",{className:"lrls-placeholder lrls-margin-top",style:{paddingLeft:".6rem",display:p?"":"none"}},o.default.createElement("span",null,d?o.default.createElement("span",null,"价税合计: ",o.default.createElement(i.Amount,{showZero:!0},h)):o.default.createElement("span",null,"开票税额: ",o.default.createElement(i.Amount,{showZero:!0},l))),o.default.createElement("div",null,"待处理价税合计: ",o.default.createElement(i.Amount,{showZero:!0},a))))}}]),t}();t.default=s},1758:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=(a(9),a(16)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1060));function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.taxRateList=[],u(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"componentDidMount",value:function(){var e=this;this.props.rateOptionList.toJS().forEach(function(t){e.taxRateList.push({key:t+"%",value:t})}),this.taxRateList.push({key:"**%",value:-1})}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.categoryType,n=e.oriState,l=e.billList,r=e.amount,u=e.billStrongList,s=e.scale,d=e.payableRate,m=e.outputRate,f=e.isModify,p=e.oriBillType,g=l?l.getIn([0,"billType"]):"",y=l?l.getIn([0,"billState"]):"",h=l?l.getIn([0,"taxRate"]):"",E=l?l.getIn([0,"tax"]):"",v=-1==h,b=[],_={bill_other:"其他票据",bill_common:"发票",bill_special:"增值税专用发票"}[g],S=!1,T="bill_states_make_out"===y||"bill_states_auth"===y;switch(a){case"LB_YYSR":S="STATE_YYSR_DJ"!=n,b=[{key:"发票",value:"bill_common"},{key:"其他票据",value:"bill_other"}];break;case"LB_YYZC":("general"==s||f)&&(S="STATE_YYZC_DJ"!=n,b=[{key:"增值税专用发票",value:"bill_special"},{key:"其他票据",value:"bill_other"}]);break;case"LB_FYZC":("general"==s||f)&&(S="STATE_FY_DJ"!=n,b=[{key:"增值税专用发票",value:"bill_special"},{key:"其他票据",value:"bill_other"}]);break;case"LB_CQZC":b=[{key:"发票",value:"bill_common"},{key:"其他票据",value:"bill_other"}],"STATE_CQZC_YF"==n&&(b=[{key:"增值税专用发票",value:"bill_special"},{key:"其他票据",value:"bill_other"}]),"general"==s&&(S=!0),"small"==s&&(S="STATE_CQZC_YS"==n,f&&"STATE_CQZC_YF"==n&&"bill_special"==p&&(S=!0));break;case"LB_YYWSR":S=!0,b=[{key:"发票",value:"bill_common"},{key:"其他票据",value:"bill_other"}];break;case"LB_YYWZC":("general"==s||f)&&(S=!0,b=[{key:"增值税专用发票",value:"bill_special"},{key:"其他票据",value:"bill_other"}])}return"isEnable"==s&&(S=!1,f&&["bill_special","bill_common"].includes(p)&&(S=!0)),"small"==s&&["LB_YYZC","LB_FYZC","LB_YYWZC"].includes(a)&&["","bill_other"].includes(g)&&(S=!1,f&&"bill_special"==p&&(S=!0)),S?o.default.createElement(i.Row,{className:"lrls-card"},o.default.createElement(i.Row,{className:"yysr-bill"},o.default.createElement("div",{className:"lrls-more-card"},o.default.createElement("label",null,"票据类型:"),o.default.createElement(i.Single,{disabled:!!u.size,className:"lrls-single",district:b,value:g,onOk:function(e){t(c.changeLrlsData(["oriTemp","billList",0,"billType"],e.value)),t(c.changeTaxRate("general"==s?m:d)),"bill_common"==e.value&&t(c.changeLrlsData(["oriTemp","billList",0,"billState"],"bill_states_make_out")),"bill_special"==e.value&&t(c.changeLrlsData(["oriTemp","billList",0,"billState"],"bill_states_auth"))}},o.default.createElement(i.Row,{className:"lrls-category lrls-padding"},o.default.createElement("span",null,_),o.default.createElement(i.Icon,{type:"triangle"})))),"bill_common"==g?o.default.createElement(i.SwitchText,{checked:T,checkedChildren:"已开票",unCheckedChildren:"未开票",className:"threeTextSwitch",onChange:function(){if(!u.size){var e="";(({bill_states_not_make_out:function(){return e="bill_states_make_out"},bill_states_make_out:function(){return e="bill_states_not_make_out"}})[y]||function(){return null})(),t(c.changeLrlsData(["oriTemp","billList",0,"billState"],e))}}}):null,"bill_special"==g?o.default.createElement(i.SwitchText,{checked:T,checkedChildren:"已认证",unCheckedChildren:"未认证",className:"threeTextSwitch",onChange:function(){if(!u.size){var e="";(({bill_states_not_auth:function(){return e="bill_states_auth"},bill_states_auth:function(){return e="bill_states_not_auth"}})[y]||function(){return null})(),t(c.changeLrlsData(["oriTemp","billList",0,"billState"],e))}}}):null),"bill_other"!=g?o.default.createElement(i.Row,null,o.default.createElement(i.Row,{className:"lrls-more-card lrls-margin-top"},o.default.createElement("label",null,"税率:"),o.default.createElement(i.Single,{disabled:!!u.size,className:"lrls-single",district:this.taxRateList,value:h,onOk:function(e){t(c.changeTaxRate(e.value))}},o.default.createElement(i.Row,{className:"lrls-category lrls-padding"},o.default.createElement("span",null,(-1==h?"**":h)+"%",o.default.createElement("span",{className:"lrls-placeholder",style:{display:v?"none":""}},"(税额：",o.default.createElement(i.Amount,{showZero:!0},E)," 价税合计: ",o.default.createElement(i.Amount,{showZero:!0},r),")")),o.default.createElement(i.Icon,{type:"triangle"})))),o.default.createElement(i.Row,{className:"yysr-amount lrls-margin-top",style:{display:v?"":"none"}},o.default.createElement("label",null,"税额："),o.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:["LB_FYZC","LB_CQZC"].includes(a),placeholder:"填写金额",value:E,onChange:function(e){t(c.changeLrlsData(["oriTemp","billList",0,"tax"],e))}}))):null,u.size&&"bill_special"==g?o.default.createElement(i.Row,{className:"lrls-margin-top"},"认证流水：",u.getIn([0,"oriDate"])+" "+u.getIn([0,"jrIndex"]),"号"):null,u.size&&"bill_common"==g?o.default.createElement(i.Row,{className:"lrls-margin-top"},"开票流水：",u.getIn([0,"oriDate"])+" "+u.getIn([0,"jrIndex"]),"号"):null):null}}]),t}();t.default=s},1759:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=(a(9),a(16)),c=(u(a(25)),u(a(183)),u(a(1060)));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.beCleaning,n=e.assets,l=(e.amount,e.beProject,e.usedProject,e.projectList),r=e.projectCardList,u=n.get("originalAssetsAmount"),s=n.get("depreciationAmount"),d=n.get("cleaningAmount"),m=r.get(0);m.get("code"),m.get("name"),l.filter(function(e){return 0==e.get("value").includes("COMNCRD")});return o.default.createElement(i.Row,{className:"lrls-card"},o.default.createElement(i.Row,{className:"lrls-more-card"},o.default.createElement("span",null,"处置损益"),o.default.createElement("div",{className:"noTextSwitch"},o.default.createElement(i.Switch,{checked:a,onClick:function(){t(c.changeLrlsData(["oriTemp","beCleaning"],!a)),a||t(c.autoCqzcCzAmount())}}))),a?o.default.createElement(i.Row,null,o.default.createElement(i.Row,null,o.default.createElement("label",{style:{marginRight:".15rem"}},d>=0?"净收益金额：":"净损失金额："),o.default.createElement(i.Amount,{showZero:!0},Math.abs(d))),o.default.createElement(i.Row,{className:"yysr-amount margin-top-bot lrls-jzsy"},o.default.createElement("label",null,"资产原值:"),o.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"请填写资产原值",value:u,onChange:function(e){t(c.changeLrlsData(["oriTemp","assets","originalAssetsAmount"],e)),t(c.autoCqzcCzAmount())}})),o.default.createElement(i.Row,{className:"yysr-amount margin-top-bot lrls-jzsy"},o.default.createElement("label",null,"累计折旧余额:"),o.default.createElement(i.XfInput.BorderInputItem,{mode:"amount",placeholder:"请填写累计折旧余额",value:s,onChange:function(e){t(c.changeLrlsData(["oriTemp","assets","depreciationAmount"],e)),t(c.autoCqzcCzAmount())}}))):null)}}]),t}();t.default=s},1760:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=(a(9),a(16)),c=a(13),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1060));function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={showList:!0},s(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.categoryType,n=t.oriState,l=t.pendingStrongList,r=t.jrAmount,s=t.beAccrued,d=t.propertyTax,m=t.propertyPay,f=t.strongList,p=t.dispatch,g=t.projectProperty,y=t.isCopy,h=this.state.showList,E=!1,v="待支付金额",b="",_="jrJvTypeName",S=null,T=l.some(function(e){return e.get("beSelect")});switch(a){case"LB_ZSKX":"STATE_ZS_TH"===n&&(E=!0,b="其他应付");break;case"LB_ZFKX":"STATE_ZF_SH"===n&&(E=!0,b="其他应收");break;case"LB_JK":s&&"STATE_JK_ZFLX"===n&&(E=!0);break;case"LB_TZ":!s||"STATE_TZ_SRGL"!==n&&"STATE_TZ_SRLX"!==n||(E=!0,v="待收入金额");break;case"LB_ZB":s&&"STATE_ZB_ZFLR"===n&&(E=!0);break;case"LB_SFZC":(({SX_ZZS:function(){"STATE_SF_JN"===n&&(E=!0,v="待处理税费"),"STATE_SF_SFJM"===n&&(E=!0,v="核销总计")},SX_GRSF:function(){E=!1},SX_QTSF:function(){s&&"STATE_SF_JN"===n&&(E=!0,v="待支付金额"),"STATE_SF_SFJM"===n&&(E=!0,v="核销总计")},SX_QYSDS:function(){s&&"STATE_SF_JN"===n&&(E=!0,v="待支付金额"),"STATE_SF_SFJM"===n&&(E=!0,v="核销总计")}})[d]||function(){return null})();break;case"LB_XCZC":(({SX_GZXJ:function(){!s||"STATE_XC_FF"!==n&&"STATE_XC_DK"!=n||(E=!0,v=r>=0?"待处理付款金额：":"待处理收款金额：")},SX_SHBX:function(){!s||"STATE_XC_JN"!==n&&"STATE_XC_DJ"!=n||(E=!0,v=r>=0?"待处理付款金额：":"待处理收款金额：")},SX_ZFGJJ:function(){!s||"STATE_XC_JN"!==n&&"STATE_XC_DJ"!=n||(E=!0,v=r>=0?"待处理付款金额：":"待处理收款金额：")},SX_FLF:function(){s&&"STATE_XC_FF"===n&&(E=!0,v=r>=0?"待处理付款金额：":"待处理收款金额：")},SX_QTXC:function(){s&&"STATE_XC_FF"===n&&(E=!0,v=r>=0?"待处理付款金额：":"待处理收款金额：")}})[m]||function(){return null})();break;case"LB_KJFP":T&&(S=o.default.createElement(i.Row,{className:"jr-card lrls-bottom",key:"component"},o.default.createElement("div",{className:"hx-title lrls-type"},o.default.createElement("span",null,"关联核销"),o.default.createElement("span",{className:"lrls-placeholder",onClick:function(){p(u.changeLrlsData(["views","showJrPage"],!0))}},"待开发票税额：",o.default.createElement(i.Amount,{showZero:!0},r)," ",o.default.createElement(i.Icon,{type:"arrow-right"}))),l.map(function(e,t){if(e.get("beSelect")){var a=-1==e.get("taxRate")?"**":e.get("taxRate");return o.default.createElement("div",{key:t,className:"hx-top-line"},o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",{className:"overElli"},e.get("categoryName")),o.default.createElement("div",null,e.get("beOpened")?"期初值":e.get("jrIndex")+"号")),o.default.createElement("div",{className:"jr-item"},o.default.createElement("span",null,e.get("beOpened")?"":"税率："+a+"%"),o.default.createElement("div",null,o.default.createElement(i.Amount,{className:"hx-bold",showZero:!0},Math.abs(e.get("notHandleAmount"))))))}})));break;case"LB_FPRZ":T&&(S=o.default.createElement(i.Row,{className:"jr-card lrls-bottom",key:"component"},o.default.createElement("div",{className:"hx-title lrls-type"},o.default.createElement("span",null,"关联核销"),o.default.createElement("span",{className:"lrls-placeholder",onClick:function(){p(u.changeLrlsData(["views","showJrPage"],!0))}},"待认证税额：",o.default.createElement(i.Amount,{showZero:!0},r)," ",o.default.createElement(i.Icon,{type:"arrow-right"}))),l.map(function(e,t){if(e.get("beSelect"))return o.default.createElement("div",{key:t,className:"hx-top-line"},o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",{className:"overElli"},e.get("categoryName")),o.default.createElement("div",null,e.get("beOpened")?"期初值":e.get("jrIndex")+"号")),o.default.createElement("div",{className:"jr-item"},o.default.createElement("span",null),o.default.createElement("div",null,o.default.createElement(i.Amount,{className:"hx-bold",showZero:!0},Math.abs(e.get("notHandleAmount"))))))})));break;case"LB_JZSY":T&&(S=o.default.createElement(i.Row,{className:"jr-card lrls-bottom lrls-bottom",key:"component"},o.default.createElement("div",{className:"hx-title lrls-type"},o.default.createElement("span",null,"关联核销"),o.default.createElement("span",{className:"lrls-placeholder",onClick:function(){p(u.changeLrlsData(["views","showJrPage"],!0))}},"处置金额合计：",o.default.createElement(i.Amount,{showZero:!0},r)," ",o.default.createElement(i.Icon,{type:"arrow-right"}))),l.map(function(e,t){if(e.get("beSelect"))return o.default.createElement("div",{key:t,className:"hx-top-line"},o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",null,e.get("jrIndex")," 号"),o.default.createElement("div",{className:"overElli"},e.get("oriDate"))),o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",{className:"overElli"},e.get("categoryName")),o.default.createElement("div",null,o.default.createElement(i.Amount,{className:"hx-bold",showZero:!0},e.get("amount")))))})));break;case"LB_SFGL":T&&(S=o.default.createElement(i.Row,{className:"jr-card lrls-bottom",key:"component"},o.default.createElement("div",{className:"hx-title lrls-type"},o.default.createElement("span",null,"关联核销"),o.default.createElement("span",{className:"lrls-placeholder",onClick:function(){p(u.changeLrlsData(["views","showJrPage"],!0))}},"待核销",r>=0?"收":"付","款金额：",o.default.createElement(i.Amount,{showZero:!0},Math.abs(Number(r)))," ",o.default.createElement(i.Icon,{type:"arrow-right"}))),l.map(function(e,t){if(e.get("beSelect"))return o.default.createElement("div",{key:t,className:"hx-top-line"},o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",{className:"overElli"},e.get("categoryName")),e.get("beOpened")?o.default.createElement("span",null,"期初值"):o.default.createElement("div",null,e.get("jrIndex"),"  号")),o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",null,"credit"==e.get("direction")?"贷方发生":"借方发生"),o.default.createElement("div",null,o.default.createElement(i.Amount,{showZero:!0,className:"hx-bold"},e.get("amount")))))})));break;case"LB_JZCB":T&&(S=o.default.createElement(i.Row,{className:"jr-card lrls-bottom",key:"component"},o.default.createElement("div",{className:"hx-title lrls-type"},o.default.createElement("span",null,"关联核销"),o.default.createElement("span",{className:"lrls-placeholder",onClick:function(){p(u.changeLrlsData(["views","showJrPage"],!0))}},"STATE_YYSR_XS"===n?"收入金额合计：":"退销金额合计：",o.default.createElement(i.Amount,{showZero:!0},r)," ",o.default.createElement(i.Icon,{type:"arrow-right"}))),l.map(function(e,t){if(e.get("beSelect")){e.get("isOpenedQuantity");var a=e.get("unitCardName")?e.get("unitCardName"):"",n=e.get("quantity")?e.get("quantity"):0;return o.default.createElement("div",{key:t,className:"hx-top-line"},o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",{className:"overElli"},e.get("categoryName")),o.default.createElement("div",null,e.get("jrIndex")," 号")),o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",{className:"overElli"},e.get("stockCardCode")," ",e.get("stockCardName"),n?"(数量:"+n+a+")":null),o.default.createElement("div",null,o.default.createElement(i.Amount,{className:"hx-bold",showZero:!0},Math.abs(e.get("amount"))))))}})));break;case"LB_GGFYFT":E=!0,v="待分摊金额",_="categoryName";break;case"LB_XMJZ":if((E=l.size>0)&&["STATE_XMJZ_JZRK","STATE_XMJZ_QRSRCB"].includes(n)){var C="待入库金额：";"STATE_XMJZ_QRSRCB"==n&&(C="待确认合同毛利："),S=o.default.createElement(i.Row,{className:"lrls-card lrls-type",key:"component"},o.default.createElement("span",null,r?C:null,o.default.createElement(i.Amount,null,r)),o.default.createElement("span",{className:"lrls-placeholder",onClick:function(){p(u.changeLrlsData(["views","showJrPage"],!0))}},"查看详情 ",o.default.createElement(i.Icon,{type:"arrow-right"})))}if(E&&"STATE_XMJZ_XMJQ"==n){var L="发生金额:",N="已入库金额:",w="待入库金额：",I=0,A=0,k=!1;"XZ_CONSTRUCTION"==g&&(L="借方金额:",N="贷方金额:",w="待确认合同毛利：",k=!0),S=o.default.createElement(i.Row,{className:"jr-card lrls-bottom",key:"component"},o.default.createElement("div",{className:"hx-title lrls-type"},o.default.createElement("span",null,"关联核销"),o.default.createElement("span",{className:"lrls-placeholder"},r?w:null,o.default.createElement(i.Amount,null,r))),l.map(function(e,t){var a=e.get("happenAmount"),n=e.get("storeAmount"),l=e.get("direction");return"XZ_CONSTRUCTION"==g&&(L="debit"==e.get("direction")?"待确认收入":"已确认收入",N="debit"==e.get("direction")?"待确认成本":"已确认成本","debit"==l&&(a&&(I+=Number(a)),n&&(A+=Number(n))),"credit"==l&&(a&&(I-=Number(a)),n&&(A-=Number(n)))),o.default.createElement("div",{key:t,className:"hx-top-line"},o.default.createElement("div",{className:"jr-item jr-line"},o.default.createElement("span",null,e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),o.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",{className:"overElli"},e.get("categoryName"))),o.default.createElement("div",{className:"jr-item"},o.default.createElement("span",{className:"overElli"},e.get("oriAbstract"))),o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",null,a?L:null," ",o.default.createElement(i.Amount,{className:"hx-bold"},a)),o.default.createElement("div",null,n?N:null," ",o.default.createElement(i.Amount,{className:"hx-bold"},n))))}),k?o.default.createElement("div",{className:"hx-title lrls-type hx-top-line"},o.default.createElement("span",null,"待确认收入净额 ",o.default.createElement(i.Amount,{showZero:!0},(0,c.decimal)(I))),o.default.createElement("span",null,"待确认成本净额 ",o.default.createElement(i.Amount,{showZero:!0},(0,c.decimal)(A)))):null)}}!S&&E&&T&&(S=o.default.createElement(i.Row,{className:"jr-card lrls-bottom",key:"component"},o.default.createElement("div",{className:"hx-title lrls-type"},o.default.createElement("span",null,"关联核销"),o.default.createElement("span",{className:"lrls-placeholder",onClick:function(){p(u.changeLrlsData(["views","showJrPage"],!0))}},v,"：",o.default.createElement(i.Amount,{showZero:!0},"LB_XCZC"==a?Math.abs(r):r)," ",o.default.createElement(i.Icon,{type:"arrow-right"}))),l.map(function(e,t){if(e.get("beSelect"))return o.default.createElement("div",{key:t,className:"hx-top-line"},o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",null,e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),o.default.createElement("div",null,e.get("oriDate"))),o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",{className:"overElli"},e.get(_)?e.get(_):b),o.default.createElement("div",null,o.default.createElement(i.Amount,{showZero:!0,className:"hx-bold"},e.get("notHandleAmount")))))})));var O=null;if(f.size&&!y){var j=0,R=o.default.createElement("div",{style:{display:h?"":"none"}},f.map(function(e,t){return j+=e.get("handleAmount"),o.default.createElement("div",{key:t,className:"hx-top-line"},o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",null,e.get("jrIndex"),"号"),o.default.createElement("div",null,e.get("oriDate"))),o.default.createElement("div",{className:"jr-item"},o.default.createElement("div",null,e.get("jrJvTypeName")),o.default.createElement("div",null,o.default.createElement(i.Amount,{className:"hx-bold"},e.get("handleAmount")))))}));O=o.default.createElement(i.Row,{className:"jr-card lrls-bottom",key:"strongComponent"},o.default.createElement("div",{className:"jr-item",onClick:function(){return e.setState({showList:!h})}},o.default.createElement("div",null,"核销总计：",o.default.createElement(i.Amount,{showZero:!0},j)),o.default.createElement("div",null,h?"收起":"展开",o.default.createElement(i.Icon,{style:h?{transform:"rotate(180deg)"}:"",type:"arrow-down"}))),R)}var P=[];return P.push(S),P.push(O),P}}]),t}();t.default=d},1761:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=(a(9),a(16)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1060));var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.categoryType,n=e.disabled,l=e.handleType,r=!1,u=[],s="";switch(a){case"LB_JK":r=!0,u=[{key:"取得借款",value:"JR_HANDLE_QDJK"},{key:"偿还利息",value:"JR_HANDLE_CHLX"},{key:"偿还本金",value:"JR_HANDLE_CHBJ"}],s={JR_HANDLE_QDJK:"取得借款",JR_HANDLE_CHLX:"偿还利息",JR_HANDLE_CHBJ:"偿还本金"}[l];break;case"LB_TZ":r=!0,u=[{key:"对外投资",value:"JR_HANDLE_DWTZ"},{key:"取得收益",value:"JR_HANDLE_QDSY"},{key:"收回投资",value:"JR_HANDLE_SHTZ"}],s={JR_HANDLE_DWTZ:"对外投资",JR_HANDLE_QDSY:"取得收益",JR_HANDLE_SHTZ:"收回投资"}[l];break;case"LB_ZB":r=!0,u=[{key:"实收资本",value:"JR_HANDLE_ZZ"},{key:"资本溢价",value:"JR_HANDLE_ZBYJ"},{key:"利润分配",value:"JR_HANDLE_LRFP"},{key:"减资",value:"JR_HANDLE_JZ"}],s={JR_HANDLE_ZZ:"实收资本",JR_HANDLE_LRFP:"利润分配",JR_HANDLE_JZ:"减资",JR_HANDLE_ZBYJ:"资本溢价"}[l];break;case"LB_CQZC":r=!0,u=[{key:"购进资产",value:"JR_HANDLE_GJ"},{key:"处置",value:"JR_HANDLE_CZ"}],s={JR_HANDLE_GJ:"购进资产",JR_HANDLE_CZ:"处置"}[l]}return r?o.default.createElement("div",{className:"lrls-more-card lrls-margin-top"},o.default.createElement("label",null,"处理类型:"),o.default.createElement(i.Single,{className:"lrls-single",disabled:n,district:u,value:l,onOk:function(e){t(c.changeHandleType(e.value))}},o.default.createElement(i.Row,{className:"lrls-padding lrls-category"},o.default.createElement("span",null,s),o.default.createElement(i.Icon,{type:"triangle",style:{color:n?"#ccc":""}})))):null}}]),t}();t.default=u},1762:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=d(a(1060)),s=d(a(10));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.categoryType,n=e.disabled,l=e.categoryList,r=e.uuid,d=e.name,m=(e.beProject,e.showJzcb),f=e.oriState,p=!1,g=null,y=l.toJS();switch(function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(y),a){case"LB_JZSY":p=!0,g=function(e){t(u.changeLrlsData(["oriTemp","relationCategoryUuid"],e.uuid)),t(u.changeLrlsData(["oriTemp","relationCategoryName"],e.name)),t(u.changeLrlsData(["oriTemp","beProject"],e.beProject)),t(u.changeLrlsData(["oriTemp","usedProject"],e.beProject)),t(u.changeLrlsData(["oriTemp","projectRange"],(0,i.fromJS)(e.projectRange))),t(u.changeLrlsData(["oriTemp","projectCardList"],(0,i.fromJS)([{amount:""}]))),t(u.getJzsyList()),e.beProject&&(t(u.getProjectCardList(e.projectRange)),t(u.getProjectTreeList()))};break;case"LB_ZJTX":p=!0,g=function(e){t(u.zjtxSelectCategory((0,i.fromJS)(e))),t(u.changeLrlsData(["oriTemp","projectRange"],(0,i.fromJS)(e.projectRange))),e.beProject&&(t(u.getProjectCardList(e.projectRange)),t(u.getProjectTreeList()))};break;case"LB_JZCB":p=m,g=function(e){if(t(u.changeLrlsData(["oriTemp","relationCategoryUuid"],e.uuid)),t(u.changeLrlsData(["oriTemp","relationCategoryName"],e.name)),t(u.changeLrlsData(["oriTemp","relationCategoryType"],e.categoryType)),t(u.getCostStockByCategory("",!0)),t(u.getCostStockCategory()),"STATE_YYSR_ZJ"==f){t(u.changeLrlsData(["oriTemp","beProject"],e.beProject)),t(u.changeLrlsData(["oriTemp","usedProject"],e.beProject)),t(u.changeLrlsData(["oriTemp","projectCardList"],(0,i.fromJS)([{}]))),t(u.changeLrlsData(["oriTemp","projectRange"],(0,i.fromJS)(e.projectRange))),t(u.changeLrlsData(["oriTemp","propertyCostList"],(0,i.fromJS)(e.propertyCostList))),e.beProject&&(t(u.getProjectCardList(e.projectRange)),t(u.getProjectTreeList()));var a="";e.propertyCostList&&e.propertyCostList.length>0&&(a=e.propertyCostList[0]),t(u.changeLrlsData(["oriTemp","propertyCost"],a))}else t(u.changeLrlsData(["oriTemp","usedProject"],!1))};break;case"LB_JXSEZC":p=!0,g=function(e){t(u.changeHandleCategory(e))}}return p?o.default.createElement(c.Row,{className:m?"lrls-more-card":"lrls-more-card lrls-margin-top"},o.default.createElement("label",null,"处理类别: "),o.default.createElement("div",{className:"antd-single-picker"},o.default.createElement(c.ChosenPicker,{district:y,parentDisabled:!0,value:r,disabled:n,onChange:function(e){g(e)}},o.default.createElement(c.Row,{className:"lrls-padding lrls-category",onClick:function(e){return 0==l.size&&["LB_JZSY","LB_ZJTX"].includes(a)?(e.stopPropagation(),s.toast.info("无处理类别，请在流水设置-长期资产中新建",2)):0==l.size&&m?(e.stopPropagation(),s.toast.info("无匹配的处理类别",2)):void 0}},o.default.createElement("span",{className:"请选择处理类别"==d?"lrls-placeholder":""},d),o.default.createElement(c.Icon,{type:"triangle",style:{color:n?"#ccc":""}}))))):null}}]),t}();t.default=m},1763:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=(a(9),a(16)),c=(u(a(25)),u(a(1060)));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.costList=function(e){var t=[];return e.forEach(function(e){"XZ_SALE"==e?t.push({key:"销售费用",value:"XZ_SALE"}):"XZ_MANAGE"==e?t.push({key:"管理费用",value:"XZ_MANAGE"}):"XZ_FINANCE"==e&&t.push({key:"财务费用",value:"XZ_FINANCE"})}),t},s(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.categoryType,n=e.oriState,l=e.propertyCostList,r=e.propertyCost,u=(e.beAccrued,e.hasSelect),s=e.isHandleCategory,d=l?this.costList(l.toJS()):[],m="请选择费用性质";r&&(m={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用",XZ_FINANCE:"财务费用",XZ_SCCB:"生产成本",XZ_FZSCCB:"辅助生产成本",XZ_ZZFY:"制造费用",XZ_HTCB:"合同成本",XZ_JJFY:"间接费用",XZ_JXZY:"机械作业"}[r]);var f=!1;switch(a){case"LB_FYZC":f=d.length>1&&"STATE_FY_DJ"!=n,s&&(f=!1);break;case"LB_XCZC":f=(!u||!["STATE_XC_FF","STATE_XC_JN"].includes(n))&&d.length>1,["STATE_XC_DK","STATE_XC_DJ"].includes(n)&&(f=!1),s&&(f=!1);break;case"LB_ZJTX":f=!!(s&&d.length>1);break;case"LB_JZCB":f=!!(s&&"STATE_YYSR_ZJ"==n&&d.length>1);break;case"LB_JXSEZC":f=d.length>1,s&&(f=!1)}return f?o.default.createElement(i.Row,{className:s?"lrls-more-card lrls-margin-top lrls-bottom":"lrls-more-card lrls-margin-top"},o.default.createElement("label",null,"费用性质: "),o.default.createElement(i.Single,{className:"lrls-single",district:d,value:r,disabled:["XZ_SCCB","XZ_FZSCCB","XZ_ZZFY","XZ_HTCB","XZ_JJFY","XZ_JXZY"].includes(r),onOk:function(e){t(c.changeLrlsData(["oriTemp","propertyCost"],e.value))}},o.default.createElement(i.Row,{className:"lrls-padding lrls-category"},o.default.createElement("span",{className:["请选择费用性质","生产成本","辅助生产成本","制造费用","合同成本","间接费用","机械作业"].includes(m)?"lrls-placeholder":""},m),o.default.createElement(i.Icon,{type:"triangle"})))):null}}]),t}();t.default=d},1764:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1060));var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.beCarryover,n=e.stockCardList,l=e.carryoverCardList,r=e.isOpenedWarehouse,s=e.isCopy,d=0,m=[];return o.default.createElement(c.Row,{className:"lrls-card"},o.default.createElement(c.Row,{className:"lrls-more-card"},o.default.createElement("span",null,"结转成本"),o.default.createElement("div",{className:"noTextSwitch"},o.default.createElement(c.Switch,{checked:a,onClick:function(){t(u.changeLrlsData(["oriTemp","beCarryover"],!a)),s&&!a&&t(u.changeLrlsData(["oriTemp","carryoverCardList"],n.map(function(e){return e.set("amount","")})))}}))),o.default.createElement("div",{style:{display:a?"":"none"}},n.map(function(e,a){var n=e.get("cardUuid"),s=e.get("warehouseCardUuid")?e.get("warehouseCardUuid"):"",f=e.get("batch")?e.get("batch"):"",p=n+"_"+s+"_"+f+"_"+(e.get("assistList")?e.get("assistList").toJS().map(function(e){return e.propertyUuid}).sort():[]).join("_");if(m.includes(p))return null;m.push(p),d++;var g=e.getIn(["financialInfo","openAssist"]),y=(e.getIn(["financialInfo","openSerial"]),e.getIn(["financialInfo","openBatch"])),h=(e.getIn(["financialInfo","openShelfLife"]),(e.get("assistList")?e.get("assistList"):(0,i.fromJS)([])).reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},"")),E=e.get("expirationDate")?e.get("expirationDate"):"",v=E?f+"("+E+")":f;return o.default.createElement("div",{key:a,className:"lrls-bottom-line lrls-margin-bottom"},o.default.createElement(c.Row,{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},o.default.createElement("span",null,"存货明细(",d,")：")),o.default.createElement("div",{className:"lrls-single"},o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"存货:"),o.default.createElement("span",{className:n?"":"lrls-placeholder"},n?e.get("code")+" "+e.get("name"):" 未选择")),o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right",style:{display:r?"":"none"}},o.default.createElement("span",null,"仓库:"),o.default.createElement("span",{className:s?"":"lrls-placeholder"},s?e.get("warehouseCardCode")+" "+e.get("warehouseCardName"):" 未选择"))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom",style:{display:g||y?"":"none"}},g?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"属性："),o.default.createElement("span",{className:h?"":"lrls-placeholder"},h||" 未选择")):null,y?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"批次："),o.default.createElement("span",{className:v?"":"lrls-placeholder"},v||" 未选择")):null),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("label",null,"金额:"),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",disabled:!e.get("cardUuid"),placeholder:"填写成本金额",value:l.getIn([a,"amount"]),onChange:function(e){t(u.changeYysrStockCard("carryoverCardList",e,a))}}))))})))}}]),t}();t.default=s},1765:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=(a(13),d(a(10)),d(a(25)),d(a(1060))),s=d(a(1068));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f={decimalZero:!1,decimalPlaces:4},p=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},m(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"componentDidMount",value:function(){this.props.dispatch(u.changeLrlsData("commonCardList",(0,i.fromJS)([]),!0))}},{key:"componentWillReceiveProps",value:function(e){this.props.categoryType!=e.categoryType&&this.setState({categoryValue:"ALL",isAll:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.stockList,l=t.stockCardList,r=t.cardDisabled,d=t.stockRange,m=(t.categoryType,t.history),p=t.propertyCarryover,g=t.usedStock,y=t.isOpenedWarehouse,h=(t.warehouseList,t.allStockRange),E=t.commonCardList,v=this.state,b=v.isAll,_=v.visible,S=v.idx,T=v.categoryValue,C=0,L=1==l.size;l.forEach(function(e){return C+=Number(e.get("amount"))});var N=function(e,t,n){return a(u.changeYysrStockCard(e,t,n))},w=!("SX_HW_FW"!=p||!d.size),I=[{uuid:"ALL",name:"全部",childList:[]}];h.map(function(e){d.includes(e.get("uuid"))&&I.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(I);var A=b?n.toJS():E;return A.map(function(e){e.name=e.key}),o.default.createElement("div",{className:d.size?"lrls-card":""},o.default.createElement(c.Row,{className:"lrls-more-card",style:{display:w&&!g?"":"none"}},o.default.createElement("span",null,g?"存货：":"存货"),o.default.createElement("div",{className:"noTextSwitch"},o.default.createElement(c.Switch,{checked:g,onClick:function(){a(u.changeLrlsData(["oriTemp","usedStock"],!g)),0==l.size&&N("add","",0)}}))),o.default.createElement(c.ChosenPicker,{visible:_,type:"card",multiSelect:!0,title:"请选择存货",icon:{type:"inventory-add",onClick:function(){a(s.beforeAddInventoryCardFromEditRunning(d,m))}},district:I,cardList:A,value:T,onChange:function(t){e.setState({categoryValue:t.key}),"ALL"!=t.key?(e.setState({isAll:!1}),a(u.getStockListByCategory(t))):e.setState({isAll:!0})},onOk:function(e){e.length&&N("card",e,S)},onCancel:function(){e.setState({visible:!1})}},o.default.createElement("span",null)),o.default.createElement("div",{style:{display:"SX_HW"==p||g?"":"none"}},l.map(function(e,t){var n=e.get("isOpenedQuantity"),l=e.get("cardUuid"),s=e.get("warehouseCardUuid"),d=e.get("quantity")?Number(e.get("quantity")):0,p=e.get("price")?Number(e.get("price")):0,g=e.get("amount")?Number(e.get("amount")):0,h=e.getIn(["financialInfo","openAssist"]),E=e.getIn(["financialInfo","openSerial"]),v=e.getIn(["financialInfo","openBatch"]),b=(e.getIn(["financialInfo","openShelfLife"]),(e.get("assistList")?e.get("assistList"):(0,i.fromJS)([])).reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},"")),_=e.get("batch")?e.get("batch"):"",S=e.get("expirationDate")?e.get("expirationDate"):"",T=S?_+"("+S+")":_;return o.default.createElement("div",{key:t,className:"lrls-bottom-line lrls-card-bottom"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},o.default.createElement("span",null,"存货明细(",t+1,")"),o.default.createElement("span",{className:r?"lrls-placeholder":"lrls-blue",style:{display:L?"none":""},onClick:function(){var n;r||(N("delete","",t),n=C-Number(e.get("amount")),a(u.changeLrlsAmount(n)))}},"删除")),o.default.createElement("div",{className:"lrls-more-card",onClick:function(){a(u.changeLrlsData(["views","idx"],t)),m.push("/editrunning/stock")}},o.default.createElement("div",{className:"lrls-single"},o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"存货:"),o.default.createElement("span",{className:l?"":"lrls-placeholder"},l?e.get("code")+" "+e.get("name"):" 未选择")),o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right",style:{display:y?"":"none"}},o.default.createElement("span",null,"仓库:"),o.default.createElement("span",{className:s?"":"lrls-placeholder"},s?e.get("warehouseCardCode")+" "+e.get("warehouseCardName"):" 未选择"))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom",style:{display:h||v?"":"none"}},h?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"属性:"),o.default.createElement("span",{className:b?"":"lrls-placeholder"},b||" 未选择")):null,v?o.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"批次:"),o.default.createElement("span",{className:T?"":"lrls-placeholder"},T||" 未选择")):null),o.default.createElement(c.Row,{className:"lrls-more-card lrls-card-bottom"},o.default.createElement("div",{style:{display:n?"":"none"},className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",{className:E?"sn":""},"数量:"),o.default.createElement(c.Amount,f,d),o.default.createElement("span",null,e.get("unitUuid")?e.get("unitName"):null)),o.default.createElement("div",{style:{display:n?"":"none"},className:"lrls-single overElli lrls-padding-right"},o.default.createElement("span",null,"单价:"),o.default.createElement(c.Amount,f,p)),o.default.createElement("div",{className:"lrls-padding-right lrls-one-third"},o.default.createElement("span",null,"金额:"),o.default.createElement(c.Amount,null,g)))),o.default.createElement(c.Icon,{type:"arrow-right"})))})),o.default.createElement("div",{className:"lrls-more-card lrls-margin-top",style:{display:"SX_HW"==p||g?"":"none",fontWeight:"bold"}},l.size>1?o.default.createElement("div",null,"总金额：",o.default.createElement(c.Amount,{showZero:!0},C)):o.default.createElement("div",null),o.default.createElement("div",{className:"lrls-stock-bottom"},o.default.createElement("div",{className:r?"lrls-placeholder":"lrls-blue",onClick:function(){r||e.setState({visible:!0,idx:l.size})}},"+添加存货明细"),o.default.createElement("div",{className:"noTextSwitch",style:{display:w&&g?"":"none"}},o.default.createElement(c.Switch,{disabled:r,checked:g,onClick:function(){a(u.changeLrlsData(["oriTemp","usedStock"],!g))}})))))}}]),t}();t.default=p},1766:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=(d(a(25)),d(a(1060))),s=d(a(1068));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={isAll:!0,categoryValue:"ALL"},m(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"componentDidMount",value:function(){this.props.dispatch(u.changeLrlsData("commonProjectList",(0,i.fromJS)([]),!0))}},{key:"componentWillReceiveProps",value:function(e){this.props.categoryType!=e.categoryType&&this.setState({categoryValue:"ALL",isAll:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.isModify,l=t.categoryType,r=t.oriState,i=t.usedProject,d=t.projectCardList,m=t.projectList,f=(t.propertyPay,t.history),p=t.projectRange,g=t.projectCategoryList,y=t.commonProjectList,h=t.propertyCarryover,E=t.propertyCostList,v=t.handleType,b=t.showXmjz,_=t.relationCategoryType,S=this.state,T=S.isAll,C=S.categoryValue,L=!1,N=!1,w=!1,I=!0,A=!1,k=!0;switch(l){case"LB_YYSR":L=["STATE_YYSR_XS","STATE_YYSR_TS"].includes(r);break;case"LB_YYZC":N="SX_FW"==h,w="SX_FW"==h,L="SX_FW"==h&&["STATE_YYZC_GJ","STATE_YYZC_TG"].includes(r);break;case"LB_FYZC":L="STATE_FY_DJ"!=r,N=!0,w=!0;break;case"LB_XCZC":N=!0,w=!0,L=!0;break;case"LB_JK":L=!0,N="JR_HANDLE_CHLX"==v,w="JR_HANDLE_CHLX"==v;break;case"LB_ZJTX":L=!0,k=!1,N=!0,w=!0;break;case"LB_JZSY":k=!1;break;case"LB_JZCB":k=!1,L=!0,w="LB_FYZC"==_,N="LB_FYZC"==_;break;case"LB_JXSEZC":k=!1;break;case"LB_CHTRXM":k=!1,I=!1,N=!0,w=!0;break;case"LB_XMJZ":if(k=!1,I=!1,N=!1,A=!!n,!b)return null}var O=[{uuid:"ALL",name:"全部",childList:[]}];g&&g.map(function(e){if(p.includes(e.get("uuid"))){if(["LB_CQZC","LB_JZSY"].includes(l)&&["生产项目","施工项目"].includes(e.get("name")))return;O.push(e.toJS())}["LB_CHTRXM","LB_XMJZ"].includes(l)&&O.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(O);var j=T?m.toJS():y.toJS();j.map(function(e){e.name=e.key}),j=j.filter(function(e){var t=!0;return!L&&e.value.includes("COMNCRD")&&(t=!1),N||!e.value.includes("ASSIST")&&!e.value.includes("MAKE")||(t=!1),w||!e.value.includes("INDIRECT")&&!e.value.includes("MECHANICAL")||(t=!1),["LB_CQZC","LB_JZSY"].includes(l)&&["XZ_PRODUCE","XZ_CONSTRUCTION"].includes(e.projectProperty)&&(t=!1),t});var R=d.getIn([0,"cardUuid"]),P=d.getIn([0,"code"]),J=d.getIn([0,"name"]),D=d.getIn([0,"projectProperty"]),Z=P+" "+J;return["COMNCRD","ASSIST","MAKE","INDIRECT","MECHANICAL"].includes(P)&&(Z=J),o.default.createElement(c.Row,{className:b?"lrls-more-card lrls-margin-top":"lrls-card lrls-more-card",style:{height:b?"":".45rem"}},o.default.createElement("label",null,i?"项目:":"项目"),i?o.default.createElement(c.ChosenPicker,{className:"lrls-single",type:"card",disabled:A,title:"请选择项目",icon:k?{type:"project-add",onClick:function(){a(s.beforeAddProjectCardFromEditRunning(f))}}:null,district:O,cardList:j,value:C,cardValue:[R],onChange:function(t){e.setState({categoryValue:t.key}),"ALL"!=t.key?(e.setState({isAll:!1}),a(u.getProjectListByCategory(t))):e.setState({isAll:!0})},onOk:function(e){if(0!=e.length){if(a(u.changeProjectCard("card",e[0],0)),"XZ_PRODUCE"==e[0].projectProperty){var t="XZ_SCCB";"ASSIST"==e[0].code&&(t="XZ_FZSCCB"),"MAKE"==e[0].code&&(t="XZ_ZZFY"),a(u.changeLrlsData(["oriTemp","propertyCost"],t))}else if("XZ_CONSTRUCTION"==e[0].projectProperty){var n="XZ_HTCB";"INDIRECT"==e[0].code&&(n="XZ_JJFY"),"MECHANICAL"==e[0].code&&(n="XZ_JXZY"),a(u.changeLrlsData(["oriTemp","propertyCost"],n))}else i&&E&&E.size&&a(u.changeLrlsData(["oriTemp","propertyCost"],E.get(0)));"LB_XMJZ"==l&&("XZ_CONSTRUCTION"==e[0].projectProperty&&"STATE_XMJZ_JZRK"==r&&a(u.changeLrlsOriState("STATE_XMJZ_QRSRCB")),"XZ_PRODUCE"==e[0].projectProperty&&"STATE_XMJZ_QRSRCB"==r&&a(u.changeLrlsOriState("STATE_XMJZ_JZRK")),a(u.getXmjzList()))}}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},R?o.default.createElement("span",{className:A?"lrls-placeholder":""}," ",Z," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择项目卡片"),o.default.createElement(c.Icon,{type:"triangle",style:{color:A?"#ccc":""}}))):null,o.default.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px",display:I?"":"none"}},o.default.createElement(c.Switch,{checked:i,onClick:function(){if(a(u.changeLrlsData(["oriTemp","usedProject"],!i)),i&&E&&E.size&&a(u.changeLrlsData(["oriTemp","propertyCost"],E.get(0))),!i&&"XZ_PRODUCE"==D){var e="XZ_SCCB";"ASSIST"==P&&(e="XZ_FZSCCB"),"MAKE"==P&&(e="XZ_ZZFY"),a(u.changeLrlsData(["oriTemp","propertyCost"],e))}}})))}}]),t}();t.default=f},1767:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),r=d(l),o=a(9),i=(d(a(2)),a(16)),c=(s(a(25)),s(a(1060))),u=s(a(1068));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={isAll:!0,categoryValue:"ALL"},m(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),n(t,[{key:"componentDidMount",value:function(){this.props.dispatch(c.changeLrlsData("commonCurrentList",(0,o.fromJS)([]),!0))}},{key:"componentWillReceiveProps",value:function(e){this.props.categoryType!=e.categoryType&&this.setState({categoryValue:"ALL",isAll:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.history,n=t.dispatch,l=t.oriState,o=t.isModify,s=t.categoryType,d=t.usedCurrent,m=t.currentList,f=t.contactsRange,p=t.currentCardList,g=t.strongListSize,y=t.stockStrongListSize,h=t.oriUsedCurrent,E=t.allContactsRange,v=t.commonCurrentList,b=t.isCopy,_=t.beAccrued,S=this.state,T=S.isAll,C=S.categoryValue,L=p.get(0),N=g,w=function(e){return n(c.changeCurrentCardList(e))},I=!0,A=function(){return null};switch(b&&(N=!1),s){case"LB_YYSR":"receive",N=g||y,b&&(N=!1),w=function(e){n(c.changeCurrentCardList(e)),o||n(c.getYysrYyzcAmount())},o||(A=function(){return n(c.getYysrYyzcAmount())});break;case"LB_YYZC":"pay",w=function(e){n(c.changeCurrentCardList(e)),o||n(c.getYysrYyzcAmount())},o||(A=function(){return n(c.getYysrYyzcAmount())});break;case"LB_FYZC":w=function(e){n(c.changeCurrentCardList(e)),o||n(c.getYysrYyzcAmount())},o||(A=function(){return n(c.getYysrYyzcAmount())});break;case"LB_ZSKX":w=function(e){n(c.changeCurrentCardList(e))},"STATE_ZS_TH"===l&&(I=!1);break;case"LB_ZFKX":w=function(e){n(c.changeCurrentCardList(e))},"STATE_ZF_SH"===l&&(I=!1);break;case"LB_JK":w=function(e){n(c.changeCurrentCardList(e)),"STATE_JK_ZFLX"===l&&n(c.getJkPendingStrongList())},"STATE_JK_ZFLX"==l&&(_&&(I=!1),o&&h&&(I=!0),A=function(){return n(c.getJkPendingStrongList())});break;case"LB_TZ":w=function(e){n(c.changeCurrentCardList(e)),["STATE_TZ_SRGL","STATE_TZ_SRLX"].includes(l)&&n(c.getTzPendingStrongList())},["STATE_TZ_SRGL","STATE_TZ_SRLX"].includes(l)&&(_&&(I=!1),o&&h&&(I=!0),A=function(){return n(c.getTzPendingStrongList())});break;case"LB_ZB":w=function(e){n(c.changeCurrentCardList(e)),"STATE_ZB_ZFLR"===l&&n(c.getZbPendingStrongList())},"STATE_ZB_ZFLR"==l&&(_&&(I=!1),o&&h&&(I=!0),A=function(){return n(c.getZbPendingStrongList())});break;case"LB_SFGL":I=!1}var k=[{uuid:"ALL",name:"全部",childList:[]}];E&&E.map(function(e){k.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(k);var O=T?m.toJS():v;return O.map(function(e){e.name=e.key}),r.default.createElement("div",{className:"lrls-card lrls-more-card",style:{height:".45rem",display:I?"":"none"}},r.default.createElement("label",null,d?"往来单位:":"往来单位"),d?r.default.createElement(i.ChosenPicker,{className:"lrls-single",type:"card",title:"请选择往来单位",icon:{type:"current-add",onClick:function(){n(u.beforeAddManageTypeCardFromEditRunning(f,a))}},disabled:N,district:k,cardList:O,value:C,cardValue:[L?L.get("cardUuid"):""],onChange:function(t){e.setState({categoryValue:t.key}),"ALL"!=t.key?(e.setState({isAll:!1}),n(c.getCurrentListByCategory(t))):e.setState({isAll:!0})},onOk:function(e){0!=e.length&&w(e[0].value)}},r.default.createElement(i.Row,{className:"lrls-category lrls-padding"},L?r.default.createElement("span",null," ",L.get("code")+" "+L.get("name")," "):r.default.createElement("span",{className:"lrls-placeholder"},"点击选择往来单位"),r.default.createElement(i.Icon,{type:"triangle",style:{color:N?"#ccc":""}}))):null,r.default.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px",display:""}},r.default.createElement(i.Switch,{checked:d,disabled:N,onClick:function(){n(c.changeLrlsData(["oriTemp","usedCurrent"],!d)),A()}})))}}]),t}();t.default=f},1768:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=a(13),s=f(a(10)),d=f(a(25)),m=f(a(1060));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.amountChanged=!1,n.lastAmount=0,n.funcList=[],g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"componentDidMount",value:function(){var e=sessionStorage.getItem("routerPage");if(!["routerStock","routerSfgl","routerPoundage"].includes(e)){var t=this.props.accountPoundage;if(t.get("uuid")){var a=t.get("poundageNeedCurrent"),n=t.get("poundageNeedProject"),l=t.get("categoryUuid");(a||n)&&this.props.dispatch(m.getPoundageCategory(l,a,n))}}}},{key:"componentDidUpdate",value:function(e){var t=e.oriTemp.get("needUsedPoundage"),a=this.props.oriTemp.get("needUsedPoundage"),n=this.props.oriTemp.get("usedAccounts"),l=this.props.accounts.getIn([0,"accountUuid"]),r=e.accounts.getIn([0,"accountUuid"]),o=!1;t!=a&&a&&(o=!0),l!=r&&l&&(o=!0),(this.amountChanged||o||n)&&this.funcList.forEach(function(e){return e()})}},{key:"array_includes",value:function(e,t){var a=new Set([].concat(p(e),p(t)));return e.length===a.size}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.oriTemp,l=t.accounts,r=t.accountPoundage,f=t.poundageCurrentList,p=t.poundageProjectList,g=t.contactsRange,y=t.poundageProjectRange,h=t.poundageCurrentRange,E=t.beManagemented,v=t.usedProject,b=t.usedCurrent,_=t.history,S=n.get("needUsedPoundage"),T=r.get("poundageNeedCurrent"),C=r.get("poundageNeedProject"),L=n.get("poundageCurrentCardList"),N=n.get("poundageProjectCardList"),w=n.get("projectRange")?n.get("projectRange").toJS():[],I=n.get("poundageCurrent"),A=n.get("poundageProject"),k=n.get("includesPoundage"),O=L.get(0)?L.get(0):(0,i.fromJS)({}),j=N.get(0)?N.get(0):(0,i.fromJS)({}),R=j.get("code")+" "+j.get("name");["COMNCRD","ASSIST","MAKE","INDIRECT","MECHANICAL"].includes(j.get("code"))&&(R=j.get("name"));var P=!1,J=0,D=n.get("usedAccounts");l.forEach(function(e,t){!D&&t>0||e.getIn(["poundage","needPoundage"])&&(P=!0,J++)});var Z=!1,x=n.get("amount"),U=n.get("categoryType"),M=n.get("oriState"),B=Number(n.get("currentAmount")),X=!1,Y=0;switch(U){case"LB_YYSR":Z=["STATE_YYSR_DJ","STATE_YYSR_XS"].includes(M),B&&(x=B),"STATE_YYSR_XS"==M&&E&&!B&&(Z=!1,x=0);break;case"LB_YYZC":Z="STATE_YYZC_TG"==M,B&&(x=B),"STATE_YYZC_TG"==M&&E&&!B&&(Z=!1,x=0);break;case"LB_FYZC":x<0&&(E||(Z=!0),E&&B&&(Z=!0,x=B));break;case"LB_XCZC":var F=n.get("propertyPay"),H=n.get("jrAmount"),G=n.getIn(["acPayment","beAccrued"]);n.getIn(["acPayment","beWelfare"]);["STATE_XC_JN","STATE_XC_FF"].includes(M)&&(G&&"SX_GZXJ"==F&&(x=n.getIn(["payment","actualAmount"])),G&&"SX_SHBX"==F&&(x=n.getIn(["payment","companySocialSecurityAmount"])),G&&"SX_ZFGJJ"==F&&(x=n.getIn(["payment","companyAccumulationAmount"])),(H<0||x<0)&&(Z=!0));break;case"LB_YYWSR":Z=!0,E&&((x=B)||(Z=!1));break;case"LB_ZSKX":Z="STATE_ZS_SQ"==M;break;case"LB_ZFKX":Z="STATE_ZF_SH"==M;break;case"LB_CQZC":"JR_HANDLE_GJ"==n.get("handleType")?x<0&&(Z=!0):x>0&&(Z=!0),E&&((x=B)||(Z=!1));break;case"LB_JK":Z="STATE_JK_YS"==M;break;case"LB_TZ":Z=["STATE_TZ_SRGL","STATE_TZ_SRLX","STATE_TZ_YS"].includes(M);break;case"LB_ZB":Z="STATE_ZB_ZZ"==M;break;case"LB_SFGL":var z=n.getIn(["pendingManageDto","isManualWriteOff"]);if(n.get("jrAmount")>=0&&(Z=!0),z)Z=n.get("allHandleAmount")>=0;break;case"LB_ZZ":Z=!0,X=!0;var V=n.getIn(["accounts",0,"poundageAmount"]);Y=V||0}return P&&Z?(this.funcList=[],this.amountChanged=(0,u.decimal)(x)!=(0,u.decimal)(this.lastAmount),this.lastAmount=(0,u.decimal)(x),o.default.createElement("div",{className:"lrls-card",style:{display:P&&Z?"":"none"}},o.default.createElement(c.Row,{className:"lrls-more-card"},o.default.createElement("span",null,"账户手续费"),o.default.createElement("div",{className:"noTextSwitch",style:{display:X?"none":""}},o.default.createElement(c.Switch,{checked:S,onClick:function(){a(m.changeLrlsData(["oriTemp","needUsedPoundage"],!S)),S&&(a(m.changeLrlsData(["oriTemp","poundageCurrentCardList"],(0,i.fromJS)([]))),a(m.changeLrlsData(["oriTemp","poundageProjectCardList"],(0,i.fromJS)([]))))}})),o.default.createElement("span",{className:"lrls-placeholder",style:{display:X?"":"none"},onClick:function(){return _.push("/editrunning/poundage")}},S?"已启用":"未启用"," ",o.default.createElement(c.Icon,{type:"arrow-right"}))),o.default.createElement("div",{style:{display:!X&&S?"":"none"}},o.default.createElement("div",{className:"lrls-more-card margin-top-bot lrls-jzsy",style:{display:T?"":"none"}},o.default.createElement("label",null,"往来单位:"),I?o.default.createElement(c.Single,{className:"lrls-single",district:f.toJS(),value:O.get("cardUuid")?""+O.get("cardUuid")+d.TREE_JOIN_STR+O.get("code")+d.TREE_JOIN_STR+O.get("name"):"",onOk:function(e){a(m.changeCurrentCardList(e.value,"poundageCurrent"))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},O.get("cardUuid")?o.default.createElement("span",null," ",O.get("code")+" "+O.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择往来卡片"),o.default.createElement(c.Icon,{type:"triangle"}))):null,o.default.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px"}},o.default.createElement(c.Switch,{checked:I,onClick:function(){if(a(m.changeLrlsData(["oriTemp","poundageCurrent"],!I)),I)a(m.changeLrlsData(["oriTemp","poundageCurrentCardList"],(0,i.fromJS)([])));else{var t=(0,i.fromJS)([]),l=e.array_includes(h,g),r=n.get("currentCardList");b&&l&&r.size&&(t=r),a(m.changeLrlsData(["oriTemp","poundageCurrentCardList"],t))}}}))),o.default.createElement("div",{className:"lrls-more-card margin-top-bot lrls-jzsy",style:{display:C?"":"none"}},o.default.createElement("label",null,"项目:"),A?o.default.createElement(c.Single,{className:"lrls-single",district:p.toJS(),value:j.get("cardUuid")?""+j.get("cardUuid")+d.TREE_JOIN_STR+j.get("code")+d.TREE_JOIN_STR+j.get("name"):"",onOk:function(e){a(m.changeProjectCard("poundageProject",e.value,0))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},j.get("cardUuid")?o.default.createElement("span",null," ",R," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择项目卡片"),o.default.createElement(c.Icon,{type:"triangle"}))):null,o.default.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px"}},o.default.createElement(c.Switch,{checked:A,onClick:function(){if(a(m.changeLrlsData(["oriTemp","poundageProject"],!A)),A)a(m.changeLrlsData(["oriTemp","poundageProjectCardList"],(0,i.fromJS)([])));else{var t=(0,i.fromJS)([]),l=e.array_includes(y,w),r=n.get("projectCardList");v&&l&&r.size&&r.getIn([0,"cardUuid"])&&(t=r),a(m.changeLrlsData(["oriTemp","poundageProjectCardList"],t))}}})))),o.default.createElement("div",null,S&&l.map(function(t,n){t.get("accountUuid");var l=t.get("accountName");if(!t.getIn(["poundage","needPoundage"]))return null;if(!D&&n>0)return null;var r=0,i=t.getIn(["poundage","poundage"]),d=t.getIn(["poundage","poundageRate"]);return r=Math.abs((0,u.decimal)(x*d/1e3)),X&&k&&(r=Math.abs((0,u.decimal)(x/(1+Number(d/1e3))*d/1e3))),D&&(r=(0,u.decimal)(t.get("amount")*d/1e3)),i&&i>0&&r>i&&(r=i),D&&t.get("isManual")||e.funcList.push(function(){a(m.changeLrlsData(["oriTemp","accounts",n,"poundageAmount"],Math.abs(r)))}),X?null:o.default.createElement("div",{key:n,style:{paddingBottom:J>1&&n!=J-1?"10px":""}},o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom"},o.default.createElement("span",null,"账户明细(",n+1,")："),o.default.createElement("span",{className:"overElli",style:{flex:"1"}},""+l)),o.default.createElement(c.Row,{className:"lrls-more-card"},o.default.createElement("label",null,"支出金额:"),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写支出金额",value:t.get("poundageAmount"),onChange:function(e){if(i&&i>0&&e>i)s.toast.info("输入金额不可大于手续费上限");else{var l=(0,u.decimal)(Math.abs(x)-e);D&&(l=(0,u.decimal)(Math.abs(t.get("amount"))-e)),l<0?s.toast.info("输入金额不可大于收款金额"):(a(m.changeLrlsData(["oriTemp","accounts",n,"poundageAmount"],e)),a(m.changeLrlsData(["oriTemp","accounts",n,"isManual"],!0)))}}})))})),o.default.createElement("div",{className:"hx-top-line lrls-placeholder lrls-margin-top",style:{display:S&&X?"":"none"}},o.default.createElement("div",{className:"lrls-margin-bottom lrls-padding-top"},o.default.createElement("span",{className:"lrls-placeholder"},"转出金额："),o.default.createElement(c.Amount,{showZero:!0},k?(0,u.decimal)(Number(x)):(0,u.decimal)(Number(x)+Number(Y))),"元",k?null:o.default.createElement("span",null,"(含手续费"+(0,u.formatMoney)(Y,2)+"元)")),o.default.createElement("div",null,o.default.createElement("span",{className:"lrls-placeholder"},"到账金额："),o.default.createElement(c.Amount,{showZero:!0},k?(0,u.decimal)(Number(x)-Number(Y)):(0,u.decimal)(Number(x))),"元")))):null}}]),t}();t.default=y},1769:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=m(a(10)),s=m(a(25)),d=m(a(1060));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function f(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"componentDidMount",value:function(){var e=sessionStorage.getItem("routerPage");["routerStock"].includes(e)||this.props.dispatch(d.getJzcbCategoryList(!0))}},{key:"array_includes",value:function(e,t){var a=new Set([].concat(f(e),f(t)));return e.length===a.size}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.beCarryover,l=t.categoryList,r=t.relationCategoryUuid,m=t.relationCategoryName,f=t.relationObj,p=t.usedCarryoverProject,g=t.carryoverProject,y=t.carryoverProjectCardList,h=t.propertyCost,E=t.usedProject,v=t.projectCardList,b=t.projectRange,_=l.toJS();!function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(_);var S=[],T="请选择费用性质",C=f.propertyCostList,L=f.beProject;C.forEach(function(e){"XZ_SALE"==e?S.push({key:"销售费用",value:"XZ_SALE"}):"XZ_MANAGE"==e?S.push({key:"管理费用",value:"XZ_MANAGE"}):"XZ_FINANCE"==e&&S.push({key:"财务费用",value:"XZ_FINANCE"})}),h&&(T={XZ_SALE:"销售费用",XZ_MANAGE:"管理费用",XZ_FINANCE:"财务费用",XZ_SCCB:"生产成本",XZ_FZSCCB:"辅助生产成本",XZ_ZZFY:"制造费用",XZ_HTCB:"合同成本",XZ_JJFY:"间接费用",XZ_JXZY:"机械作业"}[h]);var N=[];g.toJS().forEach(function(e){"LB_FYZC"!=f.relationCategoryType&&(e.value.includes("INDIRECT")||e.value.includes("MECHANICAL"))||N.push(e)});var w=y.get(0)?y.get(0):(0,i.fromJS)({}),I=w.get("code")+" "+w.get("name");return["COMNCRD","ASSIST","MAKE","INDIRECT","MECHANICAL"].includes(w.get("code"))&&(I=w.get("name")),o.default.createElement("div",{className:"lrls-card"},o.default.createElement(c.Row,{className:"lrls-more-card"},o.default.createElement("span",null,"直接成本结转"),o.default.createElement("div",{className:"noTextSwitch"},o.default.createElement(c.Switch,{checked:n,onClick:function(){a(d.changeLrlsData(["oriTemp","beCarryover"],!n))}}))),o.default.createElement("div",{style:{display:n?"":"none"}},o.default.createElement(c.Row,{className:"lrls-more-card lrls-margin-top"},o.default.createElement("label",null,"处理类别: "),o.default.createElement("div",{className:"antd-single-picker"},o.default.createElement(c.ChosenPicker,{district:_,parentDisabled:!0,value:r,onChange:function(t){var n={relationCategoryType:t.categoryType};if(a(d.changeLrlsData(["oriTemp","relationCategoryUuid"],t.uuid)),a(d.changeLrlsData(["oriTemp","relationCategoryName"],t.name)),a(d.changeLrlsData(["oriTemp","usedCarryoverProject"],t.beProject)),a(d.changeLrlsData(["oriTemp","carryoverProjectCardList"],(0,i.fromJS)([{}]))),t.beProject){a(d.getProjectCardList(t.projectRange,"carryoverProject"));var l=e.array_includes(t.projectRange,b.toJS());E&&l&&v.size&&v.getIn([0,"cardUuid"])&&a(d.changeLrlsData(["oriTemp","carryoverProjectCardList"],v))}var r="";t.propertyCostList&&t.propertyCostList.length>0&&(r=t.propertyCostList[0]),a(d.changeLrlsData(["oriTemp","propertyCost"],r)),n.beProject=t.beProject,n.propertyCostList=t.propertyCostList,a(d.changeLrlsData(["oriTemp","relationObj"],(0,i.fromJS)(n)))}},o.default.createElement(c.Row,{className:"lrls-padding lrls-category",onClick:function(e){if(0==l.size)return e.stopPropagation(),u.toast.info("无匹配的处理类别",2)}},o.default.createElement("span",{className:r?"":"lrls-placeholder"},m||"请选择处理类别"),o.default.createElement(c.Icon,{type:"triangle"}))))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-margin-top",style:{display:C&&C.length>1?"":"none"}},o.default.createElement("label",null,"费用性质: "),o.default.createElement(c.Single,{className:"lrls-single",district:S,value:h,disabled:["XZ_SCCB","XZ_FZSCCB","XZ_ZZFY","XZ_HTCB","XZ_JJFY","XZ_JXZY"].includes(h),onOk:function(e){a(d.changeLrlsData(["oriTemp","propertyCost"],e.value))}},o.default.createElement(c.Row,{className:"lrls-padding lrls-category"},o.default.createElement("span",{className:"请选择费用性质"!=T?"":"lrls-placeholder"},T),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-margin-top",style:{display:L?"":"none"}},o.default.createElement("label",null,"项目:"),p?o.default.createElement(c.Single,{className:"lrls-single",district:N,value:w.get("cardUuid")?""+w.get("cardUuid")+s.TREE_JOIN_STR+w.get("code")+s.TREE_JOIN_STR+w.get("name"):"",onOk:function(e){if(a(d.changeProjectCard("carryoverProjectCardList",e.value,0)),"XZ_CONSTRUCTION"==e.projectProperty){var t="XZ_HTCB";"INDIRECT"==e.code&&(t="XZ_JJFY"),"MECHANICAL"==e.code&&(t="XZ_JXZY"),a(d.changeLrlsData(["oriTemp","propertyCost"],t))}}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},w.get("cardUuid")?o.default.createElement("span",null," ",I," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择项目卡片"),o.default.createElement(c.Icon,{type:"triangle"}))):null,o.default.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px"}},o.default.createElement(c.Switch,{checked:p,onClick:function(){if(a(d.changeLrlsData(["oriTemp","usedCarryoverProject"],!p)),p)a(d.changeLrlsData(["oriTemp","carryoverProjectCardList"],(0,i.fromJS)([])));else{var e=(0,i.fromJS)([]);E&&v.size&&v.getIn([0,"cardUuid"])&&(e=v),a(d.changeLrlsData(["oriTemp","carryoverProjectCardList"],e))}}})))))}}]),t}();t.default=p},1770:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),r=_(l),o=_(a(1771)),i=_(a(1772)),c=_(a(1773)),u=_(a(1774)),s=_(a(1775)),d=_(a(1776)),m=_(a(1777)),f=_(a(1778)),p=_(a(1779)),g=_(a(1780)),y=_(a(1781)),h=_(a(1782)),E=_(a(1783)),v=_(a(1784)),b=_(a(1785));function _(e){return e&&e.__esModule?e:{default:e}}var S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),n(t,[{key:"render",value:function(){var e=this.props,t=e.categoryType,a=e.isModify,n=null;return({LB_XCZC:function(){n=r.default.createElement(m.default,null)},LB_SFZC:function(){n=r.default.createElement(d.default,null)},LB_ZSKX:function(){n=r.default.createElement(o.default,null)},LB_ZFKX:function(){n=r.default.createElement(i.default,null)},LB_JK:function(){n=r.default.createElement(c.default,null)},LB_TZ:function(){n=r.default.createElement(u.default,null)},LB_ZB:function(){n=r.default.createElement(s.default,null)},LB_SFGL:function(){n=r.default.createElement(h.default,null)},LB_JZCB:function(){n=r.default.createElement(E.default,null)},LB_KJFP:function(){n=r.default.createElement(f.default,null)},LB_FPRZ:function(){n=r.default.createElement(p.default,null)},LB_ZCWJZZS:function(){n=r.default.createElement(y.default,null)},LB_GGFYFT:function(){n=r.default.createElement(v.default,null)},LB_JZSY:function(){n=r.default.createElement(g.default,null)},LB_XMJZ:function(){n=r.default.createElement(b.default,null)}}[t]||function(){return null})(),r.default.createElement("div",{className:"xfn-tree xfn-tree-animate"},r.default.createElement("div",{className:"xfn-tree-popup"},r.default.createElement("div",{className:"jr-title",style:{display:!a&&["LB_SFGL","LB_ZSKX","LB_ZFKX","LB_JZCB"].includes(t)?"none":""}},r.default.createElement("span",null,"LB_XMJZ"==t?"查看详情":"选择核销流水")),n))}}]),t}();t.default=S},1771:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=a(9),s=a(16),d=a(13),m=p(a(10)),f=p(a(1060));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=(0,c.connect)(function(e){return e})(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.scrollerHeight=0,n.state={isSearch:!1,searchValue:"",currentPage:1},g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=document.getElementsByClassName("scroll-view")[1];this.scrollerHeight=Number(window.getComputedStyle(e).height.replace("px",""))}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.editRunningState,l=this.state,r=l.isSearch,o=l.searchValue,c=l.currentPage,p=n.getIn(["oriTemp","pendingStrongList"]),g="modify"!==n.getIn(["views","insertOrModify"]),y=[],h=[];g&&n.getIn(["oriTemp","currentCardList"]).map(function(e){y.push(e.get("name")),h.push(e.get("uuid"))});var E=(n.get("currentList")?n.get("currentList"):(0,u.fromJS)([])).toJS();E.forEach(function(e){e.value=e.uuid});var v=0,b=0;p.forEach(function(e){e.get("beSelect")&&(v++,b+=e.get("notHandleAmount"))});var _=p;r&&o&&(_=p.filter(function(e){var t=!1;return e.get("oriAbstract").toString().includes(o)&&(t=!0),e.get("notHandleAmount").toString().includes(o)&&(t=!0),t}));var S=Math.ceil(_.size/20);return i.default.createElement(s.Container,{className:"edit-running"},g?i.default.createElement("div",null,i.default.createElement("div",{className:"sfgl",style:{display:r?"none":""}},i.default.createElement(s.Multiple,{className:"sfgl-item zszf-single",district:E,value:h,onOk:function(e){var t=[];e.forEach(function(e){t.push({name:e.name,uuid:e.uuid})}),a(f.changeLrlsData(["oriTemp","currentCardList"],(0,u.fromJS)(t))),a(f.getZskxPaymentList())}},i.default.createElement(s.Row,{className:"lrls-padding sfgl-name"},y.length?i.default.createElement("span",{className:"overElli"}," ",y.join("、")," "):i.default.createElement("span",{className:"overElli lrls-placeholder"},"筛选往来单位..."),i.default.createElement(s.Icon,{type:"triangle"}))),i.default.createElement("div",{className:"sfgl-search",onClick:function(){return e.setState({isSearch:!0})}},i.default.createElement(s.Icon,{type:"search"}))),i.default.createElement("div",{className:"sfgl sfgl-search-item",style:{display:r?"":"none"}},i.default.createElement(s.Icon,{type:"search"}),i.default.createElement(s.XfInput,{className:"xfn-multiple-input",placeholder:"搜索摘要、金额...",value:o,onChange:function(t){return e.setState({searchValue:t})}}),i.default.createElement("span",{className:"xfn-multiple-cancel",onClick:function(){return e.setState({searchValue:"",isSearch:!1,currentPage:1})}},"取消"))):null,i.default.createElement(s.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0,onScroll:function(t){t.target.scrollTop+100+e.scrollerHeight>=1660*c&&c<S&&e.setState({currentPage:c+1})}},_.slice(0,20*c).map(function(e,t){return i.default.createElement(s.Row,{key:t,className:"jr-card",onClick:function(){var t=0;p.map(function(a,n){a.get("uuid")==e.get("uuid")&&(t=n)}),e.get("beSelect")?a(f.pendingStrongListBeSelect(t,!1)):a(f.pendingStrongListBeSelect(t,!0))}},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,i.default.createElement(s.Checkbox,{style:{paddingRight:"10px"},checked:!!e.get("beSelect")}),e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},"摘要：",e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"其他应付"),i.default.createElement(s.Amount,{showZero:!0,className:"hx-bold"},e.get("notHandleAmount"))))})),i.default.createElement("div",{className:"jr-card hx-top-line",style:{display:v>0?"":"none"}},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"已勾选流水：",v,"条"),i.default.createElement("span",null,"合计金额：",i.default.createElement(s.Amount,{showZero:!0},b)))),i.default.createElement(s.ButtonGroup,null,i.default.createElement(s.Button,{onClick:function(){if(v>160)return m.Alert("勾选的核销流水不能超过160条");b=(0,d.decimal)(b),a(f.changeLrlsData(["views","showJrPage"],!1)),a(f.changeLrlsData(["oriTemp","amount"],b)),a(f.changeLrlsData(["oriTemp","jrAmount"],b))}},i.default.createElement(s.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=y},1772:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=a(9),s=a(16),d=p(a(1060)),m=a(13),f=p(a(10));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=(0,c.connect)(function(e){return e})(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.scrollerHeight=0,n.state={isSearch:!1,searchValue:"",currentPage:1},g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=document.getElementsByClassName("scroll-view")[1];this.scrollerHeight=Number(window.getComputedStyle(e).height.replace("px",""))}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.editRunningState,l=this.state,r=l.isSearch,o=l.searchValue,c=l.currentPage,p=n.getIn(["oriTemp","pendingStrongList"]),g="modify"!==n.getIn(["views","insertOrModify"]),y=[],h=[];g&&n.getIn(["oriTemp","currentCardList"]).map(function(e){y.push(e.get("name")),h.push(e.get("uuid"))});var E=(n.get("currentList")?n.get("currentList"):(0,u.fromJS)([])).toJS();E.forEach(function(e){e.value=e.uuid});var v=0,b=0;p.forEach(function(e){e.get("beSelect")&&(v++,b+=e.get("notHandleAmount"))});var _=p;r&&o&&(_=p.filter(function(e){var t=!1;return e.get("oriAbstract").toString().includes(o)&&(t=!0),e.get("notHandleAmount").toString().includes(o)&&(t=!0),t}));var S=Math.ceil(_.size/20);return i.default.createElement(s.Container,{className:"edit-running"},g?i.default.createElement("div",null,i.default.createElement("div",{className:"sfgl",style:{display:r?"none":""}},i.default.createElement(s.Multiple,{className:"sfgl-item zszf-single",district:E,value:h,onOk:function(e){var t=[];e.forEach(function(e){t.push({name:e.name,uuid:e.uuid})}),a(d.changeLrlsData(["oriTemp","currentCardList"],(0,u.fromJS)(t))),a(d.getZskxPaymentList())}},i.default.createElement(s.Row,{className:"lrls-padding sfgl-name"},y.length?i.default.createElement("span",{className:"overElli"}," ",y.join("、")," "):i.default.createElement("span",{className:"overElli lrls-placeholder"},"筛选往来单位..."),i.default.createElement(s.Icon,{type:"triangle"}))),i.default.createElement("div",{className:"sfgl-search",onClick:function(){return e.setState({isSearch:!0})}},i.default.createElement(s.Icon,{type:"search"}))),i.default.createElement("div",{className:"sfgl sfgl-search-item",style:{display:r?"":"none"}},i.default.createElement(s.Icon,{type:"search"}),i.default.createElement(s.XfInput,{className:"xfn-multiple-input",placeholder:"搜索摘要、金额...",value:o,onChange:function(t){return e.setState({searchValue:t})}}),i.default.createElement("span",{className:"xfn-multiple-cancel",onClick:function(){return e.setState({searchValue:"",isSearch:!1,currentPage:1})}},"取消"))):null,i.default.createElement(s.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0,onScroll:function(t){t.target.scrollTop+100+e.scrollerHeight>=1660*c&&c<S&&e.setState({currentPage:c+1})}},_.slice(0,20*c).map(function(e,t){return i.default.createElement(s.Row,{key:t,className:"jr-card",onClick:function(){var t=0;p.map(function(a,n){a.get("uuid")==e.get("uuid")&&(t=n)}),e.get("beSelect")?a(d.pendingStrongListBeSelect(t,!1)):a(d.pendingStrongListBeSelect(t,!0))}},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,i.default.createElement(s.Checkbox,{style:{paddingRight:"10px"},checked:!!e.get("beSelect")}),e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},"摘要：",e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"其他应收"),i.default.createElement(s.Amount,{showZero:!0,className:"hx-bold"},e.get("notHandleAmount"))))})),i.default.createElement("div",{className:"jr-card hx-top-line",style:{display:v>0?"":"none"}},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"已勾选流水：",v,"条"),i.default.createElement("span",null,"合计金额：",i.default.createElement(s.Amount,{showZero:!0},b)))),i.default.createElement(s.ButtonGroup,null,i.default.createElement(s.Button,{onClick:function(){if(v>160)return f.Alert("勾选的核销流水不能超过160条");b=(0,m.decimal)(b),a(d.changeLrlsData(["views","showJrPage"],!1)),a(d.changeLrlsData(["oriTemp","amount"],b)),a(d.changeLrlsData(["oriTemp","jrAmount"],b))}},i.default.createElement(s.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=y},1773:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=(a(9),a(16)),s=f(a(1060)),d=a(13),m=f(a(10));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var p=(0,c.connect)(function(e){return e})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.editRunningState.getIn(["oriTemp","pendingStrongList"]),n=0,l=0;return a.forEach(function(e){e.get("beSelect")&&(n++,l+=e.get("notHandleAmount"))}),i.default.createElement(u.Container,{className:"edit-running"},i.default.createElement(u.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0},a.map(function(e,a){return i.default.createElement(u.Row,{key:a,className:"jr-card",onClick:function(){e.get("beSelect")?t(s.pendingStrongListBeSelect(a,!1)):t(s.pendingStrongListBeSelect(a,!0))}},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,i.default.createElement(u.Checkbox,{style:{paddingRight:"10px"},checked:!!e.get("beSelect")}),e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},"摘要：",e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,e.get("jrJvTypeName")),i.default.createElement(u.Amount,{showZero:!0,className:"hx-bold"},e.get("notHandleAmount"))))})),i.default.createElement("div",{className:"jr-card hx-top-line",style:{display:n>0?"":"none"}},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"已勾选流水：",n,"条"),i.default.createElement("span",null,"待支付金额：",i.default.createElement(u.Amount,{showZero:!0},l)))),i.default.createElement(u.ButtonGroup,null,i.default.createElement(u.Button,{onClick:function(){if(n>160)return m.Alert("勾选的核销流水不能超过160条");t(s.changeLrlsData(["views","showJrPage"],!1)),t(s.changeLrlsData(["oriTemp","amount"],(0,d.decimal)(l))),t(s.changeLrlsData(["oriTemp","jrAmount"],(0,d.decimal)(l)))}},i.default.createElement(u.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=p},1774:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=(a(9),a(16)),s=f(a(1060)),d=a(13),m=f(a(10));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var p=(0,c.connect)(function(e){return e})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.editRunningState.getIn(["oriTemp","pendingStrongList"]),n=0,l=0;return a.forEach(function(e){e.get("beSelect")&&(n++,l+=e.get("notHandleAmount"))}),i.default.createElement(u.Container,{className:"edit-running"},i.default.createElement(u.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0},a.map(function(e,a){return i.default.createElement(u.Row,{key:a,className:"jr-card",onClick:function(){e.get("beSelect")?t(s.pendingStrongListBeSelect(a,!1)):t(s.pendingStrongListBeSelect(a,!0))}},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,i.default.createElement(u.Checkbox,{style:{paddingRight:"10px"},checked:!!e.get("beSelect")}),e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},"摘要：",e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,e.get("jrJvTypeName")," "),i.default.createElement(u.Amount,{showZero:!0,className:"hx-bold"},e.get("notHandleAmount"))))})),i.default.createElement("div",{className:"jr-card hx-top-line",style:{display:n>0?"":"none"}},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"已勾选流水：",n,"条"),i.default.createElement("span",null,"待收入金额：",i.default.createElement(u.Amount,{showZero:!0},l)))),i.default.createElement(u.ButtonGroup,null,i.default.createElement(u.Button,{onClick:function(){if(n>160)return m.Alert("勾选的核销流水不能超过160条");t(s.changeLrlsData(["views","showJrPage"],!1)),t(s.changeLrlsData(["oriTemp","amount"],(0,d.decimal)(l))),t(s.changeLrlsData(["oriTemp","jrAmount"],(0,d.decimal)(l)))}},i.default.createElement(u.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=p},1775:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=(a(9),a(16)),s=f(a(1060)),d=a(13),m=f(a(10));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var p=(0,c.connect)(function(e){return e})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.editRunningState.getIn(["oriTemp","pendingStrongList"]),n=0,l=0;return a.forEach(function(e){e.get("beSelect")&&(n++,l+=e.get("notHandleAmount"))}),i.default.createElement(u.Container,{className:"edit-running"},i.default.createElement(u.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0},a.map(function(e,a){return i.default.createElement(u.Row,{key:a,className:"jr-card",onClick:function(){e.get("beSelect")?t(s.pendingStrongListBeSelect(a,!1)):t(s.pendingStrongListBeSelect(a,!0))}},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,i.default.createElement(u.Checkbox,{style:{paddingRight:"10px"},checked:!!e.get("beSelect")}),e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},"摘要：",e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,e.get("jrJvTypeName")),i.default.createElement(u.Amount,{showZero:!0,className:"hx-bold"},e.get("notHandleAmount"))))})),i.default.createElement("div",{className:"jr-card hx-top-line",style:{display:n>0?"":"none"}},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"已勾选流水：",n,"条"),i.default.createElement("span",null,"待支付金额：",i.default.createElement(u.Amount,{showZero:!0},l)))),i.default.createElement(u.ButtonGroup,null,i.default.createElement(u.Button,{onClick:function(){if(n>160)return m.Alert("勾选的核销流水不能超过160条");l=(0,d.decimal)(l),t(s.changeLrlsData(["views","showJrPage"],!1)),t(s.changeLrlsData(["oriTemp","amount"],l)),t(s.changeLrlsData(["oriTemp","jrAmount"],l))}},i.default.createElement(u.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=p},1776:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=(a(9),a(16)),s=f(a(1060)),d=a(13),m=f(a(10));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var p=(0,c.connect)(function(e){return e})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.editRunningState.getIn(["oriTemp","pendingStrongList"]),n=0,l=0;return a.forEach(function(e){e.get("beSelect")&&(n++,l+=e.get("notHandleAmount"))}),i.default.createElement(u.Container,{className:"edit-running"},i.default.createElement(u.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0},a.map(function(e,a){return i.default.createElement(u.Row,{key:a,className:"jr-card",onClick:function(){e.get("beSelect")?t(s.pendingStrongListBeSelect(a,!1)):t(s.pendingStrongListBeSelect(a,!0))}},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,i.default.createElement(u.Checkbox,{style:{paddingRight:"10px"},checked:!!e.get("beSelect")}),e.get("beOpened")?"期初值":e.get("jrIndex")+" 号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:""},e.get("jrJvTypeName")),i.default.createElement(u.Amount,{showZero:!0,className:"hx-bold"},e.get("notHandleAmount"))))})),i.default.createElement("div",{className:"jr-card hx-top-line",style:{display:n>0?"":"none"}},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"已勾选流水：",n,"条"),i.default.createElement("span",null,"合计金额：",i.default.createElement(u.Amount,{showZero:!0},l)))),i.default.createElement(u.ButtonGroup,null,i.default.createElement(u.Button,{onClick:function(){if(n>160)return m.Alert("勾选的核销流水不能超过160条");t(s.changeLrlsData(["views","showJrPage"],!1)),t(s.changeLrlsData(["oriTemp","jrAmount"],(0,d.decimal)(l))),t(s.changeLrlsData(["oriTemp","amount"],(0,d.decimal)(l)))}},i.default.createElement(u.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=p},1777:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=(a(9),a(16)),s=f(a(1060)),d=a(13),m=f(a(10));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var p=(0,c.connect)(function(e){return e})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.editRunningState,n=a.getIn(["oriTemp","pendingStrongList"]),l=a.getIn(["oriTemp","propertyPay"]),r=0,o=0;return n.forEach(function(e){e.get("beSelect")&&(r++,o+=e.get("notHandleAmount"))}),i.default.createElement(u.Container,{className:"edit-running"},i.default.createElement(u.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0},n.map(function(e,a){return i.default.createElement(u.Row,{key:a,className:"jr-card",onClick:function(){e.get("beSelect")?t(s.pendingStrongListBeSelect(a,!1)):t(s.pendingStrongListBeSelect(a,!0))}},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,i.default.createElement(u.Checkbox,{style:{paddingRight:"10px"},checked:!!e.get("beSelect")}),e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},"摘要：",e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,e.get("jrJvTypeName")),i.default.createElement(u.Amount,{showZero:!0,className:"hx-bold"},e.get("notHandleAmount"))))})),i.default.createElement("div",{className:"jr-card hx-top-line",style:{display:r>0?"":"none"}},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"已勾选流水：",r,"条"),i.default.createElement("span",null,"合计金额：",i.default.createElement(u.Amount,{showZero:!0},o)))),i.default.createElement(u.ButtonGroup,null,i.default.createElement(u.Button,{onClick:function(){if(r>160)return m.Alert("勾选的核销流水不能超过160条");a.getIn(["oriTemp","amount"]),a.getIn(["oriTemp","payment","companySocialSecurityAmount"]),a.getIn(["oriTemp","payment","companyAccumulationAmount"]);t(s.changeLrlsData(["oriTemp","amount"],(0,d.decimal)(Math.abs(o)))),t(s.changeLrlsData(["oriTemp","payment","companySocialSecurityAmount"],(0,d.decimal)(Math.abs(o)))),t(s.changeLrlsData(["oriTemp","payment","companyAccumulationAmount"],(0,d.decimal)(Math.abs(o)))),t(s.changeLrlsData(["views","showJrPage"],!1)),t(s.changeLrlsData(["oriTemp","jrAmount"],(0,d.decimal)(o))),t(s.xczcCalculateAmount(l))}},i.default.createElement(u.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=p},1778:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=(a(9),a(13)),s=a(16),d=f(a(1060)),m=f(a(10));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var p=(0,c.connect)(function(e){return e})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.editRunningState,n=a.getIn(["oriTemp","pendingStrongList"]),l=a.getIn(["oriTemp","inputTax"]),r=0,o=0,c=0;return n.forEach(function(e){e.get("beSelect")&&(r++,o+=Math.abs(e.get("notHandleAmount")),c+=Math.abs(e.get("oriAmount")))}),i.default.createElement(s.Container,{className:"edit-running"},i.default.createElement(s.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0},n.map(function(e,a){var n=-1==e.get("taxRate")?"**":e.get("taxRate");return i.default.createElement(s.Row,{key:a,className:"jr-card",onClick:function(){e.get("beSelect")?t(d.pendingStrongListBeSelect(a,!1)):t(d.pendingStrongListBeSelect(a,!0))}},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,i.default.createElement(s.Checkbox,{style:{paddingRight:"10px"},checked:!!e.get("beSelect")}),e.get("beOpened")?"期初值":e.get("jrIndex")+" 号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},"摘要：",e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},e.get("categoryName")),i.default.createElement(s.Amount,{showZero:!0,className:"hx-bold"},Math.abs(e.get("notHandleAmount")))),e.get("beOpened")?null:i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"价税合计：",i.default.createElement(s.Amount,{showZero:!0},e.get("oriAmount"))),i.default.createElement("span",null,"税率：",n+"%")))})),i.default.createElement("div",{className:"jr-card hx-top-line",style:{display:r>0?"":"none"}},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"已勾选流水：",r,"条"),i.default.createElement("span",null,"待开发票税额：",i.default.createElement(s.Amount,{showZero:!0},o)))),i.default.createElement(s.ButtonGroup,null,i.default.createElement(s.Button,{onClick:function(){if(r>160)return m.Alert("勾选的核销流水不能超过160条");t(d.changeLrlsData(["views","showJrPage"],!1)),t(d.changeLrlsData(["oriTemp","amount"],(0,u.decimal)(o))),t(d.changeLrlsData(["oriTemp","jrAmount"],(0,u.decimal)(o))),t(d.changeLrlsData(["oriTemp","jrTaxAmount"],(0,u.decimal)(c))),1==r?0==l&&t(d.changeLrlsData(["oriTemp","taxTotal"],(0,u.decimal)(c))):t(d.changeLrlsData(["oriTemp","inputTax"],!0))}},i.default.createElement(s.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=p},1779:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=(a(9),a(13)),s=a(16),d=f(a(1060)),m=f(a(10));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var p=(0,c.connect)(function(e){return e})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.editRunningState.getIn(["oriTemp","pendingStrongList"]),n=0,l=0,r=0;return a.forEach(function(e){e.get("beSelect")&&(n++,l+=Math.abs(e.get("notHandleAmount")),r+=Math.abs(e.get("oriAmount")))}),i.default.createElement(s.Container,{className:"edit-running"},i.default.createElement(s.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0},a.map(function(e,a){return i.default.createElement(s.Row,{key:a,className:"jr-card",onClick:function(){e.get("beSelect")?t(d.pendingStrongListBeSelect(a,!1)):t(d.pendingStrongListBeSelect(a,!0))}},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,i.default.createElement(s.Checkbox,{style:{paddingRight:"10px"},checked:!!e.get("beSelect")}),e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},e.get("categoryName")),i.default.createElement(s.Amount,{showZero:!0,className:"hx-bold"},Math.abs(e.get("notHandleAmount")))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},"摘要：",e.get("oriAbstract"))))})),i.default.createElement("div",{className:"jr-card hx-top-line",style:{display:n>0?"":"none"}},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"已勾选流水：",n,"条"),i.default.createElement("span",null,"待认证税额：",i.default.createElement(s.Amount,{showZero:!0},l)))),i.default.createElement(s.ButtonGroup,null,i.default.createElement(s.Button,{onClick:function(){if(n>160)return m.Alert("勾选的核销流水不能超过160条");t(d.changeLrlsData(["views","showJrPage"],!1)),t(d.changeLrlsData(["oriTemp","amount"],(0,u.decimal)(l))),t(d.changeLrlsData(["oriTemp","jrAmount"],(0,u.decimal)(l))),t(d.changeLrlsData(["oriTemp","jrTaxAmount"],(0,u.decimal)(r)))}},i.default.createElement(s.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=p},1780:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=(a(9),a(16)),s=f(a(1060)),d=a(13),m=f(a(10));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var p=(0,c.connect)(function(e){return e})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.editRunningState.getIn(["oriTemp","pendingStrongList"]),n=0,l=0;return a.forEach(function(e){e.get("beSelect")&&(n++,l+=e.get("amount"))}),i.default.createElement(u.Container,{className:"edit-running"},i.default.createElement(u.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0},a.map(function(e,a){return i.default.createElement(u.Row,{key:a,className:"jr-card",onClick:function(){e.get("beSelect")?t(s.pendingStrongListBeSelect(a,!1)):t(s.pendingStrongListBeSelect(a,!0))}},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,i.default.createElement(u.Checkbox,{style:{paddingRight:"10px"},checked:!!e.get("beSelect")}),e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},"摘要：",e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,e.get("categoryName")),i.default.createElement(u.Amount,{showZero:!0,className:"hx-bold"},e.get("amount"))))})),i.default.createElement("div",{className:"jr-card hx-top-line",style:{display:n>0?"":"none"}},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"已勾选流水：",n,"条"),i.default.createElement("span",null,"处置收入金额：",i.default.createElement(u.Amount,{showZero:!0},l)))),i.default.createElement(u.ButtonGroup,null,i.default.createElement(u.Button,{onClick:function(){if(n>160)return m.Alert("勾选的核销流水不能超过160条");t(s.changeLrlsData(["views","showJrPage"],!1)),t(s.changeLrlsData(["oriTemp","assets","cleaningAmount"],(0,d.decimal)(l))),t(s.changeLrlsData(["oriTemp","jrAmount"],(0,d.decimal)(l))),t(s.autoJzsyAmount())}},i.default.createElement(u.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=p},1781:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=(a(9),a(16)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1060));var d=(0,c.connect)(function(e){return e})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.editRunningState.getIn(["oriTemp","pendingStrongList"]);return i.default.createElement(u.Container,{className:"edit-running"},i.default.createElement(u.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0},a.map(function(e,t){return i.default.createElement(u.Row,{key:t,className:"jr-card"},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},e.get("categoryName")),i.default.createElement(u.Amount,{showZero:!0},e.get("taxAmount"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},"摘要：",e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:""},"JR_STRONG_STAY_ZCXX"===e.get("pendingStrongType")?"销项税":"进项税"),i.default.createElement("div",null,i.default.createElement("span",null,"价税合计：",i.default.createElement(u.Amount,{showZero:!0},e.get("oriAmount"))))))})),i.default.createElement(u.ButtonGroup,null,i.default.createElement(u.Button,{onClick:function(){t(s.changeLrlsData(["views","showJrPage"],!1))}},i.default.createElement(u.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=d},1782:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=a(9),s=p(a(10)),d=a(16),m=p(a(1060)),f=a(13);function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=(0,c.connect)(function(e){return e})(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.scrollerHeight=0,n.listHeight=107,n.state={visible:!1,disabled:!0,idx:0,isSearch:!1,searchValue:"",currentPage:1},g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=document.getElementsByClassName("scroll-view")[1];this.scrollerHeight=Number(window.getComputedStyle(e).height.replace("px",""));var t=document.getElementsByClassName("jr-card")[0];this.listHeight=t?Number(window.getComputedStyle(t).height.replace("px","")):107}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.editRunningState,l=this.state,r=l.visible,o=l.disabled,c=l.idx,p=l.isSearch,g=l.searchValue,y=l.currentPage,h=n.getIn(["oriTemp","pendingStrongList"]),E=h.getIn([c,"categoryList"])?h.getIn([c,"categoryList"]):(0,u.fromJS)([]),v=h.getIn([c,"categoryUuid"])?h.getIn([c,"categoryUuid"]):"",b="modify"!==n.getIn(["views","insertOrModify"]),_=n.get("categoryList").toJS(),S=n.getIn(["oriTemp","usedAccounts"]),T=[],C=[],L=[],N=[];b&&(!function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&(e(t.childList),t.childList.unshift({key:t.uuid,label:"全部",uuid:t.uuid,name:t.name,childList:[]}))})}(_),n.getIn(["oriTemp","pendingManageDto","categoryUuid"]).map(function(e){T.push(e.get("name")),C.push({key:e.get("uuid"),label:e.get("name")})}),n.getIn(["oriTemp","currentCardList"]).map(function(e){L.push(e.get("name")),N.push(e.get("uuid"))}));var w=(n.get("currentList")?n.get("currentList"):(0,u.fromJS)([])).toJS();w.forEach(function(e){e.value=e.uuid});var I=0,A=0,k=!1;h.forEach(function(e){e.get("beSelect")&&(I++,"debit"==e.get("direction")?A+=Number(e.get("amount")):A-=Number(e.get("amount")),e.get("beSelect")&&!e.get("categoryUuid")&&(k=!0))});var O=A>=0?"待核销收款金额：":"待核销付款金额：",j=h;p&&g&&(j=h.filter(function(e){var t=!1;return e.get("oriAbstract").toString().includes(g)&&(t=!0),e.get("amount").toString().includes(g)&&(t=!0),t}));var R=Math.ceil(j.size/50);return i.default.createElement(d.Container,{className:"edit-running"},b?i.default.createElement("div",null,i.default.createElement("div",{className:"sfgl",style:{display:p?"none":""}},i.default.createElement(d.ChosenPicker,{className:"sfgl-item",multiSelect:!0,district:_,value:C,onOk:function(e){var t=[];e.forEach(function(e){t.push({uuid:e.uuid,name:e.name})}),a(m.changeLrlsData(["oriTemp","pendingManageDto","categoryUuid"],(0,u.fromJS)(t))),a(m.getSfglList())}},i.default.createElement(d.Row,{className:"lrls-padding sfgl-name"},T.length?i.default.createElement("span",{className:"overElli"}," ",T.join("、")," "):i.default.createElement("span",{className:"overElli lrls-placeholder"},"筛选流水类别..."),i.default.createElement(d.Icon,{type:"triangle"}))),i.default.createElement(d.Multiple,{className:"sfgl-item lrls-single",district:w,value:N,onOk:function(e){var t=[];e.forEach(function(e){t.push({name:e.name,uuid:e.uuid})}),a(m.changeLrlsData(["oriTemp","currentCardList"],(0,u.fromJS)(t))),a(m.getSfglList())}},i.default.createElement(d.Row,{className:"lrls-padding sfgl-name"},L.length?i.default.createElement("span",{className:"overElli"}," ",L.join("、")," "):i.default.createElement("span",{className:"overElli lrls-placeholder"},"筛选往来单位..."),i.default.createElement(d.Icon,{type:"triangle"}))),i.default.createElement("div",{className:"sfgl-search",onClick:function(){return e.setState({isSearch:!0})}},i.default.createElement(d.Icon,{type:"search"}))),i.default.createElement("div",{className:"sfgl sfgl-search-item",style:{display:p?"":"none"}},i.default.createElement(d.Icon,{type:"search"}),i.default.createElement(d.XfInput,{className:"xfn-multiple-input",placeholder:"搜索摘要、金额...",value:g,onChange:function(t){return e.setState({searchValue:t})}}),i.default.createElement("span",{className:"xfn-multiple-cancel",onClick:function(){return e.setState({searchValue:"",isSearch:!1,currentPage:1})}},"取消"))):null,i.default.createElement(d.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",onScroll:function(t){t.target.scrollTop+100+e.scrollerHeight>=y*e.listHeight*50&&y<R&&e.setState({currentPage:y+1})}},i.default.createElement(d.TreeSelect,{visible:r,district:E.toJS(),value:v,disabled:o,onChange:function(t){a(m.changeLrlsData(["oriTemp","pendingStrongList",c,"categoryUuid"],t.uuid)),a(m.changeLrlsData(["oriTemp","pendingStrongList",c,"categoryName"],t.name)),e.setState({visible:!1})},onCancel:function(){return e.setState({visible:!1})}},i.default.createElement("div",null)),j.slice(0,50*y).map(function(t,n){var l=t.get("beOpened"),r=t.get("beCard");return i.default.createElement(d.Row,{key:n,className:"jr-card"},i.default.createElement("div",{className:"jr-item jr-line",onClick:function(){var n=0;h.map(function(e,a){e.get("uuid")==t.get("uuid")&&(n=a)}),t.get("beSelect")?a(m.pendingStrongListBeSelect(n,!1)):(a(m.pendingStrongListBeSelect(n,!0)),r&&(t.get("categoryList")||a(m.getSfglQcCategoryList(n,t.get("uuid"))),e.setState({visible:!0,disabled:!1,idx:n})))}},i.default.createElement("span",null,i.default.createElement(d.Checkbox,{style:{paddingRight:"10px"},checked:!!t.get("beSelect")}),l?"期初值":t.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},t.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},r?i.default.createElement(d.Row,{className:t.get("beSelect")?"overElli":"overElli lrls-placeholder",onClick:function(){var a=0;h.map(function(e,n){e.get("uuid")==t.get("uuid")&&(a=n)}),t.get("beSelect")&&e.setState({visible:!0,disabled:!1,idx:a})}},t.get("categoryName")?t.get("categoryName"):"点击选择类别"):i.default.createElement("div",{className:"overElli"},t.get("categoryName")),i.default.createElement("span",null)),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},t.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:""},"credit"==t.get("direction")?"贷方发生":"借方发生"),i.default.createElement(d.Amount,{showZero:!0,className:"hx-bold"},t.get("amount"))))})),i.default.createElement("div",{className:"jr-card hx-top-line",style:{display:I>0?"":"none"}},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"已勾选流水：",I,"条"),i.default.createElement("span",null,O,i.default.createElement(d.Amount,{showZero:!0},Math.abs(Number(A)))))),i.default.createElement(d.ButtonGroup,null,i.default.createElement(d.Button,{onClick:function(){return k?s.Alert("请选择需要核算的流水的类别"):I>160?s.Alert("勾选的核销流水不能超过160条"):(a(m.changeLrlsData(["views","showJrPage"],!1)),a(m.changeLrlsData(["oriTemp","amount"],(0,f.decimal)(Math.abs(A)))),a(m.changeLrlsData(["oriTemp","jrAmount"],(0,f.decimal)(A))),a(m.changeLrlsData(["oriTemp","allHandleAmount"],(0,f.decimal)(A))),void a(m.changeLrlsData(["oriTemp","usedAccounts"],!!S&&1==I)))}},i.default.createElement(d.Icon,{type:"confirm"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=y},1783:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=a(9),s=a(16),d=a(13),m=(f(a(25)),f(a(1060)));f(a(10));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&(e(t.childList),t.childList.unshift({key:t.uuid,label:"全部",uuid:t.uuid,name:t.name,childList:[]}))})},y=(0,c.connect)(function(e){return e})(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.scrollerHeight=0,n.listHeight=0,n.state={isSearch:!1,searchValue:"",currentPage:1,isAll:!0,categoryValue:"ALL"},p(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=document.getElementsByClassName("scroll-view")[1];this.scrollerHeight=Number(window.getComputedStyle(e).height.replace("px",""));var t=document.getElementsByClassName("jr-card")[0];this.listHeight=t?Number(window.getComputedStyle(t).height.replace("px","")):82}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.editRunningState,l=this.state,r=l.isSearch,o=l.searchValue,c=l.currentPage,f=l.isAll,p=l.categoryValue,y=n.getIn(["oriTemp","pendingStrongList"]),h=n.getIn(["oriTemp","oriState"]),E="STATE_YYSR_XS"===h?"收入金额合计：":"退销金额合计：",v="insert"==n.getIn(["views","insertOrModify"]),b=n.get("categoryList").toJS(),_=n.getIn(["cardAllList","warehouseList"]).toJS(),S=n.get("stockCategoryList"),T=n.get("stockList"),C=n.get("commonCardList").toJS(),L=n.getIn(["cardAllList","stockCardList"]).map(function(e){return e.get("code")+" "+e.get("name")}),N=[],w=[],I=[],A=[],k=[{uuid:"ALL",name:"全部",top:!0,childList:[]}],O=f?T.toJS():C;if(v){g(b);var j=n.getIn(["oriTemp","relationCategoryUuid"]);j&&j.map(function(e){N.push(e.get("name")),w.push({key:e.get("uuid"),label:e.get("name")})}),n.getIn(["cardAllList","warehouseCardList"]).map(function(e){I.push(e.get("name")),A.push(e.get("uuid"))}),S.map(function(e){k.push(e.toJS())}),k.forEach(function(e){e.key=e.uuid,e.label=e.name,e.childList.length&&g(e.childList)}),O.map(function(e){e.name=e.key,e.uuid=e.cardUuid})}var R=0,P=0;y.forEach(function(e){e.get("beSelect")&&(R++,P+=Math.abs(e.get("amount")))});var J=y;r&&o&&(J=y.filter(function(e){var t=!1;return e.get("oriAbstract").toString().includes(o)&&(t=!0),e.get("amount").toString().includes(o)&&(t=!0),t}));var D=Math.ceil(J.size/50);return i.default.createElement(s.Container,{className:"edit-running"},v?i.default.createElement("div",null,i.default.createElement("div",{className:"sfgl",style:{display:r?"none":""}},i.default.createElement(s.ChosenPicker,{className:"sfgl-item",multiSelect:!0,district:b,value:w,onOk:function(e){var t=[];e.forEach(function(e){t.push({uuid:e.uuid,name:e.name})}),a(m.changeLrlsData(["oriTemp","relationCategoryUuid"],(0,u.fromJS)(t))),a(m.getJzcbList(!0))}},i.default.createElement(s.Row,{className:"lrls-padding sfgl-name"},N.length?i.default.createElement("span",{className:"overElli"}," ",N.join("、")," "):i.default.createElement("span",{className:"overElli lrls-placeholder"},"筛选流水类别..."),i.default.createElement(s.Icon,{type:"triangle"}))),i.default.createElement(s.ChosenPicker,{className:"sfgl-item left-line",type:"card",multiSelect:!0,title:"请选择存货",district:k,cardList:O,value:p,onChange:function(t){e.setState({categoryValue:t.key}),"ALL"!=t.key?(e.setState({isAll:!1}),a(m.getCostStockByCategory(t.key,t.top,"commonCardJzcbList"))):e.setState({isAll:!0})},onOk:function(e){a(m.changeLrlsData(["cardAllList","stockCardList"],(0,u.fromJS)(e.map(function(e){return{cardUuid:e.uuid,code:e.code,name:e.oriName}})))),a(m.getJzcbList(!0))},onCancel:function(){e.setState({visible:!1})}},i.default.createElement(s.Row,{className:"lrls-padding sfgl-name"},L.size?i.default.createElement("span",{className:"overElli"}," ",L.join("、")," "):i.default.createElement("span",{className:"overElli lrls-placeholder"},"筛选卡片..."),i.default.createElement(s.Icon,{type:"triangle"}))),i.default.createElement(s.Multiple,{className:"sfgl-item left-line",district:_,value:A,onOk:function(e){var t=[];e.forEach(function(e){t.push({name:e.name,uuid:e.uuid})}),a(m.changeLrlsData(["cardAllList","warehouseCardList"],(0,u.fromJS)(t))),a(m.getJzcbList(!0))}},i.default.createElement(s.Row,{className:"lrls-padding sfgl-name"},I.length?i.default.createElement("span",{className:"overElli"}," ",I.join("、")," "):i.default.createElement("span",{className:"overElli lrls-placeholder"},"筛选仓库..."),i.default.createElement(s.Icon,{type:"triangle"}))),i.default.createElement("div",{className:"sfgl-search left-line",onClick:function(){return e.setState({isSearch:!0})}},i.default.createElement(s.Icon,{type:"search"}))),i.default.createElement("div",{className:"sfgl sfgl-search-item",style:{display:r?"":"none"}},i.default.createElement(s.Icon,{type:"search"}),i.default.createElement(s.XfInput,{className:"xfn-multiple-input",placeholder:"搜索摘要、金额...",value:o,onChange:function(t){return e.setState({searchValue:t})}}),i.default.createElement("span",{className:"xfn-multiple-cancel",onClick:function(){return e.setState({searchValue:"",isSearch:!1,currentPage:1})}},"取消"))):null,i.default.createElement(s.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0,onScroll:function(t){t.target.scrollTop+100+e.scrollerHeight>=c*e.listHeight*50&&c<D&&e.setState({currentPage:c+1})}},J.slice(0,50*c).map(function(e,t){e.get("isOpenedQuantity");var n=e.get("unitCardName")?e.get("unitCardName"):"",l=e.get("quantity")?e.get("quantity"):0,r=(e.get("assistList")?e.get("assistList"):(0,u.fromJS)([])).reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},""),o=e.get("batch")?e.get("batch"):"",c=e.get("expirationDate")?e.get("expirationDate"):"",d=c?o+"("+c+")":o,f=e.get("storeCardName")?e.get("storeCardName"):"";return i.default.createElement(s.Row,{key:t,className:"jr-card",onClick:function(){var t=y.findIndex(function(t){return t.get("jrJvUuid")==e.get("jrJvUuid")});e.get("beSelect")?a(m.pendingStrongListBeSelect(t,!1)):a(m.pendingStrongListBeSelect(t,!0))}},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,i.default.createElement(s.Checkbox,{style:{paddingRight:"10px"},checked:!!e.get("beSelect"),onChange:function(){}}),e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},"摘要：",e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,e.get("stockCardCode")+" "+e.get("stockCardName")," ",l?"(数量:"+l+n+")":null),i.default.createElement(s.Amount,{showZero:!0,className:"hx-bold"},Math.abs(e.get("amount")))),f?i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"仓库: "+f)):null,r||d?i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"属性: "+r+" "+d)):null)})),i.default.createElement("div",{className:"jr-card hx-top-line",style:{display:R>0?"":"none"}},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"已勾选流水：",R,"条"),i.default.createElement("span",null,E,i.default.createElement(s.Amount,{showZero:!0},P)))),i.default.createElement(s.ButtonGroup,null,i.default.createElement(s.Button,{onClick:function(){a(m.changeLrlsData(["views","showJrPage"],!1)),a(m.changeLrlsData(["oriTemp","jrAmount"],(0,d.decimal)(P))),["STATE_YYSR_XS","STATE_YYSR_TS"].includes(h)&&a(m.setJzcbPrice())}},i.default.createElement(s.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=y},1784:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=(a(9),a(13)),s=a(16),d=f(a(1060)),m=f(a(10));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=(0,c.connect)(function(e){return e})(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.scrollerHeight=0,n.listHeight=107,n.pageSize=20,n.throttleFn=(0,u.throttle)(function(e,t,a){e.target.scrollTop+100+n.scrollerHeight>=t*n.listHeight*n.pageSize&&t<a&&n.setState({currentPage:t+1})}),n.state={currentPage:1},p(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=document.getElementsByClassName("scroll-view")[1];this.scrollerHeight=Number(window.getComputedStyle(e).height.replace("px",""));var t=document.getElementsByClassName("jr-card")[0];this.listHeight=t?Number(window.getComputedStyle(t).height.replace("px","")):107}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.editRunningState,l=this.state.currentPage,r=n.getIn(["oriTemp","pendingStrongList"]),o=n.getIn(["oriTemp","oriState"]),c=n.getIn(["oriTemp","shareType"]),f="modify"===n.getIn(["views","insertOrModify"]),p=0,g=0,y=!1;r.forEach(function(e){e.get("beSelect")&&(p++,g+=e.get("notHandleAmount"),y=!0)});var h=Math.ceil(r.size/this.pageSize);return i.default.createElement(s.Container,{className:"edit-running"},"STATE_GGFYFT"==o?i.default.createElement(s.Row,{className:"lrls-category hx-top-line ggfyft"},i.default.createElement("span",{className:"0"===c?"item active":"item",onClick:function(){f||(a(d.changeLrlsData(["oriTemp","shareType"],"0")),a(d.getGgfyftList()))}},i.default.createElement("span",{className:f?"lrls-placeholder":""},"分摊支出")),i.default.createElement("span",{className:"1"===c?"item active":"item",onClick:function(){f||(a(d.changeLrlsData(["oriTemp","shareType"],"1")),a(d.getGgfyftList()))}},i.default.createElement("span",{className:f?"lrls-placeholder":""},"分摊收入"))):null,i.default.createElement(s.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0,onScroll:function(t){e.throttleFn(t,l,h)}},r.slice(0,l*this.pageSize).map(function(e,t){var n=!1;return y&&g*e.get("notHandleAmount")<0&&(n=!0),i.default.createElement(s.Row,{key:t,className:"jr-card",onClick:function(){n||(e.get("beSelect")?a(d.pendingStrongListBeSelect(t,!1)):a(d.pendingStrongListBeSelect(t,!0)))}},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,i.default.createElement(s.Checkbox,{style:{paddingRight:"10px"},checked:!!e.get("beSelect"),onChange:function(){},disabled:n}),e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},e.get("categoryName"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},"摘要：",e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,e.get("jrJvTypeName")),i.default.createElement(s.Amount,{showZero:!0,className:"hx-bold"},e.get("notHandleAmount"))))})),i.default.createElement("div",{className:"jr-card hx-top-line",style:{display:p>0?"":"none"}},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"已勾选流水：",p,"条"),i.default.createElement("span",null,"合计金额：",i.default.createElement(s.Amount,{showZero:!0},g)))),i.default.createElement(s.ButtonGroup,null,i.default.createElement(s.Button,{onClick:function(){if(p>160)return m.Alert("勾选的核销流水不能超过160条");a(d.changeLrlsData(["views","showJrPage"],!1)),a(d.changeLrlsData(["oriTemp","jrAmount"],(0,u.decimal)(g))),a(d.autoCalculate())}},i.default.createElement(s.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=g},1785:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=(a(9),a(13)),s=a(16),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1060));var m=(0,c.connect)(function(e){return e})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.editRunningState,n=a.getIn(["oriTemp","pendingStrongList"]),l=a.getIn(["oriTemp","projectCardList",0,"projectProperty"]),r=0,o=0,c="发生金额:",m="已入库金额:";return i.default.createElement(s.Container,{className:"edit-running"},i.default.createElement(s.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",savePosition:!0},n.map(function(e,t){var a=e.get("happenAmount"),n=e.get("storeAmount"),u=e.get("direction");return"XZ_CONSTRUCTION"==l?(c="debit"==u?"待确认收入":"已确认收入",m="debit"==u?"待确认成本":"已确认成本","debit"==u&&(a&&(r+=Number(a)),n&&(o+=Number(n))),"credit"==u&&(a&&(r-=Number(a)),n&&(o-=Number(n)))):(a&&(r+=Number(a)),n&&(o+=Number(n))),i.default.createElement(s.Row,{key:t,className:"jr-card"},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,e.get("beOpened")?"期初值":e.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},e.get("categoryName"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},"摘要：",e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("div",null,a?c:null," ",i.default.createElement(s.Amount,{className:"hx-bold"},a)),i.default.createElement("div",null,n?m:null," ",i.default.createElement(s.Amount,{className:"hx-bold"},n))))})),i.default.createElement("div",{className:"jr-card hx-top-line"},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",null,"XZ_CONSTRUCTION"==l?"待确认收入净额":c," ",i.default.createElement(s.Amount,{showZero:!0},(0,u.decimal)(r))),i.default.createElement("span",null,"XZ_CONSTRUCTION"==l?"待确认成本净额":m," ",i.default.createElement(s.Amount,{showZero:!0},(0,u.decimal)(o))))),i.default.createElement(s.ButtonGroup,null,i.default.createElement(s.Button,{onClick:function(){t(d.changeLrlsData(["views","showJrPage"],!1))}},i.default.createElement(s.Icon,{type:"choose"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=m},1786:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,l,r,o,i){var c=!1;switch(e){case"LB_ZSKX":"STATE_ZS_TH"===t&&(c=!0);break;case"LB_ZFKX":"STATE_ZF_SH"===t&&(c=!0);break;case"LB_JK":!a||"STATE_JK_ZFLX"!==t||o||i||(c=!0);break;case"LB_TZ":a&&["STATE_TZ_SRGL","STATE_TZ_SRLX"].includes(t)&&!o&&!i&&(c=!0);break;case"LB_ZB":!a||"STATE_ZB_ZFLR"!==t||o||i||(c=!0);break;case"LB_SFZC":(({SX_ZZS:function(){"STATE_SF_JN"!==t&&"STATE_SF_SFJM"!==t||(c=!0)},SX_GRSF:function(){c=!1},SX_QTSF:function(){(a&&"STATE_SF_JN"===t||"STATE_SF_SFJM"===t)&&(c=!0)},SX_QYSDS:function(){(a&&"STATE_SF_JN"===t||"STATE_SF_SFJM"===t)&&(c=!0)}})[n]||function(){return null})();break;case"LB_XCZC":(({SX_GZXJ:function(){!a||"STATE_XC_FF"!==t&&"STATE_XC_DK"!==t||(c=!0)},SX_SHBX:function(){a&&"STATE_XC_JN"===t&&(c=!0)},SX_ZFGJJ:function(){a&&"STATE_XC_JN"===t&&(c=!0)},SX_FLF:function(){r&&"STATE_XC_FF"===t&&(c=!0)},SX_QTXC:function(){a&&"STATE_XC_FF"===t&&(c=!0)}})[l]||function(){return null})();break;case"LB_KJFP":case"LB_FPRZ":case"LB_JZSY":case"LB_SFGL":case"LB_JZCB":case"LB_GGFYFT":c=!0}return{showJr:c}}},1787:function(e,t,a){},1789:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=(a(9),a(16)),s=p(a(1060)),d=a(13),m=p(a(10)),f=a(123);function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=(0,c.connect)(function(e){return e})(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.scrollerHeight=0,n.listHeight=154,n.totalAmount=0,n.moedAmount=0,n.state={currentPage:1},g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){m.setTitle({title:"手动核销"}),m.setIcon({showIcon:!1}),m.setRight({show:!1}),sessionStorage.setItem("routerPage","routerSfgl");var e=document.getElementsByClassName("scroll-view")[0];this.scrollerHeight=Number(window.getComputedStyle(e).height.replace("px",""));var t=document.getElementsByClassName("jr-card")[0];this.listHeight=t?Number(window.getComputedStyle(t).height.replace("px","")):154}},{key:"componentWillUnmount",value:function(){this.props.dispatch(s.changeLrlsData(["oriTemp","amount"],(0,d.decimal)(Math.abs(this.totalAmount)))),this.props.dispatch(s.changeLrlsData(["oriTemp","allHandleAmount"],this.totalAmount)),this.props.dispatch(s.changeLrlsData(["oriTemp","moedAmount"],(0,d.decimal)(this.moedAmount)))}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.history,l=t.editRunningState,r=this.state.currentPage,o=l.getIn(["oriTemp","pendingStrongList"]),c="modify"===l.getIn(["views","insertOrModify"]),p=l.get("oriTemp"),g=l.getIn(["oriTemp","oriDate"]),y=p.get("oriState"),h=p.get("beMoed"),E=0,v=0,b=0,_=0,S=o.filter(function(e){if(e.get("beSelect")){var t=Number(e.get("handleAmount"))?Number(e.get("handleAmount")):0,a=Number(e.get("moedAmount"))?Number(e.get("moedAmount")):0;return"debit"==e.get("direction")?(v+=Number(e.get("amount")),b+=Number(t),_+=Number(a),0):(E+=Number(e.get("amount")),b-=Number(t),_-=Number(a),0),!0}});E=(0,d.decimal)(E),v=(0,d.decimal)(v),b=(0,d.decimal)(b),_=(0,d.decimal)(_),this.totalAmount=b,this.moedAmount=_,c&&"STATE_SFGL_ML"==y&&(this.totalAmount=_);var T=b>=0?"核销收款金额：":"核销付款金额：",C=_>=0?"核销收款抹零：":"核销付款抹零：",L=Math.ceil(S.size/50);return i.default.createElement(u.Container,{className:"edit-running"},i.default.createElement(f.TopDatePicker,{value:g,onChange:function(e){},callback:function(e){}}),i.default.createElement(u.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll",onScroll:function(t){t.target.scrollTop+100+e.scrollerHeight>=r*e.listHeight*50&&r<L&&e.setState({currentPage:r+1})}},S.slice(0,50*r).map(function(e,t){var n=e.get("beOpened"),l=(e.get("beCard"),Number(e.get("handleAmount"))?Number(e.get("handleAmount")):0),r=Number(e.get("moedAmount"))?Number(e.get("moedAmount")):0,c=e.get("amount"),d=/^\d*\.?\d{0,2}$/g,f="请输入正数";c<0&&(d=/^-\d*\.?\d{0,2}$/g,f="请输入负数");var p=o.findIndex(function(t){return t.get("uuid")==e.get("uuid")});return i.default.createElement(u.Row,{key:t,className:"jr-card lrls-bottom"},i.default.createElement("div",{className:"jr-item jr-line"},i.default.createElement("span",null,n?"期初值":e.get("jrIndex")+"号"),i.default.createElement("span",{className:"lrls-placeholder"},e.get("oriDate"))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("div",{className:"overElli"},e.get("categoryName")),i.default.createElement("span",null)),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"overElli"},e.get("oriAbstract"))),i.default.createElement("div",{className:"jr-item lrls-bottom-line"},i.default.createElement("span",{className:""},"credit"==e.get("direction")?"贷方发生":"借方发生"),i.default.createElement(u.Amount,{showZero:!0,className:"hx-bold"},e.get("amount"))),i.default.createElement(u.Row,{className:"lrls-more-card"},i.default.createElement(u.Row,{className:"lrls-more-card sfgl-input sfgl-input-left",style:{display:"STATE_SFGL_ML"==y?"none":""}},i.default.createElement("label",null,"核销金额： "),i.default.createElement(u.XfInput.BorderInputItem,{mode:"amount",value:e.get("handleAmount"),onChange:function(e){return d.test(e)||""==e?"-"!=e&&Math.abs(r)+Math.abs(e)>Math.abs(c)?m.toast.info("金额不能大于待处理金额"):void a(s.changeLrlsData(["oriTemp","pendingStrongList",p,"handleAmount"],e)):m.toast.info(f)}})),i.default.createElement(u.Row,{className:"lrls-more-card sfgl-input sfgl-input-right",style:{display:"STATE_SFGL_ML"==y||h?"":"none"}},i.default.createElement("label",null,"抹零金额： "),i.default.createElement(u.XfInput.BorderInputItem,{mode:"amount",value:e.get("moedAmount"),onChange:function(e){return d.test(e)||""==e?"-"!=e&&Math.abs(l)+Math.abs(e)>Math.abs(c)?m.toast.info("金额不能大于待处理金额"):void a(s.changeLrlsData(["oriTemp","pendingStrongList",p,"moedAmount"],e)):m.toast.info(f)}}))))})),i.default.createElement("div",{className:"jr-card hx-top-line"},i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"jr-item-item"},"借方合计：",i.default.createElement(u.Amount,{showZero:!0},v)),c?null:i.default.createElement("span",{className:"jr-item-item"},T,i.default.createElement(u.Amount,{showZero:!0},Math.abs(b)))),i.default.createElement("div",{className:"jr-item"},i.default.createElement("span",{className:"jr-item-item"},"贷方合计：",i.default.createElement(u.Amount,{showZero:!0},E)),c&&"STATE_SFGL"==y?i.default.createElement("span",{className:"jr-item-item"},T,i.default.createElement(u.Amount,{showZero:!0},Math.abs(b))):null,c&&"STATE_SFGL_ML"==y?i.default.createElement("span",{className:"jr-item-item"},C,i.default.createElement(u.Amount,{showZero:!0},Math.abs(_))):null,!c&&h?i.default.createElement("span",{className:"jr-item-item"},C,i.default.createElement(u.Amount,{showZero:!0},Math.abs(_))):null)),i.default.createElement(u.ButtonGroup,null,i.default.createElement(u.Button,{onClick:function(){n.goBack()}},i.default.createElement(u.Icon,{type:"confirm"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=y},1790:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=T(a(0)),o=a(31),i=a(9),c=a(16),u=(a(13),T(a(1791))),s=T(a(1792)),d=T(a(1793)),m=T(a(1794)),f=T(a(1795)),p=T(a(1796)),g=T(a(1799)),y=T(a(1800)),h=T(a(1484)),E=S(a(10)),v=S(a(183)),b=S(a(1060)),_=S(a(1068));function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var L=function(e,t,a,n){var l=[],r=[];return a.forEach(function(t,a){a!=n&&t.get("cardUuid")==e&&t.get("serialList")&&t.get("serialList").map(function(e){l.push(e.get("serialUuid"))})}),t.forEach(function(e){var t=e.serialUuid;l.includes(t)||r.push(e)}),r},N=(0,o.connect)(function(e){return e})(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={isAll:!0,visible:!1,categoryValue:"ALL",assistVisible:!1},C(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),l(t,[{key:"componentDidMount",value:function(){E.setTitle({title:"存货明细"}),E.setIcon({showIcon:!1}),E.setRight({show:!1}),sessionStorage.setItem("routerPage","routerStock")}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.history,l=t.homeState,o=t.editRunningState,E=this.state,S=E.isAll,T=E.visible,C=E.categoryValue,N=E.assistVisible,w=l.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE"),I=o.get("views"),A=I.get("idx"),k="modify"===I.get("insertOrModify"),O=o.get("oriTemp"),j=O.get("categoryType"),R=O.get("oriUuid"),P=O.get("oriState"),J=O.get("stockCardList"),D=O.getIn([v.categoryTypeObj[j],"stockRange"]);D=D||[];var Z=O.get("pendingStrongList")?O.get("pendingStrongList"):(0,i.fromJS)([]),x=o.get("stockList"),U=o.get("commonCardList").toJS(),M=o.get("stockCategoryList"),B=o.get("cardAllList"),X=B.get("batchList").toJS(),Y=B.get("serialList").toJS(),F="STATE_CHYE_TYDJ"==P?o.get("warehouseListTydj"):o.get("warehouseList"),H=[{uuid:"ALL",name:"全部",childList:[]}],G=S?x.toJS():U,z=null,V=null,q=null,W=!1,Q=J.size,K=[],$=[],ee=!1;switch(j){case"LB_YYSR":case"LB_YYZC":M.map(function(e){D.includes(e.get("uuid"))&&H.push(e.toJS())}),G.map(function(e){e.name=e.key}),W=!0,z=function(e,t){return a(b.changeYysrStockCard(e,t,A))},V=function(e){return a(b.getStockListByCategory(e))};var te=O.get("beCarryover"),ae=!(!k||!te),ne=J.get(A)?J.get(A):(0,i.fromJS)({});K=(K=ne.getIn(["financialInfo","assistClassificationList"]))||(0,i.fromJS)([]),$=ne.get("assistList")?ne.get("assistList").toJS():[],ee=ne.getIn(["financialInfo","openSerial"]),q=r.default.createElement(m.default,{idx:A,cardData:ne,dispatch:a,oriState:P,cardDisabled:ae,stockCardList:J,stockListArr:G,warehouseList:F,isOpenedWarehouse:w,onClick:function(){ae||e.setState({visible:!0})},assistClick:function(){ae||e.setState({assistVisible:!0})},batchList:X,serialMultipleList:L(ne.get("cardUuid"),Y,J,A),isModify:k,oriUuid:R});break;case"LB_CHDB":J.map(function(e){return e.get("cardUuid")});H=[{uuid:"ALL",name:"全部",top:!0,childList:[]}],M.map(function(e){H.push(e.toJS())}),G.map(function(e){e.name=e.key});V=function(e){return a(b.getStockListByCategory(e))},z=function(e,t,n){!function(e,t,n){a(b.changeYysrStockCard(e,t,n,"CHDB"))}("card",t,n),a(b.getChdbPrice(n,t,"stockCardList"))};var le=J.get(A)?J.get(A):(0,i.fromJS)({}),re=O.get("warehouseCardList"),oe=(re.get(0)?re.get(0):(0,i.fromJS)({})).get("cardUuid");K=(K=le.getIn(["financialInfo","assistClassificationList"]))||(0,i.fromJS)([]),$=le.get("assistList")?le.get("assistList").toJS():[],ee=le.getIn(["financialInfo","openSerial"]),q=r.default.createElement(u.default,{idx:A,cardData:le,dispatch:a,warehouseCardUuid:oe,onClick:function(){e.setState({visible:!0})},stockListArr:G,assistClick:function(){e.setState({assistVisible:!0})},batchList:X,serialMultipleList:L(le.get("cardUuid"),Y,J,A),isModify:k,oriUuid:R});break;case"LB_JZCB":var ie=J.map(function(e){return e.get("cardUuid")}),ce="STATE_YYSR_ZJ"==P;H=[{uuid:"ALL",name:"全部",top:!0,childList:[]}],M.map(function(e){H.push(e.toJS())}),k&&!ce&&(H=[{key:"ALL",label:"全部",top:!0,childList:[]}]),G.map(function(e){e.name=e.key,e.uuid=e.cardUuid,["STATE_YYSR_XS","STATE_YYSR_TS"].includes(P)&&ie.includes(e.cardUuid)&&(e.disabled=!0)}),V=function(e){return a(b.getCostStockByCategory(e.key,e.top,"commonCardJzcbList"))},z=function(e,t,n){a(b.changeYysrStockCard("card",t,n,"JZCB")),"STATE_YYSR_ZJ"==P&&a(b.getJzcbListPrice(n,t)),k&&a(b.filterJzcbList())};var ue=J.get(A)?J.get(A):(0,i.fromJS)({});ce&&(K=(K=ue.getIn(["financialInfo","assistClassificationList"]))||(0,i.fromJS)([]),$=ue.get("assistList")?ue.get("assistList").toJS():[],ee=ue.getIn(["financialInfo","openSerial"])),q=r.default.createElement(s.default,{idx:A,cardData:ue,dispatch:a,oriState:P,stockList:x,warehouseList:F,pendingStrongList:Z,isOpenedWarehouse:w,onClick:function(){e.setState({visible:!0})},assistClick:function(){e.setState({assistVisible:!0})},batchList:X,serialMultipleList:L(ue.get("cardUuid"),Y,J,A),isModify:k,oriUuid:R});break;case"LB_CHTRXM":H=[{uuid:"ALL",name:"全部",top:!0,childList:[]}],M.map(function(e){H.push(e.toJS())}),G.map(function(e){e.name=e.key}),V=function(e){return a(b.getStockListByCategory(e))},z=function(e,t,n){a(b.changeYysrStockCard("card",t,n,"CHTRXM")),a(b.getChzzListPrice(n,t))};var se=J.get(A)?J.get(A):(0,i.fromJS)({});K=(K=se.getIn(["financialInfo","assistClassificationList"]))||(0,i.fromJS)([]),$=se.get("assistList")?se.get("assistList").toJS():[],ee=se.getIn(["financialInfo","openSerial"]),q=r.default.createElement(d.default,{idx:A,cardData:se,dispatch:a,stockList:x,warehouseList:F,isOpenedWarehouse:w,onClick:function(){e.setState({visible:!0})},assistClick:function(){e.setState({assistVisible:!0})},batchList:X,serialMultipleList:L(se.get("cardUuid"),Y,J,A),isModify:k,oriUuid:R});break;case"LB_CHZZ":if(W=!0,"STATE_CHZZ_ZZCX"==P){H=[{uuid:"ALL",name:"全部",top:!0,childList:[]}],M.map(function(e){H.push(e.toJS())});var de=I.get("cardType"),me=O.get("stockCardOtherList"),fe=J.map(function(e){return e.get("cardUuid")}),pe=me.map(function(e){return e.get("cardUuid")});G.map(function(e){e.name=e.key,"stockCardList"==de&&pe.includes(e.uuid)&&(e.disabled=!0),"stockCardOtherList"==de&&fe.includes(e.uuid)&&(e.disabled=!0)}),V=function(e){return a(b.getStockListByCategory(e))},z=function(e,t,n){a(b.changeYysrStockCard("card",t,n,"CHZZ",de)),a(b.getChzzListPrice(n,t,de))};var ge=J.get(A)?J.get(A):(0,i.fromJS)({});"stockCardOtherList"==de&&(ge=me.get(A)?me.get(A):(0,i.fromJS)({}),Q=me.size),K=(K=ge.getIn(["financialInfo","assistClassificationList"]))||(0,i.fromJS)([]),$=ge.get("assistList")?ge.get("assistList").toJS():[],ee=ge.getIn(["financialInfo","openSerial"]),q=r.default.createElement(f.default,{idx:A,cardData:ge,cardType:de,dispatch:a,stockList:x,warehouseList:F,isOpenedWarehouse:w,onClick:function(){e.setState({visible:!0})},assistClick:function(){e.setState({assistVisible:!0})},batchList:X,serialMultipleList:L(ge.get("cardUuid"),Y,"stockCardList"==de?J:me,A),isModify:k,oriUuid:R})}if("STATE_CHZZ_ZZD"==P){H=[{uuid:"ALL",name:"全部",top:!0,childList:[]}],M.map(function(e){H.push(e.toJS())}),V=function(e){return a(b.chzzAssemblyList(e))},z=function(e,t,n){a(b.changeYysrStockCard("card",t,n,"CHZZ_ZZD"))};var ye=J.get(A)?J.get(A):(0,i.fromJS)({}),he=B.get("assemblyList").toJS(),Ee=B.get("commonAssemblyList").toJS();G=S?he:Ee,K=(K=ye.getIn(["financialInfo","assistClassificationList"]))||(0,i.fromJS)([]),$=ye.get("assistList")?ye.get("assistList").toJS():[],ee=ye.getIn(["financialInfo","openSerial"]),q=r.default.createElement(p.default,{idx:A,isModify:k,cardData:ye,dispatch:a,stockList:x,commonCardList:U,stockCategoryList:M,assemblyList:he,warehouseList:F,isOpenedWarehouse:w,onClick:function(){e.setState({visible:!0})},assistClick:function(){e.setState({assistVisible:!0})},batchList:X,serialMultipleList:Y,oriUuid:R})}break;case"LB_CHYE":O.get("warehouseCardList"),J.map(function(e){return e.get("cardUuid")});H=[{uuid:"ALL",name:"全部",top:!0,childList:[]}],M.map(function(e){H.push(e.toJS())}),G.map(function(e){e.name=e.key}),V=function(e){return a(b.getStockListByCategory(e))},z=function(e,t,n){a(b.changeYysrStockCard("card",t,n,"CHYE")),"STATE_CHYE_CH"!=P&&a(b.getChyePrice(t,n,"stock"))};var ve=J.get(A)?J.get(A):(0,i.fromJS)({});K=(K=ve.getIn(["financialInfo","assistClassificationList"]))||(0,i.fromJS)([]),$=ve.get("assistList")?ve.get("assistList").toJS():[],ee=ve.getIn(["financialInfo","openSerial"]),q=r.default.createElement(g.default,{idx:A,cardData:ve,dispatch:a,oriState:P,stockList:x,warehouseList:F,isOpenedWarehouse:w,onClick:function(){e.setState({visible:!0})},assistClick:function(){e.setState({assistVisible:!0})},batchList:X,serialMultipleList:L(ve.get("cardUuid"),Y,J,A),isModify:k,oriUuid:R});break;case"LB_XMJZ":H=[{uuid:"ALL",name:"全部",top:!0,childList:[]}],M.map(function(e){H.push(e.toJS())}),W=!0,G.map(function(e){e.name=e.key}),V=function(e){return a(b.getStockListByCategory(e))},z=function(e,t,n){a(b.changeYysrStockCard("card",t,n,"XMJZ")),a(b.getChzzListPrice(n,t))};var be=J.get(A)?J.get(A):(0,i.fromJS)({});K=(K=be.getIn(["financialInfo","assistClassificationList"]))||(0,i.fromJS)([]),$=be.get("assistList")?be.get("assistList").toJS():[],ee=be.getIn(["financialInfo","openSerial"]),q=r.default.createElement(y.default,{idx:A,cardData:be,dispatch:a,stockList:x,warehouseList:F,isOpenedWarehouse:w,onClick:function(){e.setState({visible:!0})},assistClick:function(){e.setState({assistVisible:!0})},batchList:X,serialMultipleList:L(be.get("cardUuid"),Y,J,A),isModify:k,oriUuid:R})}!function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(H);var _e=A-1,Se=A+1;return r.default.createElement(c.Container,{className:"edit-running"},r.default.createElement(c.ChosenPicker,{visible:T,type:"card",title:"请选择存货",icon:{type:"inventory-add",onClick:function(){W&&a(_.beforeAddInventoryCardFromEditRunning(D,n))}},district:H,cardList:G,value:C,onChange:function(t){if(e.setState({categoryValue:t.key}),"ALL"==t.key)return e.setState({isAll:!0});e.setState({isAll:!1}),V(t)},onOk:function(e){e.length&&z("card",e,A)},onCancel:function(){e.setState({visible:!1})}},r.default.createElement("span",null)),r.default.createElement(c.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll"},q),r.default.createElement(h.default,{assistVisible:N,assistClassificationList:K,oriAssistList:$,onOk:function(t){var n="stockCardList";"STATE_CHZZ_ZZCX"==P&&(n=I.get("cardType")),a(b.changeYysrStockCard("assistList",(0,i.fromJS)(t),A,void 0,n)),ee&&(a(b.changeYysrStockCard("quantity","",A,void 0,n)),a(b.changeYysrStockCard("serialList",(0,i.fromJS)([]),A,void 0,n))),e.setState({assistVisible:!1})},addClick:function(t){var n="stockCardList";"STATE_CHZZ_ZZCX"==P&&(n=I.get("cardType")),a(b.addInventoryAssist(t,n,P)),e.setState({categoryValue:"ALL",isAll:!0})},onCancel:function(){e.setState({assistVisible:!1})}}),r.default.createElement(c.ButtonGroup,null,r.default.createElement(c.Button,{disabled:_e<=-1,onClick:function(){a(b.changeLrlsData(["views","idx"],_e))}},r.default.createElement(c.Icon,{type:"arrow-right",style:{transform:"rotate(180deg)"}}),r.default.createElement("span",null,"上一明细")),r.default.createElement(c.Button,{onClick:function(){n.goBack()}},r.default.createElement(c.Icon,{type:"confirm"}),r.default.createElement("span",null,"确定")),r.default.createElement(c.Button,{disabled:Se==Q,onClick:function(){return a(b.changeLrlsData(["views","idx"],Se))}},r.default.createElement("span",null,"下一明细"),r.default.createElement(c.Icon,{type:"arrow-right"}))))}}]),t}())||n;t.default=N},1791:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(a(1219)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=p(r),i=a(9),c=a(16),u=a(13),s=f(a(10)),d=f(a(1060)),m=f(a(1068));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={visible:!1},g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,l=t.idx,r=t.cardData,f=t.onClick,p=t.stockListArr,g=t.warehouseCardUuid,y=t.assistClick,h=t.batchList,E=t.serialMultipleList,v=t.isModify,b=t.oriUuid,_=this.state.visible,S=function(e,t){return a(d.changeYysrStockCard(e,t,l,"CHDB"))},T=l,C=r,L=C.get("isOpenedQuantity"),N=C.get("cardUuid"),w=C.get("isUniformPrice"),I=C.get("quantity")?Number(C.get("quantity")):0,A=C.get("price")?Number(C.get("price")):0,k=(C.get("amount")&&Number(C.get("amount")),[]);if(L){var O=!0,j=!1,R=void 0;try{for(var P,J=p[Symbol.iterator]();!(O=(P=J.next()).done);O=!0){var D=P.value;if(D.uuid==C.get("cardUuid")){k.push({key:D.unit.name,value:D.unit.uuid}),D.unit.unitList.map(function(e){k.push({key:e.name,value:e.uuid})});break}}}catch(e){j=!0,R=e}finally{try{!O&&J.return&&J.return()}finally{if(j)throw R}}}var Z=C.getIn(["financialInfo","openAssist"]),x=C.getIn(["financialInfo","openSerial"]),U=C.getIn(["financialInfo","openBatch"]),M=C.getIn(["financialInfo","openShelfLife"]),B=C.getIn(["financialInfo","shelfLife"]),X=C.get("assistList")?C.get("assistList"):(0,i.fromJS)([]),Y=C.get("serialList")?C.get("serialList"):(0,i.fromJS)([]),F=X.reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},""),H=C.get("batch")?C.get("batch"):"",G=C.get("batchUuid")?C.get("batchUuid"):"",z=C.get("expirationDate")?C.get("expirationDate"):"",V=z?H+"("+z+")":H;console.log(C.toJS());var q=function(){var t,l,r=[];return N?(Z&&0==X.size&&r.push("请先选择完整的属性"),U&&!H&&r.push("请先选择批次"),g||r.push("请先选择调出仓库"),r.length?s.toast.info(r[0]):void(t=n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(e){a(d.getSerialListIn({inventoryUuid:N,warehouseUuid:g,assistList:X,batchUuid:G,oriUuid:b},e))});case 2:if(!I||!v||0!=Y.size){t.next=5;break}return t.next=5,new Promise(function(e){a(d.getSerialListChecked({inventoryUuid:N,outJrOriCardUuid:C.get("jrOriCardUuid")},function(t){S("serialList",t),e()},!0))});case 5:e.setState({visible:!0});case 6:case"end":return t.stop()}},t,e)}),l=function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(l,r){try{var o=e[l](r),i=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});t(i)}("next")})},function(){return l.apply(this,arguments)})()):s.toast.info("请先选择存货卡片")};return o.default.createElement("div",{className:"lrls-card"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},o.default.createElement("span",null,"存货明细(",T+1,")")),o.default.createElement("div",{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"存货:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){f()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},C.get("cardUuid")?o.default.createElement("span",null," ",C.get("code")+" "+C.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:Z?"":"none"}},o.default.createElement("label",null,"属性:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){y()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},F?o.default.createElement("span",null," ",F," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择属性"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:U?"":"none"}},o.default.createElement("label",null,"批次:"),o.default.createElement(c.Single,{className:"lrls-single",district:h,value:H,icon:{type:"add-plus",onClick:function(){a(m.editInventoryBatch("MODIFY-INSERT",N,M,B))}},iconTwo:{type:"home",onClick:function(){a(m.editInventoryBatch("MODIFY-MODIFY",N,M,B))}},onOk:function(e){S("bitch",(0,i.fromJS)({batch:e.batch,batchUuid:e.batchUuid,expirationDate:e.expirationDate})),x&&(S("quantity",""),S("serialList",(0,i.fromJS)([])))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding",onClick:function(){a(d.getBatchList(N))}},V?o.default.createElement("span",null,V):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择批次"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"yysr-amount lrls-bottom",style:{display:L?"":"none"}},o.default.createElement("label",null,"数量:"),x?o.default.createElement("span",{className:"serial",style:{display:x?"":"none",flex:1,textAlign:"left"},onClick:function(){return q()}},I?o.default.createElement(c.Amount,{decimalPlaces:4,decimalZero:!1},I):"点击输入",o.default.createElement(c.Icon,{type:"edit"})):o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",placeholder:"填写数量",value:C.get("quantity"),onChange:function(e){if(/^\d*\.?\d{0,4}$/g.test(e)&&(S("quantity",e),A>0)){var t=(0,u.decimal)(A*Number(e));S("amount",t)}else;}}),o.default.createElement(c.Single,{className:"lrls-single",district:k,value:C.get("unitUuid"),onOk:function(e){if(S("unit",e),C.get("unitPrice")){var t=e.basicUnitQuantity?e.basicUnitQuantity:1,a=(0,u.decimal)(C.get("unitPrice")*Number(t));if(S("price",a),C.get("quantity")){var n=(0,u.decimal)(a*Number(C.get("quantity")));S("amount",n)}}}},o.default.createElement(c.Row,{className:"lrls-account lrls-type"},C.get("unitUuid")?o.default.createElement("span",null," ",C.get("unitName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"选择数量单位"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom",style:{display:L?"":"none"}},o.default.createElement("label",null,"单价："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",placeholder:"填写单价",value:C.get("price"),onChange:function(e){if(/^\d*\.?\d{0,4}$/g.test(e)&&(S("price",e),I>0)){var t=(0,u.decimal)(I*Number(e));S("amount",t)}}}),o.default.createElement("span",{className:"lrls-margin-left",style:{display:C.get("unitPrice")?"":"none"}},w?"统一单价：":"参考单价：",o.default.createElement(c.Amount,null,C.get("unitPrice")))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"金额："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写成本金额",value:C.get("amount"),onChange:function(e){if(/^\d*\.?\d{0,2}$/g.test(e)&&S("amount",e),L&&I>0){var t=(0,u.decimal)(Number(e)/I,4);S("price",t)}else;}})),o.default.createElement(c.Multiple,{visible:_,district:E,value:Y.toJS().map(function(e){return e.serialUuid}),title:"选择序列号",showPreview:!0,previewTitle:"已选择序列号",onOk:function(t){if(e.setState({visible:!1}),S("quantity",t.length),S("serialList",(0,i.fromJS)(t)),A>0){var a=(0,u.decimal)(A*Number(t.length));S("amount",a)}else;},onCancel:function(){e.setState({visible:!1})}},o.default.createElement("span",null)))}}]),t}();t.default=y},1792:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(a(1219)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=p(r),i=a(9),c=a(16),u=a(13),s=f(a(10)),d=f(a(1060)),m=f(a(1068));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={visible:!1},g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,l=t.oriState,r=t.idx,f=t.cardData,p=t.stockList,g=t.warehouseList,y=t.pendingStrongList,h=t.isOpenedWarehouse,E=t.onClick,v=t.assistClick,b=t.batchList,_=t.serialMultipleList,S=t.isModify,T=t.oriUuid,C=this.state.visible,L="STATE_YYSR_ZJ"==l,N=function(e,t,n){return a(d.changeYysrStockCard(e,t,n,"JZCB"))},w=r,I=f,A=[],k=I.get("cardUuid"),O=I.get("warehouseCardUuid"),j=I.get("isOpenedQuantity"),R=I.get("isUniformPrice"),P=I.get("quantity")?Number(I.get("quantity")):0,J=I.get("price")?Number(I.get("price")):0,D=(I.get("amount")&&Number(I.get("amount")),I.get("unitName")?I.get("unitName"):"");if(L&&j){var Z=p.toJS(),x=!0,U=!1,M=void 0;try{for(var B,X=Z[Symbol.iterator]();!(x=(B=X.next()).done);x=!0){var Y=B.value;if(Y.cardUuid==I.get("cardUuid")){A.push({key:Y.unit.name,value:Y.unit.uuid,basicUnitQuantity:Y.unit.basicUnitQuantity}),Y.unit.unitList.map(function(e){A.push({key:e.name,value:e.uuid,basicUnitQuantity:e.basicUnitQuantity})});break}}}catch(e){U=!0,M=e}finally{try{!x&&X.return&&X.return()}finally{if(U)throw M}}}var F=!0;y.forEach(function(e){e.get("beSelect")&&e.get("stockCardUuid")==I.get("cardUuid")&&(F=!1)});var H=0;if(L||(H=I.get("unitPrice")?I.get("unitPrice"):0),L){F=!1;var G=I.get("unitUuid"),z=1;A.forEach(function(e){e.value==G&&(z=e.basicUnitQuantity)}),H=(0,u.decimal)(I.get("unitPrice")*z)}var V=I.getIn(["financialInfo","openAssist"]),q=I.getIn(["financialInfo","openSerial"]),W=I.getIn(["financialInfo","openBatch"]),Q=I.getIn(["financialInfo","openShelfLife"]),K=I.getIn(["financialInfo","shelfLife"]),$=I.get("assistList")?I.get("assistList"):(0,i.fromJS)([]),ee=I.get("serialList")?I.get("serialList"):(0,i.fromJS)([]),te=$.reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},""),ae=I.get("batch")?I.get("batch"):"",ne=I.get("batchUuid")?I.get("batchUuid"):"",le=I.get("expirationDate")?I.get("expirationDate"):"",re=le?ae+"("+le+")":ae,oe=function(){var t,l,r=[];return k?(V&&0==$.size&&r.push("请先选择完整的属性"),W&&!ae&&r.push("请先选择批次"),h&&!O&&r.push("请先选择仓库"),r.length?s.toast.info(r[0]):void(t=n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(e){a(d.getSerialListIn({inventoryUuid:k,warehouseUuid:O,assistList:$,batchUuid:ne,oriUuid:T,isPre:!1},e))});case 2:if(!P||!S||0!=ee.size){t.next=5;break}return t.next=5,new Promise(function(e){a(d.getSerialListChecked({inventoryUuid:k,outJrOriCardUuid:I.get("jrOriCardUuid")},function(t){N("serialList",t,w),e()}))});case 5:e.setState({visible:!0});case 6:case"end":return t.stop()}},t,e)}),l=function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(l,r){try{var o=e[l](r),i=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});t(i)}("next")})},function(){return l.apply(this,arguments)})()):s.toast.info("请先选择存货卡片")};return o.default.createElement("div",{className:"lrls-card"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},o.default.createElement("span",null,"存货明细(",w+1,")")),o.default.createElement("div",{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"存货:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){L&&E()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},I.get("cardUuid")?o.default.createElement("span",null," ",I.get("code")+" "+I.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:V?"":"none"}},o.default.createElement("label",null,"属性:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){L&&v()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},te?o.default.createElement("span",null," ",te," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择属性"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:W?"":"none"}},o.default.createElement("label",null,"批次:"),o.default.createElement(c.Single,{className:"lrls-single",district:b,value:ae,disabled:!L,icon:{type:"add-plus",onClick:function(){a(m.editInventoryBatch("MODIFY-INSERT",k,Q,K))}},iconTwo:{type:"home",onClick:function(){a(m.editInventoryBatch("MODIFY-MODIFY",k,Q,K))}},onOk:function(e){N("bitch",(0,i.fromJS)({batch:e.batch,batchUuid:e.batchUuid,expirationDate:e.expirationDate}),w),q&&(N("quantity","",w),N("serialList",(0,i.fromJS)([]),w))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding",onClick:function(){a(d.getBatchList(k))}},re?o.default.createElement("span",null,re):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择批次"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:h?"":"none"}},o.default.createElement("label",null,"仓库:"),o.default.createElement(c.Single,{className:"lrls-single",district:g.toJS(),value:I.get("warehouseCardUuid"),onOk:function(e){N("warehouse",e,w),q&&(N("quantity","",w),N("serialList",(0,i.fromJS)([]),w)),"STATE_YYSR_ZJ"==l&&j&&a(d.getJzcbPrice(w))},disabled:!L},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},I.get("warehouseCardUuid")?o.default.createElement("span",null," ",I.get("warehouseCardCode")+" "+I.get("warehouseCardName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择仓库卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"yysr-amount lrls-bottom",style:{display:j?"":"none"}},o.default.createElement("label",null,"数量:"),L&&q?o.default.createElement("span",{className:"serial",onClick:function(){return oe()}},P?o.default.createElement(c.Amount,{decimalPlaces:4,decimalZero:!1},P):"点击输入",o.default.createElement(c.Icon,{type:"edit"})):null,L&&!q?o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",placeholder:"填写数量",value:I.get("quantity"),onChange:function(e){if((/^[-\d]\d*\.?\d{0,4}$/g.test(e)||""==e)&&(N("quantity",e,w),J>0&&"-"!=e)){var t=(0,u.decimal)(J*Number(e));N("amount",t,w)}else;}}):null,L?o.default.createElement(c.Single,{className:"lrls-single",district:A,value:I.get("unitUuid"),onOk:function(e){if(N("unit",e,w),I.get("unitPrice")){var t=(0,u.decimal)(I.get("unitPrice")*e.basicUnitQuantity,4);if(N("price",t,w),I.get("quantity")){var a=(0,u.decimal)(t*Number(I.get("quantity")));N("amount",a,w)}}}},o.default.createElement(c.Row,{className:"lrls-account lrls-type"},I.get("unitUuid")?o.default.createElement("span",null," ",I.get("unitName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"选择数量单位"),o.default.createElement(c.Icon,{type:"triangle"}))):null,L?null:o.default.createElement("span",null,o.default.createElement(c.Amount,{showZero:!0},P),D)),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom",style:{display:j?"":"none"}},o.default.createElement("label",null,"单价："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",disabled:F,placeholder:"填写单价",value:I.get("price"),onChange:function(e){if(/^\d*\.?\d{0,4}$/g.test(e)&&(N("price",e,w),P>0)){var t=(0,u.decimal)(P*Number(e));N("amount",t,w)}}}),o.default.createElement("span",{className:"lrls-margin-left",style:{display:H?"":"none"}},R?"统一单价：":"参考单价：",o.default.createElement(c.Amount,null,H))),o.default.createElement(c.Row,{className:"lrls-more-card",onClick:function(){F&&s.toast.info("请先勾选处理流水")}},o.default.createElement("label",null,"金额："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",disabled:F,placeholder:"填写金额",value:I.get("amount"),onChange:function(e){var t=/^\d*\.?\d{0,2}$/g;if(L&&(t=/^[-\d]\d*\.?\d{0,2}$/g),(t.test(e)||""==e)&&N("amount",e,w),j&&P>0&&"-"!=e){var a=(0,u.decimal)(Number(e)/P,4);N("price",a,w)}else;}})),o.default.createElement(c.Multiple,{visible:C,district:_,value:ee.toJS().map(function(e){return e.serialUuid}),title:"选择序列号",showPreview:!0,previewTitle:"已选择序列号",onOk:function(t){if(e.setState({visible:!1}),N("quantity",t.length,w),N("serialList",(0,i.fromJS)(t),w),J>0){var a=(0,u.decimal)(J*Number(t.length));N("amount",a,w)}else;},onCancel:function(){e.setState({visible:!1})}},o.default.createElement("span",null)))}}]),t}();t.default=y},1793:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(a(1219)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=p(r),i=a(9),c=a(16),u=a(13),s=f(a(10)),d=f(a(1060)),m=f(a(1068));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={visible:!1},g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,l=t.idx,r=t.cardData,f=t.stockList,p=t.warehouseList,g=t.isOpenedWarehouse,y=t.onClick,h=t.assistClick,E=t.batchList,v=t.serialMultipleList,b=t.isModify,_=t.oriUuid,S=this.state.visible,T=function(e,t,n){return a(d.changeYysrStockCard(e,t,n,"CHTRXM"))},C=l,L=r,N=[],w=L.get("cardUuid"),I=L.get("warehouseCardUuid"),A=L.get("isOpenedQuantity"),k=L.get("quantity")?Number(L.get("quantity")):0,O=L.get("price")?Number(L.get("price")):0,j=(L.get("amount")&&Number(L.get("amount")),!L.get("cardUuid"));L.get("unitPrice")&&Number(L.get("unitPrice"));if(A){var R=f.toJS(),P=!0,J=!1,D=void 0;try{for(var Z,x=R[Symbol.iterator]();!(P=(Z=x.next()).done);P=!0){var U=Z.value;if(U.uuid==L.get("cardUuid")){N.push({key:U.unit.name,value:U.unit.uuid,basicUnitQuantity:U.unit.basicUnitQuantity}),U.unit.unitList.map(function(e){N.push({key:e.name,value:e.uuid,basicUnitQuantity:e.basicUnitQuantity})});break}}}catch(e){J=!0,D=e}finally{try{!P&&x.return&&x.return()}finally{if(J)throw D}}}var M=L.getIn(["financialInfo","openAssist"]),B=L.getIn(["financialInfo","openSerial"]),X=L.getIn(["financialInfo","openBatch"]),Y=L.getIn(["financialInfo","openShelfLife"]),F=L.getIn(["financialInfo","shelfLife"]),H=L.get("assistList")?L.get("assistList"):(0,i.fromJS)([]),G=L.get("serialList")?L.get("serialList"):(0,i.fromJS)([]),z=H.reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},""),V=L.get("batch")?L.get("batch"):"",q=L.get("batchUuid")?L.get("batchUuid"):"",W=L.get("expirationDate")?L.get("expirationDate"):"",Q=W?V+"("+W+")":V,K=function(){var t,l,r=[];return w?(M&&0==H.size&&r.push("请先选择完整的属性"),X&&!V&&r.push("请先选择批次"),g&&!I&&r.push("请先选择仓库"),r.length?s.toast.info(r[0]):void(t=n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(e){a(d.getSerialListIn({inventoryUuid:w,warehouseUuid:I,assistList:H,batchUuid:q,oriUuid:_},e))});case 2:if(!k||!b||0!=G.size){t.next=5;break}return t.next=5,new Promise(function(e){a(d.getSerialListChecked({inventoryUuid:w,outJrOriCardUuid:L.get("jrOriCardUuid")},function(t){T("serialList",t,C),e()},!0))});case 5:e.setState({visible:!0});case 6:case"end":return t.stop()}},t,e)}),l=function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(l,r){try{var o=e[l](r),i=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});t(i)}("next")})},function(){return l.apply(this,arguments)})()):s.toast.info("请先选择存货卡片")};return o.default.createElement("div",{className:"lrls-card"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},o.default.createElement("span",null,"存货明细(",C+1,")")),o.default.createElement("div",{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"存货:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){y()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},L.get("cardUuid")?o.default.createElement("span",null," ",L.get("code")+" "+L.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:M?"":"none"}},o.default.createElement("label",null,"属性:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){h()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},z?o.default.createElement("span",null," ",z," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择属性"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:X?"":"none"}},o.default.createElement("label",null,"批次:"),o.default.createElement(c.Single,{className:"lrls-single",district:E,value:V,icon:{type:"add-plus",onClick:function(){a(m.editInventoryBatch("MODIFY-INSERT",w,Y,F))}},iconTwo:{type:"home",onClick:function(){a(m.editInventoryBatch("MODIFY-MODIFY",w,Y,F))}},onOk:function(e){T("bitch",(0,i.fromJS)({batch:e.batch,batchUuid:e.batchUuid,expirationDate:e.expirationDate}),C),B&&(T("quantity","",C),T("serialList",(0,i.fromJS)([]),C))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding",onClick:function(){a(d.getBatchList(w))}},Q?o.default.createElement("span",null,Q):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择批次"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:g?"":"none"}},o.default.createElement("label",null,"仓库:"),o.default.createElement(c.Single,{className:"lrls-single",district:p.toJS(),value:L.get("warehouseCardUuid"),onOk:function(e){T("warehouse",e,C),B&&(T("quantity","",C),T("serialList",(0,i.fromJS)([]),C)),A&&a(d.getChzzPrice(C))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},L.get("warehouseCardUuid")?o.default.createElement("span",null," ",L.get("warehouseCardCode")+" "+L.get("warehouseCardName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择仓库卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"yysr-amount lrls-bottom",style:{display:A?"":"none"}},o.default.createElement("label",null,"数量:"),B?o.default.createElement("span",{className:"serial",style:{display:B?"":"none"},onClick:function(){return K()}},k?o.default.createElement(c.Amount,{decimalPlaces:4,decimalZero:!1},k):"点击输入",o.default.createElement(c.Icon,{type:"edit"})):o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",placeholder:"填写数量",value:L.get("quantity"),onChange:function(e){if(/^\d*\.?\d{0,4}$/g.test(e)&&(T("quantity",e,C),O>0)){var t=(0,u.decimal)(O*Number(e));T("amount",t,C)}else;}}),o.default.createElement(c.Single,{className:"lrls-single",district:N,value:L.get("unitUuid"),onOk:function(e){if(T("unit",e,C),L.get("unitPrice")){var t=e.basicUnitQuantity?e.basicUnitQuantity:1,a=(0,u.decimal)(L.get("unitPrice")*Number(t));if(T("price",a,C),L.get("quantity")){var n=(0,u.decimal)(a*Number(L.get("quantity")));T("amount",n,C)}}}},o.default.createElement(c.Row,{className:"lrls-account lrls-type"},L.get("unitUuid")?o.default.createElement("span",null," ",L.get("unitName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"选择数量单位"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom",style:{display:A?"":"none"}},o.default.createElement("label",null,"单价："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",disabled:j,placeholder:"填写单价",value:L.get("price"),onChange:function(e){if(/^\d*\.?\d{0,4}$/g.test(e)&&(T("price",e,C),k>0)){var t=(0,u.decimal)(k*Number(e));T("amount",t,C)}}})),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom",onClick:function(){j&&s.toast.info("请先选择存货卡片")}},o.default.createElement("label",null,"金额："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",disabled:j,placeholder:"填写金额",value:L.get("amount"),onChange:function(e){if(T("amount",e,C),A&&k>0){var t=(0,u.decimal)(Number(e)/k,4);T("price",t,C)}else;}})),o.default.createElement(c.Multiple,{visible:S,district:v,value:G.toJS().map(function(e){return e.serialUuid}),title:"选择序列号",showPreview:!0,previewTitle:"已选择序列号",onOk:function(t){if(e.setState({visible:!1}),T("quantity",t.length,C),T("serialList",(0,i.fromJS)(t),C),O>0){var a=(0,u.decimal)(O*Number(t.length));T("amount",a,C)}else;},onCancel:function(){e.setState({visible:!1})}},o.default.createElement("span",null)))}}]),t}();t.default=y},1794:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(a(1219)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=p(r),i=a(9),c=a(16),u=a(13),s=f(a(10)),d=f(a(1060)),m=f(a(1068));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(t){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return t=n=y(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(r))),n.state={visible:!1},y(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r.Component),l(a,[{key:"render",value:function(){var t=this,a=this.props,l=a.dispatch,r=a.idx,f=a.cardData,p=a.cardDisabled,y=a.stockCardList,h=a.stockListArr,E=a.isOpenedWarehouse,v=a.warehouseList,b=a.onClick,_=a.assistClick,S=a.batchList,T=a.oriState,C=a.serialMultipleList,L=a.isModify,N=a.oriUuid,w=this.state.visible,I=function(e){return l(d.changeLrlsAmount(e))},A=function(e,t){return l(d.changeYysrStockCard(e,t,r))},k=f,O=0;y.forEach(function(e){return O+=Number(e.get("amount"))});var j=[],R=[],P=k.get("isOpenedQuantity"),J=k.get("cardUuid"),D=k.get("warehouseCardUuid"),Z=k.get("quantity")?Number(k.get("quantity")):0,x=k.get("price")?Number(k.get("price")):0,U=k.get("amount")?Number(k.get("amount")):0;if(P){var M=!0,B=!1,X=void 0;try{for(var Y,F=h[Symbol.iterator]();!(M=(Y=F.next()).done);M=!0){var H=Y.value;if(H.uuid==k.get("cardUuid")){j.push({key:H.unit.name,value:H.unit.uuid}),H.unit.unitList.map(function(e){j.push({key:e.name,value:e.uuid})}),H.unitPriceList&&(R=H.unitPriceList);break}}}catch(e){B=!0,X=e}finally{try{!M&&F.return&&F.return()}finally{if(B)throw X}}}var G=k.getIn(["financialInfo","openAssist"]),z=k.getIn(["financialInfo","openSerial"]),V=k.getIn(["financialInfo","openBatch"]),q=k.getIn(["financialInfo","openShelfLife"]),W=k.getIn(["financialInfo","shelfLife"]),Q=k.get("assistList")?k.get("assistList"):(0,i.fromJS)([]),K=k.get("serialList")?k.get("serialList"):(0,i.fromJS)([]),$=Q.reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},""),ee=k.get("batch")?k.get("batch"):"",te=k.get("batchUuid")?k.get("batchUuid"):"",ae=k.get("expirationDate")?k.get("expirationDate"):"",ne=ae?ee+"("+ae+")":ee;console.log(k.toJS());var le=function(){var a=[];if(!J)return s.toast.info("请先选择存货卡片");var r,o,c="JR_ENTRY",f={STATE_YYSR_XS:"preOutJrOriCardUuid",STATE_YYSR_TS:"preInJrOriCardUuid",STATE_YYZC_GJ:"inJrOriCardUuid",STATE_YYZC_TG:"outJrOriCardUuid"}[T];if(["STATE_YYSR_XS","STATE_YYZC_TG"].includes(T)){c="JR_OUT";var p="STATE_YYSR_XS"==T;if(G&&0==Q.size&&a.push("请先选择完整的属性"),V&&!ee&&a.push("请先选择批次"),E&&!D&&a.push("请先选择仓库"),a.length)return s.toast.info(a[0]);(r=n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){l(d.getSerialListIn({inventoryUuid:J,warehouseUuid:D,assistList:Q,batchUuid:te,oriUuid:N,isPre:p},e))});case 2:if(!Z||!L||0!=K.size){e.next=5;break}return e.next=5,new Promise(function(e){l(d.getSerialListChecked(g({inventoryUuid:J},f,k.get("jrOriCardUuid")),function(t){A("serialList",t),e()},!0))});case 5:t.setState({visible:!0});case 6:case"end":return e.stop()}},e,t)}),o=function(){var e=r.apply(this,arguments);return new Promise(function(t,a){return function n(l,r){try{var o=e[l](r),i=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});t(i)}("next")})},function(){return o.apply(this,arguments)})()}if("JR_ENTRY"==c){var y=function(t){l(m.changeInventoryData("serial",(0,i.fromJS)({serialList:t,type:"JR_ENTRY",afterAdd:function(e){var t=e.size;if(A("quantity",t),A("serialList",e),x>0){var a=(0,u.decimal)(x*Number(t));A("amount",a);var n=O-Number(k.get("amount"))+Number(a);I((0,u.decimal)(n))}}}),!0)),e.routerHistory.push("/config/inventory/serial")};if(Z&&L&&0==K.size)return void l(d.getSerialListChecked(g({inventoryUuid:J,inType:"J"},f,k.get("jrOriCardUuid")),function(e){return y(e)}));y(K)}};return o.default.createElement("div",{className:"lrls-card"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},o.default.createElement("span",null,"存货明细(",r+1,")")),o.default.createElement("div",{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"存货:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){b()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},k.get("cardUuid")?o.default.createElement("span",null," ",k.get("code")+" "+k.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),o.default.createElement(c.Icon,{type:"triangle",color:p?"#999":""})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:G?"":"none"}},o.default.createElement("label",null,"属性:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){_()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},$?o.default.createElement("span",null," ",$," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择属性"),o.default.createElement(c.Icon,{type:"triangle",color:p?"#999":""})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:V?"":"none"}},o.default.createElement("label",null,"批次:"),o.default.createElement(c.SinglePortal,{className:"lrls-single",district:S,value:ee,icon:{type:"add-plus",onClick:function(){l(m.editInventoryBatch("MODIFY-INSERT",J,q,W))}},iconTwo:{type:"home",onClick:function(){l(m.editInventoryBatch("MODIFY-MODIFY",J,q,W))}},onOk:function(e){A("bitch",(0,i.fromJS)({batch:e.batch,batchUuid:e.batchUuid,expirationDate:e.expirationDate})),z&&(A("quantity",""),A("serialList",(0,i.fromJS)([])))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding",onClick:function(){l(d.getBatchList(J))}},ne?o.default.createElement("span",null,ne):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择批次"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:E?"":"none"}},o.default.createElement("label",null,"仓库:"),o.default.createElement(c.SinglePortal,{className:"lrls-single",district:v.toJS(),value:k.get("warehouseCardUuid"),onOk:function(e){A("warehouse",e),z&&(A("quantity",""),A("serialList",(0,i.fromJS)([])))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},k.get("warehouseCardUuid")?o.default.createElement("span",null," ",k.get("warehouseCardCode")," ",k.get("warehouseCardName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择仓库卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"yysr-amount lrls-bottom",style:{display:P?"":"none"}},o.default.createElement("label",null,"数量:"),z?o.default.createElement("span",{className:"serial",style:{display:z?"":"none"},onClick:function(){return le()}},Z?o.default.createElement(c.Amount,{decimalPlaces:4,decimalZero:!1},Z):"点击输入",o.default.createElement(c.Icon,{type:"edit"})):o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",placeholder:"填写数量",value:k.get("quantity"),onChange:function(e){if(/^\d*\.?\d{0,4}$/g.test(e)&&(A("quantity",e),x>0)){var t=(0,u.decimal)(x*Number(e));A("amount",t);var a=O-Number(k.get("amount"))+Number(t);I((0,u.decimal)(a))}else;}}),o.default.createElement(c.SinglePortal,{className:"lrls-single",district:j,value:k.get("unitUuid"),onOk:function(e){A("unit",e),R.map(function(t){if(e.value==t.unitUuid&&(A("price",t.defaultPrice),Z>0)){var a=(0,u.decimal)(Z*Number(t.defaultPrice));A("amount",a);var n=O-Number(k.get("amount"))+Number(a);I((0,u.decimal)(n))}})}},o.default.createElement(c.Row,{className:"lrls-account lrls-type"},k.get("unitUuid")?o.default.createElement("span",null," ",k.get("unitName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"选择数量单位"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:P?"":"none"}},o.default.createElement("label",null,"单价:"),o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",placeholder:"请填写单价",value:k.get("price"),onChange:function(e){if(/^\d*\.?\d{0,4}$/g.test(e)&&(A("price",e),Z>0)){var t=(0,u.decimal)(Z*Number(e));A("amount",t);var a=O-Number(k.get("amount"))+Number(t);I((0,u.decimal)(a))}}})),o.default.createElement("div",{className:"lrls-more-card",onClick:function(){k.get("cardUuid")||s.toast.info("请先选择存货卡片")}},o.default.createElement("label",null,"金额:"),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",disabled:p||!k.get("cardUuid"),placeholder:"请填写金额",value:k.get("amount"),onChange:function(e){if(/^\d*\.?\d{0,2}$/g.test(e)){A("amount",e);var t=O-Number(k.get("amount"))+Number(e);if(I((0,u.decimal)(t)),Z>0){var a=(0,u.decimal)(Number(e)/Z,4);return void A("price",a)}}}})),o.default.createElement(c.Multiple,{visible:w,district:C,value:K.toJS().map(function(e){return e.serialUuid}),title:"选择序列号",showPreview:!0,previewTitle:"已选择序列号",onOk:function(e){if(t.setState({visible:!1}),A("quantity",e.length),A("serialList",(0,i.fromJS)(e)),x>0){var a=(0,u.decimal)(x*Number(e.length));A("amount",a);var n=O-Number(U)+Number(a);I((0,u.decimal)(n))}},onCancel:function(){t.setState({visible:!1})}},o.default.createElement("span",null)))}}]),a}();t.default=h}).call(this,a(21))},1795:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(a(1219)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=p(r),i=a(9),c=a(16),u=a(13),s=f(a(10)),d=f(a(1060)),m=f(a(1068));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(t){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return t=n=g(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(r))),n.state={visible:!1},g(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r.Component),l(a,[{key:"render",value:function(){var t=this,a=this.props,l=a.dispatch,r=a.idx,f=a.cardType,p=a.cardData,g=a.onClick,y=a.stockList,h=a.warehouseList,E=a.isOpenedWarehouse,v=a.assistClick,b=a.batchList,_=a.serialMultipleList,S=a.isModify,T=a.oriUuid,C=this.state.visible,L=function(e,t){return l(d.changeYysrStockCard(e,t,r,"CHZZ",f))},N=r,w=p,I=[],A=w.get("isOpenedQuantity"),k=w.get("cardUuid"),O=w.get("quantity")?Number(w.get("quantity")):0,j=w.get("price")?Number(w.get("price")):0,R=(w.get("amount")&&Number(w.get("amount")),w.get("warehouseCardUuid"));if(A){var P=y.toJS(),J=!0,D=!1,Z=void 0;try{for(var x,U=P[Symbol.iterator]();!(J=(x=U.next()).done);J=!0){var M=x.value;if(M.uuid==w.get("cardUuid")){I.push({key:M.unit.name,value:M.unit.uuid,basicUnitQuantity:M.unit.basicUnitQuantity}),M.unit.unitList.map(function(e){I.push({key:e.name,value:e.uuid,basicUnitQuantity:e.basicUnitQuantity})});break}}}catch(e){D=!0,Z=e}finally{try{!J&&U.return&&U.return()}finally{if(D)throw Z}}}var B=w.getIn(["financialInfo","openAssist"]),X=w.getIn(["financialInfo","openSerial"]),Y=w.getIn(["financialInfo","openBatch"]),F=w.getIn(["financialInfo","openShelfLife"]),H=w.getIn(["financialInfo","shelfLife"]),G=w.get("assistList")?w.get("assistList"):(0,i.fromJS)([]),z=w.get("serialList")?w.get("serialList"):(0,i.fromJS)([]),V=G.reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},""),q=w.get("batch")?w.get("batch"):"",W=w.get("batchUuid")?w.get("batchUuid"):"",Q=w.get("expirationDate")?w.get("expirationDate"):"",K=Q?q+"("+Q+")":q;console.log(w.toJS());var $=function(){var a=[];if(!k)return s.toast.info("请先选择存货卡片");var r,o,c="JR_ENTRY";if("stockCardList"==f){if(c="JR_OUT",B&&0==G.size&&a.push("请先选择完整的属性"),Y&&!q&&a.push("请先选择批次"),E&&!R&&a.push("请先选择仓库"),a.length)return s.toast.info(a[0]);(r=n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=z.size){e.next=3;break}return e.next=3,new Promise(function(e){l(d.getSerialListIn({inventoryUuid:k,warehouseUuid:R,assistList:G,batchUuid:W,oriUuid:T},e))});case 3:if(!O||!S||0!=z.size){e.next=6;break}return e.next=6,new Promise(function(e){l(d.getSerialListChecked({inventoryUuid:k,outJrOriCardUuid:w.get("jrOriCardUuid")},function(t){L("serialList",t),e()},!0))});case 6:t.setState({visible:!0});case 7:case"end":return e.stop()}},e,t)}),o=function(){var e=r.apply(this,arguments);return new Promise(function(t,a){return function n(l,r){try{var o=e[l](r),i=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});t(i)}("next")})},function(){return o.apply(this,arguments)})()}if("JR_ENTRY"==c){var p=function(t){l(m.changeInventoryData("serial",(0,i.fromJS)({serialList:t,type:"JR_ENTRY",afterAdd:function(e){var t=e.size;if(L("quantity",t),L("serialList",e),j>0){var a=(0,u.decimal)(j*Number(t));L("amount",a)}}}),!0)),e.routerHistory.push("/config/inventory/serial")};if(O&&S&&0==z.size)return void l(d.getSerialListChecked({inventoryUuid:k,inType:"J",inJrOriCardUuid:w.get("jrOriCardUuid")},function(e){return p(e)}));p(z)}};return o.default.createElement("div",{className:"lrls-card"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},o.default.createElement("span",null,("stockCardList"==f?"物料明细":"成品明细")+"("+(N+1)+")")),o.default.createElement("div",{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"存货:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){g()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},w.get("cardUuid")?o.default.createElement("span",null," ",w.get("code")+" "+w.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:B?"":"none"}},o.default.createElement("label",null,"属性:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){v()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},V?o.default.createElement("span",null," ",V," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择属性"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:Y?"":"none"}},o.default.createElement("label",null,"批次:"),o.default.createElement(c.Single,{className:"lrls-single",district:b,value:q,icon:{type:"add-plus",onClick:function(){l(m.editInventoryBatch("MODIFY-INSERT",k,F,H))}},iconTwo:{type:"home",onClick:function(){l(m.editInventoryBatch("MODIFY-MODIFY",k,F,H))}},onOk:function(e){L("bitch",(0,i.fromJS)({batch:e.batch,batchUuid:e.batchUuid,expirationDate:e.expirationDate})),X&&(L("quantity",""),L("serialList",(0,i.fromJS)([])))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding",onClick:function(){l(d.getBatchList(k))}},K?o.default.createElement("span",null,K):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择批次"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:E?"":"none"}},o.default.createElement("label",null,"仓库:"),o.default.createElement(c.Single,{className:"lrls-single",district:h.toJS(),value:w.get("warehouseCardUuid"),onOk:function(e){L("warehouse",e),X&&(L("quantity",""),L("serialList",(0,i.fromJS)([]))),A&&l(d.getChzzPrice(N,f))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},w.get("warehouseCardUuid")?o.default.createElement("span",null," ",w.get("warehouseCardCode")+" "+w.get("warehouseCardName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择仓库卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"yysr-amount lrls-bottom",style:{display:A?"":"none"}},o.default.createElement("label",null,"数量:"),X?o.default.createElement("span",{className:"serial",style:{display:X?"":"none"},onClick:function(){return $()}},O?o.default.createElement(c.Amount,{decimalPlaces:4,decimalZero:!1},O):"点击输入",o.default.createElement(c.Icon,{type:"edit"})):o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",placeholder:"填写数量",value:w.get("quantity"),onChange:function(e){if(/^\d*\.?\d{0,4}$/g.test(e)&&(L("quantity",e),j>0)){var t=(0,u.decimal)(j*Number(e));L("amount",t)}else;}}),o.default.createElement(c.Single,{className:"lrls-single",district:I,value:w.get("unitUuid"),onOk:function(e){if(L("unit",e),w.get("unitPrice")){var t=(0,u.decimal)(w.get("unitPrice")*e.basicUnitQuantity);if(L("price",t),w.get("quantity")){var a=(0,u.decimal)(t*Number(w.get("quantity")));L("amount",a)}}}},o.default.createElement(c.Row,{className:"lrls-account lrls-type"},w.get("unitUuid")?o.default.createElement("span",null," ",w.get("unitName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"选择数量单位"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom",style:{display:A?"":"none"}},o.default.createElement("label",null,"单价："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",placeholder:"填写单价",value:w.get("price"),onChange:function(e){if(/^\d*\.?\d{0,4}$/g.test(e)&&(L("price",e),O>0)){var t=(0,u.decimal)(O*Number(e));L("amount",t)}}})),o.default.createElement(c.Row,{className:"lrls-more-card",onClick:function(){k||s.toast.info("请先选择存货")}},o.default.createElement("label",null,"金额："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",disabled:!k,placeholder:"填写金额",value:w.get("amount"),onChange:function(e){if(/^\d*\.?\d{0,2}$/g.test(e)&&L("amount",e),A&&O>0){var t=(0,u.decimal)(Number(e)/O,4);L("price",t)}}})),o.default.createElement(c.Multiple,{visible:C,district:_,value:z.toJS().map(function(e){return e.serialUuid}),title:"选择序列号",showPreview:!0,previewTitle:"已选择序列号",onOk:function(e){if(t.setState({visible:!1}),L("quantity",e.length),L("serialList",(0,i.fromJS)(e)),j>0){var a=(0,u.decimal)(j*Number(e.length));L("amount",a)}else;},onCancel:function(){t.setState({visible:!1})}},o.default.createElement("span",null)))}}]),a}();t.default=y}).call(this,a(21))},1796:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=g(a(1219)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=g(r),i=a(9),c=a(16),u=g(a(1484)),s=a(13),d=p(a(10)),m=p(a(1060)),f=p(a(1068));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(t){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return t=n=y(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(r))),n.state={isAll:!0,visible:!1,categoryValue:"ALL",childIdx:[],serialVisible:!1,assistVisible:!1},n.assistClassificationList=[],n.oriAssistList=[],n.openSerial=!1,n.serialList=(0,i.fromJS)([]),n.price="",y(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r.Component),l(a,[{key:"render",value:function(){var t=this,a=this.props,l=a.dispatch,r=a.idx,p=(a.cardType,a.cardData),g=a.onClick,y=a.stockList,h=a.warehouseList,E=a.isOpenedWarehouse,v=a.isModify,b=a.assemblyList,_=a.stockCategoryList,S=a.commonCardList,T=a.assistClick,C=a.batchList,L=a.serialMultipleList,N=a.oriUuid,w=this.state,I=w.isAll,A=w.visible,k=w.categoryValue,O=w.childIdx,j=w.serialVisible,R=w.assistVisible,P=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"CHZZ_ZZD";"CHZZ_ZZD_CHILD"==n&&["quantity","price","amount","unitUuid","unitName","bitch","serialList","assistList"].includes(e)?l(m.changeLrlsData(["oriTemp","stockCardList",a[0],"childCardList",a[1],e],t)):l(m.changeYysrStockCard(e,t,a,n,"stockCardList"))},J=[{uuid:"ALL",name:"全部",top:!0,childList:[]}];_.map(function(e){J.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(J);var D=I?y.toJS():S;D.map(function(e){e.name=e.key});var Z=r,x=p,U=(x.get("isOpenedQuantity"),x.get("cardUuid")),M=x.get("quantity")?Number(x.get("quantity")):0,B=x.get("childCardList").size,X=(x.get("warehouseCardUuid"),0),Y=0;x.get("childCardList").map(function(e){X+=Number(e.get("amount"))}),M&&(Y=Number(X)/Number(M));var F=x.getIn(["financialInfo","openAssist"]),H=x.getIn(["financialInfo","openSerial"]),G=x.getIn(["financialInfo","openBatch"]),z=x.getIn(["financialInfo","openShelfLife"]),V=x.getIn(["financialInfo","shelfLife"]),q=x.get("assistList")?x.get("assistList"):(0,i.fromJS)([]),W=x.get("serialList")?x.get("serialList"):(0,i.fromJS)([]),Q=q.reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},""),K=x.get("batch")?x.get("batch"):"",$=(x.get("batchUuid")&&x.get("batchUuid"),x.get("expirationDate")?x.get("expirationDate"):""),ee=$?K+"("+$+")":K;console.log(x.toJS());return o.default.createElement("div",{className:"lrls-card"},o.default.createElement(c.ChosenPicker,{visible:A,type:"card",multiSelect:!0,title:"请选择存货",district:J,cardList:D,value:k,onChange:function(e){t.setState({categoryValue:e.key}),"ALL"!=e.key?(t.setState({isAll:!1}),l(m.getStockListByCategory(e))):t.setState({isAll:!0})},onOk:function(e){e.length&&P("card",e,O,"CHZZ_ZZD_CHILD")},onCancel:function(){t.setState({visible:!1})}},o.default.createElement("span",null)),o.default.createElement("div",{style:{paddingBottom:"10px"}},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},o.default.createElement("span",null,"组装成品(",Z+1,")")),o.default.createElement("div",{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"存货:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){return g()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},x.get("cardUuid")?o.default.createElement("span",null," ",x.get("code")+" "+x.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:F?"":"none"}},o.default.createElement("label",null,"属性:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){T()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},Q?o.default.createElement("span",null," ",Q," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择属性"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:G?"":"none"}},o.default.createElement("label",null,"批次:"),o.default.createElement(c.Single,{className:"lrls-single",district:C,value:K,icon:{type:"add-plus",onClick:function(){l(f.editInventoryBatch("MODIFY-INSERT",U,z,V))}},iconTwo:{type:"home",onClick:function(){l(f.editInventoryBatch("MODIFY-MODIFY",U,z,V))}},onOk:function(e){P("bitch",(0,i.fromJS)({batch:e.batch,batchUuid:e.batchUuid,expirationDate:e.expirationDate}),Z),H&&(P("quantity","",Z),P("serialList",(0,i.fromJS)([]),Z))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding",onClick:function(){l(m.getBatchList(U))}},ee?o.default.createElement("span",null,ee):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择批次"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:E?"":"none"}},o.default.createElement("label",null,"仓库:"),o.default.createElement(c.Single,{className:"lrls-single",district:h.toJS(),value:x.get("warehouseCardUuid"),onOk:function(e){P("warehouse",e,Z),H&&(P("quantity","",Z),P("serialList",(0,i.fromJS)([]),Z))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},x.get("warehouseCardUuid")?o.default.createElement("span",null," ",x.get("warehouseCardCode")+" "+x.get("warehouseCardName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择仓库卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"数量:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){var t,a,n;H?(n=function(t){l(f.changeInventoryData("serial",(0,i.fromJS)({serialList:t,type:"JR_ENTRY",afterAdd:function(e){var t=e.size;P("serialList",e,Z);var a=!1,n=!0,r=!1,o=void 0;try{for(var i,c=b[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var u=i.value;if(u.uuid==x.toJS().cardUuid){a=u.isAvailable;break}}}catch(e){r=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}if(!a)return d.toast.info("组装单设置已失效，无法获取物料详情"),void P("quantity",t,Z);P("quantity_zzd",t,Z),l(m.getChzzZzdListPrice(Z))}}),!0)),e.routerHistory.push("/config/inventory/serial")},M&&v&&0==W.size?l(m.getSerialListChecked({inventoryUuid:U,inType:"J",inJrOriCardUuid:x.get("jrOriCardUuid")},function(e){return n(e)})):n(W)):(t=Z,a=x.toJS(),d.Prompt({title:"成品数量",message:v?"修改组装数量":"请输入组装数量",buttonLabels:["取消","确认"],onSuccess:function(e){if(1===e.buttonIndex)if(/^\d*\.?\d{0,2}$/g.test(e.value)&&e.value>0){var n=!1,r=!0,o=!1,i=void 0;try{for(var c,u=b[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var s=c.value;if(s.uuid==a.cardUuid){n=s.isAvailable;break}}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}if(!n)return d.toast.info("组装单设置已失效，无法获取物料详情"),void P("quantity",e.value,t);P("quantity_zzd",e.value,t),l(m.getChzzZzdListPrice(t))}else d.toast.info("请输入组装数量")}}))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},o.default.createElement("span",null," ",M+" "+x.get("unitName")," "),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"单价："),o.default.createElement("div",{className:"lrls-single lrls-placeholder"},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},o.default.createElement(c.Amount,{showZero:!0},Y)))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"金额："),o.default.createElement("div",{className:"lrls-single lrls-placeholder"},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},o.default.createElement(c.Amount,{showZero:!0},X))))),o.default.createElement("div",null,x.get("childCardList").map(function(e,a){var r=e.get("isOpenedQuantity"),u=e.get("cardUuid"),p=e.get("warehouseCardUuid"),g=e.get("warehouseCardCode"),b=e.get("warehouseCardName"),_=e.get("unitUuid"),S=e.get("unitName"),T=[],L=1;if(r){var w=y.toJS(),I=!0,A=!1,k=void 0;try{for(var j,R=w[Symbol.iterator]();!(I=(j=R.next()).done);I=!0){var J=j.value;if(J.uuid==u){T.push({key:J.unit.name,value:J.unit.uuid,basicUnitQuantity:1}),J.unit.unitList.map(function(e){T.push({key:e.name,value:e.uuid,basicUnitQuantity:e.basicUnitQuantity}),_==e.uuid&&(L=e.basicUnitQuantity)});break}}}catch(e){A=!0,k=e}finally{try{!I&&R.return&&R.return()}finally{if(A)throw k}}}var D=e.get("quantity")?Number(e.get("quantity")):"",x=e.get("price")?Number(e.get("price")):"",U=(e.get("amount")&&Number(e.get("amount")),e.get("unitPrice"));!U&&x&&(U=(0,s.decimal)(x/L));var M=e.getIn(["financialInfo","openAssist"]),X=e.getIn(["financialInfo","openSerial"]),Y=e.getIn(["financialInfo","openBatch"]),F=e.getIn(["financialInfo","openShelfLife"]),H=e.getIn(["financialInfo","shelfLife"]),G=e.get("assistList")?e.get("assistList"):(0,i.fromJS)([]),z=e.get("serialList")?e.get("serialList"):(0,i.fromJS)([]),V=G.reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},""),q=e.get("batch")?e.get("batch"):"",W=e.get("batchUuid")?e.get("batchUuid"):"",Q=e.get("expirationDate")?e.get("expirationDate"):"",K=Q?q+"("+Q+")":q,$=e.getIn(["financialInfo","assistClassificationList"]);O[0]==Z&&O[1]==a&&(t.assistClassificationList=$||(0,i.fromJS)([]));var ee=function(){var r=[];if(!u)return d.toast.info("请先选择存货卡片");var o,i;if(M&&0==G.size&&r.push("请先选择完整的属性"),Y&&!q&&r.push("请先选择批次"),E&&!p&&r.push("请先选择仓库"),r.length)return d.toast.info(r[0]);(o=n.default.mark(function r(){return n.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!=z.size){n.next=3;break}return n.next=3,new Promise(function(e){l(m.getSerialListIn({inventoryUuid:u,warehouseUuid:p,assistList:G,batchUuid:W,oriUuid:N},e))});case 3:if(t.serialList=z,t.price=x,!D||!v||0!=z.size){n.next=8;break}return n.next=8,new Promise(function(a){l(m.getSerialListChecked({inventoryUuid:u,outJrOriCardUuid:e.get("jrOriCardUuid")},function(e){P("serialList",e),t.serialList=e,a()},!0))});case 8:t.setState({serialVisible:!0,childIdx:[Z,a]});case 9:case"end":return n.stop()}},r,t)}),i=function(){var e=o.apply(this,arguments);return new Promise(function(t,a){return function n(l,r){try{var o=e[l](r),i=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});t(i)}("next")})},function(){return i.apply(this,arguments)})()};return o.default.createElement("div",{key:a,style:{paddingBottom:B>1?"10px":"0"}},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},o.default.createElement("span",null,"物料明细(",a+1,")"),o.default.createElement("span",{className:"lrls-blue",style:{display:1==B?"none":""},onClick:function(){P("delete_zzd_child","",[Z,a])}},"删除")),o.default.createElement("div",{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"存货:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){t.setState({visible:!0,childIdx:[Z,a]})}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},u?o.default.createElement("span",null," ",e.get("code")+" "+e.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:M?"":"none"}},o.default.createElement("label",null,"属性:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){t.setState({assistVisible:!0,childIdx:[Z,a]}),t.oriAssistList=G?G.toJS():[],t.openSerial=X}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},V?o.default.createElement("span",null," ",V," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择属性"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:Y?"":"none"}},o.default.createElement("label",null,"批次:"),o.default.createElement(c.Single,{className:"lrls-single",district:C,value:q,icon:{type:"add-plus",onClick:function(){l(f.editInventoryBatch("MODIFY-INSERT",u,F,H))}},iconTwo:{type:"home",onClick:function(){l(f.editInventoryBatch("MODIFY-MODIFY",u,F,H))}},onOk:function(e){P("bitch_zzd_child",(0,i.fromJS)({batch:e.batch,batchUuid:e.batchUuid,expirationDate:e.expirationDate}),[Z,a]),X&&(P("quantity","",[Z,a],"CHZZ_ZZD_CHILD"),P("serialList",(0,i.fromJS)([]),[Z,a],"CHZZ_ZZD_CHILD"))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding",onClick:function(){l(m.getBatchList(u))}},K?o.default.createElement("span",null,K):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择批次"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:E?"":"none"}},o.default.createElement("label",null,"仓库:"),o.default.createElement(c.Single,{className:"lrls-single",district:h.toJS(),value:p,onOk:function(e){P("warehouse_zzd_child",e,[Z,a]),r&&(X&&(P("quantity","",[Z,a],"CHZZ_ZZD_CHILD"),P("serialList",(0,i.fromJS)([]),[Z,a],"CHZZ_ZZD_CHILD")),l(m.getChzzZzdPrice([Z,a])))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},p?o.default.createElement("span",null," ",g+" "+b," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择仓库卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"yysr-amount lrls-bottom",style:{display:r?"":"none"}},o.default.createElement("label",null,"数量:"),X?o.default.createElement("span",{className:"serial",style:{display:X?"":"none"},onClick:function(){return ee()}},D?o.default.createElement(c.Amount,{decimalPlaces:4,decimalZero:!1},D):"点击输入",o.default.createElement(c.Icon,{type:"edit"})):o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",placeholder:"填写数量",value:e.get("quantity"),onChange:function(e){if(/^\d*\.?\d{0,4}$/g.test(e)&&(P("quantity",e,[Z,a],"CHZZ_ZZD_CHILD"),Number(x)>0)){var t=(0,s.decimal)(Number(x)*Number(e));P("amount",t,[Z,a],"CHZZ_ZZD_CHILD")}else;}}),o.default.createElement(c.Single,{className:"lrls-single",district:T,value:_,onOk:function(t){if(P("unitUuid",t.value,[Z,a],"CHZZ_ZZD_CHILD"),P("unitName",t.key,[Z,a],"CHZZ_ZZD_CHILD"),U){var n=(0,s.decimal)(U*t.basicUnitQuantity,4);if(P("price",n,[Z,a],"CHZZ_ZZD_CHILD"),e.get("quantity")){var l=(0,s.decimal)(n*Number(e.get("quantity")));P("amount",l,[Z,a],"CHZZ_ZZD_CHILD")}}}},o.default.createElement(c.Row,{className:"lrls-account lrls-type"},_?o.default.createElement("span",null," ",S," "):o.default.createElement("span",{className:"lrls-placeholder"},"选择数量单位"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom",style:{display:r?"":"none"}},o.default.createElement("label",null,"单价："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",placeholder:"填写单价",value:e.get("price"),onChange:function(e){if(/^\d*\.?\d{0,4}$/g.test(e)&&(P("price",e,[Z,a],"CHZZ_ZZD_CHILD"),D>0)){var t=(0,s.decimal)(D*Number(e));P("amount",t,[Z,a],"CHZZ_ZZD_CHILD")}}})),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"金额："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",disabled:!u,placeholder:"填写金额",value:e.get("amount"),onChange:function(e){if(/^\d*\.?\d{0,2}$/g.test(e)&&P("amount",e,[Z,a],"CHZZ_ZZD_CHILD"),r&&Number(D)>0){var t=(0,s.decimal)(Number(e)/D,4);P("price",t,[Z,a],"CHZZ_ZZD_CHILD")}}})))})),o.default.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold"}},o.default.createElement("div",null),o.default.createElement("div",{className:"lrls-blue",onClick:function(){t.setState({visible:!0,childIdx:[Z,x.get("childCardList").size]})}},"+添加物料明细")),o.default.createElement(c.Multiple,{visible:j,district:L,value:this.serialList.toJS().map(function(e){return e.serialUuid}),title:"选择序列号",showPreview:!0,previewTitle:"已选择序列号",onOk:function(e){if(t.setState({serialVisible:!1}),P("serialList",(0,i.fromJS)(e),O,"CHZZ_ZZD_CHILD"),P("quantity",e.length,O,"CHZZ_ZZD_CHILD"),Number(t.price)>0){var a=(0,s.decimal)(Number(t.price)*Number(e.length));P("amount",a,O,"CHZZ_ZZD_CHILD")}},onCancel:function(){t.setState({serialVisible:!1})}},o.default.createElement("span",null)),o.default.createElement(u.default,{assistVisible:R,assistClassificationList:this.assistClassificationList,oriAssistList:this.oriAssistList,onOk:function(e){P("assistList",(0,i.fromJS)(e),O,"CHZZ_ZZD_CHILD"),t.openSerial&&(P("quantity","",O,"CHZZ_ZZD_CHILD"),P("serialList",(0,i.fromJS)([]),O,"CHZZ_ZZD_CHILD")),t.setState({assistVisible:!1})},addClick:function(e){l(m.addInventoryAssist(e,"CHZZ_ZZD_CHILD")),t.setState({categoryValue:"ALL",isAll:!0})}}))}}]),a}();t.default=h}).call(this,a(21))},1797:function(e,t,a){},1799:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=a(13),s=f(a(10)),d=f(a(1060)),m=f(a(1068));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(t){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var l=arguments.length,r=Array(l),o=0;o<l;o++)r[o]=arguments[o];return t=n=p(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(r))),n.state={visible:!1},p(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r.Component),l(a,[{key:"render",value:function(){var t=this,a=this.props,n=a.dispatch,l=a.idx,r=a.cardData,f=a.oriState,p=a.warehouseList,g=a.isOpenedWarehouse,y=a.onClick,h=a.stockList,E=a.assistClick,v=a.batchList,b=a.serialMultipleList,_=a.isModify,S=a.oriUuid,T=this.state.visible,C=function(e,t){return n(d.changeYysrStockCard(e,t,l,"CHYE"))},L=l,N=r,w=/^[-\d]\d*\.?\d{0,4}$/g,I=N.get("cardUuid"),A=N.get("warehouseCardUuid"),k=N.get("isOpenedQuantity"),O=(N.get("unitName"),N.get("quantity")?Number(N.get("quantity")):0),j=N.get("price")?Number(N.get("price")):0,R=(N.get("amount")&&Number(N.get("amount")),N.get("unitPrice")?Number(N.get("unitPrice")):0),P=[];if(k){var J=h.toJS(),D=!0,Z=!1,x=void 0;try{for(var U,M=J[Symbol.iterator]();!(D=(U=M.next()).done);D=!0){var B=U.value;if(B.uuid==N.get("cardUuid")){P.push({key:B.unit.name,value:B.unit.uuid,basicUnitQuantity:1}),B.unit.unitList.map(function(e){P.push({key:e.name,value:e.uuid,basicUnitQuantity:e.basicUnitQuantity})});break}}}catch(e){Z=!0,x=e}finally{try{!D&&M.return&&M.return()}finally{if(Z)throw x}}}var X=N.getIn(["financialInfo","openAssist"]),Y=N.getIn(["financialInfo","openSerial"]),F=N.getIn(["financialInfo","openBatch"]),H=N.getIn(["financialInfo","openShelfLife"]),G=N.getIn(["financialInfo","shelfLife"]),z=N.get("assistList")?N.get("assistList"):(0,i.fromJS)([]),V=N.get("serialList")?N.get("serialList"):(0,i.fromJS)([]),q=z.reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},""),W=N.get("batch")?N.get("batch"):"",Q=N.get("batchUuid")?N.get("batchUuid"):"",K=N.get("expirationDate")?N.get("expirationDate"):"",$=K?W+"("+K+")":W;return o.default.createElement("div",{className:"lrls-card"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},o.default.createElement("span",null,"存货明细(",L+1,")")),o.default.createElement("div",{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"存货:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){y()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},N.get("cardUuid")?o.default.createElement("span",null," ",N.get("code")+" "+N.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:X?"":"none"}},o.default.createElement("label",null,"属性:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){E()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},q?o.default.createElement("span",null," ",q," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择属性"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:F?"":"none"}},o.default.createElement("label",null,"批次:"),o.default.createElement(c.Single,{className:"lrls-single",district:v,value:W,icon:{type:"add-plus",onClick:function(){n(m.editInventoryBatch("MODIFY-INSERT",I,H,G))}},iconTwo:{type:"home",onClick:function(){n(m.editInventoryBatch("MODIFY-MODIFY",I,H,G))}},onOk:function(e){C("bitch",(0,i.fromJS)({batch:e.batch,batchUuid:e.batchUuid,expirationDate:e.expirationDate})),Y&&(C("quantity",""),C("serialList",(0,i.fromJS)([])))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding",onClick:function(){n(d.getBatchList(I))}},$?o.default.createElement("span",null,$):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择批次"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:g?"":"none"}},o.default.createElement("label",null,"仓库:"),o.default.createElement(c.Single,{className:"lrls-single",district:p.toJS(),value:N.get("warehouseCardUuid")?N.get("warehouseCardUuid"):"",onOk:function(e){C("warehouse",e),N.get("cardUuid")&&"STATE_CHYE_CH"!=f&&n(d.getChyePrice([e],L)),Y&&(C("quantity",""),C("serialList",(0,i.fromJS)([])))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},N.get("warehouseCardUuid")?o.default.createElement("span",null," ",N.get("warehouseCardCode")+" "+N.get("warehouseCardName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择仓库卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"yysr-amount lrls-bottom",style:{display:k?"":"none"}},o.default.createElement("label",null,"数量:"),Y?o.default.createElement(c.Single,{className:"chey-serial",title:"请选择调整方向",canSearch:!1,district:[{key:"增加存货",value:"JR_ENTRY"},{key:"减少存货",value:"JR_OUT"}],value:O>=0?"JR_ENTRY":"JR_OUT",onOk:function(a){!function(a){var l=[];if(!I)return s.toast.info("请先选择存货卡片");if("JR_OUT"==a){if(X&&0==z.size&&l.push("请先选择完整的属性"),F&&!W&&l.push("请先选择批次"),g&&!A&&l.push("请先选择仓库"),l.length)return s.toast.info(l[0]);if(n(d.getSerialListIn({inventoryUuid:I,warehouseUuid:A,assistList:z,batchUuid:Q,oriUuid:S})),O>0)return C("quantity",""),C("serialList",(0,i.fromJS)([])),C("amount",""),void t.setState({visible:!0});if(O&&_&&0==V.size)return void n(d.getSerialListChecked({inventoryUuid:I,outJrOriCardUuid:N.get("jrOriCardUuid")},function(e){C("serialList",e),t.setState({visible:!0})}));t.setState({visible:!0})}if("JR_ENTRY"==a){var r=function(t){n(m.changeInventoryData("serial",(0,i.fromJS)({serialList:t,type:"JR_ENTRY",afterAdd:function(e){var t=e.size;if(C("quantity",t),C("serialList",e),j>0){var a=(0,u.decimal)(j*Number(t));C("amount",a)}}}),!0)),e.routerHistory.push("/config/inventory/serial")};if(O<0)return C("quantity",""),C("serialList",(0,i.fromJS)([])),C("amount",""),void r((0,i.fromJS)([]));if(O&&_&&0==V.size)return void n(d.getSerialListChecked({inventoryUuid:I,inType:"J",inJrOriCardUuid:N.get("jrOriCardUuid")},function(e){return r(e)}));r(V)}}(a.value)}},o.default.createElement("div",{className:"serial"},O?o.default.createElement(c.Amount,{decimalPlaces:4,decimalZero:!1},O):"点击输入",o.default.createElement(c.Icon,{type:"edit"}))):o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",negativeAllowed:!0,placeholder:"填写数量",value:N.get("quantity"),onChange:function(e){if(w.test(e)||""==e){if(C("quantity",e),"-"==e)return;if(["STATE_CHYE","STATE_CHYE_CK"].includes(f)&&j){var t=(0,u.decimal)(Number(e)*j);C("amount",t)}}}}),o.default.createElement(c.Single,{className:"lrls-single",district:P,value:N.get("unitUuid"),onOk:function(e){if(C("unit",e),R&&["STATE_CHYE","STATE_CHYE_CK"].includes(f)){var t=(0,u.decimal)(R*e.basicUnitQuantity);if(C("price",t),N.get("quantity")){var a=(0,u.decimal)(t*O);C("amount",a)}}}},o.default.createElement(c.Row,{className:"lrls-account lrls-type"},N.get("unitUuid")?o.default.createElement("span",null," ",N.get("unitName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"选择数量单位"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom",style:{display:k&&["STATE_CHYE","STATE_CHYE_CK"].includes(f)?"":"none"}},o.default.createElement("label",null,"单价:"),o.default.createElement(c.XfInput.BorderInputItem,{mode:"number",negativeAllowed:!0,placeholder:"填写单价",value:N.get("price"),onChange:function(e){if(w.test(e)||""==e){if(C("price",e),"-"==e)return;if(O){var t=(0,u.decimal)(Number(e)*O);C("amount",t)}}}})),o.default.createElement(c.Row,{className:"lrls-more-card"},o.default.createElement("label",null,"金额："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,placeholder:"填写金额",value:N.get("amount"),onChange:function(e){if(/^[-\d]\d*\.?\d{0,2}$/g.test(e)||""==e){if(C("amount",e),"-"==e)return;if(k&&["STATE_CHYE","STATE_CHYE_CK"].includes(f)&&O){var t=(0,u.decimal)(Number(e)/O,4);C("price",t)}}}})),o.default.createElement(c.Multiple,{visible:T,district:b,value:V.toJS().map(function(e){return e.serialUuid}),title:"选择序列号",showPreview:!0,previewTitle:"已选择序列号",onOk:function(e){if(t.setState({visible:!1}),C("quantity",-e.length),C("serialList",(0,i.fromJS)(e)),j>0){var a=(0,u.decimal)(j*Number(-e.length));C("amount",a)}else;},onCancel:function(){t.setState({visible:!1})}},o.default.createElement("span",null)))}}]),a}();t.default=g}).call(this,a(21))},1800:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=a(13),s=f(a(10)),d=f(a(1060)),m=f(a(1068));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var p=function(t){function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r.Component),l(a,[{key:"render",value:function(){var t=this.props,a=t.dispatch,n=t.idx,l=t.cardData,r=t.stockList,f=t.warehouseList,p=t.isOpenedWarehouse,g=t.onClick,y=t.assistClick,h=t.batchList,E=t.isModify,v=(t.oriUuid,function(e,t,n){return a(d.changeYysrStockCard(e,t,n,"XMJZ"))}),b=n,_=l,S=[],T=1,C=_.get("isOpenedQuantity"),L=_.get("cardUuid"),N=_.get("warehouseCardUuid"),w=_.get("quantity")?Number(_.get("quantity")):0,I=_.get("price")?Number(_.get("price")):0,A=(_.get("amount")&&Number(_.get("amount")),_.get("unitUuid"));if(C){var k=r.toJS(),O=!0,j=!1,R=void 0;try{for(var P,J=k[Symbol.iterator]();!(O=(P=J.next()).done);O=!0){var D=P.value;if(D.uuid==_.get("cardUuid")){S.push({key:D.unit.name,value:D.unit.uuid,basicUnitQuantity:1}),D.unit.unitList.map(function(e){S.push({key:e.name,value:e.uuid,basicUnitQuantity:e.basicUnitQuantity}),A==e.uuid&&(T=e.basicUnitQuantity)});break}}}catch(e){j=!0,R=e}finally{try{!O&&J.return&&J.return()}finally{if(j)throw R}}}var Z=_.get("unitPrice");!Z&&I&&(Z=(0,u.decimal)(I/T));var x=_.getIn(["financialInfo","openAssist"]),U=_.getIn(["financialInfo","openSerial"]),M=_.getIn(["financialInfo","openBatch"]),B=_.getIn(["financialInfo","openShelfLife"]),X=_.getIn(["financialInfo","shelfLife"]),Y=_.get("assistList")?_.get("assistList"):(0,i.fromJS)([]),F=_.get("serialList")?_.get("serialList"):(0,i.fromJS)([]),H=Y.reduce(function(e,t){return e+(e?";":"")+t.get("propertyName")},""),G=_.get("batch")?_.get("batch"):"",z=(_.get("batchUuid")&&_.get("batchUuid"),_.get("expirationDate")?_.get("expirationDate"):""),V=z?G+"("+z+")":G;return o.default.createElement("div",{className:"lrls-card"},o.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},o.default.createElement("span",null,"存货明细(",b+1,")")),o.default.createElement("div",{className:"lrls-more-card lrls-bottom"},o.default.createElement("label",null,"存货:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){g()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},_.get("cardUuid")?o.default.createElement("span",null," ",_.get("code")+" "+_.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:x?"":"none"}},o.default.createElement("label",null,"属性:"),o.default.createElement("div",{className:"lrls-single",onClick:function(){y()}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},H?o.default.createElement("span",null," ",H," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择属性"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:M?"":"none"}},o.default.createElement("label",null,"批次:"),o.default.createElement(c.Single,{className:"lrls-single",district:h,value:G,icon:{type:"add-plus",onClick:function(){a(m.editInventoryBatch("MODIFY-INSERT",L,B,X))}},iconTwo:{type:"home",onClick:function(){a(m.editInventoryBatch("MODIFY-MODIFY",L,B,X))}},onOk:function(e){v("bitch",(0,i.fromJS)({batch:e.batch,batchUuid:e.batchUuid,expirationDate:e.expirationDate}),b),U&&(v("quantity","",b),v("serialList",(0,i.fromJS)([]),b))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding",onClick:function(){a(d.getBatchList(L))}},V?o.default.createElement("span",null,V):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择批次"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:p?"":"none"}},o.default.createElement("label",null,"仓库:"),o.default.createElement(c.Single,{className:"lrls-single",district:f.toJS(),value:_.get("warehouseCardUuid"),onOk:function(e){v("warehouse",e,b),U&&(v("quantity","",b),v("serialList",(0,i.fromJS)([]),b)),C&&a(d.getChzzPrice(b))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},_.get("warehouseCardUuid")?o.default.createElement("span",null," ",_.get("warehouseCardCode")+" "+_.get("warehouseCardName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择仓库卡片"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"yysr-amount lrls-bottom",style:{display:C?"":"none"}},o.default.createElement("label",null,"数量:"),U?o.default.createElement("span",{className:"serial",style:{display:U?"":"none"},onClick:function(){return function(){var t=[];if(!L)return s.toast.info("请先选择存货卡片");if(x&&0==Y.size&&t.push("请先选择完整的属性"),M&&!G&&t.push("请先选择批次"),p&&!N&&t.push("请先选择仓库"),t.length)return s.toast.info(t[0]);var n=function(t){a(m.changeInventoryData("serial",(0,i.fromJS)({serialList:t,type:"JR_ENTRY",afterAdd:function(e){var t=e.size;if(v("quantity",t,b),v("serialList",e,b),I>0){var a=(0,u.decimal)(I*Number(t));v("amount",a,b)}}}),!0)),e.routerHistory.push("/config/inventory/serial")};w&&E&&0==F.size?a(d.getSerialListChecked({inventoryUuid:L,inType:"J",inJrOriCardUuid:_.get("jrOriCardUuid")},function(e){return n(e)})):n(F)}()}},w?o.default.createElement(c.Amount,{decimalPlaces:4,decimalZero:!1},w):"点击输入",o.default.createElement(c.Icon,{type:"edit"})):o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写数量",value:_.get("quantity"),onChange:function(e){if(/^\d*\.?\d{0,2}$/g.test(e)&&(v("quantity",e,b),I>0)){var t=(0,u.decimal)(I*Number(e));v("amount",t,b)}else;}}),o.default.createElement(c.Single,{className:"lrls-single",district:S,value:_.get("unitUuid"),onOk:function(e){if(v("unit",e,b),Z){var t=(0,u.decimal)(Z*e.basicUnitQuantity);if(v("price",t,b),_.get("quantity")){var a=(0,u.decimal)(t*Number(_.get("quantity")));v("amount",a,b)}}}},o.default.createElement(c.Row,{className:"lrls-account lrls-type"},_.get("unitUuid")?o.default.createElement("span",null," ",_.get("unitName")," "):o.default.createElement("span",{className:"lrls-placeholder"},"选择数量单位"),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom",style:{display:C?"":"none"}},o.default.createElement("label",null,"单价："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写单价",value:_.get("price"),onChange:function(e){if(/^\d*\.?\d{0,2}$/g.test(e)&&(v("price",e,b),w>0)){var t=(0,u.decimal)(w*Number(e));v("amount",t,b)}}})),o.default.createElement(c.Row,{className:"lrls-more-card lrls-bottom",onClick:function(){L||s.toast.info("请先选择存货")}},o.default.createElement("label",null,"金额："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",disabled:!L,placeholder:"填写金额",value:_.get("amount"),onChange:function(e){if(/^\d*\.?\d{0,2}$/g.test(e)&&v("amount",e,b),C&&w>0){var t=(0,u.decimal)(Number(e)/w);v("price",t,b)}}})))}}]),a}();t.default=p}).call(this,a(21))},1801:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(l=o)&&l.__esModule?l:{default:l},c=a(31),u=a(9),s=a(16),d=a(13),m=g(a(25)),f=g(a(10)),p=g(a(1060));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var y=(0,c.connect)(function(e){return e})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){f.setTitle({title:"账户手续费"}),f.setIcon({showIcon:!1}),f.setRight({show:!1}),sessionStorage.setItem("routerPage","routerPoundage")}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.history,n=e.editRunningState,l=e.allState.get("accountPoundage"),r=l.get("poundageNeedCurrent"),o=l.get("poundageNeedProject"),c=n.get("poundageCurrentList"),g=n.get("poundageProjectList"),y=n.get("oriTemp"),h=y.get("needUsedPoundage"),E=y.get("poundageCurrentCardList"),v=y.get("poundageProjectCardList"),b=(y.get("projectRange")&&y.get("projectRange").toJS(),y.get("poundageCurrent")),_=y.get("poundageProject"),S=(y.get("usedCurrent"),y.get("includesPoundage")),T=E.get(0)?E.get(0):(0,u.fromJS)({}),C=v.get(0)?v.get(0):(0,u.fromJS)({}),L=C.get("code")+" "+C.get("name");["COMNCRD","ASSIST","MAKE","INDIRECT","MECHANICAL"].includes(C.get("code"))&&(L=C.get("name"));var N=y.getIn(["accounts",0,"poundage","poundage"]),w=y.getIn(["accounts",0,"poundage","poundageRate"]),I=y.getIn(["accounts",0,"poundageAmount"]),A=y.getIn(["accounts",0,"isManual"]),k=y.get("amount"),O=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,n=arguments[2],l=0,r=!1;if(A&&(l=I,(0,d.decimal)(Math.abs(k)-I)<0&&(r=!0)),!A||r||e){if(l=Math.abs((0,d.decimal)(k*w/1e3)),a&&(l=Math.abs((0,d.decimal)(k/(1+Number(w/1e3))*w/1e3))),N&&N>0&&l>N&&(l=N),n)return l;t(p.changeLrlsData(["oriTemp","accounts",0,"poundageAmount"],Math.abs(l))),t(p.changeLrlsData(["oriTemp","accounts",0,"isManual"],!1))}},j=O(!0,!1,!0),R=O(!0,!0,!0);return A&&(S?R=I:j=I),i.default.createElement(s.Container,{className:"edit-running"},i.default.createElement(s.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll"},i.default.createElement("div",{className:"lrls-card"},i.default.createElement(s.Row,{className:"lrls-more-card"},i.default.createElement("span",null,"账户手续费"),i.default.createElement("div",{className:"noTextSwitch"},i.default.createElement(s.Switch,{checked:h,onClick:function(){t(p.changeLrlsData(["oriTemp","needUsedPoundage"],!h)),h?(t(p.changeLrlsData(["oriTemp","includesPoundage"],!1)),t(p.changeLrlsData(["oriTemp","poundageCurrentCardList"],(0,u.fromJS)([]))),t(p.changeLrlsData(["oriTemp","poundageProjectCardList"],(0,u.fromJS)([])))):O()}}))),i.default.createElement("div",{className:"lrls-more-card lrls-margin-top",style:{display:h&&r?"":"none"}},i.default.createElement("label",null,"往来单位:"),b?i.default.createElement(s.Single,{className:"lrls-single",district:c.toJS(),value:T.get("cardUuid")?""+T.get("cardUuid")+m.TREE_JOIN_STR+T.get("code")+m.TREE_JOIN_STR+T.get("name"):"",onOk:function(e){t(p.changeCurrentCardList(e.value,"poundageCurrent"))}},i.default.createElement(s.Row,{className:"lrls-category lrls-padding"},T.get("cardUuid")?i.default.createElement("span",null," ",T.get("code")+" "+T.get("name")," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择往来卡片"),i.default.createElement(s.Icon,{type:"triangle"}))):null,i.default.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px"}},i.default.createElement(s.Switch,{checked:b,onClick:function(){t(p.changeLrlsData(["oriTemp","poundageCurrent"],!b)),t(p.changeLrlsData(["oriTemp","poundageCurrentCardList"],(0,u.fromJS)([])))}}))),i.default.createElement("div",{className:"lrls-more-card lrls-margin-top",style:{display:h&&o?"":"none"}},i.default.createElement("label",null,"项目:"),_?i.default.createElement(s.Single,{className:"lrls-single",district:g.toJS(),value:C.get("cardUuid")?""+C.get("cardUuid")+m.TREE_JOIN_STR+C.get("code")+m.TREE_JOIN_STR+C.get("name"):"",onOk:function(e){t(p.changeProjectCard("poundageProject",e.value,0))}},i.default.createElement(s.Row,{className:"lrls-category lrls-padding"},C.get("cardUuid")?i.default.createElement("span",null," ",L," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择项目卡片"),i.default.createElement(s.Icon,{type:"triangle"}))):null,i.default.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px"}},i.default.createElement(s.Switch,{checked:_,onClick:function(){t(p.changeLrlsData(["oriTemp","poundageProject"],!_)),t(p.changeLrlsData(["oriTemp","poundageProjectCardList"],(0,u.fromJS)([])))}})))),i.default.createElement("div",{className:"lrls-card",style:{display:h?"":"none"}},i.default.createElement(s.Row,{className:"lrls-more-card lrls-bottom"},i.default.createElement("label",null,"手续费:"),i.default.createElement(s.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:I,onChange:function(e){N&&N>0&&e>N?f.toast.info("输入金额不可大于手续费上限"):(0,d.decimal)(Math.abs(k)-e)<0?f.toast.info("手续费不可大于转出金额"):(t(p.changeLrlsData(["oriTemp","accounts",0,"poundageAmount"],e)),t(p.changeLrlsData(["oriTemp","accounts",0,"isManual"],!0)))}})),i.default.createElement("div",{className:"lrls-more-card"},i.default.createElement("div",{className:"lrls-poundage",style:{borderColor:S?"":"#FF8348"},onClick:function(){t(p.changeLrlsData(["oriTemp","includesPoundage"],!1)),O(!0,!1)}},i.default.createElement("div",{className:"lrls-margin-bottom"},i.default.createElement("span",{className:"lrls-placeholder lrls-margin-bottom"},"转出金额:"),i.default.createElement(s.Amount,{showZero:!0},(0,d.decimal)(Number(k)+Number(j)))),i.default.createElement("div",null,i.default.createElement("span",{className:"lrls-placeholder"},"到账金额:"),i.default.createElement(s.Amount,{showZero:!0},(0,d.decimal)(Number(k)))),i.default.createElement("div",{style:{display:S?"none":""}},i.default.createElement("div",{className:"triangle"}),i.default.createElement(s.Icon,{type:"tick"}))),i.default.createElement("div",{className:"lrls-poundage lrls-margin-left",style:{borderColor:S?"#FF8348":""},onClick:function(){t(p.changeLrlsData(["oriTemp","includesPoundage"],!0)),O(!0,!0)}},i.default.createElement("div",{className:"lrls-margin-bottom"},i.default.createElement("span",{className:"lrls-placeholder"},"转出金额:"),i.default.createElement(s.Amount,{showZero:!0},(0,d.decimal)(Number(k)))),i.default.createElement("div",null,i.default.createElement("span",{className:"lrls-placeholder"},"到账金额:"),i.default.createElement(s.Amount,{showZero:!0},(0,d.decimal)(Number(k)-Number(R)))),i.default.createElement("div",{style:{display:S?"":"none"}},i.default.createElement("div",{className:"triangle"}),i.default.createElement(s.Icon,{type:"tick"})))))),i.default.createElement(s.ButtonGroup,null,i.default.createElement(s.Button,{onClick:function(){a.goBack()}},i.default.createElement(s.Icon,{type:"confirm"}),i.default.createElement("span",null,"确定"))))}}]),t}())||n;t.default=y},1802:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments[1];return((e={},u(e,r.RUNNING_INIT_FJ_LIST,function(){return t.set("enclosureList",(0,n.fromJS)([]))}),u(e,r.RUNNING_GET_LS_LABEL_FETCH,function(){var e=[];return a.receivedData.data.map(function(t){e.push({label:t,value:t})}),t=t.set("label",(0,n.fromJS)(e)).set("tagModal",!0)}),u(e,r.RUNNING_ACCOUNT_SAVE_AND_NEW,function(){return t.set("oriTemp",s.get("oriTemp")).set("views",s.get("views")).setIn(["oriTemp","oriDate"],a.date)}),u(e,r.RUNNING_CHANGE_LRLS_DATA,function(){return a.set?t.set(a.dataType,a.value):t.setIn(a.dataType,a.value)}),u(e,r.RUNNING_GET_HOMEACCOUNT_CARD_DETAIL,function(){var e=(0,n.fromJS)(a.receivedData);if(t=t.setIn(["views","ylType"],""),a.isModify){var l=t.getIn(["oriTemp","oriState"]);0==e.getIn(["acCost","beDeposited"])&&(l="STATE_FY");var r=t.getIn(["oriTemp","usedCurrent"]);0==e.getIn(["acCost","contactsManagement"])&&(r=!1);var o=t.getIn(["oriTemp","propertyCost"]);if(!o){var c=e.get("propertyCostList");1==c.size&&(o=c.get(0))}var u=t.getIn(["oriTemp","billList"]);u&&0==u.size&&(u=(0,n.fromJS)([{billType:"bill_other",billState:"",taxRate:"",tax:""}]));var d=t.getIn(["oriTemp","accounts"]);return d&&0==d.size&&(d=(0,n.fromJS)([{accountUuid:"",accountName:""}])),t.set("categoryTemp",e).mergeIn(["oriTemp"],e).setIn(["oriTemp","categoryUuid"],e.get("uuid")).setIn(["oriTemp","categoryName"],e.get("name")).setIn(["oriTemp","projectCardList"],(0,n.fromJS)([{amount:""}])).setIn(["oriTemp","currentCardList"],(0,n.fromJS)([])).setIn(["oriTemp","propertyCost"],o).setIn(["oriTemp","billList"],u).setIn(["oriTemp","accounts"],d).setIn(["oriTemp","oriState"],l).setIn(["oriTemp","usedCurrent"],r).setIn(["views","insertOrModify"],"modify")}return t=t.set("categoryTemp",e).set("oriTemp",e).mergeIn(["oriTemp"],s.get("oriTemp")).setIn(["oriTemp","categoryUuid"],e.get("uuid")).setIn(["oriTemp","categoryName"],e.get("name")).setIn(["oriTemp","categoryType"],e.get("categoryType")).setIn(["oriTemp","oriDate"],t.getIn(["oriTemp","oriDate"])).setIn(["views","insertOrModify"],"insert").set("cardAllList",s.get("cardAllList")),(0,i.setDefault)(t,a.isOpenedWarehouse)}),u(e,r.RUNNING_CLEAR_CARDTEMP,function(){var e=t.getIn(["oriTemp","oriDate"]),a=t.getIn(["oriTemp","categoryUuid"]),n=t.getIn(["oriTemp","categoryName"]),l=t.getIn(["oriTemp","categoryType"]),r=t.getIn(["oriTemp","handleType"]),o=t.getIn(["oriTemp","propertyCost"]),i=t.getIn(["oriTemp","propertyCostList"]);return o&&["XZ_SCCB","XZ_FZSCCB","XZ_ZZFY","XZ_HTCB","XZ_JJFY","XZ_JXZY"].includes(o)&&i&&i.size&&(o="",1==i.size&&i.get(0)),"LB_XMJZ"==l?t:t.set("oriTemp",t.get("categoryTemp")).mergeIn(["oriTemp"],s.get("oriTemp")).setIn(["oriTemp","categoryUuid"],a).setIn(["oriTemp","categoryName"],n).setIn(["oriTemp","categoryType"],l).setIn(["oriTemp","oriDate"],e).setIn(["oriTemp","handleType"],r).setIn(["oriTemp","propertyCost"],o)}),u(e,r.RUNNING_CHANGE_LRLS_ACCOUNT,function(){var e=a.value.value.split(o.TREE_JOIN_STR),l={needPoundage:a.value.needPoundage,poundage:a.value.poundage,poundageRate:a.value.poundageRate};return"ACCOUNT_STATUS_TO"==a.accountStatus?t=t.setIn(["oriTemp","accounts",1,"accountStatus"],"ACCOUNT_STATUS_TO").setIn(["oriTemp","accounts",1,"accountName"],e[1]).setIn(["oriTemp","accounts",1,"accountUuid"],e[0]).setIn(["oriTemp","accounts",1,"poundage"],(0,n.fromJS)(l)):(t=t.setIn(["oriTemp","accounts",0,"accountName"],e[1]).setIn(["oriTemp","accounts",0,"accountUuid"],e[0]).setIn(["oriTemp","accounts",0,"poundage"],(0,n.fromJS)(l)),"ACCOUNT_STATUS_FROM"==a.accountStatus&&(t=t.setIn(["oriTemp","accounts",0,"accountStatus"],"ACCOUNT_STATUS_FROM"))),t}),u(e,r.RUNNING_GET_JRLIST,function(){return t.setIn(["oriTemp","pendingStrongList"],(0,n.fromJS)(a.receivedData)).setIn(["oriTemp","jrAmount"],0)}),u(e,r.RUNNING_PENDINGSTRONGLIST_BESELECT,function(){return t.setIn(["oriTemp","pendingStrongList",a.idx,"beSelect"],a.value)}),u(e,r.RUNNING_CHANGE_PROJECT_CARD,function(){switch(a.dataType){case"card":var e=a.value.value.split(o.TREE_JOIN_STR),l=t.getIn(["oriTemp","projectCardList",a.idx,"amount"]);t=t.setIn(["oriTemp","projectCardList",a.idx],(0,n.fromJS)({cardUuid:e[0],code:e[1],name:e[2],projectProperty:a.value.projectProperty,amount:l}));break;case"amount":t=t.setIn(["oriTemp","projectCardList",a.idx,"amount"],a.value);break;case"add":t=t.setIn(["oriTemp","projectCardList",a.idx],(0,n.fromJS)({amount:""}));break;case"delete":t=t.deleteIn(["oriTemp","projectCardList",a.idx]);break;case"poundageProject":var r=a.value.split(o.TREE_JOIN_STR);t=t.setIn(["oriTemp","poundageProjectCardList",a.idx],(0,n.fromJS)({cardUuid:r[0],code:r[1],name:r[2]}));break;case"carryoverProjectCardList":var i=a.value.split(o.TREE_JOIN_STR);t=t.setIn(["oriTemp","carryoverProjectCardList",a.idx],(0,n.fromJS)({cardUuid:i[0],code:i[1],name:i[2]}))}return t}),u(e,r.RUNNING_GET_PROJECT_CARDLIST,function(){var e=[],l=void 0,r=null;return a.receivedData.forEach(function(t,a){t.key=t.code+" "+t.name,t.oriName=t.name,t.value=""+t.uuid+o.TREE_JOIN_STR+t.code+o.TREE_JOIN_STR+t.name,e.push(t),"项目公共费用"==t.name&&(t.key=t.name,l=t,r=a),["COMNCRD","ASSIST","MAKE","INDIRECT","MECHANICAL"].includes(t.code)&&(t.key=t.name)}),null!=r&&(e.unshift(l),e.splice(r+1,1)),t.set(a.cardType,(0,n.fromJS)(e))}),u(e,r.RUNNING_ORIRUNNING,function(){var e=(0,n.fromJS)(a.receivedData);t=t.setIn(["views","insertOrModify"],"modify").setIn(["views","showJrPage"],!1).set("oriTemp",s.get("oriTemp")).mergeIn(["oriTemp"],(0,n.fromJS)(a.receivedData.jrOri)).mergeIn(["oriTemp"],(0,n.fromJS)(a.receivedData.category)).set("enclosureList",(0,n.fromJS)(a.receivedData.jrOri.enclosureList)).setIn(["views","ylType"],a.ylType),"COPY"==a.ylType&&("STATE_XC_DJ"==(t=t.setIn(["views","ylType"],"COPY").setIn(["oriTemp","oriDate"],(new l.DateLib).valueOf()).setIn(["views","insertOrModify"],"insert").set("categoryTemp",e.get("category"))).getIn(["oriTemp","oriState"])&&(t=t.setIn(["oriTemp","oriState"],"STATE_XC_JN")),"STATE_XC_JN"==t.getIn(["oriTemp","oriState"])&&("SX_SHBX"==t.getIn(["oriTemp","propertyPay"])&&(t=t.setIn(["oriTemp","payment","companySocialSecurityAmount"],e.getIn(["jrOri","amount"])).setIn(["oriTemp","payment","personSocialSecurityAmount"],0).setIn(["oriTemp","payment","actualAmount"],e.getIn(["jrOri","amount"]))),"SX_ZFGJJ"==t.getIn(["oriTemp","propertyPay"])&&(t=t.setIn(["oriTemp","payment","companyAccumulationAmount"],e.getIn(["jrOri","amount"])).setIn(["oriTemp","payment","personAccumulationAmount"],0).setIn(["oriTemp","payment","actualAmount"],e.getIn(["jrOri","amount"])))),"SX_GZXJ"==t.getIn(["oriTemp","propertyPay"])&&"STATE_XC_FF"==t.getIn(["oriTemp","oriState"])&&(t=t.setIn(["oriTemp","payment","actualAmount"],e.getIn(["jrOri","amount"]))));var r=t.getIn(["oriTemp","billList"]),o=r&&r.size?r.getIn([0,"billType"]):"",i=0,c=e.getIn(["jrOri","pendingStrongList"]);c.size&&(c=c.update(function(e){return e.map(function(e){var t=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return i+=t,e.set("notHandleAmount",t)})})),["LB_GGFYFT","LB_CHTRXM"].includes(d)||e.getIn(["jrOri","usedProject"])||(t=t.setIn(["oriTemp","projectCardList"],(0,n.fromJS)([{amount:""}]))),e.getIn(["jrOri","usedProject"])&&(t=t.setIn(["oriTemp","oriUsedProject"],!0)),e.getIn(["jrOri","usedCurrent"])&&(t=t.setIn(["oriTemp","oriUsedCurrent"],!0));var u=Math.abs(e.getIn(["jrOri","amount"]))==Math.abs(e.getIn(["jrOri","currentAmount"])),d=t.getIn(["oriTemp","categoryType"]),m=t.getIn(["oriTemp","oriState"]);if(({STATE_CQZC_JZSY:function(){d="LB_JZSY";var e=t.getIn(["oriTemp","relationCategoryUuid"]),a=t.getIn(["oriTemp","categoryUuid"]);t=(t=t.setIn(["oriTemp","categoryUuid"],e)).setIn(["oriTemp","relationCategoryUuid"],a)},STATE_CQZC_ZJTX:function(){d="LB_ZJTX";var e=t.getIn(["oriTemp","relationCategoryUuid"]),a=t.getIn(["oriTemp","categoryUuid"]);t=(t=t.setIn(["oriTemp","categoryUuid"],e)).setIn(["oriTemp","relationCategoryUuid"],a)},STATE_ZCWJZZS:function(){t=t.setIn(["oriTemp","handleMonth"],c.getIn([0,"oriDate"]).substr(0,7))}}[m]||function(){return null})(),"LB_SFGL"==d){i=0;var f=0;c=e.getIn(["jrOri","pendingManageDto","pendingManageList"]).update(function(e){return e.map(function(e){return"debit"==e.get("direction")?i+=Number(e.get("amount")):i-=Number(e.get("amount")),"STATE_SFGL_ML"==m&&("debit"==(e=e.set("moedAmount",e.get("handleAmount")).set("handleAmount","")).get("direction")?f+=Number(e.get("moedAmount")):f-=Number(e.get("moedAmount"))),e.set("beSelect",!0)})}),"STATE_SFGL_ML"==m&&(t=t.setIn(["oriTemp","moedAmount"],(0,l.decimal)(f)))}if("LB_JZCB"==d){i=0,c=e.getIn(["jrOri","stockWeakList"]).update(function(e){return e.map(function(e){return i+=Math.abs(Number(e.get("amount"))),e.set("beSelect",!0)})});var p=[],g=[];e.getIn(["jrOri","stockCardList"]).map(function(e){var t=e.toJS();t.key=t.code+" "+t.name,t.value=t.cardUuid,t.oriName=t.name,g.includes(t.cardUuid)||(g.push(t.cardUuid),p.push(t))});var y=!1,h=!1;"STATE_YYSR_ZJ"==m&&(y=t.getIn(["oriTemp","usedProject"]),h=e.getIn(["jrOri","beProject"]),t=t.setIn(["oriTemp","projectRange"],(0,n.fromJS)(a.receivedData.jrOri.projectRange)).setIn(["oriTemp","relationCategoryType"],(0,n.fromJS)(a.receivedData.jrOri.relationCategoryType))),t=t.set("stockList",(0,n.fromJS)(p)).setIn(["oriTemp","beProject"],h).setIn(["oriTemp","usedProject"],y).setIn(["oriTemp","propertyCostList"],(0,n.fromJS)(a.receivedData.jrOri.propertyCostList))}if("LB_GGFYFT"==d&&(i=0,c=e.getIn(["jrOri","pendingProjectShareList"]).update(function(e){return e.map(function(e){return i+=Number(e.get("amount")),e.set("beSelect",!0).set("notHandleAmount",e.get("amount"))})}),t=t.setIn(["oriTemp","usedProject"],!1)),["LB_KJFP","LB_FPRZ"].includes(d)){var E=0;c.forEach(function(e){E=+Math.abs(e.get("oriAmount"))});var v=t.getIn(["oriTemp","amount"]);t=t.setIn(["oriTemp","jrTaxAmount"],E).setIn(["oriTemp","amount"],Math.abs(v))}if("LB_CHDB"==d){var b=[];e.getIn(["jrOri","warehouseCardList"]).map(function(e){"WAREHOUSE_STATUS_FROM"==e.get("warehouseStatus")&&(b[0]=e),"WAREHOUSE_STATUS_TO"==e.get("warehouseStatus")&&(b[1]=e)}),t=t.setIn(["oriTemp","warehouseCardList"],(0,n.fromJS)(b))}if("LB_CHYE"==d){var _=t.getIn(["oriTemp","jrState"]),S=_||"STATE_CHYE";t=t.setIn(["oriTemp","oriState"],S)}if(["STATE_JXSEZC_FS","STATE_JXSEZC_TFS"].includes(m)){var T=[],C=e.getIn(["category","propertyCostList"]);"LB_YYZC"==e.getIn(["category","relationCategoryType"])&&(T=e.getIn(["category","acBusinessExpense","stockRange"]),"SX_HW"==e.getIn(["category","propertyCarryover"])&&(t=t.setIn(["oriTemp","beProject"],!1))),"LB_CQZC"==e.getIn(["category","relationCategoryType"])&&(t=t.setIn(["oriTemp","beProject"],!1),C=(0,n.fromJS)([])),t=t.setIn(["oriTemp","stockRange"],T).setIn(["oriTemp","propertyCostList"],C)}if("LB_XCZC"==d&&"STATE_XC_DK"==m){var L=t.getIn(["oriTemp","payment","personAccumulationAmount"]),N=t.getIn(["oriTemp","payment","personSocialSecurityAmount"]),w=t.getIn(["oriTemp","payment","incomeTaxAmount"]);L&&(t=t.setIn(["oriTemp","acPayment","beWithholding"],!0)),N&&(t=t.setIn(["oriTemp","acPayment","beWithholdSocial"],!0)),w&&(t=t.setIn(["oriTemp","acPayment","beWithholdTax"],!0))}if("LB_CHTRXM"==d&&(t=t.setIn(["oriTemp","usedProject"],!0).setIn(["oriTemp","beProject"],!0).setIn(["oriTemp","oriState"],"STATE_CHTRXM")),"LB_XMJZ"==d&&"STATE_XMJZ_XMJQ"==m){var I=e.getIn(["jrOri","allHappenAmount"]),A=e.getIn(["jrOri","allStoreAmount"]);i=(0,l.decimal)(I-A)}return t.setIn(["oriTemp","pendingStrongList"],c).setIn(["oriTemp","jrAmount"],i).setIn(["oriTemp","isFullPayment"],u).setIn(["oriTemp","categoryType"],d).setIn(["oriTemp","oriBillType"],o)}),u(e,r.RUNNING_HANDLETYPE,function(){var e="";return{JR_HANDLE_QDJK:function(){e="STATE_JK_YS"},JR_HANDLE_CHLX:function(){e="STATE_JK_ZFLX"},JR_HANDLE_CHBJ:function(){e="STATE_JK_YF"},JR_HANDLE_DWTZ:function(){e="STATE_TZ_YF"},JR_HANDLE_QDSY:function(){var a=t.getIn(["oriTemp","propertyInvest"]);e="SX_ZQ"==a?"STATE_TZ_SRLX":"STATE_TZ_SRGL"},JR_HANDLE_SHTZ:function(){e="STATE_TZ_YS"},JR_HANDLE_ZZ:function(){e="STATE_ZB_ZZ"},JR_HANDLE_LRFP:function(){e="STATE_ZB_ZFLR"},JR_HANDLE_JZ:function(){e="STATE_ZB_JZ"},JR_HANDLE_ZBYJ:function(){e="STATE_ZB_ZBYJ"},JR_HANDLE_GJ:function(){e="STATE_CQZC_YF"},JR_HANDLE_CZ:function(){e="STATE_CQZC_YS"}}[a.value](),t.setIn(["oriTemp","handleType"],a.value).setIn(["oriTemp","oriState"],e)}),u(e,r.RUNNING_LRLS_AMOUNT,function(){var e=t.getIn(["oriTemp","billList",0,"taxRate"]),n=a.value,r="";return r=-1==e?n:100==e?n/2:n-n/(1+e/100),t.setIn(["oriTemp","amount"],n).setIn(["oriTemp","billList",0,"tax"],(0,l.decimal)(r))}),u(e,r.RUNNING_TAXRATE,function(){var e=t.getIn(["oriTemp","amount"]),n=a.value,r="";return r=-1==n?"":100==n?e/2:e-e/(1+n/100),t.setIn(["oriTemp","billList",0,"taxRate"],n).setIn(["oriTemp","billList",0,"tax"],r?(0,l.decimal)(r):"")}),u(e,r.RUNNING_GET_CARDLIST,function(){var e=[];return a.data.forEach(function(t){var n=""+t.uuid+o.TREE_JOIN_STR+t.code+o.TREE_JOIN_STR+t.name;["carryoverStockRange","commonCardJzcbList"].includes(a.cardType)&&(n=""+t.cardUuid+o.TREE_JOIN_STR+t.code+o.TREE_JOIN_STR+t.name),t.key=t.code+" "+t.name,t.value=n,t.oriName=t.name,e.push(t)}),"contactsRange"===a.cardType&&(t=t.set("currentList",(0,n.fromJS)(e))),["stockRange","carryoverStockRange"].includes(a.cardType)&&(t=t.set("stockList",(0,n.fromJS)(e))),"poundageCurrent"==a.cardType&&(t=t.set("poundageCurrentList",(0,n.fromJS)(e))),["commonCardList","commonCardJzcbList"].includes(a.cardType)&&(t=t.set("commonCardList",(0,n.fromJS)(e))),"commonCurrentList"==a.cardType&&(t=t.set("commonCurrentList",(0,n.fromJS)(e))),t}),u(e,r.RUNNING_CHANGE_CURRENT_CARDLIST,function(){var e=a.value.split(o.TREE_JOIN_STR),l={};return l.cardUuid=e[0],l.code=e[1],l.name=e[2],"poundageCurrent"==a.cardType?t.setIn(["oriTemp","poundageCurrentCardList",0],(0,n.fromJS)(l)):t.setIn(["oriTemp","currentCardList",0],(0,n.fromJS)(l))}),u(e,r.RUNNING_AUTO_CQZC_CZAMOUNT,function(){var e=t.getIn(["oriTemp","assets","originalAssetsAmount"]),a=t.getIn(["oriTemp","assets","depreciationAmount"]),n=t.getIn(["oriTemp","amount"]),l=t.getIn(["oriTemp","billList",0,"tax"]),r=t.getIn(["oriTemp","billList",0,"billType"]),o=0;return o="bill_common"===r?Number(a)+Number(n)-Number(e)-Number(l):Number(a)+Number(n)-Number(e),t.setIn(["oriTemp","assets","cleaningAmount"],o)}),u(e,r.RUNNING_CHANGE_YYSR_STOCKCARD,function(){return(0,i.changeStockCard)(t,a)}),u(e,r.RUNNING_XCZC_CALCULATE_AMOUNT,function(){var e=t.getIn(["oriTemp","payment","companyAccumulationAmount"]),n=t.getIn(["oriTemp","payment","personAccumulationAmount"]),r=t.getIn(["oriTemp","payment","companySocialSecurityAmount"]),o=t.getIn(["oriTemp","payment","personSocialSecurityAmount"]),i=t.getIn(["oriTemp","payment","incomeTaxAmount"]),c=t.getIn(["oriTemp","jrAmount"]),u=t.getIn(["oriTemp","payment","actualAmount"]);switch(a.propertyPay){case"SX_GZXJ":var s="modify"===t.getIn(["views","insertOrModify"]);if(s)return t;var d=(0,l.decimal)(Number(u)+Number(n)+Number(o)+Number(i));t=t.setIn(["oriTemp","amount"],d);break;case"SX_ZFGJJ":u=c<0?(0,l.decimal)(-Math.abs(Number(n))+Number(e)):(0,l.decimal)(Number(n)+Number(e)),t=t.setIn(["oriTemp","payment","actualAmount"],u);break;case"SX_SHBX":u=c<0?(0,l.decimal)(-Math.abs(Number(r))+Number(o)):(0,l.decimal)(Number(r)+Number(o)),t=t.setIn(["oriTemp","payment","actualAmount"],u);break;default:u=0}return t}),u(e,r.RUNNING_GET_CQZC_CATEGORY,function(){return t.set("categoryList",(0,n.fromJS)(a.receivedData)).setIn(["oriTemp","uuid"],"").setIn(["oriTemp","name"],"请选择处理类别")}),u(e,r.RUNNING_AUTO_JZSY_AMOUNT,function(){var e=t.getIn(["oriTemp","assets"]),a=e.get("originalAssetsAmount"),n=e.get("depreciationAmount"),l=e.get("cleaningAmount"),r=Number(n)+Number(l)-Number(a);return t.setIn(["oriTemp","amount"],r)}),u(e,r.RUNNING_ZJTX_SELECT_CATEGORY,function(){var e="",l=a.data.get("propertyCostList");return 1==l.size&&(e=l.get(0)),t.setIn(["oriTemp","relationCategoryUuid"],a.data.get("uuid")).setIn(["oriTemp","relationCategoryName"],a.data.get("name")).setIn(["oriTemp","beProject"],a.data.get("beProject")).setIn(["oriTemp","usedProject"],a.data.get("beProject")).setIn(["oriTemp","propertyCost"],e).setIn(["oriTemp","propertyCostList"],l).setIn(["oriTemp","projectCardList"],(0,n.fromJS)([{amount:""}]))}),u(e,r.RUNNING_GET_SFGL_CATEGORYLIST,function(){return t.set("categoryList",(0,n.fromJS)(a.data.childList?a.data.childList:[])).setIn(["oriTemp","pendingManageDto"],s.getIn(["oriTemp","pendingManageDto"]))}),u(e,r.RUNNING_GET_JZCB_CATEGORYLIST,function(){return"COPY"==t.getIn(["views","ylType"])?t.set("categoryList",(0,n.fromJS)(a.data)):t.set("categoryList",(0,n.fromJS)(a.data)).setIn(["oriTemp","relationCategoryUuid"],"").setIn(["oriTemp","relationCategoryName"],"请选择处理类别")}),u(e,r.RUNNING_CHANGE_GGFYFT_PROJECT_CARD,function(){var e=t.getIn(["oriTemp","jrAmount"]);switch(a.dataType){case"card":var r=[],o=t.getIn(["oriTemp","projectCardList",a.idx]);a.value.map(function(e,t){var a="",n="";0==t&&o&&(a=o.get("amount"),n=o.get("percent"),a=a||"",n=n||""),r.push({cardUuid:e.uuid,code:e.code,name:e.oriName,amount:a,percent:n,propertyCost:""})});var i=t.getIn(["oriTemp","projectCardList"]).toJS();i.splice.apply(i,[a.idx,1].concat(r)),t=t.setIn(["oriTemp","projectCardList"],(0,n.fromJS)(i));break;case"amount":var c=100*(0,l.decimal)(a.value/e,4);"-"==a.value&&(c=0),t=t.setIn(["oriTemp","projectCardList",a.idx,"amount"],a.value).setIn(["oriTemp","projectCardList",a.idx,"percent"],c);break;case"percent":var u=(0,l.decimal)(a.value*e/100);t=t.setIn(["oriTemp","projectCardList",a.idx,"amount"],u).setIn(["oriTemp","projectCardList",a.idx,"percent"],a.value);break;case"add":t=t.setIn(["oriTemp","projectCardList",a.idx],(0,n.fromJS)({amount:"",percent:""}));break;case"delete":t=t.deleteIn(["oriTemp","projectCardList",a.idx]);break;case"propertyCost":t=t.setIn(["oriTemp","projectCardList",a.idx,"propertyCost"],a.value)}return t}),u(e,r.RUNNING_GGFYFT_AUTO_CALCULATE,function(){var e=t.getIn(["oriTemp","jrAmount"]);return t.updateIn(["oriTemp","projectCardList"],function(t){return t.map(function(t){var a=t.get("percent"),n=(0,l.decimal)(e*a/100)?(0,l.decimal)(e*a/100):"";return t.set("amount",n)})})}),u(e,r.RUNNING_FILTER_JZCBLIST,function(){var e=t.getIn(["oriTemp","stockCardList"]),a=t.getIn(["oriTemp","stockWeakList"]),n=e.map(function(e){return e.get("cardUuid")}),l=a.filter(function(e){return n.includes(e.get("stockCardUuid"))});return t.setIn(["oriTemp","pendingStrongList"],l)}),u(e,r.CHANGE_EDIT_RUNNING_ENCLOSURE_LIST,function(){var e=t.get("enclosureList").toJS();return a.imgArr.forEach(function(t){e.push(t)}),t=t.set("enclosureList",(0,n.fromJS)(e))}),u(e,r.DELETE_EDIT_RUNNING_UPLOAD_FJ_URL,function(){return t.get("enclosureList").map(function(e,n){n==a.index&&(t=t.deleteIn(["enclosureList",n]))}),t=t.set("enclosureCountUser",t.get("enclosureList").size)}),u(e,r.EDIT_RUNNING_INIT_FJ_LIST,function(){return t=t.set("enclosureList",(0,n.fromJS)([]))}),u(e,r.EDIT_RUNNING_GET_LS_LABEL_FETCH,function(){var e=[];return a.receivedData.data.map(function(t){e.push({key:t,value:t})}),t=t.set("label",(0,n.fromJS)(e))}),u(e,r.CHANGE_EDIT_RUNNING_TAG_NAME,function(){return t.get("enclosureList").map(function(e,n){n==a.index&&(t=t.setIn(["enclosureList",n,"label"],a.value))}),t}),u(e,r.RUNNING_ACCOUNT_MORE_CARD,function(){switch(a.dataType){case"card":var e=a.value.value.split(o.TREE_JOIN_STR),l={needPoundage:a.value.needPoundage,poundage:a.value.poundage,poundageRate:a.value.poundageRate},r=t.getIn(["oriTemp","accounts",a.idx,"amount"]);t=t.setIn(["oriTemp","accounts",a.idx],(0,n.fromJS)({accountUuid:e[0],accountName:e[1],amount:r,poundage:l}));break;case"amount":t=t.setIn(["oriTemp","accounts",a.idx,"amount"],a.value).setIn(["oriTemp","accounts",a.idx,"isManual"],!1);break;case"add":t=t.setIn(["oriTemp","accounts",a.idx],(0,n.fromJS)({amount:""}));break;case"delete":t=t.deleteIn(["oriTemp","accounts",a.idx])}return t}),u(e,r.RUNNING_GET_WAREHOUSE,function(){return a.receivedData.forEach(function(e,t){e.key=e.code+" "+e.name,e.value=e.uuid}),"STATE_CHYE_TYDJ"==a.oriState?t.set("warehouseListTydj",(0,n.fromJS)(a.receivedData)):t.set("warehouseList",(0,n.fromJS)(a.receivedData))}),u(e,r.RUNNING_CHANGE_HANDLECATEGORY,function(){var e=a.data,l=e.beProject,r=e.beProject,o=!1,i="",c=[];return"SX_HW"==e.propertyCarryover&&(l=!1,r=!1,o=!0),"LB_CQZC"==e.categoryType&&(l=!1,r=!1),"LB_CQZC"!=e.categoryType&&e.propertyCostList&&e.propertyCostList.length&&(i=e.propertyCostList[0],c=e.propertyCostList),t.setIn(["oriTemp","relationCategoryUuid"],e.uuid).setIn(["oriTemp","relationCategoryUuid"],e.uuid).setIn(["oriTemp","relationCategoryName"],e.name).setIn(["oriTemp","beProject"],l).setIn(["oriTemp","usedProject"],r).setIn(["oriTemp","projectCardList"],(0,n.fromJS)([{amount:""}])).setIn(["oriTemp","usedStock"],o).setIn(["oriTemp","stockCardList"],(0,n.fromJS)([{amount:""}])).setIn(["oriTemp","propertyCost"],i).setIn(["oriTemp","propertyCostList"],(0,n.fromJS)(c)).set("categoryTemp",(0,n.fromJS)({usedStock:o,beProject:l,propertyCarryover:e.propertyCarryover,propertyCostList:e.propertyCostList}))}),u(e,r.RUNNING_SET_JZCB_PRICE,function(){var e=t.getIn(["oriTemp","pendingStrongList"]),a=[],r=[];return e.forEach(function(e){if(e.get("beSelect")){var t=Number(e.get("quantityAmount")),n=Number(e.get("number")),o=Number(e.get("quantity")),i=0,c=0,u=e.get("stockCardUuid"),s=e.get("storeCardUuid")?e.get("storeCardUuid"):"",d=e.get("batch")?e.get("batch"):"",m=e.get("assistList")?e.get("assistList").toJS().map(function(e){return e.propertyUuid}).sort():[],f=u+"_"+s+"_"+d+"_"+m.join("_");if(r.includes(f)){var p=r.findIndex(function(e){return e==f});t+=Number(a[p].totalQuantityAmount),n+=Number(a[p].totalNumber),o+=Number(a[p].totalNumber),t*n>0&&(c=(0,l.decimal)(t/n),i=(0,l.decimal)(o*Number(c))),a[p].price=c||"",a[p].amount=i||"",a[p].quantity=o,a[p].totalQuantityAmount=t,a[p].totalNumber=n,a[p].totalQuantity=o}else r.push(f),t*n>0&&(c=(0,l.decimal)(t/n),i=(0,l.decimal)(o*Number(c))),a.push({cardUuid:e.get("stockCardUuid"),code:e.get("stockCardCode"),name:e.get("stockCardName"),isOpenedQuantity:e.get("isOpenedQuantity"),unitName:e.get("unitCardName"),unitUuid:e.get("unitCardUuid"),price:c||"",amount:i||"",quantity:o,totalQuantityAmount:t,totalNumber:n,totalQuantity:o,warehouseCardCode:"",warehouseCardUuid:e.get("storeCardUuid"),warehouseCardName:e.get("storeCardName"),financialInfo:{openAssist:!!e.get("assistList").size,openSerial:!1,openBatch:!!d},assistList:e.get("assistList"),batch:e.get("batch"),batchUuid:e.get("batchUuid"),expirationDate:e.get("expirationDate")})}}),t.setIn(["oriTemp","stockCardList"],(0,n.fromJS)(a).sortBy(function(e){return e.get("code")}))}),u(e,r.RUNNING_UPDATE_STOCK_BATCH,function(){var e=t.getIn(["oriTemp","oriState"]);return t=t.updateIn(["oriTemp","stockCardList"],function(t){return t.map(function(t){return t.get("cardUuid")==a.batch.get("cardUuid")&&t.get("batchUuid")==a.batch.get("batchUuid")&&(t=t.merge(a.batch)),"STATE_CHZZ_ZZD"==e&&(t=t.updateIn(["childCardList"],function(e){return e.map(function(e){return e.get("cardUuid")==a.batch.get("cardUuid")&&e.get("batchUuid")==a.batch.get("batchUuid")&&(e=e.merge(a.batch)),e})})),t})}),"STATE_CHZZ_ZZCX"==e&&(t=t.updateIn(["oriTemp","stockCardOtherList"],function(e){return e.map(function(e){return e.get("cardUuid")==a.batch.get("cardUuid")&&e.get("batchUuid")==a.batch.get("batchUuid")&&(e=e.merge(a.batch)),e})})),"insert"==t.getIn(["views","insertOrModify"])&&["STATE_YYSR_XS","STATE_YYSR_TS"].includes(e)&&(t=t.updateIn(["oriTemp","carryoverCardList"],function(e){return e.map(function(e){return e.get("cardUuid")==a.batch.get("cardUuid")&&e.get("batchUuid")==a.batch.get("batchUuid")&&(e=e.merge(a.batch)),e})})),t}),e)[a.type]||function(){return t})()};var n=a(9),l=a(13),r=c(a(1396)),o=c(a(25)),i=a(1397);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s=(0,n.fromJS)({views:{insertOrModify:"insert",showJrPage:!1,idx:0,ylType:""},categoryTemp:{},oriTemp:{categoryType:"LB_HOME",oriDate:"",oriState:"",oriAbstract:"",categoryName:"请选择类别",categoryUuid:"",usedAccounts:!1,accounts:[{accountUuid:"",accountName:"",amount:""}],amount:"",currentAmount:"",jrAmount:"",jrTaxAmount:"",pendingStrongList:[],usedProject:!1,beCarryover:!1,usedCurrent:!1,projectCardList:[{amount:""}],currentCardList:[],stockCardList:[{amount:""}],carryoverCardList:[{amount:""}],payment:{actualAmount:"",companyAccumulationAmount:"",personAccumulationAmount:"",companySocialSecurityAmount:"",personSocialSecurityAmount:"",incomeTaxAmount:""},assets:{originalAssetsAmount:"",depreciationAmount:"",cleaningAmount:""},billList:[{billType:"bill_other",billState:"",taxRate:"",tax:""}],accumulationAmount:"",socialSecurityAmount:"",preAmount:"",payableAmount:"",offsetAmount:"",moedAmount:"",pendingManageDto:{categoryUuid:[],categoryName:"不限制流水类别",isManualWriteOff:!1},deductedAmount:"",reduceAmount:"",beReduceTax:!1,relationCategoryUuid:"",relationCategoryName:"请选择处理类别",usedStock:!1,warehouseCardList:[{cardUuid:"",code:"",name:"",warehouseStatus:"WAREHOUSE_STATUS_FROM"},{cardUuid:"",code:"",name:"",warehouseStatus:"WAREHOUSE_STATUS_TO"}],needUsedPoundage:!1,poundageCurrent:!1,poundageProject:!1,includesPoundage:!1,poundageCurrentCardList:[],poundageProjectCardList:[],stockCardOtherList:[{amount:""}],usedCarryoverProject:!1,carryoverProjectCardList:[],beMoed:!1,relationObj:{propertyCostList:[]},inputTax:!0,taxTotal:"",shareType:"0"},projectList:[],currentList:[],stockList:[],warehouseList:[],categoryList:[{uuid:"",childList:[]}],warehouseListTydj:[],carryoverProject:[],poundageCurrentList:[],poundageProjectList:[],poundageCurrentRange:[],poundageProjectRange:[],enclosureList:[],label:[],commonCardList:[],stockCategoryList:[],currentCategoryList:[],commonCurrentList:[],projectCategoryList:[],commonProjectList:[],cardAllList:{assemblyList:[],commonAssemblyList:[],warehouseList:[],stockCardList:[],warehouseCardList:[],projectShareType:[],batchList:[],serialList:[]}})},956:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var n=s(a(1738)),l=s(a(1802)),r=s(a(1259)),o=s(a(1303)),i=s(a(1260)),c=s(a(1261)),u=s(a(186));function s(e){return e&&e.__esModule?e:{default:e}}var d={editRunningState:l.default,relativeConfState:r.default,inventoryConfState:o.default,projectConfState:i.default,accountConfigState:c.default,previewEnclosureState:u.default};t.reducer=d,t.view=n.default}}]);