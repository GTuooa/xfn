(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{1072:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelReviewedJvlist=t.reviewedJvlist=t.changeData=t.setFjglData=t.pushVouhcerToLrpzReducer=t.reverseVcList=t.sortAndChangeVcId=t.cancelChangeVcCheckBoxDisplay=t.changeVcCheckBoxDisplay=t.selectVcAll=t.selectVc=t.pagingVc=t.deleteVcFetch=t.getSortVcFetch=t.getVcListFetch=t.getPeriodAndVcListFetch=void 0;var n,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(13),o=a(24),i=(n=o)&&n.__esModule?n:{default:n},u=f(a(181)),c=f(a(1077)),l=f(a(10)),d=f(a(25));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.getPeriodAndVcListFetch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(a){l.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("pagindvc","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(5,2):"",pageSize:20,currentPage:t+1,getPeriod:"true"}),function(n){if((0,r.showMessage)(n)){l.toast.hide();var s=a(u.everyTableGetPeriod(n)),o=e||s;n.data.jsonArray;a({type:c.AFTER_PAGING_VC,receivedData:n,issuedate:o,currentPage:t})}})}},t.getVcListFetch=function(e){return function(t){var a=e.substring(0,7);l.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("getvclist","POST",JSON.stringify((0,r.jsonifyDate)(e)),function(e){(0,r.showMessage)(e)&&(l.toast.hide(),t({type:c.GET_VC_LIST_FETCH,receivedData:e,issuedate:a}))})}},t.getSortVcFetch=function(e,t){return function(a){0!=t&&(l.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("sortvc","POST",JSON.stringify({year:e.substr(0,4),month:e.substr(5,2),sort:t}),function(t){(0,r.showMessage)(t,"show",800)&&a(m(e))}))}},t.deleteVcFetch=function(e){return function(t,a){var n=e.get("vclist").filter(function(e){return e.get("selected")}).some(function(e){return e.get("enclosurecount")})?"凭证下存在附件,附件也将被删除":"确定删除吗";l.Confirm({message:n,title:"提示",buttonLabels:["取消","确定"],onSuccess:function(a){if(1===a.buttonIndex){var n=e.get("vclist"),s=e.get("vclist").filter(function(e){return e.get("selected")}).map(function(e){return e.get("vcindex")}),o=n.size===s.size;l.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("deletevc","POST",JSON.stringify({year:e.getIn(["vclist",0,"year"]),month:e.getIn(["vclist",0,"month"]),vcindexlist:s,action:"QUERY_VC-DELETE_VC-BATCH_DELETE"}),function(a){if((0,r.showMessage)(a)){if(t({type:c.DELETE_VC_FETCH,receivedData:a}),(0,i.default)("getperiod","GET","",function(e){(0,r.showMessage)(e)&&(l.toast.hide(),t({type:c.GET_PERIOD_FETCH,receivedData:e}))}),o){var n=e.getIn(["vclist",0,"year"])+"-"+e.getIn(["vclist",0,"month"]);t(m(n))}t(g())}})}},onFail:function(e){return alert(e)}})}};var m=t.pagingVc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3];return function(o,u){var f=(0,r.jsonifyDate)(e),m=e.substring(0,7),g=u().cxpzState,b=g.get("searchContentType"),y=g.get("condition");!a&&l.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("pagindvc","POST",JSON.stringify(s({},f,{pageSize:20,currentPage:t+1,searchContentType:b,condition:y})),function(e){!a&&l.toast.hide(),(0,r.showMessage)(e)&&(a&&n.setState({isLoading:!1}),o({type:c.AFTER_PAGING_VC,receivedData:e,issuedate:m,currentPage:t}))})}},g=(t.selectVc=function(e){return{type:c.SELECT_VC,idx:e}},t.selectVcAll=function(){return{type:c.SELECT_VC_ALL}},t.changeVcCheckBoxDisplay=function(e){return{type:c.CHANGE_ALL_VC_CHECKBOX_DISPLAY,idx:e}},t.cancelChangeVcCheckBoxDisplay=function(){return{type:c.CANCEL_CHANGE_VC_CHECKBOX_DISPALY}});t.sortAndChangeVcId=function(){return{type:c.SORT_AND_CHANGE_VC_ID}},t.reverseVcList=function(){return{type:c.REVERSE_VC_LIST}},t.pushVouhcerToLrpzReducer=function(e){return{type:c.PUSH_VOUCHER_TO_LRPZ_REDUCER,voucher:e}},t.setFjglData=function(){return function(e,t){var a=t().cxpzState.get("issuedate");e({type:c.CHANGE_FJGL_ISSUEDATE,issuedate:a})}},t.changeData=function(e,t){return{type:c.CXPZ_CHANGE_DATA,dataType:e,value:t}},t.reviewedJvlist=function(e){return function(t,a){var n=a().cxpzState.get("vclist"),s=e.split("-"),o=[];n.forEach(function(e){e.get("selected")&&!e.get("reviewedby")&&o.push(e.get("vcindex"))}),l.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("reviewvc","POST",JSON.stringify({year:s[0],month:s[1],vcindexlist:o,action:"QUERY_VC-AUDIT"}),function(a){(0,r.showMessage)(a)&&(l.toast.hide(),0==a.data.success&&l.Alert(a.data.failList.join("、")),t(m(e)))})}},t.cancelReviewedJvlist=function(e){return function(t,a){var n=a().cxpzState.get("vclist"),s=e.split("-"),o=[];n.forEach(function(e){e.get("selected")&&e.get("reviewedby")&&o.push(e.get("vcindex"))}),l.toast.loading("加载中...",0),(0,i.default)("backreviewvc","POST",JSON.stringify({year:s[0],month:s[1],vcindexlist:o,action:"QUERY_VC-CANCEL_AUDIT"}),function(a){(0,r.showMessage)(a)&&(l.toast.hide(),0==a.data.success&&l.Alert(a.data.failList.join("、")),t(m(e)))})}}},1077:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_CXPZ="INIT_CXPZ",t.GET_VC_LIST_FETCH="GET_VC_LIST_FETCH",t.DELETE_VC_FETCH="DELETE_VC_FETCH",t.CHANGE_ALL_VC_CHECKBOX_DISPLAY="CHANGE_ALL_VC_CHECKBOX_DISPLAY",t.CANCEL_CHANGE_VC_CHECKBOX_DISPALY="CANCEL_CHANGE_VC_CHECKBOX_DISPALY",t.SELECT_VC_ALL="SELECT_VC_ALL",t.SELECT_VC="SELECT_VC",t.REVERSE_VC_LIST="REVERSE_VC_LIST",t.AFTER_PAGING_VC="AFTER_PAGING_VC",t.CXPZ_CHANGE_DATA="CXPZ_CHANGE_DATA",t.PUSH_VOUCHER_TO_LRPZ_REDUCER="PUSH_VOUCHER_TO_LRPZ_REDUCER",t.GET_PERIOD_FETCH="GET_PERIOD_FETCH",t.CHANGE_FJGL_ISSUEDATE="CHANGE_FJGL_ISSUEDATE"},1275:function(e,t,a){},1323:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initMxAssObj=t.getAmountMxTerrByAss=t.getAmountMxByAss=t.changeShortData=t.changeData=t.getVcFetch=t.getAmountMxbSubsidiaryLedgerFetch=t.getAmountMxbAclist=void 0;var n,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(13),o=a(9),i=a(24),u=(n=i)&&n.__esModule?n:{default:n},c=g(a(1324)),l=g(a(184)),d=a(1072),f=g(a(25)),m=g(a(10));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.getAmountMxbAclist=function(e,t,a,n){return function(s){var o=""+e.substr(0,4)+e.substr(5,2),i=t?""+t.substr(0,4)+t.substr(5,2):o;m.toast.loading(f.LOADING_TIP_TEXT,0),(0,u.default)("getmxbaclist","POST",JSON.stringify({begin:o,end:i,needCount:"true"}),function(o){(0,r.showMessage)(o)&&(m.toast.hide(),s({type:c.GET_AMOUNT_MXB_ACLIST,receivedData:o}),s(b(e,t,a,n)))})}};var b=t.getAmountMxbSubsidiaryLedgerFetch=function(e,t,a,n,s){return function(o){var i=n?n.split(f.TREE_JOIN_STR):[],l=""+e.substr(0,4)+e.substr(5,2),d=t?""+t.substr(0,4)+t.substr(5,2):l;m.toast.loading(f.LOADING_TIP_TEXT,0),(0,u.default)("getsubsidiaryledger","POST",JSON.stringify({begin:l,end:d,acid:a,asscategory:n?i[0]:"",assid:n?i[1]:""}),function(n){(0,r.showMessage)(n)&&(m.toast.hide(),o({type:c.GET_AMOUNT_MXB_SUBSIDIARY_LEDGER_FETCH,receivedData:n.data.numberDetails,issuedate:e,endissuedate:t,currentAcid:a,currentAss:s||""}),o(y(["views","queryByAss"],!1)))})}},y=(t.getVcFetch=function(e,t,a,n){return function(o){var i=(0,r.jsonifyDate)(e);m.toast.loading(f.LOADING_TIP_TEXT,0),(0,u.default)("getvc","POST",JSON.stringify(s({},i,{vcindex:t})),function(e){(0,r.showMessage)(e)&&(m.toast.hide(),sessionStorage.setItem("lrpzHandleMode","modify"),o((0,d.pushVouhcerToLrpzReducer)(e.data)),sessionStorage.setItem("router-from","amountmxb"),a.push("/lrpz"),o(l.setVcList(n)),o(l.setCkpzIsShow(!0)))})}},t.changeData=function(e,t){return{type:c.CHANGE_DATA_AMOUNTMXB,dataType:e,value:t}}),A=t.changeShortData=function(e,t){return{type:c.CHANGE_SHORT_DATA_AMOUNTMXB,dataType:e,value:t}};t.getAmountMxByAss=function(e,t){return function(a,n){var i=""+e.substr(0,4)+e.substr(5,2),c=t?""+t.substr(0,4)+t.substr(5,2):i,l=n().amountMxbState.get("mxAssObj").toJS();m.toast.loading(f.LOADING_TIP_TEXT,0),(0,u.default)("getAmountMxByAss","POST",JSON.stringify(s({begin:i,end:c},l)),function(n){(0,r.showMessage)(n)&&(m.toast.hide(),a(y(["views","queryByAss"],!0)),a(A("issuedate",e)),a(A("endissuedate",t)),a(A("ledger",(0,o.fromJS)(n.data))),a(y(["views","currentPage"],1)))})}},t.getAmountMxTerrByAss=function(e,t){return function(a,n){var s=""+e.substr(0,4)+e.substr(5,2),i=t?""+t.substr(0,4)+t.substr(5,2):s,c=n().amountMxbState.get("mxAssObj").toJS();(0,u.default)("getAmountMxTerrByAss","POST",JSON.stringify({begin:s,end:i,assCategory:c.assCategory}),function(e){(0,r.showMessage)(e)&&function(){var t=[],n=[{uuid:"",name:"全部",assid:"",assname:"全部"}],s=!0,r=!1,i=void 0;try{for(var u,l=e.data[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var d=u.value;if(d.assid==c.assId){d.acDtoList.forEach(function(e){e.childList=[],e.key=e.acid,e.label=e.acid+" "+e.acfullname,e.acid==c.acId&&e.assList.forEach(function(e){e.uuid=e.assid,e.name=e.assname,e.disabled=!!e.disableTime,n.push(e)})}),t=d.acDtoList;break}}}catch(e){r=!0,i=e}finally{try{!s&&l.return&&l.return()}finally{if(r)throw i}}t.unshift({acid:"",acname:"全部科目",key:"",label:"全部科目",childList:[],assList:[]}),a(A("acTree",(0,o.fromJS)(t))),a(A("assTree",(0,o.fromJS)(n)))}()})}},t.initMxAssObj=function(){return function(e){e(y(["mxAssObj","acId"],"")),e(y(["mxAssObj","acName"],"全部科目")),e(y(["mxAssObj","assCategoryTwo"],"")),e(y(["mxAssObj","assIdTwo"],"")),e(y(["mxAssObj","assNameTwo"],"全部"))}}},1324:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_AMOUNTMXB="INIT_AMOUNTMXB",t.GET_AMOUNT_MXB_ACLIST="GET_AMOUNT_MXB_ACLIST",t.GET_AMOUNT_MXB_SUBSIDIARY_LEDGER_FETCH="GET_AMOUNT_MXB_SUBSIDIARY_LEDGER_FETCH",t.CHANGE_DATA_AMOUNTMXB="CHANGE_DATA_AMOUNTMXB",t.CHANGE_SHORT_DATA_AMOUNTMXB="CHANGE_SHORT_DATA_AMOUNTMXB"},1429:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAmountAssTwoTree=t.getAmountKmTree=t.changeShortData=t.changeData=t.initAmountYeb=t.toggleLowerAmountYeb=t.getAmountKmyebListFetch=t.getPeriodAndCountListFetch=void 0;var n,s=a(13),r=a(24),o=(n=r)&&n.__esModule?n:{default:n},i=d(a(181)),u=d(a(1586)),c=d(a(25)),l=d(a(10));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.getPeriodAndCountListFetch=function(){return function(e){l.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)("getCountList","POST",JSON.stringify({year:"",month:"",getPeriod:"true"}),function(t){if((0,s.showMessage)(t)){l.toast.hide();var a=e(i.everyTableGetPeriod(t)),n={data:t.data.jsonArray};e(f(n,a,"")),e(g("assCategoryList",t.data.assCategoryList))}})}},t.getAmountKmyebListFetch=function(e,t,a,n){return function(r,i){var u=i().amountYebState.get("assObject"),d="",m={},g=!1;if(t){d="getMoreCountList",g=!0;var b=e?e.substr(0,4):"",y=e?e.substr(5,2):"";m={beginYear:b,beginMonth:y,endYear:t?t.substr(0,4):b,endMonth:t?t.substr(5,2):y},a&&(d="getMoreAmountKmyueList",g=!1,m.assObject={assCategory:u.get("assCategory"),queryBySingleAc:u.get("queryBySingleAc"),acId:u.get("acId")}),n&&(d="getAmountAssTwoKmyueList",g=!1,m.assObject.assSecondCategory=u.get("assSecondCategory"),m.assObject.secondAssKey=u.get("secondAssKey"))}else d="getCountList",g=!0,m={year:e?e.substr(0,4):"",month:e?e.substr(5,2):""},a&&(d="getAmountKmyueList",g=!1,m.assObject={assCategory:u.get("assCategory"),queryBySingleAc:u.get("queryBySingleAc"),acId:u.get("acId")}),n&&(d="getAmountAssTwoKmyueList",g=!1,m.beginYear=e?e.substr(0,4):"",m.beginMonth=e?e.substr(5,2):"",m.endYear="",m.endMonth="",m.assObject.assSecondCategory=u.get("assSecondCategory"),m.assObject.secondAssKey=u.get("secondAssKey"));l.toast.loading(c.LOADING_TIP_TEXT,0),(0,o.default)(d,"POST",JSON.stringify(m),function(a){(0,s.showMessage)(a)&&(l.toast.hide(),r(f(a,e,t,g)))})}};var f=function(e,t,a,n){return function(s){s({type:u.GET_PERIOD_AND_COUNT_LIST_FETCH,receivedData:n?e.data.baList:e.data,issuedate:t,endissuedate:a})}},m=(t.toggleLowerAmountYeb=function(e,t){return{type:u.TOGGLE_LOWER_AMOUNTYEB,acid:e,queryByAss:t}},t.initAmountYeb=function(){return{type:u.INIT_AMOUNTYEB}},t.changeData=function(e,t){return{type:u.CHANGE_DATA_AMOUNTYEB,dataType:e,value:t}}),g=t.changeShortData=function(e,t){return{type:u.CHANGE_SHORT_DATA_AMOUNTYEB,dataType:e,value:t}};t.getAmountKmTree=function(e,t,a){return function(n){var r=e?e.substr(0,4):"",i=e?e.substr(5,2):"",u=t?t.substr(0,4):r,c=t?t.substr(5,2):i;n(m(["assObject","acId"],"")),n(m(["assObject","acKey"],"")),n(m(["assObject","acName"],"全部科目")),(0,o.default)("getAmountKmTree","POST",JSON.stringify({begin:""+r+i,end:""+u+c,assCategory:a}),function(e){if((0,s.showMessage)(e)){var t=[{key:"",label:"全部科目",acid:"",acname:"全部科目",ackey:"",childList:[]}];e.data.forEach(function(e){e.key=e.acid,e.label=e.acid+" "+e.acname,e.childList=[],t.push(e)}),n(g("acTree",t))}})}},t.getAmountAssTwoTree=function(e,t,a,n,r){return function(i){var u=e?e.substr(0,4):"",c=e?e.substr(5,2):"",l=t?t.substr(0,4):u,d=t?t.substr(5,2):c;i(m(["assObject","secondAssKey"],"")),i(m(["assObject","secondAssName"],"全部")),i(m(["assObject","secondAssId"],"")),(0,o.default)("getAmountAssTwoTree","POST",JSON.stringify({begin:""+u+c,end:""+l+d,assCategory:a,acId:n,acKey:r}),function(e){if((0,s.showMessage)(e)){var t=[{uuid:"",name:"全部",asskey:"",assname:"全部"}];e.data.assList.forEach(function(e){e.uuid=e.asskey,e.name=e.assname,t.push(e)}),i(m(["assObject","assSecondCategory"],e.data.assCategory)),i(g("assTree",t))}})}}},1430:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments[1];return((e={},r(e,s.INIT_AMOUNTMXB,function(){return o}),r(e,s.GET_AMOUNT_MXB_ACLIST,function(){return t.set("amountmxbAclist",(0,n.fromJS)(a.receivedData.data))}),r(e,s.GET_AMOUNT_MXB_SUBSIDIARY_LEDGER_FETCH,function(){return t.update("issuedate",function(e){return a.issuedate}).update("ledger",function(e){return e.merge((0,n.fromJS)(a.receivedData))}).set("currentAcid",a.currentAcid).set("currentAss",a.currentAss).set("endissuedate",a.endissuedate).setIn(["views","currentPage"],1)}),r(e,s.CHANGE_DATA_AMOUNTMXB,function(){return t.setIn(a.dataType,a.value)}),r(e,s.CHANGE_SHORT_DATA_AMOUNTMXB,function(){return t.set(a.dataType,a.value)}),e)[a.type]||function(){return t})()};var n=a(9),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1324));function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=(0,n.fromJS)({views:{queryByAss:!1,currentPage:1},issuedate:"",endissuedate:"",currentAcid:"",currentAss:"",mxAssObj:{assCategory:"",assId:"",assName:"",acId:"",acName:"",assCategoryTwo:"",assIdTwo:"",assNameTwo:""},acTree:[],assTree:[],amountmxbAclist:[],ledger:{acfullname:"",acid:"",acname:"",acunit:"",acunitOpen:"",assid:"",assname:"",begincount:0,closeingprice:0,closingDirection:"",closingbalance:0,closingcount:0,credit:0,creditcount:0,creditprice:0,debit:0,debitcount:0,debitprice:0,direction:"",openingDirection:"",openingbalance:"",openingprice:"",jvlist:[]}})},1586:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_AMOUNTYEB="INIT_AMOUNTYEB",t.GET_PERIOD_AND_COUNT_LIST_FETCH="GET_PERIOD_AND_COUNT_LIST_FETCH",t.TOGGLE_LOWER_AMOUNTYEB="TOGGLE_LOWER_AMOUNTYEB",t.CHANGE_AMOUNT_YEB_BEGIN_DATE="CHANGE_AMOUNT_YEB_BEGIN_DATE",t.CHANGE_DATA_AMOUNTYEB="CHANGE_DATA_AMOUNTYEB",t.CHANGE_SHORT_DATA_AMOUNTYEB="CHANGE_SHORT_DATA_AMOUNTYEB"},2300:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=g(a(0)),o=a(31),i=(m(a(25)),a(9),m(a(10))),u=a(123),c=a(16),l=m(a(1429));a(1275),a(2301);var d=g(a(2303)),f=(g(a(2304)),m(a(181)));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=(0,o.connect)(function(e){return e})(n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.scrollerHeight=0,b(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),s(t,[{key:"componentDidMount",value:function(){i.setTitle({title:"数量余额表"}),i.setIcon({showIcon:!1}),"home"===sessionStorage.getItem("prevPage")&&(sessionStorage.removeItem("prevPage"),this.props.dispatch(l.initAmountYeb()),this.props.dispatch(l.getPeriodAndCountListFetch()));var e=document.getElementsByClassName("scroll-view")[0];this.scrollerHeight=Number(window.getComputedStyle(e).height.replace("px",""))}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.allState,s=t.amountYebState,o=t.history,i=n.get("issues"),m=s.get("issuedate"),g=s.get("endissuedate"),b=s.get("amountYebList"),y=s.get("amountYebChildShow"),A=s.get("assChildShow"),_=i.findIndex(function(e){return e.get("value")===m}),E=i.slice(0,_),p=n.getIn(["systemInfo","unitDecimalCount"]),h=s.getIn(["views","queryByAss"]),T=[{key:"科目",value:"ac"}];n.get("assTags").map(function(e,t){return T.push({key:e,value:t})});var v=s.get("assObject"),C=v.get("assCategory"),O=v.get("acId"),N=v.get("acName"),S=v.get("assSecondCategory"),w=v.get("secondAssKey"),I=v.get("secondAssName"),P=v.get("secondAssId"),L=v.get("queryBySingleAc"),M=s.get("acTree").toJS(),D=s.get("assTree").toJS(),j=function(e,t){h&&(a(l.getAmountKmTree(e,t,C)),a(l.getAmountAssTwoTree(e,t,C,"","")))},B=g||m,G=function(){return function(e){return e(f.allExportDo("excelcountBa",{beginYear:m.substr(0,4),beginMonth:m.substr(5,2),endYear:B.substr(0,4),endMonth:B.substr(5,2)}))}},x=function(){return function(e){return e(f.allExportDo("pdfCountBa",{beginYear:m.substr(0,4),beginMonth:m.substr(5,2),endYear:B.substr(0,4),endMonth:B.substr(5,2)}))}};h&&(G=function(){return function(e){return e(f.allExportDo("excelcountBaByAss",{beginYear:m.substr(0,4),beginMonth:m.substr(5,2),endYear:B.substr(0,4),endMonth:B.substr(5,2),assCategory:C,assSecondCategory:S,secondAssKey:w,acId:O,acName:N,queryBySingleAc:L}))}},x=function(){return function(e){return e(f.allExportDo("pdfCountBaByAss",{beginYear:m.substr(0,4),beginMonth:m.substr(5,2),endYear:B.substr(0,4),endMonth:B.substr(5,2),assCategory:C,assCategoryTwo:S,acId:O,assIdTwo:P,assId:""}))}}),a(f.navigationSetMenu("lrb",x,G));var H=Math.ceil(b.size/20),R=s.getIn(["views","currentPage"]);return r.default.createElement(c.Container,{className:"kmyeb amountyeb"},r.default.createElement(u.TopMonthPicker,{issuedate:m,source:i,callback:function(e){j(e,g),a(l.getAmountKmyebListFetch(e,g,h))},onOk:function(e){j(e.value,g),a(l.getAmountKmyebListFetch(e.value,g,h))},showSwitch:!0,endissuedate:g,nextperiods:E,onBeginOk:function(e){j(e.value,""),a(l.getAmountKmyebListFetch(e.value,"",h))},onEndOk:function(e){j(m,e.value),a(l.getAmountKmyebListFetch(m,e.value,h))},changeEndToBegin:function(){j(m,""),a(l.getAmountKmyebListFetch(m,"",h))}}),r.default.createElement(c.Row,{className:"amountyeb-search"},r.default.createElement(c.Single,{className:"amountyeb-asscategory",district:T,value:v.get("assKey"),onOk:function(e){a(l.changeData(["assObject","assKey"],e.value)),a(l.changeData(["assObject","assCategory"],e.label)),"ac"==e.value?(a(l.getAmountKmyebListFetch(m,g,!1)),a(l.changeData(["views","queryByAss"],!1))):(a(l.changeData(["views","queryByAss"],!0)),a(l.getAmountKmTree(m,g,e.label)),a(l.getAmountAssTwoTree(m,g,e.label,"","")),a(l.getAmountKmyebListFetch(m,g,!0)))}},r.default.createElement(c.Row,{className:"ass-category"},r.default.createElement("span",{className:"overElli"},v.get("assCategory")),r.default.createElement(c.Icon,{type:"triangle"}))),h?r.default.createElement(c.ChosenPicker,{className:"amountyeb-asscategory more-ass",type:"card",district:M,cardList:D,onChange:function(e){var t=e.acid,n=e.ackey;a(l.changeData(["assObject","acId"],t)),a(l.changeData(["assObject","acKey"],n)),a(l.changeData(["assObject","acName"],e.acname)),a(t?l.changeData(["assObject","queryBySingleAc"],!0):l.changeData(["assObject","queryBySingleAc"],!1)),a(l.getAmountAssTwoTree(m,g,C,t,n)),a(l.getAmountKmyebListFetch(m,g,h))},onOk:function(e){a(l.changeData(["assObject","secondAssKey"],e[0].asskey)),a(l.changeData(["assObject","secondAssName"],e[0].assname)),a(l.changeData(["assObject","secondAssId"],e[0].assId)),a(l.getAmountKmyebListFetch(m,g,h,!0))},value:O,cardValue:[w]},r.default.createElement(c.Row,{className:"ass-category"},r.default.createElement("span",{className:"overElli"},O+" "+N,w?"-"+I:""),r.default.createElement(c.Icon,{type:"triangle"}))):null),r.default.createElement(c.Row,{className:"ba-title"},r.default.createElement("div",{className:"ba-title-item"},"期初余额"),r.default.createElement("div",{className:"ba-title-item"},"本期借方"),r.default.createElement("div",{className:"ba-title-item"},"本期贷方"),r.default.createElement("div",{className:"ba-title-item"},"期末余额")),r.default.createElement(c.ScrollView,{flex:"1",uniqueKey:"Amountkmyeb-scroll",savePosition:!0,onScroll:function(t){t.target.scrollTop+100+e.scrollerHeight>=1842*R&&R<H&&a(l.changeData(["views","currentPage"],R+1))}},r.default.createElement("div",{className:"ba-list"},b.slice(0,20*R).map(function(e,t){var n="",s="",i="",u=!1,c="down",l=!e.get("assid")&&!e.get("asscategory")||y.some(function(t){return e.get("acid").indexOf(t)>-1})?"":"none";e.get("assid")?(n="assid",i="ba-ass",s=e.get("assid")+"_"+e.get("assname")):!e.get("assid")&&e.get("asscategory")?(n="asscategory",i="ba-ass",s=e.get("asscategory")):(n="acid",s=e.get("acid")+"_"+e.get("acfullname"),u=!!e.get("asslist")&&!!e.get("asslist").size,c=y.indexOf(e.get("acid"))>-1);var f={assCategory:C,assId:e.get("assId"),assName:e.get("assName"),acId:O,acName:N,assCategoryTwo:S,assIdTwo:P,assNameTwo:I};return h&&(n="asscategory",i="",s=e.get("assId")+"_"+e.get("assName"),u=!(!e.get("baAcList")||!e.get("baAcList").size),c=A.indexOf(e.get("assId"))>-1)?r.default.createElement("div",{key:t},r.default.createElement(d.default,{baItem:e,style:{display:l},dispatch:a,issuedate:m,endissuedate:g,idAndName:s,assClassName:i,hasSub:u,isExpanded:c,type:n,history:o,className:e.get("disableTime")?"amount-item-disable":"",unitDecimalCount:p,queryByAss:h,mxAssObj:f}),e.get("baAcList").map(function(n,s){return r.default.createElement(d.default,{key:t+"-"+s,baItem:n,style:{display:""},dispatch:a,issuedate:m,endissuedate:g,idAndName:n.get("acId")+"_"+n.get("acFullName"),assClassName:"ba-ass",hasSub:!1,isExpanded:!1,type:"acid",history:o,className:e.get("disableTime")?"amount-item-disable":"",unitDecimalCount:p,queryByAss:h,mxAssObj:f})})):r.default.createElement(d.default,{key:t,baItem:e,style:{display:l},dispatch:a,issuedate:m,endissuedate:g,idAndName:s,assClassName:i,hasSub:u,isExpanded:c,type:n,history:o,className:e.get("disableTime")?"amount-item-disable":"",unitDecimalCount:p,queryByAss:h,mxAssObj:f})}))))}}]),t}())||n;t.default=y},2301:function(e,t,a){},2303:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(s=o)&&s.__esModule?s:{default:s},u=a(9),c=a(22),l=a(16),d=g(a(25)),f=g(a(1429)),m=g(a(1323));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var b=(0,c.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.baItem,a=e.dispatch,n=e.issuedate,s=e.endissuedate,r=e.idAndName,o=e.assClassName,c=e.hasSub,g=e.isExpanded,b=e.style,y=e.type,A=e.className,_=e.history,E=e.unitDecimalCount,p=e.queryByAss,h=e.mxAssObj,T=t.get("assid")?t.get("asscategory")+d.TREE_JOIN_STR+t.get("assid"):"",v="credit"==t.get("openingDirection"),C="credit"==t.get("closingDirection");if(p){var O=v?-t.get("openingPrice"):t.get("openingPrice"),N=C?-t.get("closingPrice"):t.get("closingPrice"),S=v?-t.get("openingCount"):t.get("openingCount"),w=C?-t.get("closingCount"):t.get("closingCount");return i.default.createElement("div",{style:b,className:[o?"ba "+o:"ba",A].join(" "),onClick:function(){return c&&a(f.toggleLowerAmountYeb(t.get("assId"),p))}},i.default.createElement("div",null,i.default.createElement("span",{className:"name name-asscategory",onClick:function(e){e.stopPropagation(),sessionStorage.setItem("previousPage","amountYeb"),"acid"==y&&(h.acId=t.get("acId"),h.acName=t.get("acFullName")),a(m.changeShortData("mxAssObj",(0,u.fromJS)(h))),a(m.getAmountMxTerrByAss(n,s)),a(m.getAmountMxByAss(n,s)),_.push("/amountmxb")}},r),i.default.createElement("span",{className:"btn"},i.default.createElement(l.Icon,{type:"arrow-down",style:{display:c?"":"none",transform:g?"rotate(180deg)":""}}))),i.default.createElement("div",{className:"ba-info ba-info-color"},i.default.createElement("span",{className:"amountyeb-ba-info"},i.default.createElement("span",{className:"amountyeb-ba-number"},"数量"),i.default.createElement(l.Amount,{className:"amountyeb-number-color",showZero:!0,decimalPlaces:E},S)),i.default.createElement(l.Amount,{showZero:!0,decimalPlaces:E},t.get("debitCount")),i.default.createElement(l.Amount,{showZero:!0,decimalPlaces:E},t.get("creditCount")),i.default.createElement(l.Amount,{showZero:!0,decimalPlaces:E},w)),i.default.createElement("div",{className:"ba-info ba-info-color"},i.default.createElement("span",{className:"amountyeb-ba-info"},i.default.createElement("span",{className:"amountyeb-ba-number"},"单价"),i.default.createElement(l.Amount,{className:"amountyeb-number-color",showZero:!0},Math.abs(t.get("openingUnitPrice")))),i.default.createElement(l.Amount,null),i.default.createElement(l.Amount,null),i.default.createElement(l.Amount,{showZero:!0},Math.abs(t.get("closingUnitPrice")))),i.default.createElement("div",{className:"ba-info"},i.default.createElement(l.Amount,{showZero:!0},O),i.default.createElement(l.Amount,{showZero:!0},t.get("debitPrice")),i.default.createElement(l.Amount,{showZero:!0},t.get("creditPrice")),i.default.createElement(l.Amount,{showZero:!0},N)))}return i.default.createElement("div",{style:b,className:[o?"ba "+o:"ba",A].join(" ")},i.default.createElement("div",null,i.default.createElement("span",{className:"asscategory"===y?"name name-asscategory":"name",onClick:function(e){"asscategory"!==y&&(sessionStorage.setItem("previousPage","amountYeb"),a(m.getAmountMxbAclist(n,s,t.get("acid"),T)),_.push("/amountmxb"))}},r),i.default.createElement("span",{className:"btn",onClick:function(){return c&&a(f.toggleLowerAmountYeb(t.get("acid")))}},i.default.createElement(l.Icon,{type:"arrow-down",style:{visibility:c?"visible":"hidden",transform:g?"rotate(180deg)":""}}))),i.default.createElement("div",{className:"ba-info ba-info-color",onClick:function(){return c&&a(f.toggleLowerAmountYeb(t.get("acid")))}},i.default.createElement("span",{className:"amountyeb-ba-info"},i.default.createElement("span",{className:"amountyeb-ba-number"},"数量"),i.default.createElement(l.Amount,{className:"amountyeb-number-color",showZero:!0,decimalPlaces:E},v?-t.get("beginCount"):t.get("beginCount"))),i.default.createElement(l.Amount,{showZero:!0,decimalPlaces:E},t.get("debitCount")),i.default.createElement(l.Amount,{showZero:!0,decimalPlaces:E},t.get("creditCount")),i.default.createElement(l.Amount,{showZero:!0,decimalPlaces:E},C?-t.get("closingCount"):t.get("closingCount"))),i.default.createElement("div",{className:"ba-info ba-info-color",onClick:function(){return c&&a(f.toggleLowerAmountYeb(t.get("acid")))}},i.default.createElement("span",{className:"amountyeb-ba-info"},i.default.createElement("span",{className:"amountyeb-ba-number"},"单价"),i.default.createElement(l.Amount,{className:"amountyeb-number-color",showZero:!0},Math.abs(t.get("openingPrice")))),i.default.createElement(l.Amount,null),i.default.createElement(l.Amount,null),i.default.createElement(l.Amount,{showZero:!0},Math.abs(t.get("closingPrice")))),i.default.createElement("div",{className:"ba-info",onClick:function(){return c&&a(f.toggleLowerAmountYeb(t.get("acid")))}},i.default.createElement(l.Amount,{showZero:!0},v?-t.get("openingbalance"):t.get("openingbalance")),i.default.createElement(l.Amount,{showZero:!0},t.get("debit")),i.default.createElement(l.Amount,{showZero:!0},t.get("credit")),i.default.createElement(l.Amount,{showZero:!0},C?-t.get("closingbalance"):t.get("closingbalance"))))}}]),t}())||n;t.default=b},2304:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(s=o)&&s.__esModule?s:{default:s},u=(a(9),a(22)),c=a(16),l=m(a(25)),d=m(a(1429)),f=m(a(1323));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var g=(0,u.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.baItem,a=e.dispatch,n=e.issuedate,s=e.endissuedate,r=e.idAndName,o=e.assClassName,u=e.hasSub,m=e.isExpanded,g=e.style,b=e.type,y=e.className,A=e.history,_=e.unitDecimalCount,E=t.get("assId")?t.get("assCategory")+l.TREE_JOIN_STR+t.get("assId"):"";return i.default.createElement("div",{style:g,className:[o?"ba "+o:"ba",y].join(" ")},i.default.createElement("div",null,i.default.createElement("span",{className:"assCategory"===b?"name name-assCategory":"name",onClick:function(e){"assCategory"!==b&&(sessionStorage.setItem("previousPage","amountYeb"),a(f.getAmountMxbAclist(n,s,t.get("assId"),E)),A.push("/amountmxb"))}},r),i.default.createElement("span",{className:"btn",onClick:function(){return u&&a(d.toggleLowerAmountYeb(t.get("assId")))}},i.default.createElement(c.Icon,{type:"arrow-down",style:{visibility:u?"visible":"hidden",transform:m?"rotate(180deg)":""}}))),i.default.createElement("div",{className:"ba-info ba-info-color",onClick:function(){return u&&a(d.toggleLowerAmountYeb(t.get("assId")))}},i.default.createElement("span",{className:"amountyeb-ba-info"},i.default.createElement("span",{className:"amountyeb-ba-number"},"数量"),i.default.createElement(c.Amount,{className:"amountyeb-number-color",showZero:!0,decimalPlaces:_},t.get("openingCount"))),i.default.createElement(c.Amount,{showZero:!0,decimalPlaces:_},t.get("debitCount")),i.default.createElement(c.Amount,{showZero:!0,decimalPlaces:_},t.get("creditCount")),i.default.createElement(c.Amount,{showZero:!0,decimalPlaces:_},t.get("closingCount"))),i.default.createElement("div",{className:"ba-info ba-info-color",onClick:function(){return u&&a(d.toggleLowerAmountYeb(t.get("assId")))}},i.default.createElement("span",{className:"amountyeb-ba-info"},i.default.createElement("span",{className:"amountyeb-ba-number"},"单价"),i.default.createElement(c.Amount,{className:"amountyeb-number-color",showZero:!0},t.get("openingUnitPrice"))),i.default.createElement(c.Amount,null),i.default.createElement(c.Amount,null),i.default.createElement(c.Amount,{showZero:!0},t.get("closingUnitPrice"))),i.default.createElement("div",{className:"ba-info",onClick:function(){return u&&a(d.toggleLowerAmountYeb(t.get("assId")))}},i.default.createElement(c.Amount,{showZero:!0},t.get("openingPrice")),i.default.createElement(c.Amount,{showZero:!0},t.get("debitPrice")),i.default.createElement(c.Amount,{showZero:!0},t.get("creditPrice")),i.default.createElement(c.Amount,{showZero:!0},t.get("closingPrice"))))}}]),t}())||n;t.default=g},2305:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments[1];return((e={},r(e,s.INIT_AMOUNTYEB,function(){return o}),r(e,s.GET_PERIOD_AND_COUNT_LIST_FETCH,function(){return t.set("issuedate",a.issuedate).set("endissuedate",a.endissuedate).set("amountYebList",(0,n.fromJS)(a.receivedData)).setIn(["views","currentPage"],1)}),r(e,s.TOGGLE_LOWER_AMOUNTYEB,function(){if(a.queryByAss){var e=t.get("assChildShow");return e.indexOf(a.acid)>-1?t.update("assChildShow",function(e){return e.map(function(e){return e.indexOf(a.acid)>-1?"":e}).filter(function(e){return!!e})}):t.update("assChildShow",function(e){return e.push(a.acid)})}var n=t.get("amountYebChildShow");return n.indexOf(a.acid)>-1?t.update("amountYebChildShow",function(e){return e.map(function(e){return e.indexOf(a.acid)>-1?"":e}).filter(function(e){return!!e})}):t.update("amountYebChildShow",function(e){return e.push(a.acid)})}),r(e,s.CHANGE_AMOUNT_YEB_BEGIN_DATE,function(){return t=a.bool?t.set("endissuedate",a.begin):t.set("issuedate",a.begin)}),r(e,s.CHANGE_DATA_AMOUNTYEB,function(){return t.setIn(a.dataType,a.value)}),r(e,s.CHANGE_SHORT_DATA_AMOUNTYEB,function(){return t.set(a.dataType,(0,n.fromJS)(a.value))}),e)[a.type]||function(){return t})()};var n=a(9),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1586));function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=(0,n.fromJS)({views:{queryByAss:!1,currentPage:1},issuedate:"",endissuedate:"",amountYebList:[],amountYebChildShow:[],assChildShow:[],assObject:{assCategory:"科目",assKey:"ac",queryBySingleAc:!1,assSecondCategory:"",secondAssKey:"",secondAssName:"全部",secondAssId:"",acId:"",acName:"全部科目",acKey:""},acTree:[{key:"",label:"全部科目",acid:"",acname:"全部科目",ackey:"",childList:[]}],assTree:[{uuid:"",name:"全部",asskey:"",assname:"全部"}],assCategoryList:[]})},976:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var n=o(a(2300)),s=o(a(2305)),r=o(a(1430));function o(e){return e&&e.__esModule?e:{default:e}}var i={amountYebState:s.default,amountMxbState:r.default};t.reducer=i,t.view=n.default}}]);