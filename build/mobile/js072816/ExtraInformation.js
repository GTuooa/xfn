(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{1084:function(e,t,n){},1383:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_EXTRA_INFORMATION="INIT_EXTRA_INFORMATION",t.SET_EXTRA_INFORMATION_LIST="SET_EXTRA_INFORMATION_LIST",t.CHANGE_EXTRA_INFO_LIST_DELETE_TYOPE="CHANGE_EXTRA_INFO_LIST_DELETE_TYOPE",t.SET_EXTRA_INFO_DELETE_LIST="SET_EXTRA_INFO_DELETE_LIST",t.EMPTY_EXTRA_INFO_DELETE_LIST="EMPTY_EXTRA_INFO_DELETE_LIST",t.CHANGE_EXTRA_INFO_NAME="CHANGE_EXTRA_INFO_NAME",t.CHANGE_EXTRA_INFO_NUMERATOR="CHANGE_EXTRA_INFO_NUMERATOR",t.CHANGE_DENOMINATOR_VALUE="CHANGE_DENOMINATOR_VALUE",t.CHANGE_DENOMINATOR_NAME="CHANGE_DENOMINATOR_NAME",t.CHANGE_EXTRA_INFO_ENABLE_TYPE="CHANGE_EXTRA_INFO_ENABLE_TYPE",t.SET_EXTAR_INFO_INIT_DATA="SET_EXTAR_INFO_INIT_DATA",t.SET_EXTAR_INFO_INIT_ISCHANGE="SET_EXTAR_INFO_INIT_ISCHANGE",t.SET_EXTAR_INFO_INIT_ISDEFUALT="SET_EXTAR_INFO_INIT_ISDEFUALT"},1428:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteExtraMessage=t.updateExtraMessage=t.setNewExtraMessage=t.setExtraInfoIsDefualt=t.setExtraInfoIsChange=t.setExtraInfoInitData=t.changeSettingEnable=t.changeDenominatorName=t.changeDenomiatorValue=t.changeNumerator=t.changeName=t.emptyDeleteList=t.setDeleteList=t.changeExtraInfoListType=t.getExtraInformationList=void 0;var a=l(n(188));n(189);var o=u(n(1383)),r=l(n(24)),i=(u(n(181)),n(13));u(n(25)),u(n(10));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}var s=t.getExtraInformationList=function(){return function(e,t){var n=t().homeState.getIn(["data","userInfo"]).get("sobInfo"),a=n.get("newJr"),u=!!n&&(n.get("moduleInfo").indexOf("RUNNING")>-1&&a);(0,r.default)(u?"getJrExtraMessage":"getSelfTypeListExtraMessage","GET","",function(t){(0,i.showMessage)(t)&&e({type:o.SET_EXTRA_INFORMATION_LIST,data:t.data})})}};t.changeExtraInfoListType=function(e){return function(t){t({type:o.CHANGE_EXTRA_INFO_LIST_DELETE_TYOPE,value:e})}},t.setDeleteList=function(e){return function(t,n){t({type:o.SET_EXTRA_INFO_DELETE_LIST,id:e})}},t.emptyDeleteList=function(){return function(e){e({type:o.EMPTY_EXTRA_INFO_DELETE_LIST})}},t.changeName=function(e){return function(t){t({type:o.CHANGE_EXTRA_INFO_NAME,name:e})}},t.changeNumerator=function(e){return function(t){t({type:o.CHANGE_EXTRA_INFO_NUMERATOR,value:e})}},t.changeDenomiatorValue=function(e){return function(t){t({type:o.CHANGE_DENOMINATOR_VALUE,value:e})}},t.changeDenominatorName=function(e){return function(t){t({type:o.CHANGE_DENOMINATOR_NAME,value:e})}},t.changeSettingEnable=function(e){return function(t){t({type:o.CHANGE_EXTRA_INFO_ENABLE_TYPE,bool:e})}},t.setExtraInfoInitData=function(e){return function(t){t({type:o.SET_EXTAR_INFO_INIT_DATA,name:e?e.name:"",denominatorName:e?e.denominatorName:"",denominatorValue:e?e.denominatorValue:"",enable:!!e&&e.enable,numerator:e?e.numerator:1,id:e?e.id:""})}},t.setExtraInfoIsChange=function(e){return function(t){t({type:o.SET_EXTAR_INFO_INIT_ISCHANGE,bool:e})}},t.setExtraInfoIsDefualt=function(e){return function(t){t({type:o.SET_EXTAR_INFO_INIT_ISDEFUALT,bool:e})}},t.setNewExtraMessage=function(e){return function(t,n){var o=n().extraInformationState,u=o.get("name"),l=o.get("denominatorName"),s=o.get("denominatorValue"),E=o.get("enable"),f=o.get("numerator"),_=n().homeState.getIn(["data","userInfo"]).get("sobInfo"),c=_.get("newJr"),I=!!_&&(_.get("moduleInfo").indexOf("RUNNING")>-1&&c);(0,r.default)(I?"setJrNewExtraMessage":"setNewExtraMessage","POST",JSON.stringify({name:u,denominatorName:l,denominatorValue:s,enable:E,numerator:f}),function(t){(0,i.showMessage)(t)&&(a.default.info("操作成功",1),e.goBack())})}},t.updateExtraMessage=function(e){return function(t,n){var o=n().extraInformationState,u=o.get("name"),l=o.get("denominatorName"),s=o.get("denominatorValue"),E=o.get("enable"),f=o.get("numerator"),_=o.get("id"),c=n().homeState.getIn(["data","userInfo"]).get("sobInfo"),I=c.get("newJr"),N=!!c&&(c.get("moduleInfo").indexOf("RUNNING")>-1&&I);(0,r.default)(N?"updateJrExtraMessage":"updateExtraMessage","POST",JSON.stringify({name:u,denominatorName:l,denominatorValue:s,enable:E,numerator:f,id:_}),function(t){(0,i.showMessage)(t)&&(a.default.info("操作成功",1),e.goBack())})}},t.deleteExtraMessage=function(){return function(e,t){var n=t().extraInformationState.get("deleteList"),u=t().homeState.getIn(["data","userInfo"]).get("sobInfo"),l=u.get("newJr"),E=!!u&&(u.get("moduleInfo").indexOf("RUNNING")>-1&&l);(0,r.default)(E?"deleteJrExtraMessage":"deleteExtraMessage","POST",JSON.stringify({idList:n}),function(t){(0,i.showMessage)(t)&&(a.default.info("操作成功",1),e({type:o.CHANGE_EXTRA_INFO_LIST_DELETE_TYOPE,value:!1}),e({type:o.EMPTY_EXTRA_INFO_DELETE_LIST}),e(s()))})}}},2277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=c(n(193)),r=c(n(188)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(194),n(189);var u=c(n(0)),l=(n(9),n(31)),s=n(16),E=_(n(10)),f=(_(n(181)),_(n(1428)));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}n(2278),n(1084);var I=(0,l.connect)(function(e){return e})(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={visible:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),i(t,[{key:"componentDidMount",value:function(){E.setTitle({title:"附加信息设置"}),E.setIcon({showIcon:!1}),this.props.dispatch(f.getExtraInformationList())}},{key:"render",value:function(){var e=this,t=this.props,n=t.extraInformationState,a=(t.allState,t.dispatch),i=t.history,l=n.get("informationList"),E=n.get("onDeleted"),_=n.get("deleteList");return u.default.createElement(s.Container,{className:"extraInformation"},u.default.createElement(s.ScrollView,{flex:"1"},l.map(function(e){return u.default.createElement("div",{className:"config-list-item-wrap-style",key:e.id,onClick:function(){E?["人均营收","人均利润","坪效"].includes(e.name)||e.enable?["人均营收","人均利润","坪效"].includes(e.name)?r.default.info("默认项不可删除",1):e.enable&&r.default.info("已启用项不可删除",1):a(f.setDeleteList(e.id)):(a(f.setExtraInfoIsChange(!0)),a(f.setExtraInfoInitData(e)),["人均营收","人均利润","坪效"].includes(e.name)?a(f.setExtraInfoIsDefualt(!0)):a(f.setExtraInfoIsDefualt(!1)),i.push("./extraInformationSetting"))}},u.default.createElement("div",{className:"config-list-item-style"},u.default.createElement("span",{className:"config-list-item-checkbox-style",style:{display:E?"":"none"}},u.default.createElement(s.Checkbox,{className:"checkbox",checked:_.indexOf(e.id)>-1})),u.default.createElement("span",{className:"config-list-item-info-style"},e.name),u.default.createElement("span",{className:"config-list-item-arrow-style"},e.enable?"已启用":"未启用",u.default.createElement(s.Icon,{type:"arrow-right"}))))})),u.default.createElement(s.ButtonGroup,{style:{display:E?"":"none"}},u.default.createElement(s.Button,{onClick:function(){a(f.emptyDeleteList()),a(f.changeExtraInfoListType(!1))}},u.default.createElement(s.Icon,{type:"cancel",size:"15"}),u.default.createElement("span",null,"取消")),u.default.createElement(s.Button,{disabled:!_.size>0,onClick:function(){e.setState({visible:!0})}},u.default.createElement(s.Icon,{type:"delete",size:"15"}),u.default.createElement("span",null,"删除"))),u.default.createElement(s.ButtonGroup,{style:{display:E?"none":""}},u.default.createElement(s.Button,{onClick:function(){a(f.setExtraInfoIsChange(!1)),a(f.setExtraInfoIsDefualt(!1)),a(f.setExtraInfoInitData()),i.push("./extraInformationSetting")}},u.default.createElement(s.Icon,{type:"add-plus",size:"15"}),u.default.createElement("span",null,"新增")),u.default.createElement(s.Button,{onClick:function(){a(f.changeExtraInfoListType(!0))}},u.default.createElement(s.Icon,{type:"select",size:"15"}),u.default.createElement("span",null,"选择"))),u.default.createElement(o.default,{transparent:!0,title:"确认删除吗?",visible:this.state.visible,onClose:function(){e.setState({visible:!1})},footer:[{text:"取消",onPress:function(){e.setState({visible:!1})}},{text:"确认",onPress:function(){e.setState({visible:!1}),a(f.deleteExtraMessage())}}]}))}}]),t}())||a;t.default=I},2278:function(e,t,n){},2280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,n=arguments[1];return((e={},r(e,o.INIT_EXTRA_INFORMATION,function(){return i}),r(e,o.SET_EXTRA_INFORMATION_LIST,function(){return t.set("informationList",n.data)}),r(e,o.CHANGE_EXTRA_INFO_LIST_DELETE_TYOPE,function(){return t.set("onDeleted",n.value)}),r(e,o.SET_EXTRA_INFO_DELETE_LIST,function(){var e=t.get("deleteList").toJS(),o=e.findIndex(function(e){return e===n.id});return o>-1?e.splice(o,1):e.push(n.id),t.set("deleteList",(0,a.fromJS)(e))}),r(e,o.EMPTY_EXTRA_INFO_DELETE_LIST,function(){return t.set("deleteList",(0,a.fromJS)([]))}),r(e,o.CHANGE_EXTRA_INFO_NAME,function(){return t.set("name",n.name)}),r(e,o.CHANGE_EXTRA_INFO_NUMERATOR,function(){return t.set("numerator",n.value)}),r(e,o.CHANGE_DENOMINATOR_VALUE,function(){return t.set("denominatorValue",n.value)}),r(e,o.CHANGE_DENOMINATOR_NAME,function(){return t.set("denominatorName",n.value)}),r(e,o.CHANGE_EXTRA_INFO_ENABLE_TYPE,function(){return t.set("enable",n.bool)}),r(e,o.SET_EXTAR_INFO_INIT_DATA,function(){return t.set("name",n.name).set("denominatorName",n.denominatorName).set("denominatorValue",n.denominatorValue).set("enable",n.enable).set("numerator",n.numerator).set("id",n.id)}),r(e,o.SET_EXTAR_INFO_INIT_ISCHANGE,function(){return t.set("isChange",n.bool)}),r(e,o.SET_EXTAR_INFO_INIT_ISDEFUALT,function(){return t.set("isDefault",n.bool)}),e)[n.type]||function(){return t})()};var a=n(9),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1383));function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=(0,a.fromJS)({informationList:[],onDeleted:!1,deleteList:[],id:"",name:"",denominatorName:"",denominatorValue:"",enable:!1,numerator:1,isChange:!1,isDefault:!1})},972:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=o(n(2277));function o(e){return e&&e.__esModule?e:{default:e}}var r={extraInformationState:o(n(2280)).default};t.reducer=r,t.view=a.default}}]);