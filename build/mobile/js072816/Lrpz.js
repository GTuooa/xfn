(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{1214:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments[1];return((e={},i(e,r.INIT_LRPZ,function(){return c.set("year",t.get("year")).set("month",t.get("month")).set("vcdate",t.get("vcdate")).set("vcindex",t.get("vcindex"))}),i(e,r.SET_CKPZ_IS_SHOW,function(){return t.setIn(["flags","showckpz"],n.bool)}),i(e,r.CHANGE_SELECT_COMPONENT_DISPLAY,function(){return t.updateIn(["flags","selectComponentDisplay"],function(e){return!e})}),i(e,r.SELECT_JV,function(){return t.setIn(["flags","jvSelectedIdx"],n.idx)}),i(e,r.INSERT_JV,function(){var e=s(t),a=e.getIn(["flags","debitTotal"])-e.getIn(["flags","creditTotal"]);return s(t.update("jvlist",function(e){return e.insert(n.idx+1,e.get(n.idx).update("jvdirection",function(e){return a>0?"credit":"debit"}).set("jvamount",Math.abs(a).toFixed(2)-0||"").set("acid","").set("acname","").set("acfullname","").set("asslist",[]).set("acunitOpen","0").set("jvcount","").set("price","").set("jvunit","").set("fcStatus","0").set("fcNumber","").set("exchange","").set("standardAmount",""))}))}),i(e,r.DELETE_JV,function(){return s(t.get("jvlist").size>1?t.deleteIn(["jvlist",n.idx]):t)}),i(e,r.DELETE_JV_ALL,function(){return s(t.update("jvlist",function(e){return e.clear()}))}),i(e,r.CHANGE_VC_ID,function(){return t.set("vcindex",Number(n.vcindex))}),i(e,r.CHANGE_JV_ABSTRACT,function(){return t.setIn(["jvlist",n.idx,"jvabstract"],n.jvabstract)}),i(e,r.CHANGE_JV_ACID_AND_ACNAME_AND_ASSCATEGORYLIST,function(){var e=n.asscategorylist.map(function(e){return(0,a.fromJS)({assid:"",assname:"",asscategory:e})});return t.updateIn(["jvlist",n.idx],function(t){return t.set("acid",n.acid).set("acfullname",n.acfullname).set("acname",n.acname).set("asslist",e)})}),i(e,r.CHANGE_JV_AMOUNT,function(){return(/^[-\d]\d*\.?\d{0,2}$/g.test(n.jvamount)||""===n.jvamount)&&(t=s(t=t.setIn(["jvlist",n.idx,"jvamount"],n.jvamount))),t}),i(e,r.CHANGE_JV_DIRECTION,function(){return s(t.updateIn(["jvlist",n.idx,"jvdirection"],function(e){return"credit"==e?"debit":"credit"}))}),i(e,r.CHANGE_JV_ASSID_AND_ASSNAME,function(){return t.updateIn(["jvlist",n.idx,"asslist"],function(e){return e.map(function(e){return e.get("asscategory")==n.asscategory?e.set("assid",n.assid).set("assname",n.assname):e})})}),i(e,r.PUSH_VOUCHER_TO_LRPZ_REDUCER,function(){if(!n.voucher)return t;var e=(0,a.fromJS)(n.voucher);return s(t.merge(e).set("oldvcindex",e.get("vcindex")).set("oldyear",e.get("year")).set("oldmonth",e.get("month")).set("oldvcdate",e.get("vcdate")))}),i(e,r.GET_LAST_VC_ID_FETCH,function(){return t.set("month",n.vcdate.getMonth()).set("year",n.vcdate.getYear()).set("vcdate",n.vcdate.toString()).set("vcindex",n.receivedData.data)}),i(e,r.MODIFY_VCDATE,function(){t.get("oldvcdate");var e=n.date;return t.set("vcdate",e.toString())}),i(e,r.ENTER_JVITEM_FETCH,function(){n.data;return"modify"===sessionStorage.getItem("lrpzHandleMode")&&(t=t.setIn(["flags","showckpz"],!0)),"insert"===sessionStorage.getItem("lrpzHandleMode")&&(t=t.set("createdtime",n.createdtime).set("createdby",n.createdby)),n.refresh&&(t=s(t.set("jvlist",c.get("jvlist")).set("vcindex",n.NewVcIndex))),t.set("vckey",0).set(["flags","locked",""])}),i(e,r.REVIEWED_JVLIST,function(){return t.set("reviewedby",n.reviewedby)}),i(e,r.CANCEL_REVIEWED_JVLIST,function(){return t.set("reviewedby","")}),i(e,r.DRAFT_SAVE_FETCH,function(){return t.set("vckey",n.receivedData)}),i(e,r.GET_DRAFT_ITEM_FETCH,function(){return s((t=n.judgeLocked?c.set("vcindex",n.receivedData+1).set("vcdate",n.vcDate.toString()).set("year",n.vcDate.getYear()).set("month",n.vcDate.getMonth()):c.set("vcindex",n.getDraftItem.vcindex).set("vcdate",n.getDraftItem.vcdate).set("year",n.getDraftItem.year).set("month",n.getDraftItem.month)).set("jvlist",(0,a.fromJS)(n.getDraftItem.jvlist)).set("vckey",n.getDraftItem.vckey).set("enclosureCountUser",n.getDraftItem.enclosureCountUser).setIn(["flags","locked"],n.getDraftItem.locked).setIn(["flags","showckpz"],!0))}),i(e,r.LRPZ_LOCE_DRAFT,function(){return t.setIn(["flags","locked"],"1")}),i(e,r.LRPZ_UN_LOCE_DRAFT,function(){return t.setIn(["flags","locked"],"0")}),i(e,r.GET_AMOUNT_DATA,function(){return(t=t.setIn(["jvlist",n.idx,"jvunit"],n.receivedData.acunit).setIn(["jvlist",n.idx,"acunitOpen"],n.receivedData.acunitOpen).setIn(["jvlist",n.idx,"jvcount"],"")).getIn(["jvlist",n.idx,"jvdirection"])||(t=t.setIn(["jvlist",n.idx,"jvdirection"],n.receivedData.direction)),t=0==n.receivedData.price?t.setIn(["jvlist",n.idx,"price"],""):t.setIn(["jvlist",n.idx,"price"],n.receivedData.price)}),i(e,r.CHANGE_JV_COUNT,function(){new RegExp("^[-\\d]\\d*\\.?\\d{0,"+Number(n.unitDecimalCount)+"}$","g");return Number(n.jvCount)>1e6||Number(n.jvCount)<-1e6?alert("数量不能超过"+o.LRPZ_COUNT_LENGTH+"位"):t.setIn(["jvlist",n.idx,"jvcount"],n.jvCount)}),i(e,r.CHANGE_JV_PRICE,function(){return/^[-\d]\d*\.?\d{0,2}$/g.test(n.jvPrice)||""===n.jvPrice?(Number(n.jvPrice)<0&&(alert("单价不允许为负数"),n.jvPrice=-Number(n.jvPrice)),Number(n.jvPrice)>1e9||Number(n.jvPrice)<-1e9?alert("单价不能超过"+o.LRPZ_PRICE_LENGTH+"位"):t.setIn(["jvlist",n.idx,"price"],n.jvPrice)):t}),i(e,r.AUTO_CALCULATE,function(){var e=t.getIn(["jvlist",n.idx,"price"]),a=t.getIn(["jvlist",n.idx,"jvcount"]),r=t.getIn(["jvlist",n.idx,"jvamount"]);if("count"==n.value||"price"==n.value)if(Number(a)&&Number(e))Number(r)<0&&a?a=-Math.abs(a):Number(r)>0&&a&&(a=Math.abs(a)),a=Number(a)%1==0?Math.floor(a):parseFloat(Number(a).toFixed(2)),e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),t=t.setIn(["jvlist",n.idx,"price"],e).setIn(["jvlist",n.idx,"jvcount"],a).setIn(["jvlist",n.idx,"jvamount"],(a*e).toFixed(2));else if(""==e&&a&&r)e=r/a,e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),t=t.setIn(["jvlist",n.idx,"price"],e);else if(""==a&&e&&r)a=parseFloat((r/e).toFixed(n.unitDecimalCount)),Number(a)%1==0&&(a=Math.floor(a)),t=t.setIn(["jvlist",n.idx,"jvcount"],a);else{if(0==a||!r)return t;e=r/a,e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),t=t.setIn(["jvlist",n.idx,"price"],e)}else if("amount"==n.value){if(!a||!r)return t;Number(r)<0&&a?a=-Math.abs(a):Number(r)>0&&a&&(a=Math.abs(a)),e=r/a,e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),t=t.setIn(["jvlist",n.idx,"price"],e).setIn(["jvlist",n.idx,"jvcount"],a)}return s(t)}),i(e,r.CLEAR_AC_UNIT_OPEN,function(){return t.setIn(["jvlist",n.idx,"acunitOpen"],"0")}),i(e,r.GET_FJ_DATA,function(){if(!n.receivedData)return t;var e=(0,a.fromJS)(n.receivedData);return s(t.merge(e).set("oldvcindex",e.get("vcindex")).set("oldyear",e.get("year")).set("oldmonth",e.get("month")).set("oldvcdate",e.get("vcdate")))}),i(e,r.CHANGE_ENCLOSURE_LIST,function(){var e=[];return t.get("enclosureList").map(function(t){e.push(t)}),n.imgArr.forEach(function(t){e.push(t)}),e=e.slice(0,9),t=t.set("enclosureList",(0,a.fromJS)(e)).set("enclosureCountUser",e.length)}),i(e,r.DELETE_UPLOAD_IMG_URL,function(){return t.get("enclosureList").map(function(e,a){a==n.index&&(t=t.deleteIn(["enclosureList",a]))}),t=t.set("enclosureCountUser",t.get("enclosureList").size)}),i(e,r.GET_UPLOAD,function(){return t=t.set("enclosureList",(0,a.fromJS)(n.receivedData))}),i(e,r.CHANGE_VC_ENCLOSURE_COUNT_USER,function(){return t.set("enclosureCountUser",n.value)}),i(e,r.GET_LABEL_FETCH,function(){var e=[];return n.receivedData.data.forEach(function(t,n){e.push({key:t,value:n})}),t=t.set("label",e)}),i(e,r.CHANGE_TAG_NAME,function(){return t.get("enclosureList").map(function(e,a){a==n.index&&(t=t.setIn(["enclosureList",a,"label"],n.value))}),t}),i(e,r.GET_FC_LIST_DATA_FETCH,function(){var e=(0,a.fromJS)(n.receivedData),r=[];e.map(function(e,t){return r.push(e.get("fcNumber"))});var o=e.filter(function(e){return"1"==e.get("standard")}),l=o.getIn([0,"fcNumber"]),i=o.getIn([0,"exchange"]);return"modify"!=n.idx&&(t=t.setIn(["jvlist",n.idx,"fcStatus"],"1").setIn(["jvlist",n.idx,"fcNumber"],l).setIn(["jvlist",n.idx,"exchange"],i).setIn(["jvlist",n.idx,"jvdirection"],"debit")),t.setIn(["flags","currencyList"],e).setIn(["flags","currencyListArr"],r)}),i(e,r.CLEAR_FC_LIST_DATA,function(){return t.setIn(["jvlist",n.idx,"fcStatus"],"0").setIn(["jvlist",n.idx,"fcNumber"],"").setIn(["jvlist",n.idx,"exchange"],"").setIn(["jvlist",n.idx,"standardAmount"],"")}),i(e,r.CHANGE_JV_NUMBER,function(){return t.setIn(["jvlist",n.idx,"fcNumber"],n.fcNumber).setIn(["jvlist",n.idx,"exchange"],n.exchange)}),i(e,r.CHANGE_JV_EXCHANGE,function(){return/^\d*\.?\d{0,4}$/g.test(n.value)||""===n.value?t.setIn(["jvlist",n.idx,"exchange"],n.value):t}),i(e,r.CHANGE_JV_STANDARDAMOUNT,function(){return/^[-\d]\d*\.?\d{0,2}$/g.test(n.value)||""===n.value?t.setIn(["jvlist",n.idx,"standardAmount"],n.value):t}),i(e,r.AUTO_CALCULATE_ALL,function(){var e=t.getIn(["jvlist",n.idx,"price"]),a=t.getIn(["jvlist",n.idx,"jvcount"]),r=t.getIn(["jvlist",n.idx,"standardAmount"]),o=t.getIn(["jvlist",n.idx,"exchange"]),l=t.getIn(["jvlist",n.idx,"jvamount"]);return e&&a&&r&&o?"count"==n.value?(a=u(a,l),r=u(r,l),l=(a*e).toFixed(2),o=l/r):"price"==n.value?(l=(a*e).toFixed(2),o=l/r):"standardAmount"==n.value?(a=u(a,l),r=u(r,l),l=(r*o).toFixed(2),e=l/a):"exchange"==n.value?(l=(r*o).toFixed(2),e=l/a):"amount"==n.value&&(a=u(a,l),r=u(r,l),l&&(e=Number(l)/a,o=Number(l)/r)):"count"==n.value||"price"==n.value?(Number(a)&&e?(a=u(a,l),l=(Number(a)*e).toFixed(2)):""==e&&a&&l?e=l/a:0!=a&&l?e=l/a:t=t,Number(r)&&(o=l/r)):"standardAmount"==n.value||"exchange"==n.value?(Number(r)&&o?(r=u(r,l),l=(Number(r)*o).toFixed(2)):""==o&&r&&l?(o=(o=l/r)%1==0?Math.floor(o):parseFloat(o.toFixed(4)),t=t.setIn(["jvlist",n.idx,"exchange"],o)):r&&l&&(o=l/r),Number(a)&&(e=l/a)):"amount"==n.value&&(a=u(a,l),r=u(r,l),l&&(!r&&a?e=Number(l)/a:r&&!a?o=Number(l)/r:r&&a&&(e=Number(l)/a,o=Number(l)/r))),a=Number(a)%1==0?Math.floor(a):parseFloat(Number(a).toFixed(n.unitDecimalCount)),r=Number(r)%1==0?Math.floor(r):parseFloat(Number(r).toFixed(2)),e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),o=Number(o)%1==0?Math.floor(o):parseFloat(Number(o).toFixed(4)),s(t=t.setIn(["jvlist",n.idx,"standardAmount"],0===r?"":r).setIn(["jvlist",n.idx,"exchange"],o).setIn(["jvlist",n.idx,"price"],e).setIn(["jvlist",n.idx,"jvcount"],a).setIn(["jvlist",n.idx,"jvamount"],l))}),i(e,r.SET_LRPX_VCLIST,function(){return t.set("vcList",n.vcList)}),e)[n.type]||function(){return t})()};var a=n(9),r=(l(n(10)),n(13),l(n(1223))),o=l(n(25));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=(0,a.fromJS)({flags:{selectComponentDisplay:!1,jvSelectedIdx:0,debitTotal:"0.00",creditTotal:"0.00",showckpz:!1,vcindexList:[],vcIdx:0,locked:"",currencyList:[],currencyListArr:[]},oldvcindex:"",oldyear:"",oldmonth:"",oldvcdate:"",vcindex:"",year:"",month:"",vcdate:"",createdtime:"",modifiedtime:"",createdby:"",exchange:"",closeby:"",reviewedby:"",enclosureCountUser:"",jvlist:[{jvdirection:"debit",jvabstract:"",acid:"",acname:"",acfullname:"",jvamount:"",asslist:[],acunitOpen:"0",jvcount:"",price:"",jvunit:"",fcStatus:"0",fcNumber:"",exchange:"",standardAmount:""}],vckey:0,enclosureList:[],label:[],needDeleteUrl:[],vcList:[]});function s(e){var t=0,n=0;return e.get("jvlist").map(function(e){"credit"===e.get("jvdirection")?t+=Number(e.get("jvamount")):"debit"===e.get("jvdirection")&&(n+=Number(e.get("jvamount")))}),e=(e=e.setIn(["flags","creditTotal"],t?t.toFixed(2).toString():"0.00")).setIn(["flags","debitTotal"],n?n.toFixed(2).toString():"0.00")}function u(e,t){return Number(t)<0&&e?-Math.abs(e):Number(t)>0&&e?Math.abs(e):e}},1640:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,o,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=N(n(0)),c=n(31),s=_(n(1230)),u=_(n(184)),d=_(n(181)),f=_(n(1393)),m=n(48),v=n(16),p=N(n(1641)),g=N(n(1642)),y=N(n(1643)),h=N(n(190)),b=N(n(1644)),E=_(n(10)),I=n(123),j=n(9),x=n(13);function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function N(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(1645);var S=(0,c.connect)(function(e){return e})((o=r=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),l=0;l<r;l++)o[l]=arguments[l];return n=a=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.state={autoEncode:"true",codeRepeatModal:!1,showAcSelect:!1,selestStatus:{acid:"",index:"",acunitOpen:"0"}},C(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),l(t,[{key:"componentDidMount",value:function(){if(E.setIcon({showIcon:!1}),"home"===sessionStorage.getItem("prevPage")){sessionStorage.removeItem("prevPage"),sessionStorage.setItem("lrpzHandleMode","insert");var e=this.props.allState.get("period"),t=e.get("openedyear"),n=e.get("openedmonth"),a=new Date,r=a.getFullYear(),o=a.getMonth()+1,l="";if(t){var i=new Date(t,n,0),c=new Date;l=r==t&&o==n?c:i}else l=new Date;this.props.dispatch(u.initLrpz()),this.props.dispatch(u.getLastVcIdFetch(l)),this.props.dispatch(u.setCkpzIsShow(!1))}sessionStorage.setItem("prevPage","cxpz");var d=this.props.homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]),f=!d||d.indexOf("ENCLOSURE_GL")>-1,v="TRUE"===this.props.homeState.getIn(["data","userInfo","checkMoreFj"]);f&&v&&this.props.dispatch(s.initLabel()),this.props.dispatch(m.homeActions.setDdConfig())}},{key:"componentWillUnmount",value:function(){sessionStorage.removeItem("router-from")}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,a=t.lrpzState,r=t.allState,o=t.cxpzState,l=t.kmmxbState,c=t.assMxbState,m=t.dispatch,_=t.amountMxbState,N=t.homeState,C=t.cxAccountState,S=t.currencyMxbState,k=this.state,A=k.autoEncode,w=k.codeRepeatModal,O=k.showAcSelect,D=k.selestStatus,T=N.getIn(["permissionInfo","Pz"]),L=N.getIn(["data","userInfo","sobInfo"]),F=!!L&&L.get("moduleInfo").indexOf("RUNNING")>-1,M=T.getIn(["edit","permission"]),P=T.getIn(["review","permission"]),z=r.getIn(["systemInfo","unitDecimalCount"]),R=a.get("jvlist"),U=R.size,J=a.get("vcindex"),B=a.get("vcdate"),H=a.get("enclosureCountUser"),V=!!a.get("closedby"),G=!!a.get("reviewedby"),Y=a.getIn(["flags","showckpz"]),K=a.getIn(["flags","currencyList"]);if(Y&&"cxpz"===sessionStorage.getItem("router-from")||Y&&"lrpz"===sessionStorage.getItem("router-from")||Y&&"mxb"===sessionStorage.getItem("router-from")||Y&&"assmxb"===sessionStorage.getItem("router-from")||Y&&sessionStorage.getItem("from-cxls")){E.setTitle({title:"查看凭证"});var Z=F?function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(r){return r(d.allExportDo("cxpzpdfexport",{year:ee,month:te,vcIndexList:[J],needA4:e,needCreatedby:t,needReviewedBy:n,reviewedBy:a}))}}:function(e,t,n){return function(a){return a(d.allExportDo("cxpzpdfexport",{year:ee,month:te,vcIndexList:[J],needA4:e,needCreatedby:t,needAss:n}))}};m(d.navigationSetMenu("PDF-vc",Z))}else"modify"===sessionStorage.getItem("lrpzHandleMode")?(E.setTitle({title:"修改凭证"}),E.setRight({show:!1})):"draft"===sessionStorage.getItem("enterDraft")&&"insert"===sessionStorage.getItem("lrpzHandleMode")?(E.setTitle({title:"查看草稿"}),E.setRight({show:!1})):(E.setTitle({title:"录入凭证"}),E.setRight({show:!1}),m(u.setCkpzIsShow(!1)));var $=R.size>1,W=a.get("flags").get("jvSelectedIdx"),X=r.get("acasslist"),q=r.get("aclist"),Q=R.get(W),ee=(Q.get("acid"),Q.get("acname"),r.get("cascadeDataAclist"),a.get("year")),te=a.get("month"),ne=a.get("vckey"),ae=a.getIn(["flags","locked"]),re=(sessionStorage.getItem("lrpzHandleMode"),Y?"draft"===sessionStorage.getItem("enterDraft")?i.default.createElement(v.ButtonGroup,{style:{backgroundColor:"#F8F8F8",display:Y?"":"none"}},i.default.createElement(v.Button,{key:"usage",disabled:!M,style:{display:"1"==ae?"":"none"},onClick:function(){var e="",t=r.getIn(["period","openedyear"]),n=r.getIn(["period","openedmonth"]),a=new Date,o=a.getFullYear(),l=a.getMonth()+1;if(ee){var i=new Date(t,n,0),c=new Date;e=o==t&&l==n?c:i}else e=new Date;sessionStorage.setItem("router-from",""),sessionStorage.setItem("lrpzHandleMode","insert"),sessionStorage.removeItem("enterDraft"),m(u.setCkpzIsShow(!1)),m(u.getLastVcIdFetch(e))}},i.default.createElement(v.Icon,{type:"usage"}),i.default.createElement("span",null,"使用")),i.default.createElement(v.Button,{key:"lock-open",disabled:!M,style:{display:"1"==ae?"":"none"},onClick:function(){m(s.unLockDraft(ne))}},i.default.createElement(v.Icon,{type:"lock-open"}),i.default.createElement("span",null,"解锁")),i.default.createElement(v.Button,{key:"usaged",disabled:!M,style:{display:"1"==ae?"none":""},onClick:function(){sessionStorage.setItem("router-from",""),sessionStorage.setItem("lrpzHandleMode","insert"),sessionStorage.removeItem("enterDraft"),m(u.setCkpzIsShow(!1))}},i.default.createElement(v.Icon,{type:"usage"}),i.default.createElement("span",null,"用掉")),i.default.createElement(v.Button,{key:"delete",disabled:!M,style:{display:"1"==ae?"none":""},onClick:function(){sessionStorage.removeItem("enterDraft"),m(s.deleteDraft(ne,n))}},i.default.createElement(v.Icon,{type:"delete"}),i.default.createElement("span",null,"删除")),i.default.createElement(v.Button,{key:"lock-close",disabled:!M,style:{display:"1"==ae?"none":""},onClick:function(){m(s.lockDraft(ne))}},i.default.createElement(v.Icon,{type:"lock-close"}),i.default.createElement("span",null,"锁定"))):i.default.createElement(v.ButtonGroup,{style:{backgroundColor:"#F8F8F8",display:Y?"":"none"}},i.default.createElement(v.Button,{key:"modification",disabled:!M||G,onClick:function(){m(u.setCkpzIsShow(!1)),R.some(function(e){return e.get("fcNumber")})&&m(s.getFCListDataFetch("modify"))}},i.default.createElement(v.Icon,{style:V?{color:"#d9d9d9"}:void 0,type:"modification"}),i.default.createElement("span",{style:V?{color:"#d9d9d9"}:void 0},"修改")),i.default.createElement(v.Button,{key:"delete",disabled:!M||G,onClick:function(){m(s.deletePz(ee,te,J,n))}},i.default.createElement(v.Icon,{style:V?{color:"#d9d9d9"}:void 0,type:"delete"}),i.default.createElement("span",{style:V?{color:"#d9d9d9"}:void 0},"删除")),i.default.createElement(v.Button,{key:"shenhe",disabled:!P,style:{display:G?"none":""},onClick:function(){return m(s.reviewedJvlist(ee,te,J))}},i.default.createElement(v.Icon,{style:V?{color:"#d9d9d9"}:void 0,type:"shenhe"}),i.default.createElement("span",{style:V?{color:"#d9d9d9"}:void 0},"审核")),i.default.createElement(v.Button,{key:"chexiao",disabled:!P,style:{display:G?"":"none"},onClick:function(){return m(s.cancelReviewedJvlist(ee,te,J))}},i.default.createElement(v.Icon,{style:V?{color:"#d9d9d9"}:void 0,type:"chexiao"}),i.default.createElement("span",{style:V?{color:"#d9d9d9"}:void 0},"反审核")),i.default.createElement(v.Button,{key:"locked",disabled:!M||G,onClick:function(){sessionStorage.setItem("lrpzHandleMode","insert"),sessionStorage.removeItem("enterDraft"),sessionStorage.removeItem("router-from");var e="",t=new Date,n=""+t.getFullYear(),a=t.getMonth()+1,o=""+(a>10?a:"0"+a),l=r.getIn(["period","openedyear"]),i=r.getIn(["period","openedmonth"]);e=n==l&&o==i?new Date:new Date(l,i,0),m(u.initLrpz()),m(u.getLastVcIdFetch(e)),m(u.setCkpzIsShow(!1))}},i.default.createElement(v.Icon,{style:V?{color:"#d9d9d9"}:void 0,type:"add-plus"}),i.default.createElement("span",{style:V?{color:"#d9d9d9"}:void 0},"新增"))):i.default.createElement(v.ButtonGroup,{style:{backgroundColor:"#F8F8F8"}},i.default.createElement(v.Button,{key:"draftBox",style:{display:"insert"==sessionStorage.getItem("lrpzHandleMode")?"":"none"},onClick:function(){n.push("/draft"),m(f.getDraftListFetch("全部"))}},i.default.createElement(v.Icon,{type:"draftBox"}),i.default.createElement("span",null,"草稿箱")),i.default.createElement(v.Button,{key:"temporary",style:{display:"insert"==sessionStorage.getItem("lrpzHandleMode")?"":"none"},onClick:function(){return m(s.draftSaveFetch())}},i.default.createElement(v.Icon,{type:"temporary"}),i.default.createElement("span",null,"暂存")),i.default.createElement(v.Button,{key:"save",onClick:function(){sessionStorage.removeItem("enterDraft");m(s.enterJvFetch("",function(){e.setState({codeRepeatModal:!0})},"",T))}},i.default.createElement(v.Icon,{type:"save"}),i.default.createElement("span",null,"保存")))),oe=[],le=sessionStorage.getItem("router-from");"cxpz"===le?(o.get("vclist").map(function(e){return oe.push(e.get("vcindex"))}),oe.sort(x.ascOrder)):"mxb"===le?(l.getIn(["ledger","detailList"]).forEach(function(e){e.get("vcindex")&&-1===oe.indexOf(e.get("vcindex"))&&oe.push(e.get("vcindex"))}),oe.sort(x.ascOrder)):"assmxb"===le?(c.getIn(["reportassdetail","jvlist"]).forEach(function(e){-1===oe.indexOf(e.get("vcindex"))&&oe.push(e.get("vcindex"))}),oe.sort(x.ascOrder)):"lrpz"===le?oe.push(J):"amountmxb"===le?(_.getIn(["ledger","jvlist"]).forEach(function(e){-1===oe.indexOf(e.get("vcindex"))&&oe.push(e.get("vcindex"))}),oe.sort(x.ascOrder)):"currencymxb"===le?(S.getIn(["currencyDetailList","jvList"]).forEach(function(e){-1===oe.indexOf(e.get("vcindex"))&&oe.push(e.get("vcindex"))}),oe.sort(x.ascOrder)):"cxls"===le&&(C.get("dataList").forEach(function(e){e.get("vcList").size&&-1===oe.indexOf(e.getIn(["vcList",0,"vcIndex"]))&&oe.push(e.getIn(["vcList",0,"vcIndex"]))}),oe.sort(x.ascOrder));var ie=oe.findIndex(function(e){return e==J}),ce=ie>0?oe[ie-1]:0,se=ie<oe.length-1?oe[ie+1]:ie,ue=this.props.homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]),de=!ue||ue.indexOf("ENCLOSURE_GL")>-1,fe="TRUE"===this.props.homeState.getIn(["data","userInfo","checkMoreFj"]),me=a.get("enclosureList"),ve=[];me.map(function(e){"TRUE"==e.get("imageOrFile")&&ve.push(e.get("signedUrl"))});var pe=a.get("label");me.every(function(e){return"TRUE"==e.get("imageOrFile")});var ge=!0;!V&&!G||me.size||(ge=!1);var ye=r.get("isloading"),he=r.get("uploadKeyJson");return i.default.createElement(v.Container,{className:"lrpz"},ye?i.default.createElement("div",{className:"unloadedMask"},i.default.createElement("div",{className:"unloadedMask-tip-text"},"凭证如果有附件，需要较长的时间加载，请耐心等待")):"",i.default.createElement(I.TopDatePicker,{style:{display:Y?"none":""},value:B,callback:function(e){sessionStorage.getItem("lrpzHandleMode"),m(s.modifyVcDate(e,B))},onChange:function(e){sessionStorage.getItem("lrpzHandleMode"),m(s.modifyVcDate(e,B))}}),i.default.createElement(v.Row,{className:"date-header-wrap lrpz",style:{display:Y&&"draft"!==sessionStorage.getItem("enterDraft")?"":"none"}},i.default.createElement("span",{className:"date-header-btn-wrap",onClick:function(){0!==ie&&ce&&m(s.getVcFetch(B,ce))}},i.default.createElement(v.Icon,{className:"header-left",type:"last",style:{visibility:0===ie?"hidden":""}})),i.default.createElement("div",{className:"thirdparty-date-select"},i.default.createElement("span",{className:"thirdparty-date-date"},B.replace(/-/g,"/"))),i.default.createElement("span",{className:"date-header-btn-wrap",onClick:function(){ie!==oe.length-1&&se&&m(s.getVcFetch(B,se))}},i.default.createElement(v.Icon,{className:"header-right",type:"next",style:{visibility:ie===oe.length-1?"hidden":""}}))),i.default.createElement(p.default,{vcindex:J,showckpz:Y,closedby:V,reviewedby:G,creditTotal:a.getIn(["flags","creditTotal"]),debitTotal:a.getIn(["flags","debitTotal"]),dispatch:m,locked:ae,vcdate:B}),i.default.createElement(b.default,{aclist:q,visible:O,dispatch:m,value:D.acid,onChange:function(t){var n=D.index,a=t.key,r=q.find(function(e){return e.get("acid")==a}),o=r?r.get("asscategorylist"):(0,j.fromJS)({});m(s.changeJvAcIdAndAcNameAndAssCategoryList(n,a,r?r.get("acfullname"):"",r?r.get("acname"):"",o)),a&&"1"==r.get("acunitOpen")?(D.unitCallBack(r.get("acunitOpen")),r.get("asscategorylist").size||m(s.getAmountDataFetch(a,B,n))):m(s.clearAcUnitOpen(n)),a&&"1"==r.get("fcStatus")?m(s.getFCListDataFetch(n)):m(s.clearFCListData(n)),e.setState({showAcSelect:!1,selestStatus:{index:"",acid:"",unitCallBack:function(){}}})},parentDisabled:!0,onCancel:function(){e.setState({showAcSelect:!1,selestStatus:{index:"",acid:""}})}},i.default.createElement("span",null)),i.default.createElement(v.ScrollView,{ref:"lrpzScrollContainer",flex:"1",uniqueKey:"lrpz-scroll",savePosition:!0},i.default.createElement("div",{style:{display:Y?"none":""},className:"jv-list"},R.map(function(t,n){return i.default.createElement(g.default,{idx:n,key:n,jv:t,vcdate:B,deletable:$,dispatch:m,acasslist:X,jvListLength:U,lrpzScrollContainer:e.refs.lrpzScrollContainer,currencyList:K,unitDecimalCount:z,onAcSelectClick:function(t,n,a){return e.setState({showAcSelect:!0,selestStatus:{index:t,acid:n,unitCallBack:a}})}})})),i.default.createElement("div",{style:{display:Y?"":"none"},className:"ckjv-list"},R.map(function(e,t){return i.default.createElement(y.default,{idx:t,key:t,jv:e})}),i.default.createElement("div",{className:"vc-jv vc-info-bottom vc-jv-info",style:{display:Y?"":"none"}},i.default.createElement("span",null,"制单人: "+(a.get("createdby")?a.get("createdby"):"")),i.default.createElement("span",null,a.get("reviewedby")&&!F?"审核人: "+a.get("reviewedby"):""))),i.default.createElement("div",{className:Y?"ckjv-enclosure-count-user":"ckjv-enclosure-count-user ckjv-enclosure-count-user-input"},i.default.createElement("span",null,"附件数："),Y?i.default.createElement("span",null,H&&""!==H?H:"0"," 个"):i.default.createElement("span",null,i.default.createElement(v.TextInput,{textAlign:"right",value:H,onChange:function(e){/^\d*$/.test(e)&&e.length<=2&&m(s.changeVcEnclosureCountUser(e))}})," ",i.default.createElement(v.Icon,{type:"arrow-right",className:"ac-option-icon",size:"14"}))),i.default.createElement(h.default,{fromPage:"Lrpz",className:"lrpz-enclosure-wrap",dispatch:m,enCanUse:de,editPermission:M,enclosureList:me,checkMoreFj:fe,showPzfj:ge,label:pe,enclosureCountUser:H,previewImageList:ve,showckpz:Y,uploadFiles:function(e){return m(s.uploadFiles.apply(s,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)))},getUploadGetTokenFetch:function(){return m(s.getUploadGetTokenFetch())},getLabelFetch:function(){return m(s.getLabelFetch())},deleteUploadImgUrl:function(e){return m(s.deleteUploadImgUrl(e))},changeTagName:function(e,t){return m(s.changeTagName(e,t))},uploadKeyJson:he,history:n})),i.default.createElement(v.Row,null,V?"":re),i.default.createElement(v.PopUp,{title:"凭证号："+J+"已存在，您可以：",onCancel:function(){return e.setState({autoEncode:"true",codeRepeatModal:!1})},visible:w,footerVisible:!1,footer:[i.default.createElement("span",{key:"cancel",onClick:function(){return e.setState({autoEncode:"true",codeRepeatModal:!1})}},"取消"),i.default.createElement("span",{key:"sure",onClick:function(){sessionStorage.removeItem("enterDraft");m(s.enterJvFetch("",function(){e.setState({autoEncode:"true",codeRepeatModal:!1})},A,T))}},"确定")]},i.default.createElement("div",{className:"code-repeat-select"},i.default.createElement(v.Radio,{list:[{key:"true",value:"系统自动编号"},{key:"false",value:"插入凭证号"}],value:A,onChange:function(t){e.setState({autoEncode:t})}}))))}}]),t}(),r.propTypes={},a=o))||a;t.default=S},1641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),l=(a=o)&&a.__esModule?a:{default:a},i=n(16),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1230));var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.vcindex,n=e.dispatch,a=e.creditTotal,r=e.debitTotal,o=e.closedby,s=e.reviewedby,u=e.showckpz,d=e.locked,f=e.vcdate,m="draft"===sessionStorage.getItem("enterDraft");return l.default.createElement(i.Row,{className:["title",m?"lrpz-locked":""].join(" ")},l.default.createElement("div",{className:"title-item title-item-left"},l.default.createElement("p",{className:["title-item-vcindex",m?"draft-vcindex":""].join(" ")},l.default.createElement("span",null,"记 "),l.default.createElement("input",{disabled:u,style:u?{background:m?"#fff":"#DEDEDE",border:m?"0":"",color:m&&"1"==d?"#999":"#222"}:void 0,className:"vc-index",type:"tel",value:t,onChange:function(e){return n(c.changeVcId(e.target.value))}}),l.default.createElement("span",null," 号")),l.default.createElement("p",{className:"draft-vcdate",style:{display:m?"block":"none"}},f.replace(/\-/g,"/"))),l.default.createElement(i.Icon,{style:{display:"draft"===sessionStorage.getItem("enterDraft")&&"1"===d?"":"none"},className:"locked-icon",color:"#ff943e",type:"locked",size:"50"}),l.default.createElement(i.Icon,{style:{display:o?"":"none"},className:"title-item-icon",color:"#DE4646",type:"the-invosing",size:"67"}),l.default.createElement(i.Icon,{style:{display:o?"none":s?"":"none"},className:"title-item-icon title-item-icon-yishenhe",color:"#ff943e",type:"yishenhe",size:"50"}),l.default.createElement("div",{className:"title-item title-item-right"},l.default.createElement("p",null,"借方合计: ",r),l.default.createElement("p",null,"贷方合计: ",a)))}}]),t}();t.default=s},1642:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),l=(a=o)&&a.__esModule?a:{default:a},i=(n(9),d(n(1230))),c=d(n(10)),s=n(16),u=d(n(25));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var f=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={countBlur:!1,priceBlur:!1,acunitOpen:"0",standardAmountBlur:!1,exchangeBlur:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.idx,a=t.jv,r=t.vcdate,o=t.acasslist,d=t.deletable,f=t.dispatch,m=t.jvListLength,v=(t.selectComponentDisplay,t.currencyList),p=t.unitDecimalCount,g=t.onAcSelectClick,y=this.state,h=y.countBlur,b=y.priceBlur,E=y.acunitOpen,I=y.standardAmountBlur,j=y.exchangeBlur,x=a.get("asslist"),_=!!x.map(function(e){return e.get("asscategory")}).size,N=a.get("jvcount");0==N&&(h||(N=""));var C=a.get("price");0==C&&(b||(C=""));var S=a.get("standardAmount");0==S&&(I||(S=""));var k=a.get("exchange");0==k&&(j||(k=""));var A=v.map(function(e,t){return{key:""+e.get("fcNumber")+u.EMPTY_CONNECT+e.get("name"),value:""+e.get("fcNumber")+u.EMPTY_CONNECT+e.get("name")+u.EMPTY_CONNECT+e.get("exchange")}});return l.default.createElement("div",{className:"jv-item"},l.default.createElement("div",{className:"jv-abstract"},l.default.createElement(s.TextInput,{className:"jv-abstract-content",moneyKeyboardAlign:"right",type:"text",placeholder:"摘要填写",value:a.get("jvabstract"),onChange:function(e){return f(i.changeJvAbstract(e,n))}}),l.default.createElement(s.Icon,{style:d?void 0:{color:"#ccc"},type:"close-item",className:"btn-close",onClick:function(){f(i.deleteJv(n))}})),l.default.createElement("div",{className:"jv-ac"},l.default.createElement("div",{className:"jv-ac-select"+(a.get("acid")?"":"-placeholder"),onClick:function(){g(n,a.get("acid"),function(t){return e.setState({acunitOpen:t})})}},a.get("acid")?a.get("acfullname")?a.get("acid")+"_"+a.get("acfullname"):a.get("acid"):"请点击选择科目")),x.map(function(e,t){var u=o.find(function(t){return t&&t.get("asscategory")===e.get("asscategory")}),d=u&&u.get("asslist").filter(function(e){return e.get("assid")&&!e.get("disableTime")}).map(function(e,t){return{key:[e.get("assid"),"_",e.get("assname")].join(""),value:[e.get("assid"),"_",e.get("assname")].join("")}}),m=u.get("asslist").filter(function(e){return e.get("assid")}).filter(function(e){return!e.get("disableTime")}),v=e.get("assid")?e.get("asscategory")+"_"+e.get("assid")+"_"+e.get("assname"):"请点击选择辅助核算（类别："+e.get("asscategory")+"）";return m.size?l.default.createElement(s.SinglePicker,{className:"jv-ass-margin",key:t,district:d,onOk:function(t){var o,l,c=(o=t.key,l=o.match(/^[A-Za-z0-9]*/),{name:o.match(/_.*$/).toString().replace("_",""),id:l.toString()});if(1===a.get("asslist").size)"1"===E&&f(i.getAmountDataFetch(a.get("acid"),r,n,c.id,e.get("asscategory")));else if(2===a.get("asslist").size){var s=a.get("asslist").find(function(t){return t.get("asscategory")!==e.get("asscategory")}),u=s.get("asscategory"),d=s.get("assid");d&&"1"===E&&f(i.getAmountDataFetch(a.get("acid"),r,n,c.id,e.get("asscategory"),d,u))}f(i.changeJvAssIdAndAssName(n,c.id,c.name,e.get("asscategory")))}},l.default.createElement("div",{key:t,className:"jv-ass",style:{display:_?"":"none"}},l.default.createElement("div",{className:"jv-ass-select"+(e.get("assid")?"":"-placeholder")},v))):l.default.createElement("div",{key:t,className:"jv-ass",style:{display:_?"":"none"}},l.default.createElement("div",{className:"jv-ass-select"+(e.get("assid")?"":"-placeholder"),onClick:function(){var t=e.get("asscategory")+"中所有的核算项目为禁用状态，您可以：1、账套管理员在“辅助核算设置”页面中，启用已有的核算项目；2、在当前页面，“新增”新的核算项目";c.Alert(t,"确定")}},v))}),l.default.createElement("div",{className:"jv-number",style:{display:"1"==a.get("acunitOpen")?"flex":"none"}},l.default.createElement("span",{className:"jv-number-position jv-number-left jv-amount-content"},l.default.createElement(s.AmountInput,{type:"text",placeholder:"数量填写",value:a.get("jvcount"),moneyKeyboardAlign:"left",decimalPlaces:p,onChange:function(e){return f(i.changeJvCount(e,n,p))},onFocus:function(t){e.setState({countBlur:!0})},onBlur:function(){e.setState({countBlur:!1}),"1"==a.get("fcStatus")||a.get("fcNumber")?f(i.autoCalculateAll(n,"count",p)):f(i.autoCalculate(n,"count",p))}}),l.default.createElement("span",{className:"jv-number-unit"},a.get("jvunit"))),l.default.createElement("span",{className:"jv-number-right jv-amount-content"},l.default.createElement(s.AmountInput,{type:"text",placeholder:"单价填写",moneyKeyboardAlign:"left",value:a.get("price"),onChange:function(e){f(i.changeJvPrice(e,n))},onFocus:function(t){e.setState({priceBlur:!0})},onBlur:function(){e.setState({priceBlur:!1}),"1"==a.get("fcStatus")||a.get("fcNumber")?f(i.autoCalculateAll(n,"price",p)):f(i.autoCalculate(n,"price",p))}}))),l.default.createElement("div",{className:"jv-currency",style:{display:"1"==a.get("fcStatus")||a.get("fcNumber")?"flex":"none"}},l.default.createElement("span",{className:"jv-currency-left jv-amount-content"},l.default.createElement(s.AmountInput,{type:"text",placeholder:"原币：",moneyKeyboardAlign:"left",value:a.get("standardAmount"),onChange:function(e){return f(i.changeJvStandardAmount(n,e))},onFocus:function(t){e.setState({standardAmountBlur:!0})},onBlur:function(){e.setState({standardAmountBlur:!1}),f(i.autoCalculateAll(n,"standardAmount",p))}})),l.default.createElement("div",{className:"jv-currency-right"},l.default.createElement(s.SinglePicker,{district:A,onOk:function(e){var t=e.value.split(u.EMPTY_CONNECT),a=t[0],r=t[2];f(i.changeJvNumber(n,a,r))&&f(i.autoCalculateAll(n,"exchange",p))}},l.default.createElement("span",{className:"jv-currency-fcNumber"},l.default.createElement("span",null,a.get("fcNumber")),l.default.createElement(s.Icon,{type:"triangle",size:"11",style:{color:"#CCCCCC"}}))),l.default.createElement("span",{className:"jv-currency-right-input"},l.default.createElement(s.AmountInput,{className:"jv-amount-content",type:"text",placeholder:"",moneyKeyboardAlign:"left",value:a.get("exchange"),onChange:function(e){f(i.changeJvExchange(n,e))},onFocus:function(t){e.setState({exchangeBlur:!0})},onBlur:function(){e.setState({exchangeBlur:!1}),f(i.autoCalculateAll(n,"exchange",p))}})))),l.default.createElement("div",{className:"jv-amount"},l.default.createElement("span",{className:"jv-amount-content"},l.default.createElement(s.AmountInput,{moneyKeyboardAlign:"left",placeholder:"金额填写",value:a.get("jvamount"),onChange:function(e){return f(i.changeJvAmount(e,n))},onBlur:function(){"1"==a.get("fcStatus")||a.get("fcNumber")?f(i.autoCalculateAll(n,"amount",p)):f(i.autoCalculate(n,"amount",p))}})),l.default.createElement(s.SwitchText,{checked:"credit"===a.get("jvdirection"),checkedChildren:"贷",unCheckedChildren:"借",onChange:function(){return f(i.changeJvDirection(n))}}),l.default.createElement("a",{className:"jv-amount-btn jv-amount-primary",href:"javascript:;",onClick:function(){30===m&&c.Alert("建议分录不要超过30条"),60===m&&c.Alert("强烈建议分录不要超过60条"),m<90?f(i.insertJv(n)):c.Alert("禁止分录超过90条")}},l.default.createElement(s.Icon,{type:"add"}),l.default.createElement("span",null,"增加分录"))))}}]),t}();t.default=f},1643:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),i=(r=l)&&r.__esModule?r:{default:r},c=(n(9),n(16));var s=(0,n(22).immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.idx,n=e.jv;return i.default.createElement("div",{className:"vc-jv",key:t},i.default.createElement("div",{className:"vc-jv-info"},i.default.createElement("span",{className:"vc-jv-direction"},["debit"===n.get("jvdirection")?"借":"贷","：",n.get("acfullname")].join("")),i.default.createElement(c.Amount,{className:"vc-jv-amount",showZero:!0},n.get("jvamount")?n.get("jvamount"):0)),n.get("asslist").size?i.default.createElement("div",{className:"vc-jv-ass"},n.get("asslist").map(function(e,t){return i.default.createElement("div",{key:t,className:"vc-jv-ass-showtext "+(0===t?"vc-jv-ass-showtext-tip":"")},e.get("asscategory")+"_"+e.get("assid")+" "+e.get("assname"))})):"",i.default.createElement("div",{className:"vc-jv-abstract"},i.default.createElement("span",null,"摘要："),i.default.createElement("span",null,n.get("jvabstract"))))}}]),t}())||a;t.default=s},1644:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=i(n(0)),l=(n(9),n(16),i(n(126)));function i(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=(e.dispatch,e.aclist),n=e.value,r=e.onChange,i=e.visible,c=e.parentDisabled,s=e.onCancel,u=function(e,t){if("object"!==(void 0===e?"undefined":a(e)))return[];var n=[{key:"资产",label:"资产",childList:[]},{key:"负债",label:"负债",childList:[]},{key:"权益",label:"权益",childList:[]},{key:"成本",label:"成本",childList:[]},{key:"损益",label:"损益",childList:[]}];return e.forEach(function(e){var t=e.acid,a={"流动资产":"资产","非流动资产":"资产","流动负债":"负债","非流动负债":"负债","所有者权益":"权益","成本":"成本"}[e.category]||"损益",r={key:t,label:t+" "+e.acname,item:e,childList:[]};if(4==t.length)n.forEach(function(e,t){e.key===a&&n[t].childList.push(r)});else{var o=void 0;n.forEach(function(e,t){e.key===a&&(o=n[t].childList)}),function(e,t){for(var n=e.length-2;n!=t.key.length;)t=t.childList.find(function(t){return!e.indexOf(t.key)});return t}(t,o.find(function(e){return!t.indexOf(e.key)})).childList.push(r)}}),n}(t.toJS()).filter(function(e){return 0!==e.childList.length});return o.default.createElement(l.default,{visible:i,district:u,value:n,parentDisabled:c,onChange:r,onCancel:s},this.props.children)}}]),t}();t.default=c},1645:function(e,t,n){},953:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=l(n(1640)),r=l(n(1214)),o=l(n(186));function l(e){return e&&e.__esModule?e:{default:e}}var i={lrpzState:r.default,previewEnclosureState:o.default};t.reducer=i,t.view=a.default}}]);