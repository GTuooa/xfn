(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{1234:function(e,t,a){},1259:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments[1];return((e={},u(e,o.INIT_RELATIVE_CONF,function(){return s}),u(e,o.CHANGE_RELATIVE_CONTENT,function(){return t=t.setIn(["relativeHighTypeTemp",a.name],a.value)}),u(e,o.CHANGE_RELATIVE_DATA,function(){return a.short?t.set(a.dataType,a.value):t.setIn(a.dataType,a.value)}),u(e,o.GET_RELATIVE_LIST_TITLE,function(){return a.title.unshift({name:"全部",uuid:""}),t=t.set("tags",(0,r.fromJS)(a.title)).set("originTags",(0,r.fromJS)(a.title))}),u(e,o.GET_RELATIVE_LIST_BY_TYPE,function(){return t=t.set("relativeCardList",(0,r.fromJS)(a.list)).set("treeList",(0,r.fromJS)(a.tree)).set("relativeSelectList",(0,r.fromJS)([])).mergeIn(["views"],(0,r.fromJS)({activeTapKey:a.name,activeTapKeyUuid:a.uuid,sonUuid:"",sonName:"全部",treeSelect:s.getIn(["views","treeSelect"])}))}),u(e,o.BEFORE_ADD_MANAGE_TYPE_CARD,function(){if(t=t.set("tags",t.get("originTags")),"modify"===a.insertOrModify){for(var e=t.get("tags").toJS(),n=a.data.categoryTypeList,l=0;l<n.length;l++)for(var o=0;o<e.length;o++)if(n[l].ctgyUuid===e[o].uuid){e[o].checked=!0,e[o].selectUuid=n[l].subordinateUuid,e[o].selectName=n[l].subordinateName,e[o].tree=n[l].options;break}t=(t=(t=t.set("tags",(0,r.fromJS)(e))).set("relativeCardTemp",(0,r.fromJS)(a.data))).setIn(["relativeCardTemp","insertOrModify"],"modify"),0===a.data.payableOpened&&(t=t.setIn(["relativeCardTemp","payableOpened"],"")),0===a.data.receivableOpened&&(t=t.setIn(["relativeCardTemp","receivableOpened"],"")),0===a.data.prepaidOpened&&(t=t.setIn(["relativeCardTemp","prepaidOpened"],"")),0===a.data.advanceOpened&&(t=t.setIn(["relativeCardTemp","advanceOpened"],""))}else t=t.set("relativeCardTemp",(0,r.fromJS)(i.relativeCardTemp)).setIn(["relativeCardTemp","insertOrModify"],"insert").setIn(["relativeCardTemp","isCheckOut"],a.data.isCheckOut).setIn(["relativeCardTemp","advanceAcId"],a.data.defaultAc.advanceAcId).setIn(["relativeCardTemp","advanceAcName"],a.data.defaultAc.advanceAcName).setIn(["relativeCardTemp","receivableAcId"],a.data.defaultAc.receivableAcId).setIn(["relativeCardTemp","receivableAcName"],a.data.defaultAc.receivableAcName).setIn(["relativeCardTemp","payableAcId"],a.data.defaultAc.payableAcId).setIn(["relativeCardTemp","payableAcName"],a.data.defaultAc.payableAcName).setIn(["relativeCardTemp","prepaidAcId"],a.data.defaultAc.prepaidAcId).setIn(["relativeCardTemp","prepaidAcName"],a.data.defaultAc.prepaidAcName);return t=t.setIn(["views","fromPage"],a.fromPage||"relative")}),u(e,o.BEFORE_ADD_MANAGE_TYPE_CARD_FROM_EDIT_RUNNING,function(){return t=t.set("relativeCardTemp",(0,r.fromJS)(i.relativeCardTemp)).setIn(["relativeCardTemp","insertOrModify"],"insert").setIn(["relativeCardTemp","isCheckOut"],a.receivedData.isCheckOut).set("tags",a.originTags).setIn(["views","fromPage"],a.otherPageName).setIn(["views","otherPageName"],a.otherPageName).setIn(["relativeCardTemp","code"],a.receivedData.code)}),u(e,o.CHANGE_RELATIVE_CARD_CONTENT,function(){if(t=t.setIn(["relativeCardTemp",a.name],a.value),"isPayUnit"===a.name&&!a.value){var e=(t=t.setIn(["relativeCardTemp","enablePrepaidAc"],!1)).getIn(["relativeCardTemp","isReceiveUnit"]);e?t.get("tags").map(function(e,a){if(!e.get("isReceiveUnit")){var n=(t=t.setIn(["tags",a,"checked"],!1)).getIn(["relativeCardTemp","categoryTypeList"]).findIndex(function(t,a){return t.get("ctgyUuid")===e.get("uuid")});n>-1&&(t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(n)))}}):(t.get("tags").map(function(e,a){t=t.setIn(["tags",a,"checked"],!1)}),t=t.setIn(["relativeCardTemp","categoryTypeList"],(0,r.fromJS)([])))}if("isReceiveUnit"===a.name&&!a.value){var n=(t=t.setIn(["relativeCardTemp","enableAdvanceAc"],!1)).getIn(["relativeCardTemp","isPayUnit"]);n?t.get("tags").map(function(e,a){if(!e.get("isPayUnit")){var n=(t=t.setIn(["tags",a,"checked"],!1)).getIn(["relativeCardTemp","categoryTypeList"]).findIndex(function(t,a){return t.get("ctgyUuid")===e.get("uuid")});n>-1&&(t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(n)))}}):(t.get("tags").map(function(e,a){t=t.setIn(["tags",a,"checked"],!1)}),t=t.setIn(["relativeCardTemp","categoryTypeList"],(0,r.fromJS)([])))}return t}),u(e,o.CHANGE_MANAGE_CARD_RELATION,function(){var e=t.get("tags"),n="";if(e.find(function(t,l){t.get("uuid")===a.tag.get("uuid")&&(e=e.setIn([l,"checked"],a.checked),t.get("selectUuid")&&(n=t.get("selectUuid")),a.checked&&(e=e.setIn([l,"tree"],(0,r.fromJS)(a.tree)),0===a.tree[0].childList.length&&(e=e.setIn([l,"selectUuid"],a.tree[0].uuid).setIn([l,"selectName"],a.tree[0].name),n=a.tree[0].uuid)))}),a.checked){var l=t.getIn(["relativeCardTemp","categoryTypeList"]).toJS();l.push({ctgyUuid:a.tag.get("uuid"),subordinateUuid:n}),t=t.setIn(["relativeCardTemp","categoryTypeList"],(0,r.fromJS)(l))}else{var o=t.getIn(["relativeCardTemp","categoryTypeList"]).findIndex(function(e,t){return e.get("ctgyUuid")===a.tag.get("uuid")});t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(o))}return t=t.set("tags",e)}),u(e,o.RELATIVE_CONFIG_ADD_CARD_SHOW_MODAL,function(){return t.get("tags").map(function(e,n){e.get("uuid")===a.uuid&&(t=t.set("typeTree",t.getIn(["tags",n,"tree"])).set("typeSelect",t.getIn(["tags",n])))}),t}),u(e,o.CHANGE_MANAGE_CARD_RELATION_TYPE,function(){var e=t.get("typeSelect");return t.getIn(["relativeCardTemp","categoryTypeList"]).map(function(n,r){n.get("ctgyUuid")===e.get("uuid")&&(t=t.setIn(["relativeCardTemp","categoryTypeList",r,"subordinateUuid"],a.uuid))}),t.get("tags").map(function(n,r){n.get("uuid")===e.get("uuid")&&(t=t.setIn(["tags",r,"selectUuid"],a.uuid).setIn(["tags",r,"selectName"],a.name))}),t}),u(e,o.CHANGE_RELATIVE_CARD_AC,function(){var e=t.getIn(["views","acId"]),n=t.getIn(["views","acName"]);return t=t.setIn(["relativeCardTemp",e],a.uuid).setIn(["relativeCardTemp",n],a.name)}),u(e,o.SAVE_RELATIVE_TYPE_CARD,function(){return t=t.set("relativeCardList",(0,r.fromJS)(a.list)).set("treeList",(0,r.fromJS)(a.treeList)),"insertAndNew"===a.flag&&(t=t.setIn(["relativeCardTemp","code"],a.code).setIn(["relativeCardTemp","name"],"").setIn(["relativeCardTemp","companyAddress"],"").setIn(["relativeCardTemp","companyTel"],"").setIn(["relativeCardTemp","financeName"],"").setIn(["relativeCardTemp","financeTel"],"").setIn(["relativeCardTemp","receivableOpened"],"").setIn(["relativeCardTemp","advanceOpened"],"").setIn(["relativeCardTemp","payableOpened"],"").setIn(["relativeCardTemp","prepaidOpened"],"")),t}),u(e,o.CHANGE_RELATIVE_CONF_CARD_SELECT_LIST,function(){if("relativeCard"==a.clearType&&(t=t.set("relativeCardSelectList",(0,r.fromJS)([])).update("relativeCardList",function(e){return e.map(function(e){return e.set("checked",!1)})})),"relativeHighType"==a.clearType&&(t=t.set("cardHighTypeSelectList",(0,r.fromJS)([])).update("tags",function(e){return e.map(function(e){return e.set("checked",!1)})})),"relativeTree"==a.clearType){var e=t.getIn(["relativeHighTypeTemp","treeList"]).toJS();!function e(t){return t.map(function(t,a){t.checked=!1,t.childList.length>0&&e(t.childList)})}(e),t=t.set("treeList",(0,r.fromJS)(e)).set("relativeTreeSelectList",(0,r.fromJS)([]))}return t}),u(e,o.CHECK_RELATIVE_LIST_CARD_BOX,function(){var e=t.get("relativeCardList"),n=t.get("relativeCardSelectList").toJS();return e.find(function(e,n){e.get("uuid")===a.uuid&&(t=t.setIn(["relativeCardList",n,"checked"],a.checked))}),a.checked?(n.push({uuid:a.uuid}),t=t.set("relativeCardSelectList",(0,r.fromJS)(n))):n.find(function(e,n){e.uuid===a.uuid&&(t=t.deleteIn(["relativeCardSelectList",n]))}),t}),u(e,o.DELETE_RELATIVE_LIST_CARD,function(){return t=t.set("relativeCardList",(0,r.fromJS)(a.data)).set("relativeCardSelectList",(0,r.fromJS)([])).set("treeList",(0,r.fromJS)(a.treeList))}),u(e,o.GET_RELATIVE_LIST_BY_SON_TYPE,function(){return t=t.set("relativeCardList",(0,r.fromJS)(a.data)).set("relativeCardSelectList",(0,r.fromJS)([])).setIn(["views","sonUuid"],a.sonUuid).setIn(["views","sonName"],a.sonName)}),u(e,o.BEFORE_ADD_NEW_MANAGE_TYPE,function(){return t=t.set("relativeHighTypeTemp",(0,r.fromJS)(i.relativeHighTypeTemp))}),u(e,o.CHANGE_RELATIVE_CONTENT,function(){return t=t.setIn(["relativeHighTypeTemp",a.name],a.value)}),u(e,o.GET_RELATIVE_CARD,function(){return t=t.set("relativeHighTypeTemp",(0,r.fromJS)(a.data))}),u(e,o.CHANGE_RELATIVE_CONF_HIGHT_TYPE_BOX_STATUS,function(){var e=t.get("tags"),n=t.get("cardHighTypeSelectList").toJS();return e.map(function(e,n){e.get("uuid")===a.uuid&&(t=t.setIn(["tags",n,"checked"],a.status))}),a.status?(n.push({uuid:a.uuid}),t=t.set("cardHighTypeSelectList",(0,r.fromJS)(n))):n.find(function(e,n){e.uuid===a.uuid&&(t=t.deleteIn(["cardHighTypeSelectList",n]))}),t}),u(e,o.DELETE_RELATIVE_CONF_HGIH_TYPE,function(){a.title.unshift({name:"全部",uuid:""});var e=t.getIn(["views","activeTapKeyUuid"]),n=a.title.map(function(e){return e.uuid});return n.includes(e)||(t=t.setIn(["views","activeTapKeyUuid"],"").setIn(["views","activeTapKey"],"全部").setIn(["views","treeSelect"],s.getIn(["views","treeSelect"]))),t=t.set("tags",(0,r.fromJS)(a.title)).set("originTags",(0,r.fromJS)(a.title))}),u(e,o.INSERT_RELATIVE_TYPE,function(){return t=t.setIn(["relativeTypeTemp","name"],"").setIn(["relativeTypeTemp","uuid"],"").setIn(["relativeTypeTemp","parentUuid"],a.uuid).setIn(["relativeTypeTemp","parentName"],a.name)}),u(e,o.CHANGE_RELATIVE_TYPE_CONTENT,function(){return t=t.setIn(["relativeTypeTemp",a.name],a.value)}),u(e,o.CHANGE_RELATIVE_TYPE_SELECT,function(){return t=t.setIn(["relativeTypeTemp","parentUuid"],a.parentUuid).setIn(["relativeTypeTemp","parentName"],a.parentName)}),u(e,o.SAVE_RELATIVE_TYPE,function(){return t=t.set("relativeCardList",(0,r.fromJS)(a.list)).setIn(["views","activeTapKey"],a.name).setIn(["views","activeTapKeyUuid"],a.activeTapKeyUuid).set("treeList",(0,r.fromJS)(a.tree))}),u(e,o.GET_RELATIVE_TYPE_CONTENT,function(){return t=t.set("relativeTypeTemp",(0,r.fromJS)(a.data))}),u(e,o.CHANGE_RELATIVE_TYPE_BOX_CHECKED,function(){var e=t.getIn(["relativeHighTypeTemp","treeList"]).toJS();return function e(t,n){return t.map(function(t,r){var l=n;(t.uuid==a.uuid||n)&&(t.checked=a.value,l=!0),t.childList.length>0&&e(t.childList,l)})}(e,!1),t.setIn(["relativeHighTypeTemp","treeList"],(0,r.fromJS)(e))}),u(e,o.SWITCH_CARD_STATUS,function(){return t=t.setIn(["relativeCardTemp","used"],a.used)}),e)[a.type]||function(){return t})()};var n,r=a(9),l=a(182),o=((n=l)&&n.__esModule,c(a(25)),a(13),c(a(10)),c(a(1300))),i=a(1243);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s=(0,r.fromJS)({views:{acName:"",acId:"",relation:"",anotherTabName:"全部",activeTapKey:"全部",activeTapKeyUuid:"",sonUuid:"",sonName:"全部",insertOrModify:"insert",fromPage:"relative",otherPageName:"",treeSelect:{treeTwoList:[],treeThreeList:[],selectUuid:["","",""],selectName:"",selectEndUuid:""}},tags:[],originTags:[],relativeHighTypeTemp:i.relativeHighTypeTemp,relativeTypeTemp:i.relativeTypeTemp,relativeCardTemp:i.relativeCardTemp,relativeCardSelectList:[],relativeCardList:[],treeList:[],relativeTreeSelectList:[],typeTree:[],typeSelect:"",cardHighTypeSelectList:[]})},1260:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((e={},l(e,r.INIT_PROJECT,function(){return o}),l(e,r.INIT_PROJECT_DATA,function(){return t.set(a.dataType,o.get(a.dataType)).setIn(["views","fromPage"],a.fromPage||"project")}),l(e,r.PROJECT_HIGH_TYPE,function(){var e=a.list;return e.unshift({name:"全部",uuid:""}),t.set("highTypeList",(0,n.fromJS)(e)).setIn(["views","ctgyUuid"],e[1].uuid)}),l(e,r.CHANGE_PROJECT_DATA,function(){return t.setIn(a.dataType,a.value)}),l(e,r.CHANGE_PROJECT_TOP_DATA,function(){return t.set(a.dataType,a.value)}),l(e,r.AFTER_SUCCESS_EDIT_PROJECT_CARD,function(){return t.set("cardList",(0,n.fromJS)(a.receivedData))}),l(e,r.GET_PROJECT_LIST_AND_TREE,function(){var e=a.data.typeList.length?a.data.typeList[0].uuid:"";return t.set("cardList",(0,n.fromJS)(a.data.resultList)).set("treeList",(0,n.fromJS)(a.data.typeList)).mergeIn(["views"],(0,n.fromJS)({treeUuid:e,treeName:"全部",treeSelect:o.getIn(["views","treeSelect"])}))}),l(e,r.CHECKED_PROJECT_CATEGORY,function(){var e=t.getIn(["highTypeData","treeList"]).toJS();return function e(t,n){return t.map(function(t,r){var l=n;(t.uuid==a.uuid||n)&&(t.checked=a.value,l=!0),t.childList.length>0&&e(t.childList,l)})}(e,!1),t.setIn(["highTypeData","treeList"],(0,n.fromJS)(e))}),l(e,r.GET_PROJECT_CARD_ONE,function(){var e=a.data.categoryTypeList[0].subordinateName,r=a.data.categoryTypeList[0].subordinateUuid;return t.mergeIn(["data","psiData"],(0,n.fromJS)(a.data)).setIn(["views","insertOrModify"],"modify").setIn(["data","psiData","selectName"],e).setIn(["data","psiData","selectUuid"],r).setIn(["data","psiData","typeList"],(0,n.fromJS)(a.data.categoryTypeList[0].options)).setIn(["views","fromPage"],"project").set("treeList",(0,n.fromJS)(a.data.categoryTypeList[0].options))}),l(e,r.UNCHECKED_PROJECT,function(){if("card"==a.dataType){t.get("cardList");t=t.update("cardList",function(e){return e.map(function(e){return e.set("checked",!1)})})}else{var e=t.get("treeList").toJS();!function e(t){return t.map(function(t,a){t.checked=!1,t.childList.length>0&&e(t.childList)})}(e),t=t.set("treeList",(0,n.fromJS)(e))}return t}),l(e,r.BEFORE_ADD_PROJECT_CARD_FROM_EDIT_RUNNING,function(){return t=t.set("data",o.get("data")).set("treeList",(0,n.fromJS)(a.receivedData)).setIn(["views","insertOrModify"],"insert").setIn(["views","fromPage"],a.otherPageName).setIn(["views","otherPageName"],a.otherPageName).setIn(["views","ctgyUuid"],a.ctgyUuid).set("highTypeList",(0,n.fromJS)(a.highTypeList)).setIn(["data","psiData","code"],a.code).setIn(["data","psiData","categoryTypeList",0],(0,n.fromJS)({ctgyUuid:a.ctgyUuid,subordinateUuid:""})),a.receivedData[0].childList.length<=0&&(t=t.setIn(["data","psiData","selectUuid"],a.receivedData[0].uuid).setIn(["data","psiData","selectName"],a.receivedData[0].name).setIn(["data","psiData","categoryTypeList",0,"subordinateUuid"],a.receivedData[0].uuid)),a.highTypeList.map(function(e){e.uuid==a.ctgyUuid&&"生产项目"==e.name&&(t=t.setIn(["data","psiData","projectProperty"],"XZ_PRODUCE"))}),t}),l(e,r.BEFORE_ADD_PROJECT_CARD_GET_CODE,function(){return t.setIn(["data","psiData","code"],a.value)}),e)[a.type]||function(){return t})()};var n=a(9),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1301));function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=(0,n.fromJS)({views:{currentType:"",currentTypeName:"全部",ctgyUuid:"",treeName:"全部",treeUuid:"",highTypeIdx:0,insertOrModify:"insert",fromPage:"project",otherPageName:"",treeSelect:{treeTwoList:[],treeThreeList:[],selectUuid:["","",""],selectName:"",selectEndUuid:""}},data:{psiData:{code:"",name:"",selectName:"",selectUuid:"",categoryTypeList:[],typeList:[],used:!0,uuid:"",projectProperty:"XZ_LOSS",basicProductOpen:"",contractCostOpen:"",contractProfitOpen:"",engineeringSettlementOpen:""}},highTypeList:[],cardList:[],treeList:[],highTypeData:{commonFee:!1,name:"",uuid:"",beAssist:!1,beMake:!0,treeList:[]},deleteList:[],treeData:{name:"",parentName:"",parentUuid:"",uuid:""}})},1305:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.searchTypeStr=[{value:"PROCESS_SEARCH_TITLE",key:"审批标题"},{value:"PROCESS_SEARCH_SPONSOR",key:"发起人"},{value:"PROCESS_SEARCH_DETAIL_TYPE",key:"明细类型"},{value:"PROCESS_SEARCH_AMOUNT",key:"金额"}],t.searchNameStr={PROCESS_SEARCH_TITLE:"审批标题",PROCESS_SEARCH_SPONSOR:"发起人",PROCESS_SEARCH_DETAIL_TYPE:"明细类型",PROCESS_SEARCH_AMOUNT:"金额"},t.accountingNameStr={ALL:"全部",NONE:"未记账",ACCOUNTING:"已挂账",PAYING:"已付款",INCOME:"已收款",BOOKING:"已核记",DISUSE:"已作废"},t.dateTypeStr=[{value:"DATE_TYPE_ACCOUNTING",key:"记账日期"},{value:"DATE_TYPE_DETAIL",key:"明细日期"},{value:"DATE_TYPE_START",key:"提交日期"},{value:"DATE_TYPE_END",key:"完成日期"}],t.dateNameStr={DATE_TYPE_ACCOUNTING:"记账日期",DATE_TYPE_DETAIL:"明细日期",DATE_TYPE_START:"提交日期",DATE_TYPE_END:"完成日期"},t.accountingTypeStr=[{value:"ALL",key:"全部"},{value:"NONE",key:"未记账"},{value:"ACCOUNTING",key:"已挂账"},{value:"PAYING",key:"已付款"},{value:"INCOME",key:"已收款"},{value:"BOOKING",key:"已核记"},{value:"DISUSE",key:"已作废"}],t.showAccountState={PROCESS_PAYING:"已付款",PROCESS_ACCOUNTING:"已挂账",PROCESS_BOOK_KEEPING:"已核记",PROCESS_DISUSE:"已作废",PROCESS_INCOME:"已收款"},t.showToolTipAccountState={PROCESS_PAYING:"付款",PROCESS_ACCOUNTING:"挂账",PROCESS_BOOK_KEEPING:"核记",PROCESS_DISUSE:"作废",PROCESS_INCOME:"收款"},t.suitTypeList=["销售存货套件","采购存货套件","预付账款","预收账款","暂付款项","暂收款项","内部转账","存货调拨套件"]},1490:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),o=(n=l)&&n.__esModule?n:{default:n},i=a(16),c=a(13),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(10)),s=a(123);a(201);var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.start,a=e.end,n=e.chooseValue,r=e.onBeginOk,l=e.onEndOk,d=e.changeChooseValue,p=e.dateSelectList;return o.default.createElement("div",{className:"muti-period-more-select"},o.default.createElement("div",null,o.default.createElement(s.TopDatePicker,{value:t,endValue:a||t,isRange:!0,onChange:function(e){var t=new c.DateLib(e).valueOf();-1===t.indexOf("Invalid")?Date.parse(a)<Date.parse(t)?r(t,t):r(t,a):u.toast.info("日期格式错误,请刷新重试")},onEndChange:function(e){var a=new c.DateLib(e).valueOf();Date.parse(a)<Date.parse(t)?u.Alert("结束日期不可小于开始日期","好的"):-1===a.indexOf("Invalid")?l(t,a):u.toast.info("日期格式错误,请刷新重试")}})),o.default.createElement(i.Single,{district:p,value:n,canSearch:!1,onOk:function(e){d(e.value)}},o.default.createElement(i.Icon,{type:"select",style:{fontSize:".17rem"}})))}}]),t}();t.default=d},1491:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(r=o)&&r.__esModule?r:{default:r},c=a(9),u=a(22),s=a(16),d=a(1305),p=a(1218),f=(a(13),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1080))),m=a(1066);var g=(0,u.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.dispatch,n=e.editLrAccountPermission,r=e.history,l=e.jrUuidList,o=e.multiOperationType,u=e.accountSelectList,g=!1,h=!1,v=!1,y=!1;return t.get("dealState")||(p.hideCategoryCanSelect.indexOf(t.get("jrCategoryType"))>-1?y=!0:(v=!0,p.receiptList.indexOf(t.get("jrCategoryType"))>-1?t.get("jrAmount")>0?g=!0:t.get("jrAmount")<0&&(h=!0):t.get("jrAmount")>0?h=!0:t.get("jrAmount")<0&&(g=!0))),i.default.createElement("div",{className:"approval-all-item-child-item needsclick"},i.default.createElement("div",{className:"approval-all-item-child-title-wrap",onClick:function(){o||(a(f.changeSearchApprovalString("","jrUuidList",l)),a(f.getApprovalProcessDetailInfo(t.get("id"),function(){r.push("/searchapproval/approvalpreview")})))}},i.default.createElement("span",{className:"approval-all-item-child-title-type"},t.get("detailType")),i.default.createElement("span",{className:"approval-all-item-child-title-amount"},i.default.createElement(s.Amount,{showZero:!0},t.get("jrAmount")))),i.default.createElement("div",{className:"approval-all-item-child-title-date"},t.get("jrDate").substr(0,10)),t.get("dealState")?i.default.createElement("div",{className:"approval-all-item-child-handled-tit-wrap"},i.default.createElement("div",{className:"approval-all-item-child-handled-tit"},t.get("jrIndex")?i.default.createElement("span",{className:"approval-all-item-child-handled-tit-left",onClick:function(){o||a(m.runningPreviewActions.getRunningPreviewBusinessFetch(t.get("jrOriUuid"),t,l,"search",r))}},i.default.createElement(s.Icon,{type:"liushui",style:{fontSize:".14rem"}})," ",i.default.createElement("span",null,t.get("jrIndex"),"号")):i.default.createElement("span",{className:"approval-all-item-child-handled-tit-left"}),i.default.createElement("span",{className:"approval-all-item-child-handled-tit-rigth",onClick:function(){o||n&&a(f.cancelApprovalProcessDetailInfo([t.get("id")],function(){}))}},i.default.createElement("span",null,d.showAccountState[t.get("dealState")])," ",i.default.createElement(s.Icon,{type:"chexiao",style:{color:n?"#5e81d1":"#999"}}))),i.default.createElement("div",{className:"approval-all-item-child-operate_username"},i.default.createElement("span",null,t.get("oriDate")),i.default.createElement("i",{className:"approval-all-item-child-separate",style:{display:t.get("jrIndex")?"":"none"}},"|"),i.default.createElement("span",null,"记账员：",t.get("operateUserName")))):i.default.createElement("div",{className:"approval-all-item-child-btn-wrap"},i.default.createElement("span",{className:n?"approval-all-item-child-btn":"approval-all-item-child-btn approval-all-item-child-btn-disabled",style:{display:y?"":"none"},onClick:function(e){if(!o&&n){if(t.getIn(["outputAccount","accountUuid"])){var l=u.find(function(e){return e.get("uuid")===t.getIn(["outputAccount","accountUuid"])}),i=t.get("jrAmount");if(l){var s={needPoundage:l.get("needPoundage"),poundage:l.get("poundage"),poundageRate:l.get("poundageRate")},d=s.poundage,p=s.poundageRate,m=i>0?i:-i,g=Math.abs(m||0)*p/1e3>d&&d>0?d:Math.abs(m||0)*p/1e3;a(f.changeSearchRunningCalculateCommonString("account",(0,c.fromJS)({accountName:l.get("name"),accountUuid:l.get("uuid"),poundage:s,poundageAmount:(g||0).toFixed(2)}))),a(f.changeSearchRunningCalculateCommonString("receiveAmount",i>0?i:-i))}}a(f.changeSearchRunningCalculateCommonString("fromPage","")),a(f.changeSearchRunningCalculateCommonString("selectList",(0,c.fromJS)([t.get("id")]))),r.push("/searchapproval/bookKeepingapproval")}}},"核记"),i.default.createElement("span",{className:n?"approval-all-item-child-btn":"approval-all-item-child-btn approval-all-item-child-btn-disabled",style:{display:v?"":"none"},onClick:function(e){o||n&&a(f.getSearchRunningJrCategoryDate(t.get("jrCategoryUuid"),t.get("id"),function(){a(f.changeSearchRunningCalculateCommonString("fromPage","")),a(f.changeSearchRunningCalculateCommonString("selectList",(0,c.fromJS)([t.get("id")]))),r.push("/searchapproval/accountapproval")}))}},"挂账"),i.default.createElement("span",{className:n?"approval-all-item-child-btn":"approval-all-item-child-btn approval-all-item-child-btn-disabled",style:{display:g?"":"none"},onClick:function(e){o||n&&(a(f.changeSearchRunningCalculateCommonString("fromPage","")),a(f.changeSearchRunningCalculateCommonString("selectList",(0,c.fromJS)([t.get("id")]))),a(f.changeSearchRunningCalculateCommonString("receiveAmount",t.get("jrAmount")>0?t.get("jrAmount"):-t.get("jrAmount"))),r.push("/searchapproval/receiveapproval"))}},"收款"),i.default.createElement("span",{className:n?"approval-all-item-child-btn":"approval-all-item-child-btn approval-all-item-child-btn-disabled",style:{display:h?"":"none"},onClick:function(e){o||n&&a(f.getSearchRunningJrCategoryDate(t.get("jrCategoryUuid"),t.get("id"),function(){a(f.changeSearchRunningCalculateCommonString("fromPage","")),a(f.changeSearchRunningCalculateCommonString("selectList",(0,c.fromJS)([t.get("id")]))),r.push("/searchapproval/payapproval")}))}},"付款"),i.default.createElement("span",{className:n?"approval-all-item-child-btn":"approval-all-item-child-btn approval-all-item-child-btn-disabled",onClick:function(e){o||n&&a(f.disuseApprovalProcessDetailInfo([t.get("id")],function(){}))}},"作废")))}}]),t}())||n;t.default=g},1492:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),o=(n=l)&&n.__esModule?n:{default:n},i=a(9),c=a(16),u=m(a(10)),s=m(a(25)),d=a(13),p=a(1218),f=m(a(1080));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.state={checkedCurrent:!1,checkedProject:!1},g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),r(t,[{key:"componentDidMount",value:function(){var e=this.props.accountPoundage.get("categoryUuid");e&&this.props.dispatch(f.getSearchApprovalAccountRunningCate(e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.type,n=t.dispatch,r=t.account,l=t.needUsedPoundage,m=t.accountPoundage,g=t.poundageCurrentList,h=t.poundageProjectList,v=t.poundageCurrentCardList,y=t.poundageProjectCardList,C=t.accountProjectRange,S=t.accountContactsRange,E=t.receiveAmount,b=t.handlingFeeType,_=this.state,T=_.checkedCurrent,L=_.checkedProject,R=m.get("poundageNeedCurrent"),A=m.get("poundageNeedProject"),I=v.get(0)?v.get(0):(0,i.fromJS)({}),O=y.get(0)?y.get(0):(0,i.fromJS)({}),N=O.get("code")+" "+O.get("name");p.systemProJectCodeCommon.includes(O.get("code"))&&(N=O.get("name"));var P=[],w=[];g.forEach(function(e){w.push({value:""+e.get("uuid")+s.TREE_JOIN_STR+e.get("code")+s.TREE_JOIN_STR+e.get("name"),key:e.get("code")+" "+e.get("name")})}),h.forEach(function(e){P.push({value:""+e.get("uuid")+s.TREE_JOIN_STR+e.get("code")+s.TREE_JOIN_STR+e.get("name"),key:(-1===p.systemProJectCodeCommon.indexOf(e.get("code"))?e.get("code"):"")+" "+e.get("name")})});var k=0,j=0;return"核记"==a&&(k=Math.abs((0,d.decimal)(E*r.getIn(["poundage","poundageRate"])/1e3)),r.getIn(["poundage","poundage"])&&r.getIn(["poundage","poundage"])>0&&Number(k)>r.getIn(["poundage","poundage"])&&(k=r.getIn(["poundage","poundage"])),j=Math.abs((0,d.decimal)(E/(1+Number(r.getIn(["poundage","poundageRate"])/1e3))*r.getIn(["poundage","poundageRate"])/1e3)),r.getIn(["poundage","poundage"])&&r.getIn(["poundage","poundage"])>0&&Number(j)>r.getIn(["poundage","poundage"])&&(j=r.getIn(["poundage","poundage"]))),o.default.createElement("div",{className:"lrls-card"},o.default.createElement(c.Row,{className:"lrls-more-card"},o.default.createElement("span",null,"账户手续费"),o.default.createElement("div",{className:"noTextSwitch"},o.default.createElement(c.Switch,{checked:l,onClick:function(){n(f.changeSearchRunningCalculateCommonString("needUsedPoundage",!l)),l&&(n(f.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,i.fromJS)([]))),n(f.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,i.fromJS)([]))))}}))),o.default.createElement("div",{style:{display:l?"":"none"}},o.default.createElement("div",{className:"lrls-more-card margin-top-bot lrls-jzsy",style:{display:R?"":"none"}},o.default.createElement("label",null,"往来单位:"),T?o.default.createElement(c.Single,{className:"lrls-single",district:w,value:I.get("cardUuid")?""+I.get("cardUuid")+s.TREE_JOIN_STR+I.get("code")+s.TREE_JOIN_STR+I.get("name"):"",onOk:function(e){var t=e.value.split(s.TREE_JOIN_STR),a=t[0],r=t[1],l=t[2];n(f.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,i.fromJS)([{cardUuid:a,name:l,code:r}])))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},I.get("cardUuid")?o.default.createElement("span",null," ",I.get("code")+" "+I.get("name")," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择往来卡片"),o.default.createElement(c.Icon,{type:"triangle"}))):null,o.default.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px"}},o.default.createElement(c.Switch,{checked:T,onClick:function(){e.setState({checkedCurrent:!T}),T||n(f.getApprovalRelativeCardList(S)),n(f.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,i.fromJS)([])))}}))),o.default.createElement("div",{className:"lrls-more-card margin-top-bot lrls-jzsy",style:{display:A?"":"none"}},o.default.createElement("label",null,"项目:"),L?o.default.createElement(c.Single,{className:"lrls-single",district:P,value:O.get("cardUuid")?""+O.get("cardUuid")+s.TREE_JOIN_STR+O.get("code")+s.TREE_JOIN_STR+O.get("name"):"",onOk:function(e){var t=e.value.split(s.TREE_JOIN_STR),a=t[0],r=t[1],l=t[2];n(f.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,i.fromJS)([{cardUuid:a,name:l,code:r}])))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},O.get("cardUuid")?o.default.createElement("span",null," ",N," "):o.default.createElement("span",{className:"lrls-placeholder"},"点击选择项目卡片"),o.default.createElement(c.Icon,{type:"triangle"}))):null,o.default.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px"}},o.default.createElement(c.Switch,{checked:L,onClick:function(){e.setState({checkedProject:!L}),L||n(f.getApprovalProjectCardList(C)),n(f.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,i.fromJS)([])))}}))),o.default.createElement(c.Row,{style:{display:"核记"==a?"none":""}},o.default.createElement("label",null,"收款金额:  "),o.default.createElement(c.Amount,null,E)),o.default.createElement(c.Row,{className:"lrls-more-card"},o.default.createElement("label",null,"手续费:"),o.default.createElement(c.TextListInput,{placeholder:"填写手续费",value:r.get("poundageAmount"),onChange:function(e){if(/^\d*\.?\d{0,2}$/g.test(e)){if(r.getIn(["poundage","poundage"])&&r.getIn(["poundage","poundage"])>0&&Number(e)>r.getIn(["poundage","poundage"]))return void u.toast.info("输入金额不可大于手续费上限");n(f.changeSearchRunningCalculateCommonString(["account","poundageAmount"],e))}}})),o.default.createElement(c.Row,{className:"search-approval-poundage-amount",style:{display:"核记"==a?"":"none"}},o.default.createElement("ul",{className:"INCLUDE"===b?"search-approval-poundage-amount-item search-approval-poundage-amount-item-cur":"search-approval-poundage-amount-item",onClick:function(){n(f.changeSearchRunningCalculateCommonString("handlingFeeType","INCLUDE")),n(f.changeSearchRunningCalculateCommonString(["account","poundageAmount"],k))}},o.default.createElement("li",null,o.default.createElement("span",null,"转出金额："),o.default.createElement("span",null,(0,d.decimal)(Number(E)+Number(k),2,!0))),o.default.createElement("li",null,o.default.createElement("span",null,"到账金额："),o.default.createElement("span",null,(0,d.decimal)(E,2,!0))),o.default.createElement(c.Icon,{className:"search-approval-poundage-check",type:"tick",style:{display:"INCLUDE"===b?"":"none"}})),o.default.createElement("ul",{className:"EXCLUDE"===b?"search-approval-poundage-amount-item search-approval-poundage-amount-item-cur":"search-approval-poundage-amount-item",onClick:function(){n(f.changeSearchRunningCalculateCommonString("handlingFeeType","EXCLUDE")),n(f.changeSearchRunningCalculateCommonString(["account","poundageAmount"],j))}},o.default.createElement("li",null,o.default.createElement("span",null,"转出金额："),o.default.createElement("span",null,(0,d.decimal)(E,2,!0))),o.default.createElement("li",null,o.default.createElement("span",null,"到账金额："),o.default.createElement("span",null,(0,d.decimal)(E-j,2,!0))),o.default.createElement(c.Icon,{className:"search-approval-poundage-check",type:"tick",style:{display:"EXCLUDE"===b?"":"none"}})))))}}]),t}();t.default=h},1493:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(r=o)&&r.__esModule?r:{default:r},c=a(22),u=a(9),s=a(16),d=g(a(10)),p=g(a(25)),f=a(1218),m=g(a(1080));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var h=(0,c.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.oriDate,n=t.beCarryoverOut,r=t.dispatch,l=t.carryoverCategoryList,o=t.carryoverCategoryItem,c=t.usedCarryoverProject,g=t.carryoverProjectCardList,h=t.carryoverProjectList,v=t.propertyCost,y=t.propertyCostList,C=l.toJS();!function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(C);var S=[];y.forEach(function(e){"XZ_SALE"==e?S.push({key:"销售费用",value:"XZ_SALE"}):"XZ_MANAGE"==e?S.push({key:"管理费用",value:"XZ_MANAGE"}):"XZ_FINANCE"==e&&S.push({key:"财务费用",value:"XZ_FINANCE"})});var E=[];h.toJS().forEach(function(e){e.key=e.code+" "+e.name,e.oriName=e.name,e.value=""+e.uuid+p.TREE_JOIN_STR+e.code+p.TREE_JOIN_STR+e.name,f.systemProJectCodeCommon.indexOf(e.code)>-1&&(e.key=e.name),E.push(e)});var b=g.get(0)?g.get(0):(0,u.fromJS)([{}]),_=b.get("code")+" "+b.get("name");f.systemProJectCodeCommon.indexOf(b.get("code"))>-1&&(_=b.get("name"));var T=function(){"XZ_MANAGE"!==v&&"XZ_SALE"!==v&&"XZ_FINANCE"!==v&&(y.size?r(m.changeSearchRunningCalculateCommonString("propertyCost",y.get(0))):r(m.changeSearchRunningCalculateCommonString("propertyCost","")))};return i.default.createElement("div",{className:"lrls-card"},i.default.createElement(s.Row,{className:"lrls-more-card"},i.default.createElement("span",null,"直接成本结转"),i.default.createElement("div",{className:"noTextSwitch"},i.default.createElement(s.Switch,{checked:n,onClick:function(){r(m.changeSearchRunningCalculateCommonString("beCarryoverOut",!n)),r(m.getSearchApprovalCarryoverCategory(a)),n&&(r(m.changeSearchRunningCalculateCommonString("carryoverCategoryItem",null)),r(m.changeSearchRunningCalculateCommonString("usedCarryoverProject",!1)),r(m.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,u.fromJS)([]))))}}))),n?i.default.createElement(s.Row,{className:"lrls-more-card lrls-margin-top"},i.default.createElement("label",null,"处理类别: "),i.default.createElement("div",{className:"antd-single-picker"},i.default.createElement(s.ChosenPicker,{district:C,parentDisabled:!0,value:o&&o.size?o.getIn([0,"relationCategoryName"]):"",onChange:function(t){var a=!0===t.beProject;r(m.changeSearchRunningCalculateCommonString("carryoverCategoryItem",(0,u.fromJS)([{relationCategoryUuid:t.uuid,relationCategoryName:t.name,relationBeProject:a}]))),e.setState({oriTemp:(0,u.fromJS)({categoryType:t.categoryType,handleType:"",oriState:"LB_FYZC"===t.categoryType?"STATE_FY":"",propertyCarryover:t.propertyCarryover})});var n=t.projectRange,l=t.propertyCostList;r(m.changeSearchRunningCalculateCommonString("propertyCostList",(0,u.fromJS)(l))),1===l.length&&r(m.changeSearchRunningCalculateCommonString("propertyCost",l[0])),a?r(m.getSearchApprovalCarrayProjectCardList(n)):(r(m.changeSearchRunningCalculateCommonString("usedCarryoverProject",!1)),r(m.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,u.fromJS)([]))))}},i.default.createElement(s.Row,{className:"lrls-padding lrls-category",onClick:function(e){if(0==l.size)return e.stopPropagation(),d.toast.info("无匹配的处理类别",2)}},i.default.createElement("span",{className:o&&o.size?"":"lrls-placeholder"},o&&o.size?o.getIn([0,"relationCategoryName"]):"请选择处理类别"),i.default.createElement(s.Icon,{type:"triangle"}))))):null,n&&y.size>1?i.default.createElement(s.Row,{className:"lrls-more-card lrls-margin-top"},i.default.createElement("label",null,"费用性质: "),i.default.createElement(s.Single,{className:"lrls-single",district:S,value:v,disabled:"XZ_MANAGE"!==v&&"XZ_SALE"!==v&&"XZ_FINANCE"!==v&&""!==v,onOk:function(e){r(m.changeSearchRunningCalculateCommonString("propertyCost",e.value))}},i.default.createElement(s.Row,{className:"lrls-padding lrls-category"},i.default.createElement("span",{className:v?"XZ_MANAGE"!==v&&"XZ_SALE"!==v&&"XZ_FINANCE"!==v?"lrls-placeholder":"":"lrls-placeholder"},v?f.propertyCostNameJson[v]:"请选择费用性质"),i.default.createElement(s.Icon,{type:"triangle"})))):null,o&&o.size&&o.getIn([0,"relationBeProject"])?i.default.createElement("div",{className:"lrls-more-card lrls-margin-top"},i.default.createElement("label",null,"项目:"),c?i.default.createElement(s.Single,{className:"lrls-single",district:E,value:g&&g.size&&g.getIn([0,"code"])?""+(-1===f.systemProJectCodeCommon.indexOf(g.getIn([0,"code"]))?g.getIn([0,"code"])+" "+g.getIn([0,"name"]):g.getIn([0,"name"])):"",onOk:function(e){var t=e.value.split(p.TREE_JOIN_STR),a=t[0],n=t[1],l=t[2];r(m.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,u.fromJS)([{cardUuid:a,name:l,code:n}])));var o=e.projectProperty;"XZ_CONSTRUCTION"===o?r("INDIRECT"===n?m.changeSearchRunningCalculateCommonString("propertyCost","XZ_JJFY"):"MECHANICAL"===n?m.changeSearchRunningCalculateCommonString("propertyCost","XZ_JXZY"):m.changeSearchRunningCalculateCommonString("propertyCost","XZ_HTCB")):"XZ_PRODUCE"===o?r("ASSIST"===n?m.changeSearchRunningCalculateCommonString("propertyCost","XZ_FZSCCB"):"MAKE"===n?m.changeSearchRunningCalculateCommonString("propertyCost","XZ_ZZFY"):m.changeSearchRunningCalculateCommonString("propertyCost","XZ_SCCB")):T()}},i.default.createElement(s.Row,{className:"lrls-category lrls-padding"},b.get("cardUuid")?i.default.createElement("span",null," ",_," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择项目卡片"),i.default.createElement(s.Icon,{type:"triangle"}))):null,i.default.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px"}},i.default.createElement(s.Switch,{checked:c,onClick:function(){c?(r(m.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,u.fromJS)([{}]))),T()):r(m.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,u.fromJS)([]))),r(m.changeSearchRunningCalculateCommonString("usedCarryoverProject",!c))}}))):null)}}]),t}())||n;t.default=h},1857:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=h(a(0)),l=a(16),o=a(125),i=h(a(1858)),c=h(a(1865)),u=h(a(1868)),s=h(a(1875)),d=h(a(1876)),p=h(a(1877)),f=h(a(1878)),m=h(a(1879)),g=h(a(1880));function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),n(t,[{key:"render",value:function(){return r.default.createElement(l.Container,{className:"search-approval"},r.default.createElement(o.Route,{path:"/searchapproval/index",component:i.default}),r.default.createElement(o.Route,{path:"/searchapproval/approvalpreview",component:c.default}),r.default.createElement(o.Route,{path:"/searchapproval/editapproval",component:u.default}),r.default.createElement(o.Route,{path:"/searchapproval/receiveapproval",component:s.default}),r.default.createElement(o.Route,{path:"/searchapproval/payapproval",component:d.default}),r.default.createElement(o.Route,{path:"/searchapproval/accountapproval",component:f.default}),r.default.createElement(o.Route,{path:"/searchapproval/stockedit",component:m.default}),r.default.createElement(o.Route,{path:"/searchapproval/hidegategorystockcomedit",component:g.default}),r.default.createElement(o.Route,{path:"/searchapproval/bookKeepingapproval",component:p.default}))}}]),t}();t.default=v},1858:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=p(a(0)),o=(a(9),a(31));a(1234);var i=d(a(10)),c=p(a(1860)),u=p(a(1863)),s=d(a(1080));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var f=(0,o.connect)(function(e){return e})(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"componentDidMount",value:function(){i.setTitle({title:"查询审批"}),i.setIcon({showIcon:!1}),i.setRight({show:!1}),"home"===sessionStorage.getItem("prevPage")&&(sessionStorage.removeItem("prevPage"),this.props.dispatch(s.changeSearchApprovalCommonString("currentPageType","ApprovalAll")),this.props.dispatch(s.getApprovalProcessList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:"DATE_TYPE_END",beginDate:null,endDate:null,processCode:"PROCESS_CODE_ALL"},1)),this.props.dispatch(s.getApprovalProcessModelList({dateType:"DATE_TYPE_END",beginDate:null,endDate:null},1)))}},{key:"render",value:function(){var e=this.props,t=(e.allState,e.dispatch,e.homeState,e.searchApprovalState),a=e.history,n=t.getIn(["views","currentPageType"]);return"ApprovalAll"===n?l.default.createElement(c.default,{history:a}):"Detail"===n?l.default.createElement(u.default,{history:a}):l.default.createElement("div",null,"未匹配")}}]),t}())||n;t.default=f},1860:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=g(a(0)),o=a(9),i=a(31);a(1234);var c=m(a(10)),u=a(16),s=g(a(1490)),d=a(1305),p=g(a(1861)),f=m(a(1080));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var h=(0,i.connect)(function(e){return e})(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isSearch:!1,isloadingNext:!1,startY:0,isUpSliding:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"componentDidMount",value:function(){c.setTitle({title:"查询审批"}),c.setIcon({showIcon:!1}),c.setRight({show:!1}),"home"===sessionStorage.getItem("prevPage")&&(sessionStorage.removeItem("prevPage"),this.props.dispatch(f.getApprovalProcessList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:"DATE_TYPE_END",beginDate:null,endDate:null,processCode:"PROCESS_CODE_ALL"},1)),this.props.dispatch(f.getApprovalProcessModelList({dateType:"DATE_TYPE_END",beginDate:null,endDate:null},1)))}}]),r(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.allState,n=t.dispatch,r=t.homeState,i=t.searchApprovalState,c=t.history,m=this.state,g=m.isSearch,h=m.isloadingNext,v=m.startY,y=m.isUpSliding,C=i.get("approvalList"),S=r.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]),E=i.get("views"),b=E.get("beginDate"),_=E.get("endDate"),T=E.get("searchType"),L=E.get("searchContent"),R=E.get("dateType"),A=E.get("processCode"),I=E.get("showChildList"),O=E.get("pageCount"),N=E.get("currentPage"),P=i.get("processModelList"),w=(0,o.fromJS)([]);C.map(function(e,t){e.get("detailList").forEach(function(e){if(1,e.get("jrOriUuid")){var t=e.set("oriUuid",e.get("jrOriUuid"));w=w.push(t)}})});var k=[],j={};P.forEach(function(e){j[e.get("processCode")]=e.get("modelName"),k.push({key:e.get("modelName"),value:e.get("processCode")})});var D=a.get("accountList"),J=D.size?D.getIn([0,"childList"]):(0,o.fromJS)([]);return l.default.createElement(u.Container,{className:"search-approval"},l.default.createElement(s.default,{start:b,end:_,dateSelectList:[{key:"提交日期",value:"DATE_TYPE_START"},{key:"完成日期",value:"DATE_TYPE_END"}],chooseValue:R,onBeginOk:function(t,a){n(f.getApprovalProcessList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:R,beginDate:t,endDate:a,processCode:"PROCESS_CODE_ALL"},1)),n(f.getApprovalProcessModelList({dateType:R,beginDate:t,endDate:a},1)),e.setState({isSearch:!1})},onEndOk:function(t,a){n(f.getApprovalProcessList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:R,beginDate:t,endDate:a,processCode:"PROCESS_CODE_ALL"},1)),n(f.getApprovalProcessModelList({dateType:R,beginDate:t,endDate:a},1)),e.setState({isSearch:!1})},changeChooseValue:function(t){n(f.getApprovalProcessList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:t,beginDate:b,endDate:_,processCode:"PROCESS_CODE_ALL"},1)),n(f.getApprovalProcessModelList({dateType:t,beginDate:b,endDate:_},1)),e.setState({isSearch:!1})}}),l.default.createElement(u.Row,{className:"search-approval-title-wrap"},l.default.createElement("div",{className:"search-approval-title-switch-wrap",style:{display:g?"none":""}},l.default.createElement("ul",{className:"search-approval-title-switch-list"},l.default.createElement("li",{className:"search-approval-title-switch-item-cur"},l.default.createElement("span",null,"审批："),l.default.createElement(u.Single,{className:"search-approval-title-switch-item-single",district:k,value:A,canSearch:!1,onOk:function(e){n(f.getApprovalProcessList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:R,beginDate:b,endDate:_,processCode:e.value},1))}},j[A],l.default.createElement(u.Icon,{type:"triangle",className:"search-approval-title-switch-item-single-triangle"}))),l.default.createElement("li",{className:"search-approval-title-switch-item",onClick:function(){n(f.changeSearchApprovalCommonString("currentPageType","Detail")),n(f.getApprovalProcessDetailList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:"DATE_TYPE_END",beginDate:b,endDate:_,accountingType:"ALL"},1))}},"明细")),l.default.createElement("i",{className:"search-approval-title-switch-i"}),l.default.createElement("div",{className:"search-approval-title-switch-search",onClick:function(){e.setState({isSearch:!0})}},l.default.createElement(u.Icon,{type:"search"}))),l.default.createElement("div",{className:"search-approval-title-search-wrap",style:{display:g?"":"none"}},l.default.createElement(u.Single,{className:"search-approval-title-search-single",district:d.searchTypeStr,value:T,canSearch:!1,onOk:function(e){n(f.changeSearchApprovalCommonString("searchType",e.value))}},d.searchNameStr[T]," ",l.default.createElement(u.Icon,{type:"triangle"})),l.default.createElement("i",{className:"search-approval-title-search-i"}),l.default.createElement("span",{className:"search-approval-title-search-input"},l.default.createElement(u.SearchBar,{placeholder:d.searchNameStr[T]?"搜索"+d.searchNameStr[T]:"",value:L,onChange:function(e){n(f.changeSearchApprovalCommonString("searchContent",e))},onSubmit:function(e){n(f.getApprovalProcessList({searchType:T,searchContent:e,dateType:R,beginDate:b,endDate:_,processCode:A},1))},onCancel:function(){e.setState({isSearch:!1}),n(f.getApprovalProcessList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:R,beginDate:b,endDate:_,processCode:A},1))},onClear:function(){n(f.getApprovalProcessList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:R,beginDate:b,endDate:_,processCode:A},1))}})))),l.default.createElement(u.ScrollView,{className:"needsclick",flex:"1",savePosition:!0,uniqueKey:"ApprovalAll",onTouchStart:function(t){var a=t.touches[0].pageY;e.setState({startY:a})},onTouchEnd:function(t){var a=t.changedTouches[0].pageY;v-a>0&&e.setState({isUpSliding:!0})},onScroll:function(t){var a=t.target.clientHeight,r=t.target.scrollTop,l=t.target.scrollHeight;h||a+r>=l&&N<O&&y&&(e.setState({isloadingNext:!0}),n(f.getApprovalProcessList({searchType:T,searchContent:L,dateType:R,beginDate:b,endDate:_,processCode:A},N+1,null,function(){e.setState({isloadingNext:!1,isUpSliding:!1})})))}},C.map(function(e,t){return l.default.createElement(p.default,{key:t,item:e,dispatch:n,editLrAccountPermission:S,history:c,jrUuidList:w,showChildList:I,addCheckDetailItem:function(e){var t=I.push(e);n(f.changeSearchApprovalCommonString("showChildList",t))},deleteCheckDetailItem:function(e){var t=I.filter(function(t){return t!==e});n(f.changeSearchApprovalCommonString("showChildList",t))},accountSelectList:J})})))}}]),t}())||n;t.default=h},1861:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=s(a(0)),o=a(22),i=a(16),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(10)),u=s(a(1862));function s(e){return e&&e.__esModule?e:{default:e}}var d=(0,o.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.dispatch,n=e.editLrAccountPermission,r=e.history,o=e.jrUuidList,s=e.showChildList,d=e.deleteCheckDetailItem,p=e.addCheckDetailItem,f=e.accountSelectList,m={AMOUNT:"金额",DATE:"日期",ABSTRACT:"摘要",CONTECT:"往来单位",STROCK:"存货",DRPOT:"仓库",CATEGORY:"流水类别","DETAIL-TYPE":"明细类型",ACCOUNT:"账户"},g=t.get("displayMap"),h=[];g.forEach(function(e,t){h.push(t)});var v=s.indexOf(t.get("id"))>-1;return l.default.createElement("div",{className:"approval-all-item-wrap"},l.default.createElement("div",{className:"approval-all-item-container"},l.default.createElement("div",{className:"approval-all-item-main",onClick:function(){c.openLink({url:"https://aflow.dingtalk.com/dingtalk/mobile/homepage.htm?dd_share=false&showmenu=true&dd_progress=false&back=native&corpid="+sessionStorage.getItem("corpId")+"&swfrom=XFN#/approval?procInstId="+t.get("processInstanceId")})}},l.default.createElement("div",{className:"approval-all-item-main-avatar"},t.get("originateAvatar")?l.default.createElement("img",{className:"approval-all-item-main-avatar-img",src:t.get("originateAvatar")}):l.default.createElement("span",{className:"approval-all-item-main-avatar-skeleton"})),l.default.createElement("div",{className:"approval-all-item-main-list"},l.default.createElement("div",{className:"approval-all-item-main-title-wrap"},l.default.createElement("span",{className:"approval-all-item-main-title"},t.get("processTitle")),l.default.createElement("span",{className:"approval-all-item-main-createtime"},t.get("createTime").substr(0,10))),l.default.createElement("ul",{className:"approval-all-item-main-example-list"},h.map(function(e){return l.default.createElement("li",{className:"approval-all-item-main-example-item",key:e},m[e]+": "+g.get(e)," ")})),l.default.createElement("div",{className:"approval-all-item-main-showchild-wrap",onClick:function(e){e.stopPropagation(),v?d(t.get("id")):p(t.get("id"))}},l.default.createElement("span",{className:"approval-all-item-main-showchild-finishtime"},"审批通过时间：",t.get("finishTime").substr(0,10)),l.default.createElement("span",{className:"approval-all-item-main-showchild-icon"},v?"收起":"展开"," ",l.default.createElement(i.Icon,{style:v?{transform:"rotate(180deg)",marginBottom:".1rem"}:"",type:"arrow-down"}))))),v?l.default.createElement(u.default,{detailList:t.get("detailList"),dispatch:a,editLrAccountPermission:n,history:r,jrUuidList:o,accountSelectList:f}):null))}}]),t}())||n;t.default=d},1862:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=c(a(0)),o=a(22),i=c(a(1491));function c(e){return e&&e.__esModule?e:{default:e}}var u=(0,o.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.detailList,a=e.dispatch,n=e.editLrAccountPermission,r=e.history,o=e.jrUuidList,c=e.accountSelectList;return l.default.createElement("div",{className:"approval-all-item-child-list"},t.map(function(e,t){return l.default.createElement(i.default,{key:t,item:e,dispatch:a,editLrAccountPermission:n,history:r,jrUuidList:o,accountSelectList:c})}))}}]),t}())||n;t.default=u},1863:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=v(a(0)),o=a(9),i=a(31);a(1234);var c=h(a(10)),u=a(16),s=v(a(1490)),d=a(1305),p=a(1218),f=a(13),m=v(a(1864)),g=h(a(1080));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}var y=(0,i.connect)(function(e){return e})(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isSearch:!1,multiOperationType:"",selectList:[],isloadingNext:!1,startY:0,isUpSliding:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.allState,n=t.dispatch,r=t.homeState,i=t.history,h=t.searchApprovalState,v=this.state,y=v.isSearch,C=v.multiOperationType,S=v.selectList,E=v.isloadingNext,b=v.isUpSliding,_=v.startY,T=h.get("detailList"),L=r.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]),R=h.get("views"),A=R.get("beginDate"),I=R.get("endDate"),O=R.get("searchType"),N=R.get("searchContent"),P=R.get("dateType"),w=R.get("accountingType"),k=R.get("pageCount"),j=R.get("currentPage"),D=(0,o.fromJS)([]);T.map(function(e,t){if(e.get("jrOriUuid")){var a=e.set("oriUuid",e.get("jrOriUuid"));D=D.push(a)}});var J=a.get("accountList"),M=J.size?J.getIn([0,"childList"]):(0,o.fromJS)([]);return l.default.createElement(u.Container,null,l.default.createElement(s.default,{start:A,end:I,dateSelectList:d.dateTypeStr,chooseValue:P,onBeginOk:function(t,a){n(g.getApprovalProcessDetailList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:P,beginDate:t,endDate:a,accountingType:"ALL"},1)),e.setState({isSearch:!1,multiOperationType:""})},onEndOk:function(t,a){n(g.getApprovalProcessDetailList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:P,beginDate:t,endDate:a,accountingType:"ALL"},1)),e.setState({isSearch:!1,multiOperationType:""})},changeChooseValue:function(t){n(g.getApprovalProcessDetailList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:t,beginDate:A,endDate:I,accountingType:"ALL"},1)),e.setState({isSearch:!1,multiOperationType:""})}}),l.default.createElement(u.Row,{className:"search-approval-title-wrap"},l.default.createElement("div",{className:"search-approval-title-switch-wrap",style:{display:y?"none":""}},l.default.createElement("ul",{className:"search-approval-title-switch-list"},l.default.createElement("li",{className:"search-approval-title-switch-item",onClick:function(){n(g.changeSearchApprovalCommonString("currentPageType","ApprovalAll")),n(g.getApprovalProcessList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:"DATE_TYPE_END",beginDate:A,endDate:I,processCode:"PROCESS_CODE_ALL"},1))}},"审批"),l.default.createElement("li",{className:"search-approval-title-switch-item-cur"},l.default.createElement("span",null,"明细："),l.default.createElement(u.Single,{className:"search-approval-title-switch-item-single",district:d.accountingTypeStr,value:w,canSearch:!1,onOk:function(t){n(g.getApprovalProcessDetailList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:P,beginDate:A,endDate:I,accountingType:t.value},1)),e.setState({multiOperationType:""})}},d.accountingNameStr[w],l.default.createElement(u.Icon,{type:"triangle",className:"search-approval-title-switch-item-single-triangle"})))),l.default.createElement("i",{className:"search-approval-title-switch-i"}),l.default.createElement("div",{className:"search-approval-title-switch-search",onClick:function(){e.setState({isSearch:!0})}},l.default.createElement(u.Icon,{type:"search"}))),l.default.createElement("div",{className:"search-approval-title-search-wrap",style:{display:y?"":"none"}},l.default.createElement(u.Single,{className:"search-approval-title-search-single",district:d.searchTypeStr,value:O,canSearch:!1,onOk:function(t){n(g.changeSearchApprovalCommonString("searchType",t.value)),e.setState({multiOperationType:""})}},d.searchNameStr[O]," ",l.default.createElement(u.Icon,{type:"triangle"})),l.default.createElement("i",{className:"search-approval-title-search-i"}),l.default.createElement("span",{className:"search-approval-title-search-input"},l.default.createElement(u.SearchBar,{placeholder:d.searchNameStr[O]?"搜索"+d.searchNameStr[O]:"",value:N,onChange:function(e){n(g.changeSearchApprovalCommonString("searchContent",e))},onSubmit:function(e){n(g.getApprovalProcessDetailList({searchType:O,searchContent:e,dateType:P,beginDate:A,endDate:I,accountingType:w},1))},onCancel:function(){e.setState({isSearch:!1}),n(g.getApprovalProcessDetailList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:P,beginDate:A,endDate:I,accountingType:w},1))},onClear:function(){n(g.getApprovalProcessDetailList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:P,beginDate:A,endDate:I,accountingType:w},1))}})))),l.default.createElement(u.ScrollView,{className:"needsclick",flex:"1",savePosition:!0,uniqueKey:"ApprovalDetail",onTouchStart:function(t){var a=t.touches[0].pageY;e.setState({startY:a})},onTouchEnd:function(t){var a=t.changedTouches[0].pageY;_-a>0&&e.setState({isUpSliding:!0})},onScroll:function(t){var a=t.target.clientHeight,r=t.target.scrollTop,l=t.target.scrollHeight;E||a+r>=l&&j<k&&b&&(e.setState({isloadingNext:!0}),n(g.getApprovalProcessDetailList({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:P,beginDate:A,endDate:I,accountingType:w},j+1,null,function(){e.setState({isloadingNext:!1,isUpSliding:!1})})))}},T.map(function(t,a){return l.default.createElement(m.default,{key:a,item:t,dispatch:n,history:i,uuidList:D,editLrAccountPermission:L,accountingType:w,multiOperationType:C,addCheckDetailItem:function(t){var a=Array.from(new Set(S.concat(t)));e.setState({selectList:a})},deleteCheckDetailItem:function(t){var a=S.filter(function(e){return-1===t.indexOf(e)});e.setState({selectList:a})},selectList:S,setSelectList:function(t){return e.setState({selectList:t})},accountSelectList:M})})),l.default.createElement(u.Row,{className:"footer",style:{display:"NONE"!==w||C?"none":""}},l.default.createElement(u.ButtonGroup,{style:{height:50}},l.default.createElement(u.Button,{onClick:function(){var t=e,a=[],n=!1,r=!1,l=!1,o=!1,i=!1;T.forEach(function(e){e.get("dealState")||(i=!0,p.hideCategoryCanSelect.indexOf(e.get("jrCategoryType"))>-1?r=!0:(n=!0,p.receiptList.indexOf(e.get("jrCategoryType"))>-1?e.get("jrAmount")>0?o=!0:e.get("jrAmount")<0&&(l=!0):e.get("jrAmount")>0?l=!0:e.get("jrAmount")<0&&(o=!0)))}),o&&a.push("收款"),l&&a.push("付款"),r&&a.push("核记"),n&&a.push("挂账"),i&&a.push("作废"),c.actionSheet({title:"请选择记账类型",cancelButton:"取消",otherButtons:a,onSuccess:function(e){-1!=e.buttonIndex&&t.setState({multiOperationType:a[e.buttonIndex],selectList:[]})}})}},l.default.createElement(u.Icon,{type:"piliangjizhang"}),l.default.createElement("span",null,"批量记账")))),l.default.createElement(u.Row,{className:"footer",style:{display:C?"":"none"}},l.default.createElement(u.ButtonGroup,{style:{height:50}},l.default.createElement(u.Button,{onClick:function(){if("收款"===C){var t=[];T.forEach(function(e){p.receiptList.indexOf(e.get("jrCategoryType"))>-1?e.get("jrAmount")>0&&t.push(e.get("id")):e.get("jrAmount")<0&&t.push(e.get("id"))}),e.setState({selectList:t.length===S.length?[]:t})}else if("付款"===C){var a=[];T.forEach(function(e){p.receiptList.indexOf(e.get("jrCategoryType"))>-1?e.get("jrAmount")<0&&a.push(e.get("id")):e.get("jrAmount")>0&&a.push(e.get("id"))}),e.setState({selectList:a.length===S.length?[]:a})}else if("核记"===C){var n=[];T.forEach(function(e){return p.hideCategoryCanSelect.indexOf(e.get("jrCategoryType"))>-1&&n.push(e.get("id"))}),e.setState({selectList:n.length===S.length?[]:n})}else if("挂账"===C){var r=[];T.forEach(function(e){return-1===p.hideCategoryCanSelect.indexOf(e.get("jrCategoryType"))&&r.push(e.get("id"))}),e.setState({selectList:r.length===S.length?[]:r})}else if("作废"===C){var l=[];T.forEach(function(e){return l.push(e.get("id"))}),e.setState({selectList:l.length===S.length?[]:l})}}},l.default.createElement(u.Icon,{type:"choose"}),l.default.createElement("span",null,"全选")),l.default.createElement(u.Button,{onClick:function(){e.setState({multiOperationType:""})}},l.default.createElement(u.Icon,{type:"cancel"}),l.default.createElement("span",null,"取消")),l.default.createElement(u.Button,{disabled:!L,onClick:function(){if(!S.length)return c.toast.info("请选择明细");if("收款"===C){var t=0,a=!1;T.forEach(function(e){S.indexOf(e.get("id"))>-1&&(p.receiptList.indexOf(e.get("jrCategoryType"))>-1?(e.get("jrAmount")>0&&(t+=e.get("jrAmount")),e.getIn(["account","accountUuid"])&&(a=!0)):e.get("jrAmount")<0&&(t-=e.get("jrAmount")))}),n(g.changeSearchRunningCalculateCommonString("fromPage","")),n(g.changeSearchRunningCalculateCommonString("accountDate",(new f.DateLib).valueOf())),n(g.changeSearchRunningCalculateCommonString("selectList",(0,o.fromJS)(S))),n(g.changeSearchRunningCalculateCommonString("account",null)),n(g.changeSearchRunningCalculateCommonString("receiveAmount",t)),n(g.changeSearchRunningCalculateCommonString("setAccount",!1)),n(g.changeSearchRunningCalculateCommonString("conSetAccount",a)),n(g.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,o.fromJS)([]))),n(g.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,o.fromJS)([]))),i.push("/searchapproval/receiveapproval")}"核记"===C?(n(g.changeSearchRunningCalculateCommonString("fromPage","")),n(g.changeSearchRunningCalculateCommonString("accountDate",(new f.DateLib).valueOf())),n(g.changeSearchRunningCalculateCommonString("selectList",(0,o.fromJS)(S))),i.push("/searchapproval/bookKeepingapproval")):"付款"===C?(n(g.changeSearchRunningCalculateCommonString("fromPage","")),n(g.changeSearchRunningCalculateCommonString("accountDate",(new f.DateLib).valueOf())),n(g.changeSearchRunningCalculateCommonString("selectList",(0,o.fromJS)(S))),n(g.changeSearchRunningCalculateCommonString("account",(0,o.fromJS)({}))),i.push("/searchapproval/payapproval")):"挂账"===C?L&&(n(g.changeSearchRunningCalculateCommonString("fromPage","")),n(g.changeSearchRunningCalculateCommonString("accountDate",(new f.DateLib).valueOf())),n(g.changeSearchRunningCalculateCommonString("selectList",(0,o.fromJS)(S))),n(g.changeSearchRunningCalculateCommonString("beZeroInventory",!1)),i.push("/searchapproval/accountapproval")):"作废"===C&&n(g.disuseApprovalProcessDetailInfo(S,function(){e.setState({multiOperationType:""}),n(g.changeSearchRunningCalculateCommonString("selectList",(0,o.fromJS)([])))}))}},l.default.createElement(u.Icon,{type:"shoufukuan"}),l.default.createElement("span",null,C)))))}}]),t}())||n;t.default=y},1864:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=d(a(0)),o=a(22),i=a(16),c=a(1218),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(10)),s=d(a(1491));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,o.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.dispatch,n=e.editLrAccountPermission,r=e.history,o=e.uuidList,d=(e.accountingType,e.multiOperationType),p=e.addCheckDetailItem,f=e.deleteCheckDetailItem,m=e.selectList,g=e.accountSelectList,h=!1,v=!1,y=!1,C=!1,S=!1;t.get("dealState")||(S=!0,c.hideCategoryCanSelect.indexOf(t.get("jrCategoryType"))>-1?v=!0:(h=!0,c.receiptList.indexOf(t.get("jrCategoryType"))>-1?t.get("jrAmount")>0?C=!0:t.get("jrAmount")<0&&(y=!0):t.get("jrAmount")>0?y=!0:t.get("jrAmount")<0&&(C=!0)));var E=function(e){return"挂账"===e?h:"核记"===e?v:"付款"===e?y:"收款"===e?C:"作废"===e?S:""!==e&&void 0};return l.default.createElement("div",{className:"approval-datail-list-item",onClick:function(){d&&E(d)&&(m.indexOf(t.get("id"))>-1?f([t.get("id")]):p([t.get("id")]))}},l.default.createElement("div",{className:"approval-datail-item-title-wrap"},d?l.default.createElement("span",{className:"approval-datail-item-title-checkbox",style:{display:d?"":"none"}},l.default.createElement(i.Checkbox,{disabled:!E(d),checked:m.indexOf(t.get("id"))>-1})):null,l.default.createElement("span",{className:"approval-datail-item-title",onClick:function(){d||u.openLink({url:"https://aflow.dingtalk.com/dingtalk/mobile/homepage.htm?dd_share=false&showmenu=true&dd_progress=false&back=native&corpid="+sessionStorage.getItem("corpId")+"&swfrom=XFN#/approval?procInstId="+t.get("processInstanceId")})}},t.get("processTitle")),l.default.createElement(i.Icon,{className:"approval-datail-item-title-icon",type:"arrow-right"})),l.default.createElement("div",null,l.default.createElement(s.default,{item:t,dispatch:a,editLrAccountPermission:n,history:r,jrUuidList:o,multiOperationType:d,accountSelectList:g})))}}]),t}())||n;t.default=p},1865:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=v(a(0)),o=a(9),i=a(31);a(1234);var c=h(a(10)),u=a(16),s=a(1218),d=a(1305),p=a(13),f=v(a(1866)),m=v(a(1867)),g=h(a(1080));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var C=(0,i.connect)(function(e){return e})(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=this;if(c.setTitle({title:"预览明细"}),c.setIcon({showIcon:!1}),c.setRight({show:!1}),"TRUE"===sessionStorage.getItem("toCalculate")){sessionStorage.removeItem("toCalculate");var t=this.props.searchApprovalState.getIn(["views","currentPageType"]);"ApprovalAll"===t?this.props.dispatch(g.getApprovalProcessList({refresh:!0},null,function(){var t=e.props.editRunningModalState.get("previewApprovalModalTemp").get("id");e.props.dispatch(g.getApprovalProcessDetailInfo(t,function(){},""))})):"Detail"===t&&this.props.dispatch(g.getApprovalProcessDetailList({refresh:!0},null,function(){var t=e.props.editRunningModalState.get("previewApprovalModalTemp").get("id");e.props.dispatch(g.getApprovalProcessDetailInfo(t,function(){},""))}))}}}]),r(t,[{key:"render",value:function(){var e=this.props,t=e.allState,a=e.dispatch,n=e.homeState,r=e.history,i=e.editRunningModalState,h=n.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]),v=i.get("previewApprovalModalTemp"),C=i.get("categoryData"),S=i.get("jrUuidList"),E=v.get("processTitle"),b=v.get("jrDate"),_=v.get("id"),T=v.get("detailType"),L=v.get("jrAmount"),R=v.get("categoryName"),A=v.get("jrAbstract"),I=v.get("dealState"),O=v.get("account"),N=v.get("inputAccount"),P=v.get("outputAccount"),w=v.get("outputDepot"),k=v.get("inputDepot"),j=v.get("jrCategoryType"),D=v.get("jrCategoryUuid"),J=(j?(0,s.getCategorynameByType)(j):{categoryTypeObj:""}).categoryTypeObj,M=!!J&&C.getIn([J,"beManagemented"]),x=!!J&&C.getIn([J,"beZeroInventory"]),U=v.get("contactList"),B=v.get("projectList"),Y=v.get("stockList"),H=v.get("billList"),F=t.getIn(["taxRate","scale"]),Z=v.getIn(["billList",0,"billType"]),G=O?O.get("accountName"):"",X=i.get("datailUuidList"),V=X.findIndex(function(e){return e.get("id")===_}),z=!1,W=!1,K=s.hideCategoryCanSelect.indexOf(j)>-1;K?W=!0:"LB_XCZC"===j?"SX_FLF"===C.get("propertyPay")?z=C.getIn([J,"beWelfare"]):"SX_QTXC"===C.get("propertyPay")&&(z=C.getIn([J,"beAccrued"])):z=M;var Q=["LB_YYSR","LB_YYZC","LB_FYZC","LB_YYWSR","LB_YYWZC"].indexOf(j)>-1;return"isEnable"==F&&(Q=!1,["bill_special","bill_common"].includes(Z)&&(Q=!0)),"small"==F&&["LB_YYZC","LB_FYZC","LB_YYWZC"].includes(j)&&["","bill_other"].includes(Z)&&(Q=!1,"bill_special"==Z&&(Q=!0)),l.default.createElement(u.Container,{className:"search-approval"},l.default.createElement(u.Row,{className:"date-header-wrap"},l.default.createElement(u.Icon,{className:"running-preview-header-left",type:"last",style:{color:V<=0?"#ccc":""},onClick:function(){V<=0||a(g.getApprovalProcessDetailInfo(X.getIn([V-1,"id"]),function(){},"switch"))}}),l.default.createElement("div",{className:"thirdparty-date-select"},l.default.createElement("span",{className:"thirdparty-date-date"},b?b.replace(/-/g,"/"):"")),l.default.createElement(u.Icon,{className:"running-preview-header-right",type:"next",style:{color:V===X.size-1?"#ccc":""},onClick:function(){V!==X.size-1&&a(g.getApprovalProcessDetailInfo(X.getIn([V+1,"id"]),function(){},"switch"))}})),l.default.createElement(u.ScrollView,{className:"content",flex:"1"},l.default.createElement("div",{className:"search-approval-preview"},I?l.default.createElement(u.Icon,{className:"search-approval-preview-dealState",style:{color:"PROCESS_DISUSE"===I?"#ccc":"#ff8348"},type:{PROCESS_PAYING:"yifukuan",PROCESS_ACCOUNTING:"yiguazhang",PROCESS_BOOK_KEEPING:"yijizhang",PROCESS_DISUSE:"yizuofei",PROCESS_INCOME:"yishoukuan"}[I]}):null,l.default.createElement("div",{className:"search-approval-preview-title-wrap",onClick:function(){c.openLink({url:"https://aflow.dingtalk.com/dingtalk/mobile/homepage.htm?dd_share=false&showmenu=true&dd_progress=false&back=native&corpid="+sessionStorage.getItem("corpId")+"&swfrom=XFN#/approval?procInstId="+v.get("processInstanceId")})}},l.default.createElement("span",{className:"search-approval-preview-title-text"},E||"标题"),l.default.createElement("span",{className:"search-approval-preview-title-icon"},l.default.createElement(u.Icon,{type:"arrow-right"}))),l.default.createElement("h4",{className:"search-approval-preview-type"},T),l.default.createElement("ul",{className:"search-approval-preview-detail-list"},l.default.createElement("li",{className:"search-approval-preview-detail-item"},l.default.createElement("label",{className:"search-approval-preview-detail-label"},"明细日期："),l.default.createElement("span",{className:"search-approval-preview-detail-text"},b)),l.default.createElement("li",{className:"search-approval-preview-detail-item"},l.default.createElement("label",{className:"search-approval-preview-detail-label"},"明细金额："),l.default.createElement("span",{className:"search-approval-preview-detail-text"},l.default.createElement(u.Amount,null,L))),G?l.default.createElement("li",{className:"search-approval-preview-detail-item"},l.default.createElement("label",{className:"search-approval-preview-detail-label"},"明细账户："),l.default.createElement("span",{className:"search-approval-preview-detail-text"},G)):null,-1===s.hideCategoryCanSelect.indexOf(j)?l.default.createElement("li",{className:"search-approval-preview-detail-item"},l.default.createElement("label",{className:"search-approval-preview-detail-label"},"流水类别："),l.default.createElement("span",{className:"search-approval-preview-detail-text"},R)):null,l.default.createElement("li",{className:"search-approval-preview-detail-item"},l.default.createElement("label",{className:"search-approval-preview-detail-label"},"摘要："),l.default.createElement("span",{className:"search-approval-preview-detail-text"},A)),P&&P.get("accountUuid")?l.default.createElement("li",{className:"search-approval-preview-detail-item"},l.default.createElement("label",{className:"search-approval-preview-detail-label"},"转出账户："),l.default.createElement("span",{className:"search-approval-preview-detail-text"},P.get("accountName"))):null,N&&N.get("accountUuid")?l.default.createElement("li",{className:"search-approval-preview-detail-item"},l.default.createElement("label",{className:"search-approval-preview-detail-label"},"转入账户："),l.default.createElement("span",{className:"search-approval-preview-detail-text"},N.get("accountName"))):null,"LB_CHDB"==j&&w&&w.get("uuid")?l.default.createElement("li",{className:"search-approval-preview-detail-item"},l.default.createElement("label",{className:"search-approval-preview-detail-label"},"调出仓库："),l.default.createElement("span",{className:"search-approval-preview-detail-text"},w.get("code")+""+w.get("name"))):null,"LB_CHDB"==j&&k&&k.get("uuid")?l.default.createElement("li",{className:"search-approval-preview-detail-item"},l.default.createElement("label",{className:"search-approval-preview-detail-label"},"调入仓库："),l.default.createElement("span",{className:"search-approval-preview-detail-text"},k.get("code")+""+k.get("name"))):null,U.size?l.default.createElement("li",{className:"search-approval-preview-detail-item"},l.default.createElement("label",{className:"search-approval-preview-detail-label"},"往来单位："),l.default.createElement("div",{className:"search-approval-preview-detail-text-wrap"},U.map(function(e){return l.default.createElement("span",{className:"search-approval-preview-detail-text",key:e.get("code")},e.get("code")+"_"+e.get("name"))}))):null,B.size?l.default.createElement("li",{className:"search-approval-preview-detail-item"},l.default.createElement("label",{className:"search-approval-preview-detail-label"},"项目："),l.default.createElement("div",{className:"search-approval-preview-detail-text-wrap"},B.map(function(e){return l.default.createElement("span",{className:"search-approval-preview-detail-text",key:e.get("code")},s.systemProJectCodeCommon.indexOf(e.get("code"))>-1?""+e.get("name"):e.get("code")+"_"+e.get("name"))}))):null,Y.size?l.default.createElement("li",null,l.default.createElement("div",{style:{display:1==Y.size?"":"none"}},l.default.createElement("div",{className:"search-approval-preview-detail-item"},l.default.createElement("div",{className:"search-approval-preview-detail-label"},"存货："),l.default.createElement("div",{className:"search-approval-preview-detail-text-wrap"},Y.getIn([0,"stockCode"])+" "+Y.getIn([0,"stockName"]))),-1===["LB_CHDB"].indexOf(j)?l.default.createElement("div",{className:"search-approval-preview-detail-item",style:{display:Y.getIn([0,"depotName"])?"":"none"}},l.default.createElement("div",{className:"search-approval-preview-detail-label"},"仓库："),l.default.createElement("div",{className:"search-approval-preview-detail-text-wrap"},Y.getIn([0,"depotCode"])," ",Y.getIn([0,"depotName"]))):null,l.default.createElement("div",{style:{display:Y.getIn([0,"number"])?"":"none"}},l.default.createElement("div",{className:"search-approval-preview-detail-item"},l.default.createElement("div",{className:"search-approval-preview-detail-label"},"数量："),l.default.createElement("div",{className:"search-approval-preview-detail-text-wrap"},(0,p.formatMoney)(Y.getIn([0,"number"]),4,"",!1)+" "+(Y.getIn([0,"unitName"])?Y.getIn([0,"unitName"]):""))),l.default.createElement("div",{className:"search-approval-preview-detail-item"},l.default.createElement("div",{className:"search-approval-preview-detail-label"},"单价："),l.default.createElement("div",{className:"search-approval-preview-detail-text-wrap"},""+(0,p.formatMoney)(Y.getIn([0,"unitPrice"]),4,"",!1))))),l.default.createElement("div",{className:"search-approval-preview-detail-item",style:{display:Y.size>1?"":"none"}},l.default.createElement("div",{className:"search-approval-preview-detail-label"},"存货："),l.default.createElement("div",{className:"search-approval-preview-detail-text-wrap"},"多存货")),l.default.createElement("div",{className:"search-approval-preview-detail-item-bgColor",style:{display:Y.size>1?"":"none"}},Y.map(function(e,t){return l.default.createElement("div",{key:t},l.default.createElement("div",{className:"search-approval-preview-detail-item"},l.default.createElement("div",{className:"search-approval-preview-detail-label"},l.default.createElement("span",{className:"spot"},"• "),"存货："),l.default.createElement("div",{className:"search-approval-preview-detail-text-wrap"},e.get("stockCode")+" "+e.get("stockName"))),-1===["LB_CHDB"].indexOf(j)?l.default.createElement("div",{className:"search-approval-preview-detail-item",style:{display:e.get("depotName")?"":"none"}},l.default.createElement("div",{className:"search-approval-preview-detail-label"},"仓库："),l.default.createElement("div",{className:"search-approval-preview-detail-text-wrap"},e.get("depotCode")," ",e.get("depotName"))):null,l.default.createElement("div",{style:{display:e.get("number")?"":"none"}},l.default.createElement("div",{className:"search-approval-preview-detail-item"},l.default.createElement("div",{className:"search-approval-preview-detail-label"},"数量："),l.default.createElement("div",{className:"search-approval-preview-detail-text-wrap"},(0,p.formatMoney)(e.get("number"),4,"",!1)+" "+(e.get("unitName")?e.get("unitName"):""))),l.default.createElement("div",{className:"search-approval-preview-detail-item"},l.default.createElement("div",{className:"search-approval-preview-detail-label"},"单价："),l.default.createElement("div",{className:"search-approval-preview-detail-text-wrap"},""+(0,p.formatMoney)(e.get("unitPrice"),4,"",!1)))),l.default.createElement("div",{className:"search-approval-preview-detail-item"},l.default.createElement("div",{className:"search-approval-preview-detail-label"},"金额："),l.default.createElement("div",{className:"search-approval-preview-detail-text-wrap"},(0,p.formatMoney)(e.get("amount"),2,""))))}))):null,Q?l.default.createElement(m.default,{billList:H,isEnable:F,categoryType:j,oriState:""}):null)),l.default.createElement(f.default,{item:v,dispatch:a,history:r,uuidList:S,editLrAccountPermission:h})),l.default.createElement(u.Row,{className:"footer"},l.default.createElement(u.ButtonGroup,y({style:{height:50}},"style",{display:I?"none":""}),l.default.createElement(u.Button,{disabled:!h,style:{display:D&&!K&&(-1===s.receiptList.indexOf(j)&&L>0||s.receiptList.indexOf(j)>-1&&L<0)?"":"none"},onClick:function(){if(L>0&&x&&a(g.changeSearchRunningCalculateCommonString("beZeroInventory",x)),O&&O.size&&O.get("accountUuid")){var e=t.get("accountList");(e.size?e.getIn([0,"childList"]):(0,o.fromJS)([])).find(function(e){return e.get("uuid")===O.get("accountUuid")})&&a(g.changeSearchRunningCalculateCommonString("account",(0,o.fromJS)({accountName:O.get("accountName"),accountUuid:O.get("accountUuid")})))}a(g.changeSearchRunningCalculateCommonString("fromPage","modal")),a(g.changeSearchRunningCalculateCommonString("selectList",(0,o.fromJS)([_]))),r.push("/searchapproval/payapproval")}},l.default.createElement(u.Icon,{type:"shoufukuan"}),l.default.createElement("span",null,"付款")),l.default.createElement(u.Button,{disabled:!h,style:{display:D&&!K&&(-1===s.receiptList.indexOf(j)&&L<0||s.receiptList.indexOf(j)>-1&&L>0)?"":"none"},onClick:function(){if(O&&O.size&&O.get("accountUuid")){var e=t.get("accountList"),n=(e.size?e.getIn([0,"childList"]):(0,o.fromJS)([])).find(function(e){return e.get("uuid")===O.get("accountUuid")});if(n){var l={needPoundage:n.get("needPoundage"),poundage:n.get("poundage"),poundageRate:n.get("poundageRate")},i=l.poundage,c=l.poundageRate,u=L>0?L:-L,s=Math.abs(u||0)*c/1e3>i&&i>0?i:Math.abs(u||0)*c/1e3;a(g.changeSearchRunningCalculateCommonString("account",(0,o.fromJS)({accountName:O.get("accountName"),accountUuid:O.get("accountUuid"),poundage:l,poundageAmount:(s||0).toFixed(2)}))),a(g.changeSearchRunningCalculateCommonString("receiveAmount",L>0?L:-L))}}else a(g.changeSearchRunningCalculateCommonString("account",null)),a(g.changeSearchRunningCalculateCommonString("receiveAmount",L>0?L:-L));a(g.changeSearchRunningCalculateCommonString("fromPage","modal")),a(g.changeSearchRunningCalculateCommonString("selectList",(0,o.fromJS)([_]))),r.push("/searchapproval/receiveapproval")}},l.default.createElement(u.Icon,{type:"shoufukuan"}),l.default.createElement("span",null,"收款")),l.default.createElement(u.Button,{disabled:!h,style:{display:D&&!K&&z?"":"none"},onClick:function(){L>0&&x&&a(g.changeSearchRunningCalculateCommonString("beZeroInventory",x)),a(g.changeSearchRunningCalculateCommonString("fromPage","modal")),a(g.changeSearchRunningCalculateCommonString("selectList",(0,o.fromJS)([_]))),r.push("/searchapproval/accountapproval")}},l.default.createElement(u.Icon,{type:"guazhang"}),l.default.createElement("span",null,"挂账")),l.default.createElement(u.Button,{disabled:!h,style:{display:D&&K&&W?"":"none"},onClick:function(){if(P&&P.size&&P.get("accountUuid")){var e=t.get("accountList"),n=(e.size?e.getIn([0,"childList"]):(0,o.fromJS)([])).find(function(e){return e.get("uuid")===P.get("accountUuid")});if(n){var l={needPoundage:n.get("needPoundage"),poundage:n.get("poundage"),poundageRate:n.get("poundageRate")},i=l.poundage,c=l.poundageRate,u=L>0?L:-L,s=Math.abs(u||0)*c/1e3>i&&i>0?i:Math.abs(u||0)*c/1e3;a(g.changeSearchRunningCalculateCommonString("account",(0,o.fromJS)({accountName:P.get("accountName"),accountUuid:P.get("accountUuid"),poundage:l,poundageAmount:(s||0).toFixed(2)}))),a(g.changeSearchRunningCalculateCommonString("receiveAmount",L>0?L:-L))}}else a(g.changeSearchRunningCalculateCommonString("account",null)),a(g.changeSearchRunningCalculateCommonString("receiveAmount",L>0?L:-L));a(g.changeSearchRunningCalculateCommonString("fromPage","modal")),a(g.changeSearchRunningCalculateCommonString("selectList",(0,o.fromJS)([_]))),r.push("/searchapproval/bookKeepingapproval")}},l.default.createElement(u.Icon,{type:"home"}),l.default.createElement("span",null,"核记")),l.default.createElement(u.Button,{disabled:!h,onClick:function(){a(g.disuseApprovalProcessDetailInfo([_],function(){a(g.getApprovalProcessDetailInfo(_,function(){},"switch"))}))}},l.default.createElement(u.Icon,{type:"zuofei"}),l.default.createElement("span",null,"作废")),l.default.createElement(u.Button,{onClick:function(){a(g.clearSearchApprovalTemp()),a(g.beforeEditApprovalProcessDetailInfo(_,function(){r.push("/searchapproval/editapproval")},"switch"))}},l.default.createElement(u.Icon,{type:"adjustment"}),l.default.createElement("span",null,"调整"))),l.default.createElement(u.ButtonGroup,y({style:{height:50}},"style",{display:I?"":"none"}),l.default.createElement(u.Button,{style:{color:"挂账"!==d.showToolTipAccountState[I]||"JR_HANDLE_HALF"!=X.getIn([V,"jrState"])&&"JR_HANDLE_ALL"!=X.getIn([V,"jrState"])?"#222":"#ccc"},disabled:!h,onClick:function(){if("挂账"===d.showToolTipAccountState[I]&&("JR_HANDLE_HALF"==X.getIn([V,"jrState"])||"JR_HANDLE_ALL"==X.getIn([V,"jrState"])))return c.toast.info("有关联的核销流水，无法反挂账");a(g.cancelApprovalProcessDetailInfo([_],function(){a(g.getApprovalProcessDetailInfo(_,function(){},"switch"))}))}},l.default.createElement(u.Icon,{type:"chexiao"}),l.default.createElement("span",null,"反"+d.showToolTipAccountState[I])))))}}]),t}())||n;t.default=C},1866:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(r=o)&&r.__esModule?r:{default:r},c=a(22),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1215)),s=a(16),d=a(1066);var p=(0,c.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.item,n=e.history,r=e.uuidList,l=e.editLrAccountPermission,o=a.get("jrIndex"),c=a.get("jrState"),p=a.get("jrCategoryType"),f={JR_HANDLE_NO:"1",JR_HANDLE_HALF:"2",JR_HANDLE_ALL:"3"},m=a.get("jrOriUuid"),g=a.get("jrJvUuid"),h=a.get("jrAmount"),v=[],y="0",C="0",S="0",E="0",b="0",_="0";"LB_YYSR"!==p&&"LB_YYWSR"!==p||("预收账款"===a.get("detailType")?S=f[c]:a.get("jrAmount")>0?y=f[c]:a.get("jrAmount")<0&&(S=f[c])),"LB_YYZC"!==p&&"LB_YYWZC"!==p&&"LB_FYZC"!==p||("预付账款"===a.get("detailType")?S=f[c]:a.get("jrAmount")>0?C=f[c]:a.get("jrAmount")<0&&(S=f[c])),"LB_XCZC"===p&&(E=f[c]),"LB_ZSKX"===p&&(b=f[c]),"LB_ZFKX"===p&&(_=f[c]);var T={shouldReturn:"退款",pay:"付款",receive:"收款",makeOut:"开票",auth:"认证",carryover:"结转",grant:h>0?"发放":"收款",defray:h>0?"缴纳":"收款",takeBack:"收回",back:"退还"};return[{key:"receive",value:y,toRouter:"SFGL",direction:"debit"},{key:"pay",value:C,toRouter:"SFGL",direction:"credit"},{key:"shouldReturn",value:S,toRouter:"SFGL",direction:"credit"},{key:"makeOut",value:"0",toRouter:"KJFP"},{key:"auth",value:"0",toRouter:"FPRZ"},{key:"carryover",value:"0",toRouter:"JZSY"},{key:"grant",value:E,toRouter:"XCZC"},{key:"defray",value:"0",toRouter:"DEFRAY"},{key:"takeBack",value:b,toRouter:"ZSFKX"},{key:"back",value:_,toRouter:"ZSFKX"}].forEach(function(e){"1"!=e.value&&"2"!=e.value||v.push(i.default.createElement(s.Button,{className:"search-approval-calculate-state-btn",key:e.key,disabled:!l,onClick:function(){sessionStorage.setItem("toCalculate","TRUE"),t(u.getCxlsSingle(n,m,g,e.toRouter,e.direction,"searchApproval",e.key))}},T[e.key]))}),o?i.default.createElement("div",{className:"search-approval-calculate-wrap"},i.default.createElement("div",{className:"search-approval-calculate-jr"},i.default.createElement("div",{className:"search-approval-calculate-jr-index",onClick:function(){t(d.runningPreviewActions.getRunningPreviewBusinessFetch(a.get("jrOriUuid"),a,r,"searchApproval",n))}},i.default.createElement(s.Icon,{type:"liushui",style:{fontSize:".13rem"}})," ",i.default.createElement("span",null,o,"号")),i.default.createElement("div",{className:"search-approval-calculate-jr-oriDate"},i.default.createElement("span",null,a.get("oriDate")),i.default.createElement("i",{className:"approval-all-item-child-separate",style:{display:a.get("jrIndex")?"":"none"}},"|"),i.default.createElement("span",null,"记账员：",a.get("operateUserName")))),i.default.createElement("div",{className:"search-approval-calculate-state"},i.default.createElement("span",{className:"search-approval-calculate-state-jrState"},{JR_HANDLE_NO:"未核销",JR_HANDLE_HALF:"部分核销",JR_HANDLE_ALL:"全部核销"}[c]),v)):null}}]),t}())||n;t.default=p},1867:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(r=o)&&r.__esModule?r:{default:r},c=a(22),u=a(16);var s=(0,c.immutableRenderDecorator)(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.billList,a=e.isEnable,n=e.categoryType,r=e.oriState,l=null;if(t&&t.size){var o=t.getIn([0,"tax"]),c=-1==t.getIn([0,"taxRate"])?"**":t.getIn([0,"taxRate"]),s=t.getIn([0,"billType"]);if("small"==a&&["LB_YYZC","LB_FYZC","LB_YYWZC"].includes(n)&&["","bill_other"].includes(s))return null;if("small"==a&&"STATE_CQZC_YF"==r&&["","bill_other"].includes(s))return null;if("isEnable"==a&&["","bill_other"].includes(s))return null;l=i.default.createElement("li",{className:"search-approval-preview-detail-item"},i.default.createElement("label",{className:"search-approval-preview-detail-label"},"票据："),i.default.createElement("span",{className:"search-approval-preview-detail-text"},"其他票据")),["bill_common","bill_special"].includes(s)&&(l=i.default.createElement("li",{className:"search-approval-preview-detail-item"},i.default.createElement("label",{className:"search-approval-preview-detail-label"},"票据："),i.default.createElement("span",{className:"search-approval-preview-detail-text"},"bill_common"==s?"发票":"增值税发票","(税额:",i.default.createElement(u.Amount,{showZero:!0},o),";税率:",c+"%",")")))}return l}}]),t}())||n;t.default=s},1868:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,l,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=E(a(0)),c=a(9),u=a(31);a(1234);var s=S(a(10)),d=a(123),p=a(16),f=a(1218),m=a(13),g=S(a(25)),h=a(1305),v=E(a(1869)),y=E(a(1874)),C=S(a(1080));function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}var b=(0,u.connect)(function(e){return e})((l=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=a.props.editRunningModalState.get("editRunningModalTemp"),r=a.props.editRunningModalState.get("categoryData"),l=(n.get("jrCategoryType")?(0,f.getCategorynameByType)(n.get("jrCategoryType")):{categoryTypeObj:""}).categoryTypeObj;return a.state={showContact:l&&r.getIn([l,"contactsManagement"])||n.get("beContact"),showProject:r.get("beProject")||n.get("beProject"),currentbillType:n.getIn(["billList",0,"billType"])},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"componentDidMount",value:function(){s.setTitle({title:"调整明细"}),s.setIcon({showIcon:!1}),s.setRight({show:!1})}},{key:"componentWillReceiveProps",value:function(e){if(this.props.editRunningModalState.getIn(["editRunningModalTemp","jrCategoryUuid"])!==e.editRunningModalState.getIn(["editRunningModalTemp","jrCategoryUuid"])){var t=e.editRunningModalState.get("editRunningModalTemp"),a=e.editRunningModalState.get("categoryData"),n=(t.get("jrCategoryType")?(0,f.getCategorynameByType)(t.get("jrCategoryType")):{categoryTypeObj:""}).categoryTypeObj;this.setState({showContact:n&&a.getIn([n,"contactsManagement"])||t.get("beContact"),showProject:a.get("beProject")||t.get("beProject")})}}},{key:"render",value:function(){var e=this.props,t=e.allState,a=e.dispatch,n=e.homeState,r=e.history,l=e.editRunningModalState,o=this.state,u=o.showContact,s=o.showProject,S=o.currentbillType,E=n.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]),b=l.get("editRunningModalTemp"),_=(l.get("categoryData"),b.get("jrCategoryType")),T=t.getIn(["taxRate","scale"]),L=t.getIn(["taxRate","payableRate"]),R=t.getIn(["taxRate","outputRate"]),A=t.getIn(["taxRate","rateOptionList"]),I=_?f.receiptList.indexOf(_)>-1?"RECEIPT":"PAYMENT":"",O=b.get("detailType"),N="销售存货套件"===O||"采购存货套件"===O,P="预付账款"===O||"预收账款"===O,w=[];b.get("canChoseDetailList").forEach(function(e){return w.push({key:e.get("label"),value:e.get("id")+g.TREE_JOIN_STR+e.get("label")})});var k=t.get("accountList"),j=[];(k.size?k.getIn([0,"childList"]):(0,c.fromJS)([])).forEach(function(e){return j.push({key:e.get("name"),value:""+e.get("uuid")+g.TREE_JOIN_STR+e.get("name")})});var D=t.get("runningCategory"),J=b.get("jrDate"),M=b.get("id"),x=b.get("jrAmount"),U=b.get("account"),B=n.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1,Y=n.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("QUANTITY")>-1;return i.default.createElement(p.Container,{className:"edit-running search-approval"},i.default.createElement(d.TopDatePicker,{value:J,callback:function(e){a(C.changeApprovalProcessDetailInfoCommonString("jrDate",e))},onChange:function(e){a(C.changeApprovalProcessDetailInfoCommonString("jrDate",new m.DateLib(e).valueOf()))}}),i.default.createElement(p.ScrollView,{flex:"1"},i.default.createElement(p.Row,{className:"lrls-card"},i.default.createElement(p.Row,{className:"lrls-more-card"},i.default.createElement("label",null,"明细类型:"),i.default.createElement(p.Single,{className:"lrls-single",district:w,value:O||"",disabled:h.suitTypeList.indexOf(O)>-1,onOk:function(e){var t=e.value.split(g.TREE_JOIN_STR);a(C.changeApprovalProcessDetailInfoCommonString("detailId",t[0])),a(C.changeApprovalProcessDetailInfoCommonString("detailType",t[1]))}},i.default.createElement(p.Row,{className:"lrls-category lrls-padding"},O?i.default.createElement("span",null," ",O," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择明细类型"),i.default.createElement(p.Icon,{type:"triangle",style:{color:"#666"}})))),N||"存货调拨套件"===O?null:i.default.createElement(p.Row,{className:"lrls-more-card lrls-margin-top"},i.default.createElement("label",null,"明细金额:"),i.default.createElement(p.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:x,negativeAllowed:"LB_ZZ"!==_&&!P,onChange:function(e){a(C.changeApprovalProcessDetailInfoCommonString("jrAmount",e))}})),"RECEIPT"===I?i.default.createElement(p.Row,{className:"lrls-more-card lrls-margin-top"},i.default.createElement("label",null,"明细账户:"),i.default.createElement(p.Single,{className:"lrls-single",district:j,value:U&&U.size?""+U.get("accountName"):"",onOk:function(e){var t=e.value.split(g.TREE_JOIN_STR);a(C.changeApprovalProcessDetailInfoCommonString("account",(0,c.fromJS)({accountName:t[1],accountUuid:t[0]})))}},i.default.createElement(p.Row,{className:"lrls-category lrls-padding"},U&&U.size?i.default.createElement("span",null," ",""+U.get("accountName")," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择明细账户"),U&&U.size?i.default.createElement(p.Icon,{type:"preview",theme:"filled",style:{color:"#666"},onClick:function(e){e.stopPropagation(),a(C.changeApprovalProcessDetailInfoCommonString("account",null))}}):i.default.createElement(p.Icon,{type:"triangle",style:{color:"#666"}})))):null),f.hideCategoryCanSelect.indexOf(_)>-1?i.default.createElement(y.default,{dispatch:a,editRunningModalState:l,accountSource:j}):i.default.createElement(v.default,{dispatch:a,editRunningModalState:l,scale:T,payableRate:L,outputRate:R,accountList:k,runningCategory:D,enableWarehouse:B,openQuantity:Y,showProject:s,showContact:u,currentbillType:S,accountSource:j,rateOptionList:A})),i.default.createElement(p.Row,{className:"footer"},i.default.createElement(p.ButtonGroup,{style:{height:50}},i.default.createElement(p.Button,{onClick:function(){a(C.getApprovalProcessDetailInfo(M,function(){r.goBack()},"switch"))}},i.default.createElement(p.Icon,{type:"cancel"}),i.default.createElement("span",null,"取消")),i.default.createElement(p.Button,{disabled:!E,onClick:function(){a(C.modifyApprovalProcessDetailInfo(b,function(){a(C.getApprovalProcessDetailInfo(M,function(){r.goBack()},"switch"))}))}},i.default.createElement(p.Icon,{type:"save"}),i.default.createElement("span",null,"保存")))))}}]),t}(),r.displayName="EditApproval",n=l))||n;t.default=b},1869:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=v(a(0)),o=a(22),i=a(9),c=a(16),u=a(1218),s=h(a(25)),d=v(a(1870)),p=v(a(1871)),f=v(a(1872)),m=v(a(1873)),g=h(a(1080));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}var y=(0,o.immutableRenderDecorator)(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showCardModal:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.editRunningModalState,n=e.scale,r=e.payableRate,o=(e.outputRate,e.accountList,e.runningCategory),h=e.enableWarehouse,v=e.openQuantity,y=e.showContact,C=e.showProject,S=e.currentbillType,E=(e.accountSource,e.rateOptionList),b=a.get("editRunningModalTemp"),_=a.get("categoryData"),T=b.get("jrCategoryType"),L=T?u.receiptList.indexOf(T)>-1?"RECEIPT":"PAYMENT":"",R=b.get("detailType"),A="销售存货套件"===R||"采购存货套件"===R,I="预付账款"===R||"预收账款"===R,O=[];b.get("canChoseDetailList").forEach(function(e){return O.push({key:e.get("label"),value:e.get("id")+s.TREE_JOIN_STR+e.get("label")})});var N=_.get("propertyCarryover"),P=(0,u.getSelectJrCategoryList)(o,null,!0,{jrCategoryType:T,payOrReceive:L,isStock:A,isDJ:I});!function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(P);var w=_.get("propertyCostList"),k={GLFY:"管理费用",XSFY:"销售费用",XZ_MANAGE:"管理费用",XZ_SALE:"销售费用",FZSCCB:"辅助生产成本",ZZFY:"制造费用",SCCB:"生产成本",JJFY:"间接费用",JXZY:"机械作业",HTCB:"合同成本"},j=["FZSCCB","ZZFY","SCCB","HTCB","JJFY","JXZY"],D=[];w.forEach(function(e){D.push({value:e,key:k[e]})});var J=b.get("jrAmount"),M=b.get("categoryName"),x=b.get("jrAbstract"),U=b.get("contactList"),B=b.get("projectList"),Y=b.get("stockList"),H=b.get("beContact"),F=b.get("beProject"),Z=b.get("billList"),G=Z.getIn([0,"taxRate"]),X=b.get("jrCostType"),V=(T?(0,u.getCategorynameByType)(T):{categoryTypeObj:""}).categoryTypeObj,z=_.get("beProject"),W=_.get("projectRange"),K=V?_.getIn([V,"contactsRange"]):(0,i.fromJS)([]),Q=V?_.getIn([V,"stockRange"]):(0,i.fromJS)([]),q=a.get("contactSourceCategoryList"),$=a.get("contactSourceCardList"),ee=a.get("projectSourceCategoryList"),te=a.get("projectSourceCardList"),ae=a.get("invetorySourceCategoryList"),ne=a.get("invetorySourceCardList");return l.default.createElement("div",null,l.default.createElement(c.Row,{className:"lrls-card"},l.default.createElement(c.Row,{className:"lrls-type"},l.default.createElement("label",null,"流水类别:"),l.default.createElement(c.ChosenPicker,{disabled:!1,district:P,onChange:function(e){e&&t(g.changeApprovalProcessDetailInfoCategory(e.uuid,e.categoryType,e.name,b))},onCancel:function(){}},l.default.createElement(c.Row,null,l.default.createElement("span",null,M||"")," ",l.default.createElement(c.Icon,{type:"triangle",style:{color:"#666"}}))))),w.size>1&&!I?l.default.createElement(c.Row,{className:"lrls-card"},l.default.createElement(c.Row,{className:"lrls-more-card"},l.default.createElement("label",null,"费用性质:"),l.default.createElement(c.Single,{className:"lrls-single",district:D,value:X?k[X]:"",disabled:j.indexOf(X)>-1,onOk:function(e){t(g.changeApprovalProcessDetailInfoCommonString("jrCostType",{XZ_MANAGE:"GLFY",XZ_SALE:"XSFY"}[e.value]))}},l.default.createElement(c.Row,{className:"lrls-category lrls-padding"},X?l.default.createElement("span",{className:-1===j.indexOf(X)?"":"lrls-placeholder"}," ",k[X]," "):l.default.createElement("span",{className:"lrls-placeholder"},"点击选择费用性质"),l.default.createElement(c.Icon,{type:"triangle",style:{color:"#666"}}))))):null,l.default.createElement(c.Row,{className:"lrls-card"},l.default.createElement("div",{className:"lrls-line"},l.default.createElement("label",null,"摘要："),l.default.createElement(c.TextareaItem,{name:"running-textarea",placeholder:"摘要填写",value:x,onChange:function(e){t(g.changeApprovalProcessDetailInfoCommonString("jrAbstract",e))}}))),y?l.default.createElement(d.default,{history:history,dispatch:t,beContact:H,categoryType:T,contactsRange:K,currentCardList:U,contactSourceCategoryList:q,contactSourceCardList:$}):null,C?l.default.createElement(p.default,{history:history,dispatch:t,projectList:B,projectRange:W,beProject:F,propertyCarryover:N,categoryType:T,openProject:z,jrCostType:X,propertyCostList:w,projectSourceCategoryList:ee,projectSourceCardList:te}):null,A?l.default.createElement(f.default,{dispatch:t,stockList:Y,stockRange:Q,openQuantity:v,usedStock:!0,invetorySourceCategoryList:ae,invetorySourceCardList:ne,cardDisabled:!1,taxRate:G,propertyCarryover:N,isOpenedWarehouse:h,amount:J}):null,"isEnable"==n?null:l.default.createElement(m.default,{dispatch:t,categoryType:T,oriState:"",billList:Z,amount:J,scale:n,payableRate:r,isModify:!0,oriBillType:S,handleType:"",direction:{LB_YYSR:"debit",LB_YYZC:"credit",LB_FYZC:"credit",LB_YYWSR:"debit",LB_YYWZC:"credit"}[T],rateOptionList:E,isDJ:I}))}}]),t}())||n;t.default=y},1870:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=g(o),c=a(9),u=g(a(2)),s=a(16),d=m(a(10)),p=m(a(1068)),f=m(a(1080));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=(r=n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return a=n=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.state={isAll:!0,categoryValue:"ALL"},h(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),l(t,[{key:"componentWillReceiveProps",value:function(e){this.props.categoryType!=e.categoryType&&this.setState({categoryValue:"ALL",isAll:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.beContact,r=t.contactsRange,l=t.currentCardList,o=t.strongListSize,u=t.contactSourceCategoryList,m=t.contactSourceCardList,g=this.state,h=(g.isAll,g.categoryValue),v=this.context.router,y=l.get(0),C=o,S=[{uuid:"ALL",name:"全部",childList:[]}];u&&u.map(function(e){S.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(S);var E=m?m.toJS():[];return E.map(function(e){e.cardName=e.name,e.key=e.code+" "+e.name,e.name=e.key}),i.default.createElement("div",{className:"lrls-card lrls-more-card",style:{height:".45rem"}},i.default.createElement("label",null,n?"往来单位:":"往来单位"),n?i.default.createElement(s.ChosenPicker,{className:"lrls-single",type:"card",title:"请选择往来单位",icon:{type:"current-add",onClick:function(){r.size?a(p.beforeAddManageTypeCardFromEditRunning(r,v.history,"searchApproval")):d.toast.info("请选择往来范围")}},district:S,cardList:E,value:h,cardValue:[y?y.get("cardUuid"):""],onChange:function(t){if(e.setState({categoryValue:t.key}),"ALL"==t.key)return a(f.getRelativeAllCardList(r,"contact",!0)),void e.setState({isAll:!0});e.setState({isAll:!1}),a(f.getRelativeSomeCardList(t.key,!0===t.top?1:""))},onOk:function(e){0!=e.length&&a(f.changeApprovalProcessDetailInfoCommonString("contactList",(0,c.fromJS)([{uuid:e[0].uuid,code:e[0].code,type:"WLDW",name:e[0].cardName}])))}},i.default.createElement(s.Row,{className:"lrls-category lrls-padding"},y?i.default.createElement("span",null," ",y.get("code")+" "+y.get("name")," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择往来单位"),i.default.createElement(s.Icon,{type:"triangle",style:{color:C?"#ccc":"#666"}}))):null,i.default.createElement("div",{className:"noTextSwitch",style:{marginLeft:".06rem"}},i.default.createElement(s.Switch,{checked:n,onClick:function(){a(f.changeApprovalProcessDetailInfoCommonString("beContact",!n))}})))}}]),t}(),n.contextTypes={router:u.default.object},r);t.default=v},1871:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=h(o),c=a(9),u=h(a(2)),s=g(a(10)),d=a(16),p=a(1218),f=g(a(1080)),m=g(a(1068));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=(r=n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return a=n=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.state={isAll:!0,categoryValue:"ALL"},v(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),l(t,[{key:"componentWillReceiveProps",value:function(e){this.props.categoryType!=e.categoryType&&this.setState({categoryValue:"ALL",isAll:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.categoryType,r=t.beProject,l=t.projectRange,o=t.projectList,u=t.propertyCostList,g=t.propertyCarryover,h=(t.oriState,t.openProject),v=t.jrCostType,y=t.projectSourceCategoryList,C=t.projectSourceCardList,S=this.state,E=(S.isAll,S.categoryValue),b=this.context.router,_=!1,T=!1,L=!1;switch(n){case"LB_YYZC":T="SX_FW"==g,L="SX_FW"==g;break;case"LB_FYZC":case"LB_XCZC":_=!0,T=!0,L=!0}var R=[{uuid:"ALL",name:"全部",childList:[]}];y&&y.map(function(e){if(l.includes(e.get("uuid"))){if(["LB_CQZC","LB_JZSY"].includes(n)&&["生产项目","施工项目"].includes(e.get("name")))return;if(["LB_JZCB"].includes(n)&&["生产项目"].includes(e.get("name")))return;R.push(e.toJS())}["LB_CHTRXM","LB_XMJZ"].includes(n)&&R.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(R);var A=C?C.toJS():[];A.map(function(e){e.cardName=e.name,e.key=e.code+" "+e.name,e.name=p.systemProJectCodeCommon.indexOf(e.code)>-1?e.name:e.code+" "+e.name,e.value=e.key}),A=A.filter(function(e){var t=!0;return!_&&e.value.includes("COMNCRD")&&(t=!1),T||!e.value.includes("ASSIST")&&!e.value.includes("MAKE")||(t=!1),L||!e.value.includes("INDIRECT")&&!e.value.includes("MECHANICAL")||(t=!1),["LB_CQZC","LB_JZSY"].includes(n)&&["XZ_PRODUCE","XZ_CONSTRUCTION"].includes(e.projectProperty)&&(t=!1),["LB_JZCB"].includes(n)&&["XZ_PRODUCE"].includes(e.projectProperty)&&(t=!1),t});var I=o&&o.getIn([0,"uuid"]),O=o&&o.getIn([0,"code"]),N=o&&o.getIn([0,"name"]),P=O+" "+N;return p.systemProJectCodeCommon.includes(O)&&(P=N),i.default.createElement(d.Row,{className:"lrls-card lrls-more-card",style:{height:".45rem"}},i.default.createElement("label",null,r?"项目:":"项目"),r?i.default.createElement(d.ChosenPicker,{className:"lrls-single",type:"card",disabled:!1,title:"请选择项目",icon:{type:"project-add",onClick:function(){l.size?a(m.beforeAddProjectCardFromEditRunning(b.history,l,"searchApproval")):s.toast.info("请选择项目范围")}},district:R,cardList:A,value:E,cardValue:[I],onChange:function(t){if(e.setState({categoryValue:t.key}),"ALL"==t.key)return a(f.getProjectAllCardList(l,"project",!0)),void e.setState({isAll:!0});e.setState({isAll:!1}),a(f.getProjectSomeCardList(t.key,!0===t.top?1:""))},onOk:function(e){if(0!=e.length){a(f.changeApprovalProcessDetailInfoCommonString("projectList",(0,c.fromJS)([{uuid:e[0].uuid,code:e[0].code,type:"XM",name:e[0].cardName}])));var t=e[0].projectProperty;if("XZ_PRODUCE"===t)"ASSIST"===e[0].code?a(f.changeApprovalProcessDetailInfoCommonString("jrCostType","FZSCCB")):"MAKE"===e[0].code?a(f.changeApprovalProcessDetailInfoCommonString("jrCostType","ZZFY")):a(f.changeApprovalProcessDetailInfoCommonString("jrCostType","SCCB"));else if("XZ_CONSTRUCTION"==t){var n="HTCB";"INDIRECT"==e[0].code&&(n="JJFY"),"MECHANICAL"==e[0].code&&(n="JXZY"),a(f.changeApprovalProcessDetailInfoCommonString("jrCostType",n))}else if("GLFY"!==v||"XSFY"!==v||"CWFY"!==v)if(u.size){a(f.changeApprovalProcessDetailInfoCommonString("jrCostType",{XZ_MANAGE:"GLFY",XZ_SALE:"XSFY",XZ_FINANCE:"CWFY"}[u.get(0)]))}else a(f.changeApprovalProcessDetailInfoCommonString("jrCostType",""))}}},i.default.createElement(d.Row,{className:"lrls-category lrls-padding"},I?i.default.createElement("span",{className:""}," ",P," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择项目卡片"),i.default.createElement(d.Icon,{type:"triangle",style:{color:"#666"}}))):null,i.default.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px",display:""}},i.default.createElement(d.Switch,{checked:r,onClick:function(){if(h&&0==!r&&(a(f.changeApprovalProcessDetailInfoCommonString("projectList",(0,c.fromJS)([]))),"GLFY"!==v||"XSFY"!==v||"CWFY"!==v))if(u.size){a(f.changeApprovalProcessDetailInfoCommonString("jrCostType",{XZ_MANAGE:"GLFY",XZ_SALE:"XSFY",XZ_FINANCE:"CWFY"}[u.get(0)]))}else a(f.changeApprovalProcessDetailInfoCommonString("jrCostType",""));a(f.changeApprovalProcessDetailInfoCommonString("beProject",!r))}})))}}]),t}(),n.contextTypes={router:u.default.object},r);t.default=y},1872:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=g(o),c=a(9),u=g(a(2)),s=a(16),d=m(a(10)),p=m(a(1080)),f=m(a(1068));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v={decimalZero:!1,decimalPlaces:4},y=(r=n=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return a=n=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.state={isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},h(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),l(t,[{key:"componentWillReceiveProps",value:function(e){this.props.categoryType!=e.categoryType&&this.setState({categoryValue:"ALL",isAll:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.invetorySourceCardList,r=t.invetorySourceCategoryList,l=t.stockList,o=t.cardDisabled,u=t.stockRange,m=t.propertyCarryover,g=t.usedStock,h=t.openQuantity,y=t.isOpenedWarehouse,C=t.taxRate,S=t.amount,E=this.state,b=(E.isAll,E.visible),_=(E.idx,E.categoryValue),T=this.context.router,L=1==l.size,R=[{uuid:"ALL",name:"全部",childList:[]}];r&&r.map(function(e){u.includes(e.get("uuid"))&&R.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(R);var A=n?n.toJS():[];return A.map(function(e){e.cardName=e.name,e.key=e.code+" "+e.name,e.name=e.key}),i.default.createElement("div",{className:u.size?"lrls-card":""},i.default.createElement(s.Row,{className:"lrls-more-card",style:{display:g?"none":""}},i.default.createElement("span",null,g?"存货：":"存货")),i.default.createElement(s.ChosenPicker,{visible:b,type:"card",multiSelect:!0,title:"请选择存货",icon:{type:"inventory-add",onClick:function(){u.size?a(f.beforeAddInventoryCardFromEditRunning(u,T.history,"searchApproval")):d.toast.info("请选择存货范围")}},district:R,cardList:A,value:_,onChange:function(t){if(e.setState({categoryValue:t.key}),"ALL"==t.key)return a(p.getStockAllCardList(u,"stock",!0)),void e.setState({isAll:!0});e.setState({isAll:!1}),a(p.getStockSomeCardList(t.key,!0===t.top?1:""))},onOk:function(e){e.length&&a(p.changeSearchApprovalCommonChargeInvnetory(l,e))},onCancel:function(){e.setState({visible:!1})}},i.default.createElement("span",null)),i.default.createElement("div",{style:{display:"SX_HW"==m||g?"":"none"}},l.map(function(e,t){var r=e.get("stockUuid"),u=e.get("depotUuid"),d=e.get("number")?Number(e.get("number")):0,f=e.get("unitPrice")?Number(e.get("unitPrice")):0,m=e.get("amount")?Number(e.get("amount")):0;return i.default.createElement("div",{key:t,className:"lrls-bottom-line lrls-card-bottom"},i.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},i.default.createElement("span",null,"存货明细(",t+1,")"),i.default.createElement("span",{className:o?"lrls-placeholder":"lrls-blue",style:{display:L?"none":""},onClick:function(){o||a(p.deleteSearchApprovalStock(l,t,C))}},"删除")),i.default.createElement("div",{className:"lrls-more-card",onClick:function(){a(p.changeSearchApprovalString("","currentEditInvetoryIndex",t)),T.history.push("/searchapproval/stockedit")}},i.default.createElement("div",{className:"lrls-single"},i.default.createElement(s.Row,{className:"lrls-more-card lrls-card-bottom"},i.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},i.default.createElement("span",null,"存货:"),i.default.createElement("span",{className:r?"":"lrls-placeholder"},r?e.get("stockCode")+" "+e.get("stockName"):" 未选择")),i.default.createElement("div",{className:"lrls-single overElli lrls-padding-right",style:{display:y?"":"none"}},i.default.createElement("span",null,"仓库:"),i.default.createElement("span",{className:u?"":"lrls-placeholder"},u?e.get("depotCode")+" "+e.get("depotName"):" 未选择"))),i.default.createElement(s.Row,{className:"lrls-more-card lrls-card-bottom"},h?i.default.createElement("div",{style:{display:(n.find(function(t){return t.get("uuid")===e.get("stockUuid")})||(0,c.fromJS)([])).get("isOpenedQuantity")||JSON.parse(e.get("isOpenedQuantity")||!1)?"":"none"},className:"lrls-padding-right"},i.default.createElement("span",null,"数量:"),i.default.createElement(s.Amount,v,d),i.default.createElement("span",null,e.get("unitUuid")?e.get("unitName"):null)):i.default.createElement("div",{style:{display:"none"},className:"lrls-padding-right"}),h?i.default.createElement("div",{style:{display:(n.find(function(t){return t.get("uuid")===e.get("stockUuid")})||(0,c.fromJS)([])).get("isOpenedQuantity")||JSON.parse(e.get("isOpenedQuantity")||!1)?"":"none"},className:"lrls-single overElli lrls-padding-right"},i.default.createElement("span",null,"单价:"),i.default.createElement(s.Amount,v,f)):i.default.createElement("div",{style:{display:"none"},className:"lrls-single overElli lrls-padding-right"}),i.default.createElement("div",{className:"lrls-padding-right"},i.default.createElement("span",null,"金额:"),i.default.createElement(s.Amount,null,m)))),i.default.createElement(s.Icon,{type:"arrow-right"})))})),i.default.createElement("div",{className:"lrls-more-card lrls-margin-top",style:{display:"SX_HW"==m||g?"":"none",fontWeight:"bold"}},i.default.createElement("div",null,"总金额：",i.default.createElement(s.Amount,{showZero:!0},S)),i.default.createElement("div",{className:"lrls-stock-bottom"},i.default.createElement("div",{className:o?"lrls-placeholder":"lrls-blue",onClick:function(){o||e.setState({visible:!0,idx:l.size})}},"+添加存货明细"),i.default.createElement("div",{className:"noTextSwitch",style:{display:"none"}},i.default.createElement(s.Switch,{disabled:o,checked:g,onClick:function(){a(editRunningActions.changeLrlsData(["oriTemp","usedStock"],!g))}})))))}}]),t}(),n.contextTypes={router:u.default.object},r);t.default=y},1873:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),o=(n=l)&&n.__esModule?n:{default:n},i=(a(9),s(a(10))),c=a(16),u=(s(a(183)),s(a(1080)));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return a=n=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.taxRateList=[],d(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),r(t,[{key:"componentDidMount",value:function(){var e=this;this.props.rateOptionList.toJS().forEach(function(t){e.taxRateList.push({key:t+"%",value:t})}),this.taxRateList.push({key:"**%",value:-1})}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.categoryType,n=(e.oriState,e.billList),r=e.amount,l=e.scale,s=e.isModify,d=e.oriBillType,p=e.handleType,f=e.direction,m=e.isDJ,g=n?n.getIn([0,"billType"]):"",h=n?n.getIn([0,"billState"]):"",v=n?n.getIn([0,"taxRate"]):"",y=n?n.getIn([0,"tax"]):"",C=-1==v,S=[],E={bill_other:"其他票据",bill_common:"发票",bill_special:"增值税专用发票"}[g],b=!1;switch(a){case"LB_YYSR":b=!m,S=[{key:"发票",value:"bill_common"},{key:"其他票据",value:"bill_other"}];break;case"LB_YYZC":case"LB_FYZC":("general"==l||s)&&(b=!m,S=[{key:"增值税专用发票",value:"bill_special"},{key:"其他票据",value:"bill_other"}]);break;case"LB_YYWSR":b=!0,S=[{key:"发票",value:"bill_common"},{key:"其他票据",value:"bill_other"}];break;case"LB_YYWZC":("general"==l||s)&&(b=!0,S=[{key:"增值税专用发票",value:"bill_special"},{key:"其他票据",value:"bill_other"}])}return"isEnable"==l&&(b=!1,s&&["bill_special","bill_common"].includes(d)&&(b=!0)),"small"==l&&["LB_YYZC","LB_FYZC","LB_YYWZC"].includes(a)&&["","bill_other"].includes(g)&&(b=!1,s&&"bill_special"==d&&(b=!0)),b?o.default.createElement(c.Row,{className:"lrls-card"},o.default.createElement(c.Row,{className:"yysr-bill"},o.default.createElement("div",{className:"lrls-more-card"},o.default.createElement("label",null,"票据类型:"),o.default.createElement(c.Single,{className:"lrls-single",district:S,value:g,onOk:function(e){t(u.changeApprovalProcessDetailInfoBillCommonString("billType",e.value)),"small"===l?"JR_HANDLE_GJ"!==p&&"debit"===f&&"bill_other"!==e&&t(u.searchApproalBillchange("bill_states_make_out")):"general"===l&&("LB_CQZC"===a?"JR_HANDLE_GJ"===p&&"bill_other"!==e?t(u.searchApproalBillchange("bill_states_auth")):"JR_HANDLE_CZ"===p&&"bill_other"!==e&&t(u.searchApproalBillchange("bill_states_make_out")):"debit"===f&&"bill_other"!==e?t(u.searchApproalBillchange("bill_states_make_out")):"bill_other"!==e&&t(u.searchApproalBillchange("bill_states_auth")))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},o.default.createElement("span",null,E),o.default.createElement(c.Icon,{type:"triangle"})))),"bill_special"==g||"bill_common"==g?o.default.createElement(c.SwitchText,{checked:"bill_states_make_out"===h||"bill_states_auth"===h,checkedChildren:"debit"===f&&"JR_HANDLE_GJ"!==p?"已开票":"已认证",unCheckedChildren:"debit"===f&&"JR_HANDLE_GJ"!==p?"未开票":"未认证",className:"threeTextSwitch",onChange:function(){"small"===l?"debit"===f&&"bill_other"!==g?t("bill_states_make_out"===h?u.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_not_make_out"):u.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_make_out")):"bill_states_auth"===h?t(u.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_not_auth")):"bill_states_not_auth"===h&&t(u.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_auth")):"JR_HANDLE_GJ"===p?t("bill_states_auth"===h?u.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_not_auth"):u.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_auth")):"debit"===f?"bill_other"!==g&&t("bill_states_make_out"===h?u.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_not_make_out"):u.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_make_out")):"bill_other"!==g&&t("bill_states_auth"===h?u.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_not_auth"):u.changeApprovalProcessDetailInfoBillCommonString("billState","bill_states_auth"))}}):null),"bill_other"!=g?o.default.createElement(c.Row,null,o.default.createElement(c.Row,{className:"lrls-more-card lrls-margin-top"},o.default.createElement("label",null,"税率:"),o.default.createElement(c.Single,{className:"lrls-single",district:this.taxRateList,value:v,onOk:function(e){t(u.searchApprovalChangeRunningTaxRate(e.value))}},o.default.createElement(c.Row,{className:"lrls-category lrls-padding"},o.default.createElement("span",null,(-1==v?"**":v)+"%",o.default.createElement("span",{className:"lrls-placeholder",style:{display:C?"none":""}},"(税额：",o.default.createElement(c.Amount,{showZero:!0},y)," 价税合计: ",o.default.createElement(c.Amount,{showZero:!0},r),")")),o.default.createElement(c.Icon,{type:"triangle"})))),o.default.createElement(c.Row,{className:"yysr-amount lrls-margin-top",style:{display:C?"":"none"}},o.default.createElement("label",null,"税额："),o.default.createElement(c.XfInput.BorderInputItem,{mode:"amount",placeholder:"填写金额",value:y,negativeAllowed:!0,onChange:function(e){Math.abs(e)>Math.abs(r)?i.toast.info("税额有误，不允许大于价税合计"):t(u.changeApprovalProcessDetailInfoBillCommonString("tax",e))}}))):null):null}}]),t}();t.default=p},1874:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,l,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=h(a(0)),c=a(22),u=a(9),s=h(a(2)),d=a(16),p=g(a(25)),f=g(a(1080)),m=g(a(1068));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var v={decimalZero:!1,decimalPlaces:4},y=(0,c.immutableRenderDecorator)((l=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showCardModal:!1,isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.editRunningModalState,r=t.accountSource,l=this.state,o=(l.isAll,l.visible),c=l.idx,s=l.categoryValue,g=this.context.router,h=n.get("editRunningModalTemp"),y=n.get("warehouseSourceCategoryList"),C=(n.get("categoryData"),h.get("jrCategoryType")),S=h.get("jrDate"),E=[];h.get("canChoseDetailList").forEach(function(e){return E.push({key:e.get("label"),value:e.get("id")+p.TREE_JOIN_STR+e.get("label")})});var b=h.get("jrAbstract"),_=h.get("inputAccount"),T=h.get("outputAccount"),L=h.get("inputDepot"),R=h.get("outputDepot"),A=n.get("invetorySourceCategoryList"),I=n.get("invetorySourceCardList"),O=h.get("stockList"),N=1==O.size,P=[{uuid:"ALL",name:"全部",childList:[]}];A&&A.map(function(e){P.push(e.toJS())}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(P);var w=I?I.toJS():[];return w.map(function(e){e.cardName=e.name,e.key=e.code+" "+e.name,e.name=e.key}),i.default.createElement("div",null,i.default.createElement(d.Row,{className:"lrls-card"},i.default.createElement("div",{className:"lrls-line"},i.default.createElement("label",null,"摘要："),i.default.createElement(d.TextareaItem,{name:"running-textarea",placeholder:"摘要填写",value:b,onChange:function(e){a(f.changeApprovalProcessDetailInfoCommonString("jrAbstract",e))}}))),"LB_ZZ"===C?i.default.createElement(d.Row,{className:"lrls-card"},i.default.createElement(d.Row,{className:"lrls-more-card lrls-margin-top"},i.default.createElement("label",null,"转出账户:"),i.default.createElement(d.Single,{className:"lrls-single",district:r,value:T&&T.size?""+T.get("accountName"):"",onOk:function(e){var t=e.value.split(p.TREE_JOIN_STR);a(f.changeApprovalProcessDetailInfoCommonString("outputAccount",(0,u.fromJS)({accountName:t[1],accountUuid:t[0]})))}},i.default.createElement(d.Row,{className:"lrls-category lrls-padding"},T&&T.size?i.default.createElement("span",null," ",""+T.get("accountName")," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择明细账户"),T&&T.size?i.default.createElement(d.Icon,{type:"preview",theme:"filled",style:{color:"#666"},onClick:function(e){e.stopPropagation(),a(f.changeApprovalProcessDetailInfoCommonString("outputAccount",null))}}):i.default.createElement(d.Icon,{type:"triangle",style:{color:"#666"}})))),i.default.createElement(d.Row,{className:"lrls-more-card lrls-margin-top"},i.default.createElement("label",null,"转入账户:"),i.default.createElement(d.Single,{className:"lrls-single",district:r,value:_&&_.size?""+_.get("accountName"):"",onOk:function(e){var t=e.value.split(p.TREE_JOIN_STR);a(f.changeApprovalProcessDetailInfoCommonString("inputAccount",(0,u.fromJS)({accountName:t[1],accountUuid:t[0]})))}},i.default.createElement(d.Row,{className:"lrls-category lrls-padding"},_&&_.size?i.default.createElement("span",null," ",""+_.get("accountName")," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择明细账户"),_&&_.size?i.default.createElement(d.Icon,{type:"preview",theme:"filled",style:{color:"#666"},onClick:function(e){e.stopPropagation(),a(f.changeApprovalProcessDetailInfoCommonString("inputAccount",null))}}):i.default.createElement(d.Icon,{type:"triangle",style:{color:"#666"}}))))):null,"LB_CHDB"===C?i.default.createElement("div",{className:"lrls-card"},i.default.createElement("div",{className:"lrls-more-card lrls-bottom"},i.default.createElement("label",null,"调出仓库:"),i.default.createElement(d.Single,{className:"lrls-single",district:y.toJS(),value:R.get("uuid"),onOk:function(e){a(f.changeApprovalProcessDetailInfoCommonString("outputDepot",(0,u.fromJS)(e))),a(f.getSearchApprovalChdbPriceAll(S,e.uuid))}},i.default.createElement(d.Row,{className:"lrls-category lrls-padding"},R.get("uuid")?i.default.createElement("span",null," ",R.get("code")+" "+R.get("name")," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择调出仓库"),i.default.createElement(d.Icon,{type:"triangle"})))),i.default.createElement("div",{className:"lrls-more-card"},i.default.createElement("label",null,"调入仓库:"),i.default.createElement(d.Single,{className:"lrls-single",district:y.toJS(),value:L.get("uuid"),onOk:function(e){a(f.changeApprovalProcessDetailInfoCommonString("inputDepot",(0,u.fromJS)(e)))}},i.default.createElement(d.Row,{className:"lrls-category lrls-padding"},L.get("uuid")?i.default.createElement("span",null," ",L.get("code")+" "+L.get("name")," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择调入仓库"),i.default.createElement(d.Icon,{type:"triangle"}))))):null,"LB_CHDB"===C?i.default.createElement("div",{className:"lrls-card"},i.default.createElement(d.ChosenPicker,{visible:o,type:"card",multiSelect:!0,title:"请选择存货",icon:{type:"inventory-add",onClick:function(){a(m.beforeAddInventoryCardFromEditRunning([],g.history,"searchApproval"))}},district:P,cardList:w,value:s,onChange:function(t){if(e.setState({categoryValue:t.key}),"ALL"==t.key)return a(f.getStockAllCardList([],"hidecategory",!0)),void e.setState({isAll:!0});e.setState({isAll:!1}),a(f.getStockSomeCardList(t.key,!0===t.top?1:""))},onOk:function(e){e.length&&(a(f.changeSearchApprovalCommonChargeInvnetory(O,e)),a(f.getSearchApprovalChdbPrice(c,e)))},onCancel:function(){e.setState({visible:!1})}},i.default.createElement("span",null)),O.map(function(e,t){var n=e.get("isOpenedQuantity"),r=e.get("stockUuid"),l=e.get("number")?Number(e.get("number")):0,o=e.get("unitPrice")?Number(e.get("unitPrice")):0,c=e.get("amount")?Number(e.get("amount")):0;return i.default.createElement("div",{key:t,className:"lrls-bottom-line lrls-card-bottom"},i.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},i.default.createElement("span",null,"存货明细(",t+1,")"),i.default.createElement("span",{className:"lrls-blue",style:{display:N?"none":""},onClick:function(){a(f.deleteSearchApprovalStock(O,t))}},"删除")),i.default.createElement("div",{className:"lrls-more-card",onClick:function(){a(f.changeSearchApprovalString("","currentEditInvetoryIndex",t)),g.history.push("/searchapproval/hidegategorystockcomedit")}},i.default.createElement("div",{className:"lrls-single"},i.default.createElement(d.Row,{className:"lrls-more-card lrls-card-bottom"},i.default.createElement("div",{className:"lrls-single overElli lrls-padding-right"},i.default.createElement("span",null,"存货:"),i.default.createElement("span",{className:r?"":"lrls-placeholder"},r?e.get("stockCode")+" "+e.get("stockName"):" 未选择"))),i.default.createElement(d.Row,{className:"lrls-more-card lrls-card-bottom"},i.default.createElement("div",{style:{display:n?"":"none"},className:"lrls-padding-right lrls-one-third"},i.default.createElement("span",null,"数量:"),i.default.createElement(d.Amount,v,l),i.default.createElement("span",null,e.get("unitUuid")?e.get("unitName"):null)),i.default.createElement("div",{style:{display:n?"":"none"},className:"lrls-single overElli lrls-padding-right"},i.default.createElement("span",null,"单价:"),i.default.createElement(d.Amount,v,o)),i.default.createElement("div",{className:"lrls-padding-right lrls-one-third"},i.default.createElement("span",null,"金额:"),i.default.createElement(d.Amount,null,c)))),i.default.createElement(d.Icon,{type:"arrow-right"})))}),i.default.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold"}},i.default.createElement("div",null),i.default.createElement("div",{className:"lrls-blue",onClick:function(){e.setState({visible:!0,idx:O.size,cardType:"stockCardList"})}},"+添加存货明细"))):null)}}]),t}(),r.contextTypes={router:s.default.object},n=l))||n;t.default=y},1875:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=h(a(0)),o=a(9),i=a(31);a(1234);var c=g(a(25)),u=a(13),s=g(a(10)),d=a(123),p=a(16),f=h(a(1492)),m=g(a(1080));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var v=(0,i.connect)(function(e){return e})(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"componentDidMount",value:function(){s.setTitle({title:"收款信息"}),s.setIcon({showIcon:!1}),s.setRight({show:!1})}},{key:"componentWillUnmount",value:function(){this.props.dispatch(m.changeSearchRunningCalculateCommonString("accountDate",(new u.DateLib).valueOf())),this.props.dispatch(m.changeSearchRunningCalculateCommonString("account",null)),this.props.dispatch(m.changeSearchRunningCalculateCommonString("conSetAccount",!1)),this.props.dispatch(m.changeSearchRunningCalculateCommonString("setAccount",!1)),this.props.dispatch(m.changeSearchRunningCalculateCommonString("needUsedPoundage",!1)),this.props.dispatch(m.changeSearchRunningCalculateCommonString("poundageCurrentList",(0,o.fromJS)([]))),this.props.dispatch(m.changeSearchRunningCalculateCommonString("poundageProjectList",(0,o.fromJS)([]))),this.props.dispatch(m.changeSearchRunningCalculateCommonString("accountProjectRange",(0,o.fromJS)([]))),this.props.dispatch(m.changeSearchRunningCalculateCommonString("accountContactsRange",(0,o.fromJS)([]))),this.props.dispatch(m.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,o.fromJS)([]))),this.props.dispatch(m.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,o.fromJS)([])))}},{key:"render",value:function(){var e=this.props,t=e.allState,a=e.dispatch,n=e.history,r=e.approalAccountState,i=t.get("accountList"),s=[];i.size&&i.getIn([0,"childList"]).forEach(function(e,t){var a=e.toJS();a.key=e.get("name"),a.value=""+e.get("uuid")+c.TREE_JOIN_STR+e.get("name"),s.push(a)});var g=r.get("fromPage"),h=t.get("accountPoundage"),v=r.get("receiveAmount"),y=r.get("conSetAccount"),C=r.get("setAccount"),S=r.get("needUsedPoundage"),E=r.get("poundageCurrentList"),b=r.get("poundageProjectList"),_=r.get("poundageCurrentCardList"),T=r.get("poundageProjectCardList"),L=r.get("accountProjectRange"),R=r.get("accountContactsRange"),A=r.get("accountDate"),I=r.get("selectList"),O=r.get("account"),N=r.getIn(["account","accountName"]),P=r.getIn(["account","accountUuid"]);return l.default.createElement(p.Container,{className:"edit-running search-approval"},l.default.createElement(d.TopDatePicker,{value:A,callback:function(e){var t=new u.DateLib(e).valueOf();a(m.changeSearchRunningCalculateCommonString("accountDate",t))},onChange:function(e){var t=new u.DateLib(e).valueOf();a(m.changeSearchRunningCalculateCommonString("accountDate",t))}}),l.default.createElement(p.ScrollView,{flex:"1"},l.default.createElement(p.Row,{className:"lrls-card"},l.default.createElement(p.Row,{className:"lrls-more-card"},l.default.createElement("label",null,"账户:"),l.default.createElement(p.Single,{district:s,value:""+P+c.TREE_JOIN_STR+N,onOk:function(e){var t=e.value.split(c.TREE_JOIN_STR),n=(0,o.fromJS)({needPoundage:e.needPoundage,poundage:e.poundage,poundageRate:e.poundageRate}),r=n.get("poundage"),l=n.get("poundageRate"),i=v,u=Math.abs(i||0)*l/1e3>r&&r>0?r:Math.abs(i||0)*l/1e3;a(m.changeSearchRunningCalculateCommonString("account",(0,o.fromJS)({accountUuid:t[0],accountName:t[1],poundage:n.toJS(),poundageAmount:(u||0).toFixed(2)}))),n.get("needPoundage")||(a(m.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,o.fromJS)([]))),a(m.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,o.fromJS)([]))))}},l.default.createElement(p.Row,{style:{color:N?"":"#999"},className:"lrls-account lrls-type"},l.default.createElement("span",{className:"overElli"},N||"点击选择账户")," ",l.default.createElement(p.Icon,{type:"triangle",style:{color:"#666"}}))))),l.default.createElement(p.Row,{className:"lrls-card",style:{display:y?"":"none"}},l.default.createElement(p.Row,{className:"lrls-more-card"},l.default.createElement("label",{style:{width:"1rem"}},"批量设置明细账户:"),l.default.createElement("div",{className:"noTextSwitch"},l.default.createElement(p.Switch,{checked:C,onClick:function(){a(m.changeSearchRunningCalculateCommonString("setAccount",!C))}})))),O&&O.getIn(["poundage","needPoundage"])?l.default.createElement(f.default,{dispatch:a,account:O,receiveAmount:v,needUsedPoundage:S,accountPoundage:h,poundageCurrentList:E,poundageProjectList:b,poundageCurrentCardList:_,poundageProjectCardList:T,accountProjectRange:L,accountContactsRange:R}):null),l.default.createElement(p.Row,{className:"footer"},l.default.createElement(p.ButtonGroup,{style:{height:50}},l.default.createElement(p.Button,{onClick:function(){n.goBack()}},l.default.createElement(p.Icon,{type:"cancel"}),l.default.createElement("span",null,"取消")),l.default.createElement(p.Button,{onClick:function(){a(m.receiveApprovalProcessDetailInfo(I,A,"modal"===g||C,S,O,v,function(){"modal"===g&&a(m.getApprovalProcessDetailInfo(I.get(0),function(){},"switch")),n.goBack()}))}},l.default.createElement(p.Icon,{type:"save"}),l.default.createElement("span",null,"保存")))))}}]),t}())||n;t.default=v},1876:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=h(a(0)),o=a(9),i=a(31);a(1234);var c=g(a(25)),u=a(13),s=g(a(10)),d=a(123),p=a(16),f=h(a(1493)),m=g(a(1080));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var v=(0,i.connect)(function(e){return e})(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"componentDidMount",value:function(){s.setTitle({title:"付款信息"}),s.setIcon({showIcon:!1}),s.setRight({show:!1})}},{key:"componentWillUnmount",value:function(){this.props.dispatch(m.changeSearchRunningCalculateCommonString("accountDate",(new u.DateLib).valueOf())),this.props.dispatch(m.changeSearchRunningCalculateCommonString("account",null)),this.props.dispatch(m.changeSearchRunningCalculateCommonString("beCarryoverOut",!1)),this.props.dispatch(m.changeSearchRunningCalculateCommonString("propertyCost","")),this.props.dispatch(m.changeSearchRunningCalculateCommonString("propertyCostList",(0,o.fromJS)([]))),this.props.dispatch(m.changeSearchRunningCalculateCommonString("beZeroInventory",!1)),this.props.dispatch(m.changeSearchRunningCalculateCommonString("carryoverCategoryItem",null)),this.props.dispatch(m.changeSearchRunningCalculateCommonString("usedCarryoverProject",!1)),this.props.dispatch(m.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,o.fromJS)([])))}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.history,n=e.allState,r=e.approalAccountState,i=n.get("accountList"),s=[];i.size&&i.getIn([0,"childList"]).forEach(function(e,t){var a=e.toJS();a.key=e.get("name"),a.value=""+e.get("uuid")+c.TREE_JOIN_STR+e.get("name"),s.push(a)});var g=r.get("fromPage"),h=r.get("account"),v=h?h.get("accountName"):"",y=h?h.get("accountUuid"):"",C=r.get("accountDate"),S=r.get("selectList"),E=r.get("beZeroInventory"),b=r.get("beCarryoverOut"),_=r.get("propertyCost"),T=r.get("propertyCostList"),L=r.get("carryoverCategoryList"),R=r.get("carryoverCategoryItem"),A=r.get("usedCarryoverProject"),I=r.get("carryoverProjectCardList"),O=r.get("carryoverProjectList");return l.default.createElement(p.Container,{className:"edit-running search-approval"},l.default.createElement(d.TopDatePicker,{value:C,callback:function(e){var a=new u.DateLib(e).valueOf();t(m.changeSearchRunningCalculateCommonString("accountDate",a))},onChange:function(e){var a=new u.DateLib(e).valueOf();t(m.changeSearchRunningCalculateCommonString("accountDate",a))}}),l.default.createElement(p.ScrollView,{flex:"1"},l.default.createElement(p.Row,{className:"lrls-card"},l.default.createElement(p.Row,{className:"lrls-more-card"},l.default.createElement("label",null,"账户:"),l.default.createElement(p.Single,{className:"lrls-single",district:s,value:""+y+c.TREE_JOIN_STR+v,onOk:function(e){var a=e.value.split(c.TREE_JOIN_STR);t(m.changeSearchRunningCalculateCommonString("account",(0,o.fromJS)({accountUuid:a[0],accountName:a[1]})))}},l.default.createElement(p.Row,{style:{color:v?"":"#999"},className:"lrls-account lrls-type"},l.default.createElement("span",{className:"overElli"},v||"点击选择账户"),l.default.createElement(p.Icon,{type:"triangle"}))))),E?l.default.createElement(f.default,{oriDate:C,dispatch:t,beCarryoverOut:b,propertyCost:_,propertyCostList:T,carryoverCategoryList:L,carryoverCategoryItem:R,usedCarryoverProject:A,carryoverProjectCardList:I,carryoverProjectList:O}):null),l.default.createElement(p.Row,{className:"footer"},l.default.createElement(p.ButtonGroup,{style:{height:50}},l.default.createElement(p.Button,{onClick:function(){a.goBack()}},l.default.createElement(p.Icon,{type:"cancel"}),l.default.createElement("span",null,"取消")),l.default.createElement(p.Button,{onClick:function(){t(m.payingApprovalProcessDetailInfo(S,h,C,b,R,I,_,function(){"modal"===g&&t(m.getApprovalProcessDetailInfo(S.get(0),function(){},"switch")),a.goBack()}))}},l.default.createElement(p.Icon,{type:"save"}),l.default.createElement("span",null,"保存")))))}}]),t}())||n;t.default=v},1877:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=h(a(0)),o=a(9),i=a(31);a(1234);var c=g(a(25)),u=a(13),s=g(a(10)),d=a(123),p=a(16),f=h(a(1492)),m=g(a(1080));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var v=(0,i.connect)(function(e){return e})(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"componentDidMount",value:function(){s.setTitle({title:"核记信息"}),s.setIcon({showIcon:!1}),s.setRight({show:!1})}},{key:"componentWillUnmount",value:function(){this.props.dispatch(m.changeSearchRunningCalculateCommonString("accountDate",(new u.DateLib).valueOf())),this.props.dispatch(m.changeSearchRunningCalculateCommonString("account",null)),this.props.dispatch(m.changeSearchRunningCalculateCommonString("needUsedPoundage",!1)),this.props.dispatch(m.changeSearchRunningCalculateCommonString("poundageCurrentList",(0,o.fromJS)([]))),this.props.dispatch(m.changeSearchRunningCalculateCommonString("poundageProjectList",(0,o.fromJS)([]))),this.props.dispatch(m.changeSearchRunningCalculateCommonString("accountProjectRange",(0,o.fromJS)([]))),this.props.dispatch(m.changeSearchRunningCalculateCommonString("accountContactsRange",(0,o.fromJS)([]))),this.props.dispatch(m.changeSearchRunningCalculateCommonString("poundageCurrentCardList",(0,o.fromJS)([]))),this.props.dispatch(m.changeSearchRunningCalculateCommonString("poundageProjectCardList",(0,o.fromJS)([])))}},{key:"render",value:function(){var e=this.props,t=e.allState,a=e.dispatch,n=e.history,r=e.approalAccountState,o=t.get("accountList"),i=[];o.size&&o.getIn([0,"childList"]).forEach(function(e,t){var a=e.toJS();a.key=e.get("name"),a.value=""+e.get("uuid")+c.TREE_JOIN_STR+e.get("name"),i.push(a)});var s=r.get("fromPage"),g=t.get("accountPoundage"),h=r.get("receiveAmount"),v=r.get("needUsedPoundage"),y=r.get("poundageCurrentList"),C=r.get("poundageProjectList"),S=r.get("poundageCurrentCardList"),E=r.get("poundageProjectCardList"),b=r.get("accountProjectRange"),_=r.get("accountContactsRange"),T=r.get("handlingFeeType"),L=r.get("accountDate"),R=r.get("selectList"),A=r.get("account");return l.default.createElement(p.Container,{className:"edit-running search-approval"},l.default.createElement(d.TopDatePicker,{value:L,callback:function(e){var t=new u.DateLib(e).valueOf();a(m.changeSearchRunningCalculateCommonString("accountDate",t))},onChange:function(e){var t=new u.DateLib(e).valueOf();a(m.changeSearchRunningCalculateCommonString("accountDate",t))}}),l.default.createElement(p.ScrollView,{flex:"1"},A&&A.getIn(["poundage","needPoundage"])?l.default.createElement(f.default,{type:"核记",dispatch:a,account:A,receiveAmount:h,needUsedPoundage:v,accountPoundage:g,poundageCurrentList:y,poundageProjectList:C,poundageCurrentCardList:S,poundageProjectCardList:E,accountProjectRange:b,accountContactsRange:_,handlingFeeType:T}):null),l.default.createElement(p.Row,{className:"footer"},l.default.createElement(p.ButtonGroup,{style:{height:50}},l.default.createElement(p.Button,{onClick:function(){n.goBack()}},l.default.createElement(p.Icon,{type:"cancel"}),l.default.createElement("span",null,"取消")),l.default.createElement(p.Button,{onClick:function(){a(m.bookKeepingApprovalProcessDetailInfo(R,L,function(){"modal"===s&&a(m.getApprovalProcessDetailInfo(R.get(0),function(){},"switch")),n.goBack()}))}},l.default.createElement(p.Icon,{type:"save"}),l.default.createElement("span",null,"保存")))))}}]),t}())||n;t.default=v},1878:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=g(a(0)),o=a(9),i=a(31);a(1234);var c=a(13),u=m(a(10)),s=a(123),d=a(16),p=g(a(1493)),f=m(a(1080));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var h=(0,i.connect)(function(e){return e})(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"componentDidMount",value:function(){u.setTitle({title:"挂账信息"}),u.setIcon({showIcon:!1}),u.setRight({show:!1})}}]),r(t,[{key:"componentWillUnmount",value:function(){this.props.dispatch(f.changeSearchRunningCalculateCommonString("accountDate",(new c.DateLib).valueOf())),this.props.dispatch(f.changeSearchRunningCalculateCommonString("beCarryoverOut",!1)),this.props.dispatch(f.changeSearchRunningCalculateCommonString("propertyCost","")),this.props.dispatch(f.changeSearchRunningCalculateCommonString("propertyCostList",(0,o.fromJS)([]))),this.props.dispatch(f.changeSearchRunningCalculateCommonString("beZeroInventory",!1)),this.props.dispatch(f.changeSearchRunningCalculateCommonString("carryoverCategoryItem",null)),this.props.dispatch(f.changeSearchRunningCalculateCommonString("usedCarryoverProject",!1)),this.props.dispatch(f.changeSearchRunningCalculateCommonString("carryoverProjectCardList",(0,o.fromJS)([])))}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.history,n=e.approalAccountState,r=n.get("accountDate"),o=n.get("selectList"),i=n.get("fromPage"),u=n.get("beZeroInventory"),m=n.get("beCarryoverOut"),g=n.get("propertyCost"),h=n.get("propertyCostList"),v=n.get("carryoverCategoryList"),y=n.get("carryoverCategoryItem"),C=n.get("usedCarryoverProject"),S=n.get("carryoverProjectCardList"),E=n.get("carryoverProjectList");return l.default.createElement(d.Container,{className:"edit-running search-approval"},l.default.createElement(s.TopDatePicker,{value:r,callback:function(e){var a=new c.DateLib(e).valueOf();t(f.changeSearchRunningCalculateCommonString("accountDate",a))},onChange:function(e){var a=new c.DateLib(e).valueOf();t(f.changeSearchRunningCalculateCommonString("accountDate",a))}}),l.default.createElement(d.ScrollView,{flex:"1"},u?l.default.createElement(p.default,{oriDate:r,dispatch:t,beCarryoverOut:m,propertyCost:g,propertyCostList:h,carryoverCategoryList:v,carryoverCategoryItem:y,usedCarryoverProject:C,carryoverProjectCardList:S,carryoverProjectList:E}):null),l.default.createElement(d.Row,{className:"footer"},l.default.createElement(d.ButtonGroup,{style:{height:50}},l.default.createElement(d.Button,{onClick:function(){a.goBack()}},l.default.createElement(d.Icon,{type:"cancel"}),l.default.createElement("span",null,"取消")),l.default.createElement(d.Button,{onClick:function(){t(f.accountingApprovalProcessDetailInfo(o,r,m,y,S,g,function(){"modal"===i&&t(f.getApprovalProcessDetailInfo(o.get(0),function(){},"switch")),a.goBack()}))}},l.default.createElement(d.Icon,{type:"save"}),l.default.createElement("span",null,"保存")))))}}]),t}())||n;t.default=h},1879:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(0),c=(r=i)&&r.__esModule?r:{default:r},u=a(31),s=a(9),d=h(a(10)),p=a(16),f=a(1218),m=(a(13),h(a(1080))),g=h(a(1068));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var v=(0,u.connect)(function(e){return e})(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isAll:!0,visible:!1,categoryValue:"ALL"},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),o(t,[{key:"componentDidMount",value:function(){d.setTitle({title:"存货明细"}),d.setIcon({showIcon:!1}),d.setRight({show:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.history,r=t.homeState,o=t.editRunningModalState,i=this.state,u=i.visible,h=i.categoryValue,v=o.get("currentEditInvetoryIndex");console.log("idx",v);var y=o.get("categoryData"),C=o.get("editRunningModalTemp"),S=C.get("stockList"),E=C.get("billList").getIn([0,"taxRate"]),b=S.get(v),_=o.get("invetorySourceCategoryList"),T=o.get("invetorySourceCardList"),L=o.get("warehouseSourceCategoryList"),R=o.get("allInvetoryList"),A=r.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1,I=r.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("QUANTITY")>-1,O=C.get("jrCategoryType"),N=(O?(0,f.getCategorynameByType)(O):{categoryTypeObj:""}).categoryTypeObj,P=N?y.getIn([N,"stockRange"]):(0,s.fromJS)([]),w=_,k=L,j=[{uuid:"ALL",name:"全部",childList:[]}],D=T?T.toJS():[],J=S.size;w.map(function(e){P.includes(e.get("uuid"))&&j.push(e.toJS())}),D.map(function(e){e.cardName=e.name,e.key=e.code+" "+e.name,e.name=e.key});!function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(j);var M=v-1,x=v+1,U=[],B=b.get("stockUuid");if(I){var Y=!0,H=!1,F=void 0;try{for(var Z,G=D[Symbol.iterator]();!(Y=(Z=G.next()).done);Y=!0){var X=Z.value;if(X.isOpenedQuantity&&X.uuid==B){U.push({key:X.unit.name,value:X.unit.uuid}),X.unit.unitList.map(function(e){U.push({key:e.name,value:e.uuid})}),X.unitPriceList&&X.unitPriceList;break}}}catch(e){H=!0,F=e}finally{try{!Y&&G.return&&G.return()}finally{if(H)throw F}}}return c.default.createElement(p.Container,{className:"edit-running"},c.default.createElement(p.ChosenPicker,{visible:u,type:"card",title:"请选择存货",icon:{type:"inventory-add",onClick:function(){P.size?a(g.beforeAddInventoryCardFromEditRunning(P,n,"searchApproval")):d.toast.info("请选择存货范围")}},district:j,cardList:D,value:h,onChange:function(t){if(e.setState({categoryValue:t.key}),"ALL"==t.key)return a(m.getStockAllCardList(P,"stock",!0)),e.setState({isAll:!0});e.setState({isAll:!1}),a(m.getStockSomeCardList(t.key,!0===t.top?1:""))},onOk:function(e){if(e.length){var t=e[0],n=t.uuid,r=t.code,o=t.cardName,i=t.isOpenedQuantity,c={stockUuid:n,stockName:o,stockCode:r,amount:b.get("amount"),isOpenedQuantity:i,depotUuid:b.get("depotUuid"),depotCode:b.get("depotCode"),depotName:b.get("depotName")};if(t.priceList&&t.priceList.length){var u="",d="";t.unit.uuid===t.priceList[0].unitUuid?(d=t.unit.name,u=t.unit.uuid):t.unit.unitList.forEach(function(e){e.uuid===t.priceList[0].unitUuid&&(d=e.name,u=e.uuid)}),a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v],(0,s.fromJS)(l({},c,{unitPrice:t.priceList[0].defaultPrice,unitUuid:u,unitName:d}))))}else t.unit&&!t.unit.unitList.length?(a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"unitName"],t.unit.name)),a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"unitUuid"],t.unit.uuid)),a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v],(0,s.fromJS)(l({},c,{unitUuid:t.unit.uuid,unitName:t.unit.name}))))):a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v],(0,s.fromJS)(l({},c))))}},onCancel:function(){e.setState({visible:!1})}},c.default.createElement("span",null)),c.default.createElement(p.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll"},c.default.createElement("div",{className:"lrls-card"},c.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},c.default.createElement("span",null,"存货明细(",v+1,")")),c.default.createElement("div",{className:"lrls-more-card lrls-bottom"},c.default.createElement("label",null,"存货:"),c.default.createElement("div",{className:"lrls-single",onClick:function(){e.setState({visible:!0})}},c.default.createElement(p.Row,{className:"lrls-category lrls-padding"},b.get("stockUuid")?c.default.createElement("span",null," ",b.get("stockCode")+" "+b.get("stockName")," "):c.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),c.default.createElement(p.Icon,{type:"triangle",color:""})))),A?c.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:A?"":"none"}},c.default.createElement("label",null,"仓库:"),c.default.createElement(p.Single,{className:"lrls-single",district:k?k.toJS():[],value:b.get("depotUuid"),onOk:function(e){var t=e.uuid,n=e.code,r=e.name;a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"depotUuid"],t)),a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"depotCode"],n)),a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"depotName"],r))}},c.default.createElement(p.Row,{className:"lrls-category lrls-padding"},b.get("depotUuid")?c.default.createElement("span",null," ",b.get("depotCode")," ",b.get("depotName")," "):c.default.createElement("span",{className:"lrls-placeholder"},"点击选择仓库卡片"),c.default.createElement(p.Icon,{type:"triangle"})))):null,I?c.default.createElement(p.Row,{className:"yysr-amount lrls-bottom",style:{display:(R.find(function(e){return e.get("uuid")===b.get("stockUuid")})||(0,s.fromJS)([])).get("isOpenedQuantity")||JSON.parse(b.get("isOpenedQuantity")||!1)?"":"none"}},c.default.createElement("label",null,"数量:"),c.default.createElement(p.XfInput.BorderInputItem,{mode:"number",placeholder:"填写数量",tipTit:"数量",value:b.get("number"),negativeAllowed:!0,onChange:function(e){if(a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"number"],e)),b.get("unitPrice")>0){var t=((e||0)*b.get("unitPrice")).toFixed(2);a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"amount"],t)),a(m.autoCalculateStockAmount()),E&&a(m.searchApprovalChangeRunningTaxRate(E))}}}),c.default.createElement(p.Single,{className:"lrls-single",district:U,value:b.get("unitUuid"),onOk:function(e){var t=e.value,n=e.key;a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"unitUuid"],t)),a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"unitName"],n));var r=(((R.find(function(e){return e.get("uuid")===b.get("stockUuid")})||(0,s.fromJS)([])).get("unitPriceList")||[]).find(function(e){return e.get("unitUuid")===t})||(0,s.fromJS)({})).get("defaultPrice")||0;if(r&&a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"unitPrice"],r)),r&&""!==b.get("number")){var l=((b.get("number")||0)*r).toFixed(2);a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"amount"],l)),a(m.autoCalculateStockAmount()),E&&a(m.searchApprovalChangeRunningTaxRate(E))}}},c.default.createElement(p.Row,{className:"lrls-account lrls-type"},b.get("unitUuid")?c.default.createElement("span",null," ",b.get("unitName")," "):c.default.createElement("span",{className:"lrls-placeholder"},"选择数量单位"),c.default.createElement(p.Icon,{type:"triangle"})))):null,I?c.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:(R.find(function(e){return e.get("uuid")===b.get("stockUuid")})||(0,s.fromJS)([])).get("isOpenedQuantity")||JSON.parse(b.get("isOpenedQuantity")||!1)?"":"none"}},c.default.createElement("label",null,"单价:"),c.default.createElement(p.XfInput.BorderInputItem,{placeholder:"请填写单价",mode:"number",tipTit:"单价",value:b.get("unitPrice"),onChange:function(e){if(a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"unitPrice"],e)),""!==b.get("number")){var t=((e||0)*b.get("number")).toFixed(2);a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"amount"],t)),a(m.autoCalculateStockAmount()),E&&a(m.searchApprovalChangeRunningTaxRate(E))}}})):null,c.default.createElement("div",{className:"lrls-more-card",onClick:function(){B||d.toast.info("请先选择存货卡片")}},c.default.createElement("label",null,"金额:"),c.default.createElement(p.XfInput.BorderInputItem,{mode:"amount",disabled:!B,placeholder:"请填写金额",negativeAllowed:!0,value:b.get("amount"),onChange:function(e){if(a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"amount"],e)),a(m.autoCalculateStockAmount()),E&&a(m.searchApprovalChangeRunningTaxRate(E)),e>0&&b.get("number")<0||e<0&&b.get("number")>0){var t=parseFloat(((e||0)/-b.get("number")).toFixed(4));a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"number"],-b.get("number"))),a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"unitPrice"],t))}else if(b.get("number")>0||b.get("number")<0){var n=parseFloat(((e||0)/b.get("number")).toFixed(4));a(m.changeSearchApprovalString("editRunningModalTemp",["stockList",v,"unitPrice"],n))}}})))),c.default.createElement(p.ButtonGroup,null,c.default.createElement(p.Button,{disabled:M<=-1,onClick:function(){a(m.changeSearchApprovalString("","currentEditInvetoryIndex",M))}},c.default.createElement(p.Icon,{type:"arrow-right",style:{transform:"rotate(180deg)"}}),c.default.createElement("span",null,"上一明细")),c.default.createElement(p.Button,{onClick:function(){n.goBack()}},c.default.createElement(p.Icon,{type:"confirm"}),c.default.createElement("span",null,"确定")),c.default.createElement(p.Button,{disabled:x==J,onClick:function(){a(m.changeSearchApprovalString("","currentEditInvetoryIndex",x))}},c.default.createElement("span",null,"下一明细"),c.default.createElement(p.Icon,{type:"arrow-right"}))))}}]),t}())||n;t.default=v},1880:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(0),c=(r=i)&&r.__esModule?r:{default:r},u=a(31),s=a(9),d=g(a(10)),p=a(16),f=(a(1218),a(13),g(a(1080))),m=g(a(1068));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var h=(0,u.connect)(function(e){return e})(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isAll:!0,visible:!1,categoryValue:"ALL"},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),o(t,[{key:"componentDidMount",value:function(){d.setTitle({title:"存货明细"}),d.setIcon({showIcon:!1}),d.setRight({show:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.history,r=t.homeState,o=t.editRunningModalState,i=this.state,u=i.visible,g=i.categoryValue,h=o.get("currentEditInvetoryIndex");console.log("idx",h);o.get("categoryData");var v=o.get("editRunningModalTemp"),y=v.get("stockList"),C=v.get("billList").getIn([0,"taxRate"]),S=y.get(h),E=o.get("invetorySourceCategoryList"),b=o.get("invetorySourceCardList"),_=(o.get("warehouseSourceCategoryList"),o.get("allInvetoryList")),T=(r.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE"),r.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("QUANTITY")>-1),L=(v.get("jrCategoryType"),E),R=[{uuid:"ALL",name:"全部",childList:[]}],A=b?b.toJS():[],I=y.size;L.map(function(e){R.push(e.toJS())}),A.map(function(e){e.cardName=e.name,e.key=e.code+" "+e.name,e.name=e.key});!function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(R);var O=h-1,N=h+1,P=[],w=S.get("stockUuid");if(T){var k=!0,j=!1,D=void 0;try{for(var J,M=A[Symbol.iterator]();!(k=(J=M.next()).done);k=!0){var x=J.value;if(x.isOpenedQuantity&&x.uuid==w){P.push({key:x.unit.name,value:x.unit.uuid}),x.unit.unitList.map(function(e){P.push({key:e.name,value:e.uuid})}),x.unitPriceList&&x.unitPriceList;break}}}catch(e){j=!0,D=e}finally{try{!k&&M.return&&M.return()}finally{if(j)throw D}}}return c.default.createElement(p.Container,{className:"edit-running"},c.default.createElement(p.ChosenPicker,{visible:u,type:"card",title:"请选择存货",icon:{type:"inventory-add",onClick:function(){a(m.beforeAddInventoryCardFromEditRunning([],n,"searchApproval"))}},district:R,cardList:A,value:g,onChange:function(t){if(e.setState({categoryValue:t.key}),"ALL"==t.key)return a(f.getStockAllCardList([],"hidecategory",!0)),e.setState({isAll:!0});e.setState({isAll:!1}),a(f.getStockSomeCardList(t.key,!0===t.top?1:""))},onOk:function(e){if(e.length){var t=e[0],n=t.uuid,r=t.code,o=t.cardName,i=t.isOpenedQuantity,c={stockUuid:n,stockName:o,stockCode:r,amount:S.get("amount"),isOpenedQuantity:i,depotUuid:S.get("depotUuid"),depotCode:S.get("depotCode"),depotName:S.get("depotName")};if(t.priceList&&t.priceList.length){var u="",d="";t.unit.uuid===t.priceList[0].unitUuid?(d=t.unit.name,u=t.unit.uuid):t.unit.unitList.forEach(function(e){e.uuid===t.priceList[0].unitUuid&&(d=e.name,u=e.uuid)}),a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h],(0,s.fromJS)(l({},c,{unitPrice:t.priceList[0].defaultPrice,unitUuid:u,unitName:d}))))}else t.unit&&!t.unit.unitList.length?(a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"unitName"],t.unit.name)),a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"unitUuid"],t.unit.uuid)),a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h],(0,s.fromJS)(l({},c,{unitUuid:t.unit.uuid,unitName:t.unit.name}))))):a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h],(0,s.fromJS)(l({},c))));a(f.getSearchApprovalChdbPrice(h,e))}},onCancel:function(){e.setState({visible:!1})}},c.default.createElement("span",null)),c.default.createElement(p.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll"},c.default.createElement("div",{className:"lrls-card"},c.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},c.default.createElement("span",null,"存货明细(",h+1,")")),c.default.createElement("div",{className:"lrls-more-card lrls-bottom"},c.default.createElement("label",null,"存货:"),c.default.createElement("div",{className:"lrls-single",onClick:function(){e.setState({visible:!0})}},c.default.createElement(p.Row,{className:"lrls-category lrls-padding"},S.get("stockUuid")?c.default.createElement("span",null," ",S.get("stockCode")+" "+S.get("stockName")," "):c.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),c.default.createElement(p.Icon,{type:"triangle",color:""})))),T?c.default.createElement(p.Row,{className:"yysr-amount lrls-bottom",style:{display:(_.find(function(e){return e.get("uuid")===S.get("stockUuid")})||(0,s.fromJS)([])).get("isOpenedQuantity")||JSON.parse(S.get("isOpenedQuantity")||!1)?"":"none"}},c.default.createElement("label",null,"数量:"),c.default.createElement(p.XfInput.BorderInputItem,{mode:"number",placeholder:"填写数量",tipTit:"数量",value:S.get("number"),negativeAllowed:!0,onChange:function(e){if(a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"number"],e)),S.get("unitPrice")>0){var t=((e||0)*S.get("unitPrice")).toFixed(2);a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"amount"],t)),a(f.autoCalculateStockAmount()),C&&a(f.searchApprovalChangeRunningTaxRate(C))}}}),c.default.createElement(p.Single,{className:"lrls-single",district:P,value:S.get("unitUuid"),onOk:function(e){var t=e.value,n=e.key;a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"unitUuid"],t)),a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"unitName"],n));var r=(((_.find(function(e){return e.get("uuid")===S.get("stockUuid")})||(0,s.fromJS)([])).get("unitPriceList")||[]).find(function(e){return e.get("unitUuid")===t})||(0,s.fromJS)({})).get("defaultPrice")||0;if(r&&a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"unitPrice"],r)),r&&""!==S.get("number")){var l=((S.get("number")||0)*r).toFixed(2);a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"amount"],l)),a(f.autoCalculateStockAmount()),C&&a(f.searchApprovalChangeRunningTaxRate(C))}}},c.default.createElement(p.Row,{className:"lrls-account lrls-type"},S.get("unitUuid")?c.default.createElement("span",null," ",S.get("unitName")," "):c.default.createElement("span",{className:"lrls-placeholder"},"选择数量单位"),c.default.createElement(p.Icon,{type:"triangle"})))):null,T?c.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:(_.find(function(e){return e.get("uuid")===S.get("stockUuid")})||(0,s.fromJS)([])).get("isOpenedQuantity")||JSON.parse(S.get("isOpenedQuantity")||!1)?"":"none"}},c.default.createElement("label",null,"单价:"),c.default.createElement(p.XfInput.BorderInputItem,{mode:"number",tipTit:"单价",placeholder:"请填写单价",value:S.get("unitPrice"),onChange:function(e){if(a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"unitPrice"],e)),""!==S.get("number")){var t=((e||0)*S.get("number")).toFixed(2);a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"amount"],t)),a(f.autoCalculateStockAmount()),C&&a(f.searchApprovalChangeRunningTaxRate(C))}}})):null,c.default.createElement("div",{className:"lrls-more-card",onClick:function(){w||d.toast.info("请先选择存货卡片")}},c.default.createElement("label",null,"金额:"),c.default.createElement(p.XfInput.BorderInputItem,{mode:"amount",negativeAllowed:!0,disabled:!w,placeholder:"请填写金额",value:S.get("amount"),onChange:function(e){if(a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"amount"],e)),a(f.autoCalculateStockAmount()),C&&a(f.searchApprovalChangeRunningTaxRate(C)),e>0&&S.get("number")<0||e<0&&S.get("number")>0){var t=parseFloat(((e||0)/-S.get("number")).toFixed(4));a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"number"],-S.get("number"))),a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"unitPrice"],t))}else if(S.get("number")>0||S.get("number")<0){var n=parseFloat(((e||0)/S.get("number")).toFixed(4));a(f.changeSearchApprovalString("editRunningModalTemp",["stockList",h,"unitPrice"],n))}}})))),c.default.createElement(p.ButtonGroup,null,c.default.createElement(p.Button,{disabled:O<=-1,onClick:function(){a(f.changeSearchApprovalString("","currentEditInvetoryIndex",O))}},c.default.createElement(p.Icon,{type:"arrow-right",style:{transform:"rotate(180deg)"}}),c.default.createElement("span",null,"上一明细")),c.default.createElement(p.Button,{onClick:function(){n.goBack()}},c.default.createElement(p.Icon,{type:"confirm"}),c.default.createElement("span",null,"确定")),c.default.createElement(p.Button,{disabled:N==I,onClick:function(){a(f.changeSearchApprovalString("","currentEditInvetoryIndex",N))}},c.default.createElement("span",null,"下一明细"),c.default.createElement(p.Icon,{type:"arrow-right"}))))}}]),t}())||n;t.default=h},1881:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=arguments[1];return((e={},o(e,r.INIT_SEARCH_APPROVAL,function(){return i}),o(e,r.AFTER_GET_APPROVAL_PROCESSLIST,function(){return t=t.set("approvalList",(0,n.fromJS)(a.receivedData.processList)).setIn(["views","currentPage"],a.currentPage),1===a.currentPage&&(t=t.setIn(["views","pageCount"],a.receivedData.pageCount)),!0!==a.param.refresh&&(t=t.setIn(["views","searchType"],a.param.searchType).setIn(["views","searchContent"],a.param.searchContent).setIn(["views","dateType"],a.param.dateType).setIn(["views","beginDate"],a.receivedData.beginDate).setIn(["views","endDate"],a.receivedData.endDate).setIn(["views","processCode"],a.param.processCode)),t}),o(e,r.AFTER_GET_APPROVAL_PROCESSLIST_DETAILLIST,function(){return t=t.set("detailList",(0,n.fromJS)(a.receivedData.detailList)).setIn(["views","currentPage"],a.currentPage),1===a.currentPage&&(t=t.setIn(["views","pageCount"],a.receivedData.pageCount)),!0!==a.param.refresh&&(t=t.setIn(["views","searchType"],a.param.searchType).setIn(["views","searchContent"],a.param.searchContent).setIn(["views","dateType"],a.param.dateType).setIn(["views","beginDate"],a.receivedData.beginDate).setIn(["views","endDate"],a.receivedData.endDate).setIn(["views","accountingType"],a.param.accountingType)),t}),o(e,r.AFTER_GET_APPROVAL_PROCESS_MODEL_LIST,function(){return t=t.set("processModelList",(0,n.fromJS)(a.receivedData))}),o(e,r.CHANGE_SEARCH_APPROVAL_COMMON_STRING,function(){return t=t.setIn(["views",a.place],a.value)}),e)[a.type]||function(){return t})()};var n=a(9),r=l(a(1356));l(a(25));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=(0,n.fromJS)({views:{currentPageType:"ApprovalAll",searchType:"PROCESS_SEARCH_TITLE",searchContent:"",accountingType:"ALL",dateType:"DATE_TYPE_END",beginDate:"",endDate:"",processCode:"PROCESS_CODE_ALL",showChildList:[],currentPage:1,pageCount:1},approvalList:[],detailList:[],processModelList:[{modelName:"全部",processCode:"PROCESS_CODE_ALL"}]})},1882:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=arguments[1];return((e={},o(e,r.CLEAR_SEARCH_APPROVAL_TEMP,function(){return t=t.set("contactSourceCategoryList",(0,n.fromJS)([])).set("contactSourceCardList",(0,n.fromJS)([])).set("projectSourceCategoryList",(0,n.fromJS)([])).set("projectSourceCardList",(0,n.fromJS)([])).set("invetorySourceCategoryList",(0,n.fromJS)([])).set("invetorySourceCardList",(0,n.fromJS)([])).set("warehouseSourceCategoryList",(0,n.fromJS)([])).set("allContactList",(0,n.fromJS)([])).set("allProjectList",(0,n.fromJS)([])).set("allInvetoryList",(0,n.fromJS)([]))}),o(e,r.GET_APPROVAL_PROCESS_DETAIL_INFO,function(){return t=t.set("editRunningModalTemp",(0,n.fromJS)(a.receivedData)).set("categoryData",(0,n.fromJS)(a.categoryData)),a.datailList.length&&(t=t.set("datailUuidList",(0,n.fromJS)(a.datailList))),t}),o(e,r.GET_APPROVAL_PROCESS_PREVIEW_DETAIL_INFO,function(){return t=t.set("previewApprovalModalTemp",(0,n.fromJS)(a.receivedData)).set("categoryData",(0,n.fromJS)(a.categoryData)),a.datailList.length&&(t=t.set("datailUuidList",(0,n.fromJS)(a.datailList))),t}),o(e,r.CHANGE_APPROVAL_PROCESS_DETAIL_INFO_CATEGORY,function(){return t=t.set("editRunningModalTemp",a.editRunningModalTemp).set("categoryData",(0,n.fromJS)(a.categoryData))}),o(e,r.CHANGE_APPROVAL_PROCESS_DETAIL_INFO_COMMON_STRING,function(){return t=t.setIn(["editRunningModalTemp",a.place],a.value)}),o(e,r.CHANGE_APPROVAL_PROCESS_DETAIL_INFO_BILL_COMMON_STRING,function(){return t=t.setIn(["editRunningModalTemp","billList",0,a.place],a.value)}),o(e,r.SEARCH_APPROVAL_GET_APPROVAL_WAREHOUSE_CARD_LIST,function(){return a.receivedData.forEach(function(e,t){e.cardName=e.name,e.key=e.code+" "+e.name,e.value=e.uuid}),t=t.set("warehouseSourceCategoryList",(0,n.fromJS)(a.receivedData))}),o(e,r.SEARCH_APPROVAL_CHANGE_RUNNING_TAX_RATE,function(){var e=a.amount||t.getIn(["editRunningModalTemp","jrAmount"])||0;return"-1"==a.value?t.setIn(["editRunningModalTemp","billList",0,"tax"],"").setIn(["editRunningModalTemp","billList",0,"taxRate"],a.value):(console.log("sddf",(Number(e)/(1+Number(a.value)/100)*Number(a.value)/100).toFixed(2)),t.setIn(["editRunningModalTemp","billList",0,"tax"],(Number(e)/(1+Number(a.value)/100)*Number(a.value)/100).toFixed(2)).setIn(["editRunningModalTemp","billList",0,"taxRate"],a.value))}),o(e,r.CHANGE_SEARCH_APPROAL_EDIT_BILL_STATES,function(){return t.setIn(["editRunningModalTemp","billList",0,"billState"],a.billState).setIn(["editRunningModalTemp","billList",0,"tax"],a.tax).setIn(["editRunningModalTemp","billList",0,"taxRate"],a.taxRate)}),o(e,r.CHANGE_SEARCH_APPROVAL_STRING,function(){return a.placeArr&&(t=t.setIn(a.placeArr,a.value)),a.place&&(t=t.set(a.place,a.value)),t}),o(e,r.CHARGE_SEARCH_APPROVAL_ITEM_CHECKBOX_CHECK,function(){var e=t.get("selectList"),r=t.get("selectItem"),l=a.uuid,o=a.name,i=a.code,c=a.isOpenQuantity,u=a.unit,s=a.unitPriceList;if(!a.checked&&-1===e.findIndex(function(e){return e===a.uuid})){var d=e.push(a.uuid),p=r.push((0,n.fromJS)({uuid:l,name:o,code:i,isOpenQuantity:c,unit:u,unitPriceList:s}));return t.set("selectList",d).set("selectItem",(0,n.fromJS)(p))}if(a.checked){var f=e.splice(e.findIndex(function(e){return e===a.uuid}),1),m=r.splice(e.findIndex(function(e){return e===a.uuid}),1);return t.set("selectList",f).set("selectItem",(0,n.fromJS)(m))}return t}),e)[a.type]||function(){return t})()};var n=a(9),r=l(a(1356));l(a(25));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=(0,n.fromJS)({views:{showStockModal:!1},editRunningModalTemp:{carryoverCardList:[{}]},previewApprovalModalTemp:{carryoverCardList:[{}]},categoryData:{},allContactList:[],allProjectList:[],allInvetoryList:[],contactSourceCategoryList:[],contactSourceCardList:[],projectSourceCategoryList:[],projectSourceCardList:[],invetorySourceCategoryList:[],invetorySourceCardList:[],warehouseSourceCategoryList:[],currentEditInvetoryIndex:0,datailUuidList:[],jrUuidList:[]})},1883:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];return(function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a;return e}({},r.CHANGE_SEARCH_RUNNING_CALCULATE_COMMON_STRING,function(){return t.placeArr&&(e=e.setIn(t.placeArr,t.value)),t.place&&(e=e.set(t.place,t.value)),e})[t.type]||function(){return e})()};var n=a(9),r=o(a(1356)),l=(o(a(25)),a(13));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var i=(0,n.fromJS)({accountDate:(new l.DateLib).valueOf(),selectList:[],account:null,fromPage:"",receiveAmount:0,setAccount:!1,needUsedPoundage:!1,poundageCurrentCardList:[],poundageProjectCardList:[],poundageCurrentList:[],poundageProjectList:[],accountProjectRange:[],accountContactsRange:[],conSetAccount:!1,beZeroInventory:!1,beCarryoverOut:!1,propertyCost:"",propertyCostList:[],carryoverCategoryList:[],carryoverCategoryItem:null,usedCarryoverProject:!1,carryoverProjectCardList:[],carryoverProjectList:[],handlingFeeType:"INCLUDE"})},963:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var n=p(a(1857)),r=p(a(1881)),l=p(a(1066)),o=p(a(1882)),i=p(a(1399)),c=p(a(1883)),u=p(a(1259)),s=p(a(1303)),d=p(a(1260));function p(e){return e&&e.__esModule?e:{default:e}}var f={searchApprovalState:r.default,runningPreviewState:l.default,editRunningModalState:o.default,searchRunningState:i.default,approalAccountState:c.default,relativeConfState:u.default,inventoryConfState:s.default,projectConfState:d.default};t.reducer=f,t.view=n.default}}]);