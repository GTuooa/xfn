(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1058:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.homeAccountActions=e.ActionTypes=void 0;var a,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},G(t,Y.GET_RUNNING_CATEGORY,function(){var t=[],a=(0,o.fromJS)(n.receivedData.categoryList),r=[];a.getIn([0,"childList"]).forEach(function(t){t.get("childList").size?r.push(t):t.get("beSpecial")&&0==t.get("disableList").size&&r.push({uuid:t.get("uuid"),name:t.get("name"),childList:[t]})}),r.push({uuid:"核算管理",name:"核算管理",childList:n.receivedData.hideCategoryList}),n.receivedData.accountList[0].childList.forEach(function(e){t.push({key:e.name,value:""+e.uuid+s.TREE_JOIN_STR+e.name})});var i=e.getIn(["data","runningDate"]);return e.set("runningCategory",a).set("lastCategory",(0,o.fromJS)(r)).set("accountList",(0,o.fromJS)(t)).set("rate",(0,o.fromJS)(n.receivedData.rate)).set("data",h.get("data")).setIn(["data","runningDate"],i).set("project",(0,o.fromJS)({projectCardList:[],projectCard:[{amount:""}],usedProject:!1}))}),G(t,Y.CHANGE_HOMEACCOUNT_CATEGORYTYPE,function(){return e.setIn(["data","categoryType"],n.categoryType)}),G(t,Y.CHANGE_HOMEACCOUNT_DATA,function(){if(void 0==n.value){var t=n.dataType.split(s.TREE_JOIN_STR);e=e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}else e="project"==n.dataType?e.setIn(["project","usedProject"],n.value):e.setIn(["data",n.dataType],n.value);return e}),G(t,Y.ACCOUNT_SAVE_AND_NEW,function(){var t=new c.DateLib(new Date).valueOf(),n=e.getIn(["data","menuLeftIdx"]);return e.set("data",h.get("data")).setIn(["data","runningDate"],t).setIn(["data","menuLeftIdx"],n)}),G(t,Y.GET_PROJECT_CARDLIST,function(){var t=[],a=void 0,r=null;return n.receivedData.forEach(function(e,n){t.push({key:e.code+" "+e.name,value:""+e.uuid+s.TREE_JOIN_STR+e.code+s.TREE_JOIN_STR+e.name}),"项目公共费用"==e.name&&(a={key:e.name,value:""+e.uuid+s.TREE_JOIN_STR+e.code+s.TREE_JOIN_STR+e.name},r=n)}),null!=r&&(t.unshift(a),t.splice(r+1,1)),n.fromYl||(e=e.setIn(["project","usedProject"],!0)),e.setIn(["project","projectCardList"],(0,o.fromJS)(t))}),G(t,Y.CHANGE_PROJECT_CARD,function(){switch(n.dataType){case"card":var t=n.value.split(s.TREE_JOIN_STR),a=e.getIn(["project","projectCard",n.idx,"amount"]);e=e.setIn(["project","projectCard",n.idx],(0,o.fromJS)({uuid:t[0],code:t[1],name:t[2],amount:a}));break;case"amount":e=e.setIn(["project","projectCard",n.idx,"amount"],n.value);break;case"add":e=e.setIn(["project","projectCard",n.idx],(0,o.fromJS)({amount:""}));break;case"delete":e=e.deleteIn(["project","projectCard",n.idx])}return e}),G(t,Y.CHANGE_LRLS_DATA,function(){return e.setIn(n.dataType,n.value)}),G(t,Y.COPY_PROJECT_DATA,function(){var t=n.projectCard.toJS();return 0==t.length&&t.push({amount:""}),e.setIn(["project","usedProject"],n.usedProject).setIn(["project","projectCard"],(0,o.fromJS)(t))}),G(t,Y.LRLS_INIT_RELA_CARD,function(){var t=n.contactsRange,a=e.get("iuManageTitleList"),r=[];return a.map(function(e,n){t.map(function(t,n){e.get("uuid")==t&&r.push({checked:!1,ctgyUuid:t,name:e.get("name")})})}),e.mergeIn(["iuManage","psiData"],(0,o.fromJS)(n.data.defaultAc)).setIn(["iuManage","psiData","code"],n.data.code).setIn(["iuManage","psiData","isPayUnit"],n.isPayUnit).setIn(["iuManage","psiData","isReceiveUnit"],!n.isPayUnit).setIn(["iuManage","psiData","categoryTypeList"],(0,o.fromJS)(r)).setIn(["iuManage","psiData","name"],"").setIn(["iuManage","psiData","enableAdvanceAc"],!n.isPayUnit).setIn(["iuManage","psiData","enablePrepaidAc"],n.isPayUnit)}),G(t,Y.LRLS_GET_IUMANAGE_LIST_TITLE,function(){return e.set("iuManageTitleList",(0,o.fromJS)(n.title))}),G(t,Y.LRLS_ACCOUNT_LIST,function(){var t=[];return n.receivedData.forEach(function(e){t.push({key:e.name,value:""+e.uuid+s.TREE_JOIN_STR+e.name})}),e.set("accountList",(0,o.fromJS)(t)).set("accountData",h.get("accountData"))}),G(t,Y.INIT_LRLS_DATA,function(){return e.set(n.dataType,h.get(n.dataType))}),G(t,Y.LRLS_GET_INVENTORY_LIST_TITLE,function(){return e.set("inventoryTitleList",(0,o.fromJS)(n.title))}),G(t,Y.LRLS_INIT_STOCK_CARD,function(){var t=n.stockRange,a=e.get("inventoryTitleList"),r=e.getIn(["data","categoryType"]),i=!1,u=!1;"LB_YYSR"==r?u=!0:i=!0;var s=[];return a.map(function(e,n){t.map(function(t,n){e.get("uuid")==t&&s.push({checked:!1,ctgyUuid:t,categoryName:e.get("name")})})}),e.mergeIn(["inventory","psiData"],(0,o.fromJS)(n.data.defaultAc)).setIn(["inventory","psiData","code"],n.data.code).setIn(["inventory","psiData","categoryTypeList"],(0,o.fromJS)(s)).setIn(["inventory","psiData","name"],"").setIn(["inventory","psiData","isAppliedPurchase"],i).setIn(["inventory","psiData","isAppliedSale"],u).setIn(["data","onOk"],n.onOk).setIn(["data","stockIdx"],n.idx)}),G(t,Y.CHANGE_RUNNING_ENCLOSURE_LIST,function(){var t=[];return e.get("enclosureList").map(function(e){t.push(e)}),n.imgArr.forEach(function(e){t.push(e)}),e=e.set("enclosureList",(0,o.fromJS)(t)).set("enclosureCountUser",t.length)}),G(t,Y.DELETE_UPLOAD_FJ_URL,function(){var t=[];return e.get("needDeleteUrl").map(function(e){t.push(e)}),e.get("enclosureList").map(function(a,r){r==n.index&&(t.push(e.getIn(["enclosureList",r]).set("beDelete",!0)),e=e.deleteIn(["enclosureList",r]))}),e=e.set("needDeleteUrl",(0,o.fromJS)(t)).set("enclosureCountUser",e.get("enclosureList").size)}),G(t,Y.INIT_FJ_LIST,function(){return e=e.set("needDeleteUrl",(0,o.fromJS)([])).set("enclosureList",(0,o.fromJS)([])).set("enclosureCountUser",0).set("previewImageList",(0,o.fromJS)([]))}),G(t,Y.GET_LS_LABEL_FETCH,function(){var t=[];return n.receivedData.data.map(function(e){t.push({key:e,value:e})}),e=e.set("label",(0,o.fromJS)(t)).set("tagModal",!0)}),G(t,Y.CHANGE_LS_TAG_NAME,function(){return e.get("enclosureList").map(function(t,a){a==n.index&&(e=e.setIn(["enclosureList",a,"label"],n.value))}),e=e.set("tagModal",!1)}),t)[n.type]||function(){return e})()};var o=n(9),i=R(n(182)),u=R(n(24)),s=v(n(25)),c=n(13),_=(v(n(1064)),v(n(10))),d=n(1341),l=n(1342),f=n(1343),T=n(1279),A=n(1344),g=n(1297),E=n(1345),C=n(1346),S=n(1347),L=n(1253),y=n(1298),I=n(1299),m=n(1348),p=n(1394),N=n(1280);function v(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function R(t){return t&&t.__esModule?t:{default:t}}function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=(0,o.fromJS)({data:{menuLeftIdx:0,amount:"",categoryType:"",categoryName:"请选择类别",categoryUuid:"",runningDate:"",accountUuid:"",accountName:"",runningAbstract:"",onOk:"",stockIdx:0},runningCategory:[{childList:[]}],lastCategory:[],accountList:[],rate:{scale:""},project:{projectCardList:[],projectCard:[{amount:""}],usedProject:!1},iuManage:{insertFrom:"",needAutoIncrementCode:!1,treeFrom:"",psiData:{code:"",isPayUnit:!1,isReceiveUnit:!1,categoryTypeList:[],insertOrModify:"insert",receivableOpened:"0",advanceOpened:"0",payableOpened:"0",prepaidOpened:"0",name:"",companyAddress:"",companyTel:"",financeName:"",financeTel:"",remark:"",contacterInfo:!1,enableAdvanceAc:!1,enablePrepaidAc:!1},treeIdx:0},iuManageTitleList:[],iuManageTreeList:[],accountData:{beginAmount:"",openingName:"",name:"",openingBank:"",accountNumber:"",openInfo:!1,type:"general",uuid:"",acFullName:"",acId:"",assCategoryList:[]},inventoryTitleList:[],inventoryTreeList:[],inventory:{insertFrom:"",needAutoIncrementCode:!1,treeFrom:"",treeIdx:0,psiData:(a={code:"",name:"",categoryTypeList:[],inventoryNature:"",isAppliedPurchase:!1,isAppliedSale:!1,remark:"",financeTel:"",enableAdvanceAc:!1,financeName:"",receivableOpened:"0",inventoryAcName:"",payableOpened:"0",advanceOpened:"0",isAppliedProduce:!1,enablePrepaidAc:!1},G(a,"categoryTypeList",[]),G(a,"insertOrModify","insert"),G(a,"companyAddress",""),G(a,"prepaidOpened","0"),G(a,"inventoryAcId",""),G(a,"contacterInfo",!1),G(a,"companyTel",""),a)},enclosureList:[],needDeleteUrl:[],flags:{showlsfj:!1},previewImageList:[],label:[],enclosureCountUser:0});var Y=e.ActionTypes={GET_RUNNING_CATEGORY:"GET_RUNNING_CATEGORY",CHANGE_HOMEACCOUNT_CATEGORYTYPE:"CHANGE_HOMEACCOUNT_CATEGORYTYPE",CHANGE_HOMEACCOUNT_DATA:"CHANGE_HOMEACCOUNT_DATA",ACCOUNT_SAVE_AND_NEW:"ACCOUNT_SAVE_AND_NEW",GET_PROJECT_CARDLIST:"GET_PROJECT_CARDLIST",CHANGE_PROJECT_CARD:"CHANGE_PROJECT_CARD",CHANGE_LRLS_DATA:"CHANGE_LRLS_DATA",COPY_PROJECT_DATA:"COPY_PROJECT_DATA",GET_LB_YYSR_CARD_DETAIL:"GET_LB_YYSR_CARD_DETAIL",GET_LB_YYZC_CARD_DETAIL:"GET_LB_YYZC_CARD_DETAIL",GET_LB_FYZC_CARD_DETAIL:"GET_LB_FYZC_CARD_DETAIL",GET_LB_XCZC_CARD_DETAIL:"GET_LB_XCZC_CARD_DETAIL",GET_LB_SFZC_CARD_DETAIL:"GET_LB_SFZC_CARD_DETAIL",GET_LB_YYWSR_CARD_DETAIL:"GET_LB_YYWSR_CARD_DETAIL",GET_LB_YYWZC_CARD_DETAIL:"GET_LB_YYWZC_CARD_DETAIL",GET_LB_ZSKX_CARD_DETAIL:"GET_LB_ZSKX_CARD_DETAIL",GET_LB_ZFKX_CARD_DETAIL:"GET_LB_ZFKX_CARD_DETAIL",GET_LB_CQZC_CARD_DETAIL:"GET_LB_CQZC_CARD_DETAIL",GET_LB_JK_CARD_DETAIL:"GET_LB_JK_CARD_DETAIL",GET_LB_TZ_CARD_DETAIL:"GET_LB_TZ_CARD_DETAIL",GET_LB_ZB_CARD_DETAIL:"GET_LB_ZB_CARD_DETAIL",GET_LB_ZZ_CARD_DETAIL:"GET_LB_ZZ_CARD_DETAIL",GET_LB_SFGL_CARD_DETAIL:"GET_LB_SFGL_CARD_DETAIL",GET_LB_JZCB_CARD_DETAIL:"GET_LB_JZCB_CARD_DETAIL",GET_LB_FPRZ_CARD_DETAIL:"GET_LB_FPRZ_CARD_DETAIL",GET_LB_KJFP_CARD_DETAIL:"GET_LB_KJFP_CARD_DETAIL",GET_LB_ZCWJZZS_CARD_DETAIL:"GET_LB_ZCWJZZS_CARD_DETAIL",GET_LB_GGFYFT_CARD_DETAIL:"GET_LB_GGFYFT_CARD_DETAIL",GET_LB_JZSY_CARD_DETAIL:"GET_LB_JZSY_CARD_DETAIL",GET_LB_ZJTX_CARD_DETAIL:"GET_LB_ZJTX_CARD_DETAIL",GET_LB_YYSR_FROM_YLLS:"GET_LB_YYSR_FROM_YLLS",GET_LB_YYZC_FROM_YLLS:"GET_LB_YYZC_FROM_YLLS",GET_LB_FYZC_FROM_YLLS:"GET_LB_FYZC_FROM_YLLS",GET_LB_XCZC_FROM_YLLS:"GET_LB_XCZC_FROM_YLLS",GET_LB_SFZC_FROM_YLLS:"GET_LB_SFZC_FROM_YLLS",GET_LB_YYWSR_FROM_YLLS:"GET_LB_YYWSR_FROM_YLLS",GET_LB_YYWZC_FROM_YLLS:"GET_LB_YYWZC_FROM_YLLS",GET_LB_ZSKX_FROM_YLLS:"GET_LB_ZSKX_FROM_YLLS",GET_LB_ZFKX_FROM_YLLS:"GET_LB_ZFKX_FROM_YLLS",GET_LB_CQZC_FROM_YLLS:"GET_LB_CQZC_FROM_YLLS",GET_LB_JK_FROM_YLLS:"GET_LB_JK_FROM_YLLS",GET_LB_TZ_FROM_YLLS:"GET_LB_TZ_FROM_YLLS",GET_LB_ZB_FROM_YLLS:"GET_LB_ZB_FROM_YLLS",GET_LB_ZZ_FROM_YLLS:"GET_LB_ZZ_FROM_YLLS",GET_LB_SFGL_FROM_YLLS:"GET_LB_SFGL_FROM_YLLS",GET_LB_JZCB_FROM_YLLS:"GET_LB_JZCB_FROM_YLLS",GET_LB_FPRZ_FROM_YLLS:"GET_LB_FPRZ_FROM_YLLS",GET_LB_KJFP_FROM_YLLS:"GET_LB_KJFP_FROM_YLLS",GET_LB_ZCWJZZS_FROM_YLLS:"GET_LB_ZCWJZZS_FROM_YLLS",GET_LB_GGFYFT_FROM_YLLS:"GET_LB_GGFYFT_FROM_YLLS",GET_LB_JZSY_FROM_YLLS:"GET_LB_JZSY_FROM_YLLS",GET_LB_ZJTX_FROM_YLLS:"GET_LB_ZJTX_FROM_YLLS",LRLS_INIT_RELA_CARD:"LRLS_INIT_RELA_CARD",LRLS_GET_IUMANAGE_LIST_TITLE:"LRLS_GET_IUMANAGE_LIST_TITLE",LRLS_ACCOUNT_LIST:"LRLS_ACCOUNT_LIST",INIT_LRLS_DATA:"INIT_LRLS_DATA",LRLS_GET_INVENTORY_LIST_TITLE:"LRLS_GET_INVENTORY_LIST_TITLE",LRLS_INIT_STOCK_CARD:"LRLS_INIT_STOCK_CARD",CHANGE_RUNNING_ENCLOSURE_LIST:"CHANGE_RUNNING_ENCLOSURE_LIST",DELETE_UPLOAD_FJ_URL:"DELETE_UPLOAD_FJ_URL",INIT_FJ_LIST:"INIT_FJ_LIST",GET_LS_LABEL_FETCH:"GET_LS_LABEL_FETCH",CHANGE_LS_TAG_NAME:"CHANGE_LS_TAG_NAME",AFTER_GET_UPLOAD_SIGNATURE:"AFTER_GET_UPLOAD_SIGNATURE"},D={getRunningCategory:function(t){return function(e){_.toast.loading(s.LOADING_TIP_TEXT,0),(0,i.default)("getRunningSettingInfo","GET","",function(n){_.toast.hide(),(0,c.showMessage)(n)&&(e({type:Y.GET_RUNNING_CATEGORY,receivedData:n.data}),t&&e(D.fromYlToLr()),e(D.getIUManageListTitle()))})}},getCardDetail:function(t){return function(e,n){var a=n().homeAccountState.get("data"),r=t.split(s.TREE_JOIN_STR);_.toast.loading(s.LOADING_TIP_TEXT,0),(0,i.default)("getRunningDetail","GET","uuid="+r[0],function(n){if(_.toast.hide(),(0,c.showMessage)(n)){var r=n.data.result;delete r.parentUuid,e({type:Y.CHANGE_HOMEACCOUNT_CATEGORYTYPE,categoryType:r.categoryType}),e({type:Y["GET_"+r.categoryType+"_CARD_DETAIL"],value:t,data:a,receivedData:r}),O((0,o.fromJS)(r),e)}})}},changeHomeAccountData:function(t,e){return{type:Y.CHANGE_HOMEACCOUNT_DATA,dataType:t,value:e}},accountSaveAndNew:function(){return{type:Y.ACCOUNT_SAVE_AND_NEW}},fromYlToLr:function(){return function(t,e){t(D.changeLrlsEnclosureList());var n=e().yllsState,a=n.getIn(["data","beBusiness"]),r=n.getIn(["data","runningState"]),o=n.getIn(["data","categoryType"]),i=n.getIn(["data","usedProject"]),u=n.getIn(["data","projectCard"]),s=n.getIn(["data","enclosureList"]);a||(o="LB_SFGL"),"STATE_YYSR_JZCB"===r&&(o="LB_JZCB"),t({type:Y.CHANGE_HOMEACCOUNT_CATEGORYTYPE,categoryType:o}),t({type:Y["GET_"+o+"_FROM_YLLS"],state:n}),t({type:Y.CHANGE_RUNNING_ENCLOSURE_LIST,imgArr:s}),O(n.get("data"),t,!0),t(D.copyProjectData(i,u))}},toManageType:function(t,e){return function(n,a){var r=a().homeAccountState.get("data"),o=t.split(s.TREE_JOIN_STR)[2];switch(n({type:Y.CHANGE_HOMEACCOUNT_CATEGORYTYPE,categoryType:o}),n({type:Y["GET_"+o+"_CARD_DETAIL"],value:t,data:r,allData:e}),o){case"LB_SFGL":var i=r.get("runningDate");n(T.sfglAccountActions.getSfglCardList(i));break;case"LB_ZCWJZZS":var u=(new c.DateLib).valueOf().slice(0,7);n(A.zcwjzzsAccountActions.changeWjzzsData("handleMonth",u)),n(A.zcwjzzsAccountActions.getWjzzsList(u));break;case"LB_JZCB":n(g.jzcbAccountActions.getJzcbCardList());break;case"LB_GGFYFT":n(E.ggfyftAccountActions.getGgfyftProjectList()),n(E.ggfyftAccountActions.getGgfyftList());break;case"LB_FPRZ":n(y.fprzAccountActions.getFprzList());break;case"LB_KJFP":n(I.kjfpAccountActions.getKjfpList());break;case"LB_JZSY":n(m.jzsyAccountActions.getCategoryList());break;case"LB_ZJTX":n(p.zjtxAccountActions.getCategoryList());break;default:console.log("无请求")}}},getProjectCardList:function(t,e,n){return function(e,a){var r=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);_.toast.loading(s.LOADING_TIP_TEXT,0),(0,i.default)("getProjectCardList","POST",JSON.stringify({sobId:r,categoryList:t,needCommonCard:!0}),function(t){_.toast.hide(),(0,c.showMessage)(t)&&e({type:Y.GET_PROJECT_CARDLIST,receivedData:t.data.result,fromYl:n})})}},changeProjectCard:function(t,e,n){return{type:Y.CHANGE_PROJECT_CARD,dataType:t,value:e,idx:n}},changeLrlsData:function(t,e){return{type:Y.CHANGE_LRLS_DATA,dataType:t,value:e}},copyProjectData:function(t,e){return{type:Y.COPY_PROJECT_DATA,projectCard:e,usedProject:t}},getInitRelaCard:function(t,e){return function(n){_.toast.loading(s.LOADING_TIP_TEXT,0),(0,i.default)("getInitRelaCard","GET","",function(a){_.toast.hide(),(0,c.showMessage)(a)&&n({type:Y.LRLS_INIT_RELA_CARD,data:a.data,isPayUnit:t,contactsRange:e})})}},getIUManageListTitle:function(){return function(t){(0,i.default)("getIUManageListTitle","GET","",function(e){(0,c.showMessage)(e)&&t({type:Y.LRLS_GET_IUMANAGE_LIST_TITLE,title:e.data})})}},changeManageCardRelation:function(t,e){return function(n){(0,i.default)("getIUManageTreeByType","GET","ctgyUuid="+t,function(a){if((0,c.showMessage)(a)){var r=a.data.resultList;n(D.changeLrlsData(["iuManageTreeList",e],(0,o.fromJS)({uuid:t,value:r}))),0==r[0].childList&&(n(D.changeLrlsData(["iuManage","psiData","categoryTypeList",e,"subordinateUuid"],r[0].uuid)),n(D.changeLrlsData(["iuManage","psiData","categoryTypeList",e,"subordinateName"],r[0].name)))}})}},saveIUManage:function(t){return function(e,n){var a=n().homeAccountState.getIn(["iuManage","psiData"]),r=a.get("name");if(""==a.get("code"))return _.toast.info("请填写编码");if(a.get("code").length>10)return _.toast.info("编码长度不能超过10位");if(""==r)return _.toast.info("请填写名称");if(r.length>20)return _.toast.info("名称长度不能超过20位");var o=!1,u=!1;return a.get("categoryTypeList").map(function(t){t.get("checked")&&(o=!0,t.get("subordinateUuid")||(u=!0))}),o?u?_.toast.info("请选择类别"):(_.toast.loading(s.LOADING_TIP_TEXT,0),void(0,i.default)("adjustIUmanageCardTitleSame","POST",JSON.stringify({psiData:{name:r}}),function(n){_.toast.hide(),(0,c.showMessage)(n)&&(n.data.repeat?_.Confirm({message:"卡片名称与已有卡片名称重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(n){1===n.buttonIndex&&e(D.insertIUManage(t))},onFail:function(t){return alert(t)}}):e(D.insertIUManage(t)))})):_.toast.info("请选择所属分类")}},insertIUManage:function(t){return function(e,n){var a=n().homeAccountState,o=a.get("iuManage").toJS(),u=o.psiData.categoryTypeList.filter(function(t){return t.checked});o.psiData.categoryTypeList=u,(0,i.default)("saveIUManageCard","POST",JSON.stringify(r({},o)),function(n){(0,c.showMessage)(n,"show")&&(b(a.getIn(["data","categoryType"]),e,"contactsRange"),t.goBack())})}},saveAccountSetting:function(t){return function(e,n){var a=n().homeAccountState.get("accountData").toJS();return""==a.name?_.toast.info("请填写账户名称"):a.name.length>s.ACCOUNT_NAME_LENGTH?_.toast.info("账户名称不能超过"+s.ACCOUNT_NAME_LENGTH+"个字符"):a.accountNumber.length>s.ACCOUNT_STRING_LENGTH?_.toast.info("账号不能超过"+s.ACCOUNT_STRING_LENGTH+"个字符"):a.openingName.length>s.ACCOUNT_STRING_LENGTH?_.toast.info("开户名不能超过"+s.ACCOUNT_STRING_LENGTH+"个字符"):a.openingBank.length>s.ACCOUNT_STRING_LENGTH?_.toast.info("开户行/机构不能超过"+s.ACCOUNT_STRING_LENGTH+"个字符"):a.beginAmount.length>12?_.toast.info("期初值长度最长为12位"):(_.toast.loading(s.LOADING_TIP_TEXT,0),void(0,i.default)("insertRunningAccount","POST",JSON.stringify(r({},a)),function(n){_.toast.hide(),(0,c.showMessage)(n,"show")&&(t.goBack(),e({type:Y.LRLS_ACCOUNT_LIST,receivedData:n.data.resultList[0].childList}))}))}},initLrlsData:function(t){return{type:Y.INIT_LRLS_DATA,dataType:t}},getInventoryHighTypeList:function(){return function(t){(0,i.default)("getInventoryHighTypeList","GET","",function(e){(0,c.showMessage)(e)&&t({type:Y.LRLS_GET_INVENTORY_LIST_TITLE,title:e.data})})}},getInitStockCard:function(t,e,n){return function(a){_.toast.loading(s.LOADING_TIP_TEXT,0),(0,i.default)("getInitStockCard","GET","",function(r){_.toast.hide(),(0,c.showMessage)(r)&&a({type:Y.LRLS_INIT_STOCK_CARD,data:r.data,stockRange:t,onOk:e,idx:n})})}},getInventorySettingCardTypeList:function(t,e){return function(n){(0,i.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+t,function(a){if((0,c.showMessage)(a)){var r=a.data.resultList;n(D.changeLrlsData(["inventoryTreeList",e],(0,o.fromJS)({uuid:t,value:r}))),0==r[0].childList&&(n(D.changeLrlsData(["inventory","psiData","categoryTypeList",e,"subordinateUuid"],r[0].uuid)),n(D.changeLrlsData(["inventory","psiData","categoryTypeList",e,"subordinateName"],r[0].name)))}})}},saveInventory:function(t){return function(e,n){var a=n().homeAccountState.getIn(["inventory","psiData"]),r=a.get("name");if(""==a.get("code"))return _.toast.info("请填写编码");if(a.get("code").length>10)return _.toast.info("编码长度不能超过10位");if(""==r)return _.toast.info("请填写名称");if(r.length>20)return _.toast.info("名称长度不能超过20位");if(""==a.get("inventoryNature"))return _.toast.info("请选择存货性质");var o=!1,u=!1;return a.get("categoryTypeList").map(function(t){t.get("checked")&&(o=!0,t.get("subordinateUuid")||(u=!0))}),o?u?_.toast.info("请选择类别"):(_.toast.loading(s.LOADING_TIP_TEXT,0),void(0,i.default)("adjustInventorySettingCardTitleSame","POST",JSON.stringify({psiData:{name:r}}),function(n){_.toast.hide(),(0,c.showMessage)(n)&&(n.data.repeat?_.Confirm({message:"卡片名称与已有卡片名称重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(n){1===n.buttonIndex&&e(D.insertInventory(t))},onFail:function(t){return alert(t)}}):e(D.insertInventory(t)))})):_.toast.info("请选择所属分类")}},insertInventory:function(t){return function(e,n){var a=n().homeAccountState,o=a.get("inventory").toJS(),u=a.getIn(["data","onOk"]),_=a.getIn(["data","stockIdx"]),d=o.psiData.code,l=o.psiData.categoryTypeList.filter(function(t){return t.checked});o.psiData.categoryTypeList=l,(0,i.default)("addInventorySettingCard","POST",JSON.stringify(r({},o)),function(n){(0,c.showMessage)(n,"show")&&(b(a.getIn(["data","categoryType"]),e,"stockRange"),n.data.resultList.forEach(function(t){t.code==d&&u("card",""+t.uuid+s.TREE_JOIN_STR+t.code+s.TREE_JOIN_STR+t.name,_)}),t.goBack())})}},initLabel:function(){return function(t){(0,i.default)("initLsLabel","POST","",function(t){(0,c.showMessage)(t)})}},getUploadGetTokenFetch:function(){return function(t,e){var n=e().allState.get("expire"),a=Date.parse(new Date)/1e3;console.log(n,a,n<a+300),n<a+300&&(0,u.default)("aliyunOssPolicy","GET","",function(e){t({type:Y.AFTER_GET_UPLOAD_SIGNATURE,receivedData:e.data,code:e.code})})}},uploadFiles:function(t,e,n,a){return function(e,r){var o=[];o.push({fileName:n,enclosurePath:t.data.enclosurePath,size:(t.data.size/1024).toFixed(2),imageOrFile:t.data.mimeType.toString().toUpperCase().indexOf("IMAGE")>-1?"TRUE":"FALSE",label:"无标签",beDelete:!1,mimeType:t.data.mimeType}),(0,i.default)("insertEnclosure","POST",JSON.stringify({enclosureList:o}),function(t){0===t.code&&e({type:Y.CHANGE_RUNNING_ENCLOSURE_LIST,imgArr:t.data.enclosureList}),a&&_.toast.hide()})}},deleteUploadFJUrl:function(t,e,n){return function(e){e({type:Y.DELETE_UPLOAD_FJ_URL,index:t})}},changeLrlsEnclosureList:function(){return{type:Y.INIT_FJ_LIST}},getLabelFetch:function(){return function(t){(0,i.default)("getLsLabel","POST","",function(e){(0,c.showMessage)(e)&&t({type:Y.GET_LS_LABEL_FETCH,receivedData:e})})}},changeTagName:function(t,e){return function(n){n({type:Y.CHANGE_LS_TAG_NAME,index:t,value:e})}}};function O(t,e,n){var a=t.get("categoryType"),r="SX_HW"===t.get("propertyCarryover");if(t.get("beProject")){var o=t.get("projectRange");e(D.getProjectCardList(o,a,n))}else e(D.changeHomeAccountData("project",!1));switch(a){case"LB_YYSR":t.getIn(["acBusinessIncome","beManagemented"])&&e(d.yysrAccountActions.getYysrCardList("contactsRange")),r&&e(d.yysrAccountActions.getYysrCardList("stockRange")),e(D.getInventoryHighTypeList());break;case"LB_YYZC":t.getIn(["acBusinessExpense","beManagemented"])&&e(l.yyzcAccountActions.getYyzcCardList("contactsRange")),r&&e(l.yyzcAccountActions.getYyzcCardList("stockRange")),e(D.getInventoryHighTypeList());break;case"LB_FYZC":t.getIn(["acCost","beManagemented"])&&e(f.fyzcAccountActions.getFyzcCardList("contactsRange"));break;case"LB_YYWSR":t.getIn(["acBusinessOutIncome","beManagemented"])&&e(C.yywsrAccountActions.getYywsrCardList("contactsRange"));break;case"LB_YYWZC":t.getIn(["acBusinessOutExpense","beManagemented"])&&e(S.yywzcAccountActions.getYywzcCardList("contactsRange"));break;case"LB_CQZC":t.getIn(["acAssets","beManagemented"])&&e(L.cqzcAccountActions.getCqzcCardList("contactsRange"));break;case"LB_GGFYFT":e(E.ggfyftAccountActions.getGgfyftProjectList());break;case"LB_SFZC":var i=t.get("propertyTax");n||"SX_ZZS"!=i||e(N.sfzcAccountActions.getSfzcPaymentList());break;default:console.log("无需获取卡片")}}function b(t,e,n){switch(t){case"LB_YYSR":e(d.yysrAccountActions.getYysrCardList(n));break;case"LB_YYZC":e(l.yyzcAccountActions.getYyzcCardList(n));break;case"LB_FYZC":e(f.fyzcAccountActions.getFyzcCardList(n));break;case"LB_YYWSR":e(C.yywsrAccountActions.getYywsrCardList(n));break;case"LB_YYWZC":e(S.yywzcAccountActions.getYywzcCardList(n));break;case"LB_CQZC":e(L.cqzcAccountActions.getCqzcCardList(n));break;default:console.log("无需重新获取卡片")}}e.homeAccountActions=D},1061:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UploadFj=e.abstractFun=e.Menu=e.propertyCostObj=e.costList=e.ylProject=e.StockCom=e.ProjectCom=e.xczcCom=e.ContancsCom=e.hxCom=e.AssCom=e.CategoryCom=e.Account=void 0;var a=n(1648),r=d(a),o=n(1649),i=d(o),u=n(1650),s=d(u),c=d(n(1651)),_=d(n(1654));function d(t){return t&&t.__esModule?t:{default:t}}e.Account=r.default,e.CategoryCom=a.CategoryCom,e.AssCom=i.default,e.hxCom=o.hxCom,e.ContancsCom=o.ContancsCom,e.xczcCom=o.xczcCom,e.ProjectCom=o.ProjectCom,e.StockCom=o.StockCom,e.ylProject=o.ylProject,e.costList=s.default,e.propertyCostObj=u.propertyCostObj,e.Menu=c.default,e.abstractFun=a.abstractFun,e.UploadFj=_.default},1064:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.taxRateList=[{key:"2%",value:2},{key:"3%",value:3},{key:"4%",value:4},{key:"5%",value:5},{key:"6%",value:6},{key:"9%",value:9},{key:"10%",value:10},{key:"11%",value:11},{key:"12%",value:12},{key:"13%",value:13},{key:"16%",value:16},{key:"17%",value:17}],e.smallTaxRateList=[{key:"2%",value:2},{key:"3%",value:3},{key:"5%",value:5}],e.runningType={LX_SR:"收入",LX_ZC:"支出",LX_JZCB:"结转成本",LX_CBTH:"成本退回",LX_ZZS_YKP:"已开发票",LX_ZZS_WKP:"未开发票",LX_ZZS_YRZ:"已认证发票",LX_ZZS_WRZ:"未认证发票",LX_TSSF_YKP:"已开发票",LX_TSSF_WKP:"未开发票",LX_TGSF_YRZ:"已认证发票",LX_TGSF_WRZ:"未认证发票",LX_YYSR:"营业收入",LX_PP:"预收款",LX_ZZS:"增值税",LX_YYTS:"退售",LX_TSSF:"退售税费",LX_ARHX:"应收核销",LX_PPHX:"预收核销",LX_TSHX:"退售核销",LX_YYZC:"营业支出",LX_AP:"预付款",LX_ADV:"应付款",LX_YYTG:"退购",LX_TGSF:"退购税费",LX_APHX:"应付核销",LX_ADVHX:"预付核销",LX_TGHX:"退购核销",LX_FYZC:"费用支出",LX_JTGZXJ:"计提工资",LX_GZXJZC:"工资支出",LX_DKGJJ:"代扣公积金",LX_DKSHBX:"代扣社保",LX_DKSDS:"代扣所得税",LX_JTSB:"计提社保",LX_SBZC:"社保支出",LX_DJSB:"代缴社保",LX_JTGJJ:"计提公积金",LX_GJJZC:"公积金支出",LX_DJGJJ:"代缴公积金",LX_FLFZC:"福利费支出",LX_JTQTXC:"计提其他薪酬",LX_QTXC:"其他薪酬支出",LX_YJSF:"预交税费",LX_ZZSZC:"增值税支出",LX_YJDK:"预交抵扣",LX_ZCSDS:"转出所得税",LX_SDSZC:"所得税支出",LX_JTSF:"计提税费",LX_QTSFZC:"其他税费支出",LX_YYWSR:"营业外收入",LX_YYWZC:"营业外支出",LX_ZSKX:"暂收款项",LX_ZSHX:"暂收核销",LX_ZFKX:"暂付款项",LX_ZFHX:"暂付核销",LX_ZCGJ:"资产购进",LX_ZCCZ:"资产处置",LX_JZSY:"处置损益",LX_QDJK:"取得借款",LX_CHLX:"偿还利息",LX_CHBJ:"偿还本金",LX_DWTZ:"对外投资",LX_QDSY:"取得收益",LX_SHTZ:"收回投资",LX_ZZ:"增资",LX_LRFP:"利润分配",LX_JZ:"减资",LX_JZSY_SY:"结转收益",LX_JZSY_SS:"结转损失",LX_JZSY_ZCYZ:"资产原值",LX_JZSY_ZJTX:"累计折旧摊销",LX_JZSY_SJGZ:"升级改造",LX_JZSY_QLSR:"清理收入",LX_FPRZ_CG:"采购发票认证",LX_FPRZ_TG:"退购发票认证",LX_KJFP_XS:"销售开票",LX_KJFP_TS:"退售开票",LX_ZCWJZZS:"转出未交税费",LX_ZFLR:"支付利润",LX_TZ_JTGL:"计提股利",LX_TZ_SRGL:"收入股利",LX_TZ_JTLX:"计提利息",LX_TZ_SRLX:"收入利息",LX_JK_JTLX:"计提利息",LX_JK_ZFLX:"支付利息",LX_NBZZ:"内部转账",LX_NBZR:"内部转账-转入",LX_NBZC:"内部转账-转出",LX_GRSFZC:"个人税费支出",LX_XMGGFYFT:"费用分摊",LX_ZJTX:"折旧摊销"}},1253:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cqzcAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},f(t,g.GET_LB_CQZC_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR),e=n.data.get("amount"),a=T.getIn(["data","taxRate"]),r=e-e/(1+a/100),i="",u=n.receivedData.propertyCostList;return 1==u.length&&(i=u[0]),T.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).set("preData",T.get("preData")).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","accountName"],n.data.get("accountName")).setIn(["data","accountUuid"],n.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["data","tax"],(0,c.decimal)(r)).setIn(["data","propertyCost"],i).setIn(["data","runningAbstract"],"购进资产支出").setIn(["views","insertOrModify"],"insert").setIn(["views","fromYl"],!1).setIn(["views","shouldJzsy"],!1)}),f(t,g.GET_LB_CQZC_FROM_YLLS,function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data"))}),f(t,g.CHANGE_CQZC_VIEWS,function(){return e.setIn(["views","shouldJzsy"],!0).setIn(["views","insertOrModify"],"insert").setIn(["data","runningAbstract"],"处置资产处置损益")}),f(t,g.CHANGE_CQZC_PROPERTY_COST,function(){var t="",a="",r="";return{XZ_GJZC:function(){t="STATE_CQZC_YF",a="bill_states_not_auth",r="购进资产支出"},XZ_CZZC:function(){t="STATE_CQZC_YS",a="bill_states_not_make_out",r="处置资产收入"},XZ_ZJTX:function(){t="STATE_CQZC_ZJTX",a="bill_states_not_make_out",r="资产折旧摊销"}}[n.value](),e.setIn(["data","assetType"],n.value).setIn(["data","runningState"],t).setIn(["data","beCarryover"],!1).setIn(["data","billStates"],a).setIn(["data","runningAbstract"],r)}),f(t,g.CHANGE_CQZC_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),f(t,g.CHANGE_CQZC_ACLIST,function(){var t=n.value.split(s.TREE_JOIN_STR),a={};return a.uuid=t[0],a.code=t[1],a.name=t[2],e.setIn(["data","acAssets",n.acType],(0,o.fromJS)(a))}),f(t,g.CHANGE_CQZC_AMOUNT,function(){var t=e.getIn(["data","taxRate"]),a=n.value,r=a-a/(1+t/100);return e.setIn(["data","amount"],a).setIn(["data","tax"],(0,c.decimal)(r))}),f(t,g.CHANGE_CQZC_ACCOUNT,function(){var t=n.value.split(s.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),f(t,g.CHANGE_CQZC_BECARRYOVER,function(){return e.updateIn(["data","beCarryover"],function(t){return!t})}),f(t,g.CHANGE_CQZC_TAXRATE,function(){var t=e.getIn(["data","amount"]),a=n.value,r=0;return r=t-t/(1+a/100),e.setIn(["data","taxRate"],a).setIn(["data","tax"],(0,c.decimal)(r))}),f(t,g.CHANGE_CQZC_BILLSTATES,function(){var t=e.getIn(["data","billStates"]),n="";return({bill_states_not_make_out:function(){return n="bill_states_make_out"},bill_states_make_out:function(){return n="bill_states_not_make_out"},bill_states_not_auth:function(){return n="bill_states_auth"},bill_states_auth:function(){return n="bill_states_not_auth"}}[t]||function(){return null})(),e.setIn(["data","billStates"],n)}),f(t,g.AFTER_CQZC_SAVE,function(){return n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber)}),f(t,g.CHANGE_CQZC_CZAMOUNT,function(){return e.setIn(["data","acAssets",n.dataType],n.value)}),f(t,g.AUTO_CQZC_CZAMOUNT,function(){var t=e.getIn(["data","acAssets","originalAssetsAmount"]),n=e.getIn(["data","acAssets","depreciationAmount"]),a=e.getIn(["data","amount"]),r=e.getIn(["data","tax"]),o=e.getIn(["data","billType"]),i=0;return i="bill_common"===o?Number(n)+Number(a)-Number(t)-Number(r):Number(n)+Number(a)-Number(t),e=i>=0?e.deleteIn(["data","acAssets","lossAmount"]).setIn(["data","acAssets","netProfitAmount"],i):e.deleteIn(["data","acAssets","netProfitAmount"]).setIn(["data","acAssets","lossAmount"],-i)}),f(t,g.GET_CQZC_CARDLIST,function(){var t=[];return n.data.forEach(function(e){t.push({key:e.code+" "+e.name,value:""+e.uuid+s.TREE_JOIN_STR+e.code+s.TREE_JOIN_STR+e.name})}),e.getIn(["views","fromYl"])||(e=e.setIn(["data","acAssets","contactsCardRange"],null)),e.set("contactsCardList",(0,o.fromJS)(t))}),f(t,g.CQZC_SAVE_AND_NEW,function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),i="",u=n.receivedData.propertyCostList;return 1==u.length&&(i=u[0]),T.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","propertyCost"],i).setIn(["data","runningAbstract"],"购进资产支出")}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=l(n(25)),c=n(13),_=l(n(10)),d=n(1058);function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,o.fromJS)({views:{insertOrModify:"insert",fromYl:!1,shouldJzsy:!1},data:{categoryType:"",categoryUuid:"",categoryName:"请选择类别",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"购进资产支出",amount:"",assetType:"XZ_GJZC",runningState:"STATE_CQZC_YF",accountName:"",accountUuid:"",beCarryover:!1,carryoverAmount:"",billType:"bill_other",billStates:"bill_states_not_auth",billAssList:[],billAcList:[],taxRate:3,tax:"",propertyCostList:[],propertyCost:"",acAssets:{beManagemented:!1,beCleaning:!1,netProfitAmount:0,lossAmount:0,originalAssetsAmount:0,depreciationAmount:0,contactsCardRange:{uuid:"",code:"",name:""}}},contactsCardList:[]});var A={changeCqzcData:function(t,e){return{type:g.CHANGE_CQZC_DATA,dataType:t,value:e}},changePropertyCost:function(t){return{type:g.CHANGE_CQZC_PROPERTY_COST,value:t}},changeAcList:function(t,e){return{type:g.CHANGE_CQZC_ACLIST,value:t,acType:e}},changeAmount:function(t){return{type:g.CHANGE_CQZC_AMOUNT,value:t}},changeAccount:function(t){return{type:g.CHANGE_CQZC_ACCOUNT,value:t}},changeBeCarryover:function(){return{type:g.CHANGE_CQZC_BECARRYOVER}},changeTaxRate:function(t){return{type:g.CHANGE_CQZC_TAXRATE,value:t}},changeBillStates:function(){return{type:g.CHANGE_CQZC_BILLSTATES}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,i=r.get("enclosureList").toJS(),c=r.get("needDeleteUrl").toJS(),l=i.concat(c),f=n().cqzcAccountState,T=f.get("data").toJS(),g=T.runningState,E=T.acAssets.beManagemented,C=T.beCarryover,S=T.assetType;if(T.amount<=0)return _.toast.info("请填写金额");if(""==T.runningAbstract)return _.toast.info("请填写摘要");if(T.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH)return _.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符");if("XZ_ZJTX"==S&&""==T.propertyCost)return _.toast.info("请选择费用性质");if("STATE_CQZC_WF"!=g&&"STATE_CQZC_WS"!=g&&"XZ_ZJTX"!=S&&""==T.accountUuid)return _.toast.info("请选择账户");if("STATE_CQZC_JZSY"!=g&&"XZ_ZJTX"!=S&&E){var L=T.acAssets.contactsCardRange;if(!L||""==L.uuid)return _.toast.info("请选择往来单位")}if(C){var y=T.acAssets.originalAssetsAmount,I=T.acAssets.depreciationAmount;if(y<=0)return _.toast.info("请填写资产原值");if(I<=0)return _.toast.info("请填写累计折旧");if(Number(I)>Number(y))return _.toast.info("折旧额不能大于原值")}var m=n().homeAccountState.get("project").toJS(),p=m.usedProject,N=m.projectCard;if(p&&(C||"XZ_ZJTX"==S)){var v=[];if(!N.every(function(t){return v.push(t.uuid),t.uuid}))return _.toast.info("有未选择的项目卡片");if([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(v))).length<v.length)return _.toast.info("有重复的项目卡片")}var R="modifyRunningbusiness",G="insert"===f.getIn(["views","insertOrModify"]);G&&(delete T.uuid,R="insertAssets"),_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)(R,"POST",JSON.stringify(a({},T,{usedProject:p,projectCard:N,enclosureList:l})),function(n){if(_.toast.hide(),0!==n.code)_.toast.fail(n.code+" "+n.message);else if(_.toast.success("保存成功",2),t){var a=T.categoryUuid;e(A.getCardDetail(a)),e(d.homeAccountActions.changeLrlsData(["project","projectCard"],(0,o.fromJS)([{amount:""}]))),e(d.homeAccountActions.changeLrlsEnclosureList())}else e(A.afterLrAccountSave(n.data,G))})}},afterLrAccountSave:function(t,e){return{type:g.AFTER_CQZC_SAVE,data:t,isInsert:e}},changeCqzcCzAmount:function(t,e){return{type:g.CHANGE_CQZC_CZAMOUNT,dataType:t,value:e}},autoCqzcCzAmount:function(){return{type:g.AUTO_CQZC_CZAMOUNT}},getCqzcCardList:function(t){return function(e,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]),r=n().cqzcAccountState,o=r.getIn(["data","acAssets",t]),i="XZ_GJZC"===r.getIn(["data","assetType"])?"NEEDPAY":"NEEDIN";_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getCurrentCardList","POST",JSON.stringify({sobId:a,property:i,categoryList:o}),function(n){_.toast.hide(),(0,c.showMessage)(n)&&e({type:g.GET_CQZC_CARDLIST,data:n.data.result,cardType:t})})}},getCardDetail:function(t){return function(e){_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getRunningDetail","GET","uuid="+t,function(t){if(_.toast.hide(),(0,c.showMessage)(t)){var n=t.data.result;delete n.parentUuid,e({type:g.CQZC_SAVE_AND_NEW,receivedData:n}),n.acAssets.beManagemented&&e(A.getCqzcCardList("contactsRange"))}})}},changeCqzcViews:function(){return{type:g.CHANGE_CQZC_VIEWS}}},g=e.ActionTypes={GET_LB_CQZC_CARD_DETAIL:"GET_LB_CQZC_CARD_DETAIL",GET_LB_CQZC_FROM_YLLS:"GET_LB_CQZC_FROM_YLLS",CHANGE_CQZC_DATA:"CHANGE_CQZC_DATA",CHANGE_CQZC_AMOUNT:"CHANGE_CQZC_AMOUNT",CHANGE_CQZC_ACCOUNT:"CHANGE_CQZC_ACCOUNT",CHANGE_CQZC_ACLIST:"CHANGE_CQZC_ACLIST",CHANGE_CQZC_BECARRYOVER:"CHANGE_CQZC_BECARRYOVER",CHANGE_CQZC_TAXRATE:"CHANGE_CQZC_TAXRATE",CHANGE_CQZC_BILLSTATES:"CHANGE_CQZC_BILLSTATES",AFTER_CQZC_SAVE:"AFTER_CQZC_SAVE",CHANGE_CQZC_CZAMOUNT:"CHANGE_CQZC_CZAMOUNT",AUTO_CQZC_CZAMOUNT:"AUTO_CQZC_CZAMOUNT",CQZC_SAVE_AND_NEW:"CQZC_SAVE_AND_NEW",GET_CQZC_CARDLIST:"GET_CQZC_CARDLIST",CHANGE_CQZC_PROPERTY_COST:"CHANGE_CQZC_PROPERTY_COST",CHANGE_CQZC_VIEWS:"CHANGE_CQZC_VIEWS"};e.cqzcAccountActions=A},1279:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sfglAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},f(t,A.GET_LB_SFGL_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR);return T.setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","amount"],n.data.get("amount")).setIn(["views","insertOrModify"],"insert")}),f(t,A.GET_LB_SFGL_FROM_YLLS,function(){var t=0,a=n.state.getIn(["data","detail"]).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount")),a=e.get("flowType"),r=e.get("direction"),o=e.get("runningState");return"STATE_YYSR_TS"!==o&&"STATE_YYZC_TG"!==o||(n=-Math.abs(n)),"FLOW_INADVANCE"==a?"credit"==r?t+=n:t-=n:"credit"==r?t-=n:t+=n,e=e.set("isCheck",!0).set("notHandleAmount",Math.abs(n))})});return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).setIn(["data","flowNumber"],n.state.getIn(["data","flowNumber"])).setIn(["data","uuid"],n.state.getIn(["data","uuid"])).setIn(["data","categoryUuid"],n.state.getIn(["data","categoryUuid"])).setIn(["data","accountName"],n.state.getIn(["data","accountName"])).setIn(["data","accountUuid"],n.state.getIn(["data","accountUuid"])).setIn(["data","runningDate"],n.state.getIn(["data","runningDate"])).setIn(["data","runningAbstract"],n.state.getIn(["data","runningAbstract"])).setIn(["data","amount"],n.state.getIn(["data","amount"])).setIn(["data","totalAmount"],t).setIn(["data","contactsCardRange"],n.state.getIn(["data","usedCard"])).setIn(["data","cardUuid"],n.state.getIn(["data","usedCard","uuid"])).setIn(["data","beMoed"],n.state.getIn(["data","beMoed"])).setIn(["data","moedAmount"],n.state.getIn(["data","moedAmount"])).setIn(["manageList","childList"],a).set("cardList",(0,o.fromJS)([]))}),f(t,A.CHANGE_SFGL_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),f(t,A.CHANGE_SFGL_ACCOUNT,function(){var t=n.value.split(s.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),f(t,A.AFTER_SFGL_SAVE,function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),a=e.getIn(["data","categoryName"]);return T.setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],a)}),f(t,A.GET_YL_SFGLSTATE,function(){var t=0,a=(0,o.fromJS)(n.receivedData.detail).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount")),a=e.get("flowType"),r=e.get("direction"),o=e.get("runningState");return"STATE_YYSR_TS"!==o&&"STATE_YYZC_TG"!==o||(n=-Math.abs(n)),"FLOW_INADVANCE"==a?"credit"==r?t+=n:t-=n:"credit"==r?t-=n:t+=n,e=e.set("isCheck",!0).set("notHandleAmount",Math.abs(n))})});return e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.receivedData.flowNumber).setIn(["data","uuid"],n.receivedData.uuid).setIn(["data","categoryUuid"],n.receivedData.categoryUuid).setIn(["data","accountName"],n.receivedData.accountName).setIn(["data","accountUuid"],n.receivedData.accountUuid).setIn(["data","runningDate"],n.receivedData.runningDate).setIn(["data","runningAbstract"],n.receivedData.runningAbstract).setIn(["data","amount"],n.receivedData.amount).setIn(["data","totalAmount"],t).setIn(["data","contactsCardRange"],(0,o.fromJS)(n.receivedData.usedCard)).set(["data","cardUuid"],n.receivedData.usedCard.uuid).setIn(["data","beMoed"],n.receivedData.beMoed).setIn(["data","moedAmount"],n.receivedData.moedAmount).setIn(["manageList","childList"],a).set("cardList",(0,o.fromJS)([]))}),f(t,A.GET_SFGL_CARDLIST,function(){var t=[];return n.data.forEach(function(e){t.push({key:e.code+" "+e.name,value:""+e.uuid+s.TREE_JOIN_STR+e.code+s.TREE_JOIN_STR+e.name})}),e.set("cardList",(0,o.fromJS)(t)).setIn(["data","contactsCardRange"],null).set("manageList",(0,o.fromJS)({childList:[]})).set(["data","cardUuid"],"")}),f(t,A.CHANGE_SFGL_CARD,function(){var t=n.card.split(s.TREE_JOIN_STR),a={};return a.uuid=t[0],a.code=t[1],a.name=t[2],e.setIn(["data","contactsCardRange"],(0,o.fromJS)(a)).set("manageList",(0,o.fromJS)(n.data)).setIn(["data","cardUuid"],t[0])}),f(t,A.SFGL_MANAGELIST_CHECKDED,function(){return e.setIn(["manageList","childList",n.idx,"isCheck"],n.value)}),f(t,A.GET_SFGL_CATEGORYLIST,function(){var t=[];return n.data.forEach(function(e){t.push({key:""+e.name,value:""+e.uuid+s.TREE_JOIN_STR+e.name})}),e.setIn(["manageList","childList",n.idx,"categoryList"],(0,o.fromJS)(t))}),f(t,A.SFGL_MANAGELIST_CATETORY,function(){var t=n.value.split(s.TREE_JOIN_STR);return e.setIn(["manageList","childList",n.idx,"categoryName"],t[1]).setIn(["manageList","childList",n.idx,"categoryUuid"],t[0])}),f(t,A.SFGL_MANAGELIST_ALLCHECK,function(){return e.updateIn(["manageList","childList"],function(t){return t.map(function(t){return t.set("isCheck",n.value)})})}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=l(n(25)),c=n(13),_=(l(n(1064)),n(1058)),d=l(n(10));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,o.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_SFGL",categoryName:"收付管理",categoryUuid:"",runningDate:"",runningAbstract:"核销账款",amount:"",flowNumber:"",accountName:"",accountUuid:"",uuid:"",contactsCardRange:null,cardUuid:"",totalAmount:"",beMoed:!1,moedAmount:""},cardList:[],manageList:{childList:[]}});var A=e.ActionTypes={GET_LB_SFGL_CARD_DETAIL:"GET_LB_SFGL_CARD_DETAIL",GET_LB_SFGL_FROM_YLLS:"GET_LB_SFGL_FROM_YLLS",CHANGE_SFGL_DATA:"CHANGE_SFGL_DATA",CHANGE_SFGL_ACCOUNT:"CHANGE_SFGL_ACCOUNT",AFTER_SFGL_SAVE:"AFTER_SFGL_SAVE",GET_SFGL_CARDLIST:"GET_SFGL_CARDLIST",CHANGE_SFGL_CARD:"CHANGE_SFGL_CARD",SFGL_MANAGELIST_CHECKDED:"SFGL_MANAGELIST_CHECKDED",GET_SFGL_CATEGORYLIST:"GET_SFGL_CATEGORYLIST",SFGL_MANAGELIST_CATETORY:"SFGL_MANAGELIST_CATETORY",SFGL_MANAGELIST_ALLCHECK:"SFGL_MANAGELIST_ALLCHECK",GET_YL_SFGLSTATE:"GET_YL_SFGLSTATE"},g={changeSfglData:function(t,e){return{type:A.CHANGE_SFGL_DATA,dataType:t,value:e}},changeSfglAccount:function(t){return{type:A.CHANGE_SFGL_ACCOUNT,value:t}},getSfglCardList:function(t){return function(e){d.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getBusinessManagerCardList","POST",JSON.stringify({runningDate:t}),function(t){d.toast.hide(),(0,c.showMessage)(t)&&e({type:A.GET_SFGL_CARDLIST,data:t.data.cardList})})}},changeSfglCard:function(t,e,n){return function(e){var a=t.split(s.TREE_JOIN_STR);d.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getManageList","POST",JSON.stringify({runningDate:n,cardUuid:a[0],isCheck:!1}),function(n){d.toast.hide(),(0,c.showMessage)(n)&&e({type:A.CHANGE_SFGL_CARD,card:t,data:n.data.result})})}},manageListCheckded:function(t,e){return{type:A.SFGL_MANAGELIST_CHECKDED,idx:t,value:e}},getSfglCategoryList:function(t,e){return function(n){d.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getManagerCategoryList","POST",JSON.stringify({assType:e}),function(e){d.toast.hide(),(0,c.showMessage)(e)&&n({type:A.GET_SFGL_CATEGORYLIST,idx:t,data:e.data})})}},sfglManageListCatetory:function(t,e){return{type:A.SFGL_MANAGELIST_CATETORY,idx:t,value:e}},manageListAllCheck:function(t){return{type:A.SFGL_MANAGELIST_ALLCHECK,value:t}},saveRunningbusiness:function(t){return function(e,n){var r=n().sfglAccountState,o=n().homeAccountState,i=o.get("enclosureList").toJS(),l=o.get("needDeleteUrl").toJS(),f=i.concat(l),T="insert"===r.getIn(["views","insertOrModify"]),A="modifyRunningpayment";T&&(A="insertRunningpayment");var E=[],C=!1,S=!1;r.getIn(["manageList","childList"]).forEach(function(t){t.get("isCheck")&&(C=!0,t.get("beOpened")?(void 0!=t.get("categoryUuid")&&0!=t.get("categoryUuid").length||(S=!0),E.push({beOpened:!0,categoryUuid:t.get("categoryUuid"),uuid:t.get("uuid"),assType:t.get("assType")})):E.push({uuid:t.get("uuid"),assType:t.get("assType")}))});var L=r.get("data").toJS(),y=Math.abs(L.amount),I=Math.abs(L.totalAmount),m=L.beMoed?Number(L.moedAmount):0;return""==L.runningAbstract?d.toast.info("请填写摘要"):L.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH?d.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符"):L.cardUuid?y+m>I?d.toast.info("收付金额大于您所有业务的所有未处理金额"):y+m==0?d.toast.info("请填写金额"):y>0&&""==L.accountUuid?d.toast.info("请选择账户"):C?S?d.toast.info("请选择需要核算的列表的类别"):(d.toast.loading(s.LOADING_TIP_TEXT,0),void(0,u.default)(A,"POST",JSON.stringify(a({},L,{amount:y,uuidList:E,enclosureList:f})),function(n){if(d.toast.hide(),(0,c.showMessage)(n))if(d.toast.success("保存成功",2),t){var a=L.runningDate;e(g.afterSfglSave()),e(g.getSfglCardList(a)),e(_.homeAccountActions.changeLrlsEnclosureList())}else{var r=T?n.data:L.uuid;e(g.getYlSfglState(r))}})):d.toast.info("请选择需要核算的列表"):d.toast.info("请选择往来单位")}},afterSfglSave:function(){return{type:A.AFTER_SFGL_SAVE}},getYlSfglState:function(t){return function(e){d.toast.loading("加载中...",0),(0,u.default)("getRunningBusiness","GET","uuid="+t,function(t){d.toast.hide(),(0,c.showMessage)(t)&&(e({type:A.GET_YL_SFGLSTATE,receivedData:t.data.result}),t.data.result.detail.forEach(function(t,n){t.beOpened&&e(g.getSfglCategoryList(n,t.assType))}))})}}};e.sfglAccountActions=g},1280:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sfzcAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},T(t,E.GET_LB_SFZC_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR),e=n.data.get("amount"),a=n.receivedData.propertyTax,r=n.receivedData.acTax.beAccrued,i=(n.receivedData.acTax.beInAdvance,""),u="";return"SX_GRSF"!=a&&"SX_ZZS"!=a||(i="STATE_SF_JN",u=(0,l.abstractFun)(i,(0,o.fromJS)(n.receivedData))),r||"SX_QTSF"!=a&&"SX_QYSDS"!=a||(i="STATE_SF_JN",u=(0,l.abstractFun)(i,(0,o.fromJS)(n.receivedData))),A.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","name"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","runningAbstract"],u).setIn(["data","accountName"],n.data.get("accountName")).setIn(["data","accountUuid"],n.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["data","runningState"],i).setIn(["views","insertOrModify"],"insert")}),T(t,E.GET_LB_SFZC_FROM_YLLS,function(){var t=n.state.getIn(["data","propertyTax"]),a=n.state.getIn(["data","runningState"]),r=0,i=(0,o.fromJS)([]);return i="SX_GRSF"!=t&&"STATE_SF_JN"==a?n.state.getIn(["data","paymentList"]).update(function(t){return t.map(function(t){var e=Number(t.get("notHandleAmount"))+Number(t.get("handleAmount"));return r+=e,t.set("notHandleAmount",e)})}):n.state.getIn(["data","paymentList"]),e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data")).setIn(["data","paymentList"],i).setIn(["data","jtAmount"],r)}),T(t,E.CHANGE_SFZC_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),T(t,E.CHANGE_SFZC_RUNNING_STATE,function(){return e.setIn(["data","runningState"],n.key)}),T(t,E.CHANGE_SFZC_ASSLIST,function(){var t=n.value.split(s.TREE_JOIN_STR),a={};return a.assId=t[0],a.assName=t[1],a.assCategory=t[2],e.setIn(["data","acTax",n.acType,n.idx],(0,o.fromJS)(a))}),T(t,E.CHANGE_SFZC_ACCOUNT,function(){var t=n.value.split(s.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),T(t,E.AFTER_SFZC_SAVE,function(){return n.saveAndNew?e=A:(n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber)),e}),T(t,E.GET_SFZC_PAYMENTLIST,function(){return(e=n.isQtsf?e.setIn(["data","amount"],""):e.setIn(["data","jtAmount"],"")).setIn(["data","paymentList"],(0,o.fromJS)(n.receivedData))}),T(t,E.PAYMENTLIST_BESELECT,function(){return e.setIn(["data","paymentList",n.idx,"beSelect"],n.value)}),T(t,E.PAYMENTLIST_BEALLCHECK,function(){return e=n.value?e.updateIn(["data","paymentList"],function(t){return t.map(function(t){return t.set("beSelect",!0)})}):e.updateIn(["data","paymentList"],function(t){return t.map(function(t){return t.set("beSelect",!1)})})}),T(t,E.GET_YL_SFZCSTATE,function(){var t=0,a=(0,o.fromJS)(n.receivedData.paymentList).update(function(e){return e.map(function(e){var n=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=n,e.set("notHandleAmount",n)})});return e.setIn(["views","insertOrModify"],"modify").set("data",(0,o.fromJS)(n.receivedData)).setIn(["data","paymentList"],a).setIn(["data","jtAmount"],t)}),T(t,E.SFZC_SAVE_AND_NEW,function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),i=n.receivedData.propertyTax,u=n.receivedData.acTax.beAccrued,s=(n.receivedData.acTax.beInAdvance,""),c="";return"SX_GRSF"!=i&&"SX_ZZS"!=i||(s="STATE_SF_JN",c=(0,l.abstractFun)(s,(0,o.fromJS)(n.receivedData))),u||"SX_QTSF"!=i&&"SX_QYSDS"!=i||(s="STATE_SF_JN",c=(0,l.abstractFun)(s,(0,o.fromJS)(n.receivedData))),A.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","runningState"],s).setIn(["data","runningAbstract"],c)}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=f(n(25)),c=n(13),_=f(n(10)),d=n(1058),l=n(1061);function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=(0,o.fromJS)({views:{insertOrModify:"insert",fromYl:!1},data:{categoryType:"",categoryUuid:"",categoryName:"请选择类别",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"",propertyTax:"",accountName:"",accountUuid:"",paymentList:[],jtAmount:"",handleAmount:"",deductedAmount:"",offsetAmount:"",reduceAmount:"",acTax:{accruedAc:[],accruedList:[],payAc:[],payList:[],turnOutAc:[],turnOutList:[],inAdvanceAc:[],inAdvanceList:[],beAccrued:!1,beTurnOut:!1,beInAdvance:!1}}});var g={changeSfzcData:function(t,e){return{type:E.CHANGE_SFZC_DATA,dataType:t,value:e}},changeSfzcRunningState:function(t,e){return{type:E.CHANGE_SFZC_RUNNING_STATE,propertyTax:t,key:e}},changeSfzcAssList:function(t,e,n){return{type:E.CHANGE_SFZC_ASSLIST,value:e,idx:t,acType:n}},changeSfzcAccount:function(t){return{type:E.CHANGE_SFZC_ACCOUNT,value:t}},getSfzcPaymentList:function(t){return function(e,n){var a=n().sfzcAccountState,r=a.getIn(["data","categoryUuid"]),o=a.getIn(["data","runningDate"]),i=a.getIn(["data","acTax"]),d=i.get("accruedAc"),l=(d.size&&d.getIn([0,"assCategoryList"]),i.get("accruedList"),i.get("payAc")),f=(l.size&&l.getIn([0,"assCategoryList"]),i.get("payList"),t?d.getIn([0,"acId"]):l.getIn([0,"acId"])),T=t?"getPaymentTaxInfo":"getBusinessVATInfo";_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)(T,"POST",JSON.stringify({categoryUuid:r,runningDate:o,acId:f,assId1:"",assCategory1:"",assId2:"",assCategory2:""}),function(n){_.toast.hide(),(0,c.showMessage)(n)&&e({type:E.GET_SFZC_PAYMENTLIST,receivedData:n.data.resultList,isQtsf:t})}),t||(0,u.default)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:r,runningDate:o,acId:f,assId1:"",assCategory1:"",assId2:"",assCategory2:""}),function(t){(0,c.showMessage)(t)&&e(g.changeSfzcData("deductedAmount",t.data.result.amount))})}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,i=r.get("enclosureList").toJS(),l=r.get("needDeleteUrl").toJS(),f=i.concat(l),T=n().sfzcAccountState,A=T.get("data").toJS(),E=A.propertyTax,C=A.runningState,S=A.accountUuid,L=A.amount,y=A.acTax.beAccrued,I=A.jtAmount,m=A.handleAmount,p=A.offsetAmount,N=A.reduceAmount,v=Number(p)+Number(m)+Number(N);if(""==A.runningAbstract)return _.toast.info("请填写摘要");if(A.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH)return _.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符");if(""==C)return _.toast.info("请选择流水状态");switch(E){case"SX_ZZS":if("STATE_SF_JN"==C&&v<=0)return _.toast.info("请填写金额");if("STATE_SF_YJZZS"==C&&L<=0)return _.toast.info("请填写金额");if(m>0&&""==S)return _.toast.info("请选择账户");if("STATE_SF_JN"==C&&v>I)return _.toast.info("处理税费不能大于待处理税费");break;case"SX_QTSF":case"SX_QYSDS":if("STATE_SF_JT"==C&&L<=0)return _.toast.info("请填写金额");if("STATE_SF_JN"==C){if(Number(L)+Number(N)<=0)return _.toast.info("请填写金额");if(L>0&&""==S)return _.toast.info("请选择账户")}break;case"SX_GRSF":if(L<=0)return _.toast.info("请填写金额");if(""==S)return _.toast.info("请选择账户");break;default:console.log("校验税费支出出错")}var R=n().homeAccountState.get("project").toJS(),G=R.usedProject,h=R.projectCard,Y=!1;if("SX_QYSDS"!=E&&"SX_QTSF"!=E||("STATE_SF_JT"==C||!y&&"STATE_SF_JN"==C)&&(Y=!0),G&&Y){var D=[],O=!1;if(!h.every(function(t){return D.push(t.uuid),t.amount<=0&&(O=!0),t.uuid}))return _.toast.info("有未选择的项目卡片");if(O)return _.toast.info("项目卡片有未填写的金额");if([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(D))).length<D.length)return _.toast.info("有重复的项目卡片")}var b=!1;if(y&&"SX_GRSF"!=E&&"STATE_SF_JN"==C&&(b=!0,!A.paymentList.some(function(t){return t.beSelect})))return _.toast.info("请选择需要处理的流水");var Z="modifyRunningbusiness",J="insert"===T.getIn(["views","insertOrModify"]);J&&(delete A.uuid,delete A.parentUuid,Z="insertTax"),_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)(Z,"POST",JSON.stringify(a({},A,{usedProject:G,projectCard:h,enclosureList:f})),function(n){if(_.toast.hide(),(0,c.showMessage)(n))if(_.toast.success("保存成功",2),t){var a=A.categoryUuid;e(g.getCardDetail(a)),e(d.homeAccountActions.changeLrlsData(["project","projectCard"],(0,o.fromJS)([{amount:""}]))),e(d.homeAccountActions.changeLrlsEnclosureList())}else{if(b){var r=J?n.data.uuid:A.uuid;e(g.getYlSfzcState(r))}e(g.afterSfzcSave(n.data,t,J))}})}},paymentListBeSelect:function(t,e){return{type:E.PAYMENTLIST_BESELECT,value:e,idx:t}},paymentListBeAllCheck:function(t){return{type:E.PAYMENTLIST_BEALLCHECK,value:t}},afterSfzcSave:function(t,e,n){return{type:E.AFTER_SFZC_SAVE,data:t,saveAndNew:e,isInsert:n}},getYlSfzcState:function(t,e){return function(e){_.toast.loading("加载中...",0),(0,u.default)("getRunningBusiness","GET","uuid="+t,function(t){_.toast.hide(),(0,c.showMessage)(t)&&e({type:E.GET_YL_SFZCSTATE,receivedData:t.data.result})})}},getCardDetail:function(t){return function(e){_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getRunningDetail","GET","uuid="+t,function(t){if(_.toast.hide(),(0,c.showMessage)(t)){var n=t.data.result;delete n.parentUuid,e({type:E.SFZC_SAVE_AND_NEW,receivedData:n}),"SX_ZZS"==n.propertyTax&&e(g.getSfzcPaymentList())}})}}},E=e.ActionTypes={GET_LB_SFZC_CARD_DETAIL:"GET_LB_SFZC_CARD_DETAIL",GET_LB_SFZC_FROM_YLLS:"GET_LB_SFZC_FROM_YLLS",CHANGE_SFZC_DATA:"CHANGE_SFZC_DATA",CHANGE_SFZC_RUNNING_STATE:"CHANGE_SFZC_RUNNING_STATE",CHANGE_SFZC_ASSLIST:"CHANGE_SFZC_ASSLIST",CHANGE_SFZC_ACCOUNT:"CHANGE_SFZC_ACCOUNT",AFTER_SFZC_SAVE:"AFTER_SFZC_SAVE",GET_SFZC_PAYMENTLIST:"GET_SFZC_PAYMENTLIST",PAYMENTLIST_BESELECT:"PAYMENTLIST_BESELECT",PAYMENTLIST_BEALLCHECK:"PAYMENTLIST_BEALLCHECK",GET_YL_SFZCSTATE:"GET_YL_SFZCSTATE",SFZC_SAVE_AND_NEW:"SFZC_SAVE_AND_NEW"};e.sfzcAccountActions=g},1297:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.jzcbAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},f(t,A.GET_LB_JZCB_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR);return T.setIn(["data","categoryUuid"],t[0]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["views","insertOrModify"],"insert")}),f(t,A.GET_LB_JZCB_FROM_YLLS,function(){var t=0,a=n.state.getIn(["data","businessList"]).update(function(e){return e.map(function(e){return t+=e.get("amount"),e.set("isCheck",!0)})}),r=n.state.getIn(["data","runningType"]),o="LX_JZCB"==r?"STATE_YYSR_XS":"STATE_YYSR_TS";return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("hxList",a).setIn(["data","totalAmount"],t).setIn(["data","lsCategoryName"],"货物成本结转").setIn(["data","runningState"],o).setIn(["data","runningDate"],n.state.getIn(["data","runningDate"])).setIn(["data","runningAbstract"],n.state.getIn(["data","runningAbstract"])).setIn(["data","stockCardRange"],n.state.getIn(["data","acBusinessIncome","stockCardList"])).setIn(["data","carryoverBusinessUuid"],n.state.getIn(["data","uuid"]))}),f(t,A.CHANGE_JZCB_RUNNING_STATE,function(){var t="STATE_YYSR_XS"==n.key?"销售存货结转成本":"销货退回结转成本";return e.setIn(["data","runningState"],n.key).setIn(["data","runningAbstract"],t)}),f(t,A.CHANGE_JZCB_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),f(t,A.GET_JZCB_LIST,function(){return e=e.set("hxList",(0,o.fromJS)(n.receivedData))}),f(t,A.JZCB_HXLIST_BECHECK,function(){if(e=e.setIn(["hxList",n.idx,"isCheck"],n.value),!n.value){var t=e.getIn(["data","stockCardRange"]),a=e.get("hxList");t.forEach(function(t,r){var o=!1;a.forEach(function(e){e.get("isCheck")&&e.get("stockCardUuid")==t.get("uuid")&&(o=!0)}),o||(e=e.setIn(["data","stockCardRange",n.idx,"amount"],""))})}return e}),f(t,A.JZCB_HXLIST_BEALLCHECK,function(){return e.update("hxList",function(t){return t.map(function(t){return t.set("isCheck",n.value)})})}),f(t,A.AFTER_JZCB_SAVE,function(){if(n.saveAndNew){var t=e.getIn(["data","runningDate"]);e=T.setIn(["data","runningDate"],t)}else e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","carryoverBusinessUuid"],n.data.result);return e}),f(t,A.GET_JZCB_CARDLIST,function(){var t=[];return n.receivedData.forEach(function(e){t.push({key:e.code+" "+e.name,value:""+e.uuid+s.TREE_JOIN_STR+e.code+s.TREE_JOIN_STR+e.name})}),e.set("stockCardList",(0,o.fromJS)(t)).set("hxList",(0,o.fromJS)([])).setIn(["data","stockCardRange"],(0,o.fromJS)([{}]))}),f(t,A.CHANGE_JZCB_CARD,function(){switch(n.dataType){case"card":var t=n.value.split(s.TREE_JOIN_STR);e=e.setIn(["data","stockCardRange",n.idx],(0,o.fromJS)({uuid:t[0],code:t[1],name:t[2],amount:""}));break;case"amount":e=e.setIn(["data","stockCardRange",n.idx,"amount"],n.value);break;case"add":e=e.setIn(["data","stockCardRange",n.idx],(0,o.fromJS)({amount:""}));break;case"delete":e=e.deleteIn(["data","stockCardRange",n.idx])}return e}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=l(n(25)),c=n(13),_=(l(n(1064)),l(n(10))),d=n(1058);function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,o.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_JZCB",lsCategoryName:"货物成本结转",categoryName:"请选择流水类别",categoryUuid:"",runningDate:"",runningAbstract:"销售存货结转成本",runningState:"STATE_YYSR_XS",carryoverBusinessUuid:"",totalAmount:"",stockCardRange:[{}]},hxList:[],stockCardList:[],yysrCategory:[]});var A=e.ActionTypes={GET_LB_JZCB_CARD_DETAIL:"GET_LB_JZCB_CARD_DETAIL",GET_LB_JZCB_FROM_YLLS:"GET_LB_JZCB_FROM_YLLS",CHANGE_JZCB_RUNNING_STATE:"CHANGE_JZCB_RUNNING_STATE",CHANGE_JZCB_DATA:"CHANGE_JZCB_DATA",AFTER_JZCB_SAVE:"AFTER_JZCB_SAVE",GET_JZCB_LIST:"GET_JZCB_LIST",JZCB_HXLIST_BECHECK:"JZCB_HXLIST_BECHECK",JZCB_HXLIST_BEALLCHECK:"JZCB_HXLIST_BEALLCHECK",GET_JZCB_CARDLIST:"GET_JZCB_CARDLIST",CHANGE_JZCB_CARD:"CHANGE_JZCB_CARD"},g={changeJzcbRunningState:function(t){return{type:A.CHANGE_JZCB_RUNNING_STATE,key:t}},changeJzcbData:function(t,e){return{type:A.CHANGE_JZCB_DATA,dataType:t,value:e}},getJzcbCardList:function(){return function(t,e){var n=e().jzcbAccountState.get("data"),a=n.get("runningDate"),r=n.get("runningState");a&&r&&(_.toast.loading("加载中...",0),(0,u.default)("getCostStock","POST",JSON.stringify({runningDate:a,runningState:r}),function(e){_.toast.hide(),(0,c.showMessage)(e)&&t({type:A.GET_JZCB_CARDLIST,receivedData:e.data.result})}))}},changeJzcbCard:function(t,e,n){return{type:A.CHANGE_JZCB_CARD,dataType:t,value:e,idx:n}},getJzcbList:function(){return function(t,e){var n=e().jzcbAccountState.get("data"),a=n.get("runningDate"),r=n.get("runningState"),o=n.get("stockCardRange").map(function(t){return t.get("uuid")});a&&r&&(_.toast.loading("加载中...",0),(0,u.default)("getCarryoverList","POST",JSON.stringify({runningDate:a,runningState:r,cardUuidList:o}),function(e){_.toast.hide(),(0,c.showMessage)(e)&&t({type:A.GET_JZCB_LIST,receivedData:e.data.result})}))}},jzcbHxListBeCheck:function(t,e){return{type:A.JZCB_HXLIST_BECHECK,idx:t,value:e}},jzcbHxListBeAllCheck:function(t){return{type:A.JZCB_HXLIST_BEALLCHECK,value:t}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,o=r.get("enclosureList").toJS(),i=r.get("needDeleteUrl").toJS(),l=o.concat(i),f=n().jzcbAccountState,T="insert"===f.getIn(["views","insertOrModify"])?"insertCarryoverItem":"modifyCarryoverItem",A=f.get("data").toJS(),E=[],C=!1;if(f.get("hxList").forEach(function(t){t.get("isCheck")&&(C=!0,E.push(t.get("uuid")))}),""==A.runningAbstract)return _.toast.info("请填写摘要");if(A.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH)return _.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符");if(!C)return _.toast.info("请选择需要核算的列表");var S=[],L=!1,y=[];return A.stockCardRange.every(function(t,e){return S.push(t.uuid),t.amount<=0?L=!0:y.push({uuid:t.uuid,amount:t.amount}),t.uuid})?L?_.toast.info("有未填写的成本金额"):[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(S))).length<S.length?_.toast.info("有重复的存货卡片"):(_.toast.loading(s.LOADING_TIP_TEXT,0),void(0,u.default)(T,"POST",JSON.stringify(a({},A,{uuidList:E,cardList:y,enclosureList:l})),function(n){_.toast.hide(),(0,c.showMessage)(n)&&(e(g.afterJzcbSave(n.data,t)),t&&e(d.homeAccountActions.changeLrlsEnclosureList()))})):_.toast.info("有未选择的存货卡片")}},afterJzcbSave:function(t,e){return{type:A.AFTER_JZCB_SAVE,data:t,saveAndNew:e}}};e.jzcbAccountActions=g},1298:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fprzAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},f(t,A.GET_LB_FPRZ_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR);return T.setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["views","insertOrModify"],"insert")}),f(t,A.GET_LB_FPRZ_FROM_YLLS,function(){var t=n.state.getIn(["data","businessList"]).update(function(t){return t.map(function(t){return t.set("isCheck",!0)})}),a=n.state.getIn(["data","runningState"]),r="STATE_FPRZ_CG"==a?"BILL_AUTH_TYPE_CG":"BILL_AUTH_TYPE_TG";return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data")).set("hxList",t).setIn(["data","totalAmount"],n.state.getIn(["data","tax"])).setIn(["data","billAuthType"],r)}),f(t,A.CHANGE_FPRZ_RUNNING_STATE,function(){var t="BILL_AUTH_TYPE_CG"==n.key?"增值税专用发票认证":"退购红字发票认证";return e.setIn(["data","billAuthType"],n.key).setIn(["data","runningAbstract"],t)}),f(t,A.CHANGE_FPRZ_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),f(t,A.GET_FPRZ_LIST,function(){return e=e.set("hxList",(0,o.fromJS)(n.receivedData))}),f(t,A.FPRZ_HXLIST_BECHECK,function(){return e.setIn(["hxList",n.idx,"isCheck"],n.value)}),f(t,A.FPRZ_HXLIST_BEALLCHECK,function(){return e.update("hxList",function(t){return t.map(function(t){return t.set("isCheck",n.value)})})}),f(t,A.AFTER_FPRZ_SAVE,function(){if(n.saveAndNew){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);e=T.setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r)}else e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","authBusinessUuid"],n.data.result);return e}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=l(n(25)),c=n(13),_=(l(n(1064)),l(n(10))),d=n(1058);function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,o.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_FPRZ",categoryName:"发票认证",categoryUuid:"",runningDate:"",runningAbstract:"增值税专用发票认证",billAuthType:"BILL_AUTH_TYPE_CG",authBusinessUuid:"",totalAmount:""},hxList:[]});var A=e.ActionTypes={GET_LB_FPRZ_CARD_DETAIL:"GET_LB_FPRZ_CARD_DETAIL",GET_LB_FPRZ_FROM_YLLS:"GET_LB_FPRZ_FROM_YLLS",CHANGE_FPRZ_RUNNING_STATE:"CHANGE_FPRZ_RUNNING_STATE",CHANGE_FPRZ_DATA:"CHANGE_FPRZ_DATA",GET_FPRZ_LIST:"GET_FPRZ_LIST",FPRZ_HXLIST_BECHECK:"FPRZ_HXLIST_BECHECK",FPRZ_HXLIST_BEALLCHECK:"FPRZ_HXLIST_BEALLCHECK",AFTER_FPRZ_SAVE:"AFTER_FPRZ_SAVE"},g={changeFprzRunningState:function(t){return{type:A.CHANGE_FPRZ_RUNNING_STATE,key:t}},changeFprzData:function(t,e){return{type:A.CHANGE_FPRZ_DATA,dataType:t,value:e}},getFprzList:function(){return function(t,e){var n=e().fprzAccountState.get("data"),a=n.get("runningDate"),r=n.get("billAuthType");a&&r&&(_.toast.loading("加载中...",0),(0,u.default)("getBusinessAuthList","POST",JSON.stringify({runningDate:a,billAuthType:r}),function(e){_.toast.hide(),(0,c.showMessage)(e)&&t({type:A.GET_FPRZ_LIST,receivedData:e.data.result})}))}},fprzHxListBeCheck:function(t,e){return{type:A.FPRZ_HXLIST_BECHECK,idx:t,value:e}},fprzHxListBeAllCheck:function(t){return{type:A.FPRZ_HXLIST_BEALLCHECK,value:t}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,o=r.get("enclosureList").toJS(),i=r.get("needDeleteUrl").toJS(),c=o.concat(i),l=n().fprzAccountState,f="insert"===l.getIn(["views","insertOrModify"])?"insertBusinessAuthItem":"modifyBusinessAuthItem",T=[],A=!1;l.get("hxList").forEach(function(t){t.get("isCheck")&&(A=!0,T.push(t.get("uuid")))});var E=l.get("data").toJS();return""==E.billAuthType?_.toast.info("请选择流水状态"):""==E.runningAbstract?_.toast.info("请填写摘要"):E.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH?_.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符"):A?(_.toast.loading(s.LOADING_TIP_TEXT,0),void(0,u.default)(f,"POST",JSON.stringify(a({},E,{uuidList:T,enclosureList:c})),function(n){_.toast.hide(),0!==n.code?_.toast.fail(n.code+" "+n.message):(_.toast.success("保存成功",2),e(g.afterFprzSave(n.data,t)),t&&e(d.homeAccountActions.changeLrlsEnclosureList()))})):_.toast.info("请选择需要认证的列表")}},afterFprzSave:function(t,e){return{type:A.AFTER_FPRZ_SAVE,data:t,saveAndNew:e}}};e.fprzAccountActions=g},1299:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.kjfpAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},f(t,A.GET_LB_KJFP_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR);return T.setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["views","insertOrModify"],"insert")}),f(t,A.GET_LB_KJFP_FROM_YLLS,function(){var t=n.state.getIn(["data","businessList"]).update(function(t){return t.map(function(t){return t.set("isCheck",!0)})}),a=n.state.getIn(["data","runningState"]),r="STATE_KJFP_XS"==a?"BILL_MAKE_OUT_TYPE_XS":"BILL_MAKE_OUT_TYPE_TS";return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data")).set("hxList",t).setIn(["data","totalAmount"],n.state.getIn(["data","tax"])).setIn(["data","billMakeOutType"],r).setIn(["data","makeOutBusinessUuid"],n.state.getIn(["data","uuid"]))}),f(t,A.CHANGE_KJFP_RUNNING_STATE,function(){var t="BILL_MAKE_OUT_TYPE_XS"==n.key?"收入开具发票":"退销开具红字发票";return e.setIn(["data","billMakeOutType"],n.key).setIn(["data","runningAbstract"],t)}),f(t,A.CHANGE_KJFP_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),f(t,A.GET_KJFP_LIST,function(){return e=e.set("hxList",(0,o.fromJS)(n.receivedData))}),f(t,A.KJFP_HXLIST_BECHECK,function(){return e.setIn(["hxList",n.idx,"isCheck"],n.value)}),f(t,A.KJFP_HXLIST_BEALLCHECK,function(){return e.update("hxList",function(t){return t.map(function(t){return t.set("isCheck",n.value)})})}),f(t,A.AFTER_KJFP_SAVE,function(){if(n.saveAndNew){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);e=T.setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r)}else e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","makeOutBusinessUuid"],n.data.result);return e}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=l(n(25)),c=n(13),_=(l(n(1064)),l(n(10))),d=n(1058);function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,o.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_KJFP",categoryName:"开具发票",categoryUuid:"",runningDate:"",runningAbstract:"收入开具发票",billMakeOutType:"BILL_MAKE_OUT_TYPE_XS",makeOutBusinessUuid:"",totalAmount:""},hxList:[]});var A=e.ActionTypes={GET_LB_KJFP_CARD_DETAIL:"GET_LB_KJFP_CARD_DETAIL",GET_LB_KJFP_FROM_YLLS:"GET_LB_KJFP_FROM_YLLS",CHANGE_KJFP_RUNNING_STATE:"CHANGE_KJFP_RUNNING_STATE",CHANGE_KJFP_DATA:"CHANGE_KJFP_DATA",GET_KJFP_LIST:"GET_KJFP_LIST",KJFP_HXLIST_BECHECK:"KJFP_HXLIST_BECHECK",KJFP_HXLIST_BEALLCHECK:"KJFP_HXLIST_BEALLCHECK",AFTER_KJFP_SAVE:"AFTER_KJFP_SAVE"},g={changeKjfpRunningState:function(t){return{type:A.CHANGE_KJFP_RUNNING_STATE,key:t}},changeKjfpData:function(t,e){return{type:A.CHANGE_KJFP_DATA,dataType:t,value:e}},getKjfpList:function(){return function(t,e){var n=e().kjfpAccountState.get("data"),a=n.get("runningDate"),r=n.get("billMakeOutType");a&&r&&(_.toast.loading("加载中...",0),(0,u.default)("getBusinessMakeoutList","POST",JSON.stringify({runningDate:a,billMakeOutType:r}),function(e){_.toast.hide(),(0,c.showMessage)(e)&&t({type:A.GET_KJFP_LIST,receivedData:e.data.result})}))}},kjfpHxListBeCheck:function(t,e){return{type:A.KJFP_HXLIST_BECHECK,idx:t,value:e}},kjfpHxListBeAllCheck:function(t){return{type:A.KJFP_HXLIST_BEALLCHECK,value:t}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,o=r.get("enclosureList").toJS(),i=r.get("needDeleteUrl").toJS(),c=o.concat(i),l=n().kjfpAccountState,f="insert"===l.getIn(["views","insertOrModify"])?"insertBusinessMakeoutItem":"modifyBusinessMakeoutItem",T=[],A=!1;l.get("hxList").forEach(function(t){t.get("isCheck")&&(A=!0,T.push(t.get("uuid")))});var E=l.get("data").toJS();return""==E.billMakeOutType?_.toast.info("请选择流水状态"):""==E.runningAbstract?_.toast.info("请填写摘要"):E.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH?_.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符"):A?(_.toast.loading(s.LOADING_TIP_TEXT,0),void(0,u.default)(f,"POST",JSON.stringify(a({},E,{uuidList:T,enclosureList:c})),function(n){_.toast.hide(),0!==n.code?_.toast.fail(n.code+" "+n.message):(_.toast.success("保存成功",2),e(g.afterKjfpSave(n.data,t)),t&&e(d.homeAccountActions.changeLrlsEnclosureList()))})):_.toast.info("请选择需要开具发票的列表")}},afterKjfpSave:function(t,e){return{type:A.AFTER_KJFP_SAVE,data:t,saveAndNew:e}}};e.kjfpAccountActions=g},1341:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.yysrAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},T(t,E.GET_LB_YYSR_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR),e=n.data.get("amount"),a=A.getIn(["data","taxRate"]),r=e-e/(1+a/100),i="销售"+("SX_HW"===n.receivedData.propertyCarryover?"存货":"")+"收入";return A.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).set("preData",A.get("preData")).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","accountName"],n.data.get("accountName")).setIn(["data","accountUuid"],n.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["data","tax"],(0,c.decimal)(r)).setIn(["data","runningAbstract"],i).setIn(["views","insertOrModify"],"insert").setIn(["data","acBusinessIncome","carryoverCardList"],(0,o.fromJS)([{amount:""}]))}),T(t,E.GET_LB_YYSR_FROM_YLLS,function(){var t=Math.abs(n.state.getIn(["data","amount"]))==Math.abs(n.state.getIn(["data","currentAmount"]));return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data")).set("preData",n.state.get("preData")).setIn(["data","acBusinessIncome","carryoverCardList"],(0,o.fromJS)([{amount:""}])).setIn(["data","isFullPayment"],t)}),T(t,E.CHANGE_RUNNING_STATE,function(){return e.setIn(["data","runningState"],n.key).setIn(["data","acBusinessIncome","contactsCardRange"],null)}),T(t,E.CHANGE_YYSR_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),T(t,E.CHANGE_ACLIST,function(){var t=n.value.split(s.TREE_JOIN_STR),a={};return a.uuid=t[0],a.code=t[1],a.name=t[2],e.setIn(["data","acBusinessIncome",n.acType],(0,o.fromJS)(a))}),T(t,E.CHANGE_AMOUNT,function(){var t=e.getIn(["data","taxRate"]),a=n.value,r=a-a/(1+t/100);return e.setIn(["data","amount"],a).setIn(["data","tax"],(0,c.decimal)(r))}),T(t,E.CHANGE_ACCOUNT,function(){var t=n.value.split(s.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),T(t,E.CHANGE_TAXRATE,function(){var t=e.getIn(["data","amount"]),a=n.value,r=0;return r=t-t/(1+a/100),e.setIn(["data","taxRate"],a).setIn(["data","tax"],(0,c.decimal)(r))}),T(t,E.CHANGE_BILLSTATES,function(){var t=e.getIn(["data","billStates"]),n="";return({bill_states_not_make_out:function(){return n="bill_states_make_out"},bill_states_make_out:function(){return n="bill_states_not_make_out"}}[t]||function(){return null})(),e.setIn(["data","billStates"],n).setIn(["data","billAssList"],(0,o.fromJS)([])).setIn(["data","billAcList"],(0,o.fromJS)([]))}),T(t,E.AFTER_LRACCOUNT_SAVE,function(){return n.saveAndNew?e=A:(n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber)),e}),T(t,E.GET_YYSR_PREAMOUNT,function(){return e.setIn(["preData","preAmount"],n.data.preAmount).setIn(["preData","receiveAmount"],n.data.amount)}),T(t,E.GET_YYSR_CARDLIST,function(){var t=[];return n.data.forEach(function(e){t.push({key:e.code+" "+e.name,value:""+e.uuid+s.TREE_JOIN_STR+e.code+s.TREE_JOIN_STR+e.name})}),e="stockRange"===n.cardType?e.set("stockCardList",(0,o.fromJS)(t)):e.set("contactsCardList",(0,o.fromJS)(t))}),T(t,E.YYSR_SAVE_AND_NEW,function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),i="销售"+("SX_HW"===n.receivedData.propertyCarryover?"存货":"")+"收入";return A.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],i).setIn(["data","acBusinessIncome","carryoverCardList"],(0,o.fromJS)([{amount:""}]))}),T(t,E.CHANGE_YYSR_STOCKCARD,function(){switch(n.dataType){case"card":var t=n.value.split(s.TREE_JOIN_STR),a=e.getIn(["data","acBusinessIncome","stockCardList",n.idx,"amount"]);e=e.setIn(["data","acBusinessIncome","stockCardList",n.idx],(0,o.fromJS)({uuid:t[0],code:t[1],name:t[2],amount:a})).setIn(["data","acBusinessIncome","carryoverCardList",n.idx],(0,o.fromJS)({uuid:t[0],code:t[1],name:t[2]}));break;case"amount":e=e.setIn(["data","acBusinessIncome","stockCardList",n.idx,"amount"],n.value);break;case"add":e=e.setIn(["data","acBusinessIncome","stockCardList",n.idx],(0,o.fromJS)({amount:""})).setIn(["data","acBusinessIncome","carryoverCardList",n.idx],(0,o.fromJS)({amount:""}));break;case"delete":e=e.deleteIn(["data","acBusinessIncome","stockCardList",n.idx]).deleteIn(["data","acBusinessIncome","carryoverCardList",n.idx]);break;case"carryoverCardList":e=e.setIn(["data","acBusinessIncome","carryoverCardList",n.idx,"amount"],n.value)}return e}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=l(n(25)),c=n(13),_=n(1058),d=l(n(10));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=(0,o.fromJS)({views:{insertOrModify:"insert",fromYl:!1},data:{categoryType:"",categoryUuid:"",categoryName:"请选择类别",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_YYSR_XS",accountName:"",accountUuid:"",currentAmount:"",beCarryover:!1,carryoverAmount:"",billType:"bill_other",billStates:"bill_states_not_make_out",billAssList:[],billAcList:[],taxRate:3,tax:"",offsetAmount:"",paymentList:[],beProject:!1,acBusinessIncome:{incomeAc:[],incomeList:[],receivablesAc:[],receivablesList:[],inAdvanceAc:[],inAdvanceList:[],stockAc:[],stockList:[],carryoverAc:[],carryoverList:[],beManagemented:!1,beDeposited:!1,beCarryover:!1,beSellOff:!1,stockCardList:[],carryoverCardList:[],contactsCardRange:{uuid:"",code:"",name:""}}},preData:{preAmount:0,receiveAmount:0},stockCardList:[],contactsCardList:[]});var g={changeRunningState:function(t){return{type:E.CHANGE_RUNNING_STATE,key:t}},changeYysrData:function(t,e){return{type:E.CHANGE_YYSR_DATA,dataType:t,value:e}},changeAcList:function(t,e){return{type:E.CHANGE_ACLIST,value:t,acType:e}},changeAmount:function(t){return{type:E.CHANGE_AMOUNT,value:t}},changeAccount:function(t){return{type:E.CHANGE_ACCOUNT,value:t}},changeTaxRate:function(t){return{type:E.CHANGE_TAXRATE,value:t}},changeBillStates:function(){return{type:E.CHANGE_BILLSTATES}},saveRunningbusiness:function(t){return function(e,n){var r=n().yysrAccountState,i=n().homeAccountState,c=i.get("enclosureList").toJS(),l=i.get("needDeleteUrl").toJS(),T=c.concat(l),A=r.get("data").toJS(),E=A.runningState,C=A.acBusinessIncome.beManagemented,S="SX_HW"===A.propertyCarryover,L=A.beCarryover,y="insert"===r.getIn(["views","insertOrModify"]),I=A.amount;if(I<=0)return d.toast.info("请填写金额");if(""==A.runningAbstract)return d.toast.info("请填写摘要");if(A.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH)return d.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符");var m=n().homeAccountState.get("project").toJS(),p=m.usedProject,N=m.projectCard;if(p&&"STATE_YYSR_DJ"!=E){var v=[],R=!1;if(!N.every(function(t){return v.push(t.uuid),t.amount<=0&&(R=!0),t.uuid}))return d.toast.info("有未选择的项目卡片");if(!S&&R)return d.toast.info("项目卡片有未填写的金额");if([].concat(f(new Set(v))).length<v.length)return d.toast.info("有重复的项目卡片")}if(C){var G=A.acBusinessIncome.contactsCardRange;if(!G||""==G.uuid)return d.toast.info("请选择往来单位")}else if(""==A.accountUuid)return d.toast.info("请选择账户");if("STATE_YYSR_DJ"!=E&&S){var h=A.acBusinessIncome.stockCardList,Y=A.acBusinessIncome.carryoverCardList,D=[],O=!1,b=!1;if(!h.every(function(t,e){return D.push(t.uuid),t.amount<=0&&(O=!0),y&&L&&Y[e].amount<=0&&(b=!0),t.uuid}))return d.toast.info("有未选择的存货卡片");if(O)return d.toast.info("存货卡片有未填写的金额");if([].concat(f(new Set(D))).length<D.length)return d.toast.info("有重复的存货卡片");if(A.beCarryover&&b)return d.toast.info("有未填写的成本金额")}if("STATE_YYSR_DJ"===E){if(I=-I,""==A.accountUuid)return d.toast.info("请选择账户")}else{if(A.currentAmount>0&&""==A.accountUuid)return d.toast.info("请选择账户");if(y&&Number(A.currentAmount)+Number(A.offsetAmount)>I)return d.toast.info("本次收(付)款金额+预收(付)抵扣不可大于总金额")}var Z="modifyRunningbusiness";y&&(delete A.uuid,delete A.parentUuid,Z="insertIncome"),d.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)(Z,"POST",JSON.stringify(a({},A,{amount:I,usedProject:p,projectCard:N,enclosureList:T})),function(n){if(d.toast.hide(),0!==n.code)d.toast.fail(n.code+" "+n.message);else if(d.toast.success("保存成功",2),t){var a=A.categoryUuid;e(g.getCardDetail(a)),e(_.homeAccountActions.changeLrlsData(["project","projectCard"],(0,o.fromJS)([{amount:""}]))),e(_.homeAccountActions.changeLrlsEnclosureList())}else e(g.afterLrAccountSave(n.data,t,y))})}},afterLrAccountSave:function(t,e,n){return{type:E.AFTER_LRACCOUNT_SAVE,data:t,saveAndNew:e,isInsert:n}},getYysrPreAmount:function(){return function(t,e){var n=e().yysrAccountState,a=n.getIn(["data","categoryUuid"]),r=n.getIn(["data","runningDate"]),o=n.getIn(["data","acBusinessIncome","contactsCardRange","uuid"]);d.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getRunningAccountInfo","POST",JSON.stringify({categoryUuid:a,runningDate:r,cardUuid:o}),function(e){d.toast.hide(),(0,c.showMessage)(e)&&t({type:E.GET_YYSR_PREAMOUNT,data:e.data.result})})}},getYysrCardList:function(t){return function(e,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]),r=n().yysrAccountState,o=r.getIn(["data","acBusinessIncome",t]),i="",_="getCurrentCardList";"STATE_YYSR_DJ"===r.getIn(["data","runningState"])?"stockRange"==t?(i="4",_="getStockCardList"):i="PREIN":"stockRange"==t?(i="4",_="getStockCardList"):i="NEEDIN",d.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)(_,"POST",JSON.stringify({sobId:a,property:i,categoryList:o}),function(n){d.toast.hide(),(0,c.showMessage)(n)&&e({type:E.GET_YYSR_CARDLIST,data:n.data.result,cardType:t})})}},getCardDetail:function(t){return function(e){d.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getRunningDetail","GET","uuid="+t,function(t){if(d.toast.hide(),(0,c.showMessage)(t)){var n=t.data.result;delete n.parentUuid,e({type:E.YYSR_SAVE_AND_NEW,receivedData:n});var a=n.acBusinessIncome.beManagemented,r="SX_HW"===n.propertyCarryover;a&&e(g.getYysrCardList("contactsRange")),r&&e(g.getYysrCardList("stockRange"))}})}},changeYysrStockCard:function(t,e,n){return{type:E.CHANGE_YYSR_STOCKCARD,dataType:t,value:e,idx:n}}},E=e.ActionTypes={GET_LB_YYSR_CARD_DETAIL:"GET_LB_YYSR_CARD_DETAIL",GET_LB_YYSR_FROM_YLLS:"GET_LB_YYSR_FROM_YLLS",CHANGE_RUNNING_STATE:"CHANGE_RUNNING_STATE",CHANGE_YYSR_DATA:"CHANGE_YYSR_DATA",CHANGE_AMOUNT:"CHANGE_AMOUNT",CHANGE_ACCOUNT:"CHANGE_ACCOUNT",CHANGE_ACLIST:"CHANGE_ACLIST",CHANGE_TAXRATE:"CHANGE_TAXRATE",CHANGE_BILLSTATES:"CHANGE_BILLSTATES",AFTER_LRACCOUNT_SAVE:"AFTER_LRACCOUNT_SAVE",GET_YYSR_PREAMOUNT:"GET_YYSR_PREAMOUNT",YYSR_SAVE_AND_NEW:"YYSR_SAVE_AND_NEW",GET_YYSR_CARDLIST:"GET_YYSR_CARDLIST",CHANGE_YYSR_STOCKCARD:"CHANGE_YYSR_STOCKCARD"};e.yysrAccountActions=g},1342:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.yyzcAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},T(t,E.GET_LB_YYZC_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR),e=n.data.get("amount"),a=A.getIn(["data","taxRate"]),r=e-e/(1+a/100),i="采购"+("SX_HW"===n.receivedData.propertyCarryover?"存货":"")+"支出";return A.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).set("preData",A.get("preData")).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","runningAbstract"],i).setIn(["data","accountName"],n.data.get("accountName")).setIn(["data","accountUuid"],n.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["data","tax"],(0,c.decimal)(r)).setIn(["views","insertOrModify"],"insert")}),T(t,E.GET_LB_YYZC_FROM_YLLS,function(){var t=Math.abs(n.state.getIn(["data","amount"]))==Math.abs(n.state.getIn(["data","currentAmount"]));return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data")).setIn(["data","isFullPayment"],t)}),T(t,E.CHANGE_YYZC_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),T(t,E.CHANGE_YYZC_RUNNING_STATE,function(){return e.setIn(["data","runningState"],n.key).setIn(["data","acBusinessExpense","contactsCardRange"],null)}),T(t,E.CHANGE_YYZC_ASSLIST,function(){var t=n.value.split(s.TREE_JOIN_STR),a={};return a.uuid=t[0],a.code=t[1],a.name=t[2],e.setIn(["data","acBusinessExpense",n.acType],(0,o.fromJS)(a))}),T(t,E.CHANGE_YYZC_ACCOUNT,function(){var t=n.value.split(s.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),T(t,E.GET_YYZC_PREAMOUNT,function(){return e.setIn(["preData","preAmount"],n.data.preAmount).setIn(["preData","receiveAmount"],n.data.amount).setIn(["data","offsetAmount"],"")}),T(t,E.CHANGE_YYZCDATE,function(){return e.setIn(["data","runningDate"],n.date)}),T(t,E.CHANGE_YYZC_BILLASSLIST,function(){var t=n.value.split(s.TREE_JOIN_STR),a={};return a.assId=t[0],a.assName=t[1],a.assCategory=t[2],e.setIn(["data","billAssList",n.idx],(0,o.fromJS)(a)).setIn(["data","billAcList",0],(0,o.fromJS)({acId:n.billAcId}))}),T(t,E.CHANGE_YYZC_TAXRATE_OR_AMOUNT,function(){var t=0;if("amount"===n.dataType){var a=e.getIn(["data","taxRate"]),r=n.value;t=r-r/(1+a/100),e=e.setIn(["data","amount"],r)}else{var o=e.getIn(["data","amount"]),i=n.value;t=o-o/(1+i/100),e=e.setIn(["data","taxRate"],i)}return e.setIn(["data","tax"],(0,c.decimal)(t))}),T(t,E.CHANGE_YYZC_BILLSTATES,function(){var t=e.getIn(["data","billStates"]),n="";return({bill_states_not_auth:function(){return n="bill_states_auth"},bill_states_auth:function(){return n="bill_states_not_auth"}}[t]||function(){return null})(),e.setIn(["data","billStates"],n).setIn(["data","billAssList"],(0,o.fromJS)([])).setIn(["data","billAcList"],(0,o.fromJS)([]))}),T(t,E.AFTER_YYZC_SAVE,function(){return n.saveAndNew?e=A:(n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber)),e}),T(t,E.GET_YYZC_CARDLIST,function(){var t=[];return n.data.forEach(function(e){t.push({key:e.code+" "+e.name,value:""+e.uuid+s.TREE_JOIN_STR+e.code+s.TREE_JOIN_STR+e.name})}),e="stockRange"===n.cardType?e.set("stockCardList",(0,o.fromJS)(t)):e.set("contactsCardList",(0,o.fromJS)(t))}),T(t,E.YYZC_SAVE_AND_NEW,function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),i="采购"+("SX_HW"===n.receivedData.propertyCarryover?"存货":"")+"支出";return A.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],i)}),T(t,E.CHANGE_YYZC_STOCKCARD,function(){switch(n.dataType){case"card":var t=n.value.split(s.TREE_JOIN_STR),a=e.getIn(["data","acBusinessExpense","stockCardList",n.idx,"amount"]);e=e.setIn(["data","acBusinessExpense","stockCardList",n.idx],(0,o.fromJS)({uuid:t[0],code:t[1],name:t[2],amount:a}));break;case"amount":e=e.setIn(["data","acBusinessExpense","stockCardList",n.idx,"amount"],n.value);break;case"add":e=e.setIn(["data","acBusinessExpense","stockCardList",n.idx],(0,o.fromJS)({amount:""}));break;case"delete":e=e.deleteIn(["data","acBusinessExpense","stockCardList",n.idx])}return e}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=l(n(25)),c=n(13),_=l(n(10)),d=n(1058);function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=(0,o.fromJS)({views:{insertOrModify:"insert",fromYl:!1},data:{categoryType:"",categoryUuid:"",categoryName:"请选择类别",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_YYZC_GJ",accountName:"",accountUuid:"",currentAmount:"",billType:"bill_other",billStates:"bill_states_not_auth",billAssList:[],billAcList:[],taxRate:3,tax:"",offsetAmount:0,paymentList:[],projectCard:[{}],acBusinessExpense:{payAc:[],payList:[],deliveryAc:[],deliveryList:[],inAdvanceAc:[],inAdvanceList:[],beManagemented:!1,beDeposited:!1,stockCardList:[],contactsCardRange:{uuid:"",code:"",name:""}}},preData:{preAmount:0,receiveAmount:0},stockCardList:[],contactsCardList:[]});var g={changeYyzcData:function(t,e){return{type:E.CHANGE_YYZC_DATA,dataType:t,value:e}},changeYyzcRunningState:function(t){return{type:E.CHANGE_YYZC_RUNNING_STATE,key:t}},changeYyzcAssList:function(t,e){return{type:E.CHANGE_YYZC_ASSLIST,value:t,acType:e}},changeYyzcAccount:function(t){return{type:E.CHANGE_YYZC_ACCOUNT,value:t}},getYyzcPreAmount:function(){return function(t,e){var n=e().yyzcAccountState,a=n.getIn(["data","categoryUuid"]),r=n.getIn(["data","runningDate"]),o=n.getIn(["data","acBusinessExpense","contactsCardRange","uuid"]);_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getRunningAccountInfo","POST",JSON.stringify({categoryUuid:a,cardUuid:o,runningDate:r}),function(e){_.toast.hide(),(0,c.showMessage)(e)&&t({type:E.GET_YYZC_PREAMOUNT,data:e.data.result})})}},changeYyzcDate:function(t){return{type:E.CHANGE_YYZCDATE,date:t}},changeYyzcBillAssList:function(t,e,n){return{type:E.CHANGE_YYZC_BILLASSLIST,value:e,idx:t,billAcId:n}},changeYyzcTaxRateOrAmount:function(t,e){return{type:E.CHANGE_YYZC_TAXRATE_OR_AMOUNT,dataType:t,value:e}},changeYyzcBillStates:function(){return{type:E.CHANGE_YYZC_BILLSTATES}},saveRunningbusiness:function(t){return function(e,n){var r=n().yyzcAccountState,i=n().homeAccountState,l=i.get("enclosureList").toJS(),T=i.get("needDeleteUrl").toJS(),A=l.concat(T),E=r.get("data").toJS(),C=E.runningState,S=E.acBusinessExpense.beManagemented,L="SX_HW"===E.propertyCarryover,y=E.amount;if(y<=0)return _.toast.info("请填写金额");if(""==E.runningAbstract)return _.toast.info("请填写摘要");if(E.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH)return _.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符");if(S){var I=E.acBusinessExpense.contactsCardRange;if(!I||""==I.uuid)return _.toast.info("请选择往来单位")}else if(""==E.accountUuid)return _.toast.info("请选择账户");if("STATE_YYZC_DJ"!=C&&L){var m=[],p=!1;if(!E.acBusinessExpense.stockCardList.every(function(t){return m.push(t.uuid),t.amount<=0&&(p=!0),t.uuid}))return _.toast.info("有未选择的存货卡片");if(p)return _.toast.info("存货卡片有未填写的金额");if([].concat(f(new Set(m))).length<m.length)return _.toast.info("有重复的存货卡片")}if("STATE_YYZC_DJ"===C){if(y=-Math.abs(y),""==E.accountUuid)return _.toast.info("请选择账户")}else{if(E.currentAmount>0&&""==E.accountUuid)return _.toast.info("请选择账户");if(D&&Number(E.currentAmount)+Number(E.offsetAmount)>y)return _.toast.info("本次收(付)款金额+预收(付)抵扣不可大于总金额")}var N=n().homeAccountState.get("project").toJS(),v=N.usedProject,R=N.projectCard;if(!L&&v&&"STATE_YYZC_DJ"!=C){var G=[],h=!1;if(!R.every(function(t){return G.push(t.uuid),t.amount<=0&&(h=!0),t.uuid}))return _.toast.info("有未选择的项目卡片");if(!L&&h)return _.toast.info("项目卡片有未填写的金额");if([].concat(f(new Set(G))).length<G.length)return _.toast.info("有重复的项目卡片")}var Y="modifyRunningbusiness",D="insert"===r.getIn(["views","insertOrModify"]);D&&(delete E.uuid,delete E.parentUuid,Y="insertExpense"),_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)(Y,"POST",JSON.stringify(a({},E,{amount:y,usedProject:v,projectCard:R,enclosureList:A})),function(n){if(_.toast.hide(),(0,c.showMessage)(n))if(_.toast.success("保存成功",2),t){var a=E.categoryUuid;e(g.getCardDetail(a)),e(d.homeAccountActions.changeLrlsData(["project","projectCard"],(0,o.fromJS)([{amount:""}]))),e(d.homeAccountActions.changeLrlsEnclosureList())}else e(g.afterYyzcSave(n.data,t,D))})}},afterYyzcSave:function(t,e,n){return{type:E.AFTER_YYZC_SAVE,data:t,saveAndNew:e,isInsert:n}},getYyzcCardList:function(t){return function(e,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]),r=n().yyzcAccountState,o=r.getIn(["data","acBusinessExpense",t]),i="",d="getCurrentCardList";"STATE_YYZC_DJ"===r.getIn(["data","runningState"])?"stockRange"==t?(i="5",d="getStockCardList"):i="PREPAY":"stockRange"==t?(i="5",d="getStockCardList"):i="NEEDPAY",_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)(d,"POST",JSON.stringify({sobId:a,property:i,categoryList:o}),function(n){_.toast.hide(),(0,c.showMessage)(n)&&e({type:E.GET_YYZC_CARDLIST,data:n.data.result,cardType:t})})}},getCardDetail:function(t){return function(e){_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getRunningDetail","GET","uuid="+t,function(t){if(_.toast.hide(),(0,c.showMessage)(t)){var n=t.data.result;delete n.parentUuid,e({type:E.YYZC_SAVE_AND_NEW,receivedData:n});var a=n.acBusinessExpense.beManagemented,r="SX_HW"===n.propertyCarryover;a&&e(g.getYyzcCardList("contactsRange")),r&&e(g.getYyzcCardList("stockRange"))}})}},changeYyzcStockCard:function(t,e,n){return{type:E.CHANGE_YYZC_STOCKCARD,dataType:t,value:e,idx:n}}},E=e.ActionTypes={GET_LB_YYZC_CARD_DETAIL:"GET_LB_YYZC_CARD_DETAIL",GET_LB_YYZC_FROM_YLLS:"GET_LB_YYZC_FROM_YLLS",CHANGE_YYZC_DATA:"CHANGE_YYZC_DATA",CHANGE_YYZC_RUNNING_STATE:"CHANGE_YYZC_RUNNING_STATE",CHANGE_YYZC_ASSLIST:"CHANGE_YYZC_ASSLIST",CHANGE_YYZC_ACCOUNT:"CHANGE_YYZC_ACCOUNT",GET_YYZC_PREAMOUNT:"GET_YYZC_PREAMOUNT",CHANGE_YYZCDATE:"CHANGE_YYZCDATE",CHANGE_YYZC_BILLASSLIST:"CHANGE_YYZC_BILLASSLIST",CHANGE_YYZC_TAXRATE_OR_AMOUNT:"CHANGE_YYZC_TAXRATE_OR_AMOUNT",CHANGE_YYZC_BILLSTATES:"CHANGE_YYZC_BILLSTATES",AFTER_YYZC_SAVE:"AFTER_YYZC_SAVE",GET_YYZC_CARDLIST:"GET_YYZC_CARDLIST",YYZC_SAVE_AND_NEW:"YYZC_SAVE_AND_NEW",CHANGE_YYZC_STOCKCARD:"CHANGE_YYZC_STOCKCARD"};e.yyzcAccountActions=g},1343:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fyzcAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},f(t,g.GET_LB_FYZC_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR),e=n.data.get("amount"),a=T.getIn(["data","taxRate"]),r=e-e/(1+a/100),i=n.receivedData.name+"支出",u="",_=n.receivedData.propertyCostList;return 1==_.length&&(u=_[0]),T.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","runningAbstract"],i).setIn(["data","accountName"],n.data.get("accountName")).setIn(["data","accountUuid"],n.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["data","tax"],(0,c.decimal)(r)).setIn(["data","propertyCost"],u).setIn(["views","insertOrModify"],"insert")}),f(t,g.GET_LB_FYZC_FROM_YLLS,function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data"))}),f(t,g.CHANGE_FYZC_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),f(t,g.CHANGE_FYZC_RUNNING_STATE,function(){return e.setIn(["data","runningState"],n.key)}),f(t,g.CHANGE_FYZC_ASSLIST,function(){var t=n.value.split(s.TREE_JOIN_STR),a={};return a.uuid=t[0],a.code=t[1],a.name=t[2],e.setIn(["data","acCost",n.acType],(0,o.fromJS)(a))}),f(t,g.CHANGE_FYZC_ACCOUNT,function(){var t=n.value.split(s.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),f(t,g.CHANGE_FYZCDATE,function(){return e.setIn(["data","runningDate"],n.date)}),f(t,g.CHANGE_FYZC_BILLASSLIST,function(){var t=n.value.split(s.TREE_JOIN_STR),a={};return a.assId=t[0],a.assName=t[1],a.assCategory=t[2],e.setIn(["data","billAssList",n.idx],(0,o.fromJS)(a)).setIn(["data","billAcList",0],(0,o.fromJS)({acId:n.billAcId}))}),f(t,g.CHANGE_FYZC_TAXRATE_OR_AMOUNT,function(){var t=0;if("amount"===n.dataType){var a=e.getIn(["data","taxRate"]),r=n.value;t=r-r/(1+a/100),e=e.setIn(["data","amount"],r)}else{var o=e.getIn(["data","amount"]),i=n.value;t=o-o/(1+i/100),e=e.setIn(["data","taxRate"],i)}return e.setIn(["data","tax"],(0,c.decimal)(t))}),f(t,g.CHANGE_FYZC_BILLSTATES,function(){var t=e.getIn(["data","billStates"]),n="";return({bill_states_not_auth:function(){return n="bill_states_auth"},bill_states_auth:function(){return n="bill_states_not_auth"}}[t]||function(){return null})(),e.setIn(["data","billStates"],n).setIn(["data","billAssList"],(0,o.fromJS)([])).setIn(["data","billAcList"],(0,o.fromJS)([]))}),f(t,g.AFTER_FYZC_SAVE,function(){return n.saveAndNew?e=T:(n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber)),e}),f(t,g.GET_FYZC_CARDLIST,function(){var t=[];return n.data.forEach(function(e){t.push({key:e.code+" "+e.name,value:""+e.uuid+s.TREE_JOIN_STR+e.code+s.TREE_JOIN_STR+e.name})}),e.set("contactsCardList",(0,o.fromJS)(t))}),f(t,g.FYZC_SAVE_AND_NEW,function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),i=n.receivedData.name+"支出",u="",s=n.receivedData.propertyCostList;return 1==s.length&&(u=s[0]),T.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","propertyCost"],u).setIn(["data","runningAbstract"],i)}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=l(n(25)),c=n(13),_=l(n(10)),d=n(1058);function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,o.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"",categoryUuid:"",categoryName:"请选择类别",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_FY_YF",propertyList:[],propertyCost:"",propertyCostList:[],accountName:"",accountUuid:"",billType:"bill_other",billStates:"bill_states_not_auth",billAssList:[],billAcList:[],taxRate:3,tax:0,paymentList:[],acCost:{saleAc:[],saleList:[],manageAc:[],manageList:[],financeAc:[],financeList:[],deliveryAc:[],deliveryList:[],beManagemented:!1,contactsCardRange:{uuid:"",code:"",name:""}}},contactsCardList:[]});var A={changeFyzcData:function(t,e){return{type:g.CHANGE_FYZC_DATA,dataType:t,value:e}},changeFyzcRunningState:function(t){return{type:g.CHANGE_FYZC_RUNNING_STATE,key:t}},changeFyzcAssList:function(t,e){return{type:g.CHANGE_FYZC_ASSLIST,value:t,acType:e}},changeFyzcAccount:function(t){return{type:g.CHANGE_FYZC_ACCOUNT,value:t}},changeFyzcDate:function(t){return{type:g.CHANGE_FYZCDATE,date:t}},changeFyzcBillAssList:function(t,e,n){return{type:g.CHANGE_FYZC_BILLASSLIST,value:e,idx:t,billAcId:n}},changeFyzcTaxRateOrAmount:function(t,e){return{type:g.CHANGE_FYZC_TAXRATE_OR_AMOUNT,dataType:t,value:e}},changeFyzcBillStates:function(){return{type:g.CHANGE_FYZC_BILLSTATES}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,i=r.get("enclosureList").toJS(),l=r.get("needDeleteUrl").toJS(),f=i.concat(l),T=n().fyzcAccountState,g=T.get("data").toJS(),E=g.runningState,C=g.acCost.beManagemented;if("STATE_FY_WF"!=E&&"STATE_FY_DJ"!=E&&""==g.propertyCost)return _.toast.info("请选择费用性质");if(""==g.runningAbstract)return _.toast.info("请填写摘要");if(g.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH)return _.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符");if(C){var S=g.acCost.contactsCardRange;if(!S||""==S.uuid)return _.toast.info("请选择往来单位")}if(0==g.amount)return _.toast.info("请填写金额");if("STATE_FY_WF"!=E&&""==g.accountUuid)return _.toast.info("请选择账户");var L=n().homeAccountState.get("project").toJS(),y=L.usedProject,I=L.projectCard;if(y&&"STATE_FY_DJ"!=E){var m=[],p=!1;if(!I.every(function(t){return m.push(t.uuid),0==t.amount&&(p=!0),t.uuid}))return _.toast.info("有未选择的项目卡片");if(p)return _.toast.info("项目卡片有未填写的金额");if([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(m))).length<m.length)return _.toast.info("有重复的项目卡片")}var N="modifyRunningbusiness",v="insert"===T.getIn(["views","insertOrModify"]);v&&(delete g.uuid,delete g.parentUuid,N="insertCost"),_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)(N,"POST",JSON.stringify(a({},g,{usedProject:y,projectCard:I,enclosureList:f})),function(n){if(_.toast.hide(),(0,c.showMessage)(n))if(_.toast.success("保存成功",2),t){var a=g.categoryUuid;e(A.getCardDetail(a)),e(d.homeAccountActions.changeLrlsData(["project","projectCard"],(0,o.fromJS)([{amount:""}]))),e(d.homeAccountActions.changeLrlsEnclosureList())}else e(A.afterFyzcSave(n.data,t,v))})}},afterFyzcSave:function(t,e,n){return{type:g.AFTER_FYZC_SAVE,data:t,saveAndNew:e,isInsert:n}},getFyzcCardList:function(t){return function(e,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]),r=n().fyzcAccountState,o=r.getIn(["data","acCost",t]),i="STATE_FY_DJ"==r.getIn(["data","runningState"])?"PREPAY":"NEEDPAY";_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getCurrentCardList","POST",JSON.stringify({sobId:a,property:i,categoryList:o}),function(n){_.toast.hide(),(0,c.showMessage)(n)&&e({type:g.GET_FYZC_CARDLIST,data:n.data.result,cardType:t})})}},getCardDetail:function(t){return function(e){_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getRunningDetail","GET","uuid="+t,function(t){if(_.toast.hide(),(0,c.showMessage)(t)){var n=t.data.result;delete n.parentUuid,e({type:g.FYZC_SAVE_AND_NEW,receivedData:n}),n.acCost.beManagemented&&e(A.getFyzcCardList("contactsRange"))}})}}},g=e.ActionTypes={GET_LB_FYZC_CARD_DETAIL:"GET_LB_FYZC_CARD_DETAIL",GET_LB_FYZC_FROM_YLLS:"GET_LB_FYZC_FROM_YLLS",CHANGE_FYZC_DATA:"CHANGE_FYZC_DATA",CHANGE_FYZC_RUNNING_STATE:"CHANGE_FYZC_RUNNING_STATE",CHANGE_FYZC_ASSLIST:"CHANGE_FYZC_ASSLIST",CHANGE_FYZC_ACCOUNT:"CHANGE_FYZC_ACCOUNT",CHANGE_FYZCDATE:"CHANGE_FYZCDATE",CHANGE_FYZC_BILLASSLIST:"CHANGE_FYZC_BILLASSLIST",CHANGE_FYZC_TAXRATE_OR_AMOUNT:"CHANGE_FYZC_TAXRATE_OR_AMOUNT",CHANGE_FYZC_BILLSTATES:"CHANGE_FYZC_BILLSTATES",AFTER_FYZC_SAVE:"AFTER_FYZC_SAVE",GET_FYZC_CARDLIST:"GET_FYZC_CARDLIST",FYZC_SAVE_AND_NEW:"FYZC_SAVE_AND_NEW"};e.fyzcAccountActions=A},1344:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zcwjzzsAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},f(t,A.GET_LB_ZCWJZZS_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR);return T.setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["views","insertOrModify"],"insert")}),f(t,A.GET_LB_ZCWJZZS_FROM_YLLS,function(){var t=n.state.getIn(["data","businessList"]),a=n.state.getIn(["data","businessList",0,"runningDate"]).slice(0,7),r=0,o=0,i=0,u=0;return t.forEach(function(t){"bill_common"===t.get("billType")?(r++,i+=t.get("parentTax")?t.get("parentTax"):t.get("tax")):(o++,u+=t.get("parentTax")?t.get("parentTax"):t.get("tax"))}),e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data")).setIn(["data","handleMonth"],a).setIn(["hxList","flowDtoList"],t).setIn(["hxList","inputAmount"],u).setIn(["hxList","inputCount"],o).setIn(["hxList","outputAmount"],i).setIn(["hxList","outputCount"],r).setIn(["data","turnOutBusinessUuid"],n.state.getIn(["data","uuid"]))}),f(t,A.CHANGE_WJZZS_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),f(t,A.GET_WJZZS_LIST,function(){return e=e.set("hxList",(0,o.fromJS)(n.receivedData))}),f(t,A.AFTER_WJZZS_SAVE,function(){if(n.saveAndNew){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),o=e.getIn(["data","handleMonth"]);e=T.setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","handleMonth"],o)}else e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","turnOutBusinessUuid"],n.data.result);return e}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=l(n(25)),c=n(13),_=(l(n(1064)),l(n(10))),d=n(1058);function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,o.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_ZCWJZZS",categoryName:"转出未交增值税",categoryUuid:"",runningDate:"",runningAbstract:"转出未交增值税",handleMonth:"",turnOutBusinessUuid:""},hxList:{flowDtoList:[],inputAmount:0,inputCount:0,outputAmount:0,outputCount:0}});var A=e.ActionTypes={GET_LB_ZCWJZZS_CARD_DETAIL:"GET_LB_ZCWJZZS_CARD_DETAIL",GET_LB_ZCWJZZS_FROM_YLLS:"GET_LB_ZCWJZZS_FROM_YLLS",CHANGE_WJZZS_DATA:"CHANGE_WJZZS_DATA",GET_WJZZS_LIST:"GET_WJZZS_LIST",AFTER_WJZZS_SAVE:"AFTER_WJZZS_SAVE"},g={changeWjzzsData:function(t,e){return{type:A.CHANGE_WJZZS_DATA,dataType:t,value:e}},getWjzzsList:function(t){return function(e,n){_.toast.loading("加载中...",0),(0,u.default)("getBusinessTurnoutList","POST",JSON.stringify({runningDate:t}),function(t){_.toast.hide(),(0,c.showMessage)(t)&&e({type:A.GET_WJZZS_LIST,receivedData:t.data})})}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,o=r.get("enclosureList").toJS(),i=r.get("needDeleteUrl").toJS(),c=o.concat(i),l=n().zcwjzzsAccountState,f="insert"===l.getIn(["views","insertOrModify"])?"insertBusinessTurnoutItem":"modifyBusinessTurnoutItem",T=[],A=l.getIn(["hxList","flowDtoList"]);A.forEach(function(t){T.push(t.get("uuid"))});var E=l.get("data").toJS();return""==E.runningAbstract?_.toast.info("请填写摘要"):E.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH?_.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符"):""==E.handleMonth?_.toast.info("请选择处理税额月份"):A.size?l.getIn(["hxList","inputAmount"])>=l.getIn(["hxList","outputAmount"])?_.toast.info("进项税额大于销项税额，无需转出未交增值税"):(_.toast.loading(s.LOADING_TIP_TEXT,0),void(0,u.default)(f,"POST",JSON.stringify(a({},E,{uuidList:T,enclosureList:c})),function(n){if(_.toast.hide(),0!==n.code)_.toast.fail(n.code+" "+n.message);else if(_.toast.success("保存成功",2),e(g.afterWjzzsSave(n.data,t)),t){var a=E.handleMonth;e(g.getWjzzsList(a)),e(d.homeAccountActions.changeLrlsEnclosureList())}})):_.toast.info("没有需要转出的流水")}},afterWjzzsSave:function(t,e){return{type:A.AFTER_WJZZS_SAVE,data:t,saveAndNew:e}}};e.zcwjzzsAccountActions=g},1345:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ggfyftAccountActions=e.ActionTypes=void 0,e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},l(t,T.GET_LB_GGFYFT_CARD_DETAIL,function(){var t=n.value.split(u.TREE_JOIN_STR);return f.setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["views","insertOrModify"],"insert").setIn(["data","categoryUuid"],t[0])}),l(t,T.GET_LB_GGFYFT_FROM_YLLS,function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("hxList",(0,r.fromJS)(n.state.getIn(["data","paymentList"]))).setIn(["data","totalAmount"],n.state.getIn(["data","amount"])).setIn(["data","categoryName"],"项目公共费用分摊").setIn(["data","runningDate"],n.state.getIn(["data","runningDate"])).setIn(["data","runningAbstract"],n.state.getIn(["data","runningAbstract"])).setIn(["data","selectCardList"],(0,r.fromJS)(n.state.getIn(["data","projectCard"]))).setIn(["data","uuid"],n.state.getIn(["data","uuid"]))}),l(t,T.CHANGE_GGFYFT_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),l(t,T.GET_GGFYFT_LIST,function(){return e=e.set("hxList",(0,r.fromJS)(n.receivedData))}),l(t,T.GGFYFT_HXLIST_BESELECT,function(){return e.setIn(["hxList",n.idx,"beSelect"],n.value)}),l(t,T.GGFYFT_AUTO_CALCULATE,function(){var t=e.getIn(["data","totalAmount"]);return e.updateIn(["data","selectCardList"],function(e){return e.map(function(e){var n=e.get("percent"),a=(0,s.decimal)(t*n/100)?(0,s.decimal)(t*n/100):"";return e.set("amount",a)})})}),l(t,T.AFTER_GGFYFT_SAVE,function(){if(n.saveAndNew){var t=e.getIn(["data","runningDate"]);e=f.setIn(["data","runningDate"],t)}else e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","uuid"],n.data.uuid);return e}),l(t,T.GET_GGFYFT_PROJECTLIST,function(){var t=[];return n.receivedData.forEach(function(e){t.push({key:e.code+" "+e.name,value:""+e.uuid+u.TREE_JOIN_STR+e.code+u.TREE_JOIN_STR+e.name})}),e.set("projectCardList",(0,r.fromJS)(t))}),l(t,T.CHANGE_GGFYFT_PROJECT_CARD,function(){var t=e.getIn(["data","totalAmount"]);switch(n.dataType){case"card":var a=n.value.split(u.TREE_JOIN_STR);e=e.setIn(["data","selectCardList",n.idx],(0,r.fromJS)({uuid:a[0],code:a[1],name:a[2],amount:"",percent:""}));break;case"amount":var o=100*(0,s.decimal)(n.value/t,4);e=e.setIn(["data","selectCardList",n.idx,"amount"],n.value).setIn(["data","selectCardList",n.idx,"percent"],o);break;case"percent":var i=(0,s.decimal)(n.value*t/100);e=e.setIn(["data","selectCardList",n.idx,"amount"],i).setIn(["data","selectCardList",n.idx,"percent"],n.value);break;case"add":e=e.setIn(["data","selectCardList",n.idx],(0,r.fromJS)({amount:"",percent:0}));break;case"delete":e=e.deleteIn(["data","selectCardList",n.idx])}return e}),t)[n.type]||function(){return e})()};var a,r=n(9),o=n(182),i=(a=o)&&a.__esModule?a:{default:a},u=d(n(25)),s=n(13),c=(d(n(1064)),d(n(10))),_=n(1058);function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=(0,r.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_GGFYFT",categoryName:"项目公共费用分摊",categoryUuid:"",runningDate:"",runningAbstract:"公共费用分摊",totalAmount:"",selectCardList:[{}],uuid:""},hxList:[],projectCardList:[]});var T=e.ActionTypes={GET_LB_GGFYFT_CARD_DETAIL:"GET_LB_GGFYFT_CARD_DETAIL",GET_LB_GGFYFT_FROM_YLLS:"GET_LB_GGFYFT_FROM_YLLS",CHANGE_GGFYFT_DATA:"CHANGE_GGFYFT_DATA",AFTER_GGFYFT_SAVE:"AFTER_GGFYFT_SAVE",GET_GGFYFT_LIST:"GET_GGFYFT_LIST",GGFYFT_HXLIST_BESELECT:"GGFYFT_HXLIST_BESELECT",GET_GGFYFT_PROJECTLIST:"GET_GGFYFT_PROJECTLIST",CHANGE_GGFYFT_PROJECT_CARD:"CHANGE_GGFYFT_PROJECT_CARD",GGFYFT_AUTO_CALCULATE:"GGFYFT_AUTO_CALCULATE"},A={changeGgfyftData:function(t,e){return{type:T.CHANGE_GGFYFT_DATA,dataType:t,value:e}},getGgfyftProjectList:function(){return function(t){c.toast.loading("加载中...",0),(0,i.default)("getProjectListAndTree","GET","listFrom=&treeFrom=",function(e){c.toast.hide(),(0,s.showMessage)(e)&&t({type:T.GET_GGFYFT_PROJECTLIST,receivedData:e.data.resultList})})}},changeGgfyftProjectCard:function(t,e,n){return{type:T.CHANGE_GGFYFT_PROJECT_CARD,dataType:t,value:e,idx:n}},getGgfyftList:function(){return function(t,e){var n=e().ggfyftAccountState.get("data").get("runningDate");n&&(0,i.default)("getProjectShareList","POST",JSON.stringify({runningDate:n}),function(e){(0,s.showMessage)(e)&&t({type:T.GET_GGFYFT_LIST,receivedData:e.data})})}},hxListBeSelect:function(t,e){return{type:T.GGFYFT_HXLIST_BESELECT,idx:t,value:e}},saveRunningbusiness:function(t){return function(e,n){var a=n().homeAccountState,r=a.get("enclosureList").toJS(),o=a.get("needDeleteUrl").toJS(),d=r.concat(o),l=n().ggfyftAccountState,f="insert"===l.getIn(["views","insertOrModify"])?"insertProjectShare":"modifyProjectShare",T=l.get("data").toJS(),g=[],E=!1;l.get("hxList").forEach(function(t){t.get("beSelect")&&(E=!0,g.push({uuid:t.get("uuid"),beSelect:!0}))});var C=T.runningAbstract;if(""==C)return c.toast.info("请填写摘要");if(C.length>u.RUNNING_ABSTRACT_LENGTH)return c.toast.info("摘要长度不能超过"+u.RUNNING_ABSTRACT_LENGTH+"个字符");if(!E)return c.toast.info("请选择需要核算的列表");var S=[],L=!1,y=[],I=0;return T.selectCardList.every(function(t,e){return S.push(t.uuid),0==t.amount||void 0==t.amount?L=!0:(I+=Number(t.amount),y.push(t)),t.uuid})?L?c.toast.info("有未填写的项目金额"):[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(S))).length<S.length?c.toast.info("有重复的项目卡片"):T.totalAmount!=I?c.toast.info("分摊金额合计不等于待分摊金额"):(c.toast.loading(u.LOADING_TIP_TEXT,0),void(0,i.default)(f,"POST",JSON.stringify({runningAbstract:C,runningDate:T.runningDate,uuid:T.uuid,paymentList:g,projectCard:y,enclosureList:d}),function(n){c.toast.hide(),(0,s.showMessage)(n)&&(c.toast.success("保存成功",2),e(A.afterGgfyftSave(n.data,t)),t&&(e(A.getGgfyftList()),e(A.getGgfyftProjectList()),e(_.homeAccountActions.changeLrlsEnclosureList())))})):c.toast.info("有未选择的项目卡片")}},afterGgfyftSave:function(t,e){return{type:T.AFTER_GGFYFT_SAVE,data:t,saveAndNew:e}},autoCalculate:function(){return{type:T.GGFYFT_AUTO_CALCULATE}}};e.ggfyftAccountActions=A},1346:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.yywsrAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},f(t,g.GET_LB_YYWSR_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR),e=n.data.get("amount");return T.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","runningAbstract"],t[1]).setIn(["data","accountName"],n.data.get("accountName")).setIn(["data","accountUuid"],n.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")}),f(t,g.GET_LB_YYWSR_FROM_YLLS,function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data"))}),f(t,g.CHANGE_YYWSR_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),f(t,g.CHANGE_YYWSR_CARD,function(){var t=n.value.split(s.TREE_JOIN_STR),a={};return a.uuid=t[0],a.code=t[1],a.name=t[2],e.setIn(["data","acBusinessOutIncome",n.acType],(0,o.fromJS)(a))}),f(t,g.CHANGE_YYWSR_ACCOUNT,function(){var t=n.value.split(s.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),f(t,g.AFTER_YYWSR_SAVE,function(){return n.saveAndNew?e=T:(n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber)),e}),f(t,g.GET_YYWSR_CARDLIST,function(){var t=[];return n.data.forEach(function(e){t.push({key:e.code+" "+e.name,value:""+e.uuid+s.TREE_JOIN_STR+e.code+s.TREE_JOIN_STR+e.name})}),e.set("contactsCardList",(0,o.fromJS)(t))}),f(t,g.YYWSR_SAVE_AND_NEW,function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return T.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],r)}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=l(n(25)),c=n(13),_=l(n(10)),d=n(1058);function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,o.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"",categoryUuid:"",categoryName:"请选择类别",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_YYWSR_YS",accountName:"",accountUuid:"",acBusinessOutIncome:{beManagemented:!1,contactsRange:[],contactsCardRange:{uuid:"",code:"",name:""}}},contactsCardList:[]});var A={changeYywsrData:function(t,e){return{type:g.CHANGE_YYWSR_DATA,dataType:t,value:e}},changeAcList:function(t,e){return{type:g.CHANGE_YYWSR_CARD,value:t,acType:e}},changeAccount:function(t){return{type:g.CHANGE_YYWSR_ACCOUNT,value:t}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,i=r.get("enclosureList").toJS(),c=r.get("needDeleteUrl").toJS(),l=i.concat(c),f=n().yywsrAccountState,T=f.get("data").toJS(),g=T.runningState,E=T.acBusinessOutIncome.beManagemented,C=T.amount;if(C<=0)return _.toast.info("请填写金额");if(""==T.runningAbstract)return _.toast.info("请填写摘要");if(T.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH)return _.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符");if(E){var S=T.acBusinessOutIncome.contactsCardRange;if(!S||""==S.uuid)return _.toast.info("请选择往来单位")}if("STATE_YYWSR_YS"===g&&""==T.accountUuid)return _.toast.info("请选择账户");var L=n().homeAccountState.get("project").toJS(),y=L.usedProject,I=L.projectCard;if(y){var m=[],p=!1;if(!I.every(function(t){return m.push(t.uuid),t.amount<=0&&(p=!0),t.uuid}))return _.toast.info("有未选择的项目卡片");if(p)return _.toast.info("项目卡片有未填写的金额");if([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(m))).length<m.length)return _.toast.info("有重复的项目卡片")}var N="modifyRunningbusiness",v="insert"===f.getIn(["views","insertOrModify"]);v&&(delete T.uuid,delete T.parentUuid,N="insertOutIncome"),_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)(N,"POST",JSON.stringify(a({},T,{amount:C,usedProject:y,projectCard:I,enclosureList:l})),function(n){if(_.toast.hide(),0!==n.code)_.toast.fail(n.code+" "+n.message);else if(_.toast.success("保存成功",2),t){var a=T.categoryUuid;e(A.getCardDetail(a)),e(d.homeAccountActions.changeLrlsData(["project","projectCard"],(0,o.fromJS)([{amount:""}]))),e(d.homeAccountActions.changeLrlsEnclosureList())}else e(A.afterYywsrSave(n.data,t,v))})}},afterYywsrSave:function(t,e,n){return{type:g.AFTER_YYWSR_SAVE,data:t,saveAndNew:e,isInsert:n}},getYywsrCardList:function(t){return function(e,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]),r=n().yywsrAccountState.getIn(["data","acBusinessOutIncome",t]);_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getCurrentCardList","POST",JSON.stringify({sobId:a,property:"NEEDIN",categoryList:r}),function(n){_.toast.hide(),(0,c.showMessage)(n)&&e({type:g.GET_YYWSR_CARDLIST,data:n.data.result,cardType:t})})}},getCardDetail:function(t){return function(e){_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getRunningDetail","GET","uuid="+t,function(t){if(_.toast.hide(),(0,c.showMessage)(t)){var n=t.data.result;delete n.parentUuid,e({type:g.YYWSR_SAVE_AND_NEW,receivedData:n}),n.acBusinessOutIncome.beManagemented&&e(A.getYywsrCardList("contactsRange"))}})}}},g=e.ActionTypes={GET_LB_YYWSR_CARD_DETAIL:"GET_LB_YYWSR_CARD_DETAIL",GET_LB_YYWSR_FROM_YLLS:"GET_LB_YYWSR_FROM_YLLS",CHANGE_YYWSR_DATA:"CHANGE_YYWSR_DATA",CHANGE_YYWSR_ACCOUNT:"CHANGE_YYWSR_ACCOUNT",CHANGE_YYWSR_CARD:"CHANGE_YYWSR_CARD",AFTER_YYWSR_SAVE:"AFTER_YYWSR_SAVE",YYWSR_SAVE_AND_NEW:"YYWSR_SAVE_AND_NEW",GET_YYWSR_CARDLIST:"GET_YYWSR_CARDLIST"};e.yywsrAccountActions=A},1347:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.yywzcAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},f(t,g.GET_LB_YYWZC_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR),e=n.data.get("amount");return T.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["data","runningAbstract"],t[1]).setIn(["data","accountName"],n.data.get("accountName")).setIn(["data","accountUuid"],n.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")}),f(t,g.GET_LB_YYWZC_FROM_YLLS,function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",n.state.get("data"))}),f(t,g.CHANGE_YYWZC_DATA,function(){return e.setIn(["data",n.dataType],n.value)}),f(t,g.CHANGE_YYWZC_CARD,function(){var t=n.value.split(s.TREE_JOIN_STR),a={};return a.uuid=t[0],a.code=t[1],a.name=t[2],e.setIn(["data","acBusinessOutExpense",n.acType],(0,o.fromJS)(a))}),f(t,g.CHANGE_YYWZC_ACCOUNT,function(){var t=n.value.split(s.TREE_JOIN_STR);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}),f(t,g.AFTER_YYWZC_SAVE,function(){return n.saveAndNew?e=T:(n.isInsert&&(e=e.setIn(["data","uuid"],n.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],n.data.flowNumber)),e}),f(t,g.GET_YYWZC_CARDLIST,function(){var t=[];return n.data.forEach(function(e){t.push({key:e.code+" "+e.name,value:""+e.uuid+s.TREE_JOIN_STR+e.code+s.TREE_JOIN_STR+e.name})}),e.set("contactsCardList",(0,o.fromJS)(t))}),f(t,g.YYWZC_SAVE_AND_NEW,function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return T.mergeIn(["data"],(0,o.fromJS)(n.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],r)}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=l(n(25)),c=n(13),_=l(n(10)),d=n(1058);function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,o.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"",categoryUuid:"",categoryName:"请选择类别",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_YYWZC_YF",accountName:"",accountUuid:"",acBusinessOutExpense:{beManagemented:!1,contactsRange:[],contactsCardRange:{uuid:"",code:"",name:""}}},contactsCardList:[]});var A={changeYywzcData:function(t,e){return{type:g.CHANGE_YYWZC_DATA,dataType:t,value:e}},changeYywzcCard:function(t,e){return{type:g.CHANGE_YYWZC_CARD,value:t,acType:e}},changeAccount:function(t){return{type:g.CHANGE_YYWZC_ACCOUNT,value:t}},saveRunningbusiness:function(t){return function(e,n){var r=n().homeAccountState,i=r.get("enclosureList").toJS(),c=r.get("needDeleteUrl").toJS(),l=i.concat(c),f=n().yywzcAccountState,T=f.get("data").toJS(),g=T.runningState,E=T.acBusinessOutExpense.beManagemented;if(T.amount<=0)return _.toast.info("请填写金额");if(""==T.runningAbstract)return _.toast.info("请填写摘要");if(T.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH)return _.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符");if(E){var C=T.acBusinessOutExpense.contactsCardRange;if(!C||""==C.uuid)return _.toast.info("请选择往来单位")}if("STATE_YYWZC_YF"===g&&""==T.accountUuid)return _.toast.info("请选择账户");var S=n().homeAccountState.get("project").toJS(),L=S.usedProject,y=S.projectCard;if(L){var I=[],m=!1;if(!y.every(function(t){return I.push(t.uuid),t.amount<=0&&(m=!0),t.uuid}))return _.toast.info("有未选择的项目卡片");if(m)return _.toast.info("项目卡片有未填写的金额");if([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(I))).length<I.length)return _.toast.info("有重复的项目卡片")}var p="modifyRunningbusiness",N="insert"===f.getIn(["views","insertOrModify"]);N&&(delete T.uuid,delete T.parentUuid,p="insertOutExpense"),_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)(p,"POST",JSON.stringify(a({},T,{usedProject:L,projectCard:y,enclosureList:l})),function(n){if(_.toast.hide(),0!==n.code)_.toast.fail(n.code+" "+n.message);else if(_.toast.success("保存成功",2),t){var a=T.categoryUuid;e(A.getCardDetail(a)),e(d.homeAccountActions.changeLrlsData(["project","projectCard"],(0,o.fromJS)([{amount:""}]))),e(d.homeAccountActions.changeLrlsEnclosureList())}else e(A.afterYywzcSave(n.data,t,N))})}},afterYywzcSave:function(t,e,n){return{type:g.AFTER_YYWZC_SAVE,data:t,saveAndNew:e,isInsert:n}},getYywzcCardList:function(t){return function(e,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]),r=n().yywzcAccountState.getIn(["data","acBusinessOutExpense",t]);_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getCurrentCardList","POST",JSON.stringify({sobId:a,property:"NEEDPAY",categoryList:r}),function(n){_.toast.hide(),(0,c.showMessage)(n)&&e({type:g.GET_YYWZC_CARDLIST,data:n.data.result,cardType:t})})}},getCardDetail:function(t){return function(e){_.toast.loading(s.LOADING_TIP_TEXT,0),(0,u.default)("getRunningDetail","GET","uuid="+t,function(t){if(_.toast.hide(),(0,c.showMessage)(t)){var n=t.data.result;delete n.parentUuid,e({type:g.YYWZC_SAVE_AND_NEW,receivedData:n}),n.acBusinessOutExpense.beManagemented&&e(A.getYywzcCardList("contactsRange"))}})}}},g=e.ActionTypes={GET_LB_YYWZC_CARD_DETAIL:"GET_LB_YYWZC_CARD_DETAIL",GET_LB_YYWZC_FROM_YLLS:"GET_LB_YYWZC_FROM_YLLS",CHANGE_YYWZC_DATA:"CHANGE_YYWZC_DATA",CHANGE_YYWZC_ACCOUNT:"CHANGE_YYWZC_ACCOUNT",CHANGE_YYWZC_CARD:"CHANGE_YYWZC_CARD",AFTER_YYWZC_SAVE:"AFTER_YYWZC_SAVE",YYWZC_SAVE_AND_NEW:"YYWZC_SAVE_AND_NEW",GET_YYWZC_CARDLIST:"GET_YYWZC_CARDLIST"};e.yywzcAccountActions=A},1348:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.jzsyAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},f(t,A.GET_LB_JZSY_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR);return T.setIn(["data","topCategoryUuid"],t[0]).setIn(["data","topCategoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["views","insertOrModify"],"insert")}),f(t,A.GET_LB_JZSY_FROM_YLLS,function(){var t=n.state.getIn(["data","businessList"]),a=(n.state.getIn(["data","acAssets","cleaningAmount"]),n.state.get("data"));return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).setIn(["data","categoryUuid"],a.get("categoryUuid")).setIn(["data","categoryName"],a.get("categoryName")).setIn(["data","runningDate"],a.get("runningDate")).setIn(["data","beProject"],a.get("beProject")).setIn(["data","runningAbstract"],a.get("runningAbstract")).setIn(["data","amount"],a.getIn(["acAssets","cleaningAmount"])).setIn(["data","acAssets","originalAssetsAmount"],a.getIn(["acAssets","originalAssetsAmount"])).setIn(["data","acAssets","depreciationAmount"],a.getIn(["acAssets","depreciationAmount"])).setIn(["data","uuid"],a.get("uuid")).setIn(["data","flowNumber"],a.get("flowNumber")).set("hxList",t)}),f(t,A.CHANGE_JZSY_DATA,function(){return e.setIn(n.dataType,n.value)}),f(t,A.GET_JZSY_LIST,function(){return e=e.set("hxList",(0,o.fromJS)(n.receivedData))}),f(t,A.JZSY_HXLIST_BECHECK,function(){return e.setIn(["hxList",n.idx,"beSelect"],n.value)}),f(t,A.AFTER_JZSY_SAVE,function(){if(n.saveAndNew){var t=e.getIn(["data","runningDate"]);e=T.setIn(["data","runningDate"],t)}else{var a=e.get("hxList").filter(function(t){return t.get("beSelect")});e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","uuid"],n.data.uuid).setIn(["data","flowNumber"],n.data.flowNumber).set("hxList",a)}return e}),f(t,A.GET_JZSY_CATEGORY,function(){return e.set("categoryList",(0,o.fromJS)(n.receivedData))}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=l(n(25)),c=n(13),_=(l(n(1064)),l(n(10))),d=n(1058);function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,o.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_JZSY",categoryName:"请选择类别",categoryUuid:"",topCategoryName:"长期资产处置损益",topCategoryUuid:"",runningDate:"",runningAbstract:"处置损益",amount:"",beProject:!1,acAssets:{originalAssetsAmount:"",depreciationAmount:""},flowNumber:""},hxList:[],categoryList:[{uuid:"",childList:[]}]});var A=e.ActionTypes={GET_LB_JZSY_CARD_DETAIL:"GET_LB_JZSY_CARD_DETAIL",GET_LB_JZSY_FROM_YLLS:"GET_LB_JZSY_FROM_YLLS",CHANGE_JZSY_DATA:"CHANGE_JZSY_DATA",GET_JZSY_LIST:"GET_JZSY_LIST",JZSY_HXLIST_BECHECK:"JZSY_HXLIST_BECHECK",AFTER_JZSY_SAVE:"AFTER_JZSY_SAVE",GET_JZSY_CATEGORY:"GET_JZSY_CATEGORY"},g={changeJzsyData:function(t,e){return{type:A.CHANGE_JZSY_DATA,dataType:t,value:e}},getJzsyList:function(){return function(t,e){var n=e().jzsyAccountState.get("data"),a=n.get("runningDate"),r=n.get("categoryUuid");a&&r&&(_.toast.loading("加载中...",0),(0,u.default)("getJzsyList","POST",JSON.stringify({runningDate:a,categoryUuid:r}),function(e){_.toast.hide(),(0,c.showMessage)(e)&&t({type:A.GET_JZSY_LIST,receivedData:e.data.result})}))}},getCategoryList:function(){return function(t){_.toast.loading("加载中...",0),(0,u.default)("getCategoryList","POST",JSON.stringify({type:"LB_JZSY"}),function(e){_.toast.hide(),(0,c.showMessage)(e)&&t({type:A.GET_JZSY_CATEGORY,receivedData:e.data.result})})}},jzsyHxListBeCheck:function(t,e){return{type:A.JZSY_HXLIST_BECHECK,idx:t,value:e}},saveRunningbusiness:function(t){return function(e,n){var r=n().jzsyAccountState,i="insert"===r.getIn(["views","insertOrModify"])?"insertJzsy":"modifyJzsy",c=n().homeAccountState,l=c.get("enclosureList").toJS(),f=c.get("needDeleteUrl").toJS(),T=l.concat(f),A=!1,E=r.get("hxList");E.forEach(function(t){t.get("beSelect")&&(A=!0)});var C=n().homeAccountState.get("project").toJS(),S=C.usedProject,L=C.projectCard;if(S&&!L.every(function(t){return t.uuid}))return _.toast.info("有未选择的项目卡片");var y=r.get("data").toJS();if(""==y.categoryUuid)return _.toast.info("请选择处理类别");if(""==y.runningAbstract)return _.toast.info("请填写摘要");if(y.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH)return _.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符");if(!A)return _.toast.info("请选择需要处理的流水");var I=y.acAssets.originalAssetsAmount,m=y.acAssets.depreciationAmount;return I<=0?_.toast.info("请填写资产原值"):m<=0?_.toast.info("请填写累计折旧"):Number(m)>Number(I)?_.toast.info("折旧额不能大于原值"):(_.toast.loading(s.LOADING_TIP_TEXT,0),void(0,u.default)(i,"POST",JSON.stringify(a({},y,{usedProject:S,projectCard:L,businessList:E.toJS(),enclosureList:T})),function(n){_.toast.hide(),0!==n.code?_.toast.fail(n.code+" "+n.message):(_.toast.success("保存成功",2),e(g.afterJzsySave(n.data,t)),t&&(e(g.getCategoryList()),e(d.homeAccountActions.changeLrlsData(["project","projectCard"],(0,o.fromJS)([{amount:""}]))),e(d.homeAccountActions.changeLrlsEnclosureList())))}))}},afterJzsySave:function(t,e){return{type:A.AFTER_JZSY_SAVE,data:t,saveAndNew:e}}};e.jzsyAccountActions=g},1394:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zjtxAccountActions=e.ActionTypes=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},f(t,A.GET_LB_ZJTX_CARD_DETAIL,function(){var t=n.value.split(s.TREE_JOIN_STR);return T.setIn(["data","topCategoryUuid"],t[0]).setIn(["data","topCategoryName"],t[1]).setIn(["data","runningDate"],n.data.get("runningDate")).setIn(["views","insertOrModify"],"insert")}),f(t,A.GET_LB_ZJTX_FROM_YLLS,function(){var t=n.state.get("data");return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).setIn(["data","categoryUuid"],t.get("categoryUuid")).setIn(["data","categoryName"],t.get("categoryName")).setIn(["data","runningDate"],t.get("runningDate")).setIn(["data","runningAbstract"],t.get("runningAbstract")).setIn(["data","amount"],t.get("amount")).setIn(["data","beProject"],t.get("beProject")).setIn(["data","acAssets"],t.get("acAssets")).setIn(["data","propertyCost"],t.get("propertyCost")).setIn(["data","propertyCostList"],t.get("propertyCostList")).setIn(["data","uuid"],t.get("uuid")).setIn(["data","flowNumber"],t.get("flowNumber"))}),f(t,A.CHANGE_ZJTX_DATA,function(){return e.setIn(n.dataType,n.value)}),f(t,A.AFTER_ZJTX_SAVE,function(){if(n.saveAndNew){var t=e.getIn(["data","runningDate"]);e=T.setIn(["data","runningDate"],t)}else e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","uuid"],n.data.uuid).setIn(["data","flowNumber"],n.data.flowNumber);return e}),f(t,A.GET_ZJTX_CATEGORY,function(){return e.set("categoryList",(0,o.fromJS)(n.receivedData))}),f(t,A.SELECT_ZJTX_CATEGORY,function(){var t="",a=n.data.get("propertyCostList");return 1==a.size&&(t=a.get(0)),e.setIn(["data","categoryUuid"],n.data.get("uuid")).setIn(["data","categoryName"],n.data.get("name")).setIn(["data","beProject"],n.data.get("beProject")).setIn(["data","propertyCost"],t).setIn(["data","propertyCostList"],a).setIn(["data","acAssets"],n.data.get("acAssets"))}),t)[n.type]||function(){return e})()};var r,o=n(9),i=n(182),u=(r=i)&&r.__esModule?r:{default:r},s=l(n(25)),c=n(13),_=(l(n(1064)),l(n(10))),d=n(1058);function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,o.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_ZJTX",categoryName:"请选择类别",categoryUuid:"",topCategoryName:"长期资产折旧摊销",topCategoryUuid:"",runningDate:"",runningAbstract:"资产折旧摊销",assetType:"XZ_ZJTX",runningState:"STATE_CQZC_ZJTX",amount:"",beProject:!1,acAssets:{},propertyCost:"",propertyCostList:[],flowNumber:""},categoryList:[{uuid:"",childList:[]}]});var A=e.ActionTypes={GET_LB_ZJTX_CARD_DETAIL:"GET_LB_ZJTX_CARD_DETAIL",GET_LB_ZJTX_FROM_YLLS:"GET_LB_ZJTX_FROM_YLLS",CHANGE_ZJTX_DATA:"CHANGE_ZJTX_DATA",AFTER_ZJTX_SAVE:"AFTER_ZJTX_SAVE",GET_ZJTX_CATEGORY:"GET_ZJTX_CATEGORY",SELECT_ZJTX_CATEGORY:"SELECT_ZJTX_CATEGORY"},g={changeZjtxData:function(t,e){return{type:A.CHANGE_ZJTX_DATA,dataType:t,value:e}},getCategoryList:function(){return function(t){_.toast.loading("加载中...",0),(0,u.default)("getCategoryList","POST",JSON.stringify({type:"LB_ZJTX"}),function(e){_.toast.hide(),(0,c.showMessage)(e)&&t({type:A.GET_ZJTX_CATEGORY,receivedData:e.data.result})})}},selectCategory:function(t){return{type:A.SELECT_ZJTX_CATEGORY,data:t}},saveRunningbusiness:function(t){return function(e,n){var r=n().zjtxAccountState,i="insert"===r.getIn(["views","insertOrModify"])?"insertAssets":"modifyRunningbusiness",c=n().homeAccountState,l=c.get("enclosureList").toJS(),f=c.get("needDeleteUrl").toJS(),T=l.concat(f),A=n().homeAccountState.get("project").toJS(),E=A.usedProject,C=A.projectCard;if(E&&!C.every(function(t){return t.uuid}))return _.toast.info("有未选择的项目卡片");var S=r.get("data").toJS();return""==S.categoryUuid?_.toast.info("请选择处理类别"):""==S.propertyCost?_.toast.info("请选择费用性质"):""==S.runningAbstract?_.toast.info("请填写摘要"):S.runningAbstract.length>s.RUNNING_ABSTRACT_LENGTH?_.toast.info("摘要长度不能超过"+s.RUNNING_ABSTRACT_LENGTH+"个字符"):S.amount<=0?_.toast.info("请填写金额"):(_.toast.loading(s.LOADING_TIP_TEXT,0),void(0,u.default)(i,"POST",JSON.stringify(a({},S,{usedProject:E,projectCard:C,enclosureList:T})),function(n){_.toast.hide(),0!==n.code?_.toast.fail(n.code+" "+n.message):(_.toast.success("保存成功",2),e(g.afterZjtxSave(n.data,t)),t&&(e(g.getCategoryList()),e(d.homeAccountActions.changeLrlsData(["project","projectCard"],(0,o.fromJS)([{amount:""}]))),e(d.homeAccountActions.changeLrlsEnclosureList())))}))}},afterZjtxSave:function(t,e){return{type:A.AFTER_ZJTX_SAVE,data:t,saveAndNew:e}}};e.zjtxAccountActions=g},1648:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CategoryCom=e.default=void 0;var a,r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();e.abstractFun=function(t,e){var n=e.get("propertyCarryover"),a=e.get("categoryName")?e.get("categoryName"):e.get("name"),r=e.get("propertyPay"),o=e.get("propertyTax");return{STATE_YYSR_DJ:"收到预收款",STATE_YYSR_XS:"销售"+("SX_HW"===n?"存货":"")+"收入",STATE_YYSR_TS:("SX_HW"===n?"销货":"销售")+"退回支出",STATE_YYZC_DJ:"支付预付款",STATE_YYZC_GJ:"采购"+("SX_HW"===n?"存货":"")+"支出",STATE_YYZC_TG:("SX_HW"===n?"购货":"采购")+"退还收入",STATE_FY_DJ:"支付预付款",STATE_FY_YF:a+"支出",STATE_FY_WF:a+"支出",STATE_XC_JT:"计提"+{SX_GZXJ:"工资薪金",SX_SHBX:"社会保险",SX_ZFGJJ:"住房公积金",SX_QTXC:a}[r],STATE_XC_FF:"发放"+{SX_GZXJ:"工资薪金",SX_QTXC:a}[r],STATE_XC_JN:"缴纳"+{SX_SHBX:"社会保险",SX_ZFGJJ:"住房公积金"}[r],STATE_XC_YF:"福利费支出",STATE_SF_YJZZS:"预缴增值税",STATE_SF_JN:""+{SX_QYSDS:"缴纳企业所得税",SX_GRSF:"代缴个人税费",SX_QTSF:"缴纳"+a,SX_ZZS:"缴纳增值税"}[o],STATE_SF_JT:"计提"+{SX_QYSDS:"企业所得税",SX_GRSF:"个人税费",SX_QTSF:""+a,SX_ZZS:"增值税"}[o],STATE_YYWSR_WS:a,STATE_YYWSR_YS:a,STATE_YYWZC_WF:a,STATE_YYWZC_YF:a,STATE_ZS_SQ:"暂收款",STATE_ZS_TH:"暂收款退还",STATE_ZF_FC:"暂付款",STATE_ZF_SH:"暂付款收回",STATE_CQZC_WF:"购进资产支出",STATE_CQZC_YF:"购进资产支出",STATE_CQZC_ZJTX:"资产折旧摊销",STATE_CQZC_WS:"处置资产收入",STATE_CQZC_YS:"处置资产收入",STATE_CQZC_JZSY:"处置资产处置损益",STATE_JK_YS:"收到借款",STATE_JK_JTLX:"计提借款利息",STATE_JK_ZFLX:"支付借款利息",STATE_JK_YF:"偿还本金支出",STATE_TZ_YF:"对外投资支出",STATE_TZ_SRGL:"收到投资收益",STATE_TZ_JTGL:"计提投资收益",STATE_TZ_JTLX:"计提投资收益",STATE_TZ_SRLX:"收到投资收益",STATE_TZ_WS:"收回投资款",STATE_TZ_YS:"收回投资款",STATE_ZB_ZZ:"增加注册资本",STATE_ZB_ZFLR:"支付分配利润",STATE_ZB_LRFP:"计提分配利润",STATE_ZB_JZ:"减少注册资本"}[t]};var i=n(0),u=f(i),s=n(9),c=f(n(2)),_=n(16),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(25)),l=n(1058);function f(t){return t&&t.__esModule?t:{default:t}}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var E=(r=a=function(t){function e(){return T(this,e),A(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return g(e,i.Component),o(e,[{key:"render",value:function(){var t=this.props,e=t.accountList,n=t.accountUuid,a=t.accountName,r=t.onOk,o=(t.history,t.noInsert),i=this.context.router,s=e.toJS();return o||s.unshift({key:"新增账户",value:"insert"+d.TREE_JOIN_STR}),u.default.createElement(_.SinglePicker,{className:"antd-single-picker",district:s,value:""+n+d.TREE_JOIN_STR+a,onOk:function(t){"insert"!=t.value.split(d.TREE_JOIN_STR)[0]?r(t.value):i.history.push("/lrls-account")}},u.default.createElement(_.Row,{style:{color:a?"":"#999"},className:"lrls-account lrls-type"},u.default.createElement("span",{className:"overElli"},a||"点击选择账户"),u.default.createElement(_.Icon,{type:"triangle"})))}}]),e}(),a.contextTypes={router:c.default.object},r);e.default=E;e.CategoryCom=function(t){function e(){return T(this,e),A(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return g(e,i.Component),o(e,[{key:"render",value:function(){var t=this.props,e=t.isModify,n=t.categoryName,a=t.dispatch,r=t.showProject,o=t.project,i=t.noAmount,c=t.changeAmount,f=t.lastCategory,T=t.categoryUuid,A=void 0,g=0;return r&&(A=o.get("usedProject"),o.get("projectCard").forEach(function(t){return g+=Number(t.get("amount"))})),u.default.createElement(_.Row,{className:"lrls-type"},u.default.createElement(_.TreeSelect,{disabled:e,district:f.toJS(),value:T,onChange:function(t){if(a(l.homeAccountActions.changeLrlsData(["project","projectCard"],(0,s.fromJS)([{amount:""}]))),a(l.homeAccountActions.changeLrlsEnclosureList()),t.canShow){var e=""+t.uuid+d.TREE_JOIN_STR+t.name;a(l.homeAccountActions.getCardDetail(e))}else{var n=""+t.uuid+d.TREE_JOIN_STR+t.name+d.TREE_JOIN_STR+t.categoryType;a(l.homeAccountActions.toManageType(n,t))}}},u.default.createElement(_.Row,null,u.default.createElement("span",{style:{color:"请选择类别"==n?"#ccc":""}},n),u.default.createElement(_.Icon,{type:"triangle",style:{color:e?"#ccc":""}}))),r?u.default.createElement(_.SwitchText,{checked:A,checkedChildren:"项目",unCheckedChildren:"",className:"topBarSwitch",onChange:function(t){a(l.homeAccountActions.changeHomeAccountData("project",!A)),i||c(A?0:g)}}):null)}}]),e}()},1649:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ylProject=e.StockCom=e.ProjectCom=e.ContancsCom=e.hxCom=e.default=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();e.xczcCom=function(t,e,n,a){return i.default.createElement(u.Row,{className:"ylls-card"},i.default.createElement("div",{className:"hx-title"},t,"：",i.default.createElement(u.Amount,{showZero:!0},e)),n.map(function(t,e){if(t.get("beSelect"))return i.default.createElement("div",{key:e,className:"ylls-top-line"},i.default.createElement("div",{className:"ylls-item ylls-padding"},i.default.createElement("div",null,"流水号：",t.get("flowNumber")),i.default.createElement("div",{className:"ylls-gray"},t.get("runningDate"))),i.default.createElement("div",{className:"ylls-item"},i.default.createElement("div",{className:"overElli"},a),i.default.createElement("div",null,i.default.createElement(u.Amount,{showZero:!0,className:"ylls-bold"},t.get("notHandleAmount")))))}))};var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r},u=n(16),s=l(n(1064)),c=l(n(25)),_=n(1058),d=(l(n(10)),n(9),n(13));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function A(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.default=function(t,e,n,a){return i.default.createElement("div",null,t.map(function(t,r){var o=[];return e.forEach(function(e){t==e.get("assCategory")&&(o=e.get("assList"))}),i.default.createElement(u.Row,{key:r,className:"lrls-margin-top"},i.default.createElement(u.SinglePicker,{district:o.toJS(),value:n.size?""+n.getIn([r,"assId"]):"",onOk:function(t){a(r,t)}},i.default.createElement(u.Row,{className:"lrls-row lrls-category"},n.get(r)?i.default.createElement("span",null,n.getIn([r,"assId"])+" "+n.getIn([r,"assName"])):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择"+t),i.default.createElement(u.Icon,{type:"triangle"}))))}))},e.hxCom=function(t,e,n,a){var r=0,o=i.default.createElement("div",{style:{display:e?"":"none"}},t.map(function(t,e){return r+=t.get("handleAmount"),i.default.createElement("div",{key:e,className:"ylls-top-line"},i.default.createElement("div",{className:"ylls-item ylls-padding"},i.default.createElement("div",{className:"overElli"},t.get("categoryName")),i.default.createElement("div",{className:"ylls-gray"},"流水号：",t.get("flowNumber"))),i.default.createElement("div",{className:"ylls-item"},i.default.createElement("div",{className:"ylls-blue"},a||s.runningType[t.get("runningType")]),i.default.createElement("div",null,i.default.createElement(u.Amount,{className:"ylls-bold"},t.get("handleAmount")))))}));return i.default.createElement(u.Row,{className:"ylls-card"},i.default.createElement("div",{className:"ylls-item",onClick:function(){return n()}},i.default.createElement("div",null,"核销总计：",i.default.createElement(u.Amount,{showZero:!0},r)),i.default.createElement("div",null,e?"收起":"展开",i.default.createElement(u.Icon,{style:e?{transform:"rotate(180deg)",marginBottom:".1rem"}:"",type:"arrow-down"}))),o)};e.ContancsCom=function(t){function e(){return f(this,e),T(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return A(e,o.Component),a(e,[{key:"render",value:function(){var t=this.props,e=t.cardList,n=t.cardObj,a=t.noBottom,r=t.onOk,o=t.history,s=t.dispatch,d=t.isPayUnit,l=t.contactsRange,f=t.noInsert,T=t.disabled,A="noBottom"==a?"lrls-more-card":"lrls-more-card lrls-bottom",g=e.toJS();return f||g.unshift({key:"新增往来单位",value:"insert"+c.TREE_JOIN_STR+c.TREE_JOIN_STR}),i.default.createElement("div",{className:A},i.default.createElement("label",null,"往来单位:"),i.default.createElement(u.SinglePicker,{disabled:T,district:g,value:n?""+n.get("uuid")+c.TREE_JOIN_STR+n.get("code")+c.TREE_JOIN_STR+n.get("name"):"",onOk:function(t){if("insert"==t.value.split(c.TREE_JOIN_STR)[0])return o.push("/lrls-iuManage"),void s(_.homeAccountActions.getInitRelaCard(d,l));r(t)}},i.default.createElement(u.Row,{className:"lrls-category lrls-padding"},n?i.default.createElement("span",null," ",n.get("code")+" "+n.get("name")," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择往来单位"),i.default.createElement(u.Icon,{type:"triangle",style:{color:T?"#ccc":""}}))))}}]),e}();e.ProjectCom=function(t){function e(){return f(this,e),T(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return A(e,o.Component),a(e,[{key:"render",value:function(){var t=this.props,e=t.project,n=t.dispatch,a=t.changeAmount,r=t.showCommon,o=t.noMore,s=t.noAmount,l=t.isFyzc,f=e.get("projectCardList");r||(f=e.get("projectCardList").filter(function(t){return 0==t.get("value").includes("COMNCRD")}));var T=e.get("projectCard"),A=e.get("usedProject"),g=1==T.size,E=0;return T.forEach(function(t){return E+=Number(t.get("amount"))}),A?i.default.createElement(u.Row,{className:"lrls-card"},T.map(function(t,e){var r=t.get("code")+" "+t.get("name");return"项目公共费用"==t.get("name")&&(r="项目公共费用"),i.default.createElement("div",{key:e,style:{paddingBottom:g?"0":"10px"}},i.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom",style:{display:o?"none":""}},i.default.createElement("span",null,"项目(",e+1,")"),i.default.createElement("span",{className:"lrls-blue",style:{display:g?"none":""},onClick:function(){1!=T.size&&(n(_.homeAccountActions.changeProjectCard("delete","",e)),a(E-Number(t.get("amount"))))}},"删除")),i.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{marginBottom:o?"0":""}},i.default.createElement("label",null,"项目:"),i.default.createElement(u.SinglePicker,{district:f.toJS(),value:t.get("uuid")?""+t.get("uuid")+c.TREE_JOIN_STR+t.get("code")+c.TREE_JOIN_STR+t.get("name"):"",onOk:function(t){n(_.homeAccountActions.changeProjectCard("card",t.value,e))}},i.default.createElement(u.Row,{className:"lrls-category lrls-padding"},t.get("uuid")?i.default.createElement("span",null," ",r," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择项目卡片"),i.default.createElement(u.Icon,{type:"triangle"})))),s?null:i.default.createElement(u.Row,{className:"lrls-more-card lrls-bottom"},i.default.createElement("label",null,"金额:"),i.default.createElement(u.TextListInput,{placeholder:"填写金额",value:t.get("amount"),onChange:function(r){if(l?/^[-\d]\d*\.?\d{0,2}$/g.test(r)||""==r:/^\d*\.?\d{0,2}$/g.test(r)){n(_.homeAccountActions.changeProjectCard("amount",r,e));var o=E-Number(t.get("amount"))+Number(r);a((0,d.decimal)(o))}}})))}),i.default.createElement("div",{className:"lrls-more-card",style:{display:o?"none":"",fontWeight:"bold"}},T.size>1?i.default.createElement("div",null,"总金额：",i.default.createElement(u.Amount,{showZero:!0},E)):i.default.createElement("div",null),i.default.createElement("div",{className:"lrls-blue",onClick:function(){o||n(_.homeAccountActions.changeProjectCard("add","",T.size))}},"+添加项目"))):null}}]),e}(),e.StockCom=function(t){function e(){return f(this,e),T(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return A(e,o.Component),a(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.dispatch,a=e.changeAmount,r=e.stockCardList,o=e.stockCardRange,s=e.onOk,l=e.cardDisabled,f=e.stockRange,T=e.history,A=0,g=1==o.size;o.forEach(function(t){return A+=Number(t.get("amount"))});var E=r.toJS();return E.unshift({key:"新增存货卡片",value:"insert"+c.TREE_JOIN_STR+c.TREE_JOIN_STR}),i.default.createElement("div",{className:"lrls-card"},o.map(function(e,r){return i.default.createElement("div",{key:r,style:{paddingBottom:g?"0":"10px"}},i.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},i.default.createElement("span",null,"存货明细(",r+1,")"),i.default.createElement("span",{className:l?"lrls-placeholder":"lrls-blue",style:{display:g?"none":""},onClick:function(){l||(s("delete","",r),a(A-Number(e.get("amount"))))}},"删除")),i.default.createElement("div",{className:"lrls-more-card lrls-bottom"},i.default.createElement("label",null,"存货:"),i.default.createElement(u.SinglePicker,{disabled:l,district:E,value:e.get("uuid")?""+e.get("uuid")+c.TREE_JOIN_STR+e.get("code")+c.TREE_JOIN_STR+e.get("name"):"",onOk:function(e){if("insert"==e.value.split(c.TREE_JOIN_STR)[0])return T.push("/lrls-inventory"),t.props.dispatch(_.homeAccountActions.initLrlsData("inventory")),void n(_.homeAccountActions.getInitStockCard(f,s,r));s("card",e.value,r)}},i.default.createElement(u.Row,{className:"lrls-category lrls-padding"},e.get("uuid")?i.default.createElement("span",null," ",e.get("code")+" "+e.get("name")," "):i.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),i.default.createElement(u.Icon,{type:"triangle",color:l?"#999":""})))),i.default.createElement("div",{className:"lrls-more-card lrls-bottom"},i.default.createElement("label",null,"金额:"),i.default.createElement(u.TextListInput,{disabled:l||!e.get("uuid"),placeholder:"填写金额",value:e.get("amount"),onChange:function(t){if(/^\d*\.?\d{0,2}$/g.test(t)){s("amount",t,r);var n=A-Number(e.get("amount"))+Number(t);a((0,d.decimal)(n))}}})))}),i.default.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold"}},o.size>1?i.default.createElement("div",null,"总金额：",i.default.createElement(u.Amount,{showZero:!0},A)):i.default.createElement("div",null),i.default.createElement("div",{className:l?"lrls-placeholder":"lrls-blue",onClick:function(){l||s("add","",o.size)}},"+添加存货明细")))}}]),e}();e.ylProject=function(t,e,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=0,o=i.default.createElement("div",{style:{display:e?"":"none"}},t.map(function(t,e){var n=t.get("code")+" "+t.get("name");return"项目公共费用"==t.get("name")&&(n="项目公共费用"),r+=t.get("amount"),i.default.createElement("div",{key:e,className:"ylls-top-line"},i.default.createElement("div",{className:"ylls-item ylls-padding"},i.default.createElement("div",{className:"overElli"},n),a?i.default.createElement("div",null,i.default.createElement(u.Amount,{className:"ylls-bold"},t.get("amount"))):null))}));return i.default.createElement(u.Row,{className:"ylls-card"},i.default.createElement("div",{className:"ylls-item",onClick:function(){return n()}},i.default.createElement("div",null,"项目管理：",a?i.default.createElement(u.Amount,{showZero:!0},r):null),i.default.createElement("div",null,e?"收起":"展开",i.default.createElement(u.Icon,{style:e?{transform:"rotate(180deg)",marginBottom:".1rem"}:"",type:"arrow-down"}))),o)}},1650:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=[];return t.forEach(function(t){"XZ_SALE"==t?e.push({key:"销售费用",value:"XZ_SALE"}):"XZ_MANAGE"==t?e.push({key:"管理费用",value:"XZ_MANAGE"}):"XZ_FINANCE"==t&&e.push({key:"财务费用",value:"XZ_FINANCE"})}),e},e.propertyCostObj=function(t,e){var n="",r=[],o=[],i="",u="请选择费用性质";return({XZ_SALE:function(){n=t.get("saleAc"),r=n.size?n.getIn([0,"assCategoryList"]):[],o=t.get("saleList"),i="saleList",u="销售费用"},XZ_MANAGE:function(){n=t.get("manageAc"),r=n.size?n.getIn([0,"assCategoryList"]):[],o=t.get("manageList"),i="manageList",u="管理费用"},XZ_FINANCE:function(){n=t.get("financeAc"),r=n.size?n.getIn([0,"assCategoryList"]):[],o=t.get("financeList"),i="financeList",u="财务费用"}}[e]||function(){return null})(),(0,a.fromJS)({assCategoryList:r,assList:o,acType:i,propertyCostName:u})};var a=n(9)},1651:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=n(0),i=(a=o)&&a.__esModule?a:{default:a},u=n(16);s(n(10)),n(9),s(n(25));function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}n(1652);var c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={showList:[]},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default.Component),r(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.data,a=e.onChange,r=e.leftIdx,o=e.leftClick,s=this.state.showList,c=n.getIn([r,"value"]),_=n.getIn([r,"children"]);return i.default.createElement(u.Container,{className:"lrls"},i.default.createElement(u.ScrollView,{flex:"1",className:"lrls-menu-scroll"},i.default.createElement("div",{className:"lrls-menu"},i.default.createElement("div",{className:"menu-left"},n.map(function(t,e){return i.default.createElement(u.Row,{key:t.get("value"),className:"menu-left-item overElli "+(c==t.get("value")?"menu-left-item-selected":""),onClick:function(){return o(e)}},t.get("label"))})),i.default.createElement("div",{className:"menu-right"},function e(n,r){return n&&n.map(function(n,o){if(n.get("children")&&n.get("children").size){var _=s.some(function(t){return t===n.get("value")});return i.default.createElement("div",{key:n.get("value")},i.default.createElement(u.Row,{className:"menu-right-item",style:{paddingLeft:r+"rem"},onClick:function(){var e=s;if(_){var a=e.findIndex(function(t){return t===n.get("value")})-1;a>-1?e=e.splice(a,1):e.shift()}else e.push(n.get("value"));t.setState({showList:e})}},i.default.createElement("div",{className:"overElli"},n.get("label")),i.default.createElement(u.Icon,{style:_?{transform:"rotate(180deg)"}:"",type:"arrow-down"})),_?e(n.get("children"),r+.05):"")}return i.default.createElement(u.Row,{key:n.get("value"),className:"menu-right-item overElli",style:{paddingLeft:r+"rem"},onClick:function(){return a([c,n.get("value")],n.get("item"))}},n.get("label"))})}(_,.1)))))}}]),e}();e.default=c},1652:function(t,e,n){},1654:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=c(n(0)),i=n(31),u=n(1058),s=c(n(190));function c(t){return t&&t.__esModule?t:{default:t}}var _=(0,i.connect)(function(t){return t})(a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.Component),r(e,[{key:"render",value:function(){var t=this.props,e=t.dispatch,n=t.enCanUse,a=t.editPermission,r=t.enclosureList,i=t.showlsfj,c=t.checkMoreFj,_=t.label,d=t.enclosureCountUser,l=t.allState,f=t.history,T=l.get("uploadKeyJson"),A=[];return r.map(function(t){"TRUE"===t.get("imageOrFile")&&A.push(t.get("signedUrl"))}),A=A.slice(0,9),o.default.createElement(s.default,{formPage:"oldRunning",className:"",dispatch:e,enCanUse:n,editPermission:a,enclosureList:r,showPzfj:i,checkMoreFj:c,label:_.toJS(),enclosureCountUser:d,previewImageList:A,showckpz:!1,uploadFiles:function(t){e(u.homeAccountActions.uploadFiles.apply(u.homeAccountActions,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t)))},getUploadGetTokenFetch:function(){e(u.homeAccountActions.getUploadGetTokenFetch())},getLabelFetch:function(){return e(u.homeAccountActions.getLabelFetch())},deleteUploadImgUrl:function(t){return e(u.homeAccountActions.deleteUploadFJUrl(t))},changeTagName:function(t,n){return e(u.homeAccountActions.changeTagName(t,n))},uploadKeyJson:T,history:f})}}]),e}())||a;e.default=_}}]);