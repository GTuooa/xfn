(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{1499:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeXjllbBeginDate=t.toggleCachFlowLineDisplay=t.getXjllbFetch=t.getPeriodAndCachFlowFetch=void 0;var r,o=n(13),i=n(24),a=(r=i)&&r.__esModule?r:{default:r},u=f(n(181)),l=f(n(1500)),s=f(n(25)),c=f(n(10));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.getPeriodAndCachFlowFetch=function(e){return function(t,n){c.toast.loading(s.LOADING_TIP_TEXT,0);var r=n().homeState.getIn(["data","userInfo"]).get("sobInfo"),i=r.get("newJr"),l=!!r&&(r.get("moduleInfo").indexOf("RUNNING")>-1&&i);(0,a.default)(l?"getJrcachFlow":"getcachFlow","POST",JSON.stringify({begin:"",end:"",getPeriod:"true",needPeriod:"true"}),function(n){if((0,o.showMessage)(n)){c.toast.hide();var r=t(l?u.reportGetIssuedateAndFreshPeriod(n):u.everyTableGetPeriod(n)),i=e||r,a=n.data.periodDtoJson?t(u.everyTableGetIssuedate(n.data.periodDtoJson)):"";t(d(n.data.jsonArray,i,"",a))}})}},t.getXjllbFetch=function(e,t){return function(n,r){var i=r().homeState.getIn(["data","userInfo"]).get("sobInfo"),u=i.get("newJr"),l=!!i&&(i.get("moduleInfo").indexOf("RUNNING")>-1&&u),f=e.substr(0,4)+(l?"-":"")+e.substr(5,2),b=t?t.substr(0,4)+(l?"-":"")+t.substr(5,2):f;c.toast.loading(s.LOADING_TIP_TEXT,0),(0,a.default)(l?"getJrcachFlow":"getcachFlow","POST",JSON.stringify({begin:f,end:b}),function(r){(0,o.showMessage)(r)&&(c.toast.hide(),n(d(r.data,e,t)))})}};var d=function(e,t,n,r){return function(o){o({type:l.GET_CACH_FLOW_FETCH,receivedData:e}),o({type:l.CHANGE_XJLLB_ISSUDATE,issuedate:t,endissuedate:n,issues:r})}};t.toggleCachFlowLineDisplay=function(e){return{type:l.TOGGLE_CACH_FLOW_LINE_DISPLAY,blockIdx:e}},t.changeXjllbBeginDate=function(e,t){return{type:l.CHANGE_XJLLB_BEGIN_DATE,begin:e,bool:t}}},1500:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_XJLLB="INIT_XJLLB",t.GET_CACH_FLOW_FETCH="GET_CACH_FLOW_FETCH",t.CHANGE_XJLLB_ISSUDATE="CHANGE_XJLLB_ISSUDATE",t.TOGGLE_CACH_FLOW_LINE_DISPLAY="TOGGLE_CACH_FLOW_LINE_DISPLAY",t.CHANGE_XJLLB_BEGIN_DATE="CHANGE_XJLLB_BEGIN_DATE"},1943:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=p(n(0)),a=n(31),u=(n(9),n(16)),l=n(123),s=(n(13),p(n(1944))),c=b(n(10));n(1945);var f=b(n(181)),d=b(n(1499));function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var m={23:[0,1,2,3,4,5,6,7],24:[8,9,10,11,12,13],25:[14,15,16,17,18,19],20:[20,21],22:[22]},g=(0,a.connect)(function(e){return e})(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"componentDidMount",value:function(){c.setTitle({title:"现金流量表"}),c.setIcon({showIcon:!1}),this.props.dispatch(d.getPeriodAndCachFlowFetch())}},{key:"render",value:function(){var e=this.props,t=e.xjllbState,n=e.allState,r=e.dispatch,o=e.homeState.getIn(["data","userInfo"]).get("sobInfo"),a=o.get("newJr"),c=!!o&&(o.get("moduleInfo").indexOf("RUNNING")>-1&&a),b=c?t.get("issues"):n.get("issues"),p=t.get("issuedate"),g=t.get("endissuedate"),h=b.findIndex(function(e){return e.get("value")===p}),_=p.substr(0,4),v=p.substr(5,2),w=n.getIn(["period","periodStartMonth"]),y=b.slice(0,h).filter(function(e){return Number(v)<Number(w)?0===e.get("value").indexOf(_)&&Number(e.get("key").substr(6,2))<Number(w):0===e.get("value").indexOf(_)||0===e.get("value").indexOf(_-1+2)&&Number(e.get("key").substr(6,2))<Number(w)}),L=t.get("cachFlowList"),E=t.get("showedLineBlockIdxList"),I=[7,13,19,20,21,22,23,24,25];E.forEach(function(e){I=I.concat(m[e])});var O=L.map(function(e){return e.set("visible",I.indexOf(e.get("lineIndex"))>-1||e.get("amount")||e.get("sumAmount"))}),N=""+p.substr(0,4)+p.substr(5,2),x=g?""+g.substr(0,4)+g.substr(5,2):N,j=p?p.substr(0,4)+"-"+p.substr(5,2):"",C=g?g.substr(0,4)+"-"+g.substr(5,2):j;return r(f.navigationSetMenu("lrb",function(){return function(e){return e(f.allExportDo(c?"pdfJrCashFlow":"pdfCashFlow",{begin:c?j:N,end:c?C:x}))}},function(){return function(e){return e(f.allExportDo(c?"excelJrcashFlow":"excelcashFlow",{begin:c?j:N,end:c?C:x}))}})),i.default.createElement(u.Container,null,i.default.createElement(l.TopMonthPicker,{issuedate:p,source:b,callback:function(e){return r(d.getXjllbFetch(e,g))},onOk:function(e){return r(d.getXjllbFetch(e.value,g))},showSwitch:!0,endissuedate:g,nextperiods:y,onBeginOk:function(e){r(d.getXjllbFetch(e.value,""))},onEndOk:function(e){r(d.getXjllbFetch(p,e.value))},changeEndToBegin:function(){return r(d.getXjllbFetch(p,""))}}),i.default.createElement(u.Row,{className:"xjllb-line title",onClick:function(){return r(d.toggleCachFlowLineDisplay())}},i.default.createElement("span",{className:"linename"},"项目"),i.default.createElement("span",{className:"lineindex"},"行次"),i.default.createElement("span",{className:"amount"},"本年累计"),i.default.createElement("span",{className:"amount-right"},"本期金额")),i.default.createElement(u.ScrollView,{flex:"1"},i.default.createElement("dl",{className:"xjllb-line-list"},O.map(function(e,t){return i.default.createElement(s.default,{lr:e,dispatch:r,showedLineBlockIdxList:E,visible:e.get("visible"),style:{display:e.get("visible")?"":"none"}})}))))}}]),t}())||r;t.default=g},1944:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=(o=u)&&o.__esModule?o:{default:o},s=n(22),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1499)),f=n(16),d=n(13);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=(0,s.immutableRenderDecorator)(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),a(t,[{key:"render",value:function(){var e,t=this.props,n=t.lr,r=t.dispatch,o=t.showedLineBlockIdxList,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["lr","dispatch","showedLineBlockIdxList"]),u=n.get("lineIndex"),s=void 0;s=23==u||24==u||25==u?"firstlrb":20==u||22==u?"firstlrblast":7==u||13==u||19==u?"second":21==u?"thirdlrb":"fourthlrb";var p=o.find(function(e){return e==n.get("lineIndex")}),m=n.get("lineName").trim().length,g="";return g=d.browserNavigator.versions.android?u<23?1==u||3==u?m>15?n.get("lineName").trim().substr(0,15)+"...":n.get("lineName").trim():m>14?n.get("lineName").trim().substr(0,14)+"...":n.get("lineName").trim():n.get("lineName"):u<23?m>18?n.get("lineName").trim().substr(0,16)+"...":n.get("lineName").trim():n.get("lineName"),l.default.createElement("dd",i({},a,(b(e={className:"xjllb-line"},"className",["xjllb-line",s].join(" ")),b(e,"onClick",function(){"firstlrb"===s&&r(c.toggleCachFlowLineDisplay(u))}),e)),l.default.createElement("span",{className:"linename"},l.default.createElement("span",{className:"linenametext",style:{lineHeight:"firstlrb"===s?"":m>8?".14rem":"",marginTop:"firstlrb"===s?"":m>8?".08rem":""}},"firstlrb"===s||"firstlrblast"===s?g.replace("、","."):g),"firstlrb"==s?l.default.createElement(f.Icon,{style:p?{transform:"rotate(180deg)",marginBottom:".1rem"}:"",type:"arrow-down"}):""),"firstlrb"===s?"":l.default.createElement("span",{className:"lineindex"},n.get("lineIndex")),"firstlrb"===s?"":7==u||13==u||19==u||20==u||21==u||22==u?l.default.createElement(f.Amount,{showZero:"true",className:"amount"},n.get("sumAmount")):l.default.createElement(f.Amount,{className:"amount"},n.get("sumAmount")),"firstlrb"===s?"":7==u||13==u||19==u||20==u||21==u||22==u?l.default.createElement(f.Amount,{showZero:"true",className:"amount-right"},n.get("amount")):l.default.createElement(f.Amount,{className:"amount-right"},n.get("amount")))}}]),t}())||r;t.default=p},1945:function(e,t,n){},1947:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,n=arguments[1];return((e={},i(e,o.INIT_XJLLB,function(){return a}),i(e,o.GET_CACH_FLOW_FETCH,function(){return t.set("cachFlowList",(0,r.fromJS)(n.receivedData))}),i(e,o.CHANGE_XJLLB_ISSUDATE,function(){return n.issues&&(t=t.set("issues",(0,r.fromJS)(n.issues))),t.set("issuedate",n.issuedate).set("endissuedate",n.endissuedate)}),i(e,o.TOGGLE_CACH_FLOW_LINE_DISPLAY,function(){var e=t.get("showedLineBlockIdxList");return n.blockIdx?e.indexOf(n.blockIdx)>-1?t.update("showedLineBlockIdxList",function(e){return e.map(function(e){return e===n.blockIdx?-1:e}).filter(function(e){return-1!==e})}):t.update("showedLineBlockIdxList",function(e){return e.push(n.blockIdx)}):t.update("showedLineBlockIdxList",function(e){return e.size?e.clear():a.get("showedLineBlockIdxList")})}),i(e,o.CHANGE_XJLLB_BEGIN_DATE,function(){return t=n.bool?t.set("endissuedate",n.begin):t.set("issuedate",n.begin)}),e)[n.type]||function(){return t})()};var r=n(9),o=(n(49),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1500)));function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=(0,r.fromJS)({issuedate:"",endissuedate:"",showedLineBlockIdxList:[],cachFlowList:[{lineIndex:"",lineName:"",amount:"",sumAmount:""}],issues:[]})},967:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var r=o(n(1943));function o(e){return e&&e.__esModule?e:{default:e}}var i={xjllbState:o(n(1947)).default};t.reducer=i,t.view=r.default}}]);