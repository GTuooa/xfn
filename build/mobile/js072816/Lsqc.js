(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1031:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var n=a(i(2550));function a(e){return e&&e.__esModule?e:{default:e}}var s={lsqcState:a(i(2551)).default};t.reducer=s,t.view=n.default},2550:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=f(i(0)),r=i(31),o=i(9),c=m(i(10)),l=m(i(85)),u=(i(123),i(16));m(i(25));i(203);var d=f(i(204));f(i(205));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}var g=(0,r.connect)(function(e){return e})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),a(t,[{key:"componentDidMount",value:function(){c.setTitle({title:"期初值"}),c.setIcon({showIcon:!1}),c.setRight({show:!1}),"home"===sessionStorage.getItem("prevPage")&&sessionStorage.removeItem("prevPage"),this.props.dispatch(l.getBeginningList("true")),this.props.dispatch(l.initBolck())}},{key:"componentWillReceiveProps",value:function(e){e.lsqcState.getIn(["flags","curModifyBtn"])!==this.props.lsqcState.getIn(["flags","curModifyBtn"])&&""===e.lsqcState.getIn(["flags","curModifyBtn"])&&e.dispatch(l.getBeginningList(!1,!0))}},{key:"render",value:function(){var e,t,i=this.props,n=i.history,a=i.dispatch,r=(i.allState,i.lsyebState,i.lsqcState),c=i.homeState,m=r.get("QcList"),f=(r.get("showContactsModal"),r.getIn(["flags","curModifyBtn"])),g=r.getIn(["flags","isCheckOut"]),p=r.getIn(["flags","issuedate"]),h=r.getIn(["flags","issues"]),L=(r.getIn(["flags","isDefinite"]),c.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE"),function(e){var t=0;return m.map(function(i,n){var a=n;!function i(n,s){return n.map(function(n,r){n.childList&&n.childList.length?i(n.childList,s+1):"Contacts"==a&&1==s?t+=0:"SUBTRACT"==n.operate?t-=parseFloat(n[e]):t+=parseFloat(n[e])})}(i.getIn(["List","childList"]).toJS(),1)}),t});e=L("debitBeginAmount"),t=L("creditBeginAmount");var I=c.getIn(["data","userInfo","sobInfo","moduleInfo"]),y=!!I&&I.indexOf("GL")>-1,C=!!I&&I.indexOf("INVENTORY")>-1,v=[];if(y){var S=["Account","LongTerm","Stock"];m.forEach(function(e,t){S.indexOf(t)>-1||v.push(t)})}else m.forEach(function(e,t){return v.push(t)});var b=r.getIn(["flags","balanceShowChild"]),N=(r.getIn(["flags","balanceEditShowChild"]),function(e,t){var i=0;return m.getIn([t,"List","childList"])&&m.getIn([t,"List","childList"]).size>0&&function t(n){n.map(function(n,a){n.childList&&n.childList.length>0?t(n.childList):"SUBTRACT"==n.operate?i-=parseFloat(n[e]):i+=parseFloat(n[e])})}(m.getIn([t,"List","childList"]).toJS()),m.getIn([t,"List","childList"])&&m.getIn([t,"List","childList"]).size>0?i:m.getIn([t,"List",e])}),E=r.get("cantChooseList"),T=r.get("changeQcList"),O=r.getIn(["flags","property"]),_=[],J=[];T.map(function(e){"1"!==e.get("operateType")||e.get("property")!=O&&"stock"!=e.get("property")||_.push(e.get("uuid")),"2"===e.get("operateType")&&E.indexOf(e.get("relationUuid"))>-1&&J.push(e.get("relationUuid"))}),_=(0,o.fromJS)(_),J=(0,o.fromJS)(J);r.get("MemberList"),r.get("thingsList");!C&&v.splice(v.findIndex(function(e){return"Stock"===e}),1);var A=["Account","Salary","Tax","Contacts","Stock","Project","Others","LongTerm","CIB"].filter(function(e){return v.indexOf(e)>-1});return s.default.createElement(u.Container,{className:"lsqc"},s.default.createElement("div",{className:"lsqc-choose-calendar"},s.default.createElement("span",{className:"lsqc-title-calendar"},s.default.createElement("span",{className:""},"起始账期")),s.default.createElement(u.SinglePicker,{disabled:g||!y,className:"lsqc-picker",district:h.toJS(),value:p,onOk:function(e){a(l.modifyPeriod(e))}},s.default.createElement("span",null,s.default.createElement("span",{className:"thirdparty-date-date"},p))),s.default.createElement(u.Icon,{className:"icon lsqc-icon-calendar",type:"calendar"})),s.default.createElement(u.Row,{className:"ba-title"},s.default.createElement("div",{className:"ba-title-item"},"项目"),s.default.createElement("div",{className:"ba-title-item"},y?"借方":"资产"),s.default.createElement("div",{className:"ba-title-item"},y?"贷方":"负债和权益"),s.default.createElement("div",{className:"ba-title-item"})),s.default.createElement(u.ScrollView,{flex:"1",uniqueKey:"ls-config-scroll",savePosition:!0,className:"ac-list"},A.map(function(e,t){var i=r.getIn(["firstChildToggle",e+"Display"]);return s.default.createElement("div",{className:"ba-list",key:t},s.default.createElement("div",{className:"ba lsqc-border-bottom",style:{backgroundColor:"#fff3e3"}},s.default.createElement("div",{className:"ba-info"},s.default.createElement("span",{className:"name",onClick:function(t){t.stopPropagation(),a(l.changeModifyBtn(e,!1)),n.push("/config/lsqcedit")}},s.default.createElement("span",{className:"name-name"},m.getIn([e,"List","name"]))),s.default.createElement(u.Amount,{showZero:!1},N("debitBeginAmount",e)),s.default.createElement(u.Amount,{showZero:!1},N("creditBeginAmount",e)),s.default.createElement("span",{className:"btn",onClick:function(){return a(l.firstChildToggle(e))}},m.getIn([e,"List","childList"])&&m.getIn([e,"List","childList"]).size?s.default.createElement(u.Icon,{type:"block"==i?"arrow-up":"arrow-down"}):""))),s.default.createElement("div",{style:{display:i}},function e(t,i){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.map(function(t,r){var o=b.indexOf(t.get("uuid"))>-1;return t.get("childList")&&t.get("childList").size?s.default.createElement("div",{key:t.get("uuid")},s.default.createElement(d.default,{leve:i,className:"lsqc-border-bottom",style:{backgroundColor:"#fff"},ba:t,haveChild:!0,showChild:o,history:n,dispatch:a,balistSeq:m,curModifyBtn:f}),o?e(t.get("childList"),i+1,!1):""):s.default.createElement("div",{key:t.get("uuid")},s.default.createElement(d.default,{leve:i,className:"lsqc-border-bottom",ba:t,style:{backgroundColor:"#fff"},history:n,dispatch:a,balistSeq:m,curModifyBtn:f}))})}(m.getIn([e,"List","childList"]),1)))}),s.default.createElement("div",{className:"ba-list"},s.default.createElement("div",{className:"ba lsqc-border-bottom",style:{backgroundColor:"#fff3e3"}},s.default.createElement("div",{className:"ba-info"},s.default.createElement("span",{className:"name-child"},s.default.createElement("span",{className:"name-name name-total"},"资产总计")),s.default.createElement(u.Amount,{showZero:!1},e),s.default.createElement(u.Amount,{showZero:!1}),s.default.createElement("span",null)),s.default.createElement("div",{className:"ba-info"},s.default.createElement("span",{className:"name-child"},s.default.createElement("span",{className:"name-name name-total"},"负债和权益总计")),s.default.createElement(u.Amount,{showZero:!1}),s.default.createElement(u.Amount,{showZero:!1},t),s.default.createElement("span",null)),s.default.createElement("div",{className:"ba-info"},s.default.createElement("span",{className:"name-child"},s.default.createElement("span",{className:"name-name name-total"},"待处理财产损益")),s.default.createElement(u.Amount,{showZero:!1},e<t?t-e:0),s.default.createElement(u.Amount,{showZero:!1},e>t?e-t:0),s.default.createElement("span",null)),s.default.createElement("div",{className:"ba-info"},s.default.createElement("span",{className:"name-child"},s.default.createElement("span",{className:"name-name name-total"},"总金额")),s.default.createElement(u.Amount,{showZero:!1},e>t?e:t),s.default.createElement(u.Amount,{showZero:!1},e>t?e:t),s.default.createElement("span",null))))))}}]),t}())||n;t.default=g},2551:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,i=arguments[1];return((e={},l(e,s.INIT_LSQC,function(){return u}),l(e,s.SHOW_LSQC,function(){return t=t.set("MemberList",(0,a.fromJS)([])).set("thingsList",(0,a.fromJS)([]))}),l(e,s.LSQC_CLEAR_MEMBER_LIST,function(){return t=t.set("showQcye",i.value)}),l(e,s.LSQC_COMMON_CHANGE,function(){return t=t.setIn(["flags",i.changeType],i.value)}),l(e,s.MODIFY_PERIOD_ACCOUNT,function(){return t=t.setIn(["flags","issuedate"],i.issuedate)}),l(e,s.INIT_MODULE_ALL_SHOW,function(){return t=t.setIn(["firstChildToggle","AccountDisplay"],"block").setIn(["firstChildToggle","TaxDisplay"],"block").setIn(["firstChildToggle","SalaryDisplay"],"block").setIn(["firstChildToggle","ContactsDisplay"],"block").setIn(["firstChildToggle","OthersDisplay"],"block").setIn(["firstChildToggle","StockDisplay"],"block").setIn(["firstChildToggle","LongTermDisplay"],"block").setIn(["firstChildToggle","CIBDisplay"],"block").setIn(["firstChildToggle","ProjectDisplay"],"block")}),l(e,s.LSQC_INIT_BLOCK,function(){return t=t.setIn(["firstChildToggle","AccountDisplay"],"none").setIn(["firstChildToggle","TaxDisplay"],"none").setIn(["firstChildToggle","SalaryDisplay"],"none").setIn(["firstChildToggle","ContactsDisplay"],"none").setIn(["firstChildToggle","OthersDisplay"],"none").setIn(["firstChildToggle","StockDisplay"],"none").setIn(["firstChildToggle","LongTermDisplay"],"none").setIn(["firstChildToggle","CIBDisplay"],"none").setIn(["firstChildToggle","ProjectDisplay"],"none")}),l(e,s.GET_BEGINNING_LIST,function(){var e=i.receivedData.result,n=[],s=void 0;i.receivedData.result.isSimplify?(s=[e.accountBalance,e.rateBalance,e.paymentBalance,e.amountBalance,e.otherBalance,e.stockBalance,e.assetsBalance,e.mixingBalance],t=t.setIn(["QcList","Account","List"],(0,a.fromJS)(e.accountBalance)).setIn(["QcList","Account","status"],!0).setIn(["QcList","LongTerm","List"],(0,a.fromJS)(e.assetsBalance)).setIn(["QcList","LongTerm","status"],!0).setIn(["QcList","Stock","List"],(0,a.fromJS)(e.stockBalance)).setIn(["QcList","Stock","status"],!0).setIn(["QcList","Project","List"],(0,a.fromJS)(e.projectBalance)).setIn(["QcList","Project","status"],!0)):s=[e.rateBalance,e.paymentBalance,e.amountBalance,e.otherBalance,e.mixingBalance],s.map(function(e){e.childList.length&&function e(t){return t.map(function(t){t.childList.length>0&&(n.push(t.relationUuid),e(t.childList))})}(e.childList)}),i.isPerid&&(t=t.setIn(["flags","balanceShowChild"],(0,a.fromJS)(n)));for(var r=e.balancePeriod,o=Number(r.firstYear),c=Number(r.lastYear),l=Number(r.firstMonth),u=Number(r.lastMonth),d=[],m=c;m>=o&&0!==o;--m)for(var f=m===c?u:12;f>=(m===o?l:1);--f)d.push(m+"."+(f<10?"0"+f:f));i.isChangeBtn&&(t=t.setIn(["flags","curModifyBtn"],""));var g=[],p=[],h=(t=t.setIn(["flags","issues"],(0,a.fromJS)(d)).setIn(["flags","issuedate"],r.year+"."+r.month).setIn(["flags","QcUuid"],(0,a.fromJS)(r.uuid)).setIn(["QcList","Tax","List"],(0,a.fromJS)(e.rateBalance)).setIn(["QcList","Tax","status"],!0).setIn(["QcList","Salary","List"],(0,a.fromJS)(e.paymentBalance)).setIn(["QcList","Salary","status"],!0).setIn(["QcList","Contacts","List"],(0,a.fromJS)(e.amountBalance)).setIn(["QcList","Contacts","status"],!0).setIn(["QcList","Project","List"],(0,a.fromJS)(e.projectBalance)).setIn(["QcList","Project","status"],!0).setIn(["QcList","Others","List"],(0,a.fromJS)(e.otherBalance)).setIn(["QcList","Others","status"],!0).setIn(["QcList","CIB","List"],(0,a.fromJS)(e.mixingBalance)).setIn(["QcList","CIB","status"],!0).setIn(["flags","isCheckOut"],r.isCheckOut).setIn(["flags","selectItem"],(0,a.fromJS)([])).setIn(["flags","selectList"],(0,a.fromJS)([])).set("changeQcList",(0,a.fromJS)([])).set("addItem",(0,a.fromJS)({}))).getIn(["QcList","Contacts","List","childList"]);h.map(function(e,t){e.get("childList")&&e.get("childList").map(function(e){if(!e.get("isDefinite")){var i="debit"==e.get("direction")?"debitBeginAmount":"creditBeginAmount";g.push({index:t,amount:e.get(i)})}})});var L=t.getIn(["QcList","Stock","List","childList"]);return L.map(function(e,t){if(!e.get("isDefinite")){var i="debit"==e.get("direction")?"debitBeginAmount":"creditBeginAmount";p.push({amount:e.get(i)})}}),t=t.setIn(["notdefined","ContactsArr"],(0,a.fromJS)(g)).setIn(["notdefined","StockArr"],(0,a.fromJS)(p))}),l(e,s.GET_BEGINNING_CATEGORY,function(){var e="Contacts"===i.cardType?"MemberList":"thingsList",s=[],o="";o=i.item.get("inventoryNature")?"stock":i.item.get("property");var c=t.getIn(["flags","isCheckOut"]);i.receivedData.resultList.map(function(e){var t=void 0;switch(o){case"NEEDIN":t=e.receivableOpened;break;case"PREIN":t=e.advanceOpened;break;case"NEEDPAY":t=e.payableOpened;break;case"PREPAY":t=e.prepaidOpened;break;case"stock":t=e.opened;break;case"CARD_PROPERTY_BASIC":t=e.basicProductOpen;break;case"CARD_PROPERTY_CONTRACT_COST":t=e.contractCostOpen;break;case"CARD_PROPERTY_CONTRACT_PROFIT":t=e.contractProfitOpen;break;case"CARD_PROPERTY_ENGINEER":t=e.engineeringSettlementOpen}0==t||c||s.push(e.uuid)});var l=function e(t){return t.map(function(t,i){var n=t.top?0:1;return t.childList&&t.childList.length?{key:""+t.uuid+r.TREE_JOIN_STR+n,label:t.name,childList:e(t.childList)}:{key:""+t.uuid+r.TREE_JOIN_STR+n,label:t.name,childList:[]}})}(i.receivedData.typeList),u="Contacts"===i.cardType?"全部往来单位":"Project"===i.cardType?"全部项目":"全部存货",d=[{key:r.TREE_JOIN_STR+"0",label:u,childList:[]}],m=i.receivedData.resultList.map(function(e){return e.code.indexOf("UDFNCRD")>-1||e.code.indexOf("IDFNCRD")>-1?e:n({},e,{name:e.code+" "+e.name})}),f=d.concat(l),g=i.receivedData.resultList.map(function(e,t){return{uuid:e.uuid,name:e.code+" "+e.name}});return t=t.set("contactsCategory",(0,a.fromJS)(f)).set("cardList",(0,a.fromJS)(g)).set(e,(0,a.fromJS)(m)).setIn(["flags","property"],o).setIn(["flags","inventoryNature"],i.item.get("inventoryNature")).set("cantChooseList",(0,a.fromJS)(s)).set("addItem",i.item)}),l(e,s.GET_CONTACTS_MEMBERS_LIST,function(){var e="Contacts"===i.cardType?"MemberList":"thingsList",s=i.receivedData.resultList.map(function(e,t){return{uuid:e.uuid,name:e.code+" "+e.name}}),r=i.receivedData.resultList.map(function(e){return e.code.indexOf("UDFNCRD")>-1||e.code.indexOf("IDFNCRD")>-1?e:n({},e,{name:e.code+" "+e.name})}),o=(t=t.set(e,(0,a.fromJS)(s)).set(e,(0,a.fromJS)(r))).getIn(["flags","property"]),c=t.getIn(["flags","isCheckOut"]),l=[];return i.receivedData.resultList.map(function(e){var t=void 0;switch(o){case"NEEDIN":t=e.receivableOpened;break;case"PREIN":t=e.advanceOpened;break;case"NEEDPAY":t=e.payableOpened;break;case"PREPAY":t=e.prepaidOpened;break;case"stock":t=e.opened;break;case"CARD_PROPERTY_BASIC":t=e.basicProductOpen;break;case"CARD_PROPERTY_CONTRACT_COST":t=e.contractCostOpen;break;case"CARD_PROPERTY_CONTRACT_PROFIT":t=e.contractProfitOpen;break;case"CARD_PROPERTY_ENGINEER":t=e.engineeringSettlementOpen}0==t||c||l.push(e.uuid)}),t=t.set("cantChooseList",(0,a.fromJS)(l)).setIn(["flags","curCategoryUuid"],(0,a.fromJS)(i.Uuid)).setIn(["flags","level"],(0,a.fromJS)(i.level))}),l(e,s.BEGINNING_TRIANGLE_SWITCH,function(){var e=t.getIn(["flags","balanceShowChild"]);if(i.showChild){var n=e.splice(e.findIndex(function(e){return e===i.uuid}),1);return t.setIn(["flags","balanceShowChild"],n)}var a=e.push(i.uuid);return t.setIn(["flags","balanceShowChild"],a)}),l(e,s.BEGINNING_TRIANGLE_SWITCH_EDIT,function(){var e=t.getIn(["flags","balanceEditShowChild"]);if(i.showChild){var n=e.splice(e.findIndex(function(e){return e===i.uuid}),1);return t.setIn(["flags","balanceEditShowChild"],n)}var a=e.push(i.uuid);return t.setIn(["flags","balanceEditShowChild"],a)}),l(e,s.CHANGE_BEGINNING_LIST,function(){var e=""===i.number?0:i.number,n=(i.item.set(i.amountName,e),t.get("changeQcList"));n=n.filter(function(e,t){return e.get("uuid")!==i.item.get("uuid")||e.get("uuid")===i.item.get("uuid")&&e.get("property")!==i.item.get("property")});var s=i.item.get("add")?"1":"3",r=n.push((0,a.fromJS)({uuid:i.item.get("uuid"),name:i.item.get("name"),amount:e,operateType:s,balanceGroup:i.item.get("balanceGroup")?i.item.get("balanceGroup"):"",property:i.item.get("property"),inventoryNature:i.item.get("inventoryNature")})),c=(t=t.set("changeQcList",(0,a.fromJS)(r))).getIn(["QcList",i.listName,"List","childList"]),l=t.getIn(["flags","isCheckOut"]);if(l){var u=i.listItem.get("childList").toJS();!function t(n){return n.map(function(n,s){var r=(0,a.fromJS)(n);(0,a.is)(r,i.item)?n[i.amountName]=e:n.childList&&n.childList.length&&t(n.childList)})}(u);var d=(t=t.setIn(["QcList",i.listName,"List","childList"],(0,a.fromJS)(u))).get("changeQcList").filter(function(e){return"1"==e.get("operateType")}),m=void 0,f=void 0,g=void 0;if("Contacts"===i.listName){c.map(function(e,t){e.get("childList")&&e.get("childList").size&&e.get("childList").map(function(e,n){e.get("uuid")===i.item.get("uuid")&&e.get("property")===i.item.get("property")&&(m=t)})});var p=c.getIn([m,"childList"]).map(function(e,t){if(!e.get("isDefinite"))return f=t,e});g=p.get(f)}else{var h=c.map(function(e,t){if(!e.get("isDefinite"))return f=t,e});g=h.get(f)}var L=0;d.map(function(e){if(i.item.get("property")===e.get("property")){var t=e.get("amount")?e.get("amount"):0;L+=parseFloat(t)}});var I="Contacts"===i.listName?t.getIn(["notdefined","ContactsArr",m,"amount"]):t.getIn(["notdefined","StockArr",0,"amount"]),y=L;if(I<y){var C=t.get("changeQcList"),v=(C=C.filter(function(e,t){return e.get("uuid")!==i.item.get("uuid")})).push((0,a.fromJS)({uuid:i.item.get("uuid"),name:i.item.get("name"),amount:0,operateType:"1",balanceGroup:i.item.get("balanceGroup")?i.item.get("balanceGroup"):"",property:i.item.get("property"),inventoryNature:i.item.get("inventoryNature")}));t=t.set("changeQcList",(0,a.fromJS)(v));var S=i.listItem.get("childList").toJS(),b=0;!function e(t){return t.map(function(t,n){(0,a.is)((0,a.fromJS)(t),i.item)?t[i.amountName]=0:t.childList&&t.childList.length&&e(t.childList),t.add&&!(0,a.is)((0,a.fromJS)(t),i.item)&&(b+=parseFloat(t[i.amountName]))})}(S);var N=t.get("changeQcList").filter(function(e){return"1"==e.get("operateType")});return N.map(function(e){var t=e.get("amount")?e.get("amount"):0;parseFloat(t)}),t=t.setIn(["QcList",i.listName,"List","childList"],(0,a.fromJS)(S)),t="Contacts"===i.listName?t.setIn(["QcList",i.listName,"List","childList",m,"childList",f,i.amountName],I-b):t.setIn(["QcList",i.listName,"List","childList",f,i.amountName],I-b),o.toast.info("新增期初值不能大于未明确对象期初值")&&t}var E=(t="Contacts"===i.listName?t.setIn(["QcList",i.listName,"List","childList",m,"childList",f,i.amountName],I-y):t.setIn(["QcList",i.listName,"List","childList",f,i.amountName],I-y)).get("changeQcList"),T=(E=E.filter(function(e,t){return e.get("uuid")!==g.get("uuid")})).push((0,a.fromJS)({uuid:g.get("uuid"),name:g.get("name"),amount:y,operateType:"3",balanceGroup:g.get("balanceGroup"),property:g.get("property")}));t=t.set("changeQcList",(0,a.fromJS)(T))}else{var O=""===i.number?0:i.number,_=t.getIn(["QcList",i.listName,"List"]).toJS(),J=[_];!function e(t){return t.map(function(t,n){t.uuid===i.item.get("uuid")&&t.property===i.item.get("property")&&(t[i.amountName]=O),t.childList&&t.childList.length>0&&e(t.childList)})}(J);var A=J[0];t=t.setIn(["QcList",i.listName,"List"],(0,a.fromJS)(A))}return t}),l(e,s.CHANGE_QCMODAL_SHOW_HIDE,function(){return i.value||(t=t.setIn(["flags","selectList"],(0,a.fromJS)([])).set("cantChooseList",(0,a.fromJS)([]))),t=t.set("showContactsModal",i.value).setIn(["flags","isDefinite"],i.isDefinite).setIn(["flags","notClearItem"],i.item).setIn(["flags","level"],"").setIn(["flags","curCategoryUuid"],"")}),l(e,s.DELETE_BEGINNING_LIST_ITEM,function(){var e=t.get("changeQcList"),n=void 0;if(e.size){var s=!1;!function a(r){return r.map(function(r,o){r.get("uuid")===i.item.get("uuid")&&r.get("property")===i.item.get("property")&&(n=e.filter(function(e){return!(e.get("uuid")===i.item.get("uuid")&&e.get("property")===i.item.get("property"))}),t=t.set("cantChooseList",t.get("cantChooseList").filter(function(e){r.get("uuid")})),s=!0),r.get("childList")&&r.get("childList").size&&a(r.get("childList"))})}(e),s||(n=e.push((0,a.fromJS)({uuid:i.item.get("uuid"),relationUuid:i.item.get("relationUuid"),name:i.item.get("name"),amount:"",operateType:"2",balanceGroup:i.item.get("balanceGroup")?i.item.get("balanceGroup"):"",property:i.item.get("property"),inventoryNature:i.item.get("inventoryNature")})),t=t.set("cantChooseList",t.get("cantChooseList").filter(function(e){i.item.get("uuid")})))}else n=e.push((0,a.fromJS)({uuid:i.item.get("uuid"),relationUuid:i.item.get("relationUuid"),name:i.item.get("name"),amount:"",operateType:"2",balanceGroup:i.item.get("balanceGroup")?i.item.get("balanceGroup"):"",property:i.item.get("property"),inventoryNature:i.item.get("inventoryNature")})),t=t.set("cantChooseList",t.get("cantChooseList").filter(function(e){i.item.get("uuid")}));var r=t.getIn(["QcList",i.listName,"List","childList"]),o=(t.get("addItem"),["QcList",i.listName,"List","childList"]);return function e(n,a){return n.map(function(n,s){n=n.get("childList")?n.set("childList",n.get("childList").filter(function(e){return e.get("uuid")!==i.item.get("uuid")||e.get("uuid")===i.item.get("uuid")&&e.get("property")!==i.item.get("property")})):n,t=t.setIn(a.concat(s),n),n.get("childList")&&n.get("childList").size&&e(n.get("childList"),a.concat([s,"childList"]))})}(r,o),t=t.set("changeQcList",n)}),l(e,s.CHANGE_QCBUTTON_MODIFY_SAVE,function(){var e=t.getIn(["flags","balanceShowChild"]).toJS(),n=t.getIn(["QcList",i.name,"List"]).toJS();return n.childList.length&&function t(i){return i.map(function(i){i.childList.length>0&&(e.indexOf(i.relationUuid)>-1||e.push(i.relationUuid),t(i.childList))})}(n.childList),t=t.setIn(["QcList",i.name,"status"],i.value).setIn(["flags","curModifyBtn"],i.name).setIn(["flags","balanceShowChild"],(0,a.fromJS)(e)).setIn(["firstChildToggle",i.name+"Display"],"block")}),l(e,s.LSQC_RESTORE_MODIFICATION,function(){return t=t.setIn(["QcList",i.curModifyBtn,"status"],!0).setIn(["flags","curModifyBtn"],"").set("changeQcList",(0,a.fromJS)([]))}),l(e,s.LSQC_CHANGE_CATEGORY,function(){return t=t.setIn(["flags","categoryKey"],i.value)}),l(e,s.FIRST_CHILD_TOGGLE,function(){var e="none"==t.getIn(["firstChildToggle",i.listName+"Display"])?"block":"none";return t=t.setIn(["firstChildToggle",i.listName+"Display"],e)}),l(e,s.CONTACTS_ITEM_CHECKBOX_SELECT,function(){var e=t.getIn(["flags","selectList"]),n=t.getIn(["flags","selectItem"]),s=e.push(i.uuid),r=n.push({uuid:i.uuid,name:i.code+" "+i.name});return t.setIn(["flags","selectList"],s).setIn(["flags","selectItem"],(0,a.fromJS)(r))}),l(e,s.CONTACTS_ITEM_CHECKBOX_CHECK_ALL,function(){if(i.selectAll)return t.setIn(["flags","selectList"],(0,a.fromJS)([])).setIn(["flags","selectItem"],(0,a.fromJS)([]));var e=t.get(i.listName),n=[],s=[],r=[],o=[],c=t.get("cantChooseList"),l=t.get("changeQcList");return l.map(function(e){"1"!==e.get("operateType")||e.get("property")!=i.addItemProperty&&"stock"!=e.get("property")||r.push(e.get("uuid")),"2"===e.get("operateType")&&c.indexOf(e.get("relationUuid"))>-1&&o.push(e.get("relationUuid"))}),e.forEach(function(e){c.indexOf(e.get("uuid"))>-1&&!(o.indexOf(e.get("uuid"))>-1)||r.indexOf(e.get("uuid"))>-1||(n.push(e.get("uuid")),s.push({uuid:e.get("uuid"),name:e.get("code")+" "+e.get("name")}))}),t.setIn(["flags","selectList"],(0,a.fromJS)(n)).setIn(["flags","selectItem"],(0,a.fromJS)(s))}),l(e,s.LSQC_SEARCH_CARD_LIST,function(){t=i.searchValue?t.set("hasSearchContent",!0):t.set("hasSearchContent",!1);var e="Contacts"===i.cardType?t.get("MemberList"):t.get("thingsList"),n=[];return e.map(function(e){(e.get("code").indexOf(i.searchValue)>-1||e.get("name").indexOf(i.searchValue)>-1)&&n.push(e)}),t=""===i.searchValue?t.set("searchList",(0,a.fromJS)([])):t.set("searchList",(0,a.fromJS)(n))}),l(e,s.LSQC_ADD_RUNNING_BEGIN,function(){var e=t.getIn(["flags","selectList"]),n=t.getIn(["flags","selectItem"]),s=e.push(i.uuid),r=n.push({uuid:i.uuid,name:""+i.name}),o=(t=t.setIn(["flags","selectList"],s).setIn(["flags","selectItem"],(0,a.fromJS)(r))).getIn(["flags","selectItem"]).toJS(),c=t.getIn(["flags","isDefinite"]),l=t.getIn(["QcList",i.addItemType,"List","childList"]),u=void 0,d=void 0,m=void 0,f=void 0,g=void 0;if(c){var p=[];o.forEach(function(e,n){var s=t.get("changeQcList"),r=t.get("addItem");"Stock"==i.addItemType?(d="debit",m="BALANCE_GROUP_STOCK",f="stock",g=r.get("inventoryNature")):(d=r.get("direction"),m=r.get("balanceGroup"),f=r.get("property"),g=""),p=r.get("childList").push((0,a.fromJS)({uuid:e.uuid,name:e.name,balanceGroup:m,property:f,inventoryNature:g,direction:d,add:!0,creditBeginAmount:0,debitBeginAmount:0})),u=s.push((0,a.fromJS)({uuid:e.uuid,name:e.name,amount:0,operateType:"1",balanceGroup:m,property:f,inventoryNature:g})),t=t.setIn(["addItem","childList"],p).set("changeQcList",u)});var h=t.get("addItem"),L={childList:l.toJS()};!function e(t,i,n){if(t.parentPlace=n,t.childList&&t.childList.length)for(var a=0;a<t.childList.length;a++){var s=""===i?t.parentPlace.concat([a]):t.parentPlace.concat(["childList",a]);e(t.childList[a],a,s)}}(L,"",["QcList",i.addItemType,"List","childList"]);!function e(i){return i.map(function(i,n){i.get("childList")&&i.get("childList").size&&e(i.get("childList")),i.get("uuid")===h.get("uuid")&&(t=t.setIn(i.get("parentPlace"),h))})}((0,a.fromJS)(L.childList))}else{var I=void 0,y=void 0,C=void 0,v=void 0,S=void 0,b=t.get("addItem");l.map(function(e,t){e.get("childList")&&e.get("childList").map(function(e,i){e.get("uuid")===b.get("uuid")&&(I=t)})}),o.map(function(e){var n=t.getIn(["QcList",i.addItemType,"List","childList"]),s=t.get("addItem"),r=t.get("changeQcList");"Stock"==i.addItemType?(C="debit",m="BALANCE_GROUP_STOCK",v="stock",S=s.get("inventoryNature"),y=n.push((0,a.fromJS)({uuid:e.uuid,name:e.name,balanceGroup:m,property:v,inventoryNature:S,direction:C,add:!0,isDefinite:!0,creditBeginAmount:0,debitBeginAmount:0}))):(C=s.get("direction"),m=s.get("balanceGroup"),v=s.get("property"),S="",y=n.getIn([I,"childList"]).push((0,a.fromJS)({uuid:e.uuid,name:e.name,balanceGroup:m,property:v,inventoryNature:S,direction:C,add:!0,isDefinite:!0,creditBeginAmount:0,debitBeginAmount:0}))),u=r.push((0,a.fromJS)({uuid:e.uuid,name:e.name,amount:0,operateType:"1",balanceGroup:m,property:v,inventoryNature:S})),t=(t=t.setIn(["QcList",i.addItemType,"List","childList",I,"childList"],y)).set("changeQcList",(0,a.fromJS)(u))})}return t=t.setIn(["flags","selectItem"],(0,a.fromJS)([]))}),e)[i.type]||function(){return t})()};var a=i(9),s=c(i(202)),r=c(i(25)),o=c(i(10));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var u=(0,a.fromJS)({flags:{currentacid:"",currentasscategorylist:[],entertext:[],qcshowMessageMask:!1,qciframeload:!1,isModified:!1,property:"",inventoryNature:"",balanceShowChild:[],balanceEditShowChild:[],selectList:[],selectItem:[],curModifyBtn:"",isDefinite:"",isCheckOut:!1,curCategoryUuid:"",level:"",notClearItem:{},issuedate:"",issues:[],QcUuid:"",categoryKey:r.TREE_JOIN_STR+"0"},firstChildToggle:{AccountDisplay:"none",TaxDisplay:"none",SalaryDisplay:"none",ContactsDisplay:"none",OthersDisplay:"none",StockDisplay:"none",LongTermDisplay:"none",CIBDisplay:"none",ProjectDisplay:"none"},acbalist:[{idx:"",amount:"",beginCount:"",acfullname:"",acname:"",direction:""}],Qcdate:"2018年07月",runningShowChild:[],QcList:{Account:{status:!0,List:{name:"账户",childList:[]}},Salary:{status:!0,List:{name:"薪酬",childList:[]}},Tax:{status:!0,List:{name:"税费",childList:[]}},Contacts:{status:!0,List:{name:"往来款",childList:[]}},Stock:{status:!0,List:{name:"存货",childList:[]}},Project:{status:!0,List:{name:"项目",childList:[]}},Others:{status:!0,List:{name:"其他应收、应付",childList:[]}},LongTerm:{status:!0,List:{name:"长期资产",childList:[]}},CIB:{status:!0,List:{name:"资本、投资与借款",childList:[]}}},QcTotalNumber:{Account:"",Tax:"",Salary:"",Contacts:"",Others:"",Stock:"",LongTerm:"",CIB:""},changeQcList:[],addItem:{},qcimportresponlist:{failJsonList:[],successJsonList:[]},cantChooseList:[],qcmessage:"",showQcye:!1,showContactsModal:!1,hasSearchContent:!1,MemberList:[{code:"",name:"",uuid:""}],thingsList:[{code:"",name:"",uuid:""}],cardList:[{name:"",uuid:""}],searchList:[],contactsCategory:[{key:r.TREE_JOIN_STR+"0",label:"",childList:[]}]})}}]);