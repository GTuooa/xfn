(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{2401:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=h(n(0)),r=n(9),i=n(31),c=(n(1074),p(n(10))),u=n(123),s=n(16),f=p(n(1436)),m=(n(1061),p(n(25))),d=h(n(2402)),g=h(n(2403));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}n(2404);var y=(0,i.connect)(function(e){return e})(a=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),l(t,[{key:"componentDidMount",value:function(){c.setTitle({title:"往来明细表"}),c.setIcon({showIcon:!1}),c.setRight({show:!1}),"wlyeb"!==sessionStorage.getItem("fromPage")?"wlmxb"!==sessionStorage.getItem("ylPage")?(this.props.dispatch(f.changeMenuData("menuType","")),this.props.dispatch(f.changeMenuData("menuLeftIdx",0)),this.props.dispatch(f.changeMenuData("lbmenuLeftIdx",0)),this.props.dispatch(f.getPeriodDetailList())):sessionStorage.removeItem("ylPage"):sessionStorage.removeItem("fromPage")}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.wlmxbState.getIn(["flags","menuType"]);(0,r.is)(n,this.props.wlmxbState.getIn(["flags","menuType"]))||("LB_CATEGORY"===n||"RLB_CATEGORY"===n?c.setRight({show:!0,control:!0,text:"取消",onSuccess:function(e){return t.props.dispatch(f.changeMenuData("menuType",""))},onFail:function(e){alert(e)}}):c.setRight({show:!1}))}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.history,a=e.wlmxbState,l=(a.get("contactTypeTree"),a.get("runningCategory")),r=(a.getIn(["flags","wlRelationship"]),a.getIn(["flags","issuedate"])),i=a.get("issues"),p=(a.get("runningShowChild"),a.getIn(["flags","endissuedate"])),h=i.findIndex(function(e){return e.get("value")===r}),y=i.slice(0,h),b=a.getIn(["flags","propertyCost"]),v=a.get("detailsTemp"),w=a.get("currentPage"),E=a.get("pageCount"),C=(a.get("cardList"),a.getIn(["flags","curCardUuid"])),I=a.getIn(["flags","categoryUuid"]),_=a.getIn(["flags","categoryName"]),N=a.getIn(["flags","wlRelate"]),A=a.getIn(["flags","wlOnlyRelate"]),O=(a.getIn(["flags","wlType"]),a.getIn(["flags","isTop"])),D=a.get("contactTypeTree"),S=a.get("flags").get("typeUuid"),T=a.getIn(["flags","menuType"]),R=a.getIn(["flags","menuLeftIdx"]),x=a.getIn(["flags","lbMenuLeftIdx"]),P=a.getIn(["flags","curCardName"]),k=(a.getIn(["flags","allHappenIncomeAmount"]),a.getIn(["flags","allBalanceAmount"])),L=a.getIn(["flags","direction"]),j=a.get("QcData"),M=a.get("ylDataList"),B=({"":function(){return"全部"},1:function(){return"仅付款单位"},2:function(){return"仅收款单位"},3:function(){return"收款兼付款单位"}}[N](),null);(({LB_CATEGORY:function(){B=o.default.createElement(g.default,{data:D,leftIdx:x,leftClick:function(e){return t(f.changeMenuData("lbMenuLeftIdx",e))},onChange:function(e){var n=e[1].split(m.TREE_JOIN_STR);t(f.changeDetailAccountCommonString("",["flags","wlType"],n[1])),t(f.changeDetailAccountCommonString("",["flags","typeUuid"],n[0])),t(f.changeDetailAccountCommonString("",["flags","isTop"],n[2])),t(f.changeDetailAccountCommonString("",["flags","selectedCard"],"")),t(f.changeDetailAccountCommonString("",["flags","categoryName"],"全部")),t(f.getContactsCardList(r,p,n[2],n[0])),t(f.changeMenuData("menuType",""))}})},RLB_CATEGORY:function(){B=o.default.createElement(g.default,{data:l,leftIdx:R,leftClick:function(e){return t(f.changeMenuData("menuLeftIdx",e))},onChange:function(e){var n=e[1].split(m.TREE_JOIN_STR);t(f.getDetailList(r,p,C,n[0],n[2],1)),t(f.changeDetailAccountCommonString("",["flags","propertyCost"],n[2])),t(f.changeDetailAccountCommonString("",["flags","categoryUuid"],n[0])),t(f.changeDetailAccountCommonString("",["flags","categoryName"],n[1])),t(f.changeMenuData("menuType",""))}})}})[T]||function(){return c.setTitle({title:"往来明细表"}),null})();return B||o.default.createElement(s.Container,{className:"wlyeb"},o.default.createElement(u.TopMonthPicker,{issuedate:r,source:i,callback:function(e){t(f.getPeriodDetailList(e,"",O,S,C)),t(f.changeDetailAccountCommonString("",["flags","selectedCard"],""))},onOk:function(e){t(f.getPeriodDetailList(e.value,"",O,S,C)),t(f.changeDetailAccountCommonString("",["flags","selectedCard"],""))},showSwitch:!0,endissuedate:p,nextperiods:y,onBeginOk:function(e){t(f.getPeriodDetailList(e.value,"",O,S,C)),t(f.changeDetailAccountCommonString("",["flags","selectedCard"],""))},onEndOk:function(e){t(f.getPeriodDetailList(r,e.value,O,S,C)),t(f.changeDetailAccountCommonString("",["flags","selectedCard"],""))},changeEndToBegin:function(){t(f.getPeriodDetailList(r,"",O,S,C)),t(f.changeDetailAccountCommonString("",["flags","selectedCard"],""))}}),o.default.createElement("div",{className:"wlye-top-select"},o.default.createElement("div",{className:"wlye-with-account"},o.default.createElement(s.Row,{className:"lrls-row"},o.default.createElement(s.Row,{className:"lrls-type",onClick:function(){D.size&&t(f.changeMenuData("menuType","LB_CATEGORY"))}},o.default.createElement("span",null,P),o.default.createElement(s.Icon,{type:"triangle"})))),o.default.createElement("div",{className:"wlye-account-select"},o.default.createElement(s.Row,{className:"lrls-row"},o.default.createElement(s.Row,{className:"lrls-type",onClick:function(){l.size&&t(f.changeMenuData("menuType","RLB_CATEGORY"))}},o.default.createElement("span",null,l.size?_:"暂无类别"),o.default.createElement(s.Icon,{type:"triangle"}))))),""===I?o.default.createElement(s.Row,{className:"ba-title-single"},o.default.createElement("div",{className:"ba-title-item"},"期初 ",o.default.createElement("span",{className:"title-item-summary"},"("+j.get("direction")+"净额)")),o.default.createElement("div",{className:"ba-title-item"},o.default.createElement(s.Amount,{showZero:!0},j.get("balanceAmount")))):"",o.default.createElement(s.ScrollView,{flex:"1",uniqueKey:"wlye-scroll",className:"scroll-item",savePosition:!0},o.default.createElement("div",{className:"ba-list flow-content"},v.map(function(e,a){return o.default.createElement("div",{key:a},o.default.createElement(d.default,{className:"balance-running-tabel-width",ba:e,history:n,dispatch:t,issuedate:r,wlRelate:N,wlOnlyRelate:A,ylDataList:M}))})),o.default.createElement(u.ScrollLoad,{diff:1,classContent:"flow-content",callback:function(e){t(f.getDetailList(r,p,C,I,b,w+1,"true",!0,!0,e))},isGetAll:w>=E,itemSize:v.size})),o.default.createElement(s.Row,{className:"ba-title-single"},o.default.createElement("div",{className:"ba-title-item"},"期末",o.default.createElement("span",{className:"title-item-summary"},"("+L+"净额)")),o.default.createElement("div",{className:"ba-title-item"},o.default.createElement(s.Amount,{showZero:!0},k))))}}]),t}())||a;t.default=y},2402:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,l,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),i=(l=r)&&l.__esModule?l:{default:l},c=(n(9),n(22)),u=n(16),s=n(1067),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1293));var m=(0,c.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.ba,n=e.style,a=e.dispatch,l=e.className,o=e.leve,r=e.haveChild,c=e.showChild,m=e.history,d=(e.wlRelate,e.wlOnlyRelate,e.ylDataList),g={background:{1:"#fff",2:"#D1C0A5",3:"#7E6B5A",4:"#59493f"}[o],minWidth:(o-1)/100*10+"rem"},p=0;d.forEach(function(e,n){e.get("uuid")===t.get("uuid")&&(p=e.get("idx"))});var h=t.get("cardAbstract")?t.get("cardAbstract"):"",y=""+t.get("runningAbstract")+h;return i.default.createElement("div",{className:"ba "+l,style:n},i.default.createElement("div",null,i.default.createElement("span",{className:"name",onClick:function(e){sessionStorage.setItem("ylPage","wlmxb"),a(s.yllsActions.getYllsSingleAccount(m,0,t.get("uuid"),p,!0))}},1==o?"":i.default.createElement("span",{className:"ba-flag",style:g}),i.default.createElement("span",{className:"name-name"},t.get("runningDate")+"_"+y)),i.default.createElement("span",{className:"btn",onClick:function(){return a(f.contactsBalanceTriangleSwitch(c,t.get("uuid")))}},i.default.createElement(u.Icon,{type:"arrow-down",style:{visibility:r?"visible":"hidden",transform:c?"rotate(180deg)":""}}))),i.default.createElement("div",{className:"ba-info"},i.default.createElement("span",{className:"ba-info-items"},i.default.createElement("span",{className:"item-direction"},0!==t.get("happenIncomeAmount")?"应收":0!==t.get("happenExpenseAmount")?"应付":""),i.default.createElement(u.Amount,{showZero:!1,className:"item-amount"},0!==t.get("happenIncomeAmount")?t.get("happenIncomeAmount"):0!==t.get("happenExpenseAmount")?t.get("happenExpenseAmount"):"")),i.default.createElement("span",{className:"ba-info-items"},i.default.createElement("span",{className:"item-direction"},0!==t.get("paymentIncomeAmount")?"实收":0!==t.get("paymentExpenseAmount")?"实付":""),i.default.createElement(u.Amount,{showZero:!1,className:"item-amount"},0!==t.get("paymentIncomeAmount")?t.get("paymentIncomeAmount"):0!==t.get("paymentExpenseAmount")?t.get("paymentExpenseAmount"):"")),i.default.createElement("span",{className:"ba-info-items"},i.default.createElement(u.Amount,{showZero:!1,className:"item-amount"},t.get("balanceAmount")))))}}]),t}())||a;t.default=m},2403:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),r=(a=o)&&a.__esModule?a:{default:a},i=n(16),c=(u(n(10)),n(9));u(n(25));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=[];return n.props.data.getIn([n.props.leftIdx,"children"]).map(function(e,t){a.push(e.get("value"))}),n.state={showList:a},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),l(t,[{key:"componentWillReceiveProps",value:function(e){if(!(0,c.is)(e.leftIdx,this.props.leftIdx)){var t=[];e.data.getIn([e.leftIdx,"children"]).map(function(e,n){t.push(e.get("value"))}),this.setState({showList:t})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.onChange,l=t.leftIdx,o=t.leftClick,c=this.state.showList,u=n.getIn([l,"value"]),s=n.getIn([l,"children"]);return r.default.createElement(i.Container,{className:"zhmx-category"},r.default.createElement(i.ScrollView,{flex:"1",className:"wlye-category-menu-scroll"},r.default.createElement("div",{className:"wlye-category-menu"},r.default.createElement("div",{className:"menu-left"},n.map(function(e,t){return r.default.createElement(i.Row,{key:e.get("value"),className:"menu-left-item overElli "+(u==e.get("value")?"menu-left-item-selected":""),onClick:function(){return o(t)}},e.get("label"))})),r.default.createElement("div",{className:"menu-right"},function t(n,l){return n&&n.map(function(n,o){if(n.get("children")&&n.get("children").size){var s=c.some(function(e){return e===n.get("value")});return r.default.createElement("div",{key:n.get("value")},r.default.createElement(i.Row,{className:"menu-right-item",style:{paddingLeft:l+"rem"},onClick:function(){return a([u,n.get("value")])}},r.default.createElement("div",{className:"overElli"},n.get("label")),r.default.createElement(i.Icon,{style:s?{transform:"rotate(180deg)"}:"",type:"arrow-down",onClick:function(t){t.stopPropagation();var a=c;if(s){var l=a.findIndex(function(e){return e===n.get("value")})-1;l>-1?a=a.splice(l,1):a.shift()}else a.push(n.get("value"));e.setState({showList:a})}})),s?t(n.get("children"),l+.05):"")}return r.default.createElement(i.Row,{key:n.get("value"),className:"menu-right-item overElli",style:{paddingLeft:l+"rem"},onClick:function(){return a([u,n.get("value")])}},n.get("label"))})}(s,.1)))))}}]),t}();t.default=s},2404:function(e,t,n){},997:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=r(n(2401)),l=r(n(1599)),o=r(n(1067));function r(e){return e&&e.__esModule?e:{default:e}}var i={wlmxbState:l.default,yllsState:o.default};t.reducer=i,t.view=a.default}}]);