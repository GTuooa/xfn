(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1066:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.runningPreviewActions=e.ActionTypes=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,n=arguments[1];return((t={},l(t,S.GET_RUNNING_PREVIEW_BUSINESS_FETCH,function(){return e=e.set("jrOri",(0,o.fromJS)(n.receivedData.jrOri)).set("category",(0,o.fromJS)(n.receivedData.category)).set("processInfo",n.receivedData.processInfo?(0,o.fromJS)(n.receivedData.processInfo):null).set("currentItem",n.currentItem).setIn(["views","fromPage"],n.fromPage).setIn(["views","uuidList"],n.uuidList)}),l(t,S.GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH,function(){return e=e.set("jrOri",(0,o.fromJS)(n.receivedData.jrOri)).set("category",(0,o.fromJS)(n.receivedData.category)).set("processInfo",n.receivedData.processInfo?(0,o.fromJS)(n.receivedData.processInfo):null).set("lsItemData",(0,o.fromJS)(r({},n.receivedData.category,n.receivedData.jrOri)))}),l(t,S.PREVIEW_RUNNING_DATA,function(){return e=e.setIn(["views","uuidList"],(0,o.fromJS)(n.data))}),t)[n.type]||function(){return e})()};var a,o=n(9),i=n(124),s=(a=i)&&a.__esModule?a:{default:a},u=f(n(25)),c=n(13),d=f(n(10));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=(0,o.fromJS)({views:{fromPage:"",uuidList:[]},currentItem:{},jrOri:{},category:{},processInfo:null});var _={getRunningPreviewBusinessFetch:function(t,e,n,r,a){return function(o){t&&(d.toast.loading("加载中...",0),(0,s.default)("getRunningPreview","GET","oriUuid="+t,function(t){d.toast.hide(),(0,c.showMessage)(t)&&(o({type:S.GET_RUNNING_PREVIEW_BUSINESS_FETCH,receivedData:t.data,currentItem:e,uuidList:n,fromPage:r}),a.push("/runningpreview"))}))}},getPreviewNextRunningBusinessFetch:function(t,e){return function(e){t&&(d.toast.loading("加载中...",0),(0,s.default)("getRunningPreview","GET","oriUuid="+t,function(t){d.toast.hide(),(0,c.showMessage)(t)&&e({type:S.GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH,receivedData:t.data})}))}},insertRunningBusinessVc:function(t,e,n){return function(r,a){d.toast.loading(u.LOADING_TIP_TEXT,0),(0,s.default)("insertRunningBusinessVc","POST",JSON.stringify({uuidList:[t],vcindexlist:[n],year:e.slice(0,4),month:e.slice(5,7),action:"QUERY_JR-AUDIT"}),function(e){if(d.toast.hide(),(0,c.showMessage)(e)){if(e.data.result.length){var n=e.data.result.reduce(function(t,e){return t+","+e});return void d.Alert(n)}r(_.getPreviewNextRunningBusinessFetch(t))}})}},deleteRunningBusinessVc:function(t,e,n,r){return function(a,o){d.toast.loading(u.LOADING_TIP_TEXT,0),(0,s.default)("deletevc","POST",JSON.stringify({year:t,month:e,vcindexlist:n,action:"QUERY_JR-CANCEL_AUDIT"}),function(t){d.toast.hide(),(0,c.showMessage)(t)&&a(_.getPreviewNextRunningBusinessFetch(r))})}},deleteRunning:function(t,e,n){return function(r){d.Confirm({message:"确定删除吗",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(a){if(1===a.buttonIndex){var o=e.findIndex(function(e){return e.get("oriUuid")===t}),i=o+1;d.toast.loading(u.LOADING_TIP_TEXT,0),(0,s.default)("deleteRunningbusiness","POST",JSON.stringify({deleteList:[t]}),function(t){if((0,c.showMessage)(t)){if(t.data.errorList.length){var a=t.data.errorList.reduce(function(t,e){return t+","+e});d.Alert(a)}if(0==t.data.errorList.length){var s=e.delete(o);r({type:S.PREVIEW_RUNNING_DATA,data:s}),i<e.size?r(_.getPreviewNextRunningBusinessFetch(e.getIn([i,"oriUuid"]))):n.goBack()}}})}},onFail:function(t){return alert(t)}})}}},S=e.ActionTypes={GET_RUNNING_PREVIEW_BUSINESS_FETCH:"GET_RUNNING_PREVIEW_BUSINESS_FETCH",GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH:"GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH",PREVIEW_RUNNING_DATA:"PREVIEW_RUNNING_DATA"};e.runningPreviewActions=_},1072:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cancelReviewedJvlist=e.reviewedJvlist=e.changeData=e.setFjglData=e.pushVouhcerToLrpzReducer=e.reverseVcList=e.sortAndChangeVcId=e.cancelChangeVcCheckBoxDisplay=e.changeVcCheckBoxDisplay=e.selectVcAll=e.selectVc=e.pagingVc=e.deleteVcFetch=e.getSortVcFetch=e.getVcListFetch=e.getPeriodAndVcListFetch=void 0;var r,a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(13),i=n(24),s=(r=i)&&r.__esModule?r:{default:r},u=l(n(181)),c=l(n(1077)),d=l(n(10)),f=l(n(25));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}e.getPeriodAndVcListFetch=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){d.toast.loading(f.LOADING_TIP_TEXT,0),(0,s.default)("pagindvc","POST",JSON.stringify({year:t?t.substr(0,4):"",month:t?t.substr(5,2):"",pageSize:20,currentPage:e+1,getPeriod:"true"}),function(r){if((0,o.showMessage)(r)){d.toast.hide();var a=n(u.everyTableGetPeriod(r)),i=t||a;r.data.jsonArray;n({type:c.AFTER_PAGING_VC,receivedData:r,issuedate:i,currentPage:e})}})}},e.getVcListFetch=function(t){return function(e){var n=t.substring(0,7);d.toast.loading(f.LOADING_TIP_TEXT,0),(0,s.default)("getvclist","POST",JSON.stringify((0,o.jsonifyDate)(t)),function(t){(0,o.showMessage)(t)&&(d.toast.hide(),e({type:c.GET_VC_LIST_FETCH,receivedData:t,issuedate:n}))})}},e.getSortVcFetch=function(t,e){return function(n){0!=e&&(d.toast.loading(f.LOADING_TIP_TEXT,0),(0,s.default)("sortvc","POST",JSON.stringify({year:t.substr(0,4),month:t.substr(5,2),sort:e}),function(e){(0,o.showMessage)(e,"show",800)&&n(g(t))}))}},e.deleteVcFetch=function(t){return function(e,n){var r=t.get("vclist").filter(function(t){return t.get("selected")}).some(function(t){return t.get("enclosurecount")})?"凭证下存在附件,附件也将被删除":"确定删除吗";d.Confirm({message:r,title:"提示",buttonLabels:["取消","确定"],onSuccess:function(n){if(1===n.buttonIndex){var r=t.get("vclist"),a=t.get("vclist").filter(function(t){return t.get("selected")}).map(function(t){return t.get("vcindex")}),i=r.size===a.size;d.toast.loading(f.LOADING_TIP_TEXT,0),(0,s.default)("deletevc","POST",JSON.stringify({year:t.getIn(["vclist",0,"year"]),month:t.getIn(["vclist",0,"month"]),vcindexlist:a,action:"QUERY_VC-DELETE_VC-BATCH_DELETE"}),function(n){if((0,o.showMessage)(n)){if(e({type:c.DELETE_VC_FETCH,receivedData:n}),(0,s.default)("getperiod","GET","",function(t){(0,o.showMessage)(t)&&(d.toast.hide(),e({type:c.GET_PERIOD_FETCH,receivedData:t}))}),i){var r=t.getIn(["vclist",0,"year"])+"-"+t.getIn(["vclist",0,"month"]);e(g(r))}e(_())}})}},onFail:function(t){return alert(t)}})}};var g=e.pagingVc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments[3];return function(i,u){var l=(0,o.jsonifyDate)(t),g=t.substring(0,7),_=u().cxpzState,S=_.get("searchContentType"),T=_.get("condition");!n&&d.toast.loading(f.LOADING_TIP_TEXT,0),(0,s.default)("pagindvc","POST",JSON.stringify(a({},l,{pageSize:20,currentPage:e+1,searchContentType:S,condition:T})),function(t){!n&&d.toast.hide(),(0,o.showMessage)(t)&&(n&&r.setState({isLoading:!1}),i({type:c.AFTER_PAGING_VC,receivedData:t,issuedate:g,currentPage:e}))})}},_=(e.selectVc=function(t){return{type:c.SELECT_VC,idx:t}},e.selectVcAll=function(){return{type:c.SELECT_VC_ALL}},e.changeVcCheckBoxDisplay=function(t){return{type:c.CHANGE_ALL_VC_CHECKBOX_DISPLAY,idx:t}},e.cancelChangeVcCheckBoxDisplay=function(){return{type:c.CANCEL_CHANGE_VC_CHECKBOX_DISPALY}});e.sortAndChangeVcId=function(){return{type:c.SORT_AND_CHANGE_VC_ID}},e.reverseVcList=function(){return{type:c.REVERSE_VC_LIST}},e.pushVouhcerToLrpzReducer=function(t){return{type:c.PUSH_VOUCHER_TO_LRPZ_REDUCER,voucher:t}},e.setFjglData=function(){return function(t,e){var n=e().cxpzState.get("issuedate");t({type:c.CHANGE_FJGL_ISSUEDATE,issuedate:n})}},e.changeData=function(t,e){return{type:c.CXPZ_CHANGE_DATA,dataType:t,value:e}},e.reviewedJvlist=function(t){return function(e,n){var r=n().cxpzState.get("vclist"),a=t.split("-"),i=[];r.forEach(function(t){t.get("selected")&&!t.get("reviewedby")&&i.push(t.get("vcindex"))}),d.toast.loading(f.LOADING_TIP_TEXT,0),(0,s.default)("reviewvc","POST",JSON.stringify({year:a[0],month:a[1],vcindexlist:i,action:"QUERY_VC-AUDIT"}),function(n){(0,o.showMessage)(n)&&(d.toast.hide(),0==n.data.success&&d.Alert(n.data.failList.join("、")),e(g(t)))})}},e.cancelReviewedJvlist=function(t){return function(e,n){var r=n().cxpzState.get("vclist"),a=t.split("-"),i=[];r.forEach(function(t){t.get("selected")&&t.get("reviewedby")&&i.push(t.get("vcindex"))}),d.toast.loading("加载中...",0),(0,s.default)("backreviewvc","POST",JSON.stringify({year:a[0],month:a[1],vcindexlist:i,action:"QUERY_VC-CANCEL_AUDIT"}),function(n){(0,o.showMessage)(n)&&(d.toast.hide(),0==n.data.success&&d.Alert(n.data.failList.join("、")),e(g(t)))})}}},1077:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.INIT_CXPZ="INIT_CXPZ",e.GET_VC_LIST_FETCH="GET_VC_LIST_FETCH",e.DELETE_VC_FETCH="DELETE_VC_FETCH",e.CHANGE_ALL_VC_CHECKBOX_DISPLAY="CHANGE_ALL_VC_CHECKBOX_DISPLAY",e.CANCEL_CHANGE_VC_CHECKBOX_DISPALY="CANCEL_CHANGE_VC_CHECKBOX_DISPALY",e.SELECT_VC_ALL="SELECT_VC_ALL",e.SELECT_VC="SELECT_VC",e.REVERSE_VC_LIST="REVERSE_VC_LIST",e.AFTER_PAGING_VC="AFTER_PAGING_VC",e.CXPZ_CHANGE_DATA="CXPZ_CHANGE_DATA",e.PUSH_VOUCHER_TO_LRPZ_REDUCER="PUSH_VOUCHER_TO_LRPZ_REDUCER",e.GET_PERIOD_FETCH="GET_PERIOD_FETCH",e.CHANGE_FJGL_ISSUEDATE="CHANGE_FJGL_ISSUEDATE"},1215:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteRunningBusinessVc=e.insertRunningBusinessVc=e.getPoundageProjectList=e.getPoundageCurrentList=e.getPoundageCategory=e.getCardList=e.getVcFetch=e.initCxls=e.saveZsfkx=e.saveDefray=e.saveXczc=e.saveSfgl=e.saveJzsy=e.getProjectCardList=e.saveFprz=e.saveKjfp=e.getCxlsSingle=e.selectLs=e.selectLsAll=e.deleteLs=e.recapture=e.changeCxlsData=e.getBusinessList=e.getPeriodAndBusinessList=void 0;var r=T(n(1219)),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=S(n(1486)),i=T(n(124)),s=T(n(24)),u=n(13),c=S(n(10)),d=S(n(25)),f=n(9),l=n(1072),g=n(184),_=S(n(181));function S(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}function E(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(a,o){try{var i=e[a](o),s=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}("next")})}}function I(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.getPeriodAndBusinessList=function(){return function(t){c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("getRunningBusinessList","POST",JSON.stringify({isAccount:!1,accountUuid:"",currentPage:1,getPeriod:"true",start:"",end:"",pageSize:20}),function(e){if(c.toast.hide(),(0,u.showMessage)(e)){var n=t(_.reportGetIssuedateAndFreshPeriod(e)),r=e.data.periodDtoJson?t(_.everyTableGetIssuedate(e.data.periodDtoJson)):[];t({type:o.SEARCHRUNNING_GETPERIOD_AND_BUSINESSLIST,receivedData:e.data,issues:r,issuedate:n})}})}};var N=e.getBusinessList=function(t,e,n){return function(r,a){var s,f=a().searchRunningState.get("views"),l=f.get("start"),g=f.get("end")?f.get("end"):l,_=f.get("cardObj"),S=_.get("cardType"),T=_.get("searchContent"),E=_.get("isSearch"),N=!1;"ACCOUNT"==S&&(N=!0);var h={ALL:"noCard",ACCOUNT:"accountUuid",PROJECT:"projectCardUuid",STOCK:"stockCardUuid",CURRENT:"currentCardUuid",SEARCH_TYPE_ABSTRACT:"searchType",SEARCH_TYPE_RUNNING_TYPE:"searchType",SEARCH_TYPE_AMOUNT:"searchType",SEARCH_TYPE_CREATE_NAME:"searchType",SEARCH_TYPE_CATEGORY_TYPE:"searchType"}[S];!e&&c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("getRunningBusinessList","POST",JSON.stringify((I(s={currentPage:t,getPeriod:"false",start:l,pageSize:20,end:g},h,"SEARCH_TYPE_AMOUNT"==_.get("cardUuid")&&""==T?"":_.get("cardUuid")),I(s,"isAccount",N),I(s,"searchContent",E?T:""),s)),function(a){!e&&c.toast.hide(),(0,u.showMessage)(a)&&(e&&n.setState({isLoading:!1}),r({type:o.SEARCHRUNNING_GET_BUSINESSLIST,receivedData:a.data,currentPage:t,shouldConcat:e}))})}},h=e.changeCxlsData=function(t,e){return{type:o.CHANGE_SEARCHRUNNING_DATA,dataType:t,value:e}},C=e.recapture=function(t){return function(e){switch(t){case"CXLS":e(N(1,!1));break;default:console.log("重新获取数据失败")}}};e.deleteLs=function(t,e){return function(n){c.Confirm({message:"确定删除吗",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(r){if(1===r.buttonIndex){var a=t.filter(function(t){return t.get("selected")}).map(function(t){return t.get("oriUuid")});c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("deleteRunningbusiness","POST",JSON.stringify({deleteList:a}),function(t){if((0,u.showMessage)(t)){if(t.data.errorList.length){var r=t.data.errorList.reduce(function(t,e){return t+","+e});c.Alert(r)}n(C(e))}})}},onFail:function(t){return alert(t)}})}},e.selectLsAll=function(t,e){return{type:o.SEARCHRUNNING_SELECT_LS_ALL,selectedIndex:t,value:e}},e.selectLs=function(t,e){return{type:o.SEARCHRUNNING_SELECT_LS,selectedIndex:t,idx:e}},e.getCxlsSingle=function(t,e,n,r,a,s,f){return function(l){c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("getRunningBusiness","GET","oriUuid="+e,function(e){c.toast.hide(),(0,u.showMessage)(e)&&(l({type:o.GET_SEARCHRUNNING_SINGLE,receivedData:e.data,toRouter:r,direction:a,jrJvUuid:n,fromPage:s,actionFrom:f}),t.push("/searchrunning/"+r.toLowerCase()))})}},e.saveKjfp=function(t){return function(e,n){var r=n().searchRunningState.get("data").toJS(),o=n().allState.get("hideCategoryList"),s="",f=!0,l=!1,g=void 0;try{for(var _,S=o[Symbol.iterator]();!(f=(_=S.next()).done);f=!0){var T=_.value;if("LB_KJFP"==T.get("categoryType")){s=T.get("uuid");break}}}catch(t){l=!0,g=t}finally{try{!f&&S.return&&S.return()}finally{if(l)throw g}}return r.categoryUuid=s,""==r.oriAbstract?c.toast.info("请填写摘要"):r.oriAbstract.length>d.RUNNING_ABSTRACT_LENGTH?c.toast.info("摘要长度不能超过"+d.RUNNING_ABSTRACT_LENGTH+"个字符"):0==Math.abs(r.amount)?c.toast.info("请填写金额"):("STATE_KJFP_TS"==r.oriState&&(r.amount=-Math.abs(r.amount)),A(r.oriDate,r.pendingStrongList[0].oriDate)?c.toast.info("日期必须大于或等于待处理流水日期"):Math.abs(r.amount)>r.jrAmount?c.toast.info("开票税额不能大于待开票税额"):(c.toast.loading(d.LOADING_TIP_TEXT,0),void(0,i.default)("insertBusinessMakeoutItem","POST",JSON.stringify(a({},r,{enclosureList:n().enclosureState.get("enclosureList").toJS()})),function(e){c.toast.hide(),(0,u.showMessage)(e)&&t.goBack()})))}},e.saveFprz=function(t){return function(e,n){var r=n().searchRunningState.get("data").toJS(),o=n().allState.get("hideCategoryList"),s="",f=!0,l=!1,g=void 0;try{for(var _,S=o[Symbol.iterator]();!(f=(_=S.next()).done);f=!0){var T=_.value;if("LB_FPRZ"==T.get("categoryType")){s=T.get("uuid");break}}}catch(t){l=!0,g=t}finally{try{!f&&S.return&&S.return()}finally{if(l)throw g}}return r.categoryUuid=s,""==r.oriAbstract?c.toast.info("请填写摘要"):r.oriAbstract.length>d.RUNNING_ABSTRACT_LENGTH?c.toast.info("摘要长度不能超过"+d.RUNNING_ABSTRACT_LENGTH+"个字符"):0==Math.abs(r.amount)?c.toast.info("请填写金额"):("STATE_FPRZ_TG"==r.oriState&&(r.amount=-Math.abs(r.amount)),A(r.oriDate,r.pendingStrongList[0].oriDate)?c.toast.info("日期必须大于或等于待处理流水日期"):(c.toast.loading(d.LOADING_TIP_TEXT,0),void(0,i.default)("insertBusinessAuthItem","POST",JSON.stringify(a({},r,{enclosureList:n().enclosureState.get("enclosureList").toJS(),action:"QUERY_JR-QUICK_OPERATION-INVOICE"})),function(e){c.toast.hide(),(0,u.showMessage)(e)&&t.goBack()})))}},e.getProjectCardList=function(t){return function(e,n){var r=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("getProjectCardList","POST",JSON.stringify({sobId:r,categoryList:t,needCommonCard:!1}),function(t){c.toast.hide(),(0,u.showMessage)(t)&&e({type:o.SEARCHRUNNING_GET_PROJECT_CARDLIST,receivedData:t.data.result})})}},e.saveJzsy=function(t){return function(e,n){var r=n().searchRunningState.get("data").toJS(),o=r.usedProject,s=r.projectCardList;if(o){if(!s.every(function(t){return t.cardUuid}))return c.toast.info("有未选择的项目卡片")}else delete r.projectCardList;if(""==r.oriAbstract)return c.toast.info("请填写摘要");if(r.oriAbstract.length>d.RUNNING_ABSTRACT_LENGTH)return c.toast.info("摘要长度不能超过"+d.RUNNING_ABSTRACT_LENGTH+"个字符");var f=r.assets.originalAssetsAmount,l=r.assets.depreciationAmount;return f<=0?c.toast.info("请填写资产原值"):Number(l)>Number(f)?c.toast.info("折旧额不能大于原值"):A(r.oriDate,r.pendingStrongList[0].oriDate)?c.toast.info("日期必须大于或等于待处理流水日期"):(c.toast.loading(d.LOADING_TIP_TEXT,0),void(0,i.default)("insertJzsy","POST",JSON.stringify(a({},r,{enclosureList:n().enclosureState.get("enclosureList").toJS(),action:"QUERY_JR-QUICK_OPERATION-DISPOSAL_PROFIT_LOSS"})),function(e){c.toast.hide(),(0,u.showMessage)(e)&&t.goBack()}))}},e.saveSfgl=function(t){return function(e,n){var r=n().searchRunningState,o=(r.getIn(["views","fromPage"]),r.getIn(["views","fromPageType"])),s=r.get("data").toJS(),f=s.amount,l=s.notHandleAmount;if(""==s.accounts[0].accountUuid)return c.toast.info("请选择账户");if(""==s.oriAbstract)return c.toast.info("请填写摘要");if(s.oriAbstract.length>d.RUNNING_ABSTRACT_LENGTH)return c.toast.info("摘要长度不能超过"+d.RUNNING_ABSTRACT_LENGTH+"个字符");if(f<=0)return c.toast.info("请填写金额");if(f>l)return c.toast.info("收付款金额大于实际发生金额");if(A(s.oriDate,s.pendingManageDto.oriDate))return c.toast.info("日期必须大于或等于待处理流水日期");var g=!1,_=[],S=[];s.amountTitle.includes("收款")&&(r.getIn(["data","accounts"]).some(function(t){return t.getIn(["poundage","needPoundage"])})&&s.needUsedPoundage&&(g=!0,_=s.poundageCurrentCardList,S=s.poundageProjectCardList));s.needUsedPoundage=g,s.poundageCurrentCardList=_,s.poundageProjectCardList=S,c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("insertRunningpayment","POST",JSON.stringify(a({},s,{action:o,enclosureList:n().enclosureState.get("enclosureList").toJS()})),function(e){c.toast.hide(),(0,u.showMessage)(e)&&(c.toast.success("保存成功",2),t.goBack())})}},e.saveXczc=function(t){return function(e,n){var r=n().searchRunningState,o=r.get("data").toJS(),s=o.amount,f=o.notHandleAmount;if(""==o.accounts[0].accountUuid)return c.toast.info("请选择账户");if(""==o.oriAbstract)return c.toast.info("请填写摘要");if(o.oriAbstract.length>d.RUNNING_ABSTRACT_LENGTH)return c.toast.info("摘要长度不能超过"+d.RUNNING_ABSTRACT_LENGTH+"个字符");if(s<=0)return c.toast.info("请填写金额");if(s>Math.abs(f))return c.toast.info("金额大于实际发生金额");if(A(o.oriDate,o.pendingStrongList[0].oriDate))return c.toast.info("日期必须大于或等于待处理流水日期");var l=!1,g=[],_=[];f<0&&(r.getIn(["data","accounts"]).some(function(t){return t.getIn(["poundage","needPoundage"])})&&o.needUsedPoundage&&(l=!0,g=o.poundageCurrentCardList,_=o.poundageProjectCardList));o.needUsedPoundage=l,o.poundageCurrentCardList=g,o.poundageProjectCardList=_,c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("insertPayment","POST",JSON.stringify(a({},o,{enclosureList:n().enclosureState.get("enclosureList").toJS()})),function(e){c.toast.hide(),(0,u.showMessage)(e)&&(c.toast.success("保存成功",2),t.goBack())})}},e.saveDefray=function(t){return function(e,n){var r=n().searchRunningState,o=r.get("data").toJS(),s=o.oriState,f=Math.abs(o.notHandleAmount);if(""==o.accounts[0].accountUuid)return c.toast.info("请选择账户");if(""==o.oriAbstract)return c.toast.info("请填写摘要");if(o.oriAbstract.length>d.RUNNING_ABSTRACT_LENGTH)return c.toast.info("摘要长度不能超过"+d.RUNNING_ABSTRACT_LENGTH+"个字符");if("STATE_SF_JN"==s&&o.amount<=0)return c.toast.info("请填写金额");if("STATE_SF_JN"==s&&o.amount>f)return c.toast.info("付款金额大于实际发生金额");if("STATE_XC_JN"==s&&o.payment.actualAmount<=0)return c.toast.info("请填写金额");if("STATE_XC_JN"==s&&o.payment.actualAmount>f)return c.toast.info("金额大于实际发生金额");if(A(o.oriDate,o.pendingStrongList[0].oriDate))return c.toast.info("日期必须大于或等于待处理流水日期");var l=!1,g=[],_=[];o.notHandleAmount<0&&(r.getIn(["data","accounts"]).some(function(t){return t.getIn(["poundage","needPoundage"])})&&o.needUsedPoundage&&(l=!0,g=o.poundageCurrentCardList,_=o.poundageProjectCardList));o.needUsedPoundage=l,o.poundageCurrentCardList=g,o.poundageProjectCardList=_,c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("STATE_XC_JN"==s?"insertPayment":"insertTax","POST",JSON.stringify(a({},o,{enclosureList:n().enclosureState.get("enclosureList").toJS()})),function(e){c.toast.hide(),(0,u.showMessage)(e)&&(c.toast.success("保存成功",2),t.goBack())})}},e.saveZsfkx=function(t){return function(e,n){var r=n().searchRunningState,o=r.get("data").toJS(),s=o.oriState,f=o.notHandleAmount;if(""==o.accounts[0].accountUuid)return c.toast.info("请选择账户");if(""==o.oriAbstract)return c.toast.info("请填写摘要");if(o.oriAbstract.length>d.RUNNING_ABSTRACT_LENGTH)return c.toast.info("摘要长度不能超过"+d.RUNNING_ABSTRACT_LENGTH+"个字符");if(o.amount<=0)return c.toast.info("请填写金额");if(o.amount>f)return c.toast.info("收付款金额大于实际发生金额");if(A(o.oriDate,o.pendingStrongList[0].oriDate))return c.toast.info("日期必须大于或等于待处理流水日期");var l=!1,g=[],_=[];"STATE_ZS_TH"!=s&&(r.getIn(["data","accounts"]).some(function(t){return t.getIn(["poundage","needPoundage"])})&&o.needUsedPoundage&&(l=!0,g=o.poundageCurrentCardList,_=o.poundageProjectCardList));o.needUsedPoundage=l,o.poundageCurrentCardList=g,o.poundageProjectCardList=_,c.toast.loading(d.LOADING_TIP_TEXT,0),(0,i.default)("STATE_ZS_TH"==s?"insertTemporaryReceipt":"insertTemporaryPay","POST",JSON.stringify(a({},o,{enclosureList:n().enclosureState.get("enclosureList").toJS()})),function(e){c.toast.hide(),(0,u.showMessage)(e)&&(c.toast.success("保存成功",2),t.goBack())})}},e.initCxls=function(){return{type:o.INIT_SEARCH_RUNNING}},e.getVcFetch=function(t,e){return function(n){c.toast.loading(d.LOADING_TIP_TEXT,0),(0,s.default)("getvc","POST",JSON.stringify({vcindex:t.get("vcIndex"),year:t.get("year"),month:t.get("month")}),function(t){c.toast.hide(),(0,u.showMessage)(t)&&(e.push("/lrpz"),n((0,l.pushVouhcerToLrpzReducer)(t.data)),sessionStorage.setItem("from-cxls",!0),n((0,g.setCkpzIsShow)(!0)))})}};function A(t,e){var n=!1;return Date.parse(t)<Date.parse(e)&&(n=!0),n}e.getCardList=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(e,n){var r=n().searchRunningState.get("views"),a=r.get("start"),s=r.get("end")?r.get("end"):a,c=r.get("cardObj"),d=c.get("cardType"),l=c.get("cardUuid");(0,i.default)("searchRunningCard","GET","cardType="+{PROJECT:"CARD4THING",STOCK:"CARD4STUFF",CURRENT:"CARD4PERSON",ACCOUNT:"CARD4ACCOUNT"}[d]+"&start="+a+"&end="+s,function(n){(0,u.showMessage)(n,"","","",!0)&&(e({type:o.GET_SEARCHRUNNING_CARD,receivedData:n.data,cardType:{PROJECT:"projectCardList",STOCK:"stockCardList",CURRENT:"currentCardList",ACCOUNT:"accounCardtList"}[d]}),t&&l&&(n.data.map(function(t){return t.cardUuid}).includes(l)||(e(h(["views","cardObj"],(0,f.fromJS)({cardType:d,cardUuid:"",name:"全部"}))),e(N(1,!1)))))})}},e.getPoundageCategory=function(t,e,n){return function(r){(0,i.default)("getRunningDetail","GET","uuid="+t,function(t){if((0,u.showMessage)(t)){var a=t.data.result;e&&a.acCost.contactsManagement&&r(v(a.acCost.contactsRange)),n&&a.beProject&&r(p(a.projectRange))}})}};var v=e.getPoundageCurrentList=function(t){return function(e,n){var r=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,i.default)("getCurrentCardList","POST",JSON.stringify({sobId:r,property:"NEEDPAY",categoryList:t}),function(t){(0,u.showMessage)(t)&&e({type:o.SEARCHRUNNING_GET_CARDLIST,receivedData:t.data.result,cardType:"poundageCurrent"})})}},p=e.getPoundageProjectList=function(t){return function(e,n){var r=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,i.default)("getProjectCardList","POST",JSON.stringify({sobId:r,categoryList:t,needCommonCard:!0,needAssist:!0,needMake:!0,needIndirect:!0,needMechanical:!0}),function(t){c.toast.hide(),(0,u.showMessage)(t)&&e({type:o.SEARCHRUNNING_GET_CARDLIST,receivedData:t.data.result,cardType:"poundageProject"})})}};e.insertRunningBusinessVc=function(){return function(t,e){var n,a=(n=E(r.default.mark(function e(){var n,a,f=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c.toast.loading(d.LOADING_TIP_TEXT,0),n=r.default.mark(function t(e){var n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=o[e],t.next=3,new Promise(function(t){(0,i.default)("insertRunningBusinessVc","POST",JSON.stringify({uuidList:[n.oriUuid],vcindexlist:[n.jrIndex],year:n.oriDate.slice(0,4),month:n.oriDate.slice(5,7),action:"QUERY_JR-AUDIT"}),function(e){if(t(),(0,u.showMessage)(e,"","","",!0)&&e.data.result.length){var n=e.data.result.reduce(function(t,e){return t+","+e});s.push(n)}})});case 3:case"end":return t.stop()}},t,f)}),a=0;case 3:if(!(a<o.length)){e.next=8;break}return e.delegateYield(n(a),"t0",5);case 5:a++,e.next=3;break;case 8:c.toast.hide(),s.length&&c.Alert(s.join("、")),t(N(1,!1));case 11:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)}),o=e().searchRunningState.get("dataList").toJS().filter(function(t){return t.selected&&!t.beCertificate}),s=[];a()}},e.deleteRunningBusinessVc=function(){return function(t,e){var n,a=(n=E(r.default.mark(function e(){var n,a,u=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c.toast.loading(d.LOADING_TIP_TEXT,0),n=r.default.mark(function t(e){var n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=o[e].vcList[0],t.next=3,new Promise(function(t){(0,i.default)("deletevc","POST",JSON.stringify({year:n.year,month:n.month,vcindexlist:[n.vcIndex],action:"QUERY_JR-CANCEL_AUDIT"}),function(e){t(),15008==e.code&&(s=e.message)})});case 3:case"end":return t.stop()}},t,u)}),a=0;case 3:if(!(a<o.length)){e.next=8;break}return e.delegateYield(n(a),"t0",5);case 5:a++,e.next=3;break;case 8:c.toast.hide(),s&&c.Alert(s),t(N(1,!1));case 11:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)}),o=e().searchRunningState.get("dataList").toJS().filter(function(t){return t.selected&&t.beCertificate}),s="";a()}}},1219:function(t,e,n){t.exports=n(1257)},1257:function(t,e,n){var r=function(){return this}()||Function("return this")(),a=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=a&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(1258),a)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},1258:function(t,e){!function(e){"use strict";var n,r=Object.prototype,a=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"==typeof t,d=e.regeneratorRuntime;if(d)c&&(t.exports=d);else{(d=e.regeneratorRuntime=c?t.exports:{}).wrap=h;var f="suspendedStart",l="suspendedYield",g="executing",_="completed",S={},T={};T[i]=function(){return this};var E=Object.getPrototypeOf,I=E&&E(E(G([])));I&&I!==r&&a.call(I,i)&&(T=I);var N=p.prototype=A.prototype=Object.create(T);v.prototype=N.constructor=p,p.constructor=v,p[u]=v.displayName="GeneratorFunction",d.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},d.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(N),t},d.awrap=function(t){return{__await:t}},L(R.prototype),R.prototype[s]=function(){return this},d.AsyncIterator=R,d.async=function(t,e,n,r){var a=new R(h(t,e,n,r));return d.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},L(N),N[u]="Generator",N[i]=function(){return this},N.toString=function(){return"[object Generator]"},d.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},d.values=G,U.prototype={constructor:U,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,a){return s.type="throw",s.arg=t,e.next=r,a&&(e.method="next",e.arg=n),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,S):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),S},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),S}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:G(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),S}}}function h(t,e,n,r){var a=e&&e.prototype instanceof A?e:A,o=Object.create(a.prototype),i=new U(r||[]);return o._invoke=function(t,e,n){var r=f;return function(a,o){if(r===g)throw new Error("Generator is already running");if(r===_){if("throw"===a)throw o;return O()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=y(i,n);if(s){if(s===S)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=g;var u=C(t,e,n);if("normal"===u.type){if(r=n.done?_:l,u.arg===S)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=_,n.method="throw",n.arg=u.arg)}}}(t,n,i),o}function C(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function A(){}function v(){}function p(){}function L(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function R(t){var e;this._invoke=function(n,r){function o(){return new Promise(function(e,o){!function e(n,r,o,i){var s=C(t[n],t,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&a.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,i)},function(t){e("throw",t,o,i)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},i)}i(s.arg)}(n,r,e,o)})}return e=e?e.then(o,o):o()}}function y(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,y(t,e),"throw"===e.method))return S;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var a=C(r,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,S;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,S):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,S)}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function U(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function G(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(a.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},1399:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,n=arguments[1];return((t={},c(t,a.INIT_SEARCH_RUNNING,function(){return d}),c(t,a.SEARCHRUNNING_GETPERIOD_AND_BUSINESSLIST,function(){var t=n.issuedate;return e.setIn(["views","start"],t).setIn(["views","issues"],(0,r.fromJS)(n.issues)).setIn(["views","pageCount"],n.receivedData.result.pageCount).set("dataList",(0,r.fromJS)(n.receivedData.result.jrList))}),c(t,a.CHANGE_SEARCHRUNNING_DATA,function(){return e.setIn(n.dataType,n.value)}),c(t,a.SEARCHRUNNING_GET_BUSINESSLIST,function(){if(n.shouldConcat){var t=e.get("dataList").toJS(),a=t.concat(n.receivedData.result.jrList);e=e.set("dataList",(0,r.fromJS)(a))}else e=e.set("dataList",(0,r.fromJS)(n.receivedData.result.jrList));return e.setIn(["views","currentPage"],n.currentPage).setIn(["views","pageCount"],n.receivedData.result.pageCount)}),c(t,a.SEARCHRUNNING_SELECT_LS_ALL,function(){switch(n.selectedIndex){case"CXLS":e=e.update("dataList",function(t){return t.map(function(t){return t.set("selected",n.value)})});break;case"CX_HSGL":e=e.updateIn(["hsgl","dataList"],function(t){return t.map(function(t){return t.set("selected",n.value)})})}return e}),c(t,a.SEARCHRUNNING_SELECT_LS,function(){return e.updateIn(["dataList",n.idx,"selected"],function(t){return!t})}),c(t,a.GET_SEARCHRUNNING_SINGLE,function(){var t=n.receivedData.category.categoryType,a=(i.categoryTypeObj[t],n.receivedData.jrOri),o=n.receivedData.category,u=new s.DateLib(new Date).valueOf();switch(e=e.set("data",(0,r.fromJS)({})),n.toRouter){case"SFGL":var c=a.notHandleAmount,d="";if(c<0)d="debit"==n.direction?"credit":"debit";else{var f=a.oriState;d="credit"!=n.direction||["STATE_YYZC_DJ","STATE_FY_DJ","STATE_YYZC_TG","STATE_SF_YJZZS"].includes(f)?"debit":"credit"}var l="",g=n.fromPage,_=n.actionFrom,S="QUERY_JR";"searchApproval"===g&&(S="QUERY_PROCESS"),"debit"===d?l="shouldReturn"===_?S+"-QUICK_OPERATION-PAYMENT_REFUND":S+"-QUICK_OPERATION-COLLECTION":"credit"===d&&(l="shouldReturn"===_?S+"-QUICK_OPERATION-INCOME_REFUND":S+"-QUICK_OPERATION-PAYMENT"),e=e.setIn(["data","amount"],Math.abs(a.notHandleAmount)).setIn(["data","notHandleAmount"],Math.abs(a.notHandleAmount)).setIn(["data","amountTitle"],"debit"==d?"收款金额：":"付款金额：").setIn(["data","oriAbstract"],"核销账款").setIn(["data","oriState"],"STATE_SFGL").setIn(["data","oriDate"],u).setIn(["data","currentCardList"],(0,r.fromJS)(a.currentCardList)).setIn(["data","accounts"],(0,r.fromJS)([{accountUuid:"",accountName:""}])).setIn(["data","pendingManageDto"],(0,r.fromJS)({categoryUuid:a.categoryUuid,categoryName:a.categoryName,pendingManageList:[{uuid:n.jrJvUuid}],oriDate:a.oriDate})).setIn(["data","needUsedPoundage"],!1).setIn(["data","poundageCurrentCardList"],(0,r.fromJS)([])).setIn(["data","poundageProjectCardList"],(0,r.fromJS)([])).setIn(["views","fromPageType"],l);break;case"KJFP":var T="STATE_KJFP_XS",E="BILL_MAKE_OUT_TYPE_XS",I="收入开具发票";"STATE_KJFP_TS"==a.billList[0].oriState&&(T="STATE_KJFP_TS",E="BILL_MAKE_OUT_TYPE_TS",I="退销开具发票");var N=0;a.billList.forEach(function(t){N+=t.notHandleAmount}),"STATE_KJFP_TS"==T&&(N=Math.abs(N));var h=a.billList[0].tax,C=(0,s.decimal)(N/h*a.amount);e=e.setIn(["data","oriAbstract"],I).setIn(["data","amount"],N).setIn(["data","oriState"],T).setIn(["data","billType"],E).setIn(["data","taxTotal"],C).setIn(["data","jrTaxAmount"],C).setIn(["data","jrAmount"],h).setIn(["data","pendingStrongList"],(0,r.fromJS)([{categoryUuid:a.categoryUuid,jrJvUuid:n.jrJvUuid,oriAmount:a.amount,oriState:a.oriState,taxAmount:a.billList[0].tax,taxRate:a.billList[0].taxRate,oriDate:a.oriDate}]));break;case"FPRZ":var A="STATE_FPRZ_CG",v="BILL_AUTH_TYPE_CG",p="增值税专用发票认证";"STATE_FPRZ_TG"==a.billList[0].oriState&&(A="STATE_FPRZ_TG",v="BILL_AUTH_TYPE_TG",p="退购红字发票认证");var L=0;a.billList.forEach(function(t){L+=t.notHandleAmount}),"STATE_FPRZ_TG"==A&&(L=Math.abs(L)),e=e.setIn(["data","oriAbstract"],p).setIn(["data","amount"],L).setIn(["data","oriState"],A).setIn(["data","billType"],v).setIn(["data","pendingStrongList"],(0,r.fromJS)([{categoryUuid:a.categoryUuid,jrJvUuid:n.jrJvUuid,oriAmount:a.amount,oriState:a.oriState,taxAmount:a.billList[0].tax,taxRate:a.billList[0].taxRate,oriDate:a.oriDate}]));break;case"JZSY":var R=Number(a.amount)-Number(a.billList[0].tax);e=e.setIn(["data","oriAbstract"],"处置损益").setIn(["data","oriState"],"STATE_CQZC_JZSY").setIn(["data","categoryUuid"],a.categoryUuid).setIn(["data","categoryName"],a.categoryName).setIn(["data","amount"],R).setIn(["data","assets","originalAssetsAmount"],"").setIn(["data","assets","depreciationAmount"],"").setIn(["data","assets","cleaningAmount"],R).setIn(["data","beProject"],n.receivedData.category.beProject).setIn(["data","usedProject"],n.receivedData.category.beProject).setIn(["data","projectRange"],n.receivedData.category.projectRange).setIn(["data","projectCardList"],(0,r.fromJS)([{amount:""}])).setIn(["data","pendingStrongList"],(0,r.fromJS)([{beSelect:!0,oriUuid:a.oriUuid,jrUuid:a.jrUuid,oriDate:a.oriDate,amount:R,jrJvUuid:n.jrJvUuid}]));break;case"XCZC":var y={SX_GZXJ:"发放工资薪金",SX_FLF:"支付"+a.categoryName,SX_QTXC:"发放"+a.categoryName}[o.propertyPay];e=e.setIn(["data","oriAbstract"],y).setIn(["data","oriState"],"STATE_XC_FF").setIn(["data","categoryUuid"],a.categoryUuid).setIn(["data","amount"],Math.abs(a.notHandleAmount)).setIn(["data","notHandleAmount"],a.notHandleAmount).setIn(["data","payment"],(0,r.fromJS)({actualAmount:Math.abs(a.notHandleAmount)})).setIn(["data","accounts"],(0,r.fromJS)([{accountUuid:"",accountName:""}])).setIn(["data","pendingStrongList"],(0,r.fromJS)([{beSelect:!0,jrIndex:a.jrIndex,oriDate:a.oriDate,amount:a.amount,jrJvUuid:n.jrJvUuid}])).setIn(["data","needUsedPoundage"],!1).setIn(["data","poundageCurrentCardList"],(0,r.fromJS)([])).setIn(["data","poundageProjectCardList"],(0,r.fromJS)([]));break;case"DEFRAY":var m=a.amount,P=a.notHandleAmount,U="",G="STATE_XC_JN",O={actualAmount:Math.abs(P)};"LB_SFZC"===t?(G="STATE_SF_JN",U={SX_QYSDS:"缴纳企业所得税",SX_QTSF:"缴纳"+a.categoryName,SX_ZZS:"缴纳增值税"}[o.propertyTax],m-=a.tax||0,e=e.setIn(["data","amount"],a.notHandleAmount)):(U="缴纳"+{SX_SHBX:"社会保险",SX_ZFGJJ:"住房公积金"}[o.propertyPay],"SX_ZFGJJ"===o?O.companyAccumulationAmount=Math.abs(P):O.companySocialSecurityAmount=Math.abs(P),e=e.setIn(["data","payment"],(0,r.fromJS)(O))),e=e.setIn(["data","oriAbstract"],U).setIn(["data","oriState"],G).setIn(["data","categoryUuid"],a.categoryUuid).setIn(["data","notHandleAmount"],a.notHandleAmount).setIn(["data","propertyPay"],o.propertyPay).setIn(["data","accounts"],(0,r.fromJS)([{accountUuid:"",accountName:""}])).setIn(["data","pendingStrongList"],(0,r.fromJS)([{beSelect:!0,jrIndex:a.jrIndex,oriDate:a.oriDate,amount:m,jrJvUuid:n.jrJvUuid,notHandleAmount:P,oriUuid:a.oriUuid}])).setIn(["data","needUsedPoundage"],!1).setIn(["data","poundageCurrentCardList"],(0,r.fromJS)([])).setIn(["data","poundageProjectCardList"],(0,r.fromJS)([]));break;case"ZSFKX":var D=a.notHandleAmount,b="暂付款收回",J="STATE_ZF_SH";"LB_ZSKX"===t&&(J="STATE_ZS_TH",b="暂收款退还"),e=e.setIn(["data","oriAbstract"],b).setIn(["data","oriState"],J).setIn(["data","categoryUuid"],a.categoryUuid).setIn(["data","notHandleAmount"],D).setIn(["data","amount"],D).setIn(["data","accounts"],(0,r.fromJS)([{accountUuid:"",accountName:""}])).setIn(["data","pendingStrongList"],(0,r.fromJS)([{beSelect:!0,jrIndex:a.jrIndex,oriDate:a.oriDate,amount:a.amount,jrJvUuid:n.jrJvUuid}])).setIn(["data","needUsedPoundage"],!1).setIn(["data","poundageCurrentCardList"],(0,r.fromJS)([])).setIn(["data","poundageProjectCardList"],(0,r.fromJS)([]));break;default:console.log("获取单条数据失败")}return e.setIn(["data","oriDate"],u)}),c(t,a.SEARCHRUNNING_GET_PROJECT_CARDLIST,function(){var t=[];return n.receivedData.forEach(function(e,n){t.push({key:e.code+" "+e.name,value:""+e.uuid+o.TREE_JOIN_STR+e.code+o.TREE_JOIN_STR+e.name})}),e.set("projectList",(0,r.fromJS)(t))}),c(t,a.GET_SEARCHRUNNING_CARD,function(){var t=[{key:"全部",value:""}],a=[];return n.receivedData.forEach(function(e,n){var r=e.code+" "+e.name;if(["COMNCRD","ASSIST","MAKE","INDIRECT","MECHANICAL"].includes(e.code))return r=e.name,void a.push({key:r,value:e.cardUuid,order:{COMNCRD:0,ASSIST:1,MAKE:2,INDIRECT:3,MECHANICAL:4}[e.code]});t.push({key:r,value:e.cardUuid})}),t.push.apply(t,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(a.sort(function(t,e){return t.order-e.order}))),e.set(n.cardType,(0,r.fromJS)(t))}),c(t,a.SEARCHRUNNING_GET_CARDLIST,function(){if("poundageProject"==n.cardType){var t=[];return n.receivedData.forEach(function(e,n){e.key=e.code+" "+e.name,e.value=""+e.uuid+o.TREE_JOIN_STR+e.code+o.TREE_JOIN_STR+e.name,["COMNCRD","ASSIST","MAKE","INDIRECT","MECHANICAL"].includes(e.code)&&(e.key=e.name),t.push(e)}),e.set("poundageProjectList",(0,r.fromJS)(t))}if("poundageCurrent"==n.cardType){var a=[];n.receivedData.forEach(function(t){var e=""+t.uuid+o.TREE_JOIN_STR+t.code+o.TREE_JOIN_STR+t.name;t.key=t.code+" "+t.name,t.value=e,a.push(t)}),e=e.set("poundageCurrentList",(0,r.fromJS)(a))}return e}),t)[n.type]||function(){return e})()};var r=n(9),a=u(n(1486)),o=u(n(25)),i=u(n(183)),s=n(13);function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=(0,r.fromJS)({views:{currentPage:1,pageCount:1,start:"",end:"",issues:[{value:"2018-01",key:""}],isLoading:!1,fromRouter:"HOME",selectedIndex:"CXLS",dateSelectValue:"ISSUE",cardObj:{cardType:"ALL",cardUuid:"",name:"全部",searchContent:"",isSearch:!1},fromPageType:""},data:{amount:"",oriAbstract:"",oriDate:""},dataList:[],projectList:[],projectCardList:[],currentCardList:[],stockCardList:[],accounCardtList:[],poundageProjectList:[]})},1486:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SEARCHRUNNING_GETPERIOD_AND_BUSINESSLIST="SEARCHRUNNING_GETPERIOD_AND_BUSINESSLIST",e.CHANGE_SEARCHRUNNING_DATA="CHANGE_SEARCHRUNNING_DATA",e.SEARCHRUNNING_GET_BUSINESSLIST="SEARCHRUNNING_GET_BUSINESSLIST",e.SEARCHRUNNING_SELECT_LS_ALL="SEARCHRUNNING_SELECT_LS_ALL",e.SEARCHRUNNING_SELECT_LS="SEARCHRUNNING_SELECT_LS",e.GET_SEARCHRUNNING_SINGLE="GET_SEARCHRUNNING_SINGLE",e.INIT_SEARCH_RUNNING="INIT_SEARCH_RUNNING",e.SEARCHRUNNING_GET_PROJECT_CARDLIST="SEARCHRUNNING_GET_PROJECT_CARDLIST",e.GET_SEARCHRUNNING_CARD="GET_SEARCHRUNNING_CARD",e.SEARCHRUNNING_GET_CARDLIST="SEARCHRUNNING_GET_CARDLIST"}}]);