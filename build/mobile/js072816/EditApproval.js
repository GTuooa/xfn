(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{1069:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearOpenedQuantity=t.getSerialList=t.deleteBatchList=t.modifyBatchStatus=t.getBatchList=t.saveInventoryBatch=t.deleteInventoryAssist=t.saveInventoryAssist=t.inventoryAssistList=t.getStockListByCategory=t.getStockCategoryTree=t.changeData=t.toggleLowerItem=t.changeOpened=t.getUnit=t.getOpenWarehouseTree=t.getWarehouseTree=t.typeSwapPosition=t.confirmDeleteType=t.changeTypeSelectList=t.getInvetTypeInfo=t.saveInventoryCardType=t.changeCardTypeSelect=t.changeCardTypeContent=t.insertAddInventoryCardType=t.deleteHighType=t.clearCardSelectList=t.beforeAddModalHighType=t.saveInventorySettingContent=t.changeHighTypeContent=t.deleteCardList=t.changeHighTypeBoxStatus=t.changeCardBoxStatus=t.modifyCardUsedStatus=t.beforeEditCard=t.saveCard=t.changeCardAc=t.changeCardCategoryType=t.addCardShowType=t.changeCardCategoryStatus=t.changeCardNature=t.changeCardContent=t.beforeAddCard=t.getCardListByType=t.getHighTypeTree=t.changeActiveHighType=t.inventorySettingInit=void 0;var r=d(n(1219)),a=n(13),o=n(9),i=f(n(1302)),l=d(n(182)),u=f(n(10)),c=f(n(25)),s=f(n(1068));f(n(1079));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var i=t[a](o),l=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})}}t.inventorySettingInit=function(){return function(e){u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("getInventorySettingCardList","GET","listFrom=",function(t){(0,a.showMessage)(t)?(0,l.default)("getInventoryHighTypeList","GET","",function(n){u.toast.hide(),(0,a.showMessage)(n)&&e({type:i.INVENTORY_CONFIG_INIT,title:n.data,cardList:t.data.resultList})}):u.toast.hide()})}};var m=t.changeActiveHighType=function(e){return function(t,n){!function(e,t,n){var r=t().inventoryConfState.getIn(["views","anotherName"]);n.get("name")===r?(u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("getInventorySettingCardList","GET","listFrom=",function(t){u.toast.hide(),(0,a.showMessage)(t)&&e({type:i.CHANGE_ACTIVE_INVENTORY_CONFIG_HIGH_TYPE,name:n.get("name"),uuid:n.get("uuid"),cardList:t.data.resultList})})):(u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("getInventorySettingCardList","GET","listFrom="+n.get("uuid"),function(t){u.toast.hide(),(0,a.showMessage)(t)&&(0,l.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+n.get("uuid"),function(r){(0,a.showMessage)(r)&&e({type:i.CHANGE_ACTIVE_INVENTORY_CONFIG_HIGH_TYPE,treelist:r.data.resultList,name:n.get("name"),uuid:n.get("uuid"),cardList:t.data.resultList})})}))}(t,n,e)}},g=(t.getHighTypeTree=function(e){return function(t){t(h("inventoryHighTypeTemp",e.set("treeList",(0,o.fromJS)([])),!0)),u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+e.get("uuid"),function(e){u.toast.hide(),(0,a.showMessage)(e)&&t(h(["inventoryHighTypeTemp","treeList"],(0,o.fromJS)(e.data.resultList)))})}},t.getCardListByType=function(e,t,n){return function(r){u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("getInventorySettingCardListByType","GET","ctgyUuid="+e+"&&subordinateUuid="+t,function(e){u.toast.hide(),(0,a.showMessage)(e)&&r({type:i.SELECT_INVENTORY_CONFIG_CARD_BY_TYPE,list:e.data.resultList,uuid:t,name:n})})}},t.beforeAddCard=function(e,t){return function(n,r){u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("getIUManageCardLimitAndAc","GET","",function(o){u.toast.hide(),(0,a.showMessage)(o)&&((0,l.default)("getInitStockCard","GET","",function(e){(0,a.showMessage)(e)&&n(g("code",e.data.code))}),n({type:i.BEFORE_ADD_INVENTORY_CONFIG_CARD,data:o.data,fromPage:t})),e(),r().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE")&&n(y())})}},t.changeCardContent=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONFIG_CARD_CONTENT,name:e,value:t})}}),y=(t.changeCardNature=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONFIG_CARD_NATURE,name:e,value:t})}},t.changeCardCategoryStatus=function(e,t){return function(n){t?(0,l.default)("getInventorySettingCardTypeList","GET","ctgyUuid="+e.get("uuid"),function(r){(0,a.showMessage)(r)&&n({type:i.CHANGE_INVENTORY_CONFIG_CARD_CATEGORY_STATUS,list:r.data.resultList,item:e,value:t})}):n({type:i.CHANGE_INVENTORY_CONFIG_CARD_CATEGORY_STATUS,list:[],item:e,value:t})}},t.addCardShowType=function(e){return{type:i.INVENTORY_CONFIG_ADD_CARD_SHOW_MODAL,item:e}},t.changeCardCategoryType=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONFIG_CARD_CATEGORY_TYPE,uuid:e,name:t})}},t.changeCardAc=function(e,t,n){return function(r){var a=e.get("title").split("_");r({type:i.CHANGE_INVENTORY_CONFIG_CARD_AC,uuid:a[0],name:a[1],acId:t,acName:n})}},t.saveCard=function(e,t,n){return function(e,r){var o=r().inventoryConfState,f=r().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE"),d=o.get("inventoryCardTemp").toJS(),p=o.getIn(["views","activeTabKeyUuid"]),m=o.getIn(["views","insertOrModify"]),g=o.getIn(["views","selectTypeId"]);if(0==d.isOpenedQuantity&&(d.unit={},d.openedQuantity=""),f){var y=[];!function e(t){t.map(function(t){t.childList.length?e(t.childList):y.push(t)})}(d.openList),d.openList=y}var h=[],b=[];if(d.isOpenedQuantity&&""==d.unit.name&&b.push("请选择计量单位"),d.isOpenedQuantity){var T=o.get("purchasePriceList").toJS(),C=o.get("salePriceList").toJS();T.forEach(function(e,t){Math.abs(e.defaultPrice)>0&&""==e.name&&b.push("默认采购价"+(t+1)+"请选择计量单位"),h.push(e)}),C.forEach(function(e,t){Math.abs(e.defaultPrice)>0&&""==e.name&&b.push("默认采购价"+(t+1)+"请选择计量单位"),h.push(e)})}if(["OPEN","INVALID_DELETE","INVALID"].includes(d.assemblyState)&&(d.assemblyState="OPEN"),d.openList.length){var _=d.financialInfo,E=d.financialInfo.openAssist,I=d.financialInfo.openBatch,S=d.financialInfo.openShelfLife,O=(d.financialInfo.openSerial,_.assistClassificationList.length);d.isOpenedQuantity;d.openList.forEach(function(e){e.openedQuantity&&e.openedQuantity,e.openedAmount&&e.openedAmount;E&&O!=e.assistList.length&&b.push("期初中有属性未选择完整"),I&&(e.batch||b.push("期初中有批次未选择"),S&&!e.expirationDate&&b.push("期初中有批次未选择截止日期"))})}if(b.length)return u.toast.info(b[0]);d.unitPriceList=h;var L=function(){if("insert"===m){u.toast.loading(c.LOADING_TIP_TEXT,0);var o=r().inventoryConfState.getIn(["views","fromPage"]);(0,l.default)("addInventorySettingCard","POST",JSON.stringify({psiData:d,insertFrom:p,treeFrom:g,needAutoIncrementCode:"insert"!==t,action:{editRunning:"SAVE_JR-QUICK_MANAGER-SAVE_STOCK",payment:"SAVE_JR-QUICK_MANAGER-SAVE_STOCK",inventory:"MANAGER-STOCK_SETTING-CUD_CARD",searchApproval:"QUERY_PROCESS-QUICK_MANAGER-SAVE_STOCK",editApproval:"INITIATE_PROCESS-QUICK_MANAGER-SAVE_STOCK"}[o]}),function(l){if(u.toast.hide(),(0,a.showMessage)(l)){if(e({type:i.SAVE_INVENTORY_CONFIG_CARD,list:l.data.resultList,flag:t,autoIncrementCode:l.data.autoIncrementCode}),"inventory"!==o&&"editApproval"!==o&&e(s.getInventoryCardListForchangeConfig()),"editApproval"===o)r().editApprovalState.getIn(["modelInfo","callback"])(d);"insert"===t?u.toast.info("保存成功",2,n()):u.toast.info("保存成功"),e(v())}})}else u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("editInventorySettingCard","POST",JSON.stringify({psiData:d,modifyFrom:p,treeFrom:g}),function(t){u.toast.hide(),(0,a.showMessage)(t)&&(e({type:i.SAVE_INVENTORY_CONFIG_CARD,list:t.data.resultList}),u.toast.info("修改成功",2,n()),e(v()))})};(0,l.default)("adjustInventorySettingCardTitleSame","POST",JSON.stringify({psiData:{name:d.name,uuid:d.uuid}}),function(e){(0,a.showMessage)(e)&&(e.data.repeat?u.Confirm({message:"卡片名称与[编码："+e.data.card.code+"]卡片重复，确定保存吗？",title:"名称重复",buttonLabels:["取消","确定"],onSuccess:function(e){1==e.buttonIndex&&L()},onFail:function(e){}}):L())})}},t.beforeEditCard=function(e,t){return function(n,s){var f,d=(f=p(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){(0,l.default)("getBatchList","POST",JSON.stringify({inventoryUuid:t,canUse:!0,needPage:!1}),function(t){(0,a.showMessage)(t)&&0===t.code&&(n(h(["inventoryCardTemp","financialInfo","batchList"],(0,o.fromJS)(t.data.batchList))),e())})});case 2:n(T({inventoryUuid:t,needPage:!1}));case 3:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)}),m=s().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE");u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("getInventorySettingOneCard","GET","uuid="+e.get("uuid"),function(e){u.toast.hide(),(0,a.showMessage)(e)&&(console.log("getInventorySettingOneCard"),n({type:i.BEFORE_EDIT_INVENTORY_CONFIG_CARD,data:e.data,isOpenedWarehouse:m}),t(),"INVALID_DELETE"==e.data.assemblyState&&u.toast.info("组装单的部分物料已被删除，建议重新设置并保存该存货"),e.data.financialInfo&&e.data.financialInfo.openBatch&&d(e.data.uuid))}),n(v()),m&&n(y())}},t.modifyCardUsedStatus=function(e,t){return function(e){e({type:i.CHANGE_INVENTORY_CONFIG_CARD_USED_STATUS,used:t})}},t.changeCardBoxStatus=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONFIG_CARD_BOX_STATUS,status:e,uuid:t})}},t.changeHighTypeBoxStatus=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONFIG_HIGHT_TYPE_BOX_STATUS,status:e,uuid:t})}},t.deleteCardList=function(e){return function(t,n){var o,s=(o=p(r.default.mark(function n(){var o;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=!1,n.next=3,new Promise(function(e){(0,l.default)("checkBeforeDelete","POST",JSON.stringify({deleteList:m}),function(t){if((0,a.showMessage)(t))if(t.data.inMaterialList.length){var n=t.data.inMaterialList.reduce(function(e,t){return e+(e?";":"")+t.code+" "+t.name},"")+" 属于其他存货的组装物料，删除后将导致组装单失效。继续删除吗？";u.Confirm({title:"确定删除么",message:n,buttonLabels:["取消","确定"],onSuccess:function(t){1==t.buttonIndex&&(o=!0,e())},onFail:function(e){}})}else o=!0,e()})});case 3:o&&(u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("deleteInventorySettingCardList","POST",JSON.stringify({deleteList:m,deleteFrom:f,treeFrom:d}),function(n){u.toast.hide(),(0,a.showMessage)(n)&&(t({type:i.DELETE_INVENTORY_CONFIG_CARD_LIST,list:n.data.resultList,treeList:n.data.typeList}),""===n.data.error?(u.toast.info("删除成功"),e()):u.toast.info(n.data.error))}));case 4:case"end":return n.stop()}},n,this)})),function(){return o.apply(this,arguments)}),f=n().inventoryConfState.getIn(["views","activeTabKeyUuid"]),d=n().inventoryConfState.getIn(["views","selectTypeId"]),m=n().inventoryConfState.getIn(["views","cardSelectList"]).toJS();0!==m.length?s():u.toast.info("请选择要删除的卡片")}},t.changeHighTypeContent=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONFIG_HIGH_TYPE_CONTENT,name:e,value:t})}},t.saveInventorySettingContent=function(){return function(e,t){var n=t().inventoryConfState.get("inventoryHighTypeTemp").toJS();u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("insertInventoryHighType","POST",JSON.stringify({psiData:n}),function(t){u.toast.hide(),(0,a.showMessage)(t)&&0===t.code&&(e({type:i.GET_INVENTORY_CONFIG_HIGH_TYPE_LIST,title:t.data}),u.toast.info("保存成功",2))})}},t.beforeAddModalHighType=function(){return{type:i.INSERT_INVENTORY_CONFIG_HGIH_TYPE}},t.clearCardSelectList=function(e){return{type:i.CHANGE_INVENTORY_CONFIG_CARD_SELECT_LIST,clearType:e}},t.deleteHighType=function(e){return function(t,n){var r=n().inventoryConfState,s=r.get("highTypeSelectList"),f=r.getIn(["views","activeTabKeyUuid"]);0!==s.size?(u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("deleteInventorySettingHighTypeList","POST",JSON.stringify({deleteList:s}),function(n){(u.toast.hide(),(0,a.showMessage)(n))&&(0===n.code&&(t({type:i.DELETE_INVENTORY_CONFIG_HGIH_TYPE,title:n.data.resultList}),u.toast.info("删除成功"),e(),s.map(function(e){return e.get("uuid")}).includes(f)&&t(m((0,o.fromJS)({uuid:"",name:"全部"})))))})):u.toast.info("请选择需要删除的类别")}},t.insertAddInventoryCardType=function(e,t){return function(n){n({type:i.INSERT_INVENTORY_CONFIG_CARD_TYPE,uuid:e,name:t})}},t.changeCardTypeContent=function(e,t){return function(n){n({type:i.CHANGE_INVENTORY_CONFIG_CARD_TYPE_CONTENT,name:e,value:t})}},t.changeCardTypeSelect=function(e,t){return{type:i.SELECT_INVENTORY_CONFIG_CARD_TYPE,parentName:t,parentUuid:e}},t.saveInventoryCardType=function(e){return function(t,n){var r=n().inventoryConfState.get("inventoryTypeTemp").toJS();r.ctgyUuid=n().inventoryConfState.getIn(["inventoryHighTypeTemp","uuid"]);var i=function(){u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("addInventorySettingCardType","POST",JSON.stringify({psiData:r}),function(n){u.toast.hide(),(0,a.showMessage)(n)&&(t(h(["inventoryHighTypeTemp","treeList"],(0,o.fromJS)(n.data.resultList))),u.toast.info("保存成功",2,e()))})};(0,l.default)("adjustInventorySettingTypeTitleSame","POST",JSON.stringify({psiData:{parentUuid:r.parentUuid,name:r.name,uuid:r.uuid}}),function(e){(0,a.showMessage)(e)&&(e.data.repeat?u.Confirm({message:"确定保存吗",title:"卡片类别名称与已有卡片类别名称重复，确定保存吗？",buttonLabels:["取消","确定"],onSuccess:function(e){i()},onFail:function(e){}}):i())})}},t.getInvetTypeInfo=function(e){return function(t){u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("getInventorySettingOneCardType","GET","uuid="+e,function(n){u.toast.hide(),(0,a.showMessage)(n)&&t({type:i.GET_INVENTORY_CONFIG_TYPE_CONTENT,uuid:e,data:n.data})})}},t.changeTypeSelectList=function(e,t){return function(n,r){n({type:i.CHANGE_INVENTORY_CONFIG_TYPE_SELECT_LIST,uuid:e,value:t})}},t.confirmDeleteType=function(e,t){return function(n,r){var o=[];if(function e(t){return t.map(function(t){t.get("checked")&&o.push(t.get("uuid")),t.get("childList").size>0&&e(t.get("childList"))})}(e),0!==o.size){var s=r().inventoryConfState.getIn(["inventoryHighTypeTemp","uuid"]);u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("deleteInventorySettingOneCardType","POST",JSON.stringify({ctgyUuid:s,deleteList:o}),function(e){u.toast.hide(),(0,a.showMessage)(e)&&(n({type:i.CONFIRM_DELETE_INVENTORY_CONFIG_TYPE,data:e.data.resultList}),u.toast.info("删除成功"),t())})}else u.toast.info("请选择要删除的类别")}},t.typeSwapPosition=function(e,t){return function(n,r){var o=r().inventoryConfState.getIn(["inventoryHighTypeTemp","uuid"]);u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("swapInventorySettingTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:e,swappedSubordinateUuid:t,categoryUuid:o}}),function(e){u.toast.hide(),(0,a.showMessage)(e)&&n({type:i.CHANGE_INVENTORY_CONFIG_TYPE_POSITION,list:e.data.resultList})})}},t.getWarehouseTree=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n){(0,l.default)("getWarehouseTree","POST",JSON.stringify({uuidList:e,inventoryUuid:t}),function(e){(0,a.showMessage)(e)&&n({type:i.GET_INVENTORY_WAREHOUSE_TREE,data:e.data.cardList})})}}),v=(t.getOpenWarehouseTree=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n){(0,l.default)("getOpenWarehouseTree","POST",JSON.stringify({warehouseUuidList:e,inventoryUuid:t}),function(e){(0,a.showMessage)(e)&&n({type:i.GET_INVENTORY_OPEN_TREE,data:e.data.openList})})}},t.getUnit=function(){return function(e){(0,l.default)("getUnit","GET","",function(t){(0,a.showMessage)(t)&&e({type:i.GET_INVENTORY_UNIT_LIST,data:t.data})})}}),h=(t.changeOpened=function(e,t,n,r,a){return{type:i.CHANGE_INVENTORY_OPENED,dataType:e,uuidList:t,value:n,selfValue:r,idx:a}},t.toggleLowerItem=function(e){return{type:i.INVENTORY_TOGGLELOWER_ITEM,uuid:e}},t.changeData=function(e,t,n){return{type:i.CHANGE_INVENTORY_DATA,dataType:e,value:t,short:n}}),b=(t.getStockCategoryTree=function(){return function(e,t){var n=t().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,l.default)("getStockCategoryTree","POST",JSON.stringify({categoryList:[],sobId:n}),function(t){var n=t.data.typeList;!function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(n),n.unshift({key:"ALL",label:"全部",top:!0,uuid:"",childList:[]}),e(h("stockCategoryTree",(0,o.fromJS)(n),!0))})}},t.getStockListByCategory=function(e){return function(t,n){var r=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);(0,l.default)("getRunningStockMemberList","POST",JSON.stringify({sobId:r,property:"0",openQuantity:!0,listByCategory:!!e.top,categoryUuid:e.uuid,subordinateUuid:e.uuid}),function(e){(0,a.showMessage)(e)&&(e.data.resultList.forEach(function(e){e.oriName=e.name,e.name=e.code+" "+e.name}),t(h("stockList",(0,o.fromJS)(e.data.resultList),!0)))})}},t.inventoryAssistList=function(){return function(e){(0,l.default)("inventoryAssistList","GET","",function(t){(0,a.showMessage)(t)&&e(h("assistClassificationList",(0,o.fromJS)(t.data.assistClassificationList),!0))})}}),T=(t.saveInventoryAssist=function(e){return function(t,n){var r=n().inventoryConfState.get("assist").toJS(),i=r.type,s={},f="";({assistClassInsert:function(){f="assistClassInsert",s={name:r.classificationName}},assistClassModify:function(){f="assistClassModify",s={uuid:r.classificationUuid,name:r.classificationName}},assistPropertyInsert:function(){f="assistPropertyInsert",s={name:r.name,classificationUuid:r.classificationUuid}},assistPropertyModify:function(){f="assistPropertyModify",s={name:r.name,uuid:r.uuid,classificationUuid:r.classificationUuid}}})[i](),u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)(f,"POST",JSON.stringify(s),function(n){u.toast.hide(),(0,a.showMessage)(n)&&0===n.code&&(["assistPropertyInsert","assistPropertyModify"].includes(i)&&t(h(["assist","propertyList"],(0,o.fromJS)(n.data))),t(b()),u.toast.info("保存成功",2,e()))})}},t.deleteInventoryAssist=function(e){return function(t,n){var r=n().inventoryConfState.get("assist").toJS(),i=r.type,s="",f="";({assistClassDelete:function(){f="assistClassDelete",s=r.classificationUuid},assistPropertyDelete:function(){f="assistPropertyDelete",s=r.uuid}})[i](),u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)(f,"GET","uuid="+s,function(n){u.toast.hide(),(0,a.showMessage)(n)&&0===n.code&&(["assistPropertyDelete"].includes(i)&&t(h(["assist","propertyList"],(0,o.fromJS)(n.data))),t(b()),u.toast.info("保存成功",2,e()))})}},t.saveInventoryBatch=function(e){return function(t,n){var i,f=(i=p(r.default.mark(function n(){var i;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i="MODIFY-INSERT"==m,"MODIFY-MODIFY"!=m){n.next=4;break}return n.next=4,new Promise(function(e){(0,l.default)("batchCheckUsed","GET","inventoryUuid="+d.inventoryUuid+"&batchUuid="+d.batchUuid,function(t){if((0,a.showMessage)(t))if(t.data.used){u.Confirm({title:"提示",message:"原批次在期初值或流水中已被使用，修改后所有信息将同步修改。确认更新该批次的信息吗？",buttonLabels:["取消","确定"],onSuccess:function(t){1==t.buttonIndex&&(i=!0,e())},onFail:function(e){}})}else i=!0,e()})});case 4:i&&(u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)(v,"POST",JSON.stringify(y),function(n){u.toast.hide(),(0,a.showMessage)(n)&&0===n.code&&("inventory"==d.editPage&&(t(h(["inventoryCardTemp","financialInfo","batchList"],(0,o.fromJS)(n.data.batchList))),u.toast.info("保存成功",2,e())),"inventoryBatchList"==d.editPage&&(t(h(["batch","allBatchList"],(0,o.fromJS)(n.data.batchList))),u.toast.info("保存成功",2,e())),"editRunning"==d.editPage&&("MODIFY-MODIFY"==m&&t(s.updateStockBatch({batch:n.data.batch,batchUuid:n.data.batchUuid,expirationDate:n.data.expirationDate,cardUuid:n.data.inventoryUuid})),e()))}));case 5:case"end":return n.stop()}},n,this)})),function(){return i.apply(this,arguments)}),d=n().inventoryConfState.get("batch").toJS(),m=d.batchType,g=d.editPage,y={},v="";"MODIFY-INSERT"==m&&(v="batchInsert",y={inventoryUuid:d.inventoryUuid,batch:d.batch,productionDate:d.productionDate,expirationDate:d.expirationDate,needPage:!1,canUse:"inventory"==g||void 0}),"MODIFY-MODIFY"==m&&(v="batchModify",y={inventoryUuid:d.inventoryUuid,batch:d.batch,batchUuid:d.batchUuid,productionDate:d.productionDate,expirationDate:d.expirationDate,needPage:!1,canUse:"inventory"==g||void 0}),f()}},t.getBatchList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"allBatchList";return function(n,r){(0,l.default)("getBatchList","POST",JSON.stringify(e),function(e){(0,a.showMessage)(e,"","","",!0)&&0===e.code&&("allBatchList"==t&&n(h(["batch","allBatchList"],(0,o.fromJS)(e.data.batchList))),"batchList"==t&&n(h(["inventoryCardTemp","financialInfo","batchList"],(0,o.fromJS)(e.data.batchList))))})}});t.modifyBatchStatus=function(e){return function(t,n){u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("modifyBatchStatus","POST",JSON.stringify(e),function(e){u.toast.hide(),(0,a.showMessage)(e)&&0===e.code&&t(h(["batch","allBatchList"],(0,o.fromJS)(e.data.batchList)))})}},t.deleteBatchList=function(e){return function(t,n){u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("deleteBatchList","POST",JSON.stringify(e),function(n){if(u.toast.hide(),(0,a.showMessage)(n)&&0===n.code){if(t(h(["batch","allBatchList"],(0,o.fromJS)(n.data.batchList))),n.data.usedList&&n.data.usedList.length){var r=n.data.usedList.reduce(function(e,t){return e+(e?";":"")+t.batch},"");u.toast.info("批次"+r+"已被期初值/流水使用，无法删除",2)}t(T({inventoryUuid:e.inventoryUuid,canUse:!0,needPage:!1},"batchList"))}})}},t.getSerialList=function(e,t){return function(n,r){u.toast.loading(c.LOADING_TIP_TEXT,0),(0,l.default)("getSerialList","POST",JSON.stringify({inventoryUuid:e,inUuid:t,inType:"O"}),function(e){u.toast.hide(),(0,a.showMessage)(e)&&0===e.code&&n(h(["serial","serialList"],(0,o.fromJS)(e.data)))})}},t.clearOpenedQuantity=function(e){return{type:i.INVENTORY_CLEAR_OPENED_QUANTITY,openType:e}}},1219:function(e,t,n){e.exports=n(1257)},1225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(n(0)),o=n(16),i=l(n(1254));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.StarDisabled,r=e.ArrowDisabled,l=e.placeHolder,u=e.type,c=void 0===u?"single":u,s=e.value,f=e.onDelete,d=e.style,p=e.onClick,m=e.className,g="single"===c&&s||"multiple"===c&&s&&s.length>=1,y="single"===c?s:(s||[]).map(function(e,t){return a.default.createElement("span",{key:t},e)});return a.default.createElement("div",{className:["approval-item",m].join(" "),style:d,onClick:p},a.default.createElement("label",null,n?"":a.default.createElement(i.default,null),t),a.default.createElement("div",{className:"approval-text"},a.default.createElement("span",{className:g?"approval-text-area":"approval-text-area approval-placeholder"},g?y:l),r?"":g&&"single"===c?a.default.createElement(o.Icon,{type:"preview",onClick:function(e){e.stopPropagation(),f()}}):a.default.createElement(o.Icon,{className:"approval-placeholder",type:"arrow-right"})))}}]),t}();t.default=u},1254:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){return o.default.createElement("span",{style:{color:"rgb(204,0,0)"}},"*")}},1257:function(e,t,n){var r=function(){return this}()||Function("return this")(),a=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=a&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(1258),a)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},1258:function(e,t){!function(t){"use strict";var n,r=Object.prototype,a=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"==typeof e,s=t.regeneratorRuntime;if(s)c&&(e.exports=s);else{(s=t.regeneratorRuntime=c?e.exports:{}).wrap=T;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",g={},y={};y[i]=function(){return this};var v=Object.getPrototypeOf,h=v&&v(v(P([])));h&&h!==r&&a.call(h,i)&&(y=h);var b=I.prototype=_.prototype=Object.create(y);E.prototype=b.constructor=I,I.constructor=E,I[u]=E.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(b),e},s.awrap=function(e){return{__await:e}},S(O.prototype),O.prototype[l]=function(){return this},s.AsyncIterator=O,s.async=function(e,t,n,r){var a=new O(T(e,t,n,r));return s.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},S(b),b[u]="Generator",b[i]=function(){return this},b.toString=function(){return"[object Generator]"},s.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},s.values=P,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,a){return l.type="throw",l.arg=e,t.next=r,a&&(t.method="next",t.arg=n),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;A(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),g}}}function T(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),i=new w(r||[]);return o._invoke=function(e,t,n){var r=f;return function(a,o){if(r===p)throw new Error("Generator is already running");if(r===m){if("throw"===a)throw o;return M()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var l=L(i,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=C(e,t,n);if("normal"===u.type){if(r=n.done?m:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=m,n.method="throw",n.arg=u.arg)}}}(e,n,i),o}function C(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function _(){}function E(){}function I(){}function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function O(e){var t;this._invoke=function(n,r){function o(){return new Promise(function(t,o){!function t(n,r,o,i){var l=C(e[n],e,r);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&a.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,i)},function(e){t("throw",e,o,i)}):Promise.resolve(c).then(function(e){u.value=e,o(u)},i)}i(l.arg)}(n,r,t,o)})}return t=t?t.then(o,o):o()}}function L(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,L(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var a=C(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,g;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function P(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:M}}function M(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},1259:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,n=arguments[1];return((e={},c(e,i.INIT_RELATIVE_CONF,function(){return s}),c(e,i.CHANGE_RELATIVE_CONTENT,function(){return t=t.setIn(["relativeHighTypeTemp",n.name],n.value)}),c(e,i.CHANGE_RELATIVE_DATA,function(){return n.short?t.set(n.dataType,n.value):t.setIn(n.dataType,n.value)}),c(e,i.GET_RELATIVE_LIST_TITLE,function(){return n.title.unshift({name:"全部",uuid:""}),t=t.set("tags",(0,a.fromJS)(n.title)).set("originTags",(0,a.fromJS)(n.title))}),c(e,i.GET_RELATIVE_LIST_BY_TYPE,function(){return t=t.set("relativeCardList",(0,a.fromJS)(n.list)).set("treeList",(0,a.fromJS)(n.tree)).set("relativeSelectList",(0,a.fromJS)([])).mergeIn(["views"],(0,a.fromJS)({activeTapKey:n.name,activeTapKeyUuid:n.uuid,sonUuid:"",sonName:"全部",treeSelect:s.getIn(["views","treeSelect"])}))}),c(e,i.BEFORE_ADD_MANAGE_TYPE_CARD,function(){if(t=t.set("tags",t.get("originTags")),"modify"===n.insertOrModify){for(var e=t.get("tags").toJS(),r=n.data.categoryTypeList,o=0;o<r.length;o++)for(var i=0;i<e.length;i++)if(r[o].ctgyUuid===e[i].uuid){e[i].checked=!0,e[i].selectUuid=r[o].subordinateUuid,e[i].selectName=r[o].subordinateName,e[i].tree=r[o].options;break}t=(t=(t=t.set("tags",(0,a.fromJS)(e))).set("relativeCardTemp",(0,a.fromJS)(n.data))).setIn(["relativeCardTemp","insertOrModify"],"modify"),0===n.data.payableOpened&&(t=t.setIn(["relativeCardTemp","payableOpened"],"")),0===n.data.receivableOpened&&(t=t.setIn(["relativeCardTemp","receivableOpened"],"")),0===n.data.prepaidOpened&&(t=t.setIn(["relativeCardTemp","prepaidOpened"],"")),0===n.data.advanceOpened&&(t=t.setIn(["relativeCardTemp","advanceOpened"],""))}else t=t.set("relativeCardTemp",(0,a.fromJS)(l.relativeCardTemp)).setIn(["relativeCardTemp","insertOrModify"],"insert").setIn(["relativeCardTemp","isCheckOut"],n.data.isCheckOut).setIn(["relativeCardTemp","advanceAcId"],n.data.defaultAc.advanceAcId).setIn(["relativeCardTemp","advanceAcName"],n.data.defaultAc.advanceAcName).setIn(["relativeCardTemp","receivableAcId"],n.data.defaultAc.receivableAcId).setIn(["relativeCardTemp","receivableAcName"],n.data.defaultAc.receivableAcName).setIn(["relativeCardTemp","payableAcId"],n.data.defaultAc.payableAcId).setIn(["relativeCardTemp","payableAcName"],n.data.defaultAc.payableAcName).setIn(["relativeCardTemp","prepaidAcId"],n.data.defaultAc.prepaidAcId).setIn(["relativeCardTemp","prepaidAcName"],n.data.defaultAc.prepaidAcName);return t=t.setIn(["views","fromPage"],n.fromPage||"relative")}),c(e,i.BEFORE_ADD_MANAGE_TYPE_CARD_FROM_EDIT_RUNNING,function(){return t=t.set("relativeCardTemp",(0,a.fromJS)(l.relativeCardTemp)).setIn(["relativeCardTemp","insertOrModify"],"insert").setIn(["relativeCardTemp","isCheckOut"],n.receivedData.isCheckOut).set("tags",n.originTags).setIn(["views","fromPage"],n.otherPageName).setIn(["views","otherPageName"],n.otherPageName).setIn(["relativeCardTemp","code"],n.receivedData.code)}),c(e,i.CHANGE_RELATIVE_CARD_CONTENT,function(){if(t=t.setIn(["relativeCardTemp",n.name],n.value),"isPayUnit"===n.name&&!n.value){var e=(t=t.setIn(["relativeCardTemp","enablePrepaidAc"],!1)).getIn(["relativeCardTemp","isReceiveUnit"]);e?t.get("tags").map(function(e,n){if(!e.get("isReceiveUnit")){var r=(t=t.setIn(["tags",n,"checked"],!1)).getIn(["relativeCardTemp","categoryTypeList"]).findIndex(function(t,n){return t.get("ctgyUuid")===e.get("uuid")});r>-1&&(t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(r)))}}):(t.get("tags").map(function(e,n){t=t.setIn(["tags",n,"checked"],!1)}),t=t.setIn(["relativeCardTemp","categoryTypeList"],(0,a.fromJS)([])))}if("isReceiveUnit"===n.name&&!n.value){var r=(t=t.setIn(["relativeCardTemp","enableAdvanceAc"],!1)).getIn(["relativeCardTemp","isPayUnit"]);r?t.get("tags").map(function(e,n){if(!e.get("isPayUnit")){var r=(t=t.setIn(["tags",n,"checked"],!1)).getIn(["relativeCardTemp","categoryTypeList"]).findIndex(function(t,n){return t.get("ctgyUuid")===e.get("uuid")});r>-1&&(t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(r)))}}):(t.get("tags").map(function(e,n){t=t.setIn(["tags",n,"checked"],!1)}),t=t.setIn(["relativeCardTemp","categoryTypeList"],(0,a.fromJS)([])))}return t}),c(e,i.CHANGE_MANAGE_CARD_RELATION,function(){var e=t.get("tags"),r="";if(e.find(function(t,o){t.get("uuid")===n.tag.get("uuid")&&(e=e.setIn([o,"checked"],n.checked),t.get("selectUuid")&&(r=t.get("selectUuid")),n.checked&&(e=e.setIn([o,"tree"],(0,a.fromJS)(n.tree)),0===n.tree[0].childList.length&&(e=e.setIn([o,"selectUuid"],n.tree[0].uuid).setIn([o,"selectName"],n.tree[0].name),r=n.tree[0].uuid)))}),n.checked){var o=t.getIn(["relativeCardTemp","categoryTypeList"]).toJS();o.push({ctgyUuid:n.tag.get("uuid"),subordinateUuid:r}),t=t.setIn(["relativeCardTemp","categoryTypeList"],(0,a.fromJS)(o))}else{var i=t.getIn(["relativeCardTemp","categoryTypeList"]).findIndex(function(e,t){return e.get("ctgyUuid")===n.tag.get("uuid")});t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(i))}return t=t.set("tags",e)}),c(e,i.RELATIVE_CONFIG_ADD_CARD_SHOW_MODAL,function(){return t.get("tags").map(function(e,r){e.get("uuid")===n.uuid&&(t=t.set("typeTree",t.getIn(["tags",r,"tree"])).set("typeSelect",t.getIn(["tags",r])))}),t}),c(e,i.CHANGE_MANAGE_CARD_RELATION_TYPE,function(){var e=t.get("typeSelect");return t.getIn(["relativeCardTemp","categoryTypeList"]).map(function(r,a){r.get("ctgyUuid")===e.get("uuid")&&(t=t.setIn(["relativeCardTemp","categoryTypeList",a,"subordinateUuid"],n.uuid))}),t.get("tags").map(function(r,a){r.get("uuid")===e.get("uuid")&&(t=t.setIn(["tags",a,"selectUuid"],n.uuid).setIn(["tags",a,"selectName"],n.name))}),t}),c(e,i.CHANGE_RELATIVE_CARD_AC,function(){var e=t.getIn(["views","acId"]),r=t.getIn(["views","acName"]);return t=t.setIn(["relativeCardTemp",e],n.uuid).setIn(["relativeCardTemp",r],n.name)}),c(e,i.SAVE_RELATIVE_TYPE_CARD,function(){return t=t.set("relativeCardList",(0,a.fromJS)(n.list)).set("treeList",(0,a.fromJS)(n.treeList)),"insertAndNew"===n.flag&&(t=t.setIn(["relativeCardTemp","code"],n.code).setIn(["relativeCardTemp","name"],"").setIn(["relativeCardTemp","companyAddress"],"").setIn(["relativeCardTemp","companyTel"],"").setIn(["relativeCardTemp","financeName"],"").setIn(["relativeCardTemp","financeTel"],"").setIn(["relativeCardTemp","receivableOpened"],"").setIn(["relativeCardTemp","advanceOpened"],"").setIn(["relativeCardTemp","payableOpened"],"").setIn(["relativeCardTemp","prepaidOpened"],"")),t}),c(e,i.CHANGE_RELATIVE_CONF_CARD_SELECT_LIST,function(){if("relativeCard"==n.clearType&&(t=t.set("relativeCardSelectList",(0,a.fromJS)([])).update("relativeCardList",function(e){return e.map(function(e){return e.set("checked",!1)})})),"relativeHighType"==n.clearType&&(t=t.set("cardHighTypeSelectList",(0,a.fromJS)([])).update("tags",function(e){return e.map(function(e){return e.set("checked",!1)})})),"relativeTree"==n.clearType){var e=t.getIn(["relativeHighTypeTemp","treeList"]).toJS();!function e(t){return t.map(function(t,n){t.checked=!1,t.childList.length>0&&e(t.childList)})}(e),t=t.set("treeList",(0,a.fromJS)(e)).set("relativeTreeSelectList",(0,a.fromJS)([]))}return t}),c(e,i.CHECK_RELATIVE_LIST_CARD_BOX,function(){var e=t.get("relativeCardList"),r=t.get("relativeCardSelectList").toJS();return e.find(function(e,r){e.get("uuid")===n.uuid&&(t=t.setIn(["relativeCardList",r,"checked"],n.checked))}),n.checked?(r.push({uuid:n.uuid}),t=t.set("relativeCardSelectList",(0,a.fromJS)(r))):r.find(function(e,r){e.uuid===n.uuid&&(t=t.deleteIn(["relativeCardSelectList",r]))}),t}),c(e,i.DELETE_RELATIVE_LIST_CARD,function(){return t=t.set("relativeCardList",(0,a.fromJS)(n.data)).set("relativeCardSelectList",(0,a.fromJS)([])).set("treeList",(0,a.fromJS)(n.treeList))}),c(e,i.GET_RELATIVE_LIST_BY_SON_TYPE,function(){return t=t.set("relativeCardList",(0,a.fromJS)(n.data)).set("relativeCardSelectList",(0,a.fromJS)([])).setIn(["views","sonUuid"],n.sonUuid).setIn(["views","sonName"],n.sonName)}),c(e,i.BEFORE_ADD_NEW_MANAGE_TYPE,function(){return t=t.set("relativeHighTypeTemp",(0,a.fromJS)(l.relativeHighTypeTemp))}),c(e,i.CHANGE_RELATIVE_CONTENT,function(){return t=t.setIn(["relativeHighTypeTemp",n.name],n.value)}),c(e,i.GET_RELATIVE_CARD,function(){return t=t.set("relativeHighTypeTemp",(0,a.fromJS)(n.data))}),c(e,i.CHANGE_RELATIVE_CONF_HIGHT_TYPE_BOX_STATUS,function(){var e=t.get("tags"),r=t.get("cardHighTypeSelectList").toJS();return e.map(function(e,r){e.get("uuid")===n.uuid&&(t=t.setIn(["tags",r,"checked"],n.status))}),n.status?(r.push({uuid:n.uuid}),t=t.set("cardHighTypeSelectList",(0,a.fromJS)(r))):r.find(function(e,r){e.uuid===n.uuid&&(t=t.deleteIn(["cardHighTypeSelectList",r]))}),t}),c(e,i.DELETE_RELATIVE_CONF_HGIH_TYPE,function(){n.title.unshift({name:"全部",uuid:""});var e=t.getIn(["views","activeTapKeyUuid"]),r=n.title.map(function(e){return e.uuid});return r.includes(e)||(t=t.setIn(["views","activeTapKeyUuid"],"").setIn(["views","activeTapKey"],"全部").setIn(["views","treeSelect"],s.getIn(["views","treeSelect"]))),t=t.set("tags",(0,a.fromJS)(n.title)).set("originTags",(0,a.fromJS)(n.title))}),c(e,i.INSERT_RELATIVE_TYPE,function(){return t=t.setIn(["relativeTypeTemp","name"],"").setIn(["relativeTypeTemp","uuid"],"").setIn(["relativeTypeTemp","parentUuid"],n.uuid).setIn(["relativeTypeTemp","parentName"],n.name)}),c(e,i.CHANGE_RELATIVE_TYPE_CONTENT,function(){return t=t.setIn(["relativeTypeTemp",n.name],n.value)}),c(e,i.CHANGE_RELATIVE_TYPE_SELECT,function(){return t=t.setIn(["relativeTypeTemp","parentUuid"],n.parentUuid).setIn(["relativeTypeTemp","parentName"],n.parentName)}),c(e,i.SAVE_RELATIVE_TYPE,function(){return t=t.set("relativeCardList",(0,a.fromJS)(n.list)).setIn(["views","activeTapKey"],n.name).setIn(["views","activeTapKeyUuid"],n.activeTapKeyUuid).set("treeList",(0,a.fromJS)(n.tree))}),c(e,i.GET_RELATIVE_TYPE_CONTENT,function(){return t=t.set("relativeTypeTemp",(0,a.fromJS)(n.data))}),c(e,i.CHANGE_RELATIVE_TYPE_BOX_CHECKED,function(){var e=t.getIn(["relativeHighTypeTemp","treeList"]).toJS();return function e(t,r){return t.map(function(t,a){var o=r;(t.uuid==n.uuid||r)&&(t.checked=n.value,o=!0),t.childList.length>0&&e(t.childList,o)})}(e,!1),t.setIn(["relativeHighTypeTemp","treeList"],(0,a.fromJS)(e))}),c(e,i.SWITCH_CARD_STATUS,function(){return t=t.setIn(["relativeCardTemp","used"],n.used)}),e)[n.type]||function(){return t})()};var r,a=n(9),o=n(182),i=((r=o)&&r.__esModule,u(n(25)),n(13),u(n(10)),u(n(1300))),l=n(1243);function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=(0,a.fromJS)({views:{acName:"",acId:"",relation:"",anotherTabName:"全部",activeTapKey:"全部",activeTapKeyUuid:"",sonUuid:"",sonName:"全部",insertOrModify:"insert",fromPage:"relative",otherPageName:"",treeSelect:{treeTwoList:[],treeThreeList:[],selectUuid:["","",""],selectName:"",selectEndUuid:""}},tags:[],originTags:[],relativeHighTypeTemp:l.relativeHighTypeTemp,relativeTypeTemp:l.relativeTypeTemp,relativeCardTemp:l.relativeCardTemp,relativeCardSelectList:[],relativeCardList:[],treeList:[],relativeTreeSelectList:[],typeTree:[],typeSelect:"",cardHighTypeSelectList:[]})},1260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((e={},o(e,a.INIT_PROJECT,function(){return i}),o(e,a.INIT_PROJECT_DATA,function(){return t.set(n.dataType,i.get(n.dataType)).setIn(["views","fromPage"],n.fromPage||"project")}),o(e,a.PROJECT_HIGH_TYPE,function(){var e=n.list;return e.unshift({name:"全部",uuid:""}),t.set("highTypeList",(0,r.fromJS)(e)).setIn(["views","ctgyUuid"],e[1].uuid)}),o(e,a.CHANGE_PROJECT_DATA,function(){return t.setIn(n.dataType,n.value)}),o(e,a.CHANGE_PROJECT_TOP_DATA,function(){return t.set(n.dataType,n.value)}),o(e,a.AFTER_SUCCESS_EDIT_PROJECT_CARD,function(){return t.set("cardList",(0,r.fromJS)(n.receivedData))}),o(e,a.GET_PROJECT_LIST_AND_TREE,function(){var e=n.data.typeList.length?n.data.typeList[0].uuid:"";return t.set("cardList",(0,r.fromJS)(n.data.resultList)).set("treeList",(0,r.fromJS)(n.data.typeList)).mergeIn(["views"],(0,r.fromJS)({treeUuid:e,treeName:"全部",treeSelect:i.getIn(["views","treeSelect"])}))}),o(e,a.CHECKED_PROJECT_CATEGORY,function(){var e=t.getIn(["highTypeData","treeList"]).toJS();return function e(t,r){return t.map(function(t,a){var o=r;(t.uuid==n.uuid||r)&&(t.checked=n.value,o=!0),t.childList.length>0&&e(t.childList,o)})}(e,!1),t.setIn(["highTypeData","treeList"],(0,r.fromJS)(e))}),o(e,a.GET_PROJECT_CARD_ONE,function(){var e=n.data.categoryTypeList[0].subordinateName,a=n.data.categoryTypeList[0].subordinateUuid;return t.mergeIn(["data","psiData"],(0,r.fromJS)(n.data)).setIn(["views","insertOrModify"],"modify").setIn(["data","psiData","selectName"],e).setIn(["data","psiData","selectUuid"],a).setIn(["data","psiData","typeList"],(0,r.fromJS)(n.data.categoryTypeList[0].options)).setIn(["views","fromPage"],"project").set("treeList",(0,r.fromJS)(n.data.categoryTypeList[0].options))}),o(e,a.UNCHECKED_PROJECT,function(){if("card"==n.dataType){t.get("cardList");t=t.update("cardList",function(e){return e.map(function(e){return e.set("checked",!1)})})}else{var e=t.get("treeList").toJS();!function e(t){return t.map(function(t,n){t.checked=!1,t.childList.length>0&&e(t.childList)})}(e),t=t.set("treeList",(0,r.fromJS)(e))}return t}),o(e,a.BEFORE_ADD_PROJECT_CARD_FROM_EDIT_RUNNING,function(){return t=t.set("data",i.get("data")).set("treeList",(0,r.fromJS)(n.receivedData)).setIn(["views","insertOrModify"],"insert").setIn(["views","fromPage"],n.otherPageName).setIn(["views","otherPageName"],n.otherPageName).setIn(["views","ctgyUuid"],n.ctgyUuid).set("highTypeList",(0,r.fromJS)(n.highTypeList)).setIn(["data","psiData","code"],n.code).setIn(["data","psiData","categoryTypeList",0],(0,r.fromJS)({ctgyUuid:n.ctgyUuid,subordinateUuid:""})),n.receivedData[0].childList.length<=0&&(t=t.setIn(["data","psiData","selectUuid"],n.receivedData[0].uuid).setIn(["data","psiData","selectName"],n.receivedData[0].name).setIn(["data","psiData","categoryTypeList",0,"subordinateUuid"],n.receivedData[0].uuid)),n.highTypeList.map(function(e){e.uuid==n.ctgyUuid&&"生产项目"==e.name&&(t=t.setIn(["data","psiData","projectProperty"],"XZ_PRODUCE"))}),t}),o(e,a.BEFORE_ADD_PROJECT_CARD_GET_CODE,function(){return t.setIn(["data","psiData","code"],n.value)}),e)[n.type]||function(){return t})()};var r=n(9),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1301));function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=(0,r.fromJS)({views:{currentType:"",currentTypeName:"全部",ctgyUuid:"",treeName:"全部",treeUuid:"",highTypeIdx:0,insertOrModify:"insert",fromPage:"project",otherPageName:"",treeSelect:{treeTwoList:[],treeThreeList:[],selectUuid:["","",""],selectName:"",selectEndUuid:""}},data:{psiData:{code:"",name:"",selectName:"",selectUuid:"",categoryTypeList:[],typeList:[],used:!0,uuid:"",projectProperty:"XZ_LOSS",basicProductOpen:"",contractCostOpen:"",contractProfitOpen:"",engineeringSettlementOpen:""}},highTypeList:[],cardList:[],treeList:[],highTypeData:{commonFee:!1,name:"",uuid:"",beAssist:!1,beMake:!0,treeList:[]},deleteList:[],treeData:{name:"",parentName:"",parentUuid:"",uuid:""}})},1282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commonCode=t.containType=t.tabs=t.jrType=t.formType=t.type=void 0;var r=n(1476);t.type={LB_YYSR:"debit",LB_YYZC:"credit",LB_ZZ:"calculate",LB_FYZC:"credit",LB_XCZC:"credit",LB_SFZC:"credit",LB_YYWSR:"debit",LB_YYWZC:"credit"},t.formType={NumberField:r.CommonInput,MoneyField:r.CommonInput,DDSelectField:r.CommonChoose,InnerContactField:r.ContactsComp,DDPhotoField:r.UploadPic,DDMultiSelectField:r.MultiChoose,DDAttachment:r.FjComp,TextareaField:r.CommonMultiInput,DDDateRangeField:r.DateComp,TextField:r.CommonInput,DDDateField:r.DateComp,RelateField:r.SpdComp},t.jrType={LSLB:r.CategoryComp,XM:r.ProjectComp,MX_DATE:r.DateComp,DATE:r.DateComp,MX_AMOUNT:r.CommonInput,ZY:r.CommonInput,CH:r.InventoryComp,WLDW:r.RelativeComp},t.tabs=[{title:"我处理的",sub:"1"},{title:"我发起的",sub:"2"},{title:"抄送我的",sub:"3"}],t.containType={AMOUNT:"金额",DATE:"日期",ABSTRACT:"摘要",CONTECT:"往来单位",STROCK:"存货",DRPOT:"仓库",CATEGORY:"流水类别","DETAIL-TYPE":"明细类型",ACCOUNT:"账户"},t.commonCode=function(e){return["COMNCRD","ASSIST","MAKE","INDIRECT","MECHANICAL"].includes(e.code)}},1475:function(e,t,n){},1476:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpdComp=t.CommonMultiInput=t.FjComp=t.MultiChoose=t.ContactsComp=t.UploadPic=t.RelativeComp=t.CommonRow=t.DateComp=t.ProjectComp=t.CommonInput=t.CommonChoose=t.InventoryComp=t.CategoryComp=void 0;var r=v(n(1711)),a=v(n(1722)),o=v(n(1477)),i=v(n(1723)),l=v(n(1724)),u=v(n(1725)),c=v(n(1726)),s=v(n(1225)),f=v(n(1727)),d=v(n(1728)),p=v(n(1729)),m=v(n(1730)),g=v(n(1731)),y=v(n(1732));function v(e){return e&&e.__esModule?e:{default:e}}t.CategoryComp=r.default,t.InventoryComp=a.default,t.CommonChoose=o.default,t.CommonInput=i.default,t.ProjectComp=l.default,t.DateComp=c.default,t.CommonRow=s.default,t.RelativeComp=u.default,t.UploadPic=f.default,t.ContactsComp=d.default,t.MultiChoose=p.default,t.FjComp=m.default,t.CommonMultiInput=g.default,t.SpdComp=y.default},1477:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(9),o=u(n(0)),i=n(16),l=(u(n(1254)),u(n(1225)));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={visible:!1},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.label,r=t.placeHolder,u=t.type,c=void 0===u?"single":u,s=(t.value,t.disabled),f=t.item,d=void 0===f?(0,a.fromJS)({}):f,p=t.district,m=t.onChange,g=(t.dispatch,t.className),y=this.state.visible,v=p.size?p.toJS():(d.get("selectValueList")||(0,a.fromJS)([])).toJS().map(function(e){return{key:e,value:e}});return o.default.createElement(i.Single,{className:g,visible:y,disabled:s,district:v,onOk:function(e){m(e.value)},onCancel:function(){e.setState({visible:!1})}},o.default.createElement(l.default,{multiple:"multiple"===c,value:d.get("value"),label:n,placeHolder:r,onDelete:function(e){m("")},StarDisabled:!d.get("required")}))}}]),t}();t.default=s},1479:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(56)),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(57);var o=l(n(0)),i=n(16);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={filterContent:""},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"componentDidMount",value:function(){var e=this;document.getElementsByClassName("search-input-dom")[0].addEventListener("keypress",function(t){if("Enter"===t.key){t.target.blur();var n=e.props.value?e.props.value:e.state.filterContent;e.props.onSubmit(n)}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,a=t.onSubmit,l=t.placeholder,u=t.needCancel,c=t.onFocus,s=t.onBlur,f=t.onChange,d=t.history,p=n?this.props.value:this.state.filterContent;return o.default.createElement("div",{className:"approval-search"},o.default.createElement("form",{action:"javascript:;"},o.default.createElement(r.default,{type:"search",className:"search-input-dom",value:p,onChange:function(t){f&&f(t),e.setState({filterContent:t})},placeholder:l,onFocus:c,onBlur:s,ref:"input"})),o.default.createElement(i.Icon,{type:"search",className:"search-icon"}),p?o.default.createElement(i.Icon,{type:"preview",className:"close-icon",style:u?{right:"0.6rem"}:{},onClick:function(){e.setState({filterContent:""}),a(""),f&&f(""),e.refs.input.focus()}}):"",u?o.default.createElement("span",{className:"close-span",onClick:function(){d.goBack(),e.setState({filterContent:""}),f&&f("")}},"取消"):"")}}]),t}();t.default=c},1480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),l=(a=i)&&a.__esModule?a:{default:a},u=n(16),c=(n(9),n(31)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1079));function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=(0,c.connect)(function(e){return e})(r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={chooseName:r.props.editApprovalState.getIn(["views","modelName"])||"全部",chooseCode:r.props.editApprovalState.getIn(["views","processCode"])||""},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,r=t.editApprovalState,a=t.history,o=this.state,i=o.chooseName,c=o.chooseCode,f=r.get("processModelList");r.get("views"),r.get("modelName");return l.default.createElement(u.Container,{className:"spd",style:{background:"#fff"}},l.default.createElement("div",{className:"search-title"},"类型"),l.default.createElement(u.ScrollView,{className:"search-spd"},l.default.createElement("div",{className:"search-type"},f.map(function(t){return l.default.createElement("span",{key:t.get("processCode"),className:i===t.get("modelName")?"type-active":"",onClick:function(){return e.setState({chooseName:t.get("modelName"),chooseCode:t.get("processCode")})}},t.get("modelName"))}))),l.default.createElement("div",{className:"bottom-btn"},l.default.createElement(u.ButtonGroup,{className:!0},l.default.createElement(u.Button,{onClick:function(){n(s.changeModelString(["views","modelName"],i)),n(s.changeModelString(["views","processCode"],"PROCESS_CODE_ALL"!==c?c:"")),a.goBack()}},l.default.createElement("span",null,"确定")))))}}]),t}())||r;t.default=d},1481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=(r=o)&&r.__esModule?r:{default:r},l=n(9),u=n(1282),c=n(16),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1079));function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.highlightWords=function(e,t){if(!t)return e;var n=e.split(t);return i.default.createElement("span",{className:"highlight-words"},n.map(function(e,r){return i.default.createElement(o.Fragment,null,"  ",i.default.createElement("span",null,e)," ",n.length-1>r?i.default.createElement("span",{style:{color:"#FF8348"}},t):""," ")}))},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),a(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.i,r=t.v,a=t.selectList,o=void 0===a?(0,l.fromJS)([]):a,f=t.dispatch,d=t.searchContent,p=r.get("finishTime")||r.get("createTime"),m=o.some(function(e){return e.get("processInstanceId")===r.get("processInstanceId")}),g=void 0;return g=r.get("finishTime")?"agree"===r.get("result")?"#5e81d1":"#ff3b30":"#ffb549",i.default.createElement(c.Row,{key:n,className:"approval-spd-item"},i.default.createElement("div",{className:"spd-content",onClick:function(){if(m){var e=o.findIndex(function(e){return e.get("processInstanceId")===r.get("processInstanceId")});f(s.changeModelString(["views","selectList"],o.splice(e,1)))}else f(s.changeModelString(["views","selectList"],o.push((0,l.fromJS)({processInstanceId:r.get("processInstanceId"),isFinshed:!!r.get("finishTime"),title:r.get("processTitle"),result:r.get("result")}))))}},i.default.createElement("span",null,r.get("originateAvatar")?i.default.createElement("img",{className:"approval-avatar-img",src:r.get("originateAvatar")}):i.default.createElement("span",{className:"approval-all-item-main-avatar-skeleton"})),i.default.createElement("span",null,i.default.createElement("span",null,this.highlightWords(r.get("processTitle"),d)),Object.keys(r.get("displayMap").toJS()).map(function(t){return i.default.createElement("span",{key:t},u.containType[t]+"：",e.highlightWords(r.getIn(["displayMap",t]),d))}),i.default.createElement("span",null,p.substr(0,10)),i.default.createElement("span",{style:{color:g}},r.get("finishTime")?"agree"===r.get("result")?"审批通过":"审批拒绝":"审批中")),i.default.createElement("span",null,i.default.createElement(c.Checkbox,{checked:m}))))}}]),t}();t.default=d},1482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=(r=o)&&r.__esModule?r:{default:r};n(9),n(31);var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.tabs,n=void 0===t?[]:t,r=e.value,a=e.onChange;return i.default.createElement("div",{className:"xfn-tabs"},n.map(function(e,t){return i.default.createElement("span",{key:t,className:r===e.title?"active":"",onClick:function(){a(e,t)}},e.title)}))}}]),t}();t.default=l},1708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=p(n(0)),o=n(16),i=n(125),l=p(n(1709)),u=p(n(1733)),c=p(n(1734)),s=p(n(1735)),f=p(n(1736)),d=p(n(1480));function p(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"render",value:function(){return a.default.createElement(o.Container,null,a.default.createElement(i.Route,{path:"/editApproval/index",component:l.default}),a.default.createElement(i.Route,{path:"/editApproval/detail",component:u.default}),a.default.createElement(i.Route,{path:"/editApproval/stock",component:c.default}),a.default.createElement(i.Route,{path:"/editApproval/choose/related",component:s.default}),a.default.createElement(i.Route,{path:"/editApproval/search/content",component:f.default}),a.default.createElement(i.Route,{path:"/editApproval/search/type",component:d.default}))}}]),t}();t.default=m},1709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=m(o),l=n(31),u=(n(125),n(9),n(16));n(1475);var c=n(1282),s=p(n(1079)),f=m(n(1479)),d=p(n(10));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=(0,l.connect)(function(e){return e})(r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={searchContent:"",filterContent:""},g(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),a(t,[{key:"componentDidMount",value:function(){this.props.dispatch(s.getApprovalList()),d.setTitle({title:"发起审批"}),d.setIcon({showIcon:!1}),d.setRight({show:!1})}},{key:"componentWillUnmount",value:function(){this.props.dispatch(s.changeModelString(["views","searchContent"],""))}},{key:"render",value:function(){var e=this.props,t=e.editApprovalState,n=e.history,r=e.dispatch,a=t.get("dataList"),l=t.getIn(["views","searchContent"]),d=t.getIn(["views","isLoaded"]),p=0===a.size||a.every(function(e){return!e.get("modelList").size}),m=!p&&a.every(function(e){return!e.get("modelList").filter(function(e){return!l||e.get("modelName").indexOf(l)>-1}).size});return i.default.createElement(u.Container,{style:{background:"#fff"}},i.default.createElement("div",{className:"lrsp-tab-bar-item-top"},i.default.createElement(f.default,{placeholder:"搜索审批",onSubmit:function(e){return r(s.changeModelString(["views","searchContent"],e))}})),(p||m)&&d?i.default.createElement(u.Row,{className:"lrsp-container-list empty-approval"},i.default.createElement("div",{className:"lrsp-container-list-title"},"审批模版"),p?i.default.createElement(o.Fragment,null,i.default.createElement("img",{src:"https://xfn-ddy-website.oss-cn-hangzhou.aliyuncs.com/utils/img/icons/site.png"}),i.default.createElement("span",{className:"text1"},"当前账套无审批单")):"",m?i.default.createElement("div",{className:"text2"},"未搜索到相关审批单"):""):i.default.createElement(u.ScrollView,null,a.map(function(e,t){return i.default.createElement(u.Row,{className:"lrsp-container-list",key:t},i.default.createElement("div",{className:"lrsp-container-list-title"},e.get("groupName")),i.default.createElement("div",{className:"tab-list"},e.get("modelList").filter(function(e){return!l||e.get("modelName").indexOf(l)>-1}).map(function(e){return i.default.createElement("div",{key:e.get("modelCode"),className:"lrsp-container-item",onClick:function(){r(s.initModel()),r(s.getModelInfo(e.get("modelCode"))),r(s.changeModelString(["views","title"],e.get("modelName"))),n.push("/editApproval/detail")}},i.default.createElement("span",{className:"icon-content",style:{background:{debit:"rgb(255,131,72)",credit:"rgb(94,129,209)",calculate:"rgb(242,86,67)"}[c.type[e.get("jrCategoryType")]]||"rgb(255,131,72)"}},i.default.createElement(u.Icon,{className:"icon",type:{debit:"fqsp-sr",credit:"fqsp-zc",calculate:"fqsp-nb"}[c.type[e.get("jrCategoryType")]]||"fqsp-sr",size:"20",color:"#fff"})),i.default.createElement("p",{className:"icon-text"},e.get("modelName")))})))})))}}]),t}())||r;t.default=y},1711:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(0)),o=n(16),i=(u(n(1477)),u(n(1225))),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1079));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={visible:!1},s(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.idx,n=e.isMx;(0===t||!n)&&this.props.dispatch(l.getCategorySubList(this.props.modelInfo.get("jrCategoryId"),this.props.modelInfo.get("jrCategoryProperty")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,r=t.item,u=t.dispatch,s=(t.modelInfo,t.onChange,t.className),f=t.placeArr,d=this.state.visible,p=this.props.district.toJS();return function e(t){t.forEach(function(t){t.key=t.name,t.label=t.name,t.childList.length&&e(t.childList)})}(p),a.default.createElement(o.ChosenPicker,{className:s,visible:d,disabled:n,district:p,onChange:function(e){u(l.changeModelString([].concat(c(f),["name"]),e.name)),u(l.changeModelString([].concat(c(f),["value"]),e.fullName))},onCancel:function(){e.setState({visible:!1})}},a.default.createElement(i.default,{label:r.get("label"),placeHolder:r.get("placeHolder"),value:r.get("name"),onDelete:function(){u(l.changeModelString([].concat(c(f),["name"]),"")),u(l.changeModelString([].concat(c(f),["value"]),""))},StarDisabled:!r.get("required")}))}}]),t}();t.default=f},1722:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=p(o),l=n(9),u=n(16),c=(n(13),d(n(10)),d(n(25)),d(n(1069))),s=p(n(1254)),f=d(n(1079));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},m(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"componentDidMount",value:function(){var e=((this.props.item.getIn(["detailList",0])||[]).find(function(e){return"CH"===e.get("jrComponentType")})||(0,l.fromJS)({})).get("selectValueScope");this.props.dispatch(f.getApprovalStockList(e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList"))),this.props.dispatch(f.getApprovalStockCard("ALL",!0,e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.district,o=t.cardList,d=t.cardDisabled,p=(t.categoryType,t.history),m=t.item,g=t.index,y=this.state,v=(y.isAll,y.visible),h=(y.idx,y.categoryValue),b=m.get("detailList")||(0,l.fromJS)([]),T=m.getIn(["detailList",0]).find(function(e){return"CH"===e.get("jrComponentType")})||(0,l.fromJS)({}),C=(m.getIn(["detailList",0]).find(function(e){return"CH"===e.get("jrComponentType")}),T.get("selectValueScope")),_=a.toJS(),E=o.toJS().map(function(e){return r({},e,{name:e.code+" "+e.name,label:e.name})});return _.unshift({name:"全部",key:"ALL",uuid:"ALL",childList:[]}),function e(t){t.forEach(function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(_),i.default.createElement("div",{className:""},i.default.createElement(u.ChosenPicker,{visible:v,type:"card",multiSelect:!0,title:"请选择存货",icon:{type:"inventory-add",onClick:function(){n(f.changeModelString(["modelInfo","callback"],function(e){var t=b.get(0).map(function(e){return e.set("value","").set("amount","").set("price","").set("unit","")}),r=t.findIndex(function(e){return"CH"===e.get("jrComponentType")}),a=t.findIndex(function(e){return"MX_AMOUNT"===e.get("jrComponentType")}),o=t;o=o.setIn([r,"value"],e.code+"-"+e.name).setIn([r,"code"],e.code).setIn([r,"name"],e.name).setIn([r,"unit"],(0,l.fromJS)(e.unit)).setIn([r,"unitPriceList"],(0,l.fromJS)(e.unitPriceList)).setIn([a,"unit"],"").setIn([a,"price"],""),e.isOpenedQuantity?e.isOpenedQuantity&&t.every(function(e){return"数量"!==e.get("label")})&&(o=o.push((0,l.fromJS)({label:"数量",componentType:"NumberField"}))):o=o.filter(function(e){return"数量"!==e.get("label")}),n(f.changeModelString(["componentList",g,"detailList",b.size],o))})),n(c.inventorySettingInit()),n(c.beforeAddCard(function(){p.push("/config/inventory/inventoryInsert")},"editApproval"))}},district:_,cardList:E,value:h,onChange:function(t){e.setState({categoryValue:t.key}),n(f.getApprovalStockCard(t.key,t.top,C.get("categoryList"),C.get("inCardList"),C.get("outCardList"),C.get("subCategoryList")))},onOk:function(e){var t=b.get(0).map(function(e){return e.set("value","").set("amount","").set("price","").set("unit","")}),r=(0,l.fromJS)(e).map(function(e){var n=t;e.get("isOpenedQuantity")?e.get("isOpenedQuantity")&&t.every(function(e){return"数量"!==e.get("label")})&&(n=t.push((0,l.fromJS)({label:"数量",componentType:"NumberField"}))):n=t.filter(function(e){return"数量"!==e.get("label")});var r=n.findIndex(function(e){return"CH"===e.get("jrComponentType")});return n=n.setIn([r,"value"],e.get("code")+"-"+e.get("label")).setIn([r,"code"],e.get("code")).setIn([r,"name"],e.get("label")).setIn([r,"unit"],(0,l.fromJS)(e.get("unit"))).setIn([r,"unitPriceList"],(0,l.fromJS)(e.get("unitPriceList")))});n(f.changeModelString(["componentList",g,"detailList"],b.concat(r)))},onCancel:function(){e.setState({visible:!1})}},i.default.createElement("span",null)),i.default.createElement("div",null,b.map(function(e,t){var r=e.some(function(e){return"CK"===e.get("jrComponentType")}),a=(e.some(function(e){return"数量"===e.get("label")}),e.find(function(e){return"CH"===e.get("jrComponentType")})||(0,l.fromJS)({})),o=e.find(function(e){return"CK"===e.get("jrComponentType")})||(0,l.fromJS)({}),c=e.find(function(e){return"MX_AMOUNT"===e.get("jrComponentType")})||(0,l.fromJS)({}),m=e.find(function(e){return"数量"===e.get("label")})||(0,l.fromJS)({}),y=(c.get("amount")&&Number(c.get("amount")),c.get("price")&&Number(c.get("price")),c.get("unit"),m.get("value")&&Number(m.get("value")),a.get("value")||""),v=o.get("value");return i.default.createElement("div",{key:t,className:"approval-inventory",onClick:function(){p.push("/editApproval/stock"),n(f.changeModelString(["views","idx"],t))},style:{borderBottom:"1px solid #eeeeee"}},i.default.createElement("div",{className:"approval-inventory-title split-area"},i.default.createElement("span",null,"存货明细(",t+1,")"),b.size>1?i.default.createElement("span",{className:d?"approval-placeholder":"approval-blue",onClick:function(e){e.stopPropagation(),n(f.changeModelString(["componentList",g,"detailList"],b.splice(t,1)))}},"删除"):i.default.createElement("span",null)),i.default.createElement("div",{className:"approval-more-card",onClick:function(){}},i.default.createElement("div",{className:"approval-single"},i.default.createElement(u.Row,null,i.default.createElement("div",{className:"approval-inventory-item"},i.default.createElement("span",null,i.default.createElement(s.default,null),"存货:"),i.default.createElement("span",{className:y?"":"approval-placeholder"},y.replace("-"," ")||" 未选择"))),r?i.default.createElement(u.Row,null,i.default.createElement("div",{className:"approval-inventory-item"},i.default.createElement("span",null,i.default.createElement(s.default,null),"仓库:"),i.default.createElement("span",{className:v?"":"approval-placeholder"},v||" 未选择"))):"",i.default.createElement(u.Row,{className:"approval-inventory-item"},i.default.createElement("div",{className:"approval-inventory-item"},i.default.createElement("span",null,i.default.createElement(s.default,null),"金额:"),i.default.createElement("span",null,i.default.createElement("span",null,c.get("value")))))),i.default.createElement(u.Icon,{type:"arrow-right"})))})),i.default.createElement("div",{className:"split-area"},i.default.createElement("div",null),i.default.createElement("div",{className:"inventory-bottom",style:{marginTop:"0.1rem"}},i.default.createElement("div",{className:d?"approval-placeholder":"approval-blue",onClick:function(){e.setState({visible:!0,idx:b.size})}},"+添加存货明细"))))}}]),t}();t.default=g},1723:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(56)),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(57);var o=n(0),i=c(o),l=(n(16),n(13)),u=c(n(1254));c(n(1225)),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1079));function c(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),a(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.placeHolder,a=(e.value,e.className),c=e.onChange,s=(e.dispatch,e.type),f=e.item;return"money"===s?i.default.createElement(o.Fragment,null,i.default.createElement("div",{className:["approval-item",a].join(" "),style:{marginBottom:0,borderBottom:"1px solid #eee"}},i.default.createElement(r.default,{value:f.get("value"),placeholder:n,onChange:function(e){/^-{0,1}\d*\.?\d{0,2}$/g.test(e)&&c(e)}},f.get("required")?i.default.createElement(u.default,null):"",t)),i.default.createElement("div",{className:["approval-item input-disabled",a].join(" ")},i.default.createElement("label",{style:{color:"#999"}},"大写"),i.default.createElement("div",{className:"approval-text",style:{color:"#999"}},i.default.createElement("span",null,(0,l.chineseAmount)(f.get("value")))))):i.default.createElement("div",{className:["approval-item",a].join(" ")},i.default.createElement(r.default,{value:f.get("value"),placeholder:n,onChange:function(e){"number"===s?/^-{0,1}\d*\.?\d{0,2}$/g.test(e)&&c(e):c(e)}},f.get("required")?i.default.createElement(u.default,null):"",t))}}]),t}();t.default=s},1724:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(0)),i=n(16),l=f(n(1225)),u=s(n(1079)),c=n(1282);f(n(2)),s(n(1256));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={visible:!1,categoryValue:"ALL"},r.loop=function(e){e.forEach(function(e){e.key=e.uuid,e.label=e.name,e.childList.length&&r.loop(e.childList)})},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"componentDidMount",value:function(){var e=this.props.item.get("selectValueScope"),t=this.props,n=t.idx,r=t.isMx,a=0===n||!r;a&&this.props.dispatch(u.getApprovalProjectList(e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList"))),a&&this.props.dispatch(u.getApprovalProjectCard("ALL",!0,e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,a=t.district,s=t.dispatch,f=t.item,p=t.cardList,m=t.index,g=t.onChange,y=t.history,v=t.isMx,h=t.placeArr,b=t.itemList,T=t.size,C=t.innerIndex,_=this.state,E=_.categoryValue,I=_.visible,S=f.get("selectValueScope"),O=a.toJS(),L=p.toJS().map(function(e){return(0,c.commonCode)(e)?r({},e,{label:e.name}):r({},e,{name:e.code+" "+e.name,label:e.name})}),N=f.get("value")||"";return O.unshift({name:"全部",key:"ALL",uuid:"ALL",childList:[]}),this.loop(O),o.default.createElement(i.ChosenPicker,{type:"card",visible:I,disabled:n,district:O,cardList:L,value:E,onChange:function(t){e.setState({categoryValue:t.key}),s(u.getApprovalProjectCard(t.key,t.top,S.get("categoryList"),S.get("inCardList"),S.get("outCardList"),S.get("subCategoryList")))},icon:{type:"project-add",onClick:function(){s(u.beforeInsertProjectCard()),s(u.changeModelString(["modelInfo","callback"],function(e){if(v&&N){var t=b.get(0).map(function(e){return e.set("value","").set("name","").set("code","")}).setIn([C,"value"],e.code+"-"+e.name).setIn([C,"code"],e.code).setIn([C,"name"],e.name);s(u.changeModelString(["componentList",m,"detailList",T],t))}else g(e.code+"-"+e.name),s(u.changeModelString([].concat(d(h),["code"]),e.code)),s(u.changeModelString([].concat(d(h),["name"]),e.name))})),y.push("/config/project/projectCard")}},onOk:function(e){g((0,c.commonCode)(e[0])?e[0].label:e[0].code+"-"+e[0].label),s(u.changeModelString([].concat(d(h),["code"]),e[0].code)),s(u.changeModelString([].concat(d(h),["name"]),e[0].label))},onCancel:function(){e.setState({visible:!1})}},o.default.createElement(l.default,{StarDisabled:!f.get("required"),value:N.replace("-"," "),label:f.get("label"),placeHolder:f.get("placeHolder"),onDelete:function(){g("")}}))}}]),t}();t.default=m},1725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),i=n(16),l=s(n(1225)),u=c(n(1079));c(n(1255));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={visible:!1,categoryValue:"ALL"},r.loop=function(e){e.forEach(function(e){e.key=e.uuid,e.label=e.name,e.childList.length&&r.loop(e.childList)})},r.lastArr=function(){var e=[].concat(f(r.props.placeArr));return e.length=e.length-1,e.push(r.props.size),e},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"componentDidMount",value:function(){var e=this.props.item.get("selectValueScope"),t=this.props,n=t.idx,r=t.isMx,a=0===n||!r;a&&this.props.dispatch(u.getApprovalCurrentList(e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList"))),a&&this.props.dispatch(u.getApprovalCurrentCard("ALL",!0,e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,a=t.district,c=t.dispatch,s=t.item,d=t.cardList,p=t.index,m=t.onChange,g=t.modelInfo,y=t.history,v=t.isMx,h=t.placeArr,b=t.size,T=t.innerIndex,C=t.itemList,_=this.state,E=_.categoryValue,I=_.visible,S=s.get("selectValueScope"),O=(g.get("modelCode"),a.toJS()),L=d.toJS().map(function(e){return r({},e,{name:e.code+" "+e.name,label:e.name})}),N=s.get("value")||"";return O.unshift({name:"全部",key:"ALL",uuid:"ALL",childList:[]}),this.loop(O),o.default.createElement(i.ChosenPicker,{type:"card",title:"请选择往来单位",visible:I,disabled:n,district:O,cardList:L,value:E,icon:{type:"current-add",onClick:function(){c(u.changeModelString(["modelInfo","callback"],function(e){if(v&&N){var t=C.get(0).map(function(e){return e.set("value","").set("name","").set("code","")}).setIn([T,"value"],e.code+"-"+e.name).setIn([T,"code"],e.code).setIn([T,"name"],e.name);c(u.changeModelString(["componentList",p,"detailList",b],t))}else m(e.code+"-"+e.name),c(u.changeModelString([].concat(f(h),["code"]),e.code)),c(u.changeModelString([].concat(f(h),["name"]),e.name))})),c(u.beforeAddManageTypeCard(function(){y.push("/config/relative/relativeCardInsert")},"insert"))}},onChange:function(t){e.setState({categoryValue:t.key}),c(u.getApprovalCurrentCard(t.key,t.top,S.get("categoryList"),S.get("inCardList"),S.get("outCardList"),S.get("subCategoryList")))},onOk:function(e){m(e[0].code+"-"+e[0].label),c(u.changeModelString([].concat(f(h),["code"]),e[0].code)),c(u.changeModelString([].concat(f(h),["name"]),e[0].label))},onCancel:function(){e.setState({visible:!1})}},o.default.createElement(l.default,{StarDisabled:!s.get("required"),value:N.replace("-"," "),label:s.get("label"),placeHolder:s.get("placeHolder"),onDelete:function(){m("")}}))}}]),t}();t.default=p},1726:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(0)),o=n(16),i=u(n(1225)),l=n(13);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={visible:!1},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,r=t.district,u=t.className,c=t.onChange,s=t.item,f=t.style,d=this.state.visible;return a.default.createElement("div",{onClick:function(){return e.setState({visible:!0})},className:u,style:f},a.default.createElement(o.DatePicker,{visible:d,disabled:n,district:r,format:s.get("dateFormat"),value:s.get("value"),onChange:function(e){"yyyy-MM-dd hh:mm"===s.get("dateFormat")?c(e):c(new l.DateLib(new Date(e)).valueOf())},onCancel:function(){e.setState({visible:!1})}},a.default.createElement(i.default,{value:s.get("value"),label:s.get("label"),placeHolder:s.get("placeHolder"),onDelete:c,StarDisabled:!s.get("required")})))}}]),t}();t.default=s},1727:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(9),o=f(n(0)),i=(n(31),n(16)),l=f(n(195)),u=s(n(1079)),c=s(n(10));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={visible:!1},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=(e.disabled,e.lastCategory,e.categoryType,e.isOpenedWarehouse,e.placeArr),n=e.item,r=e.dispatch,s=e.uploadKeyJson,f=(this.state.visible,n.get("value")||(0,a.fromJS)([]));return o.default.createElement(i.Row,{className:"approval-pic"},o.default.createElement("div",null,"图片"),o.default.createElement("div",{className:"pic-container"},f.map(function(e,n){return o.default.createElement("div",{className:"mx-img"},o.default.createElement("img",{onClick:function(){if(e.get("size")>8192)return c.toast.info("文件过大，暂不支持预览。");var t=f.toJS().map(function(e){return e.signedUrl});c.previewImage({urls:t,current:e.get("signedUrl"),onSuccess:function(e){},onFail:function(){}})},src:e.get("signedUrl")}),o.default.createElement(i.Icon,{className:"pic-close",type:"preview",onClick:function(){r(u.changeModelString([].concat(d(t),["value"]),f.splice(n,1)))}}))}),o.default.createElement("div",{className:"add-icon"},o.default.createElement(l.default,{type:"Image",enclosureList:f,uploadKeyJson:s,isCompression:!1,uploadFiles:function(e){r(u.uploadFiles.apply(u,[f,[].concat(d(t),["value"])].concat(d(e))))},getUploadGetTokenFetch:function(){r(u.getUploadGetTokenFetch())}}))))}}]),t}();t.default=m},1728:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=f(n(0)),o=(n(16),f(n(1225))),i=s(n(1079)),l=s(n(10)),u=n(24),c=s(n(25));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=(e.disabled,e.dispatch),n=e.item,r=(e.cardList,e.index,e.onChange,e.placeArr),s=n.get("value")||[];return a.default.createElement(o.default,{type:"multiple",value:n.get("name"),label:n.get("label"),placeHolder:n.get("placeHolder"),StarDisabled:!n.get("required"),onClick:function(){var e,a,o,f;e=n.get("choice"),a=s,o=function(e){var n=e.map(function(e){return e.name}),a=e.map(function(e){return e.emplId});t(i.changeModelString([].concat(d(r),["value"]),a)),t(i.changeModelString([].concat(d(r),["name"]),n))},f="",u.ROOTURL.indexOf("mtst.xfannix.com")>-1?f=c.APPID_TEST:u.ROOTURL.indexOf("mpre.xfannix.com")>-1?f=c.APPID_PREF:u.ROOTURL.indexOf("mobile.xfannix.com")>-1&&(f=c.APPID_FORM),l.complexPicker({title:"选择联系人",corpId:sessionStorage.getItem("corpId"),multiple:e,limitTips:"超出了",maxUsers:1e3,pickedUsers:a,pickedDepartments:[],disabledUsers:[],disabledDepartments:[],requiredUsers:[],requiredDepartments:[],appId:f,permissionType:"xxx",responseUserOnly:!0,startWithDepartmentId:0,onSuccess:function(e){e.users.length&&o(e.users)},onFail:function(e){console.log(JSON.stringify(e))}})},onDelete:function(){t(i.changeModelString([].concat(d(r),["value"]),[])),t(i.changeModelString([].concat(d(r),["name"]),[]))}})}}]),t}();t.default=p},1729:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(9),o=u(n(0)),i=n(16),l=(u(n(1254)),u(n(1225)));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={visible:!1},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.label,r=t.placeHolder,u=(t.type,t.disabled),c=t.item,s=void 0===c?(0,a.fromJS)({}):c,f=t.district,d=t.onChange,p=(t.dispatch,t.className),m=(t.placeArr,this.state.visible),g=s.get("value")?s.get("value").toJS():"",y=f.size?f.toJS():(s.get("selectValueList")||(0,a.fromJS)([])).toJS().map(function(e){return{key:e,value:e}});return o.default.createElement(i.Multiple,{className:p,visible:m,disabled:u,district:y,value:g,onOk:function(e){d((0,a.fromJS)(e.map(function(e){return e.key})))},onCancel:function(){e.setState({visible:!1})}},o.default.createElement(l.default,{type:"multiple",value:g,label:n,placeHolder:r,onDelete:function(e){d("")},StarDisabled:!s.get("required")}))}}]),t}();t.default=s},1730:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(9),o=f(n(0)),i=(n(31),n(16)),l=s(n(10)),u=n(13),c=(f(n(195)),f(n(129)),s(n(1079)));n(186);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={visible:!1},r.isImage=function(e){var t=e.split("."),n=t[t.length-1];return!!["jpeg","jpg","png","bmp","gif","svg","webp"].includes(n)},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=(t.disabled,t.lastCategory,t.categoryType,t.isOpenedWarehouse,t.placeArr),r=t.item,s=t.dispatch,f=t.spaceId,p=(t.index,this.state.visible,r.get("value")||(0,a.fromJS)([]));r.get("valueYl")||(0,a.fromJS)([]);return o.default.createElement(i.Row,{className:"approval-fj"},o.default.createElement("div",null,"附件"),o.default.createElement("div",{className:"fj-container"},p.map(function(t,r){return o.default.createElement("div",{className:"mx-fj"},o.default.createElement("div",{className:"fj-img"},o.default.createElement("img",{src:(0,u.showImg)("image"===t.get("type")||e.isImage(t.get("fileName"))?"TRUE":"",t.get("fileName"))})),o.default.createElement("div",{className:"fj-name"},o.default.createElement("span",null,t.get("fileName")),o.default.createElement("span",null,(t.get("fileSize")/1024).toFixed(2)+"KB")),o.default.createElement("span",{onClick:function(){"image"===t.get("type")||e.isImage(t.get("fileName"))?l.toast.info("附件图片不支持预览"):s(c.getCustomSpaceAndPreview(t,f))}},"预览"),o.default.createElement(i.Icon,{className:"fj-close",type:"preview",onClick:function(){s(c.changeModelString([].concat(d(n),["value"]),p.splice(r,1)))}}))}),o.default.createElement("div",{className:"add-icon",onClick:function(){s(c.getSpaceInfo(function(e){s(c.changeModelString([].concat(d(n),["value"]),p.concat((0,a.fromJS)(e))))}))}},o.default.createElement(i.Icon,{type:"add"}))))}}]),t}();t.default=m},1731:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(198)),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(199);var o=n(0),i=u(o),l=(n(16),n(13),u(n(1254)),u(n(1225)));!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1079));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=(e.StarDisabled,e.ArrowDisabled,e.placeHolder),a=(e.value,e.className),u=e.onChange,c=(e.dispatch,e.type),s=e.item;return i.default.createElement(o.Fragment,null,i.default.createElement(l.default,{multiple:"multiple"===c,label:t,placeHolder:"",StarDisabled:!s.get("required"),ArrowDisabled:!0,style:{marginBottom:0}}),i.default.createElement(r.default,{className:["approval-textarea",a].join(" "),value:s.get("value"),placeholder:n,onChange:u,rows:4}))}}]),t}();t.default=c},1732:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(9),o=n(0),i=s(o),l=n(16),u=(s(n(1254)),s(n(1225))),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1079));function s(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={visible:!1},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.placeHolder,r=e.type,s=void 0===r?"single":r,d=(e.disabled,e.item),p=void 0===d?(0,a.fromJS)({}):d,m=(e.district,e.onChange),g=e.dispatch,y=(e.className,e.history),v=e.index,h=e.placeArr,b=(this.state.visible,p.get("value")&&p.get("value").size?p.get("value").map(function(e,t){return(0,a.fromJS)({processInstanceId:e,title:p.getIn(["titleList",t]),isFinshed:p.getIn(["isFinshedList",t]),result:p.getIn(["result",t])})}):(0,a.fromJS)([]));return i.default.createElement(o.Fragment,null,i.default.createElement(u.default,{className:p.get("value")&&p.get("value").size?"mx-item":"",multiple:"multiple"===s,label:t,placeHolder:n,onDelete:function(e){m("")},onClick:function(){y.push("/editApproval/choose/related"),g(c.changeModelString(["views","componentIndex"],v)),g(c.changeModelString(["views","selectList"],b))},StarDisabled:!p.get("required")}),i.default.createElement(l.Row,{className:"spd-row",style:{display:p.get("value")&&p.get("value").size?"":"none"}},b.map(function(e,t){var n=void 0;return n=e.get("isFinshed")?"agree"===e.get("result")?"#5e81d1":"#ff3b30":"#ffb549",i.default.createElement("div",{className:"spd-area",key:e.get("index")},i.default.createElement(l.Icon,{type:"related"}),i.default.createElement("span",null,e.get("title")),i.default.createElement("span",{style:{color:n}},e.get("isFinshed")?"agree"===e.get("result")?"审批通过":"审批拒绝":"审批中"),i.default.createElement(l.Icon,{type:"close",onClick:function(){g(c.changeModelString([].concat(f(h),["value"]),p.get("value").splice(t,1))),g(c.changeModelString([].concat(f(h),["isFinshedList"]),p.get("isFinshedList").splice(t,1))),g(c.changeModelString([].concat(f(h),["titleList"]),p.get("titleList").splice(t,1))),g(c.changeModelString([].concat(f(h),["result"]),p.get("result").splice(t,1)))}}))})))}}]),t}();t.default=p},1733:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=v(o),l=n(31),u=n(9),c=(v(n(2)),y(n(25)),n(13)),s=n(1476),f=n(16);n(1475);var d=n(1282),p=y(n(10)),m=n(48),g=y(n(1079));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}var h=(0,l.connect)(function(e){return e})(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"componentDidMount",value:function(){this.props.dispatch(m.homeActions.setDdConfig()),document.getElementsByClassName("scroll-view")[0].addEventListener("scroll",function(e){e.target.scrollHeight<=e.target.clientHeight&&(e.target.scrollTop=0)},!1);var e=this.props.editApprovalState.getIn(["views","title"]);p.setTitle({title:e})}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.history,r=e.editApprovalState,a=r.get("componentList"),l=r.get("modelInfo"),m=r.get("categoryList")||(0,u.fromJS)([]),y=(r.get("categoryCardList")||(0,u.fromJS)([]),r.get("currentCardTree")||(0,u.fromJS)([])),v=r.get("currentCardList")||(0,u.fromJS)([]),h=r.get("stockCardTree")||(0,u.fromJS)([]),b=r.get("stockCardList")||(0,u.fromJS)([]),T=r.get("projectCardTree")||(0,u.fromJS)([]),C=r.get("projectCardList")||(0,u.fromJS)([]),_=r.get("spaceId"),E=r.get("uploadKeyJson"),I=a.findIndex(function(e){return"MX"===e.get("jrComponentType")&&e.getIn(["detailList",0]).some(function(e){return"CH"===e.get("jrComponentType")})});return i.default.createElement(f.Container,{className:"edit-approval"},i.default.createElement(f.ScrollView,{className:"approval-view",flex:"1"},a.map(function(e,r){if("MX"===e.get("jrComponentType")){e.get("detailList");return I>-1?i.default.createElement(o.Fragment,{key:e.get("componentId")},i.default.createElement(s.InventoryComp,{item:e,dispatch:t,key:e.get("componentId"),district:h,cardList:b,modelInfo:l,index:r,history:n}),i.default.createElement("div",{className:"mx-title",style:{paddingTop:0}},i.default.createElement("span",null,"总计：",(0,c.formatMoney)(e.get("detailList").reduce(function(e,t){return e+Number(t.find(function(e){return"MX_AMOUNT"===e.get("jrComponentType")}).get("amount")||0)},0))))):i.default.createElement(o.Fragment,{key:e.get("componentId")},e.get("detailList").map(function(a,c){return i.default.createElement(o.Fragment,{key:c},i.default.createElement("div",{className:"mx-title"},i.default.createElement("span",null,"明细（",c+1,"）"),e.get("detailList").size>1?i.default.createElement("span",{style:{color:"#5e81d1"},onClick:function(){var n=e.get("detailList").splice(c,1);t(g.changeModelString(["componentList",r,"detailList"],n))}},"删除"):""),a.map(function(o,f){var p={LSLB:m,WLDW:y,XM:T,BM:(o.get("extraSelectValueList")||(0,u.fromJS)([])).map(function(e){return e.set("key",e.get("name")).set("value",e.get("name"))})}[o.get("jrComponentType")]||(0,u.fromJS)([]),h={LSLB:m,XM:C,WLDW:v}[o.get("jrComponentType")]||(0,u.fromJS)([]),b={MoneyField:"money",NumberField:"number"}[o.get("componentType")],_=d.jrType[o.get("jrComponentType")]||d.formType[o.get("componentType")]||s.CommonRow;return i.default.createElement(_,{isMx:!0,className:"mx-item "+(f===a.size-1?"no-margin-bottom":""),item:o,dispatch:t,key:o.get("componentId"),label:o.get("label"),placeHolder:o.get("placeHolder"),district:p,cardList:h,jrComponentType:e.get("jrComponentType"),modelInfo:l,type:b,size:e.get("detailList").size,index:r,innerIndex:f,idx:c,itemList:e.get("detailList"),placeArr:["componentList",r,"detailList",c,f],onChange:function(e){t(g.changeModelString(["componentList",r,"detailList",c,f,"value"],e))},history:n})}))}),i.default.createElement("div",{className:"mx-icon",onClick:function(){t(g.changeModelString(["componentList",r,"detailList",e.get("detailList").size],e.getIn(["detailList",0]).map(function(e){return e.set("value","").set("name","").set("code","")})))}},i.default.createElement(f.Icon,{type:"add"})),i.default.createElement("div",{className:"mx-title",style:{paddingTop:0}},i.default.createElement("span",null,"总计：",(0,c.formatMoney)(e.get("detailList").reduce(function(e,t){return e+Number(t.find(function(e){return"MX_AMOUNT"===e.get("jrComponentType")}).get("value")||0)},0)))))}var S=e,O={LSLB:m,WLDW:y,XM:T,BM:(S.get("extraSelectValueList")||(0,u.fromJS)([])).map(function(e){return e.set("key",e.get("name")).set("value",e.get("name"))})}[S.get("jrComponentType")]||(0,u.fromJS)([]),L={LSLB:m,XM:C,WLDW:v}[S.get("jrComponentType")]||(0,u.fromJS)([]),N={MoneyField:"money",DDMultiSelectField:"multiple",NumberField:"number"}[S.get("componentType")],A=d.jrType[S.get("jrComponentType")]||d.formType[S.get("componentType")]||s.CommonRow;return i.default.createElement(A,{style:e.get("label")===e.get("dateRangeLabelFirst")&&"DDDateRangeField"===e.get("componentType")?{marginBottom:0,borderBottom:"1px solid #eee"}:{},uploadKeyJson:E,spaceId:_,item:S,dispatch:t,key:S.get("componentId"),label:S.get("label"),placeHolder:S.get("placeHolder"),district:O,cardList:L,jrComponentType:e.get("jrComponentType"),modelInfo:l,type:N,history:n,placeArr:["componentList",r],index:r,onChange:function(n){if("DDDateRangeField"===S.get("componentType")){if(e.get("label")===e.get("dateRangeLabelFirst")&&a.getIn([r+1,"value"])&&n>a.getIn([r+1,"value"]))return void p.toast.info(e.get("label")+"不得大于"+a.getIn([r+1,"label"]));if(e.get("label")===e.get("dateRangeLabelLast")&&a.getIn([r-1,"value"])&&n<a.getIn([r-1,"value"]))return void p.toast.info(a.getIn([r-1,"label"])+"不得大于"+e.get("label"))}if(t(g.changeModelString(["componentList",r,"value"],n)),"BM"===S.get("jrComponentType")){var o=a.find(function(e){return"BM"===e.get("jrComponentType")}).get("extraSelectValueList").find(function(e){return e.get("name")===n}).get("id");t(g.changeModelString(["views","departmentId"],o))}}})})),i.default.createElement("div",{className:"bottom-btn"},i.default.createElement(f.ButtonGroup,null,i.default.createElement(f.Button,{onClick:function(){var e=[];a.forEach(function(t){!t.get("value")&&t.get("required")&&e.push(t.get("label")),t.get("detailList")&&t.get("detailList").size&&t.get("detailList").map(function(t){return t.map(function(t){!t.get("value")&&t.get("required")&&e.push(t.get("label"))})})}),I>-1&&a.getIn([I,"detailList"]).some(function(e){var t=e.find(function(e){return"MX_AMOUNT"===e.get("jrComponentType")});return e.getIn([0,"unit","name"])&&!t.get("unit")})&&e.push("单位"),I>-1&&!a.getIn([I,"detailList"]).every(function(e){return e.find(function(e){return"MX_AMOUNT"===e.get("jrComponentType")}).get("amount")>0})&&e.push("金额"),e.length?p.toast.info(Array.from(new Set(e)).join("、")+"不能为空"):t(g.saveApprovalItem(function(){return t(g.initModel(l.get("modelCode")))}))}},i.default.createElement("span",null,"提交")))))}}]),t}())||r;t.default=h},1734:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=(a=l)&&a.__esModule?a:{default:a},c=n(31),s=n(9),f=n(16),d=n(13),p=y(n(10)),m=y(n(1069)),g=y(n(1079));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=(0,c.connect)(function(e){return e})(r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},r.confirmInfo=function(){var e=r.props,t=e.editApprovalState,n=e.dispatch,a=t.get("componentList"),o=t.get("views").get("idx"),i=a.find(function(e){return"MX"===e.get("jrComponentType")}).get("detailList").get(o)||(0,s.fromJS)([]),l=i.find(function(e){return"MX_AMOUNT"===e.get("jrComponentType")})||(0,s.fromJS)({}),u=l.get("unit")||"",c=a.findIndex(function(e){return"MX"===e.get("jrComponentType")}),f=i.findIndex(function(e){return"MX_AMOUNT"===e.get("jrComponentType")}),p=l.get("amount")?Number(l.get("amount")):0,m=(i.find(function(e){return"数量"===e.get("label")})||(0,s.fromJS)({})).get("value"),y=l.get("price")?Number(l.get("price")):0;n(u?g.changeModelString(["componentList",c,"detailList",o,f,"value"],(0,d.formatMoney)(p)+(u?"("+(m||"0.00")+u+" | "+(y||"0.00")+"元/"+u+")":"")):g.changeModelString(["componentList",c,"detailList",o,f,"value"],""+(0,d.formatMoney)(p)))},v(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),i(t,[{key:"componentDidMount",value:function(){p.setTitle({title:"存货明细"});var e=((this.props.editApprovalState.get("componentList").find(function(e){return"MX"===e.get("jrComponentType")}).getIn(["detailList",0])||[]).find(function(e){return"CH"===e.get("jrComponentType")})||(0,s.fromJS)({})).get("selectValueScope");this.props.dispatch(g.getApprovalStockCard("ALL",!0,e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList")))}},{key:"componentWillUnmount",value:function(){this.confirmInfo()}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,r=t.history,a=t.editApprovalState,i=this.state,l=(i.isAll,i.visible),c=i.categoryValue,y=(i.stockValue,i.warehouseValue,a.get("componentList")),v=a.get("views").get("idx"),h=y.find(function(e){return"MX"===e.get("jrComponentType")}),b=y.findIndex(function(e){return"MX"===e.get("jrComponentType")}),T=h.get("detailList"),C=T.size,_=T.get(v)||(0,s.fromJS)([]),E=_.some(function(e){return"CK"===e.get("jrComponentType")}),I=_.some(function(e){return"数量"===e.get("label")}),S=_.findIndex(function(e){return"CH"===e.get("jrComponentType")}),O=_.find(function(e){return"CH"===e.get("jrComponentType")})||(0,s.fromJS)({}),L=_.find(function(e){return"CK"===e.get("jrComponentType")})||(0,s.fromJS)({}),N=_.findIndex(function(e){return"CK"===e.get("jrComponentType")}),A=_.find(function(e){return"MX_AMOUNT"===e.get("jrComponentType")})||(0,s.fromJS)({}),w=_.findIndex(function(e){return"MX_AMOUNT"===e.get("jrComponentType")}),P=_.find(function(e){return"数量"===e.get("label")})||(0,s.fromJS)({}),M=_.findIndex(function(e){return"数量"===e.get("label")}),j=a.get("stockCardTree")||(0,s.fromJS)([]),R=a.get("stockCardList")||(0,s.fromJS)([]),D=L.get("selectValueList")||(0,s.fromJS)([]),k=O.get("unit")||(0,s.fromJS)({}),J=k.get("unitList")||(0,s.fromJS)([]),x=[{key:k.get("name"),value:k.get("name")}].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(J.toJS().map(function(e){return{key:e.name,value:e.name}}))),U=(O.get("unitPriceList")||(0,s.fromJS)([]),j.toJS());U.unshift({name:"全部",key:"ALL",uuid:"ALL",childList:[]});var G=R.toJS().map(function(e){return o({},e,{name:e.code+" "+e.name,label:e.name})}),H=(D.toJS(),O.get("selectValueScope")),F=(A.get("amount")&&Number(A.get("amount")),A.get("price")&&Number(A.get("price")),A.get("unit")||"");P.get("value");!function e(t){t.forEach(function(t){t.key=""+t.uuid,t.label=t.name,t.childList.length&&e(t.childList)})}(U);var V=v-1,Y=v+1;return u.default.createElement(f.Container,{className:"edit-running"},u.default.createElement(f.ChosenPicker,{visible:l,type:"card",title:"请选择存货",icon:{type:"inventory-add",onClick:function(){n(g.changeModelString(["modelInfo","callback"],function(e){var t=_;t=t.setIn([S,"value"],e.code+"-"+e.name).setIn([S,"code"],e.code).setIn([S,"name"],e.name).setIn([S,"unit"],(0,s.fromJS)(e.unit)).setIn([S,"unitPriceList"],(0,s.fromJS)(e.unitPriceList)).setIn([w,"unit"],"").setIn([w,"price"],""),e.isOpenedQuantity?e.isOpenedQuantity&&_.every(function(e){return"数量"!==e.get("label")})&&(t=t.push((0,s.fromJS)({label:"数量",componentType:"NumberField"}))):t=t.filter(function(e){return"数量"!==e.get("label")}),O.get("value")?n(g.changeModelString(["componentList",b,"detailList",T.size],t)):n(g.changeModelString(["componentList",b,"detailList",v],t))})),n(m.inventorySettingInit()),n(m.beforeAddCard(function(){r.push("/config/inventory/inventoryInsert")},"editApproval"))}},district:U,cardList:G,value:c,onChange:function(t){e.setState({categoryValue:t.key}),n(g.getApprovalStockCard(t.key,t.top,H.get("categoryList"),H.get("inCardList"),H.get("outCardList"),H.get("subCategoryList")))},onOk:function(e){if(e.length){var t=_;t=t.setIn([S,"value"],e[0].code+"-"+e[0].label).setIn([S,"code"],e[0].code).setIn([S,"name"],e[0].label).setIn([S,"unit"],(0,s.fromJS)(e[0].unit)).setIn([S,"unitPriceList"],(0,s.fromJS)(e[0].unitPriceList)).setIn([w,"unit"],"").setIn([w,"price"],""),e[0].isOpenedQuantity?e[0].isOpenedQuantity&&_.every(function(e){return"数量"!==e.get("label")})&&(t=t.push((0,s.fromJS)({label:"数量",componentType:"NumberField"}))):t=t.filter(function(e){return"数量"!==e.get("label")}),n(g.changeModelString(["componentList",b,"detailList",v],t))}},onCancel:function(){e.setState({visible:!1})}},u.default.createElement("span",null)),u.default.createElement(f.ScrollView,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll"},u.default.createElement("div",{className:"lrls-card"},u.default.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},u.default.createElement("span",null,"存货明细(",v+1,")")),u.default.createElement("div",{className:"lrls-more-card lrls-bottom"},u.default.createElement("label",null,"存货:"),u.default.createElement("div",{className:"lrls-single",onClick:function(){e.setState({visible:!0})}},u.default.createElement(f.Row,{className:"lrls-category lrls-padding"},O.get("value")?u.default.createElement("span",null," ",""+O.get("value").replace("-"," ")," "):u.default.createElement("span",{className:"lrls-placeholder"},"点击选择存货卡片"),u.default.createElement(f.Icon,{type:"triangle"})))),u.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:E?"":"none"}},u.default.createElement("label",null,"仓库:"),u.default.createElement(f.Single,{className:"lrls-single",district:D.toJS().map(function(e){return{key:e,value:e}}),value:L.get("value"),onOk:function(e){n(g.changeModelString(["componentList",b,"detailList",v,N,"value"],e.value))}},u.default.createElement(f.Row,{className:"lrls-category lrls-padding"},L.get("value")?u.default.createElement("span",null,L.get("value")," "):u.default.createElement("span",{className:"lrls-placeholder"},"点击选择仓库卡片"),u.default.createElement(f.Icon,{type:"triangle"})))),u.default.createElement(f.Row,{className:"yysr-amount lrls-bottom",style:{display:I?"":"none"}},u.default.createElement("label",null,"数量:"),u.default.createElement(f.TextListInput,{placeholder:"填写数量",value:P.get("value"),onChange:function(e){if(/^-{0,1}\d*\.?\d{0,4}$/g.test(e)&&(n(g.changeModelString(["componentList",b,"detailList",v,M,"value"],e)),A.get("price")>0)){var t=(0,d.decimal)(A.get("price")*Number(e));n(g.changeModelString(["componentList",b,"detailList",v,w,"amount"],t))}}}),u.default.createElement(f.Single,{className:"lrls-single",district:x,value:F,onOk:function(e){n(g.changeModelString(["componentList",b,"detailList",v,w,"unit"],e.value))}},u.default.createElement(f.Row,{className:"lrls-account lrls-type"},F?u.default.createElement("span",null," ",F," "):u.default.createElement("span",{className:"lrls-placeholder"},"选择数量单位"),u.default.createElement(f.Icon,{type:"triangle"})))),u.default.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:I?"":"none"}},u.default.createElement("label",null,"单价:"),u.default.createElement(f.TextListInput,{placeholder:"请填写单价",value:A.get("price"),onChange:function(e){if(/^\d*\.?\d{0,4}$/g.test(e)&&(n(g.changeModelString(["componentList",b,"detailList",v,w,"price"],e)),P.get("value")>0)){var t=(0,d.decimal)(P.get("value")*Number(e));n(g.changeModelString(["componentList",b,"detailList",v,w,"amount"],t))}}})),u.default.createElement("div",{className:"lrls-more-card",onClick:function(){O.get("value")||p.toast.info("请先选择存货卡片")}},u.default.createElement("label",null,"金额:"),u.default.createElement(f.TextListInput,{placeholder:"请填写金额",value:A.get("amount"),onChange:function(e){if(/^-{0,1}\d*\.?\d{0,4}$/g.test(e)&&(n(g.changeModelString(["componentList",b,"detailList",v,w,"amount"],e)),P.get("value")>0)){var t=(0,d.decimal)(Number(e)/P.get("value"),4);n(g.changeModelString(["componentList",b,"detailList",v,w,"price"],t))}}})))),u.default.createElement(f.ButtonGroup,null,u.default.createElement(f.Button,{disabled:V<=-1,onClick:function(){e.confirmInfo(),n(g.changeModelString(["views","idx"],V))}},u.default.createElement(f.Icon,{type:"arrow-right",style:{transform:"rotate(180deg)"}}),u.default.createElement("span",null,"上一明细")),u.default.createElement(f.Button,{onClick:function(){e.confirmInfo(),r.goBack()}},u.default.createElement(f.Icon,{type:"confirm"}),u.default.createElement("span",null,"确定")),u.default.createElement(f.Button,{disabled:Y==C,onClick:function(){e.confirmInfo(),n(g.changeModelString(["views","idx"],Y))}},u.default.createElement("span",null,"下一明细"),u.default.createElement(f.Icon,{type:"arrow-right"}))))}}]),t}())||r;t.default=h},1735:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=m(o),l=n(16),u=n(123),c=(n(9),n(31)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1079)),f=(m(n(1480)),m(n(1481))),d=n(1282),p=m(n(1482));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=(0,c.connect)(function(e){return e})(r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={searching:!1,selecting:!1},g(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),a(t,[{key:"componentDidMount",value:function(){var e=this.props.editApprovalState.get("views"),t=e.get("processCode"),n=e.get("relationType");this.props.dispatch(s.getRelationList({processCode:t,relationType:n,searchContent:""},1)),this.props.dispatch(s.getApprovalProcessModelList({}))}},{key:"render",value:function(){var e=this.props,t=e.editApprovalState,n=e.dispatch,r=e.history,a=this.state,c=(a.searching,a.selecting,t.get("processModelList"),t.get("approvalList")),m=t.get("views"),g=m.get("currentPage"),y=m.get("pageCount"),v=m.get("searchContent"),h=m.get("processCode"),b=m.get("relationType"),T=m.get("selectList"),C=m.get("componentIndex"),_=m.get("modelName");return i.default.createElement(l.Container,{className:"spd"},i.default.createElement(p.default,{tabs:d.tabs,value:{APPROVER:"我处理的",SPONSOR:"我发起的",CARBON_COPY:"抄送我的"}[b],onChange:function(e,t){n(s.getRelationList({processCode:h,relationType:["APPROVER","SPONSOR","CARBON_COPY"][t],searchContent:""},1))}}),i.default.createElement("div",{className:"search-approval"},i.default.createElement(l.Row,null,i.default.createElement("div",{className:"spd-search"},i.default.createElement("span",{onClick:function(){return r.push("/editApproval/search/content")}},i.default.createElement(l.Icon,{type:"search"}),"搜索"),i.default.createElement("span",{onClick:function(){return r.push("/editApproval/search/type")},style:h?{color:"#5e81d1"}:{}},i.default.createElement(l.Icon,{type:"select"}),"筛选"))),h?i.default.createElement("div",{className:"spd-search-result"},i.default.createElement("span",null,"搜索结果："+_),i.default.createElement(l.Icon,{type:"cancel",onClick:function(){n(s.getRelationList({processCode:"",relationType:b,searchContent:""},1)),n(s.changeModelString(["views","modelName"],""))}})):"",i.default.createElement("div",{className:"containers"},i.default.createElement(l.ScrollView,null,c.size?i.default.createElement(o.Fragment,null,i.default.createElement("div",{className:"flow-content"},c.map(function(e,t){return i.default.createElement(f.default,{key:t,v:e,i:t,dispatch:n,selectList:T})})),i.default.createElement(u.ScrollLoad,{diff:1,classContent:"flow-content",callback:function(e){n(s.getRelationList({processCode:h,relationType:b,searchContent:v},g+1,!0,e))},isGetAll:g>=y,itemSize:c.size})):i.default.createElement("div",{className:"empty-approval"},i.default.createElement(l.Icon,{type:"empty-spd"}),i.default.createElement("span",null,h?"没有符合筛选条件的审批单":"没有"+{APPROVER:"我处理",SPONSOR:"我发起",CARBON_COPY:"抄送我"}[b]+"的审批单"))))),i.default.createElement("div",{className:"bottom-btn"},i.default.createElement(l.ButtonGroup,{className:!0},i.default.createElement(l.Button,{onClick:function(){n(s.changeModelString(["componentList",C,"value"],T.map(function(e){return e.get("processInstanceId")}))),n(s.changeModelString(["componentList",C,"isFinshedList"],T.map(function(e){return e.get("isFinshed")}))),n(s.changeModelString(["componentList",C,"titleList"],T.map(function(e){return e.get("title")}))),n(s.changeModelString(["componentList",C,"result"],T.map(function(e){return e.get("result")}))),r.goBack()}},i.default.createElement("span",null,"确定")))))}}]),t}())||r;t.default=y},1736:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),l=n(16),u=n(123),c=n(9),s=n(31),f=v(n(1079)),d=n(1282),p=h(n(1479)),m=h(n(1481)),g=v(n(25)),y=h(n(1482));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var T=(0,s.connect)(function(e){return e})(r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={focus:!1,isSubmit:!1,searchHistory:localStorage.getItem("searchHistory")?localStorage.getItem("searchHistory").split(g.TREE_JOIN_STR):[]},b(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),a(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,r=t.editApprovalState,a=(t.choose,t.history),s=this.state,v=s.focus,h=s.isSubmit,b=r.get("approvalList"),T=r.get("views"),C=T.get("selectList"),_=T.get("currentPage"),E=T.get("pageCount"),I=T.get("relationType"),S=T.get("processCode"),O=T.get("searchContent"),L=T.get("componentIndex"),N=this.state.searchHistory||[];return i.default.createElement(l.Container,{style:{background:"#fff"},className:"spd"},i.default.createElement(y.default,{tabs:d.tabs,value:{APPROVER:"我处理的",SPONSOR:"我发起的",CARBON_COPY:"抄送我的"}[I],onChange:function(e,t){n(f.changeModelString(["views","relationType"],["APPROVER","SPONSOR","CARBON_COPY"][t])),n(f.changeApprovalOutString("approvalList",(0,c.fromJS)([]))),a.goBack()}}),i.default.createElement("div",{className:"search-approval"},i.default.createElement("div",{className:"lrsp-tab-bar-item-top"},i.default.createElement(p.default,{needCancel:!0,value:O,history:a,placeholder:"搜索标题、编号",onFocus:function(){return e.setState({focus:!0,isSubmit:!1})},onBlur:function(){return e.setState({focus:!1})},onChange:function(e){n(f.changeModelString(["views","searchContent"],e))},onSubmit:function(t){t&&n(f.getRelationList({processCode:S,relationType:I,searchContent:t},1,!1,"",function(){-1===N.indexOf(t)&&N.push(t),localStorage.setItem("searchHistory",N.join(g.TREE_JOIN_STR)),e.setState({isSubmit:!0,focus:!1,searchHistory:N})}))}})),!v&&h?i.default.createElement("div",{className:"spd-search-result"},"搜索结果：共"+b.size+"条"):i.default.createElement("div",{className:"spd-search-result",style:{display:N.length?"":"none"}},i.default.createElement("span",null,"搜索历史 "),i.default.createElement(l.Icon,{type:"cancel",onClick:function(){localStorage.setItem("searchHistory",""),e.setState({searchHistory:""})}})),i.default.createElement("div",{className:"containers",style:{background:"#fff"}},!v&&h?i.default.createElement(l.ScrollView,null,b.size?i.default.createElement(o.Fragment,null,i.default.createElement("div",{className:"flow-content"},b.map(function(e,t){return i.default.createElement(m.default,{key:t,v:e,i:t,searchContent:O,dispatch:n,selectList:C})})),i.default.createElement(u.ScrollLoad,{diff:1,classContent:"flow-content",callback:function(e){n(f.getRelationList({processCode:S,relationType:I,searchContent:O},_+1,!0,e))},isGetAll:_>=E,itemSize:b.size})):i.default.createElement("div",{className:"empty-approval"},i.default.createElement(l.Icon,{type:"empty-spd"}),i.default.createElement("span",null,"没有符合筛选条件的审批单"))):i.default.createElement(l.ScrollView,{style:{background:"#fff"}},i.default.createElement("div",{className:"history-list"},N.map(function(t){return i.default.createElement("span",{key:t,onClick:function(){n(f.getRelationList({processCode:S,relationType:I,searchContent:t},1,!1,"",function(){e.setState({isSubmit:!0,focus:!1})}))}},t)}))))),i.default.createElement("div",{className:"bottom-btn"},i.default.createElement(l.ButtonGroup,{className:!0},i.default.createElement(l.Button,{onClick:function(){n(f.changeModelString(["componentList",L,"value"],C.map(function(e){return e.get("processInstanceId")}))),n(f.changeModelString(["componentList",L,"isFinshedList"],C.map(function(e){return e.get("isFinshed")}))),n(f.changeModelString(["componentList",L,"result"],C.map(function(e){return e.get("result")}))),n(f.changeModelString(["componentList",L,"titleList"],C.map(function(e){return e.get("title")}))),a.push("/editApproval/detail")}},i.default.createElement("span",null,"确定")))))}}]),t}())||r;t.default=T},1737:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=arguments[1];return((e={},i(e,a.INIT_EDIT_APPROVAL_STATE,function(){return l}),i(e,a.GET_APPROVAL_LIST,function(){return t.set("dataList",(0,r.fromJS)(n.data)).setIn(["views","isLoaded"],!0)}),i(e,a.GET_APPROVAL_MODEL_INFO,function(){return t.set("componentList",(0,r.fromJS)(n.data.componentList)).set("departmentId",(0,r.fromJS)(n.data.departmentId)).set("modelInfo",(0,r.fromJS)(n.data.modelInfo))}),i(e,a.CHANGE_APPROVAL_STATUS,function(){return t.set(n.name,n.value)}),i(e,a.CHANGE_APPROVAL_MODAL_STATUS,function(){return t.set(["modelInfo",n.name],n.value)}),i(e,a.CHANGE_MODEL_STRING,function(){return t.setIn(n.place,n.value)}),i(e,a.AFTER_APPROVAL_GET_UPLOAD_SIGNATURE,function(){return n.code?40040===n.code?t=t.set("uploadKeyJson",(0,r.fromJS)({checkMoreFj:!1})).set("expire",0):t:t=t.set("uploadKeyJson",(0,r.fromJS)(n.receivedData)).set("expire",parseInt(n.receivedData.expire))}),i(e,a.CHANGE_MODEL_ENCLOSURE_STRING,function(){return t=t.updateIn(n.placeArr,function(e){return(e||(0,r.fromJS)([])).concat(n.value)})}),i(e,a.AFTER_GET_EDIT_APPROVAL_PROCESSLIST,function(){return t=t.set("approvalList",n.receivedData.currentPage>1?(0,r.fromJS)(t.get("approvalList").toJS().concat(n.receivedData.processList)):(0,r.fromJS)(n.receivedData.processList)).setIn(["views","currentPage"],n.currentPage),1===n.currentPage&&(t=t.setIn(["views","pageCount"],n.receivedData.pageCount)),!0!==n.param.refresh&&(t=t.setIn(["views","relationType"],n.param.relationType).setIn(["views","searchContent"],n.param.searchContent).setIn(["views","processCode"],n.param.processCode)),t}),e)[n.type]||function(){return t})()};var r=n(9),a=(n(13),o(n(1478)));o(n(25));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(0,r.fromJS)({dataList:[],modelInfo:{},views:{idx:0,isLoaded:!1,currentPage:1,pageCount:1,relationType:"APPROVER",processCode:"",searchContent:"",selectList:[]},componentList:[],categoryList:[],enclosureList:[],processModelList:[],approvalList:[]})},955:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var r=u(n(1708)),a=u(n(1737)),o=u(n(1259)),i=u(n(1303)),l=u(n(1260));function u(e){return e&&e.__esModule?e:{default:e}}var c={editApprovalState:a.default,relativeConfState:o.default,inventoryConfState:i.default,projectConfState:l.default};t.reducer=c,t.view=r.default}}]);