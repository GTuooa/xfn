(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1022:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var n,a=s(2504),o=(n=a)&&n.__esModule?n:{default:n};t.reducer={},t.view=o.default},1211:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeAssTypeName=t.changeAssTypeConfirmModalVisible=t.changeAssConfigNewName=t.changeAssConfigOldName=t.changeAssConfigShowType=t.reversAssFetch=t.showReversConfirmModal=t.changeReversNewAssId=t.checkReversAssIdFetch=t.changeReversAssCategory=t.changeAssDisableState=t.hideAllAssCheckBox=t.showAllAssCheckBox=t.beforeInsertAss=t.beforeModifyAss=t.changeTabIndexAcAssconfig=t.changeTabIndexAssConfig=t.changeAssCategory=t.changeAssName=t.changeAssId=t.setAssrelateAMB=t.getAssrelateAMB=t.getAssGetAMB=void 0;var n,a=s(13),o=l(s(1226)),r=s(24),i=(n=r)&&n.__esModule?n:{default:n},c=l(s(10)),u=l(s(25));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}t.getAssGetAMB=function(){return function(e){c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("assgetAMB","GET","",function(t){(0,a.showMessage)(t)&&(c.toast.hide(),e({type:o.AFTER_ASSGETAMB_GET,receivedData:t.data}))})}},t.getAssrelateAMB=function(e,t){return function(s){c.Confirm({message:"确定开通辅助核算类别["+e.get(0)+"]为默认阿米巴？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(s){1===s.buttonIndex&&(c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("assrelateAMB","POST",JSON.stringify({assCategoryList:e}),function(e){(0,a.showMessage)(e,"show")&&t.goBack()}))},onFail:function(e){return alert(e)}})}},t.setAssrelateAMB=function(e){return{type:o.SET_ASSRELATE_AMB,asscategory:e}},t.changeAssId=function(e){return{type:o.CHANGE_ASS_ID,assid:e}},t.changeAssName=function(e){return{type:o.CHANGE_ASS_NAME,assname:e}},t.changeAssCategory=function(e){return{type:o.CHANGE_ASS_CATEGORY,asscategory:e}},t.changeTabIndexAssConfig=function(e){return{type:o.CHANGE_TAB_INDEX_ASSCONFIG,idx:e}},t.changeTabIndexAcAssconfig=function(e){return{type:o.CHANGE_TAB_INDEX_AC_ASSCONFIG,idx:e}},t.beforeModifyAss=function(e,t){return{type:o.BEFORE_MODIFY_ASS,ass:e,idx:t}},t.beforeInsertAss=function(e){return{type:o.BEFORE_INSERT_ASS,tab:e}},t.showAllAssCheckBox=function(){return{type:o.SHOW_ALL_ASS_CHECKBOX}},t.hideAllAssCheckBox=function(){return{type:o.HIDE_ALL_ASS_CHECKBOX}},t.changeAssDisableState=function(){return{type:o.CHANGE_ASS_DISABLE_STATE}},t.changeReversAssCategory=function(e){return{type:o.CHANGE_REVERS_ASS_CATEGORY,assCategory:e}},t.checkReversAssIdFetch=function(e,t,s){return function(n){c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("assCheck","POST",JSON.stringify({assCategory:e,assId:t,assName:s}),function(e){if((0,a.showMessage)(e)){if(c.toast.hide(),!e.data.message.length)return(0,a.showMessage)("","","",t+"不需要使用反悔模式");n({type:o.CHECK_REVERS_ASS_ID_CHECK,assId:t,assName:s,assMessage:e.data.message})}})}},t.changeReversNewAssId=function(e){return{type:o.CHANGE_REVERS_NEW_ASS_ID,newAssId:e}};var _=t.showReversConfirmModal=function(e){return{type:o.SHOW_REVERS_CONFIR_MODAL,bool:e}};t.reversAssFetch=function(e,t){return function(s){c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("assRegret","POST",JSON.stringify({assCategory:e.get("assCategory"),oldAssId:e.get("oldAssId"),assId:e.get("assId"),assName:e.get("assName")}),function(e){(0,a.showMessage)(e)&&(c.toast.hide(),s(_(!1)),t.goBack())})}},t.changeAssConfigShowType=function(){return function(e){e({type:o.CHANGE_ASS_CONFIG_SHOW_TYPE})}},t.changeAssConfigOldName=function(e){return function(t){t({type:o.SET_ASS_CONFIG_OLD_NAME,value:e})}},t.changeAssConfigNewName=function(e){return function(t){t({type:o.SET_ASS_CONFIG_NEW_NAME,value:e})}},t.changeAssTypeConfirmModalVisible=function(e){return function(t){t({type:o.CHANGE_ASS_TYPE_CHANGE_COMFIRM_MODAL_VISIBLE,visible:e})}},t.changeAssTypeName=function(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"false";return function(r){c.toast.loading(u.LOADING_TIP_TEXT,0),(0,i.default)("changeAssName","POST",JSON.stringify({oldName:e,newName:t,confirmModifyAnyWay:n}),function(e){(0,a.showMessage)(e)&&(e.data.countMoreThenRestrict?r({type:o.CHANGE_ASS_TYPE_CHANGE_COMFIRM_MODAL_VISIBLE,visible:!0}):(r({type:o.CHANGE_ASS_TYPE_CHANGE_COMFIRM_MODAL_VISIBLE,visible:!1}),r({type:o.CHANGE_ASS_CONFIG_SHOW_TYPE}),r({type:o.SET_ASS_CONFIG_OLD_NAME,value:""}),r({type:o.SET_ASS_CONFIG_NEW_NAME,value:""}),c.toast.hide(),r(_(!1)),s.goBack()))})}}},1226:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INIT_ASSCONFIG="INIT_ASSCONFIG",t.CHANGE_TAB_INDEX_ASSCONFIG="CHANGE_TAB_INDEX_ASSCONFIG",t.CHANGE_TAB_INDEX_AC_ASSCONFIG="CHANGE_TAB_INDEX_AC_ASSCONFIG",t.CHANGE_ASS_ID="CHANGE_ASS_ID",t.CHANGE_ASS_NAME="CHANGE_ASS_NAME",t.CHANGE_ASS_CATEGORY="CHANGE_ASS_CATEGORY",t.BEFORE_MODIFY_ASS="BEFORE_MODIFY_ASS",t.BEFORE_INSERT_ASS="BEFORE_INSERT_ASS",t.MODIFY_ASS_FETCH="MODIFY_ASS_FETCH",t.INSERT_ASS_FETCH="INSERT_ASS_FETCH",t.SHOW_ALL_ASS_CHECKBOX="SHOW_ALL_ASS_CHECKBOX",t.HIDE_ALL_ASS_CHECKBOX="HIDE_ALL_ASS_CHECKBOX",t.AFTER_ASSGETAMB_GET="AFTER_ASSGETAMB_GET",t.SET_ASSRELATE_AMB="SET_ASSRELATE_AMB",t.CHANGE_ASS_DISABLE_STATE="CHANGE_ASS_DISABLE_STATE",t.CHANGE_REVERS_ASS_CATEGORY="CHANGE_REVERS_ASS_CATEGORY",t.CHECK_REVERS_ASS_ID_CHECK="CHECK_REVERS_ASS_ID_CHECK",t.CHANGE_REVERS_NEW_ASS_ID="CHANGE_REVERS_NEW_ASS_ID",t.SHOW_REVERS_CONFIR_MODAL="SHOW_REVERS_CONFIR_MODAL",t.CHANGE_ASS_CONFIG_SHOW_TYPE="CHANGE_ASS_CONFIG_SHOW_TYPE",t.SET_ASS_CONFIG_OLD_NAME="SET_ASS_CONFIG_OLD_NAME",t.SET_ASS_CONFIG_NEW_NAME="SET_ASS_CONFIG_NEW_NAME",t.CHANGE_ASS_TYPE_CHANGE_COMFIRM_MODAL_VISIBLE="CHANGE_ASS_TYPE_CHANGE_COMFIRM_MODAL_VISIBLE"},1244:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unselectAssAll=t.selectAssAll=t.selectAss=t.insertAss=t.modifyAss=t.enterAssFetch=t.deleteAssFetch=t.modifyRelatedAclistFetch=t.getAssListUnderFetch=t.getAssListFetch=void 0;var n,a=A(s(81)),o=s(24),r=(n=o)&&n.__esModule?n:{default:n},i=s(13),c=s(9),u=A(s(10)),l=A(s(1211)),_=A(s(25));function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}var f=t.getAssListFetch=function(){return function(e){u.toast.loading(_.LOADING_TIP_TEXT,0),(0,r.default)("getacasslist","GET","",function(t){(0,i.showMessage)(t)&&(u.toast.hide(),e({type:a.GET_AC_ASS_LIST_FETCH,receivedData:t.data}))})}},S=(t.getAssListUnderFetch=function(){return function(e){(0,r.default)("getacasslist","GET","",function(t){(0,i.showMessage)(t)&&e({type:a.GET_AC_ASS_LIST_FETCH,receivedData:t.data})})}},t.modifyRelatedAclistFetch=function(e){return function(t,s){var n=s(),a=n.assconfigState,o=n.allState,c=a.get("tabSelectedIndex"),l=o.get("assTags").get(c),A=o.get("aclist").toSeq().filter(function(e){return e.get("selected")}).map(function(e){return e.get("acid")});u.toast.loading(_.LOADING_TIP_TEXT,0),(0,r.default)("relateass","POST",JSON.stringify({asscategory:l,acidlist:A}),function(s){(0,i.showMessage)(s,"show")&&(t(f()),(0,i.showError)(s),e.goBack())})}},t.deleteAssFetch=function(){return function(e,t){u.Confirm({message:"确定删除？",title:"提示",buttonLabels:["取消","确定"],onSuccess:function(s){if(1===s.buttonIndex){var n=t(),a=n.assconfigState,o=n.allState,A=a.get("tabSelectedIndex"),S=o.get("assTags").get(A),E=o.get("acasslist").toSeq().reduce(function(e,t){return e.concat(t.get("asslist"))},(0,c.fromJS)([])).filter(function(e){return e.get("selected")}).map(function(e){return e.get("assid")});u.toast.loading(_.LOADING_TIP_TEXT,0),(0,r.default)("deleteass","POST",JSON.stringify({asscategory:S,assidlist:E}),function(t){(0,i.showMessage)(t)&&(u.toast.hide(),(0,i.showError)(t),e(f()),e(l.hideAllAssCheckBox()))})}},onFail:function(e){return alert(e)}})}},t.enterAssFetch=function(e){return function(t,s){var n=s().assconfigState,a=s().allState,o=n.get("ass");if(!(o=o.set("asscategory",o.get("asscategory").replace(/(^\s*)|(\s*$)/g,"")).set("assname",o.get("assname").replace(/(^\s*)|(\s*$)/g,""))).get("assid"))return(0,i.showMessage)("","","","辅助核算编码未输入");if(!o.get("asscategory"))return(0,i.showMessage)("","","","辅助核算类别未输入");if(!o.get("assname"))return(0,i.showMessage)("","","","辅助核算名称未输入");if(o.get("assid").length>_.CODE_LENGTH)return(0,i.showMessage)("","","","辅助核算编码位数不超过"+_.CODE_LENGTH+"位");if(i.configCheck.hasChiness(o.get("assname")))return(0,i.showMessage)("","","","名称包含中文及中文标点字符，长度不能超过"+_.AC_CHINESE_NAME_LENGTH+"位；不包含中文及中文标点字符，长度不能超过"+_.AC_NAME_LENGTH+"位");u.toast.loading(_.LOADING_TIP_TEXT,0);var r=o.get("asscategory"),c=a.get("acasslist").filter(function(e){return e.get("asscategory")===r});if(c.size){var l=c.getIn([0,"asslist"]);if("insert"===n.get("assConfigMode"))l.some(function(e){return e.get("assname")===o.get("assname")})?t(S(o,n,e)):t(E(o,n,e));else if("modify"===n.get("assConfigMode")){var A=n.get("modifyIdx");l.getIn([A,"assname"])!==o.get("assname")&&l.some(function(e,t){return e.get("assname")===o.get("assname")&&A!==t})?t(S(o,n,e)):t(E(o,n,e))}}else t(E(o,n,e))}},function(e,t,s){return function(n){u.Confirm({message:"已存在名称相同的核算对象，是否确定保存？",title:"提示",buttonLabels:["取消","保存"],onSuccess:function(a){1===a.buttonIndex&&n(E(e,t,s))}})}}),E=function(e,t,s){return function(n){u.toast.loading(_.LOADING_TIP_TEXT,0),{modify:function(){var a=t.get("assSelectedIndex");(0,r.default)("modifyass","POST",JSON.stringify(e),function(t){(0,i.showMessage)(t,"show")&&(n(g(t,e,a)),s.goBack(),t.data&&t.data.length&&u.Alert(t.data[0]))})},insert:function(){(0,r.default)("insertass","POST",JSON.stringify(e.merge({action:"MANAGER-ASS_SETTING-CUD_ASS"})),function(t){(0,i.showMessage)(t,"show")&&(n(d(t,e)),s.goBack())})}}[t.get("assConfigMode")]()}},g=t.modifyAss=function(e,t,s){return function(n){n({type:a.MODIFY_ASS_FETCH,receivedData:e,ass:t,idx:s})}},d=t.insertAss=function(e,t){return{type:a.INSERT_ASS_FETCH,receivedData:e,ass:t}};t.selectAss=function(e,t){return{type:a.SELECT_ASS,acAssSelectedIndex:e,idx:t}},t.selectAssAll=function(e){return{type:a.SELECT_ASS_ALL,acAssSelectedIndex:e}},t.unselectAssAll=function(e){return{type:a.UNSELECT_ASS_ALL,acAssSelectedIndex:e}}},1459:function(e,t,s){},2504:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,o=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),r=s(0),i=(a=r)&&a.__esModule?a:{default:a},c=s(9),u=s(31),l=S(s(1211)),_=S(s(1244));s(1459);var A=s(16),f=S(s(10));function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}var E=A.Form.Item,g=(0,u.connect)(function(e){return e})(n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={newcategory:""},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.assconfigState,s=e.allState,n=e.history,a=e.dispatch,o=e.homeState,r=(this.state.newcategory,o.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]));f.setRight({show:!1});var u=t.get("assConfigMode");"insert"===u?f.setTitle({title:"新增辅助核算"}):"modify"===u&&f.setTitle({title:"修改辅助核算"});var S=t.get("ass"),g="insert"===t.get("assConfigMode"),d=s.get("assTags"),C=0===d.size?(0,c.fromJS)([]):d.map(function(e){return{value:""+e,key:""+e}}).push({value:"输入自定义",key:"输入自定义"});S.get("asscategory");return i.default.createElement(A.Container,{className:"ass-option"},i.default.createElement(A.Row,{flex:"1"},i.default.createElement(A.Form,null,i.default.createElement(E,{label:"编码：",className:"form-offset-up"},i.default.createElement(A.TextInput,{type:"text",textAlign:"right",value:S.get("assid"),placeholder:"输入编码 (限16位数字字母)",onChange:function(e){return a(l.changeAssId(e))}})," ",i.default.createElement(A.Icon,{type:"arrow-right",className:"input-icon-arrow-right"})),i.default.createElement(E,{label:"名称：",className:"form-offset-up form-offset-margin"},i.default.createElement(A.TextInput,{type:"text",textAlign:"right",value:S.get("assname"),placeholder:"输入名称",onChange:function(e){return a(l.changeAssName(e))}})," ",i.default.createElement(A.Icon,{type:"arrow-right",className:"input-icon-arrow-right"})),i.default.createElement(E,{label:"类别：",className:"form-offset-up form-offset-margin form-offset-border"},g?i.default.createElement(A.SinglePicker,{className:"info-select",district:C,value:S.get("asscategory")?S.get("asscategory"):"请选择",style:{color:S.get("asscategory")?"#333":"#999"},onOk:function(e){"输入自定义"===e.value?f.Prompt({message:"输入自定义类别:",buttonLabels:["取消","确认"],onSuccess:function(e){1===e.buttonIndex&&a(l.changeAssCategory(e.value))},onFail:function(){}}):a(l.changeAssCategory(e.value))}},i.default.createElement("span",null,S.get("asscategory")?S.get("asscategory"):"请选择")):i.default.createElement("span",null,S.get("asscategory")?S.get("asscategory"):"无类别")),i.default.createElement(E,{label:"状态：",className:"form-offset-up form-disable",style:{display:"insert"===u?"none":""}},i.default.createElement("span",{className:"form-disable-name"},"TRUE"===S.get("disable")?"已禁用":"已启用"),i.default.createElement(A.Switch,{checked:"TRUE"!==S.get("disable"),checkedChildren:"",unCheckedChildren:"",onClick:function(){return a(l.changeAssDisableState())}})),i.default.createElement("div",{className:"ass-tip"},"点击类别名称，可以自定义类别"))),i.default.createElement(A.ButtonGroup,{type:"ghost",height:50},i.default.createElement(A.Button,{onClick:function(){return n.goBack()}},i.default.createElement(A.Icon,{type:"cancel"}),i.default.createElement("span",null,"取消")),i.default.createElement(A.Button,{disabled:!r,onClick:function(){return a(_.enterAssFetch(n))}},i.default.createElement(A.Icon,{type:"save"}),i.default.createElement("span",null,"保存"))))}}]),t}())||n;t.default=g}}]);