(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{1919:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=v(n(0)),l=(n(9),n(31)),i=n(16),s=y(n(10)),c=y(n(181)),u=y(n(1361)),f=(y(n(1284)),v(n(1920))),d=v(n(1921)),m=v(n(1935)),p=v(n(1936)),h=n(123),g=n(13);n(1245),n(1938);var b=v(n(79));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _={1:(0,g.createArray)(1,21),23:(0,g.createArray)(23,9),32:[32,33],34:[34]},O=(0,l.connect)(function(e){return e})(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),l=0;l<r;l++)o[l]=arguments[l];return n=a=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.state={screenShotFun:function(){}},E(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){s.setTitle({title:"小番报表"}),s.setIcon({showIcon:!1});var e=this.props.lrbState.get("issuedate"),t=this.props.lrbState.get("endissuedate");"home"==sessionStorage.getItem("prevPage")?(sessionStorage.removeItem("prevPage"),this.props.dispatch(u.getInitList("","")),this.props.dispatch(u.changeDifferType("increaseDecreasePercent"))):(sessionStorage.removeItem("prevPage"),this.props.dispatch(u.getInitList(e,t||e)))}},{key:"componentWillReceiveProps",value:function(e){!0===e.lrbState.get("ifSelfTypeList")?s.setTitle({title:"小番报表"}):s.setTitle({title:"小企业报表"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.lrbState,a=t.allState,r=t.dispatch,l=t.history,s=t.homeState,g=this.state.screenShotFun,y=s.getIn(["data","userInfo"]).get("sobInfo"),v=y.get("newJr"),E=!!y&&(y.get("moduleInfo").indexOf("RUNNING")>-1&&v),O=E?n.get("issues"):a.get("issues"),w=n.get("showedProfitLineBlockIdxList"),S=n.get("incomestatement"),N=n.get("issuedate"),x=n.get("selectAssId"),P=n.get("assSelectableList"),k=n.get("ifSelfTypeList"),I=[1,2,3,11,14,18,20,21,22,23,24,26,32,33,34];w.forEach(function(e){I=I.concat(_[e])});var T=S.map(function(e){return e.set("visible",I.indexOf(e.get("lineindex"))>-1||e.get("monthaccumulation")||e.get("yearaccumulation"))}),C=n.get("endissuedate"),D=O.findIndex(function(e){return e.get("value")===N}),j=N.substr(0,4),L=N.substr(5,2),R=a.getIn(["period","periodStartMonth"]),A=O.slice(0,D).filter(function(e){return Number(L)<Number(R)?0===e.get("value").indexOf(j)&&Number(e.get("value").substr(5,2))<Number(R):0===e.get("value").indexOf(j)||0===e.get("value").indexOf(j-1+2)&&Number(e.get("value").substr(5,2))<Number(R)}),M=P.map(function(e,t){return{value:t+"_"+e.get("assid")+"_"+e.get("asscategory"),key:e.get("assname")}}),F=P.getIn([x,"disableTime"]),V=""+N.substr(0,4)+N.substr(5,2),Y=C?""+C.substr(0,4)+C.substr(5,2):V,B=N?N.substr(0,4)+"-"+N.substr(5,2):"",U=C?C.substr(0,4)+"-"+C.substr(5,2):B,z=P.getIn([x,"assid"]),G=n.get("referBegin"),H=n.get("referEnd"),J=G?G.substr(0,4)+"-"+G.substr(4,2):"",W=H?H.substr(0,4)+"-"+H.substr(4,2):J;r(k?c.navigationSetMenu("config","",function(){return function(e){e(E?c.allExportDo("excelXfnProfit",{begin:B,end:U,referBegin:J,referEnd:W}):c.allExportDo("excelXfn",{begin:V,end:Y,referBegin:G||"",referEnd:H||""}))}}):c.navigationSetMenuAndSceenShot({type:"lrb",screenShotFun:g},"lrb",function(){return function(e){e(E?c.allExportDo("pdfJrProfit",{begin:B,end:U,referBegin:J,referEnd:W}):C?c.allExportDo("pdflrbincomepdfquarter",{begin:V,end:Y,assid:z||"",asscategory:z?P.getIn([x,"asscategory"]):""}):c.allExportDo("pdflrbexport",{year:N.substr(0,4),month:N.substr(5,2),assid:z||"",asscategory:z?P.getIn([x,"asscategory"]):""}))}},function(){return function(e){E?e(c.allExportDo("excelJrProfit",{begin:B,end:U,referBegin:J,referEnd:W})):0===P.size?e(c.allExportDo("excelsend",{year:V,month:V,exportModel:"incomestatement",action:"REPORT-PROFIT_REPORT-EXPORT_EXCEL"})):e(c.allExportDo("lrbambexcelsend",{begin:V,end:Y,export:"incomestatement"}))}}));var X=n.get("selfListData"),Z=n.get("showChildProfitList"),q=n.get("referChooseValue"),K=n.get("extraMessage"),Q=n.get("proportionDifference"),$="";switch(Q){case"shareDifference":$="占比差值";break;case"amountDifference":$="金额差值";break;case"increaseDecreasePercent":$="涨跌幅"}return o.default.createElement(i.Container,{className:"lrb"},o.default.createElement(h.TopMonthPicker,{issuedate:N,source:O,endissuedate:C,nextperiods:A,showSwitch:!0,callback:function(e){r(u.changeReferChooseValue("YEAR_TOTAL")),r(k?u.getInitList(e,e,"",""):u.getIncomeStatementFetch(e,C,x))},onOk:function(e){r(u.changeReferChooseValue("YEAR_TOTAL")),r(k?u.getInitListFetch(e.value,C,"",""):u.getIncomeStatementFetch(e.value,C,x))},onBeginOk:function(e){r(u.changeReferChooseValue("YEAR_TOTAL")),r(k?u.getInitListFetch(e.value,"",""):u.getIncomeStatementFetch(e.value,"",x))},onEndOk:function(e){r(u.changeReferChooseValue("YEAR_TOTAL")),r(k?u.getInitListFetch(N,e.value,"",""):u.getIncomeStatementFetch(N,e.value,x))},changeEndToBegin:function(){r(u.changeReferChooseValue("YEAR_TOTAL")),r(k?u.getInitList(N,N,"",""):u.getIncomeStatementFetch(N,"",x))}}),o.default.createElement("div",{className:"select-change-table-xf",onClick:function(){r(u.changeReferChooseValue("YEAR_TOTAL")),k?(r(u.getIncomeStatementFetch(N,C,x)),r(u.changeListType(!1))):(r(u.getInitListFetch(N,C,"","")),r(u.changeListType(!0)))}},o.default.createElement("span",null,"报表"),o.default.createElement(b.default,{type:"cutover"})),o.default.createElement(i.SinglePicker,{className:"lrbselect",style:{display:P.size>1?"":"none"},district:M,onOk:function(e){return r(u.getSelectAssIncomeFetch(N,C,e.value))}},o.default.createElement(i.Row,{className:"lrbselect",style:{display:P.size>1?"":"none"}},o.default.createElement("span",{className:["lrbselect-assmane",F?"lrb-item-disable":""].join(" ")},P.getIn([x,"assname"])),o.default.createElement(i.Icon,{className:"lrbselect-icon",type:"triangle",size:"11"}))),k?o.default.createElement(i.Row,{className:"sheet-line-xf xf-title"},o.default.createElement("div",{className:"issues-select"},o.default.createElement("div",{className:"item-title border-bottom"},o.default.createElement(p.default,{issuedate:N,issues:O,endissuedate:C,referBegin:G,referEnd:H,nextperiods:A,referChooseValue:q,dispatch:r,onChangeReferChooseValue:function(e){r(u.changeReferChooseValue(e))},onSelected:function(e,t){r(u.getInitListFetch(N,C,e,t))}})),o.default.createElement("div",{className:"item-title"},o.default.createElement("span",{className:"amount"},"参考金额"),o.default.createElement("span",{className:"precent"},"营收占比"))),o.default.createElement("div",{className:"period-data",onClick:function(){l.push("./measure")}},o.default.createElement("div",{className:"item-title border-bottom"},"本期数据",o.default.createElement(b.default,{type:"test",style:{color:"rgb(94,129,209)",marginLeft:"5px"}})),o.default.createElement("div",{className:"item-title"},o.default.createElement("span",{className:"amount"},"本期金额"),o.default.createElement("span",{className:"precent"},"营收占比"))),o.default.createElement("div",{className:"differ"},o.default.createElement("div",{className:"swap",onClick:function(){var e="";"shareDifference"===Q?e="amountDifference":"amountDifference"===Q?e="increaseDecreasePercent":"increaseDecreasePercent"===Q&&(e="shareDifference"),r(u.changeDifferType(e))}},o.default.createElement(b.default,{type:"swap",style:{transform:"rotate(90deg)",color:"rgb(94,129,209)"}})),o.default.createElement("div",{className:"amout"},$))):o.default.createElement(i.Row,{className:"sheet-line title",onClick:function(){return r(u.toggleProfitLineDisplay())}},o.default.createElement("span",{className:"linename"},"项目"),o.default.createElement("span",{className:"lineindex"},"行次"),o.default.createElement("span",{className:"amount"},"本年累计"),o.default.createElement("span",{className:"amount-right"},"本期金额")),o.default.createElement(i.ScreenShot,{shotClassArr:["scroll-view"],imgName:"lrb",setFunction:function(t){return e.setState({screenShotFun:t})}}),o.default.createElement(i.ScrollView,{flex:"1"},k?o.default.createElement("div",{className:"sheet-line-list"},X.map(function(e,t){return o.default.createElement(d.default,{key:t,index:t,data:e,dispatch:r,showChildProfitList:Z,proportionDifference:Q})})):o.default.createElement("dl",{className:"sheet-line-list"},T.map(function(e,t){return o.default.createElement(f.default,{lr:e,key:t,showedProfitLineBlockIdxList:w,style:{display:e.get("visible")?"":"none"},dispatch:r})}))),k&&o.default.createElement(m.default,{className:"acctach-info",extraMessage:K,history:l}))}}]),t}())||a;t.default=O},1920:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),s=(r=i)&&r.__esModule?r:{default:r},c=n(22),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1361)),f=n(16);var d=(0,c.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.lr,n=e.className,a=e.dispatch,r=e.showedProfitLineBlockIdxList,l=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["lr","className","dispatch","showedProfitLineBlockIdxList"]),i=void 0,c=t.get("lineindex");i=1==c||23==c?"firstlrb":32==c||34==c?"firstlrblast":2==c||21==c||24==c||26==c||33==c?"second":3==c||11==c||14==c||18==c||20==c||22==c?"thirdlrb":4==c||12==c||15==c||19==c||25==c||27==c?"fourthlrb":"fifthlrb";var d=r.find(function(e){return e==t.get("lineindex")});return s.default.createElement("dd",o({},l,{className:["sheet-line",i,n].join(" "),onClick:function(){"firstlrb"===i&&a(u.toggleProfitLineDisplay(t.get("lineindex")))}}),s.default.createElement("span",{className:"linename"},s.default.createElement("span",{className:"linenametext"},t.get("linename")),"firstlrb"==i?s.default.createElement(f.Icon,{style:d?{transform:"rotate(180deg)",marginBottom:".1rem"}:"",type:"arrow-down"}):""),s.default.createElement("span",{className:"lineindex"},t.get("lineindex")),s.default.createElement(f.Amount,{className:"amount"},t.get("yearaccumulation")),s.default.createElement(f.Amount,{className:"amount-right"},t.get("monthaccumulation")))}}]),t}())||a;t.default=d},1921:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=u(n(1392)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1931);var l=u(n(0)),i=n(22),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1361)),c=n(16);function u(e){return e&&e.__esModule?e:{default:e}}var f=(0,i.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),o(t,[{key:"renderDifference",value:function(e,t){return Number(e)>0?l.default.createElement("span",{style:{color:"rgb(255,131,72)",fontSize:"amountDifference"===t&&Math.abs(e)>1e3?".1rem":".11rem"}},"amountDifference"===t?"+"+e:"+"+e+"%",l.default.createElement(r.default,{type:"arrow-up",style:{display:"amountDifference"===t?"none":""}})):0===Number(e)?l.default.createElement("span",{style:{fontSize:"amountDifference"===t&&Math.abs(e)>1e3?".1rem":".11rem"}},"amountDifference"===t?""+e:e+"%",l.default.createElement("span",{style:{color:"rgb(255,131,72)"}},"-")):Number(e)<0?l.default.createElement("span",{style:{color:"rgb(94,129,209)",fontSize:"amountDifference"===t&&Math.abs(e)>1e3?".1rem":".11rem"}},"amountDifference"===t?""+e:e+"%",l.default.createElement(r.default,{type:"arrow-down",style:{display:"amountDifference"===t?"none":""}})):void 0}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=(t.key,t.dispatch),o=t.showChildProfitList,i=t.index,u=t.proportionDifference,f=[0,4,8];return function t(n,d,m){var p=0;switch(u){case"shareDifference":p=(100*n.get("shareDifference")).toFixed(2);break;case"amountDifference":p=Math.round(n.get("amountDifference"));break;case"increaseDecreasePercent":p=(100*n.get("increaseDecreasePercent")).toFixed(2);break;default:p=(100*n.get("shareDifference")).toFixed(2)}var h={background:{0:"#fff",1:"#D1C0A5",2:"#7E6B5A",3:"#59493f"}[d],width:d/10+"rem"};if(n.get("childProfit")&&n.get("childProfit").size){var g=o.indexOf(n.get("lineindex"))>-1||o.indexOf(n.get("acId"))>-1;return l.default.createElement("div",{key:m+"_"+n.get("linename")},l.default.createElement("div",{className:"xf-list-item",style:{background:f.includes(m)&&0==d?"#fff4e3":""},onClick:function(){var e=n.get("lineindex")?n.get("lineindex"):n.get("acId");a(s.changeShowChildProfitList(e))}},l.default.createElement("div",{className:"linename"},l.default.createElement("span",{className:"linenametext",style:{fontWeight:0==d?"bold":"normal",color:"#222"}},0==d?"":l.default.createElement("span",{className:"ba-flag",style:h}),n.get("linename").replace(/\、/g,".").replace(/：/g,":"))),l.default.createElement("div",null,l.default.createElement(r.default,{type:g?"up":"down",style:{marginTop:"0.07rem",color:"rgb(180,180,180)"}}))),l.default.createElement("div",{className:"xf-list-amount",style:{fontWeight:0==d?"bold":"normal",background:f.includes(m)&&0==d?"#fff4e3":""}},l.default.createElement(c.Amount,{showZero:!0,decimalPlaces:"0",className:"yearaccumulation"},n.get("yearaccumulation")),l.default.createElement("span",{className:"shareOfYear"},(100*n.get("shareOfYear")).toFixed(2)+"%"),l.default.createElement(c.Amount,{showZero:!0,decimalPlaces:"0",className:"monthaccumulation"},n.get("monthaccumulation")),l.default.createElement("span",{className:"shareOfMonth"},(100*n.get("shareOfMonth")).toFixed(2)+"%"),l.default.createElement("span",{className:"typeChange"},e.renderDifference(p,u))),g&&n.get("childProfit").map(function(e,n){return t(e,d+1,i+1)}))}return l.default.createElement("div",{key:m+"_"+n.get("linename")},l.default.createElement("div",{className:"xf-list-item",style:{fontWeight:0==d?"bold":"normal",background:f.includes(m)&&0==d?"#fff4e3":""},onClick:function(){var e=n.get("lineindex")?n.get("lineindex"):n.get("acId");a(s.changeShowChildProfitList(e))}},l.default.createElement("div",{className:"linename"},l.default.createElement("span",{className:"linenametext"},0==d?"":l.default.createElement("span",{className:"ba-flag",style:h}),n.get("linename").replace(/\、/g,".").replace(/：/g,":")))),l.default.createElement("div",{className:"xf-list-amount",style:{fontWeight:0==d?"bold":"normal",background:f.includes(m)&&0==d?"#fff4e3":""}},l.default.createElement(c.Amount,{showZero:!0,decimalPlaces:"0",className:"yearaccumulation"},n.get("yearaccumulation")),l.default.createElement("span",{className:"shareOfYear"},(100*n.get("shareOfYear")).toFixed(2)+"%"),l.default.createElement(c.Amount,{showZero:!0,decimalPlaces:"0",className:"monthaccumulation"},n.get("monthaccumulation")),l.default.createElement("span",{className:"shareOfMonth"},(100*n.get("shareOfMonth")).toFixed(2)+"%"),l.default.createElement("span",{className:"typeChange"},e.renderDifference(p,u))))}(n,0,i)}}]),t}())||a;t.default=f},1931:function(e,t,n){"use strict";n.r(t);n(1362),n(1933)},1933:function(e,t,n){},1935:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=s(n(0)),l=n(22),i=s(n(79));function s(e){return e&&e.__esModule?e:{default:e}}var c=(0,l.immutableRenderDecorator)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.extraMessage,a=e.history;return o.default.createElement("div",{className:t},o.default.createElement("div",{className:"acctach-info-title"},o.default.createElement("div",null,"附加信息"),o.default.createElement("div",{style:{color:"rgb(94,129,209)"},onClick:function(){a.push("/extraInformation")}},"设置",o.default.createElement(i.default,{type:"arrow-right"}))),o.default.createElement("div",{className:"acctach-info-content"},n.size>0&&n.map(function(e){return o.default.createElement("div",{className:"acctach-info-content-item"},e.get("extraName")+"："+e.get("extraValue")+e.get("unit"))})))}}]),t}())||a;t.default=c},1936:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=d(n(188)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(189);var l=n(0),i=d(l),s=n(22),c=n(16),u=(n(13),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(10)),n(123),d(n(79))),f=d(n(1937));function d(e){return e&&e.__esModule?e:{default:e}}var m=(0,s.immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={choose:"",modalVisible:!1,start:"",end:"",showDate:!1,lastMonthString:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),o(t,[{key:"render",value:function(){var e=this,t=this.state,n=(t.choosenIssuedate,t.modalVisible),a=t.start,o=t.end,l=(t.showDate,t.choose),s=t.lastMonthString,d=this.props,m=d.issuedate,p=d.issues,h=d.endissuedate,g=(d.nextperiods,d.onSelected),b=d.referChooseValue,y=d.onChangeReferChooseValue;d.referBegin,d.referEnd;return i.default.createElement("div",{style:{display:"flex"}},i.default.createElement(f.default,{visible:n,issuedate:m,issues:p,endissuedate:h,referChooseValue:l,onChanged:function(t,n){"ISSUE"===l?e.setState({start:t,end:""}):e.setState({start:t,end:n}),y(l),g(""+t.split("-")[0]+t.split("-")[1],""+n.split("-")[0]+n.split("-")[1])},onClose:function(){e.setState({modalVisible:!1})}}),i.default.createElement(c.Single,{district:[{key:"本年累计",value:"YEAR_TOTAL"},{key:"上个月",value:"LAST_MONTH"},{key:"上年同期",value:"LAST_YEAR_MONTH"},{key:"按账期查询",value:"ISSUE"},{key:"按账期区间查询",value:"ISSUE_RANGE"}],value:b,canSearch:!1,title:"请选择参考账期",onOk:function(t){var n=m.split("-")[0],a=m.split("-")[1],o=p.toJS().reverse();if("YEAR_TOTAL"===t.value)y(t.value),g("",""),e.setState({start:"",end:""});else if("LAST_MONTH"===t.value){var l=o.findIndex(function(e){return e.value===m});if(0===l)r.default.info("不在有效账期区间内",1);else{var i=o[l-1].value;g(""+i.substr(0,4)+i.substr(5,6),""+i.substr(0,4)+i.substr(5,6)),e.setState({start:"",end:"",lastMonthString:i.substr(0,4)+"."+i.substr(5,6)}),y(t.value)}}else if("LAST_YEAR_MONTH"===t.value){var s=Number(n)-1+"-"+a,c=!1;for(var u in o)o[u].value===s&&(c=!0);c?(y(t.value),g(""+s+a,""+s+a),e.setState({start:"",end:""})):r.default.info("不在有效账期区间内",1)}else"ISSUE"!==t.value&&"ISSUE_RANGE"!==t.value||e.setState({modalVisible:!0,choose:t.value})}},"YEAR_TOTAL"===b&&"本年累计","LAST_YEAR_MONTH"===b?h?(a?a.replace(/\-/g,"."):"")+(o?"-"+o.split("-")[1]:""):"去年同期":"","LAST_MONTH"===b&&""+s,"ISSUE"===b&&""+(a?a.replace(/\-/g,"."):""),"ISSUE_RANGE"===b&&(a?a.replace(/\-/g,"."):"")+"-"+(o?o.replace(/-/,"."):""),i.default.createElement(u.default,{type:"calendar-simple",style:{color:"rgb(94,129,209)",marginLeft:"5px"}})))}}]),t}())||a;t.default=m},1937:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=c(n(193)),o=c(n(197)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(194),n(130);var i=n(0),s=c(i);function c(e){return e&&e.__esModule?e:{default:e}}var u=(0,n(22).immutableRenderDecorator)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={start:[],end:[],showDate:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.visible,a=t.issuedate,l=t.issues,i=t.endissuedate,c=t.referChooseValue,u=t.onChanged,f=t.onClose,d=this.state,m=d.start,p=d.end,h=[];l.size>0&&l.map(function(e){h.push({label:e.get("key"),value:e.get("value")})});var g=m.length?m[0]:a,b=l.findIndex(function(e){return e.get("value")===g}),y=(g.substr(0,4),[]);return l.slice(0,b).map(function(e){y.push({label:e.get("key"),value:e.get("value")})}),s.default.createElement(r.default,{transparent:!0,className:"referModal",visible:n,onClose:function(){f()},footer:[{text:"取消",onPress:function(){f()}},{text:"确定",onPress:function(){if("ISSUE"===c){var e=m.length?m[0]:a;u(e,e)}else if("ISSUE_RANGE"===c){var t=m.length?m[0]:a,n=p.length?p[0]:i;u(t,n)}f()}}]},"ISSUE"===c&&s.default.createElement(o.default,{onChange:function(t){e.setState({start:t})},value:m.length?m:[a],data:h,cascade:!1}),"ISSUE_RANGE"===c&&s.default.createElement("div",{className:"double-picker"},s.default.createElement("div",null,s.default.createElement(o.default,{onChange:function(t){e.setState({start:t})},value:m.length?m:[a],data:h,cascade:!1})),s.default.createElement("div",null,s.default.createElement(o.default,{onChange:function(t){e.setState({end:t})},value:p.length?p:[i],data:y,cascade:!1}))))}}]),t}())||a;t.default=u},1938:function(e,t,n){},965:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.reducer=void 0;var a=l(n(1919)),r=l(n(1496)),o=l(n(128));function l(e){return e&&e.__esModule?e:{default:e}}var i={lrbState:r.default,enclosureState:o.default};t.reducer=i,t.view=a.default}}]);