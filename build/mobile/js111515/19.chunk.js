(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[19],{1113:function(t,e,n){},1153:function(t,e,n){"use strict";n.d(e,"h",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"j",(function(){return f})),n.d(e,"i",(function(){return d})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return h})),n.d(e,"f",(function(){return b})),n.d(e,"e",(function(){return m})),n.d(e,"d",(function(){return g})),n.d(e,"l",(function(){return S})),n.d(e,"m",(function(){return p})),n.d(e,"k",(function(){return I})),n.d(e,"g",(function(){return O}));n(32),n(55),n(98),n(115),n(62),n(33),n(31),n(56),n(133),n(83);var i=n(12),r=n(17),o=(n(130),n(1340)),u=n(14),c=n(2),a=function(t,e){return function(n,a){c.a.toast.loading(u.p,0),n({type:o.l,bool:!1});var s=a().measureState.get("cannotChecked").toJS(),f=a().measureState.get("haveSwitchList"),d=a().homeState.getIn(["data","userInfo"]).get("sobInfo"),l=d.get("newJr"),h=!!d&&(d.get("moduleInfo").indexOf("RUNNING")>-1&&l);Object(r.g)(h?"getJrMeasureList":"getMeasureList","POST",JSON.stringify({begin:t?"".concat(t.substr(0,4)).concat(h?"-":"").concat(t.substr(5,2)):"",end:e?"".concat(e.substr(0,4)).concat(h?"-":"").concat(e.substr(5,2)):"".concat(t.substr(0,4)).concat(h?"-":"").concat(t.substr(5,2)),referBegin:"",referEnd:""}),(function(r){if(Object(i.u)(r)){c.a.toast.hide(),n({type:o.i,issuedate:t,endissuedate:e});var u=r.data.result[0],a=r.data.result.find((function(t){return"\u4e1a\u52a1\u5229\u6da6"===t.linename.substr(-4,4)})),d=r.data.result.findIndex((function(t){return"\u4e1a\u52a1\u5229\u6da6"===t.linename.substr(-4,4)})),l=r.data.result.slice(1,d);!function t(e,n){return e.map((function(e){s.includes(e.linename)||(e.showChild=!1,e.checked=n,e.testMonthaccumulation="".concat(e.monthaccumulation.toFixed(2)),e.testShareOfMonth="".concat(Math.round(100*e.shareOfMonth).toFixed())),e.childProfit.length>0&&t(e.childProfit,!1),f.includes(e.linename)&&("\u7ba1\u7406\u8d39\u7528"===e.linename?(e.testAmount=!1,e.childProfit.length>0&&e.childProfit.map((function(t){t.testAmount=!1}))):(e.testAmount=!0,e.childProfit.length>0&&e.childProfit.map((function(t){t.testAmount=!0}))))}))}(l,!0),n({type:o.h,incomeTotal:u,profit:a,detailList:l,checkedList:[],showChildList:[]})}}))}},s=function(t){return function(e){e({type:o.a,value:t})}},f=function(t,e){return function(n,i){var r=i().measureState.get("detailList").toJS();!function e(n){return n.map((function(n,i){(n.lineindex?n.lineindex:n.acId)===t&&(n.showChild=!n.showChild),n.childProfit.length>0&&e(n.childProfit)}))}(r),n({type:o.m,detailList:r}),n({type:o.k,resultShowChildItem:e})}},d=function(t,e){return function(n,i){var r=i().measureState.get("detailList").toJS(),u=function t(n){return n.map((function(n,i){n.checked=!e,n.childProfit.length>0&&t(n.childProfit)}))};!function n(i){return i.map((function(i,r){var o=i.lineindex?i.lineindex:i.acId;if(o===t?(i.checked=!e,i.childProfit.length>0&&u(i.childProfit)):n(i.childProfit),i.childProfit.find((function(e){var n=e.lineindex?e.lineindex:e.acId;return t===n}))){var c=0,a=0;i.childProfit.filter((function(t){return t.checked})).map((function(t,e){c+=Number(t.testShareOfMonth),a+=Number(t.testMonthaccumulation)})),i.testShareOfMonth="".concat(c),i.testMonthaccumulation="".concat(a.toFixed(2)),0===i.childProfit.filter((function(t){return t.checked})).length?i.checked=!1:i.checked=!0}else if(o===t&&i.childProfit.length>0){var s=0,f=0;i.childProfit.filter((function(t){return t.checked})).map((function(t,e){s+=Number(t.testShareOfMonth),f+=Number(t.testMonthaccumulation)})),i.testShareOfMonth="".concat(s),i.testMonthaccumulation="".concat(f.toFixed(2))}}))}(r),n({type:o.m,detailList:r})}},l=function(){return function(t){t({type:o.b})}},h=function(t){return function(e,n){var i=n().measureState.get("detailList").toJS(),r=function t(e){return e.map((function(e,n){e.testAmount=!e.testAmount,e.testMonthaccumulation="".concat(e.monthaccumulation.toFixed(2)),e.testShareOfMonth="".concat(Math.round(100*e.shareOfMonth)),e.childProfit.length>0&&t(e.childProfit)}))};!function e(n){return n.map((function(n,i){n.linename===t?(n.testAmount=!n.testAmount,n.testMonthaccumulation="".concat(n.monthaccumulation.toFixed(2)),n.testShareOfMonth="".concat(Math.round(100*n.shareOfMonth)),n.childProfit.length>0&&r(n.childProfit)):e(n.childProfit)}))}(i),e({type:o.m,detailList:i})}},b=function(t,e){return function(n,i){var r=i().measureState.get("detailList").toJS(),u=function t(n){return n.map((function(n,i){n.checked=e,n.childProfit.length>0&&t(n.childProfit)}))};!function n(i){return i.map((function(i,r){(i.lineindex?i.lineindex:i.acId)===t?(i.checked=!e,i.testMonthaccumulation="".concat(i.monthaccumulation.toFixed(2)),i.testShareOfMonth="".concat(Math.round(100*i.shareOfMonth)),i.childProfit.length>0&&u(i.childProfit)):n(i.childProfit)}))}(r),n({type:o.m,detailList:r})}},m=function(t,e){return function(n,i){var r=i().measureState.get("detailList").toJS();!function n(i){return i.map((function(i,r){if((i.lineindex?i.lineindex:i.acId)===e?(i.testShareOfMonth=t,i.childProfit.length>0&&i.childProfit.map((function(t){t.checked=!1}))):n(i.childProfit),i.childProfit.find((function(t){var n=t.lineindex?t.lineindex:t.acId;return e===n}))){var o=0;i.childProfit.filter((function(t){return t.checked})).map((function(t,e){o+=Number(t.testShareOfMonth)})),i.testShareOfMonth="".concat(o)}}))}(r),n({type:o.m,detailList:r})}},g=function(t,e){return function(n,i){var r=i().measureState.get("detailList").toJS();!function n(i){return i.map((function(i,r){if((i.lineindex?i.lineindex:i.acId)===e?(i.testMonthaccumulation=t,i.childProfit.length>0&&i.childProfit.map((function(t){t.checked=!1}))):n(i.childProfit),i.childProfit.find((function(t){var n=t.lineindex?t.lineindex:t.acId;return e===n}))){var o=0;i.childProfit.filter((function(t){return t.checked})).map((function(t,e){o+=Number(t.testMonthaccumulation)})),i.testMonthaccumulation="".concat(o.toFixed(2))}}))}(r),n({type:o.m,detailList:r})}},S=function(t){return function(e){e({type:o.l,bool:t})}},p=function(){return function(t,e){t(e().measureState.get("testProfit")?L():E())}},L=function(){return function(t,e){var n=e().measureState.get("detailList").toJS().filter((function(t){return!0===t.checked})),i=[],r=[];n.map((function(t){!0===t.testAmount?r.push(t):i.push(t)}));var u=e().measureState.get("amountInput"),c=Number(u),a=1,s=0;r.map((function(t){a-=Number(t.testShareOfMonth)/100})),i.map((function(t){s+=Number(t.testMonthaccumulation)}));var f=c*a-s,d=e().measureState.get("detailList").toJS().filter((function(t){return!0===t.checked}));t({type:o.j,profitResult:f,ProfitAndLossResult:c,resultList:d})}},E=function(){return function(t,e){var n=e().measureState.get("detailList").toJS().filter((function(t){return!0===t.checked})),i=e().measureState.get("amountInput"),r=Number(i),u=[],c=[];n.map((function(t){!0===t.testAmount?c.push(t):u.push(t)}));var a=Number(i),s=0;u.map((function(t){a+=Number(t.testMonthaccumulation)})),c.map((function(t){s+=Number(t.testShareOfMonth)}));var f=a/(1-s/100),d=e().measureState.get("detailList").toJS().filter((function(t){return!0===t.checked}));t({type:o.j,profitResult:r,ProfitAndLossResult:f,resultList:d})}},I=function(t){return function(e){e({type:o.e,id:t})}},O=function(){return function(t){t({type:o.c})}}},1230:function(t,e,n){"use strict";n.d(e,"e",(function(){return s})),n.d(e,"i",(function(){return f})),n.d(e,"h",(function(){return d})),n.d(e,"b",(function(){return l})),n.d(e,"f",(function(){return h})),n.d(e,"d",(function(){return m})),n.d(e,"g",(function(){return g})),n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return L}));n(32),n(33),n(29),n(82);var i=n(12),r=n(17),o=n(130),u=n(1339),c=n(14),a=n(2),s=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(o,s){var f=s().homeState.getIn(["data","userInfo"]).get("sobInfo"),d=f.get("newJr"),l="",h={};if(!!f&&(f.get("moduleInfo").indexOf("RUNNING")>-1&&d)){l="getJrincomestatement";var b=t?"".concat(t.substr(0,4),"-").concat(t.substr(5,2)):"";h={begin:b,end:e?"".concat(e.substr(0,4),"-").concat(e.substr(5,2)):b,needPeriod:""},a.a.toast.loading(c.p,0),Object(r.g)(l,"POST",JSON.stringify(h),(function(t){Object(i.u)(t)&&(a.a.toast.hide(),o({type:u.c,receivedData:t.data.profitlist}))}))}else if(0==n)e?(l="getincomestatementquarter",h={begin:t?"".concat(t.substr(0,4)).concat(t.substr(5,2)):"",end:e?"".concat(e.substr(0,4)).concat(e.substr(5,2)):""}):(l="getincomestatement",h={year:t?t.substr(0,4):"",month:t?t.substr(5,2):""}),a.a.toast.loading(c.p,0),Object(r.g)(l,"POST",JSON.stringify(h),(function(t){if(Object(i.u)(t)){if(a.a.toast.hide(),o({type:u.c,receivedData:t.data.profitlist}),t.data.assList)if(t.data.assList.length>1){var e=t.data.assList;e.unshift({assid:0,assname:"\u5168\u90e8",asscategory:"asscategory"}),o({type:u.a,assSelectableList:e})}else{o({type:u.a,assSelectableList:[]})}o({type:u.g,selectAssId:n})}}));else{var m=s().lrbState.get("assSelectableList"),g=m.getIn([n,"assid"]),S=m.getIn([n,"asscategory"]);e?(l="getincomestatementquarterass",h={begin:t?"".concat(t.substr(0,4)).concat(t.substr(5,2)):"",end:e?"".concat(e.substr(0,4)).concat(e.substr(5,2)):"",asscategory:S,assid:g}):(l="getincomestatementass",h={year:t?t.substr(0,4):"",month:t?t.substr(5,2):"",asscategory:S,assid:g}),a.a.toast.loading(c.p,0),Object(r.g)(l,"POST",JSON.stringify(h),(function(t){Object(i.u)(t)&&(a.a.toast.hide(),o({type:u.c,receivedData:t.data.profitlist}))}))}o({type:u.d,issuedate:t,endissuedate:e})}},f=function(t){return{type:u.n,blockIdx:t}},d=function(t,e,n){return function(o){var s=n.split("_"),f=s[0],d=s[1],l=s[2],h="",b={};0==f?(e?(h="getincomestatementquarter",b={begin:t?"".concat(t.substr(0,4)).concat(t.substr(5,2)):"",end:e?"".concat(e.substr(0,4)).concat(e.substr(5,2)):""}):(h="getincomestatement",b={year:t?t.substr(0,4):"",month:t?t.substr(5,2):""}),Object(r.g)(h,"POST",JSON.stringify(b),(function(t){return Object(i.u)(t)&&o({type:u.c,receivedData:t.data.profitlist})}))):(e?(h="getincomestatementquarterass",b={begin:t?"".concat(t.substr(0,4)).concat(t.substr(5,2)):"",end:e?"".concat(e.substr(0,4)).concat(e.substr(5,2)):"",asscategory:l,assid:d}):(h="getincomestatementass",b={year:t?t.substr(0,4):"",month:t?t.substr(5,2):"",asscategory:l,assid:d}),a.a.toast.loading(c.p,0),Object(r.g)(h,"POST",JSON.stringify(b),(function(t){Object(i.u)(t)&&(a.a.toast.hide(),o({type:u.c,receivedData:t.data.profitlist}))}))),o({type:u.g,selectAssId:f})}},l=function(t){return{type:u.e,bool:t}},h=function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"true";return function(o,u){var c=u().homeState.getIn(["data","userInfo"]).get("sobInfo"),a=c.get("newJr"),s=!!c&&(c.get("moduleInfo").indexOf("RUNNING")>-1&&a),f=t?"".concat(t.substr(0,4)).concat(s?"-":"").concat(t.substr(5,2)):"",d={begin:f,end:e?"".concat(e.substr(0,4)).concat(s?"-":"").concat(e.substr(5,2)):f,referBegin:n?s?n.substr(0,4)+"-"+n.substr(4,2):n:"",referEnd:i?s?i.substr(0,4)+"-"+i.substr(4,2):i:"",getPeriod:r,needPeriod:r};o(b(d)),o(l(!0))}},b=function(t){return function(e,n){a.a.toast.loading(c.p,0);var s=n().homeState.getIn(["data","userInfo"]).get("sobInfo"),f=s.get("newJr"),d=!!s&&(s.get("moduleInfo").indexOf("RUNNING")>-1&&f);Object(r.g)(d?"getJrProfit":"getSelfTypeListData","POST",JSON.stringify(t),(function(n){if(Object(i.u)(n)){a.a.toast.hide();var r=e(d?o.j(n):o.e(n)),c=n.data.periodDtoJson?e(o.d(n.data.periodDtoJson)):"",s=t.begin?t.begin.substr(0,4)+"-"+t.begin.substr(d?5:4,2):r,f=(t.end?t.end:"".concat(n.data.periodDtoJson.lastyear,"-").concat(n.data.periodDtoJson.lastmonth),[]),l=[];for(var h in n.data.result)n.data.result[h].linename?f.push(n.data.result[h]):l.push(n.data.result[h]);e({type:u.m,selfListData:f,extraMessage:l,issues:c}),e(S(t.referBegin?t.referBegin:"",t.referEnd?t.referEnd:"")),e({type:u.j,value:"YEAR_TOTAL"}),t.end===t.begin?e({type:u.d,issuedate:s,endissuedate:""}):e({type:u.f,begin:s})}}))}},m=function(t){return{type:u.h,payload:t}},g=function(t,e,n,s){var f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"true";return function(d,l){a.a.toast.loading(c.p,0);var h=l().homeState.getIn(["data","userInfo"]).get("sobInfo"),b=h.get("newJr"),m=!!h&&(h.get("moduleInfo").indexOf("RUNNING")>-1&&b),g=t?"".concat(t.substr(0,4)).concat(m?"-":"").concat(t.substr(5,2)):"",p={begin:g,end:e?"".concat(e.substr(0,4)).concat(m?"-":"").concat(e.substr(5,2)):g,referBegin:n?m?n.substr(0,4)+"-"+n.substr(4,2):n:"",referEnd:s?m?s.substr(0,4)+"-"+s.substr(4,2):s:"",getPeriod:f,needPeriod:f};Object(r.g)(m?"getJrProfit":"getSelfTypeListData","POST",JSON.stringify(p),(function(t){if(Object(i.u)(t)){a.a.toast.hide();var r=d(m?o.j(t):o.e(t)),c=t.data.periodDtoJson?d(o.d(t.data.periodDtoJson)):"",f=p.begin?p.begin.substr(0,4)+"-"+p.begin.substr(m?5:4,2):r,l=e||"",h=[],b=[];for(var g in t.data.result)t.data.result[g].linename?h.push(t.data.result[g]):b.push(t.data.result[g]);d({type:u.m,selfListData:h,extraMessage:b,issues:c}),d({type:u.d,issuedate:f,endissuedate:l}),d(S(n||"",s||""))}}))}},S=function(t,e){return function(n){n({type:u.k,referBegin:t,referEnd:e})}},p=function(t){return function(e){e({type:u.j,value:t})}},L=function(t){return function(e){e({type:u.b,value:t})}}},1339:function(t,e,n){"use strict";n.d(e,"i",(function(){return i})),n.d(e,"g",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"n",(function(){return a})),n.d(e,"f",(function(){return s})),n.d(e,"e",(function(){return f})),n.d(e,"m",(function(){return d})),n.d(e,"h",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"j",(function(){return b})),n.d(e,"l",(function(){return m})),n.d(e,"b",(function(){return g}));var i="INIT_LRB",r="CHANGE_SELECTASSID",o="CHANGE_ASSSELECTABLELIST",u="CHANGE_ISSUDATE",c="CHANGE_INCOME_STATEMENT",a="TOGGLE_PROFIT_LINE_DISPLAY",s="CHANGE_LRB_BEGIN_DATE",f="CHANGE_LIST_TYPE",d="SET_SELF_TYPE_LIST_DATA",l="CHANGE_SHOW_CHILD_PROFIT_LIST",h="SET_REFER_DATE",b="SET_REFER_CHOOSE_VALUE",m="SET_SELF_LIST_EXTRA_MESSAGE",g="CHANGE_DIFFERENCE_TYPE"},1340:function(t,e,n){"use strict";n.d(e,"g",(function(){return i})),n.d(e,"i",(function(){return r})),n.d(e,"h",(function(){return o})),n.d(e,"a",(function(){return u})),n.d(e,"f",(function(){return c})),n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"m",(function(){return f})),n.d(e,"l",(function(){return d})),n.d(e,"j",(function(){return l})),n.d(e,"e",(function(){return h})),n.d(e,"c",(function(){return b})),n.d(e,"k",(function(){return m}));var i="INIT_MEASURE",r="SET_MEASURE_INIT_DATE",o="SET_MEASURE_INIT_DATA",u="CHANGE_AMOUNT_INPUT",c="HANDLE_SHOW_CHILD_LIST",a="HANDLE_CHECKED_LIST",s="CHANGE_MEASURE_TEST_TYPE",f="UPDATE_MEASURE_DETAIL_LIST",d="SHOW_MEASURE_RESULT",l="SET_MEASURE_RESULT",h="HANDLE_MEASURE_RESULT_LIST_SHOW_CHILD",b="CLEAR_MEASURE_RESULT_SHOW_CHILD_LIST",m="SET_RESULT_SHOW_CHILD_LIST"},1343:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(32),n(55),n(115),n(62),n(33),n(31),n(131),n(83);var i=n(4),r=n(1),o=(n(12),n(1339)),u=Object(r.fromJS)({issuedate:"",endissuedate:"",selectAssId:0,assSelectableList:[],showedProfitLineBlockIdxList:[],incomestatement:[{closingbalance:"",hashname:"",line:"",total:""}],ifSelfTypeList:!0,selfListData:[],showChildProfitList:[],referBegin:"",referEnd:"",referChooseValue:"YEAR_TOTAL",extraMessage:[],proportionDifference:"increaseDecreasePercent",issues:[]});function c(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments.length>1?arguments[1]:void 0;return((t={},Object(i.a)(t,o.i,(function(){return u})),Object(i.a)(t,o.g,(function(){return e.set("selectAssId",n.selectAssId)})),Object(i.a)(t,o.a,(function(){return e.set("assSelectableList",Object(r.fromJS)(n.assSelectableList))})),Object(i.a)(t,o.d,(function(){return e.set("issuedate",n.issuedate).set("endissuedate",n.endissuedate)})),Object(i.a)(t,o.c,(function(){return e.set("incomestatement",Object(r.fromJS)(n.receivedData))})),Object(i.a)(t,o.n,(function(){var t=e.get("showedProfitLineBlockIdxList");return n.blockIdx?t.indexOf(n.blockIdx)>-1?e.update("showedProfitLineBlockIdxList",(function(t){return t.map((function(t){return t===n.blockIdx?-1:t})).filter((function(t){return-1!==t}))})):e.update("showedProfitLineBlockIdxList",(function(t){return t.push(n.blockIdx)})):e.update("showedProfitLineBlockIdxList",(function(t){return t.size?t.clear():u.get("showedProfitLineBlockIdxList")}))})),Object(i.a)(t,o.f,(function(){return e.set("issuedate",n.begin)})),Object(i.a)(t,o.e,(function(){return e.set("ifSelfTypeList",n.bool)})),Object(i.a)(t,o.m,(function(){return n.issues&&(e=e.set("issues",Object(r.fromJS)(n.issues))),e.set("selfListData",Object(r.fromJS)(n.selfListData)).set("extraMessage",Object(r.fromJS)(n.extraMessage))})),Object(i.a)(t,o.h,(function(){var t,i=n.payload,o=e.get("showChildProfitList").toJS();if(o.includes(i)){var u=o.findIndex((function(t,e){return t==i}));o.splice(u,1),t=o}else t=o.concat(i);return e.set("showChildProfitList",Object(r.fromJS)(t))})),Object(i.a)(t,o.k,(function(){return e.set("referBegin",n.referBegin).set("referEnd",n.referEnd)})),Object(i.a)(t,o.j,(function(){return e.set("referChooseValue",n.value)})),Object(i.a)(t,o.l,(function(){return e.set("extraMessage",n.data)})),Object(i.a)(t,o.b,(function(){return e.set("proportionDifference",n.value)})),t)[n.type]||function(){return e})()}}}]);