(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[13],{1055:function(t,e,n){"use strict";n.r(e),n.d(e,"getApprovalList",(function(){return O})),n.d(e,"getModelInfo",(function(){return j})),n.d(e,"getCategorySubList",(function(){return m})),n.d(e,"getApprovalCurrentList",(function(){return T})),n.d(e,"getApprovalCurrentCard",(function(){return S})),n.d(e,"getApprovalStockList",(function(){return b})),n.d(e,"getApprovalStockCard",(function(){return C})),n.d(e,"getApprovalProjectList",(function(){return v})),n.d(e,"getApprovalProjectCard",(function(){return L})),n.d(e,"changeModelString",(function(){return I})),n.d(e,"saveApprovalItem",(function(){return A})),n.d(e,"getUploadGetTokenFetch",(function(){return P})),n.d(e,"uploadFiles",(function(){return h})),n.d(e,"getSpaceInfo",(function(){return E})),n.d(e,"initModel",(function(){return U})),n.d(e,"getCustomSpaceAndPreview",(function(){return J})),n.d(e,"getApprovalProcessModelList",(function(){return N})),n.d(e,"getRelationList",(function(){return M})),n.d(e,"changeApprovalOutString",(function(){return _})),n.d(e,"beforeAddManageTypeCard",(function(){return G})),n.d(e,"updateInstanceModel",(function(){return D})),n.d(e,"updateInstanceModelBeforeSave",(function(){return R})),n.d(e,"beforeInsertProjectCard",(function(){return F}));n(32),n(98),n(115),n(61),n(33),n(31),n(131),n(70),n(133),n(77),n(65);var a=n(4),i=n(51),o=n(102),r=n(1),u=n(1224),c=n(78),d=n(17),s=n(57),f=n(12),p=n(2),g=n(14),l=n(1101),y=n(1102),O=function(t,e){return function(t,e){Object(c.a)("getApprovalList","GET","",(function(e){Object(f.u)(e)&&t({type:u.h,data:e.data})}))}},j=function(t,e){return function(e,n){p.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(c.a)("getModelInfo","GET","modelCode=".concat(t),(function(t){p.a.toast.hide(),Object(f.u)(t)&&e({type:u.i,data:t.data})}))}},m=function(t,e){return function(n,a){Object(c.a)("getCategorySubList","GET","uuid=".concat(t,"&jrCategoryProperty=").concat(e),(function(t){Object(f.u)(t)&&n({type:u.e,name:"categoryList",value:Object(r.fromJS)([t.data])})}))}},T=function(t,e,n,a){return function(i,o){var c=o().editApprovalState.get("modelInfo"),d=c.get("jrCategoryId"),p=c.get("jrCategoryProperty");Object(s.a)("getApprovalCurrentList","POST",JSON.stringify({categoryList:t,inCardList:e,outCardList:n,subCategoryList:a,jrCategoryUuid:d,jrCategoryProperty:p}),(function(t){Object(f.u)(t)&&i({type:u.e,name:"currentCardTree",value:Object(r.fromJS)(t.data)})}))}},S=function(t,e,n,a,i,o){return function(c,d){var p=d().editApprovalState.get("modelInfo"),g=p.get("jrCategoryId"),l=p.get("jrCategoryProperty");Object(s.a)("getApprovalCurrentCard","POST",JSON.stringify({categoryList:n,inCardList:a,outCardList:i,subCategoryList:o,categoryUuid:"ALL"!==t?t:"",isTopCategory:e,jrCategoryUuid:g,jrCategoryProperty:l}),(function(t){Object(f.u)(t)&&c({type:u.e,name:"currentCardList",value:Object(r.fromJS)(t.data)})}))}},b=function(t,e,n,a){return function(i,o){var c=o().editApprovalState.get("modelInfo"),d=c.get("jrCategoryId"),p=c.get("jrCategoryProperty");Object(s.a)("getApprovalStockList","POST",JSON.stringify({categoryList:t,inCardList:e,outCardList:n,subCategoryList:a,jrCategoryUuid:d,jrCategoryProperty:p}),(function(t){Object(f.u)(t)&&i({type:u.e,name:"stockCardTree",value:Object(r.fromJS)(t.data)})}))}},C=function(t,e,n,a,i,o){return function(c,d){var p=d().editApprovalState.get("modelInfo"),g=p.get("jrCategoryId"),l=p.get("jrCategoryProperty");Object(s.a)("getApprovalStockCard","POST",JSON.stringify({categoryList:n,inCardList:a,outCardList:i,subCategoryList:o,categoryUuid:"ALL"!==t?t:"",isTopCategory:e,jrCategoryUuid:g,jrCategoryProperty:l}),(function(t){Object(f.u)(t)&&c({type:u.e,name:"stockCardList",value:Object(r.fromJS)(t.data)})}))}},v=function(t,e,n,a){return function(i,o){var c=o().editApprovalState.get("modelInfo"),d=c.get("jrCategoryId"),p=c.get("jrCategoryProperty");Object(s.a)("getApprovalProjectList","POST",JSON.stringify({categoryList:t,inCardList:e,outCardList:n,subCategoryList:a,jrCategoryUuid:d,jrCategoryProperty:p}),(function(t){Object(f.u)(t)&&i({type:u.e,name:"projectCardTree",value:Object(r.fromJS)(t.data)})}))}},L=function(t,e,n,a,i,o){return function(c,d){var p=d().editApprovalState.get("modelInfo"),g=p.get("jrCategoryId"),l=p.get("jrCategoryProperty");Object(s.a)("getApprovalProjectCard","POST",JSON.stringify({categoryList:n,inCardList:a,outCardList:i,subCategoryList:o,categoryUuid:"ALL"!==t?t:"",isTopCategory:e,jrCategoryUuid:g,jrCategoryProperty:l}),(function(t){Object(f.u)(t)&&c({type:u.e,name:"projectCardList",value:Object(r.fromJS)(t.data)})}))}},I=function(t,e){return{type:u.g,place:t,value:e}},A=function(t){return function(e,n){var a=n().editApprovalState,i=a.get("componentList").toJS(),r=a.get("modelInfo").toJS(),u=r.modelCode,c=a.get("departmentId"),d=i.findIndex((function(t){return"BM"===t.jrComponentType})),f=(i.findIndex((function(t){return"DDPhotoField"===t.componentType})),i.find((function(t){return"MX"===t.jrComponentType}))),g=f.detailList[0].findIndex((function(t){return"CH"===t.jrComponentType})),l=(i.find((function(t){return"XM"===t.jrComponentType})),i.find((function(t){return"WLDW"===t.jrComponentType})),i.map((function(t){return{label:t.label,value:"object"===Object(o.a)(t.value)?JSON.stringify(t.value):t.value,detailValueList:(t.detailList||[]).map((function(t){return t.map((function(t){return{label:t.label,value:t.value,componentType:t.componentType,jrComponentType:t.jrComponentType}}))})),componentType:t.componentType,jrComponentType:t.jrComponentType}})));d>-1&&(c=a.getIn(["views","departmentId"]),l.splice(d,1)),p.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(s.a)("saveApprovalItem","POST",JSON.stringify({valueList:l,modelInfo:r,departmentId:c}),(function(n){p.a.toast.hide(),0===n.code?(p.a.toast.success("\u6210\u529f"),t&&t()):900501===n.code?p.a.Confirm({title:"\u63d0\u793a",message:"\u8be5\u5ba1\u6279\u7684\u9009\u9879\u8d85\u8fc7\u9489\u9489\u6a21\u7248\u8303\u56f4\uff0c\u662f\u5426\u66f4\u65b0\u6a21\u7248?",buttonLabels:["\u53d6\u6d88","\u786e\u8ba4"],onSuccess:function(n){if(1===n.buttonIndex){var a=[],o=[],r=[],c={XM:r,WLDW:o};["XM","WLDW"].forEach((function(t){var e=i.find((function(e){return e.jrComponentType===t})),n=i.findIndex((function(e){return e.jrComponentType===t})),a=i.find((function(t){return"MX"===t.jrComponentType})).detailList;if(n>-1)e.code&&c[t].push({code:e.code,name:e.name});else a.map((function(e){var n=e.findIndex((function(e){return e.jrComponentType===t}));n>-1&&e[n].code&&e[n].code&&c[t].push({code:e[n].code,name:e[n].name})}))}));g>-1&&(a=f.detailList.map((function(t){var e=t.find((function(t){return"MX_AMOUNT"===t.jrComponentType})),n=t.find((function(t){return"CH"===t.jrComponentType}));return{code:n.code,name:n.name,unit:e.unit||""}}))),e(R(u,o,r,a,t))}}}):p.a.toast.info(n.message)}))}},P=function(){return function(t,e){Object(d.g)("aliyunOssPolicy","GET","",(function(e){t({type:u.a,receivedData:e.data,code:e.code})}))}},h=function(t,e,n,a,i,o){return function(t,a){var d=[];d.push({fileName:i,enclosurePath:n.data.enclosurePath,size:(n.data.size/1024).toFixed(2),imageOrFile:n.data.mimeType.toString().toUpperCase().indexOf("IMAGE")>-1?"TRUE":"FALSE",label:"\u65e0\u6807\u7b7e",beDelete:!1,mimeType:n.data.mimeType}),Object(c.a)("insertEnclosure","POST",JSON.stringify({enclosureList:d}),(function(n){0===n.code&&t({type:u.f,placeArr:e,value:Object(r.fromJS)(n.data.enclosureList)}),o&&p.a.toast.hide()}))}},E=function(t){return function(e){Object(c.a)("getSpaceInfo","GET","",(function(n){if(Object(f.u)(n)){var a=n.data.processSpaceId;e({type:u.e,name:"spaceId",value:a}),p.a.uploadAttachment({image:{multiple:!0,compress:!1,max:9,spaceId:a},space:{corpId:sessionStorage.getItem("corpId"),spaceId:a,isCopy:1,max:9},file:{spaceId:a,max:1},types:["photo","camera","file","space"],onSuccess:function(e){var n=e.data.map((function(t){return Object(i.a)({},t,{type:e.type})}));t&&t(n)}})}}))}},U=function(t){return function(e){e({type:u.j}),t&&e(j(t))}},J=function(t){return function(e){Object(c.a)("getCustomSpace","POST",JSON.stringify({fileId:t.get("fileId"),spaceId:t.get("spaceId"),type:"download"}),(function(e){Object(f.u)(e)&&p.a.preview({corpId:sessionStorage.getItem("corpId"),spaceId:t.get("spaceId"),fileId:t.get("fileId"),fileName:t.get("fileName"),fileSize:t.get("fileSize"),fileType:t.get("fileType"),onSuccess:function(t){},onFail:function(t){console.log(t)}})}))}},N=function(t){return function(e,n){n().searchApprovalState;Object(c.a)("getapprovalprocessmodellist","POST",JSON.stringify(Object(i.a)({},t)),(function(t){Object(f.u)(t)&&e({type:u.e,name:"processModelList",value:Object(r.fromJS)(t.data)})}))}},M=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return function(r,d){!n&&p.a.toast.loading(g.p,0);var s=d().editApprovalState;delete t.refresh;var l=e||s.getIn(["views","currentPage"]);Object(c.a)("getRelationList","POST",JSON.stringify(Object(i.a)({currentPage:l,pageSize:g.l},t)),(function(e){!n&&p.a.toast.hide(),Object(f.u)(e)&&(n&&a.setState({isLoading:!1}),r({type:u.b,receivedData:e.data,param:t,currentPage:l,shouldConcat:n}),o&&o())}))}},_=function(t,e){return function(n){return n({type:u.e,name:t,value:e})}},G=function(t,e){return function(n){n(l.v()),p.a.toast.loading(g.p,0),Object(c.a)("getIUManageCardLimitAndAc","GET","",(function(t){Object(f.u)(t)&&(Object(c.a)("getInitRelaCard","GET","",(function(t){Object(f.u)(t)&&n(l.g("code",t.data.code))})),n({type:u.c,data:t.data,insertOrModify:e,fromPage:"editApproval"})),p.a.toast.hide()})),t()}},D=function(t,e,n,i){return function(o,u){p.a.toast.loading(g.p,0),Object(c.a)("updateInstanceModel","POST",JSON.stringify(Object(a.a)({modelCode:t},e+"List",[n])),(function(t){if(p.a.toast.hide(),Object(f.u)(t)){p.a.toast.info("\u4fdd\u5b58\u6210\u529f");var n=u().editApprovalState.get("componentList"),a=n.find((function(t){return"MX"===t.get("jrComponentType")})).get("detailList"),c=n.findIndex((function(t){return"MX"===t.get("jrComponentType")})),d={contactCard:"WLDW",projectCard:"XM",stockCard:"CH"}[e],s={contactCard:t.data.contactSelectValueScope,projectCard:t.data.projectSelectValueScope,stockCard:t.data.stockSelectValueScope}[e],g=(n.find((function(t){return t.get("jrComponentType")===d})),n.findIndex((function(t){return t.get("jrComponentType")===d})));if(g>-1)o(I(["componentList",g,"selectValueScope"],Object(r.fromJS)(s)));else{var l=a.map((function(t){var e=t.findIndex((function(t){return t.get("jrComponentType")===d}));return t.setIn([e,"selectValueScope"],Object(r.fromJS)(s))}));o(I(["componentList",c,"detailList"],Object(r.fromJS)(l)))}i()}}))}},R=function(t,e,n,a,i){return function(o,r){p.a.toast.loading(g.p,0),Object(c.a)("updateInstanceModel","POST",JSON.stringify({modelCode:t,contactCardList:e,projectCardList:n,stockCardList:a}),(function(t){p.a.toast.hide(),Object(f.u)(t)&&o(A(i))}))}},F=function(){return function(t){t(y.a(["views","insertOrModify"],"insert")),Object(c.a)("getProjectConfigHighType","GET","",(function(e){Object(f.u)(e)&&(t({type:u.k,list:e.data}),t(y.m("data","editApproval")),t(y.k(e.data[1].uuid)),t(y.g()))}))}}},1062:function(t,e,n){n(39)({target:"String",proto:!0},{repeat:n(553)})},1101:function(t,e,n){"use strict";n.d(e,"v",(function(){return s})),n.d(e,"t",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"g",(function(){return g})),n.d(e,"e",(function(){return l})),n.d(e,"a",(function(){return y})),n.d(e,"f",(function(){return O})),n.d(e,"A",(function(){return j})),n.d(e,"r",(function(){return m})),n.d(e,"n",(function(){return T})),n.d(e,"m",(function(){return S})),n.d(e,"q",(function(){return b})),n.d(e,"u",(function(){return C})),n.d(e,"c",(function(){return v})),n.d(e,"i",(function(){return L})),n.d(e,"y",(function(){return I})),n.d(e,"s",(function(){return A})),n.d(e,"d",(function(){return P})),n.d(e,"p",(function(){return h})),n.d(e,"x",(function(){return E})),n.d(e,"j",(function(){return U})),n.d(e,"k",(function(){return J})),n.d(e,"z",(function(){return N})),n.d(e,"w",(function(){return M})),n.d(e,"l",(function(){return _})),n.d(e,"o",(function(){return G})),n.d(e,"C",(function(){return D})),n.d(e,"B",(function(){return R})),n.d(e,"h",(function(){return F}));n(32),n(62),n(31),n(70),n(29),n(83),n(1062),n(82);var a=n(12),i=n(1),o=n(1149),r=n(57),u=n(2),c=n(14),d=n(1040),s=(n(1055),function(){return function(t){Object(r.a)("getIUManageListTitle","GET","",(function(e){Object(a.u)(e)&&t({type:o.u,title:e.data})}))}}),f=function(t){return function(e,n){var i=t.get("name"),d=t.get("uuid"),s=n().relativeConfState.getIn(["views","anotherTabName"]);i===s?(u.a.toast.loading(c.p,0),Object(r.a)("getIUmanageListAll","GET","listFrom=",(function(t){u.a.toast.hide(),Object(a.u)(t)&&e({type:o.t,list:t.data.resultList,name:i,tree:[],uuid:""})}))):(u.a.toast.loading(c.p,0),Object(r.a)("getIUmanageListAll","GET","listFrom=".concat(d),(function(t){Object(a.u)(t)&&Object(r.a)("getIUManageTreeByType","GET","ctgyUuid=".concat(d),(function(n){u.a.toast.hide(),Object(a.u)(n)&&e({type:o.t,list:t.data.resultList,name:i,tree:n.data.resultList,uuid:d})}))})))}},p=function(t,e){return function(n){u.a.toast.loading(c.p,0),Object(r.a)("getIUManageCardLimitAndAc","GET","",(function(t){Object(a.u)(t)&&(Object(r.a)("getInitRelaCard","GET","",(function(t){Object(a.u)(t)&&n(g("code",t.data.code))})),n({type:o.a,data:t.data,insertOrModify:e})),u.a.toast.hide()})),t()}},g=function(t,e){return{type:o.g,name:t,value:e}},l=function(t,e){return function(n){e?Object(r.a)("getIUManageTreeByType","GET","ctgyUuid=".concat(t.get("uuid")),(function(i){Object(a.u)(i)&&n({type:o.d,tag:t,checked:e,tree:i.data.resultList})})):n({type:o.d,tag:t,checked:e,tree:[]})}},y=function(t){return{type:o.y,uuid:t}},O=function(t,e){return{type:o.e,uuid:t,name:e}},j=function(t,e,n){return function(i,s){u.a.toast.loading(c.p,0);var f=s().relativeConfState.get("relativeCardTemp").toJS(),p=s().relativeConfState.getIn(["relativeCardTemp","insertOrModify"]),g=s().relativeConfState.getIn(["views","activeTapKeyUuid"]),l=s().relativeConfState.getIn(["views","sonUuid"]),y=function(){if("insert"===p){Object(r.a)("saveIUManageCard","POST",JSON.stringify({psiData:f,insertFrom:g,treeFrom:l,needAutoIncrementCode:"insert"!==n,action:{editRunning:"SAVE_JR-QUICK_MANAGER-SAVE_CONTACT",relative:"MANAGER-CONTACT_SETTING-CUD_CONTACT_CARD",searchApproval:"QUERY_PROCESS-QUICK_MANAGER-SAVE_CONTACT",editApproval:"INITIATE_PROCESS-QUICK_MANAGER-SAVE_CONTACT"}[t]}),(function(r){if(Object(a.u)(r)){if(i({type:o.A,list:r.data.resultList,treeList:r.data.typeList,flag:n,code:r.data.autoIncrementCode}),"relative"!==t&&"editApproval"!==t&&i(d.i()),"editApproval"===t)s().editApprovalState.getIn(["modelInfo","callback"])(f);"insert"===n?u.a.toast.info("\u4fdd\u5b58\u6210\u529f",2,e()):u.a.toast.info("\u4fdd\u5b58\u6210\u529f")}}))}else Object(r.a)("editIUManageCard","POST",JSON.stringify({psiData:f,modifyFrom:g,treeFrom:l}),(function(t){Object(a.u)(t)&&(i({type:o.A,list:t.data.resultList,treeList:t.data.typeList}),u.a.toast.success("\u4fdd\u5b58\u6210\u529f",2,e()))}))};Object(r.a)("adjustIUmanageCardTitleSame","POST",JSON.stringify({psiData:{name:f.name,uuid:f.uuid}}),(function(t){Object(a.u)(t)&&(t.data.repeat?u.a.Confirm({message:"\u5361\u7247\u540d\u79f0\u4e0e[\u7f16\u7801\uff1a".concat(t.data.card.code,"]\u5361\u7247\u91cd\u590d\uff0c\u786e\u5b9a\u4fdd\u5b58\u5417\uff1f"),title:"\u540d\u79f0\u91cd\u590d",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(t){1===t.buttonIndex&&y()},onFail:function(t){}}):y()),u.a.toast.hide()}))}},m=function(t,e){return function(n){u.a.toast.loading(c.p,0),Object(r.a)("getIUManageOneCardInfo","GET","uuid=".concat(t),(function(t){Object(a.u)(t)&&(n({type:o.a,data:t.data,insertOrModify:"modify"}),e())})),u.a.toast.hide()}},T=function(t){return{type:o.h,clearType:t}},S=function(t,e){return{type:o.o,checked:t,uuid:e}},b=function(t){return function(e,n){var i=n().relativeConfState.get("relativeCardSelectList").toJS();if(0!==i.length){n().relativeConfState.getIn(["views","activeTapKey"]);var d=n().relativeConfState.getIn(["views","activeTapKeyUuid"]),s=n().relativeConfState.getIn(["views","sonUuid"]);u.a.toast.loading(c.p,0),Object(r.a)("deleteIUManageListCard","POST",JSON.stringify({deleteList:i,deleteFrom:d,treeFrom:s}),(function(n){u.a.toast.hide(),Object(a.u)(n)&&(e({type:o.q,data:n.data.resultList,treeList:n.data.typeList}),""===n.data.error?u.a.toast.info("\u5220\u9664\u6210\u529f",2,t):u.a.toast.info(n.data.error))}))}else u.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u5220\u9664\u7684\u5361\u7247")}},C=function(t,e,n){return function(i){Object(r.a)("getIUmanageListBySontype","GET","ctgyUuid=".concat(t,"&&subordinateUuid=").concat(e),(function(t){Object(a.u)(t)&&i({type:o.s,data:t.data.resultList,sonUuid:e,sonName:n})}))}},v=function(){return{type:o.c}},L=function(t,e){return{type:o.j,name:t,value:e}},I=function(){return function(t,e){u.a.toast.loading(c.p,0);var n=e().relativeConfState.get("relativeHighTypeTemp").toJS();Object(r.a)("saveIUManageHighType","POST",JSON.stringify({psiData:n}),(function(e){u.a.toast.hide(),Object(a.u)(e)&&0===e.code&&(t(s()),u.a.toast.info("\u4fdd\u5b58\u6210\u529f",2))}))}},A=function(t,e){return function(n){n(F("relativeHighTypeTemp",t.set("treeList",Object(i.fromJS)([])),!0)),u.a.toast.loading(c.p,0),Object(r.a)("getIUManageTreeByType","GET","ctgyUuid=".concat(t.get("uuid")),(function(t){u.a.toast.hide(),Object(a.u)(t)&&(n(F(["relativeHighTypeTemp","treeList"],Object(i.fromJS)(t.data.resultList))),e&&e())}))}},P=function(t,e){return{type:o.i,status:t,uuid:e}},h=function(t){return function(e,n){var c=n().relativeConfState,d=c.get("cardHighTypeSelectList"),s=c.getIn(["views","activeTapKeyUuid"]);0!==d.size?Object(r.a)("deleteIUManageSettingHighTypeList","POST",JSON.stringify({deleteList:d}),(function(n){Object(a.u)(n)&&(0===n.code&&(e({type:o.p,title:n.data.resultList}),u.a.toast.info("\u5220\u9664\u6210\u529f",2,t),d.map((function(t){return t.get("uuid")})).includes(s)&&e(f(Object(i.fromJS)({uuid:"",name:"\u5168\u90e8"})))))})):u.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u5220\u9664\u7684\u7c7b\u522b")}},E=function(t,e){return{type:o.x,uuid:t,name:e}},U=function(t,e){return{type:o.m,name:t,value:e}},J=function(t,e){return{type:o.n,parentName:e,parentUuid:t}},N=function(t){return function(e,n){var o=n().relativeConfState,d=o.get("relativeTypeTemp"),s=o.getIn(["relativeHighTypeTemp","uuid"]);d=d.set("currentUnitCtgyUuid",s);var f=function(){u.a.toast.loading(c.p,0),Object(r.a)("saveIUManageType","POST",JSON.stringify({psiData:d}),(function(n){Object(a.u)(n)&&Object(r.a)("getIUmanageListAll","GET","listFrom=".concat(s),(function(o){u.a.toast.hide(),Object(a.u)(o)&&(e(F(["relativeHighTypeTemp","treeList"],Object(i.fromJS)(n.data.resultList))),u.a.toast.info("\u4fdd\u5b58\u6210\u529f",2,t))}))}))};Object(r.a)("adjustIUmanageTypeTitleSame","POST",JSON.stringify({psiData:{parentUuid:d.get("parentUuid"),name:d.get("name"),uuid:d.get("uuid")}}),(function(t){Object(a.u)(t)&&(t.data.repeat?u.a.Confirm({message:"\u540d\u79f0\u91cd\u590d",title:"\u5361\u7247\u7c7b\u522b\u540d\u79f0\u4e0e\u5df2\u6709\u5361\u7247\u7c7b\u522b\u540d\u79f0\u91cd\u590d\uff0c\u786e\u5b9a\u4fdd\u5b58\u5417\uff1f",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(t){f()},onFail:function(t){}}):f())}))}},M=function(t){return function(e){u.a.toast.loading(c.p,0),Object(r.a)("getIUManagetTreeSingleType","GET","uuid=".concat(t),(function(n){u.a.toast.hide(),Object(a.u)(n)&&e({type:o.v,uuid:t,data:n.data})}))}},_=function(t,e){return{type:o.l,uuid:t,value:e}},G=function(t,e){return function(n,o){var d=o().relativeConfState.getIn(["relativeHighTypeTemp","uuid"]),s=[];!function t(e){return e.map((function(e){e.get("checked")&&s.push(e.get("uuid")),e.get("childList").size>0&&t(e.get("childList"))}))}(t),0!==s.size?(u.a.toast.loading(c.p,0),Object(r.a)("deleteIUManageTreeList","POST",JSON.stringify({currentUnitCtgyUuid:d,deleteList:s}),(function(t){u.a.toast.hide(),Object(a.u)(t)&&(n(F(["relativeHighTypeTemp","treeList"],Object(i.fromJS)(t.data.resultList))),u.a.toast.info("\u5220\u9664\u6210\u529f",2,e))}))):u.a.toast.info("\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u7c7b\u522b")}},D=function(t,e){return function(n,o){var d=o().relativeConfState.getIn(["relativeHighTypeTemp","uuid"]);u.a.toast.loading(c.p,0),Object(r.a)("swapIUmanageTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:t,swappedSubordinateUuid:e,categoryUuid:d}}),(function(t){Object(a.u)(t)&&(u.a.toast.hide(),n(F(["relativeHighTypeTemp","treeList"],Object(i.fromJS)(t.data.resultList))))}))}},R=function(t,e){return{type:o.B,uuid:t,used:e}},F=function(t,e,n){return{type:o.k,dataType:t,value:e,short:n}}},1102:function(t,e,n){"use strict";n.d(e,"o",(function(){return f})),n.d(e,"a",(function(){return p})),n.d(e,"j",(function(){return l})),n.d(e,"h",(function(){return y})),n.d(e,"f",(function(){return O})),n.d(e,"d",(function(){return j})),n.d(e,"i",(function(){return m})),n.d(e,"n",(function(){return T})),n.d(e,"c",(function(){return S})),n.d(e,"e",(function(){return b})),n.d(e,"q",(function(){return C})),n.d(e,"l",(function(){return v})),n.d(e,"p",(function(){return L})),n.d(e,"m",(function(){return A})),n.d(e,"b",(function(){return P})),n.d(e,"k",(function(){return E})),n.d(e,"r",(function(){return U})),n.d(e,"g",(function(){return J}));n(32),n(55),n(166),n(31),n(70),n(77),n(1071),n(1029),n(1062),n(1030);var a=n(51),i=n(12),o=n(1),r=n(1150),u=n(57),c=n(2),d=n(14),s=n(1040),f=(n(1055),function(){return function(t){Object(u.a)("getProjectConfigHighType","GET","",(function(e){Object(i.u)(e)&&t({type:r.k,list:e.data})}))}}),p=function(t,e){return{type:r.d,dataType:t,value:e}},g=function(t,e){return{type:r.e,dataType:t,value:e}},l=function(){return function(t,e){var n=e().projectConfState.getIn(["views","currentType"]);Object(u.a)("getProjectListAndTree","GET","listFrom=".concat(n,"&treeFrom=''"),(function(e){Object(i.u)(e)&&t({type:r.h,data:e.data})}))}},y=function(t,e){return function(n){c.a.toast.loading(d.p,0),Object(u.a)("getProjectCardOne","GET","uuid=".concat(t),(function(t){c.a.toast.hide(),Object(i.u)(t)&&(n({type:r.g,data:t.data}),e.push("/config/project/projectCard"))}))}},O=function(t,e){return function(n){c.a.toast.loading(d.p,0),Object(u.a)("getProjectCardByType","GET","ctgyUuid=".concat(t,"&subordinateUuid=").concat(e),(function(t){c.a.toast.hide(),Object(i.u)(t)&&n(g("cardList",Object(o.fromJS)(t.data.resultList)))}))}},j=function(t,e,n,a){return function(r){var s=t.filter((function(t){return t.get("checked")})).map((function(t){return{uuid:t.get("uuid")}}));c.a.toast.loading(d.p,0),Object(u.a)("deleteProjectCard","POST",JSON.stringify({deleteFrom:e,treeFrom:n,deleteList:s}),(function(t){c.a.toast.hide(),Object(i.u)(t)&&(t.data.error?c.a.toast.info(t.data.error):c.a.toast.success("\u5220\u9664\u6210\u529f"),r(g("cardList",Object(o.fromJS)(t.data.resultList))),r(g("treeList",Object(o.fromJS)(t.data.typeList))),a())}))}},m=function(t){return function(e){var n=new Promise((function(e){Object(u.a)("getProjectConfigHighTypeOne","GET","uuid=".concat(t),(function(t){Object(i.u)(t)&&e(t.data)}))})),a=new Promise((function(e){Object(u.a)("getProjectListAndTree","GET","listFrom=".concat(t,"&treeFrom=''"),(function(t){Object(i.u)(t)&&e(t.data.typeList)}))}));Promise.all([n,a]).then((function(t){var n=t[0];n.treeList=t[1],e(g("highTypeData",Object(o.fromJS)(n)))}))}},T=function(){return function(t,e){var n=e().projectConfState.get("highTypeData").toJS();c.a.toast.loading(d.p,0),Object(u.a)("modifyProjectConfigHighType","POST",JSON.stringify({psiData:n}),(function(t){c.a.toast.hide(),Object(i.u)(t)&&(c.a.toast.info(t.message),0==t.code&&c.a.toast.success("\u4fdd\u5b58\u6210\u529f"))}))}},S=function(t,e){return{type:r.f,uuid:t,value:e}},b=function(t,e,n){return function(a,r){var s=[];if(function t(e){return e.map((function(e){e.get("checked")&&s.push(e.get("uuid")),e.get("childList").size>0&&t(e.get("childList"))}))}(e),0==s.length)return c.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u5220\u9664\u7684\u7c7b\u522b");c.a.toast.loading(d.p,0),Object(u.a)("deleteProjectType","POST",JSON.stringify({ctgyUuid:t,deleteList:s}),(function(t){c.a.toast.hide(),Object(i.u)(t)&&(c.a.toast.info(t.message),0==t.code&&(a(p(["highTypeData","treeList"],Object(o.fromJS)(t.data.resultList))),n()))}))}},C=function(t,e,n){return function(a){c.a.toast.loading(d.p,0),Object(u.a)("swapProjectTypePosition","POST",JSON.stringify({psiData:{categoryUuid:t,selectedSubordinateUuid:e,swappedSubordinateUuid:n}}),(function(t){c.a.toast.hide(),Object(i.u)(t)&&(c.a.toast.info(t.message),0==t.code&&a(g("treeList",Object(o.fromJS)(t.data.resultList))))}))}},v=function(t){return function(e){c.a.toast.loading(d.p,0),Object(u.a)("getProjectTreeOne","GET","uuid=".concat(t),(function(t){c.a.toast.hide(),Object(i.u)(t)&&e(g("treeData",Object(o.fromJS)(t.data)))}))}},L=function(t,e,n){return function(a){var o=e.get("name");return 0==o.length?c.a.toast.info("\u8bf7\u586b\u5199\u7c7b\u522b\u540d\u79f0"):o.length>30?c.a.toast.info("\u7c7b\u522b\u540d\u79f0\u6700\u591a30\u4e2a\u5b57\u7b26"):"\u5168\u90e8"==o?c.a.toast.info("\u7c7b\u522b\u540d\u79f0\u4e0d\u80fd\u4e3a\u5168\u90e8"):(c.a.toast.loading(d.p,0),void Object(u.a)("adjustProjectTypeNameSame","POST",JSON.stringify({psiData:e.toJS()}),(function(o){c.a.toast.hide(),Object(i.u)(o)&&(o.data.repeat?c.a.Confirm({message:"\u5361\u7247\u7c7b\u522b\u540d\u79f0\u4e0e\u5df2\u6709\u5361\u7247\u7c7b\u522b\u540d\u79f0\u91cd\u590d\uff0c\u786e\u5b9a\u4fdd\u5b58\u5417\uff1f",title:"\u540d\u79f0\u91cd\u590d",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(i){1===i.buttonIndex&&a(I(t,e,n))},onFail:function(t){return alert(t)}}):a(I(t,e,n)))})))}},I=function(t,e,n){return function(r){c.a.toast.loading(d.p,0),Object(u.a)("insertProjectTreeOne","POST",JSON.stringify({psiData:Object(a.a)({ctgyUuid:t},e.toJS())}),(function(t){c.a.toast.hide(),Object(i.u)(t)&&(c.a.toast.info(t.message),0==t.code&&(n.goBack(),r(g("treeList",Object(o.fromJS)(t.data.resultList)))))}))}},A=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"project";return{type:r.j,dataType:t,fromPage:e}},P=function(t,e,n){return function(a,o){var r=o().projectConfState.getIn(["data","psiData"]);if(""==r.get("selectUuid"))return c.a.toast.info("\u8bf7\u9009\u62e9\u7c7b\u522b");c.a.toast.loading(d.p,0),Object(u.a)("adjustProjectCardNameSame","POST",JSON.stringify({psiData:{name:r.get("name"),uuid:r.get("uuid")}}),(function(o){c.a.toast.hide(),Object(i.u)(o)&&(o.data.repeat?c.a.Confirm({message:"\u5361\u7247\u540d\u79f0\u4e0e[\u7f16\u7801\uff1a".concat(o.data.card.code,"]\u5361\u7247\u91cd\u590d\uff0c\u786e\u5b9a\u4fdd\u5b58\u5417\uff1f"),title:"\u540d\u79f0\u91cd\u590d",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(i){1===i.buttonIndex&&a(h(t,e,n))},onFail:function(t){return alert(t)}}):a(h(t,e,n)))}))}},h=function(t,e,n){return function(a,o){var f=o().projectConfState,g=f.getIn(["data","psiData"]),l="insert"==f.getIn(["views","insertOrModify"]);console.log("fromPage",t);var y=l?{insertFrom:f.getIn(["views","currentType"]),needAutoIncrementCode:!!n,treeFrom:f.getIn(["views","treeUuid"]),psiData:g.toJS(),action:{editRunning:"SAVE_JR-QUICK_MANAGER-SAVE_PROJECT",project:"MANAGER-PROJECT_SETTING-CUD_CARD",searchApproval:"QUERY_PROCESS-QUICK_MANAGER-SAVE_PROJECT",editApproval:"INITIATE_PROCESS-QUICK_MANAGER-SAVE_PROJECT"}[t]}:{modifyFrom:f.getIn(["views","currentType"]),treeFrom:f.getIn(["views","treeUuid"]),psiData:g.toJS()};c.a.toast.loading(d.p,0),Object(u.a)("".concat(l?"insertProjectCard":"editProjectCard"),"POST",JSON.stringify(y),(function(u){if(c.a.toast.hide(),Object(i.u)(u,"editApproval"===t?"":"show"))if(n)a(p(["data","psiData","name"],"")),a(p(["data","psiData","code"],u.data.autoIncrementCode)),a({type:r.a,receivedData:u.data.resultList});else{if("editApproval"===t)o().editApprovalState.getIn(["modelInfo","callback"])(g.toJS());a("project"!==t&&"editApproval"!==t?s.h():{type:r.a,receivedData:u.data.resultList}),e.goBack()}}))}},E=function(t){return function(e){c.a.toast.loading(d.p,0),Object(u.a)("getProjectTree","GET","uuid=".concat(t),(function(n){if(c.a.toast.hide(),Object(i.u)(n)){e(g("treeList",Object(o.fromJS)(n.data.resultList)));var a=n.data.resultList[0];0==a.childList.length?(e(p(["data","psiData","selectName"],a.name)),e(p(["data","psiData","selectUuid"],a.uuid)),e(p(["data","psiData","categoryTypeList",0],Object(o.fromJS)({ctgyUuid:t,subordinateUuid:a.uuid})))):(e(p(["data","psiData","selectName"],"")),e(p(["data","psiData","selectUuid"],"")),e(p(["data","psiData","categoryTypeList",0],Object(o.fromJS)({ctgyUuid:t,subordinateUuid:""}))))}}))}},U=function(t){return{type:r.l,dataType:t}},J=function(){return function(t){Object(u.a)("getProjectCardCode","GET","",(function(e){Object(i.u)(e)&&t({type:r.c,value:e.data.code})}))}}},1224:function(t,e,n){"use strict";n.d(e,"h",(function(){return a})),n.d(e,"i",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"g",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"j",(function(){return d})),n.d(e,"f",(function(){return s})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return p})),n.d(e,"k",(function(){return g}));var a="GET_APPROVAL_LIST",i="GET_APPROVAL_MODEL_INFO",o="CHANGE_APPROVAL_STATUS",r="CHANGE_APPROVAL_MODAL_STATUS",u="CHANGE_MODEL_STRING",c="AFTER_APPROVAL_GET_UPLOAD_SIGNATURE",d="INIT_EDIT_APPROVAL_STATE",s="CHANGE_MODEL_ENCLOSURE_STRING",f="AFTER_GET_EDIT_APPROVAL_PROCESSLIST",p="BEFORE_ADD_MANAGE_TYPE_CARD",g="PROJECT_HIGH_TYPE"}}]);