(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[82],{1864:function(e,t,a){},958:function(e,t,a){"use strict";a.r(t),a.d(t,"reducer",(function(){return C})),a.d(t,"view",(function(){return v}));a(55),a(33),a(31),a(77),a(65);var n,c,l=a(7),s=a(8),r=a(9),i=a(10),o=a(0),u=a.n(o),m=a(1),E=a(47),d=(a(1864),a(32),a(219),a(12)),p=a(17),f=a(2),g=a(14),b=function(){return function(e){f.a.toast.loading(g.p,0),Object(p.g)("getFCList","GET","",(function(t){Object(d.u)(t)&&(f.a.toast.hide(),e({type:"GET_CURRENCY_LIST_FETCH_JZ",receivedData:t.data}))}))}},h=a(11),N=a(24),j=Object(N.immutableRenderDecorator)(n=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.key,e.idx),a=e.item,n=e.dispatch;return u.a.createElement("div",{className:"rate-item rate-table-item",style:{display:"1"===a.get("standard")?"none":""}},u.a.createElement("span",null,a.get("fcNumber")),u.a.createElement("span",null,a.get("name")),u.a.createElement("span",null,a.get("exchange")),u.a.createElement("span",null,u.a.createElement(h.z,{className:"rate-item-input",value:a.get("newExchange"),onChange:function(e){return n(function(e,t){return{type:"CHANGE_EXCHANNGE_JZ",idx:e,value:t}}(t,e))}})))}}]),a}(u.a.Component))||n,v=Object(E.c)((function(e){return e}))(c=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={circleStatus:!1},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){f.a.setTitle({title:"\u7ed3\u8d26"}),f.a.setIcon({showIcon:!1}),f.a.setRight({show:!1}),this.props.dispatch((function(e){f.a.toast.loading(g.p,0),Object(p.g)("getperiod","get","",(function(t){Object(d.u)(t)&&(f.a.toast.hide(),e({type:"GET_BALANCE_STATUS",receivedData:t}))}))}))}}]),Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.allState,n=t.dispatch,c=t.jzState,l=t.homeState,s=this.state.circleStatus,r=l.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]),i=l.getIn(["data","userInfo","sobInfo","moduleInfo"]),o=a.get("period"),m=o.get("openedyear"),E=o.get("openedmonth"),N=o.get("closedyear"),v=o.get("closedmonth"),O=new Date,y=new d.a(O).toString(),C=y.substr(0,4),S=y.substr(5,2),_=a.getIn(["period","periodStartMonth"]),x=m||N||C,I=E||v||S,w=a.get("aclist"),T=c.get("fcList"),z=w.filter((function(e){return 560303==e.get("acid")}));return u.a.createElement(h.h,{className:"jz ass-config"},u.a.createElement(h.r,{className:"header"},u.a.createElement("span",null,x,"/",I)),u.a.createElement(h.s,{className:"content",flex:"1"},u.a.createElement("div",{className:"jzlist"},u.a.createElement("div",{className:"jzlist-item"},u.a.createElement("span",null,"\u5f53\u524d\u53ef\u7ed3\u8d26\u8d26\u671f"),u.a.createElement("span",null,": ".concat(m?m+"\u5e74"+E+"\u6708":"\u65e0"))),u.a.createElement("div",{className:"jzlist-item"},u.a.createElement("span",null,"\u5f53\u524d\u53ef\u53cd\u7ed3\u8d26\u8d26\u671f"),u.a.createElement("span",null,": ".concat(N?N+"\u5e74"+v+"\u6708":"\u65e0")))),u.a.createElement("ul",{className:"form-tip"},u.a.createElement("li",{className:"form-tip-item"},"\u7ed3\u8d26\u5c06\u81ea\u52a8\u751f\u6210\u6536\u76ca\u51ed\u8bc1\u53ca\u635f\u5931\u51ed\u8bc1\uff1b")),u.a.createElement("div",{className:"jzlist-second"},u.a.createElement("div",{className:"jzlist-item"},u.a.createElement("span",null,"\u5229\u6da6\u7ed3\u8f6c\u81f3"),u.a.createElement("span",null,": 3103_\u672c\u5e74\u5229\u6da6 ")),u.a.createElement("div",{className:"jzlist-item"},u.a.createElement("span",null,"\u5168\u5e74\u5229\u6da6\u7ed3\u8f6c\u81f3"),u.a.createElement("span",null,": 310405_\u672a\u5206\u914d\u5229\u6da6"))),u.a.createElement(h.C,null,u.a.createElement("li",{className:"form-tip-item"},1==_?12:_-1,"\u6708\u7ed3\u8d26\uff0c\u5c06\u81ea\u52a8\u5c06 3103_\u672c\u5e74\u5229\u6da6 \u7ed3\u8f6c\u81f3 310405_\u672a\u5206\u914d\u5229\u6da6\u3002"),u.a.createElement("li",{className:"form-tip-item"},"\u8bf7\u786e\u4fdd3103\uff0c310405\u79d1\u76ee\u5b58\u5728\uff0c\u5426\u5219\u5c06\u4e0d\u80fd\u6b63\u5e38\u7ed3\u8d26")),i&&i.indexOf("CURRENCY")>-1?u.a.createElement("div",{className:"jz-rate",onClick:function(){z&&(n(b()),e.setState({circleStatus:!s}))}},u.a.createElement("p",{className:"jz-rate-icon"},u.a.createElement("span",{className:"jz-rate-icon-circle",style:{display:s?"none":""}}),u.a.createElement(h.l,{type:"xuanze",color:"#FF6767",style:{display:s?"":"none"}})),u.a.createElement("p",{className:"jz-rate-info"},u.a.createElement("span",null,"\u671f\u672b\u8c03\u6c47"),u.a.createElement("span",null,"\uff08\u7ed3\u8d26\u64cd\u4f5c\u540e\uff0c\u5916\u5e01\u7684\u671f\u672b\u4f59\u989d\u5c06\u6309\u8c03\u6574\u6c47\u7387\u8fdb\u884c\u6298 \u7b97\u751f\u6210\u6c47\u5151\u635f\u76ca\u51ed\u8bc1\uff0c\u8bf7\u786e\u4fdd 560303 \u79d1\u76ee\u5b58\u5728\uff09"))):"",u.a.createElement("div",{className:"jzlist rate-acid",style:{display:s?"":"none"}},u.a.createElement("div",{className:"jzlist-item"},u.a.createElement("span",null,"\u6c47\u5151\u635f\u76ca\u79d1\u76ee"),u.a.createElement("span",null,": 560303_\u6c47\u5151\u635f\u76ca "))),u.a.createElement("div",{className:"rate-wrap",style:{display:s?"":"none"}},u.a.createElement("div",{className:"rate-item rate-title"},u.a.createElement("span",null,"\u7f16\u7801"),u.a.createElement("span",null,"\u540d\u79f0"),u.a.createElement("span",null,"\u5f53\u524d\u9ed8\u8ba4\u6c47\u7387"),u.a.createElement("span",null,"\u8c03\u6574\u6c47\u7387")),u.a.createElement("div",{className:"rate-table"},T.map((function(e,t){return u.a.createElement(j,{key:t,idx:t,item:e,dispatch:n})}))))),u.a.createElement(h.r,{className:"footer"},u.a.createElement(h.d,{style:{height:50}},u.a.createElement(h.c,{disabled:!r||!m,onClick:function(){return n(function(e,t,a,n){return function(c){var l=[];if(a.map((function(e,t){if(""==e.get("newExchange")&&(a=a.setIn([t,"newExchange"],a.getIn([t,"exchange"]))),""!=e.get("newExchange")&&Number(e.get("newExchange"))<=0){l.push(e.get("fcNumber")+"\u7f16\u7801\u6240\u4fee\u6539\u7684\u6c47\u7387\u4e0d\u80fd\u5c0f\u4e8e\u7b49\u4e8e0")}})),l.length)return f.a.Alert(l.reduce((function(e,t){return e+","+t})));f.a.Confirm({message:"\u672c\u64cd\u4f5c\u5c06\u7ed3\u8d26".concat(e,"\u5e74\u7b2c").concat(t,"\u671f"),title:"\u63d0\u793a",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(l){1===l.buttonIndex&&(f.a.toast.loading(g.p,0),Object(p.g)("closesob","POST",JSON.stringify({year:e,month:t,fcList:n?a:[]}),(function(l){Object(d.u)(l,"show")&&(l.data.message?(f.a.toast.hide(),f.a.Confirm({message:l.data.message,title:"\u63d0\u793a",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(l){1===l.buttonIndex&&(f.a.toast.loading(g.p,0),Object(p.g)("closesob","POST",JSON.stringify({year:e,month:t,needCheckVcIndex:!1,fcList:n?a:[]}),(function(e){Object(d.u)(e,"show")&&(c({type:"CLOSE_SOB_FETCH",receivedData:e}),n&&c(b()))})))}})):(f.a.toast.success("\u64cd\u4f5c\u6210\u529f",2),c({type:"CLOSE_SOB_FETCH",receivedData:l}),n&&c(b())))})))},onFail:function(e){return alert(e)}})}}(m,E,T,s))}},u.a.createElement(h.l,{type:"settlement"}),u.a.createElement("span",null,"\u7ed3\u8d26")),u.a.createElement(h.c,{disabled:!r||!N,onClick:function(){return n(function(e,t){return function(a){f.a.Confirm({message:"\u672c\u64cd\u4f5c\u5c06\u53cd\u7ed3\u8d26".concat(e,"\u5e74\u7b2c").concat(t,"\u671f"),title:"\u63d0\u793a",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(n){1===n.buttonIndex&&(f.a.toast.loading(g.p,0),Object(p.g)("opensob","POST",JSON.stringify({year:e,month:t}),(function(e){return Object(d.u)(e,"show")&&a({type:"OPEN_SOB_FETCH",receivedData:e})})))},onFail:function(e){return alert(e)}})}}(N,v))}},u.a.createElement(h.l,{type:"anti-settlement"}),u.a.createElement("span",null,"\u53cd\u7ed3\u8d26")))))}}]),a}(u.a.Component))||c,O=(a(133),a(4)),y=Object(m.fromJS)({fcList:[]});var C={jzState:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,a=arguments.length>1?arguments[1]:void 0;return((e={},Object(O.a)(e,"INIT_JZ",(function(){return y})),Object(O.a)(e,"GET_CURRENCY_LIST_FETCH_JZ",(function(){var e=Object(m.fromJS)(a.receivedData),n=Object(m.fromJS)(a.receivedData);return e.map((function(e,t){var a=e.get("newExchange").toFixed(4);n=n.setIn([t,"newExchange"],a)})),t.set("fcList",n)})),Object(O.a)(e,"CHANGE_EXCHANNGE_JZ",(function(){return/^\d*\.?\d{0,4}$/g.test(a.value)?(""==a.value&&f.a.toast.info("\u4e3a\u7a7a\u65f6\u6309\u9ed8\u8ba4\u6c47\u7387\u8c03\u6c47"),t.setIn(["fcList",a.idx,"newExchange"],a.value)):t})),e)[a.type]||function(){return t})()}}}}]);