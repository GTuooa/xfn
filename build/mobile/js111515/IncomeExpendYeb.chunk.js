(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[73],{1039:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l}));var a=n(4),i=n(1),r=n(57),s=n(14),c=n(12),o=n(2),u=Object(i.fromJS)({data:{categoryType:""},preData:{preAmount:0,receiveAmount:0},cxlsData:{selectedIndex:"0",idx:0},lsmxbData:{selectedIndex:"0",idx:0},zhmxbData:{selectedIndex:"0",idx:0},wlmxbData:{selectedIndex:"0",idx:0}});function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((e={},Object(a.a)(e,m.GET_YLLS_SINGLE_ACCOUNT,(function(){var e=sessionStorage.getItem("ylPage");return t.set("data",Object(i.fromJS)(n.receivedData)).setIn(["".concat(e,"Data"),"selectedIndex"],n.selectedIndex).setIn(["".concat(e,"Data"),"idx"],n.idx)})),Object(a.a)(e,m.GET_YLLS_PREAMOUNT,(function(){return t.setIn(["preData","preAmount"],n.data.preAmount).setIn(["preData","receiveAmount"],n.data.amount)})),Object(a.a)(e,m.GET_YLLS_UNTREATEDAMOUNT,(function(){var e=0,a=0;return({accumulationAmount:function(){e=n.receivedData[n.amountType]+t.getIn(["data","acPayment","personAccumulationAmount"]),t=t.setIn(["data","accumulationAmount"],e)},socialSecurityAmount:function(){a=n.receivedData[n.amountType]+t.getIn(["data","acPayment","personSocialSecurityAmount"]),t=t.setIn(["data","socialSecurityAmount"],a)}}[n.amountType]||function(){return null})(),t})),e)[n.type]||function(){return t})()}var l={getYllsSingleAccount:function(e,t,n,a,i){return function(s){o.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(r.a)("getRunningBusiness","GET","uuid=".concat(n),(function(n){o.a.toast.hide(),Object(c.u)(n)&&(s({type:m.GET_YLLS_SINGLE_ACCOUNT,receivedData:n.data.result,selectedIndex:t,idx:a}),i&&e.push("/ylls"))}))}},getXczcAccumulationAmount:function(){return function(e,t){var n=t().yllsState,a=n.getIn(["data","categoryUuid"]),i=n.getIn(["data","runningDate"]);o.a.toast.loading(s.p,0),Object(r.a)("getPaymentInfo","POST",JSON.stringify({categoryUuid:a,runningDate:i,acType:"AC_GJJ",accumulationAcId:"",accumulationAssId1:"",accumulationCategory1:"",accumulationAssId2:"",accumulationCategory2:""}),(function(t){o.a.toast.hide(),Object(c.u)(t)&&e({type:m.GET_YLLS_UNTREATEDAMOUNT,receivedData:t.data.result,amountType:"accumulationAmount"})}))}},getXczcSocialSecurityAmount:function(){return function(e,t){var n=t().yllsState,a=n.getIn(["data","categoryUuid"]),i=n.getIn(["data","runningDate"]);Object(r.a)("getPaymentInfo","POST",JSON.stringify({categoryUuid:a,runningDate:i,acType:"AC_SB",socialSecurityAcId:"",socialSecurityAssId1:"",socialSecurityCategory1:"",socialSecurityAssId2:"",socialSecurityCategory2:""}),(function(t){Object(c.u)(t)&&e({type:m.GET_YLLS_UNTREATEDAMOUNT,receivedData:t.data.result,amountType:"socialSecurityAmount"})}))}}},m={GET_YLLS_SINGLE_ACCOUNT:"GET_YLLS_SINGLE_ACCOUNT",GET_YLLS_PREAMOUNT:"GET_YLLS_PREAMOUNT",GET_YLLS_UNTREATEDAMOUNT:"GET_YLLS_UNTREATEDAMOUNT"}},1077:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(7),i=n(8),r=n(9),s=n(10),c=n(0),o=n.n(c),u=n(12),d=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=(e.style,e.decimalPlaces),a=e.direction,i=e.isTitle,r=null==this.props.children?"":Number(this.props.children),s=n||0===n?Number(n):2,c=""===r?"":0===Number(Object(u.n)(r,s,""))?Object(u.n)(0,s,""):Object(u.n)(r,s,""),d=Math.abs(r)>=1e7;return o.a.createElement("span",{className:t,style:{color:"debit"===a?"#4166b8":"#ff8348",fontSize:d?i?".11rem":".1rem":""}},c)}}]),n}(c.Component)},1201:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return u}));var a="INIT_INCOME_EXPEND_MXB",i="GET_INCOME_EXPEND_MXB_LIST_FROM_INCOME_EXPENDYEB",r="GET_INCOME_EXPEND_MXB_CATEGORY",s="GET_INCOME_EXPEND_MXB_NO_CATEGORY",c="CHANGE_INCOME_EXPEND_MXB_COMMON_STATE",o="GET_INCOME_EXPEND_MXB_LIST_FROM_PAGE",u="CHANGE_INCOME_EXPEND_MXB_CHOOSE_VALUE"},1316:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return p}));n(31),n(1130);var a=n(1145),i=n(1201),r=n(78),s=n(12),c=n(2),o=n(14),u=n(130),d=function(e,t,n,d,l){return function(m){if(!e)return a.b.info("\u8d26\u671f\u5f02\u5e38\uff0c\u8bf7\u5237\u65b0\u518d\u8bd5",2);m(g(e,t)),c.a.toast.loading(o.p,0),Object(r.a)("getIncomeExpendMxbReport","POST",JSON.stringify({begin:e,end:t||"",jrCategoryUuid:n,jrAbstract:"",currentPage:1,pageSize:o.t,needPeriod:"true"}),(function(a){if(c.a.toast.hide(),Object(s.u)(a)){var r,o=a.data.periodDtoJson?m(u.d(a.data.periodDtoJson)):[],l=m(u.j(a));r=e||l,m({type:i.d,receivedData:a.data,issuedate:r,endissuedate:t,currentCategoryUuid:n,categoryName:d,jrAbstract:"",currentPage:1,issues:o,needPeriod:"true"})}})),l.push("incomeExpendMxb")}},l=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(a,d){c.a.toast.loading(o.p,0);var l=d().incomeExpendMxbState,m=l.getIn(["views","categoryUuid"]),g=l.getIn(["views","categoryName"]);Object(r.a)("getIncomeExpendMxbCategory","POST",JSON.stringify({begin:e||"",end:t||"",needPeriod:"true"}),(function(d){if(c.a.toast.hide(),Object(s.u)(d)){var l,E=d.data.periodDtoJson?a(u.d(d.data.periodDtoJson)):[],p=a(u.j(d));if(l=e||p,d.data.result[0]){a({type:i.c,receivedData:d.data.result});var f=!1,b=m,v=g;!function e(t){return t.map((function(t){t.jrCategoryUuid===m&&(f=!0),t.childList.length>0&&e(t.childList)}))}(d.data.result),f||(b=d.data.result[0].jrCategoryUuid,v=d.data.result[0].jrCategoryCompleteName),c.a.toast.loading(o.p,0),Object(r.a)("getIncomeExpendMxbReport","POST",JSON.stringify({begin:e||"",end:t||"",jrCategoryUuid:b,jrAbstract:n,currentPage:1,pageSize:o.t,needPeriod:""}),(function(e){Object(s.u)(e)&&a({type:i.d,receivedData:e.data,issuedate:l,endissuedate:t,currentCategoryUuid:b,categoryName:v,jrAbstract:n,currentPage:1,issues:E}),c.a.toast.hide()}))}else a({type:i.f,issuedate:l,issues:E})}}))}},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,m=arguments.length>5?arguments[5]:void 0,g=arguments.length>6?arguments[6]:void 0,E=arguments.length>7?arguments[7]:void 0;return function(p,f){if(!e)return a.b.info("\u8d26\u671f\u5f02\u5e38\uff0c\u8bf7\u5237\u65b0\u518d\u8bd5",2);!g&&c.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(r.a)("getIncomeExpendMxbReport","POST",JSON.stringify({begin:e,end:t||"",jrCategoryUuid:n,jrAbstract:d,currentPage:l,pageSize:o.t,needPeriod:"true"}),(function(a){if(!g&&c.a.toast.hide(),Object(s.u)(a)){g&&E.setState({isLoading:!1});var r,o=a.data.periodDtoJson?p(u.d(a.data.periodDtoJson)):[],f=p(u.j(a));r=e||f,p({type:i.e,receivedData:a.data,issuedate:r,endissuedate:t,currentCategoryUuid:n,jrAbstract:d,currentPage:l,issues:o,shouldConcat:m})}}))}},g=function(e,t){return function(n){c.a.toast.loading(o.p,0),Object(r.a)("getIncomeExpendMxbCategory","POST",JSON.stringify({begin:e||"",end:t||""}),(function(e){Object(s.u)(e)&&n({type:i.c,receivedData:e.data.result}),c.a.toast.hide()}))}},E=function(e,t,n){return{type:i.b,parent:e,position:t,value:n}},p=function(e){return{type:i.a,value:e}}},1317:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(32);var a=n(4),i=n(1),r=n(1201),s=Object(i.fromJS)({views:{issuedate:"",endissuedate:"",categoryUuid:"",categoryName:"",chooseValue:"ISSUE"},totalAmountList:{},openDetail:{},incomeExpendDetailList:[],runningCategoryList:[{childList:[]}],issues:[],pageCount:1,currentPage:1});function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(a.a)(e,r.g,(function(){return s})),Object(a.a)(e,r.d,(function(){var e=n.receivedData.result,a={incomeAmount:e.incomeAmount,expenseAmount:e.expenseAmount,realIncomeAmount:e.realIncomeAmount,realExpenseAmount:e.realExpenseAmount,closeARBalance:e.closeARBalance,closeAPBalance:e.closeAPBalance,direction:e.direction};return t=t.set("incomeExpendDetailList",Object(i.fromJS)(n.receivedData.result.detailList)).set("openDetail",Object(i.fromJS)(n.receivedData.result.openDetail)).set("totalAmountList",Object(i.fromJS)(a)).setIn(["views","issuedate"],n.issuedate).setIn(["views","endissuedate"],n.endissuedate).set("pageCount",n.receivedData.result.pages).set("currentPage",n.receivedData.result.currentPage).setIn(["views","categoryUuid"],n.currentCategoryUuid),"true"===n.needPeriod&&(t=t.set("issues",Object(i.fromJS)(n.issues))),n.currentCategoryUuid||(t=t.setIn(["views","categoryName"],"")),n.categoryName&&(t=t.setIn(["views","categoryName"],n.categoryName)),t})),Object(a.a)(e,r.e,(function(){var e=n.receivedData.result,a={incomeAmount:e.incomeAmount,expenseAmount:e.expenseAmount,realIncomeAmount:e.realIncomeAmount,realExpenseAmount:e.realExpenseAmount,closeARBalance:e.closeARBalance,closeAPBalance:e.closeAPBalance,direction:e.direction},r=[];n.shouldConcat?r=t.get("incomeExpendDetailList").toJS().concat(n.receivedData.result.detailList):r=n.receivedData.result.detailList;return t=t.set("incomeExpendDetailList",Object(i.fromJS)(r)).set("openDetail",Object(i.fromJS)(n.receivedData.result.openDetail)).set("totalAmountList",Object(i.fromJS)(a)).setIn(["views","issuedate"],n.issuedate).setIn(["views","endissuedate"],n.endissuedate).set("pageCount",n.receivedData.result.pages).set("currentPage",n.receivedData.result.currentPage).setIn(["views","categoryUuid"],n.currentCategoryUuid),"true"===n.needPeriod&&(t=t.set("issues",Object(i.fromJS)(n.issues))),n.currentCategoryUuid||(t=t.setIn(["views","categoryName"],"")),n.categoryName&&(t=t.setIn(["views","categoryName"],n.categoryName)),t})),Object(a.a)(e,r.c,(function(){return t=t.set("runningCategoryList",Object(i.fromJS)(n.receivedData))})),Object(a.a)(e,r.f,(function(){return t=t.setIn(["views","issuedate"],n.issuedate).set("incomeExpendDetailList",Object(i.fromJS)([])).set("runningCategoryList",Object(i.fromJS)([{childList:[]}])).set("openDetail",Object(i.fromJS)({})).set("totalAmountList",Object(i.fromJS)({incomeAmount:"",expenseAmount:"",realIncomeAmount:"",realExpenseAmount:"",closeARBalance:"",closeAPBalance:""})).setIn(["views","endissuedate"],"").setIn(["views","categoryName"],"\u6682\u65e0\u53ef\u9009\u7c7b\u578b").set("pageCount",1).set("currentPage",1)})),Object(a.a)(e,r.b,(function(){return t.setIn([n.parent,n.position],n.value)})),Object(a.a)(e,r.a,(function(){return t=t.setIn(["views","chooseValue"],n.value)})),e)[n.type]||function(){return t})()}},1838:function(e,t,n){},953:function(e,t,n){"use strict";n.r(t),n.d(t,"reducer",(function(){return T})),n.d(t,"view",(function(){return C}));n(115),n(33),n(31),n(56);var a,i,r,s,c=n(4),o=n(7),u=n(8),d=n(9),l=n(10),m=n(0),g=n.n(m),E=n(47),p=n(1),f=(n(1838),n(2)),b=n(14),v=n(11),O=n(542),y=n(24),N=(n(1039),n(78)),h=n(12),A=n(130),I=function(e,t,n){return function(n,a){f.a.toast.loading(b.p,0),Object(N.a)("getIncomeExpendYebReport","POST",JSON.stringify({begin:e||"",end:t||"",needPeriod:"true"}),(function(a){if(f.a.toast.hide(),Object(h.u)(a)){var i,r=n(A.j(a));i=e||r;var s=a.data.periodDtoJson?n(A.d(a.data.periodDtoJson)):[];n({type:"GET_INCOME_EXPEND_YEB_BALANCE_LIST",receivedData:a.data.result,issues:s,issuedate:i,endissuedate:t,getPeriod:"true"})}}))}},S=n(1316),_=n(1077),j=Object(y.immutableRenderDecorator)(a=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.ba,n=e.style,a=e.dispatch,i=e.className,r=e.leve,s=e.haveChild,c=e.showChild,o=e.history,u=e.issuedate,d=e.endissuedate,l=e.chooseValue,m={background:{1:"#fff",2:"#D1C0A5",3:"#7E6B5A",4:"#59493f"}[r],minWidth:(r-1)/100*10+"rem"};return g.a.createElement("div",{className:"ba "+i,style:n},g.a.createElement("div",null,g.a.createElement("span",{className:"name"},1==r?"":g.a.createElement("span",{className:"ba-flag",style:m}),g.a.createElement("span",{className:"name-name",onClick:function(e){sessionStorage.setItem("fromPage","incomeExpendyeb"),a(S.d(u,d,t.get("jrCategoryUuid"),t.get("completeName"),o)),a(S.a(l))}},t.get("name"))),g.a.createElement("span",{className:"btn",onClick:function(){return a(function(e,t){return{type:"INCOME_EXPEND_YEB_BALANCE_TRIANGLE_SWITCH",showChild:e,uuid:t}}(c,t.get("jrCategoryUuid")))}},g.a.createElement(v.l,{type:"arrow-down",style:{visibility:s?"visible":"hidden",transform:c?"rotate(180deg)":""}}))),g.a.createElement("div",{className:"double-ba-info"},g.a.createElement("span",{className:"double-item-list"},g.a.createElement(_.a,{direction:"credit"},t.get("openARBalance")),g.a.createElement(_.a,{direction:"debit"},t.get("openAPBalance"))),g.a.createElement("span",{className:"double-item-list"},g.a.createElement(_.a,{direction:"credit"},t.get("incomeAmount")),g.a.createElement(_.a,{direction:"debit"},t.get("expenseAmount"))),g.a.createElement("span",{className:"double-item-list"},g.a.createElement(_.a,{direction:"credit"},t.get("realIncomeAmount")),g.a.createElement(_.a,{direction:"debit"},t.get("realExpenseAmount"))),g.a.createElement("span",{className:"double-item-list"},g.a.createElement(_.a,{direction:"credit"},t.get("closeARBalance")),g.a.createElement(_.a,{direction:"debit"},t.get("closeAPBalance")))))}}]),n}(g.a.Component))||a,C=Object(E.c)((function(e){return e}))((s=r=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={showModal:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){f.a.setTitle({title:"\u6536\u652f\u4f59\u989d\u8868"}),f.a.setIcon({showIcon:!1}),this.props.homeState.getIn(["permissionInfo","Report","exportExcel","permission"])||f.a.setRight({show:!1}),"home"===sessionStorage.getItem("prevPage")&&(sessionStorage.removeItem("prevPage"),this.props.dispatch({type:"INIT_INCOME_EXPEND_YEB"}),this.props.dispatch(I("","")))}},{key:"render",value:function(){var e=this.props,t=(e.allState,e.dispatch),n=e.incomeExpendYebState,a=e.history,i=(this.state.showModal,n.get("issuedate")),r=n.get("endissuedate"),s=n.get("incomeExpendBalanceList"),o=n.getIn(["views","runningShowChild"]),u=n.getIn(["views","chooseValue"]),d=n.get("issues"),l=d.findIndex((function(e){return e.get("value")===i})),m=d.slice(0,l),E=i,p=r||E;return t(A.i("config","",(function(){return function(e){return e(A.a("sendIncomeExcelbalance",{begin:E,end:p}))}}))),g.a.createElement(v.h,{className:"incomeExpend-yeb"},g.a.createElement(O.b,{start:i,issues:d,end:r,nextperiods:m,chooseValue:u,onBeginOk:function(e){t(I(e,""))},onEndOk:function(e,n){t(I(e,n))},changeChooseValue:function(e){return t(function(e){return{type:"CHANGE_INCOME_EXPEND_YEB_CHOOSE_VALUE",value:e}}(e))}}),g.a.createElement(v.r,{className:"ba-title-double"},g.a.createElement("div",{className:"ba-title-item"},g.a.createElement("span",{className:"item-item"},"\u671f\u521d\u5e94\u6536"),g.a.createElement("span",{className:"item-item"},"\u671f\u521d\u5e94\u4ed8")),g.a.createElement("div",{className:"ba-title-item"},g.a.createElement("span",{className:"item-item"},"\u672c\u671f\u6536\u5165"),g.a.createElement("span",{className:"item-item"},"\u672c\u671f\u652f\u51fa")),g.a.createElement("div",{className:"ba-title-item"},g.a.createElement("span",{className:"item-item"},"\u672c\u671f\u5b9e\u6536"),g.a.createElement("span",{className:"item-item"},"\u672c\u671f\u5b9e\u4ed8")),g.a.createElement("div",{className:"ba-title-item"},g.a.createElement("span",{className:"item-item"},"\u671f\u672b\u5e94\u6536"),g.a.createElement("span",{className:"item-item"},"\u671f\u672b\u5e94\u4ed8"))),g.a.createElement(v.s,{flex:"1",uniqueKey:"xmye-scroll",className:"scroll-item",savePosition:!0},g.a.createElement("div",{className:"ba-list flow-content"},function e(n,s){return n.map((function(n,d){var l,m,E=o.indexOf(n.get("jrCategoryUuid"))>-1,p=s>1?"#f8f8f8":"#fff";return n.get("childList").size?g.a.createElement("div",{key:d},g.a.createElement(j,(l={leve:s,className:"balance-incomeExpend-tabel-width",style:{backgroundColor:p},ba:n,haveChild:!0,showChild:E,history:a,dispatch:t,issuedate:i},Object(c.a)(l,"issuedate",i),Object(c.a)(l,"endissuedate",r),Object(c.a)(l,"chooseValue",u),l)),E?e(n.get("childList"),s+1):""):g.a.createElement("div",{key:d},g.a.createElement(j,(m={leve:s,className:"balance-incomeExpend-tabel-width",style:{backgroundColor:p},ba:n,haveChild:!1,showChild:E,history:a,dispatch:t,issuedate:i},Object(c.a)(m,"issuedate",i),Object(c.a)(m,"endissuedate",r),Object(c.a)(m,"chooseValue",u),m)),E?e(n.get("childList"),s+1):"")}))}(s,1))))}}]),n}(g.a.Component),r.displayName="IncomeExpendYeb",i=s))||i,D=(n(131),Object(p.fromJS)({views:{runningShowChild:[],chooseValue:"ISSUE"},issues:[{value:"",key:""}],issuedate:"",endissuedate:"",incomeExpendBalanceList:[]}));var T={incomeExpendYebState:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(c.a)(e,"INIT_INCOME_EXPEND_YEB",(function(){return D})),Object(c.a)(e,"GET_INCOME_EXPEND_YEB_BALANCE_LIST",(function(){if("true"===n.getPeriod){n.period;t=t.set("period",Object(p.fromJS)(n.period)).set("issues",Object(p.fromJS)(n.issues))}return t.set("incomeExpendBalanceList",Object(p.fromJS)(n.receivedData.childList)).set("issuedate",Object(p.fromJS)(n.issuedate)).set("endissuedate",Object(p.fromJS)(n.endissuedate)).setIn(["views","runningShowChild"],Object(p.fromJS)([]))})),Object(c.a)(e,"INCOME_EXPEND_YEB_BALANCE_TRIANGLE_SWITCH",(function(){var e=t.getIn(["views","runningShowChild"]);if(n.showChild){var a=e.splice(e.findIndex((function(e){return e===n.uuid})),1);return t.setIn(["views","runningShowChild"],a)}var i=e.push(n.uuid);return t.setIn(["views","runningShowChild"],i)})),Object(c.a)(e,"CHANGE_INCOME_EXPEND_YEB_CHOOSE_VALUE",(function(){return t=t.setIn(["views","chooseValue"],n.value)})),e)[n.type]||function(){return t})()},incomeExpendMxbState:n(1317).a}}}]);