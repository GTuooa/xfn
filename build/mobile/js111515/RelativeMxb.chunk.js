(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[99],{1038:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));n(115),n(219),n(56);var a=n(4),i=n(51),r=n(1),c=n(78),s=n(14),o=n(12),l=n(2),u=Object(r.fromJS)({views:{fromPage:"",uuidList:[]},currentItem:{},jrOri:{},category:{},processInfo:null});function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(a.a)(e,g.GET_RUNNING_PREVIEW_BUSINESS_FETCH,(function(){return t=t.set("jrOri",Object(r.fromJS)(n.receivedData.jrOri)).set("category",Object(r.fromJS)(n.receivedData.category)).set("processInfo",n.receivedData.processInfo?Object(r.fromJS)(n.receivedData.processInfo):null).set("currentItem",n.currentItem).setIn(["views","fromPage"],n.fromPage).setIn(["views","uuidList"],n.uuidList)})),Object(a.a)(e,g.GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH,(function(){return t=t.set("jrOri",Object(r.fromJS)(n.receivedData.jrOri)).set("category",Object(r.fromJS)(n.receivedData.category)).set("processInfo",n.receivedData.processInfo?Object(r.fromJS)(n.receivedData.processInfo):null).set("lsItemData",Object(r.fromJS)(Object(i.a)({},n.receivedData.category,{},n.receivedData.jrOri)))})),Object(a.a)(e,g.PREVIEW_RUNNING_DATA,(function(){return t=t.setIn(["views","uuidList"],Object(r.fromJS)(n.data))})),e)[n.type]||function(){return t})()}var m={getRunningPreviewBusinessFetch:function(e,t,n,a,i){return function(r){e&&(l.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(c.a)("getRunningPreview","GET","oriUuid=".concat(e),(function(e){l.a.toast.hide(),Object(o.u)(e)&&(r({type:g.GET_RUNNING_PREVIEW_BUSINESS_FETCH,receivedData:e.data,currentItem:t,uuidList:n,fromPage:a}),i.push("/runningpreview"))})))}},getPreviewNextRunningBusinessFetch:function(e,t){return function(t){e&&(l.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(c.a)("getRunningPreview","GET","oriUuid=".concat(e),(function(e){l.a.toast.hide(),Object(o.u)(e)&&t({type:g.GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH,receivedData:e.data})})))}},insertRunningBusinessVc:function(e,t,n){return function(a,i){l.a.toast.loading(s.p,0),Object(c.a)("insertRunningBusinessVc","POST",JSON.stringify({uuidList:[e],vcindexlist:[n],year:t.slice(0,4),month:t.slice(5,7),action:"QUERY_JR-AUDIT"}),(function(t){if(l.a.toast.hide(),Object(o.u)(t)){if(t.data.result.length){var n=t.data.result.reduce((function(e,t){return e+","+t}));return void l.a.Alert(n)}a(m.getPreviewNextRunningBusinessFetch(e))}}))}},deleteRunningBusinessVc:function(e,t,n,a){return function(i,r){l.a.toast.loading(s.p,0),Object(c.a)("deletevc","POST",JSON.stringify({year:e,month:t,vcindexlist:n,action:"QUERY_JR-CANCEL_AUDIT"}),(function(e){l.a.toast.hide(),Object(o.u)(e)&&i(m.getPreviewNextRunningBusinessFetch(a))}))}},deleteRunning:function(e,t,n){return function(a){l.a.Confirm({message:"\u786e\u5b9a\u5220\u9664\u5417",title:"\u63d0\u793a",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(i){if(1===i.buttonIndex){var r=t.findIndex((function(t){return t.get("oriUuid")===e})),u=r+1;l.a.toast.loading(s.p,0),Object(c.a)("deleteRunningbusiness","POST",JSON.stringify({deleteList:[e]}),(function(e){if(Object(o.u)(e)){if(e.data.errorList.length){var i=e.data.errorList.reduce((function(e,t){return e+","+t}));l.a.Alert(i)}if(0==e.data.errorList.length){var c=t.delete(r);a({type:g.PREVIEW_RUNNING_DATA,data:c}),u<t.size?a(m.getPreviewNextRunningBusinessFetch(t.getIn([u,"oriUuid"]))):n.goBack()}}}))}},onFail:function(e){return alert(e)}})}}},g={GET_RUNNING_PREVIEW_BUSINESS_FETCH:"GET_RUNNING_PREVIEW_BUSINESS_FETCH",GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH:"GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH",PREVIEW_RUNNING_DATA:"PREVIEW_RUNNING_DATA"}},1077:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(7),i=n(8),r=n(9),c=n(10),s=n(0),o=n.n(s),l=n(12),u=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=(e.style,e.decimalPlaces),a=e.direction,i=e.isTitle,r=null==this.props.children?"":Number(this.props.children),c=n||0===n?Number(n):2,s=""===r?"":0===Number(Object(l.n)(r,c,""))?Object(l.n)(0,c,""):Object(l.n)(r,c,""),u=Math.abs(r)>=1e7;return o.a.createElement("span",{className:t,style:{color:"debit"===a?"#4166b8":"#ff8348",fontSize:u?i?".11rem":".1rem":""}},s)}}]),n}(s.Component)},1450:function(e,t,n){},969:function(e,t,n){"use strict";n.r(t),n.d(t,"reducer",(function(){return j})),n.d(t,"view",(function(){return w}));n(32),n(115),n(31),n(56),n(29),n(82);var a,i,r,c,s=n(7),o=n(8),l=n(9),u=n(10),d=n(0),m=n.n(d),g=n(47),b=(n(1),n(1450),n(2)),v=n(14),E=n(11),f=n(542),N=n(1077),p=(n(61),n(4)),I=[{name:"itemOneName",uuid:"itemOneUuid",data:"district"},{name:"itemTwoName",uuid:"itemTwoUuid",data:"itemTwoList"},{name:"itemThreeName",uuid:"itemThreeUuid",data:"itemThreeList"},{name:"itemFourName",uuid:"itemFourUuid",data:"itemFourList"}],h=(d.Component,n(24)),y=(n(1082),n(1038)),O=Object(h.immutableRenderDecorator)(a=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.style,a=e.dispatch,i=e.className,r=e.history,c=e.detailsTemp,s=e.chooseDirection,o="debit"===s||"double_debit"===s?"debit":"credit",l="double_debit"==s||"debit"==s?"debit"==t.get("direction")?t.get("balance"):-t.get("balance"):"credit"==t.get("direction")?t.get("balance"):-t.get("balance");return m.a.createElement("div",{className:"ba "+i,style:n},m.a.createElement("div",null,m.a.createElement("span",{className:"name",onClick:function(e){a(y.b.getRunningPreviewBusinessFetch(t.get("oriUuid"),t,c,"mxb",r))}},m.a.createElement("span",{className:"name-name"},"".concat(t.get("jrDate"),"_").concat(t.get("jrAbstract"))))),m.a.createElement("div",{className:"ba-info"},m.a.createElement("span",{className:"ba-type-name"},"".concat(t.get("jrIndex"),"\u53f7")),m.a.createElement(N.a,{direction:t.get("debitAmount")?"debit":"credit"},t.get("debitAmount")?t.get("debitAmount"):t.get("creditAmount")?t.get("creditAmount"):null),m.a.createElement(N.a,{direction:t.get("realDebitAmount")?"debit":"credit"},t.get("realDebitAmount")?t.get("realDebitAmount"):t.get("realCreditAmount")?t.get("realCreditAmount"):null),m.a.createElement(N.a,{direction:o},l)))}}]),n}(m.a.Component))||a,_=n(1439),T=n(130),w=Object(g.c)((function(e){return e}))((c=r=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={showModal:!1},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){b.a.setTitle({title:"\u5f80\u6765\u660e\u7ec6\u8868"}),b.a.setIcon({showIcon:!1})}},{key:"render",value:function(){var e=this.props,t=(e.allState,e.dispatch),n=e.relativeMxbState,a=e.history,i=(this.state.showModal,n.getIn(["views","issuedate"])),r=n.getIn(["views","endissuedate"]),c=n.get("issues"),s=c.findIndex((function(e){return e.get("value")===i})),o=c.slice(0,s),l=n.getIn(["views","selectTypeValue"]),u=n.getIn(["views","contactsCategory"]),d=n.getIn(["views","runningCategory"]),g=n.getIn(["views","runningCategoryName"]),b=n.getIn(["views","categoryOrTypeUuid"]),p=n.getIn(["views","cardName"]),I=n.getIn(["views","cardUuid"]),h=n.getIn(["views","cardList"]),y=n.getIn(["views","typeCategory"]),w=n.getIn(["views","typeName"]),j=n.getIn(["views","currentPage"]),S=n.getIn(["views","pageCount"]),R=n.getIn(["views","chooseDirection"]),U=n.getIn(["views","chooseValue"]),D=n.getIn(["views","selectRelativeItem"]),C=n.getIn(["views","currentRelativeItem"]),P=C.get("top")?C.get("uuid"):"",A=C.get("top")?"":C.get("uuid"),x=(n.getIn(["views","QcqmDirection"]),n.get("QcData")),G=n.get("QmData"),B=n.get("detailsTemp"),J=i,V=r||J;return t(T.i("runningReport","",(function(){return function(e){return e(T.a("sendRelativeExcelDetail",{begin:J,end:V,jrCategoryUuid:b,cardUuid:I,direction:R,categoryUuid:P,cardCategoryUuid:A}))}}),"",(function(){return function(e){return e(T.a("sendAllRelativeExcelDetail",{begin:J,end:V,jrCategoryUuid:b,cardUuid:I,direction:R}))}}))),m.a.createElement(E.h,{className:"relative-mxb"},m.a.createElement(f.b,{start:i,end:r,issues:c,nextperiods:o,chooseValue:U,onBeginOk:function(e){t(_.g(e,""))},onEndOk:function(e,n){t(_.g(e,n))},changeChooseValue:function(e){t(_.c(e))}}),m.a.createElement("div",{className:"relative-mxb-select"},m.a.createElement("div",{className:"select-account"},m.a.createElement(E.f,{type:"card",parentDisabled:!1,district:u.toJS(),cardList:h.toJS(),onChange:function(e){t(_.a(e,l)),t(_.e({name:"\u5168\u90e8",uuid:""}))},onOk:function(e){t(_.e(e[0]))},cardValue:[I],value:D.get("value"),children:p},m.a.createElement(E.r,null,m.a.createElement("span",{style:{color:"\u8bf7\u9009\u62e9\u5361\u7247"==w?"#ccc":""}},"\u5168\u90e8"===p?D.get("name"):p),m.a.createElement(E.l,{type:"triangle"})))),m.a.createElement("div",{className:"select-category"},m.a.createElement("div",{className:"select-category-box"},"category"===l?m.a.createElement(E.f,{district:d.toJS(),value:"".concat(b).concat(v.B).concat(R),parentDisabled:!1,onChange:function(e){var n=e.key.split(v.B);t(_.b("views","runningCategoryName",e.label)),t(_.b("views","categoryOrTypeUuid",n[0])),t(_.f(l,n[0],n[1]))}},m.a.createElement(E.r,null,m.a.createElement("span",{style:{color:"\u8bf7\u9009\u62e9\u7c7b\u522b"==w?"#ccc":""}},g),m.a.createElement(E.l,{type:"triangle"}))):m.a.createElement(E.v,{className:"antd-single-picker",district:y.toJS(),value:w,onOk:function(e){var n=e.value.split(v.B);t(_.b("views","typeName",n[1])),t(_.b("views","categoryOrTypeUuid",n[0])),t(_.b("views","QcqmDirection",n[2])),t(_.f(l,n[0],n[2]))}},m.a.createElement(E.r,{style:{color:w?"":"#999"},className:"relative-type"},m.a.createElement("span",{className:"overElli"},w||"\u5168\u90e8"),m.a.createElement(E.l,{type:"triangle"})))))),m.a.createElement(E.r,{className:"item-title-qc"},m.a.createElement("div",{className:"qc-title-item"},"\u671f\u521d\u4f59\u989d",m.a.createElement("span",{className:"qc-title-direction"},"double_debit"==R||"double_credit"==R?m.a.createElement(E.x,{checked:"double_debit"!=R,checkedChildren:"\u652f\u51fa",unCheckedChildren:"\u6536\u5165",className:"qc-title-switch",onChange:function(){t(_.d("double_debit"==R?"double_credit":"double_debit"))}}):m.a.createElement("span",{className:"qc-title-switch-name"},"(","debit"===R?"\u6536\u5165":"\u652f\u51fa",")"))),m.a.createElement("div",{className:"qc-title-item"},m.a.createElement(N.a,{direction:"double_debit"===R?"debit":"double_credit"===R?"credit":R,isTitle:!0},x&&x.get("balance")))),m.a.createElement(E.s,{flex:"1",uniqueKey:"relativemxb-scroll",className:"scroll-item",savePosition:!0},m.a.createElement("div",{className:"flow-content"},B&&B.map((function(e,n){return m.a.createElement("div",{key:n},m.a.createElement(O,{className:"balance-running-tabel-width",item:e,history:a,dispatch:t,issuedate:i,detailsTemp:B,chooseDirection:R}))}))),m.a.createElement(f.c,{diff:100,classContent:"flow-content",callback:function(e){t(_.h(j+1,!0,!0,e))},isGetAll:j>=S,itemSize:B?B.size:0})),m.a.createElement(E.r,{className:"item-title-qm"},m.a.createElement("div",{className:"qm-title-item"},"\u671f\u672b"),m.a.createElement("div",{className:"qm-title-item"},m.a.createElement("div",null,m.a.createElement(N.a,{direction:"debit",isTitle:!0},G.get("debitAmount")),m.a.createElement(N.a,{direction:"debit",isTitle:!0},G.get("realDebitAmount")),m.a.createElement(N.a,{direction:"debit",isTitle:!0},"debit"===R||"double_debit"===R?G.get("balance"):null)),m.a.createElement("div",null,m.a.createElement(N.a,{direction:"credit",isTitle:!0},G.get("creditAmount")),m.a.createElement(N.a,{direction:"credit",isTitle:!0},G.get("realCreditAmount")),m.a.createElement(N.a,{direction:"credit",isTitle:!0},"credit"===R||"double_credit"===R?G.get("balance"):null)))))}}]),n}(m.a.Component),r.displayName="RelativeMxb",i=c))||i,j={relativeMxbState:n(1441).a,runningPreviewState:y.a}}}]);