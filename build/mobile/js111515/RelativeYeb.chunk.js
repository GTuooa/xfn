(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[100],{1039:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return d}));var n=a(4),i=a(1),c=a(57),r=a(14),o=a(12),s=a(2),u=Object(i.fromJS)({data:{categoryType:""},preData:{preAmount:0,receiveAmount:0},cxlsData:{selectedIndex:"0",idx:0},lsmxbData:{selectedIndex:"0",idx:0},zhmxbData:{selectedIndex:"0",idx:0},wlmxbData:{selectedIndex:"0",idx:0}});function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((e={},Object(n.a)(e,g.GET_YLLS_SINGLE_ACCOUNT,(function(){var e=sessionStorage.getItem("ylPage");return t.set("data",Object(i.fromJS)(a.receivedData)).setIn(["".concat(e,"Data"),"selectedIndex"],a.selectedIndex).setIn(["".concat(e,"Data"),"idx"],a.idx)})),Object(n.a)(e,g.GET_YLLS_PREAMOUNT,(function(){return t.setIn(["preData","preAmount"],a.data.preAmount).setIn(["preData","receiveAmount"],a.data.amount)})),Object(n.a)(e,g.GET_YLLS_UNTREATEDAMOUNT,(function(){var e=0,n=0;return({accumulationAmount:function(){e=a.receivedData[a.amountType]+t.getIn(["data","acPayment","personAccumulationAmount"]),t=t.setIn(["data","accumulationAmount"],e)},socialSecurityAmount:function(){n=a.receivedData[a.amountType]+t.getIn(["data","acPayment","personSocialSecurityAmount"]),t=t.setIn(["data","socialSecurityAmount"],n)}}[a.amountType]||function(){return null})(),t})),e)[a.type]||function(){return t})()}var d={getYllsSingleAccount:function(e,t,a,n,i){return function(r){s.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(c.a)("getRunningBusiness","GET","uuid=".concat(a),(function(a){s.a.toast.hide(),Object(o.u)(a)&&(r({type:g.GET_YLLS_SINGLE_ACCOUNT,receivedData:a.data.result,selectedIndex:t,idx:n}),i&&e.push("/ylls"))}))}},getXczcAccumulationAmount:function(){return function(e,t){var a=t().yllsState,n=a.getIn(["data","categoryUuid"]),i=a.getIn(["data","runningDate"]);s.a.toast.loading(r.p,0),Object(c.a)("getPaymentInfo","POST",JSON.stringify({categoryUuid:n,runningDate:i,acType:"AC_GJJ",accumulationAcId:"",accumulationAssId1:"",accumulationCategory1:"",accumulationAssId2:"",accumulationCategory2:""}),(function(t){s.a.toast.hide(),Object(o.u)(t)&&e({type:g.GET_YLLS_UNTREATEDAMOUNT,receivedData:t.data.result,amountType:"accumulationAmount"})}))}},getXczcSocialSecurityAmount:function(){return function(e,t){var a=t().yllsState,n=a.getIn(["data","categoryUuid"]),i=a.getIn(["data","runningDate"]);Object(c.a)("getPaymentInfo","POST",JSON.stringify({categoryUuid:n,runningDate:i,acType:"AC_SB",socialSecurityAcId:"",socialSecurityAssId1:"",socialSecurityCategory1:"",socialSecurityAssId2:"",socialSecurityCategory2:""}),(function(t){Object(o.u)(t)&&e({type:g.GET_YLLS_UNTREATEDAMOUNT,receivedData:t.data.result,amountType:"socialSecurityAmount"})}))}}},g={GET_YLLS_SINGLE_ACCOUNT:"GET_YLLS_SINGLE_ACCOUNT",GET_YLLS_PREAMOUNT:"GET_YLLS_PREAMOUNT",GET_YLLS_UNTREATEDAMOUNT:"GET_YLLS_UNTREATEDAMOUNT"}},1837:function(e,t,a){},952:function(e,t,a){"use strict";a.r(t),a.d(t,"reducer",(function(){return L})),a.d(t,"view",(function(){return _}));a(115),a(33),a(31),a(56),a(29),a(82);var n,i,c,r,o=a(7),s=a(8),u=a(9),l=a(10),d=a(0),g=a.n(d),m=a(47),y=a(1),E=(a(1837),a(2)),p=a(14),f=a(11),b=a(542),v=(a(32),a(24)),h=(a(1039),a(78)),I=a(12),C=a(130),N=function(e,t,a,n,i,c){return function(r){E.a.toast.loading(p.p,0),Object(h.a)("getRelativeBalance","POST",JSON.stringify({begin:e||"",end:t||"",categoryUuid:"true"===n?a:"",cardCategoryUuid:"true"===n?"":a,jrCategoryUuid:i}),(function(a){if(E.a.toast.hide(),Object(I.u)(a)){var n=a.data.periodDtoJson?r(C.d(a.data.periodDtoJson)):[];r({type:"GET_RELATIVE_YEB_BALANCE_LIST",receivedData:a.data.result,issuedate:e,endissuedate:t,needPeriod:c,issues:n})}}))}},T=a(1439),A=Object(v.immutableRenderDecorator)(n=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.style,n=e.dispatch,i=e.className,c=e.leve,r=e.haveChild,o=e.showChild,s=e.history,u=e.issuedate,l=e.endissuedate,d=e.categoryUuid,m=e.categoryTop,y=e.chooseValue,E=e.runningCategoryObj,p={background:{1:"#fff",2:"#D1C0A5",3:"#7E6B5A",4:"#59493f"}[c],minWidth:(c-1)/100*10+"rem"};return g.a.createElement("div",{className:"ba "+i,style:a},g.a.createElement("div",null,g.a.createElement("span",{className:"name",onClick:function(e){sessionStorage.setItem("fromPage","relativeyeb"),r?(n(T.i(u,l,t.get("categoryUuid"),!1,t,s,E,!0)),n(T.c(y))):(n(T.i(u,l,d,m,t,s,E)),n(T.c(y)))}},1==c?"":g.a.createElement("span",{className:"ba-flag",style:p}),g.a.createElement("span",{className:"name-name name-click"},t.get("cardCode")?"".concat(t.get("cardCode"),"_").concat(t.get("name")):t.get("name"))),g.a.createElement("span",{className:"btn",onClick:function(){return n(function(e,t){return{type:"RELATIVE_BALANCE_TRIANGLE_SWITCH",showChild:e,uuid:t}}(o,t.get("categoryUuid")))}},g.a.createElement(f.l,{type:"arrow-down",style:{visibility:r?"visible":"hidden",transform:o?"rotate(180deg)":""}}))),g.a.createElement("div",{className:"double-ba-info"},g.a.createElement("span",{className:"double-item-list"},g.a.createElement(f.a,{showZero:!1,style:{color:"#4166b8"}},t.get("openDebit")),g.a.createElement(f.a,{showZero:0===t.get("openDebit")&&0===t.get("openCredit"),style:{color:"#ff8348"}},t.get("openCredit"))),g.a.createElement("span",{className:"double-item-list"},g.a.createElement(f.a,{showZero:!0,style:{color:"#4166b8"}},t.get("currentDebit")),g.a.createElement(f.a,{showZero:!0,style:{color:"#ff8348"}},t.get("currentCredit"))),g.a.createElement("span",{className:"double-item-list"},g.a.createElement(f.a,{showZero:!0,style:{color:"#4166b8"}},t.get("currentRealDebit")),g.a.createElement(f.a,{showZero:!0,style:{color:"#ff8348"}},t.get("currentRealCredit"))),g.a.createElement("span",{className:"double-item-list"},g.a.createElement(f.a,{showZero:!1,style:{color:"#4166b8"}},t.get("closeDebit")),g.a.createElement(f.a,{showZero:0===t.get("closeDebit")&&0===t.get("closeCredit"),style:{color:"#ff8348"}},t.get("closeCredit")))))}}]),a}(g.a.Component))||n,_=Object(m.c)((function(e){return e}))((r=c=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={showModal:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e,t;E.a.setTitle({title:"\u5f80\u6765\u4f59\u989d\u8868"}),E.a.setIcon({showIcon:!1}),this.props.homeState.getIn(["permissionInfo","Report","exportExcel","permission"])||E.a.setRight({show:!1}),"home"===sessionStorage.getItem("prevPage")&&(sessionStorage.removeItem("prevPage"),this.props.dispatch({type:"INIT_RELATIVE_YEB"}),this.props.dispatch((function(a,n){E.a.toast.loading(p.p,0),Object(h.a)("getRelativeBalance","POST",JSON.stringify({begin:e||"",end:t||"",categoryUuid:"",cardCategoryUuid:"",jrCategoryUuid:"",needPeriod:"true"}),(function(n){if(E.a.toast.hide(),Object(I.u)(n)){var i=a(C.j(n)),c=n.data.periodDtoJson?a(C.d(n.data.periodDtoJson)):[];a({type:"GET_RELATIVE_YEB_BALANCE_LIST",receivedData:n.data.result,issuedate:e||i,endissuedate:t||"",issues:c,needPeriod:"true"})}}))})),this.props.dispatch(function(e,t){return function(a){Object(h.a)("getRelativeCategory","POST",JSON.stringify({begin:e||"",end:t||""}),(function(e){Object(I.u)(e)&&a({type:"GET_RELATIVE_BALANCE_CATEGORY",cardCategory:e.data.cardCategory,jrCategory:e.data.jrCategory})}))}}()))}},{key:"render",value:function(){var e=this.props,t=(e.allState,e.dispatch),a=e.relativeYebState,n=e.history,i=(this.state.showModal,a.getIn(["views","issuedate"])),c=a.getIn(["views","endissuedate"]),r=a.getIn(["views","categoryName"]),o=a.getIn(["views","categoryUuid"]),s=a.getIn(["views","categoryTop"]),u=a.getIn(["views","bussinessShowChild"]),l=a.getIn(["views","chooseValue"]),d=a.get("contactCategory"),m=a.get("runningCategory"),y=a.getIn(["views","runningCategoryName"]),E=a.getIn(["views","runningCategoryUuid"]),v=a.getIn(["views","categoryValue"]),h=a.getIn(["views","runningCategoryValue"]),I=a.getIn(["balanceReport","childList"]),T=a.get("issues"),_=T.findIndex((function(e){return e.get("value")===i})),O=T.slice(0,_),S={runningCategoryName:y,runningCategoryUuid:E,dirction:a.getIn(["views","chooseDirection"])},L=i,w=c||L;return t(C.i("config","",(function(){return function(e){return e(C.a("sendRelativeExcelbalance",{begin:L,end:w,categoryUuid:o}))}}))),g.a.createElement(f.h,{className:"relative-yeb"},g.a.createElement(b.b,{start:i,end:c,issues:T,nextperiods:O,chooseValue:l,onBeginOk:function(e){t(N(e,"",o,s,E))},onEndOk:function(e,a){t(N(e,a,o,s,E))},changeChooseValue:function(e){return t(function(e){return{type:"CHANGE_RELATIVE_YEB_CHOOSE_VALUE",value:e}}(e))}}),g.a.createElement(f.r,{className:"select-category-box"},g.a.createElement(f.f,{district:d.toJS(),value:v,parentDisabled:!1,onChange:function(e){var a=e.key.split(p.B);t(function(e){return function(t){var a=e.label,n=e.key.split(p.B);t({type:"CHANGE_RELATIVE_CATEGORY_STRING",categoryName:a,categoryUuid:n[0],categoryTop:n[1],categoryValue:e.key})}}(e)),t(N(i,c,a[0],a[1],E))}},g.a.createElement(f.r,null,g.a.createElement("span",{style:{color:"\u8bf7\u9009\u62e9\u5f80\u6765\u7c7b\u522b"==r?"#ccc":""}},r),g.a.createElement(f.l,{type:"triangle"}))),g.a.createElement(f.f,{district:m.toJS(),value:h,parentDisabled:!1,onChange:function(e){var a=e.key.split(p.B);t(function(e){return function(t){var a=e.label,n=e.key.split(p.B);t({type:"CHANGE_RUNNING_CATEGORY_STRING",categoryName:a,categoryUuid:n[0],categoryTop:n[1],categoryValue:e.key})}}(e)),t({type:"CHANGE_RELATIVE_YEB_CHOOSE_DIRCTION",value:a[2]}),t(N(i,c,o,s,a[0]))}},g.a.createElement(f.r,null,g.a.createElement("span",{style:{color:"\u8bf7\u9009\u62e9\u6d41\u6c34\u7c7b\u522b"==y?"#ccc":""}},y),g.a.createElement(f.l,{type:"triangle"})))),g.a.createElement(f.r,{className:"ba-title-double"},g.a.createElement("div",{className:"ba-title-item"},g.a.createElement("span",{className:"item-item"},"\u671f\u521d\u5e94\u6536"),g.a.createElement("span",{className:"item-item"},"\u671f\u521d\u5e94\u4ed8")),g.a.createElement("div",{className:"ba-title-item"},g.a.createElement("span",{className:"item-item"},"\u672c\u671f\u6536\u5165"),g.a.createElement("span",{className:"item-item"},"\u672c\u671f\u652f\u51fa")),g.a.createElement("div",{className:"ba-title-item"},g.a.createElement("span",{className:"item-item"},"\u672c\u671f\u5b9e\u6536"),g.a.createElement("span",{className:"item-item"},"\u672c\u671f\u5b9e\u4ed8")),g.a.createElement("div",{className:"ba-title-item"},g.a.createElement("span",{className:"item-item"},"\u671f\u672b\u5e94\u6536"),g.a.createElement("span",{className:"item-item"},"\u671f\u672b\u5e94\u4ed8"))),g.a.createElement(f.s,{flex:"1",uniqueKey:"relaticeyeb-scroll",className:"scroll-item",savePosition:!0},function e(a,r){return a.map((function(a,d){var m=u.indexOf(a.get("categoryUuid"))>-1,y=r>1?"#F8F8F8":"#fff";return a.get("childList").size?g.a.createElement("div",{key:d},g.a.createElement(A,{leve:r,className:"balance-running-tabel-width",style:{backgroundColor:y},item:a,haveChild:!0,showChild:m,history:n,dispatch:t,issuedate:i,endissuedate:c,categoryTop:s,categoryUuid:o,chooseValue:l,runningCategoryObj:S}),m?e(a.get("childList"),r+1):""):g.a.createElement("div",{key:d},g.a.createElement(A,{leve:r,className:"balance-running-tabel-width",item:a,style:{backgroundColor:y},history:n,dispatch:t,issuedate:i,endissuedate:c,categoryTop:s,categoryUuid:o,chooseValue:l,runningCategoryObj:S}))}))}(I,1)))}}]),a}(g.a.Component),c.displayName="RelativeYeb",i=r))||i,O=(a(131),a(4)),S=Object(y.fromJS)({views:{issuedate:"",endissuedate:"",categoryName:"\u5168\u90e8\u5f80\u6765\u7c7b\u522b",categoryUuid:"",runningCategoryName:"\u5168\u90e8\u6d41\u6c34\u7c7b\u522b",runningCategoryUuid:"",categoryTop:"",bussinessShowChild:[],chooseValue:"ISSUE",chooseDirection:""},issues:[],contactCategory:[{label:"\u5168\u90e8\u5f80\u6765\u7c7b\u522b",key:"-:-",childList:[]}],runningCategory:[{label:"\u5168\u90e8\u6d41\u6c34\u7c7b\u522b",key:"-:-",childList:[]}],balanceReport:{childList:[]}});var L={relativeYebState:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,a=arguments.length>1?arguments[1]:void 0;return((e={},Object(O.a)(e,"INIT_RELATIVE_YEB",(function(){return S})),Object(O.a)(e,"GET_RELATIVE_YEB_BALANCE_LIST",(function(){return t=t.setIn(["views","issuedate"],a.issuedate).setIn(["views","endissuedate"],a.endissuedate).set("balanceReport",Object(y.fromJS)(a.receivedData)),"true"===a.needPeriod&&(t=t.set("issues",Object(y.fromJS)(a.issues))),t})),Object(O.a)(e,"GET_RELATIVE_BALANCE_CATEGORY",(function(){var e=function e(t,a,n){return t.map((function(t,i){return t.childList&&t.childList.length?{key:"".concat(t[a]).concat(p.B).concat(!!t.top).concat(p.B).concat(t.direction),label:t[n],childList:e(t.childList,a,n)}:{key:"".concat(t[a]).concat(p.B).concat(!!t.top).concat(p.B).concat(t.direction),label:t[n],childList:[]}}))},n=e(a.cardCategory,"uuid","name"),i=e(a.jrCategory,"jrCategoryUuid","jrCategoryName"),c=[{label:"\u5168\u90e8\u5f80\u6765\u7c7b\u522b",key:"-:-",childList:[]}].concat(n),r=[{label:"\u5168\u90e8\u6d41\u6c34\u7c7b\u522b",key:"-:-:-",childList:[]}].concat(i);return t=t.set("contactCategory",Object(y.fromJS)(c)).set("runningCategory",Object(y.fromJS)(r))})),Object(O.a)(e,"CHANGE_RELATIVE_CATEGORY_STRING",(function(){return t.setIn(["views","categoryName"],a.categoryName).setIn(["views","categoryUuid"],a.categoryUuid).setIn(["views","categoryTop"],a.categoryTop).setIn(["views","categoryValue"],a.categoryValue)})),Object(O.a)(e,"CHANGE_RUNNING_CATEGORY_STRING",(function(){return t.setIn(["views","runningCategoryName"],a.categoryName).setIn(["views","runningCategoryUuid"],a.categoryUuid).setIn(["views","runningCategoryValue"],a.categoryValue)})),Object(O.a)(e,"RELATIVE_BALANCE_TRIANGLE_SWITCH",(function(){var e=t.getIn(["views","bussinessShowChild"]);if(a.showChild){var n=e.splice(e.findIndex((function(e){return e===a.uuid})),1);return t.setIn(["views","bussinessShowChild"],n)}var i=e.push(a.uuid);return t.setIn(["views","bussinessShowChild"],i)})),Object(O.a)(e,"CHANGE_RELATIVE_YEB_CHOOSE_DIRCTION",(function(){return t=t.setIn(["views","chooseDirection"],a.value)})),Object(O.a)(e,"CHANGE_RELATIVE_YEB_CHOOSE_VALUE",(function(){return t=t.setIn(["views","chooseValue"],a.value)})),e)[a.type]||function(){return t})()},relativeMxbState:a(1441).a}}}]);