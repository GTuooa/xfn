(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[117],{1166:function(e,t,a){"use strict";a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return g}));a(31),a(70);var n=a(1256),l=a(57),s=(a(1),a(12)),o=a(2),i=a(14),r=a(130),c=function(e){return function(t,a){o.a.toast.loading(i.p,0),Object(l.a)("getContactsBalanceList","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(5,2):"",endYear:"",endMonth:"",cardCategoryUuid:"",cardSubUuid:"",relation:"",pageNum:1,pageSize:"",getPeriod:"true"}),(function(a){if(o.a.toast.hide(),Object(s.u)(a)){var l=t(r.e(a)),i=e||l,c=a.data.result,u=c.allBeginIncomeAmount,m=c.allBeginExpenseAmount,d=c.allHappenIncomeAmount,g=c.allHappenExpenseAmount,p=c.allPaymentIncomeAmount,f=c.allPaymentExpenseAmount,E=c.allBalanceIncomeAmount,h=c.allBalanceExpenseAmount,y=c.pages,v=c.count,b=a.data.periodDtoJson?t(r.d(a.data.periodDtoJson)):[];t({type:n.d,receivedData:a.data.result.childList,period:a.data.periodDtoJson,issuedate:i,endissuedate:"",getPeriod:"true",typeUuid:"",wlType:"\u5168\u90e8",wlRelate:"",isTop:"",currentPage:1,issues:b,pages:y,count:v,allBeginIncomeAmount:u,allBeginExpenseAmount:m,allHappenIncomeAmount:d,allHappenExpenseAmount:g,allPaymentIncomeAmount:p,allPaymentExpenseAmount:f,allBalanceIncomeAmount:E,allBalanceExpenseAmount:h})}})),t(d("","","true")),t(p("","","","","true"))}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"\u5168\u90e8",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,g=arguments.length>7?arguments[7]:void 0,f=(arguments.length>8&&arguments[8],arguments.length>9?arguments[9]:void 0),E=arguments.length>10?arguments[10]:void 0;return function(h,y){var v="",b="";"true"===a?v=i:b=i,!f&&o.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(l.a)("getContactsBalanceList","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(5,2):"",endYear:t?t.substr(0,4):"",endMonth:t?t.substr(5,2):"",cardCategoryUuid:v,cardSubUuid:b,relation:u,pageNum:m,pageSize:"",getPeriod:""}),(function(l){if(f&&E.setState({isLoading:!1}),Object(s.u)(l)){var o=l.data.result,d=o.allBeginIncomeAmount,p=o.allBeginExpenseAmount,y=o.allHappenIncomeAmount,v=o.allHappenExpenseAmount,b=o.allPaymentIncomeAmount,I=o.allPaymentExpenseAmount,A=o.allBalanceIncomeAmount,x=o.allBalanceExpenseAmount,N=o.pages,T=o.count,C=l.data.periodDtoJson?h(r.d(l.data.periodDtoJson)):[];h({type:n.d,receivedData:l.data.result.childList,period:l.data.periodDtoJson,issuedate:e,endissuedate:t,getPeriod:"",issues:C,typeUuid:i,wlType:c,wlRelate:u,isTop:a,currentPage:m,pages:N,count:T,allBeginIncomeAmount:d,allBeginExpenseAmount:p,allHappenIncomeAmount:y,allHappenExpenseAmount:v,allPaymentIncomeAmount:b,allPaymentExpenseAmount:I,allBalanceIncomeAmount:A,allBalanceExpenseAmount:x,shouldConcat:g})}})),h(d(e,t,"")),h(p(e,t,a,i,"true"))}},m=function(e,t){return function(a){a({type:n.a,showChild:e,uuid:t})}},d=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(i){Object(l.a)("getContactsBalanceCategory","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(5,2):"",endYear:t?t.substr(0,4):"",endMonth:t?t.substr(5,2):"",getPeriod:a}),(function(e){if(o.a.toast.hide(),Object(s.u)(e)){var t=e.data.periodDtoJson?i(r.d(e.data.periodDtoJson)):[];i({type:n.f,receivedData:e.data.categoryList,period:e.data.periodDtoJson,getPeriod:a,issues:t})}}))}},g=function(e,t){return function(a){a({type:n.h,value:t,dataType:e})}},p=function(e,t,a,i){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return function(u){var m="",d="";"true"===a?m=i:d=i,Object(l.a)("getContactsRelation","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(5,2):"",endYear:t?t.substr(0,4):"",endMonth:t?t.substr(5,2):"",cardCategoryUuid:m,cardSubUuid:d,getPeriod:c}),(function(e){if(o.a.toast.hide(),Object(s.u)(e)){var t=e.data.periodDtoJson?u(r.d(e.data.periodDtoJson)):[];u({type:n.e,receivedData:e.data.relationList,period:e.data.periodDtoJson,getPeriod:c,issues:t}),2==e.data.relationList.length?e.data.relationList.map((function(e){"\u5168\u90e8"!==e.name&&u({type:n.b,place:["flags","wlOnlyRelate"],value:e.relation})})):u({type:n.b,place:["flags","wlOnlyRelate"],value:""})}}))}}},1256:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"f",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"h",(function(){return c})),a.d(t,"g",(function(){return u}));var n="GET_WL_BALANCE_LIST",l="ACCOUNTCONF_WL_BALANCE_TRIANGLE_SWITCH",s="CHANGE_WLYE_MORE_PERIODS",o="GET_WL_TYPE_LIST",i="GET_WL_RELATION_LIST",r="CHANGE_WLYEB_COMMON_STRING",c="WLYE_MENU_DATA",u="INIT_WLYEB"},1851:function(e,t,a){},968:function(e,t,a){"use strict";a.r(t),a.d(t,"reducer",(function(){return L})),a.d(t,"view",(function(){return O}));a(115),a(33),a(31),a(56),a(29),a(82),a(1446);var n,l,s=a(1447),o=a.n(s),i=(a(1448),a(1449)),r=a.n(i),c=a(7),u=a(8),m=a(9),d=a(10),g=a(0),p=a.n(g),f=a(1),E=a(47),h=(a(1049),a(2)),y=a(542),v=a(11),b=(a(1023),a(14)),I=a(1315),A=(a(32),a(61),a(76),a(24)),x=a(1039),N=a(1166),T=Object(A.immutableRenderDecorator)(n=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.ba,a=e.style,n=e.dispatch,l=e.className,s=e.leve,o=e.haveChild,i=e.showChild,r=e.history,c=(e.wlRelate,e.wlOnlyRelate,e.ylDataList),u=e.selectedIndex,m=e.amountType,d={background:{1:"#fff",2:"#D1C0A5",3:"#7E6B5A",4:"#59493f"}[s],minWidth:(s-1)/100*10+"rem"},g=0;c.forEach((function(e,a){e.get("uuid")===t.get("uuid")&&(g=e.get("idx"))}));var f=t.get("cardAbstract")?t.get("cardAbstract"):"",E="".concat(t.get("runningAbstract")).concat(f);return p.a.createElement("div",{className:"ba "+l,style:a},p.a.createElement("div",null,p.a.createElement("span",{className:"name",onClick:function(e){sessionStorage.setItem("ylPage","xmmxb"),n(x.b.getYllsSingleAccount(r,u,t.get("uuid"),g,!0))}},1==s?"":p.a.createElement("span",{className:"ba-flag",style:d}),p.a.createElement("span",{className:"name-name"},"".concat(t.get("runningDate"),"_").concat(E))),p.a.createElement("span",{className:"btn",onClick:function(){return n(N.b(i,t.get("uuid")))}},p.a.createElement(v.l,{type:"arrow-down",style:{visibility:o?"visible":"hidden",transform:i?"rotate(180deg)":""}}))),p.a.createElement("div",{className:"ba-info"},p.a.createElement("span",{className:"ba-info-items",onClick:function(e){sessionStorage.setItem("ylPage","xmmxb"),n(x.b.getYllsSingleAccount(r,u,t.get("uuid"),g,!0))}},p.a.createElement("span",null,t.get("flowNumber"))),p.a.createElement("span",{className:"ba-info-items"},p.a.createElement("span",{className:"item-direction"},"DETAIL_AMOUNT_TYPE_BALANCE"===m?0!==t.get("incomeAmount")?"\u5b9e\u6536":0!==t.get("expenseAmount")?"\u5b9e\u4ed8":"":0!==t.get("incomeAmount")?"\u6536\u5165":0!==t.get("expenseAmount")?"\u652f\u51fa":""),p.a.createElement(v.a,{showZero:!0,className:"item-amount"},0!==t.get("incomeAmount")?t.get("incomeAmount"):0!==t.get("expenseAmount")?t.get("expenseAmount"):"")),p.a.createElement("span",{className:"ba-info-items"},p.a.createElement(v.a,{showZero:!0,className:"item-amount"},t.get("balanceAmount")))))}}]),a}(p.a.Component))||n,C=(a(116),a(131),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(c.a)(this,a),n=t.call(this,e);var l=[];return n.props.data.getIn([n.props.leftIdx,"children"]).map((function(e,t){l.push(e.get("value"))})),n.state={showList:l},n}return Object(u.a)(a,[{key:"componentWillReceiveProps",value:function(e){if(!Object(f.is)(e.leftIdx,this.props.leftIdx)){var t=[];e.data.getIn([e.leftIdx,"children"]).map((function(e,a){t.push(e.get("value"))})),this.setState({showList:t})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.onChange,l=t.leftIdx,s=t.leftClick,o=this.state.showList,i=a.getIn([l,"value"]),r=a.getIn([l,"children"]);return p.a.createElement(v.h,{className:"xmmx-category"},p.a.createElement(v.s,{flex:"1",className:"wlye-category-menu-scroll"},p.a.createElement("div",{className:"xmmx-category-menu"},p.a.createElement("div",{className:"menu-left"},a.map((function(e,t){return p.a.createElement(v.r,{key:e.get("value"),className:"menu-left-item overElli ".concat(i==e.get("value")?"menu-left-item-selected":""),onClick:function(){return s(t)}},e.get("label"))}))),p.a.createElement("div",{className:"menu-right"},function t(a,l){return a&&a.map((function(a,s){if(a.get("children")&&a.get("children").size){var r=o.some((function(e){return e===a.get("value")}));return p.a.createElement("div",{key:a.get("value")},p.a.createElement(v.r,{className:"menu-right-item",style:{paddingLeft:"".concat(l,"rem")},onClick:function(){return n([i,a.get("value")])}},p.a.createElement("div",{className:"overElli"},a.get("label")),p.a.createElement(v.l,{style:r?{transform:"rotate(180deg)"}:"",type:"arrow-down",onClick:function(t){t.stopPropagation();var n=o;if(r){var l=n.findIndex((function(e){return e===a.get("value")}))-1;l>-1?n=n.splice(l,1):n.shift()}else n.push(a.get("value"));e.setState({showList:n})}})),r?t(a.get("children"),l+.05):"")}return p.a.createElement(v.r,{key:a.get("value"),className:"menu-right-item overElli",style:{paddingLeft:"".concat(l,"rem")},onClick:function(){return n([i,a.get("value")])}},a.get("label"))}))}(r,.1)))))}}]),a}(p.a.Component)),O=(a(1851),Object(E.c)((function(e){return e}))(l=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){if(h.a.setTitle({title:"\u9879\u76ee\u660e\u7ec6\u8868"}),h.a.setIcon({showIcon:!1}),h.a.setRight({show:!1}),this.props.dispatch(I.b("menuType","")),"xmmxb"!==sessionStorage.getItem("ylPage")){var e="DETAIL_AMOUNT_TYPE_BALANCE"===this.props.amountType?1:0;this.props.dispatch(I.a("",["flags","selectedIndex"],e)),"xmyeb"!==sessionStorage.getItem("fromPage")?this.props.dispatch(I.c()):sessionStorage.removeItem("fromPage")}else sessionStorage.removeItem("ylPage")}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.xmmxbState.getIn(["flags","menuType"]);Object(f.is)(a,this.props.xmmxbState.getIn(["flags","menuType"]))||("LB_CATEGORY"===a||"RLB_CATEGORY"===a?h.a.setRight({show:!0,control:!0,text:"\u53d6\u6d88",onSuccess:function(e){return t.props.dispatch(I.b("menuType",""))},onFail:function(e){alert(e)}}):h.a.setRight({show:!1}))}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.history,n=e.xmmxbState,l=n.getIn(["flags","projectTypeTree"]),s=n.getIn(["flags","runningCategory"]),i=(n.getIn(["flags","wlRelationship"]),n.getIn(["flags","issuedate"])),c=n.get("issues"),u=(n.get("runningShowChild"),n.getIn(["flags","endissuedate"])),m=c.findIndex((function(e){return e.get("value")===i})),d=c.slice(0,m),g=n.getIn(["flags","propertyCost"]),f=n.getIn(["flags","detailsTemp"]),E=n.getIn(["flags","total"]),A=n.getIn(["flags","currentPage"]),x=n.getIn(["flags","pageCount"]),N=(n.get("cardList"),n.getIn(["flags","curCardUuid"])),O=n.getIn(["flags","categoryUuid"]),L=n.getIn(["flags","categoryName"]),w=n.getIn(["flags","wlRelate"]),_=n.getIn(["flags","selectedIndex"]),P=n.getIn(["flags","wlOnlyRelate"]),S=(n.getIn(["flags","wlType"]),n.getIn(["flags","isTop"])),B=(n.get("contactTypeTree"),n.get("flags").get("typeUuid")),R=n.getIn(["flags","menuType"]),k=n.getIn(["flags","menuLeftIdx"]),D=n.getIn(["flags","lbmenuLeftIdx"]),j=n.getIn(["flags","curCardName"]),Y=(n.getIn(["flags","allHappenIncomeAmount"]),n.getIn(["flags","allBalanceAmount"]),n.getIn(["flags","amountType"])),U=(n.get("QcData"),n.get("ylDataList")),J="DETAIL_AMOUNT_TYPE_BALANCE"===Y?"\u6536\u4ed8\u51c0\u989d":"\u6536\u652f\u51c0\u989d",G=null;({LB_CATEGORY:function(){G=p.a.createElement(C,{data:l,leftIdx:D,leftClick:function(e){return t(I.b("lbmenuLeftIdx",e))},onChange:function(e){var a=e[1].split(b.B);t(I.a("",["flags","xmType"],a[1])),t(I.d(i,u,Y,a[0],a[2])),t(I.b("menuType","")),t(I.b("menuLeftIdx",0))}})},RLB_CATEGORY:function(){G=p.a.createElement(C,{data:s,leftIdx:k,leftClick:function(e){return t(I.b("menuLeftIdx",e))},onChange:function(e){var a=e[1].split(b.B);t(I.e(i,u,1,N,Y,a[0],a[2])),t(I.a("",["flags","propertyCost"],a[2])),t(I.a("",["flags","categoryUuid"],a[0])),t(I.a("",["flags","categoryName"],a[1])),t(I.b("menuType",""))}})}}[R]||function(){return h.a.setTitle({title:"\u9879\u76ee\u660e\u7ec6\u8868"}),null})();return G||p.a.createElement(v.h,{className:"xmmxb"},p.a.createElement(y.f,{issuedate:i,source:c,callback:function(e){t(I.c(e,"",A,Y,B,N,S,"","",j)),t(I.a("",["flags","selectedCard"],""))},onOk:function(e){t(I.c(e.value,"",A,Y,B,N,S,"","",j)),t(I.a("",["flags","selectedCard"],""))},showSwitch:!0,endissuedate:u,nextperiods:d,onBeginOk:function(e){t(I.c(e.value,"",A,Y,B,N,S,"","",j)),t(I.a("",["flags","selectedCard"],""))},onEndOk:function(e){t(I.c(i,e.value,A,Y,B,N,S,"","",j)),t(I.a("",["flags","selectedCard"],""))},changeEndToBegin:function(){t(I.c(i,"",A,Y,B,N,S,"","",j)),t(I.a("",["flags","selectedCard"],""))}}),p.a.createElement("div",{className:"xmmx-top-select"},p.a.createElement("div",{className:"xmmx-with-account"},p.a.createElement(v.r,{className:"lrls-row"},p.a.createElement(v.r,{className:"lrls-type",onClick:function(){l.size&&t(I.b("menuType","LB_CATEGORY"))}},p.a.createElement("span",null,j),p.a.createElement(v.l,{type:"triangle"})))),p.a.createElement("div",{className:"xmmx-account-select"},p.a.createElement(v.r,{className:"lrls-row"},p.a.createElement(v.r,{className:"lrls-type",onClick:function(){s.size&&t(I.b("menuType","RLB_CATEGORY"))}},p.a.createElement("span",null,s.size?L:"\u6682\u65e0\u7c7b\u522b"),p.a.createElement(v.l,{type:"triangle"}))))),p.a.createElement(o.a,null,p.a.createElement(r.a,{values:["\u6536\u652f\u53d1\u751f\u989d","\u5b9e\u6536\u5b9e\u4ed8\u989d"],selectedIndex:_,onChange:function(e){switch(t(I.a("",["flags","selectedIndex"],e.nativeEvent.selectedSegmentIndex)),e.nativeEvent.selectedSegmentIndex){case 0:t(I.e(i,u,1,N,"DETAIL_AMOUNT_TYPE_HAPPEN",O,g));break;case 1:t(I.e(i,u,1,N,"DETAIL_AMOUNT_TYPE_BALANCE",O,g))}}})),p.a.createElement(v.s,{flex:"1",uniqueKey:"xmmx-scroll",className:"scroll-item",savePosition:!0},p.a.createElement("div",{className:"ba-list flow-content"},f.map((function(e,n){return p.a.createElement("div",{key:n},p.a.createElement(T,{className:"balance-running-tabel-width",ba:e,history:a,dispatch:t,issuedate:i,wlRelate:w,wlOnlyRelate:P,ylDataList:U,amountType:Y}))}))),p.a.createElement(y.c,{diff:1,classContent:"flow-content",callback:function(e){t(I.e(i,u,A+1,N,Y,O,g,!0,!0,e))},isGetAll:A>=x,itemSize:f.size})),p.a.createElement(v.r,{className:"ba-title-single"},p.a.createElement("div",{className:"ba-title-item"},J),p.a.createElement("div",{className:"ba-title-item"},p.a.createElement(v.a,{showZero:!0},E))))}}]),a}(p.a.Component))||l),L={xmmxbState:a(1438).a,yllsState:x.a}}}]);