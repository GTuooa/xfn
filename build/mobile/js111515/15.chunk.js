(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[15],{1027:function(t,e,a){var n=a(63),r=a(546),u=a(46),i=a(221),o=a(545),c=a(1032),s=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,a,d,f){var _,T,A,g,S,E,l,m=i(e,a,d?2:1);if(f)_=t;else{if("function"!=typeof(T=o(t)))throw TypeError("Target is not iterable");if(r(T)){for(A=0,g=u(t.length);g>A;A++)if((S=d?m(n(l=t[A])[0],l[1]):m(t[A]))&&S instanceof s)return S;return new s(!1)}_=T.call(t)}for(E=_.next;!(l=E.call(_)).done;)if("object"==typeof(S=c(_,m,l.value,d))&&S&&S instanceof s)return S;return new s(!1)}).stop=function(t){return new s(!0,t)}},1028:function(t,e,a){var n=a(169),r=a(64),u=a(67),i=a(71).f,o=a(168),c=a(1043),s=o("meta"),d=0,f=Object.isExtensible||function(){return!0},_=function(t){i(t,s,{value:{objectID:"O"+ ++d,weakData:{}}})},T=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!u(t,s)){if(!f(t))return"F";if(!e)return"E";_(t)}return t[s].objectID},getWeakData:function(t,e){if(!u(t,s)){if(!f(t))return!0;if(!e)return!1;_(t)}return t[s].weakData},onFreeze:function(t){return c&&T.REQUIRED&&f(t)&&!u(t,s)&&_(t),t}};n[s]=!0},1029:function(t,e,a){"use strict";var n=a(550).charAt,r=a(132),u=a(543),i=r.set,o=r.getterFor("String Iterator");u(String,"String",(function(t){i(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=o(this),a=e.string,r=e.index;return r>=a.length?{value:void 0,done:!0}:(t=n(a,r),e.index+=t.length,{value:t,done:!1})}))},1030:function(t,e,a){var n=a(45),r=a(551),u=a(166),i=a(72),o=a(44),c=o("iterator"),s=o("toStringTag"),d=u.values;for(var f in r){var _=n[f],T=_&&_.prototype;if(T){if(T[c]!==d)try{i(T,c,d)}catch(g){T[c]=d}if(T[s]||i(T,s,f),r[f])for(var A in u)if(T[A]!==u[A])try{i(T,A,u[A])}catch(g){T[A]=u[A]}}}},1032:function(t,e,a){var n=a(63);t.exports=function(t,e,a,r){try{return r?e(n(a)[0],a[1]):e(a)}catch(i){var u=t.return;throw void 0!==u&&n(u.call(t)),i}}},1033:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};e.routerReducer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.type,i=e.payload;if(a===r)return n({},t,{locationBeforeTransitions:i});return t};var r=e.LOCATION_CHANGE="@@router/LOCATION_CHANGE",u={locationBeforeTransitions:null}},1034:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.CALL_HISTORY_METHOD="@@router/CALL_HISTORY_METHOD";function r(t){return function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return{type:n,payload:{method:t,args:a}}}}var u=e.push=r("push"),i=e.replace=r("replace"),o=e.go=r("go"),c=e.goBack=r("goBack"),s=e.goForward=r("goForward");e.routerActions={push:u,replace:i,go:o,goBack:c,goForward:s}},1035:function(t,e,a){"use strict";var n=a(1042),r=a(1044);t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},1039:function(t,e,a){"use strict";a.d(e,"a",(function(){return d})),a.d(e,"b",(function(){return f}));var n=a(4),r=a(1),u=a(57),i=a(14),o=a(12),c=a(2),s=Object(r.fromJS)({data:{categoryType:""},preData:{preAmount:0,receiveAmount:0},cxlsData:{selectedIndex:"0",idx:0},lsmxbData:{selectedIndex:"0",idx:0},zhmxbData:{selectedIndex:"0",idx:0},wlmxbData:{selectedIndex:"0",idx:0}});function d(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(n.a)(t,_.GET_YLLS_SINGLE_ACCOUNT,(function(){var t=sessionStorage.getItem("ylPage");return e.set("data",Object(r.fromJS)(a.receivedData)).setIn(["".concat(t,"Data"),"selectedIndex"],a.selectedIndex).setIn(["".concat(t,"Data"),"idx"],a.idx)})),Object(n.a)(t,_.GET_YLLS_PREAMOUNT,(function(){return e.setIn(["preData","preAmount"],a.data.preAmount).setIn(["preData","receiveAmount"],a.data.amount)})),Object(n.a)(t,_.GET_YLLS_UNTREATEDAMOUNT,(function(){var t=0,n=0;return({accumulationAmount:function(){t=a.receivedData[a.amountType]+e.getIn(["data","acPayment","personAccumulationAmount"]),e=e.setIn(["data","accumulationAmount"],t)},socialSecurityAmount:function(){n=a.receivedData[a.amountType]+e.getIn(["data","acPayment","personSocialSecurityAmount"]),e=e.setIn(["data","socialSecurityAmount"],n)}}[a.amountType]||function(){return null})(),e})),t)[a.type]||function(){return e})()}var f={getYllsSingleAccount:function(t,e,a,n,r){return function(i){c.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(u.a)("getRunningBusiness","GET","uuid=".concat(a),(function(a){c.a.toast.hide(),Object(o.u)(a)&&(i({type:_.GET_YLLS_SINGLE_ACCOUNT,receivedData:a.data.result,selectedIndex:e,idx:n}),r&&t.push("/ylls"))}))}},getXczcAccumulationAmount:function(){return function(t,e){var a=e().yllsState,n=a.getIn(["data","categoryUuid"]),r=a.getIn(["data","runningDate"]);c.a.toast.loading(i.p,0),Object(u.a)("getPaymentInfo","POST",JSON.stringify({categoryUuid:n,runningDate:r,acType:"AC_GJJ",accumulationAcId:"",accumulationAssId1:"",accumulationCategory1:"",accumulationAssId2:"",accumulationCategory2:""}),(function(e){c.a.toast.hide(),Object(o.u)(e)&&t({type:_.GET_YLLS_UNTREATEDAMOUNT,receivedData:e.data.result,amountType:"accumulationAmount"})}))}},getXczcSocialSecurityAmount:function(){return function(t,e){var a=e().yllsState,n=a.getIn(["data","categoryUuid"]),r=a.getIn(["data","runningDate"]);Object(u.a)("getPaymentInfo","POST",JSON.stringify({categoryUuid:n,runningDate:r,acType:"AC_SB",socialSecurityAcId:"",socialSecurityAssId1:"",socialSecurityCategory1:"",socialSecurityAssId2:"",socialSecurityCategory2:""}),(function(e){Object(o.u)(e)&&t({type:_.GET_YLLS_UNTREATEDAMOUNT,receivedData:e.data.result,amountType:"socialSecurityAmount"})}))}}},_={GET_YLLS_SINGLE_ACCOUNT:"GET_YLLS_SINGLE_ACCOUNT",GET_YLLS_PREAMOUNT:"GET_YLLS_PREAMOUNT",GET_YLLS_UNTREATEDAMOUNT:"GET_YLLS_UNTREATEDAMOUNT"}},1042:function(t,e,a){"use strict";var n=a(39),r=a(45),u=a(547),i=a(89),o=a(1028),c=a(1027),s=a(222),d=a(64),f=a(37),_=a(544),T=a(167),A=a(554);t.exports=function(t,e,a){var g=-1!==t.indexOf("Map"),S=-1!==t.indexOf("Weak"),E=g?"set":"add",l=r[t],m=l&&l.prototype,y=l,v={},I=function(t){var e=m[t];i(m,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(S&&!d(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return S&&!d(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(S&&!d(t))&&e.call(this,0===t?0:t)}:function(t,a){return e.call(this,0===t?0:t,a),this})};if(u(t,"function"!=typeof l||!(S||m.forEach&&!f((function(){(new l).entries().next()})))))y=a.getConstructor(e,t,g,E),o.REQUIRED=!0;else if(u(t,!0)){var C=new y,N=C[E](S?{}:-0,1)!=C,L=f((function(){C.has(1)})),p=_((function(t){new l(t)})),b=!S&&f((function(){for(var t=new l,e=5;e--;)t[E](e,e);return!t.has(-0)}));p||((y=e((function(e,a){s(e,y,t);var n=A(new l,e,y);return void 0!=a&&c(a,n[E],n,g),n}))).prototype=m,m.constructor=y),(L||b)&&(I("delete"),I("has"),g&&I("get")),(b||N)&&I(E),S&&m.clear&&delete m.clear}return v[t]=y,n({global:!0,forced:y!=l},v),T(y,t),S||a.setStrong(y,t,g),y}},1043:function(t,e,a){var n=a(37);t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},1044:function(t,e,a){"use strict";var n=a(71).f,r=a(170),u=a(548),i=a(221),o=a(222),c=a(1027),s=a(543),d=a(549),f=a(66),_=a(1028).fastKey,T=a(132),A=T.set,g=T.getterFor;t.exports={getConstructor:function(t,e,a,s){var d=t((function(t,n){o(t,d,e),A(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),f||(t.size=0),void 0!=n&&c(n,t[s],t,a)})),T=g(e),S=function(t,e,a){var n,r,u=T(t),i=E(t,e);return i?i.value=a:(u.last=i={index:r=_(e,!0),key:e,value:a,previous:n=u.last,next:void 0,removed:!1},u.first||(u.first=i),n&&(n.next=i),f?u.size++:t.size++,"F"!==r&&(u.index[r]=i)),t},E=function(t,e){var a,n=T(t),r=_(e);if("F"!==r)return n.index[r];for(a=n.first;a;a=a.next)if(a.key==e)return a};return u(d.prototype,{clear:function(){for(var t=T(this),e=t.index,a=t.first;a;)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete e[a.index],a=a.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=T(this),a=E(this,t);if(a){var n=a.next,r=a.previous;delete e.index[a.index],a.removed=!0,r&&(r.next=n),n&&(n.previous=r),e.first==a&&(e.first=n),e.last==a&&(e.last=r),f?e.size--:this.size--}return!!a},forEach:function(t){for(var e,a=T(this),n=i(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:a.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!E(this,t)}}),u(d.prototype,a?{get:function(t){var e=E(this,t);return e&&e.value},set:function(t,e){return S(this,0===t?0:t,e)}}:{add:function(t){return S(this,t=0===t?0:t,t)}}),f&&n(d.prototype,"size",{get:function(){return T(this).size}}),d},setStrong:function(t,e,a){var n=e+" Iterator",r=g(e),u=g(n);s(t,e,(function(t,e){A(this,{type:n,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=u(this),e=t.kind,a=t.last;a&&a.removed;)a=a.previous;return t.target&&(t.last=a=a?a.next:t.state.first)?"keys"==e?{value:a.key,done:!1}:"values"==e?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),d(e)}}},1051:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};e.default=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.selectLocationState,o=void 0===i?u:i,c=a.adjustUrlOnReplay,s=void 0===c||c;if("undefined"===typeof o(e.getState()))throw new Error("Expected the routing state to be available either as `state.routing` or as the custom expression you can specify as `selectLocationState` in the `syncHistoryWithStore()` options. Ensure you have added the `routerReducer` to your store's reducers via `combineReducers` or whatever method you use to isolate your reducers.");var d=void 0,f=void 0,_=void 0,T=void 0,A=void 0,g=function(t){return o(e.getState()).locationBeforeTransitions||(t?d:void 0)};if(d=g(),s){var S=function(){var e=g(!0);A!==e&&d!==e&&(f=!0,A=e,t.transitionTo(n({},e,{action:"PUSH"})),f=!1)};_=e.subscribe(S),S()}var E=function(t){f||(A=t,!d&&(d=t,g())||e.dispatch({type:r.LOCATION_CHANGE,payload:t}))};T=t.listen(E),t.getCurrentLocation&&E(t.getCurrentLocation());return n({},t,{listen:function(a){var n=g(!0),r=!1,u=e.subscribe((function(){var t=g(!0);t!==n&&(n=t,r||a(n))}));return t.getCurrentLocation||a(n),function(){r=!0,u()}},unsubscribe:function(){s&&_(),T()}})};var r=a(1033),u=function(t){return t.routing}},1052:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){return function(e){return function(a){if(a.type!==n.CALL_HISTORY_METHOD)return e(a);var r=a.payload,u=r.method,i=r.args;t[u].apply(t,function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(i))}}}};var n=a(1034)},1062:function(t,e,a){a(39)({target:"String",proto:!0},{repeat:a(553)})},1063:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.routerMiddleware=e.routerActions=e.goForward=e.goBack=e.go=e.replace=e.push=e.CALL_HISTORY_METHOD=e.routerReducer=e.LOCATION_CHANGE=e.syncHistoryWithStore=void 0;var n=a(1033);Object.defineProperty(e,"LOCATION_CHANGE",{enumerable:!0,get:function(){return n.LOCATION_CHANGE}}),Object.defineProperty(e,"routerReducer",{enumerable:!0,get:function(){return n.routerReducer}});var r=a(1034);Object.defineProperty(e,"CALL_HISTORY_METHOD",{enumerable:!0,get:function(){return r.CALL_HISTORY_METHOD}}),Object.defineProperty(e,"push",{enumerable:!0,get:function(){return r.push}}),Object.defineProperty(e,"replace",{enumerable:!0,get:function(){return r.replace}}),Object.defineProperty(e,"go",{enumerable:!0,get:function(){return r.go}}),Object.defineProperty(e,"goBack",{enumerable:!0,get:function(){return r.goBack}}),Object.defineProperty(e,"goForward",{enumerable:!0,get:function(){return r.goForward}}),Object.defineProperty(e,"routerActions",{enumerable:!0,get:function(){return r.routerActions}});var u=o(a(1051)),i=o(a(1052));function o(t){return t&&t.__esModule?t:{default:t}}e.syncHistoryWithStore=u.default,e.routerMiddleware=i.default},1084:function(t,e,a){"use strict";a.d(e,"a",(function(){return A})),a.d(e,"b",(function(){return g}));a(32),a(223),a(166),a(31),a(77),a(29),a(1035),a(1029),a(82),a(1030);var n=a(51),r=a(220),u=a(4),i=a(1),o=a(57),c=a(14),s=a(12),d=a(2),f=a(1022),_=a(1023),T=Object(i.fromJS)({views:{insertOrModify:"insert",fromYl:!1},data:{categoryType:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:0,runningState:"",propertyList:[],propertyCost:"",propertyCostList:[],accountName:"",accountUuid:"",accumulationAmount:0,socialSecurityAmount:0,paymentList:[],jtAmount:0,acPayment:{saleAc:[],saleList:[],manageAc:[],manageList:[],accruedAc:[],accruedList:[],fundAc:[],fundList:[],socialSecurityAc:[],socialSecurityList:[],incomeTaxAc:[],incomeTaxList:[],welfareAc:[],welfareList:[],beAccrued:!1,beWithholding:!1,beWelfare:!1,actualAmount:0,companyAccumulationAmount:0,personAccumulationAmount:0,companySocialSecurityAmount:0,personSocialSecurityAmount:0,incomeTaxAmount:0}}});function A(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(u.a)(t,S.GET_LB_XCZC_CARD_DETAIL,(function(){var t=a.value.split(c.B),e=a.data.get("amount"),n="",r=a.receivedData.propertyCostList;1==r.length&&(n=r[0]);var u="",o="",s=a.receivedData.propertyPay,d=a.receivedData.acPayment.beAccrued;return"SX_FLF"===s&&(u="STATE_XC_YF",o="\u798f\u5229\u8d39\u652f\u51fa"),d||"SX_GZXJ"!==s&&"SX_QTXC"!==s||(u="STATE_XC_FF",o=Object(_.h)(u,Object(i.fromJS)(a.receivedData))),d||"SX_SHBX"!==s&&"SX_ZFGJJ"!==s||(u="STATE_XC_JN",o=Object(_.h)(u,Object(i.fromJS)(a.receivedData))),T.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","accountName"],a.data.get("accountName")).setIn(["data","accountUuid"],a.data.get("accountUuid")).setIn(["data","runningState"],u).setIn(["data","amount"],e).setIn(["data","propertyCost"],n).setIn(["data","runningAbstract"],o).setIn(["views","insertOrModify"],"insert")})),Object(u.a)(t,S.GET_LB_XCZC_FROM_YLLS,(function(){var t=0,n=a.state.getIn(["data","paymentList"]).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=a,e.set("notHandleAmount",a)}))}));return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data")).setIn(["data","paymentList"],n).setIn(["data","jtAmount"],t)})),Object(u.a)(t,S.CHANGE_XCZC_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(u.a)(t,S.CHANGE_XCZC_RUNNING_STATE,(function(){return e.setIn(["data","runningState"],a.key)})),Object(u.a)(t,S.CHANGE_XCZC_ASSLIST,(function(){var t=a.value.split(c.B),n={};return n.assId=t[0],n.assName=t[1],n.assCategory=t[2],e.setIn(["data","acPayment",a.acType,a.idx],Object(i.fromJS)(n))})),Object(u.a)(t,S.CHANGE_XCZC_ACCOUNT,(function(){var t=a.value.split(c.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(u.a)(t,S.XCZC_PERSON_AMOUNT,(function(){return e.setIn(["data","acPayment",a.personType],a.value)})),Object(u.a)(t,S.XCZC_CALCULATE_AMOUNT,(function(){var t,n=e.getIn(["data","acPayment","companyAccumulationAmount"]),r=e.getIn(["data","acPayment","personAccumulationAmount"]),u=e.getIn(["data","acPayment","companySocialSecurityAmount"]),i=e.getIn(["data","acPayment","personSocialSecurityAmount"]),o=e.getIn(["data","acPayment","incomeTaxAmount"]),c=e.getIn(["data","amount"]);switch(a.propertyPay){case"SX_GZXJ":t=Object(s.l)(Number(c)-Number(r)-Number(i)-Number(o));break;case"SX_ZFGJJ":t=Object(s.l)(Number(r)+Number(n));break;case"SX_SHBX":t=Object(s.l)(Number(u)+Number(i));break;default:t=0}return e.setIn(["data","acPayment","actualAmount"],t)})),Object(u.a)(t,S.XCZC_CLEAR_ACLIST,(function(){switch(a.acType){case"fundList":e=e.setIn(["data","acPayment","fundList"],Object(i.fromJS)([])).setIn(["data","acPayment","personAccumulationAmount"],0);break;case"socialSecurityList":e=e.setIn(["data","acPayment","socialSecurityList"],Object(i.fromJS)([])).setIn(["data","acPayment","personSocialSecurityAmount"],0);break;case"incomeTaxList":e=e.setIn(["data","acPayment","incomeTaxList"],Object(i.fromJS)([])).setIn(["data","acPayment","incomeTaxAmount"],0);break;default:console.log("\u6e05\u7a7a".concat(a.acTyp,"\u5931\u8d25"))}return e})),Object(u.a)(t,S.AFTER_XCZC_SAVE,(function(){return a.saveAndNew?e=T:(a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber)),e})),Object(u.a)(t,S.GET_XCZC_UNTREATEDAMOUNT,(function(){return e.setIn(["data",a.amountType],a.receivedData[a.amountType])})),Object(u.a)(t,S.GET_XCZC_PAYMENTLIST,(function(){return e.setIn(["data","paymentList"],Object(i.fromJS)(a.receivedData)).setIn(["data","jtAmount"],0)})),Object(u.a)(t,S.PAYMENTLIST_BESELECT,(function(){return e.setIn(["data","paymentList",a.idx,"beSelect"],a.value)})),Object(u.a)(t,S.PAYMENTLIST_BEALLCHECK,(function(){return e=a.value?e.updateIn(["data","paymentList"],(function(t){return t.map((function(t){return t.set("beSelect",!0)}))})):e.updateIn(["data","paymentList"],(function(t){return t.map((function(t){return t.set("beSelect",!1)}))}))})),Object(u.a)(t,S.GET_YL_XCZCSTATE,(function(){var t=0,n=Object(i.fromJS)(a.receivedData.paymentList).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=a,e.set("notHandleAmount",a)}))}));return e.setIn(["views","insertOrModify"],"modify").set("data",Object(i.fromJS)(a.receivedData)).setIn(["data","paymentList"],n).setIn(["data","jtAmount"],t)})),Object(u.a)(t,S.XCZC_SAVE_AND_NEW,(function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),u="",o=a.receivedData.propertyCostList;1==o.length&&(u=o[0]);var c="",s="",d=a.receivedData.propertyPay,f=a.receivedData.acPayment.beAccrued;return"SX_FLF"===d&&(c="STATE_XC_YF",s="\u798f\u5229\u8d39\u652f\u51fa"),f||"SX_GZXJ"!==d&&"SX_QTXC"!==d||(c="STATE_XC_FF",s=Object(_.h)(c,Object(i.fromJS)(a.receivedData))),f||"SX_SHBX"!==d&&"SX_ZFGJJ"!==d||(c="STATE_XC_JN",s=Object(_.h)(c,Object(i.fromJS)(a.receivedData))),T.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","runningState"],c).setIn(["data","propertyCost"],u).setIn(["data","runningAbstract"],s)})),t)[a.type]||function(){return e})()}var g={changeXczcData:function(t,e){return{type:S.CHANGE_XCZC_DATA,dataType:t,value:e}},changeXczcRunningState:function(t,e){return{type:S.CHANGE_XCZC_RUNNING_STATE,propertyPay:t,key:e}},changeXczcAssList:function(t,e,a){return{type:S.CHANGE_XCZC_ASSLIST,value:e,idx:t,acType:a}},changeXczcAccount:function(t){return{type:S.CHANGE_XCZC_ACCOUNT,value:t}},xczcPersonAmount:function(t,e){return{type:S.XCZC_PERSON_AMOUNT,personType:t,value:e}},autoCalculateAmount:function(t){return{type:S.XCZC_CALCULATE_AMOUNT,propertyPay:t}},xczcClearAcList:function(t){return{type:S.XCZC_CLEAR_ACLIST,acType:t}},getXczcAccumulationAmount:function(){return function(t,e){var a=e().xczcAccountState,n=a.getIn(["data","acPayment"]),r=n.get("fundAc"),u=(r.size&&r.getIn([0,"assCategoryList"]),n.get("fundList"),a.getIn(["data","categoryUuid"])),i=a.getIn(["data","runningDate"]),f=r.getIn([0,"acId"]);d.a.toast.loading(c.p,0),Object(o.a)("getPaymentInfo","POST",JSON.stringify({categoryUuid:u,runningDate:i,acType:"AC_GJJ",accumulationAcId:f,accumulationAssId1:"",accumulationCategory1:"",accumulationAssId2:"",accumulationCategory2:""}),(function(e){d.a.toast.hide(),Object(s.u)(e)&&t({type:S.GET_XCZC_UNTREATEDAMOUNT,receivedData:e.data.result,amountType:"accumulationAmount"})}))}},getXczcSocialSecurityAmount:function(){return function(t,e){var a=e().xczcAccountState,n=a.getIn(["data","acPayment"]),r=n.get("socialSecurityAc"),u=(r.size&&r.getIn([0,"assCategoryList"]),n.get("socialSecurityList"),a.getIn(["data","categoryUuid"])),i=a.getIn(["data","runningDate"]),f=r.getIn([0,"acId"]);d.a.toast.loading(c.p,0),Object(o.a)("getPaymentInfo","POST",JSON.stringify({categoryUuid:u,runningDate:i,acType:"AC_SB",socialSecurityAcId:f,socialSecurityAssId1:"",socialSecurityCategory1:"",socialSecurityAssId2:"",socialSecurityCategory2:""}),(function(e){d.a.toast.hide(),Object(s.u)(e)&&t({type:S.GET_XCZC_UNTREATEDAMOUNT,receivedData:e.data.result,amountType:"socialSecurityAmount"})}))}},getXczcPaymentList:function(){return function(t,e){var a=e().xczcAccountState,n=a.getIn(["data","acPayment"]),r=n.get("accruedAc"),u=(r.size&&r.getIn([0,"assCategoryList"]),n.get("accruedList"),a.getIn(["data","categoryUuid"])),i=a.getIn(["data","runningDate"]),f=r.getIn([0,"acId"]);d.a.toast.loading(c.p,0),Object(o.a)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:u,runningDate:i,acId:f,assId1:"",assCategory1:"",assId2:"",assCategory2:""}),(function(e){d.a.toast.hide(),Object(s.u)(e)&&t({type:S.GET_XCZC_PAYMENTLIST,receivedData:e.data.resultList})}))}},saveRunningbusiness:function(t){return function(e,a){var u=a().homeAccountState,_=u.get("enclosureList").toJS(),T=u.get("needDeleteUrl").toJS(),A=_.concat(T),S=a().xczcAccountState,E=S.get("data").toJS(),l=E.acPayment.beAccrued,m=E.runningState,y=E.propertyCost;if(""==E.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(E.runningAbstract.length>c.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(c.y,"\u4e2a\u5b57\u7b26"));if(""==m)return d.a.toast.info("\u8bf7\u9009\u62e9\u6d41\u6c34\u72b6\u6001");var v=E.propertyPay,I=(E.acPayment.beWithholding,E.amount),C=E.accountUuid;switch(v){case"SX_GZXJ":if("STATE_XC_JT"==m&&""==y)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28");if("STATE_XC_FF"==m&&!l&&""==y)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28");if(I<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if("STATE_XC_FF"==m&&""==C)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");break;case"SX_SHBX":if("STATE_XC_JT"==m&&""==y)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28");if("STATE_XC_JN"==m&&!l&&""==y)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28");if("STATE_XC_JT"==m&&I<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if("STATE_XC_JN"==m&&""==C)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");break;case"SX_ZFGJJ":if("STATE_XC_JT"==m&&""==y)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28");if("STATE_XC_JN"==m&&!l&&""==y)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28");if(!l&&I<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if("STATE_XC_JN"==m&&""==C)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");break;case"SX_FLF":if(""==y)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28");if(I<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(""==C)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");break;case"SX_QTXC":if("STATE_XC_JT"==m&&""==y)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28");if("STATE_XC_FF"==m&&!l&&""==y)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28");if(I<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if("STATE_XC_FF"==m&&""==C)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");break;default:console.log("\u6821\u9a8c\u85aa\u916c\u652f\u51fa\u51fa\u9519")}var N=a().homeAccountState.get("project").toJS(),L=N.usedProject,p=N.projectCard,b=!1;if(("STATE_XC_JT"==m||!l&&"STATE_XC_JN"==m||"STATE_XC_YF"==m)&&(b=!0),L&&b){var O=[],Z=!1;if(!p.every((function(t){return O.push(t.uuid),t.amount<=0&&(Z=!0),t.uuid})))return d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");if(Z)return d.a.toast.info("\u9879\u76ee\u5361\u7247\u6709\u672a\u586b\u5199\u7684\u91d1\u989d");if(Object(r.a)(new Set(O)).length<O.length)return d.a.toast.info("\u6709\u91cd\u590d\u7684\u9879\u76ee\u5361\u7247")}var D=!1;!l||"STATE_XC_JN"!=m&&"STATE_XC_FF"!=m||(D=!0);var j="modifyRunningbusiness",G="insert"===S.getIn(["views","insertOrModify"]);G&&(delete E.uuid,delete E.parentUuid,j="insertPayment"),d.a.toast.loading(c.p,0),Object(o.a)(j,"POST",JSON.stringify(Object(n.a)({},E,{usedProject:L,projectCard:p,enclosureList:A})),(function(a){if(d.a.toast.hide(),Object(s.u)(a))if(d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=E.categoryUuid;e(g.getCardDetail(n)),e(f.b.changeLrlsData(["project","projectCard"],Object(i.fromJS)([{amount:""}]))),e(f.b.changeLrlsEnclosureList())}else{if(D){var r=G?a.data.uuid:E.uuid;e(g.getYlXczcState(r))}e(g.afterXczcSave(a.data,t,G))}}))}},paymentListBeSelect:function(t,e){return{type:S.PAYMENTLIST_BESELECT,value:e,idx:t}},paymentListBeAllCheck:function(t){return{type:S.PAYMENTLIST_BEALLCHECK,value:t}},afterXczcSave:function(t,e,a){return{type:S.AFTER_XCZC_SAVE,data:t,saveAndNew:e,isInsert:a}},getYlXczcState:function(t){return function(e){d.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(o.a)("getRunningBusiness","GET","uuid=".concat(t),(function(t){if(d.a.toast.hide(),Object(s.u)(t)){e({type:S.GET_YL_XCZCSTATE,receivedData:t.data.result});var a=t.data.result.acPayment.beWithholding,n=t.data.result.acPayment.beWithholdSocial;a&&e(g.getXczcAccumulationAmount()),n&&e(g.getXczcSocialSecurityAmount())}}))}},getCardDetail:function(t){return function(e){d.a.toast.loading(c.p,0),Object(o.a)("getRunningDetail","GET","uuid=".concat(t),(function(t){if(d.a.toast.hide(),Object(s.u)(t)){var a=t.data.result;delete a.parentUuid,e({type:S.XCZC_SAVE_AND_NEW,receivedData:a})}}))}}},S={GET_LB_XCZC_CARD_DETAIL:"GET_LB_XCZC_CARD_DETAIL",GET_LB_XCZC_FROM_YLLS:"GET_LB_XCZC_FROM_YLLS",CHANGE_XCZC_DATA:"CHANGE_XCZC_DATA",CHANGE_XCZC_RUNNING_STATE:"CHANGE_XCZC_RUNNING_STATE",CHANGE_XCZC_ASSLIST:"CHANGE_XCZC_ASSLIST",CHANGE_XCZC_ACCOUNT:"CHANGE_XCZC_ACCOUNT",XCZC_PERSON_AMOUNT:"XCZC_PERSON_AMOUNT",XCZC_CALCULATE_AMOUNT:"XCZC_CALCULATE_AMOUNT",AFTER_XCZC_SAVE:"AFTER_XCZC_SAVE",XCZC_CLEAR_ACLIST:"XCZC_CLEAR_ACLIST",GET_XCZC_UNTREATEDAMOUNT:"GET_XCZC_UNTREATEDAMOUNT",GET_XCZC_PAYMENTLIST:"GET_XCZC_PAYMENTLIST",PAYMENTLIST_BESELECT:"PAYMENTLIST_BESELECT",PAYMENTLIST_BEALLCHECK:"PAYMENTLIST_BEALLCHECK",GET_YL_XCZCSTATE:"GET_YL_XCZCSTATE",XCZC_SAVE_AND_NEW:"XCZC_SAVE_AND_NEW"}},1219:function(t,e,a){"use strict";a.d(e,"a",(function(){return T})),a.d(e,"b",(function(){return A}));a(32),a(223),a(166),a(31),a(116),a(77),a(29),a(1035),a(1029),a(82),a(1030);var n=a(51),r=a(220),u=a(4),i=a(1),o=a(57),c=a(14),s=a(12),d=a(2),f=a(1022),_=Object(i.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_ZS_SQ",accountName:"",accountUuid:"",paymentList:[],jtAmount:0}});function T(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(u.a)(t,g.GET_LB_ZSKX_CARD_DETAIL,(function(){var t=a.value.split(c.B),e=a.data.get("amount");return _.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","runningAbstract"],"\u6682\u6536\u6b3e").setIn(["data","accountName"],a.data.get("accountName")).setIn(["data","accountUuid"],a.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")})),Object(u.a)(t,g.GET_LB_ZSKX_FROM_YLLS,(function(){var t=0,n=a.state.getIn(["data","paymentList"]).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=a,e.set("notHandleAmount",a)}))}));return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data")).setIn(["data","paymentList"],n).setIn(["data","jtAmount"],t)})),Object(u.a)(t,g.CHANGE_ZSKX_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(u.a)(t,g.CHANGE_ZSKX_ACCOUNT,(function(){var t=a.value.split(c.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(u.a)(t,g.GET_ZSKX_PAYMENTLIST,(function(){return e.setIn(["data","paymentList"],Object(i.fromJS)(a.receivedData)).setIn(["data","jtAmount"],0)})),Object(u.a)(t,g.ZSKX_PAYMENTLIST_BESELECT,(function(){return e.setIn(["data","paymentList",a.idx,"beSelect"],a.value)})),Object(u.a)(t,g.AFTER_ZSKX_SAVE,(function(){return a.saveAndNew?e=_:(a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber)),e})),Object(u.a)(t,g.GET_YL_ZSKXSTATE,(function(){var t=0,n=Object(i.fromJS)(a.receivedData.paymentList).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=a,e.set("notHandleAmount",a)}))}));return e.setIn(["views","insertOrModify"],"modify").set("data",Object(i.fromJS)(a.receivedData)).setIn(["data","paymentList"],n).setIn(["data","jtAmount"],t)})),Object(u.a)(t,g.ZSKX_SAVE_AND_NEW,(function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return _.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],"\u6682\u6536\u6b3e")})),t)[a.type]||function(){return e})()}var A={changeZskxData:function(t,e){return{type:g.CHANGE_ZSKX_DATA,dataType:t,value:e}},changeAccount:function(t){return{type:g.CHANGE_ZSKX_ACCOUNT,value:t}},getZskxPaymentList:function(){return function(t,e){var a=e().zskxAccountState,n=a.getIn(["data","categoryUuid"]),r=a.getIn(["data","runningDate"]);d.a.toast.loading(c.p,0),Object(o.a)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:n,runningDate:r,acId:"",assId1:"",assCategory1:"",assId2:"",assCategory2:""}),(function(e){d.a.toast.hide(),Object(s.u)(e)&&t({type:g.GET_ZSKX_PAYMENTLIST,receivedData:e.data.resultList})}))}},paymentListBeSelect:function(t,e){return{type:g.ZSKX_PAYMENTLIST_BESELECT,value:e,idx:t}},saveRunningbusiness:function(t){return function(e,a){var u=a().homeAccountState,s=u.get("enclosureList").toJS(),_=u.get("needDeleteUrl").toJS(),T=s.concat(_),g=a().zskxAccountState,S=g.get("data").toJS(),E=S.runningState;if(S.amount<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(""==S.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(S.runningAbstract.length>c.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(c.y,"\u4e2a\u5b57\u7b26"));if(""==S.accountUuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");if("STATE_ZS_TH"==E&&!S.paymentList.some((function(t){return t.beSelect})))return d.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u5904\u7406\u7684\u6d41\u6c34");var l=a().homeAccountState.get("project").toJS(),m=l.usedProject,y=l.projectCard;if(m&&"STATE_ZS_SQ"==E){var v=[],I=!1;if(!y.every((function(t){return v.push(t.uuid),t.amount<=0&&(I=!0),t.uuid})))return d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");if(I)return d.a.toast.info("\u9879\u76ee\u5361\u7247\u6709\u672a\u586b\u5199\u7684\u91d1\u989d");if(Object(r.a)(new Set(v)).length<v.length)return d.a.toast.info("\u6709\u91cd\u590d\u7684\u9879\u76ee\u5361\u7247")}var C="modifyRunningbusiness",N="insert"===g.getIn(["views","insertOrModify"]);N&&(delete S.uuid,delete S.parentUuid,C="insertTemporaryReceipt"),d.a.toast.loading(c.p,0),Object(o.a)(C,"POST",JSON.stringify(Object(n.a)({},S,{usedProject:m,projectCard:y,enclosureList:T})),(function(a){if(d.a.toast.hide(),0!==a.code)d.a.toast.fail("".concat(a.code," ").concat(a.message));else if(d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=S.categoryUuid;e(A.getCardDetail(n)),e(f.b.changeLrlsData(["project","projectCard"],Object(i.fromJS)([{amount:""}]))),e(f.b.changeLrlsEnclosureList())}else{if("STATE_ZS_TH"===E){var r=N?a.data.uuid:S.uuid;e(A.getYlZskxState(r))}e(A.afterZskxSave(a.data,t,N))}}))}},afterZskxSave:function(t,e,a){return{type:g.AFTER_ZSKX_SAVE,data:t,saveAndNew:e,isInsert:a}},getYlZskxState:function(t){return function(e){d.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(o.a)("getRunningBusiness","GET","uuid=".concat(t),(function(t){d.a.toast.hide(),Object(s.u)(t)&&e({type:g.GET_YL_ZSKXSTATE,receivedData:t.data.result})}))}},getCardDetail:function(t){return function(e){d.a.toast.loading(c.p,0),Object(o.a)("getRunningDetail","GET","uuid=".concat(t),(function(t){if(d.a.toast.hide(),Object(s.u)(t)){var a=t.data.result;delete a.parentUuid,e({type:g.ZSKX_SAVE_AND_NEW,receivedData:a})}}))}}},g={GET_LB_ZSKX_CARD_DETAIL:"GET_LB_ZSKX_CARD_DETAIL",GET_LB_ZSKX_FROM_YLLS:"GET_LB_ZSKX_FROM_YLLS",CHANGE_ZSKX_DATA:"CHANGE_ZSKX_DATA",CHANGE_ZSKX_ACCOUNT:"CHANGE_ZSKX_ACCOUNT",AFTER_ZSKX_SAVE:"AFTER_ZSKX_SAVE",ZSKX_SAVE_AND_NEW:"ZSKX_SAVE_AND_NEW",ZSKX_PAYMENTLIST_BESELECT:"ZSKX_PAYMENTLIST_BESELECT",GET_ZSKX_PAYMENTLIST:"GET_ZSKX_PAYMENTLIST",GET_YL_ZSKXSTATE:"GET_YL_ZSKXSTATE"}},1220:function(t,e,a){"use strict";a.d(e,"a",(function(){return T})),a.d(e,"b",(function(){return A}));a(32),a(223),a(166),a(31),a(116),a(77),a(29),a(1035),a(1029),a(82),a(1030);var n=a(51),r=a(220),u=a(4),i=a(1),o=a(57),c=a(14),s=a(12),d=a(2),f=a(1022),_=Object(i.fromJS)({views:{insertOrModify:"insert",fromYl:!0},data:{categoryType:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_ZF_FC",accountName:"",accountUuid:"",paymentList:[],jtAmount:0}});function T(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(u.a)(t,g.GET_LB_ZFKX_CARD_DETAIL,(function(){var t=a.value.split(c.B),e=a.data.get("amount");return _.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","runningAbstract"],"\u6682\u4ed8\u6b3e").setIn(["data","accountName"],a.data.get("accountName")).setIn(["data","accountUuid"],a.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")})),Object(u.a)(t,g.GET_LB_ZFKX_FROM_YLLS,(function(){var t=0,n=a.state.getIn(["data","paymentList"]).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=a,e.set("notHandleAmount",a)}))}));return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data")).setIn(["data","paymentList"],n).setIn(["data","jtAmount"],t)})),Object(u.a)(t,g.CHANGE_ZFKX_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(u.a)(t,g.CHANGE_ZFKX_ACCOUNT,(function(){var t=a.value.split(c.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(u.a)(t,g.GET_ZFKX_PAYMENTLIST,(function(){return e.setIn(["data","paymentList"],Object(i.fromJS)(a.receivedData)).setIn(["data","jtAmount"],0)})),Object(u.a)(t,g.ZFKX_PAYMENTLIST_BESELECT,(function(){return e.setIn(["data","paymentList",a.idx,"beSelect"],a.value)})),Object(u.a)(t,g.AFTER_ZFKX_SAVE,(function(){return a.saveAndNew?e=_:(a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber)),e})),Object(u.a)(t,g.GET_YL_ZFKXSTATE,(function(){var t=0,n=Object(i.fromJS)(a.receivedData.paymentList).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=a,e.set("notHandleAmount",a)}))}));return e.setIn(["views","insertOrModify"],"modify").set("data",Object(i.fromJS)(a.receivedData)).setIn(["data","paymentList"],n).setIn(["data","jtAmount"],t)})),Object(u.a)(t,g.ZFKX_SAVE_AND_NEW,(function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return _.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],"\u6682\u4ed8\u6b3e")})),t)[a.type]||function(){return e})()}var A={changeZfkxData:function(t,e){return{type:g.CHANGE_ZFKX_DATA,dataType:t,value:e}},changeAccount:function(t){return{type:g.CHANGE_ZFKX_ACCOUNT,value:t}},getZfkxPaymentList:function(){return function(t,e){var a=e().zfkxAccountState,n=a.getIn(["data","categoryUuid"]),r=a.getIn(["data","runningDate"]);d.a.toast.loading(c.p,0),Object(o.a)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:n,runningDate:r,acId:"",assId1:"",assCategory1:"",assId2:"",assCategory2:""}),(function(e){d.a.toast.hide(),Object(s.u)(e)&&t({type:g.GET_ZFKX_PAYMENTLIST,receivedData:e.data.resultList})}))}},paymentListBeSelect:function(t,e){return{type:g.ZFKX_PAYMENTLIST_BESELECT,value:e,idx:t}},saveRunningbusiness:function(t){return function(e,a){var u=a().homeAccountState,s=u.get("enclosureList").toJS(),_=u.get("needDeleteUrl").toJS(),T=s.concat(_),g=a().zfkxAccountState,S=g.get("data").toJS(),E=S.runningState;if(S.amount<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(""==S.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(S.runningAbstract.length>c.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(c.y,"\u4e2a\u5b57\u7b26"));if(""==S.accountUuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");if("STATE_ZF_SH"==E&&!S.paymentList.some((function(t){return t.beSelect})))return d.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u5904\u7406\u7684\u6d41\u6c34");var l=a().homeAccountState.get("project").toJS(),m=l.usedProject,y=l.projectCard;if(m&&"STATE_ZF_FC"==E){var v=[],I=!1;if(!y.every((function(t){return v.push(t.uuid),t.amount<=0&&(I=!0),t.uuid})))return d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");if(I)return d.a.toast.info("\u9879\u76ee\u5361\u7247\u6709\u672a\u586b\u5199\u7684\u91d1\u989d");if(Object(r.a)(new Set(v)).length<v.length)return d.a.toast.info("\u6709\u91cd\u590d\u7684\u9879\u76ee\u5361\u7247")}var C="modifyRunningbusiness",N="insert"===g.getIn(["views","insertOrModify"]);N&&(delete S.uuid,delete S.parentUuid,C="insertTemporaryPay"),d.a.toast.loading(c.p,0),Object(o.a)(C,"POST",JSON.stringify(Object(n.a)({},S,{usedProject:m,projectCard:y,enclosureList:T})),(function(a){if(d.a.toast.hide(),0!==a.code)d.a.toast.fail("".concat(a.code," ").concat(a.message));else if(d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=S.categoryUuid;e(A.getCardDetail(n)),e(f.b.changeLrlsData(["project","projectCard"],Object(i.fromJS)([{amount:""}]))),e(f.b.changeLrlsEnclosureList())}else{if("STATE_ZF_SH"===E){var r=N?a.data.uuid:S.uuid;e(A.getYlZfkxState(r))}e(A.afterZfkxSave(a.data,t,N))}}))}},afterZfkxSave:function(t,e,a){return{type:g.AFTER_ZFKX_SAVE,data:t,saveAndNew:e,isInsert:a}},getYlZfkxState:function(t){return function(e){d.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(o.a)("getRunningBusiness","GET","uuid=".concat(t),(function(t){d.a.toast.hide(),Object(s.u)(t)&&e({type:g.GET_YL_ZFKXSTATE,receivedData:t.data.result})}))}},getCardDetail:function(t){return function(e){d.a.toast.loading(c.p,0),Object(o.a)("getRunningDetail","GET","uuid=".concat(t),(function(t){if(d.a.toast.hide(),Object(s.u)(t)){var a=t.data.result;delete a.parentUuid,e({type:g.ZFKX_SAVE_AND_NEW,receivedData:a})}}))}}},g={GET_LB_ZFKX_CARD_DETAIL:"GET_LB_ZFKX_CARD_DETAIL",GET_LB_ZFKX_FROM_YLLS:"GET_LB_ZFKX_FROM_YLLS",CHANGE_ZFKX_DATA:"CHANGE_ZFKX_DATA",CHANGE_ZFKX_ACCOUNT:"CHANGE_ZFKX_ACCOUNT",AFTER_ZFKX_SAVE:"AFTER_ZFKX_SAVE",ZFKX_SAVE_AND_NEW:"ZFKX_SAVE_AND_NEW",ZFKX_PAYMENTLIST_BESELECT:"ZFKX_PAYMENTLIST_BESELECT",GET_ZFKX_PAYMENTLIST:"GET_ZFKX_PAYMENTLIST",GET_YL_ZFKXSTATE:"GET_YL_ZFKXSTATE"}},1221:function(t,e,a){"use strict";a.d(e,"a",(function(){return T})),a.d(e,"b",(function(){return A}));a(32),a(223),a(166),a(31),a(77),a(29),a(1035),a(1029),a(82),a(1030);var n=a(51),r=a(220),u=a(4),i=a(1),o=a(57),c=a(14),s=a(12),d=a(2),f=a(1022),_=Object(i.fromJS)({views:{insertOrModify:"insert",fromYl:!1},data:{categoryType:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",propertyCost:"XZ_QDJK",runningState:"STATE_JK_YS",accountName:"",accountUuid:"",paymentList:[],jtAmount:0,acLoan:{beAccrued:!1}}});function T(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(u.a)(t,g.GET_LB_JK_CARD_DETAIL,(function(){var t=a.value.split(c.B),e=a.data.get("amount");return _.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","runningAbstract"],"\u6536\u5230\u501f\u6b3e").setIn(["data","accountName"],a.data.get("accountName")).setIn(["data","accountUuid"],a.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")})),Object(u.a)(t,g.GET_LB_JK_FROM_YLLS,(function(){var t=0,n=a.state.getIn(["data","paymentList"]).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=a,e.set("notHandleAmount",a)}))}));return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data")).setIn(["data","paymentList"],n).setIn(["data","jtAmount"],t)})),Object(u.a)(t,g.CHANGE_JK_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(u.a)(t,g.CHANGE_JK_ACCOUNT,(function(){var t=a.value.split(c.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(u.a)(t,g.CHANGE_JK_PROPERTY_COST,(function(){var t="",n="";return{XZ_QDJK:function(){t="STATE_JK_YS",n="\u6536\u5230\u501f\u6b3e"},XZ_CHLX:function(){t="STATE_JK_ZFLX",n="\u652f\u4ed8\u501f\u6b3e\u5229\u606f"},XZ_CHBJ:function(){t="STATE_JK_YF",n="\u507f\u8fd8\u672c\u91d1\u652f\u51fa"}}[a.value](),e.setIn(["data","propertyCost"],a.value).setIn(["data","runningState"],t).setIn(["data","runningAbstract"],n)})),Object(u.a)(t,g.GET_JK_PAYMENTLIST,(function(){return e.setIn(["data","paymentList"],Object(i.fromJS)(a.receivedData)).setIn(["data","jtAmount"],0)})),Object(u.a)(t,g.JK_PAYMENTLIST_BESELECT,(function(){return e.setIn(["data","paymentList",a.idx,"beSelect"],a.value)})),Object(u.a)(t,g.AFTER_JK_SAVE,(function(){return a.saveAndNew?e=_:(a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber)),e})),Object(u.a)(t,g.GET_YL_JKSTATE,(function(){var t=0,n=Object(i.fromJS)(a.receivedData.paymentList).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=a,e.set("notHandleAmount",a)}))}));return e.setIn(["views","insertOrModify"],"modify").set("data",Object(i.fromJS)(a.receivedData)).setIn(["data","paymentList"],n).setIn(["data","jtAmount"],t)})),Object(u.a)(t,g.JK_SAVE_AND_NEW,(function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return _.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],"\u6536\u5230\u501f\u6b3e")})),t)[a.type]||function(){return e})()}var A={changeJkData:function(t,e){return{type:g.CHANGE_JK_DATA,dataType:t,value:e}},changeAccount:function(t){return{type:g.CHANGE_JK_ACCOUNT,value:t}},changePropertyCost:function(t){return{type:g.CHANGE_JK_PROPERTY_COST,value:t}},getJkPaymentList:function(){return function(t,e){var a=e().jkAccountState,n=a.getIn(["data","categoryUuid"]),r=a.getIn(["data","runningDate"]);d.a.toast.loading(c.p,0),Object(o.a)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:n,runningDate:r,acId:"",assId1:"",assCategory1:"",assId2:"",assCategory2:""}),(function(e){d.a.toast.hide(),Object(s.u)(e)&&t({type:g.GET_JK_PAYMENTLIST,receivedData:e.data.resultList})}))}},paymentListBeSelect:function(t,e){return{type:g.JK_PAYMENTLIST_BESELECT,value:e,idx:t}},saveRunningbusiness:function(t){return function(e,a){var u=a().homeAccountState,s=u.get("enclosureList").toJS(),_=u.get("needDeleteUrl").toJS(),T=s.concat(_),g=a().jkAccountState,S=g.get("data").toJS(),E=S.runningState,l=S.acLoan.beAccrued;if(S.amount<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(""==S.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(S.runningAbstract.length>c.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(c.y,"\u4e2a\u5b57\u7b26"));if("STATE_JK_JTLX"!=E&&""==S.accountUuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");var m=a().homeAccountState.get("project").toJS(),y=m.usedProject,v=m.projectCard;if(y&&("STATE_JK_JTLX"==E||!l&&"STATE_JK_ZFLX"==E)){var I=[],C=!1;if(!v.every((function(t){return I.push(t.uuid),t.amount<=0&&(C=!0),t.uuid})))return d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");if(C)return d.a.toast.info("\u9879\u76ee\u5361\u7247\u6709\u672a\u586b\u5199\u7684\u91d1\u989d");if(Object(r.a)(new Set(I)).length<I.length)return d.a.toast.info("\u6709\u91cd\u590d\u7684\u9879\u76ee\u5361\u7247")}var N="modifyRunningbusiness",L="insert"===g.getIn(["views","insertOrModify"]);L&&(delete S.uuid,delete S.parentUuid,N="insertLoan"),d.a.toast.loading(c.p,0),Object(o.a)(N,"POST",JSON.stringify(Object(n.a)({},S,{usedProject:y,projectCard:v,enclosureList:T})),(function(a){if(d.a.toast.hide(),0!==a.code)d.a.toast.fail("".concat(a.code," ").concat(a.message));else if(d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=S.categoryUuid;e(A.getCardDetail(n)),e(f.b.changeLrlsData(["project","projectCard"],Object(i.fromJS)([{amount:""}]))),e(f.b.changeLrlsEnclosureList())}else{if(l&&"STATE_JK_ZFLX"===E){var r=L?a.data.uuid:S.uuid;e(A.getYlJkState(r))}e(A.afterJkSave(a.data,t,L))}}))}},afterJkSave:function(t,e,a){return{type:g.AFTER_JK_SAVE,data:t,saveAndNew:e,isInsert:a}},getYlJkState:function(t){return function(e){d.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(o.a)("getRunningBusiness","GET","uuid=".concat(t),(function(t){d.a.toast.hide(),Object(s.u)(t)&&e({type:g.GET_YL_JKSTATE,receivedData:t.data.result})}))}},getCardDetail:function(t){return function(e){d.a.toast.loading(c.p,0),Object(o.a)("getRunningDetail","GET","uuid=".concat(t),(function(t){if(d.a.toast.hide(),Object(s.u)(t)){var a=t.data.result;delete a.parentUuid,e({type:g.JK_SAVE_AND_NEW,receivedData:a})}}))}}},g={GET_LB_JK_CARD_DETAIL:"GET_LB_JK_CARD_DETAIL",GET_LB_JK_FROM_YLLS:"GET_LB_JK_FROM_YLLS",CHANGE_JK_DATA:"CHANGE_JK_DATA",CHANGE_JK_ACCOUNT:"CHANGE_JK_ACCOUNT",AFTER_JK_SAVE:"AFTER_JK_SAVE",JK_SAVE_AND_NEW:"JK_SAVE_AND_NEW",JK_PAYMENTLIST_BESELECT:"JK_PAYMENTLIST_BESELECT",GET_JK_PAYMENTLIST:"GET_JK_PAYMENTLIST",GET_YL_JKSTATE:"GET_YL_JKSTATE",CHANGE_JK_PROPERTY_COST:"CHANGE_JK_PROPERTY_COST"}},1222:function(t,e,a){"use strict";a.d(e,"a",(function(){return T})),a.d(e,"b",(function(){return A}));a(32),a(223),a(166),a(31),a(77),a(29),a(1035),a(1029),a(82),a(1030);var n=a(51),r=a(220),u=a(4),i=a(1),o=a(57),c=a(14),s=a(12),d=a(2),f=a(1022),_=Object(i.fromJS)({views:{insertOrModify:"insert",fromYl:!1},data:{categoryType:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",propertyCost:"XZ_DWTZ",runningState:"STATE_TZ_YF",propertyInvest:"",accountName:"",accountUuid:"",paymentList:[],jtAmount:0,acInvest:{beAccrued:!1}}});function T(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(u.a)(t,g.GET_LB_TZ_CARD_DETAIL,(function(){var t=a.value.split(c.B),e=a.data.get("amount");return _.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","runningAbstract"],"\u5bf9\u5916\u6295\u8d44\u652f\u51fa").setIn(["data","accountName"],a.data.get("accountName")).setIn(["data","accountUuid"],a.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")})),Object(u.a)(t,g.GET_LB_TZ_FROM_YLLS,(function(){var t=0,n=a.state.getIn(["data","paymentList"]).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=a,e.set("notHandleAmount",a)}))}));return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data")).setIn(["data","paymentList"],n).setIn(["data","jtAmount"],t)})),Object(u.a)(t,g.CHANGE_TZ_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(u.a)(t,g.CHANGE_TZ_ACCOUNT,(function(){var t=a.value.split(c.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(u.a)(t,g.CHANGE_TZ_PROPERTY_COST,(function(){var t="",n="",r=e.getIn(["data","propertyInvest"]);return{XZ_DWTZ:function(){t="STATE_TZ_YF",n="\u5bf9\u5916\u6295\u8d44\u652f\u51fa"},XZ_QDSY:function(){t="SX_ZQ"==r?"STATE_TZ_SRLX":"STATE_TZ_SRGL",n="\u6536\u5230\u6295\u8d44\u6536\u76ca"},XZ_SHTZ:function(){t="STATE_TZ_YS",n="\u6536\u56de\u6295\u8d44\u6b3e"}}[a.value](),e.setIn(["data","propertyCost"],a.value).setIn(["data","runningState"],t).setIn(["data","runningAbstract"],n)})),Object(u.a)(t,g.GET_TZ_PAYMENTLIST,(function(){return e.setIn(["data","paymentList"],Object(i.fromJS)(a.receivedData)).setIn(["data","jtAmount"],0)})),Object(u.a)(t,g.TZ_PAYMENTLIST_BESELECT,(function(){return e.setIn(["data","paymentList",a.idx,"beSelect"],a.value)})),Object(u.a)(t,g.AFTER_TZ_SAVE,(function(){return a.saveAndNew?e=_:(a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber)),e})),Object(u.a)(t,g.GET_YL_TZSTATE,(function(){var t=0,n=Object(i.fromJS)(a.receivedData.paymentList).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=a,e.set("notHandleAmount",a)}))}));return e.setIn(["views","insertOrModify"],"modify").set("data",Object(i.fromJS)(a.receivedData)).setIn(["data","paymentList"],n).setIn(["data","jtAmount"],t)})),Object(u.a)(t,g.TZ_SAVE_AND_NEW,(function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return _.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],"\u5bf9\u5916\u6295\u8d44\u652f\u51fa")})),t)[a.type]||function(){return e})()}var A={changeTzData:function(t,e){return{type:g.CHANGE_TZ_DATA,dataType:t,value:e}},changeAccount:function(t){return{type:g.CHANGE_TZ_ACCOUNT,value:t}},changePropertyCost:function(t){return{type:g.CHANGE_TZ_PROPERTY_COST,value:t}},getTzPaymentList:function(){return function(t,e){var a=e().tzAccountState,n=a.getIn(["data","categoryUuid"]),r=a.getIn(["data","runningDate"]);d.a.toast.loading(c.p,0),Object(o.a)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:n,runningDate:r,acId:"",assId1:"",assCategory1:"",assId2:"",assCategory2:""}),(function(e){d.a.toast.hide(),Object(s.u)(e)&&t({type:g.GET_TZ_PAYMENTLIST,receivedData:e.data.resultList})}))}},paymentListBeSelect:function(t,e){return{type:g.TZ_PAYMENTLIST_BESELECT,value:e,idx:t}},saveRunningbusiness:function(t){return function(e,a){var u=a().homeAccountState,i=u.get("enclosureList").toJS(),s=u.get("needDeleteUrl").toJS(),_=i.concat(s),T=a().tzAccountState,g=T.get("data").toJS(),S=g.runningState,E=g.acInvest.beAccrued;if(g.amount<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(""==g.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(g.runningAbstract.length>c.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(c.y,"\u4e2a\u5b57\u7b26"));if("STATE_TZ_JTGL"!=S&&"STATE_TZ_JTLX"!=S&&""==g.accountUuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");var l=a().homeAccountState.get("project").toJS(),m=l.usedProject,y=l.projectCard;if(m&&("STATE_TZ_JTGL"==S||"STATE_TZ_JTLX"==S||!E&&("STATE_TZ_SRGL"==S||"STATE_TZ_SRLX"==S))){var v=[],I=!1;if(!y.every((function(t){return v.push(t.uuid),t.amount<=0&&(I=!0),t.uuid})))return d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");if(I)return d.a.toast.info("\u9879\u76ee\u5361\u7247\u6709\u672a\u586b\u5199\u7684\u91d1\u989d");if(Object(r.a)(new Set(v)).length<v.length)return d.a.toast.info("\u6709\u91cd\u590d\u7684\u9879\u76ee\u5361\u7247")}var C="modifyRunningbusiness",N="insert"===T.getIn(["views","insertOrModify"]);N&&(delete g.uuid,delete g.parentUuid,C="insertAssets"),d.a.toast.loading(c.p,0),Object(o.a)(C,"POST",JSON.stringify(Object(n.a)({},g,{usedProject:m,projectCard:y,enclosureList:_})),(function(a){if(d.a.toast.hide(),0!==a.code)d.a.toast.fail("".concat(a.code," ").concat(a.message));else if(d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=g.categoryUuid;e(A.getCardDetail(n)),e(f.b.changeLrlsEnclosureList())}else{if(E&&"STATE_TZ_SRGL"===S){var r=N?a.data.uuid:g.uuid;e(A.getYlTzState(r))}e(A.afterTzSave(a.data,t,N))}}))}},afterTzSave:function(t,e,a){return{type:g.AFTER_TZ_SAVE,data:t,saveAndNew:e,isInsert:a}},getYlTzState:function(t){return function(e){d.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(o.a)("getRunningBusiness","GET","uuid=".concat(t),(function(t){d.a.toast.hide(),Object(s.u)(t)&&e({type:g.GET_YL_TZSTATE,receivedData:t.data.result})}))}},getCardDetail:function(t){return function(e){d.a.toast.loading(c.p,0),Object(o.a)("getRunningDetail","GET","uuid=".concat(t),(function(t){if(d.a.toast.hide(),Object(s.u)(t)){var a=t.data.result;delete a.parentUuid,e({type:g.TZ_SAVE_AND_NEW,receivedData:a})}}))}}},g={GET_LB_TZ_CARD_DETAIL:"GET_LB_TZ_CARD_DETAIL",GET_LB_TZ_FROM_YLLS:"GET_LB_TZ_FROM_YLLS",CHANGE_TZ_DATA:"CHANGE_TZ_DATA",CHANGE_TZ_ACCOUNT:"CHANGE_TZ_ACCOUNT",AFTER_TZ_SAVE:"AFTER_TZ_SAVE",TZ_SAVE_AND_NEW:"TZ_SAVE_AND_NEW",TZ_PAYMENTLIST_BESELECT:"TZ_PAYMENTLIST_BESELECT",GET_TZ_PAYMENTLIST:"GET_TZ_PAYMENTLIST",GET_YL_TZSTATE:"GET_YL_TZSTATE",CHANGE_TZ_PROPERTY_COST:"CHANGE_TZ_PROPERTY_COST"}},1223:function(t,e,a){"use strict";a.d(e,"a",(function(){return _})),a.d(e,"b",(function(){return T}));a(32),a(31),a(116),a(29),a(82);var n=a(51),r=a(4),u=a(1),i=a(57),o=a(14),c=a(12),s=a(2),d=a(1022),f=Object(u.fromJS)({views:{insertOrModify:"insert",fromYl:!0},data:{categoryType:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",propertyCost:"XZ_ZZ",runningState:"STATE_ZB_ZZ",accountName:"",accountUuid:"",paymentList:[],jtAmount:0,acCapital:{beAccrued:!1}}});function _(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(r.a)(t,A.GET_LB_ZB_CARD_DETAIL,(function(){var t=a.value.split(o.B),e=a.data.get("amount");return f.mergeIn(["data"],Object(u.fromJS)(a.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","runningAbstract"],"\u589e\u52a0\u6ce8\u518c\u8d44\u672c").setIn(["data","accountName"],a.data.get("accountName")).setIn(["data","accountUuid"],a.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")})),Object(r.a)(t,A.GET_LB_ZB_FROM_YLLS,(function(){var t=0,n=a.state.getIn(["data","paymentList"]).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=a,e.set("notHandleAmount",a)}))}));return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data")).setIn(["data","paymentList"],n).setIn(["data","jtAmount"],t)})),Object(r.a)(t,A.CHANGE_ZB_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(r.a)(t,A.CHANGE_ZB_ACCOUNT,(function(){var t=a.value.split(o.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(r.a)(t,A.CHANGE_ZB_PROPERTY_COST,(function(){var t="",n="";return{XZ_ZZ:function(){t="STATE_ZB_ZZ",n="\u589e\u52a0\u6ce8\u518c\u8d44\u672c"},XZ_LRFP:function(){t="STATE_ZB_ZFLR",n="\u652f\u4ed8\u5206\u914d\u5229\u6da6"},XZ_JZ:function(){t="STATE_ZB_JZ",n="\u51cf\u5c11\u6ce8\u518c\u8d44\u672c"}}[a.value](),e.setIn(["data","propertyCost"],a.value).setIn(["data","runningState"],t).setIn(["data","runningAbstract"],n)})),Object(r.a)(t,A.GET_ZB_PAYMENTLIST,(function(){return e.setIn(["data","paymentList"],Object(u.fromJS)(a.receivedData)).setIn(["data","jtAmount"],0)})),Object(r.a)(t,A.ZB_PAYMENTLIST_BESELECT,(function(){return e.setIn(["data","paymentList",a.idx,"beSelect"],a.value)})),Object(r.a)(t,A.AFTER_ZB_SAVE,(function(){return a.saveAndNew?e=f:(a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber)),e})),Object(r.a)(t,A.GET_YL_ZBSTATE,(function(){var t=0,n=Object(u.fromJS)(a.receivedData.paymentList).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=a,e.set("notHandleAmount",a)}))}));return e.setIn(["views","insertOrModify"],"modify").set("data",Object(u.fromJS)(a.receivedData)).setIn(["data","paymentList"],n).setIn(["data","jtAmount"],t)})),Object(r.a)(t,A.ZB_SAVE_AND_NEW,(function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return f.mergeIn(["data"],Object(u.fromJS)(a.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],"\u589e\u52a0\u6ce8\u518c\u8d44\u672c")})),t)[a.type]||function(){return e})()}var T={changeZbData:function(t,e){return{type:A.CHANGE_ZB_DATA,dataType:t,value:e}},changeAccount:function(t){return{type:A.CHANGE_ZB_ACCOUNT,value:t}},changePropertyCost:function(t){return{type:A.CHANGE_ZB_PROPERTY_COST,value:t}},getZbPaymentList:function(){return function(t,e){var a=e().zbAccountState,n=a.getIn(["data","categoryUuid"]),r=a.getIn(["data","runningDate"]);s.a.toast.loading(o.p,0),Object(i.a)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:n,runningDate:r,acId:"",assId1:"",assCategory1:"",assId2:"",assCategory2:""}),(function(e){s.a.toast.hide(),Object(c.u)(e)&&t({type:A.GET_ZB_PAYMENTLIST,receivedData:e.data.resultList})}))}},paymentListBeSelect:function(t,e){return{type:A.ZB_PAYMENTLIST_BESELECT,value:e,idx:t}},saveRunningbusiness:function(t){return function(e,a){var r=a().homeAccountState,u=r.get("enclosureList").toJS(),c=r.get("needDeleteUrl").toJS(),f=u.concat(c),_=a().zbAccountState,A=_.get("data").toJS(),g=A.runningState,S=A.acCapital.beAccrued;if(A.amount<=0)return s.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(""==A.runningAbstract)return s.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(A.runningAbstract.length>o.y)return s.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(o.y,"\u4e2a\u5b57\u7b26"));if("STATE_ZB_LRFP"!=g&&""==A.accountUuid)return s.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");if(S&&"STATE_ZB_ZFLR"==g&&!A.paymentList.some((function(t){return t.beSelect})))return s.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u5904\u7406\u7684\u6d41\u6c34");var E="modifyRunningbusiness",l="insert"===_.getIn(["views","insertOrModify"]);l&&(delete A.uuid,delete A.parentUuid,E="insertCapital"),s.a.toast.loading(o.p,0),Object(i.a)(E,"POST",JSON.stringify(Object(n.a)({},A,{enclosureList:f})),(function(a){if(s.a.toast.hide(),0!==a.code)s.a.toast.fail("".concat(a.code," ").concat(a.message));else if(s.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=A.categoryUuid;e(T.getCardDetail(n)),e(d.b.changeLrlsEnclosureList())}else{if(S&&"STATE_ZB_ZFLR"===g){var r=l?a.data.uuid:A.uuid;e(T.getYlZbState(r))}e(T.afterZbSave(a.data,t,l))}}))}},afterZbSave:function(t,e,a){return{type:A.AFTER_ZB_SAVE,data:t,saveAndNew:e,isInsert:a}},getYlZbState:function(t){return function(e){s.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(i.a)("getRunningBusiness","GET","uuid=".concat(t),(function(t){s.a.toast.hide(),Object(c.u)(t)&&e({type:A.GET_YL_ZBSTATE,receivedData:t.data.result})}))}},getCardDetail:function(t){return function(e){s.a.toast.loading(o.p,0),Object(i.a)("getRunningDetail","GET","uuid=".concat(t),(function(t){if(s.a.toast.hide(),Object(c.u)(t)){var a=t.data.result;delete a.parentUuid,e({type:A.ZB_SAVE_AND_NEW,receivedData:a})}}))}}},A={GET_LB_ZB_CARD_DETAIL:"GET_LB_ZB_CARD_DETAIL",GET_LB_ZB_FROM_YLLS:"GET_LB_ZB_FROM_YLLS",CHANGE_ZB_DATA:"CHANGE_ZB_DATA",CHANGE_ZB_ACCOUNT:"CHANGE_ZB_ACCOUNT",AFTER_ZB_SAVE:"AFTER_ZB_SAVE",ZB_SAVE_AND_NEW:"ZB_SAVE_AND_NEW",ZB_PAYMENTLIST_BESELECT:"ZB_PAYMENTLIST_BESELECT",GET_ZB_PAYMENTLIST:"GET_ZB_PAYMENTLIST",GET_YL_ZBSTATE:"GET_YL_ZBSTATE",CHANGE_ZB_PROPERTY_COST:"CHANGE_ZB_PROPERTY_COST"}},1262:function(t,e,a){"use strict";a.d(e,"a",(function(){return _})),a.d(e,"b",(function(){return A}));a(32),a(29),a(82);var n=a(51),r=a(4),u=a(1),i=a(57),o=a(14),c=a(12),s=(a(1037),a(1022)),d=a(2),f=Object(u.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_ZZ",categoryName:"\u5185\u90e8\u8f6c\u8d26",categoryUuid:"",amount:"",runningDate:"",runningAbstract:"\u5185\u90e8\u8f6c\u8d26",runningState:"STATE_ZZ",fromAccountName:"",fromAccountUuid:"",toAccountName:"",toAccountUuid:"",flowNumber:"",uuid:""}});function _(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(r.a)(t,T.GET_LB_ZZ_CARD_DETAIL,(function(){var t=a.value.split(o.B);return f.setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","amount"],a.data.get("amount")).setIn(["views","insertOrModify"],"insert")})),Object(r.a)(t,T.GET_LB_ZZ_FROM_YLLS,(function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data")).setIn(["data","fromAccountName"],a.state.getIn(["data","childList",0,"accountName"])).setIn(["data","fromAccountUuid"],a.state.getIn(["data","childList",0,"accountUuid"])).setIn(["data","toAccountName"],a.state.getIn(["data","childList",1,"accountName"])).setIn(["data","toAccountUuid"],a.state.getIn(["data","childList",1,"accountUuid"]))})),Object(r.a)(t,T.CHANGE_NBZZ_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(r.a)(t,T.CHANGE_NBZZ_ACCOUNT,(function(){var t=a.value.split(o.B);return e="fromAccount"===a.accountType?e.setIn(["data","fromAccountName"],t[1]).setIn(["data","fromAccountUuid"],t[0]):e.setIn(["data","toAccountName"],t[1]).setIn(["data","toAccountUuid"],t[0])})),Object(r.a)(t,T.AFTER_NBZZ_SAVE,(function(){if(a.saveAndNew){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);e=f.setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r)}else a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber);return e})),Object(r.a)(t,T.GET_YL_NBZZSTATE,(function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["data","uuid"],a.receivedData.uuid).setIn(["data","flowNumber"],a.receivedData.flowNumber).setIn(["data","categoryUuid"],a.receivedData.categoryUuid).setIn(["data","runningDate"],a.receivedData.runningDate).setIn(["data","runningAbstract"],a.receivedData.runningAbstract).setIn(["data","amount"],a.receivedData.amount).setIn(["data","fromAccountUuid"],a.receivedData.childList[0].accountUuid).setIn(["data","fromAccountName"],a.receivedData.childList[0].accountName).setIn(["data","toAccountUuid"],a.receivedData.childList[1].accountUuid).setIn(["data","toAccountName"],a.receivedData.childList[1].accountName)})),t)[a.type]||function(){return e})()}var T={GET_LB_ZZ_CARD_DETAIL:"GET_LB_ZZ_CARD_DETAIL",GET_LB_ZZ_FROM_YLLS:"GET_LB_ZZ_FROM_YLLS",CHANGE_NBZZ_DATA:"CHANGE_NBZZ_DATA",CHANGE_NBZZ_ACCOUNT:"CHANGE_NBZZ_ACCOUNT",AFTER_NBZZ_SAVE:"AFTER_NBZZ_SAVE",GET_YL_NBZZSTATE:"GET_YL_NBZZSTATE"},A={changeNbzzData:function(t,e){return{type:T.CHANGE_NBZZ_DATA,dataType:t,value:e}},changeNbzzAccount:function(t,e){return{type:T.CHANGE_NBZZ_ACCOUNT,accountType:t,value:e}},saveRunningbusiness:function(t){return function(e,a){var r=a().homeAccountState,u=r.get("enclosureList").toJS(),c=r.get("needDeleteUrl").toJS(),f=u.concat(c),_=a().nbzzAccountState,T=_.get("data").toJS();if(""==T.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(T.runningAbstract.length>o.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(o.y,"\u4e2a\u5b57\u7b26"));if(T.amount<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(""==T.fromAccountUuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u8f6c\u51fa\u8d26\u6237");if(""==T.toAccountUuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u8f6c\u5165\u8d26\u6237");if(T.toAccountUuid==T.fromAccountUuid)return d.a.toast.info("\u8f6c\u51fa\u8d26\u6237\u548c\u8f6c\u5165\u8d26\u6237\u4e0d\u80fd\u76f8\u540c");var g="insert"===_.getIn(["views","insertOrModify"]),S=g?"insertVirement":"modifyRunningbusiness";d.a.toast.loading(o.p,0),Object(i.a)(S,"POST",JSON.stringify(Object(n.a)({},T,{accountChildList:[],enclosureList:f})),(function(a){d.a.toast.hide(),0!==a.code?d.a.toast.fail("".concat(a.code," ").concat(a.message)):(d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t?(e(A.afterNbzzSave(t,g,a.data)),e(s.b.changeLrlsEnclosureList())):e(A.afterNbzzSave(t,g,a.data)))}))}},getYlNbzzState:function(t){return function(e){d.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(i.a)("getRunningBusiness","GET","uuid=".concat(t),(function(t){d.a.toast.hide(),Object(c.u)(t)&&e({type:T.GET_YL_NBZZSTATE,receivedData:t.data.result})}))}},afterNbzzSave:function(t,e,a){return{type:T.AFTER_NBZZ_SAVE,data:a,isInsert:e,saveAndNew:t}}}}}]);