(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[110],{1329:function(e,t,a){},935:function(e,t,a){"use strict";a.r(t),a.d(t,"reducer",(function(){return J})),a.d(t,"view",(function(){return G}));var n,i,s,c=a(7),r=a(8),l=a(9),o=a(10),u=a(0),m=a.n(u),p=a(47),d=a(1),f=a(11),E=a(6),g=(a(33),a(31),a(77),a(65),a(17)),y=a(14),h=a(12),v=a(2),b=a(38),S=function(){return function(e){v.a.toast.loading(y.p,0),Object(g.g)("getSecurityCenter","GET","",(function(t){Object(h.u)(t)&&(v.a.toast.hide(),e({type:"GET_SECURITY_PERMISSION_LIST",receivedData:t.data}))}))}},N=function(e,t){return function(a){a({type:"DELETE_SECURITY_PERMISSION_EMPL",listName:e,index:t})}},w=function(e,t){return function(a){a({type:"CHANGE_SECURITY_PERMISSION_LIST",listName:e,list:t})}},I=function(e,t,a){return function(n,i){v.a.toast.loading(y.p,0),Object(g.g)("setlocksecret","POST",JSON.stringify({secret:e||"",lockTime:t}),(function(i){Object(h.u)(i,"show")&&(n({type:"AFTER_CHANGE_LOCK_SECRET",secret:e||"",lockTime:t}),a&&a()),v.a.toast.hide()}))}},k=(a(1329),a(130));function O(e,t,a){var n="";g.b.indexOf("mtst.xfannix.com")>-1?n=y.i:g.b.indexOf("mpre.xfannix.com")>-1?n=y.h:g.b.indexOf("mobile.xfannix.com")>-1&&(n=y.g),v.a.complexPicker({title:t,corpId:sessionStorage.getItem("corpId"),multiple:!0,limitTips:"\u8d85\u51fa\u4e86",maxUsers:1e3,pickedUsers:e.map((function(e){return e.get("emplId")})).toJS(),pickedDepartments:[],disabledUsers:[],disabledDepartments:[],requiredUsers:[],requiredDepartments:[],appId:n,permissionType:"xxx",responseUserOnly:!0,startWithDepartmentId:0,onSuccess:function(e){e=e.users.map((function(e){return e.emplId=e.emplId.toString(),e})),a(e)},onFail:function(e){}})}var T,C,j,x,L,_,P=Object(p.c)((function(e){return e}))((s=i=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={showGuidePage:n.props.homeState.getIn(["views","firstToSecurity"])},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){v.a.setTitle({title:"\u5b89\u5168\u4e2d\u5fc3"}),v.a.setRight({show:!1}),this.props.dispatch(S()),this.props.dispatch(b.b.setDdConfig())}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=(t.allState,t.homeState),i=t.securityState,s=t.history,c=this.state.showGuidePage,r=i.get("setting"),l=r.get("adminList"),o=r.get("financeList"),u=r.get("informList"),p=n.getIn(["data","userInfo","sobInfo"]),d=n.getIn(["data","userInfo"]),E=d.get("isAdmin"),S=d.get("isDdAdmin"),I=(d.get("isDdPriAdmin"),d.get("isFinance"),"TRUE"===E||"TRUE"===S);return c?m.a.createElement(f.h,null,m.a.createElement(f.s,{className:"home-pay-guide-wrap",flex:"1"},m.a.createElement("img",{src:"https://www.xfannix.com/utils/img/guide/guide_security_SA.png"})),m.a.createElement(f.d,null,m.a.createElement(f.c,{onClick:function(){a(k.k("https://xfn-ddy-website.oss-cn-hangzhou-internal.aliyuncs.com/utils/img/guide/guide_security_SA.png"))}},"\u4fdd\u5b58\u56fe\u7247"),m.a.createElement(f.c,{onClick:function(){e.setState({showGuidePage:!1})}},m.a.createElement(f.l,{type:"security"}),m.a.createElement("span",null,"\u524d\u5f80\u8bbe\u7f6e")))):m.a.createElement(f.h,{className:"security-wrap"},m.a.createElement(f.s,{flex:"1",className:"security-wrap-scroll"},m.a.createElement("div",{className:"security-setting-wrap"},m.a.createElement("div",{className:"security-setting-main-title"},"\u8d85\u7ea7\u7ba1\u7406\u5458"),m.a.createElement("div",{className:"security-setting-sub-title"},"-\u6700\u9ad8\u6743\u9650\uff0c\u652f\u6301\u6240\u6709\u64cd\u4f5c\uff1b"),m.a.createElement("div",{className:"security-setting-sub-title"},"\u5efa\u8bae\u8bbe\u7f6e\u4eba\u5458\uff1a\u9489\u9489\u4e3b\u7ba1\u7406\u5458\u3001\u8d22\u52a1\u8d1f\u8d23\u4eba/\u603b\u76d1\uff1b"),m.a.createElement("div",{className:"security-setting-item"},m.a.createElement("div",{className:"security-setting-corp-list"},l.map((function(e,t){return m.a.createElement("span",{key:e.get("emplId")},m.a.createElement("span",null,e.get("name")),m.a.createElement("i",{onClick:function(){a(N("adminList",t))}},"\xd7"))}))),m.a.createElement("div",{className:"security-setting-corp-btn"},m.a.createElement("span",{className:"add-role-btn",style:{color:"#a90202",fontSize:".17rem"},onClick:function(){O(l,"\u8bf7\u9009\u62e9\u8d85\u7ea7\u7ba1\u7406\u5458",(function(e){a(w("adminList",e))}))}},"+")))),m.a.createElement("div",{className:"security-setting-wrap security-setting-wrap-second"},m.a.createElement("div",{className:"security-setting-main-title"},"\u8d22\u52a1\u7ecf\u7406"),m.a.createElement("div",{className:"security-setting-sub-title"},"-\u652f\u6301\u521b\u5efa\u8d26\u5957\uff0c\u652f\u6301\u8bd5\u7528/\u8d2d\u4e70\u589e\u503c\u529f\u80fd\u53ca\u5f00\u7968\uff1b"),m.a.createElement("div",{className:"security-setting-sub-title"},"-\u9489\u9489\u7ba1\u7406\u5458\u9ed8\u8ba4\u5177\u5907\u8d22\u52a1\u7ecf\u7406\u6743\u9650\uff1b"),m.a.createElement("div",{className:"security-setting-sub-title"},"\u5efa\u8bae\u8bbe\u7f6e\u4eba\u5458\uff1a\u8d22\u52a1\u7ecf\u7406/\u4e3b\u7ba1\uff1b"),m.a.createElement("div",{className:"security-setting-item"},m.a.createElement("div",{className:"security-setting-corp-list"},o.map((function(e,t){return m.a.createElement("span",{key:e.get("emplId")},m.a.createElement("span",null,e.get("name")),m.a.createElement("i",{onClick:function(){a(N("financeList",t))}},"\xd7"))}))),m.a.createElement("div",{className:"security-setting-corp-btn"},m.a.createElement("span",{className:"add-role-btn",style:{color:"#a90202",fontSize:".17rem"},onClick:function(){O(o,"\u8bf7\u9009\u62e9\u8d22\u52a1\u8d1f\u8d23\u4eba/\u8d22\u52a1\u7ecf\u7406",(function(e){a(w("financeList",e))}))}},"+")))),m.a.createElement("div",{className:"security-setting-wrap security-setting-wrap-second"},m.a.createElement("div",{className:"security-setting-main-title"},"\u6d88\u606f\u901a\u77e5\u4eba\u5458"),m.a.createElement("div",{className:"security-setting-sub-title"},"\u5efa\u8bae\u8bbe\u7f6e\u4eba\u5458\uff1a\u516c\u53f8\u8d1f\u8d23\u4eba\u3001\u8d85\u7ea7\u7ba1\u7406\u5458\uff1b"),m.a.createElement("div",{className:"security-setting-item"},m.a.createElement("div",{className:"security-setting-corp-list"},u.map((function(e,t){return m.a.createElement("span",{key:e.get("emplId")},m.a.createElement("span",null,e.get("name")),m.a.createElement("i",{onClick:function(){a(N("informList",t))}},"\xd7"))}))),m.a.createElement("div",{className:"security-setting-corp-btn"},m.a.createElement("span",{className:"add-role-btn",style:{color:"#a90202",fontSize:".17rem"},onClick:function(){O(u,"\u8bf7\u9009\u62e9\u6d88\u606f\u901a\u77e5\u4eba\u5458",(function(e){a(w("informList",e))}))}},"+"))))),m.a.createElement(f.r,{className:"footer"},m.a.createElement(f.d,{style:{height:50}},m.a.createElement(f.c,{disabled:!I,onClick:function(){var e=p?function(){}:function(){n.getIn(["views","firstToSecurity"])&&(a(b.b.changeLoginGuideString("firstToSecurity",!1)),a(b.b.changeLoginGuideString("firstToSob",!0)),s.goBack())};a(function(e,t,a){return function(n,i){v.a.toast.loading(y.p,0);var s=i().securityState.get("setting");Object(g.g)("saveSecurityCenter","POST",JSON.stringify(s),(function(i){Object(h.u)(i,"show")&&(e?n(b.b.getDbListFetch("",a)):t())}))}}(!!p,e,s))}},m.a.createElement(f.l,{type:"save"}),m.a.createElement("span",null,"\u4fdd\u5b58")))))}}]),a}(m.a.Component),i.displayName="Security",n=s))||n,R=(f.k.Label,f.k.Control,f.k.Item),D=Object(p.c)((function(e){return e}))((j=C=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={showGuidePage:""},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){v.a.setTitle({title:"\u5b89\u5168\u4e2d\u5fc3"}),v.a.setRight({show:!1}),this.props.dispatch(S())}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=(e.allState,e.homeState),n=(e.securityState,e.history),i=(this.state.showGuidePage,a.getIn(["data","userInfo"])),s=i.getIn(["lockSecret","lockTime"]),c=i.getIn(["lockSecret","secret"]);return m.a.createElement(f.h,{className:"security-wrap"},m.a.createElement(f.s,{flex:"1"},m.a.createElement("div",{className:"personal-settings-sub-tip"},"\u5b89\u5168\u8bbe\u7f6e"),m.a.createElement(f.k,null,m.a.createElement(R,{label:"\u9501\u5c4f\u5bc6\u7801",className:"form-offset-up"},m.a.createElement(f.z,{onClick:function(){n.push("/config/security/passwordsetpage")}}),m.a.createElement(f.l,{type:"arrow-right",className:"ac-option-icon",size:"14"})),m.a.createElement(R,{label:"\u81ea\u52a8\u9501\u5c4f",className:"form-offset-up personal-settings-select"},m.a.createElement(f.v,{className:"form-select-show-select",district:[{key:"\u6c38\u4e0d",value:"-1"},{key:"5\u5206\u949f",value:"5"},{key:"10\u5206\u949f",value:"10"},{key:"15\u5206\u949f",value:"15"},{key:"30\u5206\u949f",value:"30"},{key:"60\u5206\u949f",value:"60"}],onOk:function(e){t(I(c,e.value))}},m.a.createElement("div",{className:"form-select-show"},m.a.createElement("span",null,s?-1==s?"\u6c38\u4e0d":s+"\u5206\u949f":""))),"\xa0",m.a.createElement(f.l,{type:"arrow-right",className:"ac-option-icon",size:"14"})))))}}]),a}(m.a.Component),C.displayName="PersonalSettings",T=j))||T,U=(a(29),a(82),f.k.Label,f.k.Control,f.k.Item,Object(p.c)((function(e){return e}))((_=L=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={password:""},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){v.a.setTitle({title:"\u8bbe\u7f6e\u5bc6\u7801"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.homeState,i=t.history,s=this.state.password,c=s.split(""),r=n.getIn(["data","userInfo"]),l=r.getIn(["lockSecret","lockTime"]);r.getIn(["lockSecret","secret"]);return m.a.createElement(f.h,{className:"security-wrap"},m.a.createElement(f.s,{flex:"1",className:"security-wrap-password"},m.a.createElement("div",{className:"security-wrap-password-title"},"\u8bf7\u8f93\u5165\u5bc6\u7801"),m.a.createElement("ul",{className:"security-wrap-password-wrap"},m.a.createElement("li",null),m.a.createElement("li",{className:"security-wrap-password-input"},c[0]?c[0]:""),m.a.createElement("li",{className:"security-wrap-password-input"},c[1]?c[1]:""),m.a.createElement("li",{className:"security-wrap-password-input"},c[2]?c[2]:""),m.a.createElement("li",{className:"security-wrap-password-input"},c[3]?c[3]:""),m.a.createElement("li",null),m.a.createElement("input",{className:"security-wrap-password-input-input",type:"number",value:s,onChange:function(t){(/^\d{0,4}$/.test(t.target.value)||""===t.target.value)&&e.setState({password:t.target.value})}})),m.a.createElement("ul",{className:"security-wrap-password-tip"},m.a.createElement("li",null,"\u8bbe\u7f6e\u8bf4\u660e\uff1a"),m.a.createElement("li",null,"1\u3001\u4ec5\u7528\u4e8e\u5feb\u6377\u9501\u5c4f\u53ca\u89e3\u9501\uff0c\u82e5\u5bc6\u7801\u9057\u5fd8\u53ef\u76f4\u63a5\u91cd\u65b0\u8bbe\u7f6e\uff1b"),m.a.createElement("li",null,"2\u3001\u652f\u63011-4\u4f4d\u6570\u5b57\u5bc6\u7801\uff1b"),m.a.createElement("li",null,"3\u3001\u672c\u5bc6\u7801\u4e3a\u4e2a\u4eba\u9501\u5c4f\u5bc6\u7801\uff0c\u4e0d\u533a\u5206\u8d26\u5957\uff1b"),m.a.createElement("li",null,"4\u3001\u4fdd\u5b58\u7a7a\u5bc6\u7801\uff0c\u53ef\u5173\u95ed\u672c\u529f\u80fd\uff1b"))),m.a.createElement(f.d,null,m.a.createElement(f.c,{onClick:function(){i.goBack()}},m.a.createElement(f.l,{type:"cancel"}),m.a.createElement("span",null,"\u8fd4\u56de")),m.a.createElement(f.c,{onClick:function(){a(I(s,l,(function(){return i.goBack()})))}},m.a.createElement(f.l,{type:"save"}),m.a.createElement("span",null,"\u4fdd\u5b58"))))}}]),a}(m.a.Component),L.displayName="PasswordSetPage",x=_))||x),G=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return m.a.createElement(f.h,{className:"project-config"},m.a.createElement(E.a,{path:"/config/security/index",component:P}),m.a.createElement(E.a,{path:"/config/security/personalsettings",component:D}),m.a.createElement(E.a,{path:"/config/security/passwordsetpage",component:U}))}}]),a}(m.a.Component),M=a(4),A=Object(d.fromJS)({views:{},setting:{adminList:[],financeList:[],informList:[]}});var J={securityState:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,a=arguments.length>1?arguments[1]:void 0;return((e={},Object(M.a)(e,"INIT_SECURITY",(function(){return A})),Object(M.a)(e,"GET_SECURITY_PERMISSION_LIST",(function(){return t=t.set("setting",Object(d.fromJS)(a.receivedData))})),Object(M.a)(e,"DELETE_SECURITY_PERMISSION_EMPL",(function(){return t=t.updateIn(["setting",a.listName],(function(e){return e.delete(a.index)}))})),Object(M.a)(e,"CHANGE_SECURITY_PERMISSION_LIST",(function(){return t=t.setIn(["setting",a.listName],Object(d.fromJS)(a.list))})),e)[a.type]||function(){return t})()}}}}]);