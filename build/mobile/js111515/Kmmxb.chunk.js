(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[83],{1041:function(e,t,n){"use strict";n.d(t,"f",(function(){return d})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"e",(function(){return v})),n.d(t,"i",(function(){return m})),n.d(t,"l",(function(){return g})),n.d(t,"m",(function(){return b})),n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return I})),n.d(t,"j",(function(){return E})),n.d(t,"n",(function(){return x})),n.d(t,"c",(function(){return p})),n.d(t,"k",(function(){return O})),n.d(t,"b",(function(){return N}));n(32),n(55),n(61),n(34),n(31),n(116),n(29),n(82),n(76);var r=n(51),a=n(12),i=n(17),c=n(130),s=n(1057),u=n(2),o=n(14),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){u.a.toast.loading(o.p,0),Object(i.g)("pagindvc","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(5,2):"",pageSize:20,currentPage:t+1,getPeriod:"true"}),(function(r){if(Object(a.u)(r)){u.a.toast.hide();var i=n(c.e(r)),o=e||i;r.data.jsonArray;n({type:s.a,receivedData:r,issuedate:o,currentPage:t})}}))}},l=function(e){return function(t){var n=e.substring(0,7);u.a.toast.loading(o.p,0),Object(i.g)("getvclist","POST",JSON.stringify(Object(a.q)(e)),(function(e){Object(a.u)(e)&&(u.a.toast.hide(),t({type:s.h,receivedData:e,issuedate:n}))}))}},f=function(e,t){return function(n){0!=t&&(u.a.toast.loading(o.p,0),Object(i.g)("sortvc","POST",JSON.stringify({year:e.substr(0,4),month:e.substr(5,2),sort:t}),(function(t){Object(a.u)(t,"show",800)&&n(m(e))})))}},v=function(e){return function(t,n){var r=e.get("vclist").filter((function(e){return e.get("selected")})).some((function(e){return e.get("enclosurecount")}))?"\u51ed\u8bc1\u4e0b\u5b58\u5728\u9644\u4ef6,\u9644\u4ef6\u4e5f\u5c06\u88ab\u5220\u9664":"\u786e\u5b9a\u5220\u9664\u5417";u.a.Confirm({message:r,title:"\u63d0\u793a",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(n){if(1===n.buttonIndex){var r=e.get("vclist"),c=e.get("vclist").filter((function(e){return e.get("selected")})).map((function(e){return e.get("vcindex")})),d=r.size===c.size;u.a.toast.loading(o.p,0),Object(i.g)("deletevc","POST",JSON.stringify({year:e.getIn(["vclist",0,"year"]),month:e.getIn(["vclist",0,"month"]),vcindexlist:c,action:"QUERY_VC-DELETE_VC-BATCH_DELETE"}),(function(n){if(Object(a.u)(n)){if(t({type:s.f,receivedData:n}),Object(i.g)("getperiod","GET","",(function(e){Object(a.u)(e)&&(u.a.toast.hide(),t({type:s.g,receivedData:e}))})),d){var r="".concat(e.getIn(["vclist",0,"year"]),"-").concat(e.getIn(["vclist",0,"month"]));t(m(r))}t(I())}}))}},onFail:function(e){return alert(e)}})}},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3?arguments[3]:void 0;return function(d,l){var f=Object(a.q)(e),v=e.substring(0,7),m=l().cxpzState,g=m.get("searchContentType"),b=m.get("condition");!n&&u.a.toast.loading(o.p,0),Object(i.g)("pagindvc","POST",JSON.stringify(Object(r.a)({},f,{pageSize:20,currentPage:t+1,searchContentType:g,condition:b})),(function(e){!n&&u.a.toast.hide(),Object(a.u)(e)&&(n&&c.setState({isLoading:!1}),d({type:s.a,receivedData:e,issuedate:v,currentPage:t}))}))}},g=function(e){return{type:s.l,idx:e}},b=function(){return{type:s.m}},j=function(e){return{type:s.c,idx:e}},I=function(){return{type:s.b}},E=function(e){return{type:s.j,voucher:e}},x=function(){return function(e,t){var n=t().cxpzState.get("issuedate");e({type:s.d,issuedate:n})}},p=function(e,t){return{type:s.e,dataType:e,value:t}},O=function(e){return function(t,n){var r=n().cxpzState.get("vclist"),c=e.split("-"),s=[];r.forEach((function(e){e.get("selected")&&!e.get("reviewedby")&&s.push(e.get("vcindex"))})),u.a.toast.loading(o.p,0),Object(i.g)("reviewvc","POST",JSON.stringify({year:c[0],month:c[1],vcindexlist:s,action:"QUERY_VC-AUDIT"}),(function(n){Object(a.u)(n)&&(u.a.toast.hide(),0==n.data.success&&u.a.Alert(n.data.failList.join("\u3001")),t(m(e)))}))}},N=function(e){return function(t,n){var r=n().cxpzState.get("vclist"),c=e.split("-"),s=[];r.forEach((function(e){e.get("selected")&&e.get("reviewedby")&&s.push(e.get("vcindex"))})),u.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(i.g)("backreviewvc","POST",JSON.stringify({year:c[0],month:c[1],vcindexlist:s,action:"QUERY_VC-CANCEL_AUDIT"}),(function(n){Object(a.u)(n)&&(u.a.toast.hide(),0==n.data.success&&u.a.Alert(n.data.failList.join("\u3001")),t(m(e)))}))}}},1053:function(e,t,n){"use strict";var r=n(39),a=n(171),i=[].reverse,c=[1,2];r({target:"Array",proto:!0,forced:String(c)===String(c.reverse())},{reverse:function(){return a(this)&&(this.length=this.length),i.call(this)}})},1057:function(e,t,n){"use strict";n.d(t,"i",(function(){return r})),n.d(t,"h",(function(){return a})),n.d(t,"f",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"m",(function(){return u})),n.d(t,"l",(function(){return o})),n.d(t,"k",(function(){return d})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"j",(function(){return v})),n.d(t,"g",(function(){return m})),n.d(t,"d",(function(){return g}));var r="INIT_CXPZ",a="GET_VC_LIST_FETCH",i="DELETE_VC_FETCH",c="CHANGE_ALL_VC_CHECKBOX_DISPLAY",s="CANCEL_CHANGE_VC_CHECKBOX_DISPALY",u="SELECT_VC_ALL",o="SELECT_VC",d="REVERSE_VC_LIST",l="AFTER_PAGING_VC",f="CXPZ_CHANGE_DATA",v="PUSH_VOUCHER_TO_LRPZ_REDUCER",m="GET_PERIOD_FETCH",g="CHANGE_FJGL_ISSUEDATE"},1074:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(55),n(61),n(31),n(56),n(133),n(77),n(29),n(65),n(76);var r=n(4),a=n(1),i=(n(2),n(12),n(1083)),c=n(14),s=Object(a.fromJS)({flags:{selectComponentDisplay:!1,jvSelectedIdx:0,debitTotal:"0.00",creditTotal:"0.00",showckpz:!1,vcindexList:[],vcIdx:0,locked:"",currencyList:[],currencyListArr:[]},oldvcindex:"",oldyear:"",oldmonth:"",oldvcdate:"",vcindex:"",year:"",month:"",vcdate:"",createdtime:"",modifiedtime:"",createdby:"",exchange:"",closeby:"",reviewedby:"",enclosureCountUser:"",jvlist:[{jvdirection:"debit",jvabstract:"",acid:"",acname:"",acfullname:"",jvamount:"",asslist:[],acunitOpen:"0",jvcount:"",price:"",jvunit:"",fcStatus:"0",fcNumber:"",exchange:"",standardAmount:""}],vckey:0,enclosureList:[],label:[],needDeleteUrl:[],vcList:[]});function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(r.a)(e,i.I,(function(){return s.set("year",t.get("year")).set("month",t.get("month")).set("vcdate",t.get("vcdate")).set("vcindex",t.get("vcindex"))})),Object(r.a)(e,i.Q,(function(){return t.setIn(["flags","showckpz"],n.bool)})),Object(r.a)(e,i.p,(function(){return t.updateIn(["flags","selectComponentDisplay"],(function(e){return!e}))})),Object(r.a)(e,i.P,(function(){return t.setIn(["flags","jvSelectedIdx"],n.idx)})),Object(r.a)(e,i.J,(function(){var e=o(t),r=e.getIn(["flags","debitTotal"])-e.getIn(["flags","creditTotal"]);return o(t.update("jvlist",(function(e){return e.insert(n.idx+1,e.get(n.idx).update("jvdirection",(function(e){return r>0?"credit":"debit"})).set("jvamount",Math.abs(r).toFixed(2)-0||"").set("acid","").set("acname","").set("acfullname","").set("asslist",[]).set("acunitOpen","0").set("jvcount","").set("price","").set("jvunit","").set("fcStatus","0").set("fcNumber","").set("exchange","").set("standardAmount",""))})))})),Object(r.a)(e,i.v,(function(){return o(t.get("jvlist").size>1?t.deleteIn(["jvlist",n.idx]):t)})),Object(r.a)(e,i.w,(function(){return o(t.update("jvlist",(function(e){return e.clear()})))})),Object(r.a)(e,i.s,(function(){return t.set("vcindex",Number(n.vcindex))})),Object(r.a)(e,i.f,(function(){return t.setIn(["jvlist",n.idx,"jvabstract"],n.jvabstract)})),Object(r.a)(e,i.g,(function(){var e=n.asscategorylist.map((function(e){return Object(a.fromJS)({assid:"",assname:"",asscategory:e})}));return t.updateIn(["jvlist",n.idx],(function(t){return t.set("acid",n.acid).set("acfullname",n.acfullname).set("acname",n.acname).set("asslist",e)}))})),Object(r.a)(e,i.h,(function(){return(/^[-\d]\d*\.?\d{0,2}$/g.test(n.jvamount)||""===n.jvamount)&&(t=o(t=t.setIn(["jvlist",n.idx,"jvamount"],n.jvamount))),t})),Object(r.a)(e,i.k,(function(){return o(t.updateIn(["jvlist",n.idx,"jvdirection"],(function(e){return"credit"==e?"debit":"credit"})))})),Object(r.a)(e,i.i,(function(){return t.updateIn(["jvlist",n.idx,"asslist"],(function(e){return e.map((function(e){return e.get("asscategory")==n.asscategory?e.set("assid",n.assid).set("assname",n.assname):e}))}))})),Object(r.a)(e,i.N,(function(){if(!n.voucher)return t;var e=Object(a.fromJS)(n.voucher);return o(t.merge(e).set("oldvcindex",e.get("vcindex")).set("oldyear",e.get("year")).set("oldmonth",e.get("month")).set("oldvcdate",e.get("vcdate")))})),Object(r.a)(e,i.F,(function(){return t.set("month",n.vcdate.getMonth()).set("year",n.vcdate.getYear()).set("vcdate",n.vcdate.toString()).set("vcindex",n.receivedData.data)})),Object(r.a)(e,i.M,(function(){t.get("oldvcdate");var e=n.date;return t.set("vcdate",e.toString())})),Object(r.a)(e,i.z,(function(){n.data;return"modify"===sessionStorage.getItem("lrpzHandleMode")&&(t=t.setIn(["flags","showckpz"],!0)),"insert"===sessionStorage.getItem("lrpzHandleMode")&&(t=t.set("createdtime",n.createdtime).set("createdby",n.createdby)),n.refresh&&(t=o(t.set("jvlist",s.get("jvlist")).set("vcindex",n.NewVcIndex))),t.set("vckey",0).set(["flags","locked",""])})),Object(r.a)(e,i.O,(function(){return t.set("reviewedby",n.reviewedby)})),Object(r.a)(e,i.d,(function(){return t.set("reviewedby","")})),Object(r.a)(e,i.y,(function(){return t.set("vckey",n.receivedData)})),Object(r.a)(e,i.B,(function(){return o((t=n.judgeLocked?s.set("vcindex",n.receivedData+1).set("vcdate",n.vcDate.toString()).set("year",n.vcDate.getYear()).set("month",n.vcDate.getMonth()):s.set("vcindex",n.getDraftItem.vcindex).set("vcdate",n.getDraftItem.vcdate).set("year",n.getDraftItem.year).set("month",n.getDraftItem.month)).set("jvlist",Object(a.fromJS)(n.getDraftItem.jvlist)).set("vckey",n.getDraftItem.vckey).set("enclosureCountUser",n.getDraftItem.enclosureCountUser).setIn(["flags","locked"],n.getDraftItem.locked).setIn(["flags","showckpz"],!0))})),Object(r.a)(e,i.K,(function(){return t.setIn(["flags","locked"],"1")})),Object(r.a)(e,i.L,(function(){return t.setIn(["flags","locked"],"0")})),Object(r.a)(e,i.A,(function(){return(t=t.setIn(["jvlist",n.idx,"jvunit"],n.receivedData.acunit).setIn(["jvlist",n.idx,"acunitOpen"],n.receivedData.acunitOpen).setIn(["jvlist",n.idx,"jvcount"],"")).getIn(["jvlist",n.idx,"jvdirection"])||(t=t.setIn(["jvlist",n.idx,"jvdirection"],n.receivedData.direction)),t=0==n.receivedData.price?t.setIn(["jvlist",n.idx,"price"],""):t.setIn(["jvlist",n.idx,"price"],n.receivedData.price)})),Object(r.a)(e,i.j,(function(){new RegExp("^[-\\d]\\d*\\.?\\d{0,"+Number(n.unitDecimalCount)+"}$","g");return Number(n.jvCount)>1e6||Number(n.jvCount)<-1e6?alert("\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc7".concat(c.r,"\u4f4d")):t.setIn(["jvlist",n.idx,"jvcount"],n.jvCount)})),Object(r.a)(e,i.n,(function(){return/^[-\d]\d*\.?\d{0,2}$/g.test(n.jvPrice)||""===n.jvPrice?(Number(n.jvPrice)<0&&(alert("\u5355\u4ef7\u4e0d\u5141\u8bb8\u4e3a\u8d1f\u6570"),n.jvPrice=-Number(n.jvPrice)),Number(n.jvPrice)>1e9||Number(n.jvPrice)<-1e9?alert("\u5355\u4ef7\u4e0d\u80fd\u8d85\u8fc7".concat(c.s,"\u4f4d")):t.setIn(["jvlist",n.idx,"price"],n.jvPrice)):t})),Object(r.a)(e,i.b,(function(){var e=t.getIn(["jvlist",n.idx,"price"]),r=t.getIn(["jvlist",n.idx,"jvcount"]),a=t.getIn(["jvlist",n.idx,"jvamount"]);if("count"==n.value||"price"==n.value)if(Number(r)&&Number(e))Number(a)<0&&r?r=-Math.abs(r):Number(a)>0&&r&&(r=Math.abs(r)),r=Number(r)%1==0?Math.floor(r):parseFloat(Number(r).toFixed(2)),e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),t=t.setIn(["jvlist",n.idx,"price"],e).setIn(["jvlist",n.idx,"jvcount"],r).setIn(["jvlist",n.idx,"jvamount"],(r*e).toFixed(2));else if(""==e&&r&&a)e=a/r,e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),t=t.setIn(["jvlist",n.idx,"price"],e);else if(""==r&&e&&a)r=parseFloat((a/e).toFixed(n.unitDecimalCount)),Number(r)%1==0&&(r=Math.floor(r)),t=t.setIn(["jvlist",n.idx,"jvcount"],r);else{if(0==r||!a)return t;e=a/r,e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),t=t.setIn(["jvlist",n.idx,"price"],e)}else if("amount"==n.value){if(!r||!a)return t;Number(a)<0&&r?r=-Math.abs(r):Number(a)>0&&r&&(r=Math.abs(r)),e=a/r,e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),t=t.setIn(["jvlist",n.idx,"price"],e).setIn(["jvlist",n.idx,"jvcount"],r)}return o(t)})),Object(r.a)(e,i.t,(function(){return t.setIn(["jvlist",n.idx,"acunitOpen"],"0")})),Object(r.a)(e,i.D,(function(){if(!n.receivedData)return t;var e=Object(a.fromJS)(n.receivedData);return o(t.merge(e).set("oldvcindex",e.get("vcindex")).set("oldyear",e.get("year")).set("oldmonth",e.get("month")).set("oldvcdate",e.get("vcdate")))})),Object(r.a)(e,i.e,(function(){var e=[];return t.get("enclosureList").map((function(t){e.push(t)})),n.imgArr.forEach((function(t){e.push(t)})),e=e.slice(0,9),t=t.set("enclosureList",Object(a.fromJS)(e)).set("enclosureCountUser",e.length)})),Object(r.a)(e,i.x,(function(){return t.get("enclosureList").map((function(e,r){r==n.index&&(t=t.deleteIn(["enclosureList",r]))})),t=t.set("enclosureCountUser",t.get("enclosureList").size)})),Object(r.a)(e,i.H,(function(){return t=t.set("enclosureList",Object(a.fromJS)(n.receivedData))})),Object(r.a)(e,i.r,(function(){return t.set("enclosureCountUser",n.value)})),Object(r.a)(e,i.E,(function(){var e=[];return n.receivedData.data.forEach((function(t,n){e.push({key:t,value:n})})),t=t.set("label",e)})),Object(r.a)(e,i.q,(function(){return t.get("enclosureList").map((function(e,r){r==n.index&&(t=t.setIn(["enclosureList",r,"label"],n.value))})),t})),Object(r.a)(e,i.C,(function(){var e=Object(a.fromJS)(n.receivedData),r=[];e.map((function(e,t){return r.push(e.get("fcNumber"))}));var i=e.filter((function(e){return"1"==e.get("standard")})),c=i.getIn([0,"fcNumber"]),s=i.getIn([0,"exchange"]);return"modify"!=n.idx&&(t=t.setIn(["jvlist",n.idx,"fcStatus"],"1").setIn(["jvlist",n.idx,"fcNumber"],c).setIn(["jvlist",n.idx,"exchange"],s).setIn(["jvlist",n.idx,"jvdirection"],"debit")),t.setIn(["flags","currencyList"],e).setIn(["flags","currencyListArr"],r)})),Object(r.a)(e,i.u,(function(){return t.setIn(["jvlist",n.idx,"fcStatus"],"0").setIn(["jvlist",n.idx,"fcNumber"],"").setIn(["jvlist",n.idx,"exchange"],"").setIn(["jvlist",n.idx,"standardAmount"],"")})),Object(r.a)(e,i.m,(function(){return t.setIn(["jvlist",n.idx,"fcNumber"],n.fcNumber).setIn(["jvlist",n.idx,"exchange"],n.exchange)})),Object(r.a)(e,i.l,(function(){return/^\d*\.?\d{0,4}$/g.test(n.value)||""===n.value?t.setIn(["jvlist",n.idx,"exchange"],n.value):t})),Object(r.a)(e,i.o,(function(){return/^[-\d]\d*\.?\d{0,2}$/g.test(n.value)||""===n.value?t.setIn(["jvlist",n.idx,"standardAmount"],n.value):t})),Object(r.a)(e,i.c,(function(){var e=t.getIn(["jvlist",n.idx,"price"]),r=t.getIn(["jvlist",n.idx,"jvcount"]),a=t.getIn(["jvlist",n.idx,"standardAmount"]),i=t.getIn(["jvlist",n.idx,"exchange"]),c=t.getIn(["jvlist",n.idx,"jvamount"]);return e&&r&&a&&i?"count"==n.value?(r=d(r,c),a=d(a,c),i=(c=(r*e).toFixed(2))/a):"price"==n.value?i=(c=(r*e).toFixed(2))/a:"standardAmount"==n.value?(r=d(r,c),e=(c=((a=d(a,c))*i).toFixed(2))/r):"exchange"==n.value?e=(c=(a*i).toFixed(2))/r:"amount"==n.value&&(r=d(r,c),a=d(a,c),c&&(e=Number(c)/r,i=Number(c)/a)):"count"==n.value||"price"==n.value?(Number(r)&&e?(r=d(r,c),c=(Number(r)*e).toFixed(2)):""==e&&r&&c||0!=r&&c?e=c/r:t=t,Number(a)&&(i=c/a)):"standardAmount"==n.value||"exchange"==n.value?(Number(a)&&i?(a=d(a,c),c=(Number(a)*i).toFixed(2)):""==i&&a&&c?(i=(i=c/a)%1==0?Math.floor(i):parseFloat(i.toFixed(4)),t=t.setIn(["jvlist",n.idx,"exchange"],i)):a&&c&&(i=c/a),Number(r)&&(e=c/r)):"amount"==n.value&&(r=d(r,c),a=d(a,c),c&&(!a&&r?e=Number(c)/r:a&&!r?i=Number(c)/a:a&&r&&(e=Number(c)/r,i=Number(c)/a))),r=Number(r)%1==0?Math.floor(r):parseFloat(Number(r).toFixed(n.unitDecimalCount)),a=Number(a)%1==0?Math.floor(a):parseFloat(Number(a).toFixed(2)),e=Number(e)%1==0?Math.floor(e):parseFloat(Number(e).toFixed(2)),i=Number(i)%1==0?Math.floor(i):parseFloat(Number(i).toFixed(4)),o(t=t.setIn(["jvlist",n.idx,"standardAmount"],0===a?"":a).setIn(["jvlist",n.idx,"exchange"],i).setIn(["jvlist",n.idx,"price"],e).setIn(["jvlist",n.idx,"jvcount"],r).setIn(["jvlist",n.idx,"jvamount"],c))})),Object(r.a)(e,i.R,(function(){return t.set("vcList",n.vcList)})),e)[n.type]||function(){return t})()}function o(e){var t=0,n=0;return e.get("jvlist").map((function(e){"credit"===e.get("jvdirection")?t+=Number(e.get("jvamount")):"debit"===e.get("jvdirection")&&(n+=Number(e.get("jvamount")))})),e=(e=e.setIn(["flags","creditTotal"],t?t.toFixed(2).toString():"0.00")).setIn(["flags","debitTotal"],n?n.toFixed(2).toString():"0.00")}function d(e,t){return Number(t)<0&&e?-Math.abs(e):Number(t)>0&&e?Math.abs(e):e}},1083:function(e,t,n){"use strict";n.d(t,"I",(function(){return r})),n.d(t,"Q",(function(){return a})),n.d(t,"p",(function(){return i})),n.d(t,"P",(function(){return c})),n.d(t,"J",(function(){return s})),n.d(t,"v",(function(){return u})),n.d(t,"w",(function(){return o})),n.d(t,"s",(function(){return d})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return v})),n.d(t,"k",(function(){return m})),n.d(t,"i",(function(){return g})),n.d(t,"N",(function(){return b})),n.d(t,"F",(function(){return j})),n.d(t,"M",(function(){return I})),n.d(t,"z",(function(){return E})),n.d(t,"O",(function(){return x})),n.d(t,"d",(function(){return p})),n.d(t,"y",(function(){return O})),n.d(t,"B",(function(){return N})),n.d(t,"K",(function(){return _})),n.d(t,"L",(function(){return C})),n.d(t,"A",(function(){return A})),n.d(t,"j",(function(){return h})),n.d(t,"n",(function(){return y})),n.d(t,"b",(function(){return S})),n.d(t,"t",(function(){return T})),n.d(t,"D",(function(){return L})),n.d(t,"e",(function(){return D})),n.d(t,"x",(function(){return F})),n.d(t,"H",(function(){return P})),n.d(t,"E",(function(){return R})),n.d(t,"q",(function(){return V})),n.d(t,"C",(function(){return J})),n.d(t,"u",(function(){return G})),n.d(t,"m",(function(){return H})),n.d(t,"l",(function(){return M})),n.d(t,"o",(function(){return U})),n.d(t,"c",(function(){return k})),n.d(t,"r",(function(){return w})),n.d(t,"G",(function(){return z})),n.d(t,"a",(function(){return B})),n.d(t,"R",(function(){return Y}));var r="INIT_LRPZ",a="SET_CKPZ_IS_SHOW",i="CHANGE_SELECT_COMPONENT_DISPLAY",c="SELECT_JV",s="INSERT_JV",u="DELETE_JV",o="DELETE_JV_ALL",d="CHANGE_VC_ID",l="CHANGE_JV_ABSTRACT",f="CHANGE_JV_ACID_AND_ACNAME_AND_ASSCATEGORYLIST",v="CHANGE_JV_AMOUNT",m="CHANGE_JV_DIRECTION",g="CHANGE_JV_ASSID_AND_ASSNAME",b="PUSH_VOUCHER_TO_LRPZ_REDUCER",j="GET_LAST_VC_ID_FETCH",I="MODIFY_VCDATE",E="ENTER_JVITEM_FETCH",x="REVIEWED_JVLIST",p="CANCEL_REVIEWED_JVLIST",O="DRAFT_SAVE_FETCH",N="GET_DRAFT_ITEM_FETCH",_="LRPZ_LOCE_DRAFT",C="LRPZ_UN_LOCE_DRAFT",A="GET_AMOUNT_DATA",h="CHANGE_JV_COUNT",y="CHANGE_JV_PRICE",S="AUTO_CALCULATE",T="CLEAR_AC_UNIT_OPEN",L="GET_FJ_DATA",D="CHANGE_ENCLOSURE_LIST",F="DELETE_UPLOAD_IMG_URL",P="GET_UPLOAD",R="GET_LABEL_FETCH",V="CHANGE_TAG_NAME",J="GET_FC_LIST_DATA_FETCH",G="CLEAR_FC_LIST_DATA",H="CHANGE_JV_NUMBER",M="CHANGE_JV_EXCHANGE",U="CHANGE_JV_STANDARDAMOUNT",k="AUTO_CALCULATE_ALL",w="CHANGE_VC_ENCLOSURE_COUNT_USER",z="GET_PERIOD_FETCH",B="AFTER_GET_UPLOAD_SIGNATURE",Y="SET_LRPX_VCLIST"},1095:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r="INIT_MXB",a="GET_MXB_ACLIST",i="GET_SUBSIDIARY_LEDGER_FETCH",c="REVERSE_LEDGER_JV_LIST",s="CHANGE_MXB_BEGIN_DATE",u="CHANGE_AC_MXB_CHOOSE_VALUE"},1129:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(1053);var r=n(4),a=n(1),i=n(1095),c=Object(a.fromJS)({views:{currentAcId:"",currentAssId:"",currentAssCategory:"",chooseValue:"ISSUE"},issuedate:"",endissuedate:"",currentAcid:"",currentAss:"",mxbAclist:[],ledger:{acId:"",acName:"",direction:"",assCategory:"",assId:"",assName:"",allDebitAmount:0,allCreditAmount:0,allBalanceAmount:0,detailList:[]}});function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(r.a)(e,i.e,(function(){return c})),Object(r.a)(e,i.c,(function(){return t.set("mxbAclist",Object(a.fromJS)(n.receivedData))})),Object(r.a)(e,i.d,(function(){return t.set("issuedate",n.param.issuedate).set("endissuedate",n.param.endissuedate).set("ledger",Object(a.fromJS)(n.receivedData)).setIn(["views","currentAcId"],n.param.acId).setIn(["views","currentAssId"],n.param.assId).setIn(["views","currentAssCategory"],n.param.assCategory)})),Object(r.a)(e,i.f,(function(){return t.updateIn(["ledger","jvlist"],(function(e){return e.reverse()}))})),Object(r.a)(e,i.b,(function(){return t=n.bool?t.set("endissuedate",n.begin):t.set("issuedate",n.begin)})),Object(r.a)(e,i.a,(function(){return t=t.setIn(["views","chooseValue"],n.value)})),e)[n.type]||function(){return t})()}},1154:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return g}));var r=n(51),a=n(12),i=n(17),c=n(1095),s=n(552),u=n(1041),o=n(2),d=n(14),l=function(e,t){return function(n){Object(i.g)("getreportacdetailtree","POST",JSON.stringify({begin:e||"",end:t||""}),(function(e){Object(a.u)(e)&&n({type:c.c,receivedData:e.data.tree})}))}},f=function(e,t,n){return function(r){o.a.toast.loading(d.p,0),Object(i.g)("getreportacdetailtree","POST",JSON.stringify({begin:e||"",end:t||""}),(function(i){Object(a.u)(i)&&(r({type:c.c,receivedData:i.data.tree}),r(v({issuedate:e,endissuedate:t,acId:n,assId:"",assCategory:""})),o.a.toast.hide())}))}},v=function(e){return function(t){var n=e.issuedate,r=e.endissuedate,s=e.acId,u=e.assCategory,l=e.assId;o.a.toast.loading(d.p,0),Object(i.g)("getreportacdetail","POST",JSON.stringify({begin:n||"",end:r||"",acId:s,assCategory:u||"",assId:l||""}),(function(n){Object(a.u)(n)&&(o.a.toast.hide(),t({type:c.d,receivedData:n.data.detail,param:e}),n.data.detail.needDownSize&&o.a.Alert("\u672c\u6b21\u67e5\u8be2\u6570\u636e\u91cf\u8f83\u5927\uff0c\u76ee\u524d\u4ec5\u8fd4\u56de\u524d7500\u6761\u3002\u82e5\u9700\u67e5\u8be2\u540e\u7eed\u6570\u636e\uff0c\u8bf7\u7f29\u5c0f\u8d26\u671f\u53ca\u79d1\u76ee\u8303\u56f4\u3002"))}))}},m=function(e,t,n,c){return function(l){var f=Object(a.q)(e);o.a.toast.loading(d.p,0),Object(i.g)("getvc","POST",JSON.stringify(Object(r.a)({},f,{vcindex:t})),(function(e){Object(a.u)(e)&&(o.a.toast.hide(),sessionStorage.setItem("lrpzHandleMode","modify"),l(Object(u.j)(e.data)),sessionStorage.setItem("router-from","mxb"),n.push("/lrpz"),l(s.e(c)),l(s.d(!0)))}))}},g=function(e){return{type:c.a,value:e}}},1321:function(e,t,n){},983:function(e,t,n){"use strict";n.r(t),n.d(t,"reducer",(function(){return _})),n.d(t,"view",(function(){return p}));n(32),n(55),n(98),n(115),n(61),n(34),n(31),n(56),n(29),n(82),n(76);var r,a,i=n(7),c=n(8),s=n(9),u=n(10),o=n(0),d=n.n(o),l=n(47),f=n(1),v=n(11),m=(n(48),n(24)),g=n(1154),b=Object(m.immutableRenderDecorator)(r=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.jv,n=(e.issuedate,e.dispatch),r=(e.direction,e.history),a=e.jvlist,i=t.get("vcDate").replace(/-/g,".");return d.a.createElement("div",{className:"mxb-jv",onClick:function(){sessionStorage.setItem("router-from","mxb"),n(g.e(t.get("vcDate").slice(0,7),t.get("vcindex"),r,a))}},d.a.createElement("div",{className:"mxb-jv-title"},d.a.createElement("span",{className:"mxb-jv-abstract"},"".concat(i,"-").concat(t.get("jvAbstract")))),d.a.createElement("div",{className:"mxb-jv-content"},d.a.createElement("span",{className:"mxb-vcindex"},"\u8bb0 ",t.get("vcindex")," \u53f7"),d.a.createElement("span",{className:"mxb-jvdirection"},t.get("creditAmount")?"\u8d37":"\u501f"),d.a.createElement(v.a,{className:"mxb-amount",showZero:!0},t.get("creditAmount")||t.get("debitAmount")),d.a.createElement(v.a,{className:"mxb-amount",showZero:!0},t.get("balanceAmount"))))}}]),n}(d.a.Component))||r,j=n(2),I=n(542),E=n(14),x=(n(1321),n(130)),p=(n(1056),Object(l.c)((function(e){return e}))(a=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){if(j.a.setTitle({title:"\u79d1\u76ee\u660e\u7ec6\u8868"}),"kmyeb"===sessionStorage.getItem("previousPage")&&sessionStorage.removeItem("previousPage"),"cxpz"===sessionStorage.getItem("prevPage")){sessionStorage.removeItem("prevPage");var e=this.props,t=e.dispatch,n=e.kmmxbState;t(g.d({issuedate:n.get("issuedate"),endissuedate:n.get("endissuedate"),acId:n.getIn(["views","currentAcId"]),assId:n.getIn(["views","currentAssId"]),assCategory:n.getIn(["views","currentAssCategory"])}))}}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.kmmxbState,r=e.allState,a=e.history,i=r.get("issues"),c=n.get("issuedate"),s=n.get("endissuedate"),u=i.findIndex((function(e){return e.get("value")===c})),o=i.slice(0,u),l=n.getIn(["views","currentAcId"]),m=n.getIn(["views","currentAssId"]),j=n.getIn(["views","currentAssCategory"]),p=n.get("ledger"),O=p.get("detailList"),N=[p.get("acId"),p.get("acFullName")].join("_"),_=(p.get("acId"),p.get("assId"),p.get("assName")),C=n.getIn(["views","chooseValue"]),A=n.get("mxbAclist").filter((function(e){return e.get("acId")==l.substr(0,4)})),h=Object(f.fromJS)([]),y=[];!function e(t){return t.forEach((function(t){h=h.push(t),y.push({key:t.get("acId")+" "+t.get("acName"),value:t.get("acId")}),t.get("childList")&&t.get("childList").size&&e(t.get("childList"))}))}(A);var S=h.find((function(e){return e.get("acId")==l})),T=S?S.get("assCategoryList"):Object(f.fromJS)([]),L=m?"".concat(j," ").concat(m):"\u5168\u90e8",D="",F=[{key:"\u5168\u90e8",value:"\u5168\u90e8"}];T.forEach((function(e){e.get("assList").forEach((function(t){F.push({key:e.get("assCategory")+"_"+t.get("assId")+"_"+t.get("assName"),value:e.get("assCategory")+E.B+t.get("assId")+E.B+t.get("assName")}),console.log(j,e.get("assCategory"),m,t.get("assId")),e.get("assCategory")===j&&t.get("assId")===m&&(D=t.get("disableTime"))}))}));var P="".concat(c),R=s||P;return t(x.i("mxb",(function(){return function(e){return e(x.a("pdfmxbexport",{begin:P,end:R,acId:l||"",assId:"".concat(m||""),assCategory:j||""}))}}),(function(){return function(e){return e(x.a("mxbexcelsubone",{begin:P,end:R,acId:l,assId:m||"",assCategory:j||"",assName:_||""}))}}),(function(){return function(e){return e(x.a("pdfExportLedger",{begin:P,end:R}))}}),(function(){return function(e){return e(x.a("mxbexcelsuball",{begin:P,end:R}))}}),"\u603b\u8d26",(function(){return function(e){return e(x.a("acdetailonevcexcel",{begin:P,end:R,acId:l,assId:m||"",assCategory:j||"",assName:_||""}))}}),(function(){return function(e){return e(x.a("pdfAcSub",{begin:P,end:R}))}}),(function(){return function(e){return e(x.a("pdfSecondAcSub",{begin:P,end:R}))}}),(function(){return function(e){return e(x.a("pdfExportLedger2",{begin:P,end:R}))}}),(function(){return function(e){return e(x.a("excelExportLedger",{begin:P,end:R}))}}))),d.a.createElement(v.h,{className:"mxb"},d.a.createElement(I.b,{start:c,end:s,issues:i,nextperiods:o,chooseValue:C,onBeginOk:function(e){t(g.c(e,e)),t(g.d({issuedate:e,endissuedate:e,acId:l,assId:m,assCategory:j}))},onEndOk:function(e,n){t(g.c(e,n)),t(g.d({issuedate:e,endissuedate:n,acId:l,assId:m,assCategory:j}))},changeChooseValue:function(e){return t(g.a(e))}}),d.a.createElement(v.r,{className:"mxb-title"},d.a.createElement("div",{className:"mxb-title-info-wrap mxb-title-ac-info"},d.a.createElement("span",null,"\u79d1\u76ee\u9009\u62e9:"),d.a.createElement(v.u,{className:"mxb-title-info-single-wrap",district:y,onOk:function(e){t(g.d({issuedate:c,endissuedate:s,acId:e.value,assId:m,assCategory:j}))}},d.a.createElement("span",{className:"mxb-title-info-text"},N),d.a.createElement(v.l,{type:"triangle"}))),d.a.createElement("div",{className:"mxb-title-info-wrap mxb-title-ass-info ".concat(D?"mxb-ass-disabled":"")},d.a.createElement("span",null,"\u8f85\u52a9\u6838\u7b97:"),T.size?d.a.createElement(v.u,{className:"mxb-title-info-single-wrap",district:F,onOk:function(e){if("\u5168\u90e8"===e.key)t(g.d({issuedate:c,endissuedate:s,acId:l,assId:"",assCategory:""}));else{var n=e.value.split(E.B);console.log("valueList",n),t(g.d({issuedate:c,endissuedate:s,acId:l,assId:n[1],assCategory:n[0]}))}}},d.a.createElement("span",null,L),d.a.createElement(v.l,{type:"arrow-down"})):d.a.createElement("span",null,"\xa0\u65e0"))),d.a.createElement(v.r,{className:"mxb-main-top"},d.a.createElement("span",{className:"mxb-main-amount-odd"},"\u671f\u521d\u4f59\u989d",d.a.createElement("span",{className:"mxb-main-amount-odd-direction"},"(".concat("debit"===p.get("direction")?"\u501f":"\u8d37","\u65b9)"))),d.a.createElement(v.a,{className:"mxb-main-amount"},O.size?O.getIn([0,"balanceAmount"]):0)),d.a.createElement(v.s,{flex:"1",uniqueKey:"mxb-scroll",savePosition:!0},d.a.createElement("ul",{className:"mxb-main-list"},O.map((function(e,n){return 0===n?null:d.a.createElement(b,{idx:n,key:n,jv:e,issuedate:c,dispatch:t,direction:p.get("direction"),history:a,jvlist:O})})),O.size?"":d.a.createElement("div",{className:"mxb-no-vc"},"\u6682\u65e0\u51ed\u8bc1"))),d.a.createElement(v.r,{className:"mxb-main-top"},d.a.createElement("span",{className:"mxb-main-amount-odd"},"\u671f\u672b\u4f59\u989d",d.a.createElement("span",{className:"mxb-main-amount-odd-direction"},"(".concat("debit"===p.get("direction")?"\u501f":"\u8d37","\u65b9)"))),d.a.createElement(v.a,{className:"mxb-main-amount"},p.get("allBalanceAmount"))))}}]),n}(d.a.Component))||a),O=n(1129),N=n(1074),_={kmmxbState:O.a,lrpzState:N.a}}}]);