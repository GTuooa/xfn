(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[35],{1202:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return u}));var n="INIT_ACCOUNT_MXB",c="GET_ACCOUNT_DETAIL_CATEGORY_DETAIL",o="GET_ACCOUNT_DETAIL_LIST",i="CHANGE_ACCOUNT_DETAIL_COMMON_STRING",r="CHANGE_ACCOUNT_MXB_CHOOSE_VALUE",u="CHANGE_ACCOUNT_MXB_ACCOUNT_TYPE"},1318:function(e,t,a){"use strict";a.d(t,"e",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return p})),a.d(t,"a",(function(){return g})),a.d(t,"c",(function(){return f})),a.d(t,"b",(function(){return m}));a(32),a(61),a(31),a(70),a(29),a(82),a(76);var n=a(1202),c=a(78),o=a(12),i=a(2),r=a(14),u=a(130),s=function(e,t,a,s){return function(l,p){i.a.toast.loading(r.p,0);var g=p().accountMxbState.getIn(["views","accountDetailType"]),f=t.get("uuid"),m="".concat(t.get("uuid")).concat(r.B).concat(t.get("name"));Object(c.a)("getAccountReportDetail","POST",JSON.stringify({begin:a,end:s,typeUuid:"",accountUuid:f,accountType:"",accountDetailType:g,needPeriod:"true",currentPage:1,pageSize:r.C}),(function(c){if(i.a.toast.hide(),Object(o.u)(c)){l(d(a,s,m));var r=c.data.periodDtoJson?l(u.d(c.data.periodDtoJson)):[];l({type:n.e,receivedData:c.data,period:c.data.periodDtoJson,issues:r,issuedate:a,endissuedate:s,accountUuid:f,categoryName:"\u5168\u90e8",accountName:t.get("name"),currentPage:1,pageCount:c.data.pages,needPeriod:"true"}),e.push("accountmxb")}}))}},d=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(u){var s=a?"\u5168\u90e8"===a?"\u5168\u90e8":a.split(r.B)[1]:"\u5168\u90e8",d=a?"\u5168\u90e8"===a?"":a.split(r.B)[0]:"";Object(c.a)("getAccountReportCategory","POST",JSON.stringify({begin:e,end:t,accountUuid:d,accountType:i}),(function(e){Object(o.u)(e)&&u({type:n.d,accountCategory:e.data.accountCategory,otherCategory:e.data.otherCategory,otherType:e.data.otherType,accountList:e.data.accountList,accountTypeList:e.data.accountTypeList,accountName:s,accountUuid:d})}))}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3?arguments[3]:void 0,d=(arguments.length>4&&arguments[4],arguments.length>5?arguments[5]:void 0),l=arguments.length>6?arguments[6]:void 0;return function(p,g){i.a.toast.loading(r.p,0),Object(c.a)("getAccountReportCategory","POST",JSON.stringify({begin:e,end:t,accountUuid:s,accountType:l}),(function(f){if(Object(o.u)(f)){var m="\u5168\u90e8",h="";f.data.accountList&&f.data.accountList.map((function(e){e.uuid===s&&(!0,m=e.name,h=e.uuid)})),p({type:n.d,accountCategory:f.data.accountCategory,otherCategory:f.data.otherCategory,otherType:f.data.otherType,accountList:f.data.accountList,accountTypeList:f.data.accountTypeList,accountName:m,accountUuid:h});var y=g().accountMxbState.getIn(["views","categoryUuid"]),v=(g().accountMxbState.getIn(["views","categoryName"]),""),b="\u5168\u90e8";if(y){var O={ACCOUNT_CATEGORY:f.data.accountCategory,OTHER_CATEGORY:f.data.otherCategory,OTHER_TYPE:f.data.otherType}[d],C=!1;!function e(t){return t.forEach((function(t){t.uuid===y&&(C=!0,b=t.name),t.childList&&t.childList.length&&e(t.childList)}))}(O.childList),C&&(v=y)}Object(c.a)("getAccountReportDetail","POST",JSON.stringify({begin:e,end:t,accountUuid:h,accountType:l,accountDetailType:d,typeUuid:v,currentPage:1,pageSize:r.C,needPeriod:a}),(function(a){if(Object(o.u)(a)){var c=a.data.periodDtoJson?p(u.d(a.data.periodDtoJson)):[];p({type:n.e,receivedData:a.data,period:a.data.periodDtoJson,issues:c,issuedate:e,endissuedate:t,currentPage:1,categoryName:b,categoryUuid:v,pageCount:a.data.pages,accountUuid:h})}i.a.toast.hide()}))}else i.a.toast.hide()}))}},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,g=arguments.length>7?arguments[7]:void 0,f=arguments.length>8?arguments[8]:void 0,m=arguments.length>9?arguments[9]:void 0;return function(h,y){!f&&i.a.toast.loading("\u52a0\u8f7d\u4e2d...",0);var v=y().accountMxbState.getIn(["views","accountType"]);Object(c.a)("getAccountReportDetail","POST",JSON.stringify({begin:e||"",end:t||"",needPeriod:a,accountUuid:s,accountType:v,accountDetailType:d,typeUuid:l,currentPage:p,pageSize:r.C}),(function(c){if(!f&&i.a.toast.hide(),Object(o.u)(c)){f&&m.setState({isLoading:!1});var r=c.data.periodDtoJson?h(u.d(c.data.periodDtoJson)):[];h({type:n.e,receivedData:c.data,period:c.data.periodDtoJson,issues:r,issuedate:e,endissuedate:t,currentPage:p,categorValue:"",pageCount:c.data.pages,accountUuid:s,needPeriod:a,shouldConcat:g})}}))}},g=function(e,t,a){return function(c){c({type:n.a,parent:e,position:t,value:a})}},f=function(e){return{type:n.c,value:e}},m=function(e){return{type:n.b,value:e}}},1319:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a(32),a(31),a(70);var n=a(4),c=a(220),o=a(1),i=a(1202),r=Object(o.fromJS)({views:{issuedate:"",endissuedate:"",accountUuid:"",accountName:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",accountDetailType:"ACCOUNT_CATEGORY",accountDetailName:"\u8d26\u6237\u6d41\u6c34",needPeriod:"",QcqmDirection:"",chooseValue:"ISSUE",accountType:""},category:{accountCategory:[{childList:[]}],otherCategory:[{childList:[]}],otherType:[{childList:[]}],accountList:[{childList:[]}],accountTypeList:[]},QcData:[],QmData:[],issues:[],detailsTemp:[]});function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,a=arguments.length>1?arguments[1]:void 0;return((e={},Object(n.a)(e,i.f,(function(){return r})),Object(n.a)(e,i.d,(function(){var e=[{uuid:a.accountCategory.uuid,name:a.accountCategory.name,childList:[]}];e.push.apply(e,Object(c.a)(a.accountCategory.childList));var n=[{key:"",label:"\u5168\u90e8",childList:[]}],i={cash:"\u73b0\u91d1",general:"\u4e00\u822c\u6237",basic:"\u57fa\u672c\u6237",Alipay:"\u652f\u4ed8\u5b9d",WeChat:"\u5fae\u4fe1",other:"\u5176\u5b83",spare:"\u5907\u7528\u91d1"};return a.accountTypeList&&a.accountTypeList.length&&a.accountTypeList.map((function(e){n.push({key:e,label:i[e],childList:[]})})),t.setIn(["category","accountCategory"],Object(o.fromJS)(e)).setIn(["category","accountList"],Object(o.fromJS)(a.accountList.length>0?a.accountList:[{childList:[]}])).setIn(["category","accountTypeList"],Object(o.fromJS)(n)).setIn(["views","accountUuid"],Object(o.fromJS)(a.accountUuid)).setIn(["views","accountName"],Object(o.fromJS)(a.accountName))})),Object(n.a)(e,i.e,(function(){if("true"===a.needPeriod){a.period;t=t.set("period",Object(o.fromJS)(a.period)).set("issues",Object(o.fromJS)(a.issues))}var e=[];a.shouldConcat?e=t.get("detailsTemp").toJS().concat(a.receivedData.detailList):e=a.receivedData.detailList;return a.categoryName&&(t=t.setIn(["views","categoryName"],a.categoryName).setIn(["views","categoryUuid"],a.categoryUuid)),a.accountName&&(t=t.setIn(["views","accountName"],a.accountName)),t.set("detailsTemp",Object(o.fromJS)(e)).set("QcData",Object(o.fromJS)(a.receivedData.beginDetail)).set("QmData",Object(o.fromJS)(a.receivedData.totalDetail)).set("currentPage",a.currentPage).set("pageCount",a.pageCount).setIn(["views","issuedate"],Object(o.fromJS)(a.issuedate)).setIn(["views","endissuedate"],Object(o.fromJS)(a.endissuedate)).setIn(["views","accountUuid"],Object(o.fromJS)(a.accountUuid))})),Object(n.a)(e,i.a,(function(){return t.setIn([a.parent,a.position],a.value)})),Object(n.a)(e,i.c,(function(){return t=t.setIn(["views","chooseValue"],a.value)})),Object(n.a)(e,i.b,(function(){return t.setIn(["views","accountType"],a.value)})),e)[a.type]||function(){return t})()}},1841:function(e,t,a){},955:function(e,t,a){"use strict";a.r(t),a.d(t,"reducer",(function(){return A})),a.d(t,"view",(function(){return j}));a(115),a(31),a(56);var n,c,o,i,r=a(7),u=a(8),s=a(9),d=a(10),l=a(0),p=a.n(l),g=a(47),f=a(1),m=(a(1841),a(2)),h=a(14),y=a(11),v=a(542),b=a(24),O=a(1318),C=Object(b.immutableRenderDecorator)(n=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.dispatch,n=e.className,c=e.issuedate,o=e.endissuedate,i=e.history,r=e.chooseValue;return p.a.createElement("div",{className:"ba "+n},p.a.createElement("div",null,p.a.createElement("span",{className:"name",onClick:function(e){sessionStorage.setItem("fromPage","zhyeb"),a(O.e(i,t,c,o)),a(O.c(r))}},p.a.createElement("span",{className:"name-name"},t.get("name"))),p.a.createElement("span",{className:"zhye-category-type"},{cash:"\u73b0\u91d1",general:"\u4e00\u822c\u6237",basic:"\u57fa\u672c\u6237",Alipay:"\u652f\u4ed8\u5b9d",WeChat:"\u5fae\u4fe1",other:"\u5176\u5b83",spare:"\u5907\u7528\u91d1"}[t.get("type")],p.a.createElement("span",{className:"account-type-icon"}))),p.a.createElement("div",{className:"ba-info"},p.a.createElement(y.a,{showZero:!0},t.get("openDebit")),p.a.createElement(y.a,{showZero:!0},t.get("currentDebit")),p.a.createElement(y.a,{showZero:!0},t.get("currentCredit")),p.a.createElement(y.a,{showZero:!0},t.get("closeDebit"))))}}]),a}(p.a.Component))||n,T=a(78),N=a(12),E=a(130),S=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(n,c){m.a.toast.loading(h.p,0),Object(T.a)("getAccountReportBalance","POST",JSON.stringify({begin:e||"",end:t||"",needPeriod:a}),(function(c){if(m.a.toast.hide(),Object(N.u)(c)){var o=e;if(a){var i=n(E.j(c));o=e||i}var r=c.data.periodDtoJson?n(E.d(c.data.periodDtoJson)):[];n({type:"GET_ACCOUNT_BALANCE_LIST",receivedData:c.data.accountBalanceList,period:c.data.periodDtoJson,issuedate:o,endissuedate:t,getPeriod:a,issues:r})}}))}},j=Object(g.c)((function(e){return e}))((i=o=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={showModal:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){m.a.setTitle({title:"\u8d26\u6237\u4f59\u989d\u8868"}),m.a.setIcon({showIcon:!1}),this.props.homeState.getIn(["permissionInfo","Report","exportExcel","permission"])||m.a.setRight({show:!1}),"home"===sessionStorage.getItem("prevPage")&&(sessionStorage.removeItem("prevPage"),this.props.dispatch({type:"INIT_ACCOUNT_YEB"}),this.props.dispatch(S("","","true")))}},{key:"render",value:function(){var e=this.props,t=(e.allState,e.dispatch),a=e.accountYebState,n=e.history,c=(this.state.showModal,a.get("balanceTemp")),o=a.get("issuedate"),i=a.get("endissuedate"),r=a.getIn(["views","chooseValue"]),u=a.get("issues"),s=u.findIndex((function(e){return e.get("value")===o})),d=u.slice(0,s),l=o,g=i||l;return t(E.i("config","",(function(){return function(e){return e(E.a("sendAccountExcelbalance",{begin:l,end:g}))}}))),p.a.createElement(y.h,{className:"account-yeb"},p.a.createElement(v.b,{start:o,issues:u,end:i,nextperiods:d,chooseValue:r,onBeginOk:function(e){t(S(e,""))},onEndOk:function(e,a){t(S(e,a))},changeChooseValue:function(e){return t(function(e){return{type:"CHANGE_ACCOUNT_YEB_CHOOSE_VALUE",value:e}}(e))}}),p.a.createElement(y.r,{className:"ba-title"},p.a.createElement("div",{className:"ba-title-item"},"\u671f\u521d\u4f59\u989d"),p.a.createElement("div",{className:"ba-title-item"},"\u672c\u671f\u6536\u6b3e"),p.a.createElement("div",{className:"ba-title-item"},"\u672c\u671f\u4ed8\u6b3e"),p.a.createElement("div",{className:"ba-title-item"},"\u671f\u672b\u4f59\u989d")),p.a.createElement(y.s,{flex:"1",uniqueKey:"accountyeb-scroll",savePosition:!0},p.a.createElement("div",{className:"ba-list"},c.map((function(e,a){return p.a.createElement("div",{key:a},p.a.createElement(C,{className:"balance-running-tabel-width",item:e,history:n,dispatch:t,issuedate:o,endissuedate:i,chooseValue:r}))})))))}}]),a}(p.a.Component),o.displayName="AccountYeb",c=i))||c,L=(a(61),a(76),a(4)),D=Object(f.fromJS)({views:{chooseValue:"ISSUE"},issues:[{value:"",key:""}],issuedate:"",endissuedate:"",balanceTemp:[]});var A={accountYebState:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,a=arguments.length>1?arguments[1]:void 0;return((e={},Object(L.a)(e,"INIT_ACCOUNT_YEB",(function(){return D})),Object(L.a)(e,"GET_ACCOUNT_BALANCE_LIST",(function(){if("true"===a.getPeriod){a.period;t=t.set("period",Object(f.fromJS)(a.period)).set("issues",Object(f.fromJS)(a.issues))}var e=[];return a.receivedData.forEach((function(t){return e.push(t.categoryUuid)})),t.set("balanceTemp",Object(f.fromJS)(a.receivedData)).set("issuedate",Object(f.fromJS)(a.issuedate)).set("endissuedate",Object(f.fromJS)(a.endissuedate))})),Object(L.a)(e,"CHANGE_ACCOUNT_YEB_CHOOSE_VALUE",(function(){return t=t.setIn(["views","chooseValue"],a.value)})),e)[a.type]||function(){return t})()},accountMxbState:a(1319).a}}}]);