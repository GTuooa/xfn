(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[84],{1041:function(e,t,n){"use strict";n.d(t,"f",(function(){return d})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"e",(function(){return g})),n.d(t,"i",(function(){return b})),n.d(t,"l",(function(){return m})),n.d(t,"m",(function(){return v})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return E})),n.d(t,"j",(function(){return h})),n.d(t,"n",(function(){return O})),n.d(t,"c",(function(){return y})),n.d(t,"k",(function(){return A})),n.d(t,"b",(function(){return C}));n(32),n(55),n(61),n(34),n(31),n(116),n(29),n(82),n(76);var a=n(51),i=n(12),r=n(17),c=n(130),u=n(1057),s=n(2),o=n(14),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){s.a.toast.loading(o.p,0),Object(r.g)("pagindvc","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(5,2):"",pageSize:20,currentPage:t+1,getPeriod:"true"}),(function(a){if(Object(i.u)(a)){s.a.toast.hide();var r=n(c.e(a)),o=e||r;a.data.jsonArray;n({type:u.a,receivedData:a,issuedate:o,currentPage:t})}}))}},l=function(e){return function(t){var n=e.substring(0,7);s.a.toast.loading(o.p,0),Object(r.g)("getvclist","POST",JSON.stringify(Object(i.q)(e)),(function(e){Object(i.u)(e)&&(s.a.toast.hide(),t({type:u.h,receivedData:e,issuedate:n}))}))}},f=function(e,t){return function(n){0!=t&&(s.a.toast.loading(o.p,0),Object(r.g)("sortvc","POST",JSON.stringify({year:e.substr(0,4),month:e.substr(5,2),sort:t}),(function(t){Object(i.u)(t,"show",800)&&n(b(e))})))}},g=function(e){return function(t,n){var a=e.get("vclist").filter((function(e){return e.get("selected")})).some((function(e){return e.get("enclosurecount")}))?"\u51ed\u8bc1\u4e0b\u5b58\u5728\u9644\u4ef6,\u9644\u4ef6\u4e5f\u5c06\u88ab\u5220\u9664":"\u786e\u5b9a\u5220\u9664\u5417";s.a.Confirm({message:a,title:"\u63d0\u793a",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(n){if(1===n.buttonIndex){var a=e.get("vclist"),c=e.get("vclist").filter((function(e){return e.get("selected")})).map((function(e){return e.get("vcindex")})),d=a.size===c.size;s.a.toast.loading(o.p,0),Object(r.g)("deletevc","POST",JSON.stringify({year:e.getIn(["vclist",0,"year"]),month:e.getIn(["vclist",0,"month"]),vcindexlist:c,action:"QUERY_VC-DELETE_VC-BATCH_DELETE"}),(function(n){if(Object(i.u)(n)){if(t({type:u.f,receivedData:n}),Object(r.g)("getperiod","GET","",(function(e){Object(i.u)(e)&&(s.a.toast.hide(),t({type:u.g,receivedData:e}))})),d){var a="".concat(e.getIn(["vclist",0,"year"]),"-").concat(e.getIn(["vclist",0,"month"]));t(b(a))}t(E())}}))}},onFail:function(e){return alert(e)}})}},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3?arguments[3]:void 0;return function(d,l){var f=Object(i.q)(e),g=e.substring(0,7),b=l().cxpzState,m=b.get("searchContentType"),v=b.get("condition");!n&&s.a.toast.loading(o.p,0),Object(r.g)("pagindvc","POST",JSON.stringify(Object(a.a)({},f,{pageSize:20,currentPage:t+1,searchContentType:m,condition:v})),(function(e){!n&&s.a.toast.hide(),Object(i.u)(e)&&(n&&c.setState({isLoading:!1}),d({type:u.a,receivedData:e,issuedate:g,currentPage:t}))}))}},m=function(e){return{type:u.l,idx:e}},v=function(){return{type:u.m}},p=function(e){return{type:u.c,idx:e}},E=function(){return{type:u.b}},h=function(e){return{type:u.j,voucher:e}},O=function(){return function(e,t){var n=t().cxpzState.get("issuedate");e({type:u.d,issuedate:n})}},y=function(e,t){return{type:u.e,dataType:e,value:t}},A=function(e){return function(t,n){var a=n().cxpzState.get("vclist"),c=e.split("-"),u=[];a.forEach((function(e){e.get("selected")&&!e.get("reviewedby")&&u.push(e.get("vcindex"))})),s.a.toast.loading(o.p,0),Object(r.g)("reviewvc","POST",JSON.stringify({year:c[0],month:c[1],vcindexlist:u,action:"QUERY_VC-AUDIT"}),(function(n){Object(i.u)(n)&&(s.a.toast.hide(),0==n.data.success&&s.a.Alert(n.data.failList.join("\u3001")),t(b(e)))}))}},C=function(e){return function(t,n){var a=n().cxpzState.get("vclist"),c=e.split("-"),u=[];a.forEach((function(e){e.get("selected")&&e.get("reviewedby")&&u.push(e.get("vcindex"))})),s.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(r.g)("backreviewvc","POST",JSON.stringify({year:c[0],month:c[1],vcindexlist:u,action:"QUERY_VC-CANCEL_AUDIT"}),(function(n){Object(i.u)(n)&&(s.a.toast.hide(),0==n.data.success&&s.a.Alert(n.data.failList.join("\u3001")),t(b(e)))}))}}},1053:function(e,t,n){"use strict";var a=n(39),i=n(171),r=[].reverse,c=[1,2];a({target:"Array",proto:!0,forced:String(c)===String(c.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),r.call(this)}})},1057:function(e,t,n){"use strict";n.d(t,"i",(function(){return a})),n.d(t,"h",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"m",(function(){return s})),n.d(t,"l",(function(){return o})),n.d(t,"k",(function(){return d})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"j",(function(){return g})),n.d(t,"g",(function(){return b})),n.d(t,"d",(function(){return m}));var a="INIT_CXPZ",i="GET_VC_LIST_FETCH",r="DELETE_VC_FETCH",c="CHANGE_ALL_VC_CHECKBOX_DISPLAY",u="CANCEL_CHANGE_VC_CHECKBOX_DISPALY",s="SELECT_VC_ALL",o="SELECT_VC",d="REVERSE_VC_LIST",l="AFTER_PAGING_VC",f="CXPZ_CHANGE_DATA",g="PUSH_VOUCHER_TO_LRPZ_REDUCER",b="GET_PERIOD_FETCH",m="CHANGE_FJGL_ISSUEDATE"},1095:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s}));var a="INIT_MXB",i="GET_MXB_ACLIST",r="GET_SUBSIDIARY_LEDGER_FETCH",c="REVERSE_LEDGER_JV_LIST",u="CHANGE_MXB_BEGIN_DATE",s="CHANGE_AC_MXB_CHOOSE_VALUE"},1129:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(1053);var a=n(4),i=n(1),r=n(1095),c=Object(i.fromJS)({views:{currentAcId:"",currentAssId:"",currentAssCategory:"",chooseValue:"ISSUE"},issuedate:"",endissuedate:"",currentAcid:"",currentAss:"",mxbAclist:[],ledger:{acId:"",acName:"",direction:"",assCategory:"",assId:"",assName:"",allDebitAmount:0,allCreditAmount:0,allBalanceAmount:0,detailList:[]}});function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(a.a)(e,r.e,(function(){return c})),Object(a.a)(e,r.c,(function(){return t.set("mxbAclist",Object(i.fromJS)(n.receivedData))})),Object(a.a)(e,r.d,(function(){return t.set("issuedate",n.param.issuedate).set("endissuedate",n.param.endissuedate).set("ledger",Object(i.fromJS)(n.receivedData)).setIn(["views","currentAcId"],n.param.acId).setIn(["views","currentAssId"],n.param.assId).setIn(["views","currentAssCategory"],n.param.assCategory)})),Object(a.a)(e,r.f,(function(){return t.updateIn(["ledger","jvlist"],(function(e){return e.reverse()}))})),Object(a.a)(e,r.b,(function(){return t=n.bool?t.set("endissuedate",n.begin):t.set("issuedate",n.begin)})),Object(a.a)(e,r.a,(function(){return t=t.setIn(["views","chooseValue"],n.value)})),e)[n.type]||function(){return t})()}},1142:function(e,t,n){},1154:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"a",(function(){return m}));var a=n(51),i=n(12),r=n(17),c=n(1095),u=n(552),s=n(1041),o=n(2),d=n(14),l=function(e,t){return function(n){Object(r.g)("getreportacdetailtree","POST",JSON.stringify({begin:e||"",end:t||""}),(function(e){Object(i.u)(e)&&n({type:c.c,receivedData:e.data.tree})}))}},f=function(e,t,n){return function(a){o.a.toast.loading(d.p,0),Object(r.g)("getreportacdetailtree","POST",JSON.stringify({begin:e||"",end:t||""}),(function(r){Object(i.u)(r)&&(a({type:c.c,receivedData:r.data.tree}),a(g({issuedate:e,endissuedate:t,acId:n,assId:"",assCategory:""})),o.a.toast.hide())}))}},g=function(e){return function(t){var n=e.issuedate,a=e.endissuedate,u=e.acId,s=e.assCategory,l=e.assId;o.a.toast.loading(d.p,0),Object(r.g)("getreportacdetail","POST",JSON.stringify({begin:n||"",end:a||"",acId:u,assCategory:s||"",assId:l||""}),(function(n){Object(i.u)(n)&&(o.a.toast.hide(),t({type:c.d,receivedData:n.data.detail,param:e}),n.data.detail.needDownSize&&o.a.Alert("\u672c\u6b21\u67e5\u8be2\u6570\u636e\u91cf\u8f83\u5927\uff0c\u76ee\u524d\u4ec5\u8fd4\u56de\u524d7500\u6761\u3002\u82e5\u9700\u67e5\u8be2\u540e\u7eed\u6570\u636e\uff0c\u8bf7\u7f29\u5c0f\u8d26\u671f\u53ca\u79d1\u76ee\u8303\u56f4\u3002"))}))}},b=function(e,t,n,c){return function(l){var f=Object(i.q)(e);o.a.toast.loading(d.p,0),Object(r.g)("getvc","POST",JSON.stringify(Object(a.a)({},f,{vcindex:t})),(function(e){Object(i.u)(e)&&(o.a.toast.hide(),sessionStorage.setItem("lrpzHandleMode","modify"),l(Object(s.j)(e.data)),sessionStorage.setItem("router-from","mxb"),n.push("/lrpz"),l(u.e(c)),l(u.d(!0)))}))}},m=function(e){return{type:c.a,value:e}}},948:function(e,t,n){"use strict";n.r(t),n.d(t,"reducer",(function(){return L})),n.d(t,"view",(function(){return I}));n(115),n(33),n(31),n(56),n(116);var a,i,r=n(7),c=n(8),u=n(9),s=n(10),o=n(0),d=n.n(o),l=n(47),f=n(1),g=n(2),b=n(11),m=n(542),v=(n(1142),n(24)),p=n(1154),E=n(12),h=n(17),O=n(130),y=n(14),A=function(e,t,n){return function(a){g.a.toast.loading(y.p,0),Object(h.g)("getreportacbalance","POST",JSON.stringify({begin:e||"",end:t||"",getPeriod:n}),(function(i){if(Object(E.u)(i))if(g.a.toast.hide(),n){var r=a(O.e(i)),c=e||r;a(C(i.data.balance,c,c))}else a(C(i.data.balance,e,t))}))}},C=function(e,t,n){return function(a){a({type:"GET_AC_BA_LIST_FETCH",receivedData:e,issuedate:t,endissuedate:n})}},S=function(e){return{type:"TOGGLE_LOWER_BA",acid:e}},_=Object(v.immutableRenderDecorator)(a=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.ba,n=(e.idx,e.style),a=e.hasSub,i=e.dispatch,r=e.className,c=e.issuedate,u=e.isExpanded,s=e.endissuedate,o=e.history,l=e.chooseValue,f=(t.get("acId").length-4)/200*10+"rem",g={background:{4:"#fff",6:"#D1C0A5",8:"#7E6B5A",10:"#59493f"}[t.get("acId").length],minWidth:f};return d.a.createElement("div",{className:"ba "+r,style:n},d.a.createElement("div",null,d.a.createElement("span",{className:"name",onClick:function(e){sessionStorage.setItem("previousPage","kmyeb"),i(p.b(c,s,t.get("acId"))),i(p.a(l)),o.push("/kmmxb")}},"0rem"==f?"":d.a.createElement("span",{className:"ba-flag",style:g}),d.a.createElement("span",{className:"name-name"},t.get("acId")+"_"+t.get("acFullName"))),d.a.createElement("span",{className:"btn",onClick:function(){return a&&i(S(t.get("acId")))}},d.a.createElement(b.l,{type:"arrow-down",style:{visibility:a?"visible":"hidden",transform:u?"rotate(180deg)":""}}))),d.a.createElement("div",{className:"ba-info",onClick:function(){return a&&i(S(t.get("acId")))}},d.a.createElement(b.a,{showZero:!0},t.get("beginCreditAmount")||t.get("beginDebitAmount")),d.a.createElement(b.a,{showZero:!0},t.get("happenDebitAmount")),d.a.createElement(b.a,{showZero:!0},t.get("happenCreditAmount")),d.a.createElement(b.a,{showZero:!0},t.get("endCreditAmount")||t.get("endDebitAmount"))))}}]),n}(d.a.Component))||a,I=Object(l.c)((function(e){return e}))(i=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e,t;g.a.setTitle({title:"\u79d1\u76ee\u4f59\u989d\u8868"}),g.a.setIcon({showIcon:!1}),"home"===sessionStorage.getItem("prevPage")&&(sessionStorage.removeItem("prevPage"),this.props.dispatch((function(n){n(A(e,t,"true"))})))}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.dispatch,a=e.allState,i=e.kmyebState,r=i.get("issuedate"),c=a.get("issues"),u=i.getIn(["views","chooseValue"]),s=i.get("endissuedate"),o=c.findIndex((function(e){return e.get("value")===r})),l=c.slice(0,o),f=i.get("balist").get("detailList"),g=i.get("showedLowerAcIdList");return n(O.i("kmyeb",(function(){return function(e){return e(O.a("pdfkmyeexport",{begin:r||"",end:s||""}))}}),(function(){return function(e){return e(O.a("kmyebexcelsend",{begin:r||"",end:s||""}))}}),(function(){return function(e){return e(O.a("pdfVcAll",{begin:r||"",end:s||""}))}}))),d.a.createElement(b.h,{className:"kmyeb"},d.a.createElement(m.b,{start:r,end:s,issues:c,nextperiods:l,chooseValue:u,onBeginOk:function(e){n(A(e,e))},onEndOk:function(e,t){n(A(e,t))},changeChooseValue:function(e){return n(function(e){return{type:"CHANGE_AC_YEB_CHOOSE_VALUE",value:e}}(e))}}),d.a.createElement(b.r,{className:"ba-title"},d.a.createElement("div",{className:"ba-title-item"},"\u671f\u521d\u4f59\u989d"),d.a.createElement("div",{className:"ba-title-item"},"\u672c\u671f\u501f\u65b9"),d.a.createElement("div",{className:"ba-title-item"},"\u672c\u671f\u8d37\u65b9"),d.a.createElement("div",{className:"ba-title-item"},"\u671f\u672b\u4f59\u989d")),d.a.createElement(b.s,{flex:"1",uniqueKey:"kmyeb-scroll",savePosition:!0},d.a.createElement("div",{className:"ba-list"},function e(a){return a.map((function(a,i){var c=a.get("acId"),o=c.length>4?"#FEF3E3":"#fff",l=g.some((function(e){return c===e}));return a.get("childList")&&a.get("childList").size?d.a.createElement("div",{key:i},d.a.createElement(_,{key:c,className:c.length>4?"upacid":"",style:{backgroundColor:o},ba:a,hasSub:!0,isExpanded:l,dispatch:n,issuedate:r,endissuedate:s,history:t,chooseValue:u}),g.indexOf(c)>-1?e(a.get("childList")):null):d.a.createElement(_,{key:c,className:c.length>4?"upacid":"",style:{backgroundColor:o},ba:a,hasSub:!1,dispatch:n,issuedate:r,endissuedate:s,history:t,chooseValue:u})}))}(f))))}}]),n}(d.a.Component))||i,j=(n(55),n(4)),T=Object(f.fromJS)({views:{chooseValue:"ISSUE"},issuedate:"",showedLowerAcIdList:[],balist:{allBeginDebitAmount:0,allBeginCreditAmount:0,allHappenDebitAmount:0,allHappenCreditAmount:0,allYearDebitAmount:0,allYearCreditAmount:0,allEndDebitAmount:0,allEndCreditAmount:0,detailList:[]}});var L={kmyebState:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(j.a)(e,"INIT_KMYEB",(function(){return T})),Object(j.a)(e,"TOGGLE_LOWER_BA",(function(){return t.get("showedLowerAcIdList").indexOf(n.acid)>-1?t.update("showedLowerAcIdList",(function(e){return e.map((function(e){return e.indexOf(n.acid)>-1?"":e})).filter((function(e){return!!e}))})):t.update("showedLowerAcIdList",(function(e){return e.push(n.acid)}))})),Object(j.a)(e,"GET_AC_BA_LIST_FETCH",(function(){return t.set("issuedate",n.issuedate).set("endissuedate",n.endissuedate).set("balist",Object(f.fromJS)(n.receivedData))})),Object(j.a)(e,"CHANGE_AC_YEB_CHOOSE_VALUE",(function(){return t=t.setIn(["views","chooseValue"],n.value)})),e)[n.type]||function(){return t})()},kmmxbState:n(1129).a}}}]);