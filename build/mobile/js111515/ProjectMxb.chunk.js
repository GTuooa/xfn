(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[96],{1038:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));n(115),n(219),n(56);var a=n(4),i=n(51),c=n(1),r=n(78),o=n(14),l=n(12),s=n(2),u=Object(c.fromJS)({views:{fromPage:"",uuidList:[]},currentItem:{},jrOri:{},category:{},processInfo:null});function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(a.a)(e,g.GET_RUNNING_PREVIEW_BUSINESS_FETCH,(function(){return t=t.set("jrOri",Object(c.fromJS)(n.receivedData.jrOri)).set("category",Object(c.fromJS)(n.receivedData.category)).set("processInfo",n.receivedData.processInfo?Object(c.fromJS)(n.receivedData.processInfo):null).set("currentItem",n.currentItem).setIn(["views","fromPage"],n.fromPage).setIn(["views","uuidList"],n.uuidList)})),Object(a.a)(e,g.GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH,(function(){return t=t.set("jrOri",Object(c.fromJS)(n.receivedData.jrOri)).set("category",Object(c.fromJS)(n.receivedData.category)).set("processInfo",n.receivedData.processInfo?Object(c.fromJS)(n.receivedData.processInfo):null).set("lsItemData",Object(c.fromJS)(Object(i.a)({},n.receivedData.category,{},n.receivedData.jrOri)))})),Object(a.a)(e,g.PREVIEW_RUNNING_DATA,(function(){return t=t.setIn(["views","uuidList"],Object(c.fromJS)(n.data))})),e)[n.type]||function(){return t})()}var m={getRunningPreviewBusinessFetch:function(e,t,n,a,i){return function(c){e&&(s.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(r.a)("getRunningPreview","GET","oriUuid=".concat(e),(function(e){s.a.toast.hide(),Object(l.u)(e)&&(c({type:g.GET_RUNNING_PREVIEW_BUSINESS_FETCH,receivedData:e.data,currentItem:t,uuidList:n,fromPage:a}),i.push("/runningpreview"))})))}},getPreviewNextRunningBusinessFetch:function(e,t){return function(t){e&&(s.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(r.a)("getRunningPreview","GET","oriUuid=".concat(e),(function(e){s.a.toast.hide(),Object(l.u)(e)&&t({type:g.GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH,receivedData:e.data})})))}},insertRunningBusinessVc:function(e,t,n){return function(a,i){s.a.toast.loading(o.p,0),Object(r.a)("insertRunningBusinessVc","POST",JSON.stringify({uuidList:[e],vcindexlist:[n],year:t.slice(0,4),month:t.slice(5,7),action:"QUERY_JR-AUDIT"}),(function(t){if(s.a.toast.hide(),Object(l.u)(t)){if(t.data.result.length){var n=t.data.result.reduce((function(e,t){return e+","+t}));return void s.a.Alert(n)}a(m.getPreviewNextRunningBusinessFetch(e))}}))}},deleteRunningBusinessVc:function(e,t,n,a){return function(i,c){s.a.toast.loading(o.p,0),Object(r.a)("deletevc","POST",JSON.stringify({year:e,month:t,vcindexlist:n,action:"QUERY_JR-CANCEL_AUDIT"}),(function(e){s.a.toast.hide(),Object(l.u)(e)&&i(m.getPreviewNextRunningBusinessFetch(a))}))}},deleteRunning:function(e,t,n){return function(a){s.a.Confirm({message:"\u786e\u5b9a\u5220\u9664\u5417",title:"\u63d0\u793a",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(i){if(1===i.buttonIndex){var c=t.findIndex((function(t){return t.get("oriUuid")===e})),u=c+1;s.a.toast.loading(o.p,0),Object(r.a)("deleteRunningbusiness","POST",JSON.stringify({deleteList:[e]}),(function(e){if(Object(l.u)(e)){if(e.data.errorList.length){var i=e.data.errorList.reduce((function(e,t){return e+","+t}));s.a.Alert(i)}if(0==e.data.errorList.length){var r=t.delete(c);a({type:g.PREVIEW_RUNNING_DATA,data:r}),u<t.size?a(m.getPreviewNextRunningBusinessFetch(t.getIn([u,"oriUuid"]))):n.goBack()}}}))}},onFail:function(e){return alert(e)}})}}},g={GET_RUNNING_PREVIEW_BUSINESS_FETCH:"GET_RUNNING_PREVIEW_BUSINESS_FETCH",GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH:"GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH",PREVIEW_RUNNING_DATA:"PREVIEW_RUNNING_DATA"}},1077:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(7),i=n(8),c=n(9),r=n(10),o=n(0),l=n.n(o),s=n(12),u=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=(e.style,e.decimalPlaces),a=e.direction,i=e.isTitle,c=null==this.props.children?"":Number(this.props.children),r=n||0===n?Number(n):2,o=""===c?"":0===Number(Object(s.n)(c,r,""))?Object(s.n)(0,r,""):Object(s.n)(c,r,""),u=Math.abs(c)>=1e7;return l.a.createElement("span",{className:t,style:{color:"debit"===a?"#4166b8":"#ff8348",fontSize:u?i?".11rem":".1rem":""}},o)}}]),n}(o.Component)},1854:function(e,t,n){},971:function(e,t,n){"use strict";n.r(t),n.d(t,"reducer",(function(){return C})),n.d(t,"view",(function(){return R}));n(32),n(115),n(31),n(56),n(70),n(29),n(82);var a,i,c,r,o,l=n(7),s=n(8),u=n(9),d=n(10),m=n(0),g=n.n(m),b=n(47),E=n(1),f=(n(1854),n(2)),p=n(14),N=n(11),v=n(542),h=n(26),I=n(1077),j=n(24),y=(n(1082),n(1038)),_=Object(j.immutableRenderDecorator)(a=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.style,a=e.dispatch,i=e.className,c=e.history,r=e.detailsTemp,o=e.chooseDirection,l=t.get("incomeAmount")?"debit":"credit",s=t.get("realIncomeAmount")?"debit":"credit",u="debit"===o||"double_debit"===o?"debit":"credit",d="double_debit"==o||"debit"==o?"debit"==t.get("direction")?t.get("balance"):-t.get("balance"):"credit"==t.get("direction")?t.get("balance"):-t.get("balance");return g.a.createElement("div",{className:"ba "+i,style:n},g.a.createElement("div",null,g.a.createElement("span",{className:"name",onClick:function(e){a(y.b.getRunningPreviewBusinessFetch(t.get("oriUuid"),t,r,"mxb",c))}},g.a.createElement("span",{className:"name-name"},"".concat(t.get("jrDate"),"_").concat(t.get("jrAbstract"))))),g.a.createElement("div",{className:"ba-info"},g.a.createElement("span",{className:"ba-type-name"},"".concat(t.get("jrIndex"),"\u53f7")),g.a.createElement(I.a,{direction:l},t.get("incomeAmount")?t.get("incomeAmount"):t.get("expenseAmount")?t.get("expenseAmount"):null),g.a.createElement(I.a,{direction:s},t.get("realIncomeAmount")?t.get("realIncomeAmount"):t.get("realExpenseAmount")?t.get("realExpenseAmount"):null),g.a.createElement(I.a,{direction:u},d)))}}]),n}(g.a.Component))||a,O=Object(j.immutableRenderDecorator)(i=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.style,a=e.dispatch,i=e.className,c=e.history,r=e.detailsTemp,o=e.chooseDirection,l="double_debit"==o||"debit"==o?"debit"==t.get("direction")?t.get("balance"):-t.get("balance"):"credit"==t.get("direction")?t.get("balance"):-t.get("balance");return g.a.createElement("div",{className:"ba "+i,style:n,onClick:function(e){a(y.b.getRunningPreviewBusinessFetch(t.get("oriUuid"),t,r,"mxb",c))}},g.a.createElement("div",null,g.a.createElement("span",{className:"name"},g.a.createElement("span",{className:"name-name"},"".concat(t.get("jrDate"),"_").concat(t.get("jrAbstract"))))),g.a.createElement("div",{className:"ba-info ba-info-type"},g.a.createElement("span",{className:"ba-type-name"},"".concat(t.get("jrIndex"),"\u53f7")),g.a.createElement("span",null,t.get("debitAmount")?"\u501f":"\u8d37"),g.a.createElement(N.a,{showZero:!0},t.get("debitAmount")?t.get("debitAmount"):t.get("creditAmount")),g.a.createElement(N.a,{showZero:!0},l)))}}]),n}(g.a.Component))||i,S=n(1320),T=n(130),R=Object(b.c)((function(e){return e}))((o=r=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={showModal:!1},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){f.a.setTitle({title:"\u9879\u76ee\u660e\u7ec6\u8868"}),f.a.setIcon({showIcon:!1})}},{key:"render",value:function(){var e=this.props,t=(e.allState,e.dispatch),n=e.projectMxbState,a=e.history,i=(this.state.showModal,n.getIn(["views","issuedate"])),c=n.getIn(["views","endissuedate"]),r=n.getIn(["views","tableName"]),o=n.get("issues"),l=o.findIndex((function(e){return e.get("value")===i})),s=o.slice(0,l),u=n.get("projectCategoryList"),d=n.get("runningCategoryList"),m=n.get("runningTypeList"),b=n.get("cardList"),f=n.getIn(["views","currentProjectItem"]),j=n.getIn(["views","currentRunningCategoryItem"]),y=n.getIn(["views","currentRunningTypeItem"]),R=n.getIn(["views","currentCardItem"]),C=n.getIn(["views","chooseDirection"]),U=n.getIn(["views","chooseValue"]),w=n.get("QcData"),P=n.get("QmData"),D=n.get("detailsTemp"),x=n.get("currentPage"),A=n.get("pages"),J=i,k=c||J,B="\u5168\u90e8"===f.get("name")?"":f.get("top")?f.get("uuid"):"",G="\u5168\u90e8"===f.get("name")||f.get("top")?"":f.get("uuid"),q=[];b&&b.map((function(e){q.push(e.get("uuid"))}));var L=R.get("uuid")?[R.get("uuid")]:q;return t("Income"===r?T.i("runningReport","",(function(){return function(e){return e(T.a("sendProjectIncomeExcelDetail",{begin:J,end:k,cardUuidList:L,direction:C,jrCategoryUuid:j.get("jrCategoryUuid"),categoryUuid:B,cardCategoryUuid:G}))}}),"",(function(){return function(e){return e(T.a("sendAllProjectIncomeExcelDetail",{begin:J,end:k,direction:C}))}})):T.i("runningReport","",(function(){return function(e){return e(T.a("sendProjectExcelbalance",{begin:J,end:k,cardUuidList:L,direction:C,jrTypeUuid:y.get("jrJvTypeUuid"),mergeName:y.get("mergeName")}))}}),"",(function(){return function(e){return e(T.a("sendAllProjectExcelDetail",{begin:J,end:k,direction:C}))}}))),g.a.createElement(N.h,{className:"project-mxb"},g.a.createElement(v.b,{start:i,end:c,issues:o,nextperiods:s,chooseValue:U,onBeginOk:function(e){t("Income"===r?S.f(e,"",R,C):S.l(e,"",R,C))},onEndOk:function(e,n){t("Income"===r?S.f(e,n,R,C):S.l(e,n,R,C))},changeChooseValue:function(e){return t(S.a(e))}}),g.a.createElement("div",{className:"project-mxb-select"},g.a.createElement("div",{className:"select-change-table",onClick:function(){t(S.c())}},g.a.createElement("span",null,"Income"===r?"\u6536\u652f":"\u7c7b\u578b"),g.a.createElement(h.a,{type:"type-change"})),g.a.createElement("div",{className:"select-project-category"},g.a.createElement(N.f,{type:"card",parentDisabled:!1,cardValue:[R.get("uuid")],value:f.get("value"),district:u.toJS(),cardList:b.toJS(),onChange:function(e){var n=e.key.split(p.B),a={uuid:n[0],name:e.label,top:"true"===n[1],value:e.key};t("Income"===r?S.h(Object(E.fromJS)(a)):S.m(Object(E.fromJS)(a)))},onOk:function(e){var n=e[0],a={uuid:n.uuid,name:n.name};t("Income"===r?S.d(Object(E.fromJS)(a)):S.k(Object(E.fromJS)(a)))}},g.a.createElement(N.r,null,g.a.createElement("span",null,"\u5168\u90e8"===R.get("name")?f.get("name"):R.get("name")),g.a.createElement(N.l,{type:"triangle"})))),g.a.createElement("div",{className:"select-running-category"},g.a.createElement("div",{className:"select-category-box"},"Income"===r?g.a.createElement(N.f,{district:d.toJS(),value:"".concat(j.get("jrCategoryUuid")).concat(p.B).concat(j.get("direction")),parentDisabled:!1,onChange:function(e){var n=e.key.split(p.B),a=n[1],i={jrCategoryUuid:n[0],jrCategoryName:e.label,direction:n[1]};t(S.e("Income",Object(E.fromJS)(i))),t(S.b(a))}},g.a.createElement(N.r,null,g.a.createElement("span",null,j.get("jrCategoryName")),g.a.createElement(N.l,{type:"triangle"}))):g.a.createElement(N.f,{district:m.toJS(),value:"".concat(y.get("jrJvTypeUuid")).concat(p.B).concat(y.get("direction")).concat(p.B).concat(y.get("mergeName")),parentDisabled:!1,onChange:function(e){var n=e.key.split(p.B),a=n[1],i={jrJvTypeUuid:n[0],typeName:e.label,direction:n[1],mergeName:n[2]};t(S.j("Type",Object(E.fromJS)(i))),t(S.b(a||"double_credit"))}},g.a.createElement(N.r,null,g.a.createElement("span",null,y.get("typeName")),g.a.createElement(N.l,{type:"triangle"})))))),"Income"===r?g.a.createElement(N.r,{className:"item-title-qc"},g.a.createElement("div",{className:"qc-title-item"},"\u671f\u521d",g.a.createElement("span",{className:"qc-title-direction"},"double_debit"==C||"double_credit"==C?g.a.createElement(N.x,{checked:"double_debit"!=C,checkedChildren:"\u652f\u51fa",unCheckedChildren:"\u6536\u5165",className:"qc-title-switch",onChange:function(){t(S.b("double_debit"==C?"double_credit":"double_debit"))}}):g.a.createElement("span",{className:"qc-title-switch-name"},"(","debit"===C?"\u6536\u5165":"\u652f\u51fa",")"))),g.a.createElement("div",{className:"qc-title-item"},g.a.createElement(I.a,{direction:"double_debit"===C?"debit":"double_credit"===C?"credit":C,isTitle:!0},w&&w.get("balance")))):g.a.createElement(N.r,{className:"item-title-qc"},g.a.createElement("div",{className:"qc-title-item"},"\u671f\u521d",g.a.createElement("span",{className:"qc-title-direction"},"double_debit"==C||"double_credit"==C?g.a.createElement(N.x,{checked:"double_debit"!=C,checkedChildren:"\u8d37",unCheckedChildren:"\u501f",className:"qc-title-switch",onChange:function(){t(S.b("double_debit"==C?"double_credit":"double_debit"))}}):g.a.createElement("span",{className:"qc-title-switch-name"},"(","debit"===C?"\u501f\u65b9":"\u8d37\u65b9",")"))),g.a.createElement("div",{className:"qc-title-item"},g.a.createElement(N.a,{isTitle:!0},w&&w.get("balance")))),g.a.createElement(N.s,{flex:"1",uniqueKey:"relativemxb-scroll",className:"scroll-item",savePosition:!0},g.a.createElement("div",{className:"flow-content"},"Income"===r?D&&D.map((function(e,n){return g.a.createElement("div",{key:n},g.a.createElement(_,{className:"balance-running-tabel-width",item:e,history:a,dispatch:t,issuedate:i,detailsTemp:D,chooseDirection:C}))})):D&&D.map((function(e,n){return g.a.createElement("div",{key:n},g.a.createElement(O,{className:"balance-running-tabel-width",item:e,history:a,dispatch:t,issuedate:i,detailsTemp:D,chooseDirection:C}))}))),g.a.createElement(v.c,{diff:100,classContent:"flow-content",callback:function(e){t(S.g(r,x+1,!0,!0,e))},isGetAll:x>=A,itemSize:D?D.size:0})),"Income"===r?g.a.createElement(N.r,{className:"item-title-qm"},g.a.createElement("div",{className:"qm-title-item"},"\u671f\u672b"),g.a.createElement("div",{className:"qm-title-item"},g.a.createElement("div",null,g.a.createElement(I.a,{direction:"debit",isTitle:!0},P.get("incomeAmount")),g.a.createElement(I.a,{direction:"debit",isTitle:!0},P.get("realIncomeAmount")),g.a.createElement(I.a,{direction:"debit",isTitle:!0},"debit"===C||"double_debit"===C?P.get("balance"):null)),g.a.createElement("div",null,g.a.createElement(I.a,{direction:"credit",isTitle:!0},P.get("expenseAmount")),g.a.createElement(I.a,{direction:"credit",isTitle:!0},P.get("realExpenseAmount")),g.a.createElement(I.a,{direction:"credit",isTitle:!0},"credit"===C||"double_credit"===C?P.get("balance"):null)))):g.a.createElement(N.r,{className:"item-title-qc"},g.a.createElement("div",{className:"qc-title-item"},"\u671f\u672b",g.a.createElement("span",{className:"qc-title-direction"},"(","debit"===C||"double_debit"===C?"\u501f\u65b9":"\u8d37\u65b9",")")),g.a.createElement("div",{className:"qc-title-item"},g.a.createElement(N.a,{showZero:!0,isTitle:!0},P.get("balance")))))}}]),n}(g.a.Component),r.displayName="ProjectMxb",c=o))||c,C={projectMxbState:n(1443).a,runningPreviewState:y.a}}}]);