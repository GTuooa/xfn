(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[116],{1048:function(e,t){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},1067:function(e,t,n){var a=n(84),r="["+n(1048)+"]",s=RegExp("^"+r+r+"*"),i=RegExp(r+r+"*$"),o=function(e){return function(t){var n=String(a(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(i,"")),n}};e.exports={start:o(1),end:o(2),trim:o(3)}},1068:function(e,t,n){var a=n(37),r=n(1048);e.exports=function(e){return a((function(){return!!r[e]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[e]()||r[e].name!==e}))}},1091:function(e,t,n){"use strict";var a=n(39),r=n(1067).trim;a({target:"String",proto:!0,forced:n(1068)("trim")},{trim:function(){return r(this)}})},1480:function(e,t,n){},943:function(e,t,n){"use strict";n.r(t),n.d(t,"reducer",(function(){return J})),n.d(t,"view",(function(){return S}));n(32),n(55),n(115),n(61),n(33),n(31),n(56),n(76);var a,r,s=n(7),i=n(8),o=n(9),c=n(10),u=n(0),l=n.n(u),d=n(47),f=n(1),m=n(11),b=n(542),g=n(12),p=(n(98),n(34),n(41),n(29),n(48),n(1091),n(4)),h=n(23),x=n(24),N=n(17),I=n(130),O=n(14),L=n(2),v=function(e,t){return function(n,a){var r=a().homeState.getIn(["data","userInfo"]).get("sobInfo"),s=r.get("newJr"),i=!!r&&(r.get("moduleInfo").indexOf("RUNNING")>-1&&s),o="".concat(e.substr(0,4)).concat(i?"-":"").concat(e.substr(5,2)),c=t?"".concat(t.substr(0,4)).concat(i?"-":"").concat(t.substr(5,2)):o;L.a.toast.loading(O.p,0),Object(N.g)(i?"getJrcachFlow":"getcachFlow","POST",JSON.stringify({begin:o,end:c}),(function(a){Object(g.u)(a)&&(L.a.toast.hide(),n(E(a.data,e,t)))}))}},E=function(e,t,n,a){return function(r){r({type:"GET_CACH_FLOW_FETCH",receivedData:e}),r({type:"CHANGE_XJLLB_ISSUDATE",issuedate:t,endissuedate:n,issues:a})}},j=function(e){return{type:"TOGGLE_CACH_FLOW_LINE_DISPLAY",blockIdx:e}},w=Object(x.immutableRenderDecorator)(a=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e,t,n=this.props,a=n.lr,r=n.dispatch,s=n.showedLineBlockIdxList,i=Object(h.a)(n,["lr","dispatch","showedLineBlockIdxList"]),o=a.get("lineIndex");t=23==o||24==o||25==o?"firstlrb":20==o||22==o?"firstlrblast":7==o||13==o||19==o?"second":21==o?"thirdlrb":"fourthlrb";var c=s.find((function(e){return e==a.get("lineIndex")})),u=a.get("lineName").trim().length,d="";return d=g.d.versions.android?o<23?1==o||3==o?u>15?a.get("lineName").trim().substr(0,15)+"...":a.get("lineName").trim():u>14?a.get("lineName").trim().substr(0,14)+"...":a.get("lineName").trim():a.get("lineName"):o<23?u>18?a.get("lineName").trim().substr(0,16)+"...":a.get("lineName").trim():a.get("lineName"),l.a.createElement("dd",Object.assign({},i,(e={className:"xjllb-line"},Object(p.a)(e,"className",["xjllb-line",t].join(" ")),Object(p.a)(e,"onClick",(function(){"firstlrb"===t&&r(j(o))})),e)),l.a.createElement("span",{className:"linename"},l.a.createElement("span",{className:"linenametext",style:{lineHeight:"firstlrb"===t?"":u>8?".14rem":"",marginTop:"firstlrb"===t?"":u>8?".08rem":""}},"firstlrb"===t||"firstlrblast"===t?d.replace("\u3001","."):d),"firstlrb"==t?l.a.createElement(m.l,{style:c?{transform:"rotate(180deg)",marginBottom:".1rem"}:"",type:"arrow-down"}):""),"firstlrb"===t?"":l.a.createElement("span",{className:"lineindex"},a.get("lineIndex")),"firstlrb"===t?"":7==o||13==o||19==o||20==o||21==o||22==o?l.a.createElement(m.a,{showZero:"true",className:"amount"},a.get("sumAmount")):l.a.createElement(m.a,{className:"amount"},a.get("sumAmount")),"firstlrb"===t?"":7==o||13==o||19==o||20==o||21==o||22==o?l.a.createElement(m.a,{showZero:"true",className:"amount-right"},a.get("amount")):l.a.createElement(m.a,{className:"amount-right"},a.get("amount")))}}]),n}(l.a.Component))||a,k=(n(1480),{23:[0,1,2,3,4,5,6,7],24:[8,9,10,11,12,13],25:[14,15,16,17,18,19],20:[20,21],22:[22]}),S=Object(d.c)((function(e){return e}))(r=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e;L.a.setTitle({title:"\u73b0\u91d1\u6d41\u91cf\u8868"}),L.a.setIcon({showIcon:!1}),this.props.dispatch((function(t,n){L.a.toast.loading(O.p,0);var a=n().homeState.getIn(["data","userInfo"]).get("sobInfo"),r=a.get("newJr"),s=!!a&&a.get("moduleInfo").indexOf("RUNNING")>-1&&r;Object(N.g)(s?"getJrcachFlow":"getcachFlow","POST",JSON.stringify({begin:"",end:"",getPeriod:"true",needPeriod:"true"}),(function(n){if(Object(g.u)(n)){L.a.toast.hide();var a=t(s?I.j(n):I.e(n)),r=e||a,i=n.data.periodDtoJson?t(I.d(n.data.periodDtoJson)):"";t(E(n.data.jsonArray,r,"",i))}}))}))}},{key:"render",value:function(){var e=this.props,t=e.xjllbState,n=e.allState,a=e.dispatch,r=e.homeState.getIn(["data","userInfo"]).get("sobInfo"),s=r.get("newJr"),i=!!r&&(r.get("moduleInfo").indexOf("RUNNING")>-1&&s),o=i?t.get("issues"):n.get("issues"),c=t.get("issuedate"),u=t.get("endissuedate"),d=o.findIndex((function(e){return e.get("value")===c})),f=c.substr(0,4),g=c.substr(5,2),p=n.getIn(["period","periodStartMonth"]),h=o.slice(0,d).filter((function(e){return Number(g)<Number(p)?0===e.get("value").indexOf(f)&&Number(e.get("key").substr(6,2))<Number(p):0===e.get("value").indexOf(f)||0===e.get("value").indexOf(f-1+2)&&Number(e.get("key").substr(6,2))<Number(p)})),x=t.get("cachFlowList"),N=t.get("showedLineBlockIdxList"),O=[7,13,19,20,21,22,23,24,25];N.forEach((function(e){O=O.concat(k[e])}));var L=x.map((function(e){return e.set("visible",O.indexOf(e.get("lineIndex"))>-1||e.get("amount")||e.get("sumAmount"))})),E="".concat(c.substr(0,4)).concat(c.substr(5,2)),S=u?"".concat(u.substr(0,4)).concat(u.substr(5,2)):E,_=c?"".concat(c.substr(0,4),"-").concat(c.substr(5,2)):"",J=u?"".concat(u.substr(0,4),"-").concat(u.substr(5,2)):_;return a(I.i("lrb",(function(){return function(e){return e(I.a(i?"pdfJrCashFlow":"pdfCashFlow",{begin:i?_:E,end:i?J:S}))}}),(function(){return function(e){return e(I.a(i?"excelJrcashFlow":"excelcashFlow",{begin:i?_:E,end:i?J:S}))}}))),l.a.createElement(m.h,null,l.a.createElement(b.f,{issuedate:c,source:o,callback:function(e){return a(v(e,u))},onOk:function(e){return a(v(e.value,u))},showSwitch:!0,endissuedate:u,nextperiods:h,onBeginOk:function(e){a(v(e.value,""))},onEndOk:function(e){a(v(c,e.value))},changeEndToBegin:function(){return a(v(c,""))}}),l.a.createElement(m.r,{className:"xjllb-line title",onClick:function(){return a(j())}},l.a.createElement("span",{className:"linename"},"\u9879\u76ee"),l.a.createElement("span",{className:"lineindex"},"\u884c\u6b21"),l.a.createElement("span",{className:"amount"},"\u672c\u5e74\u7d2f\u8ba1"),l.a.createElement("span",{className:"amount-right"},"\u672c\u671f\u91d1\u989d")),l.a.createElement(m.s,{flex:"1"},l.a.createElement("dl",{className:"xjllb-line-list"},L.map((function(e,t){return l.a.createElement(w,{lr:e,dispatch:a,showedLineBlockIdxList:N,visible:e.get("visible"),style:{display:e.get("visible")?"":"none"}})})))))}}]),n}(l.a.Component))||r,_=Object(f.fromJS)({issuedate:"",endissuedate:"",showedLineBlockIdxList:[],cachFlowList:[{lineIndex:"",lineName:"",amount:"",sumAmount:""}],issues:[]});var J={xjllbState:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(p.a)(e,"INIT_XJLLB",(function(){return _})),Object(p.a)(e,"GET_CACH_FLOW_FETCH",(function(){return t.set("cachFlowList",Object(f.fromJS)(n.receivedData))})),Object(p.a)(e,"CHANGE_XJLLB_ISSUDATE",(function(){return n.issues&&(t=t.set("issues",Object(f.fromJS)(n.issues))),t.set("issuedate",n.issuedate).set("endissuedate",n.endissuedate)})),Object(p.a)(e,"TOGGLE_CACH_FLOW_LINE_DISPLAY",(function(){var e=t.get("showedLineBlockIdxList");return n.blockIdx?e.indexOf(n.blockIdx)>-1?t.update("showedLineBlockIdxList",(function(e){return e.map((function(e){return e===n.blockIdx?-1:e})).filter((function(e){return-1!==e}))})):t.update("showedLineBlockIdxList",(function(e){return e.push(n.blockIdx)})):t.update("showedLineBlockIdxList",(function(e){return e.size?e.clear():_.get("showedLineBlockIdxList")}))})),Object(p.a)(e,"CHANGE_XJLLB_BEGIN_DATE",(function(){return t=n.bool?t.set("endissuedate",n.begin):t.set("issuedate",n.begin)})),e)[n.type]||function(){return t})()}}}}]);