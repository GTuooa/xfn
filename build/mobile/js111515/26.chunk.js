(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[26],{1439:function(e,t,i){"use strict";i.d(t,"i",(function(){return s})),i.d(t,"g",(function(){return g})),i.d(t,"a",(function(){return l})),i.d(t,"e",(function(){return v})),i.d(t,"f",(function(){return y})),i.d(t,"h",(function(){return m})),i.d(t,"b",(function(){return p})),i.d(t,"d",(function(){return b})),i.d(t,"c",(function(){return O}));i(32),i(31),i(70),i(29),i(82);var a=i(1440),n=i(78),r=i(12),c=i(2),o=i(1),u=i(14),d=i(130),s=function(e,t,i,s,g,l,v,y){return function(m,p){p().relativeMxbState;var b=g.get("cardUuid"),O=g.get("cardCode"),I=g.get("name"),j=v.runningCategoryUuid,D=v.runningCategoryName,T=v.dirction;y&&m({type:a.j,selectItem:Object(o.fromJS)({uuid:g.get("categoryUuid"),name:I,value:"".concat(g.get("categoryUuid")).concat(u.B).concat("true"===s?0:1),top:s})}),c.a.toast.loading(u.p,0),Object(n.a)("getRelativeCard","POST",JSON.stringify({begin:e,end:t,categoryUuid:"true"===s?i:"",cardCategoryUuid:"true"===s?"":i,currentPage:1,pageSize:"",needPeriod:"true"}),(function(o){if(Object(r.u)(o)){var g=o.data.periodDtoJson?m(d.d(o.data.periodDtoJson)):[];if(o.data.cardList.length){var l=!1;o.data.cardList.map((function(e){e.uuid===b&&(l=!0)}));var v=l?b:"",y=l?I:"\u5168\u90e8",f=j,p=D,h=T,S=!1;Object(n.a)("getRelativejrType","POST",JSON.stringify({begin:e,end:t,cardUuid:v,categoryUuid:"true"===s?i:"",cardCategoryUuid:"true"===s?"":i}),(function(d){if(Object(r.u)(d)){!function e(t){return t&&t.map((function(t){t.jrCategoryUuid===j&&(S=!0),t.childList&&t.childList.length&&e(t.childList)}))}(d.data.categoryList),S||(f="",p="\u5168\u90e8",h="double_credit"),m({type:a.i,receivedData:d.data,newRunningItem:{categoryOrTypeUuid:f,runningCategoryName:p,chooseDirection:h}}),Object(n.a)("getRelativeDetail","POST",JSON.stringify({begin:e,end:t,currentPage:1,pageSize:u.x,direction:h,jrAbstract:"",cardUuid:v,selectType:"category",jrTypeUuid:"",jrCategoryUuid:f,categoryUuid:"true"===s?i:"",cardCategoryUuid:"true"===s?"":i}),(function(i){c.a.toast.hide(),Object(r.u)(i)&&m({type:a.f,receivedData:o.data,reportData:i.data,issues:g,issuedate:e,endissuedate:t,needPeriod:"true",cardName:y,cardUuid:v,chooseDirection:h})}))}}))}else c.a.toast.hide(),m({type:a.f,receivedData:o.data,reportData:"",issues:g,needPeriod:"true",issuedate:e,endissuedate:t,cardName:O?"".concat(O," ").concat(I):I,cardUuid:b,chooseDirection:T})}else c.a.toast.hide()})),m(f(e,t)),l.push("relativemxb")}},g=function(e,t){return function(i,d){var s=d().relativeMxbState,g=s.getIn(["views","cardUuid"]),l=s.getIn(["views","cardName"]),v=(s.getIn(["views","chooseDirection"]),s.getIn(["views","currentRelativeItem"])),y=s.getIn(["views","categoryOrTypeUuid"]),m=s.getIn(["views","runningCategoryName"]),f=s.getIn(["views","chooseDirection"]);c.a.toast.loading(u.p,0),Object(n.a)("getRelativeCategory","POST",JSON.stringify({begin:e||"",end:t||""}),(function(d){if(Object(r.u)(d)){var s=v,p=!1;!function e(t){return t.map((function(t){t.uuid===v.get("uuid")&&(p=!0),t.childList&&t.childList.length&&e(t.childList)}))}(d.data.cardCategory),p||(s=Object(o.fromJS)({uuid:"",name:"\u635f\u76ca\u9879\u76ee",value:"\u635f\u76ca\u9879\u76ee",top:!1})),i({type:a.h,receivedData:d.data.cardCategory}),Object(n.a)("getRelativeCard","POST",JSON.stringify({begin:e,end:t,categoryUuid:s.get("top")?s.get("uuid"):"",cardCategoryUuid:s.get("top")?"":s.get("uuid"),currentPage:1,pageSize:"",needPeriod:e?"":"true"}),(function(o){if(Object(r.u)(o))if(o.data.cardList.length){var d=!1;o.data.cardList.map((function(e){e.uuid===g&&(d=!0)}));var v=d?g:o.data.cardList[0].uuid,p=d?l:"".concat(o.data.cardList[0].code," ").concat(o.data.cardList[0].name),b=y,O=m,I=f,j=!1;Object(n.a)("getRelativejrType","POST",JSON.stringify({begin:e,end:t,cardUuid:v,categoryUuid:s.get("top")?s.get("uuid"):"",cardCategoryUuid:s.get("top")?"":s.get("uuid")}),(function(d){if(Object(r.u)(d)){!function e(t){return t&&t.map((function(t){t.jrCategoryUuid===y&&(j=!0),t.childList&&t.childList.length&&e(t.childList)}))}(d.data.categoryList),j||(b="",O="\u5168\u90e8",I="double_credit"),i({type:a.i,receivedData:d.data,newRunningItem:{categoryOrTypeUuid:b,runningCategoryName:O,chooseDirection:I}}),Object(n.a)("getRelativeDetail","POST",JSON.stringify({begin:e,end:t,currentPage:1,pageSize:u.x,direction:I,jrAbstract:"",cardUuid:v,selectType:"category",jrTypeUuid:"",jrCategoryUuid:b,categoryUuid:s.get("top")?s.get("uuid"):"",cardCategoryUuid:s.get("top")?"":s.get("uuid")}),(function(n){c.a.toast.hide(),Object(r.u)(n)&&i({type:a.f,receivedData:o.data,reportData:n.data,issuedate:e,endissuedate:t,needPeriod:"",cardName:p,cardUuid:v,chooseDirection:I})}))}}))}else c.a.toast.hide(),i({type:a.f,receivedData:o.data,reportData:"",issuedate:e,endissuedate:t,needPeriod:"",cardName:"\u6682\u65e0\u5361\u7247",cardUuid:"",chooseDirection:f});else c.a.toast.hide()}))}}))}},l=function(e,t){return function(t,i){c.a.toast.loading(u.p,0);var d=e.key.split(u.B),s="0"===d[1],g=i().relativeMxbState,l=g.getIn(["views","issuedate"]),v=g.getIn(["views","endissuedate"]),y={uuid:d[0],name:e.label,value:e.key,top:s};t({type:a.j,selectItem:Object(o.fromJS)(y)}),Object(n.a)("getRelativeCard","POST",JSON.stringify({begin:l,end:v,categoryUuid:s?d[0]:"",cardCategoryUuid:s?"":d[0],currentPage:1,pageSize:"",needPeriod:l?"":"true"}),(function(e){if(Object(r.u)(e))if(e.data.cardList.length){c.a.toast.hide();var i=[{name:"\u5168\u90e8",uuid:""}];e.data.cardList&&e.data.cardList.map((function(e){i.push({name:"".concat(e.code," ").concat(e.name),uuid:e.uuid})})),t(p("views","cardList",Object(o.fromJS)(i)))}else c.a.toast.hide();else c.a.toast.hide()}))}},v=function(e){return function(t,i){var o=i().relativeMxbState,d=o.getIn(["views","issuedate"]),s=o.getIn(["views","endissuedate"]),g=o.getIn(["views","chooseDirection"]),l=o.getIn(["views","categoryOrTypeUuid"]),v=o.getIn(["views","runningCategoryName"]),y=o.getIn(["views","currentRelativeItem"]),m=l,f=v,p=g;Object(n.a)("getRelativejrType","POST",JSON.stringify({begin:d,end:s,cardUuid:e.uuid,categoryUuid:y.get("top")?y.get("uuid"):"",cardCategoryUuid:y.get("top")?"":y.get("uuid")}),(function(i){if(Object(r.u)(i)){!function e(t){return t&&t.map((function(t){t.jrCategoryUuid===l&&!0,t.childList&&t.childList.length&&e(t.childList)}))}(i.data.categoryList),t({type:a.i,receivedData:i.data,newRunningItem:{categoryOrTypeUuid:m,runningCategoryName:f,chooseDirection:p}}),Object(n.a)("getRelativeDetail","POST",JSON.stringify({begin:d,end:s,currentPage:1,pageSize:u.x,direction:p,jrAbstract:"",cardUuid:e.uuid,selectType:"category",jrTypeUuid:"",jrCategoryUuid:m,categoryUuid:y.get("top")?y.get("uuid"):"",cardCategoryUuid:y.get("top")?"":y.get("uuid")}),(function(i){c.a.toast.hide(),Object(r.u)(i)&&(t({type:a.g,reportData:i.data,issuedate:d,endissuedate:s,needPeriod:"",cardName:e.name,cardUuid:e.uuid,chooseDirection:p}),t({type:a.a}))}))}}))}},y=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"double_credit";return function(o,d){var s=d().relativeMxbState,g=s.getIn(["views","issuedate"]),l=s.getIn(["views","endissuedate"]),v=s.getIn(["views","cardUuid"]),y=s.getIn(["views","currentRelativeItem"]),m="type"===e?t:"",f="category"===e?t:"",p=g,b=l;c.a.toast.loading(u.p,0),Object(n.a)("getRelativeDetail","POST",JSON.stringify({begin:p,end:b,currentPage:1,pageSize:u.x,direction:i,jrAbstract:"",cardUuid:v,selectType:e,jrTypeUuid:m,jrCategoryUuid:f,categoryUuid:y.get("top")?y.get("uuid"):"",cardCategoryUuid:y.get("top")?"":y.get("uuid")}),(function(t){c.a.toast.hide(),Object(r.u)(t)&&o({type:a.k,receivedData:t.data,selectType:e,direction:i})}))}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return function(d,s){!i&&c.a.toast.loading("\u52a0\u8f7d\u4e2d...",0);var g=s().relativeMxbState,l=g.getIn(["views","issuedate"]),v=g.getIn(["views","endissuedate"]),y=g.getIn(["views","selectTypeValue"]),m=g.getIn(["views","cardUuid"]),f=g.getIn(["views","chooseDirection"]),p=g.getIn(["views","categoryOrTypeUuid"]),b=g.getIn(["views","currentRelativeItem"]);Object(n.a)("getRelativeDetail","POST",JSON.stringify({begin:l,end:v,currentPage:e,pageSize:u.x,direction:f,jrAbstract:"",cardUuid:m,selectType:y,jrTypeUuid:"type"===y?p:"",jrCategoryUuid:"type"===y?"":p,categoryUuid:b.get("top")?b.get("uuid"):"",cardCategoryUuid:b.get("top")?"":b.get("uuid")}),(function(n){!i&&c.a.toast.hide(),Object(r.u)(n)&&(i&&o.setState({isLoading:!1}),d({type:a.l,receivedData:n.data,currentPage:e,shouldConcat:t}))}))}},f=function(e,t){return function(i){Object(n.a)("getRelativeCategory","POST",JSON.stringify({begin:e||"",end:t||""}),(function(e){Object(r.u)(e)&&i({type:a.h,receivedData:e.data.cardCategory})}))}},p=function(e,t,i){return function(n){n({type:a.b,parent:e,position:t,value:i})}},b=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:a.d,direction:e,changeData:t}},O=function(e){return{type:a.c,value:e}}},1440:function(e,t,i){"use strict";i.d(t,"n",(function(){return a})),i.d(t,"f",(function(){return n})),i.d(t,"g",(function(){return r})),i.d(t,"i",(function(){return c})),i.d(t,"h",(function(){return o})),i.d(t,"b",(function(){return u})),i.d(t,"m",(function(){return d})),i.d(t,"k",(function(){return s})),i.d(t,"l",(function(){return g})),i.d(t,"d",(function(){return l})),i.d(t,"e",(function(){return v})),i.d(t,"a",(function(){return y})),i.d(t,"c",(function(){return m})),i.d(t,"j",(function(){return f}));var a="INIT_RELATIVE_MXB",n="GET_RELATIVE_BALANCE_LIST",r="GET_RELATIVE_BALANCE_LIST_FROM_CARD",c="GET_RELATIVE_MXB_CATEGORY_AND_TYPE",o="GET_RELATIVE_MXB_CATEGORY",u="CHANGE_RELATIVE_DETAIL_COMMON_STRING",d="INIT_CATEGORY_AND_TYPE",s="GET_RELATIVE_MXB_LIST_FROM_CATEGORY_OR_TYPE",g="GET_RELATIVE_MXB_LIST_FROM_PAGE",l="CHANGE_RELATIVE_MXB_REPORT_DIRECTION",v="CHANGE_SELECT_CONTACTS_CATEGORY",y="CHANGE_CHOOSE_CONTACTS_CATEGORY",m="CHANGE_RELATIVE_MXB_CHOOSE_VALUE",f="GET_RELATIVE_MXB_FROM_RELATIVE_RELATIVE_YEB"},1441:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));i(32),i(31),i(70);var a=i(4),n=i(1),r=i(1440),c=i(14),o=Object(n.fromJS)({views:{issuedate:"",endissuedate:"",categoryName:"\u5168\u90e8",currentRelativeItem:{uuid:"",name:"\u635f\u76ca\u9879\u76ee",value:"\u635f\u76ca\u9879\u76ee",top:!1},selectRelativeItem:{uuid:"",name:"\u5168\u90e8",value:"\u5168\u90e8",top:!1},selectTypeValue:"category",runningCategory:[{key:"",label:"",childList:[]}],runningCategoryName:"\u5168\u90e8",categoryOrTypeUuid:"",typeName:"\u5168\u90e8",contactsCategory:[{key:"".concat(c.B,"0"),label:"\u5168\u90e8",childList:[]}],cardList:[],cardName:"\u8bf7\u9009\u62e9\u7c7b\u522b",cardUuid:"",typeCategory:[],openDetail:{},QcqmDirection:"",currentPage:1,pageCount:1,chooseDirection:"double_credit",chooseValue:"ISSUE"},issues:[],QcData:[],QmData:{},detailsTemp:[]});function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,i=arguments.length>1?arguments[1]:void 0;return((e={},Object(a.a)(e,r.n,(function(){return o})),Object(a.a)(e,r.f,(function(){if(i.receivedData.cardList){var e=[{name:"\u5168\u90e8",uuid:""}];i.receivedData.cardList&&i.receivedData.cardList.map((function(t){e.push({name:"".concat(t.code," ").concat(t.name),uuid:t.uuid})})),t=t.setIn(["views","cardList"],Object(n.fromJS)(e))}if(i.receivedData.typeList){var a=[{key:"\u5168\u90e8",value:"".concat(c.B,"\u5168\u90e8").concat(c.B,"debit")}];i.receivedData.typeList&&i.receivedData.typeList.map((function(e){a.push({key:e.jrTypeName,value:"".concat(e.jrTypeUuid).concat(c.B).concat(e.jrTypeName).concat(c.B).concat(e.jrDirection)})})),t=t.setIn(["views","typeCategory"],Object(n.fromJS)(a))}"true"===i.needPeriod&&(t=t.set("issues",Object(n.fromJS)(i.issues)));var r=i.reportData,o={creditAmount:r.creditAmount,debitAmount:r.debitAmount,realCreditAmount:r.realCreditAmount,realDebitAmount:r.realDebitAmount,balance:r.balance,direction:r.direction};return t=t.setIn(["views","issuedate"],Object(n.fromJS)(i.issuedate)).setIn(["views","endissuedate"],Object(n.fromJS)(i.endissuedate)).setIn(["views","openDetail"],Object(n.fromJS)(i.openDetail)).set("detailsTemp",Object(n.fromJS)(i.reportData.detailList)).set("QcData",Object(n.fromJS)(i.reportData.openDetail)).set("QmData",Object(n.fromJS)(o)).setIn(["views","currentPage"],Object(n.fromJS)(i.reportData.currentPage)).setIn(["views","pageCount"],Object(n.fromJS)(i.reportData.pages)).setIn(["views","cardName"],Object(n.fromJS)(i.cardName)).setIn(["views","cardUuid"],Object(n.fromJS)(i.cardUuid)).setIn(["views","chooseDirection"],Object(n.fromJS)(i.chooseDirection))})),Object(a.a)(e,r.g,(function(){"true"===i.needPeriod&&(t=t.set("issues",Object(n.fromJS)(i.issues)));var e=i.reportData,a={creditAmount:e.creditAmount,debitAmount:e.debitAmount,realCreditAmount:e.realCreditAmount,realDebitAmount:e.realDebitAmount,balance:e.balance,direction:e.direction};return t=t.setIn(["views","issuedate"],Object(n.fromJS)(i.issuedate)).setIn(["views","endissuedate"],Object(n.fromJS)(i.endissuedate)).setIn(["views","openDetail"],Object(n.fromJS)(i.openDetail)).set("detailsTemp",Object(n.fromJS)(i.reportData.detailList)).set("QcData",Object(n.fromJS)(i.reportData.openDetail)).set("QmData",Object(n.fromJS)(a)).setIn(["views","currentPage"],Object(n.fromJS)(i.reportData.currentPage)).setIn(["views","pageCount"],Object(n.fromJS)(i.reportData.pages)).setIn(["views","cardName"],Object(n.fromJS)(i.cardName)).setIn(["views","cardUuid"],Object(n.fromJS)(i.cardUuid)).setIn(["views","chooseDirection"],Object(n.fromJS)(i.chooseDirection))})),Object(a.a)(e,r.i,(function(){var e=[{key:"\u5168\u90e8",value:"".concat(c.B,"\u5168\u90e8").concat(c.B,"debit")}];i.receivedData.typeList.map((function(t){e.push({key:t.jrTypeName,value:"".concat(t.jrTypeUuid).concat(c.B).concat(t.jrTypeName).concat(c.B).concat(t.jrDirection)})}));var a=[{key:"".concat(c.B,"double_credit"),label:"\u5168\u90e8",childList:[]}],r=function e(t){return t.map((function(t,i){return t.childList&&t.childList.length?{key:"".concat(t.jrCategoryUuid).concat(c.B).concat(t.direction),label:t.jrCategoryName,childList:e(t.childList)}:{key:"".concat(t.jrCategoryUuid).concat(c.B).concat(t.direction),label:t.jrCategoryName,childList:[]}}))}(i.receivedData.categoryList);return i.newRunningItem&&(t=t.setIn(["views","categoryOrTypeUuid"],i.newRunningItem.categoryOrTypeUuid).setIn(["views","runningCategoryName"],i.newRunningItem.runningCategoryName).setIn(["views","chooseDirection"],i.newRunningItem.chooseDirection)),t=t.setIn(["views","runningCategory"],Object(n.fromJS)(a.concat(r))).setIn(["views","typeCategory"],Object(n.fromJS)(e))})),Object(a.a)(e,r.h,(function(){var e=[{key:"".concat(c.B,"0"),label:"\u5168\u90e8",childList:[]}],a=function e(t){return t.map((function(t,i){var a=t.top?0:1;return t.childList&&t.childList.length?{key:"".concat(t.uuid).concat(c.B).concat(a),label:t.name,childList:e(t.childList)}:{key:"".concat(t.uuid).concat(c.B).concat(a),label:t.name,childList:[]}}))}(i.receivedData),r=e.concat(a);return t=t.setIn(["views","contactsCategory"],Object(n.fromJS)(r))})),Object(a.a)(e,r.m,(function(){return t=t.setIn(["views","runningCategoryName"],"\u5168\u90e8").setIn(["views","categoryOrTypeUuid"],"").setIn(["views","typeName"],"\u5168\u90e8").setIn(["views","categoryOrTypeUuid"],"").setIn(["views","QcqmDirection"],"")})),Object(a.a)(e,r.k,(function(){var e=i.receivedData,a={creditAmount:e.creditAmount,debitAmount:e.debitAmount,realCreditAmount:e.realCreditAmount,realDebitAmount:e.realDebitAmount,balance:e.balance,direction:e.direction};return t=t.set("detailsTemp",Object(n.fromJS)(i.receivedData.detailList)).setIn(["views","selectTypeValue"],i.selectType).setIn(["views","pageCount"],i.receivedData.pages).setIn(["views","chooseDirection"],i.direction).set("QcData",Object(n.fromJS)(i.receivedData.openDetail)).set("QmData",Object(n.fromJS)(a))})),Object(a.a)(e,r.l,(function(){var e=[];i.shouldConcat?e=t.get("detailsTemp").toJS().concat(i.receivedData.detailList):e=i.receivedData.detailList;var a=i.receivedData,r={creditAmount:a.creditAmount,debitAmount:a.debitAmount,realCreditAmount:a.realCreditAmount,realDebitAmount:a.realDebitAmount,balance:a.balance,direction:a.direction};return t=t.set("detailsTemp",Object(n.fromJS)(e)).setIn(["views","currentPage"],i.currentPage).setIn(["views","pageCount"],i.receivedData.pages).set("QcData",Object(n.fromJS)(i.receivedData.openDetail)).set("QmData",Object(n.fromJS)(r))})),Object(a.a)(e,r.b,(function(){return t=t.setIn([i.parent,i.position],i.value)})),Object(a.a)(e,r.d,(function(){return i.changeData&&(t.get("QcData")&&(t=t.updateIn(["QcData","balance"],(function(e){return-e}))),t.get("QmData")&&(t=t.updateIn(["QmData","balance"],(function(e){return-e})))),t.setIn(["views","chooseDirection"],i.direction)})),Object(a.a)(e,r.e,(function(){return t=t.setIn(["views","selectRelativeItem"],Object(n.fromJS)(i.selectRelativeItem))})),Object(a.a)(e,r.a,(function(){return t=t.setIn(["views","currentRelativeItem"],t.getIn(["views","selectRelativeItem"]))})),Object(a.a)(e,r.c,(function(){return t=t.setIn(["views","chooseValue"],i.value)})),Object(a.a)(e,r.j,(function(){return t=t.setIn(["views","selectRelativeItem"],i.selectItem).setIn(["views","currentRelativeItem"],i.selectItem)})),e)[i.type]||function(){return t})()}}}]);