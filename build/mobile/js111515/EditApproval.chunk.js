(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[60],{1046:function(e,t,n){"use strict";n.d(t,"J",(function(){return m})),n.d(t,"e",(function(){return g})),n.d(t,"A",(function(){return f})),n.d(t,"z",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"i",(function(){return b})),n.d(t,"j",(function(){return h})),n.d(t,"g",(function(){return O})),n.d(t,"a",(function(){return S})),n.d(t,"h",(function(){return L})),n.d(t,"M",(function(){return j})),n.d(t,"d",(function(){return C})),n.d(t,"L",(function(){return I})),n.d(t,"f",(function(){return T})),n.d(t,"n",(function(){return E})),n.d(t,"v",(function(){return N})),n.d(t,"o",(function(){return k})),n.d(t,"Q",(function(){return A})),n.d(t,"c",(function(){return J})),n.d(t,"r",(function(){return M})),n.d(t,"w",(function(){return D})),n.d(t,"H",(function(){return U})),n.d(t,"k",(function(){return w})),n.d(t,"l",(function(){return P})),n.d(t,"P",(function(){return x})),n.d(t,"B",(function(){return F})),n.d(t,"q",(function(){return H})),n.d(t,"t",(function(){return R})),n.d(t,"S",(function(){return B})),n.d(t,"C",(function(){return V})),n.d(t,"G",(function(){return z})),n.d(t,"p",(function(){return K})),n.d(t,"R",(function(){return G})),n.d(t,"m",(function(){return X})),n.d(t,"E",(function(){return Y})),n.d(t,"F",(function(){return W})),n.d(t,"I",(function(){return q})),n.d(t,"N",(function(){return Q})),n.d(t,"x",(function(){return Z})),n.d(t,"O",(function(){return $})),n.d(t,"y",(function(){return ee})),n.d(t,"K",(function(){return te})),n.d(t,"u",(function(){return ne})),n.d(t,"D",(function(){return ae})),n.d(t,"s",(function(){return ie}));n(32),n(55),n(61),n(62),n(31),n(219),n(70),n(77),n(1071),n(29),n(83),n(1062),n(82),n(76);var a=n(1092),i=n.n(a),r=(n(1079),n(1093)),c=n(12),o=n(1),s=n(1264),l=n(57),u=n(2),d=n(14),p=n(1040),m=(n(1055),function(){return function(e){u.a.toast.loading(d.p,0),Object(l.a)("getInventorySettingCardList","GET","listFrom=",(function(t){Object(c.u)(t)?Object(l.a)("getInventoryHighTypeList","GET","",(function(n){u.a.toast.hide(),Object(c.u)(n)&&e({type:s.H,title:n.data,cardList:t.data.resultList})})):u.a.toast.hide()}))}}),g=function(e){return function(t,n){!function(e,t,n){var a=t().inventoryConfState.getIn(["views","anotherName"]);n.get("name")===a?(u.a.toast.loading(d.p,0),Object(l.a)("getInventorySettingCardList","GET","listFrom=",(function(t){u.a.toast.hide(),Object(c.u)(t)&&e({type:s.d,name:n.get("name"),uuid:n.get("uuid"),cardList:t.data.resultList})}))):(u.a.toast.loading(d.p,0),Object(l.a)("getInventorySettingCardList","GET","listFrom=".concat(n.get("uuid")),(function(t){u.a.toast.hide(),Object(c.u)(t)&&Object(l.a)("getInventorySettingCardTypeList","GET","ctgyUuid=".concat(n.get("uuid")),(function(a){Object(c.u)(a)&&e({type:s.d,treelist:a.data.resultList,name:n.get("name"),uuid:n.get("uuid"),cardList:t.data.resultList})}))})))}(t,n,e)}},f=function(e){return function(t){t(X("inventoryHighTypeTemp",e.set("treeList",Object(o.fromJS)([])),!0)),u.a.toast.loading(d.p,0),Object(l.a)("getInventorySettingCardTypeList","GET","ctgyUuid=".concat(e.get("uuid")),(function(e){u.a.toast.hide(),Object(c.u)(e)&&t(X(["inventoryHighTypeTemp","treeList"],Object(o.fromJS)(e.data.resultList)))}))}},v=function(e,t,n){return function(a){u.a.toast.loading(d.p,0),Object(l.a)("getInventorySettingCardListByType","GET","ctgyUuid=".concat(e,"&&subordinateUuid=").concat(t),(function(e){u.a.toast.hide(),Object(c.u)(e)&&a({type:s.K,list:e.data.resultList,uuid:t,name:n})}))}},y=function(e,t){return function(n,a){u.a.toast.loading(d.p,0),Object(l.a)("getIUManageCardLimitAndAc","GET","",(function(i){u.a.toast.hide(),Object(c.u)(i)&&(Object(l.a)("getInitStockCard","GET","",(function(e){Object(c.u)(e)&&n(b("code",e.data.code))})),n({type:s.b,data:i.data,fromPage:t})),e(),a().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE")&&n(_())}))}},b=function(e,t){return function(n){n({type:s.i,name:e,value:t})}},h=function(e,t){return function(n){n({type:s.j,name:e,value:t})}},O=function(e,t){return function(n){t?Object(l.a)("getInventorySettingCardTypeList","GET","ctgyUuid=".concat(e.get("uuid")),(function(a){Object(c.u)(a)&&n({type:s.g,list:a.data.resultList,item:e,value:t})})):n({type:s.g,list:[],item:e,value:t})}},S=function(e){return{type:s.G,item:e}},L=function(e,t){return function(n){n({type:s.h,uuid:e,name:t})}},j=function(e,t,n){return function(e,a){var i=a().inventoryConfState,r=a().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE"),o=i.get("inventoryCardTemp").toJS(),m=i.getIn(["views","activeTabKeyUuid"]),g=i.getIn(["views","insertOrModify"]),f=i.getIn(["views","selectTypeId"]);if(0==o.isOpenedQuantity&&(o.unit={},o.openedQuantity=""),r){var v=o.openList,y=[];!function e(t){t.map((function(t){t.childList.length?e(t.childList):y.push(t)}))}(v),o.openList=y}var b=[],h=[];if(o.isOpenedQuantity&&""==o.unit.name&&h.push("\u8bf7\u9009\u62e9\u8ba1\u91cf\u5355\u4f4d"),o.isOpenedQuantity){var O=i.get("purchasePriceList").toJS(),S=i.get("salePriceList").toJS();O.forEach((function(e,t){Math.abs(e.defaultPrice)>0&&""==e.name&&h.push("\u9ed8\u8ba4\u91c7\u8d2d\u4ef7".concat(t+1,"\u8bf7\u9009\u62e9\u8ba1\u91cf\u5355\u4f4d")),b.push(e)})),S.forEach((function(e,t){Math.abs(e.defaultPrice)>0&&""==e.name&&h.push("\u9ed8\u8ba4\u91c7\u8d2d\u4ef7".concat(t+1,"\u8bf7\u9009\u62e9\u8ba1\u91cf\u5355\u4f4d")),b.push(e)}))}if(["OPEN","INVALID_DELETE","INVALID"].includes(o.assemblyState)&&(o.assemblyState="OPEN"),o.openList.length){var L=o.financialInfo,j=o.financialInfo.openAssist,C=o.financialInfo.openBatch,I=o.financialInfo.openShelfLife,T=(o.financialInfo.openSerial,L.assistClassificationList.map((function(e){return e.uuid})));o.isOpenedQuantity;o.openList.forEach((function(e){e.openedQuantity&&e.openedQuantity,e.openedAmount&&e.openedAmount;j&&(e.assistList=e.assistList.filter((function(e){return T.includes(e.classificationUuid)})),T.length!=e.assistList.length&&h.push("\u671f\u521d\u4e2d\u6709\u5c5e\u6027\u672a\u9009\u62e9\u5b8c\u6574")),C&&(e.batch||h.push("\u671f\u521d\u4e2d\u6709\u6279\u6b21\u672a\u9009\u62e9"),I&&!e.expirationDate&&h.push("\u671f\u521d\u4e2d\u6709\u6279\u6b21\u672a\u9009\u62e9\u622a\u6b62\u65e5\u671f"))}))}if(h.length)return u.a.toast.info(h[0]);o.unitPriceList=b;var E=function(){if("insert"===g){u.a.toast.loading(d.p,0);var i=a().inventoryConfState.getIn(["views","fromPage"]);Object(l.a)("addInventorySettingCard","POST",JSON.stringify({psiData:o,insertFrom:m,treeFrom:f,needAutoIncrementCode:"insert"!==t,action:{editRunning:"SAVE_JR-QUICK_MANAGER-SAVE_STOCK",payment:"SAVE_JR-QUICK_MANAGER-SAVE_STOCK",inventory:"MANAGER-STOCK_SETTING-CUD_CARD",searchApproval:"QUERY_PROCESS-QUICK_MANAGER-SAVE_STOCK",editApproval:"INITIATE_PROCESS-QUICK_MANAGER-SAVE_STOCK"}[i]}),(function(r){if(u.a.toast.hide(),Object(c.u)(r)){if(e({type:s.J,list:r.data.resultList,flag:t,autoIncrementCode:r.data.autoIncrementCode}),"inventory"!==i&&"editApproval"!==i&&e(p.g()),"editApproval"===i)a().editApprovalState.getIn(["modelInfo","callback"])(o);"insert"===t?u.a.toast.info("\u4fdd\u5b58\u6210\u529f",2,n()):u.a.toast.info("\u4fdd\u5b58\u6210\u529f"),e(z())}}))}else u.a.toast.loading(d.p,0),Object(l.a)("editInventorySettingCard","POST",JSON.stringify({psiData:o,modifyFrom:m,treeFrom:f}),(function(t){u.a.toast.hide(),Object(c.u)(t)&&(e({type:s.J,list:t.data.resultList}),u.a.toast.info("\u4fee\u6539\u6210\u529f",2,n()),e(z()))}))};Object(l.a)("adjustInventorySettingCardTitleSame","POST",JSON.stringify({psiData:{name:o.name,uuid:o.uuid}}),(function(e){Object(c.u)(e)&&(e.data.repeat?u.a.Confirm({message:"\u5361\u7247\u540d\u79f0\u4e0e[\u7f16\u7801\uff1a".concat(e.data.card.code,"]\u5361\u7247\u91cd\u590d\uff0c\u786e\u5b9a\u4fdd\u5b58\u5417\uff1f"),title:"\u540d\u79f0\u91cd\u590d",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(e){1==e.buttonIndex&&E()},onFail:function(e){}}):E())}))}},C=function(e,t){return function(n,a){var p=a().homeState.getIn(["data","userInfo","sobInfo","moduleInfo"]).includes("WAREHOUSE");function m(){return(m=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){Object(l.a)("getBatchList","POST",JSON.stringify({inventoryUuid:t,canUse:!0,needPage:!1}),(function(t){Object(c.u)(t)&&0===t.code&&(n(X(["inventoryCardTemp","financialInfo","batchList"],Object(o.fromJS)(t.data.batchList))),e())}))}));case 2:n(ee({inventoryUuid:t,needPage:!1}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.a.toast.loading(d.p,0),Object(l.a)("getInventorySettingOneCard","GET","uuid=".concat(e.get("uuid")),(function(e){u.a.toast.hide(),Object(c.u)(e)&&(n({type:s.c,data:e.data,isOpenedWarehouse:p}),t(),"INVALID_DELETE"==e.data.assemblyState&&u.a.toast.info("\u7ec4\u88c5\u5355\u7684\u90e8\u5206\u7269\u6599\u5df2\u88ab\u5220\u9664\uff0c\u5efa\u8bae\u91cd\u65b0\u8bbe\u7f6e\u5e76\u4fdd\u5b58\u8be5\u5b58\u8d27"),e.data.financialInfo&&e.data.financialInfo.openBatch&&function(e){m.apply(this,arguments)}(e.data.uuid))})),n(z()),p&&n(_())}},I=function(e,t){return function(e){e({type:s.m,used:t})}},T=function(e,t){return function(n){n({type:s.f,status:e,uuid:t})}},E=function(e,t){return function(n){n({type:s.n,status:e,uuid:t})}},N=function(e){return function(t,n){var a=n().inventoryConfState.getIn(["views","activeTabKeyUuid"]),o=n().inventoryConfState.getIn(["views","selectTypeId"]),p=n().inventoryConfState.getIn(["views","cardSelectList"]).toJS();function m(){return(m=Object(r.a)(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=!1,n.next=3,new Promise((function(e){Object(l.a)("checkBeforeDelete","POST",JSON.stringify({deleteList:p}),(function(t){if(Object(c.u)(t))if(t.data.inMaterialList.length){var n="".concat(t.data.inMaterialList.reduce((function(e,t){return"".concat(e).concat(e?";":"").concat(t.code," ").concat(t.name)}),"")," \u5c5e\u4e8e\u5176\u4ed6\u5b58\u8d27\u7684\u7ec4\u88c5\u7269\u6599\uff0c\u5220\u9664\u540e\u5c06\u5bfc\u81f4\u7ec4\u88c5\u5355\u5931\u6548\u3002\u7ee7\u7eed\u5220\u9664\u5417\uff1f");u.a.Confirm({title:"\u786e\u5b9a\u5220\u9664\u4e48",message:n,buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(t){1==t.buttonIndex&&(r=!0,e())},onFail:function(e){}})}else r=!0,e()}))}));case 3:r&&(u.a.toast.loading(d.p,0),Object(l.a)("deleteInventorySettingCardList","POST",JSON.stringify({deleteList:p,deleteFrom:a,treeFrom:o}),(function(n){u.a.toast.hide(),Object(c.u)(n)&&(t({type:s.v,list:n.data.resultList,treeList:n.data.typeList}),""===n.data.error?(u.a.toast.info("\u5220\u9664\u6210\u529f"),e()):u.a.toast.info(n.data.error))})));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}0!==p.length?function(){m.apply(this,arguments)}():u.a.toast.info("\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u5361\u7247")}},k=function(e,t){return function(n){n({type:s.o,name:e,value:t})}},A=function(){return function(e,t){var n=t().inventoryConfState.get("inventoryHighTypeTemp").toJS();u.a.toast.loading(d.p,0),Object(l.a)("insertInventoryHighType","POST",JSON.stringify({psiData:n}),(function(t){u.a.toast.hide(),Object(c.u)(t)&&0===t.code&&(e({type:s.x,title:t.data}),u.a.toast.info("\u4fdd\u5b58\u6210\u529f",2))}))}},J=function(){return{type:s.E}},M=function(e){return{type:s.k,clearType:e}},D=function(e){return function(t,n){var a=n().inventoryConfState,i=a.get("highTypeSelectList"),r=a.getIn(["views","activeTabKeyUuid"]);0!==i.size?(u.a.toast.loading(d.p,0),Object(l.a)("deleteInventorySettingHighTypeList","POST",JSON.stringify({deleteList:i}),(function(n){(u.a.toast.hide(),Object(c.u)(n))&&(0===n.code&&(t({type:s.w,title:n.data.resultList}),u.a.toast.info("\u5220\u9664\u6210\u529f"),e(),i.map((function(e){return e.get("uuid")})).includes(r)&&t(g(Object(o.fromJS)({uuid:"",name:"\u5168\u90e8"})))))}))):u.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u5220\u9664\u7684\u7c7b\u522b")}},U=function(e,t){return function(n){n({type:s.D,uuid:e,name:t})}},w=function(e,t){return function(n){n({type:s.l,name:e,value:t})}},P=function(e,t){return{type:s.L,parentName:t,parentUuid:e}},x=function(e){return function(t,n){var a=n().inventoryConfState.get("inventoryTypeTemp").toJS();a.ctgyUuid=n().inventoryConfState.getIn(["inventoryHighTypeTemp","uuid"]);var i=function(){u.a.toast.loading(d.p,0),Object(l.a)("addInventorySettingCardType","POST",JSON.stringify({psiData:a}),(function(n){u.a.toast.hide(),Object(c.u)(n)&&(t(X(["inventoryHighTypeTemp","treeList"],Object(o.fromJS)(n.data.resultList))),u.a.toast.info("\u4fdd\u5b58\u6210\u529f",2,e()))}))};Object(l.a)("adjustInventorySettingTypeTitleSame","POST",JSON.stringify({psiData:{parentUuid:a.parentUuid,name:a.name,uuid:a.uuid}}),(function(e){Object(c.u)(e)&&(e.data.repeat?u.a.Confirm({message:"\u786e\u5b9a\u4fdd\u5b58\u5417",title:"\u5361\u7247\u7c7b\u522b\u540d\u79f0\u4e0e\u5df2\u6709\u5361\u7247\u7c7b\u522b\u540d\u79f0\u91cd\u590d\uff0c\u786e\u5b9a\u4fdd\u5b58\u5417\uff1f",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(e){i()},onFail:function(e){}}):i())}))}},F=function(e){return function(t){u.a.toast.loading(d.p,0),Object(l.a)("getInventorySettingOneCardType","GET","uuid=".concat(e),(function(n){u.a.toast.hide(),Object(c.u)(n)&&t({type:s.y,uuid:e,data:n.data})}))}},H=function(e,t){return function(n,a){n({type:s.q,uuid:e,value:t})}},R=function(e,t){return function(n,a){var i=[];if(function e(t){return t.map((function(t){t.get("checked")&&i.push(t.get("uuid")),t.get("childList").size>0&&e(t.get("childList"))}))}(e),0!==i.size){var r=a().inventoryConfState.getIn(["inventoryHighTypeTemp","uuid"]);u.a.toast.loading(d.p,0),Object(l.a)("deleteInventorySettingOneCardType","POST",JSON.stringify({ctgyUuid:r,deleteList:i}),(function(e){u.a.toast.hide(),Object(c.u)(e)&&(n({type:s.u,data:e.data.resultList}),u.a.toast.info("\u5220\u9664\u6210\u529f"),t())}))}else u.a.toast.info("\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u7c7b\u522b")}},B=function(e,t){return function(n,a){var i=a().inventoryConfState.getIn(["inventoryHighTypeTemp","uuid"]);u.a.toast.loading(d.p,0),Object(l.a)("swapInventorySettingTypePosition","POST",JSON.stringify({psiData:{selectedSubordinateUuid:e,swappedSubordinateUuid:t,categoryUuid:i}}),(function(e){u.a.toast.hide(),Object(c.u)(e)&&n({type:s.p,list:e.data.resultList})}))}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n){Object(l.a)("getWarehouseTree","POST",JSON.stringify({uuidList:e,inventoryUuid:t}),(function(e){Object(c.u)(e)&&n({type:s.B,data:e.data.cardList})}))}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n){Object(l.a)("getOpenWarehouseTree","POST",JSON.stringify({warehouseUuidList:e,inventoryUuid:t}),(function(e){Object(c.u)(e)&&n({type:s.z,data:e.data.openList})}))}},z=function(){return function(e){Object(l.a)("getUnit","GET","",(function(t){Object(c.u)(t)&&e({type:s.A,data:t.data})}))}},K=function(e,t,n,a,i){return{type:s.s,dataType:e,uuidList:t,value:n,selfValue:a,idx:i}},G=function(e){return{type:s.I,uuid:e}},X=function(e,t,n){return{type:s.r,dataType:e,value:t,short:n}},Y=function(){return function(e,t){var n=t().homeState.getIn(["data","userInfo","sobInfo","sobId"]);Object(l.a)("getStockCategoryTree","POST",JSON.stringify({categoryList:[],sobId:n}),(function(t){var n=t.data.typeList;!function e(t){t.forEach((function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)}))}(n),n.unshift({key:"ALL",label:"\u5168\u90e8",top:!0,uuid:"",childList:[]}),e(X("stockCategoryTree",Object(o.fromJS)(n),!0))}))}},W=function(e){return function(t,n){var a=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);Object(l.a)("getRunningStockMemberList","POST",JSON.stringify({sobId:a,property:"0",openQuantity:!0,listByCategory:!!e.top,categoryUuid:e.uuid,subordinateUuid:e.uuid}),(function(e){Object(c.u)(e)&&(e.data.resultList.forEach((function(e){e.oriName=e.name,e.name="".concat(e.code," ").concat(e.name)})),t(X("stockList",Object(o.fromJS)(e.data.resultList),!0)))}))}},q=function(){return function(e){Object(l.a)("inventoryAssistList","GET","",(function(t){Object(c.u)(t)&&e(X("assistClassificationList",Object(o.fromJS)(t.data.assistClassificationList),!0))}))}},Q=function(e){return function(t,n){var a=n().inventoryConfState.get("assist").toJS(),i=a.type,r={},s="";({assistClassInsert:function(){s="assistClassInsert",r={name:a.classificationName}},assistClassModify:function(){s="assistClassModify",r={uuid:a.classificationUuid,name:a.classificationName}},assistPropertyInsert:function(){s="assistPropertyInsert",r={name:a.name,classificationUuid:a.classificationUuid}},assistPropertyModify:function(){s="assistPropertyModify",r={name:a.name,uuid:a.uuid,classificationUuid:a.classificationUuid}}})[i](),u.a.toast.loading(d.p,0),Object(l.a)(s,"POST",JSON.stringify(r),(function(n){u.a.toast.hide(),Object(c.u)(n)&&0===n.code&&(["assistPropertyInsert","assistPropertyModify"].includes(i)&&t(X(["assist","propertyList"],Object(o.fromJS)(n.data))),t(q()),u.a.toast.info("\u4fdd\u5b58\u6210\u529f",2,e()))}))}},Z=function(e){return function(t,n){var a=n().inventoryConfState.get("assist").toJS(),i=a.type,r="",s="";({assistClassDelete:function(){s="assistClassDelete",r=a.classificationUuid},assistPropertyDelete:function(){s="assistPropertyDelete",r=a.uuid}})[i](),u.a.toast.loading(d.p,0),Object(l.a)(s,"GET","uuid=".concat(r),(function(n){u.a.toast.hide(),Object(c.u)(n)&&0===n.code&&(["assistPropertyDelete"].includes(i)&&t(X(["assist","propertyList"],Object(o.fromJS)(n.data))),t(q()),u.a.toast.info("\u4fdd\u5b58\u6210\u529f",2,e()))}))}},$=function(e){return function(t,n){var a=n().inventoryConfState.get("batch").toJS(),s=a.batchType,m=a.editPage,g={},f="";function v(){return(v=Object(r.a)(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r="MODIFY-INSERT"==s,"MODIFY-MODIFY"!=s){n.next=4;break}return n.next=4,new Promise((function(e){Object(l.a)("batchCheckUsed","GET","inventoryUuid=".concat(a.inventoryUuid,"&batchUuid=").concat(a.batchUuid),(function(t){if(Object(c.u)(t))if(t.data.used){u.a.Confirm({title:"\u63d0\u793a",message:"\u539f\u6279\u6b21\u5728\u671f\u521d\u503c\u6216\u6d41\u6c34\u4e2d\u5df2\u88ab\u4f7f\u7528\uff0c\u4fee\u6539\u540e\u6240\u6709\u4fe1\u606f\u5c06\u540c\u6b65\u4fee\u6539\u3002\u786e\u8ba4\u66f4\u65b0\u8be5\u6279\u6b21\u7684\u4fe1\u606f\u5417\uff1f",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(t){1==t.buttonIndex&&(r=!0,e())},onFail:function(e){}})}else r=!0,e()}))}));case 4:r&&(u.a.toast.loading(d.p,0),Object(l.a)(f,"POST",JSON.stringify(g),(function(n){u.a.toast.hide(),Object(c.u)(n)&&0===n.code&&("inventory"==a.editPage&&(t(X(["inventoryCardTemp","financialInfo","batchList"],Object(o.fromJS)(n.data.batchList))),u.a.toast.info("\u4fdd\u5b58\u6210\u529f",2,e())),"inventoryBatchList"==a.editPage&&(t(X(["batch","allBatchList"],Object(o.fromJS)(n.data.batchList))),u.a.toast.info("\u4fdd\u5b58\u6210\u529f",2,e())),"editRunning"==a.editPage&&("MODIFY-MODIFY"==s&&t(p.j({batch:n.data.batch,batchUuid:n.data.batchUuid,expirationDate:n.data.expirationDate,cardUuid:n.data.inventoryUuid})),e()))})));case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}"MODIFY-INSERT"==s&&(f="batchInsert",g={inventoryUuid:a.inventoryUuid,batch:a.batch,productionDate:a.productionDate,expirationDate:a.expirationDate,needPage:!1,canUse:"inventory"==m||void 0}),"MODIFY-MODIFY"==s&&(f="batchModify",g={inventoryUuid:a.inventoryUuid,batch:a.batch,batchUuid:a.batchUuid,productionDate:a.productionDate,expirationDate:a.expirationDate,needPage:!1,canUse:"inventory"==m||void 0}),function(){v.apply(this,arguments)}()}},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"allBatchList";return function(n,a){Object(l.a)("getBatchList","POST",JSON.stringify(e),(function(e){Object(c.u)(e,"","","",!0)&&0===e.code&&("allBatchList"==t&&n(X(["batch","allBatchList"],Object(o.fromJS)(e.data.batchList))),"batchList"==t&&n(X(["inventoryCardTemp","financialInfo","batchList"],Object(o.fromJS)(e.data.batchList))))}))}},te=function(e){return function(t,n){u.a.toast.loading(d.p,0),Object(l.a)("modifyBatchStatus","POST",JSON.stringify(e),(function(e){u.a.toast.hide(),Object(c.u)(e)&&0===e.code&&t(X(["batch","allBatchList"],Object(o.fromJS)(e.data.batchList)))}))}},ne=function(e){return function(t,n){u.a.toast.loading(d.p,0),Object(l.a)("deleteBatchList","POST",JSON.stringify(e),(function(n){if(u.a.toast.hide(),Object(c.u)(n)&&0===n.code){if(t(X(["batch","allBatchList"],Object(o.fromJS)(n.data.batchList))),n.data.usedList&&n.data.usedList.length){var a=n.data.usedList.reduce((function(e,t){return"".concat(e).concat(e?";":"").concat(t.batch)}),"");u.a.toast.info("\u6279\u6b21".concat(a,"\u5df2\u88ab\u671f\u521d\u503c/\u6d41\u6c34\u4f7f\u7528\uff0c\u65e0\u6cd5\u5220\u9664"),2)}t(ee({inventoryUuid:e.inventoryUuid,canUse:!0,needPage:!1},"batchList"))}}))}},ae=function(e,t){return function(n,a){u.a.toast.loading(d.p,0),Object(l.a)("getSerialList","POST",JSON.stringify({inventoryUuid:e,inUuid:t,inType:"O"}),(function(e){u.a.toast.hide(),Object(c.u)(e)&&0===e.code&&n(X(["serial","serialList"],Object(o.fromJS)(e.data)))}))}},ie=function(e){return{type:s.F,openType:e}}},1094:function(e,t,n){var a=n(39),i=n(1103);a({target:"Array",stat:!0,forced:!n(544)((function(e){Array.from(e)}))},{from:i})},1103:function(e,t,n){"use strict";var a=n(221),i=n(68),r=n(1032),c=n(546),o=n(46),s=n(172),l=n(545);e.exports=function(e){var t,n,u,d,p,m,g=i(e),f="function"==typeof this?this:Array,v=arguments.length,y=v>1?arguments[1]:void 0,b=void 0!==y,h=l(g),O=0;if(b&&(y=a(y,v>2?arguments[2]:void 0,2)),void 0==h||f==Array&&c(h))for(n=new f(t=o(g.length));t>O;O++)m=b?y(g[O],O):g[O],s(n,O,m);else for(p=(d=h.call(g)).next,n=new f;!(u=p.call(d)).done;O++)m=b?r(d,y,[u.value,O],!0):u.value,s(n,O,m);return n.length=O,n}},1126:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(98),n(115),n(62),n(31),n(70),n(83);var a=n(4),i=n(1),r=(n(57),n(14),n(12),n(2),n(1149)),c=n(1151),o=Object(i.fromJS)({views:{acName:"",acId:"",relation:"",anotherTabName:"\u5168\u90e8",activeTapKey:"\u5168\u90e8",activeTapKeyUuid:"",sonUuid:"",sonName:"\u5168\u90e8",insertOrModify:"insert",fromPage:"relative",otherPageName:"",treeSelect:{treeTwoList:[],treeThreeList:[],selectUuid:["","",""],selectName:"",selectEndUuid:""}},tags:[],originTags:[],relativeHighTypeTemp:c.e,relativeTypeTemp:c.f,relativeCardTemp:c.d,relativeCardSelectList:[],relativeCardList:[],treeList:[],relativeTreeSelectList:[],typeTree:[],typeSelect:"",cardHighTypeSelectList:[]});function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(a.a)(e,r.w,(function(){return o})),Object(a.a)(e,r.j,(function(){return t=t.setIn(["relativeHighTypeTemp",n.name],n.value)})),Object(a.a)(e,r.k,(function(){return n.short?t.set(n.dataType,n.value):t.setIn(n.dataType,n.value)})),Object(a.a)(e,r.u,(function(){return n.title.unshift({name:"\u5168\u90e8",uuid:""}),t=t.set("tags",Object(i.fromJS)(n.title)).set("originTags",Object(i.fromJS)(n.title))})),Object(a.a)(e,r.t,(function(){return t=t.set("relativeCardList",Object(i.fromJS)(n.list)).set("treeList",Object(i.fromJS)(n.tree)).set("relativeSelectList",Object(i.fromJS)([])).mergeIn(["views"],Object(i.fromJS)({activeTapKey:n.name,activeTapKeyUuid:n.uuid,sonUuid:"",sonName:"\u5168\u90e8",treeSelect:o.getIn(["views","treeSelect"])}))})),Object(a.a)(e,r.a,(function(){if(t=t.set("tags",t.get("originTags")),"modify"===n.insertOrModify){for(var e=t.get("tags").toJS(),a=n.data.categoryTypeList,r=0;r<a.length;r++)for(var o=0;o<e.length;o++)if(a[r].ctgyUuid===e[o].uuid){e[o].checked=!0,e[o].selectUuid=a[r].subordinateUuid,e[o].selectName=a[r].subordinateName,e[o].tree=a[r].options;break}t=(t=(t=t.set("tags",Object(i.fromJS)(e))).set("relativeCardTemp",Object(i.fromJS)(n.data))).setIn(["relativeCardTemp","insertOrModify"],"modify"),0===n.data.payableOpened&&(t=t.setIn(["relativeCardTemp","payableOpened"],"")),0===n.data.receivableOpened&&(t=t.setIn(["relativeCardTemp","receivableOpened"],"")),0===n.data.prepaidOpened&&(t=t.setIn(["relativeCardTemp","prepaidOpened"],"")),0===n.data.advanceOpened&&(t=t.setIn(["relativeCardTemp","advanceOpened"],""))}else t=t.set("relativeCardTemp",Object(i.fromJS)(c.d)).setIn(["relativeCardTemp","insertOrModify"],"insert").setIn(["relativeCardTemp","isCheckOut"],n.data.isCheckOut).setIn(["relativeCardTemp","advanceAcId"],n.data.defaultAc.advanceAcId).setIn(["relativeCardTemp","advanceAcName"],n.data.defaultAc.advanceAcName).setIn(["relativeCardTemp","receivableAcId"],n.data.defaultAc.receivableAcId).setIn(["relativeCardTemp","receivableAcName"],n.data.defaultAc.receivableAcName).setIn(["relativeCardTemp","payableAcId"],n.data.defaultAc.payableAcId).setIn(["relativeCardTemp","payableAcName"],n.data.defaultAc.payableAcName).setIn(["relativeCardTemp","prepaidAcId"],n.data.defaultAc.prepaidAcId).setIn(["relativeCardTemp","prepaidAcName"],n.data.defaultAc.prepaidAcName);return t=t.setIn(["views","fromPage"],n.fromPage||"relative")})),Object(a.a)(e,r.b,(function(){return t=t.set("relativeCardTemp",Object(i.fromJS)(c.d)).setIn(["relativeCardTemp","insertOrModify"],"insert").setIn(["relativeCardTemp","isCheckOut"],n.receivedData.isCheckOut).set("tags",n.originTags).setIn(["views","fromPage"],n.otherPageName).setIn(["views","otherPageName"],n.otherPageName).setIn(["relativeCardTemp","code"],n.receivedData.code)})),Object(a.a)(e,r.g,(function(){(t=t.setIn(["relativeCardTemp",n.name],n.value),"isPayUnit"!==n.name||n.value)||((t=t.setIn(["relativeCardTemp","enablePrepaidAc"],!1)).getIn(["relativeCardTemp","isReceiveUnit"])?t.get("tags").map((function(e,n){if(!e.get("isReceiveUnit")){var a=(t=t.setIn(["tags",n,"checked"],!1)).getIn(["relativeCardTemp","categoryTypeList"]).findIndex((function(t,n){return t.get("ctgyUuid")===e.get("uuid")}));a>-1&&(t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(a)))}})):(t.get("tags").map((function(e,n){t=t.setIn(["tags",n,"checked"],!1)})),t=t.setIn(["relativeCardTemp","categoryTypeList"],Object(i.fromJS)([]))));"isReceiveUnit"!==n.name||n.value||((t=t.setIn(["relativeCardTemp","enableAdvanceAc"],!1)).getIn(["relativeCardTemp","isPayUnit"])?t.get("tags").map((function(e,n){if(!e.get("isPayUnit")){var a=(t=t.setIn(["tags",n,"checked"],!1)).getIn(["relativeCardTemp","categoryTypeList"]).findIndex((function(t,n){return t.get("ctgyUuid")===e.get("uuid")}));a>-1&&(t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(a)))}})):(t.get("tags").map((function(e,n){t=t.setIn(["tags",n,"checked"],!1)})),t=t.setIn(["relativeCardTemp","categoryTypeList"],Object(i.fromJS)([]))));return t})),Object(a.a)(e,r.d,(function(){var e=t.get("tags"),a="";if(e.find((function(t,r){t.get("uuid")===n.tag.get("uuid")&&(e=e.setIn([r,"checked"],n.checked),t.get("selectUuid")&&(a=t.get("selectUuid")),n.checked&&(e=e.setIn([r,"tree"],Object(i.fromJS)(n.tree)),0===n.tree[0].childList.length&&(e=e.setIn([r,"selectUuid"],n.tree[0].uuid).setIn([r,"selectName"],n.tree[0].name),a=n.tree[0].uuid)))})),n.checked){var r=t.getIn(["relativeCardTemp","categoryTypeList"]).toJS();r.push({ctgyUuid:n.tag.get("uuid"),subordinateUuid:a}),t=t.setIn(["relativeCardTemp","categoryTypeList"],Object(i.fromJS)(r))}else{var c=t.getIn(["relativeCardTemp","categoryTypeList"]).findIndex((function(e,t){return e.get("ctgyUuid")===n.tag.get("uuid")}));t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(c))}return t=t.set("tags",e)})),Object(a.a)(e,r.y,(function(){return t.get("tags").map((function(e,a){e.get("uuid")===n.uuid&&(t=t.set("typeTree",t.getIn(["tags",a,"tree"])).set("typeSelect",t.getIn(["tags",a])))})),t})),Object(a.a)(e,r.e,(function(){var e=t.get("typeSelect");return t.getIn(["relativeCardTemp","categoryTypeList"]).map((function(a,i){a.get("ctgyUuid")===e.get("uuid")&&(t=t.setIn(["relativeCardTemp","categoryTypeList",i,"subordinateUuid"],n.uuid))})),t.get("tags").map((function(a,i){a.get("uuid")===e.get("uuid")&&(t=t.setIn(["tags",i,"selectUuid"],n.uuid).setIn(["tags",i,"selectName"],n.name))})),t})),Object(a.a)(e,r.f,(function(){var e=t.getIn(["views","acId"]),a=t.getIn(["views","acName"]);return t=t.setIn(["relativeCardTemp",e],n.uuid).setIn(["relativeCardTemp",a],n.name)})),Object(a.a)(e,r.A,(function(){return t=t.set("relativeCardList",Object(i.fromJS)(n.list)).set("treeList",Object(i.fromJS)(n.treeList)),"insertAndNew"===n.flag&&(t=t.setIn(["relativeCardTemp","code"],n.code).setIn(["relativeCardTemp","name"],"").setIn(["relativeCardTemp","companyAddress"],"").setIn(["relativeCardTemp","companyTel"],"").setIn(["relativeCardTemp","financeName"],"").setIn(["relativeCardTemp","financeTel"],"").setIn(["relativeCardTemp","receivableOpened"],"").setIn(["relativeCardTemp","advanceOpened"],"").setIn(["relativeCardTemp","payableOpened"],"").setIn(["relativeCardTemp","prepaidOpened"],"")),t})),Object(a.a)(e,r.h,(function(){if("relativeCard"==n.clearType&&(t=t.set("relativeCardSelectList",Object(i.fromJS)([])).update("relativeCardList",(function(e){return e.map((function(e){return e.set("checked",!1)}))}))),"relativeHighType"==n.clearType&&(t=t.set("cardHighTypeSelectList",Object(i.fromJS)([])).update("tags",(function(e){return e.map((function(e){return e.set("checked",!1)}))}))),"relativeTree"==n.clearType){var e=t.getIn(["relativeHighTypeTemp","treeList"]).toJS();!function e(t){return t.map((function(t,n){t.checked=!1,t.childList.length>0&&e(t.childList)}))}(e),t=t.set("treeList",Object(i.fromJS)(e)).set("relativeTreeSelectList",Object(i.fromJS)([]))}return t})),Object(a.a)(e,r.o,(function(){var e=t.get("relativeCardList"),a=t.get("relativeCardSelectList").toJS();return e.find((function(e,a){e.get("uuid")===n.uuid&&(t=t.setIn(["relativeCardList",a,"checked"],n.checked))})),n.checked?(a.push({uuid:n.uuid}),t=t.set("relativeCardSelectList",Object(i.fromJS)(a))):a.find((function(e,a){e.uuid===n.uuid&&(t=t.deleteIn(["relativeCardSelectList",a]))})),t})),Object(a.a)(e,r.q,(function(){return t=t.set("relativeCardList",Object(i.fromJS)(n.data)).set("relativeCardSelectList",Object(i.fromJS)([])).set("treeList",Object(i.fromJS)(n.treeList))})),Object(a.a)(e,r.s,(function(){return t=t.set("relativeCardList",Object(i.fromJS)(n.data)).set("relativeCardSelectList",Object(i.fromJS)([])).setIn(["views","sonUuid"],n.sonUuid).setIn(["views","sonName"],n.sonName)})),Object(a.a)(e,r.c,(function(){return t=t.set("relativeHighTypeTemp",Object(i.fromJS)(c.e))})),Object(a.a)(e,r.j,(function(){return t=t.setIn(["relativeHighTypeTemp",n.name],n.value)})),Object(a.a)(e,r.r,(function(){return t=t.set("relativeHighTypeTemp",Object(i.fromJS)(n.data))})),Object(a.a)(e,r.i,(function(){var e=t.get("tags"),a=t.get("cardHighTypeSelectList").toJS();return e.map((function(e,a){e.get("uuid")===n.uuid&&(t=t.setIn(["tags",a,"checked"],n.status))})),n.status?(a.push({uuid:n.uuid}),t=t.set("cardHighTypeSelectList",Object(i.fromJS)(a))):a.find((function(e,a){e.uuid===n.uuid&&(t=t.deleteIn(["cardHighTypeSelectList",a]))})),t})),Object(a.a)(e,r.p,(function(){n.title.unshift({name:"\u5168\u90e8",uuid:""});var e=t.getIn(["views","activeTapKeyUuid"]);return n.title.map((function(e){return e.uuid})).includes(e)||(t=t.setIn(["views","activeTapKeyUuid"],"").setIn(["views","activeTapKey"],"\u5168\u90e8").setIn(["views","treeSelect"],o.getIn(["views","treeSelect"]))),t=t.set("tags",Object(i.fromJS)(n.title)).set("originTags",Object(i.fromJS)(n.title))})),Object(a.a)(e,r.x,(function(){return t=t.setIn(["relativeTypeTemp","name"],"").setIn(["relativeTypeTemp","uuid"],"").setIn(["relativeTypeTemp","parentUuid"],n.uuid).setIn(["relativeTypeTemp","parentName"],n.name)})),Object(a.a)(e,r.m,(function(){return t=t.setIn(["relativeTypeTemp",n.name],n.value)})),Object(a.a)(e,r.n,(function(){return t=t.setIn(["relativeTypeTemp","parentUuid"],n.parentUuid).setIn(["relativeTypeTemp","parentName"],n.parentName)})),Object(a.a)(e,r.z,(function(){return t=t.set("relativeCardList",Object(i.fromJS)(n.list)).setIn(["views","activeTapKey"],n.name).setIn(["views","activeTapKeyUuid"],n.activeTapKeyUuid).set("treeList",Object(i.fromJS)(n.tree))})),Object(a.a)(e,r.v,(function(){return t=t.set("relativeTypeTemp",Object(i.fromJS)(n.data))})),Object(a.a)(e,r.l,(function(){var e=t.getIn(["relativeHighTypeTemp","treeList"]).toJS();return function e(t,a){return t.map((function(t,i){var r=a;(t.uuid==n.uuid||a)&&(t.checked=n.value,r=!0),t.childList.length>0&&e(t.childList,r)}))}(e,!1),t.setIn(["relativeHighTypeTemp","treeList"],Object(i.fromJS)(e))})),Object(a.a)(e,r.B,(function(){return t=t.setIn(["relativeCardTemp","used"],n.used)})),e)[n.type]||function(){return t})()}},1127:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(31),n(70);var a=n(4),i=n(1),r=n(1150),c=Object(i.fromJS)({views:{currentType:"",currentTypeName:"\u5168\u90e8",ctgyUuid:"",treeName:"\u5168\u90e8",treeUuid:"",highTypeIdx:0,insertOrModify:"insert",fromPage:"project",otherPageName:"",treeSelect:{treeTwoList:[],treeThreeList:[],selectUuid:["","",""],selectName:"",selectEndUuid:""}},data:{psiData:{code:"",name:"",selectName:"",selectUuid:"",categoryTypeList:[],typeList:[],used:!0,uuid:"",projectProperty:"XZ_LOSS",basicProductOpen:"",contractCostOpen:"",contractProfitOpen:"",engineeringSettlementOpen:""}},highTypeList:[],cardList:[],treeList:[],highTypeData:{commonFee:!1,name:"",uuid:"",beAssist:!1,beMake:!0,treeList:[]},deleteList:[],treeData:{name:"",parentName:"",parentUuid:"",uuid:""}});function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((e={},Object(a.a)(e,r.i,(function(){return c})),Object(a.a)(e,r.j,(function(){return t.set(n.dataType,c.get(n.dataType)).setIn(["views","fromPage"],n.fromPage||"project")})),Object(a.a)(e,r.k,(function(){var e=n.list;return e.unshift({name:"\u5168\u90e8",uuid:""}),t.set("highTypeList",Object(i.fromJS)(e)).setIn(["views","ctgyUuid"],e[1].uuid)})),Object(a.a)(e,r.d,(function(){return t.setIn(n.dataType,n.value)})),Object(a.a)(e,r.e,(function(){return t.set(n.dataType,n.value)})),Object(a.a)(e,r.a,(function(){return t.set("cardList",Object(i.fromJS)(n.receivedData))})),Object(a.a)(e,r.h,(function(){var e=n.data.typeList.length?n.data.typeList[0].uuid:"";return t.set("cardList",Object(i.fromJS)(n.data.resultList)).set("treeList",Object(i.fromJS)(n.data.typeList)).mergeIn(["views"],Object(i.fromJS)({treeUuid:e,treeName:"\u5168\u90e8",treeSelect:c.getIn(["views","treeSelect"])}))})),Object(a.a)(e,r.f,(function(){var e=t.getIn(["highTypeData","treeList"]).toJS();return function e(t,a){return t.map((function(t,i){var r=a;(t.uuid==n.uuid||a)&&(t.checked=n.value,r=!0),t.childList.length>0&&e(t.childList,r)}))}(e,!1),t.setIn(["highTypeData","treeList"],Object(i.fromJS)(e))})),Object(a.a)(e,r.g,(function(){var e=n.data.categoryTypeList[0].subordinateName,a=n.data.categoryTypeList[0].subordinateUuid;return t.mergeIn(["data","psiData"],Object(i.fromJS)(n.data)).setIn(["views","insertOrModify"],"modify").setIn(["data","psiData","selectName"],e).setIn(["data","psiData","selectUuid"],a).setIn(["data","psiData","typeList"],Object(i.fromJS)(n.data.categoryTypeList[0].options)).setIn(["views","fromPage"],"project").set("treeList",Object(i.fromJS)(n.data.categoryTypeList[0].options))})),Object(a.a)(e,r.l,(function(){if("card"==n.dataType){t.get("cardList");t=t.update("cardList",(function(e){return e.map((function(e){return e.set("checked",!1)}))}))}else{var e=t.get("treeList").toJS();!function e(t){return t.map((function(t,n){t.checked=!1,t.childList.length>0&&e(t.childList)}))}(e),t=t.set("treeList",Object(i.fromJS)(e))}return t})),Object(a.a)(e,r.b,(function(){return t=t.set("data",c.get("data")).set("treeList",Object(i.fromJS)(n.receivedData)).setIn(["views","insertOrModify"],"insert").setIn(["views","fromPage"],n.otherPageName).setIn(["views","otherPageName"],n.otherPageName).setIn(["views","ctgyUuid"],n.ctgyUuid).set("highTypeList",Object(i.fromJS)(n.highTypeList)).setIn(["data","psiData","code"],n.code).setIn(["data","psiData","categoryTypeList",0],Object(i.fromJS)({ctgyUuid:n.ctgyUuid,subordinateUuid:""})),n.receivedData[0].childList.length<=0&&(t=t.setIn(["data","psiData","selectUuid"],n.receivedData[0].uuid).setIn(["data","psiData","selectName"],n.receivedData[0].name).setIn(["data","psiData","categoryTypeList",0,"subordinateUuid"],n.receivedData[0].uuid)),n.highTypeList.map((function(e){e.uuid==n.ctgyUuid&&"\u751f\u4ea7\u9879\u76ee"==e.name&&(t=t.setIn(["data","psiData","projectProperty"],"XZ_PRODUCE"))})),t})),Object(a.a)(e,r.c,(function(){return t.setIn(["data","psiData","code"],n.value)})),e)[n.type]||function(){return t})()}},1336:function(e,t,n){},1461:function(e,t,n){var a=n(39),i=n(68),r=n(234);a({target:"Object",stat:!0,forced:n(37)((function(){r(1)}))},{keys:function(e){return r(i(e))}})},924:function(e,t,n){"use strict";n.r(t),n.d(t,"reducer",(function(){return ye})),n.d(t,"view",(function(){return ue}));var a=n(7),i=n(8),r=n(9),c=n(10),o=n(0),s=n.n(o),l=n(11),u=n(6),d=(n(32),n(223),n(55),n(33),n(31),n(47)),p=n(1),m=(n(1336),n(62),n(61),n(70),n(76),n(220)),g=function(e){return s.a.createElement("span",{style:{color:"rgb(204,0,0)"}},"*")},f=(n(34),function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.StarDisabled,a=e.ArrowDisabled,i=e.placeHolder,r=e.type,c=void 0===r?"single":r,o=e.value,u=e.onDelete,d=e.style,p=e.onClick,m=e.className,f="single"===c&&o||"multiple"===c&&o&&o.length>=1,v="single"===c?o:(o||[]).map((function(e,t){return s.a.createElement("span",{key:t},e)}));return s.a.createElement("div",{className:["approval-item",m].join(" "),style:d,onClick:p},s.a.createElement("label",null,n?"":s.a.createElement(g,null),t),s.a.createElement("div",{className:"approval-text"},s.a.createElement("span",{className:f?"approval-text-area":"approval-text-area approval-placeholder"},f?v:i),a?"":f&&"single"===c?s.a.createElement(l.l,{type:"preview",onClick:function(e){e.stopPropagation(),u()}}):s.a.createElement(l.l,{className:"approval-placeholder",type:"arrow-right"})))}}]),n}(s.a.Component)),v=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=t.placeHolder,i=t.type,r=void 0===i?"single":i,c=(t.value,t.disabled),o=t.item,u=void 0===o?Object(p.fromJS)({}):o,d=t.district,m=t.onChange,g=(t.dispatch,t.className),v=this.state.visible,y=d.size?d.toJS():(u.get("selectValueList")||Object(p.fromJS)([])).toJS().map((function(e){return{key:e,value:e}}));return s.a.createElement(l.u,{className:g,visible:v,disabled:c,district:y,onOk:function(e){m(e.value)},onCancel:function(){e.setState({visible:!1})}},s.a.createElement(f,{multiple:"multiple"===r,value:u.get("value"),label:n,placeHolder:a,onDelete:function(e){m("")},StarDisabled:!u.get("required")}))}}]),n}(s.a.Component),y=n(1055),b=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.idx,n=e.isMx;(0===t||!n)&&this.props.dispatch(y.getCategorySubList(this.props.modelInfo.get("jrCategoryId"),this.props.modelInfo.get("jrCategoryProperty")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,a=t.item,i=t.dispatch,r=(t.modelInfo,t.onChange,t.className),c=t.placeArr,o=this.state.visible,u=this.props.district.toJS();return function e(t){t.forEach((function(t){t.key=t.name,t.label=t.name,t.childList.length&&e(t.childList)}))}(u),s.a.createElement(l.f,{className:r,visible:o,disabled:n,district:u,onChange:function(e){i(y.changeModelString([].concat(Object(m.a)(c),["name"]),e.name)),i(y.changeModelString([].concat(Object(m.a)(c),["value"]),e.fullName))},onCancel:function(){e.setState({visible:!1})}},s.a.createElement(f,{label:a.get("label"),placeHolder:a.get("placeHolder"),value:a.get("name"),onDelete:function(){i(y.changeModelString([].concat(Object(m.a)(c),["name"]),"")),i(y.changeModelString([].concat(Object(m.a)(c),["value"]),""))},StarDisabled:!a.get("required")}))}}]),n}(s.a.Component),h=(n(98),n(115),n(116),n(131),n(29),n(48),n(51)),O=n(12),S=n(2),L=n(14),j=n(1046),C=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=((this.props.item.getIn(["detailList",0])||[]).find((function(e){return"CH"===e.get("jrComponentType")}))||Object(p.fromJS)({})).get("selectValueScope");this.props.dispatch(y.getApprovalStockList(e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList"))),this.props.dispatch(y.getApprovalStockCard("ALL",!0,e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.district,i=t.cardList,r=t.cardDisabled,c=(t.categoryType,t.history),o=t.item,u=t.index,d=this.state,m=(d.isAll,d.visible),f=(d.idx,d.categoryValue),v=o.get("detailList")||Object(p.fromJS)([]),b=o.getIn(["detailList",0]).find((function(e){return"CH"===e.get("jrComponentType")}))||Object(p.fromJS)({}),O=(o.getIn(["detailList",0]).find((function(e){return"CH"===e.get("jrComponentType")})),b.get("selectValueScope")),S=a.toJS(),L=i.toJS().map((function(e){return Object(h.a)({},e,{name:"".concat(e.code," ").concat(e.name),label:e.name})}));return S.unshift({name:"\u5168\u90e8",key:"ALL",uuid:"ALL",childList:[]}),function e(t){t.forEach((function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)}))}(S),s.a.createElement("div",{className:""},s.a.createElement(l.f,{visible:m,type:"card",multiSelect:!0,title:"\u8bf7\u9009\u62e9\u5b58\u8d27",icon:{type:"inventory-add",onClick:function(){n(y.changeModelString(["modelInfo","callback"],(function(e){var t=v.get(0).map((function(e){return e.set("value","").set("amount","").set("price","").set("unit","")})),a=t.findIndex((function(e){return"CH"===e.get("jrComponentType")})),i=t.findIndex((function(e){return"MX_AMOUNT"===e.get("jrComponentType")})),r=t;r=r.setIn([a,"value"],"".concat(e.code,"-").concat(e.name)).setIn([a,"code"],e.code).setIn([a,"name"],e.name).setIn([a,"unit"],Object(p.fromJS)(e.unit)).setIn([a,"unitPriceList"],Object(p.fromJS)(e.unitPriceList)).setIn([i,"unit"],"").setIn([i,"price"],""),e.isOpenedQuantity?e.isOpenedQuantity&&t.every((function(e){return"\u6570\u91cf"!==e.get("label")}))&&(r=r.push(Object(p.fromJS)({label:"\u6570\u91cf",componentType:"NumberField"}))):r=r.filter((function(e){return"\u6570\u91cf"!==e.get("label")})),n(y.changeModelString(["componentList",u,"detailList",v.size],r))}))),n(j.J()),n(j.b((function(){c.push("/config/inventory/inventoryInsert")}),"editApproval"))}},district:S,cardList:L,value:f,onChange:function(t){e.setState({categoryValue:t.key}),n(y.getApprovalStockCard(t.key,t.top,O.get("categoryList"),O.get("inCardList"),O.get("outCardList"),O.get("subCategoryList")))},onOk:function(e){var t=v.get(0).map((function(e){return e.set("value","").set("amount","").set("price","").set("unit","")})),a=Object(p.fromJS)(e).map((function(e){var n=t;e.get("isOpenedQuantity")?e.get("isOpenedQuantity")&&t.every((function(e){return"\u6570\u91cf"!==e.get("label")}))&&(n=t.push(Object(p.fromJS)({label:"\u6570\u91cf",componentType:"NumberField"}))):n=t.filter((function(e){return"\u6570\u91cf"!==e.get("label")}));var a=n.findIndex((function(e){return"CH"===e.get("jrComponentType")}));return n=n.setIn([a,"value"],"".concat(e.get("code"),"-").concat(e.get("label"))).setIn([a,"code"],e.get("code")).setIn([a,"name"],e.get("label")).setIn([a,"unit"],Object(p.fromJS)(e.get("unit"))).setIn([a,"unitPriceList"],Object(p.fromJS)(e.get("unitPriceList")))}));n(y.changeModelString(["componentList",u,"detailList"],v.concat(a)))},onCancel:function(){e.setState({visible:!1})}},s.a.createElement("span",null)),s.a.createElement("div",null,v.map((function(e,t){var a=e.some((function(e){return"CK"===e.get("jrComponentType")})),i=(e.some((function(e){return"\u6570\u91cf"===e.get("label")})),e.find((function(e){return"CH"===e.get("jrComponentType")}))||Object(p.fromJS)({})),o=e.find((function(e){return"CK"===e.get("jrComponentType")}))||Object(p.fromJS)({}),d=e.find((function(e){return"MX_AMOUNT"===e.get("jrComponentType")}))||Object(p.fromJS)({}),m=e.find((function(e){return"\u6570\u91cf"===e.get("label")}))||Object(p.fromJS)({}),f=(d.get("amount")&&Number(d.get("amount")),d.get("price")&&Number(d.get("price")),d.get("unit"),m.get("value")&&Number(m.get("value")),i.get("value")||""),b=o.get("value");return s.a.createElement("div",{key:t,className:"approval-inventory",onClick:function(){c.push("/editApproval/stock"),n(y.changeModelString(["views","idx"],t))},style:{borderBottom:"1px solid #eeeeee"}},s.a.createElement("div",{className:"approval-inventory-title split-area"},s.a.createElement("span",null,"\u5b58\u8d27\u660e\u7ec6(",t+1,")"),v.size>1?s.a.createElement("span",{className:r?"approval-placeholder":"approval-blue",onClick:function(e){e.stopPropagation(),n(y.changeModelString(["componentList",u,"detailList"],v.splice(t,1)))}},"\u5220\u9664"):s.a.createElement("span",null)),s.a.createElement("div",{className:"approval-more-card",onClick:function(){}},s.a.createElement("div",{className:"approval-single"},s.a.createElement(l.r,null,s.a.createElement("div",{className:"approval-inventory-item"},s.a.createElement("span",null,s.a.createElement(g,null),"\u5b58\u8d27:"),s.a.createElement("span",{className:f?"":"approval-placeholder"},f.replace("-"," ")||" \u672a\u9009\u62e9"))),a?s.a.createElement(l.r,null,s.a.createElement("div",{className:"approval-inventory-item"},s.a.createElement("span",null,s.a.createElement(g,null),"\u4ed3\u5e93:"),s.a.createElement("span",{className:b?"":"approval-placeholder"},b||" \u672a\u9009\u62e9"))):"",s.a.createElement(l.r,{className:"approval-inventory-item"},s.a.createElement("div",{className:"approval-inventory-item"},s.a.createElement("span",null,s.a.createElement(g,null),"\u91d1\u989d:"),s.a.createElement("span",null,s.a.createElement("span",null,d.get("value")))))),s.a.createElement(l.l,{type:"arrow-right"})))}))),s.a.createElement("div",{className:"split-area"},s.a.createElement("div",null),s.a.createElement("div",{className:"inventory-bottom",style:{marginTop:"0.1rem"}},s.a.createElement("div",{className:r?"approval-placeholder":"approval-blue",onClick:function(){e.setState({visible:!0,idx:v.size})}},"+\u6dfb\u52a0\u5b58\u8d27\u660e\u7ec6"))))}}]),n}(o.Component),I=(n(137),n(79)),T=n.n(I),E=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.placeHolder,a=(e.value,e.className),i=e.onChange,r=(e.dispatch,e.type),c=e.item;return"money"===r?s.a.createElement(o.Fragment,null,s.a.createElement("div",{className:["approval-item",a].join(" "),style:{marginBottom:0,borderBottom:"1px solid #eee"}},s.a.createElement(T.a,{value:c.get("value"),placeholder:n,onChange:function(e){/^-{0,1}\d*\.?\d{0,2}$/g.test(e)&&i(e)}},c.get("required")?s.a.createElement(g,null):"",t)),s.a.createElement("div",{className:["approval-item input-disabled",a].join(" ")},s.a.createElement("label",{style:{color:"#999"}},"\u5927\u5199"),s.a.createElement("div",{className:"approval-text",style:{color:"#999"}},s.a.createElement("span",null,Object(O.f)(c.get("value")))))):s.a.createElement("div",{className:["approval-item",a].join(" ")},s.a.createElement(T.a,{value:c.get("value"),placeholder:n,onChange:function(e){"number"===r?/^-{0,1}\d*\.?\d{0,2}$/g.test(e)&&i(e):i(e)}},c.get("required")?s.a.createElement(g,null):"",t))}}]),n}(s.a.Component),N=(n(1102),function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1,categoryValue:"ALL"},e.loop=function(t){t.forEach((function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e.loop(t.childList)}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.item.get("selectValueScope"),t=this.props,n=t.idx,a=t.isMx,i=0===n||!a;i&&this.props.dispatch(y.getApprovalProjectList(e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList"))),i&&this.props.dispatch(y.getApprovalProjectCard("ALL",!0,e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,a=t.district,i=t.dispatch,r=t.item,c=t.cardList,o=t.index,u=t.onChange,d=t.history,p=t.isMx,g=t.placeArr,v=t.itemList,b=t.size,O=t.innerIndex,S=this.state,L=S.categoryValue,j=S.visible,C=r.get("selectValueScope"),I=a.toJS(),T=c.toJS().map((function(e){return Z(e)?Object(h.a)({},e,{label:e.name}):Object(h.a)({},e,{name:"".concat(e.code," ").concat(e.name),label:e.name})})),E=r.get("value")||"";return I.unshift({name:"\u5168\u90e8",key:"ALL",uuid:"ALL",childList:[]}),this.loop(I),s.a.createElement(l.f,{type:"card",visible:j,disabled:n,district:I,cardList:T,value:L,onChange:function(t){e.setState({categoryValue:t.key}),i(y.getApprovalProjectCard(t.key,t.top,C.get("categoryList"),C.get("inCardList"),C.get("outCardList"),C.get("subCategoryList")))},icon:{type:"project-add",onClick:function(){i(y.beforeInsertProjectCard()),i(y.changeModelString(["modelInfo","callback"],(function(e){if(p&&E){var t=v.get(0).map((function(e){return e.set("value","").set("name","").set("code","")})).setIn([O,"value"],"".concat(e.code,"-").concat(e.name)).setIn([O,"code"],e.code).setIn([O,"name"],e.name);i(y.changeModelString(["componentList",o,"detailList",b],t))}else u("".concat(e.code,"-").concat(e.name)),i(y.changeModelString([].concat(Object(m.a)(g),["code"]),e.code)),i(y.changeModelString([].concat(Object(m.a)(g),["name"]),e.name))}))),d.push("/config/project/projectCard")}},onOk:function(e){u(Z(e[0])?e[0].label:"".concat(e[0].code,"-").concat(e[0].label)),i(y.changeModelString([].concat(Object(m.a)(g),["code"]),e[0].code)),i(y.changeModelString([].concat(Object(m.a)(g),["name"]),e[0].label))},onCancel:function(){e.setState({visible:!1})}},s.a.createElement(f,{StarDisabled:!r.get("required"),value:E.replace("-"," "),label:r.get("label"),placeHolder:r.get("placeHolder"),onDelete:function(){u("")}}))}}]),n}(s.a.Component)),k=(n(1101),function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1,categoryValue:"ALL"},e.loop=function(t){t.forEach((function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e.loop(t.childList)}))},e.lastArr=function(){var t=Object(m.a)(e.props.placeArr);return t.length=t.length-1,t.push(e.props.size),t},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.item.get("selectValueScope"),t=this.props,n=t.idx,a=t.isMx,i=0===n||!a;i&&this.props.dispatch(y.getApprovalCurrentList(e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList"))),i&&this.props.dispatch(y.getApprovalCurrentCard("ALL",!0,e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,a=t.district,i=t.dispatch,r=t.item,c=t.cardList,o=t.index,u=t.onChange,d=t.modelInfo,p=t.history,g=t.isMx,v=t.placeArr,b=t.size,O=t.innerIndex,S=t.itemList,L=this.state,j=L.categoryValue,C=L.visible,I=r.get("selectValueScope"),T=(d.get("modelCode"),a.toJS()),E=c.toJS().map((function(e){return Object(h.a)({},e,{name:"".concat(e.code," ").concat(e.name),label:e.name})})),N=r.get("value")||"";return T.unshift({name:"\u5168\u90e8",key:"ALL",uuid:"ALL",childList:[]}),this.loop(T),s.a.createElement(l.f,{type:"card",title:"\u8bf7\u9009\u62e9\u5f80\u6765\u5355\u4f4d",visible:C,disabled:n,district:T,cardList:E,value:j,icon:{type:"current-add",onClick:function(){i(y.changeModelString(["modelInfo","callback"],(function(e){if(g&&N){var t=S.get(0).map((function(e){return e.set("value","").set("name","").set("code","")})).setIn([O,"value"],"".concat(e.code,"-").concat(e.name)).setIn([O,"code"],e.code).setIn([O,"name"],e.name);i(y.changeModelString(["componentList",o,"detailList",b],t))}else u("".concat(e.code,"-").concat(e.name)),i(y.changeModelString([].concat(Object(m.a)(v),["code"]),e.code)),i(y.changeModelString([].concat(Object(m.a)(v),["name"]),e.name))}))),i(y.beforeAddManageTypeCard((function(){p.push("/config/relative/relativeCardInsert")}),"insert"))}},onChange:function(t){e.setState({categoryValue:t.key}),i(y.getApprovalCurrentCard(t.key,t.top,I.get("categoryList"),I.get("inCardList"),I.get("outCardList"),I.get("subCategoryList")))},onOk:function(e){u("".concat(e[0].code,"-").concat(e[0].label)),i(y.changeModelString([].concat(Object(m.a)(v),["code"]),e[0].code)),i(y.changeModelString([].concat(Object(m.a)(v),["name"]),e[0].label))},onCancel:function(){e.setState({visible:!1})}},s.a.createElement(f,{StarDisabled:!r.get("required"),value:N.replace("-"," "),label:r.get("label"),placeHolder:r.get("placeHolder"),onDelete:function(){u("")}}))}}]),n}(s.a.Component)),A=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,a=t.district,i=t.className,r=t.onChange,c=t.item,o=t.style,u=this.state.visible;return s.a.createElement("div",{onClick:function(){return e.setState({visible:!0})},className:i,style:o},s.a.createElement(l.i,{visible:u,disabled:n,district:a,format:c.get("dateFormat"),value:c.get("value"),onChange:function(e){"yyyy-MM-dd hh:mm"===c.get("dateFormat")?r(e):r(new O.a(new Date(e)).valueOf())},onCancel:function(){e.setState({visible:!1})}},s.a.createElement(f,{value:c.get("value"),label:c.get("label"),placeHolder:c.get("placeHolder"),onDelete:r,StarDisabled:!c.get("required")})))}}]),n}(s.a.Component),J=n(239),M=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.disabled,e.lastCategory,e.categoryType,e.isOpenedWarehouse,e.placeArr),n=e.item,a=e.dispatch,i=e.uploadKeyJson,r=(this.state.visible,n.get("value")||Object(p.fromJS)([]));return s.a.createElement(l.r,{className:"approval-pic"},s.a.createElement("div",null,"\u56fe\u7247"),s.a.createElement("div",{className:"pic-container"},r.map((function(e,n){return s.a.createElement("div",{className:"mx-img"},s.a.createElement("img",{onClick:function(){if(e.get("size")>8192)return S.a.toast.info("\u6587\u4ef6\u8fc7\u5927\uff0c\u6682\u4e0d\u652f\u6301\u9884\u89c8\u3002");var t=r.toJS().map((function(e){return e.signedUrl}));S.a.previewImage({urls:t,current:e.get("signedUrl"),onSuccess:function(e){},onFail:function(){}})},src:e.get("signedUrl")}),s.a.createElement(l.l,{className:"pic-close",type:"preview",onClick:function(){a(y.changeModelString([].concat(Object(m.a)(t),["value"]),r.splice(n,1)))}}))})),s.a.createElement("div",{className:"add-icon"},s.a.createElement(J.a,{type:"Image",enclosureList:r,uploadKeyJson:i,isCompression:!1,uploadFiles:function(e){a(y.uploadFiles.apply(y,[r,[].concat(Object(m.a)(t),["value"])].concat(Object(m.a)(e))))},getUploadGetTokenFetch:function(){a(y.getUploadGetTokenFetch())}}))))}}]),n}(s.a.Component),D=n(17);var U,w,P,x,F,H,R=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.disabled,e.dispatch),n=e.item,a=(e.cardList,e.index,e.onChange,e.placeArr),i=n.get("value")||[];return s.a.createElement(f,{type:"multiple",value:n.get("name"),label:n.get("label"),placeHolder:n.get("placeHolder"),StarDisabled:!n.get("required"),onClick:function(){!function(e,t,n){var a="";D.b.indexOf("mtst.xfannix.com")>-1?a=L.i:D.b.indexOf("mpre.xfannix.com")>-1?a=L.h:D.b.indexOf("mobile.xfannix.com")>-1&&(a=L.g),S.a.complexPicker({title:"\u9009\u62e9\u8054\u7cfb\u4eba",corpId:sessionStorage.getItem("corpId"),multiple:e,limitTips:"\u8d85\u51fa\u4e86",maxUsers:1e3,pickedUsers:t,pickedDepartments:[],disabledUsers:[],disabledDepartments:[],requiredUsers:[],requiredDepartments:[],appId:a,permissionType:"xxx",responseUserOnly:!0,startWithDepartmentId:0,onSuccess:function(e){e.users.length&&n(e.users)},onFail:function(e){console.log(JSON.stringify(e))}})}(n.get("choice"),i,(function(e){var n=e.map((function(e){return e.name})),i=e.map((function(e){return e.emplId}));t(y.changeModelString([].concat(Object(m.a)(a),["value"]),i)),t(y.changeModelString([].concat(Object(m.a)(a),["name"]),n))}))},onDelete:function(){t(y.changeModelString([].concat(Object(m.a)(a),["value"]),[])),t(y.changeModelString([].concat(Object(m.a)(a),["name"]),[]))}})}}]),n}(s.a.Component),B=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=t.placeHolder,i=(t.type,t.disabled),r=t.item,c=void 0===r?Object(p.fromJS)({}):r,o=t.district,u=t.onChange,d=(t.dispatch,t.className),m=(t.placeArr,this.state.visible),g=c.get("value")?c.get("value").toJS():"",v=o.size?o.toJS():(c.get("selectValueList")||Object(p.fromJS)([])).toJS().map((function(e){return{key:e,value:e}}));return s.a.createElement(l.n,{className:d,visible:m,disabled:i,district:v,value:g,onOk:function(e){u(Object(p.fromJS)(e.map((function(e){return e.key}))))},onCancel:function(){e.setState({visible:!1})}},s.a.createElement(f,{type:"multiple",value:g,label:n,placeHolder:a,onDelete:function(e){u("")},StarDisabled:!c.get("required")}))}}]),n}(s.a.Component),_=(n(133),n(82),n(318),n(225),function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e.isImage=function(e){var t=e.split("."),n=t[t.length-1];return!!["jpeg","jpg","png","bmp","gif","svg","webp"].includes(n)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=(t.disabled,t.lastCategory,t.categoryType,t.isOpenedWarehouse,t.placeArr),a=t.item,i=t.dispatch,r=t.spaceId,c=(t.index,this.state.visible,a.get("value")||Object(p.fromJS)([]));a.get("valueYl")||Object(p.fromJS)([]);return s.a.createElement(l.r,{className:"approval-fj"},s.a.createElement("div",null,"\u9644\u4ef6"),s.a.createElement("div",{className:"fj-container"},c.map((function(t,a){return s.a.createElement("div",{className:"mx-fj"},s.a.createElement("div",{className:"fj-img"},s.a.createElement("img",{src:Object(O.t)("image"===t.get("type")||e.isImage(t.get("fileName"))?"TRUE":"",t.get("fileName"))})),s.a.createElement("div",{className:"fj-name"},s.a.createElement("span",null,t.get("fileName")),s.a.createElement("span",null,(t.get("fileSize")/1024).toFixed(2)+"KB")),s.a.createElement("span",{onClick:function(){"image"===t.get("type")||e.isImage(t.get("fileName"))?S.a.toast.info("\u9644\u4ef6\u56fe\u7247\u4e0d\u652f\u6301\u9884\u89c8"):i(y.getCustomSpaceAndPreview(t,r))}},"\u9884\u89c8"),s.a.createElement(l.l,{className:"fj-close",type:"preview",onClick:function(){i(y.changeModelString([].concat(Object(m.a)(n),["value"]),c.splice(a,1)))}}))})),s.a.createElement("div",{className:"add-icon",onClick:function(){i(y.getSpaceInfo((function(e){i(y.changeModelString([].concat(Object(m.a)(n),["value"]),c.concat(Object(p.fromJS)(e))))})))}},s.a.createElement(l.l,{type:"add"}))))}}]),n}(s.a.Component)),V=(n(563),n(282)),z=n.n(V),K=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=(e.StarDisabled,e.ArrowDisabled,e.placeHolder),a=(e.value,e.className),i=e.onChange,r=(e.dispatch,e.type),c=e.item;return s.a.createElement(o.Fragment,null,s.a.createElement(f,{multiple:"multiple"===r,label:t,placeHolder:"",StarDisabled:!c.get("required"),ArrowDisabled:!0,style:{marginBottom:0}}),s.a.createElement(z.a,{className:["approval-textarea",a].join(" "),value:c.get("value"),placeholder:n,onChange:i,rows:4}))}}]),n}(s.a.Component),G=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.placeHolder,a=e.type,i=void 0===a?"single":a,r=(e.disabled,e.item),c=void 0===r?Object(p.fromJS)({}):r,u=(e.district,e.onChange),d=e.dispatch,g=(e.className,e.history),v=e.index,b=e.placeArr,h=(this.state.visible,c.get("value")&&c.get("value").size?c.get("value").map((function(e,t){return Object(p.fromJS)({processInstanceId:e,title:c.getIn(["titleList",t]),isFinshed:c.getIn(["isFinshedList",t]),result:c.getIn(["result",t])})})):Object(p.fromJS)([]));return s.a.createElement(o.Fragment,null,s.a.createElement(f,{className:c.get("value")&&c.get("value").size?"mx-item":"",multiple:"multiple"===i,label:t,placeHolder:n,onDelete:function(e){u("")},onClick:function(){g.push("/editApproval/choose/related"),d(y.changeModelString(["views","componentIndex"],v)),d(y.changeModelString(["views","selectList"],h))},StarDisabled:!c.get("required")}),s.a.createElement(l.r,{className:"spd-row",style:{display:c.get("value")&&c.get("value").size?"":"none"}},h.map((function(e,t){var n;return n=e.get("isFinshed")?"agree"===e.get("result")?"#5e81d1":"#ff3b30":"#ffb549",s.a.createElement("div",{className:"spd-area",key:e.get("index")},s.a.createElement(l.l,{type:"related"}),s.a.createElement("span",null,e.get("title")),s.a.createElement("span",{style:{color:n}},e.get("isFinshed")?"agree"===e.get("result")?"\u5ba1\u6279\u901a\u8fc7":"\u5ba1\u6279\u62d2\u7edd":"\u5ba1\u6279\u4e2d"),s.a.createElement(l.l,{type:"close",onClick:function(){d(y.changeModelString([].concat(Object(m.a)(b),["value"]),c.get("value").splice(t,1))),d(y.changeModelString([].concat(Object(m.a)(b),["isFinshedList"]),c.get("isFinshedList").splice(t,1))),d(y.changeModelString([].concat(Object(m.a)(b),["titleList"]),c.get("titleList").splice(t,1))),d(y.changeModelString([].concat(Object(m.a)(b),["result"]),c.get("result").splice(t,1)))}}))}))))}}]),n}(s.a.Component),X={LB_YYSR:"debit",LB_YYZC:"credit",LB_ZZ:"calculate",LB_FYZC:"credit",LB_XCZC:"credit",LB_SFZC:"credit",LB_YYWSR:"debit",LB_YYWZC:"credit"},Y={NumberField:E,MoneyField:E,DDSelectField:v,InnerContactField:R,DDPhotoField:M,DDMultiSelectField:B,DDAttachment:_,TextareaField:K,DDDateRangeField:A,TextField:E,DDDateField:A,RelateField:G},W={LSLB:b,XM:N,MX_DATE:A,DATE:A,MX_AMOUNT:E,ZY:E,CH:C,WLDW:k},q=[{title:"\u6211\u5904\u7406\u7684",sub:"1"},{title:"\u6211\u53d1\u8d77\u7684",sub:"2"},{title:"\u6284\u9001\u6211\u7684",sub:"3"}],Q={AMOUNT:"\u91d1\u989d",DATE:"\u65e5\u671f",ABSTRACT:"\u6458\u8981",CONTECT:"\u5f80\u6765\u5355\u4f4d",STROCK:"\u5b58\u8d27",DRPOT:"\u4ed3\u5e93",CATEGORY:"\u6d41\u6c34\u7c7b\u522b","DETAIL-TYPE":"\u660e\u7ec6\u7c7b\u578b",ACCOUNT:"\u8d26\u6237"},Z=function(e){return["COMNCRD","ASSIST","MAKE","INDIRECT","MECHANICAL"].includes(e.code)},$=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={filterContent:""},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.getElementsByClassName("search-input-dom")[0].addEventListener("keypress",(function(t){if("Enter"===t.key){t.target.blur();var n=e.props.value?e.props.value:e.state.filterContent;e.props.onSubmit(n)}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,a=t.onSubmit,i=t.placeholder,r=t.needCancel,c=t.onFocus,o=t.onBlur,u=t.onChange,d=t.history,p=n?this.props.value:this.state.filterContent;return s.a.createElement("div",{className:"approval-search"},s.a.createElement("form",{action:"javascript:;"},s.a.createElement(T.a,{type:"search",className:"search-input-dom",value:p,onChange:function(t){u&&u(t),e.setState({filterContent:t})},placeholder:i,onFocus:c,onBlur:o,ref:"input"})),s.a.createElement(l.l,{type:"search",className:"search-icon"}),p?s.a.createElement(l.l,{type:"preview",className:"close-icon",style:r?{right:"0.6rem"}:{},onClick:function(){e.setState({filterContent:""}),a(""),u&&u(""),e.refs.input.focus()}}):"",r?s.a.createElement("span",{className:"close-span",onClick:function(){d.goBack(),e.setState({filterContent:""}),u&&u("")}},"\u53d6\u6d88"):"")}}]),n}(s.a.Component),ee=Object(d.c)((function(e){return e}))(U=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchContent:"",filterContent:""},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(y.getApprovalList()),S.a.setTitle({title:"\u53d1\u8d77\u5ba1\u6279"}),S.a.setIcon({showIcon:!1}),S.a.setRight({show:!1})}},{key:"componentWillUnmount",value:function(){this.props.dispatch(y.changeModelString(["views","searchContent"],""))}},{key:"render",value:function(){var e=this.props,t=e.editApprovalState,n=e.history,a=e.dispatch,i=t.get("dataList"),r=t.getIn(["views","searchContent"]),c=t.getIn(["views","isLoaded"]),u=0===i.size||i.every((function(e){return!e.get("modelList").size})),d=!u&&i.every((function(e){return!e.get("modelList").filter((function(e){return!r||e.get("modelName").indexOf(r)>-1})).size}));return s.a.createElement(l.h,{style:{background:"#fff"}},s.a.createElement("div",{className:"lrsp-tab-bar-item-top"},s.a.createElement($,{placeholder:"\u641c\u7d22\u5ba1\u6279",onSubmit:function(e){return a(y.changeModelString(["views","searchContent"],e))}})),(u||d)&&c?s.a.createElement(l.r,{className:"lrsp-container-list empty-approval"},s.a.createElement("div",{className:"lrsp-container-list-title"},"\u5ba1\u6279\u6a21\u7248"),u?s.a.createElement(o.Fragment,null,s.a.createElement("img",{src:"https://xfn-ddy-website.oss-cn-hangzhou.aliyuncs.com/utils/img/icons/site.png"}),s.a.createElement("span",{className:"text1"},"\u5f53\u524d\u8d26\u5957\u65e0\u5ba1\u6279\u5355")):"",d?s.a.createElement("div",{className:"text2"},"\u672a\u641c\u7d22\u5230\u76f8\u5173\u5ba1\u6279\u5355"):""):s.a.createElement(l.s,null,i.map((function(e,t){return s.a.createElement(l.r,{className:"lrsp-container-list",key:t},s.a.createElement("div",{className:"lrsp-container-list-title"},e.get("groupName")),s.a.createElement("div",{className:"tab-list"},e.get("modelList").filter((function(e){return!r||e.get("modelName").indexOf(r)>-1})).map((function(e){return s.a.createElement("div",{key:e.get("modelCode"),className:"lrsp-container-item",onClick:function(){a(y.initModel()),a(y.getModelInfo(e.get("modelCode"))),a(y.changeModelString(["views","title"],e.get("modelName"))),n.push("/editApproval/detail")}},s.a.createElement("span",{className:"icon-content",style:{background:{debit:"rgb(255,131,72)",credit:"rgb(94,129,209)",calculate:"rgb(242,86,67)"}[X[e.get("jrCategoryType")]]||"rgb(255,131,72)"}},s.a.createElement(l.l,{className:"icon",type:{debit:"fqsp-sr",credit:"fqsp-zc",calculate:"fqsp-nb"}[X[e.get("jrCategoryType")]]||"fqsp-sr",size:"20",color:"#fff"})),s.a.createElement("p",{className:"icon-text"},e.get("modelName")))}))))}))))}}]),n}(s.a.Component))||U,te=(n(1094),n(166),n(219),n(77),n(1035),n(1029),n(1030),n(38)),ne=Object(d.c)((function(e){return e}))(w=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(te.b.setDdConfig()),document.getElementsByClassName("scroll-view")[0].addEventListener("scroll",(function(e){e.target.scrollHeight<=e.target.clientHeight&&(e.target.scrollTop=0)}),!1);var e=this.props.editApprovalState.getIn(["views","title"]);S.a.setTitle({title:e})}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.history,a=e.editApprovalState,i=a.get("componentList"),r=a.get("modelInfo"),c=a.get("categoryList")||Object(p.fromJS)([]),u=(a.get("categoryCardList")||Object(p.fromJS)([]),a.get("currentCardTree")||Object(p.fromJS)([])),d=a.get("currentCardList")||Object(p.fromJS)([]),m=a.get("stockCardTree")||Object(p.fromJS)([]),g=a.get("stockCardList")||Object(p.fromJS)([]),v=a.get("projectCardTree")||Object(p.fromJS)([]),b=a.get("projectCardList")||Object(p.fromJS)([]),h=a.get("spaceId"),L=a.get("uploadKeyJson"),j=i.findIndex((function(e){return"MX"===e.get("jrComponentType")&&e.getIn(["detailList",0]).some((function(e){return"CH"===e.get("jrComponentType")}))}));return s.a.createElement(l.h,{className:"edit-approval"},s.a.createElement(l.s,{className:"approval-view",flex:"1"},i.map((function(e,a){if("MX"===e.get("jrComponentType")){e.get("detailList");return j>-1?s.a.createElement(o.Fragment,{key:e.get("componentId")},s.a.createElement(C,{item:e,dispatch:t,key:e.get("componentId"),district:m,cardList:g,modelInfo:r,index:a,history:n}),s.a.createElement("div",{className:"mx-title",style:{paddingTop:0}},s.a.createElement("span",null,"\u603b\u8ba1\uff1a",Object(O.n)(e.get("detailList").reduce((function(e,t){return e+Number(t.find((function(e){return"MX_AMOUNT"===e.get("jrComponentType")})).get("amount")||0)}),0))))):s.a.createElement(o.Fragment,{key:e.get("componentId")},e.get("detailList").map((function(i,l){return s.a.createElement(o.Fragment,{key:l},s.a.createElement("div",{className:"mx-title"},s.a.createElement("span",null,"\u660e\u7ec6\uff08",l+1,"\uff09"),e.get("detailList").size>1?s.a.createElement("span",{style:{color:"#5e81d1"},onClick:function(){var n=e.get("detailList").splice(l,1);t(y.changeModelString(["componentList",a,"detailList"],n))}},"\u5220\u9664"):""),i.map((function(o,m){var g={LSLB:c,WLDW:u,XM:v,BM:(o.get("extraSelectValueList")||Object(p.fromJS)([])).map((function(e){return e.set("key",e.get("name")).set("value",e.get("name"))}))}[o.get("jrComponentType")]||Object(p.fromJS)([]),h={LSLB:c,XM:b,WLDW:d}[o.get("jrComponentType")]||Object(p.fromJS)([]),O={MoneyField:"money",NumberField:"number"}[o.get("componentType")],S=W[o.get("jrComponentType")]||Y[o.get("componentType")]||f;return s.a.createElement(S,{isMx:!0,className:"mx-item ".concat(m===i.size-1?"no-margin-bottom":""),item:o,dispatch:t,key:o.get("componentId"),label:o.get("label"),placeHolder:o.get("placeHolder"),district:g,cardList:h,jrComponentType:e.get("jrComponentType"),modelInfo:r,type:O,size:e.get("detailList").size,index:a,innerIndex:m,idx:l,itemList:e.get("detailList"),placeArr:["componentList",a,"detailList",l,m],onChange:function(e){t(y.changeModelString(["componentList",a,"detailList",l,m,"value"],e))},history:n})})))})),s.a.createElement("div",{className:"mx-icon",onClick:function(){t(y.changeModelString(["componentList",a,"detailList",e.get("detailList").size],e.getIn(["detailList",0]).map((function(e){return e.set("value","").set("name","").set("code","")}))))}},s.a.createElement(l.l,{type:"add"})),s.a.createElement("div",{className:"mx-title",style:{paddingTop:0}},s.a.createElement("span",null,"\u603b\u8ba1\uff1a",Object(O.n)(e.get("detailList").reduce((function(e,t){return e+Number(t.find((function(e){return"MX_AMOUNT"===e.get("jrComponentType")})).get("value")||0)}),0)))))}var I=e,T={LSLB:c,WLDW:u,XM:v,BM:(I.get("extraSelectValueList")||Object(p.fromJS)([])).map((function(e){return e.set("key",e.get("name")).set("value",e.get("name"))}))}[I.get("jrComponentType")]||Object(p.fromJS)([]),E={LSLB:c,XM:b,WLDW:d}[I.get("jrComponentType")]||Object(p.fromJS)([]),N={MoneyField:"money",DDMultiSelectField:"multiple",NumberField:"number"}[I.get("componentType")],k=W[I.get("jrComponentType")]||Y[I.get("componentType")]||f;return s.a.createElement(k,{style:e.get("label")===e.get("dateRangeLabelFirst")&&"DDDateRangeField"===e.get("componentType")?{marginBottom:0,borderBottom:"1px solid #eee"}:{},uploadKeyJson:L,spaceId:h,item:I,dispatch:t,key:I.get("componentId"),label:I.get("label"),placeHolder:I.get("placeHolder"),district:T,cardList:E,jrComponentType:e.get("jrComponentType"),modelInfo:r,type:N,history:n,placeArr:["componentList",a],index:a,onChange:function(n){if("DDDateRangeField"===I.get("componentType")){if(e.get("label")===e.get("dateRangeLabelFirst")&&i.getIn([a+1,"value"])&&n>i.getIn([a+1,"value"]))return void S.a.toast.info(e.get("label")+"\u4e0d\u5f97\u5927\u4e8e"+i.getIn([a+1,"label"]));if(e.get("label")===e.get("dateRangeLabelLast")&&i.getIn([a-1,"value"])&&n<i.getIn([a-1,"value"]))return void S.a.toast.info(i.getIn([a-1,"label"])+"\u4e0d\u5f97\u5927\u4e8e"+e.get("label"))}if(t(y.changeModelString(["componentList",a,"value"],n)),"BM"===I.get("jrComponentType")){var r=i.find((function(e){return"BM"===e.get("jrComponentType")})).get("extraSelectValueList").find((function(e){return e.get("name")===n})).get("id");t(y.changeModelString(["views","departmentId"],r))}}})}))),s.a.createElement("div",{className:"bottom-btn"},s.a.createElement(l.d,null,s.a.createElement(l.c,{onClick:function(){var e=[];i.forEach((function(t){!t.get("value")&&t.get("required")&&e.push(t.get("label")),t.get("detailList")&&t.get("detailList").size&&t.get("detailList").map((function(t){return t.map((function(t){!t.get("value")&&t.get("required")&&e.push(t.get("label"))}))}))})),j>-1&&i.getIn([j,"detailList"]).some((function(e){var t=e.find((function(e){return"MX_AMOUNT"===e.get("jrComponentType")}));return e.getIn([0,"unit","name"])&&!t.get("unit")}))&&e.push("\u5355\u4f4d"),j>-1&&!i.getIn([j,"detailList"]).every((function(e){return e.find((function(e){return"MX_AMOUNT"===e.get("jrComponentType")})).get("amount")>0}))&&e.push("\u91d1\u989d"),e.length?S.a.toast.info(Array.from(new Set(e)).join("\u3001")+"\u4e0d\u80fd\u4e3a\u7a7a"):t(y.saveApprovalItem((function(){return t(y.initModel(r.get("modelCode")))})))}},s.a.createElement("span",null,"\u63d0\u4ea4")))))}}]),n}(o.Component))||w,ae=Object(d.c)((function(e){return e}))(P=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},e.confirmInfo=function(){var t=e.props,n=t.editApprovalState,a=t.dispatch,i=n.get("componentList"),r=n.get("views").get("idx"),c=i.find((function(e){return"MX"===e.get("jrComponentType")})).get("detailList").get(r)||Object(p.fromJS)([]),o=c.find((function(e){return"MX_AMOUNT"===e.get("jrComponentType")}))||Object(p.fromJS)({}),s=o.get("unit")||"",l=i.findIndex((function(e){return"MX"===e.get("jrComponentType")})),u=c.findIndex((function(e){return"MX_AMOUNT"===e.get("jrComponentType")})),d=o.get("amount")?Number(o.get("amount")):0,m=(c.find((function(e){return"\u6570\u91cf"===e.get("label")}))||Object(p.fromJS)({})).get("value"),g=o.get("price")?Number(o.get("price")):0;a(s?y.changeModelString(["componentList",l,"detailList",r,u,"value"],"".concat(Object(O.n)(d)).concat(s?"(".concat(m||"0.00").concat(s," | ").concat(g||"0.00","\u5143/").concat(s,")"):"")):y.changeModelString(["componentList",l,"detailList",r,u,"value"],"".concat(Object(O.n)(d))))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){S.a.setTitle({title:"\u5b58\u8d27\u660e\u7ec6"});var e=((this.props.editApprovalState.get("componentList").find((function(e){return"MX"===e.get("jrComponentType")})).getIn(["detailList",0])||[]).find((function(e){return"CH"===e.get("jrComponentType")}))||Object(p.fromJS)({})).get("selectValueScope");this.props.dispatch(y.getApprovalStockCard("ALL",!0,e.get("categoryList"),e.get("inCardList"),e.get("outCardList"),e.get("subCategoryList")))}},{key:"componentWillUnmount",value:function(){this.confirmInfo()}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.history,i=t.editApprovalState,r=this.state,c=(r.isAll,r.visible),o=r.categoryValue,u=(r.stockValue,r.warehouseValue,i.get("componentList")),d=i.get("views").get("idx"),g=u.find((function(e){return"MX"===e.get("jrComponentType")})),f=u.findIndex((function(e){return"MX"===e.get("jrComponentType")})),v=g.get("detailList"),b=v.size,L=v.get(d)||Object(p.fromJS)([]),C=L.some((function(e){return"CK"===e.get("jrComponentType")})),I=L.some((function(e){return"\u6570\u91cf"===e.get("label")})),T=L.findIndex((function(e){return"CH"===e.get("jrComponentType")})),E=L.find((function(e){return"CH"===e.get("jrComponentType")}))||Object(p.fromJS)({}),N=L.find((function(e){return"CK"===e.get("jrComponentType")}))||Object(p.fromJS)({}),k=L.findIndex((function(e){return"CK"===e.get("jrComponentType")})),A=L.find((function(e){return"MX_AMOUNT"===e.get("jrComponentType")}))||Object(p.fromJS)({}),J=L.findIndex((function(e){return"MX_AMOUNT"===e.get("jrComponentType")})),M=L.find((function(e){return"\u6570\u91cf"===e.get("label")}))||Object(p.fromJS)({}),D=L.findIndex((function(e){return"\u6570\u91cf"===e.get("label")})),U=i.get("stockCardTree")||Object(p.fromJS)([]),w=i.get("stockCardList")||Object(p.fromJS)([]),P=N.get("selectValueList")||Object(p.fromJS)([]),x=E.get("unit")||Object(p.fromJS)({}),F=x.get("unitList")||Object(p.fromJS)([]),H=[{key:x.get("name"),value:x.get("name")}].concat(Object(m.a)(F.toJS().map((function(e){return{key:e.name,value:e.name}})))),R=(E.get("unitPriceList")||Object(p.fromJS)([]),U.toJS());R.unshift({name:"\u5168\u90e8",key:"ALL",uuid:"ALL",childList:[]});var B=w.toJS().map((function(e){return Object(h.a)({},e,{name:"".concat(e.code," ").concat(e.name),label:e.name})})),_=(P.toJS(),E.get("selectValueScope")),V=(A.get("amount")&&Number(A.get("amount")),A.get("price")&&Number(A.get("price")),A.get("unit")||"");M.get("value");!function e(t){t.forEach((function(t){t.key="".concat(t.uuid),t.label=t.name,t.childList.length&&e(t.childList)}))}(R);var z=d-1,K=d+1;return s.a.createElement(l.h,{className:"edit-running"},s.a.createElement(l.f,{visible:c,type:"card",title:"\u8bf7\u9009\u62e9\u5b58\u8d27",icon:{type:"inventory-add",onClick:function(){n(y.changeModelString(["modelInfo","callback"],(function(e){var t=L;t=t.setIn([T,"value"],"".concat(e.code,"-").concat(e.name)).setIn([T,"code"],e.code).setIn([T,"name"],e.name).setIn([T,"unit"],Object(p.fromJS)(e.unit)).setIn([T,"unitPriceList"],Object(p.fromJS)(e.unitPriceList)).setIn([J,"unit"],"").setIn([J,"price"],""),e.isOpenedQuantity?e.isOpenedQuantity&&L.every((function(e){return"\u6570\u91cf"!==e.get("label")}))&&(t=t.push(Object(p.fromJS)({label:"\u6570\u91cf",componentType:"NumberField"}))):t=t.filter((function(e){return"\u6570\u91cf"!==e.get("label")})),E.get("value")?n(y.changeModelString(["componentList",f,"detailList",v.size],t)):n(y.changeModelString(["componentList",f,"detailList",d],t))}))),n(j.J()),n(j.b((function(){a.push("/config/inventory/inventoryInsert")}),"editApproval"))}},district:R,cardList:B,value:o,onChange:function(t){e.setState({categoryValue:t.key}),n(y.getApprovalStockCard(t.key,t.top,_.get("categoryList"),_.get("inCardList"),_.get("outCardList"),_.get("subCategoryList")))},onOk:function(e){if(e.length){var t=L;t=t.setIn([T,"value"],"".concat(e[0].code,"-").concat(e[0].label)).setIn([T,"code"],e[0].code).setIn([T,"name"],e[0].label).setIn([T,"unit"],Object(p.fromJS)(e[0].unit)).setIn([T,"unitPriceList"],Object(p.fromJS)(e[0].unitPriceList)).setIn([J,"unit"],"").setIn([J,"price"],""),e[0].isOpenedQuantity?e[0].isOpenedQuantity&&L.every((function(e){return"\u6570\u91cf"!==e.get("label")}))&&(t=t.push(Object(p.fromJS)({label:"\u6570\u91cf",componentType:"NumberField"}))):t=t.filter((function(e){return"\u6570\u91cf"!==e.get("label")})),n(y.changeModelString(["componentList",f,"detailList",d],t))}},onCancel:function(){e.setState({visible:!1})}},s.a.createElement("span",null)),s.a.createElement(l.s,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll"},s.a.createElement("div",{className:"lrls-card"},s.a.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},s.a.createElement("span",null,"\u5b58\u8d27\u660e\u7ec6(",d+1,")")),s.a.createElement("div",{className:"lrls-more-card lrls-bottom"},s.a.createElement("label",null,"\u5b58\u8d27:"),s.a.createElement("div",{className:"lrls-single",onClick:function(){e.setState({visible:!0})}},s.a.createElement(l.r,{className:"lrls-category lrls-padding"},E.get("value")?s.a.createElement("span",null," ","".concat(E.get("value").replace("-"," "))," "):s.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u5b58\u8d27\u5361\u7247"),s.a.createElement(l.l,{type:"triangle"})))),s.a.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:C?"":"none"}},s.a.createElement("label",null,"\u4ed3\u5e93:"),s.a.createElement(l.u,{className:"lrls-single",district:P.toJS().map((function(e){return{key:e,value:e}})),value:N.get("value"),onOk:function(e){n(y.changeModelString(["componentList",f,"detailList",d,k,"value"],e.value))}},s.a.createElement(l.r,{className:"lrls-category lrls-padding"},N.get("value")?s.a.createElement("span",null,N.get("value")," "):s.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u4ed3\u5e93\u5361\u7247"),s.a.createElement(l.l,{type:"triangle"})))),s.a.createElement(l.r,{className:"yysr-amount lrls-bottom",style:{display:I?"":"none"}},s.a.createElement("label",null,"\u6570\u91cf:"),s.a.createElement(l.A,{placeholder:"\u586b\u5199\u6570\u91cf",value:M.get("value"),onChange:function(e){if(/^-{0,1}\d*\.?\d{0,4}$/g.test(e)&&(n(y.changeModelString(["componentList",f,"detailList",d,D,"value"],e)),A.get("price")>0)){var t=Object(O.l)(A.get("price")*Number(e));n(y.changeModelString(["componentList",f,"detailList",d,J,"amount"],t))}}}),s.a.createElement(l.u,{className:"lrls-single",district:H,value:V,onOk:function(e){n(y.changeModelString(["componentList",f,"detailList",d,J,"unit"],e.value))}},s.a.createElement(l.r,{className:"lrls-account lrls-type"},V?s.a.createElement("span",null," ",V," "):s.a.createElement("span",{className:"lrls-placeholder"},"\u9009\u62e9\u6570\u91cf\u5355\u4f4d"),s.a.createElement(l.l,{type:"triangle"})))),s.a.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:I?"":"none"}},s.a.createElement("label",null,"\u5355\u4ef7:"),s.a.createElement(l.A,{placeholder:"\u8bf7\u586b\u5199\u5355\u4ef7",value:A.get("price"),onChange:function(e){if(/^\d*\.?\d{0,4}$/g.test(e)&&(n(y.changeModelString(["componentList",f,"detailList",d,J,"price"],e)),M.get("value")>0)){var t=Object(O.l)(M.get("value")*Number(e));n(y.changeModelString(["componentList",f,"detailList",d,J,"amount"],t))}}})),s.a.createElement("div",{className:"lrls-more-card",onClick:function(){E.get("value")||S.a.toast.info("\u8bf7\u5148\u9009\u62e9\u5b58\u8d27\u5361\u7247")}},s.a.createElement("label",null,"\u91d1\u989d:"),s.a.createElement(l.A,{placeholder:"\u8bf7\u586b\u5199\u91d1\u989d",value:A.get("amount"),onChange:function(e){if(/^-{0,1}\d*\.?\d{0,4}$/g.test(e)&&(n(y.changeModelString(["componentList",f,"detailList",d,J,"amount"],e)),M.get("value")>0)){var t=Object(O.l)(Number(e)/M.get("value"),4);n(y.changeModelString(["componentList",f,"detailList",d,J,"price"],t))}}})))),s.a.createElement(l.d,null,s.a.createElement(l.c,{disabled:z<=-1,onClick:function(){e.confirmInfo(),n(y.changeModelString(["views","idx"],z))}},s.a.createElement(l.l,{type:"arrow-right",style:{transform:"rotate(180deg)"}}),s.a.createElement("span",null,"\u4e0a\u4e00\u660e\u7ec6")),s.a.createElement(l.c,{onClick:function(){e.confirmInfo(),a.goBack()}},s.a.createElement(l.l,{type:"confirm"}),s.a.createElement("span",null,"\u786e\u5b9a")),s.a.createElement(l.c,{disabled:K==b,onClick:function(){e.confirmInfo(),n(y.changeModelString(["views","idx"],K))}},s.a.createElement("span",null,"\u4e0b\u4e00\u660e\u7ec6"),s.a.createElement(l.l,{type:"arrow-right"}))))}}]),n}(s.a.Component))||P,ie=n(542),re=Object(d.c)((function(e){return e}))(x=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={chooseName:e.props.editApprovalState.getIn(["views","modelName"])||"\u5168\u90e8",chooseCode:e.props.editApprovalState.getIn(["views","processCode"])||""},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.editApprovalState,i=t.history,r=this.state,c=r.chooseName,o=r.chooseCode,u=a.get("processModelList");a.get("views"),a.get("modelName");return s.a.createElement(l.h,{className:"spd",style:{background:"#fff"}},s.a.createElement("div",{className:"search-title"},"\u7c7b\u578b"),s.a.createElement(l.s,{className:"search-spd"},s.a.createElement("div",{className:"search-type"},u.map((function(t){return s.a.createElement("span",{key:t.get("processCode"),className:c===t.get("modelName")?"type-active":"",onClick:function(){return e.setState({chooseName:t.get("modelName"),chooseCode:t.get("processCode")})}},t.get("modelName"))})))),s.a.createElement("div",{className:"bottom-btn"},s.a.createElement(l.d,{className:!0},s.a.createElement(l.c,{onClick:function(){n(y.changeModelString(["views","modelName"],c)),n(y.changeModelString(["views","processCode"],"PROCESS_CODE_ALL"!==o?o:"")),i.goBack()}},s.a.createElement("span",null,"\u786e\u5b9a")))))}}]),n}(s.a.Component))||x,ce=(n(1461),function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).highlightWords=function(e,t){if(!t)return e;var n=e.split(t);return s.a.createElement("span",{className:"highlight-words"},n.map((function(e,a){return s.a.createElement(o.Fragment,null,"  ",s.a.createElement("span",null,e)," ",n.length-1>a?s.a.createElement("span",{style:{color:"#FF8348"}},t):""," ")})))},e}return Object(i.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,a=n.i,i=n.v,r=n.selectList,c=void 0===r?Object(p.fromJS)([]):r,o=n.dispatch,u=n.searchContent,d=i.get("finishTime")||i.get("createTime"),m=c.some((function(e){return e.get("processInstanceId")===i.get("processInstanceId")}));return e=i.get("finishTime")?"agree"===i.get("result")?"#5e81d1":"#ff3b30":"#ffb549",s.a.createElement(l.r,{key:a,className:"approval-spd-item"},s.a.createElement("div",{className:"spd-content",onClick:function(){if(m){var e=c.findIndex((function(e){return e.get("processInstanceId")===i.get("processInstanceId")}));o(y.changeModelString(["views","selectList"],c.splice(e,1)))}else o(y.changeModelString(["views","selectList"],c.push(Object(p.fromJS)({processInstanceId:i.get("processInstanceId"),isFinshed:!!i.get("finishTime"),title:i.get("processTitle"),result:i.get("result")}))))}},s.a.createElement("span",null,i.get("originateAvatar")?s.a.createElement("img",{className:"approval-avatar-img",src:i.get("originateAvatar")}):s.a.createElement("span",{className:"approval-all-item-main-avatar-skeleton"})),s.a.createElement("span",null,s.a.createElement("span",null,this.highlightWords(i.get("processTitle"),u)),Object.keys(i.get("displayMap").toJS()).map((function(e){return s.a.createElement("span",{key:e},"".concat(Q[e],"\uff1a"),t.highlightWords(i.getIn(["displayMap",e]),u))})),s.a.createElement("span",null,d.substr(0,10)),s.a.createElement("span",{style:{color:e}},i.get("finishTime")?"agree"===i.get("result")?"\u5ba1\u6279\u901a\u8fc7":"\u5ba1\u6279\u62d2\u7edd":"\u5ba1\u6279\u4e2d")),s.a.createElement("span",null,s.a.createElement(l.e,{checked:m}))))}}]),n}(s.a.Component)),oe=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tabs,n=void 0===t?[]:t,a=e.value,i=e.onChange;return s.a.createElement("div",{className:"xfn-tabs"},n.map((function(e,t){return s.a.createElement("span",{key:t,className:a===e.title?"active":"",onClick:function(){i(e,t)}},e.title)})))}}]),n}(s.a.Component),se=Object(d.c)((function(e){return e}))(F=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searching:!1,selecting:!1},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.editApprovalState.get("views"),t=e.get("processCode"),n=e.get("relationType");this.props.dispatch(y.getRelationList({processCode:t,relationType:n,searchContent:""},1)),this.props.dispatch(y.getApprovalProcessModelList({}))}},{key:"render",value:function(){var e=this.props,t=e.editApprovalState,n=e.dispatch,a=e.history,i=this.state,r=(i.searching,i.selecting,t.get("processModelList"),t.get("approvalList")),c=t.get("views"),u=c.get("currentPage"),d=c.get("pageCount"),p=c.get("searchContent"),m=c.get("processCode"),g=c.get("relationType"),f=c.get("selectList"),v=c.get("componentIndex"),b=c.get("modelName");return s.a.createElement(l.h,{className:"spd"},s.a.createElement(oe,{tabs:q,value:{APPROVER:"\u6211\u5904\u7406\u7684",SPONSOR:"\u6211\u53d1\u8d77\u7684",CARBON_COPY:"\u6284\u9001\u6211\u7684"}[g],onChange:function(e,t){n(y.getRelationList({processCode:m,relationType:["APPROVER","SPONSOR","CARBON_COPY"][t],searchContent:""},1))}}),s.a.createElement("div",{className:"search-approval"},s.a.createElement(l.r,null,s.a.createElement("div",{className:"spd-search"},s.a.createElement("span",{onClick:function(){return a.push("/editApproval/search/content")}},s.a.createElement(l.l,{type:"search"}),"\u641c\u7d22"),s.a.createElement("span",{onClick:function(){return a.push("/editApproval/search/type")},style:m?{color:"#5e81d1"}:{}},s.a.createElement(l.l,{type:"select"}),"\u7b5b\u9009"))),m?s.a.createElement("div",{className:"spd-search-result"},s.a.createElement("span",null,"\u641c\u7d22\u7ed3\u679c\uff1a".concat(b)),s.a.createElement(l.l,{type:"cancel",onClick:function(){n(y.getRelationList({processCode:"",relationType:g,searchContent:""},1)),n(y.changeModelString(["views","modelName"],""))}})):"",s.a.createElement("div",{className:"containers"},s.a.createElement(l.s,null,r.size?s.a.createElement(o.Fragment,null,s.a.createElement("div",{className:"flow-content"},r.map((function(e,t){return s.a.createElement(ce,{key:t,v:e,i:t,dispatch:n,selectList:f})}))),s.a.createElement(ie.c,{diff:1,classContent:"flow-content",callback:function(e){n(y.getRelationList({processCode:m,relationType:g,searchContent:p},u+1,!0,e))},isGetAll:u>=d,itemSize:r.size})):s.a.createElement("div",{className:"empty-approval"},s.a.createElement(l.l,{type:"empty-spd"}),s.a.createElement("span",null,m?"\u6ca1\u6709\u7b26\u5408\u7b5b\u9009\u6761\u4ef6\u7684\u5ba1\u6279\u5355":"\u6ca1\u6709".concat({APPROVER:"\u6211\u5904\u7406",SPONSOR:"\u6211\u53d1\u8d77",CARBON_COPY:"\u6284\u9001\u6211"}[g],"\u7684\u5ba1\u6279\u5355")))))),s.a.createElement("div",{className:"bottom-btn"},s.a.createElement(l.d,{className:!0},s.a.createElement(l.c,{onClick:function(){n(y.changeModelString(["componentList",v,"value"],f.map((function(e){return e.get("processInstanceId")})))),n(y.changeModelString(["componentList",v,"isFinshedList"],f.map((function(e){return e.get("isFinshed")})))),n(y.changeModelString(["componentList",v,"titleList"],f.map((function(e){return e.get("title")})))),n(y.changeModelString(["componentList",v,"result"],f.map((function(e){return e.get("result")})))),a.goBack()}},s.a.createElement("span",null,"\u786e\u5b9a")))))}}]),n}(s.a.Component))||F,le=Object(d.c)((function(e){return e}))(H=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={focus:!1,isSubmit:!1,searchHistory:localStorage.getItem("searchHistory")?localStorage.getItem("searchHistory").split(L.B):[]},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.editApprovalState,i=(t.choose,t.history),r=this.state,c=r.focus,u=r.isSubmit,d=a.get("approvalList"),m=a.get("views"),g=m.get("selectList"),f=m.get("currentPage"),v=m.get("pageCount"),b=m.get("relationType"),h=m.get("processCode"),O=m.get("searchContent"),S=m.get("componentIndex"),j=this.state.searchHistory||[];return s.a.createElement(l.h,{style:{background:"#fff"},className:"spd"},s.a.createElement(oe,{tabs:q,value:{APPROVER:"\u6211\u5904\u7406\u7684",SPONSOR:"\u6211\u53d1\u8d77\u7684",CARBON_COPY:"\u6284\u9001\u6211\u7684"}[b],onChange:function(e,t){n(y.changeModelString(["views","relationType"],["APPROVER","SPONSOR","CARBON_COPY"][t])),n(y.changeApprovalOutString("approvalList",Object(p.fromJS)([]))),i.goBack()}}),s.a.createElement("div",{className:"search-approval"},s.a.createElement("div",{className:"lrsp-tab-bar-item-top"},s.a.createElement($,{needCancel:!0,value:O,history:i,placeholder:"\u641c\u7d22\u6807\u9898\u3001\u7f16\u53f7",onFocus:function(){return e.setState({focus:!0,isSubmit:!1})},onBlur:function(){return e.setState({focus:!1})},onChange:function(e){n(y.changeModelString(["views","searchContent"],e))},onSubmit:function(t){t&&n(y.getRelationList({processCode:h,relationType:b,searchContent:t},1,!1,"",(function(){-1===j.indexOf(t)&&j.push(t),localStorage.setItem("searchHistory",j.join(L.B)),e.setState({isSubmit:!0,focus:!1,searchHistory:j})})))}})),!c&&u?s.a.createElement("div",{className:"spd-search-result"},"\u641c\u7d22\u7ed3\u679c\uff1a\u5171".concat(d.size,"\u6761")):s.a.createElement("div",{className:"spd-search-result",style:{display:j.length?"":"none"}},s.a.createElement("span",null,"\u641c\u7d22\u5386\u53f2 "),s.a.createElement(l.l,{type:"cancel",onClick:function(){localStorage.setItem("searchHistory",""),e.setState({searchHistory:""})}})),s.a.createElement("div",{className:"containers",style:{background:"#fff"}},!c&&u?s.a.createElement(l.s,null,d.size?s.a.createElement(o.Fragment,null,s.a.createElement("div",{className:"flow-content"},d.map((function(e,t){return s.a.createElement(ce,{key:t,v:e,i:t,searchContent:O,dispatch:n,selectList:g})}))),s.a.createElement(ie.c,{diff:1,classContent:"flow-content",callback:function(e){n(y.getRelationList({processCode:h,relationType:b,searchContent:O},f+1,!0,e))},isGetAll:f>=v,itemSize:d.size})):s.a.createElement("div",{className:"empty-approval"},s.a.createElement(l.l,{type:"empty-spd"}),s.a.createElement("span",null,"\u6ca1\u6709\u7b26\u5408\u7b5b\u9009\u6761\u4ef6\u7684\u5ba1\u6279\u5355"))):s.a.createElement(l.s,{style:{background:"#fff"}},s.a.createElement("div",{className:"history-list"},j.map((function(t){return s.a.createElement("span",{key:t,onClick:function(){n(y.getRelationList({processCode:h,relationType:b,searchContent:t},1,!1,"",(function(){e.setState({isSubmit:!0,focus:!1})})))}},t)})))))),s.a.createElement("div",{className:"bottom-btn"},s.a.createElement(l.d,{className:!0},s.a.createElement(l.c,{onClick:function(){n(y.changeModelString(["componentList",S,"value"],g.map((function(e){return e.get("processInstanceId")})))),n(y.changeModelString(["componentList",S,"isFinshedList"],g.map((function(e){return e.get("isFinshed")})))),n(y.changeModelString(["componentList",S,"result"],g.map((function(e){return e.get("result")})))),n(y.changeModelString(["componentList",S,"titleList"],g.map((function(e){return e.get("title")})))),i.push("/editApproval/detail")}},s.a.createElement("span",null,"\u786e\u5b9a")))))}}]),n}(s.a.Component))||H,ue=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return s.a.createElement(l.h,null,s.a.createElement(u.a,{path:"/editApproval/index",component:ee}),s.a.createElement(u.a,{path:"/editApproval/detail",component:ne}),s.a.createElement(u.a,{path:"/editApproval/stock",component:ae}),s.a.createElement(u.a,{path:"/editApproval/choose/related",component:se}),s.a.createElement(u.a,{path:"/editApproval/search/content",component:le}),s.a.createElement(u.a,{path:"/editApproval/search/type",component:re}))}}]),n}(s.a.Component),de=n(4),pe=n(1224),me=Object(p.fromJS)({dataList:[],modelInfo:{},views:{idx:0,isLoaded:!1,currentPage:1,pageCount:1,relationType:"APPROVER",processCode:"",searchContent:"",selectList:[]},componentList:[],categoryList:[],enclosureList:[],processModelList:[],approvalList:[]});var ge=n(1126),fe=n(1226),ve=n(1127),ye={editApprovalState:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(de.a)(e,pe.j,(function(){return me})),Object(de.a)(e,pe.h,(function(){return t.set("dataList",Object(p.fromJS)(n.data)).setIn(["views","isLoaded"],!0)})),Object(de.a)(e,pe.i,(function(){return t.set("componentList",Object(p.fromJS)(n.data.componentList)).set("departmentId",Object(p.fromJS)(n.data.departmentId)).set("modelInfo",Object(p.fromJS)(n.data.modelInfo))})),Object(de.a)(e,pe.e,(function(){return t.set(n.name,n.value)})),Object(de.a)(e,pe.d,(function(){return t.set(["modelInfo",n.name],n.value)})),Object(de.a)(e,pe.g,(function(){return t.setIn(n.place,n.value)})),Object(de.a)(e,pe.a,(function(){return n.code?40040===n.code?t=t.set("uploadKeyJson",Object(p.fromJS)({checkMoreFj:!1})).set("expire",0):t:t=t.set("uploadKeyJson",Object(p.fromJS)(n.receivedData)).set("expire",parseInt(n.receivedData.expire))})),Object(de.a)(e,pe.f,(function(){return t=t.updateIn(n.placeArr,(function(e){return(e||Object(p.fromJS)([])).concat(n.value)}))})),Object(de.a)(e,pe.b,(function(){return t=t.set("approvalList",n.receivedData.currentPage>1?Object(p.fromJS)(t.get("approvalList").toJS().concat(n.receivedData.processList)):Object(p.fromJS)(n.receivedData.processList)).setIn(["views","currentPage"],n.currentPage),1===n.currentPage&&(t=t.setIn(["views","pageCount"],n.receivedData.pageCount)),!0!==n.param.refresh&&(t=t.setIn(["views","relationType"],n.param.relationType).setIn(["views","searchContent"],n.param.searchContent).setIn(["views","processCode"],n.param.processCode)),t})),e)[n.type]||function(){return t})()},relativeConfState:ge.a,inventoryConfState:fe.a,projectConfState:ve.a}}}]);