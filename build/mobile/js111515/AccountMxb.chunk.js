(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[34],{1038:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return g}));a(115),a(219),a(56);var n=a(4),c=a(51),i=a(1),o=a(78),r=a(14),u=a(12),s=a(2),d=Object(i.fromJS)({views:{fromPage:"",uuidList:[]},currentItem:{},jrOri:{},category:{},processInfo:null});function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,a=arguments.length>1?arguments[1]:void 0;return((e={},Object(n.a)(e,f.GET_RUNNING_PREVIEW_BUSINESS_FETCH,(function(){return t=t.set("jrOri",Object(i.fromJS)(a.receivedData.jrOri)).set("category",Object(i.fromJS)(a.receivedData.category)).set("processInfo",a.receivedData.processInfo?Object(i.fromJS)(a.receivedData.processInfo):null).set("currentItem",a.currentItem).setIn(["views","fromPage"],a.fromPage).setIn(["views","uuidList"],a.uuidList)})),Object(n.a)(e,f.GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH,(function(){return t=t.set("jrOri",Object(i.fromJS)(a.receivedData.jrOri)).set("category",Object(i.fromJS)(a.receivedData.category)).set("processInfo",a.receivedData.processInfo?Object(i.fromJS)(a.receivedData.processInfo):null).set("lsItemData",Object(i.fromJS)(Object(c.a)({},a.receivedData.category,{},a.receivedData.jrOri)))})),Object(n.a)(e,f.PREVIEW_RUNNING_DATA,(function(){return t=t.setIn(["views","uuidList"],Object(i.fromJS)(a.data))})),e)[a.type]||function(){return t})()}var g={getRunningPreviewBusinessFetch:function(e,t,a,n,c){return function(i){e&&(s.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(o.a)("getRunningPreview","GET","oriUuid=".concat(e),(function(e){s.a.toast.hide(),Object(u.u)(e)&&(i({type:f.GET_RUNNING_PREVIEW_BUSINESS_FETCH,receivedData:e.data,currentItem:t,uuidList:a,fromPage:n}),c.push("/runningpreview"))})))}},getPreviewNextRunningBusinessFetch:function(e,t){return function(t){e&&(s.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(o.a)("getRunningPreview","GET","oriUuid=".concat(e),(function(e){s.a.toast.hide(),Object(u.u)(e)&&t({type:f.GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH,receivedData:e.data})})))}},insertRunningBusinessVc:function(e,t,a){return function(n,c){s.a.toast.loading(r.p,0),Object(o.a)("insertRunningBusinessVc","POST",JSON.stringify({uuidList:[e],vcindexlist:[a],year:t.slice(0,4),month:t.slice(5,7),action:"QUERY_JR-AUDIT"}),(function(t){if(s.a.toast.hide(),Object(u.u)(t)){if(t.data.result.length){var a=t.data.result.reduce((function(e,t){return e+","+t}));return void s.a.Alert(a)}n(g.getPreviewNextRunningBusinessFetch(e))}}))}},deleteRunningBusinessVc:function(e,t,a,n){return function(c,i){s.a.toast.loading(r.p,0),Object(o.a)("deletevc","POST",JSON.stringify({year:e,month:t,vcindexlist:a,action:"QUERY_JR-CANCEL_AUDIT"}),(function(e){s.a.toast.hide(),Object(u.u)(e)&&c(g.getPreviewNextRunningBusinessFetch(n))}))}},deleteRunning:function(e,t,a){return function(n){s.a.Confirm({message:"\u786e\u5b9a\u5220\u9664\u5417",title:"\u63d0\u793a",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(c){if(1===c.buttonIndex){var i=t.findIndex((function(t){return t.get("oriUuid")===e})),d=i+1;s.a.toast.loading(r.p,0),Object(o.a)("deleteRunningbusiness","POST",JSON.stringify({deleteList:[e]}),(function(e){if(Object(u.u)(e)){if(e.data.errorList.length){var c=e.data.errorList.reduce((function(e,t){return e+","+t}));s.a.Alert(c)}if(0==e.data.errorList.length){var o=t.delete(i);n({type:f.PREVIEW_RUNNING_DATA,data:o}),d<t.size?n(g.getPreviewNextRunningBusinessFetch(t.getIn([d,"oriUuid"]))):a.goBack()}}}))}},onFail:function(e){return alert(e)}})}}},f={GET_RUNNING_PREVIEW_BUSINESS_FETCH:"GET_RUNNING_PREVIEW_BUSINESS_FETCH",GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH:"GET_PREVIEW_NEXT_RUNNING_BUSINESS_FETCH",PREVIEW_RUNNING_DATA:"PREVIEW_RUNNING_DATA"}},1202:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return u}));var n="INIT_ACCOUNT_MXB",c="GET_ACCOUNT_DETAIL_CATEGORY_DETAIL",i="GET_ACCOUNT_DETAIL_LIST",o="CHANGE_ACCOUNT_DETAIL_COMMON_STRING",r="CHANGE_ACCOUNT_MXB_CHOOSE_VALUE",u="CHANGE_ACCOUNT_MXB_ACCOUNT_TYPE"},1318:function(e,t,a){"use strict";a.d(t,"e",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return g})),a.d(t,"a",(function(){return f})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return p}));a(32),a(61),a(31),a(70),a(29),a(82),a(76);var n=a(1202),c=a(78),i=a(12),o=a(2),r=a(14),u=a(130),s=function(e,t,a,s){return function(l,g){o.a.toast.loading(r.p,0);var f=g().accountMxbState.getIn(["views","accountDetailType"]),m=t.get("uuid"),p="".concat(t.get("uuid")).concat(r.B).concat(t.get("name"));Object(c.a)("getAccountReportDetail","POST",JSON.stringify({begin:a,end:s,typeUuid:"",accountUuid:m,accountType:"",accountDetailType:f,needPeriod:"true",currentPage:1,pageSize:r.C}),(function(c){if(o.a.toast.hide(),Object(i.u)(c)){l(d(a,s,p));var r=c.data.periodDtoJson?l(u.d(c.data.periodDtoJson)):[];l({type:n.e,receivedData:c.data,period:c.data.periodDtoJson,issues:r,issuedate:a,endissuedate:s,accountUuid:m,categoryName:"\u5168\u90e8",accountName:t.get("name"),currentPage:1,pageCount:c.data.pages,needPeriod:"true"}),e.push("accountmxb")}}))}},d=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(u){var s=a?"\u5168\u90e8"===a?"\u5168\u90e8":a.split(r.B)[1]:"\u5168\u90e8",d=a?"\u5168\u90e8"===a?"":a.split(r.B)[0]:"";Object(c.a)("getAccountReportCategory","POST",JSON.stringify({begin:e,end:t,accountUuid:d,accountType:o}),(function(e){Object(i.u)(e)&&u({type:n.d,accountCategory:e.data.accountCategory,otherCategory:e.data.otherCategory,otherType:e.data.otherType,accountList:e.data.accountList,accountTypeList:e.data.accountTypeList,accountName:s,accountUuid:d})}))}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3?arguments[3]:void 0,d=(arguments.length>4&&arguments[4],arguments.length>5?arguments[5]:void 0),l=arguments.length>6?arguments[6]:void 0;return function(g,f){o.a.toast.loading(r.p,0),Object(c.a)("getAccountReportCategory","POST",JSON.stringify({begin:e,end:t,accountUuid:s,accountType:l}),(function(m){if(Object(i.u)(m)){var p="\u5168\u90e8",v="";m.data.accountList&&m.data.accountList.map((function(e){e.uuid===s&&(!0,p=e.name,v=e.uuid)})),g({type:n.d,accountCategory:m.data.accountCategory,otherCategory:m.data.otherCategory,otherType:m.data.otherType,accountList:m.data.accountList,accountTypeList:m.data.accountTypeList,accountName:p,accountUuid:v});var y=f().accountMxbState.getIn(["views","categoryUuid"]),E=(f().accountMxbState.getIn(["views","categoryName"]),""),h="\u5168\u90e8";if(y){var N={ACCOUNT_CATEGORY:m.data.accountCategory,OTHER_CATEGORY:m.data.otherCategory,OTHER_TYPE:m.data.otherType}[d],b=!1;!function e(t){return t.forEach((function(t){t.uuid===y&&(b=!0,h=t.name),t.childList&&t.childList.length&&e(t.childList)}))}(N.childList),b&&(E=y)}Object(c.a)("getAccountReportDetail","POST",JSON.stringify({begin:e,end:t,accountUuid:v,accountType:l,accountDetailType:d,typeUuid:E,currentPage:1,pageSize:r.C,needPeriod:a}),(function(a){if(Object(i.u)(a)){var c=a.data.periodDtoJson?g(u.d(a.data.periodDtoJson)):[];g({type:n.e,receivedData:a.data,period:a.data.periodDtoJson,issues:c,issuedate:e,endissuedate:t,currentPage:1,categoryName:h,categoryUuid:E,pageCount:a.data.pages,accountUuid:v})}o.a.toast.hide()}))}else o.a.toast.hide()}))}},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,f=arguments.length>7?arguments[7]:void 0,m=arguments.length>8?arguments[8]:void 0,p=arguments.length>9?arguments[9]:void 0;return function(v,y){!m&&o.a.toast.loading("\u52a0\u8f7d\u4e2d...",0);var E=y().accountMxbState.getIn(["views","accountType"]);Object(c.a)("getAccountReportDetail","POST",JSON.stringify({begin:e||"",end:t||"",needPeriod:a,accountUuid:s,accountType:E,accountDetailType:d,typeUuid:l,currentPage:g,pageSize:r.C}),(function(c){if(!m&&o.a.toast.hide(),Object(i.u)(c)){m&&p.setState({isLoading:!1});var r=c.data.periodDtoJson?v(u.d(c.data.periodDtoJson)):[];v({type:n.e,receivedData:c.data,period:c.data.periodDtoJson,issues:r,issuedate:e,endissuedate:t,currentPage:g,categorValue:"",pageCount:c.data.pages,accountUuid:s,needPeriod:a,shouldConcat:f})}}))}},f=function(e,t,a){return function(c){c({type:n.a,parent:e,position:t,value:a})}},m=function(e){return{type:n.c,value:e}},p=function(e){return{type:n.b,value:e}}},1319:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a(32),a(31),a(70);var n=a(4),c=a(220),i=a(1),o=a(1202),r=Object(i.fromJS)({views:{issuedate:"",endissuedate:"",accountUuid:"",accountName:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",accountDetailType:"ACCOUNT_CATEGORY",accountDetailName:"\u8d26\u6237\u6d41\u6c34",needPeriod:"",QcqmDirection:"",chooseValue:"ISSUE",accountType:""},category:{accountCategory:[{childList:[]}],otherCategory:[{childList:[]}],otherType:[{childList:[]}],accountList:[{childList:[]}],accountTypeList:[]},QcData:[],QmData:[],issues:[],detailsTemp:[]});function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,a=arguments.length>1?arguments[1]:void 0;return((e={},Object(n.a)(e,o.f,(function(){return r})),Object(n.a)(e,o.d,(function(){var e=[{uuid:a.accountCategory.uuid,name:a.accountCategory.name,childList:[]}];e.push.apply(e,Object(c.a)(a.accountCategory.childList));var n=[{key:"",label:"\u5168\u90e8",childList:[]}],o={cash:"\u73b0\u91d1",general:"\u4e00\u822c\u6237",basic:"\u57fa\u672c\u6237",Alipay:"\u652f\u4ed8\u5b9d",WeChat:"\u5fae\u4fe1",other:"\u5176\u5b83",spare:"\u5907\u7528\u91d1"};return a.accountTypeList&&a.accountTypeList.length&&a.accountTypeList.map((function(e){n.push({key:e,label:o[e],childList:[]})})),t.setIn(["category","accountCategory"],Object(i.fromJS)(e)).setIn(["category","accountList"],Object(i.fromJS)(a.accountList.length>0?a.accountList:[{childList:[]}])).setIn(["category","accountTypeList"],Object(i.fromJS)(n)).setIn(["views","accountUuid"],Object(i.fromJS)(a.accountUuid)).setIn(["views","accountName"],Object(i.fromJS)(a.accountName))})),Object(n.a)(e,o.e,(function(){if("true"===a.needPeriod){a.period;t=t.set("period",Object(i.fromJS)(a.period)).set("issues",Object(i.fromJS)(a.issues))}var e=[];a.shouldConcat?e=t.get("detailsTemp").toJS().concat(a.receivedData.detailList):e=a.receivedData.detailList;return a.categoryName&&(t=t.setIn(["views","categoryName"],a.categoryName).setIn(["views","categoryUuid"],a.categoryUuid)),a.accountName&&(t=t.setIn(["views","accountName"],a.accountName)),t.set("detailsTemp",Object(i.fromJS)(e)).set("QcData",Object(i.fromJS)(a.receivedData.beginDetail)).set("QmData",Object(i.fromJS)(a.receivedData.totalDetail)).set("currentPage",a.currentPage).set("pageCount",a.pageCount).setIn(["views","issuedate"],Object(i.fromJS)(a.issuedate)).setIn(["views","endissuedate"],Object(i.fromJS)(a.endissuedate)).setIn(["views","accountUuid"],Object(i.fromJS)(a.accountUuid))})),Object(n.a)(e,o.a,(function(){return t.setIn([a.parent,a.position],a.value)})),Object(n.a)(e,o.c,(function(){return t=t.setIn(["views","chooseValue"],a.value)})),Object(n.a)(e,o.b,(function(){return t.setIn(["views","accountType"],a.value)})),e)[a.type]||function(){return t})()}},1853:function(e,t,a){},984:function(e,t,a){"use strict";a.r(t),a.d(t,"reducer",(function(){return T})),a.d(t,"view",(function(){return O}));a(115),a(31),a(56),a(70);var n,c,i,o,r=a(7),u=a(8),s=a(9),d=a(10),l=a(0),g=a.n(l),f=a(47),m=(a(1),a(1853),a(2)),p=(a(14),a(11)),v=a(542),y=(a(32),a(24)),E=(a(1082),a(1038)),h=Object(y.immutableRenderDecorator)(n=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.style,n=e.dispatch,c=e.className,i=e.history,o=e.detailsTemp;return g.a.createElement("div",{className:"ba "+c,style:a},g.a.createElement("div",null,g.a.createElement("span",{className:"name",onClick:function(e){n(E.b.getRunningPreviewBusinessFetch(t.get("oriUuid"),t,o,"mxb",i))}},g.a.createElement("span",{className:"name-name"},"".concat(t.get("oriDate"),"_").concat(t.get("oriAbstract"))))),g.a.createElement("div",{className:"ba-info"},g.a.createElement("span",{className:"ba-type-name"},"".concat(t.get("jrIndex"),"\u53f7")),g.a.createElement("span",null,0===t.get("creditAmount")?"\u6536\u6b3e":"\u4ed8\u6b3e"),g.a.createElement(p.a,{showZero:!0},0===t.get("debitAmount")?t.get("creditAmount"):t.get("debitAmount")),g.a.createElement(p.a,{showZero:!0},t.get("balance"))))}}]),a}(g.a.Component))||n,N=a(1318),b=a(130),O=Object(f.c)((function(e){return e}))((o=i=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={showModal:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){m.a.setTitle({title:"\u8d26\u6237\u660e\u7ec6\u8868"}),m.a.setIcon({showIcon:!1}),this.props.homeState.getIn(["permissionInfo","Report","exportExcel","permission"])||m.a.setRight({show:!1})}},{key:"render",value:function(){var e=this.props,t=(e.allState,e.dispatch),a=e.accountMxbState,n=e.history,c=(this.state.showModal,a.getIn(["category","accountList"])),i=c.size?c:[],o=a.getIn(["views","issuedate"]),r=a.getIn(["views","endissuedate"]),u=a.get("issues"),s=u.findIndex((function(e){return e.get("value")===o})),d=u.slice(0,s),l=a.getIn(["views","accountUuid"]),f=a.getIn(["views","accountName"]),m=a.getIn(["views","accountDetailType"]),y=(a.getIn(["views","accountDetailName"]),a.getIn(["views","categoryUuid"])),E=a.getIn(["views","categoryName"]),O=(a.getIn(["views","QcqmDirection"]),a.getIn(["views","chooseValue"])),T=a.getIn(["views","accountType"]),I=a.getIn(["category","accountCategory"]),S=a.getIn(["category","accountTypeList"]),C=a.get("detailsTemp"),_=(a.get("needPeriod"),a.get("QcData")),j=a.get("QmData"),U=a.get("currentPage"),D=a.get("pageCount"),R=I,w=i?i.toJS():[];w.unshift({name:"\u5168\u90e8",uuid:"all"});var L=o,A=r||L;return t(b.i("runningReport","",(function(){return function(e){return e(b.a("sendAccountExcelDetail",{begin:L,end:A,accountUuid:l,accountDetailType:m,typeUuid:y,accountType:T}))}}),"",(function(){return function(e){return e(b.a("sendAccountExcelDetail",{begin:L,end:A,accountUuid:l,accountDetailType:m,typeUuid:y,isExportAll:!0}))}}))),g.a.createElement(p.h,{className:"account-mxb"},g.a.createElement(v.b,{start:o,end:r,issues:u,nextperiods:d,chooseValue:O,onBeginOk:function(e){t(N.d(e,"","true",l,f,m,T))},onEndOk:function(e,a){t(N.d(e,a,"true",l,f,m,T))},changeChooseValue:function(e){return t(N.c(e))}}),g.a.createElement("div",{className:"account-mxb-select"},g.a.createElement("div",{className:"select-account"},g.a.createElement(p.f,{type:"card",parentDisabled:!1,cardValue:l||"all",value:T,district:S.toJS(),cardList:w,onChange:function(e){t(N.b(e.key)),t(N.d(o,r,"","","\u5168\u90e8",m,e.key))},onOk:function(e){var a="all"===e[0].uuid?"":e[0].uuid;t(N.d(o,r,"",a,e[0].name,m,T))}},g.a.createElement(p.r,null,g.a.createElement("span",null,"\u5168\u90e8"===f?{cash:"\u73b0\u91d1",general:"\u4e00\u822c\u6237",basic:"\u57fa\u672c\u6237",Alipay:"\u652f\u4ed8\u5b9d",WeChat:"\u5fae\u4fe1",other:"\u5176\u5b83",spare:"\u5907\u7528\u91d1","":"\u5168\u90e8"}[T]:f),g.a.createElement(p.l,{type:"triangle"})))),g.a.createElement("div",{className:"select-category"},g.a.createElement("div",{className:"select-category-box"},g.a.createElement(p.D,{district:R.toJS(),value:E,notLast:!0,onChange:function(e){var a="\u5168\u90e8"===e.name?"":e.uuid;t(N.a("views","categoryUuid",a)),t(N.a("views","categoryName",e.name)),t(N.a("views","QcqmDirection",e.direction?e.direction:"")),t(N.f(o,r,"",l,m,a,1,!1))}},g.a.createElement(p.r,null,g.a.createElement("span",{style:{color:"\u8bf7\u9009\u62e9\u7c7b\u522b"==E?"#ccc":""}},E),g.a.createElement(p.l,{type:"triangle"})))))),"ACCOUNT_CATEGORY"===m?g.a.createElement(p.r,{className:"item-title-qc"},g.a.createElement("div",{className:"qc-title-item"},"\u671f\u521d\u4f59\u989d"),g.a.createElement("div",{className:"qc-title-item"},g.a.createElement(p.a,{showZero:!0},_&&_.get("balance")))):"",g.a.createElement(p.s,{flex:"1",uniqueKey:"accountmx-scroll",className:"scroll-item",savePosition:!0},g.a.createElement("div",{className:"flow-content"},C.map((function(e,a){return g.a.createElement("div",{key:a},g.a.createElement(h,{className:"balance-running-tabel-width",item:e,history:n,dispatch:t,issuedate:o,detailsTemp:C}))}))),g.a.createElement(v.c,{diff:100,classContent:"flow-content",callback:function(e){t(N.f(o,r,"",l,m,y,U+1,!0,!0,e))},isGetAll:U>=D,itemSize:C.size})),g.a.createElement(p.r,{className:"item-title-qc"},g.a.createElement("div",{className:"qc-title-item"},"\u671f\u672b\u4f59\u989d"),g.a.createElement("div",{className:"qc-title-item"},g.a.createElement(p.a,{showZero:!0},j.get("balance")))))}}]),a}(g.a.Component),i.displayName="AccountMxb",c=o))||c,T={accountMxbState:a(1319).a,runningPreviewState:E.a}}}]);