(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[43],{1001:function(t,e,n){"use strict";n.r(e),n.d(e,"reducer",(function(){return E})),n.d(e,"view",(function(){return p}));n(31);var a,r=n(7),s=n(8),c=n(9),u=n(10),i=n(0),o=n.n(i),f=n(1),l=n(47),g=n(1070),d=n(1112),S=(n(1328),n(11)),m=n(2),y=S.k.Item,p=Object(l.c)((function(t){return t}))(a=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){var t;return Object(r.a)(this,n),(t=e.call(this)).state={newcategory:""},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this.props,e=t.assconfigState,n=t.allState,a=t.history,r=t.dispatch,s=t.homeState,c=(this.state.newcategory,s.getIn(["permissionInfo","Config"]).getIn(["edit","permission"]));m.a.setRight({show:!1});var u=e.get("assConfigMode");"insert"===u?m.a.setTitle({title:"\u65b0\u589e\u8f85\u52a9\u6838\u7b97"}):"modify"===u&&m.a.setTitle({title:"\u4fee\u6539\u8f85\u52a9\u6838\u7b97"});var i=e.get("ass"),l="insert"===e.get("assConfigMode"),p=n.get("assTags"),E=0===p.size?Object(f.fromJS)([]):p.map((function(t){return{value:"".concat(t),key:"".concat(t)}})).push({value:"\u8f93\u5165\u81ea\u5b9a\u4e49",key:"\u8f93\u5165\u81ea\u5b9a\u4e49"});i.get("asscategory");return o.a.createElement(S.h,{className:"ass-option"},o.a.createElement(S.r,{flex:"1"},o.a.createElement(S.k,null,o.a.createElement(y,{label:"\u7f16\u7801\uff1a",className:"form-offset-up"},o.a.createElement(S.z,{type:"text",textAlign:"right",value:i.get("assid"),placeholder:"\u8f93\u5165\u7f16\u7801 (\u965016\u4f4d\u6570\u5b57\u5b57\u6bcd)",onChange:function(t){return r(g.h(t))}}),"\xa0",o.a.createElement(S.l,{type:"arrow-right",className:"input-icon-arrow-right"})),o.a.createElement(y,{label:"\u540d\u79f0\uff1a",className:"form-offset-up form-offset-margin"},o.a.createElement(S.z,{type:"text",textAlign:"right",value:i.get("assname"),placeholder:"\u8f93\u5165\u540d\u79f0",onChange:function(t){return r(g.i(t))}}),"\xa0",o.a.createElement(S.l,{type:"arrow-right",className:"input-icon-arrow-right"})),o.a.createElement(y,{label:"\u7c7b\u522b\uff1a",className:"form-offset-up form-offset-margin form-offset-border"},l?o.a.createElement(S.v,{className:"info-select",district:E,value:i.get("asscategory")?i.get("asscategory"):"\u8bf7\u9009\u62e9",style:{color:i.get("asscategory")?"#333":"#999"},onOk:function(t){"\u8f93\u5165\u81ea\u5b9a\u4e49"===t.value?m.a.Prompt({message:"\u8f93\u5165\u81ea\u5b9a\u4e49\u7c7b\u522b:",buttonLabels:["\u53d6\u6d88","\u786e\u8ba4"],onSuccess:function(t){1===t.buttonIndex&&r(g.c(t.value))},onFail:function(){}}):r(g.c(t.value))}},o.a.createElement("span",null,i.get("asscategory")?i.get("asscategory"):"\u8bf7\u9009\u62e9")):o.a.createElement("span",null,i.get("asscategory")?i.get("asscategory"):"\u65e0\u7c7b\u522b")),o.a.createElement(y,{label:"\u72b6\u6001\uff1a",className:"form-offset-up form-disable",style:{display:"insert"===u?"none":""}},o.a.createElement("span",{className:"form-disable-name"},"TRUE"===i.get("disable")?"\u5df2\u7981\u7528":"\u5df2\u542f\u7528"),o.a.createElement(S.w,{checked:"TRUE"!==i.get("disable"),checkedChildren:"",unCheckedChildren:"",onClick:function(){return r(g.g())}})),o.a.createElement("div",{className:"ass-tip"},"\u70b9\u51fb\u7c7b\u522b\u540d\u79f0\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\u7c7b\u522b"))),o.a.createElement(S.d,{type:"ghost",height:50},o.a.createElement(S.c,{onClick:function(){return a.goBack()}},o.a.createElement(S.l,{type:"cancel"}),o.a.createElement("span",null,"\u53d6\u6d88")),o.a.createElement(S.c,{disabled:!c,onClick:function(){return r(d.b(a))}},o.a.createElement(S.l,{type:"save"}),o.a.createElement("span",null,"\u4fdd\u5b58"))))}}]),n}(o.a.Component))||a,E={}},1070:function(t,e,n){"use strict";n.d(e,"q",(function(){return i})),n.d(e,"r",(function(){return o})),n.d(e,"u",(function(){return f})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return g})),n.d(e,"c",(function(){return d})),n.d(e,"o",(function(){return S})),n.d(e,"n",(function(){return m})),n.d(e,"b",(function(){return y})),n.d(e,"a",(function(){return p})),n.d(e,"v",(function(){return E})),n.d(e,"s",(function(){return b})),n.d(e,"g",(function(){return O})),n.d(e,"l",(function(){return _})),n.d(e,"p",(function(){return A})),n.d(e,"m",(function(){return C})),n.d(e,"w",(function(){return h})),n.d(e,"t",(function(){return N})),n.d(e,"f",(function(){return I})),n.d(e,"e",(function(){return v})),n.d(e,"d",(function(){return T})),n.d(e,"j",(function(){return j})),n.d(e,"k",(function(){return k}));var a=n(12),r=n(1085),s=n(17),c=n(2),u=n(14),i=function(){return function(t){c.a.toast.loading(u.p,0),Object(s.g)("assgetAMB","GET","",(function(e){Object(a.u)(e)&&(c.a.toast.hide(),t({type:r.a,receivedData:e.data}))}))}},o=function(t,e){return function(n){c.a.Confirm({message:"\u786e\u5b9a\u5f00\u901a\u8f85\u52a9\u6838\u7b97\u7c7b\u522b[".concat(t.get(0),"]\u4e3a\u9ed8\u8ba4\u963f\u7c73\u5df4\uff1f"),title:"\u63d0\u793a",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(n){1===n.buttonIndex&&(c.a.toast.loading(u.p,0),Object(s.g)("assrelateAMB","POST",JSON.stringify({assCategoryList:t}),(function(t){Object(a.u)(t,"show")&&e.goBack()})))},onFail:function(t){return alert(t)}})}},f=function(t){return{type:r.s,asscategory:t}},l=function(t){return{type:r.g,assid:t}},g=function(t){return{type:r.h,assname:t}},d=function(t){return{type:r.d,asscategory:t}},S=function(t){return{type:r.m,idx:t}},m=function(t){return{type:r.l,idx:t}},y=function(t,e){return{type:r.c,ass:t,idx:e}},p=function(t){return{type:r.b,tab:t}},E=function(){return{type:r.v}},b=function(){return{type:r.o}},O=function(){return{type:r.f}},_=function(t){return{type:r.j,assCategory:t}},A=function(t,e,n){return function(i){c.a.toast.loading(u.p,0),Object(s.g)("assCheck","POST",JSON.stringify({assCategory:t,assId:e,assName:n}),(function(t){if(Object(a.u)(t)){if(c.a.toast.hide(),!t.data.message.length)return Object(a.u)("","","",e+"\u4e0d\u9700\u8981\u4f7f\u7528\u53cd\u6094\u6a21\u5f0f");i({type:r.n,assId:e,assName:n,assMessage:t.data.message})}}))}},C=function(t){return{type:r.k,newAssId:t}},h=function(t){return{type:r.w,bool:t}},N=function(t,e){return function(n){c.a.toast.loading(u.p,0),Object(s.g)("assRegret","POST",JSON.stringify({assCategory:t.get("assCategory"),oldAssId:t.get("oldAssId"),assId:t.get("assId"),assName:t.get("assName")}),(function(t){Object(a.u)(t)&&(c.a.toast.hide(),n(h(!1)),e.goBack())}))}},I=function(){return function(t){t({type:r.e})}},v=function(t){return function(e){e({type:r.u,value:t})}},T=function(t){return function(e){e({type:r.t,value:t})}},j=function(t){return function(e){e({type:r.i,visible:t})}},k=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"false";return function(o){c.a.toast.loading(u.p,0),Object(s.g)("changeAssName","POST",JSON.stringify({oldName:t,newName:e,confirmModifyAnyWay:i}),(function(t){Object(a.u)(t)&&(t.data.countMoreThenRestrict?o({type:r.i,visible:!0}):(o({type:r.i,visible:!1}),o({type:r.e}),o({type:r.u,value:""}),o({type:r.t,value:""}),c.a.toast.hide(),o(h(!1)),n.goBack()))}))}}},1085:function(t,e,n){"use strict";n.d(e,"p",(function(){return a})),n.d(e,"m",(function(){return r})),n.d(e,"l",(function(){return s})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return u})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return f})),n.d(e,"r",(function(){return l})),n.d(e,"q",(function(){return g})),n.d(e,"v",(function(){return d})),n.d(e,"o",(function(){return S})),n.d(e,"a",(function(){return m})),n.d(e,"s",(function(){return y})),n.d(e,"f",(function(){return p})),n.d(e,"j",(function(){return E})),n.d(e,"n",(function(){return b})),n.d(e,"k",(function(){return O})),n.d(e,"w",(function(){return _})),n.d(e,"e",(function(){return A})),n.d(e,"u",(function(){return C})),n.d(e,"t",(function(){return h})),n.d(e,"i",(function(){return N}));var a="INIT_ASSCONFIG",r="CHANGE_TAB_INDEX_ASSCONFIG",s="CHANGE_TAB_INDEX_AC_ASSCONFIG",c="CHANGE_ASS_ID",u="CHANGE_ASS_NAME",i="CHANGE_ASS_CATEGORY",o="BEFORE_MODIFY_ASS",f="BEFORE_INSERT_ASS",l="MODIFY_ASS_FETCH",g="INSERT_ASS_FETCH",d="SHOW_ALL_ASS_CHECKBOX",S="HIDE_ALL_ASS_CHECKBOX",m="AFTER_ASSGETAMB_GET",y="SET_ASSRELATE_AMB",p="CHANGE_ASS_DISABLE_STATE",E="CHANGE_REVERS_ASS_CATEGORY",b="CHECK_REVERS_ASS_ID_CHECK",O="CHANGE_REVERS_NEW_ASS_ID",_="SHOW_REVERS_CONFIR_MODAL",A="CHANGE_ASS_CONFIG_SHOW_TYPE",C="SET_ASS_CONFIG_OLD_NAME",h="SET_ASS_CONFIG_NEW_NAME",N="CHANGE_ASS_TYPE_CHANGE_COMFIRM_MODAL_VISIBLE"},1112:function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return l})),n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return d})),n.d(e,"e",(function(){return E})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return O}));n(32),n(55),n(31),n(219),n(116),n(29),n(48);var a=n(13),r=n(17),s=n(12),c=n(1),u=n(2),i=n(1070),o=n(14),f=function(){return function(t){u.a.toast.loading(o.p,0),Object(r.g)("getacasslist","GET","",(function(e){Object(s.u)(e)&&(u.a.toast.hide(),t({type:a.m,receivedData:e.data}))}))}},l=function(t){return function(e,n){var a=n(),c=a.assconfigState,i=a.allState,l=c.get("tabSelectedIndex"),g=i.get("assTags").get(l),d=i.get("aclist").toSeq().filter((function(t){return t.get("selected")})).map((function(t){return t.get("acid")}));u.a.toast.loading(o.p,0),Object(r.g)("relateass","POST",JSON.stringify({asscategory:g,acidlist:d}),(function(n){Object(s.u)(n,"show")&&(e(f()),Object(s.s)(n),t.goBack())}))}},g=function(){return function(t,e){u.a.Confirm({message:"\u786e\u5b9a\u5220\u9664\uff1f",title:"\u63d0\u793a",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(n){if(1===n.buttonIndex){var a=e(),l=a.assconfigState,g=a.allState,d=l.get("tabSelectedIndex"),S=g.get("assTags").get(d),m=g.get("acasslist").toSeq().reduce((function(t,e){return t.concat(e.get("asslist"))}),Object(c.fromJS)([])).filter((function(t){return t.get("selected")})).map((function(t){return t.get("assid")}));u.a.toast.loading(o.p,0),Object(r.g)("deleteass","POST",JSON.stringify({asscategory:S,assidlist:m}),(function(e){Object(s.u)(e)&&(u.a.toast.hide(),Object(s.s)(e),t(f()),t(i.s()))}))}},onFail:function(t){return alert(t)}})}},d=function(t){return function(e,n){var a=n().assconfigState,r=n().allState,c=a.get("ass");if(!(c=c.set("asscategory",c.get("asscategory").replace(/(^\s*)|(\s*$)/g,"")).set("assname",c.get("assname").replace(/(^\s*)|(\s*$)/g,""))).get("assid"))return Object(s.u)("","","","\u8f85\u52a9\u6838\u7b97\u7f16\u7801\u672a\u8f93\u5165");if(!c.get("asscategory"))return Object(s.u)("","","","\u8f85\u52a9\u6838\u7b97\u7c7b\u522b\u672a\u8f93\u5165");if(!c.get("assname"))return Object(s.u)("","","","\u8f85\u52a9\u6838\u7b97\u540d\u79f0\u672a\u8f93\u5165");if(c.get("assid").length>o.k)return Object(s.u)("","","","\u8f85\u52a9\u6838\u7b97\u7f16\u7801\u4f4d\u6570\u4e0d\u8d85\u8fc7".concat(o.k,"\u4f4d"));if(s.g.hasChiness(c.get("assname")))return Object(s.u)("","","","\u540d\u79f0\u5305\u542b\u4e2d\u6587\u53ca\u4e2d\u6587\u6807\u70b9\u5b57\u7b26\uff0c\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(o.c,"\u4f4d\uff1b\u4e0d\u5305\u542b\u4e2d\u6587\u53ca\u4e2d\u6587\u6807\u70b9\u5b57\u7b26\uff0c\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7").concat(o.d,"\u4f4d"));u.a.toast.loading(o.p,0);var i=c.get("asscategory"),f=r.get("acasslist").filter((function(t){return t.get("asscategory")===i}));if(f.size){var l=f.getIn([0,"asslist"]);if("insert"===a.get("assConfigMode"))l.some((function(t){return t.get("assname")===c.get("assname")}))?e(S(c,a,t)):e(m(c,a,t));else if("modify"===a.get("assConfigMode")){var g=a.get("modifyIdx");l.getIn([g,"assname"])!==c.get("assname")&&l.some((function(t,e){return t.get("assname")===c.get("assname")&&g!==e}))?e(S(c,a,t)):e(m(c,a,t))}}else e(m(c,a,t))}},S=function(t,e,n){return function(a){u.a.Confirm({message:"\u5df2\u5b58\u5728\u540d\u79f0\u76f8\u540c\u7684\u6838\u7b97\u5bf9\u8c61\uff0c\u662f\u5426\u786e\u5b9a\u4fdd\u5b58\uff1f",title:"\u63d0\u793a",buttonLabels:["\u53d6\u6d88","\u4fdd\u5b58"],onSuccess:function(r){1===r.buttonIndex&&a(m(t,e,n))}})}},m=function(t,e,n){return function(a){u.a.toast.loading(o.p,0),{modify:function(){var c=e.get("assSelectedIndex");Object(r.g)("modifyass","POST",JSON.stringify(t),(function(e){Object(s.u)(e,"show")&&(a(y(e,t,c)),n.goBack(),e.data&&e.data.length&&u.a.Alert(e.data[0]))}))},insert:function(){Object(r.g)("insertass","POST",JSON.stringify(t.merge({action:"MANAGER-ASS_SETTING-CUD_ASS"})),(function(e){Object(s.u)(e,"show")&&(a(p(e,t)),n.goBack())}))}}[e.get("assConfigMode")]()}},y=function(t,e,n){return function(r){r({type:a.nb,receivedData:t,ass:e,idx:n})}},p=function(t,e){return{type:a.kb,receivedData:t,ass:e}},E=function(t,e){return{type:a.xb,acAssSelectedIndex:t,idx:e}},b=function(t){return{type:a.yb,acAssSelectedIndex:t}},O=function(t){return{type:a.Db,acAssSelectedIndex:t}}},1328:function(t,e,n){}}]);