(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[108],{1094:function(e,t,a){var n=a(39),r=a(1103);n({target:"Array",stat:!0,forced:!a(544)((function(e){Array.from(e)}))},{from:r})},1103:function(e,t,a){"use strict";var n=a(221),r=a(68),l=a(1032),c=a(546),i=a(46),o=a(172),s=a(545);e.exports=function(e){var t,a,u,p,d,m,g=r(e),v="function"==typeof this?this:Array,h=arguments.length,y=h>1?arguments[1]:void 0,f=void 0!==y,E=s(g),b=0;if(f&&(y=n(y,h>2?arguments[2]:void 0,2)),void 0==E||v==Array&&c(E))for(a=new v(t=i(g.length));t>b;b++)m=f?y(g[b],b):g[b],o(a,b,m);else for(d=(p=E.call(g)).next,a=new v;!(u=d.call(p)).done;b++)m=f?l(p,y,[u.value,b],!0):u.value,o(a,b,m);return a.length=b,a}},1104:function(e,t,a){},1126:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a(98),a(115),a(62),a(31),a(70),a(83);var n=a(4),r=a(1),l=(a(57),a(14),a(12),a(2),a(1149)),c=a(1151),i=Object(r.fromJS)({views:{acName:"",acId:"",relation:"",anotherTabName:"\u5168\u90e8",activeTapKey:"\u5168\u90e8",activeTapKeyUuid:"",sonUuid:"",sonName:"\u5168\u90e8",insertOrModify:"insert",fromPage:"relative",otherPageName:"",treeSelect:{treeTwoList:[],treeThreeList:[],selectUuid:["","",""],selectName:"",selectEndUuid:""}},tags:[],originTags:[],relativeHighTypeTemp:c.e,relativeTypeTemp:c.f,relativeCardTemp:c.d,relativeCardSelectList:[],relativeCardList:[],treeList:[],relativeTreeSelectList:[],typeTree:[],typeSelect:"",cardHighTypeSelectList:[]});function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=arguments.length>1?arguments[1]:void 0;return((e={},Object(n.a)(e,l.w,(function(){return i})),Object(n.a)(e,l.j,(function(){return t=t.setIn(["relativeHighTypeTemp",a.name],a.value)})),Object(n.a)(e,l.k,(function(){return a.short?t.set(a.dataType,a.value):t.setIn(a.dataType,a.value)})),Object(n.a)(e,l.u,(function(){return a.title.unshift({name:"\u5168\u90e8",uuid:""}),t=t.set("tags",Object(r.fromJS)(a.title)).set("originTags",Object(r.fromJS)(a.title))})),Object(n.a)(e,l.t,(function(){return t=t.set("relativeCardList",Object(r.fromJS)(a.list)).set("treeList",Object(r.fromJS)(a.tree)).set("relativeSelectList",Object(r.fromJS)([])).mergeIn(["views"],Object(r.fromJS)({activeTapKey:a.name,activeTapKeyUuid:a.uuid,sonUuid:"",sonName:"\u5168\u90e8",treeSelect:i.getIn(["views","treeSelect"])}))})),Object(n.a)(e,l.a,(function(){if(t=t.set("tags",t.get("originTags")),"modify"===a.insertOrModify){for(var e=t.get("tags").toJS(),n=a.data.categoryTypeList,l=0;l<n.length;l++)for(var i=0;i<e.length;i++)if(n[l].ctgyUuid===e[i].uuid){e[i].checked=!0,e[i].selectUuid=n[l].subordinateUuid,e[i].selectName=n[l].subordinateName,e[i].tree=n[l].options;break}t=(t=(t=t.set("tags",Object(r.fromJS)(e))).set("relativeCardTemp",Object(r.fromJS)(a.data))).setIn(["relativeCardTemp","insertOrModify"],"modify"),0===a.data.payableOpened&&(t=t.setIn(["relativeCardTemp","payableOpened"],"")),0===a.data.receivableOpened&&(t=t.setIn(["relativeCardTemp","receivableOpened"],"")),0===a.data.prepaidOpened&&(t=t.setIn(["relativeCardTemp","prepaidOpened"],"")),0===a.data.advanceOpened&&(t=t.setIn(["relativeCardTemp","advanceOpened"],""))}else t=t.set("relativeCardTemp",Object(r.fromJS)(c.d)).setIn(["relativeCardTemp","insertOrModify"],"insert").setIn(["relativeCardTemp","isCheckOut"],a.data.isCheckOut).setIn(["relativeCardTemp","advanceAcId"],a.data.defaultAc.advanceAcId).setIn(["relativeCardTemp","advanceAcName"],a.data.defaultAc.advanceAcName).setIn(["relativeCardTemp","receivableAcId"],a.data.defaultAc.receivableAcId).setIn(["relativeCardTemp","receivableAcName"],a.data.defaultAc.receivableAcName).setIn(["relativeCardTemp","payableAcId"],a.data.defaultAc.payableAcId).setIn(["relativeCardTemp","payableAcName"],a.data.defaultAc.payableAcName).setIn(["relativeCardTemp","prepaidAcId"],a.data.defaultAc.prepaidAcId).setIn(["relativeCardTemp","prepaidAcName"],a.data.defaultAc.prepaidAcName);return t=t.setIn(["views","fromPage"],a.fromPage||"relative")})),Object(n.a)(e,l.b,(function(){return t=t.set("relativeCardTemp",Object(r.fromJS)(c.d)).setIn(["relativeCardTemp","insertOrModify"],"insert").setIn(["relativeCardTemp","isCheckOut"],a.receivedData.isCheckOut).set("tags",a.originTags).setIn(["views","fromPage"],a.otherPageName).setIn(["views","otherPageName"],a.otherPageName).setIn(["relativeCardTemp","code"],a.receivedData.code)})),Object(n.a)(e,l.g,(function(){(t=t.setIn(["relativeCardTemp",a.name],a.value),"isPayUnit"!==a.name||a.value)||((t=t.setIn(["relativeCardTemp","enablePrepaidAc"],!1)).getIn(["relativeCardTemp","isReceiveUnit"])?t.get("tags").map((function(e,a){if(!e.get("isReceiveUnit")){var n=(t=t.setIn(["tags",a,"checked"],!1)).getIn(["relativeCardTemp","categoryTypeList"]).findIndex((function(t,a){return t.get("ctgyUuid")===e.get("uuid")}));n>-1&&(t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(n)))}})):(t.get("tags").map((function(e,a){t=t.setIn(["tags",a,"checked"],!1)})),t=t.setIn(["relativeCardTemp","categoryTypeList"],Object(r.fromJS)([]))));"isReceiveUnit"!==a.name||a.value||((t=t.setIn(["relativeCardTemp","enableAdvanceAc"],!1)).getIn(["relativeCardTemp","isPayUnit"])?t.get("tags").map((function(e,a){if(!e.get("isPayUnit")){var n=(t=t.setIn(["tags",a,"checked"],!1)).getIn(["relativeCardTemp","categoryTypeList"]).findIndex((function(t,a){return t.get("ctgyUuid")===e.get("uuid")}));n>-1&&(t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(n)))}})):(t.get("tags").map((function(e,a){t=t.setIn(["tags",a,"checked"],!1)})),t=t.setIn(["relativeCardTemp","categoryTypeList"],Object(r.fromJS)([]))));return t})),Object(n.a)(e,l.d,(function(){var e=t.get("tags"),n="";if(e.find((function(t,l){t.get("uuid")===a.tag.get("uuid")&&(e=e.setIn([l,"checked"],a.checked),t.get("selectUuid")&&(n=t.get("selectUuid")),a.checked&&(e=e.setIn([l,"tree"],Object(r.fromJS)(a.tree)),0===a.tree[0].childList.length&&(e=e.setIn([l,"selectUuid"],a.tree[0].uuid).setIn([l,"selectName"],a.tree[0].name),n=a.tree[0].uuid)))})),a.checked){var l=t.getIn(["relativeCardTemp","categoryTypeList"]).toJS();l.push({ctgyUuid:a.tag.get("uuid"),subordinateUuid:n}),t=t.setIn(["relativeCardTemp","categoryTypeList"],Object(r.fromJS)(l))}else{var c=t.getIn(["relativeCardTemp","categoryTypeList"]).findIndex((function(e,t){return e.get("ctgyUuid")===a.tag.get("uuid")}));t=t.setIn(["relativeCardTemp","categoryTypeList"],t.getIn(["relativeCardTemp","categoryTypeList"]).delete(c))}return t=t.set("tags",e)})),Object(n.a)(e,l.y,(function(){return t.get("tags").map((function(e,n){e.get("uuid")===a.uuid&&(t=t.set("typeTree",t.getIn(["tags",n,"tree"])).set("typeSelect",t.getIn(["tags",n])))})),t})),Object(n.a)(e,l.e,(function(){var e=t.get("typeSelect");return t.getIn(["relativeCardTemp","categoryTypeList"]).map((function(n,r){n.get("ctgyUuid")===e.get("uuid")&&(t=t.setIn(["relativeCardTemp","categoryTypeList",r,"subordinateUuid"],a.uuid))})),t.get("tags").map((function(n,r){n.get("uuid")===e.get("uuid")&&(t=t.setIn(["tags",r,"selectUuid"],a.uuid).setIn(["tags",r,"selectName"],a.name))})),t})),Object(n.a)(e,l.f,(function(){var e=t.getIn(["views","acId"]),n=t.getIn(["views","acName"]);return t=t.setIn(["relativeCardTemp",e],a.uuid).setIn(["relativeCardTemp",n],a.name)})),Object(n.a)(e,l.A,(function(){return t=t.set("relativeCardList",Object(r.fromJS)(a.list)).set("treeList",Object(r.fromJS)(a.treeList)),"insertAndNew"===a.flag&&(t=t.setIn(["relativeCardTemp","code"],a.code).setIn(["relativeCardTemp","name"],"").setIn(["relativeCardTemp","companyAddress"],"").setIn(["relativeCardTemp","companyTel"],"").setIn(["relativeCardTemp","financeName"],"").setIn(["relativeCardTemp","financeTel"],"").setIn(["relativeCardTemp","receivableOpened"],"").setIn(["relativeCardTemp","advanceOpened"],"").setIn(["relativeCardTemp","payableOpened"],"").setIn(["relativeCardTemp","prepaidOpened"],"")),t})),Object(n.a)(e,l.h,(function(){if("relativeCard"==a.clearType&&(t=t.set("relativeCardSelectList",Object(r.fromJS)([])).update("relativeCardList",(function(e){return e.map((function(e){return e.set("checked",!1)}))}))),"relativeHighType"==a.clearType&&(t=t.set("cardHighTypeSelectList",Object(r.fromJS)([])).update("tags",(function(e){return e.map((function(e){return e.set("checked",!1)}))}))),"relativeTree"==a.clearType){var e=t.getIn(["relativeHighTypeTemp","treeList"]).toJS();!function e(t){return t.map((function(t,a){t.checked=!1,t.childList.length>0&&e(t.childList)}))}(e),t=t.set("treeList",Object(r.fromJS)(e)).set("relativeTreeSelectList",Object(r.fromJS)([]))}return t})),Object(n.a)(e,l.o,(function(){var e=t.get("relativeCardList"),n=t.get("relativeCardSelectList").toJS();return e.find((function(e,n){e.get("uuid")===a.uuid&&(t=t.setIn(["relativeCardList",n,"checked"],a.checked))})),a.checked?(n.push({uuid:a.uuid}),t=t.set("relativeCardSelectList",Object(r.fromJS)(n))):n.find((function(e,n){e.uuid===a.uuid&&(t=t.deleteIn(["relativeCardSelectList",n]))})),t})),Object(n.a)(e,l.q,(function(){return t=t.set("relativeCardList",Object(r.fromJS)(a.data)).set("relativeCardSelectList",Object(r.fromJS)([])).set("treeList",Object(r.fromJS)(a.treeList))})),Object(n.a)(e,l.s,(function(){return t=t.set("relativeCardList",Object(r.fromJS)(a.data)).set("relativeCardSelectList",Object(r.fromJS)([])).setIn(["views","sonUuid"],a.sonUuid).setIn(["views","sonName"],a.sonName)})),Object(n.a)(e,l.c,(function(){return t=t.set("relativeHighTypeTemp",Object(r.fromJS)(c.e))})),Object(n.a)(e,l.j,(function(){return t=t.setIn(["relativeHighTypeTemp",a.name],a.value)})),Object(n.a)(e,l.r,(function(){return t=t.set("relativeHighTypeTemp",Object(r.fromJS)(a.data))})),Object(n.a)(e,l.i,(function(){var e=t.get("tags"),n=t.get("cardHighTypeSelectList").toJS();return e.map((function(e,n){e.get("uuid")===a.uuid&&(t=t.setIn(["tags",n,"checked"],a.status))})),a.status?(n.push({uuid:a.uuid}),t=t.set("cardHighTypeSelectList",Object(r.fromJS)(n))):n.find((function(e,n){e.uuid===a.uuid&&(t=t.deleteIn(["cardHighTypeSelectList",n]))})),t})),Object(n.a)(e,l.p,(function(){a.title.unshift({name:"\u5168\u90e8",uuid:""});var e=t.getIn(["views","activeTapKeyUuid"]);return a.title.map((function(e){return e.uuid})).includes(e)||(t=t.setIn(["views","activeTapKeyUuid"],"").setIn(["views","activeTapKey"],"\u5168\u90e8").setIn(["views","treeSelect"],i.getIn(["views","treeSelect"]))),t=t.set("tags",Object(r.fromJS)(a.title)).set("originTags",Object(r.fromJS)(a.title))})),Object(n.a)(e,l.x,(function(){return t=t.setIn(["relativeTypeTemp","name"],"").setIn(["relativeTypeTemp","uuid"],"").setIn(["relativeTypeTemp","parentUuid"],a.uuid).setIn(["relativeTypeTemp","parentName"],a.name)})),Object(n.a)(e,l.m,(function(){return t=t.setIn(["relativeTypeTemp",a.name],a.value)})),Object(n.a)(e,l.n,(function(){return t=t.setIn(["relativeTypeTemp","parentUuid"],a.parentUuid).setIn(["relativeTypeTemp","parentName"],a.parentName)})),Object(n.a)(e,l.z,(function(){return t=t.set("relativeCardList",Object(r.fromJS)(a.list)).setIn(["views","activeTapKey"],a.name).setIn(["views","activeTapKeyUuid"],a.activeTapKeyUuid).set("treeList",Object(r.fromJS)(a.tree))})),Object(n.a)(e,l.v,(function(){return t=t.set("relativeTypeTemp",Object(r.fromJS)(a.data))})),Object(n.a)(e,l.l,(function(){var e=t.getIn(["relativeHighTypeTemp","treeList"]).toJS();return function e(t,n){return t.map((function(t,r){var l=n;(t.uuid==a.uuid||n)&&(t.checked=a.value,l=!0),t.childList.length>0&&e(t.childList,l)}))}(e,!1),t.setIn(["relativeHighTypeTemp","treeList"],Object(r.fromJS)(e))})),Object(n.a)(e,l.B,(function(){return t=t.setIn(["relativeCardTemp","used"],a.used)})),e)[a.type]||function(){return t})()}},1127:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a(31),a(70);var n=a(4),r=a(1),l=a(1150),c=Object(r.fromJS)({views:{currentType:"",currentTypeName:"\u5168\u90e8",ctgyUuid:"",treeName:"\u5168\u90e8",treeUuid:"",highTypeIdx:0,insertOrModify:"insert",fromPage:"project",otherPageName:"",treeSelect:{treeTwoList:[],treeThreeList:[],selectUuid:["","",""],selectName:"",selectEndUuid:""}},data:{psiData:{code:"",name:"",selectName:"",selectUuid:"",categoryTypeList:[],typeList:[],used:!0,uuid:"",projectProperty:"XZ_LOSS",basicProductOpen:"",contractCostOpen:"",contractProfitOpen:"",engineeringSettlementOpen:""}},highTypeList:[],cardList:[],treeList:[],highTypeData:{commonFee:!1,name:"",uuid:"",beAssist:!1,beMake:!0,treeList:[]},deleteList:[],treeData:{name:"",parentName:"",parentUuid:"",uuid:""}});function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((e={},Object(n.a)(e,l.i,(function(){return c})),Object(n.a)(e,l.j,(function(){return t.set(a.dataType,c.get(a.dataType)).setIn(["views","fromPage"],a.fromPage||"project")})),Object(n.a)(e,l.k,(function(){var e=a.list;return e.unshift({name:"\u5168\u90e8",uuid:""}),t.set("highTypeList",Object(r.fromJS)(e)).setIn(["views","ctgyUuid"],e[1].uuid)})),Object(n.a)(e,l.d,(function(){return t.setIn(a.dataType,a.value)})),Object(n.a)(e,l.e,(function(){return t.set(a.dataType,a.value)})),Object(n.a)(e,l.a,(function(){return t.set("cardList",Object(r.fromJS)(a.receivedData))})),Object(n.a)(e,l.h,(function(){var e=a.data.typeList.length?a.data.typeList[0].uuid:"";return t.set("cardList",Object(r.fromJS)(a.data.resultList)).set("treeList",Object(r.fromJS)(a.data.typeList)).mergeIn(["views"],Object(r.fromJS)({treeUuid:e,treeName:"\u5168\u90e8",treeSelect:c.getIn(["views","treeSelect"])}))})),Object(n.a)(e,l.f,(function(){var e=t.getIn(["highTypeData","treeList"]).toJS();return function e(t,n){return t.map((function(t,r){var l=n;(t.uuid==a.uuid||n)&&(t.checked=a.value,l=!0),t.childList.length>0&&e(t.childList,l)}))}(e,!1),t.setIn(["highTypeData","treeList"],Object(r.fromJS)(e))})),Object(n.a)(e,l.g,(function(){var e=a.data.categoryTypeList[0].subordinateName,n=a.data.categoryTypeList[0].subordinateUuid;return t.mergeIn(["data","psiData"],Object(r.fromJS)(a.data)).setIn(["views","insertOrModify"],"modify").setIn(["data","psiData","selectName"],e).setIn(["data","psiData","selectUuid"],n).setIn(["data","psiData","typeList"],Object(r.fromJS)(a.data.categoryTypeList[0].options)).setIn(["views","fromPage"],"project").set("treeList",Object(r.fromJS)(a.data.categoryTypeList[0].options))})),Object(n.a)(e,l.l,(function(){if("card"==a.dataType){t.get("cardList");t=t.update("cardList",(function(e){return e.map((function(e){return e.set("checked",!1)}))}))}else{var e=t.get("treeList").toJS();!function e(t){return t.map((function(t,a){t.checked=!1,t.childList.length>0&&e(t.childList)}))}(e),t=t.set("treeList",Object(r.fromJS)(e))}return t})),Object(n.a)(e,l.b,(function(){return t=t.set("data",c.get("data")).set("treeList",Object(r.fromJS)(a.receivedData)).setIn(["views","insertOrModify"],"insert").setIn(["views","fromPage"],a.otherPageName).setIn(["views","otherPageName"],a.otherPageName).setIn(["views","ctgyUuid"],a.ctgyUuid).set("highTypeList",Object(r.fromJS)(a.highTypeList)).setIn(["data","psiData","code"],a.code).setIn(["data","psiData","categoryTypeList",0],Object(r.fromJS)({ctgyUuid:a.ctgyUuid,subordinateUuid:""})),a.receivedData[0].childList.length<=0&&(t=t.setIn(["data","psiData","selectUuid"],a.receivedData[0].uuid).setIn(["data","psiData","selectName"],a.receivedData[0].name).setIn(["data","psiData","categoryTypeList",0,"subordinateUuid"],a.receivedData[0].uuid)),a.highTypeList.map((function(e){e.uuid==a.ctgyUuid&&"\u751f\u4ea7\u9879\u76ee"==e.name&&(t=t.setIn(["data","psiData","projectProperty"],"XZ_PRODUCE"))})),t})),Object(n.a)(e,l.c,(function(){return t.setIn(["data","psiData","code"],a.value)})),e)[a.type]||function(){return t})()}},923:function(e,t,a){"use strict";a.r(t),a.d(t,"reducer",(function(){return Be})),a.d(t,"view",(function(){return _e}));var n,r,l,c,i,o,s,u,p,d,m,g,v,h,y,f,E,b,C,L,S,O,j=a(7),N=a(8),T=a(9),k=a(10),I=a(0),A=a.n(I),_=a(11),w=a(6),P=a(1),R=a(47),D=(a(1104),a(2)),J=(a(55),a(61),a(31),a(76),a(33),a(12)),U=a(542),x=(a(564),function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){var e=this.props,t=e.start,a=e.end,n=e.chooseValue,r=e.onBeginOk,l=e.onEndOk,c=e.changeChooseValue,i=e.dateSelectList;return A.a.createElement("div",{className:"muti-period-more-select"},A.a.createElement("div",null,A.a.createElement(U.e,{value:t,endValue:a||t,isRange:!0,onChange:function(e){var t=new J.a(e).valueOf();-1===t.indexOf("Invalid")?Date.parse(a)<Date.parse(t)?r(t,t):r(t,a):D.a.toast.info("\u65e5\u671f\u683c\u5f0f\u9519\u8bef,\u8bf7\u5237\u65b0\u91cd\u8bd5")},onEndChange:function(e){var a=new J.a(e).valueOf();Date.parse(a)<Date.parse(t)?D.a.Alert("\u7ed3\u675f\u65e5\u671f\u4e0d\u53ef\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f","\u597d\u7684"):-1===a.indexOf("Invalid")?l(t,a):D.a.toast.info("\u65e5\u671f\u683c\u5f0f\u9519\u8bef,\u8bf7\u5237\u65b0\u91cd\u8bd5")}})),A.a.createElement(_.u,{district:i,value:n,canSearch:!1,onOk:function(e){c(e.value)}},A.a.createElement(_.l,{type:"select",style:{fontSize:".17rem"}})))}}]),a}(I.Component)),M=[{value:"PROCESS_SEARCH_TITLE",key:"\u5ba1\u6279\u6807\u9898"},{value:"PROCESS_SEARCH_SPONSOR",key:"\u53d1\u8d77\u4eba"},{value:"PROCESS_SEARCH_DETAIL_TYPE",key:"\u660e\u7ec6\u7c7b\u578b"},{value:"PROCESS_SEARCH_AMOUNT",key:"\u91d1\u989d"}],B={PROCESS_SEARCH_TITLE:"\u5ba1\u6279\u6807\u9898",PROCESS_SEARCH_SPONSOR:"\u53d1\u8d77\u4eba",PROCESS_SEARCH_DETAIL_TYPE:"\u660e\u7ec6\u7c7b\u578b",PROCESS_SEARCH_AMOUNT:"\u91d1\u989d"},Y={ALL:"\u5168\u90e8",NONE:"\u672a\u8bb0\u8d26",ACCOUNTING:"\u5df2\u6302\u8d26",PAYING:"\u5df2\u4ed8\u6b3e",INCOME:"\u5df2\u6536\u6b3e",BOOKING:"\u5df2\u6838\u8bb0",DISUSE:"\u5df2\u4f5c\u5e9f"},Z=[{value:"DATE_TYPE_ACCOUNTING",key:"\u8bb0\u8d26\u65e5\u671f"},{value:"DATE_TYPE_DETAIL",key:"\u660e\u7ec6\u65e5\u671f"},{value:"DATE_TYPE_START",key:"\u63d0\u4ea4\u65e5\u671f"},{value:"DATE_TYPE_END",key:"\u5b8c\u6210\u65e5\u671f"}],F=[{value:"ALL",key:"\u5168\u90e8"},{value:"NONE",key:"\u672a\u8bb0\u8d26"},{value:"ACCOUNTING",key:"\u5df2\u6302\u8d26"},{value:"PAYING",key:"\u5df2\u4ed8\u6b3e"},{value:"INCOME",key:"\u5df2\u6536\u6b3e"},{value:"BOOKING",key:"\u5df2\u6838\u8bb0"},{value:"DISUSE",key:"\u5df2\u4f5c\u5e9f"}],H={PROCESS_PAYING:"\u5df2\u4ed8\u6b3e",PROCESS_ACCOUNTING:"\u5df2\u6302\u8d26",PROCESS_BOOK_KEEPING:"\u5df2\u6838\u8bb0",PROCESS_DISUSE:"\u5df2\u4f5c\u5e9f",PROCESS_INCOME:"\u5df2\u6536\u6b3e"},X={PROCESS_PAYING:"\u4ed8\u6b3e",PROCESS_ACCOUNTING:"\u6302\u8d26",PROCESS_BOOK_KEEPING:"\u6838\u8bb0",PROCESS_DISUSE:"\u4f5c\u5e9f",PROCESS_INCOME:"\u6536\u6b3e"},z=["\u9500\u552e\u5b58\u8d27\u5957\u4ef6","\u91c7\u8d2d\u5b58\u8d27\u5957\u4ef6","\u9884\u4ed8\u8d26\u6b3e","\u9884\u6536\u8d26\u6b3e","\u6682\u4ed8\u6b3e\u9879","\u6682\u6536\u6b3e\u9879","\u5185\u90e8\u8f6c\u8d26","\u5b58\u8d27\u8c03\u62e8\u5957\u4ef6"],G=(a(32),a(24)),K=(a(98),a(133),a(1078)),W=a(1059),Q=a(1038),V=Object(G.immutableRenderDecorator)(n=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={},n}return Object(N.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.dispatch,n=e.editLrAccountPermission,r=e.history,l=e.jrUuidList,c=e.multiOperationType,i=e.accountSelectList,o=!1,s=!1,u=!1,p=!1;return t.get("dealState")||(K.c.indexOf(t.get("jrCategoryType"))>-1?p=!0:(u=!0,K.e.indexOf(t.get("jrCategoryType"))>-1?t.get("jrAmount")>0?o=!0:t.get("jrAmount")<0&&(s=!0):t.get("jrAmount")>0?s=!0:t.get("jrAmount")<0&&(o=!0))),A.a.createElement("div",{className:"approval-all-item-child-item needsclick"},A.a.createElement("div",{className:"approval-all-item-child-title-wrap",onClick:function(){c||(a(W.k("","jrUuidList",l)),a(W.p(t.get("id"),(function(){r.push("/searchapproval/approvalpreview")}))))}},A.a.createElement("span",{className:"approval-all-item-child-title-type"},t.get("detailType")),A.a.createElement("span",{className:"approval-all-item-child-title-amount"},A.a.createElement(_.a,{showZero:!0},t.get("jrAmount")))),A.a.createElement("div",{className:"approval-all-item-child-title-date"},t.get("jrDate").substr(0,10)),t.get("dealState")?A.a.createElement("div",{className:"approval-all-item-child-handled-tit-wrap"},A.a.createElement("div",{className:"approval-all-item-child-handled-tit"},t.get("jrIndex")?A.a.createElement("span",{className:"approval-all-item-child-handled-tit-left",onClick:function(){c||a(Q.b.getRunningPreviewBusinessFetch(t.get("jrOriUuid"),t,l,"search",r))}},A.a.createElement(_.l,{type:"liushui",style:{fontSize:".14rem"}}),"\xa0",A.a.createElement("span",null,t.get("jrIndex"),"\u53f7")):A.a.createElement("span",{className:"approval-all-item-child-handled-tit-left"}),A.a.createElement("span",{className:"approval-all-item-child-handled-tit-rigth",onClick:function(){c||n&&a(W.e([t.get("id")],(function(){})))}},A.a.createElement("span",null,H[t.get("dealState")]),"\xa0",A.a.createElement(_.l,{type:"chexiao",style:{color:n?"#5e81d1":"#999"}}))),A.a.createElement("div",{className:"approval-all-item-child-operate_username"},A.a.createElement("span",null,t.get("oriDate")),A.a.createElement("i",{className:"approval-all-item-child-separate",style:{display:t.get("jrIndex")?"":"none"}},"|"),A.a.createElement("span",null,"\u8bb0\u8d26\u5458\uff1a",t.get("operateUserName")))):A.a.createElement("div",{className:"approval-all-item-child-btn-wrap"},A.a.createElement("span",{className:n?"approval-all-item-child-btn":"approval-all-item-child-btn approval-all-item-child-btn-disabled",style:{display:p?"":"none"},onClick:function(e){if(!c&&n){if(t.getIn(["outputAccount","accountUuid"])){var l=i.find((function(e){return e.get("uuid")===t.getIn(["outputAccount","accountUuid"])})),o=t.get("jrAmount");if(l){var s={needPoundage:l.get("needPoundage"),poundage:l.get("poundage"),poundageRate:l.get("poundageRate")},u=s.poundage,p=s.poundageRate,d=o>0?o:-o,m=Math.abs(d||0)*p/1e3>u&&u>0?u:Math.abs(d||0)*p/1e3;a(W.l("account",Object(P.fromJS)({accountName:l.get("name"),accountUuid:l.get("uuid"),poundage:s,poundageAmount:(m||0).toFixed(2)}))),a(W.l("receiveAmount",o>0?o:-o))}}a(W.l("fromPage","")),a(W.l("selectList",Object(P.fromJS)([t.get("id")]))),r.push("/searchapproval/bookKeepingapproval")}}},"\u6838\u8bb0"),A.a.createElement("span",{className:n?"approval-all-item-child-btn":"approval-all-item-child-btn approval-all-item-child-btn-disabled",style:{display:u?"":"none"},onClick:function(e){c||n&&a(W.E(t.get("jrCategoryUuid"),t.get("id"),(function(){a(W.l("fromPage","")),a(W.l("selectList",Object(P.fromJS)([t.get("id")]))),r.push("/searchapproval/accountapproval")})))}},"\u6302\u8d26"),A.a.createElement("span",{className:n?"approval-all-item-child-btn":"approval-all-item-child-btn approval-all-item-child-btn-disabled",style:{display:o?"":"none"},onClick:function(e){c||n&&(a(W.l("fromPage","")),a(W.l("selectList",Object(P.fromJS)([t.get("id")]))),a(W.l("receiveAmount",t.get("jrAmount")>0?t.get("jrAmount"):-t.get("jrAmount"))),r.push("/searchapproval/receiveapproval"))}},"\u6536\u6b3e"),A.a.createElement("span",{className:n?"approval-all-item-child-btn":"approval-all-item-child-btn approval-all-item-child-btn-disabled",style:{display:s?"":"none"},onClick:function(e){c||n&&a(W.E(t.get("jrCategoryUuid"),t.get("id"),(function(){a(W.l("fromPage","")),a(W.l("selectList",Object(P.fromJS)([t.get("id")]))),r.push("/searchapproval/payapproval")})))}},"\u4ed8\u6b3e"),A.a.createElement("span",{className:n?"approval-all-item-child-btn":"approval-all-item-child-btn approval-all-item-child-btn-disabled",onClick:function(e){c||n&&a(W.o([t.get("id")],(function(){})))}},"\u4f5c\u5e9f")))}}]),a}(A.a.Component))||n,q=Object(G.immutableRenderDecorator)(r=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={},n}return Object(N.a)(a,[{key:"render",value:function(){var e=this.props,t=e.detailList,a=e.dispatch,n=e.editLrAccountPermission,r=e.history,l=e.jrUuidList,c=e.accountSelectList;return A.a.createElement("div",{className:"approval-all-item-child-list"},t.map((function(e,t){return A.a.createElement(V,{key:t,item:e,dispatch:a,editLrAccountPermission:n,history:r,jrUuidList:l,accountSelectList:c})})))}}]),a}(A.a.Component))||r,$=Object(G.immutableRenderDecorator)(l=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={},n}return Object(N.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.dispatch,n=e.editLrAccountPermission,r=e.history,l=e.jrUuidList,c=e.showChildList,i=e.deleteCheckDetailItem,o=e.addCheckDetailItem,s=e.accountSelectList,u={AMOUNT:"\u91d1\u989d",DATE:"\u65e5\u671f",ABSTRACT:"\u6458\u8981",CONTECT:"\u5f80\u6765\u5355\u4f4d",STROCK:"\u5b58\u8d27",DRPOT:"\u4ed3\u5e93",CATEGORY:"\u6d41\u6c34\u7c7b\u522b","DETAIL-TYPE":"\u660e\u7ec6\u7c7b\u578b",ACCOUNT:"\u8d26\u6237"},p=t.get("displayMap"),d=[];p.forEach((function(e,t){d.push(t)}));var m=c.indexOf(t.get("id"))>-1;return A.a.createElement("div",{className:"approval-all-item-wrap"},A.a.createElement("div",{className:"approval-all-item-container"},A.a.createElement("div",{className:"approval-all-item-main",onClick:function(){D.a.openLink({url:"https://aflow.dingtalk.com/dingtalk/mobile/homepage.htm?dd_share=false&showmenu=true&dd_progress=false&back=native&corpid=".concat(sessionStorage.getItem("corpId"),"&swfrom=","XFN","#/approval?procInstId=").concat(t.get("processInstanceId"))})}},A.a.createElement("div",{className:"approval-all-item-main-avatar"},t.get("originateAvatar")?A.a.createElement("img",{className:"approval-all-item-main-avatar-img",src:t.get("originateAvatar")}):A.a.createElement("span",{className:"approval-all-item-main-avatar-skeleton"})),A.a.createElement("div",{className:"approval-all-item-main-list"},A.a.createElement("div",{className:"approval-all-item-main-title-wrap"},A.a.createElement("span",{className:"approval-all-item-main-title"},t.get("processTitle")),A.a.createElement("span",{className:"approval-all-item-main-createtime"},t.get("createTime").substr(0,10))),A.a.createElement("ul",{className:"approval-all-item-main-example-list"},d.map((function(e){return A.a.createElement("li",{className:"approval-all-item-main-example-item",key:e},"".concat(u[e],": ").concat(p.get(e))," ")}))),A.a.createElement("div",{className:"approval-all-item-main-showchild-wrap",onClick:function(e){e.stopPropagation(),m?i(t.get("id")):o(t.get("id"))}},A.a.createElement("span",{className:"approval-all-item-main-showchild-finishtime"},"\u5ba1\u6279\u901a\u8fc7\u65f6\u95f4\uff1a",t.get("finishTime").substr(0,10)),A.a.createElement("span",{className:"approval-all-item-main-showchild-icon"},m?"\u6536\u8d77":"\u5c55\u5f00"," ",A.a.createElement(_.l,{style:m?{transform:"rotate(180deg)",marginBottom:".1rem"}:"",type:"arrow-down"}))))),m?A.a.createElement(q,{detailList:t.get("detailList"),dispatch:a,editLrAccountPermission:n,history:r,jrUuidList:l,accountSelectList:s}):null))}}]),a}(A.a.Component))||l,ee=Object(R.c)((function(e){return e}))(c=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={isSearch:!1,isloadingNext:!1,startY:0,isUpSliding:!1},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){D.a.setTitle({title:"\u67e5\u8be2\u5ba1\u6279"}),D.a.setIcon({showIcon:!1}),D.a.setRight({show:!1}),"home"===sessionStorage.getItem("prevPage")&&(sessionStorage.removeItem("prevPage"),this.props.dispatch(W.r({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:"DATE_TYPE_END",beginDate:null,endDate:null,processCode:"PROCESS_CODE_ALL"},1)),this.props.dispatch(W.s({dateType:"DATE_TYPE_END",beginDate:null,endDate:null},1)))}}]),Object(N.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.allState,n=t.dispatch,r=t.homeState,l=t.searchApprovalState,c=t.history,i=this.state,o=i.isSearch,s=i.isloadingNext,u=i.startY,p=i.isUpSliding,d=l.get("approvalList"),m=r.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]),g=l.get("views"),v=g.get("beginDate"),h=g.get("endDate"),y=g.get("searchType"),f=g.get("searchContent"),E=g.get("dateType"),b=g.get("processCode"),C=g.get("showChildList"),L=g.get("pageCount"),S=g.get("currentPage"),O=l.get("processModelList"),j=Object(P.fromJS)([]);d.map((function(e,t){e.get("detailList").forEach((function(e){if(1,e.get("jrOriUuid")){var t=e.set("oriUuid",e.get("jrOriUuid"));j=j.push(t)}}))}));var N=[],T={};O.forEach((function(e){T[e.get("processCode")]=e.get("modelName"),N.push({key:e.get("modelName"),value:e.get("processCode")})}));var k=a.get("accountList"),I=k.size?k.getIn([0,"childList"]):Object(P.fromJS)([]);return A.a.createElement(_.h,{className:"search-approval"},A.a.createElement(x,{start:v,end:h,dateSelectList:[{key:"\u63d0\u4ea4\u65e5\u671f",value:"DATE_TYPE_START"},{key:"\u5b8c\u6210\u65e5\u671f",value:"DATE_TYPE_END"}],chooseValue:E,onBeginOk:function(t,a){n(W.r({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:E,beginDate:t,endDate:a,processCode:"PROCESS_CODE_ALL"},1)),n(W.s({dateType:E,beginDate:t,endDate:a},1)),e.setState({isSearch:!1})},onEndOk:function(t,a){n(W.r({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:E,beginDate:t,endDate:a,processCode:"PROCESS_CODE_ALL"},1)),n(W.s({dateType:E,beginDate:t,endDate:a},1)),e.setState({isSearch:!1})},changeChooseValue:function(t){n(W.r({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:t,beginDate:v,endDate:h,processCode:"PROCESS_CODE_ALL"},1)),n(W.s({dateType:t,beginDate:v,endDate:h},1)),e.setState({isSearch:!1})}}),A.a.createElement(_.r,{className:"search-approval-title-wrap"},A.a.createElement("div",{className:"search-approval-title-switch-wrap",style:{display:o?"none":""}},A.a.createElement("ul",{className:"search-approval-title-switch-list"},A.a.createElement("li",{className:"search-approval-title-switch-item-cur"},A.a.createElement("span",null,"\u5ba1\u6279\uff1a"),A.a.createElement(_.u,{className:"search-approval-title-switch-item-single",district:N,value:b,canSearch:!1,onOk:function(e){n(W.r({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:E,beginDate:v,endDate:h,processCode:e.value},1))}},T[b],A.a.createElement(_.l,{type:"triangle",className:"search-approval-title-switch-item-single-triangle"}))),A.a.createElement("li",{className:"search-approval-title-switch-item",onClick:function(){n(W.j("currentPageType","Detail")),n(W.q({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:"DATE_TYPE_END",beginDate:v,endDate:h,accountingType:"ALL"},1))}},"\u660e\u7ec6")),A.a.createElement("i",{className:"search-approval-title-switch-i"}),A.a.createElement("div",{className:"search-approval-title-switch-search",onClick:function(){e.setState({isSearch:!0})}},A.a.createElement(_.l,{type:"search"}))),A.a.createElement("div",{className:"search-approval-title-search-wrap",style:{display:o?"":"none"}},A.a.createElement(_.u,{className:"search-approval-title-search-single",district:M,value:y,canSearch:!1,onOk:function(e){n(W.j("searchType",e.value))}},B[y],"\xa0",A.a.createElement(_.l,{type:"triangle"})),A.a.createElement("i",{className:"search-approval-title-search-i"}),A.a.createElement("span",{className:"search-approval-title-search-input"},A.a.createElement(_.t,{placeholder:B[y]?"\u641c\u7d22".concat(B[y]):"",value:f,onChange:function(e){n(W.j("searchContent",e))},onSubmit:function(e){n(W.r({searchType:y,searchContent:e,dateType:E,beginDate:v,endDate:h,processCode:b},1))},onCancel:function(){e.setState({isSearch:!1}),n(W.r({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:E,beginDate:v,endDate:h,processCode:b},1))},onClear:function(){n(W.r({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:E,beginDate:v,endDate:h,processCode:b},1))}})))),A.a.createElement(_.s,{className:"needsclick",flex:"1",savePosition:!0,uniqueKey:"ApprovalAll",onTouchStart:function(t){var a=t.touches[0].pageY;e.setState({startY:a})},onTouchEnd:function(t){var a=t.changedTouches[0].pageY;u-a>0&&e.setState({isUpSliding:!0})},onScroll:function(t){var a=t.target.clientHeight,r=t.target.scrollTop,l=t.target.scrollHeight;s||a+r>=l&&S<L&&p&&(e.setState({isloadingNext:!0}),n(W.r({searchType:y,searchContent:f,dateType:E,beginDate:v,endDate:h,processCode:b},S+1,null,(function(){e.setState({isloadingNext:!1,isUpSliding:!1})}))))}},d.map((function(e,t){return A.a.createElement($,{key:t,item:e,dispatch:n,editLrAccountPermission:m,history:c,jrUuidList:j,showChildList:C,addCheckDetailItem:function(e){var t=C.push(e);n(W.j("showChildList",t))},deleteCheckDetailItem:function(e){var t=C.filter((function(t){return t!==e}));n(W.j("showChildList",t))},accountSelectList:I})}))))}}]),a}(A.a.Component))||c,te=(a(1094),a(166),a(77),a(1035),a(1029),a(1030),Object(G.immutableRenderDecorator)(i=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={},n}return Object(N.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.dispatch,n=e.editLrAccountPermission,r=e.history,l=e.uuidList,c=(e.accountingType,e.multiOperationType),i=e.addCheckDetailItem,o=e.deleteCheckDetailItem,s=e.selectList,u=e.accountSelectList,p=!1,d=!1,m=!1,g=!1,v=!1;t.get("dealState")||(v=!0,K.c.indexOf(t.get("jrCategoryType"))>-1?d=!0:(p=!0,K.e.indexOf(t.get("jrCategoryType"))>-1?t.get("jrAmount")>0?g=!0:t.get("jrAmount")<0&&(m=!0):t.get("jrAmount")>0?m=!0:t.get("jrAmount")<0&&(g=!0)));var h=function(e){return"\u6302\u8d26"===e?p:"\u6838\u8bb0"===e?d:"\u4ed8\u6b3e"===e?m:"\u6536\u6b3e"===e?g:"\u4f5c\u5e9f"===e?v:""!==e&&void 0};return A.a.createElement("div",{className:"approval-datail-list-item",onClick:function(){c&&h(c)&&(s.indexOf(t.get("id"))>-1?o([t.get("id")]):i([t.get("id")]))}},A.a.createElement("div",{className:"approval-datail-item-title-wrap"},c?A.a.createElement("span",{className:"approval-datail-item-title-checkbox",style:{display:c?"":"none"}},A.a.createElement(_.e,{disabled:!h(c),checked:s.indexOf(t.get("id"))>-1})):null,A.a.createElement("span",{className:"approval-datail-item-title",onClick:function(){c||D.a.openLink({url:"https://aflow.dingtalk.com/dingtalk/mobile/homepage.htm?dd_share=false&showmenu=true&dd_progress=false&back=native&corpid=".concat(sessionStorage.getItem("corpId"),"&swfrom=","XFN","#/approval?procInstId=").concat(t.get("processInstanceId"))})}},t.get("processTitle")),A.a.createElement(_.l,{className:"approval-datail-item-title-icon",type:"arrow-right"})),A.a.createElement("div",null,A.a.createElement(V,{item:t,dispatch:a,editLrAccountPermission:n,history:r,jrUuidList:l,multiOperationType:c,accountSelectList:u})))}}]),a}(A.a.Component))||i),ae=Object(R.c)((function(e){return e}))(o=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={isSearch:!1,multiOperationType:"",selectList:[],isloadingNext:!1,startY:0,isUpSliding:!1},e}return Object(N.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.allState,n=t.dispatch,r=t.homeState,l=t.history,c=t.searchApprovalState,i=this.state,o=i.isSearch,s=i.multiOperationType,u=i.selectList,p=i.isloadingNext,d=i.isUpSliding,m=i.startY,g=c.get("detailList"),v=r.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]),h=c.get("views"),y=h.get("beginDate"),f=h.get("endDate"),E=h.get("searchType"),b=h.get("searchContent"),C=h.get("dateType"),L=h.get("accountingType"),S=h.get("pageCount"),O=h.get("currentPage"),j=Object(P.fromJS)([]);g.map((function(e,t){if(e.get("jrOriUuid")){var a=e.set("oriUuid",e.get("jrOriUuid"));j=j.push(a)}}));var N=a.get("accountList"),T=N.size?N.getIn([0,"childList"]):Object(P.fromJS)([]);return A.a.createElement(_.h,null,A.a.createElement(x,{start:y,end:f,dateSelectList:Z,chooseValue:C,onBeginOk:function(t,a){n(W.q({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:C,beginDate:t,endDate:a,accountingType:"ALL"},1)),e.setState({isSearch:!1,multiOperationType:""})},onEndOk:function(t,a){n(W.q({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:C,beginDate:t,endDate:a,accountingType:"ALL"},1)),e.setState({isSearch:!1,multiOperationType:""})},changeChooseValue:function(t){n(W.q({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:t,beginDate:y,endDate:f,accountingType:"ALL"},1)),e.setState({isSearch:!1,multiOperationType:""})}}),A.a.createElement(_.r,{className:"search-approval-title-wrap"},A.a.createElement("div",{className:"search-approval-title-switch-wrap",style:{display:o?"none":""}},A.a.createElement("ul",{className:"search-approval-title-switch-list"},A.a.createElement("li",{className:"search-approval-title-switch-item",onClick:function(){n(W.j("currentPageType","ApprovalAll")),n(W.r({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:"DATE_TYPE_END",beginDate:y,endDate:f,processCode:"PROCESS_CODE_ALL"},1))}},"\u5ba1\u6279"),A.a.createElement("li",{className:"search-approval-title-switch-item-cur"},A.a.createElement("span",null,"\u660e\u7ec6\uff1a"),A.a.createElement(_.u,{className:"search-approval-title-switch-item-single",district:F,value:L,canSearch:!1,onOk:function(t){n(W.q({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:C,beginDate:y,endDate:f,accountingType:t.value},1)),e.setState({multiOperationType:""})}},Y[L],A.a.createElement(_.l,{type:"triangle",className:"search-approval-title-switch-item-single-triangle"})))),A.a.createElement("i",{className:"search-approval-title-switch-i"}),A.a.createElement("div",{className:"search-approval-title-switch-search",onClick:function(){e.setState({isSearch:!0})}},A.a.createElement(_.l,{type:"search"}))),A.a.createElement("div",{className:"search-approval-title-search-wrap",style:{display:o?"":"none"}},A.a.createElement(_.u,{className:"search-approval-title-search-single",district:M,value:E,canSearch:!1,onOk:function(t){n(W.j("searchType",t.value)),e.setState({multiOperationType:""})}},B[E],"\xa0",A.a.createElement(_.l,{type:"triangle"})),A.a.createElement("i",{className:"search-approval-title-search-i"}),A.a.createElement("span",{className:"search-approval-title-search-input"},A.a.createElement(_.t,{placeholder:B[E]?"\u641c\u7d22".concat(B[E]):"",value:b,onChange:function(e){n(W.j("searchContent",e))},onSubmit:function(e){n(W.q({searchType:E,searchContent:e,dateType:C,beginDate:y,endDate:f,accountingType:L},1))},onCancel:function(){e.setState({isSearch:!1}),n(W.q({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:C,beginDate:y,endDate:f,accountingType:L},1))},onClear:function(){n(W.q({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:C,beginDate:y,endDate:f,accountingType:L},1))}})))),A.a.createElement(_.s,{className:"needsclick",flex:"1",savePosition:!0,uniqueKey:"ApprovalDetail",onTouchStart:function(t){var a=t.touches[0].pageY;e.setState({startY:a})},onTouchEnd:function(t){var a=t.changedTouches[0].pageY;m-a>0&&e.setState({isUpSliding:!0})},onScroll:function(t){var a=t.target.clientHeight,r=t.target.scrollTop,l=t.target.scrollHeight;p||a+r>=l&&O<S&&d&&(e.setState({isloadingNext:!0}),n(W.q({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:C,beginDate:y,endDate:f,accountingType:L},O+1,null,(function(){e.setState({isloadingNext:!1,isUpSliding:!1})}))))}},g.map((function(t,a){return A.a.createElement(te,{key:a,item:t,dispatch:n,history:l,uuidList:j,editLrAccountPermission:v,accountingType:L,multiOperationType:s,addCheckDetailItem:function(t){var a=Array.from(new Set(u.concat(t)));e.setState({selectList:a})},deleteCheckDetailItem:function(t){var a=u.filter((function(e){return-1===t.indexOf(e)}));e.setState({selectList:a})},selectList:u,setSelectList:function(t){return e.setState({selectList:t})},accountSelectList:T})}))),A.a.createElement(_.r,{className:"footer",style:{display:"NONE"!==L||s?"none":""}},A.a.createElement(_.d,{style:{height:50}},A.a.createElement(_.c,{onClick:function(){var t=e,a=[],n=!1,r=!1,l=!1,c=!1,i=!1;g.forEach((function(e){e.get("dealState")||(i=!0,K.c.indexOf(e.get("jrCategoryType"))>-1?r=!0:(n=!0,K.e.indexOf(e.get("jrCategoryType"))>-1?e.get("jrAmount")>0?c=!0:e.get("jrAmount")<0&&(l=!0):e.get("jrAmount")>0?l=!0:e.get("jrAmount")<0&&(c=!0)))})),c&&a.push("\u6536\u6b3e"),l&&a.push("\u4ed8\u6b3e"),r&&a.push("\u6838\u8bb0"),n&&a.push("\u6302\u8d26"),i&&a.push("\u4f5c\u5e9f"),D.a.actionSheet({title:"\u8bf7\u9009\u62e9\u8bb0\u8d26\u7c7b\u578b",cancelButton:"\u53d6\u6d88",otherButtons:a,onSuccess:function(e){-1!=e.buttonIndex&&t.setState({multiOperationType:a[e.buttonIndex],selectList:[]})}})}},A.a.createElement(_.l,{type:"piliangjizhang"}),A.a.createElement("span",null,"\u6279\u91cf\u8bb0\u8d26")))),A.a.createElement(_.r,{className:"footer",style:{display:s?"":"none"}},A.a.createElement(_.d,{style:{height:50}},A.a.createElement(_.c,{onClick:function(){if("\u6536\u6b3e"===s){var t=[];g.forEach((function(e){K.e.indexOf(e.get("jrCategoryType"))>-1?e.get("jrAmount")>0&&t.push(e.get("id")):e.get("jrAmount")<0&&t.push(e.get("id"))})),e.setState({selectList:t.length===u.length?[]:t})}else if("\u4ed8\u6b3e"===s){var a=[];g.forEach((function(e){K.e.indexOf(e.get("jrCategoryType"))>-1?e.get("jrAmount")<0&&a.push(e.get("id")):e.get("jrAmount")>0&&a.push(e.get("id"))})),e.setState({selectList:a.length===u.length?[]:a})}else if("\u6838\u8bb0"===s){var n=[];g.forEach((function(e){return K.c.indexOf(e.get("jrCategoryType"))>-1&&n.push(e.get("id"))})),e.setState({selectList:n.length===u.length?[]:n})}else if("\u6302\u8d26"===s){var r=[];g.forEach((function(e){return-1===K.c.indexOf(e.get("jrCategoryType"))&&r.push(e.get("id"))})),e.setState({selectList:r.length===u.length?[]:r})}else if("\u4f5c\u5e9f"===s){var l=[];g.forEach((function(e){return l.push(e.get("id"))})),e.setState({selectList:l.length===u.length?[]:l})}}},A.a.createElement(_.l,{type:"choose"}),A.a.createElement("span",null,"\u5168\u9009")),A.a.createElement(_.c,{onClick:function(){e.setState({multiOperationType:""})}},A.a.createElement(_.l,{type:"cancel"}),A.a.createElement("span",null,"\u53d6\u6d88")),A.a.createElement(_.c,{disabled:!v,onClick:function(){if(!u.length)return D.a.toast.info("\u8bf7\u9009\u62e9\u660e\u7ec6");if("\u6536\u6b3e"===s){var t=0,a=!1;g.forEach((function(e){u.indexOf(e.get("id"))>-1&&(K.e.indexOf(e.get("jrCategoryType"))>-1?(e.get("jrAmount")>0&&(t+=e.get("jrAmount")),e.getIn(["account","accountUuid"])&&(a=!0)):e.get("jrAmount")<0&&(t-=e.get("jrAmount")))})),n(W.l("fromPage","")),n(W.l("accountDate",(new J.a).valueOf())),n(W.l("selectList",Object(P.fromJS)(u))),n(W.l("account",null)),n(W.l("receiveAmount",t)),n(W.l("setAccount",!1)),n(W.l("conSetAccount",a)),n(W.l("poundageCurrentCardList",Object(P.fromJS)([]))),n(W.l("poundageProjectCardList",Object(P.fromJS)([]))),l.push("/searchapproval/receiveapproval")}"\u6838\u8bb0"===s?(n(W.l("fromPage","")),n(W.l("accountDate",(new J.a).valueOf())),n(W.l("selectList",Object(P.fromJS)(u))),l.push("/searchapproval/bookKeepingapproval")):"\u4ed8\u6b3e"===s?(n(W.l("fromPage","")),n(W.l("accountDate",(new J.a).valueOf())),n(W.l("selectList",Object(P.fromJS)(u))),n(W.l("account",Object(P.fromJS)({}))),l.push("/searchapproval/payapproval")):"\u6302\u8d26"===s?v&&(n(W.l("fromPage","")),n(W.l("accountDate",(new J.a).valueOf())),n(W.l("selectList",Object(P.fromJS)(u))),n(W.l("beZeroInventory",!1)),l.push("/searchapproval/accountapproval")):"\u4f5c\u5e9f"===s&&n(W.o(u,(function(){e.setState({multiOperationType:""}),n(W.l("selectList",Object(P.fromJS)([])))})))}},A.a.createElement(_.l,{type:"shoufukuan"}),A.a.createElement("span",null,s)))))}}]),a}(A.a.Component))||o,ne=Object(R.c)((function(e){return e}))(s=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){D.a.setTitle({title:"\u67e5\u8be2\u5ba1\u6279"}),D.a.setIcon({showIcon:!1}),D.a.setRight({show:!1}),"home"===sessionStorage.getItem("prevPage")&&(sessionStorage.removeItem("prevPage"),this.props.dispatch(W.j("currentPageType","ApprovalAll")),this.props.dispatch(W.r({searchType:"PROCESS_SEARCH_TITLE",searchContent:"",dateType:"DATE_TYPE_END",beginDate:null,endDate:null,processCode:"PROCESS_CODE_ALL"},1)),this.props.dispatch(W.s({dateType:"DATE_TYPE_END",beginDate:null,endDate:null},1)))}},{key:"render",value:function(){var e=this.props,t=(e.allState,e.dispatch,e.homeState,e.searchApprovalState),a=e.history,n=t.getIn(["views","currentPageType"]);return"ApprovalAll"===n?A.a.createElement(ee,{history:a}):"Detail"===n?A.a.createElement(ae,{history:a}):A.a.createElement("div",null,"\u672a\u5339\u914d")}}]),a}(A.a.Component))||s,re=(a(115),a(62),a(29),a(48),a(4)),le=a(1075),ce=Object(G.immutableRenderDecorator)(u=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.item,n=e.history,r=e.uuidList,l=e.editLrAccountPermission,c=a.get("jrIndex"),i=a.get("jrState"),o=a.get("jrCategoryType"),s={JR_HANDLE_NO:"1",JR_HANDLE_HALF:"2",JR_HANDLE_ALL:"3"},u=a.get("jrOriUuid"),p=a.get("jrJvUuid"),d=a.get("jrAmount"),m=[],g="0",v="0",h="0",y="0",f="0",E="0";"LB_YYSR"!==o&&"LB_YYWSR"!==o||("\u9884\u6536\u8d26\u6b3e"===a.get("detailType")?h=s[i]:a.get("jrAmount")>0?g=s[i]:a.get("jrAmount")<0&&(h=s[i])),"LB_YYZC"!==o&&"LB_YYWZC"!==o&&"LB_FYZC"!==o||("\u9884\u4ed8\u8d26\u6b3e"===a.get("detailType")?h=s[i]:a.get("jrAmount")>0?v=s[i]:a.get("jrAmount")<0&&(h=s[i])),"LB_XCZC"===o&&(y=s[i]),"LB_ZSKX"===o&&(f=s[i]),"LB_ZFKX"===o&&(E=s[i]);var b=[{key:"receive",value:g,toRouter:"SFGL",direction:"debit"},{key:"pay",value:v,toRouter:"SFGL",direction:"credit"},{key:"shouldReturn",value:h,toRouter:"SFGL",direction:"credit"},{key:"makeOut",value:"0",toRouter:"KJFP"},{key:"auth",value:"0",toRouter:"FPRZ"},{key:"carryover",value:"0",toRouter:"JZSY"},{key:"grant",value:y,toRouter:"XCZC"},{key:"defray",value:"0",toRouter:"DEFRAY"},{key:"takeBack",value:f,toRouter:"ZSFKX"},{key:"back",value:E,toRouter:"ZSFKX"}],C={shouldReturn:"\u9000\u6b3e",pay:"\u4ed8\u6b3e",receive:"\u6536\u6b3e",makeOut:"\u5f00\u7968",auth:"\u8ba4\u8bc1",carryover:"\u7ed3\u8f6c",grant:"".concat(d>0?"\u53d1\u653e":"\u6536\u6b3e"),defray:"".concat(d>0?"\u7f34\u7eb3":"\u6536\u6b3e"),takeBack:"\u6536\u56de",back:"\u9000\u8fd8"};return b.forEach((function(e){"1"!=e.value&&"2"!=e.value||m.push(A.a.createElement(_.c,{className:"search-approval-calculate-state-btn",key:e.key,disabled:!l,onClick:function(){sessionStorage.setItem("toCalculate","TRUE"),t(le.f(n,u,p,e.toRouter,e.direction,"searchApproval",e.key))}},C[e.key]))})),c?A.a.createElement("div",{className:"search-approval-calculate-wrap"},A.a.createElement("div",{className:"search-approval-calculate-jr"},A.a.createElement("div",{className:"search-approval-calculate-jr-index",onClick:function(){t(Q.b.getRunningPreviewBusinessFetch(a.get("jrOriUuid"),a,r,"searchApproval",n))}},A.a.createElement(_.l,{type:"liushui",style:{fontSize:".13rem"}}),"\xa0",A.a.createElement("span",null,c,"\u53f7")),A.a.createElement("div",{className:"search-approval-calculate-jr-oriDate"},A.a.createElement("span",null,a.get("oriDate")),A.a.createElement("i",{className:"approval-all-item-child-separate",style:{display:a.get("jrIndex")?"":"none"}},"|"),A.a.createElement("span",null,"\u8bb0\u8d26\u5458\uff1a",a.get("operateUserName")))),A.a.createElement("div",{className:"search-approval-calculate-state"},A.a.createElement("span",{className:"search-approval-calculate-state-jrState"},{JR_HANDLE_NO:"\u672a\u6838\u9500",JR_HANDLE_HALF:"\u90e8\u5206\u6838\u9500",JR_HANDLE_ALL:"\u5168\u90e8\u6838\u9500"}[i]),m)):null}}]),a}(A.a.Component))||u,ie=Object(G.immutableRenderDecorator)(p=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){var e=this.props,t=e.billList,a=e.isEnable,n=e.categoryType,r=e.oriState,l=null;if(t&&t.size){var c=t.getIn([0,"tax"]),i=-1==t.getIn([0,"taxRate"])?"**":t.getIn([0,"taxRate"]),o=t.getIn([0,"billType"]);if("small"==a&&["LB_YYZC","LB_FYZC","LB_YYWZC"].includes(n)&&["","bill_other"].includes(o))return null;if("small"==a&&"STATE_CQZC_YF"==r&&["","bill_other"].includes(o))return null;if("isEnable"==a&&["","bill_other"].includes(o))return null;l=A.a.createElement("li",{className:"search-approval-preview-detail-item"},A.a.createElement("label",{className:"search-approval-preview-detail-label"},"\u7968\u636e\uff1a"),A.a.createElement("span",{className:"search-approval-preview-detail-text"},"\u5176\u4ed6\u7968\u636e")),["bill_common","bill_special"].includes(o)&&(l=A.a.createElement("li",{className:"search-approval-preview-detail-item"},A.a.createElement("label",{className:"search-approval-preview-detail-label"},"\u7968\u636e\uff1a"),A.a.createElement("span",{className:"search-approval-preview-detail-text"},"bill_common"==o?"\u53d1\u7968":"\u589e\u503c\u7a0e\u53d1\u7968","(\u7a0e\u989d:",A.a.createElement(_.a,{showZero:!0},c),";\u7a0e\u7387:","".concat(i,"%"),")")))}return l}}]),a}(A.a.Component))||p,oe=Object(R.c)((function(e){return e}))(d=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(D.a.setTitle({title:"\u9884\u89c8\u660e\u7ec6"}),D.a.setIcon({showIcon:!1}),D.a.setRight({show:!1}),"TRUE"===sessionStorage.getItem("toCalculate")){sessionStorage.removeItem("toCalculate");var t=this.props.searchApprovalState.getIn(["views","currentPageType"]);"ApprovalAll"===t?this.props.dispatch(W.r({refresh:!0},null,(function(){var t=e.props.editRunningModalState.get("previewApprovalModalTemp").get("id");e.props.dispatch(W.p(t,(function(){}),""))}))):"Detail"===t&&this.props.dispatch(W.q({refresh:!0},null,(function(){var t=e.props.editRunningModalState.get("previewApprovalModalTemp").get("id");e.props.dispatch(W.p(t,(function(){}),""))})))}}}]),Object(N.a)(a,[{key:"render",value:function(){var e=this.props,t=e.allState,a=e.dispatch,n=e.homeState,r=e.history,l=e.editRunningModalState,c=n.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]),i=l.get("previewApprovalModalTemp"),o=l.get("categoryData"),s=l.get("jrUuidList"),u=i.get("processTitle"),p=i.get("jrDate"),d=i.get("id"),m=i.get("detailType"),g=i.get("jrAmount"),v=i.get("categoryName"),h=i.get("jrAbstract"),y=i.get("dealState"),f=i.get("account"),E=i.get("inputAccount"),b=i.get("outputAccount"),C=i.get("outputDepot"),L=i.get("inputDepot"),S=i.get("jrCategoryType"),O=i.get("jrCategoryUuid"),j=(S?Object(K.a)(S):{categoryTypeObj:""}).categoryTypeObj,N=!!j&&o.getIn([j,"beManagemented"]),T=!!j&&o.getIn([j,"beZeroInventory"]),k=i.get("contactList"),I=i.get("projectList"),w=i.get("stockList"),R=i.get("billList"),U=t.getIn(["taxRate","scale"]),x=i.getIn(["billList",0,"billType"]),M=f?f.get("accountName"):"",B=l.get("datailUuidList"),Y=B.findIndex((function(e){return e.get("id")===d})),Z=!1,F=!1,H=K.c.indexOf(S)>-1;H?F=!0:"LB_XCZC"===S?"SX_FLF"===o.get("propertyPay")?Z=o.getIn([j,"beWelfare"]):"SX_QTXC"===o.get("propertyPay")&&(Z=o.getIn([j,"beAccrued"])):Z=N;var z=["LB_YYSR","LB_YYZC","LB_FYZC","LB_YYWSR","LB_YYWZC"].indexOf(S)>-1;return"isEnable"==U&&(z=!1,["bill_special","bill_common"].includes(x)&&(z=!0)),"small"==U&&["LB_YYZC","LB_FYZC","LB_YYWZC"].includes(S)&&["","bill_other"].includes(x)&&(z=!1,"bill_special"==x&&(z=!0)),A.a.createElement(_.h,{className:"search-approval"},A.a.createElement(_.r,{className:"date-header-wrap"},A.a.createElement(_.l,{className:"running-preview-header-left",type:"last",style:{color:Y<=0?"#ccc":""},onClick:function(){Y<=0||a(W.p(B.getIn([Y-1,"id"]),(function(){}),"switch"))}}),A.a.createElement("div",{className:"thirdparty-date-select"},A.a.createElement("span",{className:"thirdparty-date-date"},p?p.replace(/-/g,"/"):"")),A.a.createElement(_.l,{className:"running-preview-header-right",type:"next",style:{color:Y===B.size-1?"#ccc":""},onClick:function(){Y!==B.size-1&&a(W.p(B.getIn([Y+1,"id"]),(function(){}),"switch"))}})),A.a.createElement(_.s,{className:"content",flex:"1"},A.a.createElement("div",{className:"search-approval-preview"},y?A.a.createElement(_.l,{className:"search-approval-preview-dealState",style:{color:"PROCESS_DISUSE"===y?"#ccc":"#ff8348"},type:{PROCESS_PAYING:"yifukuan",PROCESS_ACCOUNTING:"yiguazhang",PROCESS_BOOK_KEEPING:"yijizhang",PROCESS_DISUSE:"yizuofei",PROCESS_INCOME:"yishoukuan"}[y]}):null,A.a.createElement("div",{className:"search-approval-preview-title-wrap",onClick:function(){D.a.openLink({url:"https://aflow.dingtalk.com/dingtalk/mobile/homepage.htm?dd_share=false&showmenu=true&dd_progress=false&back=native&corpid=".concat(sessionStorage.getItem("corpId"),"&swfrom=","XFN","#/approval?procInstId=").concat(i.get("processInstanceId"))})}},A.a.createElement("span",{className:"search-approval-preview-title-text"},u||"\u6807\u9898"),A.a.createElement("span",{className:"search-approval-preview-title-icon"},A.a.createElement(_.l,{type:"arrow-right"}))),A.a.createElement("h4",{className:"search-approval-preview-type"},m),A.a.createElement("ul",{className:"search-approval-preview-detail-list"},A.a.createElement("li",{className:"search-approval-preview-detail-item"},A.a.createElement("label",{className:"search-approval-preview-detail-label"},"\u660e\u7ec6\u65e5\u671f\uff1a"),A.a.createElement("span",{className:"search-approval-preview-detail-text"},p)),A.a.createElement("li",{className:"search-approval-preview-detail-item"},A.a.createElement("label",{className:"search-approval-preview-detail-label"},"\u660e\u7ec6\u91d1\u989d\uff1a"),A.a.createElement("span",{className:"search-approval-preview-detail-text"},A.a.createElement(_.a,null,g))),M?A.a.createElement("li",{className:"search-approval-preview-detail-item"},A.a.createElement("label",{className:"search-approval-preview-detail-label"},"\u660e\u7ec6\u8d26\u6237\uff1a"),A.a.createElement("span",{className:"search-approval-preview-detail-text"},M)):null,-1===K.c.indexOf(S)?A.a.createElement("li",{className:"search-approval-preview-detail-item"},A.a.createElement("label",{className:"search-approval-preview-detail-label"},"\u6d41\u6c34\u7c7b\u522b\uff1a"),A.a.createElement("span",{className:"search-approval-preview-detail-text"},v)):null,A.a.createElement("li",{className:"search-approval-preview-detail-item"},A.a.createElement("label",{className:"search-approval-preview-detail-label"},"\u6458\u8981\uff1a"),A.a.createElement("span",{className:"search-approval-preview-detail-text"},h)),b&&b.get("accountUuid")?A.a.createElement("li",{className:"search-approval-preview-detail-item"},A.a.createElement("label",{className:"search-approval-preview-detail-label"},"\u8f6c\u51fa\u8d26\u6237\uff1a"),A.a.createElement("span",{className:"search-approval-preview-detail-text"},b.get("accountName"))):null,E&&E.get("accountUuid")?A.a.createElement("li",{className:"search-approval-preview-detail-item"},A.a.createElement("label",{className:"search-approval-preview-detail-label"},"\u8f6c\u5165\u8d26\u6237\uff1a"),A.a.createElement("span",{className:"search-approval-preview-detail-text"},E.get("accountName"))):null,"LB_CHDB"==S&&C&&C.get("uuid")?A.a.createElement("li",{className:"search-approval-preview-detail-item"},A.a.createElement("label",{className:"search-approval-preview-detail-label"},"\u8c03\u51fa\u4ed3\u5e93\uff1a"),A.a.createElement("span",{className:"search-approval-preview-detail-text"},C.get("code")+""+C.get("name"))):null,"LB_CHDB"==S&&L&&L.get("uuid")?A.a.createElement("li",{className:"search-approval-preview-detail-item"},A.a.createElement("label",{className:"search-approval-preview-detail-label"},"\u8c03\u5165\u4ed3\u5e93\uff1a"),A.a.createElement("span",{className:"search-approval-preview-detail-text"},L.get("code")+""+L.get("name"))):null,k.size?A.a.createElement("li",{className:"search-approval-preview-detail-item"},A.a.createElement("label",{className:"search-approval-preview-detail-label"},"\u5f80\u6765\u5355\u4f4d\uff1a"),A.a.createElement("div",{className:"search-approval-preview-detail-text-wrap"},k.map((function(e){return A.a.createElement("span",{className:"search-approval-preview-detail-text",key:e.get("code")},"".concat(e.get("code"),"_").concat(e.get("name")))})))):null,I.size?A.a.createElement("li",{className:"search-approval-preview-detail-item"},A.a.createElement("label",{className:"search-approval-preview-detail-label"},"\u9879\u76ee\uff1a"),A.a.createElement("div",{className:"search-approval-preview-detail-text-wrap"},I.map((function(e){return A.a.createElement("span",{className:"search-approval-preview-detail-text",key:e.get("code")},K.f.indexOf(e.get("code"))>-1?"".concat(e.get("name")):"".concat(e.get("code"),"_").concat(e.get("name")))})))):null,w.size?A.a.createElement("li",null,A.a.createElement("div",{style:{display:1==w.size?"":"none"}},A.a.createElement("div",{className:"search-approval-preview-detail-item"},A.a.createElement("div",{className:"search-approval-preview-detail-label"},"\u5b58\u8d27\uff1a"),A.a.createElement("div",{className:"search-approval-preview-detail-text-wrap"},"".concat(w.getIn([0,"stockCode"])," ").concat(w.getIn([0,"stockName"])))),-1===["LB_CHDB"].indexOf(S)?A.a.createElement("div",{className:"search-approval-preview-detail-item",style:{display:w.getIn([0,"depotName"])?"":"none"}},A.a.createElement("div",{className:"search-approval-preview-detail-label"},"\u4ed3\u5e93\uff1a"),A.a.createElement("div",{className:"search-approval-preview-detail-text-wrap"},w.getIn([0,"depotCode"])," ",w.getIn([0,"depotName"]))):null,A.a.createElement("div",{style:{display:w.getIn([0,"number"])?"":"none"}},A.a.createElement("div",{className:"search-approval-preview-detail-item"},A.a.createElement("div",{className:"search-approval-preview-detail-label"},"\u6570\u91cf\uff1a"),A.a.createElement("div",{className:"search-approval-preview-detail-text-wrap"},"".concat(Object(J.n)(w.getIn([0,"number"]),4,"",!1)," ").concat(w.getIn([0,"unitName"])?w.getIn([0,"unitName"]):""))),A.a.createElement("div",{className:"search-approval-preview-detail-item"},A.a.createElement("div",{className:"search-approval-preview-detail-label"},"\u5355\u4ef7\uff1a"),A.a.createElement("div",{className:"search-approval-preview-detail-text-wrap"},"".concat(Object(J.n)(w.getIn([0,"unitPrice"]),4,"",!1)))))),A.a.createElement("div",{className:"search-approval-preview-detail-item",style:{display:w.size>1?"":"none"}},A.a.createElement("div",{className:"search-approval-preview-detail-label"},"\u5b58\u8d27\uff1a"),A.a.createElement("div",{className:"search-approval-preview-detail-text-wrap"},"\u591a\u5b58\u8d27")),A.a.createElement("div",{className:"search-approval-preview-detail-item-bgColor",style:{display:w.size>1?"":"none"}},w.map((function(e,t){return A.a.createElement("div",{key:t},A.a.createElement("div",{className:"search-approval-preview-detail-item"},A.a.createElement("div",{className:"search-approval-preview-detail-label"},A.a.createElement("span",{className:"spot"},"\u2022 "),"\u5b58\u8d27\uff1a"),A.a.createElement("div",{className:"search-approval-preview-detail-text-wrap"},"".concat(e.get("stockCode")," ").concat(e.get("stockName")))),-1===["LB_CHDB"].indexOf(S)?A.a.createElement("div",{className:"search-approval-preview-detail-item",style:{display:e.get("depotName")?"":"none"}},A.a.createElement("div",{className:"search-approval-preview-detail-label"},"\u4ed3\u5e93\uff1a"),A.a.createElement("div",{className:"search-approval-preview-detail-text-wrap"},e.get("depotCode")," ",e.get("depotName"))):null,A.a.createElement("div",{style:{display:e.get("number")?"":"none"}},A.a.createElement("div",{className:"search-approval-preview-detail-item"},A.a.createElement("div",{className:"search-approval-preview-detail-label"},"\u6570\u91cf\uff1a"),A.a.createElement("div",{className:"search-approval-preview-detail-text-wrap"},"".concat(Object(J.n)(e.get("number"),4,"",!1)," ").concat(e.get("unitName")?e.get("unitName"):""))),A.a.createElement("div",{className:"search-approval-preview-detail-item"},A.a.createElement("div",{className:"search-approval-preview-detail-label"},"\u5355\u4ef7\uff1a"),A.a.createElement("div",{className:"search-approval-preview-detail-text-wrap"},"".concat(Object(J.n)(e.get("unitPrice"),4,"",!1))))),A.a.createElement("div",{className:"search-approval-preview-detail-item"},A.a.createElement("div",{className:"search-approval-preview-detail-label"},"\u91d1\u989d\uff1a"),A.a.createElement("div",{className:"search-approval-preview-detail-text-wrap"},Object(J.n)(e.get("amount"),2,""))))})))):null,z?A.a.createElement(ie,{billList:R,isEnable:U,categoryType:S,oriState:""}):null)),A.a.createElement(ce,{item:i,dispatch:a,history:r,uuidList:s,editLrAccountPermission:c})),A.a.createElement(_.r,{className:"footer"},A.a.createElement(_.d,Object(re.a)({style:{height:50}},"style",{display:y?"none":""}),A.a.createElement(_.c,{disabled:!c,style:{display:O&&!H&&(-1===K.e.indexOf(S)&&g>0||K.e.indexOf(S)>-1&&g<0)?"":"none"},onClick:function(){if(g>0&&T&&a(W.l("beZeroInventory",T)),f&&f.size&&f.get("accountUuid")){var e=t.get("accountList");(e.size?e.getIn([0,"childList"]):Object(P.fromJS)([])).find((function(e){return e.get("uuid")===f.get("accountUuid")}))&&a(W.l("account",Object(P.fromJS)({accountName:f.get("accountName"),accountUuid:f.get("accountUuid")})))}a(W.l("fromPage","modal")),a(W.l("selectList",Object(P.fromJS)([d]))),r.push("/searchapproval/payapproval")}},A.a.createElement(_.l,{type:"shoufukuan"}),A.a.createElement("span",null,"\u4ed8\u6b3e")),A.a.createElement(_.c,{disabled:!c,style:{display:O&&!H&&(-1===K.e.indexOf(S)&&g<0||K.e.indexOf(S)>-1&&g>0)?"":"none"},onClick:function(){if(f&&f.size&&f.get("accountUuid")){var e=t.get("accountList"),n=(e.size?e.getIn([0,"childList"]):Object(P.fromJS)([])).find((function(e){return e.get("uuid")===f.get("accountUuid")}));if(n){var l={needPoundage:n.get("needPoundage"),poundage:n.get("poundage"),poundageRate:n.get("poundageRate")},c=l.poundage,i=l.poundageRate,o=g>0?g:-g,s=Math.abs(o||0)*i/1e3>c&&c>0?c:Math.abs(o||0)*i/1e3;a(W.l("account",Object(P.fromJS)({accountName:f.get("accountName"),accountUuid:f.get("accountUuid"),poundage:l,poundageAmount:(s||0).toFixed(2)}))),a(W.l("receiveAmount",g>0?g:-g))}}else a(W.l("account",null)),a(W.l("receiveAmount",g>0?g:-g));a(W.l("fromPage","modal")),a(W.l("selectList",Object(P.fromJS)([d]))),r.push("/searchapproval/receiveapproval")}},A.a.createElement(_.l,{type:"shoufukuan"}),A.a.createElement("span",null,"\u6536\u6b3e")),A.a.createElement(_.c,{disabled:!c,style:{display:O&&!H&&Z?"":"none"},onClick:function(){g>0&&T&&a(W.l("beZeroInventory",T)),a(W.l("fromPage","modal")),a(W.l("selectList",Object(P.fromJS)([d]))),r.push("/searchapproval/accountapproval")}},A.a.createElement(_.l,{type:"guazhang"}),A.a.createElement("span",null,"\u6302\u8d26")),A.a.createElement(_.c,{disabled:!c,style:{display:O&&H&&F?"":"none"},onClick:function(){if(b&&b.size&&b.get("accountUuid")){var e=t.get("accountList"),n=(e.size?e.getIn([0,"childList"]):Object(P.fromJS)([])).find((function(e){return e.get("uuid")===b.get("accountUuid")}));if(n){var l={needPoundage:n.get("needPoundage"),poundage:n.get("poundage"),poundageRate:n.get("poundageRate")},c=l.poundage,i=l.poundageRate,o=g>0?g:-g,s=Math.abs(o||0)*i/1e3>c&&c>0?c:Math.abs(o||0)*i/1e3;a(W.l("account",Object(P.fromJS)({accountName:b.get("accountName"),accountUuid:b.get("accountUuid"),poundage:l,poundageAmount:(s||0).toFixed(2)}))),a(W.l("receiveAmount",g>0?g:-g))}}else a(W.l("account",null)),a(W.l("receiveAmount",g>0?g:-g));a(W.l("fromPage","modal")),a(W.l("selectList",Object(P.fromJS)([d]))),r.push("/searchapproval/bookKeepingapproval")}},A.a.createElement(_.l,{type:"home"}),A.a.createElement("span",null,"\u6838\u8bb0")),A.a.createElement(_.c,{disabled:!c,onClick:function(){a(W.o([d],(function(){a(W.p(d,(function(){}),"switch"))})))}},A.a.createElement(_.l,{type:"zuofei"}),A.a.createElement("span",null,"\u4f5c\u5e9f")),A.a.createElement(_.c,{onClick:function(){a(W.m()),a(W.c(d,(function(){r.push("/searchapproval/editapproval")}),"switch"))}},A.a.createElement(_.l,{type:"adjustment"}),A.a.createElement("span",null,"\u8c03\u6574"))),A.a.createElement(_.d,Object(re.a)({style:{height:50}},"style",{display:y?"":"none"}),A.a.createElement(_.c,{style:{color:"\u6302\u8d26"!==X[y]||"JR_HANDLE_HALF"!=B.getIn([Y,"jrState"])&&"JR_HANDLE_ALL"!=B.getIn([Y,"jrState"])?"#222":"#ccc"},disabled:!c,onClick:function(){if("\u6302\u8d26"===X[y]&&("JR_HANDLE_HALF"==B.getIn([Y,"jrState"])||"JR_HANDLE_ALL"==B.getIn([Y,"jrState"])))return D.a.toast.info("\u6709\u5173\u8054\u7684\u6838\u9500\u6d41\u6c34\uff0c\u65e0\u6cd5\u53cd\u6302\u8d26");a(W.e([d],(function(){a(W.p(d,(function(){}),"switch"))})))}},A.a.createElement(_.l,{type:"chexiao"}),A.a.createElement("span",null,"\u53cd".concat(X[y]))))))}}]),a}(A.a.Component))||d,se=(a(82),a(14)),ue=(a(70),a(1063)),pe=a(1040),de=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isAll:!0,categoryValue:"ALL"},e}return Object(N.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.props.categoryType!=e.categoryType&&this.setState({categoryValue:"ALL",isAll:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.beContact,r=t.contactsRange,l=t.currentCardList,c=t.strongListSize,i=t.contactSourceCategoryList,o=t.contactSourceCardList,s=this.state,u=(s.isAll,s.categoryValue),p=l.get(0),d=c,m=[{uuid:"ALL",name:"\u5168\u90e8",childList:[]}];i&&i.map((function(e){m.push(e.toJS())})),function e(t){t.forEach((function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)}))}(m);var g=o?o.toJS():[];return g.map((function(e){e.cardName=e.name,e.key="".concat(e.code," ").concat(e.name),e.name=e.key})),A.a.createElement("div",{className:"lrls-card lrls-more-card",style:{height:".45rem"}},A.a.createElement("label",null,n?"\u5f80\u6765\u5355\u4f4d:":"\u5f80\u6765\u5355\u4f4d"),n?A.a.createElement(_.f,{className:"lrls-single",type:"card",title:"\u8bf7\u9009\u62e9\u5f80\u6765\u5355\u4f4d",icon:{type:"current-add",onClick:function(){r.size?a(pe.c(r,"","searchApproval")):D.a.toast.info("\u8bf7\u9009\u62e9\u5f80\u6765\u8303\u56f4")}},district:m,cardList:g,value:u,cardValue:[p?p.get("cardUuid"):""],onChange:function(t){if(e.setState({categoryValue:t.key}),"ALL"==t.key)return a(W.x(r,"contact",!0)),void e.setState({isAll:!0});e.setState({isAll:!1}),a(W.y(t.key,!0===t.top?1:""))},onOk:function(e){0!=e.length&&a(W.h("contactList",Object(P.fromJS)([{uuid:e[0].uuid,code:e[0].code,type:"WLDW",name:e[0].cardName}])))}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},p?A.a.createElement("span",null," ","".concat(p.get("code")," ").concat(p.get("name"))," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u5f80\u6765\u5355\u4f4d"),A.a.createElement(_.l,{type:"triangle",style:{color:d?"#ccc":"#666"}}))):null,A.a.createElement("div",{className:"noTextSwitch",style:{marginLeft:".06rem"}},A.a.createElement(_.w,{checked:n,onClick:function(){a(W.h("beContact",!n))}})))}}]),a}(I.Component),me=(a(83),function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isAll:!0,categoryValue:"ALL"},e}return Object(N.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.props.categoryType!=e.categoryType&&this.setState({categoryValue:"ALL",isAll:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.categoryType,r=t.beProject,l=t.projectRange,c=t.projectList,i=t.propertyCostList,o=t.propertyCarryover,s=(t.oriState,t.openProject),u=t.jrCostType,p=t.projectSourceCategoryList,d=t.projectSourceCardList,m=this.state,g=(m.isAll,m.categoryValue),v=!1,h=!1,y=!1;switch(n){case"LB_YYZC":h="SX_FW"==o,y="SX_FW"==o;break;case"LB_FYZC":case"LB_XCZC":v=!0,h=!0,y=!0}var f=[{uuid:"ALL",name:"\u5168\u90e8",childList:[]}];p&&p.map((function(e){if(l.includes(e.get("uuid"))){if(["LB_CQZC","LB_JZSY"].includes(n)&&["\u751f\u4ea7\u9879\u76ee","\u65bd\u5de5\u9879\u76ee"].includes(e.get("name")))return;if(["LB_JZCB"].includes(n)&&["\u751f\u4ea7\u9879\u76ee"].includes(e.get("name")))return;f.push(e.toJS())}["LB_CHTRXM","LB_XMJZ"].includes(n)&&f.push(e.toJS())})),function e(t){t.forEach((function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)}))}(f);var E=d?d.toJS():[];E.map((function(e){e.cardName=e.name,e.key="".concat(e.code," ").concat(e.name),e.name=K.f.indexOf(e.code)>-1?e.name:"".concat(e.code," ").concat(e.name),e.value=e.key})),E=E.filter((function(e){var t=!0;return!v&&e.value.includes("COMNCRD")&&(t=!1),h||!e.value.includes("ASSIST")&&!e.value.includes("MAKE")||(t=!1),y||!e.value.includes("INDIRECT")&&!e.value.includes("MECHANICAL")||(t=!1),["LB_CQZC","LB_JZSY"].includes(n)&&["XZ_PRODUCE","XZ_CONSTRUCTION"].includes(e.projectProperty)&&(t=!1),["LB_JZCB"].includes(n)&&["XZ_PRODUCE"].includes(e.projectProperty)&&(t=!1),t}));var b=c&&c.getIn([0,"uuid"]),C=c&&c.getIn([0,"code"]),L=c&&c.getIn([0,"name"]),S="".concat(C," ").concat(L);return K.f.includes(C)&&(S=L),A.a.createElement(_.r,{className:"lrls-card lrls-more-card",style:{height:".45rem"}},A.a.createElement("label",null,r?"\u9879\u76ee:":"\u9879\u76ee"),r?A.a.createElement(_.f,{className:"lrls-single",type:"card",disabled:!1,title:"\u8bf7\u9009\u62e9\u9879\u76ee",icon:{type:"project-add",onClick:function(){l.size?a(pe.d("",l,"searchApproval")):D.a.toast.info("\u8bf7\u9009\u62e9\u9879\u76ee\u8303\u56f4")}},district:f,cardList:E,value:g,cardValue:[b],onChange:function(t){if(e.setState({categoryValue:t.key}),"ALL"==t.key)return a(W.v(l,"project",!0)),void e.setState({isAll:!0});e.setState({isAll:!1}),a(W.w(t.key,!0===t.top?1:""))},onOk:function(e){if(0!=e.length){a(W.h("projectList",Object(P.fromJS)([{uuid:e[0].uuid,code:e[0].code,type:"XM",name:e[0].cardName}])));var t=e[0].projectProperty;if("XZ_PRODUCE"===t)"ASSIST"===e[0].code?a(W.h("jrCostType","FZSCCB")):"MAKE"===e[0].code?a(W.h("jrCostType","ZZFY")):a(W.h("jrCostType","SCCB"));else if("XZ_CONSTRUCTION"==t){var n="HTCB";"INDIRECT"==e[0].code&&(n="JJFY"),"MECHANICAL"==e[0].code&&(n="JXZY"),a(W.h("jrCostType",n))}else if("GLFY"!==u||"XSFY"!==u||"CWFY"!==u)if(i.size){a(W.h("jrCostType",{XZ_MANAGE:"GLFY",XZ_SALE:"XSFY",XZ_FINANCE:"CWFY"}[i.get(0)]))}else a(W.h("jrCostType",""))}}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},b?A.a.createElement("span",{className:""}," ",S," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u9879\u76ee\u5361\u7247"),A.a.createElement(_.l,{type:"triangle",style:{color:"#666"}}))):null,A.a.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px",display:""}},A.a.createElement(_.w,{checked:r,onClick:function(){if(s&&0==!r&&(a(W.h("projectList",Object(P.fromJS)([]))),"GLFY"!==u||"XSFY"!==u||"CWFY"!==u))if(i.size){a(W.h("jrCostType",{XZ_MANAGE:"GLFY",XZ_SALE:"XSFY",XZ_FINANCE:"CWFY"}[i.get(0)]))}else a(W.h("jrCostType",""));a(W.h("beProject",!r))}})))}}]),a}(I.Component)),ge={decimalZero:!1,decimalPlaces:4},ve=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},e}return Object(N.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.props.categoryType!=e.categoryType&&this.setState({categoryValue:"ALL",isAll:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.invetorySourceCardList,r=t.invetorySourceCategoryList,l=t.stockList,c=t.cardDisabled,i=t.stockRange,o=t.propertyCarryover,s=t.usedStock,u=t.openQuantity,p=t.isOpenedWarehouse,d=t.taxRate,m=t.amount,g=this.state,v=(g.isAll,g.visible),h=(g.idx,g.categoryValue),y=1==l.size,f=[{uuid:"ALL",name:"\u5168\u90e8",childList:[]}];r&&r.map((function(e){i.includes(e.get("uuid"))&&f.push(e.toJS())})),function e(t){t.forEach((function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)}))}(f);var E=n?n.toJS():[];return E.map((function(e){e.cardName=e.name,e.key="".concat(e.code," ").concat(e.name),e.name=e.key})),A.a.createElement("div",{className:i.size?"lrls-card":""},A.a.createElement(_.r,{className:"lrls-more-card",style:{display:s?"none":""}},A.a.createElement("span",null,s?"\u5b58\u8d27\uff1a":"\u5b58\u8d27")),A.a.createElement(_.f,{visible:v,type:"card",multiSelect:!0,title:"\u8bf7\u9009\u62e9\u5b58\u8d27",icon:{type:"inventory-add",onClick:function(){i.size?a(pe.b(i,"","searchApproval")):D.a.toast.info("\u8bf7\u9009\u62e9\u5b58\u8d27\u8303\u56f4")}},district:f,cardList:E,value:h,onChange:function(t){if(e.setState({categoryValue:t.key}),"ALL"==t.key)return a(W.F(i,"stock",!0)),void e.setState({isAll:!0});e.setState({isAll:!1}),a(W.G(t.key,!0===t.top?1:""))},onOk:function(e){e.length&&a(W.i(l,e))},onCancel:function(){e.setState({visible:!1})}},A.a.createElement("span",null)),A.a.createElement("div",{style:{display:"SX_HW"==o||s?"":"none"}},l.map((function(e,t){var r=e.get("stockUuid"),i=e.get("depotUuid"),o=e.get("number")?Number(e.get("number")):0,s=e.get("unitPrice")?Number(e.get("unitPrice")):0,m=e.get("amount")?Number(e.get("amount")):0;return A.a.createElement("div",{key:t,className:"lrls-bottom-line lrls-card-bottom"},A.a.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},A.a.createElement("span",null,"\u5b58\u8d27\u660e\u7ec6(",t+1,")"),A.a.createElement("span",{className:c?"lrls-placeholder":"lrls-blue",style:{display:y?"none":""},onClick:function(){c||a(W.n(l,t,d))}},"\u5220\u9664")),A.a.createElement("div",{className:"lrls-more-card",onClick:function(){a(W.k("","currentEditInvetoryIndex",t)),a(Object(ue.push)("/searchapproval/stockedit"))}},A.a.createElement("div",{className:"lrls-single"},A.a.createElement(_.r,{className:"lrls-more-card lrls-card-bottom"},A.a.createElement("div",{className:"lrls-single overElli lrls-padding-right"},A.a.createElement("span",null,"\u5b58\u8d27:"),A.a.createElement("span",{className:r?"":"lrls-placeholder"},r?"".concat(e.get("stockCode")," ").concat(e.get("stockName")):" \u672a\u9009\u62e9")),A.a.createElement("div",{className:"lrls-single overElli lrls-padding-right",style:{display:p?"":"none"}},A.a.createElement("span",null,"\u4ed3\u5e93:"),A.a.createElement("span",{className:i?"":"lrls-placeholder"},i?"".concat(e.get("depotCode")," ").concat(e.get("depotName")):" \u672a\u9009\u62e9"))),A.a.createElement(_.r,{className:"lrls-more-card lrls-card-bottom"},u?A.a.createElement("div",{style:{display:(n.find((function(t){return t.get("uuid")===e.get("stockUuid")}))||Object(P.fromJS)([])).get("isOpenedQuantity")||JSON.parse(e.get("isOpenedQuantity")||!1)?"":"none"},className:"lrls-padding-right"},A.a.createElement("span",null,"\u6570\u91cf:"),A.a.createElement(_.a,ge,o),A.a.createElement("span",null,e.get("unitUuid")?e.get("unitName"):null)):A.a.createElement("div",{style:{display:"none"},className:"lrls-padding-right"}),u?A.a.createElement("div",{style:{display:(n.find((function(t){return t.get("uuid")===e.get("stockUuid")}))||Object(P.fromJS)([])).get("isOpenedQuantity")||JSON.parse(e.get("isOpenedQuantity")||!1)?"":"none"},className:"lrls-single overElli lrls-padding-right"},A.a.createElement("span",null,"\u5355\u4ef7:"),A.a.createElement(_.a,ge,s)):A.a.createElement("div",{style:{display:"none"},className:"lrls-single overElli lrls-padding-right"}),A.a.createElement("div",{className:"lrls-padding-right"},A.a.createElement("span",null,"\u91d1\u989d:"),A.a.createElement(_.a,null,m)))),A.a.createElement(_.l,{type:"arrow-right"})))}))),A.a.createElement("div",{className:"lrls-more-card lrls-margin-top",style:{display:"SX_HW"==o||s?"":"none",fontWeight:"bold"}},A.a.createElement("div",null,"\u603b\u91d1\u989d\uff1a",A.a.createElement(_.a,{showZero:!0},m)),A.a.createElement("div",{className:"lrls-stock-bottom"},A.a.createElement("div",{className:c?"lrls-placeholder":"lrls-blue",onClick:function(){c||e.setState({visible:!0,idx:l.size})}},"+\u6dfb\u52a0\u5b58\u8d27\u660e\u7ec6"),A.a.createElement("div",{className:"noTextSwitch",style:{display:"none"}},A.a.createElement(_.w,{disabled:c,checked:s,onClick:function(){a(editRunningActions.changeLrlsData(["oriTemp","usedStock"],!s))}})))))}}]),a}(I.Component),he=(a(117),function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).taxRateList=[],e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.rateOptionList.toJS().forEach((function(t){e.taxRateList.push({key:"".concat(t,"%"),value:t})})),this.taxRateList.push({key:"**%",value:-1})}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.categoryType,n=(e.oriState,e.billList),r=e.amount,l=e.scale,c=e.isModify,i=e.oriBillType,o=e.handleType,s=e.direction,u=e.isDJ,p=n?n.getIn([0,"billType"]):"",d=n?n.getIn([0,"billState"]):"",m=n?n.getIn([0,"taxRate"]):"",g=n?n.getIn([0,"tax"]):"",v=-1==m,h=[],y={bill_other:"\u5176\u4ed6\u7968\u636e",bill_common:"\u53d1\u7968",bill_special:"\u589e\u503c\u7a0e\u4e13\u7528\u53d1\u7968"}[p],f=!1;switch(a){case"LB_YYSR":f=!u,h=[{key:"\u53d1\u7968",value:"bill_common"},{key:"\u5176\u4ed6\u7968\u636e",value:"bill_other"}];break;case"LB_YYZC":case"LB_FYZC":("general"==l||c)&&(f=!u,h=[{key:"\u589e\u503c\u7a0e\u4e13\u7528\u53d1\u7968",value:"bill_special"},{key:"\u5176\u4ed6\u7968\u636e",value:"bill_other"}]);break;case"LB_YYWSR":f=!0,h=[{key:"\u53d1\u7968",value:"bill_common"},{key:"\u5176\u4ed6\u7968\u636e",value:"bill_other"}];break;case"LB_YYWZC":("general"==l||c)&&(f=!0,h=[{key:"\u589e\u503c\u7a0e\u4e13\u7528\u53d1\u7968",value:"bill_special"},{key:"\u5176\u4ed6\u7968\u636e",value:"bill_other"}])}return"isEnable"==l&&(f=!1,c&&["bill_special","bill_common"].includes(i)&&(f=!0)),"small"==l&&["LB_YYZC","LB_FYZC","LB_YYWZC"].includes(a)&&["","bill_other"].includes(p)&&(f=!1,c&&"bill_special"==i&&(f=!0)),f?A.a.createElement(_.r,{className:"lrls-card"},A.a.createElement(_.r,{className:"yysr-bill"},A.a.createElement("div",{className:"lrls-more-card"},A.a.createElement("label",null,"\u7968\u636e\u7c7b\u578b:"),A.a.createElement(_.u,{className:"lrls-single",district:h,value:p,onOk:function(e){t(W.f("billType",e.value)),"small"===l?"JR_HANDLE_GJ"!==o&&"debit"===s&&"bill_other"!==e&&t(W.K("bill_states_make_out")):"general"===l&&("LB_CQZC"===a?"JR_HANDLE_GJ"===o&&"bill_other"!==e?t(W.K("bill_states_auth")):"JR_HANDLE_CZ"===o&&"bill_other"!==e&&t(W.K("bill_states_make_out")):"debit"===s&&"bill_other"!==e?t(W.K("bill_states_make_out")):"bill_other"!==e&&t(W.K("bill_states_auth")))}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},A.a.createElement("span",null,y),A.a.createElement(_.l,{type:"triangle"})))),"bill_special"==p||"bill_common"==p?A.a.createElement(_.x,{checked:"bill_states_make_out"===d||"bill_states_auth"===d,checkedChildren:"debit"===s&&"JR_HANDLE_GJ"!==o?"\u5df2\u5f00\u7968":"\u5df2\u8ba4\u8bc1",unCheckedChildren:"debit"===s&&"JR_HANDLE_GJ"!==o?"\u672a\u5f00\u7968":"\u672a\u8ba4\u8bc1",className:"threeTextSwitch",onChange:function(){"small"===l?"debit"===s&&"bill_other"!==p?t("bill_states_make_out"===d?W.f("billState","bill_states_not_make_out"):W.f("billState","bill_states_make_out")):"bill_states_auth"===d?t(W.f("billState","bill_states_not_auth")):"bill_states_not_auth"===d&&t(W.f("billState","bill_states_auth")):"JR_HANDLE_GJ"===o?t("bill_states_auth"===d?W.f("billState","bill_states_not_auth"):W.f("billState","bill_states_auth")):"debit"===s?"bill_other"!==p&&t("bill_states_make_out"===d?W.f("billState","bill_states_not_make_out"):W.f("billState","bill_states_make_out")):"bill_other"!==p&&t("bill_states_auth"===d?W.f("billState","bill_states_not_auth"):W.f("billState","bill_states_auth"))}}):null),"bill_other"!=p?A.a.createElement(_.r,null,A.a.createElement(_.r,{className:"lrls-more-card lrls-margin-top"},A.a.createElement("label",null,"\u7a0e\u7387:"),A.a.createElement(_.u,{className:"lrls-single",district:this.taxRateList,value:m,onOk:function(e){t(W.L(e.value))}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},A.a.createElement("span",null,"".concat(-1==m?"**":m,"%"),A.a.createElement("span",{className:"lrls-placeholder",style:{display:v?"none":""}},"(\u7a0e\u989d\uff1a",A.a.createElement(_.a,{showZero:!0},g)," \u4ef7\u7a0e\u5408\u8ba1: ",A.a.createElement(_.a,{showZero:!0},r),")")),A.a.createElement(_.l,{type:"triangle"})))),A.a.createElement(_.r,{className:"yysr-amount lrls-margin-top",style:{display:v?"":"none"}},A.a.createElement("label",null,"\u7a0e\u989d\uff1a"),A.a.createElement(_.E.BorderInputItem,{mode:"amount",placeholder:"\u586b\u5199\u91d1\u989d",value:g,negativeAllowed:!0,onChange:function(e){Math.abs(e)>Math.abs(r)?D.a.toast.info("\u7a0e\u989d\u6709\u8bef\uff0c\u4e0d\u5141\u8bb8\u5927\u4e8e\u4ef7\u7a0e\u5408\u8ba1"):t(W.f("tax",e))}}))):null):null}}]),a}(I.Component)),ye=Object(G.immutableRenderDecorator)(m=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={showCardModal:!1},n}return Object(N.a)(a,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.editRunningModalState,n=e.scale,r=e.payableRate,l=(e.outputRate,e.accountList,e.runningCategory),c=e.enableWarehouse,i=e.openQuantity,o=e.showContact,s=e.showProject,u=e.currentbillType,p=(e.accountSource,e.rateOptionList),d=a.get("editRunningModalTemp"),m=a.get("categoryData"),g=d.get("jrCategoryType"),v=g?K.e.indexOf(g)>-1?"RECEIPT":"PAYMENT":"",h=d.get("detailType"),y="\u9500\u552e\u5b58\u8d27\u5957\u4ef6"===h||"\u91c7\u8d2d\u5b58\u8d27\u5957\u4ef6"===h,f="\u9884\u4ed8\u8d26\u6b3e"===h||"\u9884\u6536\u8d26\u6b3e"===h,E=d.get("canChoseDetailList"),b=[];E.forEach((function(e){return b.push({key:e.get("label"),value:e.get("id")+se.B+e.get("label")})}));var C=m.get("propertyCarryover"),L=Object(K.b)(l,null,!0,{jrCategoryType:g,payOrReceive:v,isStock:y,isDJ:f});!function e(t){t.forEach((function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)}))}(L);var S=m.get("propertyCostList"),O={GLFY:"\u7ba1\u7406\u8d39\u7528",XSFY:"\u9500\u552e\u8d39\u7528",XZ_MANAGE:"\u7ba1\u7406\u8d39\u7528",XZ_SALE:"\u9500\u552e\u8d39\u7528",FZSCCB:"\u8f85\u52a9\u751f\u4ea7\u6210\u672c",ZZFY:"\u5236\u9020\u8d39\u7528",SCCB:"\u751f\u4ea7\u6210\u672c",JJFY:"\u95f4\u63a5\u8d39\u7528",JXZY:"\u673a\u68b0\u4f5c\u4e1a",HTCB:"\u5408\u540c\u6210\u672c"},j=["FZSCCB","ZZFY","SCCB","HTCB","JJFY","JXZY"],N=[];S.forEach((function(e){N.push({value:e,key:O[e]})}));var T=d.get("jrAmount"),k=d.get("categoryName"),I=d.get("jrAbstract"),w=d.get("contactList"),R=d.get("projectList"),D=d.get("stockList"),J=d.get("beContact"),U=d.get("beProject"),x=d.get("billList"),M=x.getIn([0,"taxRate"]),B=d.get("jrCostType"),Y=(g?Object(K.a)(g):{categoryTypeObj:""}).categoryTypeObj,Z=m.get("beProject"),F=m.get("projectRange"),H=Y?m.getIn([Y,"contactsRange"]):Object(P.fromJS)([]),X=Y?m.getIn([Y,"stockRange"]):Object(P.fromJS)([]),z=a.get("contactSourceCategoryList"),G=a.get("contactSourceCardList"),Q=a.get("projectSourceCategoryList"),V=a.get("projectSourceCardList"),q=a.get("invetorySourceCategoryList"),$=a.get("invetorySourceCardList");return A.a.createElement("div",null,A.a.createElement(_.r,{className:"lrls-card"},A.a.createElement(_.r,{className:"lrls-type"},A.a.createElement("label",null,"\u6d41\u6c34\u7c7b\u522b:"),A.a.createElement(_.f,{disabled:!1,district:L,onChange:function(e){e&&t(W.g(e.uuid,e.categoryType,e.name,d))},onCancel:function(){}},A.a.createElement(_.r,null,A.a.createElement("span",null,k||""),"\xa0",A.a.createElement(_.l,{type:"triangle",style:{color:"#666"}}))))),S.size>1&&!f?A.a.createElement(_.r,{className:"lrls-card"},A.a.createElement(_.r,{className:"lrls-more-card"},A.a.createElement("label",null,"\u8d39\u7528\u6027\u8d28:"),A.a.createElement(_.u,{className:"lrls-single",district:N,value:B?O[B]:"",disabled:j.indexOf(B)>-1,onOk:function(e){t(W.h("jrCostType",{XZ_MANAGE:"GLFY",XZ_SALE:"XSFY"}[e.value]))}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},B?A.a.createElement("span",{className:-1===j.indexOf(B)?"":"lrls-placeholder"}," ",O[B]," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u8d39\u7528\u6027\u8d28"),A.a.createElement(_.l,{type:"triangle",style:{color:"#666"}}))))):null,A.a.createElement(_.r,{className:"lrls-card"},A.a.createElement("div",{className:"lrls-line"},A.a.createElement("label",null,"\u6458\u8981\uff1a"),A.a.createElement(_.B,{name:"running-textarea",placeholder:"\u6458\u8981\u586b\u5199",value:I,onChange:function(e){t(W.h("jrAbstract",e))}}))),o?A.a.createElement(de,{history:history,dispatch:t,beContact:J,categoryType:g,contactsRange:H,currentCardList:w,contactSourceCategoryList:z,contactSourceCardList:G}):null,s?A.a.createElement(me,{history:history,dispatch:t,projectList:R,projectRange:F,beProject:U,propertyCarryover:C,categoryType:g,openProject:Z,jrCostType:B,propertyCostList:S,projectSourceCategoryList:Q,projectSourceCardList:V}):null,y?A.a.createElement(ve,{dispatch:t,stockList:D,stockRange:X,openQuantity:i,usedStock:!0,invetorySourceCategoryList:q,invetorySourceCardList:$,cardDisabled:!1,taxRate:M,propertyCarryover:C,isOpenedWarehouse:c,amount:T}):null,"isEnable"==n?null:A.a.createElement(he,{dispatch:t,categoryType:g,oriState:"",billList:x,amount:T,scale:n,payableRate:r,isModify:!0,oriBillType:u,handleType:"",direction:{LB_YYSR:"debit",LB_YYZC:"credit",LB_FYZC:"credit",LB_YYWSR:"debit",LB_YYWZC:"credit"}[g],rateOptionList:p,isDJ:f}))}}]),a}(A.a.Component))||m,fe={decimalZero:!1,decimalPlaces:4},Ee=Object(G.immutableRenderDecorator)(g=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={showCardModal:!1,isAll:!0,visible:!1,idx:-1,categoryValue:"ALL"},n}return Object(N.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.editRunningModalState,r=t.accountSource,l=this.state,c=(l.isAll,l.visible),i=l.idx,o=l.categoryValue,s=n.get("editRunningModalTemp"),u=n.get("warehouseSourceCategoryList"),p=(n.get("categoryData"),s.get("jrCategoryType")),d=s.get("jrDate"),m=s.get("canChoseDetailList"),g=[];m.forEach((function(e){return g.push({key:e.get("label"),value:e.get("id")+se.B+e.get("label")})}));var v=s.get("jrAbstract"),h=s.get("inputAccount"),y=s.get("outputAccount"),f=s.get("inputDepot"),E=s.get("outputDepot"),b=n.get("invetorySourceCategoryList"),C=n.get("invetorySourceCardList"),L=s.get("stockList"),S=1==L.size,O=[{uuid:"ALL",name:"\u5168\u90e8",childList:[]}];b&&b.map((function(e){O.push(e.toJS())})),function e(t){t.forEach((function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)}))}(O);var j=C?C.toJS():[];return j.map((function(e){e.cardName=e.name,e.key="".concat(e.code," ").concat(e.name),e.name=e.key})),A.a.createElement("div",null,A.a.createElement(_.r,{className:"lrls-card"},A.a.createElement("div",{className:"lrls-line"},A.a.createElement("label",null,"\u6458\u8981\uff1a"),A.a.createElement(_.B,{name:"running-textarea",placeholder:"\u6458\u8981\u586b\u5199",value:v,onChange:function(e){a(W.h("jrAbstract",e))}}))),"LB_ZZ"===p?A.a.createElement(_.r,{className:"lrls-card"},A.a.createElement(_.r,{className:"lrls-more-card lrls-margin-top"},A.a.createElement("label",null,"\u8f6c\u51fa\u8d26\u6237:"),A.a.createElement(_.u,{className:"lrls-single",district:r,value:y&&y.size?"".concat(y.get("accountName")):"",onOk:function(e){var t=e.value.split(se.B);a(W.h("outputAccount",Object(P.fromJS)({accountName:t[1],accountUuid:t[0]})))}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},y&&y.size?A.a.createElement("span",null," ","".concat(y.get("accountName"))," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u660e\u7ec6\u8d26\u6237"),y&&y.size?A.a.createElement(_.l,{type:"preview",theme:"filled",style:{color:"#666"},onClick:function(e){e.stopPropagation(),a(W.h("outputAccount",null))}}):A.a.createElement(_.l,{type:"triangle",style:{color:"#666"}})))),A.a.createElement(_.r,{className:"lrls-more-card lrls-margin-top"},A.a.createElement("label",null,"\u8f6c\u5165\u8d26\u6237:"),A.a.createElement(_.u,{className:"lrls-single",district:r,value:h&&h.size?"".concat(h.get("accountName")):"",onOk:function(e){var t=e.value.split(se.B);a(W.h("inputAccount",Object(P.fromJS)({accountName:t[1],accountUuid:t[0]})))}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},h&&h.size?A.a.createElement("span",null," ","".concat(h.get("accountName"))," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u660e\u7ec6\u8d26\u6237"),h&&h.size?A.a.createElement(_.l,{type:"preview",theme:"filled",style:{color:"#666"},onClick:function(e){e.stopPropagation(),a(W.h("inputAccount",null))}}):A.a.createElement(_.l,{type:"triangle",style:{color:"#666"}}))))):null,"LB_CHDB"===p?A.a.createElement("div",{className:"lrls-card"},A.a.createElement("div",{className:"lrls-more-card lrls-bottom"},A.a.createElement("label",null,"\u8c03\u51fa\u4ed3\u5e93:"),A.a.createElement(_.u,{className:"lrls-single",district:u.toJS(),value:E.get("uuid"),onOk:function(e){a(W.h("outputDepot",Object(P.fromJS)(e))),a(W.D(d,e.uuid))}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},E.get("uuid")?A.a.createElement("span",null," ","".concat(E.get("code")," ").concat(E.get("name"))," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u8c03\u51fa\u4ed3\u5e93"),A.a.createElement(_.l,{type:"triangle"})))),A.a.createElement("div",{className:"lrls-more-card"},A.a.createElement("label",null,"\u8c03\u5165\u4ed3\u5e93:"),A.a.createElement(_.u,{className:"lrls-single",district:u.toJS(),value:f.get("uuid"),onOk:function(e){a(W.h("inputDepot",Object(P.fromJS)(e)))}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},f.get("uuid")?A.a.createElement("span",null," ","".concat(f.get("code")," ").concat(f.get("name"))," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u8c03\u5165\u4ed3\u5e93"),A.a.createElement(_.l,{type:"triangle"}))))):null,"LB_CHDB"===p?A.a.createElement("div",{className:"lrls-card"},A.a.createElement(_.f,{visible:c,type:"card",multiSelect:!0,title:"\u8bf7\u9009\u62e9\u5b58\u8d27",icon:{type:"inventory-add",onClick:function(){a(pe.b([],"","searchApproval"))}},district:O,cardList:j,value:o,onChange:function(t){if(e.setState({categoryValue:t.key}),"ALL"==t.key)return a(W.F([],"hidecategory",!0)),void e.setState({isAll:!0});e.setState({isAll:!1}),a(W.G(t.key,!0===t.top?1:""))},onOk:function(e){e.length&&(a(W.i(L,e)),a(W.C(i,e)))},onCancel:function(){e.setState({visible:!1})}},A.a.createElement("span",null)),L.map((function(e,t){var n=e.get("isOpenedQuantity"),r=e.get("stockUuid"),l=e.get("number")?Number(e.get("number")):0,c=e.get("unitPrice")?Number(e.get("unitPrice")):0,i=e.get("amount")?Number(e.get("amount")):0;return A.a.createElement("div",{key:t,className:"lrls-bottom-line lrls-card-bottom"},A.a.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-card-bottom"},A.a.createElement("span",null,"\u5b58\u8d27\u660e\u7ec6(",t+1,")"),A.a.createElement("span",{className:"lrls-blue",style:{display:S?"none":""},onClick:function(){a(W.n(L,t))}},"\u5220\u9664")),A.a.createElement("div",{className:"lrls-more-card",onClick:function(){a(W.k("","currentEditInvetoryIndex",t)),a(Object(ue.push)("/searchapproval/hidegategorystockcomedit"))}},A.a.createElement("div",{className:"lrls-single"},A.a.createElement(_.r,{className:"lrls-more-card lrls-card-bottom"},A.a.createElement("div",{className:"lrls-single overElli lrls-padding-right"},A.a.createElement("span",null,"\u5b58\u8d27:"),A.a.createElement("span",{className:r?"":"lrls-placeholder"},r?"".concat(e.get("stockCode")," ").concat(e.get("stockName")):" \u672a\u9009\u62e9"))),A.a.createElement(_.r,{className:"lrls-more-card lrls-card-bottom"},A.a.createElement("div",{style:{display:n?"":"none"},className:"lrls-padding-right lrls-one-third"},A.a.createElement("span",null,"\u6570\u91cf:"),A.a.createElement(_.a,fe,l),A.a.createElement("span",null,e.get("unitUuid")?e.get("unitName"):null)),A.a.createElement("div",{style:{display:n?"":"none"},className:"lrls-single overElli lrls-padding-right"},A.a.createElement("span",null,"\u5355\u4ef7:"),A.a.createElement(_.a,fe,c)),A.a.createElement("div",{className:"lrls-padding-right lrls-one-third"},A.a.createElement("span",null,"\u91d1\u989d:"),A.a.createElement(_.a,null,i)))),A.a.createElement(_.l,{type:"arrow-right"})))})),A.a.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold"}},A.a.createElement("div",null),A.a.createElement("div",{className:"lrls-blue",onClick:function(){e.setState({visible:!0,idx:L.size,cardType:"stockCardList"})}},"+\u6dfb\u52a0\u5b58\u8d27\u660e\u7ec6"))):null)}}]),a}(A.a.Component))||g,be=Object(R.c)((function(e){return e}))((y=h=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(e){var n;Object(j.a)(this,a);var r=(n=t.call(this,e)).props.editRunningModalState.get("editRunningModalTemp"),l=n.props.editRunningModalState.get("categoryData"),c=(r.get("jrCategoryType")?Object(K.a)(r.get("jrCategoryType")):{categoryTypeObj:""}).categoryTypeObj;return n.state={showContact:c&&l.getIn([c,"contactsManagement"])||r.get("beContact"),showProject:l.get("beProject")||r.get("beProject"),currentbillType:r.getIn(["billList",0,"billType"])},n}return Object(N.a)(a,[{key:"componentDidMount",value:function(){D.a.setTitle({title:"\u8c03\u6574\u660e\u7ec6"}),D.a.setIcon({showIcon:!1}),D.a.setRight({show:!1})}},{key:"componentWillReceiveProps",value:function(e){if(this.props.editRunningModalState.getIn(["editRunningModalTemp","jrCategoryUuid"])!==e.editRunningModalState.getIn(["editRunningModalTemp","jrCategoryUuid"])){var t=e.editRunningModalState.get("editRunningModalTemp"),a=e.editRunningModalState.get("categoryData"),n=(t.get("jrCategoryType")?Object(K.a)(t.get("jrCategoryType")):{categoryTypeObj:""}).categoryTypeObj;this.setState({showContact:n&&a.getIn([n,"contactsManagement"])||t.get("beContact"),showProject:a.get("beProject")||t.get("beProject")})}}},{key:"render",value:function(){var e=this.props,t=e.allState,a=e.dispatch,n=e.homeState,r=e.history,l=e.editRunningModalState,c=this.state,i=c.showContact,o=c.showProject,s=c.currentbillType,u=n.getIn(["permissionInfo","LrAccount"]).getIn(["edit","permission"]),p=l.get("editRunningModalTemp"),d=(l.get("categoryData"),p.get("jrCategoryType")),m=t.getIn(["taxRate","scale"]),g=t.getIn(["taxRate","payableRate"]),v=t.getIn(["taxRate","outputRate"]),h=t.getIn(["taxRate","rateOptionList"]),y=d?K.e.indexOf(d)>-1?"RECEIPT":"PAYMENT":"",f=p.get("detailType"),E="\u9500\u552e\u5b58\u8d27\u5957\u4ef6"===f||"\u91c7\u8d2d\u5b58\u8d27\u5957\u4ef6"===f,b="\u9884\u4ed8\u8d26\u6b3e"===f||"\u9884\u6536\u8d26\u6b3e"===f,C=p.get("canChoseDetailList"),L=[];C.forEach((function(e){return L.push({key:e.get("label"),value:e.get("id")+se.B+e.get("label")})}));var S=t.get("accountList"),O=S.size?S.getIn([0,"childList"]):Object(P.fromJS)([]),j=[];O.forEach((function(e){return j.push({key:e.get("name"),value:"".concat(e.get("uuid")).concat(se.B).concat(e.get("name"))})}));var N=t.get("runningCategory"),T=p.get("jrDate"),k=p.get("id"),I=p.get("jrAmount"),w=p.get("account"),R=n.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1,D=n.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("QUANTITY")>-1;return A.a.createElement(_.h,{className:"edit-running search-approval"},A.a.createElement(U.e,{value:T,callback:function(e){a(W.h("jrDate",e))},onChange:function(e){a(W.h("jrDate",new J.a(e).valueOf()))}}),A.a.createElement(_.s,{flex:"1"},A.a.createElement(_.r,{className:"lrls-card"},A.a.createElement(_.r,{className:"lrls-more-card"},A.a.createElement("label",null,"\u660e\u7ec6\u7c7b\u578b:"),A.a.createElement(_.u,{className:"lrls-single",district:L,value:f||"",disabled:z.indexOf(f)>-1,onOk:function(e){var t=e.value.split(se.B);a(W.h("detailId",t[0])),a(W.h("detailType",t[1]))}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},f?A.a.createElement("span",null," ",f," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u660e\u7ec6\u7c7b\u578b"),A.a.createElement(_.l,{type:"triangle",style:{color:"#666"}})))),E||"\u5b58\u8d27\u8c03\u62e8\u5957\u4ef6"===f?null:A.a.createElement(_.r,{className:"lrls-more-card lrls-margin-top"},A.a.createElement("label",null,"\u660e\u7ec6\u91d1\u989d:"),A.a.createElement(_.E.BorderInputItem,{mode:"amount",placeholder:"\u586b\u5199\u91d1\u989d",value:I,negativeAllowed:"LB_ZZ"!==d&&!b,onChange:function(e){a(W.h("jrAmount",e))}})),"RECEIPT"===y?A.a.createElement(_.r,{className:"lrls-more-card lrls-margin-top"},A.a.createElement("label",null,"\u660e\u7ec6\u8d26\u6237:"),A.a.createElement(_.u,{className:"lrls-single",district:j,value:w&&w.size?"".concat(w.get("accountName")):"",onOk:function(e){var t=e.value.split(se.B);a(W.h("account",Object(P.fromJS)({accountName:t[1],accountUuid:t[0]})))}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},w&&w.size?A.a.createElement("span",null," ","".concat(w.get("accountName"))," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u660e\u7ec6\u8d26\u6237"),w&&w.size?A.a.createElement(_.l,{type:"preview",theme:"filled",style:{color:"#666"},onClick:function(e){e.stopPropagation(),a(W.h("account",null))}}):A.a.createElement(_.l,{type:"triangle",style:{color:"#666"}})))):null),K.c.indexOf(d)>-1?A.a.createElement(Ee,{dispatch:a,editRunningModalState:l,accountSource:j}):A.a.createElement(ye,{dispatch:a,editRunningModalState:l,scale:m,payableRate:g,outputRate:v,accountList:S,runningCategory:N,enableWarehouse:R,openQuantity:D,showProject:o,showContact:i,currentbillType:s,accountSource:j,rateOptionList:h})),A.a.createElement(_.r,{className:"footer"},A.a.createElement(_.d,{style:{height:50}},A.a.createElement(_.c,{onClick:function(){a(W.p(k,(function(){r.goBack()}),"switch"))}},A.a.createElement(_.l,{type:"cancel"}),A.a.createElement("span",null,"\u53d6\u6d88")),A.a.createElement(_.c,{disabled:!u,onClick:function(){a(W.H(p,(function(){a(W.p(k,(function(){r.goBack()}),"switch"))})))}},A.a.createElement(_.l,{type:"save"}),A.a.createElement("span",null,"\u4fdd\u5b58")))))}}]),a}(A.a.Component),h.displayName="EditApproval",v=y))||v,Ce=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={checkedCurrent:!1,checkedProject:!1},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.accountPoundage.get("categoryUuid");e&&this.props.dispatch(W.z(e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.type,n=t.dispatch,r=t.account,l=t.needUsedPoundage,c=t.accountPoundage,i=t.poundageCurrentList,o=t.poundageProjectList,s=t.poundageCurrentCardList,u=t.poundageProjectCardList,p=t.accountProjectRange,d=t.accountContactsRange,m=t.receiveAmount,g=t.handlingFeeType,v=this.state,h=v.checkedCurrent,y=v.checkedProject,f=c.get("poundageNeedCurrent"),E=c.get("poundageNeedProject"),b=s.get(0)?s.get(0):Object(P.fromJS)({}),C=u.get(0)?u.get(0):Object(P.fromJS)({}),L="".concat(C.get("code")," ").concat(C.get("name"));K.f.includes(C.get("code"))&&(L=C.get("name"));var S=[],O=[];i.forEach((function(e){O.push({value:"".concat(e.get("uuid")).concat(se.B).concat(e.get("code")).concat(se.B).concat(e.get("name")),key:"".concat(e.get("code")," ").concat(e.get("name"))})})),o.forEach((function(e){S.push({value:"".concat(e.get("uuid")).concat(se.B).concat(e.get("code")).concat(se.B).concat(e.get("name")),key:"".concat(-1===K.f.indexOf(e.get("code"))?e.get("code"):""," ").concat(e.get("name"))})}));var j=0,N=0;return"\u6838\u8bb0"==a&&(j=Math.abs(Object(J.l)(m*r.getIn(["poundage","poundageRate"])/1e3)),r.getIn(["poundage","poundage"])&&r.getIn(["poundage","poundage"])>0&&Number(j)>r.getIn(["poundage","poundage"])&&(j=r.getIn(["poundage","poundage"])),N=Math.abs(Object(J.l)(m/(1+Number(r.getIn(["poundage","poundageRate"])/1e3))*r.getIn(["poundage","poundageRate"])/1e3)),r.getIn(["poundage","poundage"])&&r.getIn(["poundage","poundage"])>0&&Number(N)>r.getIn(["poundage","poundage"])&&(N=r.getIn(["poundage","poundage"]))),A.a.createElement("div",{className:"lrls-card"},A.a.createElement(_.r,{className:"lrls-more-card"},A.a.createElement("span",null,"\u8d26\u6237\u624b\u7eed\u8d39"),A.a.createElement("div",{className:"noTextSwitch"},A.a.createElement(_.w,{checked:l,onClick:function(){n(W.l("needUsedPoundage",!l)),l&&(n(W.l("poundageCurrentCardList",Object(P.fromJS)([]))),n(W.l("poundageProjectCardList",Object(P.fromJS)([]))))}}))),A.a.createElement("div",{style:{display:l?"":"none"}},A.a.createElement("div",{className:"lrls-more-card margin-top-bot lrls-jzsy",style:{display:f?"":"none"}},A.a.createElement("label",null,"\u5f80\u6765\u5355\u4f4d:"),h?A.a.createElement(_.u,{className:"lrls-single",district:O,value:b.get("cardUuid")?"".concat(b.get("cardUuid")).concat(se.B).concat(b.get("code")).concat(se.B).concat(b.get("name")):"",onOk:function(e){var t=e.value.split(se.B),a=t[0],r=t[1],l=t[2];n(W.l("poundageCurrentCardList",Object(P.fromJS)([{cardUuid:a,name:l,code:r}])))}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},b.get("cardUuid")?A.a.createElement("span",null," ","".concat(b.get("code")," ").concat(b.get("name"))," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u5f80\u6765\u5361\u7247"),A.a.createElement(_.l,{type:"triangle"}))):null,A.a.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px"}},A.a.createElement(_.w,{checked:h,onClick:function(){e.setState({checkedCurrent:!h}),h||n(W.u(d)),n(W.l("poundageCurrentCardList",Object(P.fromJS)([])))}}))),A.a.createElement("div",{className:"lrls-more-card margin-top-bot lrls-jzsy",style:{display:E?"":"none"}},A.a.createElement("label",null,"\u9879\u76ee:"),y?A.a.createElement(_.u,{className:"lrls-single",district:S,value:C.get("cardUuid")?"".concat(C.get("cardUuid")).concat(se.B).concat(C.get("code")).concat(se.B).concat(C.get("name")):"",onOk:function(e){var t=e.value.split(se.B),a=t[0],r=t[1],l=t[2];n(W.l("poundageProjectCardList",Object(P.fromJS)([{cardUuid:a,name:l,code:r}])))}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},C.get("cardUuid")?A.a.createElement("span",null," ",L," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u9879\u76ee\u5361\u7247"),A.a.createElement(_.l,{type:"triangle"}))):null,A.a.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px"}},A.a.createElement(_.w,{checked:y,onClick:function(){e.setState({checkedProject:!y}),y||n(W.t(p)),n(W.l("poundageProjectCardList",Object(P.fromJS)([])))}}))),A.a.createElement(_.r,{style:{display:"\u6838\u8bb0"==a?"none":""}},A.a.createElement("label",null,"\u6536\u6b3e\u91d1\u989d: \xa0"),A.a.createElement(_.a,null,m)),A.a.createElement(_.r,{className:"lrls-more-card"},A.a.createElement("label",null,"\u624b\u7eed\u8d39:"),A.a.createElement(_.A,{placeholder:"\u586b\u5199\u624b\u7eed\u8d39",value:r.get("poundageAmount"),onChange:function(e){if(/^\d*\.?\d{0,2}$/g.test(e)){if(r.getIn(["poundage","poundage"])&&r.getIn(["poundage","poundage"])>0&&Number(e)>r.getIn(["poundage","poundage"]))return void D.a.toast.info("\u8f93\u5165\u91d1\u989d\u4e0d\u53ef\u5927\u4e8e\u624b\u7eed\u8d39\u4e0a\u9650");n(W.l(["account","poundageAmount"],e))}}})),A.a.createElement(_.r,{className:"search-approval-poundage-amount",style:{display:"\u6838\u8bb0"==a?"":"none"}},A.a.createElement("ul",{className:"INCLUDE"===g?"search-approval-poundage-amount-item search-approval-poundage-amount-item-cur":"search-approval-poundage-amount-item",onClick:function(){n(W.l("handlingFeeType","INCLUDE")),n(W.l(["account","poundageAmount"],j))}},A.a.createElement("li",null,A.a.createElement("span",null,"\u8f6c\u51fa\u91d1\u989d\uff1a"),A.a.createElement("span",null,Object(J.l)(Number(m)+Number(j),2,!0))),A.a.createElement("li",null,A.a.createElement("span",null,"\u5230\u8d26\u91d1\u989d\uff1a"),A.a.createElement("span",null,Object(J.l)(m,2,!0))),A.a.createElement(_.l,{className:"search-approval-poundage-check",type:"tick",style:{display:"INCLUDE"===g?"":"none"}})),A.a.createElement("ul",{className:"EXCLUDE"===g?"search-approval-poundage-amount-item search-approval-poundage-amount-item-cur":"search-approval-poundage-amount-item",onClick:function(){n(W.l("handlingFeeType","EXCLUDE")),n(W.l(["account","poundageAmount"],N))}},A.a.createElement("li",null,A.a.createElement("span",null,"\u8f6c\u51fa\u91d1\u989d\uff1a"),A.a.createElement("span",null,Object(J.l)(m,2,!0))),A.a.createElement("li",null,A.a.createElement("span",null,"\u5230\u8d26\u91d1\u989d\uff1a"),A.a.createElement("span",null,Object(J.l)(m-N,2,!0))),A.a.createElement(_.l,{className:"search-approval-poundage-check",type:"tick",style:{display:"EXCLUDE"===g?"":"none"}})))))}}]),a}(I.Component),Le=Object(R.c)((function(e){return e}))(f=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){D.a.setTitle({title:"\u6536\u6b3e\u4fe1\u606f"}),D.a.setIcon({showIcon:!1}),D.a.setRight({show:!1})}},{key:"componentWillUnmount",value:function(){this.props.dispatch(W.l("accountDate",(new J.a).valueOf())),this.props.dispatch(W.l("account",null)),this.props.dispatch(W.l("conSetAccount",!1)),this.props.dispatch(W.l("setAccount",!1)),this.props.dispatch(W.l("needUsedPoundage",!1)),this.props.dispatch(W.l("poundageCurrentList",Object(P.fromJS)([]))),this.props.dispatch(W.l("poundageProjectList",Object(P.fromJS)([]))),this.props.dispatch(W.l("accountProjectRange",Object(P.fromJS)([]))),this.props.dispatch(W.l("accountContactsRange",Object(P.fromJS)([]))),this.props.dispatch(W.l("poundageCurrentCardList",Object(P.fromJS)([]))),this.props.dispatch(W.l("poundageProjectCardList",Object(P.fromJS)([])))}},{key:"render",value:function(){var e=this.props,t=e.allState,a=e.dispatch,n=e.history,r=e.approalAccountState,l=t.get("accountList"),c=[];l.size&&l.getIn([0,"childList"]).forEach((function(e,t){var a=e.toJS();a.key=e.get("name"),a.value="".concat(e.get("uuid")).concat(se.B).concat(e.get("name")),c.push(a)}));var i=r.get("fromPage"),o=t.get("accountPoundage"),s=r.get("receiveAmount"),u=r.get("conSetAccount"),p=r.get("setAccount"),d=r.get("needUsedPoundage"),m=r.get("poundageCurrentList"),g=r.get("poundageProjectList"),v=r.get("poundageCurrentCardList"),h=r.get("poundageProjectCardList"),y=r.get("accountProjectRange"),f=r.get("accountContactsRange"),E=r.get("accountDate"),b=r.get("selectList"),C=r.get("account"),L=r.getIn(["account","accountName"]),S=r.getIn(["account","accountUuid"]);return A.a.createElement(_.h,{className:"edit-running search-approval"},A.a.createElement(U.e,{value:E,callback:function(e){var t=new J.a(e).valueOf();a(W.l("accountDate",t))},onChange:function(e){var t=new J.a(e).valueOf();a(W.l("accountDate",t))}}),A.a.createElement(_.s,{flex:"1"},A.a.createElement(_.r,{className:"lrls-card"},A.a.createElement(_.r,{className:"lrls-more-card"},A.a.createElement("label",null,"\u8d26\u6237:"),A.a.createElement(_.u,{district:c,value:"".concat(S).concat(se.B).concat(L),onOk:function(e){var t=e.value.split(se.B),n=Object(P.fromJS)({needPoundage:e.needPoundage,poundage:e.poundage,poundageRate:e.poundageRate}),r=n.get("poundage"),l=n.get("poundageRate"),c=s,i=Math.abs(c||0)*l/1e3>r&&r>0?r:Math.abs(c||0)*l/1e3;a(W.l("account",Object(P.fromJS)({accountUuid:t[0],accountName:t[1],poundage:n.toJS(),poundageAmount:(i||0).toFixed(2)}))),n.get("needPoundage")||(a(W.l("poundageCurrentCardList",Object(P.fromJS)([]))),a(W.l("poundageProjectCardList",Object(P.fromJS)([]))))}},A.a.createElement(_.r,{style:{color:L?"":"#999"},className:"lrls-account lrls-type"},A.a.createElement("span",{className:"overElli"},L||"\u70b9\u51fb\u9009\u62e9\u8d26\u6237"),"\xa0",A.a.createElement(_.l,{type:"triangle",style:{color:"#666"}}))))),A.a.createElement(_.r,{className:"lrls-card",style:{display:u?"":"none"}},A.a.createElement(_.r,{className:"lrls-more-card"},A.a.createElement("label",{style:{width:"1rem"}},"\u6279\u91cf\u8bbe\u7f6e\u660e\u7ec6\u8d26\u6237:"),A.a.createElement("div",{className:"noTextSwitch"},A.a.createElement(_.w,{checked:p,onClick:function(){a(W.l("setAccount",!p))}})))),C&&C.getIn(["poundage","needPoundage"])?A.a.createElement(Ce,{dispatch:a,account:C,receiveAmount:s,needUsedPoundage:d,accountPoundage:o,poundageCurrentList:m,poundageProjectList:g,poundageCurrentCardList:v,poundageProjectCardList:h,accountProjectRange:y,accountContactsRange:f}):null),A.a.createElement(_.r,{className:"footer"},A.a.createElement(_.d,{style:{height:50}},A.a.createElement(_.c,{onClick:function(){n.goBack()}},A.a.createElement(_.l,{type:"cancel"}),A.a.createElement("span",null,"\u53d6\u6d88")),A.a.createElement(_.c,{onClick:function(){a(W.J(b,E,"modal"===i||p,d,C,s,(function(){"modal"===i&&a(W.p(b.get(0),(function(){}),"switch")),n.goBack()})))}},A.a.createElement(_.l,{type:"save"}),A.a.createElement("span",null,"\u4fdd\u5b58")))))}}]),a}(A.a.Component))||f,Se=Object(G.immutableRenderDecorator)(E=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.oriDate,n=t.beCarryoverOut,r=t.dispatch,l=t.carryoverCategoryList,c=t.carryoverCategoryItem,i=t.usedCarryoverProject,o=t.carryoverProjectCardList,s=t.carryoverProjectList,u=t.propertyCost,p=t.propertyCostList,d=l.toJS();!function e(t){t.forEach((function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)}))}(d);var m=[];p.forEach((function(e){"XZ_SALE"==e?m.push({key:"\u9500\u552e\u8d39\u7528",value:"XZ_SALE"}):"XZ_MANAGE"==e?m.push({key:"\u7ba1\u7406\u8d39\u7528",value:"XZ_MANAGE"}):"XZ_FINANCE"==e&&m.push({key:"\u8d22\u52a1\u8d39\u7528",value:"XZ_FINANCE"})}));var g=[];s.toJS().forEach((function(e){e.key="".concat(e.code," ").concat(e.name),e.oriName=e.name,e.value="".concat(e.uuid).concat(se.B).concat(e.code).concat(se.B).concat(e.name),K.f.indexOf(e.code)>-1&&(e.key=e.name),g.push(e)}));var v=o.get(0)?o.get(0):Object(P.fromJS)([{}]),h="".concat(v.get("code")," ").concat(v.get("name"));K.f.indexOf(v.get("code"))>-1&&(h=v.get("name"));var y=function(){"XZ_MANAGE"!==u&&"XZ_SALE"!==u&&"XZ_FINANCE"!==u&&(p.size?r(W.l("propertyCost",p.get(0))):r(W.l("propertyCost","")))};return A.a.createElement("div",{className:"lrls-card"},A.a.createElement(_.r,{className:"lrls-more-card"},A.a.createElement("span",null,"\u76f4\u63a5\u6210\u672c\u7ed3\u8f6c"),A.a.createElement("div",{className:"noTextSwitch"},A.a.createElement(_.w,{checked:n,onClick:function(){r(W.l("beCarryoverOut",!n)),r(W.B(a)),n&&(r(W.l("carryoverCategoryItem",null)),r(W.l("usedCarryoverProject",!1)),r(W.l("carryoverProjectCardList",Object(P.fromJS)([]))))}}))),n?A.a.createElement(_.r,{className:"lrls-more-card lrls-margin-top"},A.a.createElement("label",null,"\u5904\u7406\u7c7b\u522b: "),A.a.createElement("div",{className:"antd-single-picker"},A.a.createElement(_.f,{district:d,parentDisabled:!0,value:c&&c.size?c.getIn([0,"relationCategoryName"]):"",onChange:function(t){var a=!0===t.beProject;r(W.l("carryoverCategoryItem",Object(P.fromJS)([{relationCategoryUuid:t.uuid,relationCategoryName:t.name,relationBeProject:a}]))),e.setState({oriTemp:Object(P.fromJS)({categoryType:t.categoryType,handleType:"",oriState:"LB_FYZC"===t.categoryType?"STATE_FY":"",propertyCarryover:t.propertyCarryover})});var n=t.projectRange,l=t.propertyCostList;r(W.l("propertyCostList",Object(P.fromJS)(l))),1===l.length&&r(W.l("propertyCost",l[0])),a?r(W.A(n)):(r(W.l("usedCarryoverProject",!1)),r(W.l("carryoverProjectCardList",Object(P.fromJS)([]))))}},A.a.createElement(_.r,{className:"lrls-padding lrls-category",onClick:function(e){if(0==l.size)return e.stopPropagation(),D.a.toast.info("\u65e0\u5339\u914d\u7684\u5904\u7406\u7c7b\u522b",2)}},A.a.createElement("span",{className:c&&c.size?"":"lrls-placeholder"},c&&c.size?c.getIn([0,"relationCategoryName"]):"\u8bf7\u9009\u62e9\u5904\u7406\u7c7b\u522b"),A.a.createElement(_.l,{type:"triangle"}))))):null,n&&p.size>1?A.a.createElement(_.r,{className:"lrls-more-card lrls-margin-top"},A.a.createElement("label",null,"\u8d39\u7528\u6027\u8d28: "),A.a.createElement(_.u,{className:"lrls-single",district:m,value:u,disabled:"XZ_MANAGE"!==u&&"XZ_SALE"!==u&&"XZ_FINANCE"!==u&&""!==u,onOk:function(e){r(W.l("propertyCost",e.value))}},A.a.createElement(_.r,{className:"lrls-padding lrls-category"},A.a.createElement("span",{className:u?"XZ_MANAGE"!==u&&"XZ_SALE"!==u&&"XZ_FINANCE"!==u?"lrls-placeholder":"":"lrls-placeholder"},u?K.d[u]:"\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28"),A.a.createElement(_.l,{type:"triangle"})))):null,c&&c.size&&c.getIn([0,"relationBeProject"])?A.a.createElement("div",{className:"lrls-more-card lrls-margin-top"},A.a.createElement("label",null,"\u9879\u76ee:"),i?A.a.createElement(_.u,{className:"lrls-single",district:g,value:o&&o.size&&o.getIn([0,"code"])?"".concat(-1===K.f.indexOf(o.getIn([0,"code"]))?o.getIn([0,"code"])+" "+o.getIn([0,"name"]):o.getIn([0,"name"])):"",onOk:function(e){var t=e.value.split(se.B),a=t[0],n=t[1],l=t[2];r(W.l("carryoverProjectCardList",Object(P.fromJS)([{cardUuid:a,name:l,code:n}])));var c=e.projectProperty;"XZ_CONSTRUCTION"===c?r("INDIRECT"===n?W.l("propertyCost","XZ_JJFY"):"MECHANICAL"===n?W.l("propertyCost","XZ_JXZY"):W.l("propertyCost","XZ_HTCB")):"XZ_PRODUCE"===c?r("ASSIST"===n?W.l("propertyCost","XZ_FZSCCB"):"MAKE"===n?W.l("propertyCost","XZ_ZZFY"):W.l("propertyCost","XZ_SCCB")):y()}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},v.get("cardUuid")?A.a.createElement("span",null," ",h," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u9879\u76ee\u5361\u7247"),A.a.createElement(_.l,{type:"triangle"}))):null,A.a.createElement("div",{className:"noTextSwitch",style:{marginLeft:"6px"}},A.a.createElement(_.w,{checked:i,onClick:function(){i?(r(W.l("carryoverProjectCardList",Object(P.fromJS)([{}]))),y()):r(W.l("carryoverProjectCardList",Object(P.fromJS)([]))),r(W.l("usedCarryoverProject",!i))}}))):null)}}]),a}(A.a.Component))||E,Oe=Object(R.c)((function(e){return e}))(b=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){D.a.setTitle({title:"\u4ed8\u6b3e\u4fe1\u606f"}),D.a.setIcon({showIcon:!1}),D.a.setRight({show:!1})}},{key:"componentWillUnmount",value:function(){this.props.dispatch(W.l("accountDate",(new J.a).valueOf())),this.props.dispatch(W.l("account",null)),this.props.dispatch(W.l("beCarryoverOut",!1)),this.props.dispatch(W.l("propertyCost","")),this.props.dispatch(W.l("propertyCostList",Object(P.fromJS)([]))),this.props.dispatch(W.l("beZeroInventory",!1)),this.props.dispatch(W.l("carryoverCategoryItem",null)),this.props.dispatch(W.l("usedCarryoverProject",!1)),this.props.dispatch(W.l("carryoverProjectCardList",Object(P.fromJS)([])))}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.history,n=e.allState,r=e.approalAccountState,l=n.get("accountList"),c=[];l.size&&l.getIn([0,"childList"]).forEach((function(e,t){var a=e.toJS();a.key=e.get("name"),a.value="".concat(e.get("uuid")).concat(se.B).concat(e.get("name")),c.push(a)}));var i=r.get("fromPage"),o=r.get("account"),s=o?o.get("accountName"):"",u=o?o.get("accountUuid"):"",p=r.get("accountDate"),d=r.get("selectList"),m=r.get("beZeroInventory"),g=r.get("beCarryoverOut"),v=r.get("propertyCost"),h=r.get("propertyCostList"),y=r.get("carryoverCategoryList"),f=r.get("carryoverCategoryItem"),E=r.get("usedCarryoverProject"),b=r.get("carryoverProjectCardList"),C=r.get("carryoverProjectList");return A.a.createElement(_.h,{className:"edit-running search-approval"},A.a.createElement(U.e,{value:p,callback:function(e){var a=new J.a(e).valueOf();t(W.l("accountDate",a))},onChange:function(e){var a=new J.a(e).valueOf();t(W.l("accountDate",a))}}),A.a.createElement(_.s,{flex:"1"},A.a.createElement(_.r,{className:"lrls-card"},A.a.createElement(_.r,{className:"lrls-more-card"},A.a.createElement("label",null,"\u8d26\u6237:"),A.a.createElement(_.u,{className:"lrls-single",district:c,value:"".concat(u).concat(se.B).concat(s),onOk:function(e){var a=e.value.split(se.B);t(W.l("account",Object(P.fromJS)({accountUuid:a[0],accountName:a[1]})))}},A.a.createElement(_.r,{style:{color:s?"":"#999"},className:"lrls-account lrls-type"},A.a.createElement("span",{className:"overElli"},s||"\u70b9\u51fb\u9009\u62e9\u8d26\u6237"),A.a.createElement(_.l,{type:"triangle"}))))),m?A.a.createElement(Se,{oriDate:p,dispatch:t,beCarryoverOut:g,propertyCost:v,propertyCostList:h,carryoverCategoryList:y,carryoverCategoryItem:f,usedCarryoverProject:E,carryoverProjectCardList:b,carryoverProjectList:C}):null),A.a.createElement(_.r,{className:"footer"},A.a.createElement(_.d,{style:{height:50}},A.a.createElement(_.c,{onClick:function(){a.goBack()}},A.a.createElement(_.l,{type:"cancel"}),A.a.createElement("span",null,"\u53d6\u6d88")),A.a.createElement(_.c,{onClick:function(){t(W.I(d,o,p,g,f,b,v,(function(){"modal"===i&&t(W.p(d.get(0),(function(){}),"switch")),a.goBack()})))}},A.a.createElement(_.l,{type:"save"}),A.a.createElement("span",null,"\u4fdd\u5b58")))))}}]),a}(A.a.Component))||b,je=Object(R.c)((function(e){return e}))(C=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){D.a.setTitle({title:"\u6838\u8bb0\u4fe1\u606f"}),D.a.setIcon({showIcon:!1}),D.a.setRight({show:!1})}},{key:"componentWillUnmount",value:function(){this.props.dispatch(W.l("accountDate",(new J.a).valueOf())),this.props.dispatch(W.l("account",null)),this.props.dispatch(W.l("needUsedPoundage",!1)),this.props.dispatch(W.l("poundageCurrentList",Object(P.fromJS)([]))),this.props.dispatch(W.l("poundageProjectList",Object(P.fromJS)([]))),this.props.dispatch(W.l("accountProjectRange",Object(P.fromJS)([]))),this.props.dispatch(W.l("accountContactsRange",Object(P.fromJS)([]))),this.props.dispatch(W.l("poundageCurrentCardList",Object(P.fromJS)([]))),this.props.dispatch(W.l("poundageProjectCardList",Object(P.fromJS)([])))}},{key:"render",value:function(){var e=this.props,t=e.allState,a=e.dispatch,n=e.history,r=e.approalAccountState,l=t.get("accountList"),c=[];l.size&&l.getIn([0,"childList"]).forEach((function(e,t){var a=e.toJS();a.key=e.get("name"),a.value="".concat(e.get("uuid")).concat(se.B).concat(e.get("name")),c.push(a)}));var i=r.get("fromPage"),o=t.get("accountPoundage"),s=r.get("receiveAmount"),u=r.get("needUsedPoundage"),p=r.get("poundageCurrentList"),d=r.get("poundageProjectList"),m=r.get("poundageCurrentCardList"),g=r.get("poundageProjectCardList"),v=r.get("accountProjectRange"),h=r.get("accountContactsRange"),y=r.get("handlingFeeType"),f=r.get("accountDate"),E=r.get("selectList"),b=r.get("account");return A.a.createElement(_.h,{className:"edit-running search-approval"},A.a.createElement(U.e,{value:f,callback:function(e){var t=new J.a(e).valueOf();a(W.l("accountDate",t))},onChange:function(e){var t=new J.a(e).valueOf();a(W.l("accountDate",t))}}),A.a.createElement(_.s,{flex:"1"},b&&b.getIn(["poundage","needPoundage"])?A.a.createElement(Ce,{type:"\u6838\u8bb0",dispatch:a,account:b,receiveAmount:s,needUsedPoundage:u,accountPoundage:o,poundageCurrentList:p,poundageProjectList:d,poundageCurrentCardList:m,poundageProjectCardList:g,accountProjectRange:v,accountContactsRange:h,handlingFeeType:y}):null),A.a.createElement(_.r,{className:"footer"},A.a.createElement(_.d,{style:{height:50}},A.a.createElement(_.c,{onClick:function(){n.goBack()}},A.a.createElement(_.l,{type:"cancel"}),A.a.createElement("span",null,"\u53d6\u6d88")),A.a.createElement(_.c,{onClick:function(){a(W.d(E,f,(function(){"modal"===i&&a(W.p(E.get(0),(function(){}),"switch")),n.goBack()})))}},A.a.createElement(_.l,{type:"save"}),A.a.createElement("span",null,"\u4fdd\u5b58")))))}}]),a}(A.a.Component))||C,Ne=Object(R.c)((function(e){return e}))(L=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){D.a.setTitle({title:"\u6302\u8d26\u4fe1\u606f"}),D.a.setIcon({showIcon:!1}),D.a.setRight({show:!1})}}]),Object(N.a)(a,[{key:"componentWillUnmount",value:function(){this.props.dispatch(W.l("accountDate",(new J.a).valueOf())),this.props.dispatch(W.l("beCarryoverOut",!1)),this.props.dispatch(W.l("propertyCost","")),this.props.dispatch(W.l("propertyCostList",Object(P.fromJS)([]))),this.props.dispatch(W.l("beZeroInventory",!1)),this.props.dispatch(W.l("carryoverCategoryItem",null)),this.props.dispatch(W.l("usedCarryoverProject",!1)),this.props.dispatch(W.l("carryoverProjectCardList",Object(P.fromJS)([])))}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.history,n=e.approalAccountState,r=n.get("accountDate"),l=n.get("selectList"),c=n.get("fromPage"),i=n.get("beZeroInventory"),o=n.get("beCarryoverOut"),s=n.get("propertyCost"),u=n.get("propertyCostList"),p=n.get("carryoverCategoryList"),d=n.get("carryoverCategoryItem"),m=n.get("usedCarryoverProject"),g=n.get("carryoverProjectCardList"),v=n.get("carryoverProjectList");return A.a.createElement(_.h,{className:"edit-running search-approval"},A.a.createElement(U.e,{value:r,callback:function(e){var a=new J.a(e).valueOf();t(W.l("accountDate",a))},onChange:function(e){var a=new J.a(e).valueOf();t(W.l("accountDate",a))}}),A.a.createElement(_.s,{flex:"1"},i?A.a.createElement(Se,{oriDate:r,dispatch:t,beCarryoverOut:o,propertyCost:s,propertyCostList:u,carryoverCategoryList:p,carryoverCategoryItem:d,usedCarryoverProject:m,carryoverProjectCardList:g,carryoverProjectList:v}):null),A.a.createElement(_.r,{className:"footer"},A.a.createElement(_.d,{style:{height:50}},A.a.createElement(_.c,{onClick:function(){a.goBack()}},A.a.createElement(_.l,{type:"cancel"}),A.a.createElement("span",null,"\u53d6\u6d88")),A.a.createElement(_.c,{onClick:function(){t(W.a(l,r,o,d,g,s,(function(){"modal"===c&&t(W.p(l.get(0),(function(){}),"switch")),a.goBack()})))}},A.a.createElement(_.l,{type:"save"}),A.a.createElement("span",null,"\u4fdd\u5b58")))))}}]),a}(A.a.Component))||L,Te=a(51),ke=a(118),Ie=Object(R.c)((function(e){return e}))(S=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={isAll:!0,visible:!1,categoryValue:"ALL"},n}return Object(N.a)(a,[{key:"componentDidMount",value:function(){D.a.setTitle({title:"\u5b58\u8d27\u660e\u7ec6"}),D.a.setIcon({showIcon:!1}),D.a.setRight({show:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.history,r=t.homeState,l=t.editRunningModalState,c=this.state,i=c.visible,o=c.categoryValue,s=l.get("currentEditInvetoryIndex");console.log("idx",s);var u=l.get("categoryData"),p=l.get("editRunningModalTemp"),d=p.get("stockList"),m=p.get("billList").getIn([0,"taxRate"]),g=d.get(s),v=l.get("invetorySourceCategoryList"),h=l.get("invetorySourceCardList"),y=l.get("warehouseSourceCategoryList"),f=l.get("allInvetoryList"),E=r.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE")>-1,b=r.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("QUANTITY")>-1,C=p.get("jrCategoryType"),L=(C?Object(K.a)(C):{categoryTypeObj:""}).categoryTypeObj,S=L?u.getIn([L,"stockRange"]):Object(P.fromJS)([]),O=v,j=y,N=[{uuid:"ALL",name:"\u5168\u90e8",childList:[]}],T=h?h.toJS():[],k=d.size;O.map((function(e){S.includes(e.get("uuid"))&&N.push(e.toJS())})),T.map((function(e){e.cardName=e.name,e.key="".concat(e.code," ").concat(e.name),e.name=e.key}));!function e(t){t.forEach((function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)}))}(N);var I=s-1,w=s+1,R=[],J=g.get("stockUuid");if(b){var U,x=Object(ke.a)(T);try{for(x.s();!(U=x.n()).done;){var M=U.value;if(M.isOpenedQuantity&&M.uuid==J){R.push({key:M.unit.name,value:M.unit.uuid}),M.unit.unitList.map((function(e){R.push({key:e.name,value:e.uuid})})),M.unitPriceList&&M.unitPriceList;break}}}catch(B){x.e(B)}finally{x.f()}}return A.a.createElement(_.h,{className:"edit-running"},A.a.createElement(_.f,{visible:i,type:"card",title:"\u8bf7\u9009\u62e9\u5b58\u8d27",icon:{type:"inventory-add",onClick:function(){S.size?a(pe.b(S,n,"searchApproval")):D.a.toast.info("\u8bf7\u9009\u62e9\u5b58\u8d27\u8303\u56f4")}},district:N,cardList:T,value:o,onChange:function(t){if(e.setState({categoryValue:t.key}),"ALL"==t.key)return a(W.F(S,"stock",!0)),e.setState({isAll:!0});e.setState({isAll:!1}),a(W.G(t.key,!0===t.top?1:""))},onOk:function(e){if(e.length){var t=e[0],n=t.uuid,r=t.code,l=t.cardName,c=t.isOpenedQuantity,i={stockUuid:n,stockName:l,stockCode:r,amount:g.get("amount"),isOpenedQuantity:c,depotUuid:g.get("depotUuid"),depotCode:g.get("depotCode"),depotName:g.get("depotName")};if(t.priceList&&t.priceList.length){var o="",u="";t.unit.uuid===t.priceList[0].unitUuid?(u=t.unit.name,o=t.unit.uuid):t.unit.unitList.forEach((function(e){e.uuid===t.priceList[0].unitUuid&&(u=e.name,o=e.uuid)})),a(W.k("editRunningModalTemp",["stockList",s],Object(P.fromJS)(Object(Te.a)({},i,{unitPrice:t.priceList[0].defaultPrice,unitUuid:o,unitName:u}))))}else t.unit&&!t.unit.unitList.length?(a(W.k("editRunningModalTemp",["stockList",s,"unitName"],t.unit.name)),a(W.k("editRunningModalTemp",["stockList",s,"unitUuid"],t.unit.uuid)),a(W.k("editRunningModalTemp",["stockList",s],Object(P.fromJS)(Object(Te.a)({},i,{unitUuid:t.unit.uuid,unitName:t.unit.name}))))):a(W.k("editRunningModalTemp",["stockList",s],Object(P.fromJS)(Object(Te.a)({},i))))}},onCancel:function(){e.setState({visible:!1})}},A.a.createElement("span",null)),A.a.createElement(_.s,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll"},A.a.createElement("div",{className:"lrls-card"},A.a.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},A.a.createElement("span",null,"\u5b58\u8d27\u660e\u7ec6(",s+1,")")),A.a.createElement("div",{className:"lrls-more-card lrls-bottom"},A.a.createElement("label",null,"\u5b58\u8d27:"),A.a.createElement("div",{className:"lrls-single",onClick:function(){e.setState({visible:!0})}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},g.get("stockUuid")?A.a.createElement("span",null," ","".concat(g.get("stockCode")," ").concat(g.get("stockName"))," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u5b58\u8d27\u5361\u7247"),A.a.createElement(_.l,{type:"triangle",color:""})))),E?A.a.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:E?"":"none"}},A.a.createElement("label",null,"\u4ed3\u5e93:"),A.a.createElement(_.u,{className:"lrls-single",district:j?j.toJS():[],value:g.get("depotUuid"),onOk:function(e){var t=e.uuid,n=e.code,r=e.name;a(W.k("editRunningModalTemp",["stockList",s,"depotUuid"],t)),a(W.k("editRunningModalTemp",["stockList",s,"depotCode"],n)),a(W.k("editRunningModalTemp",["stockList",s,"depotName"],r))}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},g.get("depotUuid")?A.a.createElement("span",null," ",g.get("depotCode")," ",g.get("depotName")," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u4ed3\u5e93\u5361\u7247"),A.a.createElement(_.l,{type:"triangle"})))):null,b?A.a.createElement(_.r,{className:"yysr-amount lrls-bottom",style:{display:(f.find((function(e){return e.get("uuid")===g.get("stockUuid")}))||Object(P.fromJS)([])).get("isOpenedQuantity")||JSON.parse(g.get("isOpenedQuantity")||!1)?"":"none"}},A.a.createElement("label",null,"\u6570\u91cf:"),A.a.createElement(_.E.BorderInputItem,{mode:"number",placeholder:"\u586b\u5199\u6570\u91cf",tipTit:"\u6570\u91cf",value:g.get("number"),negativeAllowed:!0,onChange:function(e){if(a(W.k("editRunningModalTemp",["stockList",s,"number"],e)),g.get("unitPrice")>0){var t=((e||0)*g.get("unitPrice")).toFixed(2);a(W.k("editRunningModalTemp",["stockList",s,"amount"],t)),a(W.b()),m&&a(W.L(m))}}}),A.a.createElement(_.u,{className:"lrls-single",district:R,value:g.get("unitUuid"),onOk:function(e){var t=e.value,n=e.key;a(W.k("editRunningModalTemp",["stockList",s,"unitUuid"],t)),a(W.k("editRunningModalTemp",["stockList",s,"unitName"],n));var r=(((f.find((function(e){return e.get("uuid")===g.get("stockUuid")}))||Object(P.fromJS)([])).get("unitPriceList")||[]).find((function(e){return e.get("unitUuid")===t}))||Object(P.fromJS)({})).get("defaultPrice")||0;if(r&&a(W.k("editRunningModalTemp",["stockList",s,"unitPrice"],r)),r&&""!==g.get("number")){var l=((g.get("number")||0)*r).toFixed(2);a(W.k("editRunningModalTemp",["stockList",s,"amount"],l)),a(W.b()),m&&a(W.L(m))}}},A.a.createElement(_.r,{className:"lrls-account lrls-type"},g.get("unitUuid")?A.a.createElement("span",null," ",g.get("unitName")," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u9009\u62e9\u6570\u91cf\u5355\u4f4d"),A.a.createElement(_.l,{type:"triangle"})))):null,b?A.a.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:(f.find((function(e){return e.get("uuid")===g.get("stockUuid")}))||Object(P.fromJS)([])).get("isOpenedQuantity")||JSON.parse(g.get("isOpenedQuantity")||!1)?"":"none"}},A.a.createElement("label",null,"\u5355\u4ef7:"),A.a.createElement(_.E.BorderInputItem,{placeholder:"\u8bf7\u586b\u5199\u5355\u4ef7",mode:"number",tipTit:"\u5355\u4ef7",value:g.get("unitPrice"),onChange:function(e){if(a(W.k("editRunningModalTemp",["stockList",s,"unitPrice"],e)),""!==g.get("number")){var t=((e||0)*g.get("number")).toFixed(2);a(W.k("editRunningModalTemp",["stockList",s,"amount"],t)),a(W.b()),m&&a(W.L(m))}}})):null,A.a.createElement("div",{className:"lrls-more-card",onClick:function(){J||D.a.toast.info("\u8bf7\u5148\u9009\u62e9\u5b58\u8d27\u5361\u7247")}},A.a.createElement("label",null,"\u91d1\u989d:"),A.a.createElement(_.E.BorderInputItem,{mode:"amount",disabled:!J,placeholder:"\u8bf7\u586b\u5199\u91d1\u989d",negativeAllowed:!0,value:g.get("amount"),onChange:function(e){if(a(W.k("editRunningModalTemp",["stockList",s,"amount"],e)),a(W.b()),m&&a(W.L(m)),e>0&&g.get("number")<0||e<0&&g.get("number")>0){var t=parseFloat(((e||0)/-g.get("number")).toFixed(4));a(W.k("editRunningModalTemp",["stockList",s,"number"],-g.get("number"))),a(W.k("editRunningModalTemp",["stockList",s,"unitPrice"],t))}else if(g.get("number")>0||g.get("number")<0){var n=parseFloat(((e||0)/g.get("number")).toFixed(4));a(W.k("editRunningModalTemp",["stockList",s,"unitPrice"],n))}}})))),A.a.createElement(_.d,null,A.a.createElement(_.c,{disabled:I<=-1,onClick:function(){a(W.k("","currentEditInvetoryIndex",I))}},A.a.createElement(_.l,{type:"arrow-right",style:{transform:"rotate(180deg)"}}),A.a.createElement("span",null,"\u4e0a\u4e00\u660e\u7ec6")),A.a.createElement(_.c,{onClick:function(){n.goBack()}},A.a.createElement(_.l,{type:"confirm"}),A.a.createElement("span",null,"\u786e\u5b9a")),A.a.createElement(_.c,{disabled:w==k,onClick:function(){a(W.k("","currentEditInvetoryIndex",w))}},A.a.createElement("span",null,"\u4e0b\u4e00\u660e\u7ec6"),A.a.createElement(_.l,{type:"arrow-right"}))))}}]),a}(A.a.Component))||S,Ae=Object(R.c)((function(e){return e}))(O=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={isAll:!0,visible:!1,categoryValue:"ALL"},n}return Object(N.a)(a,[{key:"componentDidMount",value:function(){D.a.setTitle({title:"\u5b58\u8d27\u660e\u7ec6"}),D.a.setIcon({showIcon:!1}),D.a.setRight({show:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.history,r=t.homeState,l=t.editRunningModalState,c=this.state,i=c.visible,o=c.categoryValue,s=l.get("currentEditInvetoryIndex");console.log("idx",s);l.get("categoryData");var u=l.get("editRunningModalTemp"),p=u.get("stockList"),d=u.get("billList").getIn([0,"taxRate"]),m=p.get(s),g=l.get("invetorySourceCategoryList"),v=l.get("invetorySourceCardList"),h=(l.get("warehouseSourceCategoryList"),l.get("allInvetoryList")),y=(r.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("WAREHOUSE"),r.getIn(["data","userInfo","sobInfo","moduleInfo"]).indexOf("QUANTITY")>-1),f=(u.get("jrCategoryType"),g),E=[{uuid:"ALL",name:"\u5168\u90e8",childList:[]}],b=v?v.toJS():[],C=p.size;f.map((function(e){E.push(e.toJS())})),b.map((function(e){e.cardName=e.name,e.key="".concat(e.code," ").concat(e.name),e.name=e.key}));!function e(t){t.forEach((function(t){t.key=t.uuid,t.label=t.name,t.childList.length&&e(t.childList)}))}(E);var L=s-1,S=s+1,O=[],j=m.get("stockUuid");if(y){var N,T=Object(ke.a)(b);try{for(T.s();!(N=T.n()).done;){var k=N.value;if(k.isOpenedQuantity&&k.uuid==j){O.push({key:k.unit.name,value:k.unit.uuid}),k.unit.unitList.map((function(e){O.push({key:e.name,value:e.uuid})})),k.unitPriceList&&k.unitPriceList;break}}}catch(I){T.e(I)}finally{T.f()}}return A.a.createElement(_.h,{className:"edit-running"},A.a.createElement(_.f,{visible:i,type:"card",title:"\u8bf7\u9009\u62e9\u5b58\u8d27",icon:{type:"inventory-add",onClick:function(){a(pe.b([],n,"searchApproval"))}},district:E,cardList:b,value:o,onChange:function(t){if(e.setState({categoryValue:t.key}),"ALL"==t.key)return a(W.F([],"hidecategory",!0)),e.setState({isAll:!0});e.setState({isAll:!1}),a(W.G(t.key,!0===t.top?1:""))},onOk:function(e){if(e.length){var t=e[0],n=t.uuid,r=t.code,l=t.cardName,c=t.isOpenedQuantity,i={stockUuid:n,stockName:l,stockCode:r,amount:m.get("amount"),isOpenedQuantity:c,depotUuid:m.get("depotUuid"),depotCode:m.get("depotCode"),depotName:m.get("depotName")};if(t.priceList&&t.priceList.length){var o="",u="";t.unit.uuid===t.priceList[0].unitUuid?(u=t.unit.name,o=t.unit.uuid):t.unit.unitList.forEach((function(e){e.uuid===t.priceList[0].unitUuid&&(u=e.name,o=e.uuid)})),a(W.k("editRunningModalTemp",["stockList",s],Object(P.fromJS)(Object(Te.a)({},i,{unitPrice:t.priceList[0].defaultPrice,unitUuid:o,unitName:u}))))}else t.unit&&!t.unit.unitList.length?(a(W.k("editRunningModalTemp",["stockList",s,"unitName"],t.unit.name)),a(W.k("editRunningModalTemp",["stockList",s,"unitUuid"],t.unit.uuid)),a(W.k("editRunningModalTemp",["stockList",s],Object(P.fromJS)(Object(Te.a)({},i,{unitUuid:t.unit.uuid,unitName:t.unit.name}))))):a(W.k("editRunningModalTemp",["stockList",s],Object(P.fromJS)(Object(Te.a)({},i))));a(W.C(s,e))}},onCancel:function(){e.setState({visible:!1})}},A.a.createElement("span",null)),A.a.createElement(_.s,{ref:"lrlsScrollContainer",flex:"1",uniqueKey:"lrls-scroll"},A.a.createElement("div",{className:"lrls-card"},A.a.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},A.a.createElement("span",null,"\u5b58\u8d27\u660e\u7ec6(",s+1,")")),A.a.createElement("div",{className:"lrls-more-card lrls-bottom"},A.a.createElement("label",null,"\u5b58\u8d27:"),A.a.createElement("div",{className:"lrls-single",onClick:function(){e.setState({visible:!0})}},A.a.createElement(_.r,{className:"lrls-category lrls-padding"},m.get("stockUuid")?A.a.createElement("span",null," ","".concat(m.get("stockCode")," ").concat(m.get("stockName"))," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u5b58\u8d27\u5361\u7247"),A.a.createElement(_.l,{type:"triangle",color:""})))),y?A.a.createElement(_.r,{className:"yysr-amount lrls-bottom",style:{display:(h.find((function(e){return e.get("uuid")===m.get("stockUuid")}))||Object(P.fromJS)([])).get("isOpenedQuantity")||JSON.parse(m.get("isOpenedQuantity")||!1)?"":"none"}},A.a.createElement("label",null,"\u6570\u91cf:"),A.a.createElement(_.E.BorderInputItem,{mode:"number",placeholder:"\u586b\u5199\u6570\u91cf",tipTit:"\u6570\u91cf",value:m.get("number"),negativeAllowed:!0,onChange:function(e){if(a(W.k("editRunningModalTemp",["stockList",s,"number"],e)),m.get("unitPrice")>0){var t=((e||0)*m.get("unitPrice")).toFixed(2);a(W.k("editRunningModalTemp",["stockList",s,"amount"],t)),a(W.b()),d&&a(W.L(d))}}}),A.a.createElement(_.u,{className:"lrls-single",district:O,value:m.get("unitUuid"),onOk:function(e){var t=e.value,n=e.key;a(W.k("editRunningModalTemp",["stockList",s,"unitUuid"],t)),a(W.k("editRunningModalTemp",["stockList",s,"unitName"],n));var r=(((h.find((function(e){return e.get("uuid")===m.get("stockUuid")}))||Object(P.fromJS)([])).get("unitPriceList")||[]).find((function(e){return e.get("unitUuid")===t}))||Object(P.fromJS)({})).get("defaultPrice")||0;if(r&&a(W.k("editRunningModalTemp",["stockList",s,"unitPrice"],r)),r&&""!==m.get("number")){var l=((m.get("number")||0)*r).toFixed(2);a(W.k("editRunningModalTemp",["stockList",s,"amount"],l)),a(W.b()),d&&a(W.L(d))}}},A.a.createElement(_.r,{className:"lrls-account lrls-type"},m.get("unitUuid")?A.a.createElement("span",null," ",m.get("unitName")," "):A.a.createElement("span",{className:"lrls-placeholder"},"\u9009\u62e9\u6570\u91cf\u5355\u4f4d"),A.a.createElement(_.l,{type:"triangle"})))):null,y?A.a.createElement("div",{className:"lrls-more-card lrls-bottom",style:{display:(h.find((function(e){return e.get("uuid")===m.get("stockUuid")}))||Object(P.fromJS)([])).get("isOpenedQuantity")||JSON.parse(m.get("isOpenedQuantity")||!1)?"":"none"}},A.a.createElement("label",null,"\u5355\u4ef7:"),A.a.createElement(_.E.BorderInputItem,{mode:"number",tipTit:"\u5355\u4ef7",placeholder:"\u8bf7\u586b\u5199\u5355\u4ef7",value:m.get("unitPrice"),onChange:function(e){if(a(W.k("editRunningModalTemp",["stockList",s,"unitPrice"],e)),""!==m.get("number")){var t=((e||0)*m.get("number")).toFixed(2);a(W.k("editRunningModalTemp",["stockList",s,"amount"],t)),a(W.b()),d&&a(W.L(d))}}})):null,A.a.createElement("div",{className:"lrls-more-card",onClick:function(){j||D.a.toast.info("\u8bf7\u5148\u9009\u62e9\u5b58\u8d27\u5361\u7247")}},A.a.createElement("label",null,"\u91d1\u989d:"),A.a.createElement(_.E.BorderInputItem,{mode:"amount",negativeAllowed:!0,disabled:!j,placeholder:"\u8bf7\u586b\u5199\u91d1\u989d",value:m.get("amount"),onChange:function(e){if(a(W.k("editRunningModalTemp",["stockList",s,"amount"],e)),a(W.b()),d&&a(W.L(d)),e>0&&m.get("number")<0||e<0&&m.get("number")>0){var t=parseFloat(((e||0)/-m.get("number")).toFixed(4));a(W.k("editRunningModalTemp",["stockList",s,"number"],-m.get("number"))),a(W.k("editRunningModalTemp",["stockList",s,"unitPrice"],t))}else if(m.get("number")>0||m.get("number")<0){var n=parseFloat(((e||0)/m.get("number")).toFixed(4));a(W.k("editRunningModalTemp",["stockList",s,"unitPrice"],n))}}})))),A.a.createElement(_.d,null,A.a.createElement(_.c,{disabled:L<=-1,onClick:function(){a(W.k("","currentEditInvetoryIndex",L))}},A.a.createElement(_.l,{type:"arrow-right",style:{transform:"rotate(180deg)"}}),A.a.createElement("span",null,"\u4e0a\u4e00\u660e\u7ec6")),A.a.createElement(_.c,{onClick:function(){n.goBack()}},A.a.createElement(_.l,{type:"confirm"}),A.a.createElement("span",null,"\u786e\u5b9a")),A.a.createElement(_.c,{disabled:S==C,onClick:function(){a(W.k("","currentEditInvetoryIndex",S))}},A.a.createElement("span",null,"\u4e0b\u4e00\u660e\u7ec6"),A.a.createElement(_.l,{type:"arrow-right"}))))}}]),a}(A.a.Component))||O,_e=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){return A.a.createElement(_.h,{className:"search-approval"},A.a.createElement(w.a,{path:"/searchapproval/index",component:ne}),A.a.createElement(w.a,{path:"/searchapproval/approvalpreview",component:oe}),A.a.createElement(w.a,{path:"/searchapproval/editapproval",component:be}),A.a.createElement(w.a,{path:"/searchapproval/receiveapproval",component:Le}),A.a.createElement(w.a,{path:"/searchapproval/payapproval",component:Oe}),A.a.createElement(w.a,{path:"/searchapproval/accountapproval",component:Ne}),A.a.createElement(w.a,{path:"/searchapproval/stockedit",component:Ie}),A.a.createElement(w.a,{path:"/searchapproval/hidegategorystockcomedit",component:Ae}),A.a.createElement(w.a,{path:"/searchapproval/bookKeepingapproval",component:je}))}}]),a}(A.a.Component),we=a(1225),Pe=Object(P.fromJS)({views:{currentPageType:"ApprovalAll",searchType:"PROCESS_SEARCH_TITLE",searchContent:"",accountingType:"ALL",dateType:"DATE_TYPE_END",beginDate:"",endDate:"",processCode:"PROCESS_CODE_ALL",showChildList:[],currentPage:1,pageCount:1},approvalList:[],detailList:[],processModelList:[{modelName:"\u5168\u90e8",processCode:"PROCESS_CODE_ALL"}]});a(131);var Re=Object(P.fromJS)({views:{showStockModal:!1},editRunningModalTemp:{carryoverCardList:[{}]},previewApprovalModalTemp:{carryoverCardList:[{}]},categoryData:{},allContactList:[],allProjectList:[],allInvetoryList:[],contactSourceCategoryList:[],contactSourceCardList:[],projectSourceCategoryList:[],projectSourceCardList:[],invetorySourceCategoryList:[],invetorySourceCardList:[],warehouseSourceCategoryList:[],currentEditInvetoryIndex:0,datailUuidList:[],jrUuidList:[]});var De=a(1267),Je=Object(P.fromJS)({accountDate:(new J.a).valueOf(),selectList:[],account:null,fromPage:"",receiveAmount:0,setAccount:!1,needUsedPoundage:!1,poundageCurrentCardList:[],poundageProjectCardList:[],poundageCurrentList:[],poundageProjectList:[],accountProjectRange:[],accountContactsRange:[],conSetAccount:!1,beZeroInventory:!1,beCarryoverOut:!1,propertyCost:"",propertyCostList:[],carryoverCategoryList:[],carryoverCategoryItem:null,usedCarryoverProject:!1,carryoverProjectCardList:[],carryoverProjectList:[],handlingFeeType:"INCLUDE"});var Ue=a(1126),xe=a(1226),Me=a(1127),Be={searchApprovalState:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,a=arguments.length>1?arguments[1]:void 0;return((e={},Object(re.a)(e,we.p,(function(){return Pe})),Object(re.a)(e,we.a,(function(){return t=t.set("approvalList",Object(P.fromJS)(a.receivedData.processList)).setIn(["views","currentPage"],a.currentPage),1===a.currentPage&&(t=t.setIn(["views","pageCount"],a.receivedData.pageCount)),!0!==a.param.refresh&&(t=t.setIn(["views","searchType"],a.param.searchType).setIn(["views","searchContent"],a.param.searchContent).setIn(["views","dateType"],a.param.dateType).setIn(["views","beginDate"],a.receivedData.beginDate).setIn(["views","endDate"],a.receivedData.endDate).setIn(["views","processCode"],a.param.processCode)),t})),Object(re.a)(e,we.b,(function(){return t=t.set("detailList",Object(P.fromJS)(a.receivedData.detailList)).setIn(["views","currentPage"],a.currentPage),1===a.currentPage&&(t=t.setIn(["views","pageCount"],a.receivedData.pageCount)),!0!==a.param.refresh&&(t=t.setIn(["views","searchType"],a.param.searchType).setIn(["views","searchContent"],a.param.searchContent).setIn(["views","dateType"],a.param.dateType).setIn(["views","beginDate"],a.receivedData.beginDate).setIn(["views","endDate"],a.receivedData.endDate).setIn(["views","accountingType"],a.param.accountingType)),t})),Object(re.a)(e,we.c,(function(){return t=t.set("processModelList",Object(P.fromJS)(a.receivedData))})),Object(re.a)(e,we.i,(function(){return t=t.setIn(["views",a.place],a.value)})),e)[a.type]||function(){return t})()},runningPreviewState:Q.a,editRunningModalState:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,a=arguments.length>1?arguments[1]:void 0;return((e={},Object(re.a)(e,we.m,(function(){return t=t.set("contactSourceCategoryList",Object(P.fromJS)([])).set("contactSourceCardList",Object(P.fromJS)([])).set("projectSourceCategoryList",Object(P.fromJS)([])).set("projectSourceCardList",Object(P.fromJS)([])).set("invetorySourceCategoryList",Object(P.fromJS)([])).set("invetorySourceCardList",Object(P.fromJS)([])).set("warehouseSourceCategoryList",Object(P.fromJS)([])).set("allContactList",Object(P.fromJS)([])).set("allProjectList",Object(P.fromJS)([])).set("allInvetoryList",Object(P.fromJS)([]))})),Object(re.a)(e,we.n,(function(){return t=t.set("editRunningModalTemp",Object(P.fromJS)(a.receivedData)).set("categoryData",Object(P.fromJS)(a.categoryData)),a.datailList.length&&(t=t.set("datailUuidList",Object(P.fromJS)(a.datailList))),t})),Object(re.a)(e,we.o,(function(){return t=t.set("previewApprovalModalTemp",Object(P.fromJS)(a.receivedData)).set("categoryData",Object(P.fromJS)(a.categoryData)),a.datailList.length&&(t=t.set("datailUuidList",Object(P.fromJS)(a.datailList))),t})),Object(re.a)(e,we.f,(function(){return t=t.set("editRunningModalTemp",a.editRunningModalTemp).set("categoryData",Object(P.fromJS)(a.categoryData))})),Object(re.a)(e,we.g,(function(){return t=t.setIn(["editRunningModalTemp",a.place],a.value)})),Object(re.a)(e,we.e,(function(){return t=t.setIn(["editRunningModalTemp","billList",0,a.place],a.value)})),Object(re.a)(e,we.r,(function(){return a.receivedData.forEach((function(e,t){e.cardName=e.name,e.key="".concat(e.code," ").concat(e.name),e.value=e.uuid})),t=t.set("warehouseSourceCategoryList",Object(P.fromJS)(a.receivedData))})),Object(re.a)(e,we.q,(function(){var e=a.amount||t.getIn(["editRunningModalTemp","jrAmount"])||0;return"-1"==a.value?t.setIn(["editRunningModalTemp","billList",0,"tax"],"").setIn(["editRunningModalTemp","billList",0,"taxRate"],a.value):(console.log("sddf",(Number(e)/(1+Number(a.value)/100)*Number(a.value)/100).toFixed(2)),t.setIn(["editRunningModalTemp","billList",0,"tax"],(Number(e)/(1+Number(a.value)/100)*Number(a.value)/100).toFixed(2)).setIn(["editRunningModalTemp","billList",0,"taxRate"],a.value))})),Object(re.a)(e,we.h,(function(){return t.setIn(["editRunningModalTemp","billList",0,"billState"],a.billState).setIn(["editRunningModalTemp","billList",0,"tax"],a.tax).setIn(["editRunningModalTemp","billList",0,"taxRate"],a.taxRate)})),Object(re.a)(e,we.j,(function(){return a.placeArr&&(t=t.setIn(a.placeArr,a.value)),a.place&&(t=t.set(a.place,a.value)),t})),Object(re.a)(e,we.l,(function(){var e=t.get("selectList"),n=t.get("selectItem"),r=a.uuid,l=a.name,c=a.code,i=a.isOpenQuantity,o=a.unit,s=a.unitPriceList;if(!a.checked&&-1===e.findIndex((function(e){return e===a.uuid}))){var u=e.push(a.uuid),p=n.push(Object(P.fromJS)({uuid:r,name:l,code:c,isOpenQuantity:i,unit:o,unitPriceList:s}));return t.set("selectList",u).set("selectItem",Object(P.fromJS)(p))}if(a.checked){var d=e.splice(e.findIndex((function(e){return e===a.uuid})),1),m=n.splice(e.findIndex((function(e){return e===a.uuid})),1);return t.set("selectList",d).set("selectItem",Object(P.fromJS)(m))}return t})),e)[a.type]||function(){return t})()},searchRunningState:De.a,approalAccountState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;return(Object(re.a)({},we.k,(function(){return t.placeArr&&(e=e.setIn(t.placeArr,t.value)),t.place&&(e=e.set(t.place,t.value)),e}))[t.type]||function(){return e})()},relativeConfState:Ue.a,inventoryConfState:xe.a,projectConfState:Me.a}}}]);