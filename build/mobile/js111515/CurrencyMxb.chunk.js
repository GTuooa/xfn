(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[54],{1197:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return i}));var n="INIT_CURRENCY_MXB",c="GET_CURRENCY_MXB_ACLIST",r="GET_CURRENCY_DETAIL_FETCH",s="CHANGE_CUR_MXB_BEGIN_DATE",o="CHANGE_CURRENCY_CURRENTPAGE",i="GET_CURRENCY_MXB_ACNAME"},1252:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"d",(function(){return b})),a.d(t,"a",(function(){return g}));a(32);var n=a(51),c=a(12),r=a(17),s=a(1197),o=a(552),i=a(1041),u=a(2),m=a(14),l=function(e,t,a,n,o){return function(i){var l="".concat(t.substr(0,4)).concat(t.substr(5,2)),b=a?"".concat(a.substr(0,4)).concat(a.substr(5,2)):l;u.a.toast.loading(m.p,0),Object(r.g)("getFCDetailAc","POST",JSON.stringify({begin:l,end:b}),(function(r){Object(c.u)(r)&&(u.a.toast.hide(),i({type:s.d,receivedData:r.data}),i({type:s.e,acid:n,acName:o}),i(d(t,a,e,n,o)))}))}},d=function(e,t,a,n,o,i,l){return function(o){var d="".concat(e.substr(0,4)).concat(e.substr(5,2)),b=t?"".concat(t.substr(0,4)).concat(t.substr(5,2)):d;u.a.toast.loading(m.p,0),Object(r.g)("getFCDetail","POST",JSON.stringify({begin:d,end:b,fcNumber:a,acid:n||"",asscategory:i||"",assid:l||""}),(function(r){Object(c.u)(r)&&(u.a.toast.hide(),o({type:s.c,receivedData:r.data,issuedate:e,endissuedate:t,fcNumber:a,acid:n||""}))}))}},b=function(e,t,a,s){return function(l){var d=Object(c.q)(e);u.a.toast.loading(m.p,0),Object(r.g)("getvc","POST",JSON.stringify(Object(n.a)({},d,{vcindex:t})),(function(e){Object(c.u)(e)&&(u.a.toast.hide(),sessionStorage.setItem("lrpzHandleMode","modify"),l(Object(i.j)(e.data)),sessionStorage.setItem("router-from","currencymxb"),a.push("/lrpz"),l(o.e(s)),l(o.d(!0)))}))}},g=function(e){return{type:s.a,currentPage:e}}},1310:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(4),c=a(1),r=a(1197),s=Object(c.fromJS)({issuedate:"",endissuedate:"",currentFcNumber:"",currentPage:1,currentAcId:"",acid:"",acName:"",currencyAcList:[],currencyDetailList:{acid:"",name:"",number:"",direction:"",debit:"",credit:"",fcDebit:"",fcCredit:"",openingBalance:"",closingBalance:"",fcOpeningBalance:"",fcClosingBalance:"",jvList:[]}});function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments.length>1?arguments[1]:void 0;return((e={},Object(n.a)(e,r.f,(function(){return s})),Object(n.a)(e,r.d,(function(){return t.set("currencyAcList",Object(c.fromJS)(a.receivedData))})),Object(n.a)(e,r.c,(function(){return t.set("currencyDetailList",Object(c.fromJS)(a.receivedData)).set("issuedate",a.issuedate).set("currentFcNumber",a.fcNumber).set("currentAcId",a.acid).set("endissuedate",a.endissuedate).set("currentPage",1)})),Object(n.a)(e,r.e,(function(){return t.set("acid",a.acid).set("acName",a.acName)})),Object(n.a)(e,r.b,(function(){return t=a.bool?t.set("endissuedate",a.begin):t.set("issuedate",a.begin)})),Object(n.a)(e,r.a,(function(){return t=t.set("currentPage",a.currentPage)})),e)[a.type]||function(){return t})()}},1845:function(e,t,a){},982:function(e,t,a){"use strict";a.r(t),a.d(t,"reducer",(function(){return j})),a.d(t,"view",(function(){return x}));a(32),a(98),a(115),a(31),a(56),a(29),a(48),a(82);var n,c,r=a(7),s=a(8),o=a(9),i=a(10),u=a(0),m=a.n(u),l=a(47),d=a(1),b=a(2),g=a(542),f=a(11),v=(a(1845),a(1444),a(24)),p=a(1252),E=Object(v.immutableRenderDecorator)(n=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.key,e.idx,e.item),a=e.dispatch,n=(e.issuedate,e.history),c=e.jvList,r=t.get("vcdate").replace(/-/g,".");return m.a.createElement("div",{className:"amountmxb-jv",onClick:function(){return a(p.d(t.get("vcdate").slice(0,7),t.get("vcindex"),n,c))}},m.a.createElement("div",{className:"amountmxb-jv-title"},m.a.createElement("span",{className:"amountmxb-jv-abstract"},"".concat(r,"-").concat(t.get("jvabstract")))),m.a.createElement("div",{className:"amountmxb-jv-content"},m.a.createElement("span",{className:"mxb-vcindex"},"\u8bb0 ",t.get("vcindex")," \u53f7"),m.a.createElement(f.a,{className:"mxb-amount",showZero:!0},t.get("jvamount")),m.a.createElement(f.a,{className:"mxb-amount-right",showZero:!0},t.get("balance"))),m.a.createElement("div",{className:"amountmxb-jv-content"},m.a.createElement("span",{className:"mxb-jvdirection"},"debit"==t.get("jvdirection")?"\u501f":"\u8d37"),m.a.createElement("span",{className:"mxb-amount mxb-amount-color"},m.a.createElement(f.a,{showZero:!0},t.get("standardAmount")),"\xa0*",m.a.createElement(f.a,{showZero:!0},t.get("exchange"))),m.a.createElement("span",{className:"mxb-amount mxb-amount-color"},m.a.createElement(f.a,{showZero:!0},t.get("fcBalance")))))}}]),a}(m.a.Component))||n,N=a(14),h=a(130),x=(a(1056),Object(l.c)((function(e){return e}))(c=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).scrollerHeight=0,n.state={showAcInfo:"".concat(e.currencyMxbState.get("acid"),":").concat(e.currencyMxbState.get("acName")),showAc:"\u5168\u90e8"},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(b.a.setTitle({title:"\u5916\u5e01\u660e\u7ec6\u8868"}),b.a.setIcon({showIcon:!1}),"currencyYeb"===sessionStorage.getItem("previousPage")&&sessionStorage.removeItem("previousPage"),"cxpz"===sessionStorage.getItem("prevPage")){sessionStorage.removeItem("prevPage");var e=this.props,t=e.dispatch,a=e.currencyMxbState;e.history;t(p.b(a.get("issuedate"),a.get("endissuedate"),a.get("currentFcNumber")))}var n=document.getElementsByClassName("scroll-view")[0];this.scrollerHeight=parseFloat(window.getComputedStyle(n).height)}},{key:"componentWillReceiveProps",value:function(e){e.currencyMxbState.get("acid")!==this.props.currencyMxbState.get("acid")&&this.setState({showAcInfo:"".concat(e.currencyMxbState.get("acid"),":").concat(e.currencyMxbState.get("acName"))})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.allState,c=t.currencyMxbState,r=t.history,s=this.state,o=s.showAcInfo,i=s.showAc;b.a.setTitle({title:"\u5916\u5e01\u660e\u7ec6\u8868"});var u=n.get("issues"),l=c.get("issuedate"),v=c.get("endissuedate"),x=u.findIndex((function(e){return e.get("value")===l})),y=u.slice(0,x),O=c.get("currencyDetailList"),j=O?O.get("jvList"):Object(d.fromJS)([]),S=c.get("currencyAcList"),w=c.get("currentFcNumber"),C=c.get("currentAcId"),A=S&&S.find((function(e){return e.get("fcNumber")==w})),I=A?A.get("acList"):Object(d.fromJS)([]),k=c.get("currentPage"),_=(c.get("acid"),c.get("acName")),B=I.map((function(e){return{key:"".concat(e.get("acid")).concat(N.m).concat(e.get("acname")),value:"".concat(e.get("acid")).concat(N.m).concat(e.get("acname"))}})),M=S.map((function(e){return{key:"".concat(e.get("fcNumber")).concat(N.m).concat(e.get("name")),value:"".concat(e.get("fcNumber")).concat(N.m).concat(e.get("name"))}})),P="".concat(l.substr(0,4)).concat(l.substr(5,2)),T=v?"".concat(v.substr(0,4)).concat(v.substr(5,2)):P;return a(h.i("lrb",(function(){return function(e){return e(h.a("pdfFcSub",{begin:P,end:T,number:w,acid:C||"",assid:"",asscategory:""}))}}),(function(){return function(e){return e(h.a("excelFcSubOne",{begin:P,end:T,number:w,acid:C||"",assid:"",asscategory:""}))}}))),m.a.createElement(f.h,{className:"kmyeb amountmxb currencymxb"},m.a.createElement(g.f,{issuedate:l,source:u,callback:function(e){return a(p.b(e,v,w))},onOk:function(e){return a(p.b(e.value,v,w))},showSwitch:!0,endissuedate:v,nextperiods:y,onBeginOk:function(e){a(p.b(e.value,"",w))},onEndOk:function(e){a(p.b(l,e.value,w))},changeEndToBegin:function(){a(p.b(l,"",w))}}),m.a.createElement(f.r,{className:"amountmxb-title"},m.a.createElement("div",{className:"amountmxb-title-acinfo"},m.a.createElement("span",{className:"amountmxb-title-ac"},"".concat(O.get("number"),"_").concat(O.get("name"))),m.a.createElement("div",{style:{flex:1,textAlign:"right"}},m.a.createElement(f.v,{district:M.toJS(),value:"",onOk:function(e){var t=e.value.split(N.m)[0];a(p.b(l,v,t))}},m.a.createElement(f.l,{type:"triangle"})))),_?m.a.createElement(f.v,{district:B.toJS(),value:"",onOk:function(t){var n=t.value.split(N.m)[0];e.setState({showAcInfo:t.value.replace(N.m,"\uff1a")}),a(p.b(l,v,w,n))}},m.a.createElement("div",{className:"amountmxb-title-assinfo"},m.a.createElement("span",null,m.a.createElement("span",null,I.size?o:"\u65e0"),I.size?m.a.createElement(f.l,{type:"arrow-down"}):""))):m.a.createElement(f.v,{district:B.toJS(),value:"",onOk:function(t){var n=t.value.split(N.m)[0];e.setState({showAc:t.value.replace(N.m,"\uff1a")}),a(p.b(l,v,w,n))}},m.a.createElement("div",{className:"amountmxb-title-assinfo"},m.a.createElement("span",null,m.a.createElement("span",null,i),I.size?m.a.createElement(f.l,{type:"arrow-down"}):"")))),m.a.createElement(f.r,{className:"amountmxb-main-top"},m.a.createElement("span",{className:"amountmxb-main-amount-odd"},"\u671f\u521d",m.a.createElement("span",{className:"amountmxb-main-amount-odd-direction"},"(\u501f\u65b9)")),m.a.createElement("span",{className:"amountmxb-main-amount"},m.a.createElement(f.a,{showZero:!0},O.get("openingBalance")),m.a.createElement(f.a,{className:"mxb-amount-color",showZero:!0},O.get("fcOpeningBalance")))),m.a.createElement(f.s,{flex:"1",uniqueKey:"currencymxb-scroll",savePosition:!0,onScroll:function(t){t.target.scrollTop+e.scrollerHeight+100>=k*N.u*78&&k<j.size/N.u&&a(p.a(k+1))}},m.a.createElement("ul",{className:"amountmxb-main-list"},j.slice(0,k*N.u).map((function(e,t){return m.a.createElement(E,{key:t,idx:t,item:e,dispatch:a,issuedate:l,history:r,jvList:j})})))),m.a.createElement(f.r,{className:"amountmxb-main-top"},m.a.createElement("span",{className:"amountmxb-main-amount-odd"},"\u671f\u672b",m.a.createElement("span",{className:"amountmxb-main-amount-odd-direction"},"(\u501f\u65b9)")),m.a.createElement("span",{className:"amountmxb-main-amount"},m.a.createElement(f.a,{showZero:!0},O.get("closingBalance")),m.a.createElement(f.a,{className:"mxb-amount-color",showZero:!0},O.get("fcClosingBalance")))))}}]),a}(m.a.Component))||c),y=a(1310),O=a(1074),j={currencyMxbState:y.a,lrpzState:O.a}}}]);