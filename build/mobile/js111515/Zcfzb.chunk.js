(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[121],{1113:function(e,t,n){},942:function(e,t,n){"use strict";n.r(t),n.d(t,"reducer",(function(){return z})),n.d(t,"view",(function(){return S}));n(32),n(61),n(33),n(31),n(76);var a,c,i=n(7),s=n(8),r=n(9),o=n(10),l=n(0),u=n.n(l),b=n(1),d=n(47),f=n(51),m=n(12),g=n(17),h=n(130),p=n(14),I=n(2),O=function(e){return function(t,n){var a=n().homeState.getIn(["data","userInfo"]).get("sobInfo"),c=n().homeState.getIn(["data","userInfo","sobInfo","newJr"]),i=!!a&&(a.get("moduleInfo").indexOf("RUNNING")>-1&&c),s={};if(i)s={begin:e?"".concat(e.substr(0,4),"-").concat(e.substr(5,2)):"",end:e?"".concat(e.substr(0,4),"-").concat(e.substr(5,2)):""};else{var r=Object(m.q)(e);s=Object(f.a)({},r)}Object(g.g)(i?"getJrbalancesheet":"getbalancesheet","POST",JSON.stringify(s),(function(n){return Object(m.u)(n)&&t(x(n,e))}))}},x=function(e,t,n){return{type:"GET_BALANCE_SHEET_FETCH",receivedData:e,issuedate:t,issues:n}},E=function(e){return{type:"TOGGLE_BALANCE_LINE_DISPLAY",blockIdx:e}},j=n(11),v=n(542),k=(n(98),n(34),n(41),n(23)),L=n(24),N={third:[1,2,3,4,5,6,7,8,9,10,14,16,17,18,19,20,21,22,23,24,25,26,27,28,31,32,33,34,35,36,37,38,39,40,42,43,44,45,48,49,50,51],fifth:[11,12,13],strong:[15,29,30,41,46,47,52,53]},B=Object(L.immutableRenderDecorator)(a=function(e){Object(o.a)(n,e);var t=Object(r.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.zc,n=e.className,a=e.dispatch,c=e.showedBalanceLineBlockIdxList,i=Object(k.a)(e,["zc","className","dispatch","showedBalanceLineBlockIdxList"]),s=t.get("title");if(s)s="zcfzb-tilte";else{var r=t.get("lineindex");N.fifth.indexOf(r)>-1?s="fifth":N.third.indexOf(r)>-1&&(s="third")}var o=c.find((function(e){return e==t.get("blockIdx")}));return u.a.createElement("dd",Object.assign({},i,{className:["sheet-line",s,n].join(" "),onClick:function(){"zcfzb-tilte"===s&&a(E(t.get("blockIdx")))}}),u.a.createElement("span",{className:"linename"},t.get("linename")),u.a.createElement("span",{className:"lineindex"},t.get("lineindex")),u.a.createElement(j.a,{className:"amount"},t.get("closingbalance")),"zcfzb-tilte"==s?u.a.createElement(j.l,{style:o?{transform:"rotate(180deg)",marginBottom:".1rem"}:"",type:"arrow-down"}):u.a.createElement(j.a,{className:"amount-right"},t.get("yearopeningbalance")))}}]),n}(u.a.Component))||a,y=(n(1113),{1:Object(m.h)(1,15),2:Object(m.h)(16,14),3:Object(m.h)(31,10),4:Object(m.h)(42,5),5:Object(m.h)(48,5)}),S=Object(d.c)((function(e){return e}))(c=function(e){Object(o.a)(n,e);var t=Object(r.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e;I.a.setTitle({title:"\u8d44\u4ea7\u8d1f\u503a\u8868"}),I.a.setIcon({showIcon:!1}),this.props.dispatch((function(t,n){I.a.toast.loading(p.p,0);var a=n().homeState.getIn(["data","userInfo"]).get("sobInfo"),c=n().homeState.getIn(["data","userInfo","sobInfo","newJr"]),i=!!a&&a.get("moduleInfo").indexOf("RUNNING")>-1&&c,s={};if(i)s={needPeriod:"true",begin:e?"".concat(e.substr(0,4),"-").concat(e.substr(5,2)):"",end:e?"".concat(e.substr(0,4),"-").concat(e.substr(5,2)):""};else if(e){var r=Object(m.q)(e);s=Object(f.a)({},r,{getPeriod:"true"})}else s={getPeriod:"true",year:"",month:""};Object(g.g)(i?"getJrbalancesheet":"getbalancesheet","POST",JSON.stringify(s),(function(n){if(Object(m.u)(n)){I.a.toast.hide();var a=t(i?h.j(n):h.e(n)),c=e||a,s={data:n.data.jsonArray},r=n.data.periodDtoJson?t(h.d(n.data.periodDtoJson)):"";t(x(s,c,r))}}))}))}},{key:"render",value:function(){var e=this.props,t=e.zcfzbState,n=e.dispatch,a=e.allState,c=e.homeState,i=c.getIn(["data","userInfo"]).get("sobInfo"),s=c.getIn(["data","userInfo","sobInfo","newJr"]),r=!!i&&(i.get("moduleInfo").indexOf("RUNNING")>-1&&s),o=r?t.get("issues"):a.get("issues"),l=t.get("issuedate"),d=t.get("showedBalanceLineBlockIdxList"),f=t.get("balancesheet"),m=[15,29,30,41,46,47,52,53];d.forEach((function(e){m=m.concat(y[e])}));var g=f.map((function(e){return e.set("visible",m.indexOf(e.get("lineindex"))>-1||e.get("closingbalance")||e.get("yearopeningbalance"))})),p=("".concat(l.substr(0,4)).concat(l.substr(5,2)),"".concat(l.substr(0,4)).concat(l.substr(5,2)),l?"".concat(l.substr(0,4),"-").concat(l.substr(5,2)):""),I=p;return n(h.i("lrb",(function(){return function(e){e(r?h.a("pdfJrzcfzexport",{begin:p,end:I}):h.a("pdfzcfzexport",{year:l.substr(0,4),month:l.substr(5,2)}))}}),(function(){return function(e){e(r?h.a("excelJrsend",{begin:p,end:I}):h.a("excelsend",{year:l.substr(0,4),month:l.substr(5,2),exportModel:"balancesheet",action:"REPORT-BALANCE_SHEET-EXPORT_EXCEL"}))}}))),g=g.insert(0,Object(b.fromJS)({linename:"\u6d41\u52a8\u8d44\u4ea7:",lineindex:"",closingbalance:"",yearopeningbalance:"",title:!0,visible:!0,blockIdx:1})).insert(16,Object(b.fromJS)({linename:"\u975e\u6d41\u52a8\u8d44\u4ea7:",lineindex:"",closingbalance:"",yearopeningbalance:"",title:!0,visible:!0,blockIdx:2})).insert(32,Object(b.fromJS)({linename:"\u6d41\u52a8\u8d1f\u503a:",lineindex:"",closingbalance:"",yearopeningbalance:"",title:!0,visible:!0,blockIdx:3})).insert(44,Object(b.fromJS)({linename:"\u975e\u6d41\u52a8\u8d1f\u503a:",lineindex:"",closingbalance:"",yearopeningbalance:"",title:!0,visible:!0,blockIdx:4})).insert(51,Object(b.fromJS)({linename:"\u6240\u6709\u8005\u6743\u76ca:",lineindex:"",closingbalance:"",yearopeningbalance:"",title:!0,visible:!0,blockIdx:5})),u.a.createElement(j.h,null,u.a.createElement(v.f,{issuedate:l,source:o,callback:function(e){return n(O(e))},onOk:function(e){return n(O(e.value))}}),u.a.createElement(j.r,{className:"sheet-line title",onClick:function(){return n(E())}},u.a.createElement("span",{className:"linename"},"\u9879\u76ee"),u.a.createElement("span",{className:"lineindex"},"\u884c\u6b21"),u.a.createElement("span",{className:"amount"},"\u671f\u672b\u4f59\u989d"),u.a.createElement("span",{className:"amount-right"},"\u5e74\u521d\u4f59\u989d")),u.a.createElement(j.s,{flex:"1"},u.a.createElement("dl",{className:"sheet-line-list"},g.map((function(e,t){return u.a.createElement(B,{zc:e,key:t,showedBalanceLineBlockIdxList:d,style:{display:e.get("visible")?"":"none"},dispatch:n})})))))}}]),n}(u.a.Component))||c,J=(n(55),n(4)),w=Object(b.fromJS)({issuedate:"",showedBalanceLineBlockIdxList:[],balancesheet:[{closingbalance:"",hashname:"",line:""}],issues:[]});var z={zcfzbState:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(J.a)(e,"INIT_ZCFZB",(function(){return w})),Object(J.a)(e,"GET_BALANCE_SHEET_FETCH",(function(){return n.issues&&(t=t.set("issues",Object(b.fromJS)(n.issues))),t.set("issuedate",n.issuedate).set("balancesheet",Object(b.fromJS)(n.receivedData.data))})),Object(J.a)(e,"TOGGLE_BALANCE_LINE_DISPLAY",(function(){var e=t.get("showedBalanceLineBlockIdxList");return n.blockIdx?e.indexOf(n.blockIdx)>-1?t.update("showedBalanceLineBlockIdxList",(function(e){return e.map((function(e){return e===n.blockIdx?-1:e})).filter((function(e){return-1!==e}))})):t.update("showedBalanceLineBlockIdxList",(function(e){return e.push(n.blockIdx)})):t.update("showedBalanceLineBlockIdxList",(function(e){return e.size?e.clear():w.get("showedBalanceLineBlockIdxList")}))})),e)[n.type]||function(){return t})()}}}}]);