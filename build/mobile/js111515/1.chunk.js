(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[1],{1022:function(t,e,a){"use strict";a.d(e,"a",(function(){return N})),a.d(e,"b",(function(){return Y}));a(32),a(55),a(61),a(33),a(31),a(56),a(131),a(70),a(133),a(77),a(29),a(65),a(1062),a(82),a(76);var n,r=a(51),c=a(4),i=a(1),o=a(57),s=a(17),u=a(14),d=a(12),_=(a(1037),a(2)),g=a(1211),A=a(1212),l=a(1213),T=a(1146),f=a(1214),C=a(1169),S=a(1215),L=a(1216),E=a(1217),m=a(1125),I=a(1170),y=a(1171),b=a(1218),p=a(1261),O=a(1147),v=Object(i.fromJS)({data:{menuLeftIdx:0,amount:"",categoryType:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",categoryUuid:"",runningDate:"",accountUuid:"",accountName:"",runningAbstract:"",onOk:"",stockIdx:0},runningCategory:[{childList:[]}],lastCategory:[],accountList:[],rate:{scale:""},project:{projectCardList:[],projectCard:[{amount:""}],usedProject:!1},iuManage:{insertFrom:"",needAutoIncrementCode:!1,treeFrom:"",psiData:{code:"",isPayUnit:!1,isReceiveUnit:!1,categoryTypeList:[],insertOrModify:"insert",receivableOpened:"0",advanceOpened:"0",payableOpened:"0",prepaidOpened:"0",name:"",companyAddress:"",companyTel:"",financeName:"",financeTel:"",remark:"",contacterInfo:!1,enableAdvanceAc:!1,enablePrepaidAc:!1},treeIdx:0},iuManageTitleList:[],iuManageTreeList:[],accountData:{beginAmount:"",openingName:"",name:"",openingBank:"",accountNumber:"",openInfo:!1,type:"general",uuid:"",acFullName:"",acId:"",assCategoryList:[]},inventoryTitleList:[],inventoryTreeList:[],inventory:{insertFrom:"",needAutoIncrementCode:!1,treeFrom:"",treeIdx:0,psiData:(n={code:"",name:"",categoryTypeList:[],inventoryNature:"",isAppliedPurchase:!1,isAppliedSale:!1,remark:"",financeTel:"",enableAdvanceAc:!1,financeName:"",receivableOpened:"0",inventoryAcName:"",payableOpened:"0",advanceOpened:"0",isAppliedProduce:!1,enablePrepaidAc:!1},Object(c.a)(n,"categoryTypeList",[]),Object(c.a)(n,"insertOrModify","insert"),Object(c.a)(n,"companyAddress",""),Object(c.a)(n,"prepaidOpened","0"),Object(c.a)(n,"inventoryAcId",""),Object(c.a)(n,"contacterInfo",!1),Object(c.a)(n,"companyTel",""),n)},enclosureList:[],needDeleteUrl:[],flags:{showlsfj:!1},previewImageList:[],label:[],enclosureCountUser:0});function N(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(c.a)(t,G.GET_RUNNING_CATEGORY,(function(){var t=[],n=Object(i.fromJS)(a.receivedData.categoryList),r=[];n.getIn([0,"childList"]).forEach((function(t){t.get("childList").size?r.push(t):t.get("beSpecial")&&0==t.get("disableList").size&&r.push({uuid:t.get("uuid"),name:t.get("name"),childList:[t]})})),r.push({uuid:"\u6838\u7b97\u7ba1\u7406",name:"\u6838\u7b97\u7ba1\u7406",childList:a.receivedData.hideCategoryList}),a.receivedData.accountList[0].childList.forEach((function(e){t.push({key:e.name,value:"".concat(e.uuid).concat(u.B).concat(e.name)})}));var c=e.getIn(["data","runningDate"]);return e.set("runningCategory",n).set("lastCategory",Object(i.fromJS)(r)).set("accountList",Object(i.fromJS)(t)).set("rate",Object(i.fromJS)(a.receivedData.rate)).set("data",v.get("data")).setIn(["data","runningDate"],c).set("project",Object(i.fromJS)({projectCardList:[],projectCard:[{amount:""}],usedProject:!1}))})),Object(c.a)(t,G.CHANGE_HOMEACCOUNT_CATEGORYTYPE,(function(){return e.setIn(["data","categoryType"],a.categoryType)})),Object(c.a)(t,G.CHANGE_HOMEACCOUNT_DATA,(function(){if(void 0==a.value){var t=a.dataType.split(u.B);e=e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])}else e="project"==a.dataType?e.setIn(["project","usedProject"],a.value):e.setIn(["data",a.dataType],a.value);return e})),Object(c.a)(t,G.ACCOUNT_SAVE_AND_NEW,(function(){var t=new d.a(new Date).valueOf(),a=e.getIn(["data","menuLeftIdx"]);return e.set("data",v.get("data")).setIn(["data","runningDate"],t).setIn(["data","menuLeftIdx"],a)})),Object(c.a)(t,G.GET_PROJECT_CARDLIST,(function(){var t,n=[],r=null;return a.receivedData.forEach((function(e,a){n.push({key:"".concat(e.code," ").concat(e.name),value:"".concat(e.uuid).concat(u.B).concat(e.code).concat(u.B).concat(e.name)}),"\u9879\u76ee\u516c\u5171\u8d39\u7528"==e.name&&(t={key:e.name,value:"".concat(e.uuid).concat(u.B).concat(e.code).concat(u.B).concat(e.name)},r=a)})),null!=r&&(n.unshift(t),n.splice(r+1,1)),a.fromYl||(e=e.setIn(["project","usedProject"],!0)),e.setIn(["project","projectCardList"],Object(i.fromJS)(n))})),Object(c.a)(t,G.CHANGE_PROJECT_CARD,(function(){switch(a.dataType){case"card":var t=a.value.split(u.B),n=e.getIn(["project","projectCard",a.idx,"amount"]);e=e.setIn(["project","projectCard",a.idx],Object(i.fromJS)({uuid:t[0],code:t[1],name:t[2],amount:n}));break;case"amount":e=e.setIn(["project","projectCard",a.idx,"amount"],a.value);break;case"add":e=e.setIn(["project","projectCard",a.idx],Object(i.fromJS)({amount:""}));break;case"delete":e=e.deleteIn(["project","projectCard",a.idx])}return e})),Object(c.a)(t,G.CHANGE_LRLS_DATA,(function(){return e.setIn(a.dataType,a.value)})),Object(c.a)(t,G.COPY_PROJECT_DATA,(function(){var t=a.projectCard.toJS();return 0==t.length&&t.push({amount:""}),e.setIn(["project","usedProject"],a.usedProject).setIn(["project","projectCard"],Object(i.fromJS)(t))})),Object(c.a)(t,G.LRLS_INIT_RELA_CARD,(function(){var t=a.contactsRange,n=e.get("iuManageTitleList"),r=[];return n.map((function(e,a){t.map((function(t,a){e.get("uuid")==t&&r.push({checked:!1,ctgyUuid:t,name:e.get("name")})}))})),e.mergeIn(["iuManage","psiData"],Object(i.fromJS)(a.data.defaultAc)).setIn(["iuManage","psiData","code"],a.data.code).setIn(["iuManage","psiData","isPayUnit"],a.isPayUnit).setIn(["iuManage","psiData","isReceiveUnit"],!a.isPayUnit).setIn(["iuManage","psiData","categoryTypeList"],Object(i.fromJS)(r)).setIn(["iuManage","psiData","name"],"").setIn(["iuManage","psiData","enableAdvanceAc"],!a.isPayUnit).setIn(["iuManage","psiData","enablePrepaidAc"],a.isPayUnit)})),Object(c.a)(t,G.LRLS_GET_IUMANAGE_LIST_TITLE,(function(){return e.set("iuManageTitleList",Object(i.fromJS)(a.title))})),Object(c.a)(t,G.LRLS_ACCOUNT_LIST,(function(){var t=[];return a.receivedData.forEach((function(e){t.push({key:e.name,value:"".concat(e.uuid).concat(u.B).concat(e.name)})})),e.set("accountList",Object(i.fromJS)(t)).set("accountData",v.get("accountData"))})),Object(c.a)(t,G.INIT_LRLS_DATA,(function(){return e.set(a.dataType,v.get(a.dataType))})),Object(c.a)(t,G.LRLS_GET_INVENTORY_LIST_TITLE,(function(){return e.set("inventoryTitleList",Object(i.fromJS)(a.title))})),Object(c.a)(t,G.LRLS_INIT_STOCK_CARD,(function(){var t=a.stockRange,n=e.get("inventoryTitleList"),r=!1,c=!1;"LB_YYSR"==e.getIn(["data","categoryType"])?c=!0:r=!0;var o=[];return n.map((function(e,a){t.map((function(t,a){e.get("uuid")==t&&o.push({checked:!1,ctgyUuid:t,categoryName:e.get("name")})}))})),e.mergeIn(["inventory","psiData"],Object(i.fromJS)(a.data.defaultAc)).setIn(["inventory","psiData","code"],a.data.code).setIn(["inventory","psiData","categoryTypeList"],Object(i.fromJS)(o)).setIn(["inventory","psiData","name"],"").setIn(["inventory","psiData","isAppliedPurchase"],r).setIn(["inventory","psiData","isAppliedSale"],c).setIn(["data","onOk"],a.onOk).setIn(["data","stockIdx"],a.idx)})),Object(c.a)(t,G.CHANGE_RUNNING_ENCLOSURE_LIST,(function(){var t=[];return e.get("enclosureList").map((function(e){t.push(e)})),a.imgArr.forEach((function(e){t.push(e)})),e=e.set("enclosureList",Object(i.fromJS)(t)).set("enclosureCountUser",t.length)})),Object(c.a)(t,G.DELETE_UPLOAD_FJ_URL,(function(){var t=[];return e.get("needDeleteUrl").map((function(e){t.push(e)})),e.get("enclosureList").map((function(n,r){r==a.index&&(t.push(e.getIn(["enclosureList",r]).set("beDelete",!0)),e=e.deleteIn(["enclosureList",r]))})),e=e.set("needDeleteUrl",Object(i.fromJS)(t)).set("enclosureCountUser",e.get("enclosureList").size)})),Object(c.a)(t,G.INIT_FJ_LIST,(function(){return e=e.set("needDeleteUrl",Object(i.fromJS)([])).set("enclosureList",Object(i.fromJS)([])).set("enclosureCountUser",0).set("previewImageList",Object(i.fromJS)([]))})),Object(c.a)(t,G.GET_LS_LABEL_FETCH,(function(){var t=[];return a.receivedData.data.map((function(e){t.push({key:e,value:e})})),e=e.set("label",Object(i.fromJS)(t)).set("tagModal",!0)})),Object(c.a)(t,G.CHANGE_LS_TAG_NAME,(function(){return e.get("enclosureList").map((function(t,n){n==a.index&&(e=e.setIn(["enclosureList",n,"label"],a.value))})),e=e.set("tagModal",!1)})),t)[a.type]||function(){return e})()}var G={GET_RUNNING_CATEGORY:"GET_RUNNING_CATEGORY",CHANGE_HOMEACCOUNT_CATEGORYTYPE:"CHANGE_HOMEACCOUNT_CATEGORYTYPE",CHANGE_HOMEACCOUNT_DATA:"CHANGE_HOMEACCOUNT_DATA",ACCOUNT_SAVE_AND_NEW:"ACCOUNT_SAVE_AND_NEW",GET_PROJECT_CARDLIST:"GET_PROJECT_CARDLIST",CHANGE_PROJECT_CARD:"CHANGE_PROJECT_CARD",CHANGE_LRLS_DATA:"CHANGE_LRLS_DATA",COPY_PROJECT_DATA:"COPY_PROJECT_DATA",GET_LB_YYSR_CARD_DETAIL:"GET_LB_YYSR_CARD_DETAIL",GET_LB_YYZC_CARD_DETAIL:"GET_LB_YYZC_CARD_DETAIL",GET_LB_FYZC_CARD_DETAIL:"GET_LB_FYZC_CARD_DETAIL",GET_LB_XCZC_CARD_DETAIL:"GET_LB_XCZC_CARD_DETAIL",GET_LB_SFZC_CARD_DETAIL:"GET_LB_SFZC_CARD_DETAIL",GET_LB_YYWSR_CARD_DETAIL:"GET_LB_YYWSR_CARD_DETAIL",GET_LB_YYWZC_CARD_DETAIL:"GET_LB_YYWZC_CARD_DETAIL",GET_LB_ZSKX_CARD_DETAIL:"GET_LB_ZSKX_CARD_DETAIL",GET_LB_ZFKX_CARD_DETAIL:"GET_LB_ZFKX_CARD_DETAIL",GET_LB_CQZC_CARD_DETAIL:"GET_LB_CQZC_CARD_DETAIL",GET_LB_JK_CARD_DETAIL:"GET_LB_JK_CARD_DETAIL",GET_LB_TZ_CARD_DETAIL:"GET_LB_TZ_CARD_DETAIL",GET_LB_ZB_CARD_DETAIL:"GET_LB_ZB_CARD_DETAIL",GET_LB_ZZ_CARD_DETAIL:"GET_LB_ZZ_CARD_DETAIL",GET_LB_SFGL_CARD_DETAIL:"GET_LB_SFGL_CARD_DETAIL",GET_LB_JZCB_CARD_DETAIL:"GET_LB_JZCB_CARD_DETAIL",GET_LB_FPRZ_CARD_DETAIL:"GET_LB_FPRZ_CARD_DETAIL",GET_LB_KJFP_CARD_DETAIL:"GET_LB_KJFP_CARD_DETAIL",GET_LB_ZCWJZZS_CARD_DETAIL:"GET_LB_ZCWJZZS_CARD_DETAIL",GET_LB_GGFYFT_CARD_DETAIL:"GET_LB_GGFYFT_CARD_DETAIL",GET_LB_JZSY_CARD_DETAIL:"GET_LB_JZSY_CARD_DETAIL",GET_LB_ZJTX_CARD_DETAIL:"GET_LB_ZJTX_CARD_DETAIL",GET_LB_YYSR_FROM_YLLS:"GET_LB_YYSR_FROM_YLLS",GET_LB_YYZC_FROM_YLLS:"GET_LB_YYZC_FROM_YLLS",GET_LB_FYZC_FROM_YLLS:"GET_LB_FYZC_FROM_YLLS",GET_LB_XCZC_FROM_YLLS:"GET_LB_XCZC_FROM_YLLS",GET_LB_SFZC_FROM_YLLS:"GET_LB_SFZC_FROM_YLLS",GET_LB_YYWSR_FROM_YLLS:"GET_LB_YYWSR_FROM_YLLS",GET_LB_YYWZC_FROM_YLLS:"GET_LB_YYWZC_FROM_YLLS",GET_LB_ZSKX_FROM_YLLS:"GET_LB_ZSKX_FROM_YLLS",GET_LB_ZFKX_FROM_YLLS:"GET_LB_ZFKX_FROM_YLLS",GET_LB_CQZC_FROM_YLLS:"GET_LB_CQZC_FROM_YLLS",GET_LB_JK_FROM_YLLS:"GET_LB_JK_FROM_YLLS",GET_LB_TZ_FROM_YLLS:"GET_LB_TZ_FROM_YLLS",GET_LB_ZB_FROM_YLLS:"GET_LB_ZB_FROM_YLLS",GET_LB_ZZ_FROM_YLLS:"GET_LB_ZZ_FROM_YLLS",GET_LB_SFGL_FROM_YLLS:"GET_LB_SFGL_FROM_YLLS",GET_LB_JZCB_FROM_YLLS:"GET_LB_JZCB_FROM_YLLS",GET_LB_FPRZ_FROM_YLLS:"GET_LB_FPRZ_FROM_YLLS",GET_LB_KJFP_FROM_YLLS:"GET_LB_KJFP_FROM_YLLS",GET_LB_ZCWJZZS_FROM_YLLS:"GET_LB_ZCWJZZS_FROM_YLLS",GET_LB_GGFYFT_FROM_YLLS:"GET_LB_GGFYFT_FROM_YLLS",GET_LB_JZSY_FROM_YLLS:"GET_LB_JZSY_FROM_YLLS",GET_LB_ZJTX_FROM_YLLS:"GET_LB_ZJTX_FROM_YLLS",LRLS_INIT_RELA_CARD:"LRLS_INIT_RELA_CARD",LRLS_GET_IUMANAGE_LIST_TITLE:"LRLS_GET_IUMANAGE_LIST_TITLE",LRLS_ACCOUNT_LIST:"LRLS_ACCOUNT_LIST",INIT_LRLS_DATA:"INIT_LRLS_DATA",LRLS_GET_INVENTORY_LIST_TITLE:"LRLS_GET_INVENTORY_LIST_TITLE",LRLS_INIT_STOCK_CARD:"LRLS_INIT_STOCK_CARD",CHANGE_RUNNING_ENCLOSURE_LIST:"CHANGE_RUNNING_ENCLOSURE_LIST",DELETE_UPLOAD_FJ_URL:"DELETE_UPLOAD_FJ_URL",INIT_FJ_LIST:"INIT_FJ_LIST",GET_LS_LABEL_FETCH:"GET_LS_LABEL_FETCH",CHANGE_LS_TAG_NAME:"CHANGE_LS_TAG_NAME",AFTER_GET_UPLOAD_SIGNATURE:"AFTER_GET_UPLOAD_SIGNATURE"},Y={getRunningCategory:function(t){return function(e){_.a.toast.loading(u.p,0),Object(o.a)("getRunningSettingInfo","GET","",(function(a){_.a.toast.hide(),Object(d.u)(a)&&(e({type:G.GET_RUNNING_CATEGORY,receivedData:a.data}),t&&e(Y.fromYlToLr()),e(Y.getIUManageListTitle()))}))}},getCardDetail:function(t){return function(e,a){var n=a().homeAccountState.get("data"),r=t.split(u.B);_.a.toast.loading(u.p,0),Object(o.a)("getRunningDetail","GET","uuid=".concat(r[0]),(function(a){if(_.a.toast.hide(),Object(d.u)(a)){var r=a.data.result;delete r.parentUuid,e({type:G.CHANGE_HOMEACCOUNT_CATEGORYTYPE,categoryType:r.categoryType}),e({type:G["GET_".concat(r.categoryType,"_CARD_DETAIL")],value:t,data:n,receivedData:r}),R(Object(i.fromJS)(r),e)}}))}},changeHomeAccountData:function(t,e){return{type:G.CHANGE_HOMEACCOUNT_DATA,dataType:t,value:e}},accountSaveAndNew:function(){return{type:G.ACCOUNT_SAVE_AND_NEW}},fromYlToLr:function(){return function(t,e){t(Y.changeLrlsEnclosureList());var a=e().yllsState,n=a.getIn(["data","beBusiness"]),r=a.getIn(["data","runningState"]),c=a.getIn(["data","categoryType"]),i=a.getIn(["data","usedProject"]),o=a.getIn(["data","projectCard"]),s=a.getIn(["data","enclosureList"]);n||(c="LB_SFGL"),"STATE_YYSR_JZCB"===r&&(c="LB_JZCB"),t({type:G.CHANGE_HOMEACCOUNT_CATEGORYTYPE,categoryType:c}),t({type:G["GET_".concat(c,"_FROM_YLLS")],state:a}),t({type:G.CHANGE_RUNNING_ENCLOSURE_LIST,imgArr:s}),R(a.get("data"),t,!0),t(Y.copyProjectData(i,o))}},toManageType:function(t,e){return function(a,n){var r=n().homeAccountState.get("data"),c=t.split(u.B)[2];switch(a({type:G.CHANGE_HOMEACCOUNT_CATEGORYTYPE,categoryType:c}),a({type:G["GET_".concat(c,"_CARD_DETAIL")],value:t,data:r,allData:e}),c){case"LB_SFGL":var i=r.get("runningDate");a(T.b.getSfglCardList(i));break;case"LB_ZCWJZZS":var o=(new d.a).valueOf().slice(0,7);a(f.b.changeWjzzsData("handleMonth",o)),a(f.b.getWjzzsList(o));break;case"LB_JZCB":a(C.b.getJzcbCardList());break;case"LB_GGFYFT":a(S.b.getGgfyftProjectList()),a(S.b.getGgfyftList());break;case"LB_FPRZ":a(I.b.getFprzList());break;case"LB_KJFP":a(y.b.getKjfpList());break;case"LB_JZSY":a(b.b.getCategoryList());break;case"LB_ZJTX":a(p.b.getCategoryList());break;default:console.log("\u65e0\u8bf7\u6c42")}}},getProjectCardList:function(t,e,a){return function(e,n){var r=n().homeState.getIn(["data","userInfo","sobInfo","sobId"]);_.a.toast.loading(u.p,0),Object(o.a)("getProjectCardList","POST",JSON.stringify({sobId:r,categoryList:t,needCommonCard:!0}),(function(t){_.a.toast.hide(),Object(d.u)(t)&&e({type:G.GET_PROJECT_CARDLIST,receivedData:t.data.result,fromYl:a})}))}},changeProjectCard:function(t,e,a){return{type:G.CHANGE_PROJECT_CARD,dataType:t,value:e,idx:a}},changeLrlsData:function(t,e){return{type:G.CHANGE_LRLS_DATA,dataType:t,value:e}},copyProjectData:function(t,e){return{type:G.COPY_PROJECT_DATA,projectCard:e,usedProject:t}},getInitRelaCard:function(t,e){return function(a){_.a.toast.loading(u.p,0),Object(o.a)("getInitRelaCard","GET","",(function(n){_.a.toast.hide(),Object(d.u)(n)&&a({type:G.LRLS_INIT_RELA_CARD,data:n.data,isPayUnit:t,contactsRange:e})}))}},getIUManageListTitle:function(){return function(t){Object(o.a)("getIUManageListTitle","GET","",(function(e){Object(d.u)(e)&&t({type:G.LRLS_GET_IUMANAGE_LIST_TITLE,title:e.data})}))}},changeManageCardRelation:function(t,e){return function(a){Object(o.a)("getIUManageTreeByType","GET","ctgyUuid=".concat(t),(function(n){if(Object(d.u)(n)){var r=n.data.resultList;a(Y.changeLrlsData(["iuManageTreeList",e],Object(i.fromJS)({uuid:t,value:r}))),0==r[0].childList&&(a(Y.changeLrlsData(["iuManage","psiData","categoryTypeList",e,"subordinateUuid"],r[0].uuid)),a(Y.changeLrlsData(["iuManage","psiData","categoryTypeList",e,"subordinateName"],r[0].name)))}}))}},saveIUManage:function(t){return function(e,a){var n=a().homeAccountState.getIn(["iuManage","psiData"]),r=n.get("name");if(""==n.get("code"))return _.a.toast.info("\u8bf7\u586b\u5199\u7f16\u7801");if(n.get("code").length>10)return _.a.toast.info("\u7f16\u7801\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc710\u4f4d");if(""==r)return _.a.toast.info("\u8bf7\u586b\u5199\u540d\u79f0");if(r.length>20)return _.a.toast.info("\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc720\u4f4d");var c=n.get("categoryTypeList"),i=!1,s=!1;return c.map((function(t){t.get("checked")&&(i=!0,t.get("subordinateUuid")||(s=!0))})),i?s?_.a.toast.info("\u8bf7\u9009\u62e9\u7c7b\u522b"):(_.a.toast.loading(u.p,0),void Object(o.a)("adjustIUmanageCardTitleSame","POST",JSON.stringify({psiData:{name:r}}),(function(a){_.a.toast.hide(),Object(d.u)(a)&&(a.data.repeat?_.a.Confirm({message:"\u5361\u7247\u540d\u79f0\u4e0e\u5df2\u6709\u5361\u7247\u540d\u79f0\u91cd\u590d\uff0c\u786e\u5b9a\u4fdd\u5b58\u5417\uff1f",title:"\u540d\u79f0\u91cd\u590d",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(a){1===a.buttonIndex&&e(Y.insertIUManage(t))},onFail:function(t){return alert(t)}}):e(Y.insertIUManage(t)))}))):_.a.toast.info("\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b")}},insertIUManage:function(t){return function(e,a){var n=a().homeAccountState,c=n.get("iuManage").toJS(),i=c.psiData.categoryTypeList.filter((function(t){return t.checked}));c.psiData.categoryTypeList=i,Object(o.a)("saveIUManageCard","POST",JSON.stringify(Object(r.a)({},c)),(function(a){Object(d.u)(a,"show")&&(D(n.getIn(["data","categoryType"]),e,"contactsRange"),t.goBack())}))}},saveAccountSetting:function(t){return function(e,a){var n=a().homeAccountState.get("accountData").toJS();return""==n.name?_.a.toast.info("\u8bf7\u586b\u5199\u8d26\u6237\u540d\u79f0"):n.name.length>u.a?_.a.toast.info("\u8d26\u6237\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc7".concat(u.a,"\u4e2a\u5b57\u7b26")):n.accountNumber.length>u.b?_.a.toast.info("\u8d26\u53f7\u4e0d\u80fd\u8d85\u8fc7".concat(u.b,"\u4e2a\u5b57\u7b26")):n.openingName.length>u.b?_.a.toast.info("\u5f00\u6237\u540d\u4e0d\u80fd\u8d85\u8fc7".concat(u.b,"\u4e2a\u5b57\u7b26")):n.openingBank.length>u.b?_.a.toast.info("\u5f00\u6237\u884c/\u673a\u6784\u4e0d\u80fd\u8d85\u8fc7".concat(u.b,"\u4e2a\u5b57\u7b26")):n.beginAmount.length>12?_.a.toast.info("\u671f\u521d\u503c\u957f\u5ea6\u6700\u957f\u4e3a12\u4f4d"):(_.a.toast.loading(u.p,0),void Object(o.a)("insertRunningAccount","POST",JSON.stringify(Object(r.a)({},n)),(function(a){_.a.toast.hide(),Object(d.u)(a,"show")&&(t.goBack(),e({type:G.LRLS_ACCOUNT_LIST,receivedData:a.data.resultList[0].childList}))})))}},initLrlsData:function(t){return{type:G.INIT_LRLS_DATA,dataType:t}},getInventoryHighTypeList:function(){return function(t){Object(o.a)("getInventoryHighTypeList","GET","",(function(e){Object(d.u)(e)&&t({type:G.LRLS_GET_INVENTORY_LIST_TITLE,title:e.data})}))}},getInitStockCard:function(t,e,a){return function(n){_.a.toast.loading(u.p,0),Object(o.a)("getInitStockCard","GET","",(function(r){_.a.toast.hide(),Object(d.u)(r)&&n({type:G.LRLS_INIT_STOCK_CARD,data:r.data,stockRange:t,onOk:e,idx:a})}))}},getInventorySettingCardTypeList:function(t,e){return function(a){Object(o.a)("getInventorySettingCardTypeList","GET","ctgyUuid=".concat(t),(function(n){if(Object(d.u)(n)){var r=n.data.resultList;a(Y.changeLrlsData(["inventoryTreeList",e],Object(i.fromJS)({uuid:t,value:r}))),0==r[0].childList&&(a(Y.changeLrlsData(["inventory","psiData","categoryTypeList",e,"subordinateUuid"],r[0].uuid)),a(Y.changeLrlsData(["inventory","psiData","categoryTypeList",e,"subordinateName"],r[0].name)))}}))}},saveInventory:function(t){return function(e,a){var n=a().homeAccountState.getIn(["inventory","psiData"]),r=n.get("name");if(""==n.get("code"))return _.a.toast.info("\u8bf7\u586b\u5199\u7f16\u7801");if(n.get("code").length>10)return _.a.toast.info("\u7f16\u7801\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc710\u4f4d");if(""==r)return _.a.toast.info("\u8bf7\u586b\u5199\u540d\u79f0");if(r.length>20)return _.a.toast.info("\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc720\u4f4d");if(""==n.get("inventoryNature"))return _.a.toast.info("\u8bf7\u9009\u62e9\u5b58\u8d27\u6027\u8d28");var c=n.get("categoryTypeList"),i=!1,s=!1;return c.map((function(t){t.get("checked")&&(i=!0,t.get("subordinateUuid")||(s=!0))})),i?s?_.a.toast.info("\u8bf7\u9009\u62e9\u7c7b\u522b"):(_.a.toast.loading(u.p,0),void Object(o.a)("adjustInventorySettingCardTitleSame","POST",JSON.stringify({psiData:{name:r}}),(function(a){_.a.toast.hide(),Object(d.u)(a)&&(a.data.repeat?_.a.Confirm({message:"\u5361\u7247\u540d\u79f0\u4e0e\u5df2\u6709\u5361\u7247\u540d\u79f0\u91cd\u590d\uff0c\u786e\u5b9a\u4fdd\u5b58\u5417\uff1f",title:"\u540d\u79f0\u91cd\u590d",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(a){1===a.buttonIndex&&e(Y.insertInventory(t))},onFail:function(t){return alert(t)}}):e(Y.insertInventory(t)))}))):_.a.toast.info("\u8bf7\u9009\u62e9\u6240\u5c5e\u5206\u7c7b")}},insertInventory:function(t){return function(e,a){var n=a().homeAccountState,c=n.get("inventory").toJS(),i=n.getIn(["data","onOk"]),s=n.getIn(["data","stockIdx"]),_=c.psiData.code,g=c.psiData.categoryTypeList.filter((function(t){return t.checked}));c.psiData.categoryTypeList=g,Object(o.a)("addInventorySettingCard","POST",JSON.stringify(Object(r.a)({},c)),(function(a){Object(d.u)(a,"show")&&(D(n.getIn(["data","categoryType"]),e,"stockRange"),a.data.resultList.forEach((function(t){t.code==_&&i("card","".concat(t.uuid).concat(u.B).concat(t.code).concat(u.B).concat(t.name),s)})),t.goBack())}))}},initLabel:function(){return function(t){Object(o.a)("initLsLabel","POST","",(function(t){Object(d.u)(t)}))}},getUploadGetTokenFetch:function(){return function(t,e){var a=e().allState.get("expire"),n=Date.parse(new Date)/1e3;console.log(a,n,a<n+300),a<n+300&&Object(s.g)("aliyunOssPolicy","GET","",(function(e){t({type:G.AFTER_GET_UPLOAD_SIGNATURE,receivedData:e.data,code:e.code})}))}},uploadFiles:function(t,e,a,n){return function(e,r){var c=[];c.push({fileName:a,enclosurePath:t.data.enclosurePath,size:(t.data.size/1024).toFixed(2),imageOrFile:t.data.mimeType.toString().toUpperCase().indexOf("IMAGE")>-1?"TRUE":"FALSE",label:"\u65e0\u6807\u7b7e",beDelete:!1,mimeType:t.data.mimeType}),Object(o.a)("insertEnclosure","POST",JSON.stringify({enclosureList:c}),(function(t){0===t.code&&e({type:G.CHANGE_RUNNING_ENCLOSURE_LIST,imgArr:t.data.enclosureList}),n&&_.a.toast.hide()}))}},deleteUploadFJUrl:function(t,e,a){return function(e){e({type:G.DELETE_UPLOAD_FJ_URL,index:t})}},changeLrlsEnclosureList:function(){return{type:G.INIT_FJ_LIST}},getLabelFetch:function(){return function(t){Object(o.a)("getLsLabel","POST","",(function(e){Object(d.u)(e)&&t({type:G.GET_LS_LABEL_FETCH,receivedData:e})}))}},changeTagName:function(t,e){return function(a){a({type:G.CHANGE_LS_TAG_NAME,index:t,value:e})}}};function R(t,e,a){var n=t.get("categoryType"),r="SX_HW"===t.get("propertyCarryover");if(t.get("beProject")){var c=t.get("projectRange");e(Y.getProjectCardList(c,n,a))}else e(Y.changeHomeAccountData("project",!1));switch(n){case"LB_YYSR":t.getIn(["acBusinessIncome","beManagemented"])&&e(g.b.getYysrCardList("contactsRange")),r&&e(g.b.getYysrCardList("stockRange")),e(Y.getInventoryHighTypeList());break;case"LB_YYZC":t.getIn(["acBusinessExpense","beManagemented"])&&e(A.b.getYyzcCardList("contactsRange")),r&&e(A.b.getYyzcCardList("stockRange")),e(Y.getInventoryHighTypeList());break;case"LB_FYZC":t.getIn(["acCost","beManagemented"])&&e(l.b.getFyzcCardList("contactsRange"));break;case"LB_YYWSR":t.getIn(["acBusinessOutIncome","beManagemented"])&&e(L.b.getYywsrCardList("contactsRange"));break;case"LB_YYWZC":t.getIn(["acBusinessOutExpense","beManagemented"])&&e(E.b.getYywzcCardList("contactsRange"));break;case"LB_CQZC":t.getIn(["acAssets","beManagemented"])&&e(m.a.getCqzcCardList("contactsRange"));break;case"LB_GGFYFT":e(S.b.getGgfyftProjectList());break;case"LB_SFZC":var i=t.get("propertyTax");a||"SX_ZZS"!=i||e(O.b.getSfzcPaymentList());break;default:console.log("\u65e0\u9700\u83b7\u53d6\u5361\u7247")}}function D(t,e,a){switch(t){case"LB_YYSR":e(g.b.getYysrCardList(a));break;case"LB_YYZC":e(A.b.getYyzcCardList(a));break;case"LB_FYZC":e(l.b.getFyzcCardList(a));break;case"LB_YYWSR":e(L.b.getYywsrCardList(a));break;case"LB_YYWZC":e(E.b.getYywzcCardList(a));break;case"LB_CQZC":e(m.a.getCqzcCardList(a));break;default:console.log("\u65e0\u9700\u91cd\u65b0\u83b7\u53d6\u5361\u7247")}}},1023:function(t,e,a){"use strict";a.d(e,"a",(function(){return f})),a.d(e,"b",(function(){return C})),a.d(e,"j",(function(){return m})),a.d(e,"c",(function(){return I})),a.d(e,"l",(function(){return y})),a.d(e,"e",(function(){return b})),a.d(e,"f",(function(){return p})),a.d(e,"m",(function(){return O})),a.d(e,"i",(function(){return v})),a.d(e,"k",(function(){return N})),a.d(e,"d",(function(){return Y})),a.d(e,"h",(function(){return S})),a.d(e,"g",(function(){return j}));a(32),a(61),a(70),a(29),a(82),a(76);var n,r=a(7),c=a(8),i=a(9),o=a(10),s=a(0),u=a.n(s),d=a(1),_=a(1063),g=a(11),A=a(14),l=a(1022),T=a(47),f=Object(T.c)((function(t){return t}))(n=function(t){Object(o.a)(a,t);var e=Object(i.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var t=this.props,e=t.dispatch,a=t.accountList,n=t.accountUuid,r=t.accountName,c=t.onOk,i=(t.history,t.noInsert),o=a.toJS();return i||o.unshift({key:"\u65b0\u589e\u8d26\u6237",value:"insert".concat(A.B)}),u.a.createElement(g.v,{className:"antd-single-picker",district:o,value:"".concat(n).concat(A.B).concat(r),onOk:function(t){"insert"!=t.value.split(A.B)[0]?c(t.value):e(Object(_.push)("/lrls-account"))}},u.a.createElement(g.r,{style:{color:r?"":"#999"},className:"lrls-account lrls-type"},u.a.createElement("span",{className:"overElli"},r||"\u70b9\u51fb\u9009\u62e9\u8d26\u6237"),u.a.createElement(g.l,{type:"triangle"})))}}]),a}(s.Component))||n,C=function(t){Object(o.a)(a,t);var e=Object(i.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var t,e=this.props,a=e.isModify,n=e.categoryName,r=e.dispatch,c=e.showProject,i=e.project,o=e.noAmount,s=e.changeAmount,_=e.lastCategory,T=e.categoryUuid,f=0;return c&&(t=i.get("usedProject"),i.get("projectCard").forEach((function(t){return f+=Number(t.get("amount"))}))),u.a.createElement(g.r,{className:"lrls-type"},u.a.createElement(g.D,{disabled:a,district:_.toJS(),value:T,onChange:function(t){if(r(l.b.changeLrlsData(["project","projectCard"],Object(d.fromJS)([{amount:""}]))),r(l.b.changeLrlsEnclosureList()),t.canShow){var e="".concat(t.uuid).concat(A.B).concat(t.name);r(l.b.getCardDetail(e))}else{var a="".concat(t.uuid).concat(A.B).concat(t.name).concat(A.B).concat(t.categoryType);r(l.b.toManageType(a,t))}}},u.a.createElement(g.r,null,u.a.createElement("span",{style:{color:"\u8bf7\u9009\u62e9\u7c7b\u522b"==n?"#ccc":""}},n),u.a.createElement(g.l,{type:"triangle",style:{color:a?"#ccc":""}}))),c?u.a.createElement(g.x,{checked:t,checkedChildren:"\u9879\u76ee",unCheckedChildren:"",className:"topBarSwitch",onChange:function(e){r(l.b.changeHomeAccountData("project",!t)),o||s(t?0:f)}}):null)}}]),a}(s.Component);function S(t,e){var a=e.get("propertyCarryover"),n=e.get("categoryName")?e.get("categoryName"):e.get("name"),r=e.get("propertyPay"),c=e.get("propertyTax");return{STATE_YYSR_DJ:"\u6536\u5230\u9884\u6536\u6b3e",STATE_YYSR_XS:"\u9500\u552e".concat("SX_HW"===a?"\u5b58\u8d27":"","\u6536\u5165"),STATE_YYSR_TS:"".concat("SX_HW"===a?"\u9500\u8d27":"\u9500\u552e","\u9000\u56de\u652f\u51fa"),STATE_YYZC_DJ:"\u652f\u4ed8\u9884\u4ed8\u6b3e",STATE_YYZC_GJ:"\u91c7\u8d2d".concat("SX_HW"===a?"\u5b58\u8d27":"","\u652f\u51fa"),STATE_YYZC_TG:"".concat("SX_HW"===a?"\u8d2d\u8d27":"\u91c7\u8d2d","\u9000\u8fd8\u6536\u5165"),STATE_FY_DJ:"\u652f\u4ed8\u9884\u4ed8\u6b3e",STATE_FY_YF:"".concat(n,"\u652f\u51fa"),STATE_FY_WF:"".concat(n,"\u652f\u51fa"),STATE_XC_JT:"\u8ba1\u63d0".concat({SX_GZXJ:"\u5de5\u8d44\u85aa\u91d1",SX_SHBX:"\u793e\u4f1a\u4fdd\u9669",SX_ZFGJJ:"\u4f4f\u623f\u516c\u79ef\u91d1",SX_QTXC:n}[r]),STATE_XC_FF:"\u53d1\u653e".concat({SX_GZXJ:"\u5de5\u8d44\u85aa\u91d1",SX_QTXC:n}[r]),STATE_XC_JN:"\u7f34\u7eb3".concat({SX_SHBX:"\u793e\u4f1a\u4fdd\u9669",SX_ZFGJJ:"\u4f4f\u623f\u516c\u79ef\u91d1"}[r]),STATE_XC_YF:"\u798f\u5229\u8d39\u652f\u51fa",STATE_SF_YJZZS:"\u9884\u7f34\u589e\u503c\u7a0e",STATE_SF_JN:"".concat({SX_QYSDS:"\u7f34\u7eb3\u4f01\u4e1a\u6240\u5f97\u7a0e",SX_GRSF:"\u4ee3\u7f34\u4e2a\u4eba\u7a0e\u8d39",SX_QTSF:"\u7f34\u7eb3".concat(n),SX_ZZS:"\u7f34\u7eb3\u589e\u503c\u7a0e"}[c]),STATE_SF_JT:"\u8ba1\u63d0".concat({SX_QYSDS:"\u4f01\u4e1a\u6240\u5f97\u7a0e",SX_GRSF:"\u4e2a\u4eba\u7a0e\u8d39",SX_QTSF:"".concat(n),SX_ZZS:"\u589e\u503c\u7a0e"}[c]),STATE_YYWSR_WS:n,STATE_YYWSR_YS:n,STATE_YYWZC_WF:n,STATE_YYWZC_YF:n,STATE_ZS_SQ:"\u6682\u6536\u6b3e",STATE_ZS_TH:"\u6682\u6536\u6b3e\u9000\u8fd8",STATE_ZF_FC:"\u6682\u4ed8\u6b3e",STATE_ZF_SH:"\u6682\u4ed8\u6b3e\u6536\u56de",STATE_CQZC_WF:"\u8d2d\u8fdb\u8d44\u4ea7\u652f\u51fa",STATE_CQZC_YF:"\u8d2d\u8fdb\u8d44\u4ea7\u652f\u51fa",STATE_CQZC_ZJTX:"\u8d44\u4ea7\u6298\u65e7\u644a\u9500",STATE_CQZC_WS:"\u5904\u7f6e\u8d44\u4ea7\u6536\u5165",STATE_CQZC_YS:"\u5904\u7f6e\u8d44\u4ea7\u6536\u5165",STATE_CQZC_JZSY:"\u5904\u7f6e\u8d44\u4ea7\u5904\u7f6e\u635f\u76ca",STATE_JK_YS:"\u6536\u5230\u501f\u6b3e",STATE_JK_JTLX:"\u8ba1\u63d0\u501f\u6b3e\u5229\u606f",STATE_JK_ZFLX:"\u652f\u4ed8\u501f\u6b3e\u5229\u606f",STATE_JK_YF:"\u507f\u8fd8\u672c\u91d1\u652f\u51fa",STATE_TZ_YF:"\u5bf9\u5916\u6295\u8d44\u652f\u51fa",STATE_TZ_SRGL:"\u6536\u5230\u6295\u8d44\u6536\u76ca",STATE_TZ_JTGL:"\u8ba1\u63d0\u6295\u8d44\u6536\u76ca",STATE_TZ_JTLX:"\u8ba1\u63d0\u6295\u8d44\u6536\u76ca",STATE_TZ_SRLX:"\u6536\u5230\u6295\u8d44\u6536\u76ca",STATE_TZ_WS:"\u6536\u56de\u6295\u8d44\u6b3e",STATE_TZ_YS:"\u6536\u56de\u6295\u8d44\u6b3e",STATE_ZB_ZZ:"\u589e\u52a0\u6ce8\u518c\u8d44\u672c",STATE_ZB_ZFLR:"\u652f\u4ed8\u5206\u914d\u5229\u6da6",STATE_ZB_LRFP:"\u8ba1\u63d0\u5206\u914d\u5229\u6da6",STATE_ZB_JZ:"\u51cf\u5c11\u6ce8\u518c\u8d44\u672c"}[t]}a(55),a(62),a(31),a(83);var L=a(1037),E=(a(2),a(12));function m(t,e,a,n){var r=0,c=u.a.createElement("div",{style:{display:e?"":"none"}},t.map((function(t,e){return r+=t.get("handleAmount"),u.a.createElement("div",{key:e,className:"ylls-top-line"},u.a.createElement("div",{className:"ylls-item ylls-padding"},u.a.createElement("div",{className:"overElli"},t.get("categoryName")),u.a.createElement("div",{className:"ylls-gray"},"\u6d41\u6c34\u53f7\uff1a",t.get("flowNumber"))),u.a.createElement("div",{className:"ylls-item"},u.a.createElement("div",{className:"ylls-blue"},n||L.a[t.get("runningType")]),u.a.createElement("div",null,u.a.createElement(g.a,{className:"ylls-bold"},t.get("handleAmount")))))})));return u.a.createElement(g.r,{className:"ylls-card"},u.a.createElement("div",{className:"ylls-item",onClick:function(){return a()}},u.a.createElement("div",null,"\u6838\u9500\u603b\u8ba1\uff1a",u.a.createElement(g.a,{showZero:!0},r)),u.a.createElement("div",null,e?"\u6536\u8d77":"\u5c55\u5f00",u.a.createElement(g.l,{style:e?{transform:"rotate(180deg)",marginBottom:".1rem"}:"",type:"arrow-down"}))),c)}var I=function(t){Object(o.a)(a,t);var e=Object(i.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var t=this.props,e=t.cardList,a=t.cardObj,n=t.noBottom,r=t.onOk,c=t.history,i=t.dispatch,o=t.isPayUnit,s=t.contactsRange,d=t.noInsert,_=t.disabled,T="noBottom"==n?"lrls-more-card":"lrls-more-card lrls-bottom",f=e.toJS();return d||f.unshift({key:"\u65b0\u589e\u5f80\u6765\u5355\u4f4d",value:"insert".concat(A.B).concat(A.B)}),u.a.createElement("div",{className:T},u.a.createElement("label",null,"\u5f80\u6765\u5355\u4f4d:"),u.a.createElement(g.v,{disabled:_,district:f,value:a?"".concat(a.get("uuid")).concat(A.B).concat(a.get("code")).concat(A.B).concat(a.get("name")):"",onOk:function(t){if("insert"==t.value.split(A.B)[0])return c.push("/lrls-iuManage"),void i(l.b.getInitRelaCard(o,s));r(t)}},u.a.createElement(g.r,{className:"lrls-category lrls-padding"},a?u.a.createElement("span",null," ","".concat(a.get("code")," ").concat(a.get("name"))," "):u.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u5f80\u6765\u5355\u4f4d"),u.a.createElement(g.l,{type:"triangle",style:{color:_?"#ccc":""}}))))}}]),a}(s.Component);function y(t,e,a,n){return u.a.createElement(g.r,{className:"ylls-card"},u.a.createElement("div",{className:"hx-title"},t,"\uff1a",u.a.createElement(g.a,{showZero:!0},e)),a.map((function(t,e){if(t.get("beSelect"))return u.a.createElement("div",{key:e,className:"ylls-top-line"},u.a.createElement("div",{className:"ylls-item ylls-padding"},u.a.createElement("div",null,"\u6d41\u6c34\u53f7\uff1a",t.get("flowNumber")),u.a.createElement("div",{className:"ylls-gray"},t.get("runningDate"))),u.a.createElement("div",{className:"ylls-item"},u.a.createElement("div",{className:"overElli"},n),u.a.createElement("div",null,u.a.createElement(g.a,{showZero:!0,className:"ylls-bold"},t.get("notHandleAmount")))))})))}var b=function(t){Object(o.a)(a,t);var e=Object(i.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var t=this.props,e=t.project,a=t.dispatch,n=t.changeAmount,r=t.showCommon,c=t.noMore,i=t.noAmount,o=t.isFyzc,s=e.get("projectCardList");r||(s=e.get("projectCardList").filter((function(t){return 0==t.get("value").includes("COMNCRD")})));var d=e.get("projectCard"),_=e.get("usedProject"),T=1==d.size,f=0;return d.forEach((function(t){return f+=Number(t.get("amount"))})),_?u.a.createElement(g.r,{className:"lrls-card"},d.map((function(t,e){var r="".concat(t.get("code")," ").concat(t.get("name"));return"\u9879\u76ee\u516c\u5171\u8d39\u7528"==t.get("name")&&(r="\u9879\u76ee\u516c\u5171\u8d39\u7528"),u.a.createElement("div",{key:e,style:{paddingBottom:T?"0":"10px"}},u.a.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom",style:{display:c?"none":""}},u.a.createElement("span",null,"\u9879\u76ee(",e+1,")"),u.a.createElement("span",{className:"lrls-blue",style:{display:T?"none":""},onClick:function(){1!=d.size&&(a(l.b.changeProjectCard("delete","",e)),n(f-Number(t.get("amount"))))}},"\u5220\u9664")),u.a.createElement("div",{className:"lrls-more-card lrls-bottom",style:{marginBottom:c?"0":""}},u.a.createElement("label",null,"\u9879\u76ee:"),u.a.createElement(g.v,{district:s.toJS(),value:t.get("uuid")?"".concat(t.get("uuid")).concat(A.B).concat(t.get("code")).concat(A.B).concat(t.get("name")):"",onOk:function(t){a(l.b.changeProjectCard("card",t.value,e))}},u.a.createElement(g.r,{className:"lrls-category lrls-padding"},t.get("uuid")?u.a.createElement("span",null," ",r," "):u.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u9879\u76ee\u5361\u7247"),u.a.createElement(g.l,{type:"triangle"})))),i?null:u.a.createElement(g.r,{className:"lrls-more-card lrls-bottom"},u.a.createElement("label",null,"\u91d1\u989d:"),u.a.createElement(g.A,{placeholder:"\u586b\u5199\u91d1\u989d",value:t.get("amount"),onChange:function(r){if(o?/^[-\d]\d*\.?\d{0,2}$/g.test(r)||""==r:/^\d*\.?\d{0,2}$/g.test(r)){a(l.b.changeProjectCard("amount",r,e));var c=f-Number(t.get("amount"))+Number(r);n(Object(E.l)(c))}}})))})),u.a.createElement("div",{className:"lrls-more-card",style:{display:c?"none":"",fontWeight:"bold"}},d.size>1?u.a.createElement("div",null,"\u603b\u91d1\u989d\uff1a",u.a.createElement(g.a,{showZero:!0},f)):u.a.createElement("div",null),u.a.createElement("div",{className:"lrls-blue",onClick:function(){c||a(l.b.changeProjectCard("add","",d.size))}},"+\u6dfb\u52a0\u9879\u76ee"))):null}}]),a}(s.Component),p=function(t){Object(o.a)(a,t);var e=Object(i.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.dispatch,n=e.changeAmount,r=e.stockCardList,c=e.stockCardRange,i=e.onOk,o=e.cardDisabled,s=e.stockRange,d=e.history,_=0,T=1==c.size;c.forEach((function(t){return _+=Number(t.get("amount"))}));var f=r.toJS();return f.unshift({key:"\u65b0\u589e\u5b58\u8d27\u5361\u7247",value:"insert".concat(A.B).concat(A.B)}),u.a.createElement("div",{className:"lrls-card"},c.map((function(e,r){return u.a.createElement("div",{key:r,style:{paddingBottom:T?"0":"10px"}},u.a.createElement("div",{className:"lrls-more-card lrls-placeholder lrls-bottom"},u.a.createElement("span",null,"\u5b58\u8d27\u660e\u7ec6(",r+1,")"),u.a.createElement("span",{className:o?"lrls-placeholder":"lrls-blue",style:{display:T?"none":""},onClick:function(){o||(i("delete","",r),n(_-Number(e.get("amount"))))}},"\u5220\u9664")),u.a.createElement("div",{className:"lrls-more-card lrls-bottom"},u.a.createElement("label",null,"\u5b58\u8d27:"),u.a.createElement(g.v,{disabled:o,district:f,value:e.get("uuid")?"".concat(e.get("uuid")).concat(A.B).concat(e.get("code")).concat(A.B).concat(e.get("name")):"",onOk:function(e){if("insert"==e.value.split(A.B)[0])return d.push("/lrls-inventory"),t.props.dispatch(l.b.initLrlsData("inventory")),void a(l.b.getInitStockCard(s,i,r));i("card",e.value,r)}},u.a.createElement(g.r,{className:"lrls-category lrls-padding"},e.get("uuid")?u.a.createElement("span",null," ","".concat(e.get("code")," ").concat(e.get("name"))," "):u.a.createElement("span",{className:"lrls-placeholder"},"\u70b9\u51fb\u9009\u62e9\u5b58\u8d27\u5361\u7247"),u.a.createElement(g.l,{type:"triangle",color:o?"#999":""})))),u.a.createElement("div",{className:"lrls-more-card lrls-bottom"},u.a.createElement("label",null,"\u91d1\u989d:"),u.a.createElement(g.A,{disabled:o||!e.get("uuid"),placeholder:"\u586b\u5199\u91d1\u989d",value:e.get("amount"),onChange:function(t){if(/^\d*\.?\d{0,2}$/g.test(t)){i("amount",t,r);var a=_-Number(e.get("amount"))+Number(t);n(Object(E.l)(a))}}})))})),u.a.createElement("div",{className:"lrls-more-card",style:{fontWeight:"bold"}},c.size>1?u.a.createElement("div",null,"\u603b\u91d1\u989d\uff1a",u.a.createElement(g.a,{showZero:!0},_)):u.a.createElement("div",null),u.a.createElement("div",{className:o?"lrls-placeholder":"lrls-blue",onClick:function(){o||i("add","",c.size)}},"+\u6dfb\u52a0\u5b58\u8d27\u660e\u7ec6")))}}]),a}(s.Component);function O(t,e,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=0,c=u.a.createElement("div",{style:{display:e?"":"none"}},t.map((function(t,e){var a="".concat(t.get("code")," ").concat(t.get("name"));return"\u9879\u76ee\u516c\u5171\u8d39\u7528"==t.get("name")&&(a="\u9879\u76ee\u516c\u5171\u8d39\u7528"),r+=t.get("amount"),u.a.createElement("div",{key:e,className:"ylls-top-line"},u.a.createElement("div",{className:"ylls-item ylls-padding"},u.a.createElement("div",{className:"overElli"},a),n?u.a.createElement("div",null,u.a.createElement(g.a,{className:"ylls-bold"},t.get("amount"))):null))})));return u.a.createElement(g.r,{className:"ylls-card"},u.a.createElement("div",{className:"ylls-item",onClick:function(){return a()}},u.a.createElement("div",null,"\u9879\u76ee\u7ba1\u7406\uff1a",n?u.a.createElement(g.a,{showZero:!0},r):null),u.a.createElement("div",null,e?"\u6536\u8d77":"\u5c55\u5f00",u.a.createElement(g.l,{style:e?{transform:"rotate(180deg)",marginBottom:".1rem"}:"",type:"arrow-down"}))),c)}function v(t){var e=[];return t.forEach((function(t){"XZ_SALE"==t?e.push({key:"\u9500\u552e\u8d39\u7528",value:"XZ_SALE"}):"XZ_MANAGE"==t?e.push({key:"\u7ba1\u7406\u8d39\u7528",value:"XZ_MANAGE"}):"XZ_FINANCE"==t&&e.push({key:"\u8d22\u52a1\u8d39\u7528",value:"XZ_FINANCE"})})),e}function N(t,e){var a="",n=[],r=[],c="",i="\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28";return({XZ_SALE:function(){a=t.get("saleAc"),n=a.size?a.getIn([0,"assCategoryList"]):[],r=t.get("saleList"),c="saleList",i="\u9500\u552e\u8d39\u7528"},XZ_MANAGE:function(){a=t.get("manageAc"),n=a.size?a.getIn([0,"assCategoryList"]):[],r=t.get("manageList"),c="manageList",i="\u7ba1\u7406\u8d39\u7528"},XZ_FINANCE:function(){a=t.get("financeAc"),n=a.size?a.getIn([0,"assCategoryList"]):[],r=t.get("financeList"),c="financeList",i="\u8d22\u52a1\u8d39\u7528"}}[e]||function(){return null})(),Object(d.fromJS)({assCategoryList:n,assList:r,acType:c,propertyCostName:i})}a(115),a(116),a(131),a(1458);var G,Y=function(t){Object(o.a)(a,t);var e=Object(i.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).state={showList:[]},n}return Object(c.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.data,n=e.onChange,r=e.leftIdx,c=e.leftClick,i=this.state.showList,o=a.getIn([r,"value"]),s=a.getIn([r,"children"]);return u.a.createElement(g.h,{className:"lrls"},u.a.createElement(g.s,{flex:"1",className:"lrls-menu-scroll"},u.a.createElement("div",{className:"lrls-menu"},u.a.createElement("div",{className:"menu-left"},a.map((function(t,e){return u.a.createElement(g.r,{key:t.get("value"),className:"menu-left-item overElli ".concat(o==t.get("value")?"menu-left-item-selected":""),onClick:function(){return c(e)}},t.get("label"))}))),u.a.createElement("div",{className:"menu-right"},function e(a,r){return a&&a.map((function(a,c){if(a.get("children")&&a.get("children").size){var s=i.some((function(t){return t===a.get("value")}));return u.a.createElement("div",{key:a.get("value")},u.a.createElement(g.r,{className:"menu-right-item",style:{paddingLeft:"".concat(r,"rem")},onClick:function(){var e=i;if(s){var n=e.findIndex((function(t){return t===a.get("value")}))-1;n>-1?e=e.splice(n,1):e.shift()}else e.push(a.get("value"));t.setState({showList:e})}},u.a.createElement("div",{className:"overElli"},a.get("label")),u.a.createElement(g.l,{style:s?{transform:"rotate(180deg)"}:"",type:"arrow-down"})),s?e(a.get("children"),r+.05):"")}return u.a.createElement(g.r,{key:a.get("value"),className:"menu-right-item overElli",style:{paddingLeft:"".concat(r,"rem")},onClick:function(){return n([o,a.get("value")],a.get("item"))}},a.get("label"))}))}(s,.1)))))}}]),a}(u.a.Component),R=(a(56),a(220)),D=a(232),j=Object(T.c)((function(t){return t}))(G=function(t){Object(o.a)(a,t);var e=Object(i.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var t=this.props,e=t.dispatch,a=t.enCanUse,n=t.editPermission,r=t.enclosureList,c=t.showlsfj,i=t.checkMoreFj,o=t.label,s=t.enclosureCountUser,d=t.allState,_=t.history,g=d.get("uploadKeyJson"),A=[];return r.map((function(t){"TRUE"===t.get("imageOrFile")&&A.push(t.get("signedUrl"))})),A=A.slice(0,9),u.a.createElement(D.a,{formPage:"oldRunning",className:"",dispatch:e,enCanUse:a,editPermission:n,enclosureList:r,showPzfj:c,checkMoreFj:i,label:o.toJS(),enclosureCountUser:s,previewImageList:A,showckpz:!1,uploadFiles:function(t){e(l.b.uploadFiles.apply(l.b,Object(R.a)(t)))},getUploadGetTokenFetch:function(){e(l.b.getUploadGetTokenFetch())},getLabelFetch:function(){return e(l.b.getLabelFetch())},deleteUploadImgUrl:function(t){return e(l.b.deleteUploadFJUrl(t))},changeTagName:function(t,a){return e(l.b.changeTagName(t,a))},uploadKeyJson:g,history:_})}}]),a}(u.a.Component))||G},1037:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return c}));var n=[{key:"2%",value:2},{key:"3%",value:3},{key:"4%",value:4},{key:"5%",value:5},{key:"6%",value:6},{key:"9%",value:9},{key:"10%",value:10},{key:"11%",value:11},{key:"12%",value:12},{key:"13%",value:13},{key:"16%",value:16},{key:"17%",value:17}],r=[{key:"2%",value:2},{key:"3%",value:3},{key:"5%",value:5}],c={LX_SR:"\u6536\u5165",LX_ZC:"\u652f\u51fa",LX_JZCB:"\u7ed3\u8f6c\u6210\u672c",LX_CBTH:"\u6210\u672c\u9000\u56de",LX_ZZS_YKP:"\u5df2\u5f00\u53d1\u7968",LX_ZZS_WKP:"\u672a\u5f00\u53d1\u7968",LX_ZZS_YRZ:"\u5df2\u8ba4\u8bc1\u53d1\u7968",LX_ZZS_WRZ:"\u672a\u8ba4\u8bc1\u53d1\u7968",LX_TSSF_YKP:"\u5df2\u5f00\u53d1\u7968",LX_TSSF_WKP:"\u672a\u5f00\u53d1\u7968",LX_TGSF_YRZ:"\u5df2\u8ba4\u8bc1\u53d1\u7968",LX_TGSF_WRZ:"\u672a\u8ba4\u8bc1\u53d1\u7968",LX_YYSR:"\u8425\u4e1a\u6536\u5165",LX_PP:"\u9884\u6536\u6b3e",LX_ZZS:"\u589e\u503c\u7a0e",LX_YYTS:"\u9000\u552e",LX_TSSF:"\u9000\u552e\u7a0e\u8d39",LX_ARHX:"\u5e94\u6536\u6838\u9500",LX_PPHX:"\u9884\u6536\u6838\u9500",LX_TSHX:"\u9000\u552e\u6838\u9500",LX_YYZC:"\u8425\u4e1a\u652f\u51fa",LX_AP:"\u9884\u4ed8\u6b3e",LX_ADV:"\u5e94\u4ed8\u6b3e",LX_YYTG:"\u9000\u8d2d",LX_TGSF:"\u9000\u8d2d\u7a0e\u8d39",LX_APHX:"\u5e94\u4ed8\u6838\u9500",LX_ADVHX:"\u9884\u4ed8\u6838\u9500",LX_TGHX:"\u9000\u8d2d\u6838\u9500",LX_FYZC:"\u8d39\u7528\u652f\u51fa",LX_JTGZXJ:"\u8ba1\u63d0\u5de5\u8d44",LX_GZXJZC:"\u5de5\u8d44\u652f\u51fa",LX_DKGJJ:"\u4ee3\u6263\u516c\u79ef\u91d1",LX_DKSHBX:"\u4ee3\u6263\u793e\u4fdd",LX_DKSDS:"\u4ee3\u6263\u6240\u5f97\u7a0e",LX_JTSB:"\u8ba1\u63d0\u793e\u4fdd",LX_SBZC:"\u793e\u4fdd\u652f\u51fa",LX_DJSB:"\u4ee3\u7f34\u793e\u4fdd",LX_JTGJJ:"\u8ba1\u63d0\u516c\u79ef\u91d1",LX_GJJZC:"\u516c\u79ef\u91d1\u652f\u51fa",LX_DJGJJ:"\u4ee3\u7f34\u516c\u79ef\u91d1",LX_FLFZC:"\u798f\u5229\u8d39\u652f\u51fa",LX_JTQTXC:"\u8ba1\u63d0\u5176\u4ed6\u85aa\u916c",LX_QTXC:"\u5176\u4ed6\u85aa\u916c\u652f\u51fa",LX_YJSF:"\u9884\u4ea4\u7a0e\u8d39",LX_ZZSZC:"\u589e\u503c\u7a0e\u652f\u51fa",LX_YJDK:"\u9884\u4ea4\u62b5\u6263",LX_ZCSDS:"\u8f6c\u51fa\u6240\u5f97\u7a0e",LX_SDSZC:"\u6240\u5f97\u7a0e\u652f\u51fa",LX_JTSF:"\u8ba1\u63d0\u7a0e\u8d39",LX_QTSFZC:"\u5176\u4ed6\u7a0e\u8d39\u652f\u51fa",LX_YYWSR:"\u8425\u4e1a\u5916\u6536\u5165",LX_YYWZC:"\u8425\u4e1a\u5916\u652f\u51fa",LX_ZSKX:"\u6682\u6536\u6b3e\u9879",LX_ZSHX:"\u6682\u6536\u6838\u9500",LX_ZFKX:"\u6682\u4ed8\u6b3e\u9879",LX_ZFHX:"\u6682\u4ed8\u6838\u9500",LX_ZCGJ:"\u8d44\u4ea7\u8d2d\u8fdb",LX_ZCCZ:"\u8d44\u4ea7\u5904\u7f6e",LX_JZSY:"\u5904\u7f6e\u635f\u76ca",LX_QDJK:"\u53d6\u5f97\u501f\u6b3e",LX_CHLX:"\u507f\u8fd8\u5229\u606f",LX_CHBJ:"\u507f\u8fd8\u672c\u91d1",LX_DWTZ:"\u5bf9\u5916\u6295\u8d44",LX_QDSY:"\u53d6\u5f97\u6536\u76ca",LX_SHTZ:"\u6536\u56de\u6295\u8d44",LX_ZZ:"\u589e\u8d44",LX_LRFP:"\u5229\u6da6\u5206\u914d",LX_JZ:"\u51cf\u8d44",LX_JZSY_SY:"\u7ed3\u8f6c\u6536\u76ca",LX_JZSY_SS:"\u7ed3\u8f6c\u635f\u5931",LX_JZSY_ZCYZ:"\u8d44\u4ea7\u539f\u503c",LX_JZSY_ZJTX:"\u7d2f\u8ba1\u6298\u65e7\u644a\u9500",LX_JZSY_SJGZ:"\u5347\u7ea7\u6539\u9020",LX_JZSY_QLSR:"\u6e05\u7406\u6536\u5165",LX_FPRZ_CG:"\u91c7\u8d2d\u53d1\u7968\u8ba4\u8bc1",LX_FPRZ_TG:"\u9000\u8d2d\u53d1\u7968\u8ba4\u8bc1",LX_KJFP_XS:"\u9500\u552e\u5f00\u7968",LX_KJFP_TS:"\u9000\u552e\u5f00\u7968",LX_ZCWJZZS:"\u8f6c\u51fa\u672a\u4ea4\u7a0e\u8d39",LX_ZFLR:"\u652f\u4ed8\u5229\u6da6",LX_TZ_JTGL:"\u8ba1\u63d0\u80a1\u5229",LX_TZ_SRGL:"\u6536\u5165\u80a1\u5229",LX_TZ_JTLX:"\u8ba1\u63d0\u5229\u606f",LX_TZ_SRLX:"\u6536\u5165\u5229\u606f",LX_JK_JTLX:"\u8ba1\u63d0\u5229\u606f",LX_JK_ZFLX:"\u652f\u4ed8\u5229\u606f",LX_NBZZ:"\u5185\u90e8\u8f6c\u8d26",LX_NBZR:"\u5185\u90e8\u8f6c\u8d26-\u8f6c\u5165",LX_NBZC:"\u5185\u90e8\u8f6c\u8d26-\u8f6c\u51fa",LX_GRSFZC:"\u4e2a\u4eba\u7a0e\u8d39\u652f\u51fa",LX_XMGGFYFT:"\u8d39\u7528\u5206\u644a",LX_ZJTX:"\u6298\u65e7\u644a\u9500"}},1125:function(t,e,a){"use strict";a.d(e,"b",(function(){return A})),a.d(e,"a",(function(){return l}));a(32),a(223),a(61),a(166),a(70),a(77),a(29),a(1035),a(1029),a(82),a(76),a(1030);var n=a(51),r=a(220),c=a(4),i=a(1),o=a(57),s=a(14),u=a(12),d=a(2),_=a(1022),g=Object(i.fromJS)({views:{insertOrModify:"insert",fromYl:!1,shouldJzsy:!1},data:{categoryType:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"\u8d2d\u8fdb\u8d44\u4ea7\u652f\u51fa",amount:"",assetType:"XZ_GJZC",runningState:"STATE_CQZC_YF",accountName:"",accountUuid:"",beCarryover:!1,carryoverAmount:"",billType:"bill_other",billStates:"bill_states_not_auth",billAssList:[],billAcList:[],taxRate:3,tax:"",propertyCostList:[],propertyCost:"",acAssets:{beManagemented:!1,beCleaning:!1,netProfitAmount:0,lossAmount:0,originalAssetsAmount:0,depreciationAmount:0,contactsCardRange:{uuid:"",code:"",name:""}}},contactsCardList:[]});function A(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(c.a)(t,T.GET_LB_CQZC_CARD_DETAIL,(function(){var t=a.value.split(s.B),e=a.data.get("amount"),n=e-e/(1+g.getIn(["data","taxRate"])/100),r="",c=a.receivedData.propertyCostList;return 1==c.length&&(r=c[0]),g.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).set("preData",g.get("preData")).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","accountName"],a.data.get("accountName")).setIn(["data","accountUuid"],a.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["data","tax"],Object(u.l)(n)).setIn(["data","propertyCost"],r).setIn(["data","runningAbstract"],"\u8d2d\u8fdb\u8d44\u4ea7\u652f\u51fa").setIn(["views","insertOrModify"],"insert").setIn(["views","fromYl"],!1).setIn(["views","shouldJzsy"],!1)})),Object(c.a)(t,T.GET_LB_CQZC_FROM_YLLS,(function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data"))})),Object(c.a)(t,T.CHANGE_CQZC_VIEWS,(function(){return e.setIn(["views","shouldJzsy"],!0).setIn(["views","insertOrModify"],"insert").setIn(["data","runningAbstract"],"\u5904\u7f6e\u8d44\u4ea7\u5904\u7f6e\u635f\u76ca")})),Object(c.a)(t,T.CHANGE_CQZC_PROPERTY_COST,(function(){var t="",n="",r="";return{XZ_GJZC:function(){t="STATE_CQZC_YF",n="bill_states_not_auth",r="\u8d2d\u8fdb\u8d44\u4ea7\u652f\u51fa"},XZ_CZZC:function(){t="STATE_CQZC_YS",n="bill_states_not_make_out",r="\u5904\u7f6e\u8d44\u4ea7\u6536\u5165"},XZ_ZJTX:function(){t="STATE_CQZC_ZJTX",n="bill_states_not_make_out",r="\u8d44\u4ea7\u6298\u65e7\u644a\u9500"}}[a.value](),e.setIn(["data","assetType"],a.value).setIn(["data","runningState"],t).setIn(["data","beCarryover"],!1).setIn(["data","billStates"],n).setIn(["data","runningAbstract"],r)})),Object(c.a)(t,T.CHANGE_CQZC_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(c.a)(t,T.CHANGE_CQZC_ACLIST,(function(){var t=a.value.split(s.B),n={};return n.uuid=t[0],n.code=t[1],n.name=t[2],e.setIn(["data","acAssets",a.acType],Object(i.fromJS)(n))})),Object(c.a)(t,T.CHANGE_CQZC_AMOUNT,(function(){var t=e.getIn(["data","taxRate"]),n=a.value,r=n-n/(1+t/100);return e.setIn(["data","amount"],n).setIn(["data","tax"],Object(u.l)(r))})),Object(c.a)(t,T.CHANGE_CQZC_ACCOUNT,(function(){var t=a.value.split(s.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(c.a)(t,T.CHANGE_CQZC_BECARRYOVER,(function(){return e.updateIn(["data","beCarryover"],(function(t){return!t}))})),Object(c.a)(t,T.CHANGE_CQZC_TAXRATE,(function(){var t,n=e.getIn(["data","amount"]),r=a.value;return t=n-n/(1+r/100),e.setIn(["data","taxRate"],r).setIn(["data","tax"],Object(u.l)(t))})),Object(c.a)(t,T.CHANGE_CQZC_BILLSTATES,(function(){var t=e.getIn(["data","billStates"]),a="";return({bill_states_not_make_out:function(){return a="bill_states_make_out"},bill_states_make_out:function(){return a="bill_states_not_make_out"},bill_states_not_auth:function(){return a="bill_states_auth"},bill_states_auth:function(){return a="bill_states_not_auth"}}[t]||function(){return null})(),e.setIn(["data","billStates"],a)})),Object(c.a)(t,T.AFTER_CQZC_SAVE,(function(){return a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber)})),Object(c.a)(t,T.CHANGE_CQZC_CZAMOUNT,(function(){return e.setIn(["data","acAssets",a.dataType],a.value)})),Object(c.a)(t,T.AUTO_CQZC_CZAMOUNT,(function(){var t=e.getIn(["data","acAssets","originalAssetsAmount"]),a=e.getIn(["data","acAssets","depreciationAmount"]),n=e.getIn(["data","amount"]),r=e.getIn(["data","tax"]),c=0;return c="bill_common"===e.getIn(["data","billType"])?Number(a)+Number(n)-Number(t)-Number(r):Number(a)+Number(n)-Number(t),e=c>=0?e.deleteIn(["data","acAssets","lossAmount"]).setIn(["data","acAssets","netProfitAmount"],c):e.deleteIn(["data","acAssets","netProfitAmount"]).setIn(["data","acAssets","lossAmount"],-c)})),Object(c.a)(t,T.GET_CQZC_CARDLIST,(function(){var t=[];return a.data.forEach((function(e){t.push({key:"".concat(e.code," ").concat(e.name),value:"".concat(e.uuid).concat(s.B).concat(e.code).concat(s.B).concat(e.name)})})),e.getIn(["views","fromYl"])||(e=e.setIn(["data","acAssets","contactsCardRange"],null)),e.set("contactsCardList",Object(i.fromJS)(t))})),Object(c.a)(t,T.CQZC_SAVE_AND_NEW,(function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),c="",o=a.receivedData.propertyCostList;return 1==o.length&&(c=o[0]),g.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","propertyCost"],c).setIn(["data","runningAbstract"],"\u8d2d\u8fdb\u8d44\u4ea7\u652f\u51fa")})),t)[a.type]||function(){return e})()}var l={changeCqzcData:function(t,e){return{type:T.CHANGE_CQZC_DATA,dataType:t,value:e}},changePropertyCost:function(t){return{type:T.CHANGE_CQZC_PROPERTY_COST,value:t}},changeAcList:function(t,e){return{type:T.CHANGE_CQZC_ACLIST,value:t,acType:e}},changeAmount:function(t){return{type:T.CHANGE_CQZC_AMOUNT,value:t}},changeAccount:function(t){return{type:T.CHANGE_CQZC_ACCOUNT,value:t}},changeBeCarryover:function(){return{type:T.CHANGE_CQZC_BECARRYOVER}},changeTaxRate:function(t){return{type:T.CHANGE_CQZC_TAXRATE,value:t}},changeBillStates:function(){return{type:T.CHANGE_CQZC_BILLSTATES}},saveRunningbusiness:function(t){return function(e,a){var c=a().homeAccountState,u=c.get("enclosureList").toJS(),g=c.get("needDeleteUrl").toJS(),A=u.concat(g),T=a().cqzcAccountState,f=T.get("data").toJS(),C=f.runningState,S=f.acAssets.beManagemented,L=f.beCarryover,E=f.assetType;if(f.amount<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(""==f.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(f.runningAbstract.length>s.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(s.y,"\u4e2a\u5b57\u7b26"));if("XZ_ZJTX"==E&&""==f.propertyCost)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28");if("STATE_CQZC_WF"!=C&&"STATE_CQZC_WS"!=C&&"XZ_ZJTX"!=E&&""==f.accountUuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");if("STATE_CQZC_JZSY"!=C&&"XZ_ZJTX"!=E&&S){var m=f.acAssets.contactsCardRange;if(!m||""==m.uuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u5f80\u6765\u5355\u4f4d")}if(L){var I=f.acAssets.originalAssetsAmount,y=f.acAssets.depreciationAmount;if(I<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u8d44\u4ea7\u539f\u503c");if(y<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u7d2f\u8ba1\u6298\u65e7");if(Number(y)>Number(I))return d.a.toast.info("\u6298\u65e7\u989d\u4e0d\u80fd\u5927\u4e8e\u539f\u503c")}var b=a().homeAccountState.get("project").toJS(),p=b.usedProject,O=b.projectCard;if(p&&(L||"XZ_ZJTX"==E)){var v=[];if(!O.every((function(t){return v.push(t.uuid),t.uuid})))return d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");if(Object(r.a)(new Set(v)).length<v.length)return d.a.toast.info("\u6709\u91cd\u590d\u7684\u9879\u76ee\u5361\u7247")}var N="modifyRunningbusiness",G="insert"===T.getIn(["views","insertOrModify"]);G&&(delete f.uuid,N="insertAssets"),d.a.toast.loading(s.p,0),Object(o.a)(N,"POST",JSON.stringify(Object(n.a)({},f,{usedProject:p,projectCard:O,enclosureList:A})),(function(a){if(d.a.toast.hide(),0!==a.code)d.a.toast.fail("".concat(a.code," ").concat(a.message));else if(d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=f.categoryUuid;e(l.getCardDetail(n)),e(_.b.changeLrlsData(["project","projectCard"],Object(i.fromJS)([{amount:""}]))),e(_.b.changeLrlsEnclosureList())}else e(l.afterLrAccountSave(a.data,G))}))}},afterLrAccountSave:function(t,e){return{type:T.AFTER_CQZC_SAVE,data:t,isInsert:e}},changeCqzcCzAmount:function(t,e){return{type:T.CHANGE_CQZC_CZAMOUNT,dataType:t,value:e}},autoCqzcCzAmount:function(){return{type:T.AUTO_CQZC_CZAMOUNT}},getCqzcCardList:function(t){return function(e,a){var n=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]),r=a().cqzcAccountState,c=r.getIn(["data","acAssets",t]),i="XZ_GJZC"===r.getIn(["data","assetType"])?"NEEDPAY":"NEEDIN";d.a.toast.loading(s.p,0),Object(o.a)("getCurrentCardList","POST",JSON.stringify({sobId:n,property:i,categoryList:c}),(function(a){d.a.toast.hide(),Object(u.u)(a)&&e({type:T.GET_CQZC_CARDLIST,data:a.data.result,cardType:t})}))}},getCardDetail:function(t){return function(e){d.a.toast.loading(s.p,0),Object(o.a)("getRunningDetail","GET","uuid=".concat(t),(function(t){if(d.a.toast.hide(),Object(u.u)(t)){var a=t.data.result;delete a.parentUuid,e({type:T.CQZC_SAVE_AND_NEW,receivedData:a}),a.acAssets.beManagemented&&e(l.getCqzcCardList("contactsRange"))}}))}},changeCqzcViews:function(){return{type:T.CHANGE_CQZC_VIEWS}}},T={GET_LB_CQZC_CARD_DETAIL:"GET_LB_CQZC_CARD_DETAIL",GET_LB_CQZC_FROM_YLLS:"GET_LB_CQZC_FROM_YLLS",CHANGE_CQZC_DATA:"CHANGE_CQZC_DATA",CHANGE_CQZC_AMOUNT:"CHANGE_CQZC_AMOUNT",CHANGE_CQZC_ACCOUNT:"CHANGE_CQZC_ACCOUNT",CHANGE_CQZC_ACLIST:"CHANGE_CQZC_ACLIST",CHANGE_CQZC_BECARRYOVER:"CHANGE_CQZC_BECARRYOVER",CHANGE_CQZC_TAXRATE:"CHANGE_CQZC_TAXRATE",CHANGE_CQZC_BILLSTATES:"CHANGE_CQZC_BILLSTATES",AFTER_CQZC_SAVE:"AFTER_CQZC_SAVE",CHANGE_CQZC_CZAMOUNT:"CHANGE_CQZC_CZAMOUNT",AUTO_CQZC_CZAMOUNT:"AUTO_CQZC_CZAMOUNT",CQZC_SAVE_AND_NEW:"CQZC_SAVE_AND_NEW",GET_CQZC_CARDLIST:"GET_CQZC_CARDLIST",CHANGE_CQZC_PROPERTY_COST:"CHANGE_CQZC_PROPERTY_COST",CHANGE_CQZC_VIEWS:"CHANGE_CQZC_VIEWS"}},1146:function(t,e,a){"use strict";a.d(e,"a",(function(){return g})),a.d(e,"b",(function(){return l}));a(32),a(61),a(31),a(70),a(29),a(82),a(76);var n=a(51),r=a(4),c=a(1),i=a(57),o=a(14),s=a(12),u=(a(1037),a(1022)),d=a(2),_=Object(c.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_SFGL",categoryName:"\u6536\u4ed8\u7ba1\u7406",categoryUuid:"",runningDate:"",runningAbstract:"\u6838\u9500\u8d26\u6b3e",amount:"",flowNumber:"",accountName:"",accountUuid:"",uuid:"",contactsCardRange:null,cardUuid:"",totalAmount:"",beMoed:!1,moedAmount:""},cardList:[],manageList:{childList:[]}});function g(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(r.a)(t,A.GET_LB_SFGL_CARD_DETAIL,(function(){var t=a.value.split(o.B);return _.setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","amount"],a.data.get("amount")).setIn(["views","insertOrModify"],"insert")})),Object(r.a)(t,A.GET_LB_SFGL_FROM_YLLS,(function(){var t=0,n=a.state.getIn(["data","detail"]).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount")),n=e.get("flowType"),r=e.get("direction"),c=e.get("runningState");return"STATE_YYSR_TS"!==c&&"STATE_YYZC_TG"!==c||(a=-Math.abs(a)),"FLOW_INADVANCE"==n?"credit"==r?t+=a:t-=a:"credit"==r?t-=a:t+=a,e.set("isCheck",!0).set("notHandleAmount",Math.abs(a))}))}));return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).setIn(["data","flowNumber"],a.state.getIn(["data","flowNumber"])).setIn(["data","uuid"],a.state.getIn(["data","uuid"])).setIn(["data","categoryUuid"],a.state.getIn(["data","categoryUuid"])).setIn(["data","accountName"],a.state.getIn(["data","accountName"])).setIn(["data","accountUuid"],a.state.getIn(["data","accountUuid"])).setIn(["data","runningDate"],a.state.getIn(["data","runningDate"])).setIn(["data","runningAbstract"],a.state.getIn(["data","runningAbstract"])).setIn(["data","amount"],a.state.getIn(["data","amount"])).setIn(["data","totalAmount"],t).setIn(["data","contactsCardRange"],a.state.getIn(["data","usedCard"])).setIn(["data","cardUuid"],a.state.getIn(["data","usedCard","uuid"])).setIn(["data","beMoed"],a.state.getIn(["data","beMoed"])).setIn(["data","moedAmount"],a.state.getIn(["data","moedAmount"])).setIn(["manageList","childList"],n).set("cardList",Object(c.fromJS)([]))})),Object(r.a)(t,A.CHANGE_SFGL_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(r.a)(t,A.CHANGE_SFGL_ACCOUNT,(function(){var t=a.value.split(o.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(r.a)(t,A.AFTER_SFGL_SAVE,(function(){var t=e.getIn(["data","runningDate"]),a=e.getIn(["data","categoryUuid"]),n=e.getIn(["data","categoryName"]);return _.setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],a).setIn(["data","categoryName"],n)})),Object(r.a)(t,A.GET_YL_SFGLSTATE,(function(){var t=0,n=Object(c.fromJS)(a.receivedData.detail).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount")),n=e.get("flowType"),r=e.get("direction"),c=e.get("runningState");return"STATE_YYSR_TS"!==c&&"STATE_YYZC_TG"!==c||(a=-Math.abs(a)),"FLOW_INADVANCE"==n?"credit"==r?t+=a:t-=a:"credit"==r?t-=a:t+=a,e.set("isCheck",!0).set("notHandleAmount",Math.abs(a))}))}));return e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.receivedData.flowNumber).setIn(["data","uuid"],a.receivedData.uuid).setIn(["data","categoryUuid"],a.receivedData.categoryUuid).setIn(["data","accountName"],a.receivedData.accountName).setIn(["data","accountUuid"],a.receivedData.accountUuid).setIn(["data","runningDate"],a.receivedData.runningDate).setIn(["data","runningAbstract"],a.receivedData.runningAbstract).setIn(["data","amount"],a.receivedData.amount).setIn(["data","totalAmount"],t).setIn(["data","contactsCardRange"],Object(c.fromJS)(a.receivedData.usedCard)).set(["data","cardUuid"],a.receivedData.usedCard.uuid).setIn(["data","beMoed"],a.receivedData.beMoed).setIn(["data","moedAmount"],a.receivedData.moedAmount).setIn(["manageList","childList"],n).set("cardList",Object(c.fromJS)([]))})),Object(r.a)(t,A.GET_SFGL_CARDLIST,(function(){var t=[];return a.data.forEach((function(e){t.push({key:"".concat(e.code," ").concat(e.name),value:"".concat(e.uuid).concat(o.B).concat(e.code).concat(o.B).concat(e.name)})})),e.set("cardList",Object(c.fromJS)(t)).setIn(["data","contactsCardRange"],null).set("manageList",Object(c.fromJS)({childList:[]})).set(["data","cardUuid"],"")})),Object(r.a)(t,A.CHANGE_SFGL_CARD,(function(){var t=a.card.split(o.B),n={};return n.uuid=t[0],n.code=t[1],n.name=t[2],e.setIn(["data","contactsCardRange"],Object(c.fromJS)(n)).set("manageList",Object(c.fromJS)(a.data)).setIn(["data","cardUuid"],t[0])})),Object(r.a)(t,A.SFGL_MANAGELIST_CHECKDED,(function(){return e.setIn(["manageList","childList",a.idx,"isCheck"],a.value)})),Object(r.a)(t,A.GET_SFGL_CATEGORYLIST,(function(){var t=[];return a.data.forEach((function(e){t.push({key:"".concat(e.name),value:"".concat(e.uuid).concat(o.B).concat(e.name)})})),e.setIn(["manageList","childList",a.idx,"categoryList"],Object(c.fromJS)(t))})),Object(r.a)(t,A.SFGL_MANAGELIST_CATETORY,(function(){var t=a.value.split(o.B);return e.setIn(["manageList","childList",a.idx,"categoryName"],t[1]).setIn(["manageList","childList",a.idx,"categoryUuid"],t[0])})),Object(r.a)(t,A.SFGL_MANAGELIST_ALLCHECK,(function(){return e.updateIn(["manageList","childList"],(function(t){return t.map((function(t){return t.set("isCheck",a.value)}))}))})),t)[a.type]||function(){return e})()}var A={GET_LB_SFGL_CARD_DETAIL:"GET_LB_SFGL_CARD_DETAIL",GET_LB_SFGL_FROM_YLLS:"GET_LB_SFGL_FROM_YLLS",CHANGE_SFGL_DATA:"CHANGE_SFGL_DATA",CHANGE_SFGL_ACCOUNT:"CHANGE_SFGL_ACCOUNT",AFTER_SFGL_SAVE:"AFTER_SFGL_SAVE",GET_SFGL_CARDLIST:"GET_SFGL_CARDLIST",CHANGE_SFGL_CARD:"CHANGE_SFGL_CARD",SFGL_MANAGELIST_CHECKDED:"SFGL_MANAGELIST_CHECKDED",GET_SFGL_CATEGORYLIST:"GET_SFGL_CATEGORYLIST",SFGL_MANAGELIST_CATETORY:"SFGL_MANAGELIST_CATETORY",SFGL_MANAGELIST_ALLCHECK:"SFGL_MANAGELIST_ALLCHECK",GET_YL_SFGLSTATE:"GET_YL_SFGLSTATE"},l={changeSfglData:function(t,e){return{type:A.CHANGE_SFGL_DATA,dataType:t,value:e}},changeSfglAccount:function(t){return{type:A.CHANGE_SFGL_ACCOUNT,value:t}},getSfglCardList:function(t){return function(e){d.a.toast.loading(o.p,0),Object(i.a)("getBusinessManagerCardList","POST",JSON.stringify({runningDate:t}),(function(t){d.a.toast.hide(),Object(s.u)(t)&&e({type:A.GET_SFGL_CARDLIST,data:t.data.cardList})}))}},changeSfglCard:function(t,e,a){return function(e){var n=t.split(o.B);d.a.toast.loading(o.p,0),Object(i.a)("getManageList","POST",JSON.stringify({runningDate:a,cardUuid:n[0],isCheck:!1}),(function(a){d.a.toast.hide(),Object(s.u)(a)&&e({type:A.CHANGE_SFGL_CARD,card:t,data:a.data.result})}))}},manageListCheckded:function(t,e){return{type:A.SFGL_MANAGELIST_CHECKDED,idx:t,value:e}},getSfglCategoryList:function(t,e){return function(a){d.a.toast.loading(o.p,0),Object(i.a)("getManagerCategoryList","POST",JSON.stringify({assType:e}),(function(e){d.a.toast.hide(),Object(s.u)(e)&&a({type:A.GET_SFGL_CATEGORYLIST,idx:t,data:e.data})}))}},sfglManageListCatetory:function(t,e){return{type:A.SFGL_MANAGELIST_CATETORY,idx:t,value:e}},manageListAllCheck:function(t){return{type:A.SFGL_MANAGELIST_ALLCHECK,value:t}},saveRunningbusiness:function(t){return function(e,a){var r=a().sfglAccountState,c=a().homeAccountState,_=c.get("enclosureList").toJS(),g=c.get("needDeleteUrl").toJS(),A=_.concat(g),T="insert"===r.getIn(["views","insertOrModify"]),f="modifyRunningpayment";T&&(f="insertRunningpayment");var C=[],S=!1,L=!1;r.getIn(["manageList","childList"]).forEach((function(t){t.get("isCheck")&&(S=!0,t.get("beOpened")?(void 0!=t.get("categoryUuid")&&0!=t.get("categoryUuid").length||(L=!0),C.push({beOpened:!0,categoryUuid:t.get("categoryUuid"),uuid:t.get("uuid"),assType:t.get("assType")})):C.push({uuid:t.get("uuid"),assType:t.get("assType")}))}));var E=r.get("data").toJS(),m=Math.abs(E.amount),I=Math.abs(E.totalAmount),y=E.beMoed?Number(E.moedAmount):0;return""==E.runningAbstract?d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981"):E.runningAbstract.length>o.y?d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(o.y,"\u4e2a\u5b57\u7b26")):E.cardUuid?m+y>I?d.a.toast.info("\u6536\u4ed8\u91d1\u989d\u5927\u4e8e\u60a8\u6240\u6709\u4e1a\u52a1\u7684\u6240\u6709\u672a\u5904\u7406\u91d1\u989d"):m+y==0?d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d"):m>0&&""==E.accountUuid?d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237"):S?L?d.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u6838\u7b97\u7684\u5217\u8868\u7684\u7c7b\u522b"):(d.a.toast.loading(o.p,0),void Object(i.a)(f,"POST",JSON.stringify(Object(n.a)({},E,{amount:m,uuidList:C,enclosureList:A})),(function(a){if(d.a.toast.hide(),Object(s.u)(a))if(d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=E.runningDate;e(l.afterSfglSave()),e(l.getSfglCardList(n)),e(u.b.changeLrlsEnclosureList())}else{var r=T?a.data:E.uuid;e(l.getYlSfglState(r))}}))):d.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u6838\u7b97\u7684\u5217\u8868"):d.a.toast.info("\u8bf7\u9009\u62e9\u5f80\u6765\u5355\u4f4d")}},afterSfglSave:function(){return{type:A.AFTER_SFGL_SAVE}},getYlSfglState:function(t){return function(e){d.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(i.a)("getRunningBusiness","GET","uuid=".concat(t),(function(t){d.a.toast.hide(),Object(s.u)(t)&&(e({type:A.GET_YL_SFGLSTATE,receivedData:t.data.result}),t.data.result.detail.forEach((function(t,a){t.beOpened&&e(l.getSfglCategoryList(a,t.assType))})))}))}}}},1147:function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return T}));a(32),a(223),a(166),a(31),a(116),a(77),a(29),a(1035),a(1029),a(82),a(1030);var n=a(51),r=a(220),c=a(4),i=a(1),o=a(57),s=a(14),u=a(12),d=a(2),_=a(1022),g=a(1023),A=Object(i.fromJS)({views:{insertOrModify:"insert",fromYl:!1},data:{categoryType:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"",propertyTax:"",accountName:"",accountUuid:"",paymentList:[],jtAmount:"",handleAmount:"",deductedAmount:"",offsetAmount:"",reduceAmount:"",acTax:{accruedAc:[],accruedList:[],payAc:[],payList:[],turnOutAc:[],turnOutList:[],inAdvanceAc:[],inAdvanceList:[],beAccrued:!1,beTurnOut:!1,beInAdvance:!1}}});function l(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(c.a)(t,f.GET_LB_SFZC_CARD_DETAIL,(function(){var t=a.value.split(s.B),e=a.data.get("amount"),n=a.receivedData.propertyTax,r=a.receivedData.acTax.beAccrued,c=(a.receivedData.acTax.beInAdvance,""),o="";return"SX_GRSF"!=n&&"SX_ZZS"!=n||(c="STATE_SF_JN",o=Object(g.h)(c,Object(i.fromJS)(a.receivedData))),r||"SX_QTSF"!=n&&"SX_QYSDS"!=n||(c="STATE_SF_JN",o=Object(g.h)(c,Object(i.fromJS)(a.receivedData))),A.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","name"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","runningAbstract"],o).setIn(["data","accountName"],a.data.get("accountName")).setIn(["data","accountUuid"],a.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["data","runningState"],c).setIn(["views","insertOrModify"],"insert")})),Object(c.a)(t,f.GET_LB_SFZC_FROM_YLLS,(function(){var t=a.state.getIn(["data","propertyTax"]),n=a.state.getIn(["data","runningState"]),r=0,c=Object(i.fromJS)([]);return c="SX_GRSF"!=t&&"STATE_SF_JN"==n?a.state.getIn(["data","paymentList"]).update((function(t){return t.map((function(t){var e=Number(t.get("notHandleAmount"))+Number(t.get("handleAmount"));return r+=e,t.set("notHandleAmount",e)}))})):a.state.getIn(["data","paymentList"]),e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data")).setIn(["data","paymentList"],c).setIn(["data","jtAmount"],r)})),Object(c.a)(t,f.CHANGE_SFZC_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(c.a)(t,f.CHANGE_SFZC_RUNNING_STATE,(function(){return e.setIn(["data","runningState"],a.key)})),Object(c.a)(t,f.CHANGE_SFZC_ASSLIST,(function(){var t=a.value.split(s.B),n={};return n.assId=t[0],n.assName=t[1],n.assCategory=t[2],e.setIn(["data","acTax",a.acType,a.idx],Object(i.fromJS)(n))})),Object(c.a)(t,f.CHANGE_SFZC_ACCOUNT,(function(){var t=a.value.split(s.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(c.a)(t,f.AFTER_SFZC_SAVE,(function(){return a.saveAndNew?e=A:(a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber)),e})),Object(c.a)(t,f.GET_SFZC_PAYMENTLIST,(function(){return(e=a.isQtsf?e.setIn(["data","amount"],""):e.setIn(["data","jtAmount"],"")).setIn(["data","paymentList"],Object(i.fromJS)(a.receivedData))})),Object(c.a)(t,f.PAYMENTLIST_BESELECT,(function(){return e.setIn(["data","paymentList",a.idx,"beSelect"],a.value)})),Object(c.a)(t,f.PAYMENTLIST_BEALLCHECK,(function(){return e=a.value?e.updateIn(["data","paymentList"],(function(t){return t.map((function(t){return t.set("beSelect",!0)}))})):e.updateIn(["data","paymentList"],(function(t){return t.map((function(t){return t.set("beSelect",!1)}))}))})),Object(c.a)(t,f.GET_YL_SFZCSTATE,(function(){var t=0,n=Object(i.fromJS)(a.receivedData.paymentList).update((function(e){return e.map((function(e){var a=Number(e.get("notHandleAmount"))+Number(e.get("handleAmount"));return t+=a,e.set("notHandleAmount",a)}))}));return e.setIn(["views","insertOrModify"],"modify").set("data",Object(i.fromJS)(a.receivedData)).setIn(["data","paymentList"],n).setIn(["data","jtAmount"],t)})),Object(c.a)(t,f.SFZC_SAVE_AND_NEW,(function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),c=a.receivedData.propertyTax,o=a.receivedData.acTax.beAccrued,s=(a.receivedData.acTax.beInAdvance,""),u="";return"SX_GRSF"!=c&&"SX_ZZS"!=c||(s="STATE_SF_JN",u=Object(g.h)(s,Object(i.fromJS)(a.receivedData))),o||"SX_QTSF"!=c&&"SX_QYSDS"!=c||(s="STATE_SF_JN",u=Object(g.h)(s,Object(i.fromJS)(a.receivedData))),A.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","runningState"],s).setIn(["data","runningAbstract"],u)})),t)[a.type]||function(){return e})()}var T={changeSfzcData:function(t,e){return{type:f.CHANGE_SFZC_DATA,dataType:t,value:e}},changeSfzcRunningState:function(t,e){return{type:f.CHANGE_SFZC_RUNNING_STATE,propertyTax:t,key:e}},changeSfzcAssList:function(t,e,a){return{type:f.CHANGE_SFZC_ASSLIST,value:e,idx:t,acType:a}},changeSfzcAccount:function(t){return{type:f.CHANGE_SFZC_ACCOUNT,value:t}},getSfzcPaymentList:function(t){return function(e,a){var n=a().sfzcAccountState,r=n.getIn(["data","categoryUuid"]),c=n.getIn(["data","runningDate"]),i=n.getIn(["data","acTax"]),_=i.get("accruedAc"),g=(_.size&&_.getIn([0,"assCategoryList"]),i.get("accruedList"),i.get("payAc")),A=(g.size&&g.getIn([0,"assCategoryList"]),i.get("payList"),t?_.getIn([0,"acId"]):g.getIn([0,"acId"])),l=t?"getPaymentTaxInfo":"getBusinessVATInfo";d.a.toast.loading(s.p,0),Object(o.a)(l,"POST",JSON.stringify({categoryUuid:r,runningDate:c,acId:A,assId1:"",assCategory1:"",assId2:"",assCategory2:""}),(function(a){d.a.toast.hide(),Object(u.u)(a)&&e({type:f.GET_SFZC_PAYMENTLIST,receivedData:a.data.resultList,isQtsf:t})})),t||Object(o.a)("getPaymentTaxInfo","POST",JSON.stringify({categoryUuid:r,runningDate:c,acId:A,assId1:"",assCategory1:"",assId2:"",assCategory2:""}),(function(t){Object(u.u)(t)&&e(T.changeSfzcData("deductedAmount",t.data.result.amount))}))}},saveRunningbusiness:function(t){return function(e,a){var c=a().homeAccountState,g=c.get("enclosureList").toJS(),A=c.get("needDeleteUrl").toJS(),l=g.concat(A),f=a().sfzcAccountState,C=f.get("data").toJS(),S=C.propertyTax,L=C.runningState,E=C.accountUuid,m=C.amount,I=C.acTax.beAccrued,y=C.jtAmount,b=C.handleAmount,p=C.offsetAmount,O=C.reduceAmount,v=Number(p)+Number(b)+Number(O);if(""==C.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(C.runningAbstract.length>s.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(s.y,"\u4e2a\u5b57\u7b26"));if(""==L)return d.a.toast.info("\u8bf7\u9009\u62e9\u6d41\u6c34\u72b6\u6001");switch(S){case"SX_ZZS":if("STATE_SF_JN"==L&&v<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if("STATE_SF_YJZZS"==L&&m<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(b>0&&""==E)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");if("STATE_SF_JN"==L&&v>y)return d.a.toast.info("\u5904\u7406\u7a0e\u8d39\u4e0d\u80fd\u5927\u4e8e\u5f85\u5904\u7406\u7a0e\u8d39");break;case"SX_QTSF":case"SX_QYSDS":if("STATE_SF_JT"==L&&m<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if("STATE_SF_JN"==L){if(Number(m)+Number(O)<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(m>0&&""==E)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237")}break;case"SX_GRSF":if(m<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(""==E)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");break;default:console.log("\u6821\u9a8c\u7a0e\u8d39\u652f\u51fa\u51fa\u9519")}var N=a().homeAccountState.get("project").toJS(),G=N.usedProject,Y=N.projectCard,R=!1;if("SX_QYSDS"!=S&&"SX_QTSF"!=S||("STATE_SF_JT"==L||!I&&"STATE_SF_JN"==L)&&(R=!0),G&&R){var D=[],j=!1;if(!Y.every((function(t){return D.push(t.uuid),t.amount<=0&&(j=!0),t.uuid})))return d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");if(j)return d.a.toast.info("\u9879\u76ee\u5361\u7247\u6709\u672a\u586b\u5199\u7684\u91d1\u989d");if(Object(r.a)(new Set(D)).length<D.length)return d.a.toast.info("\u6709\u91cd\u590d\u7684\u9879\u76ee\u5361\u7247")}var Z=!1;if(I&&"SX_GRSF"!=S&&"STATE_SF_JN"==L&&(Z=!0,!C.paymentList.some((function(t){return t.beSelect}))))return d.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u5904\u7406\u7684\u6d41\u6c34");var h="modifyRunningbusiness",F="insert"===f.getIn(["views","insertOrModify"]);F&&(delete C.uuid,delete C.parentUuid,h="insertTax"),d.a.toast.loading(s.p,0),Object(o.a)(h,"POST",JSON.stringify(Object(n.a)({},C,{usedProject:G,projectCard:Y,enclosureList:l})),(function(a){if(d.a.toast.hide(),Object(u.u)(a))if(d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=C.categoryUuid;e(T.getCardDetail(n)),e(_.b.changeLrlsData(["project","projectCard"],Object(i.fromJS)([{amount:""}]))),e(_.b.changeLrlsEnclosureList())}else{if(Z){var r=F?a.data.uuid:C.uuid;e(T.getYlSfzcState(r))}e(T.afterSfzcSave(a.data,t,F))}}))}},paymentListBeSelect:function(t,e){return{type:f.PAYMENTLIST_BESELECT,value:e,idx:t}},paymentListBeAllCheck:function(t){return{type:f.PAYMENTLIST_BEALLCHECK,value:t}},afterSfzcSave:function(t,e,a){return{type:f.AFTER_SFZC_SAVE,data:t,saveAndNew:e,isInsert:a}},getYlSfzcState:function(t,e){return function(e){d.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(o.a)("getRunningBusiness","GET","uuid=".concat(t),(function(t){d.a.toast.hide(),Object(u.u)(t)&&e({type:f.GET_YL_SFZCSTATE,receivedData:t.data.result})}))}},getCardDetail:function(t){return function(e){d.a.toast.loading(s.p,0),Object(o.a)("getRunningDetail","GET","uuid=".concat(t),(function(t){if(d.a.toast.hide(),Object(u.u)(t)){var a=t.data.result;delete a.parentUuid,e({type:f.SFZC_SAVE_AND_NEW,receivedData:a}),"SX_ZZS"==a.propertyTax&&e(T.getSfzcPaymentList())}}))}}},f={GET_LB_SFZC_CARD_DETAIL:"GET_LB_SFZC_CARD_DETAIL",GET_LB_SFZC_FROM_YLLS:"GET_LB_SFZC_FROM_YLLS",CHANGE_SFZC_DATA:"CHANGE_SFZC_DATA",CHANGE_SFZC_RUNNING_STATE:"CHANGE_SFZC_RUNNING_STATE",CHANGE_SFZC_ASSLIST:"CHANGE_SFZC_ASSLIST",CHANGE_SFZC_ACCOUNT:"CHANGE_SFZC_ACCOUNT",AFTER_SFZC_SAVE:"AFTER_SFZC_SAVE",GET_SFZC_PAYMENTLIST:"GET_SFZC_PAYMENTLIST",PAYMENTLIST_BESELECT:"PAYMENTLIST_BESELECT",PAYMENTLIST_BEALLCHECK:"PAYMENTLIST_BEALLCHECK",GET_YL_SFZCSTATE:"GET_YL_SFZCSTATE",SFZC_SAVE_AND_NEW:"SFZC_SAVE_AND_NEW"}},1169:function(t,e,a){"use strict";a.d(e,"a",(function(){return A})),a.d(e,"b",(function(){return T}));a(32),a(223),a(61),a(166),a(31),a(70),a(77),a(29),a(1035),a(1029),a(82),a(76),a(1030);var n=a(51),r=a(220),c=a(4),i=a(1),o=a(57),s=a(14),u=a(12),d=(a(1037),a(2)),_=a(1022),g=Object(i.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_JZCB",lsCategoryName:"\u8d27\u7269\u6210\u672c\u7ed3\u8f6c",categoryName:"\u8bf7\u9009\u62e9\u6d41\u6c34\u7c7b\u522b",categoryUuid:"",runningDate:"",runningAbstract:"\u9500\u552e\u5b58\u8d27\u7ed3\u8f6c\u6210\u672c",runningState:"STATE_YYSR_XS",carryoverBusinessUuid:"",totalAmount:"",stockCardRange:[{}]},hxList:[],stockCardList:[],yysrCategory:[]});function A(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(c.a)(t,l.GET_LB_JZCB_CARD_DETAIL,(function(){var t=a.value.split(s.B);return g.setIn(["data","categoryUuid"],t[0]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["views","insertOrModify"],"insert")})),Object(c.a)(t,l.GET_LB_JZCB_FROM_YLLS,(function(){var t=0,n=a.state.getIn(["data","businessList"]).update((function(e){return e.map((function(e){return t+=e.get("amount"),e.set("isCheck",!0)}))})),r="LX_JZCB"==a.state.getIn(["data","runningType"])?"STATE_YYSR_XS":"STATE_YYSR_TS";return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("hxList",n).setIn(["data","totalAmount"],t).setIn(["data","lsCategoryName"],"\u8d27\u7269\u6210\u672c\u7ed3\u8f6c").setIn(["data","runningState"],r).setIn(["data","runningDate"],a.state.getIn(["data","runningDate"])).setIn(["data","runningAbstract"],a.state.getIn(["data","runningAbstract"])).setIn(["data","stockCardRange"],a.state.getIn(["data","acBusinessIncome","stockCardList"])).setIn(["data","carryoverBusinessUuid"],a.state.getIn(["data","uuid"]))})),Object(c.a)(t,l.CHANGE_JZCB_RUNNING_STATE,(function(){var t="STATE_YYSR_XS"==a.key?"\u9500\u552e\u5b58\u8d27\u7ed3\u8f6c\u6210\u672c":"\u9500\u8d27\u9000\u56de\u7ed3\u8f6c\u6210\u672c";return e.setIn(["data","runningState"],a.key).setIn(["data","runningAbstract"],t)})),Object(c.a)(t,l.CHANGE_JZCB_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(c.a)(t,l.GET_JZCB_LIST,(function(){return e=e.set("hxList",Object(i.fromJS)(a.receivedData))})),Object(c.a)(t,l.JZCB_HXLIST_BECHECK,(function(){if(e=e.setIn(["hxList",a.idx,"isCheck"],a.value),!a.value){var t=e.getIn(["data","stockCardRange"]),n=e.get("hxList");t.forEach((function(t,r){var c=!1;n.forEach((function(e){e.get("isCheck")&&e.get("stockCardUuid")==t.get("uuid")&&(c=!0)})),c||(e=e.setIn(["data","stockCardRange",a.idx,"amount"],""))}))}return e})),Object(c.a)(t,l.JZCB_HXLIST_BEALLCHECK,(function(){return e.update("hxList",(function(t){return t.map((function(t){return t.set("isCheck",a.value)}))}))})),Object(c.a)(t,l.AFTER_JZCB_SAVE,(function(){if(a.saveAndNew){var t=e.getIn(["data","runningDate"]);e=g.setIn(["data","runningDate"],t)}else e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","carryoverBusinessUuid"],a.data.result);return e})),Object(c.a)(t,l.GET_JZCB_CARDLIST,(function(){var t=[];return a.receivedData.forEach((function(e){t.push({key:"".concat(e.code," ").concat(e.name),value:"".concat(e.uuid).concat(s.B).concat(e.code).concat(s.B).concat(e.name)})})),e.set("stockCardList",Object(i.fromJS)(t)).set("hxList",Object(i.fromJS)([])).setIn(["data","stockCardRange"],Object(i.fromJS)([{}]))})),Object(c.a)(t,l.CHANGE_JZCB_CARD,(function(){switch(a.dataType){case"card":var t=a.value.split(s.B);e=e.setIn(["data","stockCardRange",a.idx],Object(i.fromJS)({uuid:t[0],code:t[1],name:t[2],amount:""}));break;case"amount":e=e.setIn(["data","stockCardRange",a.idx,"amount"],a.value);break;case"add":e=e.setIn(["data","stockCardRange",a.idx],Object(i.fromJS)({amount:""}));break;case"delete":e=e.deleteIn(["data","stockCardRange",a.idx])}return e})),t)[a.type]||function(){return e})()}var l={GET_LB_JZCB_CARD_DETAIL:"GET_LB_JZCB_CARD_DETAIL",GET_LB_JZCB_FROM_YLLS:"GET_LB_JZCB_FROM_YLLS",CHANGE_JZCB_RUNNING_STATE:"CHANGE_JZCB_RUNNING_STATE",CHANGE_JZCB_DATA:"CHANGE_JZCB_DATA",AFTER_JZCB_SAVE:"AFTER_JZCB_SAVE",GET_JZCB_LIST:"GET_JZCB_LIST",JZCB_HXLIST_BECHECK:"JZCB_HXLIST_BECHECK",JZCB_HXLIST_BEALLCHECK:"JZCB_HXLIST_BEALLCHECK",GET_JZCB_CARDLIST:"GET_JZCB_CARDLIST",CHANGE_JZCB_CARD:"CHANGE_JZCB_CARD"},T={changeJzcbRunningState:function(t){return{type:l.CHANGE_JZCB_RUNNING_STATE,key:t}},changeJzcbData:function(t,e){return{type:l.CHANGE_JZCB_DATA,dataType:t,value:e}},getJzcbCardList:function(){return function(t,e){var a=e().jzcbAccountState.get("data"),n=a.get("runningDate"),r=a.get("runningState");n&&r&&(d.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(o.a)("getCostStock","POST",JSON.stringify({runningDate:n,runningState:r}),(function(e){d.a.toast.hide(),Object(u.u)(e)&&t({type:l.GET_JZCB_CARDLIST,receivedData:e.data.result})})))}},changeJzcbCard:function(t,e,a){return{type:l.CHANGE_JZCB_CARD,dataType:t,value:e,idx:a}},getJzcbList:function(){return function(t,e){var a=e().jzcbAccountState.get("data"),n=a.get("runningDate"),r=a.get("runningState"),c=a.get("stockCardRange").map((function(t){return t.get("uuid")}));n&&r&&(d.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(o.a)("getCarryoverList","POST",JSON.stringify({runningDate:n,runningState:r,cardUuidList:c}),(function(e){d.a.toast.hide(),Object(u.u)(e)&&t({type:l.GET_JZCB_LIST,receivedData:e.data.result})})))}},jzcbHxListBeCheck:function(t,e){return{type:l.JZCB_HXLIST_BECHECK,idx:t,value:e}},jzcbHxListBeAllCheck:function(t){return{type:l.JZCB_HXLIST_BEALLCHECK,value:t}},saveRunningbusiness:function(t){return function(e,a){var c=a().homeAccountState,i=c.get("enclosureList").toJS(),g=c.get("needDeleteUrl").toJS(),A=i.concat(g),l=a().jzcbAccountState,f="insert"===l.getIn(["views","insertOrModify"])?"insertCarryoverItem":"modifyCarryoverItem",C=l.get("data").toJS(),S=[],L=!1;if(l.get("hxList").forEach((function(t){t.get("isCheck")&&(L=!0,S.push(t.get("uuid")))})),""==C.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(C.runningAbstract.length>s.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(s.y,"\u4e2a\u5b57\u7b26"));if(!L)return d.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u6838\u7b97\u7684\u5217\u8868");var E=[],m=!1,I=[];return C.stockCardRange.every((function(t,e){return E.push(t.uuid),t.amount<=0?m=!0:I.push({uuid:t.uuid,amount:t.amount}),t.uuid}))?m?d.a.toast.info("\u6709\u672a\u586b\u5199\u7684\u6210\u672c\u91d1\u989d"):Object(r.a)(new Set(E)).length<E.length?d.a.toast.info("\u6709\u91cd\u590d\u7684\u5b58\u8d27\u5361\u7247"):(d.a.toast.loading(s.p,0),void Object(o.a)(f,"POST",JSON.stringify(Object(n.a)({},C,{uuidList:S,cardList:I,enclosureList:A})),(function(a){d.a.toast.hide(),Object(u.u)(a)&&(e(T.afterJzcbSave(a.data,t)),t&&e(_.b.changeLrlsEnclosureList()))}))):d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u5b58\u8d27\u5361\u7247")}},afterJzcbSave:function(t,e){return{type:l.AFTER_JZCB_SAVE,data:t,saveAndNew:e}}}},1170:function(t,e,a){"use strict";a.d(e,"a",(function(){return g})),a.d(e,"b",(function(){return l}));a(32),a(61),a(31),a(29),a(82),a(76);var n=a(51),r=a(4),c=a(1),i=a(57),o=a(14),s=a(12),u=(a(1037),a(2)),d=a(1022),_=Object(c.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_FPRZ",categoryName:"\u53d1\u7968\u8ba4\u8bc1",categoryUuid:"",runningDate:"",runningAbstract:"\u589e\u503c\u7a0e\u4e13\u7528\u53d1\u7968\u8ba4\u8bc1",billAuthType:"BILL_AUTH_TYPE_CG",authBusinessUuid:"",totalAmount:""},hxList:[]});function g(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(r.a)(t,A.GET_LB_FPRZ_CARD_DETAIL,(function(){var t=a.value.split(o.B);return _.setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["views","insertOrModify"],"insert")})),Object(r.a)(t,A.GET_LB_FPRZ_FROM_YLLS,(function(){var t=a.state.getIn(["data","businessList"]).update((function(t){return t.map((function(t){return t.set("isCheck",!0)}))})),n="STATE_FPRZ_CG"==a.state.getIn(["data","runningState"])?"BILL_AUTH_TYPE_CG":"BILL_AUTH_TYPE_TG";return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data")).set("hxList",t).setIn(["data","totalAmount"],a.state.getIn(["data","tax"])).setIn(["data","billAuthType"],n)})),Object(r.a)(t,A.CHANGE_FPRZ_RUNNING_STATE,(function(){var t="BILL_AUTH_TYPE_CG"==a.key?"\u589e\u503c\u7a0e\u4e13\u7528\u53d1\u7968\u8ba4\u8bc1":"\u9000\u8d2d\u7ea2\u5b57\u53d1\u7968\u8ba4\u8bc1";return e.setIn(["data","billAuthType"],a.key).setIn(["data","runningAbstract"],t)})),Object(r.a)(t,A.CHANGE_FPRZ_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(r.a)(t,A.GET_FPRZ_LIST,(function(){return e=e.set("hxList",Object(c.fromJS)(a.receivedData))})),Object(r.a)(t,A.FPRZ_HXLIST_BECHECK,(function(){return e.setIn(["hxList",a.idx,"isCheck"],a.value)})),Object(r.a)(t,A.FPRZ_HXLIST_BEALLCHECK,(function(){return e.update("hxList",(function(t){return t.map((function(t){return t.set("isCheck",a.value)}))}))})),Object(r.a)(t,A.AFTER_FPRZ_SAVE,(function(){if(a.saveAndNew){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);e=_.setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r)}else e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","authBusinessUuid"],a.data.result);return e})),t)[a.type]||function(){return e})()}var A={GET_LB_FPRZ_CARD_DETAIL:"GET_LB_FPRZ_CARD_DETAIL",GET_LB_FPRZ_FROM_YLLS:"GET_LB_FPRZ_FROM_YLLS",CHANGE_FPRZ_RUNNING_STATE:"CHANGE_FPRZ_RUNNING_STATE",CHANGE_FPRZ_DATA:"CHANGE_FPRZ_DATA",GET_FPRZ_LIST:"GET_FPRZ_LIST",FPRZ_HXLIST_BECHECK:"FPRZ_HXLIST_BECHECK",FPRZ_HXLIST_BEALLCHECK:"FPRZ_HXLIST_BEALLCHECK",AFTER_FPRZ_SAVE:"AFTER_FPRZ_SAVE"},l={changeFprzRunningState:function(t){return{type:A.CHANGE_FPRZ_RUNNING_STATE,key:t}},changeFprzData:function(t,e){return{type:A.CHANGE_FPRZ_DATA,dataType:t,value:e}},getFprzList:function(){return function(t,e){var a=e().fprzAccountState.get("data"),n=a.get("runningDate"),r=a.get("billAuthType");n&&r&&(u.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(i.a)("getBusinessAuthList","POST",JSON.stringify({runningDate:n,billAuthType:r}),(function(e){u.a.toast.hide(),Object(s.u)(e)&&t({type:A.GET_FPRZ_LIST,receivedData:e.data.result})})))}},fprzHxListBeCheck:function(t,e){return{type:A.FPRZ_HXLIST_BECHECK,idx:t,value:e}},fprzHxListBeAllCheck:function(t){return{type:A.FPRZ_HXLIST_BEALLCHECK,value:t}},saveRunningbusiness:function(t){return function(e,a){var r=a().homeAccountState,c=r.get("enclosureList").toJS(),s=r.get("needDeleteUrl").toJS(),_=c.concat(s),g=a().fprzAccountState,A="insert"===g.getIn(["views","insertOrModify"])?"insertBusinessAuthItem":"modifyBusinessAuthItem",T=[],f=!1;g.get("hxList").forEach((function(t){t.get("isCheck")&&(f=!0,T.push(t.get("uuid")))}));var C=g.get("data").toJS();return""==C.billAuthType?u.a.toast.info("\u8bf7\u9009\u62e9\u6d41\u6c34\u72b6\u6001"):""==C.runningAbstract?u.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981"):C.runningAbstract.length>o.y?u.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(o.y,"\u4e2a\u5b57\u7b26")):f?(u.a.toast.loading(o.p,0),void Object(i.a)(A,"POST",JSON.stringify(Object(n.a)({},C,{uuidList:T,enclosureList:_})),(function(a){u.a.toast.hide(),0!==a.code?u.a.toast.fail("".concat(a.code," ").concat(a.message)):(u.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),e(l.afterFprzSave(a.data,t)),t&&e(d.b.changeLrlsEnclosureList()))}))):u.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u8ba4\u8bc1\u7684\u5217\u8868")}},afterFprzSave:function(t,e){return{type:A.AFTER_FPRZ_SAVE,data:t,saveAndNew:e}}}},1171:function(t,e,a){"use strict";a.d(e,"a",(function(){return g})),a.d(e,"b",(function(){return l}));a(32),a(61),a(31),a(29),a(82),a(76);var n=a(51),r=a(4),c=a(1),i=a(57),o=a(14),s=a(12),u=(a(1037),a(2)),d=a(1022),_=Object(c.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_KJFP",categoryName:"\u5f00\u5177\u53d1\u7968",categoryUuid:"",runningDate:"",runningAbstract:"\u6536\u5165\u5f00\u5177\u53d1\u7968",billMakeOutType:"BILL_MAKE_OUT_TYPE_XS",makeOutBusinessUuid:"",totalAmount:""},hxList:[]});function g(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(r.a)(t,A.GET_LB_KJFP_CARD_DETAIL,(function(){var t=a.value.split(o.B);return _.setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["views","insertOrModify"],"insert")})),Object(r.a)(t,A.GET_LB_KJFP_FROM_YLLS,(function(){var t=a.state.getIn(["data","businessList"]).update((function(t){return t.map((function(t){return t.set("isCheck",!0)}))})),n="STATE_KJFP_XS"==a.state.getIn(["data","runningState"])?"BILL_MAKE_OUT_TYPE_XS":"BILL_MAKE_OUT_TYPE_TS";return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data")).set("hxList",t).setIn(["data","totalAmount"],a.state.getIn(["data","tax"])).setIn(["data","billMakeOutType"],n).setIn(["data","makeOutBusinessUuid"],a.state.getIn(["data","uuid"]))})),Object(r.a)(t,A.CHANGE_KJFP_RUNNING_STATE,(function(){var t="BILL_MAKE_OUT_TYPE_XS"==a.key?"\u6536\u5165\u5f00\u5177\u53d1\u7968":"\u9000\u9500\u5f00\u5177\u7ea2\u5b57\u53d1\u7968";return e.setIn(["data","billMakeOutType"],a.key).setIn(["data","runningAbstract"],t)})),Object(r.a)(t,A.CHANGE_KJFP_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(r.a)(t,A.GET_KJFP_LIST,(function(){return e=e.set("hxList",Object(c.fromJS)(a.receivedData))})),Object(r.a)(t,A.KJFP_HXLIST_BECHECK,(function(){return e.setIn(["hxList",a.idx,"isCheck"],a.value)})),Object(r.a)(t,A.KJFP_HXLIST_BEALLCHECK,(function(){return e.update("hxList",(function(t){return t.map((function(t){return t.set("isCheck",a.value)}))}))})),Object(r.a)(t,A.AFTER_KJFP_SAVE,(function(){if(a.saveAndNew){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);e=_.setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r)}else e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","makeOutBusinessUuid"],a.data.result);return e})),t)[a.type]||function(){return e})()}var A={GET_LB_KJFP_CARD_DETAIL:"GET_LB_KJFP_CARD_DETAIL",GET_LB_KJFP_FROM_YLLS:"GET_LB_KJFP_FROM_YLLS",CHANGE_KJFP_RUNNING_STATE:"CHANGE_KJFP_RUNNING_STATE",CHANGE_KJFP_DATA:"CHANGE_KJFP_DATA",GET_KJFP_LIST:"GET_KJFP_LIST",KJFP_HXLIST_BECHECK:"KJFP_HXLIST_BECHECK",KJFP_HXLIST_BEALLCHECK:"KJFP_HXLIST_BEALLCHECK",AFTER_KJFP_SAVE:"AFTER_KJFP_SAVE"},l={changeKjfpRunningState:function(t){return{type:A.CHANGE_KJFP_RUNNING_STATE,key:t}},changeKjfpData:function(t,e){return{type:A.CHANGE_KJFP_DATA,dataType:t,value:e}},getKjfpList:function(){return function(t,e){var a=e().kjfpAccountState.get("data"),n=a.get("runningDate"),r=a.get("billMakeOutType");n&&r&&(u.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(i.a)("getBusinessMakeoutList","POST",JSON.stringify({runningDate:n,billMakeOutType:r}),(function(e){u.a.toast.hide(),Object(s.u)(e)&&t({type:A.GET_KJFP_LIST,receivedData:e.data.result})})))}},kjfpHxListBeCheck:function(t,e){return{type:A.KJFP_HXLIST_BECHECK,idx:t,value:e}},kjfpHxListBeAllCheck:function(t){return{type:A.KJFP_HXLIST_BEALLCHECK,value:t}},saveRunningbusiness:function(t){return function(e,a){var r=a().homeAccountState,c=r.get("enclosureList").toJS(),s=r.get("needDeleteUrl").toJS(),_=c.concat(s),g=a().kjfpAccountState,A="insert"===g.getIn(["views","insertOrModify"])?"insertBusinessMakeoutItem":"modifyBusinessMakeoutItem",T=[],f=!1;g.get("hxList").forEach((function(t){t.get("isCheck")&&(f=!0,T.push(t.get("uuid")))}));var C=g.get("data").toJS();return""==C.billMakeOutType?u.a.toast.info("\u8bf7\u9009\u62e9\u6d41\u6c34\u72b6\u6001"):""==C.runningAbstract?u.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981"):C.runningAbstract.length>o.y?u.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(o.y,"\u4e2a\u5b57\u7b26")):f?(u.a.toast.loading(o.p,0),void Object(i.a)(A,"POST",JSON.stringify(Object(n.a)({},C,{uuidList:T,enclosureList:_})),(function(a){u.a.toast.hide(),0!==a.code?u.a.toast.fail("".concat(a.code," ").concat(a.message)):(u.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),e(l.afterKjfpSave(a.data,t)),t&&e(d.b.changeLrlsEnclosureList()))}))):u.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u5f00\u5177\u53d1\u7968\u7684\u5217\u8868")}},afterKjfpSave:function(t,e){return{type:A.AFTER_KJFP_SAVE,data:t,saveAndNew:e}}}},1211:function(t,e,a){"use strict";a.d(e,"a",(function(){return A})),a.d(e,"b",(function(){return l}));a(32),a(223),a(61),a(166),a(70),a(77),a(29),a(1035),a(1029),a(82),a(76),a(1030);var n=a(51),r=a(220),c=a(4),i=a(1),o=a(57),s=a(14),u=a(12),d=a(1022),_=a(2),g=Object(i.fromJS)({views:{insertOrModify:"insert",fromYl:!1},data:{categoryType:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_YYSR_XS",accountName:"",accountUuid:"",currentAmount:"",beCarryover:!1,carryoverAmount:"",billType:"bill_other",billStates:"bill_states_not_make_out",billAssList:[],billAcList:[],taxRate:3,tax:"",offsetAmount:"",paymentList:[],beProject:!1,acBusinessIncome:{incomeAc:[],incomeList:[],receivablesAc:[],receivablesList:[],inAdvanceAc:[],inAdvanceList:[],stockAc:[],stockList:[],carryoverAc:[],carryoverList:[],beManagemented:!1,beDeposited:!1,beCarryover:!1,beSellOff:!1,stockCardList:[],carryoverCardList:[],contactsCardRange:{uuid:"",code:"",name:""}}},preData:{preAmount:0,receiveAmount:0},stockCardList:[],contactsCardList:[]});function A(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(c.a)(t,T.GET_LB_YYSR_CARD_DETAIL,(function(){var t=a.value.split(s.B),e=a.data.get("amount"),n=e-e/(1+g.getIn(["data","taxRate"])/100),r="\u9500\u552e".concat("SX_HW"===a.receivedData.propertyCarryover?"\u5b58\u8d27":"","\u6536\u5165");return g.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).set("preData",g.get("preData")).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","accountName"],a.data.get("accountName")).setIn(["data","accountUuid"],a.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["data","tax"],Object(u.l)(n)).setIn(["data","runningAbstract"],r).setIn(["views","insertOrModify"],"insert").setIn(["data","acBusinessIncome","carryoverCardList"],Object(i.fromJS)([{amount:""}]))})),Object(c.a)(t,T.GET_LB_YYSR_FROM_YLLS,(function(){var t=Math.abs(a.state.getIn(["data","amount"]))==Math.abs(a.state.getIn(["data","currentAmount"]));return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data")).set("preData",a.state.get("preData")).setIn(["data","acBusinessIncome","carryoverCardList"],Object(i.fromJS)([{amount:""}])).setIn(["data","isFullPayment"],t)})),Object(c.a)(t,T.CHANGE_RUNNING_STATE,(function(){return e.setIn(["data","runningState"],a.key).setIn(["data","acBusinessIncome","contactsCardRange"],null)})),Object(c.a)(t,T.CHANGE_YYSR_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(c.a)(t,T.CHANGE_ACLIST,(function(){var t=a.value.split(s.B),n={};return n.uuid=t[0],n.code=t[1],n.name=t[2],e.setIn(["data","acBusinessIncome",a.acType],Object(i.fromJS)(n))})),Object(c.a)(t,T.CHANGE_AMOUNT,(function(){var t=e.getIn(["data","taxRate"]),n=a.value,r=n-n/(1+t/100);return e.setIn(["data","amount"],n).setIn(["data","tax"],Object(u.l)(r))})),Object(c.a)(t,T.CHANGE_ACCOUNT,(function(){var t=a.value.split(s.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(c.a)(t,T.CHANGE_TAXRATE,(function(){var t,n=e.getIn(["data","amount"]),r=a.value;return t=n-n/(1+r/100),e.setIn(["data","taxRate"],r).setIn(["data","tax"],Object(u.l)(t))})),Object(c.a)(t,T.CHANGE_BILLSTATES,(function(){var t=e.getIn(["data","billStates"]),a="";return({bill_states_not_make_out:function(){return a="bill_states_make_out"},bill_states_make_out:function(){return a="bill_states_not_make_out"}}[t]||function(){return null})(),e.setIn(["data","billStates"],a).setIn(["data","billAssList"],Object(i.fromJS)([])).setIn(["data","billAcList"],Object(i.fromJS)([]))})),Object(c.a)(t,T.AFTER_LRACCOUNT_SAVE,(function(){return a.saveAndNew?e=g:(a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber)),e})),Object(c.a)(t,T.GET_YYSR_PREAMOUNT,(function(){return e.setIn(["preData","preAmount"],a.data.preAmount).setIn(["preData","receiveAmount"],a.data.amount)})),Object(c.a)(t,T.GET_YYSR_CARDLIST,(function(){var t=[];return a.data.forEach((function(e){t.push({key:"".concat(e.code," ").concat(e.name),value:"".concat(e.uuid).concat(s.B).concat(e.code).concat(s.B).concat(e.name)})})),e="stockRange"===a.cardType?e.set("stockCardList",Object(i.fromJS)(t)):e.set("contactsCardList",Object(i.fromJS)(t))})),Object(c.a)(t,T.YYSR_SAVE_AND_NEW,(function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),c="\u9500\u552e".concat("SX_HW"===a.receivedData.propertyCarryover?"\u5b58\u8d27":"","\u6536\u5165");return g.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],c).setIn(["data","acBusinessIncome","carryoverCardList"],Object(i.fromJS)([{amount:""}]))})),Object(c.a)(t,T.CHANGE_YYSR_STOCKCARD,(function(){switch(a.dataType){case"card":var t=a.value.split(s.B),n=e.getIn(["data","acBusinessIncome","stockCardList",a.idx,"amount"]);e=e.setIn(["data","acBusinessIncome","stockCardList",a.idx],Object(i.fromJS)({uuid:t[0],code:t[1],name:t[2],amount:n})).setIn(["data","acBusinessIncome","carryoverCardList",a.idx],Object(i.fromJS)({uuid:t[0],code:t[1],name:t[2]}));break;case"amount":e=e.setIn(["data","acBusinessIncome","stockCardList",a.idx,"amount"],a.value);break;case"add":e=e.setIn(["data","acBusinessIncome","stockCardList",a.idx],Object(i.fromJS)({amount:""})).setIn(["data","acBusinessIncome","carryoverCardList",a.idx],Object(i.fromJS)({amount:""}));break;case"delete":e=e.deleteIn(["data","acBusinessIncome","stockCardList",a.idx]).deleteIn(["data","acBusinessIncome","carryoverCardList",a.idx]);break;case"carryoverCardList":e=e.setIn(["data","acBusinessIncome","carryoverCardList",a.idx,"amount"],a.value)}return e})),t)[a.type]||function(){return e})()}var l={changeRunningState:function(t){return{type:T.CHANGE_RUNNING_STATE,key:t}},changeYysrData:function(t,e){return{type:T.CHANGE_YYSR_DATA,dataType:t,value:e}},changeAcList:function(t,e){return{type:T.CHANGE_ACLIST,value:t,acType:e}},changeAmount:function(t){return{type:T.CHANGE_AMOUNT,value:t}},changeAccount:function(t){return{type:T.CHANGE_ACCOUNT,value:t}},changeTaxRate:function(t){return{type:T.CHANGE_TAXRATE,value:t}},changeBillStates:function(){return{type:T.CHANGE_BILLSTATES}},saveRunningbusiness:function(t){return function(e,a){var c=a().yysrAccountState,u=a().homeAccountState,g=u.get("enclosureList").toJS(),A=u.get("needDeleteUrl").toJS(),T=g.concat(A),f=c.get("data").toJS(),C=f.runningState,S=f.acBusinessIncome.beManagemented,L="SX_HW"===f.propertyCarryover,E=f.beCarryover,m="insert"===c.getIn(["views","insertOrModify"]),I=f.amount;if(I<=0)return _.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(""==f.runningAbstract)return _.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(f.runningAbstract.length>s.y)return _.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(s.y,"\u4e2a\u5b57\u7b26"));var y=a().homeAccountState.get("project").toJS(),b=y.usedProject,p=y.projectCard;if(b&&"STATE_YYSR_DJ"!=C){var O=[],v=!1;if(!p.every((function(t){return O.push(t.uuid),t.amount<=0&&(v=!0),t.uuid})))return _.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");if(!L&&v)return _.a.toast.info("\u9879\u76ee\u5361\u7247\u6709\u672a\u586b\u5199\u7684\u91d1\u989d");if(Object(r.a)(new Set(O)).length<O.length)return _.a.toast.info("\u6709\u91cd\u590d\u7684\u9879\u76ee\u5361\u7247")}if(S){var N=f.acBusinessIncome.contactsCardRange;if(!N||""==N.uuid)return _.a.toast.info("\u8bf7\u9009\u62e9\u5f80\u6765\u5355\u4f4d")}else if(""==f.accountUuid)return _.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");if("STATE_YYSR_DJ"!=C&&L){var G=f.acBusinessIncome.stockCardList,Y=f.acBusinessIncome.carryoverCardList,R=[],D=!1,j=!1;if(!G.every((function(t,e){return R.push(t.uuid),t.amount<=0&&(D=!0),m&&E&&Y[e].amount<=0&&(j=!0),t.uuid})))return _.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u5b58\u8d27\u5361\u7247");if(D)return _.a.toast.info("\u5b58\u8d27\u5361\u7247\u6709\u672a\u586b\u5199\u7684\u91d1\u989d");if(Object(r.a)(new Set(R)).length<R.length)return _.a.toast.info("\u6709\u91cd\u590d\u7684\u5b58\u8d27\u5361\u7247");if(f.beCarryover&&j)return _.a.toast.info("\u6709\u672a\u586b\u5199\u7684\u6210\u672c\u91d1\u989d")}if("STATE_YYSR_DJ"===C){if(I=-I,""==f.accountUuid)return _.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237")}else{if(f.currentAmount>0&&""==f.accountUuid)return _.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");if(m&&Number(f.currentAmount)+Number(f.offsetAmount)>I)return _.a.toast.info("\u672c\u6b21\u6536(\u4ed8)\u6b3e\u91d1\u989d+\u9884\u6536(\u4ed8)\u62b5\u6263\u4e0d\u53ef\u5927\u4e8e\u603b\u91d1\u989d")}var Z="modifyRunningbusiness";m&&(delete f.uuid,delete f.parentUuid,Z="insertIncome"),_.a.toast.loading(s.p,0),Object(o.a)(Z,"POST",JSON.stringify(Object(n.a)({},f,{amount:I,usedProject:b,projectCard:p,enclosureList:T})),(function(a){if(_.a.toast.hide(),0!==a.code)_.a.toast.fail("".concat(a.code," ").concat(a.message));else if(_.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=f.categoryUuid;e(l.getCardDetail(n)),e(d.b.changeLrlsData(["project","projectCard"],Object(i.fromJS)([{amount:""}]))),e(d.b.changeLrlsEnclosureList())}else e(l.afterLrAccountSave(a.data,t,m))}))}},afterLrAccountSave:function(t,e,a){return{type:T.AFTER_LRACCOUNT_SAVE,data:t,saveAndNew:e,isInsert:a}},getYysrPreAmount:function(){return function(t,e){var a=e().yysrAccountState,n=a.getIn(["data","categoryUuid"]),r=a.getIn(["data","runningDate"]),c=a.getIn(["data","acBusinessIncome","contactsCardRange","uuid"]);_.a.toast.loading(s.p,0),Object(o.a)("getRunningAccountInfo","POST",JSON.stringify({categoryUuid:n,runningDate:r,cardUuid:c}),(function(e){_.a.toast.hide(),Object(u.u)(e)&&t({type:T.GET_YYSR_PREAMOUNT,data:e.data.result})}))}},getYysrCardList:function(t){return function(e,a){var n=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]),r=a().yysrAccountState,c=r.getIn(["data","acBusinessIncome",t]),i="",d="getCurrentCardList";"STATE_YYSR_DJ"===r.getIn(["data","runningState"])?"stockRange"==t?(i="4",d="getStockCardList"):i="PREIN":"stockRange"==t?(i="4",d="getStockCardList"):i="NEEDIN",_.a.toast.loading(s.p,0),Object(o.a)(d,"POST",JSON.stringify({sobId:n,property:i,categoryList:c}),(function(a){_.a.toast.hide(),Object(u.u)(a)&&e({type:T.GET_YYSR_CARDLIST,data:a.data.result,cardType:t})}))}},getCardDetail:function(t){return function(e){_.a.toast.loading(s.p,0),Object(o.a)("getRunningDetail","GET","uuid=".concat(t),(function(t){if(_.a.toast.hide(),Object(u.u)(t)){var a=t.data.result;delete a.parentUuid,e({type:T.YYSR_SAVE_AND_NEW,receivedData:a});var n=a.acBusinessIncome.beManagemented,r="SX_HW"===a.propertyCarryover;n&&e(l.getYysrCardList("contactsRange")),r&&e(l.getYysrCardList("stockRange"))}}))}},changeYysrStockCard:function(t,e,a){return{type:T.CHANGE_YYSR_STOCKCARD,dataType:t,value:e,idx:a}}},T={GET_LB_YYSR_CARD_DETAIL:"GET_LB_YYSR_CARD_DETAIL",GET_LB_YYSR_FROM_YLLS:"GET_LB_YYSR_FROM_YLLS",CHANGE_RUNNING_STATE:"CHANGE_RUNNING_STATE",CHANGE_YYSR_DATA:"CHANGE_YYSR_DATA",CHANGE_AMOUNT:"CHANGE_AMOUNT",CHANGE_ACCOUNT:"CHANGE_ACCOUNT",CHANGE_ACLIST:"CHANGE_ACLIST",CHANGE_TAXRATE:"CHANGE_TAXRATE",CHANGE_BILLSTATES:"CHANGE_BILLSTATES",AFTER_LRACCOUNT_SAVE:"AFTER_LRACCOUNT_SAVE",GET_YYSR_PREAMOUNT:"GET_YYSR_PREAMOUNT",YYSR_SAVE_AND_NEW:"YYSR_SAVE_AND_NEW",GET_YYSR_CARDLIST:"GET_YYSR_CARDLIST",CHANGE_YYSR_STOCKCARD:"CHANGE_YYSR_STOCKCARD"}},1212:function(t,e,a){"use strict";a.d(e,"a",(function(){return A})),a.d(e,"b",(function(){return l}));a(32),a(223),a(61),a(166),a(70),a(77),a(29),a(1035),a(1029),a(82),a(76),a(1030);var n=a(51),r=a(220),c=a(4),i=a(1),o=a(57),s=a(14),u=a(12),d=a(2),_=a(1022),g=Object(i.fromJS)({views:{insertOrModify:"insert",fromYl:!1},data:{categoryType:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_YYZC_GJ",accountName:"",accountUuid:"",currentAmount:"",billType:"bill_other",billStates:"bill_states_not_auth",billAssList:[],billAcList:[],taxRate:3,tax:"",offsetAmount:0,paymentList:[],projectCard:[{}],acBusinessExpense:{payAc:[],payList:[],deliveryAc:[],deliveryList:[],inAdvanceAc:[],inAdvanceList:[],beManagemented:!1,beDeposited:!1,stockCardList:[],contactsCardRange:{uuid:"",code:"",name:""}}},preData:{preAmount:0,receiveAmount:0},stockCardList:[],contactsCardList:[]});function A(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(c.a)(t,T.GET_LB_YYZC_CARD_DETAIL,(function(){var t=a.value.split(s.B),e=a.data.get("amount"),n=e-e/(1+g.getIn(["data","taxRate"])/100),r="\u91c7\u8d2d".concat("SX_HW"===a.receivedData.propertyCarryover?"\u5b58\u8d27":"","\u652f\u51fa");return g.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).set("preData",g.get("preData")).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","runningAbstract"],r).setIn(["data","accountName"],a.data.get("accountName")).setIn(["data","accountUuid"],a.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["data","tax"],Object(u.l)(n)).setIn(["views","insertOrModify"],"insert")})),Object(c.a)(t,T.GET_LB_YYZC_FROM_YLLS,(function(){var t=Math.abs(a.state.getIn(["data","amount"]))==Math.abs(a.state.getIn(["data","currentAmount"]));return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data")).setIn(["data","isFullPayment"],t)})),Object(c.a)(t,T.CHANGE_YYZC_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(c.a)(t,T.CHANGE_YYZC_RUNNING_STATE,(function(){return e.setIn(["data","runningState"],a.key).setIn(["data","acBusinessExpense","contactsCardRange"],null)})),Object(c.a)(t,T.CHANGE_YYZC_ASSLIST,(function(){var t=a.value.split(s.B),n={};return n.uuid=t[0],n.code=t[1],n.name=t[2],e.setIn(["data","acBusinessExpense",a.acType],Object(i.fromJS)(n))})),Object(c.a)(t,T.CHANGE_YYZC_ACCOUNT,(function(){var t=a.value.split(s.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(c.a)(t,T.GET_YYZC_PREAMOUNT,(function(){return e.setIn(["preData","preAmount"],a.data.preAmount).setIn(["preData","receiveAmount"],a.data.amount).setIn(["data","offsetAmount"],"")})),Object(c.a)(t,T.CHANGE_YYZCDATE,(function(){return e.setIn(["data","runningDate"],a.date)})),Object(c.a)(t,T.CHANGE_YYZC_BILLASSLIST,(function(){var t=a.value.split(s.B),n={};return n.assId=t[0],n.assName=t[1],n.assCategory=t[2],e.setIn(["data","billAssList",a.idx],Object(i.fromJS)(n)).setIn(["data","billAcList",0],Object(i.fromJS)({acId:a.billAcId}))})),Object(c.a)(t,T.CHANGE_YYZC_TAXRATE_OR_AMOUNT,(function(){var t=0;if("amount"===a.dataType){var n=e.getIn(["data","taxRate"]),r=a.value;t=r-r/(1+n/100),e=e.setIn(["data","amount"],r)}else{var c=e.getIn(["data","amount"]),i=a.value;t=c-c/(1+i/100),e=e.setIn(["data","taxRate"],i)}return e.setIn(["data","tax"],Object(u.l)(t))})),Object(c.a)(t,T.CHANGE_YYZC_BILLSTATES,(function(){var t=e.getIn(["data","billStates"]),a="";return({bill_states_not_auth:function(){return a="bill_states_auth"},bill_states_auth:function(){return a="bill_states_not_auth"}}[t]||function(){return null})(),e.setIn(["data","billStates"],a).setIn(["data","billAssList"],Object(i.fromJS)([])).setIn(["data","billAcList"],Object(i.fromJS)([]))})),Object(c.a)(t,T.AFTER_YYZC_SAVE,(function(){return a.saveAndNew?e=g:(a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber)),e})),Object(c.a)(t,T.GET_YYZC_CARDLIST,(function(){var t=[];return a.data.forEach((function(e){t.push({key:"".concat(e.code," ").concat(e.name),value:"".concat(e.uuid).concat(s.B).concat(e.code).concat(s.B).concat(e.name)})})),e="stockRange"===a.cardType?e.set("stockCardList",Object(i.fromJS)(t)):e.set("contactsCardList",Object(i.fromJS)(t))})),Object(c.a)(t,T.YYZC_SAVE_AND_NEW,(function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),c="\u91c7\u8d2d".concat("SX_HW"===a.receivedData.propertyCarryover?"\u5b58\u8d27":"","\u652f\u51fa");return g.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],c)})),Object(c.a)(t,T.CHANGE_YYZC_STOCKCARD,(function(){switch(a.dataType){case"card":var t=a.value.split(s.B),n=e.getIn(["data","acBusinessExpense","stockCardList",a.idx,"amount"]);e=e.setIn(["data","acBusinessExpense","stockCardList",a.idx],Object(i.fromJS)({uuid:t[0],code:t[1],name:t[2],amount:n}));break;case"amount":e=e.setIn(["data","acBusinessExpense","stockCardList",a.idx,"amount"],a.value);break;case"add":e=e.setIn(["data","acBusinessExpense","stockCardList",a.idx],Object(i.fromJS)({amount:""}));break;case"delete":e=e.deleteIn(["data","acBusinessExpense","stockCardList",a.idx])}return e})),t)[a.type]||function(){return e})()}var l={changeYyzcData:function(t,e){return{type:T.CHANGE_YYZC_DATA,dataType:t,value:e}},changeYyzcRunningState:function(t){return{type:T.CHANGE_YYZC_RUNNING_STATE,key:t}},changeYyzcAssList:function(t,e){return{type:T.CHANGE_YYZC_ASSLIST,value:t,acType:e}},changeYyzcAccount:function(t){return{type:T.CHANGE_YYZC_ACCOUNT,value:t}},getYyzcPreAmount:function(){return function(t,e){var a=e().yyzcAccountState,n=a.getIn(["data","categoryUuid"]),r=a.getIn(["data","runningDate"]),c=a.getIn(["data","acBusinessExpense","contactsCardRange","uuid"]);d.a.toast.loading(s.p,0),Object(o.a)("getRunningAccountInfo","POST",JSON.stringify({categoryUuid:n,cardUuid:c,runningDate:r}),(function(e){d.a.toast.hide(),Object(u.u)(e)&&t({type:T.GET_YYZC_PREAMOUNT,data:e.data.result})}))}},changeYyzcDate:function(t){return{type:T.CHANGE_YYZCDATE,date:t}},changeYyzcBillAssList:function(t,e,a){return{type:T.CHANGE_YYZC_BILLASSLIST,value:e,idx:t,billAcId:a}},changeYyzcTaxRateOrAmount:function(t,e){return{type:T.CHANGE_YYZC_TAXRATE_OR_AMOUNT,dataType:t,value:e}},changeYyzcBillStates:function(){return{type:T.CHANGE_YYZC_BILLSTATES}},saveRunningbusiness:function(t){return function(e,a){var c=a().yyzcAccountState,g=a().homeAccountState,A=g.get("enclosureList").toJS(),T=g.get("needDeleteUrl").toJS(),f=A.concat(T),C=c.get("data").toJS(),S=C.runningState,L=C.acBusinessExpense.beManagemented,E="SX_HW"===C.propertyCarryover,m=C.amount;if(m<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(""==C.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(C.runningAbstract.length>s.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(s.y,"\u4e2a\u5b57\u7b26"));if(L){var I=C.acBusinessExpense.contactsCardRange;if(!I||""==I.uuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u5f80\u6765\u5355\u4f4d")}else if(""==C.accountUuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");if("STATE_YYZC_DJ"!=S&&E){var y=C.acBusinessExpense.stockCardList,b=[],p=!1;if(!y.every((function(t){return b.push(t.uuid),t.amount<=0&&(p=!0),t.uuid})))return d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u5b58\u8d27\u5361\u7247");if(p)return d.a.toast.info("\u5b58\u8d27\u5361\u7247\u6709\u672a\u586b\u5199\u7684\u91d1\u989d");if(Object(r.a)(new Set(b)).length<b.length)return d.a.toast.info("\u6709\u91cd\u590d\u7684\u5b58\u8d27\u5361\u7247")}if("STATE_YYZC_DJ"===S){if(m=-Math.abs(m),""==C.accountUuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237")}else{if(C.currentAmount>0&&""==C.accountUuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");if(D&&Number(C.currentAmount)+Number(C.offsetAmount)>m)return d.a.toast.info("\u672c\u6b21\u6536(\u4ed8)\u6b3e\u91d1\u989d+\u9884\u6536(\u4ed8)\u62b5\u6263\u4e0d\u53ef\u5927\u4e8e\u603b\u91d1\u989d")}var O=a().homeAccountState.get("project").toJS(),v=O.usedProject,N=O.projectCard;if(!E&&v&&"STATE_YYZC_DJ"!=S){var G=[],Y=!1;if(!N.every((function(t){return G.push(t.uuid),t.amount<=0&&(Y=!0),t.uuid})))return d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");if(!E&&Y)return d.a.toast.info("\u9879\u76ee\u5361\u7247\u6709\u672a\u586b\u5199\u7684\u91d1\u989d");if(Object(r.a)(new Set(G)).length<G.length)return d.a.toast.info("\u6709\u91cd\u590d\u7684\u9879\u76ee\u5361\u7247")}var R="modifyRunningbusiness",D="insert"===c.getIn(["views","insertOrModify"]);D&&(delete C.uuid,delete C.parentUuid,R="insertExpense"),d.a.toast.loading(s.p,0),Object(o.a)(R,"POST",JSON.stringify(Object(n.a)({},C,{amount:m,usedProject:v,projectCard:N,enclosureList:f})),(function(a){if(d.a.toast.hide(),Object(u.u)(a))if(d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=C.categoryUuid;e(l.getCardDetail(n)),e(_.b.changeLrlsData(["project","projectCard"],Object(i.fromJS)([{amount:""}]))),e(_.b.changeLrlsEnclosureList())}else e(l.afterYyzcSave(a.data,t,D))}))}},afterYyzcSave:function(t,e,a){return{type:T.AFTER_YYZC_SAVE,data:t,saveAndNew:e,isInsert:a}},getYyzcCardList:function(t){return function(e,a){var n=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]),r=a().yyzcAccountState,c=r.getIn(["data","acBusinessExpense",t]),i="",_="getCurrentCardList";"STATE_YYZC_DJ"===r.getIn(["data","runningState"])?"stockRange"==t?(i="5",_="getStockCardList"):i="PREPAY":"stockRange"==t?(i="5",_="getStockCardList"):i="NEEDPAY",d.a.toast.loading(s.p,0),Object(o.a)(_,"POST",JSON.stringify({sobId:n,property:i,categoryList:c}),(function(a){d.a.toast.hide(),Object(u.u)(a)&&e({type:T.GET_YYZC_CARDLIST,data:a.data.result,cardType:t})}))}},getCardDetail:function(t){return function(e){d.a.toast.loading(s.p,0),Object(o.a)("getRunningDetail","GET","uuid=".concat(t),(function(t){if(d.a.toast.hide(),Object(u.u)(t)){var a=t.data.result;delete a.parentUuid,e({type:T.YYZC_SAVE_AND_NEW,receivedData:a});var n=a.acBusinessExpense.beManagemented,r="SX_HW"===a.propertyCarryover;n&&e(l.getYyzcCardList("contactsRange")),r&&e(l.getYyzcCardList("stockRange"))}}))}},changeYyzcStockCard:function(t,e,a){return{type:T.CHANGE_YYZC_STOCKCARD,dataType:t,value:e,idx:a}}},T={GET_LB_YYZC_CARD_DETAIL:"GET_LB_YYZC_CARD_DETAIL",GET_LB_YYZC_FROM_YLLS:"GET_LB_YYZC_FROM_YLLS",CHANGE_YYZC_DATA:"CHANGE_YYZC_DATA",CHANGE_YYZC_RUNNING_STATE:"CHANGE_YYZC_RUNNING_STATE",CHANGE_YYZC_ASSLIST:"CHANGE_YYZC_ASSLIST",CHANGE_YYZC_ACCOUNT:"CHANGE_YYZC_ACCOUNT",GET_YYZC_PREAMOUNT:"GET_YYZC_PREAMOUNT",CHANGE_YYZCDATE:"CHANGE_YYZCDATE",CHANGE_YYZC_BILLASSLIST:"CHANGE_YYZC_BILLASSLIST",CHANGE_YYZC_TAXRATE_OR_AMOUNT:"CHANGE_YYZC_TAXRATE_OR_AMOUNT",CHANGE_YYZC_BILLSTATES:"CHANGE_YYZC_BILLSTATES",AFTER_YYZC_SAVE:"AFTER_YYZC_SAVE",GET_YYZC_CARDLIST:"GET_YYZC_CARDLIST",YYZC_SAVE_AND_NEW:"YYZC_SAVE_AND_NEW",CHANGE_YYZC_STOCKCARD:"CHANGE_YYZC_STOCKCARD"}},1213:function(t,e,a){"use strict";a.d(e,"a",(function(){return A})),a.d(e,"b",(function(){return l}));a(32),a(223),a(61),a(166),a(70),a(77),a(29),a(1035),a(1029),a(82),a(76),a(1030);var n=a(51),r=a(220),c=a(4),i=a(1),o=a(57),s=a(14),u=a(12),d=a(2),_=a(1022),g=Object(i.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_FY_YF",propertyList:[],propertyCost:"",propertyCostList:[],accountName:"",accountUuid:"",billType:"bill_other",billStates:"bill_states_not_auth",billAssList:[],billAcList:[],taxRate:3,tax:0,paymentList:[],acCost:{saleAc:[],saleList:[],manageAc:[],manageList:[],financeAc:[],financeList:[],deliveryAc:[],deliveryList:[],beManagemented:!1,contactsCardRange:{uuid:"",code:"",name:""}}},contactsCardList:[]});function A(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(c.a)(t,T.GET_LB_FYZC_CARD_DETAIL,(function(){var t=a.value.split(s.B),e=a.data.get("amount"),n=e-e/(1+g.getIn(["data","taxRate"])/100),r="".concat(a.receivedData.name,"\u652f\u51fa"),c="",o=a.receivedData.propertyCostList;return 1==o.length&&(c=o[0]),g.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","runningAbstract"],r).setIn(["data","accountName"],a.data.get("accountName")).setIn(["data","accountUuid"],a.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["data","tax"],Object(u.l)(n)).setIn(["data","propertyCost"],c).setIn(["views","insertOrModify"],"insert")})),Object(c.a)(t,T.GET_LB_FYZC_FROM_YLLS,(function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data"))})),Object(c.a)(t,T.CHANGE_FYZC_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(c.a)(t,T.CHANGE_FYZC_RUNNING_STATE,(function(){return e.setIn(["data","runningState"],a.key)})),Object(c.a)(t,T.CHANGE_FYZC_ASSLIST,(function(){var t=a.value.split(s.B),n={};return n.uuid=t[0],n.code=t[1],n.name=t[2],e.setIn(["data","acCost",a.acType],Object(i.fromJS)(n))})),Object(c.a)(t,T.CHANGE_FYZC_ACCOUNT,(function(){var t=a.value.split(s.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(c.a)(t,T.CHANGE_FYZCDATE,(function(){return e.setIn(["data","runningDate"],a.date)})),Object(c.a)(t,T.CHANGE_FYZC_BILLASSLIST,(function(){var t=a.value.split(s.B),n={};return n.assId=t[0],n.assName=t[1],n.assCategory=t[2],e.setIn(["data","billAssList",a.idx],Object(i.fromJS)(n)).setIn(["data","billAcList",0],Object(i.fromJS)({acId:a.billAcId}))})),Object(c.a)(t,T.CHANGE_FYZC_TAXRATE_OR_AMOUNT,(function(){var t=0;if("amount"===a.dataType){var n=e.getIn(["data","taxRate"]),r=a.value;t=r-r/(1+n/100),e=e.setIn(["data","amount"],r)}else{var c=e.getIn(["data","amount"]),i=a.value;t=c-c/(1+i/100),e=e.setIn(["data","taxRate"],i)}return e.setIn(["data","tax"],Object(u.l)(t))})),Object(c.a)(t,T.CHANGE_FYZC_BILLSTATES,(function(){var t=e.getIn(["data","billStates"]),a="";return({bill_states_not_auth:function(){return a="bill_states_auth"},bill_states_auth:function(){return a="bill_states_not_auth"}}[t]||function(){return null})(),e.setIn(["data","billStates"],a).setIn(["data","billAssList"],Object(i.fromJS)([])).setIn(["data","billAcList"],Object(i.fromJS)([]))})),Object(c.a)(t,T.AFTER_FYZC_SAVE,(function(){return a.saveAndNew?e=g:(a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber)),e})),Object(c.a)(t,T.GET_FYZC_CARDLIST,(function(){var t=[];return a.data.forEach((function(e){t.push({key:"".concat(e.code," ").concat(e.name),value:"".concat(e.uuid).concat(s.B).concat(e.code).concat(s.B).concat(e.name)})})),e.set("contactsCardList",Object(i.fromJS)(t))})),Object(c.a)(t,T.FYZC_SAVE_AND_NEW,(function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),c="".concat(a.receivedData.name,"\u652f\u51fa"),o="",s=a.receivedData.propertyCostList;return 1==s.length&&(o=s[0]),g.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","propertyCost"],o).setIn(["data","runningAbstract"],c)})),t)[a.type]||function(){return e})()}var l={changeFyzcData:function(t,e){return{type:T.CHANGE_FYZC_DATA,dataType:t,value:e}},changeFyzcRunningState:function(t){return{type:T.CHANGE_FYZC_RUNNING_STATE,key:t}},changeFyzcAssList:function(t,e){return{type:T.CHANGE_FYZC_ASSLIST,value:t,acType:e}},changeFyzcAccount:function(t){return{type:T.CHANGE_FYZC_ACCOUNT,value:t}},changeFyzcDate:function(t){return{type:T.CHANGE_FYZCDATE,date:t}},changeFyzcBillAssList:function(t,e,a){return{type:T.CHANGE_FYZC_BILLASSLIST,value:e,idx:t,billAcId:a}},changeFyzcTaxRateOrAmount:function(t,e){return{type:T.CHANGE_FYZC_TAXRATE_OR_AMOUNT,dataType:t,value:e}},changeFyzcBillStates:function(){return{type:T.CHANGE_FYZC_BILLSTATES}},saveRunningbusiness:function(t){return function(e,a){var c=a().homeAccountState,g=c.get("enclosureList").toJS(),A=c.get("needDeleteUrl").toJS(),T=g.concat(A),f=a().fyzcAccountState,C=f.get("data").toJS(),S=C.runningState,L=C.acCost.beManagemented;if("STATE_FY_WF"!=S&&"STATE_FY_DJ"!=S&&""==C.propertyCost)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28");if(""==C.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(C.runningAbstract.length>s.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(s.y,"\u4e2a\u5b57\u7b26"));if(L){var E=C.acCost.contactsCardRange;if(!E||""==E.uuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u5f80\u6765\u5355\u4f4d")}if(0==C.amount)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if("STATE_FY_WF"!=S&&""==C.accountUuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");var m=a().homeAccountState.get("project").toJS(),I=m.usedProject,y=m.projectCard;if(I&&"STATE_FY_DJ"!=S){var b=[],p=!1;if(!y.every((function(t){return b.push(t.uuid),0==t.amount&&(p=!0),t.uuid})))return d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");if(p)return d.a.toast.info("\u9879\u76ee\u5361\u7247\u6709\u672a\u586b\u5199\u7684\u91d1\u989d");if(Object(r.a)(new Set(b)).length<b.length)return d.a.toast.info("\u6709\u91cd\u590d\u7684\u9879\u76ee\u5361\u7247")}var O="modifyRunningbusiness",v="insert"===f.getIn(["views","insertOrModify"]);v&&(delete C.uuid,delete C.parentUuid,O="insertCost"),d.a.toast.loading(s.p,0),Object(o.a)(O,"POST",JSON.stringify(Object(n.a)({},C,{usedProject:I,projectCard:y,enclosureList:T})),(function(a){if(d.a.toast.hide(),Object(u.u)(a))if(d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=C.categoryUuid;e(l.getCardDetail(n)),e(_.b.changeLrlsData(["project","projectCard"],Object(i.fromJS)([{amount:""}]))),e(_.b.changeLrlsEnclosureList())}else e(l.afterFyzcSave(a.data,t,v))}))}},afterFyzcSave:function(t,e,a){return{type:T.AFTER_FYZC_SAVE,data:t,saveAndNew:e,isInsert:a}},getFyzcCardList:function(t){return function(e,a){var n=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]),r=a().fyzcAccountState,c=r.getIn(["data","acCost",t]),i="STATE_FY_DJ"==r.getIn(["data","runningState"])?"PREPAY":"NEEDPAY";d.a.toast.loading(s.p,0),Object(o.a)("getCurrentCardList","POST",JSON.stringify({sobId:n,property:i,categoryList:c}),(function(a){d.a.toast.hide(),Object(u.u)(a)&&e({type:T.GET_FYZC_CARDLIST,data:a.data.result,cardType:t})}))}},getCardDetail:function(t){return function(e){d.a.toast.loading(s.p,0),Object(o.a)("getRunningDetail","GET","uuid=".concat(t),(function(t){if(d.a.toast.hide(),Object(u.u)(t)){var a=t.data.result;delete a.parentUuid,e({type:T.FYZC_SAVE_AND_NEW,receivedData:a}),a.acCost.beManagemented&&e(l.getFyzcCardList("contactsRange"))}}))}}},T={GET_LB_FYZC_CARD_DETAIL:"GET_LB_FYZC_CARD_DETAIL",GET_LB_FYZC_FROM_YLLS:"GET_LB_FYZC_FROM_YLLS",CHANGE_FYZC_DATA:"CHANGE_FYZC_DATA",CHANGE_FYZC_RUNNING_STATE:"CHANGE_FYZC_RUNNING_STATE",CHANGE_FYZC_ASSLIST:"CHANGE_FYZC_ASSLIST",CHANGE_FYZC_ACCOUNT:"CHANGE_FYZC_ACCOUNT",CHANGE_FYZCDATE:"CHANGE_FYZCDATE",CHANGE_FYZC_BILLASSLIST:"CHANGE_FYZC_BILLASSLIST",CHANGE_FYZC_TAXRATE_OR_AMOUNT:"CHANGE_FYZC_TAXRATE_OR_AMOUNT",CHANGE_FYZC_BILLSTATES:"CHANGE_FYZC_BILLSTATES",AFTER_FYZC_SAVE:"AFTER_FYZC_SAVE",GET_FYZC_CARDLIST:"GET_FYZC_CARDLIST",FYZC_SAVE_AND_NEW:"FYZC_SAVE_AND_NEW"}},1214:function(t,e,a){"use strict";a.d(e,"a",(function(){return g})),a.d(e,"b",(function(){return l}));a(32),a(61),a(56),a(29),a(82),a(76);var n=a(51),r=a(4),c=a(1),i=a(57),o=a(14),s=a(12),u=(a(1037),a(2)),d=a(1022),_=Object(c.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_ZCWJZZS",categoryName:"\u8f6c\u51fa\u672a\u4ea4\u589e\u503c\u7a0e",categoryUuid:"",runningDate:"",runningAbstract:"\u8f6c\u51fa\u672a\u4ea4\u589e\u503c\u7a0e",handleMonth:"",turnOutBusinessUuid:""},hxList:{flowDtoList:[],inputAmount:0,inputCount:0,outputAmount:0,outputCount:0}});function g(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(r.a)(t,A.GET_LB_ZCWJZZS_CARD_DETAIL,(function(){var t=a.value.split(o.B);return _.setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["views","insertOrModify"],"insert")})),Object(r.a)(t,A.GET_LB_ZCWJZZS_FROM_YLLS,(function(){var t=a.state.getIn(["data","businessList"]),n=a.state.getIn(["data","businessList",0,"runningDate"]).slice(0,7),r=0,c=0,i=0,o=0;return t.forEach((function(t){"bill_common"===t.get("billType")?(r++,i+=t.get("parentTax")?t.get("parentTax"):t.get("tax")):(c++,o+=t.get("parentTax")?t.get("parentTax"):t.get("tax"))})),e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data")).setIn(["data","handleMonth"],n).setIn(["hxList","flowDtoList"],t).setIn(["hxList","inputAmount"],o).setIn(["hxList","inputCount"],c).setIn(["hxList","outputAmount"],i).setIn(["hxList","outputCount"],r).setIn(["data","turnOutBusinessUuid"],a.state.getIn(["data","uuid"]))})),Object(r.a)(t,A.CHANGE_WJZZS_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(r.a)(t,A.GET_WJZZS_LIST,(function(){return e=e.set("hxList",Object(c.fromJS)(a.receivedData))})),Object(r.a)(t,A.AFTER_WJZZS_SAVE,(function(){if(a.saveAndNew){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]),c=e.getIn(["data","handleMonth"]);e=_.setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","handleMonth"],c)}else e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","turnOutBusinessUuid"],a.data.result);return e})),t)[a.type]||function(){return e})()}var A={GET_LB_ZCWJZZS_CARD_DETAIL:"GET_LB_ZCWJZZS_CARD_DETAIL",GET_LB_ZCWJZZS_FROM_YLLS:"GET_LB_ZCWJZZS_FROM_YLLS",CHANGE_WJZZS_DATA:"CHANGE_WJZZS_DATA",GET_WJZZS_LIST:"GET_WJZZS_LIST",AFTER_WJZZS_SAVE:"AFTER_WJZZS_SAVE"},l={changeWjzzsData:function(t,e){return{type:A.CHANGE_WJZZS_DATA,dataType:t,value:e}},getWjzzsList:function(t){return function(e,a){u.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(i.a)("getBusinessTurnoutList","POST",JSON.stringify({runningDate:t}),(function(t){u.a.toast.hide(),Object(s.u)(t)&&e({type:A.GET_WJZZS_LIST,receivedData:t.data})}))}},saveRunningbusiness:function(t){return function(e,a){var r=a().homeAccountState,c=r.get("enclosureList").toJS(),s=r.get("needDeleteUrl").toJS(),_=c.concat(s),g=a().zcwjzzsAccountState,A="insert"===g.getIn(["views","insertOrModify"])?"insertBusinessTurnoutItem":"modifyBusinessTurnoutItem",T=[],f=g.getIn(["hxList","flowDtoList"]);f.forEach((function(t){T.push(t.get("uuid"))}));var C=g.get("data").toJS();return""==C.runningAbstract?u.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981"):C.runningAbstract.length>o.y?u.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(o.y,"\u4e2a\u5b57\u7b26")):""==C.handleMonth?u.a.toast.info("\u8bf7\u9009\u62e9\u5904\u7406\u7a0e\u989d\u6708\u4efd"):f.size?g.getIn(["hxList","inputAmount"])>=g.getIn(["hxList","outputAmount"])?u.a.toast.info("\u8fdb\u9879\u7a0e\u989d\u5927\u4e8e\u9500\u9879\u7a0e\u989d\uff0c\u65e0\u9700\u8f6c\u51fa\u672a\u4ea4\u589e\u503c\u7a0e"):(u.a.toast.loading(o.p,0),void Object(i.a)(A,"POST",JSON.stringify(Object(n.a)({},C,{uuidList:T,enclosureList:_})),(function(a){if(u.a.toast.hide(),0!==a.code)u.a.toast.fail("".concat(a.code," ").concat(a.message));else if(u.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),e(l.afterWjzzsSave(a.data,t)),t){var n=C.handleMonth;e(l.getWjzzsList(n)),e(d.b.changeLrlsEnclosureList())}}))):u.a.toast.info("\u6ca1\u6709\u9700\u8981\u8f6c\u51fa\u7684\u6d41\u6c34")}},afterWjzzsSave:function(t,e){return{type:A.AFTER_WJZZS_SAVE,data:t,saveAndNew:e}}}},1215:function(t,e,a){"use strict";a.d(e,"a",(function(){return g})),a.d(e,"b",(function(){return l}));a(32),a(223),a(61),a(166),a(31),a(70),a(77),a(29),a(1035),a(1029),a(82),a(76),a(1030);var n=a(220),r=a(4),c=a(1),i=a(57),o=a(14),s=a(12),u=(a(1037),a(2)),d=a(1022),_=Object(c.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_GGFYFT",categoryName:"\u9879\u76ee\u516c\u5171\u8d39\u7528\u5206\u644a",categoryUuid:"",runningDate:"",runningAbstract:"\u516c\u5171\u8d39\u7528\u5206\u644a",totalAmount:"",selectCardList:[{}],uuid:""},hxList:[],projectCardList:[]});function g(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(r.a)(t,A.GET_LB_GGFYFT_CARD_DETAIL,(function(){var t=a.value.split(o.B);return _.setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["views","insertOrModify"],"insert").setIn(["data","categoryUuid"],t[0])})),Object(r.a)(t,A.GET_LB_GGFYFT_FROM_YLLS,(function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("hxList",Object(c.fromJS)(a.state.getIn(["data","paymentList"]))).setIn(["data","totalAmount"],a.state.getIn(["data","amount"])).setIn(["data","categoryName"],"\u9879\u76ee\u516c\u5171\u8d39\u7528\u5206\u644a").setIn(["data","runningDate"],a.state.getIn(["data","runningDate"])).setIn(["data","runningAbstract"],a.state.getIn(["data","runningAbstract"])).setIn(["data","selectCardList"],Object(c.fromJS)(a.state.getIn(["data","projectCard"]))).setIn(["data","uuid"],a.state.getIn(["data","uuid"]))})),Object(r.a)(t,A.CHANGE_GGFYFT_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(r.a)(t,A.GET_GGFYFT_LIST,(function(){return e=e.set("hxList",Object(c.fromJS)(a.receivedData))})),Object(r.a)(t,A.GGFYFT_HXLIST_BESELECT,(function(){return e.setIn(["hxList",a.idx,"beSelect"],a.value)})),Object(r.a)(t,A.GGFYFT_AUTO_CALCULATE,(function(){var t=e.getIn(["data","totalAmount"]);return e.updateIn(["data","selectCardList"],(function(e){return e.map((function(e){var a=e.get("percent"),n=Object(s.l)(t*a/100)?Object(s.l)(t*a/100):"";return e.set("amount",n)}))}))})),Object(r.a)(t,A.AFTER_GGFYFT_SAVE,(function(){if(a.saveAndNew){var t=e.getIn(["data","runningDate"]);e=_.setIn(["data","runningDate"],t)}else e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","uuid"],a.data.uuid);return e})),Object(r.a)(t,A.GET_GGFYFT_PROJECTLIST,(function(){var t=[];return a.receivedData.forEach((function(e){t.push({key:"".concat(e.code," ").concat(e.name),value:"".concat(e.uuid).concat(o.B).concat(e.code).concat(o.B).concat(e.name)})})),e.set("projectCardList",Object(c.fromJS)(t))})),Object(r.a)(t,A.CHANGE_GGFYFT_PROJECT_CARD,(function(){var t=e.getIn(["data","totalAmount"]);switch(a.dataType){case"card":var n=a.value.split(o.B);e=e.setIn(["data","selectCardList",a.idx],Object(c.fromJS)({uuid:n[0],code:n[1],name:n[2],amount:"",percent:""}));break;case"amount":var r=100*Object(s.l)(a.value/t,4);e=e.setIn(["data","selectCardList",a.idx,"amount"],a.value).setIn(["data","selectCardList",a.idx,"percent"],r);break;case"percent":var i=Object(s.l)(a.value*t/100);e=e.setIn(["data","selectCardList",a.idx,"amount"],i).setIn(["data","selectCardList",a.idx,"percent"],a.value);break;case"add":e=e.setIn(["data","selectCardList",a.idx],Object(c.fromJS)({amount:"",percent:0}));break;case"delete":e=e.deleteIn(["data","selectCardList",a.idx])}return e})),t)[a.type]||function(){return e})()}var A={GET_LB_GGFYFT_CARD_DETAIL:"GET_LB_GGFYFT_CARD_DETAIL",GET_LB_GGFYFT_FROM_YLLS:"GET_LB_GGFYFT_FROM_YLLS",CHANGE_GGFYFT_DATA:"CHANGE_GGFYFT_DATA",AFTER_GGFYFT_SAVE:"AFTER_GGFYFT_SAVE",GET_GGFYFT_LIST:"GET_GGFYFT_LIST",GGFYFT_HXLIST_BESELECT:"GGFYFT_HXLIST_BESELECT",GET_GGFYFT_PROJECTLIST:"GET_GGFYFT_PROJECTLIST",CHANGE_GGFYFT_PROJECT_CARD:"CHANGE_GGFYFT_PROJECT_CARD",GGFYFT_AUTO_CALCULATE:"GGFYFT_AUTO_CALCULATE"},l={changeGgfyftData:function(t,e){return{type:A.CHANGE_GGFYFT_DATA,dataType:t,value:e}},getGgfyftProjectList:function(){return function(t){u.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(i.a)("getProjectListAndTree","GET","listFrom=&treeFrom=",(function(e){u.a.toast.hide(),Object(s.u)(e)&&t({type:A.GET_GGFYFT_PROJECTLIST,receivedData:e.data.resultList})}))}},changeGgfyftProjectCard:function(t,e,a){return{type:A.CHANGE_GGFYFT_PROJECT_CARD,dataType:t,value:e,idx:a}},getGgfyftList:function(){return function(t,e){var a=e().ggfyftAccountState.get("data").get("runningDate");a&&Object(i.a)("getProjectShareList","POST",JSON.stringify({runningDate:a}),(function(e){Object(s.u)(e)&&t({type:A.GET_GGFYFT_LIST,receivedData:e.data})}))}},hxListBeSelect:function(t,e){return{type:A.GGFYFT_HXLIST_BESELECT,idx:t,value:e}},saveRunningbusiness:function(t){return function(e,a){var r=a().homeAccountState,c=r.get("enclosureList").toJS(),_=r.get("needDeleteUrl").toJS(),g=c.concat(_),A=a().ggfyftAccountState,T="insert"===A.getIn(["views","insertOrModify"])?"insertProjectShare":"modifyProjectShare",f=A.get("data").toJS(),C=[],S=!1;A.get("hxList").forEach((function(t){t.get("beSelect")&&(S=!0,C.push({uuid:t.get("uuid"),beSelect:!0}))}));var L=f.runningAbstract;if(""==L)return u.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(L.length>o.y)return u.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(o.y,"\u4e2a\u5b57\u7b26"));if(!S)return u.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u6838\u7b97\u7684\u5217\u8868");var E=[],m=!1,I=[],y=0;return f.selectCardList.every((function(t,e){return E.push(t.uuid),0==t.amount||void 0==t.amount?m=!0:(y+=Number(t.amount),I.push(t)),t.uuid}))?m?u.a.toast.info("\u6709\u672a\u586b\u5199\u7684\u9879\u76ee\u91d1\u989d"):Object(n.a)(new Set(E)).length<E.length?u.a.toast.info("\u6709\u91cd\u590d\u7684\u9879\u76ee\u5361\u7247"):f.totalAmount!=y?u.a.toast.info("\u5206\u644a\u91d1\u989d\u5408\u8ba1\u4e0d\u7b49\u4e8e\u5f85\u5206\u644a\u91d1\u989d"):(u.a.toast.loading(o.p,0),void Object(i.a)(T,"POST",JSON.stringify({runningAbstract:L,runningDate:f.runningDate,uuid:f.uuid,paymentList:C,projectCard:I,enclosureList:g}),(function(a){u.a.toast.hide(),Object(s.u)(a)&&(u.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),e(l.afterGgfyftSave(a.data,t)),t&&(e(l.getGgfyftList()),e(l.getGgfyftProjectList()),e(d.b.changeLrlsEnclosureList())))}))):u.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247")}},afterGgfyftSave:function(t,e){return{type:A.AFTER_GGFYFT_SAVE,data:t,saveAndNew:e}},autoCalculate:function(){return{type:A.GGFYFT_AUTO_CALCULATE}}}},1216:function(t,e,a){"use strict";a.d(e,"a",(function(){return A})),a.d(e,"b",(function(){return l}));a(32),a(223),a(61),a(166),a(70),a(77),a(29),a(1035),a(1029),a(82),a(76),a(1030);var n=a(51),r=a(220),c=a(4),i=a(1),o=a(57),s=a(14),u=a(12),d=a(2),_=a(1022),g=Object(i.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_YYWSR_YS",accountName:"",accountUuid:"",acBusinessOutIncome:{beManagemented:!1,contactsRange:[],contactsCardRange:{uuid:"",code:"",name:""}}},contactsCardList:[]});function A(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(c.a)(t,T.GET_LB_YYWSR_CARD_DETAIL,(function(){var t=a.value.split(s.B),e=a.data.get("amount");return g.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","runningAbstract"],t[1]).setIn(["data","accountName"],a.data.get("accountName")).setIn(["data","accountUuid"],a.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")})),Object(c.a)(t,T.GET_LB_YYWSR_FROM_YLLS,(function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data"))})),Object(c.a)(t,T.CHANGE_YYWSR_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(c.a)(t,T.CHANGE_YYWSR_CARD,(function(){var t=a.value.split(s.B),n={};return n.uuid=t[0],n.code=t[1],n.name=t[2],e.setIn(["data","acBusinessOutIncome",a.acType],Object(i.fromJS)(n))})),Object(c.a)(t,T.CHANGE_YYWSR_ACCOUNT,(function(){var t=a.value.split(s.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(c.a)(t,T.AFTER_YYWSR_SAVE,(function(){return a.saveAndNew?e=g:(a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber)),e})),Object(c.a)(t,T.GET_YYWSR_CARDLIST,(function(){var t=[];return a.data.forEach((function(e){t.push({key:"".concat(e.code," ").concat(e.name),value:"".concat(e.uuid).concat(s.B).concat(e.code).concat(s.B).concat(e.name)})})),e.set("contactsCardList",Object(i.fromJS)(t))})),Object(c.a)(t,T.YYWSR_SAVE_AND_NEW,(function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return g.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],r)})),t)[a.type]||function(){return e})()}var l={changeYywsrData:function(t,e){return{type:T.CHANGE_YYWSR_DATA,dataType:t,value:e}},changeAcList:function(t,e){return{type:T.CHANGE_YYWSR_CARD,value:t,acType:e}},changeAccount:function(t){return{type:T.CHANGE_YYWSR_ACCOUNT,value:t}},saveRunningbusiness:function(t){return function(e,a){var c=a().homeAccountState,u=c.get("enclosureList").toJS(),g=c.get("needDeleteUrl").toJS(),A=u.concat(g),T=a().yywsrAccountState,f=T.get("data").toJS(),C=f.runningState,S=f.acBusinessOutIncome.beManagemented,L=f.amount;if(L<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(""==f.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(f.runningAbstract.length>s.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(s.y,"\u4e2a\u5b57\u7b26"));if(S){var E=f.acBusinessOutIncome.contactsCardRange;if(!E||""==E.uuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u5f80\u6765\u5355\u4f4d")}if("STATE_YYWSR_YS"===C&&""==f.accountUuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");var m=a().homeAccountState.get("project").toJS(),I=m.usedProject,y=m.projectCard;if(I){var b=[],p=!1;if(!y.every((function(t){return b.push(t.uuid),t.amount<=0&&(p=!0),t.uuid})))return d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");if(p)return d.a.toast.info("\u9879\u76ee\u5361\u7247\u6709\u672a\u586b\u5199\u7684\u91d1\u989d");if(Object(r.a)(new Set(b)).length<b.length)return d.a.toast.info("\u6709\u91cd\u590d\u7684\u9879\u76ee\u5361\u7247")}var O="modifyRunningbusiness",v="insert"===T.getIn(["views","insertOrModify"]);v&&(delete f.uuid,delete f.parentUuid,O="insertOutIncome"),d.a.toast.loading(s.p,0),Object(o.a)(O,"POST",JSON.stringify(Object(n.a)({},f,{amount:L,usedProject:I,projectCard:y,enclosureList:A})),(function(a){if(d.a.toast.hide(),0!==a.code)d.a.toast.fail("".concat(a.code," ").concat(a.message));else if(d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=f.categoryUuid;e(l.getCardDetail(n)),e(_.b.changeLrlsData(["project","projectCard"],Object(i.fromJS)([{amount:""}]))),e(_.b.changeLrlsEnclosureList())}else e(l.afterYywsrSave(a.data,t,v))}))}},afterYywsrSave:function(t,e,a){return{type:T.AFTER_YYWSR_SAVE,data:t,saveAndNew:e,isInsert:a}},getYywsrCardList:function(t){return function(e,a){var n=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]),r=a().yywsrAccountState.getIn(["data","acBusinessOutIncome",t]);d.a.toast.loading(s.p,0),Object(o.a)("getCurrentCardList","POST",JSON.stringify({sobId:n,property:"NEEDIN",categoryList:r}),(function(a){d.a.toast.hide(),Object(u.u)(a)&&e({type:T.GET_YYWSR_CARDLIST,data:a.data.result,cardType:t})}))}},getCardDetail:function(t){return function(e){d.a.toast.loading(s.p,0),Object(o.a)("getRunningDetail","GET","uuid=".concat(t),(function(t){if(d.a.toast.hide(),Object(u.u)(t)){var a=t.data.result;delete a.parentUuid,e({type:T.YYWSR_SAVE_AND_NEW,receivedData:a}),a.acBusinessOutIncome.beManagemented&&e(l.getYywsrCardList("contactsRange"))}}))}}},T={GET_LB_YYWSR_CARD_DETAIL:"GET_LB_YYWSR_CARD_DETAIL",GET_LB_YYWSR_FROM_YLLS:"GET_LB_YYWSR_FROM_YLLS",CHANGE_YYWSR_DATA:"CHANGE_YYWSR_DATA",CHANGE_YYWSR_ACCOUNT:"CHANGE_YYWSR_ACCOUNT",CHANGE_YYWSR_CARD:"CHANGE_YYWSR_CARD",AFTER_YYWSR_SAVE:"AFTER_YYWSR_SAVE",YYWSR_SAVE_AND_NEW:"YYWSR_SAVE_AND_NEW",GET_YYWSR_CARDLIST:"GET_YYWSR_CARDLIST"}},1217:function(t,e,a){"use strict";a.d(e,"a",(function(){return A})),a.d(e,"b",(function(){return l}));a(32),a(223),a(61),a(166),a(70),a(77),a(29),a(1035),a(1029),a(82),a(76),a(1030);var n=a(51),r=a(220),c=a(4),i=a(1),o=a(57),s=a(14),u=a(12),d=a(2),_=a(1022),g=Object(i.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"",categoryUuid:"",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",runningDate:"",flowNumber:"",uuid:"",runningAbstract:"",amount:"",runningState:"STATE_YYWZC_YF",accountName:"",accountUuid:"",acBusinessOutExpense:{beManagemented:!1,contactsRange:[],contactsCardRange:{uuid:"",code:"",name:""}}},contactsCardList:[]});function A(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(c.a)(t,T.GET_LB_YYWZC_CARD_DETAIL,(function(){var t=a.value.split(s.B),e=a.data.get("amount");return g.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","categoryUuid"],t[0]).setIn(["data","categoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["data","runningAbstract"],t[1]).setIn(["data","accountName"],a.data.get("accountName")).setIn(["data","accountUuid"],a.data.get("accountUuid")).setIn(["data","amount"],e).setIn(["views","insertOrModify"],"insert")})),Object(c.a)(t,T.GET_LB_YYWZC_FROM_YLLS,(function(){return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).set("data",a.state.get("data"))})),Object(c.a)(t,T.CHANGE_YYWZC_DATA,(function(){return e.setIn(["data",a.dataType],a.value)})),Object(c.a)(t,T.CHANGE_YYWZC_CARD,(function(){var t=a.value.split(s.B),n={};return n.uuid=t[0],n.code=t[1],n.name=t[2],e.setIn(["data","acBusinessOutExpense",a.acType],Object(i.fromJS)(n))})),Object(c.a)(t,T.CHANGE_YYWZC_ACCOUNT,(function(){var t=a.value.split(s.B);return e.setIn(["data","accountName"],t[1]).setIn(["data","accountUuid"],t[0])})),Object(c.a)(t,T.AFTER_YYWZC_SAVE,(function(){return a.saveAndNew?e=g:(a.isInsert&&(e=e.setIn(["data","uuid"],a.data.uuid)),e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","flowNumber"],a.data.flowNumber)),e})),Object(c.a)(t,T.GET_YYWZC_CARDLIST,(function(){var t=[];return a.data.forEach((function(e){t.push({key:"".concat(e.code," ").concat(e.name),value:"".concat(e.uuid).concat(s.B).concat(e.code).concat(s.B).concat(e.name)})})),e.set("contactsCardList",Object(i.fromJS)(t))})),Object(c.a)(t,T.YYWZC_SAVE_AND_NEW,(function(){var t=e.getIn(["data","runningDate"]),n=e.getIn(["data","categoryUuid"]),r=e.getIn(["data","categoryName"]);return g.mergeIn(["data"],Object(i.fromJS)(a.receivedData)).setIn(["data","runningDate"],t).setIn(["data","categoryUuid"],n).setIn(["data","categoryName"],r).setIn(["data","runningAbstract"],r)})),t)[a.type]||function(){return e})()}var l={changeYywzcData:function(t,e){return{type:T.CHANGE_YYWZC_DATA,dataType:t,value:e}},changeYywzcCard:function(t,e){return{type:T.CHANGE_YYWZC_CARD,value:t,acType:e}},changeAccount:function(t){return{type:T.CHANGE_YYWZC_ACCOUNT,value:t}},saveRunningbusiness:function(t){return function(e,a){var c=a().homeAccountState,u=c.get("enclosureList").toJS(),g=c.get("needDeleteUrl").toJS(),A=u.concat(g),T=a().yywzcAccountState,f=T.get("data").toJS(),C=f.runningState,S=f.acBusinessOutExpense.beManagemented;if(f.amount<=0)return d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d");if(""==f.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(f.runningAbstract.length>s.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(s.y,"\u4e2a\u5b57\u7b26"));if(S){var L=f.acBusinessOutExpense.contactsCardRange;if(!L||""==L.uuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u5f80\u6765\u5355\u4f4d")}if("STATE_YYWZC_YF"===C&&""==f.accountUuid)return d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237");var E=a().homeAccountState.get("project").toJS(),m=E.usedProject,I=E.projectCard;if(m){var y=[],b=!1;if(!I.every((function(t){return y.push(t.uuid),t.amount<=0&&(b=!0),t.uuid})))return d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");if(b)return d.a.toast.info("\u9879\u76ee\u5361\u7247\u6709\u672a\u586b\u5199\u7684\u91d1\u989d");if(Object(r.a)(new Set(y)).length<y.length)return d.a.toast.info("\u6709\u91cd\u590d\u7684\u9879\u76ee\u5361\u7247")}var p="modifyRunningbusiness",O="insert"===T.getIn(["views","insertOrModify"]);O&&(delete f.uuid,delete f.parentUuid,p="insertOutExpense"),d.a.toast.loading(s.p,0),Object(o.a)(p,"POST",JSON.stringify(Object(n.a)({},f,{usedProject:m,projectCard:I,enclosureList:A})),(function(a){if(d.a.toast.hide(),0!==a.code)d.a.toast.fail("".concat(a.code," ").concat(a.message));else if(d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),t){var n=f.categoryUuid;e(l.getCardDetail(n)),e(_.b.changeLrlsData(["project","projectCard"],Object(i.fromJS)([{amount:""}]))),e(_.b.changeLrlsEnclosureList())}else e(l.afterYywzcSave(a.data,t,O))}))}},afterYywzcSave:function(t,e,a){return{type:T.AFTER_YYWZC_SAVE,data:t,saveAndNew:e,isInsert:a}},getYywzcCardList:function(t){return function(e,a){var n=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]),r=a().yywzcAccountState.getIn(["data","acBusinessOutExpense",t]);d.a.toast.loading(s.p,0),Object(o.a)("getCurrentCardList","POST",JSON.stringify({sobId:n,property:"NEEDPAY",categoryList:r}),(function(a){d.a.toast.hide(),Object(u.u)(a)&&e({type:T.GET_YYWZC_CARDLIST,data:a.data.result,cardType:t})}))}},getCardDetail:function(t){return function(e){d.a.toast.loading(s.p,0),Object(o.a)("getRunningDetail","GET","uuid=".concat(t),(function(t){if(d.a.toast.hide(),Object(u.u)(t)){var a=t.data.result;delete a.parentUuid,e({type:T.YYWZC_SAVE_AND_NEW,receivedData:a}),a.acBusinessOutExpense.beManagemented&&e(l.getYywzcCardList("contactsRange"))}}))}}},T={GET_LB_YYWZC_CARD_DETAIL:"GET_LB_YYWZC_CARD_DETAIL",GET_LB_YYWZC_FROM_YLLS:"GET_LB_YYWZC_FROM_YLLS",CHANGE_YYWZC_DATA:"CHANGE_YYWZC_DATA",CHANGE_YYWZC_ACCOUNT:"CHANGE_YYWZC_ACCOUNT",CHANGE_YYWZC_CARD:"CHANGE_YYWZC_CARD",AFTER_YYWZC_SAVE:"AFTER_YYWZC_SAVE",YYWZC_SAVE_AND_NEW:"YYWZC_SAVE_AND_NEW",GET_YYWZC_CARDLIST:"GET_YYWZC_CARDLIST"}},1218:function(t,e,a){"use strict";a.d(e,"a",(function(){return g})),a.d(e,"b",(function(){return l}));a(32),a(223),a(55),a(61),a(29),a(82),a(76);var n=a(51),r=a(4),c=a(1),i=a(57),o=a(14),s=a(12),u=(a(1037),a(2)),d=a(1022),_=Object(c.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_JZSY",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",categoryUuid:"",topCategoryName:"\u957f\u671f\u8d44\u4ea7\u5904\u7f6e\u635f\u76ca",topCategoryUuid:"",runningDate:"",runningAbstract:"\u5904\u7f6e\u635f\u76ca",amount:"",beProject:!1,acAssets:{originalAssetsAmount:"",depreciationAmount:""},flowNumber:""},hxList:[],categoryList:[{uuid:"",childList:[]}]});function g(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(r.a)(t,A.GET_LB_JZSY_CARD_DETAIL,(function(){var t=a.value.split(o.B);return _.setIn(["data","topCategoryUuid"],t[0]).setIn(["data","topCategoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["views","insertOrModify"],"insert")})),Object(r.a)(t,A.GET_LB_JZSY_FROM_YLLS,(function(){var t=a.state.getIn(["data","businessList"]),n=(a.state.getIn(["data","acAssets","cleaningAmount"]),a.state.get("data"));return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).setIn(["data","categoryUuid"],n.get("categoryUuid")).setIn(["data","categoryName"],n.get("categoryName")).setIn(["data","runningDate"],n.get("runningDate")).setIn(["data","beProject"],n.get("beProject")).setIn(["data","runningAbstract"],n.get("runningAbstract")).setIn(["data","amount"],n.getIn(["acAssets","cleaningAmount"])).setIn(["data","acAssets","originalAssetsAmount"],n.getIn(["acAssets","originalAssetsAmount"])).setIn(["data","acAssets","depreciationAmount"],n.getIn(["acAssets","depreciationAmount"])).setIn(["data","uuid"],n.get("uuid")).setIn(["data","flowNumber"],n.get("flowNumber")).set("hxList",t)})),Object(r.a)(t,A.CHANGE_JZSY_DATA,(function(){return e.setIn(a.dataType,a.value)})),Object(r.a)(t,A.GET_JZSY_LIST,(function(){return e=e.set("hxList",Object(c.fromJS)(a.receivedData))})),Object(r.a)(t,A.JZSY_HXLIST_BECHECK,(function(){return e.setIn(["hxList",a.idx,"beSelect"],a.value)})),Object(r.a)(t,A.AFTER_JZSY_SAVE,(function(){if(a.saveAndNew){var t=e.getIn(["data","runningDate"]);e=_.setIn(["data","runningDate"],t)}else{var n=e.get("hxList").filter((function(t){return t.get("beSelect")}));e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","uuid"],a.data.uuid).setIn(["data","flowNumber"],a.data.flowNumber).set("hxList",n)}return e})),Object(r.a)(t,A.GET_JZSY_CATEGORY,(function(){return e.set("categoryList",Object(c.fromJS)(a.receivedData))})),t)[a.type]||function(){return e})()}var A={GET_LB_JZSY_CARD_DETAIL:"GET_LB_JZSY_CARD_DETAIL",GET_LB_JZSY_FROM_YLLS:"GET_LB_JZSY_FROM_YLLS",CHANGE_JZSY_DATA:"CHANGE_JZSY_DATA",GET_JZSY_LIST:"GET_JZSY_LIST",JZSY_HXLIST_BECHECK:"JZSY_HXLIST_BECHECK",AFTER_JZSY_SAVE:"AFTER_JZSY_SAVE",GET_JZSY_CATEGORY:"GET_JZSY_CATEGORY"},l={changeJzsyData:function(t,e){return{type:A.CHANGE_JZSY_DATA,dataType:t,value:e}},getJzsyList:function(){return function(t,e){var a=e().jzsyAccountState.get("data"),n=a.get("runningDate"),r=a.get("categoryUuid");n&&r&&(u.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(i.a)("getJzsyList","POST",JSON.stringify({runningDate:n,categoryUuid:r}),(function(e){u.a.toast.hide(),Object(s.u)(e)&&t({type:A.GET_JZSY_LIST,receivedData:e.data.result})})))}},getCategoryList:function(){return function(t){u.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(i.a)("getCategoryList","POST",JSON.stringify({type:"LB_JZSY"}),(function(e){u.a.toast.hide(),Object(s.u)(e)&&t({type:A.GET_JZSY_CATEGORY,receivedData:e.data.result})}))}},jzsyHxListBeCheck:function(t,e){return{type:A.JZSY_HXLIST_BECHECK,idx:t,value:e}},saveRunningbusiness:function(t){return function(e,a){var r=a().jzsyAccountState,s="insert"===r.getIn(["views","insertOrModify"])?"insertJzsy":"modifyJzsy",_=a().homeAccountState,g=_.get("enclosureList").toJS(),A=_.get("needDeleteUrl").toJS(),T=g.concat(A),f=!1,C=r.get("hxList");C.forEach((function(t){t.get("beSelect")&&(f=!0)}));var S=a().homeAccountState.get("project").toJS(),L=S.usedProject,E=S.projectCard;if(L&&!E.every((function(t){return t.uuid})))return u.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");var m=r.get("data").toJS();if(""==m.categoryUuid)return u.a.toast.info("\u8bf7\u9009\u62e9\u5904\u7406\u7c7b\u522b");if(""==m.runningAbstract)return u.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(m.runningAbstract.length>o.y)return u.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(o.y,"\u4e2a\u5b57\u7b26"));if(!f)return u.a.toast.info("\u8bf7\u9009\u62e9\u9700\u8981\u5904\u7406\u7684\u6d41\u6c34");var I=m.acAssets.originalAssetsAmount,y=m.acAssets.depreciationAmount;return I<=0?u.a.toast.info("\u8bf7\u586b\u5199\u8d44\u4ea7\u539f\u503c"):y<=0?u.a.toast.info("\u8bf7\u586b\u5199\u7d2f\u8ba1\u6298\u65e7"):Number(y)>Number(I)?u.a.toast.info("\u6298\u65e7\u989d\u4e0d\u80fd\u5927\u4e8e\u539f\u503c"):(u.a.toast.loading(o.p,0),void Object(i.a)(s,"POST",JSON.stringify(Object(n.a)({},m,{usedProject:L,projectCard:E,businessList:C.toJS(),enclosureList:T})),(function(a){u.a.toast.hide(),0!==a.code?u.a.toast.fail("".concat(a.code," ").concat(a.message)):(u.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),e(l.afterJzsySave(a.data,t)),t&&(e(l.getCategoryList()),e(d.b.changeLrlsData(["project","projectCard"],Object(c.fromJS)([{amount:""}]))),e(d.b.changeLrlsEnclosureList())))})))}},afterJzsySave:function(t,e){return{type:A.AFTER_JZSY_SAVE,data:t,saveAndNew:e}}}},1261:function(t,e,a){"use strict";a.d(e,"a",(function(){return g})),a.d(e,"b",(function(){return l}));a(32),a(223),a(29),a(82);var n=a(51),r=a(4),c=a(1),i=a(57),o=a(14),s=a(12),u=(a(1037),a(2)),d=a(1022),_=Object(c.fromJS)({views:{insertOrModify:"insert"},data:{categoryType:"LB_ZJTX",categoryName:"\u8bf7\u9009\u62e9\u7c7b\u522b",categoryUuid:"",topCategoryName:"\u957f\u671f\u8d44\u4ea7\u6298\u65e7\u644a\u9500",topCategoryUuid:"",runningDate:"",runningAbstract:"\u8d44\u4ea7\u6298\u65e7\u644a\u9500",assetType:"XZ_ZJTX",runningState:"STATE_CQZC_ZJTX",amount:"",beProject:!1,acAssets:{},propertyCost:"",propertyCostList:[],flowNumber:""},categoryList:[{uuid:"",childList:[]}]});function g(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(r.a)(t,A.GET_LB_ZJTX_CARD_DETAIL,(function(){var t=a.value.split(o.B);return _.setIn(["data","topCategoryUuid"],t[0]).setIn(["data","topCategoryName"],t[1]).setIn(["data","runningDate"],a.data.get("runningDate")).setIn(["views","insertOrModify"],"insert")})),Object(r.a)(t,A.GET_LB_ZJTX_FROM_YLLS,(function(){var t=a.state.get("data");return e.setIn(["views","insertOrModify"],"modify").setIn(["views","fromYl"],!0).setIn(["data","categoryUuid"],t.get("categoryUuid")).setIn(["data","categoryName"],t.get("categoryName")).setIn(["data","runningDate"],t.get("runningDate")).setIn(["data","runningAbstract"],t.get("runningAbstract")).setIn(["data","amount"],t.get("amount")).setIn(["data","beProject"],t.get("beProject")).setIn(["data","acAssets"],t.get("acAssets")).setIn(["data","propertyCost"],t.get("propertyCost")).setIn(["data","propertyCostList"],t.get("propertyCostList")).setIn(["data","uuid"],t.get("uuid")).setIn(["data","flowNumber"],t.get("flowNumber"))})),Object(r.a)(t,A.CHANGE_ZJTX_DATA,(function(){return e.setIn(a.dataType,a.value)})),Object(r.a)(t,A.AFTER_ZJTX_SAVE,(function(){if(a.saveAndNew){var t=e.getIn(["data","runningDate"]);e=_.setIn(["data","runningDate"],t)}else e=e.setIn(["views","insertOrModify"],"modify").setIn(["data","uuid"],a.data.uuid).setIn(["data","flowNumber"],a.data.flowNumber);return e})),Object(r.a)(t,A.GET_ZJTX_CATEGORY,(function(){return e.set("categoryList",Object(c.fromJS)(a.receivedData))})),Object(r.a)(t,A.SELECT_ZJTX_CATEGORY,(function(){var t="",n=a.data.get("propertyCostList");return 1==n.size&&(t=n.get(0)),e.setIn(["data","categoryUuid"],a.data.get("uuid")).setIn(["data","categoryName"],a.data.get("name")).setIn(["data","beProject"],a.data.get("beProject")).setIn(["data","propertyCost"],t).setIn(["data","propertyCostList"],n).setIn(["data","acAssets"],a.data.get("acAssets"))})),t)[a.type]||function(){return e})()}var A={GET_LB_ZJTX_CARD_DETAIL:"GET_LB_ZJTX_CARD_DETAIL",GET_LB_ZJTX_FROM_YLLS:"GET_LB_ZJTX_FROM_YLLS",CHANGE_ZJTX_DATA:"CHANGE_ZJTX_DATA",AFTER_ZJTX_SAVE:"AFTER_ZJTX_SAVE",GET_ZJTX_CATEGORY:"GET_ZJTX_CATEGORY",SELECT_ZJTX_CATEGORY:"SELECT_ZJTX_CATEGORY"},l={changeZjtxData:function(t,e){return{type:A.CHANGE_ZJTX_DATA,dataType:t,value:e}},getCategoryList:function(){return function(t){u.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(i.a)("getCategoryList","POST",JSON.stringify({type:"LB_ZJTX"}),(function(e){u.a.toast.hide(),Object(s.u)(e)&&t({type:A.GET_ZJTX_CATEGORY,receivedData:e.data.result})}))}},selectCategory:function(t){return{type:A.SELECT_ZJTX_CATEGORY,data:t}},saveRunningbusiness:function(t){return function(e,a){var r=a().zjtxAccountState,s="insert"===r.getIn(["views","insertOrModify"])?"insertAssets":"modifyRunningbusiness",_=a().homeAccountState,g=_.get("enclosureList").toJS(),A=_.get("needDeleteUrl").toJS(),T=g.concat(A),f=a().homeAccountState.get("project").toJS(),C=f.usedProject,S=f.projectCard;if(C&&!S.every((function(t){return t.uuid})))return u.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");var L=r.get("data").toJS();return""==L.categoryUuid?u.a.toast.info("\u8bf7\u9009\u62e9\u5904\u7406\u7c7b\u522b"):""==L.propertyCost?u.a.toast.info("\u8bf7\u9009\u62e9\u8d39\u7528\u6027\u8d28"):""==L.runningAbstract?u.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981"):L.runningAbstract.length>o.y?u.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(o.y,"\u4e2a\u5b57\u7b26")):L.amount<=0?u.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d"):(u.a.toast.loading(o.p,0),void Object(i.a)(s,"POST",JSON.stringify(Object(n.a)({},L,{usedProject:C,projectCard:S,enclosureList:T})),(function(a){u.a.toast.hide(),0!==a.code?u.a.toast.fail("".concat(a.code," ").concat(a.message)):(u.a.toast.success("\u4fdd\u5b58\u6210\u529f",2),e(l.afterZjtxSave(a.data,t)),t&&(e(l.getCategoryList()),e(d.b.changeLrlsData(["project","projectCard"],Object(c.fromJS)([{amount:""}]))),e(d.b.changeLrlsEnclosureList())))})))}},afterZjtxSave:function(t,e){return{type:A.AFTER_ZJTX_SAVE,data:t,saveAndNew:e}}}},1458:function(t,e,a){}}]);