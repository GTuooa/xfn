(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[38],{1196:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n="INIT_AMOUNTMXB",s="GET_AMOUNT_MXB_ACLIST",c="GET_AMOUNT_MXB_SUBSIDIARY_LEDGER_FETCH",r="CHANGE_DATA_AMOUNTMXB",i="CHANGE_SHORT_DATA_AMOUNTMXB"},1251:function(e,t,a){"use strict";a.d(t,"e",(function(){return g})),a.d(t,"f",(function(){return b})),a.d(t,"g",(function(){return f})),a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return v})),a.d(t,"c",(function(){return x})),a.d(t,"d",(function(){return y})),a.d(t,"h",(function(){return O}));a(32),a(61),a(70),a(29),a(82),a(76);var n=a(118),s=a(51),c=a(12),r=a(1),i=a(17),o=a(1196),u=a(552),m=a(1041),l=a(14),d=a(2),g=function(e,t,a,n){return function(s){var r="".concat(e.substr(0,4)).concat(e.substr(5,2)),u=t?"".concat(t.substr(0,4)).concat(t.substr(5,2)):r;d.a.toast.loading(l.p,0),Object(i.g)("getmxbaclist","POST",JSON.stringify({begin:r,end:u,needCount:"true"}),(function(r){Object(c.u)(r)&&(d.a.toast.hide(),s({type:o.c,receivedData:r}),s(b(e,t,a,n)))}))}},b=function(e,t,a,n,s){return function(r){var u=n?n.split(l.B):[],m="".concat(e.substr(0,4)).concat(e.substr(5,2)),g=t?"".concat(t.substr(0,4)).concat(t.substr(5,2)):m;d.a.toast.loading(l.p,0),Object(i.g)("getsubsidiaryledger","POST",JSON.stringify({begin:m,end:g,acid:a,asscategory:n?u[0]:"",assid:n?u[1]:""}),(function(n){Object(c.u)(n)&&(d.a.toast.hide(),r({type:o.d,receivedData:n.data.numberDetails,issuedate:e,endissuedate:t,currentAcid:a,currentAss:s||""}),r(p(["views","queryByAss"],!1)))}))}},f=function(e,t,a,n){return function(r){var o=Object(c.q)(e);d.a.toast.loading(l.p,0),Object(i.g)("getvc","POST",JSON.stringify(Object(s.a)({},o,{vcindex:t})),(function(e){Object(c.u)(e)&&(d.a.toast.hide(),sessionStorage.setItem("lrpzHandleMode","modify"),r(Object(m.j)(e.data)),sessionStorage.setItem("router-from","amountmxb"),a.push("/lrpz"),r(u.e(n)),r(u.d(!0)))}))}},p=function(e,t){return{type:o.a,dataType:e,value:t}},v=function(e,t){return{type:o.b,dataType:e,value:t}},x=function(e,t){return function(a,n){var o="".concat(e.substr(0,4)).concat(e.substr(5,2)),u=t?"".concat(t.substr(0,4)).concat(t.substr(5,2)):o,m=n().amountMxbState.get("mxAssObj").toJS();d.a.toast.loading(l.p,0),Object(i.g)("getAmountMxByAss","POST",JSON.stringify(Object(s.a)({begin:o,end:u},m)),(function(n){Object(c.u)(n)&&(d.a.toast.hide(),a(p(["views","queryByAss"],!0)),a(v("issuedate",e)),a(v("endissuedate",t)),a(v("ledger",Object(r.fromJS)(n.data))),a(p(["views","currentPage"],1)))}))}},y=function(e,t){return function(a,s){var o="".concat(e.substr(0,4)).concat(e.substr(5,2)),u=t?"".concat(t.substr(0,4)).concat(t.substr(5,2)):o,m=s().amountMxbState.get("mxAssObj").toJS();Object(i.g)("getAmountMxTerrByAss","POST",JSON.stringify({begin:o,end:u,assCategory:m.assCategory}),(function(e){Object(c.u)(e)&&function(){var t,s=[],c=[{uuid:"",name:"\u5168\u90e8",assid:"",assname:"\u5168\u90e8"}],i=Object(n.a)(e.data);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.assid==m.assId){o.acDtoList.forEach((function(e){e.childList=[],e.key=e.acid,e.label="".concat(e.acid," ").concat(e.acfullname),e.acid==m.acId&&e.assList.forEach((function(e){e.uuid=e.assid,e.name=e.assname,e.disabled=!!e.disableTime,c.push(e)}))})),s=o.acDtoList;break}}}catch(u){i.e(u)}finally{i.f()}s.unshift({acid:"",acname:"\u5168\u90e8\u79d1\u76ee",key:"",label:"\u5168\u90e8\u79d1\u76ee",childList:[],assList:[]}),a(v("acTree",Object(r.fromJS)(s))),a(v("assTree",Object(r.fromJS)(c)))}()}))}},O=function(){return function(e){e(p(["mxAssObj","acId"],"")),e(p(["mxAssObj","acName"],"\u5168\u90e8\u79d1\u76ee")),e(p(["mxAssObj","assCategoryTwo"],"")),e(p(["mxAssObj","assIdTwo"],"")),e(p(["mxAssObj","assNameTwo"],"\u5168\u90e8"))}}},1308:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(4),s=a(1),c=a(1196),r=Object(s.fromJS)({views:{queryByAss:!1,currentPage:1},issuedate:"",endissuedate:"",currentAcid:"",currentAss:"",mxAssObj:{assCategory:"",assId:"",assName:"",acId:"",acName:"",assCategoryTwo:"",assIdTwo:"",assNameTwo:""},acTree:[],assTree:[],amountmxbAclist:[],ledger:{acfullname:"",acid:"",acname:"",acunit:"",acunitOpen:"",assid:"",assname:"",begincount:0,closeingprice:0,closingDirection:"",closingbalance:0,closingcount:0,credit:0,creditcount:0,creditprice:0,debit:0,debitcount:0,debitprice:0,direction:"",openingDirection:"",openingbalance:"",openingprice:"",jvlist:[]}});function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,a=arguments.length>1?arguments[1]:void 0;return((e={},Object(n.a)(e,c.e,(function(){return r})),Object(n.a)(e,c.c,(function(){return t.set("amountmxbAclist",Object(s.fromJS)(a.receivedData.data))})),Object(n.a)(e,c.d,(function(){return t.update("issuedate",(function(e){return a.issuedate})).update("ledger",(function(e){return e.merge(Object(s.fromJS)(a.receivedData))})).set("currentAcid",a.currentAcid).set("currentAss",a.currentAss).set("endissuedate",a.endissuedate).setIn(["views","currentPage"],1)})),Object(n.a)(e,c.a,(function(){return t.setIn(a.dataType,a.value)})),Object(n.a)(e,c.b,(function(){return t.set(a.dataType,a.value)})),e)[a.type]||function(){return t})()}},980:function(e,t,a){"use strict";a.r(t),a.d(t,"reducer",(function(){return N})),a.d(t,"view",(function(){return j}));a(32),a(55),a(98),a(115),a(61),a(33),a(34),a(31),a(56),a(70),a(29),a(48),a(82),a(76);var n,s,c=a(7),r=a(8),i=a(9),o=a(10),u=a(0),m=a.n(u),l=a(47),d=a(1),g=a(11),b=a(2),f=a(542),p=a(14),v=a(24),x=a(1251),y=Object(v.immutableRenderDecorator)(n=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.idx,e.jv),a=e.acuint,n=(e.issuedate,e.dispatch),s=e.history,c=e.unitDecimalCount,r=e.jvlist,i=t.get("vcdate").replace(/-/g,".");return m.a.createElement("div",{className:"amountmxb-jv",onClick:function(){return n(x.g(t.get("vcdate").slice(0,7),t.get("vcindex"),s,r))}},m.a.createElement("div",{className:"amountmxb-jv-title"},m.a.createElement("span",{className:"amountmxb-jv-abstract"},"".concat(i,"-").concat(t.get("jvabstract")))),m.a.createElement("div",{className:"amountmxb-jv-content"},m.a.createElement("span",{className:"mxb-vcindex"},"\u8bb0 ",t.get("vcindex")," \u53f7"),m.a.createElement(g.a,{className:"mxb-amount",showZero:!0},t.get("jvamount")),m.a.createElement(g.a,{className:"mxb-amount-right",showZero:!0},t.get("balance"))),m.a.createElement("div",{className:"amountmxb-jv-content"},m.a.createElement("span",{className:"mxb-jvdirection"},"credit"==t.get("jvdirection")?"\u8d37":"\u501f"),m.a.createElement("span",{className:"mxb-amount mxb-amount-color"},m.a.createElement(g.a,{showZero:!0,decimalPlaces:c},t.get("jvcount")),a,"\xa0*",m.a.createElement(g.a,{showZero:!0},t.get("price"))),m.a.createElement("span",{className:"mxb-amount mxb-amount-color"},m.a.createElement(g.a,{showZero:!0,decimalPlaces:c},t.get("balancecount")),a,"\xa0*",m.a.createElement(g.a,{showZero:!0},t.get("balanceprice")))))}}]),a}(m.a.Component))||n,O=(a(1444),a(130)),j=(a(1056),Object(l.c)((function(e){return e}))(s=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).scrollerHeight=0,e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(b.a.setTitle({title:"\u6570\u91cf\u660e\u7ec6\u8868"}),"amountYeb"===sessionStorage.getItem("previousPage")&&sessionStorage.removeItem("previousPage"),"cxpz"===sessionStorage.getItem("prevPage")){sessionStorage.removeItem("prevPage");var e=this.props,t=e.dispatch,a=e.amountMxbState,n=a.getIn(["views","queryByAss"]),s=a.get("currentAcid");c=a.get("issuedate"),r=a.get("endissuedate"),n?(t(x.h()),t(x.d(c,r)),t(x.c(c,r))):t(x.f(c,r,s))}var c,r,i=document.getElementsByClassName("scroll-view")[0];this.scrollerHeight=Number(window.getComputedStyle(i).height.replace("px",""))}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.amountMxbState,s=t.allState,c=t.history;b.a.setTitle({title:"\u6570\u91cf\u660e\u7ec6\u8868"});var r=s.get("issues"),i=s.getIn(["systemInfo","unitDecimalCount"]),o=n.get("issuedate"),u=n.get("endissuedate"),l=r.findIndex((function(e){return e.get("value")===o})),v=r.slice(0,l),j=n.get("ledger"),h=j.get("jvlist"),E=[j.get("acid"),j.get("acfullname")].join("_"),N=j.get("acid"),A=j.get("assid"),T=j.get("acuint"),S=n.get("amountmxbAclist"),w=n.get("currentAcid"),I=S&&S.find((function(e){return e.get("acid")==w})),C=n.get("currentAss"),B=I?I.get("asslist"):Object(d.fromJS)([]),k=C||"\u5168\u90e8",D=C?B.filter((function(e){return e.get("assid")==C.split("_")[1]})).getIn([0,"disableTime"]):"",M=B.map((function(e){return{key:e.get("asscategory")+"_"+e.get("assid")+"_"+e.get("assname"),value:e.get("asscategory")+p.B+e.get("assid")+p.B+e.get("assname")}})),_=[],J=w&&w.length>4?w.substr(0,4):w;S.map((function(e){0==e.get("acid").indexOf(J)&&_.push({key:e.get("acid")+" "+e.get("acname"),value:e.get("acid")})}));var P=n.getIn(["views","queryByAss"]),Z=n.get("mxAssObj"),L=Z.get("assCategory"),z=Z.get("assId"),H=Z.get("assName"),q=Z.get("acId"),U=Z.get("acName"),G=Z.get("assCategoryTwo"),X=Z.get("assIdTwo"),R=Z.get("assNameTwo"),Y=n.get("acTree").toJS(),F=n.get("assTree").toJS(),K=function(e,t){P?(a(x.h()),a(x.d(e,t)),a(x.c(e,t))):a(x.f(e,t,w))},V="".concat(o.substr(0,4)).concat(o.substr(5,2)),Q=u?"".concat(u.substr(0,4)).concat(u.substr(5,2)):V,W=function(){return function(e){return e(O.a("excelcountSunOne",{begin:V,end:Q,acid:N,assid:A||"",asscategory:B.getIn([0,"asscategory"])?B.getIn([0,"asscategory"]):""}))}},$=function(){return function(e){return e(O.a("pdfCountSub",{begin:V,end:Q,acid:N,assid:A||"",asscategory:B.getIn([0,"asscategory"])?B.getIn([0,"asscategory"]):""}))}},ee=function(){return function(e){return e(O.a("excelcountSubAll",{begin:V,end:Q}))}};if(P){var te={begin:V,end:Q,acId:q,assCategory:L,assId:z,assCategoryTwo:G,assIdTwo:X};W=function(){return function(e){return e(O.a("excelcountSunOneByAss",te))}},$=function(){return function(e){return e(O.a("pdfCountSubByAss",te))}},ee=function(){return function(e){return e(O.a("excelcountSubAllByAss",te))}}}a(O.i("mxb",$,W,"",ee));var ae=Math.ceil(h.size/20),ne=n.getIn(["views","currentPage"]);return m.a.createElement(g.h,{className:"amountmxb"},m.a.createElement(f.f,{issuedate:o,source:r,callback:function(e){return K(e,u)},onOk:function(e){return K(e.value,u)},showSwitch:!0,endissuedate:u,nextperiods:v,onBeginOk:function(e){K(e.value,"")},onEndOk:function(e){K(o,e.value)},changeEndToBegin:function(){K(o,"")}}),m.a.createElement(g.r,{className:"amountmxb-title",style:{display:P?"none":""}},m.a.createElement("div",{className:"amountmxb-title-acinfo"},m.a.createElement("span",{className:"amountmxb-title-ac amountmxb-title-ac-tip"},"\u79d1\u76ee\u9009\u62e9:"),m.a.createElement("span",{className:"amountmxb-title-ac"},E),m.a.createElement("div",{style:{flex:1,textAlign:"right"}},m.a.createElement(g.v,{district:_,value:"",onOk:function(e){a(x.f(o,u,e.value))}},m.a.createElement(g.l,{type:"triangle"})))),m.a.createElement("div",{className:["amountmxb-title-assinfo",D?"lrb-item-disable":""].join(" ")},m.a.createElement("span",null,"\u8f85\u52a9\u6838\u7b97:"),m.a.createElement("span",{onClick:function(){B.size&&b.a.chosen({source:M,onSuccess:function(e){a(x.f(o,u,w,e.value,e.key))}})}},B.size?k:"\u65e0"),B.size?m.a.createElement(g.l,{type:"arrow-down"}):"")),m.a.createElement(g.r,{className:"amountmxb-title",style:{display:P?"":"none"}},m.a.createElement("div",{className:"amountmxb-title-ac amountmxb-title-ac-tip"},"\u8f85\u52a9\u9879\u76ee\uff1a","".concat(L,"_").concat(z," ").concat(H)),m.a.createElement(g.f,{type:"card",district:Y,cardList:F,onChange:function(e){var t=e.acid;a(x.a(["mxAssObj","acId"],t)),a(x.a(["mxAssObj","acName"],e.acname));var n=[{uuid:"",name:"\u5168\u90e8",assid:"",assname:"\u5168\u90e8"}];e.assList.forEach((function(e){e.uuid=e.assid,e.name=e.assname,e.disabled=!!e.disableTime,n.push(e)})),a(x.b("assTree",Object(d.fromJS)(n))),a(x.c(o,u))},onOk:function(e){a(x.a(["mxAssObj","assIdTwo"],e[0].assid)),a(x.a(["mxAssObj","assNameTwo"],e[0].assname)),a(x.c(o,u))},value:q,cardValue:[X]},m.a.createElement(g.r,{className:"amountmxb-title-assinfo"},m.a.createElement("span",null,"\u79d1\u76ee\u9009\u62e9\uff1a","".concat(q," ").concat(U),G?"_".concat(G):"",X?"-".concat(X," ").concat(R):""),m.a.createElement(g.l,{type:"triangle"})))),m.a.createElement(g.r,{className:"amountmxb-main-top"},m.a.createElement("span",{className:"amountmxb-main-amount-odd"},"\u671f\u521d",m.a.createElement("span",{className:"amountmxb-main-amount-odd-direction"},"(".concat("debit"===j.get("openingDirection")?"\u501f":"\u8d37","\u65b9)"))),m.a.createElement("span",{className:"amountmxb-main-amount"},m.a.createElement(g.a,{showZero:!0},j.get("openingbalance")),m.a.createElement("span",{className:"mxb-amount-color"},m.a.createElement(g.a,{showZero:!0,decimalPlaces:i},j.get("begincount")),j.get("acuint"),"\xa0*",m.a.createElement(g.a,{showZero:!0},j.get("openingprice"))))),m.a.createElement(g.s,{flex:"1",uniqueKey:"amountmxb-scroll",savePosition:!0,onScroll:function(t){t.target.scrollTop+100+e.scrollerHeight>=1570*ne&&ne<ae&&a(x.a(["views","currentPage"],ne+1))}},m.a.createElement("ul",{className:"amountmxb-main-list"},(h||[]).slice(0,20*ne).map((function(e,t){return m.a.createElement(y,{idx:t,key:t,jv:e,acuint:T,issuedate:o,dispatch:a,history:c,unitDecimalCount:i,jvlist:h})})),h.size?"":m.a.createElement("div",{className:"mxb-no-vc"},"\u6682\u65e0\u51ed\u8bc1"))),m.a.createElement(g.r,{className:"amountmxb-main-top"},m.a.createElement("span",{className:"amountmxb-main-amount-odd"},"\u671f\u672b",m.a.createElement("span",{className:"amountmxb-main-amount-odd-direction"},"(".concat("debit"===j.get("closingDirection")?"\u501f":"\u8d37","\u65b9)"))),m.a.createElement("span",{className:"amountmxb-main-amount"},m.a.createElement(g.a,{showZero:!0},j.get("closingbalance")),m.a.createElement("span",{className:"mxb-amount-color"},m.a.createElement(g.a,{showZero:!0,decimalPlaces:i},j.get("closingcount")),j.get("acuint"),"\xa0*",m.a.createElement(g.a,{showZero:!0},j.get("closeingprice"))))))}}]),a}(m.a.Component))||s),h=a(1308),E=a(1074),N={amountMxbState:h.a,lrpzState:E.a}}}]);