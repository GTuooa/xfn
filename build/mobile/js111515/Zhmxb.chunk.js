(this.webpackJsonpfannix=this.webpackJsonpfannix||[]).push([[122,8],{1039:function(t,e,a){"use strict";a.d(e,"a",(function(){return d})),a.d(e,"b",(function(){return l}));var n=a(4),c=a(1),r=a(57),u=a(14),i=a(12),s=a(2),o=Object(c.fromJS)({data:{categoryType:""},preData:{preAmount:0,receiveAmount:0},cxlsData:{selectedIndex:"0",idx:0},lsmxbData:{selectedIndex:"0",idx:0},zhmxbData:{selectedIndex:"0",idx:0},wlmxbData:{selectedIndex:"0",idx:0}});function d(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(n.a)(t,g.GET_YLLS_SINGLE_ACCOUNT,(function(){var t=sessionStorage.getItem("ylPage");return e.set("data",Object(c.fromJS)(a.receivedData)).setIn(["".concat(t,"Data"),"selectedIndex"],a.selectedIndex).setIn(["".concat(t,"Data"),"idx"],a.idx)})),Object(n.a)(t,g.GET_YLLS_PREAMOUNT,(function(){return e.setIn(["preData","preAmount"],a.data.preAmount).setIn(["preData","receiveAmount"],a.data.amount)})),Object(n.a)(t,g.GET_YLLS_UNTREATEDAMOUNT,(function(){var t=0,n=0;return({accumulationAmount:function(){t=a.receivedData[a.amountType]+e.getIn(["data","acPayment","personAccumulationAmount"]),e=e.setIn(["data","accumulationAmount"],t)},socialSecurityAmount:function(){n=a.receivedData[a.amountType]+e.getIn(["data","acPayment","personSocialSecurityAmount"]),e=e.setIn(["data","socialSecurityAmount"],n)}}[a.amountType]||function(){return null})(),e})),t)[a.type]||function(){return e})()}var l={getYllsSingleAccount:function(t,e,a,n,c){return function(u){s.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(r.a)("getRunningBusiness","GET","uuid=".concat(a),(function(a){s.a.toast.hide(),Object(i.u)(a)&&(u({type:g.GET_YLLS_SINGLE_ACCOUNT,receivedData:a.data.result,selectedIndex:e,idx:n}),c&&t.push("/ylls"))}))}},getXczcAccumulationAmount:function(){return function(t,e){var a=e().yllsState,n=a.getIn(["data","categoryUuid"]),c=a.getIn(["data","runningDate"]);s.a.toast.loading(u.p,0),Object(r.a)("getPaymentInfo","POST",JSON.stringify({categoryUuid:n,runningDate:c,acType:"AC_GJJ",accumulationAcId:"",accumulationAssId1:"",accumulationCategory1:"",accumulationAssId2:"",accumulationCategory2:""}),(function(e){s.a.toast.hide(),Object(i.u)(e)&&t({type:g.GET_YLLS_UNTREATEDAMOUNT,receivedData:e.data.result,amountType:"accumulationAmount"})}))}},getXczcSocialSecurityAmount:function(){return function(t,e){var a=e().yllsState,n=a.getIn(["data","categoryUuid"]),c=a.getIn(["data","runningDate"]);Object(r.a)("getPaymentInfo","POST",JSON.stringify({categoryUuid:n,runningDate:c,acType:"AC_SB",socialSecurityAcId:"",socialSecurityAssId1:"",socialSecurityCategory1:"",socialSecurityAssId2:"",socialSecurityCategory2:""}),(function(e){Object(i.u)(e)&&t({type:g.GET_YLLS_UNTREATEDAMOUNT,receivedData:e.data.result,amountType:"socialSecurityAmount"})}))}}},g={GET_YLLS_SINGLE_ACCOUNT:"GET_YLLS_SINGLE_ACCOUNT",GET_YLLS_PREAMOUNT:"GET_YLLS_PREAMOUNT",GET_YLLS_UNTREATEDAMOUNT:"GET_YLLS_UNTREATEDAMOUNT"}},1049:function(t,e,a){"use strict";a.d(e,"b",(function(){return S})),a.d(e,"a",(function(){return b}));a(32),a(223),a(55),a(61),a(31),a(219),a(116),a(70),a(29),a(82),a(76);var n=a(51),c=a(4),r=a(1),u=a(57),i=a(17),s=a(14),o=a(12),d=a(2),l=a(1041),g=a(552),f=a(130),m={LB_YYSR:"acBusinessIncome",LB_YYZC:"acBusinessExpense",LB_YYWSR:"acBusinessOutIncome",LB_YYWZC:"acBusinessOutExpense",LB_JK:"acLoan",LB_TZ:"acInvest",LB_ZB:"acCapital",LB_CQZC:"acAssets",LB_FYZC:"acCost",LB_ZSKX:"acTemporaryReceipt",LB_ZFKX:"acTemporaryPay",LB_XCZC:"acPayment",LB_SFZC:"acTax"},p=Object(r.fromJS)({views:{accountUuid:"",accountName:"\u5168\u90e8",currentPage:1,pageCount:1,year:"",month:"",issues:[{value:"2018-01",key:""}],isLoading:!1,currentRouter:"CXLS",fromRouter:"",selectedIndex:"CXLS",isAccount:!1},period:{closedmonth:"",closedyear:"",firstmonth:"",firstyear:"",lastmonth:"",lastyear:""},dataList:[],ylDataList:[],accountList:[],data:{amount:"",runningAbstract:"",runningDate:"",cardUuid:"",accountUuid:""},categoryList:{assTypeList:[],AC_AR:[],AC_PP:[],AC_ADV:[],AC_AP:[]},hsgl:{activeTab:0,categoryList:[{key:"\u6536\u4ed8\u7ba1\u7406"}],contactsCardList:[{key:"\u5168\u90e8\u5f80\u6765\u5355\u4f4d",value:"".concat(s.B).concat(s.B,"\u5168\u90e8\u5f80\u6765\u5355\u4f4d")}],stockCardList:[{key:"\u5168\u90e8\u5b58\u8d27",value:"".concat(s.B).concat(s.B,"\u5168\u90e8\u5b58\u8d27")}],contactsCard:{uuid:"",code:"",name:"\u5168\u90e8\u5f80\u6765\u5355\u4f4d"},stockCard:{uuid:"",code:"",name:"\u5168\u90e8\u5b58\u8d27"},cardNameList:[],isCheck:!1,billMakeOutType:"",billAuthType:"",runningState:"",dataList:[]},projectCardList:[]});function S(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((t={},Object(c.a)(t,L.INIT_CXLS,(function(){return p})),Object(c.a)(t,L.GETPERIOD_AND_BUSINESSLIST,(function(){var t=a.receivedData.periodDtoJson,n=(Number(t.firstyear),Number(t.lastyear),Number(t.firstmonth),Number(t.lastmonth),Number(t.openedyear)),c=Number(t.openedmonth),u=c<10?"0"+c:c,i=[];return a.receivedData.result.childList.forEach((function(t,e){i.push({idx:e,uuid:t.uuid})})),e.set("period",Object(r.fromJS)(a.period)).setIn(["views","year"],n).setIn(["views","month"],u).setIn(["views","issues"],Object(r.fromJS)(a.issues)).setIn(["views","pageCount"],a.receivedData.pageCount).setIn(["views","currentRouter"],"CXLS").set("dataList",Object(r.fromJS)(a.receivedData.result.childList)).set("ylDataList",Object(r.fromJS)(i))})),Object(c.a)(t,L.GET_BUSINESSLIST,(function(){if(a.shouldConcat){var t=e.get("dataList").toJS().concat(a.receivedData.result.childList),n=[];t.forEach((function(t,e){n.push({idx:e,uuid:t.uuid})})),e=e.set("dataList",Object(r.fromJS)(t)).set("ylDataList",Object(r.fromJS)(n))}else{var c=[];a.receivedData.result.childList.forEach((function(t,e){c.push({idx:e,uuid:t.uuid})})),e=e.set("dataList",Object(r.fromJS)(a.receivedData.result.childList)).set("ylDataList",Object(r.fromJS)(c))}return e.setIn(["views","currentPage"],a.currentPage).setIn(["views","pageCount"],a.receivedData.pageCount)})),Object(c.a)(t,L.CXACCOUNT_SELECT_LSALL,(function(){switch(a.selectedIndex){case"CXLS":e=e.update("dataList",(function(t){return t.map((function(t){return t.set("selected",a.value)}))}));break;case"CX_HSGL":e=e.updateIn(["hsgl","dataList"],(function(t){return t.map((function(t){return t.set("selected",a.value)}))}))}return e})),Object(c.a)(t,L.CXACCOUNT_SELECT_LS,(function(){return e.updateIn(["dataList",a.idx,"selected"],(function(t){return!t}))})),Object(c.a)(t,L.GET_CXLS_RUNNING_ACCOUNT,(function(){var t=[];return a.receivedData.resultList[0]&&a.receivedData.resultList[0].childList.forEach((function(e){t.push({key:e.name,value:"".concat(e.uuid).concat(s.B).concat(e.name)})})),e.set("accountList",Object(r.fromJS)(t))})),Object(c.a)(t,L.CHANGE_CXLS_DATA,(function(){return e.setIn(a.dataType,a.value)})),Object(c.a)(t,L.GET_CXLS_SINGLE,(function(){var t=a.receivedData.categoryType,n=m[t];switch(a.toRouter){case"SFGL":var c=a.receivedData.usedCard,u=a.receivedData.runningDate?a.receivedData.runningDate:"",i=Math.abs(a.receivedData.notHandleAmount),s=a.receivedData.runningAbstract?a.receivedData.runningAbstract:"";e=e.setIn(["data","amount"],i).setIn(["data","notHandleAmount"],i).setIn(["data","runningAbstract"],s).setIn(["data","uuidList"],Object(r.fromJS)([{uuid:a.uuid,assType:a.receivedData.assType}])).setIn(["data","runningDate"],u).setIn(["data","contactsCardRange"],Object(r.fromJS)(c)).setIn(["data","cardUuid"],c.uuid).setIn(["data","amountTitle"],a.amountTitle);break;case"JZCB":var o=[],d=[],l=[],g=a.receivedData.childList;g.length>1?g.forEach((function(t){var e=t.acBusinessIncome.stockCardList[0];t.canBeCarryover&&!t.beCarryover&&(l.push(t.uuid),o.push(e),d.push({uuid:e.uuid,amount:""}),e.amount=t.amount)})):(l.push(a.receivedData.uuid),o=a.receivedData[n].stockCardList,d.push({uuid:o[0].uuid,amount:""})),e=e.setIn(["data","runningAbstract"],a.receivedData.runningAbstract).setIn(["data","categoryUuid"],a.receivedData.categoryUuid).setIn(["data","uuidList"],Object(r.fromJS)(l)).setIn(["data","runningDate"],a.receivedData.runningDate).setIn(["data","runningState"],a.receivedData.runningState).setIn(["data","stockCardList"],Object(r.fromJS)(o)).setIn(["data","cardList"],Object(r.fromJS)(d));break;case"KJFP":var f="BILL_MAKE_OUT_TYPE_XS";"STATE_YYSR_TS"==a.receivedData.runningState&&(f="BILL_MAKE_OUT_TYPE_TS"),e=e.setIn(["data","runningAbstract"],a.receivedData.runningAbstract).setIn(["data","categoryUuid"],a.receivedData.categoryUuid).setIn(["data","uuidList"],Object(r.fromJS)([a.receivedData.uuid])).setIn(["data","runningDate"],a.receivedData.runningDate).setIn(["data","billMakeOutType"],f);break;case"FPRZ":var p="BILL_AUTH_TYPE_CG";"STATE_YYZC_TG"==a.receivedData.runningState&&(p="BILL_AUTH_TYPE_TG"),e=e.setIn(["data","runningAbstract"],a.receivedData.runningAbstract).setIn(["data","categoryUuid"],a.receivedData.categoryUuid).setIn(["data","uuidList"],Object(r.fromJS)([a.receivedData.uuid])).setIn(["data","runningDate"],a.receivedData.runningDate).setIn(["data","billAuthType"],p).setIn(["data","authBusinessUuid"],"");break;case"JZSY":var S=Number(a.receivedData.amount)-Number(a.receivedData.tax);e=e.setIn(["data","runningAbstract"],"\u5904\u7f6e\u635f\u76ca").setIn(["data","categoryUuid"],a.receivedData.categoryUuid).setIn(["data","categoryName"],a.receivedData.categoryName).setIn(["data","businessList"],Object(r.fromJS)([a.receivedData])).setIn(["data","businessList",0,"beSelect"],!0).setIn(["data","runningDate"],a.receivedData.runningDate).setIn(["data","amount"],S).setIn(["data","acAssets","originalAssetsAmount"],"").setIn(["data","acAssets","depreciationAmount"],"").setIn(["data","beProject"],a.receivedData.beProject).setIn(["data","usedProject"],a.receivedData.beProject).setIn(["data","projectRange"],a.receivedData.projectRange).setIn(["data","projectCard"],Object(r.fromJS)([{amount:""}]));break;default:console.log("\u83b7\u53d6\u5355\u6761\u6570\u636e\u5931\u8d25")}return e.setIn(["views","currentRouter"],a.toRouter).setIn(["views","fromRouter"],a.fromRouter)})),Object(c.a)(t,L.CXLS_CXHSGL_ALLBATCH,(function(){var t=e.getIn(["hsgl","dataList"]);switch(a.fromRouter){case"CX_SFGL":var n=e.getIn(["hsgl","contactsCard"]),c=new o.a(new Date).valueOf(),u=[],i=0,s="\u6536\u6b3e\u91d1\u989d";t.forEach((function(t){if(t.get("selected")){u.push({uuid:t.get("uuid"),assType:t.get("assType")});var e=t.get("flowType"),a=t.get("direction"),n=Number(t.get("notHandleAmount")),c=t.get("runningState");"STATE_YYSR_TS"!==c&&"STATE_YYZC_TG"!==c||(n=-Math.abs(n)),"FLOW_INADVANCE"==e?"credit"==a?i+=n:i-=n:"credit"==a?i-=n:i+=n}})),i<0&&(s="\u4ed8\u6b3e\u91d1\u989d"),e=e.setIn(["data","amount"],Math.abs(i)).setIn(["data","runningAbstract"],"").setIn(["data","uuidList"],Object(r.fromJS)(u)).setIn(["data","runningDate"],c).setIn(["data","contactsCardRange"],n).setIn(["data","cardUuid"],n.get("uuid")).setIn(["data","amountTitle"],s).setIn(["views","currentRouter"],"SFGL").setIn(["views","selectedIndex"],"CX_SFGL");break;case"CX_JZCB":var d=[],l=0;t.forEach((function(t){t.get("selected")&&(d.push(t.get("uuid")),l+=Number(t.get("amount")))}));var g=e.getIn(["hsgl","stockCard"]).set("amount",l),f=[{uuid:g.get("uuid"),amount:""}];e=e.setIn(["data","runningAbstract"],"").setIn(["data","categoryUuid"],"").setIn(["data","uuidList"],Object(r.fromJS)(d)).setIn(["data","runningState"],e.getIn(["hsgl","runningState"])).setIn(["data","stockCardList"],Object(r.fromJS)([g])).setIn(["data","cardList"],Object(r.fromJS)(f)).setIn(["views","currentRouter"],"JZCB").setIn(["views","selectedIndex"],"CX_JZCB");break;case"CX_KJFP":var m=[];t.forEach((function(t){t.get("selected")&&m.push(t.get("uuid"))})),e=e.setIn(["data","runningAbstract"],"").setIn(["data","categoryUuid"],"").setIn(["data","uuidList"],Object(r.fromJS)(m)).setIn(["data","billMakeOutType"],e.getIn(["hsgl","billMakeOutType"])).setIn(["views","currentRouter"],"KJFP").setIn(["views","selectedIndex"],"CX_KJFP");break;case"CX_FPRZ":var p=[];t.forEach((function(t){t.get("selected")&&p.push(t.get("uuid"))})),e=e.setIn(["data","runningAbstract"],"").setIn(["data","categoryUuid"],"").setIn(["data","uuidList"],Object(r.fromJS)(p)).setIn(["data","billAuthType"],e.getIn(["hsgl","billAuthType"])).setIn(["data","authBusinessUuid"],"").setIn(["views","currentRouter"],"FPRZ").setIn(["views","selectedIndex"],"CX_FPRZ");break;default:console.log("\u4e00\u952e\u6570\u636e\u5931\u8d25")}return e.setIn(["views","fromRouter"],"CX_HSGL")})),Object(c.a)(t,L.GET_CXLS_HSGL_CARDLIST,(function(){var t=[],n=[],c="stockCardList"==a.cardType?"\u5168\u90e8\u5b58\u8d27":"\u5168\u90e8\u5f80\u6765\u5355\u4f4d";return a.data.forEach((function(e){t.push({key:"".concat(e.code," ").concat(e.name),value:"".concat(e.uuid).concat(s.B).concat(e.code).concat(s.B).concat(e.name)}),n.push("".concat(e.code," ").concat(e.name))})),t.unshift({key:c,value:"".concat(s.B).concat(s.B).concat(c)}),n.unshift(c),e.setIn(["hsgl",a.cardType],Object(r.fromJS)(t)).setIn(["hsgl","cardNameList"],Object(r.fromJS)(n))})),Object(c.a)(t,L.CHANGE_CXLS_CARD,(function(){var t=a.value.split(s.B),n={};return n.uuid=t[0],n.code=t[1],n.name=t[2],e.setIn(["hsgl",a.dataType],Object(r.fromJS)(n))})),Object(c.a)(t,L.CXHSGL_TO_YLDATA,(function(){var t=[];return e.getIn(["hsgl","dataList"]).forEach((function(e,n){switch(a.fromRouter){case"CX_SFGL":e.get("beOpened")||t.push({idx:n,uuid:e.get("uuid")});break;case"CX_JZCB":t.push({idx:n,uuid:e.get("parentUuid")?e.get("parentUuid"):e.get("uuid")});break;case"CX_KJFP":case"CX_FPRZ":t.push({idx:n,uuid:e.get("parentUuid")});break;default:console.log("\u751f\u6210\u9884\u89c8\u6d41\u6c34\u6570\u636e\u5931\u8d25")}})),e.set("ylDataList",Object(r.fromJS)(t))})),Object(c.a)(t,L.CXLS_SFGL_CATEGORYLIST,(function(){var t=e.getIn(["categoryList","assTypeList"]).toJS(),n=[];return t.push({assType:a.assType,uuid:a.uuid}),a.data.forEach((function(t){n.push({key:"".concat(t.name),value:"".concat(t.uuid).concat(s.B).concat(t.name)})})),e.setIn(["categoryList",a.assType],Object(r.fromJS)(n)).setIn(["categoryList","assTypeList"],Object(r.fromJS)(t))})),Object(c.a)(t,L.CHANGE_CXLS_SFGL_CATEGORY,(function(){var t=a.value.split(s.B),n=(e.getIn(["data","uuidList"]),e.getIn(["categoryList","assTypeList",a.idx,"uuid"]));return e.setIn(["categoryList","assTypeList",a.idx,"name"],t[1]).setIn(["categoryList","assTypeList",a.idx,"categoryUuid"],t[0]).updateIn(["data","uuidList"],(function(e){return e.map((function(e){return e.get("uuid")==n&&(e=e.set("categoryUuid",t[0]).set("beOpened",!0)),e}))}))})),Object(c.a)(t,L.CXLS_GET_PROJECT_CARDLIST,(function(){var t=[];return a.receivedData.forEach((function(e,a){t.push({key:"".concat(e.code," ").concat(e.name),value:"".concat(e.uuid).concat(s.B).concat(e.code).concat(s.B).concat(e.name)})})),e.set("projectCardList",Object(r.fromJS)(t))})),t)[a.type]||function(){return e})()}var b={getPeriodAndBusinessList:function(){return function(t){d.a.toast.loading(s.p,0),Object(u.a)("getRunningBusinessList","POST",JSON.stringify({accountUuid:"",currentPage:1,getPeriod:"true",month:"",pageSize:20,year:""}),(function(e){if(Object(o.u)(e)){d.a.toast.hide();var a=e.data.periodDtoJson?t(f.d(e.data.periodDtoJson)):[];t({type:L.GETPERIOD_AND_BUSINESSLIST,receivedData:e.data,issues:a})}}))}},getBusinessList:function(t,e,a){return function(n,c){var r=c().cxAccountState.get("views"),i=r.get("year"),l=r.get("month"),g=r.get("isAccount"),f=r.get("accountUuid");!e&&d.a.toast.loading(s.p,0),Object(u.a)("getRunningBusinessList","POST",JSON.stringify({isAccount:g,accountUuid:f,currentPage:t,getPeriod:"true",month:l,pageSize:20,year:i}),(function(c){!e&&d.a.toast.hide(),Object(o.u)(c)&&(e&&a.setState({isLoading:!1}),g&&c.data.result.msg.length&&d.a.toast.info(c.data.result.msg),n({type:L.GET_BUSINESSLIST,receivedData:c.data,currentPage:t,shouldConcat:e}))}))}},selectLsAll:function(t,e){return{type:L.CXACCOUNT_SELECT_LSALL,selectedIndex:t,value:e}},selectLs:function(t,e){return{type:L.CXACCOUNT_SELECT_LS,selectedIndex:t,idx:e}},deleteLs:function(t,e){return function(a){d.a.Confirm({message:"\u786e\u5b9a\u5220\u9664\u5417",title:"\u63d0\u793a",buttonLabels:["\u53d6\u6d88","\u786e\u5b9a"],onSuccess:function(n){if(1===n.buttonIndex){var c=t.filter((function(t){return t.get("selected")})).map((function(t){return t.get("uuid")}));d.a.toast.loading(s.p,0),Object(u.a)("deleteRunningbusiness","POST",JSON.stringify({deleteList:c}),(function(t){if(Object(o.u)(t)){if(t.data.errorList.length){var n=t.data.errorList.reduce((function(t,e){return t+","+e}));d.a.Alert(n)}a(b.recapture(e))}}))}},onFail:function(t){return alert(t)}})}},recapture:function(t){return function(e){switch(t){case"CXLS":e(b.getBusinessList(1,!1));break;case"CX_SFGL":e(b.getManageList());break;case"CX_KJFP":e(b.getKjfpList());break;case"CX_FPRZ":e(b.getFprzList());break;case"CX_JZCB":e(b.getFirstStockCardList()),e(b.getJzcbList());break;default:console.log("\u91cd\u65b0\u83b7\u53d6\u6570\u636e\u5931\u8d25")}}},getRunningAccount:function(){return function(t){Object(u.a)("getRunningAccount","GET","",(function(e){Object(o.u)(e)&&t({type:L.GET_CXLS_RUNNING_ACCOUNT,receivedData:e.data})}))}},getCxlsSingle:function(t,e,a,n){return function(c){d.a.toast.loading(s.p,0),Object(u.a)("getRunningBusiness","GET","uuid=".concat(t),(function(r){d.a.toast.hide(),Object(o.u)(r)&&c({type:L.GET_CXLS_SINGLE,receivedData:r.data.result,fromRouter:e,toRouter:a,amountTitle:n,uuid:t})}))}},changeCxlsData:function(t,e){return{type:L.CHANGE_CXLS_DATA,dataType:t,value:e}},saveSfgl:function(){return function(t,e){var a=e().cxAccountState,c=a.get("data").toJS(),i=c.amount,l=c.notHandleAmount,g=a.getIn(["categoryList","assTypeList"]);return""==c.accountUuid?d.a.toast.info("\u8bf7\u9009\u62e9\u8d26\u6237"):""==c.runningAbstract?d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981"):c.runningAbstract.length>s.y?d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(s.y,"\u4e2a\u5b57\u7b26")):i<=0?d.a.toast.info("\u8bf7\u586b\u5199\u91d1\u989d"):i>l?d.a.toast.info("\u6536\u4ed8\u6b3e\u91d1\u989d\u5927\u4e8e\u5b9e\u9645\u53d1\u751f\u91d1\u989d"):g.size&&g.some((function(t){return!t.get("categoryUuid")}))?d.a.toast.info("\u8bf7\u9009\u62e9\u6240\u6709\u7684\u671f\u521d\u7c7b\u522b"):(d.a.toast.loading(s.p,0),void Object(u.a)("insertRunningpayment","POST",JSON.stringify(Object(n.a)({},c)),(function(e){if(d.a.toast.hide(),Object(o.u)(e)){d.a.toast.success("\u4fdd\u5b58\u6210\u529f",2);var n=a.getIn(["views","fromRouter"]);t(b.changeCxlsData(["views","currentRouter"],n)),t(b.changeCxlsData(["categoryList","assTypeList"],Object(r.fromJS)([]))),"CXLS"==n&&t(b.getBusinessList(1,!1))}})))}},saveJzcb:function(){return function(t,e){var a=e().cxAccountState,c=a.get("data").toJS(),r=c.cardList,i=c.uuidList,l=[],g=[];return r.forEach((function(t,e){t.amount>0&&(l.push(t),g.push(i[e]))})),""==c.runningAbstract?d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981"):c.runningAbstract.length>s.y?d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(s.y,"\u4e2a\u5b57\u7b26")):0==g.length?d.a.toast.info("\u8bf7\u586b\u5199\u6210\u672c\u91d1\u989d"):(d.a.toast.loading(s.p,0),void Object(u.a)("insertCarryoverItem","POST",JSON.stringify(Object(n.a)({},c,{cardList:l,uuidList:g})),(function(e){if(d.a.toast.hide(),Object(o.u)(e)){var n=a.getIn(["views","fromRouter"]);t(b.changeCxlsData(["views","currentRouter"],n)),"CXLS"==n&&t(b.getBusinessList(1,!1))}})))}},saveKjfp:function(){return function(t,e){var a=e().cxAccountState,c=a.get("data").toJS();return""==c.runningAbstract?d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981"):c.runningAbstract.length>s.y?d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(s.y,"\u4e2a\u5b57\u7b26")):(d.a.toast.loading(s.p,0),void Object(u.a)("insertBusinessMakeoutItem","POST",JSON.stringify(Object(n.a)({},c)),(function(e){if(d.a.toast.hide(),Object(o.u)(e)){var n=a.getIn(["views","fromRouter"]);t(b.changeCxlsData(["views","currentRouter"],n)),"CXLS"==n&&t(b.getBusinessList(1,!1))}})))}},saveFprz:function(){return function(t,e){var a=e().cxAccountState,c=a.get("data").toJS();return""==c.runningAbstract?d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981"):c.runningAbstract.length>s.y?d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(s.y,"\u4e2a\u5b57\u7b26")):(d.a.toast.loading(s.p,0),void Object(u.a)("insertBusinessAuthItem","POST",JSON.stringify(Object(n.a)({},c)),(function(e){if(d.a.toast.hide(),Object(o.u)(e)){var n=a.getIn(["views","fromRouter"]);t(b.changeCxlsData(["views","currentRouter"],n)),"CXLS"==n&&t(b.getBusinessList(1,!1))}})))}},saveJzsy:function(){return function(t,e){var a=e().cxAccountState,c=a.get("data").toJS(),r=c.usedProject,i=c.projectCard;if(r&&!i.every((function(t){return t.uuid})))return d.a.toast.info("\u6709\u672a\u9009\u62e9\u7684\u9879\u76ee\u5361\u7247");if(""==c.runningAbstract)return d.a.toast.info("\u8bf7\u586b\u5199\u6458\u8981");if(c.runningAbstract.length>s.y)return d.a.toast.info("\u6458\u8981\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(s.y,"\u4e2a\u5b57\u7b26"));var o=c.acAssets.originalAssetsAmount,l=c.acAssets.depreciationAmount;return o<=0?d.a.toast.info("\u8bf7\u586b\u5199\u8d44\u4ea7\u539f\u503c"):l<=0?d.a.toast.info("\u8bf7\u586b\u5199\u7d2f\u8ba1\u6298\u65e7"):Number(l)>Number(o)?d.a.toast.info("\u6298\u65e7\u989d\u4e0d\u80fd\u5927\u4e8e\u539f\u503c"):(d.a.toast.loading(s.p,0),void Object(u.a)("insertJzsy","POST",JSON.stringify(Object(n.a)({},c,{enclosureList:[]})),(function(e){if(d.a.toast.hide(),0!==e.code)d.a.toast.fail("".concat(e.code," ").concat(e.message));else{var n=a.getIn(["views","fromRouter"]);t(b.changeCxlsData(["views","currentRouter"],n)),"CXLS"==n&&t(b.getBusinessList(1,!1))}})))}},insertRunningBusinessVc:function(t){return function(e,a){d.a.toast.loading(s.p,0),Object(u.a)("insertRunningBusinessVc","POST",JSON.stringify({uuidList:[t]}),(function(t){if(d.a.toast.hide(),Object(o.u)(t)){if(t.data.result.length){var n=t.data.result.reduce((function(t,e){return t+","+e}));return void d.a.Alert(n)}var c=a().cxAccountState.getIn(["views","selectedIndex"]);e(b.recapture(c))}}))}},deleteRunningBusinessVc:function(t,e,a){return function(n,c){d.a.toast.loading(s.p,0),Object(u.a)("deletevc","POST",JSON.stringify({year:t,month:e,vcindexlist:a}),(function(t){if(d.a.toast.hide(),Object(o.u)(t)){var e=c().cxAccountState.getIn(["views","selectedIndex"]);n(b.recapture(e))}}))}},getBusinessManagerCardList:function(){return function(t){Object(u.a)("getBusinessManagerCardList","POST",JSON.stringify({}),(function(e){Object(o.u)(e)&&(t({type:L.GET_CXLS_HSGL_CARDLIST,data:e.data.cardList,cardType:"contactsCardList"}),t(b.changeCxlsData(["hsgl","categoryList"],Object(r.fromJS)(e.data.categoryList))))}))}},changeCxlsCard:function(t,e){return{type:L.CHANGE_CXLS_CARD,dataType:t,value:e}},getManageList:function(){return function(t,e){var a=e().cxAccountState.get("hsgl"),n=a.getIn(["contactsCard","uuid"]),c=a.get("isCheck");d.a.toast.loading(s.p,0),Object(u.a)("getManageList","POST",JSON.stringify({cardUuid:n,isCheck:""!=n&&c}),(function(e){d.a.toast.hide(),Object(o.u)(e)&&t(b.changeCxlsData(["hsgl","dataList"],Object(r.fromJS)(e.data.result.childList)))}))}},getKjfpList:function(){return function(t,e){var a=e().cxAccountState.get("hsgl").get("billMakeOutType");d.a.toast.loading(s.p,0),Object(u.a)("getBusinessMakeoutList","POST",JSON.stringify({billMakeOutType:a,categoryUuid:"",runningDate:"",searchContent:"",searchType:""}),(function(e){d.a.toast.hide(),Object(o.u)(e)&&t(b.changeCxlsData(["hsgl","dataList"],Object(r.fromJS)(e.data.result)))}))}},getFprzList:function(){return function(t,e){var a=e().cxAccountState.get("hsgl").get("billAuthType");d.a.toast.loading(s.p,0),Object(u.a)("getBusinessAuthList","POST",JSON.stringify({billAuthType:a,categoryUuid:"",runningDate:"",searchContent:"",searchType:""}),(function(e){d.a.toast.hide(),Object(o.u)(e)&&t(b.changeCxlsData(["hsgl","dataList"],Object(r.fromJS)(e.data.result)))}))}},getFirstStockCardList:function(){return function(t,e){var a=e().homeState.getIn(["data","userInfo","sobInfo","sobId"]);Object(u.a)("getRunningStockMemberList","POST",JSON.stringify({sobId:a,property:"",listByCategory:"true",categoryUuid:"",subordinateUuid:""}),(function(e){Object(o.u)(e)&&t({type:L.GET_CXLS_HSGL_CARDLIST,data:e.data.resultList,cardType:"stockCardList"})}))}},getJzcbList:function(){return function(t,e){var a=e().cxAccountState.get("hsgl"),n=a.getIn(["stockCard","uuid"]),c=a.get("runningState");d.a.toast.loading(s.p,0),Object(u.a)("getCarryoverList","POST",JSON.stringify({runningDate:"",runningState:c,cardUuid:n,categoryUuid:"",searchContent:"",searchType:""}),(function(e){d.a.toast.hide(),Object(o.u)(e)&&t(b.changeCxlsData(["hsgl","dataList"],Object(r.fromJS)(e.data.result)))}))}},getVcFetch:function(t,e){return function(a){d.a.toast.loading(s.p,0),Object(i.g)("getvc","POST",JSON.stringify({vcindex:t.get("vcIndex"),year:t.get("year"),month:t.get("month")}),(function(t){d.a.toast.hide(),Object(o.u)(t)&&(e.push("/lrpz"),a(Object(l.j)(t.data)),sessionStorage.setItem("from-cxls",!0),a(g.d(!0)))}))}},cxhsglAllBatch:function(t){return{type:L.CXLS_CXHSGL_ALLBATCH,fromRouter:t}},hsglToYlData:function(t){return{type:L.CXHSGL_TO_YLDATA,fromRouter:t}},getSfglCategoryList:function(t,e){return function(a){Object(u.a)("getManagerCategoryList","POST",JSON.stringify({assType:t}),(function(n){Object(o.u)(n)&&a({type:L.CXLS_SFGL_CATEGORYLIST,data:n.data,assType:t,uuid:e})}))}},changeSfglCategory:function(t,e){return{type:L.CHANGE_CXLS_SFGL_CATEGORY,idx:e,value:t}},getProjectCardList:function(t){return function(e,a){var n=a().homeState.getIn(["data","userInfo","sobInfo","sobId"]);d.a.toast.loading(s.p,0),Object(u.a)("getProjectCardList","POST",JSON.stringify({sobId:n,categoryList:t,needCommonCard:!1}),(function(t){d.a.toast.hide(),Object(o.u)(t)&&e({type:L.CXLS_GET_PROJECT_CARDLIST,receivedData:t.data.result})}))}}},L={GETPERIOD_AND_BUSINESSLIST:"GETPERIOD_AND_BUSINESSLIST",CXACCOUNT_SELECT_LSALL:"CXACCOUNT_SELECT_LSALL",CXACCOUNT_SELECT_LS:"CXACCOUNT_SELECT_LS",GET_BUSINESSLIST:"GET_BUSINESSLIST",GET_CXLS_RUNNING_ACCOUNT:"GET_CXLS_RUNNING_ACCOUNT",CHANGE_CXLS_DATA:"CHANGE_CXLS_DATA",GET_CXLS_SINGLE:"GET_CXLS_SINGLE",GET_CXLS_HSGL_CARDLIST:"GET_CXLS_HSGL_CARDLIST",CHANGE_CXLS_CARD:"CHANGE_CXLS_CARD",CXLS_CXHSGL_ALLBATCH:"CXLS_CXHSGL_ALLBATCH",CXHSGL_TO_YLDATA:"CXHSGL_TO_YLDATA",INIT_CXLS:"INIT_CXLS",CXLS_SFGL_CATEGORYLIST:"CXLS_SFGL_CATEGORYLIST",CHANGE_CXLS_SFGL_CATEGORY:"CHANGE_CXLS_SFGL_CATEGORY",CXLS_GET_PROJECT_CARDLIST:"CXLS_GET_PROJECT_CARDLIST"}},1200:function(t,e,a){"use strict";a.d(e,"g",(function(){return n})),a.d(e,"c",(function(){return c})),a.d(e,"h",(function(){return r})),a.d(e,"a",(function(){return u})),a.d(e,"e",(function(){return i})),a.d(e,"d",(function(){return s})),a.d(e,"j",(function(){return o})),a.d(e,"b",(function(){return d})),a.d(e,"k",(function(){return l})),a.d(e,"f",(function(){return g})),a.d(e,"i",(function(){return f}));var n="INIT_MXB",c="GET_MXB_ACLIST",r="REVERSE_LEDGER_JV_LIST",u="CHANGE_MXB_BEGIN_DATE",i="GET_ZH_DETAIL_LIST",s="GET_RUNNING_CATEGORY_DETAIL",o="ZHMX_GET_RUNNING_ACCOUNT",d="CHANGE_ZHMX_COMMON_STRING",l="ZHMX_MENU_DATA",g="GET_ZH_RUNNING_CATEGORY_DETAIL",f="ZHMX_DETAIL_TRIANGLE_SWITCH"},1255:function(t,e,a){"use strict";a.d(e,"f",(function(){return d})),a.d(e,"b",(function(){return g})),a.d(e,"e",(function(){return f})),a.d(e,"d",(function(){return p})),a.d(e,"a",(function(){return S})),a.d(e,"c",(function(){return b}));a(32),a(29),a(82);var n=a(220),c=a(12),r=a(57),u=a(1200),i=(a(1090),a(1041),a(2)),s=a(14),o=a(130),d=function(t){return function(e,a){e(m(t,"","",!0)),i.a.toast.loading(s.p,0);a().zhmxbState;Object(r.a)("getAccountDetailList","POST",JSON.stringify({year:t?t.substr(0,4):"",month:t?t.substr(5,2):"",endYear:"",endMonth:"",propertyCost:"",getPeriod:"true",categoryUuid:"",currentPage:1,accountUuid:"",pageSize:s.C}),(function(a){if(i.a.toast.hide(),Object(c.u)(a)){var n=e(o.e(a)),r=t||n,s=a.data.periodDtoJson?e(o.d(a.data.periodDtoJson)):[];e({type:u.e,receivedData:a.data.result.detailList,period:a.data.periodDtoJson,issuedate:r,endissuedate:"",getPeriod:"true",currentPage:1,issues:s,allIncomeAmount:a.data.result.allIncomeAmount,allExpenseAmount:a.data.result.allExpenseAmount,allBalanceAmount:a.data.result.allBalanceAmount,pageCount:a.data.result.pages,property:a.data.result.propertyName})}})),e(l())}},l=function(){return function(t){Object(r.a)("getRunningAccount","GET","",(function(e){Object(c.u)(e)&&t({type:u.j,receivedData:e.data})}))}},g=function(t,e,a){return function(c){var r="string"===typeof e?["".concat(t,"Temp"),e]:["".concat(t,"Temp")].concat(Object(n.a)(e));"flags"===e[0]&&(r=e),c({type:u.b,tab:t,placeArr:r,value:a})}},f=function(t,e,a,n){var d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",g=arguments.length>6?arguments[6]:void 0,f=(arguments.length>7&&arguments[7],arguments.length>8?arguments[8]:void 0),p=arguments.length>9?arguments[9]:void 0;return function(S,b){var L=b().zhmxbState,h=n?"\u5168\u90e8"===n?"":n.split(s.B)[0]:"",v=""===a?L.get("currentPage"):a;t="\u5168\u90e8"==t?"":t;L.getIn(["flags","accountType"]),L.getIn(["flags","defaultCategory"]);var y="\u5168\u90e8"===n?"":L.getIn(["flags","acountName"]);S(m(e,d,n)),!f&&i.a.toast.loading("\u52a0\u8f7d\u4e2d...",0),Object(r.a)("getAccountDetailList","POST",JSON.stringify({year:e?e.substr(0,4):"",month:e?e.substr(5,2):"",endYear:d?d.substr(0,4):"",endMonth:d?d.substr(5,2):"",getPeriod:"true",propertyCost:l,accountUuid:h,categoryUuid:t,currentPage:v,pageSize:s.C}),(function(a){if(!f&&i.a.toast.hide(),Object(c.u)(a)){f&&p.setState({isLoading:!1});var r=a.data.periodDtoJson?S(o.d(a.data.periodDtoJson)):[];S({type:u.e,receivedData:a.data.result.detailList,period:a.data.periodDtoJson,issues:r,issuedate:e,endissuedate:d,currentPage:v,categorValue:t,accountUuid:n,acountName:y,allIncomeAmount:a.data.result.allIncomeAmount,allExpenseAmount:a.data.result.allExpenseAmount,allBalanceAmount:a.data.result.allBalanceAmount,pageCount:a.data.result.pages,getPeriod:"true",property:a.data.result.propertyName,shouldConcat:g})}}))}},m=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(i,o){o().zhmxbState;var d=a?"\u5168\u90e8"===a?"":a.split(s.B)[0]:"";Object(r.a)("getAccountDetailCategory","POST",JSON.stringify({year:t?t.substr(0,4):"",month:t?t.substr(5,2):"",endYear:e?e.substr(0,4):"",endMonth:e?e.substr(5,2):"",accountUuid:d}),(function(t){Object(c.u)(t)&&i({type:u.f,receivedData:t.data,accountUuid:a,defaultCategory:n})}))}},p=function(t,e,a,n){return function(d){i.a.toast.loading(s.p,0),d(l());var g=e.get("uuid"),f="".concat(e.get("uuid")).concat(s.B).concat(e.get("name"));e.get("monthExpenseAmount"),e.get("monthIncomeAmount"),e.get("type");Object(r.a)("getAccountDetailList","POST",JSON.stringify({year:a?a.substr(0,4):"",month:a?a.substr(5,2):"",endYear:n?n.substr(0,4):"",endMonth:n?n.substr(5,2):"",categoryUuid:"",accountUuid:g,currentPage:1,pageSize:s.C,getPeriod:"true"}),(function(r){if(i.a.toast.hide(),Object(c.u)(r)){d(m(a,n,f));var s=r.data.periodDtoJson?d(o.d(r.data.periodDtoJson)):[];d({type:u.e,receivedData:r.data.result.detailList,period:r.data.periodDtoJson,issues:s,issuedate:a,accountUuid:f,endissuedate:n,categoryType:"\u5168\u90e8",accountType:e.get("name"),currentPage:1,categorValue:"",allIncomeAmount:r.data.result.allIncomeAmount,allExpenseAmount:r.data.result.allExpenseAmount,allBalanceAmount:r.data.result.allBalanceAmount,pageCount:r.data.result.pages,getPeriod:"true",property:r.data.result.propertyName}),t.push("Zhmxb")}}))}},S=function(t,e){return{type:u.i,showChild:t,uuid:e}},b=function(t,e){return{type:u.k,value:e,dataType:t}}},1313:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a(32),a(55),a(115),a(61),a(33),a(1053),a(131),a(70),a(29),a(82),a(76);var n=a(4),c=a(1),r=a(1200),u=a(14),i=Object(c.fromJS)({issues:[{value:"",key:""}],currentAcid:"",currentAss:"",detailsTemp:[],QcData:{},flags:{issuedate:"",endissuedate:"",accountName:"",curAccountUuid:"",paymentType:"",categoryType:"\u5168\u90e8",accountType:"\u8bf7\u9009\u62e9\u8d26\u6237",curCategory:"",property:"",amountType:"DETAIL_AMOUNT_TYPE_HAPPEN",allHappenAmount:0,allHappenBalanceAmount:0,allIncomeAmount:0,allExpenseAmount:0,allBalanceAmount:0,menuLeftIdx:0,menuType:"",bussinessShowChild:[]},pageCount:0,currentPage:1,runningCategory:[],accountList:[],ylDataList:[]});function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=arguments.length>1?arguments[1]:void 0;return((t={},Object(n.a)(t,r.g,(function(){return i})),Object(n.a)(t,r.c,(function(){return e.set("mxbAclist",Object(c.fromJS)(a.receivedData.data))})),Object(n.a)(t,r.h,(function(){return e.updateIn(["ledger","jvlist"],(function(t){return t.reverse()}))})),Object(n.a)(t,r.a,(function(){return e=a.bool?e.set("endissuedate",a.begin):e.set("issuedate",a.begin)})),Object(n.a)(t,r.e,(function(){if("true"===a.getPeriod){a.period;e=e.set("period",Object(c.fromJS)(a.period)).set("issues",Object(c.fromJS)(a.issues))}var t=[],n=a.receivedData.filter((function(t){return t.uuid||(e=e.set("QcData",t)),t.uuid}));a.shouldConcat?t=e.get("detailsTemp").toJS().concat(n):t=n;var r=[];return t.forEach((function(t,e){JSON.stringify(r);-1===JSON.stringify(r).indexOf(JSON.stringify(t.uuid))&&r.push({idx:e,uuid:t.uuid})})),a.categoryType&&(e=e.setIn(["flags","categoryType"],a.categoryType)),a.accountType&&(e=e.setIn(["flags","accountType"],a.accountType)),e.set("detailsTemp",Object(c.fromJS)(t)).set("currentPage",a.currentPage).set("pageCount",a.pageCount).setIn(["flags","issuedate"],Object(c.fromJS)(a.issuedate)).setIn(["flags","endissuedate"],Object(c.fromJS)(a.endissuedate)).setIn(["flags","curCategory"],Object(c.fromJS)(a.categorValue)).setIn(["flags","curAccountUuid"],Object(c.fromJS)(a.accountUuid)).setIn(["flags","property"],a.property).setIn(["flags","allHappenAmount"],Object(c.fromJS)(a.allHappenAmount)).setIn(["flags","allHappenBalanceAmount"],Object(c.fromJS)(a.allHappenBalanceAmount)).setIn(["flags","allIncomeAmount"],Object(c.fromJS)(a.allIncomeAmount)).setIn(["flags","allExpenseAmount"],Object(c.fromJS)(a.allExpenseAmount)).setIn(["flags","allBalanceAmount"],Object(c.fromJS)(a.allBalanceAmount)).setIn(["flags","menuType"],"").set("ylDataList",Object(c.fromJS)(r))})),Object(n.a)(t,r.f,(function(){var t=[];if(a.receivedData.result.forEach((function(e){return t.push(e.uuid)})),a.accountUuid&&"\u5168\u90e8"!==a.accountUuid){var n=a.accountUuid.split(u.B);e=e.setIn(["flags","accountName"],Object(c.fromJS)(n[1])).setIn(["flags","curAccountUuid"],Object(c.fromJS)(a.accountUuid))}else e=e.setIn(["flags","accountName"],"\u5168\u90e8").setIn(["flags","curAccountUuid"],"\u5168\u90e8");var r=[],i=function(t,e){return t.forEach((function(t){t.get("childList")&&t.get("childList").size?e.push({value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")),label:t.get("name"),children:s(t.get("childList"))}):e.push({value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")),label:t.get("name"),children:[]})}))},s=function(t){var e=[];return i(t,e),e},o=a.receivedData.result[0];if(a.receivedData.result.length>0&&"\u5168\u90e8"===o.name){r.push({value:"".concat(o.uuid).concat(u.B).concat(o.name).concat(u.B).concat(o.propertyCost),label:o.name,children:[{value:"".concat(u.B,"\u5168\u90e8").concat(u.B).concat(o.propertyCost),label:"\u5168\u90e8"}]});var d=a.receivedData.result[0].childList;Object(c.fromJS)(d).forEach((function(t){if(t.get("childList").size){var e=[{value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name"),children:s(t.get("childList"))}];r.push({value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name"),children:e})}else r.push({value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name"),children:[{value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name")}]})}))}else Object(c.fromJS)(a.receivedData.result).forEach((function(t){if(t.get("childList").size){var e=s(t.get("childList")),a=[{value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name")}].concat(e);r.push({value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name"),children:a})}else r.push({value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name"),children:[{value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name")}]})}));return e.set("runningCategory",Object(c.fromJS)(r)).setIn(["flags","runningShowChild"],Object(c.fromJS)(t))})),Object(n.a)(t,r.d,(function(){var t=[];if(a.receivedData.result.forEach((function(e){return t.push(e.uuid)})),a.accountUuid&&"\u5168\u90e8"!==a.accountUuid){var n=a.accountUuid.split(u.B);e=e.setIn(["flags","accountName"],Object(c.fromJS)(n[1])).setIn(["flags","curAccountUuid"],Object(c.fromJS)(a.accountUuid))}else e=e.setIn(["flags","accountName"],"\u5168\u90e8").setIn(["flags","curAccountUuid"],"\u5168\u90e8");var r=[],i=function(t,e){return t.forEach((function(t){t.get("childList")&&t.get("childList").size?e.push({value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")),label:t.get("name"),children:s(t.get("childList"))}):e.push({value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")),label:t.get("name"),children:[]})}))},s=function(t){var e=[];return i(t,e),e},o=a.receivedData.result[0];if(a.receivedData.result.length>0&&"\u5168\u90e8"===o.name){r.push({value:"".concat(o.uuid).concat(u.B).concat(o.name).concat(u.B).concat(o.propertyCost),label:o.name,children:[{value:"".concat(u.B,"\u5168\u90e8").concat(u.B).concat(o.propertyCost),label:"\u5168\u90e8"}]});var d=a.receivedData.result[0].childList;Object(c.fromJS)(d).forEach((function(t){if(t.get("childList").size){var e=s(t.get("childList"));e[0]={value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name")},r.push({value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name"),children:e})}else r.push({value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name"),children:[{value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name")}]})}))}else Object(c.fromJS)(a.receivedData.result).forEach((function(t){if(t.get("childList").size){var e=s(t.get("childList"));e[0]={value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name")},r.push({value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name"),children:e})}else r.push({value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name"),children:[{value:"".concat(t.get("uuid")).concat(u.B).concat(t.get("name")).concat(u.B).concat(t.get("propertyCost")),label:t.get("name")}]})}));return e.set("runningCategory",Object(c.fromJS)(r))})),Object(n.a)(t,r.j,(function(){return e.set("accountList",Object(c.fromJS)(a.receivedData.resultList[0].childList))})),Object(n.a)(t,r.b,(function(){return a.placeArr&&(e=e.setIn(a.placeArr,a.value)),a.place&&(e=e.set(a.place,a.value)),e})),Object(n.a)(t,r.k,(function(){return e.setIn(["flags",a.dataType],a.value)})),Object(n.a)(t,r.i,(function(){var t=e.getIn(["flags","bussinessShowChild"]);if(a.showChild){var n=t.splice(t.findIndex((function(t){return t===a.uuid})),1);return e.setIn(["flags","bussinessShowChild"],n)}var c=t.push(a.uuid);return e.setIn(["flags","bussinessShowChild"],c)})),t)[a.type]||function(){return e})()}},1849:function(t,e,a){},966:function(t,e,a){"use strict";a.r(e),a.d(e,"reducer",(function(){return T})),a.d(e,"view",(function(){return I}));a(32),a(115),a(33),a(31),a(56),a(29),a(82);var n,c,r=a(7),u=a(8),i=a(9),s=a(10),o=a(0),d=a.n(o),l=a(1),g=a(47),f=(a(1049),a(2)),m=a(542),p=a(11),S=a(1255),b=a(1023),L=a(14),h=(a(61),a(76),a(24)),v=a(1039),y=(a(1082),Object(h.immutableRenderDecorator)(n=function(t){Object(s.a)(a,t);var e=Object(i.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var t=this.props,e=t.ba,a=t.style,n=t.dispatch,c=t.className,r=t.leve,u=t.haveChild,i=t.showChild,s=t.history,o=t.ylDataList,l={background:{1:"#fff",2:"#D1C0A5",3:"#7E6B5A",4:"#59493f"}[r],minWidth:(r-1)/100*10+"rem"},g=0;o.forEach((function(t,a){t.get("uuid")===e.get("uuid")&&(g=t.get("idx"))}));var f=e.get("cardAbstract")?e.get("cardAbstract"):"",m="".concat(e.get("runningAbstract")).concat(f);return d.a.createElement("div",{className:"ba "+c,style:a},d.a.createElement("div",null,d.a.createElement("span",{className:"name",onClick:function(t){sessionStorage.setItem("ylPage","zhmxb"),n(v.b.getYllsSingleAccount(s,0,e.get("uuid"),g,!0))}},1==r?"":d.a.createElement("span",{className:"ba-flag",style:l}),d.a.createElement("span",{className:"name-name"},"".concat(e.get("runningDate"),"_").concat(m))),d.a.createElement("span",{className:"btn",onClick:function(){return n(S.a(i,e.get("uuid")))}},d.a.createElement(p.l,{type:"arrow-down",style:{visibility:u?"visible":"hidden",transform:i?"rotate(180deg)":""}}))),d.a.createElement("div",{className:"ba-info"},d.a.createElement("span",{className:"ba-type-name"},e.get("runningIndex")>0?e.get("flowNumber")+"_"+e.get("runningIndex"):e.get("flowNumber")),d.a.createElement("span",null,0===e.get("incomeAmount")?"\u4ed8\u6b3e":"\u6536\u6b3e"),d.a.createElement(p.a,{showZero:!0},0===e.get("incomeAmount")?e.get("expenseAmount"):e.get("incomeAmount")),d.a.createElement(p.a,{showZero:!0},e.get("balanceAmount"))))}}]),a}(d.a.Component))||n),C=(a(116),a(131),function(t){Object(s.a)(a,t);var e=Object(i.a)(a);function a(t){var n;Object(r.a)(this,a),n=e.call(this,t);var c=[];return n.props.data.getIn([n.props.leftIdx,"children"]).map((function(t,e){c.push(t.get("value"))})),n.state={showList:c},n}return Object(u.a)(a,[{key:"componentWillReceiveProps",value:function(t){if(!Object(l.is)(t.leftIdx,this.props.leftIdx)){var e=[];t.data.getIn([t.leftIdx,"children"]).map((function(t,a){e.push(t.get("value"))})),this.setState({showList:e})}}},{key:"render",value:function(){var t=this,e=this.props,a=e.data,n=e.onChange,c=e.leftIdx,r=e.leftClick,u=this.state.showList,i=a.getIn([c,"value"]),s=a.getIn([c,"children"]);return d.a.createElement(p.h,{className:"zhmx-category"},d.a.createElement(p.s,{flex:"1",className:"zhmx-category-menu-scroll"},d.a.createElement("div",{className:"zhmx-category-menu"},d.a.createElement("div",{className:"menu-left"},a.map((function(t,e){return d.a.createElement(p.r,{key:t.get("value"),className:"menu-left-item overElli ".concat(i==t.get("value")?"menu-left-item-selected":""),onClick:function(){return r(e)}},t.get("label"))}))),d.a.createElement("div",{className:"menu-right"},function e(a,c){return a&&a.map((function(a,r){if(a.get("children")&&a.get("children").size){var s=u.some((function(t){return t===a.get("value")}));return d.a.createElement("div",{key:a.get("value")},d.a.createElement(p.r,{className:"menu-right-item",style:{paddingLeft:"".concat(c,"rem")},onClick:function(){return n([i,a.get("value")])}},d.a.createElement("div",{className:"overElli"},a.get("label")),d.a.createElement(p.l,{style:s?{transform:"rotate(180deg)"}:"",type:"arrow-down",onClick:function(e){e.stopPropagation();var n=u;if(s){var c=n.findIndex((function(t){return t===a.get("value")}))-1;c>-1?n=n.splice(c,1):n.shift()}else n.push(a.get("value"));t.setState({showList:n})}})),s?e(a.get("children"),c+.05):"")}return d.a.createElement(p.r,{key:a.get("value"),className:"menu-right-item overElli",style:{paddingLeft:"".concat(c,"rem")},onClick:function(){return n([i,a.get("value")])}},a.get("label"))}))}(s,.1)))))}}]),a}(d.a.Component)),I=(a(1849),Object(g.c)((function(t){return t}))(c=function(t){Object(s.a)(a,t);var e=Object(i.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){f.a.setTitle({title:"\u8d26\u6237\u660e\u7ec6\u8868"}),f.a.setIcon({showIcon:!1});this.props.zhmxbState.getIn(["flags","menuType"]);f.a.setRight({show:!1}),"zhmxb"!==sessionStorage.getItem("ylPage")&&"zhyeb"!==sessionStorage.getItem("fromPage")?(this.props.dispatch(S.c("menuType","")),this.props.dispatch(S.f())):sessionStorage.removeItem("fromPage")}},{key:"componentWillReceiveProps",value:function(t){var e=this;Object(l.is)(t.zhmxbState.getIn(["flags","menuType"]),this.props.zhmxbState.getIn(["flags","menuType"]))||("LB_CATEGORY"===t.zhmxbState.getIn(["flags","menuType"])?f.a.setRight({show:!0,control:!0,text:"\u53d6\u6d88",onSuccess:function(t){return e.props.dispatch(S.c("menuType",""))},onFail:function(t){alert(t)}}):f.a.setRight({show:!1}))}},{key:"render",value:function(){var t=this.props,e=t.dispatch,a=(t.cxAccountState,t.history),n=t.zhmxbState,c=(t.allState,n.get("runningCategory")),r=n.get("accountList"),u=n.getIn(["flags","issuedate"]),i=n.get("issues"),s=(i.getIn([0,"value"]),i.getIn([i.size-1,"value"]),n.getIn(["flags","endissuedate"])),o=i.findIndex((function(t){return t.get("value")===u})),l=i.slice(0,o),g=n.get("detailsTemp"),h=n.get("QcData"),v=n.get("currentPage"),I=n.get("pageCount"),T=(n.getIn(["flags","amountType"]),n.getIn(["flags","property"])),O=n.getIn(["flags","curCategory"]),A=n.getIn(["flags","categoryType"]),_=n.getIn(["flags","curAccountUuid"]),E=n.getIn(["flags","accountType"]),j=n.getIn(["flags","menuLeftIdx"]),D=n.getIn(["flags","menuType"]),N=n.getIn(["flags","propertyCost"]),B=(n.getIn(["flags","allHappenAmount"]),n.getIn(["flags","allHappenBalanceAmount"]),n.getIn(["flags","allIncomeAmount"]),n.getIn(["flags","allExpenseAmount"]),n.getIn(["flags","allBalanceAmount"])),J=n.getIn(["flags","bussinessShowChild"]),x=n.get("ylDataList"),G={"\u6536\u5165":"\u6536\u6b3e","\u652f\u51fa":"\u4ed8\u6b3e","\u6838\u9500":"\u6838\u9500","":"\u6536\u6b3e"}[T],R=null;return({LB_CATEGORY:function(){R=d.a.createElement(C,{data:c,leftIdx:j,leftClick:function(t){return e(S.c("menuLeftIdx",t))},onChange:function(t){var a=t[1].split(L.B);e(S.e(a[0],u,1,_,s,a[2])),e(S.b("",["flags","categoryType"],a[1])),e(S.b("",["flags","propertyCost"],a[2])),e(S.c("menuType",""))}})}}[D]||function(){return f.a.setTitle({title:"\u8d26\u6237\u660e\u7ec6\u8868"}),null})(),R||d.a.createElement(p.h,{className:"zhmxb"},d.a.createElement(m.f,{issuedate:u,source:i,callback:function(t){e(S.e("",t,1,_,"","",!1,!0))},onOk:function(t){e(S.e("",t.value,1,_,"","",!1,!0))},showSwitch:!0,endissuedate:s,nextperiods:l,onBeginOk:function(t){e(S.e("",t.value,1,_,"","",!1,!0))},onEndOk:function(t){e(S.e("",u,1,_,t.value,"",!1,!0))},changeEndToBegin:function(){return e(S.e("",u,1,_,"","",!1,!0))}}),d.a.createElement("div",{className:"zhmx-top-select"},d.a.createElement("div",{className:"zhmx-account-select"},d.a.createElement(b.a,{accountList:r&&r.map((function(t){return{key:t.get("name"),value:"".concat(t.get("uuid")).concat(L.B).concat(t.get("name"))}})),accountUuid:_,accountName:E,noInsert:!0,onOk:function(t){if(t){var a=t.split(L.B);e(S.e(O,u,1,t,s,"")),e(S.b("",["flags","accountType"],a[1])),e(S.b("",["flags","categoryName"],a[1]))}}})),d.a.createElement("div",{className:"zhmx-with-account"},d.a.createElement(p.r,{className:"lrls-row"},d.a.createElement(p.r,{className:"lrls-type",onClick:function(){c.size&&e(S.c("menuType","LB_CATEGORY"))}},d.a.createElement("span",null,c.size?A:"\u6682\u65e0\u7c7b\u522b"),d.a.createElement(p.l,{type:"triangle"}))))),"\u5168\u90e8"==A?d.a.createElement(p.r,{className:"ba-title-qc"},d.a.createElement("div",{className:"ba-title-item"},"\u671f\u521d\u4f59\u989d"),d.a.createElement("div",{className:"ba-title-item"},d.a.createElement(p.a,{showZero:!0},h.balanceAmount))):"",d.a.createElement(p.s,{flex:"1",uniqueKey:"zhmx-scroll",className:"scroll-item",savePosition:!0},d.a.createElement("div",{className:"ba-list flow-content"},function t(n,c){return n.map((function(n,r){var i=J.indexOf(n.get("uuid"))>-1,s=c>1?"#FEF3E3":"#fff";return n.get("childList").size?d.a.createElement("div",{key:r},d.a.createElement(y,{leve:c,className:"balance-running-tabel-width",style:{backgroundColor:s},ba:n,haveChild:!0,showChild:i,history:a,dispatch:e,issuedate:u,ylDataList:x}),i?t(n.get("childList"),c+1):""):d.a.createElement("div",{key:r},d.a.createElement(y,{leve:c,className:"balance-running-tabel-width",ba:n,style:{backgroundColor:s},history:a,dispatch:e,issuedate:u,ylDataList:x}))}))}(g,1)),d.a.createElement(m.c,{diff:1,classContent:"flow-content",callback:function(t){e(S.e(O,u,v+1,_,s,N,!0,!1,!0,t))},isGetAll:v>=I,itemSize:g.size})),"\u5168\u90e8"==A?d.a.createElement(p.r,{className:"ba-title-qc"},d.a.createElement("div",{className:"ba-title-item"},"\u671f\u672b\u4f59\u989d"),d.a.createElement("div",{className:"ba-title-item"},d.a.createElement(p.a,{showZero:!0},B))):d.a.createElement(p.r,{className:"ba-title"},d.a.createElement("div",{className:"ba-title-item"},G,"\u51c0\u989d"),d.a.createElement("div",{className:"ba-title-item"}),d.a.createElement("div",{className:"ba-title-item"}),d.a.createElement("div",{className:"ba-title-item"},d.a.createElement(p.a,{showZero:!0},B))))}}]),a}(d.a.Component))||c),T={zhmxbState:a(1313).a,yllsState:v.a}}}]);